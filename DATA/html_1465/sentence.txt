More than 1 year has passed since last update.nullable reference type (null許容参照型) の配列からnullを取り除きたい後述するように警告が出てしまうことが課題です。nullable生活を始めたら瞬時にこの問題に当たったのですが、巷になかなか情報が無いですね。nullを除外しているにもかかわらずWhereの結果は IEnumerable&lt;string?&gt; なので、Selectのところで nullかも (Dereference of a possibly null reference) と警告が出ます。今のところ、ここで示されている WhereNotNull という拡張メソッドを用意するのが一番確実に思いました。
https://github.com/dotnet/roslyn/issues/39586#issuecomment-547909968コメントで指摘頂きました。ReSharperを利用している場合、Redundant 'IEnumerable.OfType&lt;T&gt;' call. Consider comparing with 'null' instead. との指摘が出ます。stringとstring?は属性の有無だけの差ですから型変換とはみなされず、そうなるのだと考えます。毎度の指摘抑止も大変ですから、拡張メソッドにするのが良さそうですね。nullをフィルタする意図が即座には伝わりにくい点も緩和できます。個人的にこう呼んでいます。この例はあまりよくないので、この程度であればびっくりをいきなり付けていいですね。せっかくnullableしているのにびっくり演算子付けたら負けな気がするし、かといって拡張メソッドはあまり作りたくないし、悩ましいところはあります。あまりやりたくない案この方法は、ほかには2回Parseしたくないときに使えたりします。


