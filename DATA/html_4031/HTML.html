<!DOCTYPE html><html><head><meta charset="utf-8" /><title>Prism-Samples-Wpfの勉強メモ - Qiita</title><meta content="width=device-width,initial-scale=1,shrink-to-fit=no,viewport-fit=cover" name="viewport" /><meta content="#55c500" name="theme-color" /><meta content="XWpkTG32-_C4joZoJ_UsmDUi-zaH-hcrjF6ZC_FoFbk" name="google-site-verification" /><meta content="telephone=no" name="format-detection" /><link rel="canonical" href="https://qiita.com/myoga/items/5d883d1bc61819f750c4" /><link href="/manifest.json" rel="manifest" /><link href="/opensearch.xml" rel="search" title="Qiita" type="application/opensearchdescription+xml" /><link as="script" href="https://www.googletagservices.com/tag/js/gpt.js" rel="preload" /><link href="https://securepubads.g.doubleclick.net" rel="preconnect" /><script async="" src="https://www.googletagservices.com/tag/js/gpt.js"></script><meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="8z/1xOuqhiUUPinV5lwQxRXKTcJ4NVbIRdt0z4Y6PYnsAPIowxp8ES4TYtDnNBKUilPn6ar9H3eeoG4EhYPipA==" /><link rel="shortcut icon" type="image/x-icon" href="https://cdn.qiita.com/assets/favicons/public/production-c620d3e403342b1022967ba5e3db1aaa.ico" /><link rel="apple-touch-icon" type="image/png" href="https://cdn.qiita.com/assets/favicons/public/apple-touch-icon-ec5ba42a24ae923f16825592efdc356f.png" /><link rel="stylesheet" media="all" href="https://cdn.qiita.com/assets/public/article-2eaa7dbedc42a8ea65c722cda46d0ebb.min.css" /><script src="https://cdn.qiita.com/assets/public/v3-article-bundle-63de2d91fef827269d3f6b958db2335b.min.js" defer="defer"></script><meta name="twitter:card" content="summary_large_image"><meta content="@Qiita" name="twitter:site" /><meta property="og:type" content="article"><meta property="og:title" content="Prism-Samples-Wpfの勉強メモ - Qiita"><meta property="og:image" content="https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0&amp;w=1200&amp;mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND1VSEpwYzIwdFUyRnRjR3hsY3kxWGNHYmpnYTdsaTRubHZMZmpnNkhqZzZJJnR4dC1jb2xvcj0lMjMzMzMmdHh0LWZvbnQ9SGlyYWdpbm8lMjBTYW5zJTIwVzYmdHh0LXNpemU9NTQmdHh0LWNsaXA9ZWxsaXBzaXMmdHh0LWFsaWduPWNlbnRlciUyQ21pZGRsZSZzPWIyZmI2MmM5ODk1ZTljM2Y2ZDZmY2ZlMzM5N2IwZGYx&amp;mark-align=center%2Cmiddle&amp;blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RRzE1YjJkaCZ0eHQtY29sb3I9JTIzMzMzJnR4dC1mb250PUhpcmFnaW5vJTIwU2FucyUyMFc2JnR4dC1zaXplPTQ1JnR4dC1hbGlnbj1yaWdodCUyQ2JvdHRvbSZzPWZmY2FjYWI5ZGMzNjNhNjAzMTQ0NDBjMDFhMGFhNmRh&amp;blend-align=center%2Cmiddle&amp;blend-mode=normal&amp;s=3b378303ab806062ead67c606d7ae2ea"><meta property="og:description" content="

Prism-Samples-Wpf の勉強メモ

個人の勉強メモです。




経緯

本業は組み込みなのですが、業務補助ツールなどでWPFアプリを作成することがあります。
MVVMインフラには Livet を使っているのですが、..."><meta content="https://qiita.com/myoga/items/5d883d1bc61819f750c4" property="og:url" /><meta content="Qiita" property="og:site_name" /><meta content="564524038" property="fb:admins" /><meta content="C#,Xaml,PRISM" name="keywords" /><script>!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window, document,'script',
'https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '668972150489891');
fbq('track', 'PageView');</script><style data-emotion-css="17jxvjw 11t2ec1 1dvr2p8 18lkoru 1g4cku8 1iupg5d ijvq0v 15cocm3 12rp90f 115f4t 1b8uj5v 79elbk 16hhh7b fcbn8c 1gj7nt 154zy0m yikrym 1jqivyb 1ode1bp le4d8r 1hbd3g7 1nzh4zz 38fzdi helsa7 8qb8m4 2imjyh he5w1s 70qvj9 3ojehk 100alwu 1dtnjt5 10ougpm 1ay9vb9 m19uds cgzq40 1wa99t2 1l3zk9f 4czcte 1yzj1fm 1uv1qiv 109dbrr 5jpx49 mnxgyc 1vlpknv fsjkhv 1b17vb0 7i7f4d"}>.css-17jxvjw{display:grid;display:-ms-grid;grid-template-columns:80px minmax(0,1fr) 300px;-ms-grid-columns:80px minmax(0,1fr) 300px;grid-template-rows:minmax(270px,auto) 1fr;-ms-grid-rows:minmax(270px,auto) 1fr;max-width:1280px;margin-right:auto;margin-left:auto;padding-top:24px;padding-right:24px;padding-left:24px;}@media (max-width:1200px){.css-17jxvjw{padding-bottom:0;padding-left:0;padding-right:0;}}@media (max-width:992px){.css-17jxvjw{grid-template-columns:80px 452px 300px;-ms-grid-columns:80px 452px 300px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}}@media (max-width:770px){.css-17jxvjw{display:block;}}@media (max-width:480px){.css-17jxvjw{padding-top:0;}}.css-11t2ec1{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;z-index:5;position:-webkit-sticky;position:sticky;top:calc(56px + 24px + 16px + 32px - 16px);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:16px;width:80px;}.css-11t2ec1:after{content:'';display:table;}.css-11t2ec1:before{content:'';display:table;}@media (max-width:770px){.css-11t2ec1{display:none;}}.css-1dvr2p8{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-18lkoru{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;background-color:#FFFFFF;}.css-1g4cku8{display:inline-block;vertical-align:middle;height:20px;width:20px;fill:#55C500;}.css-1iupg5d{color:#55C500;cursor:pointer;font-size:14px;font-weight:bold;}.css-ijvq0v{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-15cocm3{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#FFFFFF;border:2px solid #6E6F70;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:2px 0px 0px;width:40px;}.css-12rp90f{display:inline-block;vertical-align:bottom;height:17.77777777777778px;width:16px;fill:#6E6F70;}.css-115f4t{color:#6E6F70;font-size:14px;font-weight:bold;}.css-1b8uj5v{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;margin-bottom:16px;padding:0;}.css-79elbk{position:relative;}.css-16hhh7b{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;padding:0;}.css-fcbn8c{display:none;bottom:initial;left:initial;right:initial;top:initial;left:100%;top:calc(-8px - (14px * 1.8) - 16px - 4px);}.css-1gj7nt{color:rgba(0,0,0,0.6);font-size:14px;font-weight:bold;line-height:1.8;padding:8px 16px;}.css-154zy0m{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.87);cursor:pointer;font-size:16px;font-weight:normal;line-height:1.8;padding:4px 16px;}.css-154zy0m:hover{-webkit-text-decoration:none;text-decoration:none;background-color:#F2F2F2;}.css-yikrym{width:20px;}.css-1jqivyb{color:rgba(0,0,0,0.6);font-size:13px;}.css-1ode1bp{background-color:rgba(0,0,0,0.12);height:1px;width:100%;margin:8px 0;}.css-le4d8r{display:inline-block;vertical-align:middle;height:13px;width:13px;fill:rgba(0,0,0,0.6);}.css-1hbd3g7{height:250px;}.css-1nzh4zz{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:16px 32px;background-color:#FBE69E;color:rgba(0,0,0,0.87);line-height:1.5;font-weight:600;}@media (max-width:770px){.css-1nzh4zz{padding:16px;}}.css-38fzdi{color:#CA832A;margin-right:4px;}.css-helsa7{background-color:#FFFFFF;padding:32px;margin-bottom:24px;}@media (max-width:992px){.css-helsa7{margin:0 auto 40px;}}@media (max-width:480px){.css-helsa7{margin:0 0 40px;padding:32px 16px;}}.css-8qb8m4{margin-bottom:48px;}.css-2imjyh{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-he5w1s{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;width:100%;}@media (max-width:770px){.css-he5w1s{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}}.css-70qvj9{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.css-3ojehk{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;margin-right:4px;}.css-100alwu{display:inline-block;border-radius:50%;line-height:1;overflow:hidden;vertical-align:middle;}.css-1dtnjt5{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-10ougpm{color:rgba(0,0,0,0.87);font-size:14px;font-weight:600;line-height:1.8;margin-right:4px;text-wrap:break-word;word-break:break-all;}.css-1ay9vb9{margin-right:16px;}.css-m19uds{color:rgba(0,0,0,0.6);font-size:14px;line-height:1.8;}.css-cgzq40{color:rgba(0,0,0,0.87);font-size:32px;font-weight:bold;line-height:1.4;margin-top:8px;text-wrap:break-word;word-break:break-all;}.css-1wa99t2{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.6);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:8px;}.css-1l3zk9f{color:rgba(0,0,0,0.6);font-size:20px;margin-right:8px;}.css-4czcte{margin-right:4px;color:inherit;font-size:14px;line-height:1.8;}.css-4czcte:not(:last-child)::after{content:',';margin-right:4px;}.css-1yzj1fm{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:32px;}.css-1uv1qiv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-size:20px;height:32px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin-right:16px;outline:none;padding:0;width:32px;}.css-109dbrr{background-color:#F9F9F9;border-top:1px solid rgba(0,0,0,0.12);bottom:0;box-shadow:0px 1px 4px rgba(0,0,0,0.14);display:none;height:calc(env(safe-area-inset-bottom,0px) + 56px);-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding-bottom:env(safe-area-inset-bottom);position:-webkit-sticky;position:sticky;width:100%;z-index:2000;}@media (max-width:770px){.css-109dbrr{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}.css-5jpx49{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:space-evenly;-webkit-justify-content:space-evenly;-ms-flex-pack:space-evenly;justify-content:space-evenly;width:100%;}.css-mnxgyc{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1vlpknv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;margin-right:4px;background-color:#FFFFFF;}.css-fsjkhv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1b17vb0{color:#6E6F70;font-size:14px;font-weight:bold;margin-left:4px;}.css-7i7f4d{display:none;bottom:initial;left:initial;right:initial;top:initial;bottom:32px;right:0;}</style></head><body><div class="allWrapper"><div><div id="GlobalHeader-react-component-3852d6a8-dc9c-4dae-9b45-77564c89f5df"><div class="st-Header"><div class="st-Header_container"><div class="st-Header_start"><a href="/" class="st-Header_logo"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 426.57 130"><circle cx="167.08" cy="21.4" r="12.28"></circle><path d="M250.81 29.66h23.48v18.9h-23.48z"></path><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z"></path><circle cx="216.33" cy="21.4" r="12.28"></circle></svg></a><div class="st-Header_communitySelector" tabindex="0"><span class="fa fa-caret-down"></span></div><div class="st-Header_dropdown"><div class="st-Header_dropdownHeading">Qiita Teams that are logged in</div><div class="st-Header_dropdownItemNote">You are not logged in to any team</div><hr class="st-Header_dropdownDivider st-Header_dropdownDivider-shrink"/><a href="https://teams-center.qiita.com/find_team" class="st-Header_dropdownItem"><span class="fa fa-fw fa-sign-in st-Header_dropdownItemIcon"></span><div>Log in to Qiita Team</div></a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Community</div><a href="/organizations" class="st-Header_dropdownItem">Organization</a><a href="/official-events/open" class="st-Header_dropdownItem">Event</a><a href="/advent-calendar" class="st-Header_dropdownItem">Advent Calendar</a><a href="https://qiitadon.com/" class="st-Header_dropdownItem" target="_blank">Qiitadon (β)</a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Service</div><a href="https://jobs.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Jobs</a><a href="https://zine.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Zine</a><a href="https://blog.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Blog</a></div><form class="st-Header_search" action="/search" method="get"><span class="fa fa-search st-Header_searchIcon"></span><input type="search" class="st-Header_searchInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form><form class="st-Header_searchModal" action="/search" method="get"><input type="text" class="st-Header_searchModalInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form></div><div class="st-Header_end"><div class="st-Header_searchButton"><span class="fa fa-search"></span></div><a class="st-Header_signupButton" href="/signup?redirect_to=%2Fmyoga%2Fitems%2F5d883d1bc61819f750c4">Signup</a><a class="st-Header_loginLink" href="/login?redirect_to=%2Fmyoga%2Fitems%2F5d883d1bc61819f750c4">Login</a></div><div class="st-Header_overlay"></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="GlobalHeader" data-dom-id="GlobalHeader-react-component-3852d6a8-dc9c-4dae-9b45-77564c89f5df">{"unreadNotificationsCount":null,"realms":[{"humanName":"Qiita","isCurrentRealm":true,"isQiita":true,"isQiitaTeam":false,"loggedInUser":null,"teamId":null,"url":"https://qiita.com/"}],"teamFindUrl":"https://teams-center.qiita.com/find_team","isTeamOnlyUser":null,"currentUser":null}</script>
      
</div><div class="st-HeaderAlert st-HeaderAlert-warning"><div class="st-HeaderAlert_body"></div></div><script type="application/ld+json">{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"/","name":"Qiita"}},{"@type":"ListItem","position":2,"item":{"@id":"/tags/csharp","name":"C#"}}]}</script><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","datePublished":"2019-01-14T18:52:07.000+09:00","dateModified":"2019-02-03T13:31:07.000+09:00","headline":"Prism-Samples-Wpfの勉強メモ","image":"https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0\u0026w=1200\u0026mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND1VSEpwYzIwdFUyRnRjR3hsY3kxWGNHYmpnYTdsaTRubHZMZmpnNkhqZzZJJnR4dC1jb2xvcj0lMjMzMzMmdHh0LWZvbnQ9SGlyYWdpbm8lMjBTYW5zJTIwVzYmdHh0LXNpemU9NTQmdHh0LWNsaXA9ZWxsaXBzaXMmdHh0LWFsaWduPWNlbnRlciUyQ21pZGRsZSZzPWIyZmI2MmM5ODk1ZTljM2Y2ZDZmY2ZlMzM5N2IwZGYx\u0026mark-align=center%2Cmiddle\u0026blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RRzE1YjJkaCZ0eHQtY29sb3I9JTIzMzMzJnR4dC1mb250PUhpcmFnaW5vJTIwU2FucyUyMFc2JnR4dC1zaXplPTQ1JnR4dC1hbGlnbj1yaWdodCUyQ2JvdHRvbSZzPWZmY2FjYWI5ZGMzNjNhNjAzMTQ0NDBjMDFhMGFhNmRh\u0026blend-align=center%2Cmiddle\u0026blend-mode=normal\u0026s=3b378303ab806062ead67c606d7ae2ea","mainEntityOfPage":"https://qiita.com/myoga/items/5d883d1bc61819f750c4","author":{"@type":"Person","address":"","email":null,"identifier":"myoga","name":"myoga","image":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F249816%2Fprofile-images%2F1557637252?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=f03125ab73b3c40f6193ac2d5f0298c7","url":"https://qiita.com/myoga","description":".NET開発に憧れる組み込み技術者です。","memberOf":[]},"publisher":{"@type":"Organization","name":"Qiita","logo":{"@type":"ImageObject","url":"//cdn.qiita.com/assets/public/qiita-logo-c39ded593afa388e2e1ba435b110554e.png"}}}</script><style type="text/css">.wb-CampaignLink {
  background-color: #333333;
  width: 100%;
}

.wb-CampaignLink_container {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  max-width: 1100px;
  margin: 0 auto;
  font-size: 13px;
  padding: 0.8em;
}
.wb-CampaignLink_container > a {
  color: #fff;
}

.wb-CampaignLink_container > a:hover {
  text-decoration: underline;
}</style><div class="wb-CampaignLink"><div class="wb-CampaignLink_container"><a target="_blank" id="header_text_message_1" href="https://zine.qiita.com/interview/202106-uzabase-3/">経済情報で世界を変えていけているユーザベースの可能性</a><a target="_blank" id="header_text_message_2" href="https://zine.qiita.com/interview/202106-uzabase-3/">詳しくはこちら</a></div><script>td.trackEvent(
  'front_events',
  {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"myoga","type":"items","id":"5d883d1bc61819f750c4"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Show","data":{"message":"経済情報で世界を変えていけているユーザベースの可能性","url":"https://zine.qiita.com/interview/202106-uzabase-3/","sub_message":"詳しくはこちら"}}
)</script><script>document.getElementById('header_text_message_1').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"myoga","type":"items","id":"5d883d1bc61819f750c4"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":0,"pos_id":"header_text_message_1","message":"経済情報で世界を変えていけているユーザベースの可能性","url":"https://zine.qiita.com/interview/202106-uzabase-3/","sub_message":"詳しくはこちら"}}
  )
})</script><script>document.getElementById('header_text_message_2').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"myoga","type":"items","id":"5d883d1bc61819f750c4"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":0,"pos_id":"header_text_message_2","message":"経済情報で世界を変えていけているユーザベースの可能性","url":"https://zine.qiita.com/interview/202106-uzabase-3/","sub_message":"詳しくはこちら"}}
  )
})</script></div><script type="application/json" id="js-react-on-rails-context">{"railsEnv":"production","inMailer":false,"i18nLocale":"en","i18nDefaultLocale":"en","href":"https://qiita.com/myoga/items/5d883d1bc61819f750c4","location":"/myoga/items/5d883d1bc61819f750c4","scheme":"https","host":"qiita.com","port":null,"pathname":"/myoga/items/5d883d1bc61819f750c4","search":null,"httpAcceptLanguage":null,"actionPath":"public/items#show","settings":{"analyticsTrackingId":"UA-24675221-12","assetsMap":{},"csrfToken":"IQrjeOlSeKRJ++2c4REoV+n1zaXsexFIJvATHJiPyPw+NeSUweKCkHPWppngeSoGdmxnjj6zWPf9iwnXmzYX0Q==","locale":"en"},"currentUser":null,"isLoggedIn":false,"recaptchaSiteKey":"6LfNkiQTAAAAAM3UGnSquBy2akTITGNMO_QDxMw6","serverSide":false}</script>
<div id="PersonalArticlePage-react-component-28d353b4-0be4-4767-9dd9-92933ddeb324"><div class="p-items_wrapper"><div class=" css-17jxvjw"><div class="css-11t2ec1"><div class="css-1dvr2p8"><button class=" css-18lkoru"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/myoga/items/5d883d1bc61819f750c4/likers" class="css-1iupg5d">32</a></div><div class="css-ijvq0v"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-115f4t">33</span></div><div class="css-1b8uj5v"><span class="fa fa-twitter"></span></div><div class="css-1b8uj5v"><span class="fa fa-facebook"></span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-fcbn8c"><div class="css-1gj7nt">Improve article</div><a href="/drafts/5d883d1bc61819f750c4/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/myoga/items/5d883d1bc61819f750c4/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/myoga/items/5d883d1bc61819f750c4/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/myoga/items/5d883d1bc61819f750c4/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/myoga/items/5d883d1bc61819f750c4.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div><div class="p-items_options"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_toc"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_main"><div class="css-1nzh4zz"><span class="fa fa-fw fa-warning css-38fzdi"></span><p>More than 1 year has passed since last update.</p></div><div class="css-helsa7"><div class="css-8qb8m4"><div class="css-2imjyh"><div class="css-he5w1s"><div class="css-70qvj9"><div class="css-3ojehk"><a href="/myoga"><img class="css-100alwu eyfquo10" src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/249816/profile-images/1557637252" width="24" height="24" loading="lazy"/></a></div><div class="css-1dtnjt5"><a href="/myoga" class="css-10ougpm">@<!-- -->myoga</a><div class="css-1ay9vb9"><span><meta content="2019-01-14T09:52:07Z"/><time dateTime="2019-02-03T04:31:07Z" class="css-m19uds">updated at 2019-02-03</time></span></div></div></div></div></div><h1 class="css-cgzq40">Prism-Samples-Wpfの勉強メモ</h1><div class="css-1wa99t2"><span class="fa fa-tags mr-1of2 css-1l3zk9f" aria-hidden="true"></span><a href="/tags/csharp" class="css-4czcte">C#</a><a href="/tags/xaml" class="css-4czcte">Xaml</a><a href="/tags/prism" class="css-4czcte">PRISM</a></div></div><section class="it-MdContent"><div id="personal-public-article-body"><div>
<h1>
<span id="prism-samples-wpf-の勉強メモ" class="fragment"></span><a href="#prism-samples-wpf-%E3%81%AE%E5%8B%89%E5%BC%B7%E3%83%A1%E3%83%A2"><i class="fa fa-link"></i></a>Prism-Samples-Wpf の勉強メモ</h1>

<p>個人の勉強メモです。</p>

<p><qiita-embed-ogp src="https://github.com/PrismLibrary/Prism-Samples-Wpf"></qiita-embed-ogp></p>

<h2>
<span id="経緯" class="fragment"></span><a href="#%E7%B5%8C%E7%B7%AF"><i class="fa fa-link"></i></a>経緯</h2>

<p>本業は組み込みなのですが、業務補助ツールなどでWPFアプリを作成することがあります。<br>
MVVMインフラには Livet を使っているのですが、規模の大きいアプリでは、Viewの遅延読み込みやDIコンテナを使いたいことがあり、少し物足りないと感じることがありました。</p>

<p>そこでPrismの習得に向けて、公式のWPFサンプルを順に勉強していきます。<br>
タイトル横の記号は理解度の印象で、深い意味はありません。</p>

<h2>
<span id="01-bootstrappershell-" class="fragment"></span><a href="#01-bootstrappershell-"><i class="fa fa-link"></i></a>01-BootstrapperShell ○</h2>

<h3>
<span id="実行" class="fragment"></span><a href="#%E5%AE%9F%E8%A1%8C"><i class="fa fa-link"></i></a>実行</h3>

<p>真っ白なウィンドウが表示されるだけ。</p>

<h3>
<span id="内容" class="fragment"></span><a href="#%E5%86%85%E5%AE%B9"><i class="fa fa-link"></i></a>内容</h3>

<p>次の 02-Regions と同じ内容っぽいし、こちらは IntelliSense に旧型式って表示されるので、重要でなさげ。</p>

<h2>
<span id="02-regions-" class="fragment"></span><a href="#02-regions-"><i class="fa fa-link"></i></a>02-Regions ◎</h2>

<p>Prismを使って真っ白なウィンドウを表示するサンプル</p>

<h3>
<span id="実行-1" class="fragment"></span><a href="#%E5%AE%9F%E8%A1%8C-1"><i class="fa fa-link"></i></a>実行</h3>

<p>真っ白なウィンドウが表示されるだけ。</p>

<h3>
<span id="内容-1" class="fragment"></span><a href="#%E5%86%85%E5%AE%B9-1"><i class="fa fa-link"></i></a>内容</h3>

<p>App.xaml のコードビハインド CreateShell() にて、コンテナを使って MainWindowクラスを探して起動してる感じ。<br>
全てのソリューションで必要そう。</p>

<p>Appの継承元が、System.Windows.Application でなく、Prism.Unity.PrismApplication になっている点がポイントで、App.xaml のクラスも通常とは異なっている。</p>

<div class="code-frame" data-lang="c#"><div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="k">partial</span> <span class="k">class</span> <span class="nc">App</span> <span class="p">:</span> <span class="n">PrismApplication</span>
<span class="p">{</span>
    <span class="k">protected</span> <span class="k">override</span> <span class="n">Window</span> <span class="nf">CreateShell</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="n">Container</span><span class="p">.</span><span class="n">Resolve</span><span class="p">&lt;</span><span class="n">MainWindow</span><span class="p">&gt;();</span>
    <span class="p">}</span>

    <span class="k">protected</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">RegisterTypes</span><span class="p">(</span><span class="n">IContainerRegistry</span> <span class="n">containerRegistry</span><span class="p">)</span>
    <span class="p">{</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="code-frame" data-lang="xml"><div class="highlight"><pre class="with-code"><code><span class="nt">&lt;prism:PrismApplication</span>
    <span class="na">x:Class=</span><span class="s">"Regions.App"</span>
    <span class="na">xmlns=</span><span class="s">"http://schemas.microsoft.com/winfx/2006/xaml/presentation"</span>
    <span class="na">xmlns:x=</span><span class="s">"http://schemas.microsoft.com/winfx/2006/xaml"</span>
    <span class="na">xmlns:prism=</span><span class="s">"http://prismlibrary.com/"</span> <span class="nt">&gt;</span>
    <span class="nt">&lt;Application.Resources&gt;</span>

    <span class="nt">&lt;/Application.Resources&gt;</span>
<span class="nt">&lt;/prism:PrismApplication&gt;</span>
</code></pre></div></div>

<h2>
<span id="03-customregions-" class="fragment"></span><a href="#03-customregions-"><i class="fa fa-link"></i></a>03-CustomRegions ×</h2>

<p>何のサンプルか分からない…</p>

<h3>
<span id="実行-2" class="fragment"></span><a href="#%E5%AE%9F%E8%A1%8C-2"><i class="fa fa-link"></i></a>実行</h3>

<p>真っ白なウィンドウが表示されるだけ。</p>

<h3>
<span id="内容-2" class="fragment"></span><a href="#%E5%86%85%E5%AE%B9-2"><i class="fa fa-link"></i></a>内容</h3>

<p>これで何が出来ているのかが分からない。<br>
新たに PrismApplicationBase.ConfigureRegionAdapterMappings() や、class RegionAdapterBase&lt;T&gt; が出てきた。</p>

<h2>
<span id="04-viewdiscovery-" class="fragment"></span><a href="#04-viewdiscovery-"><i class="fa fa-link"></i></a>04-ViewDiscovery ◎</h2>

<p>コードビハインドから xaml で命名した Region に 自作UserControl を表示するサンプル。</p>

<h3>
<span id="実行-3" class="fragment"></span><a href="#%E5%AE%9F%E8%A1%8C-3"><i class="fa fa-link"></i></a>実行</h3>

<p>ViewAが表示される。</p>

<h3>
<span id="内容-3" class="fragment"></span><a href="#%E5%86%85%E5%AE%B9-3"><i class="fa fa-link"></i></a>内容</h3>

<ul>
<li>MainWindowのxaml</li>
</ul>

<p>Region名を付けているだけ</p>

<div class="code-frame" data-lang="xml"><div class="highlight"><pre class="with-code"><code><span class="nt">&lt;Window</span> <span class="na">x:Class=</span><span class="s">"ViewDiscovery.Views.MainWindow"</span>
        <span class="na">xmlns=</span><span class="s">"http://schemas.microsoft.com/winfx/2006/xaml/presentation"</span>
        <span class="na">xmlns:x=</span><span class="s">"http://schemas.microsoft.com/winfx/2006/xaml"</span>
        <span class="na">xmlns:prism=</span><span class="s">"http://prismlibrary.com/"</span>
        <span class="na">Title=</span><span class="s">"Shell"</span> <span class="na">Height=</span><span class="s">"350"</span> <span class="na">Width=</span><span class="s">"525"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;Grid&gt;</span>
        <span class="nt">&lt;ContentControl</span> <span class="na">prism:RegionManager.RegionName=</span><span class="s">"ContentRegion"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/Grid&gt;</span>
<span class="nt">&lt;/Window&gt;</span>
</code></pre></div></div>

<ul>
<li>MainWindowのコードビハインド</li>
</ul>

<p>ViewAを登録するために、MainWindowコンストラクタに IRegionManager が渡されている。</p>

<p>明示的にMainWindowのコンストラクタをコールしている記述はなく、コンテナがええ感じでインターフェスを渡していると思われる。インジェクションと言われるやつ？</p>

<p>シンプルなコードであっても、コードビハインドにコードを書くことに抵抗がある…</p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="k">partial</span> <span class="k">class</span> <span class="nc">MainWindow</span> <span class="p">:</span> <span class="n">Window</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="nf">MainWindow</span><span class="p">(</span><span class="n">IRegionManager</span> <span class="n">regionManager</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nf">InitializeComponent</span><span class="p">();</span>

        <span class="c1">// RegionにViewを読み出す ★重要</span>
        <span class="n">regionManager</span><span class="p">.</span><span class="nf">RegisterViewWithRegion</span><span class="p">(</span><span class="s">"ContentRegion"</span><span class="p">,</span> <span class="k">typeof</span><span class="p">(</span><span class="n">ViewA</span><span class="p">));</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h2>
<span id="05-viewinjection-" class="fragment"></span><a href="#05-viewinjection-"><i class="fa fa-link"></i></a>05-ViewInjection ◎</h2>

<p>Button の Clickイベントで、自作UserControl を読み出すサンプル<br>
UserControl の登録の実装が 04-ViewDiscovery と異なる。</p>

<h3>
<span id="実行-4" class="fragment"></span><a href="#%E5%AE%9F%E8%A1%8C-4"><i class="fa fa-link"></i></a>実行</h3>

<p>ボタンが1つ配置されており、クリックするとViewAが読み込まれる。</p>

<p>ボタンを複数回クリックしても View の見た目は変わらないが、内部では ViewA が複数追加されていると思われイマイチ。</p>

<h3>
<span id="内容-4" class="fragment"></span><a href="#%E5%86%85%E5%AE%B9-4"><i class="fa fa-link"></i></a>内容</h3>

<p>MainWindow のボタンClickイベントにより、コードビハインドから UserControl を読み出している。<br>
これは View の遅延読み込みに使えそう。</p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="k">private</span> <span class="k">void</span> <span class="nf">Button_Click</span><span class="p">(</span><span class="kt">object</span> <span class="n">sender</span><span class="p">,</span> <span class="n">RoutedEventArgs</span> <span class="n">e</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// RegionにViewを読み出す ★重要</span>
    <span class="kt">var</span> <span class="n">view</span> <span class="p">=</span> <span class="n">_container</span><span class="p">.</span><span class="n">Resolve</span><span class="p">&lt;</span><span class="n">ViewA</span><span class="p">&gt;();</span>
    <span class="n">_regionManager</span><span class="p">.</span><span class="n">Regions</span><span class="p">[</span><span class="s">"ContentRegion"</span><span class="p">].</span><span class="nf">Add</span><span class="p">(</span><span class="n">view</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>上記対応のために、MainWindowのコンストラクタに引数 IContainerExtension が増えた。</p>

<p>やはり明示的にMainWindowのコンストラクタをコールしている記述はなく、コンテナがええ感じで解決していると思われる。</p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="nf">MainWindow</span><span class="p">(</span><span class="n">IContainerExtension</span> <span class="n">container</span><span class="p">,</span> <span class="n">IRegionManager</span> <span class="n">regionManager</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nf">InitializeComponent</span><span class="p">();</span>
    <span class="n">_container</span> <span class="p">=</span> <span class="n">container</span><span class="p">;</span>
    <span class="n">_regionManager</span> <span class="p">=</span> <span class="n">regionManager</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h2>
<span id="06-viewactivationdeactivation-" class="fragment"></span><a href="#06-viewactivationdeactivation-"><i class="fa fa-link"></i></a>06-ViewActivationDeactivation ○</h2>

<p>自作UserControl のアクティブ/非アクティブを切り替えるサンプル。（破棄ではない）</p>

<h3>
<span id="実行-5" class="fragment"></span><a href="#%E5%AE%9F%E8%A1%8C-5"><i class="fa fa-link"></i></a>実行</h3>

<p>ボタンが4つ配置されており、ViewAが表示されている。</p>

<p>各ボタンは、ViewA/ViewBの読み込みと破棄に割り当てられており、ボタンに応じてViewの見た目が変化する。</p>

<h3>
<span id="内容-5" class="fragment"></span><a href="#%E5%86%85%E5%AE%B9-5"><i class="fa fa-link"></i></a>内容</h3>

<p>MainWindow の ContentControl に対して、登録済み UserControl の表示/非表示を行う。</p>

<p>表示の切り替えなので、05-ViewInjection のように View が複数個登録されることはない。</p>

<p>Viewの表示は、先にRegionに登録した方(ViewA)が、優先して表示されるルールっぽい。<br>
MainWindow のコードビハインドに UserControl の実体を定義してることに違和感を感じる。</p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="n">ViewA</span> <span class="n">_viewA</span><span class="p">;</span>
<span class="n">ViewB</span> <span class="n">_viewB</span><span class="p">;</span>
<span class="k">private</span> <span class="k">void</span> <span class="nf">MainWindow_Loaded</span><span class="p">(</span><span class="kt">object</span> <span class="n">sender</span><span class="p">,</span> <span class="n">RoutedEventArgs</span> <span class="n">e</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">_viewA</span> <span class="p">=</span> <span class="n">_container</span><span class="p">.</span><span class="n">Resolve</span><span class="p">&lt;</span><span class="n">ViewA</span><span class="p">&gt;();</span>
    <span class="n">_viewB</span> <span class="p">=</span> <span class="n">_container</span><span class="p">.</span><span class="n">Resolve</span><span class="p">&lt;</span><span class="n">ViewB</span><span class="p">&gt;();</span>
    <span class="n">_region</span> <span class="p">=</span> <span class="n">_regionManager</span><span class="p">.</span><span class="n">Regions</span><span class="p">[</span><span class="s">"ContentRegion"</span><span class="p">];</span>
    <span class="n">_region</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">_viewA</span><span class="p">);</span>
    <span class="n">_region</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">_viewB</span><span class="p">);</span>
<span class="p">}</span>
<span class="k">private</span> <span class="k">void</span> <span class="nf">Button_Click</span><span class="p">(</span><span class="kt">object</span> <span class="n">sender</span><span class="p">,</span> <span class="n">RoutedEventArgs</span> <span class="n">e</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">_region</span><span class="p">.</span><span class="nf">Activate</span><span class="p">(</span><span class="n">_viewA</span><span class="p">);</span>
<span class="p">}</span>
<span class="k">private</span> <span class="k">void</span> <span class="nf">Button_Click_1</span><span class="p">(</span><span class="kt">object</span> <span class="n">sender</span><span class="p">,</span> <span class="n">RoutedEventArgs</span> <span class="n">e</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">_region</span><span class="p">.</span><span class="nf">Deactivate</span><span class="p">(</span><span class="n">_viewA</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<h2>
<span id="07-modules---appconfig-" class="fragment"></span><a href="#07-modules---appconfig-"><i class="fa fa-link"></i></a>07-Modules - AppConfig △</h2>

<p>07-Modules は子モジュールを読み込むサンプル。<br>
AppConfig / Code / Directory / LoadManual の4項目が用意されている。<br>
2つめの Code が最も広く使われているっぽい。</p>

<h3>
<span id="実行-6" class="fragment"></span><a href="#%E5%AE%9F%E8%A1%8C-6"><i class="fa fa-link"></i></a>実行</h3>

<p>ViewAが表示される 。 (07-Modules共通)</p>

<h3>
<span id="内容-6" class="fragment"></span><a href="#%E5%86%85%E5%AE%B9-6"><i class="fa fa-link"></i></a>内容</h3>

<h4>
<span id="親モジュール-07-modules-共通" class="fragment"></span><a href="#%E8%A6%AA%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB-07-modules-%E5%85%B1%E9%80%9A"><i class="fa fa-link"></i></a>親モジュール 07-Modules 共通</h4>

<p>ContentRegionの名前で ContentControl を配置しておく。</p>

<div class="code-frame" data-lang="xml"><div class="highlight"><pre class="with-code"><code><span class="nt">&lt;Grid&gt;</span>
    <span class="nt">&lt;ContentControl</span> <span class="na">prism:RegionManager.RegionName=</span><span class="s">"ContentRegion"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/Grid&gt;</span>
</code></pre></div></div>

<h4>
<span id="子モジュール側" class="fragment"></span><a href="#%E5%AD%90%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB%E5%81%B4"><i class="fa fa-link"></i></a>子モジュール側</h4>

<p>子モジュールのProject直下に ModuleAModule.cs を追加して、親モジュールの Region名を string で指定する。（07-Modules共通）</p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">ModuleAModule</span> <span class="p">:</span> <span class="n">IModule</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">void</span> <span class="nf">OnInitialized</span><span class="p">(</span><span class="n">IContainerProvider</span> <span class="n">containerProvider</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">var</span> <span class="n">regionManager</span> <span class="p">=</span> <span class="n">containerProvider</span><span class="p">.</span><span class="n">Resolve</span><span class="p">&lt;</span><span class="n">IRegionManager</span><span class="p">&gt;();</span>
        <span class="n">regionManager</span><span class="p">.</span><span class="nf">RegisterViewWithRegion</span><span class="p">(</span><span class="s">"ContentRegion"</span><span class="p">,</span> <span class="k">typeof</span><span class="p">(</span><span class="n">ViewA</span><span class="p">));</span>
    <span class="p">}</span>
    <span class="k">public</span> <span class="k">void</span> <span class="nf">RegisterTypes</span><span class="p">(</span><span class="n">IContainerRegistry</span> <span class="n">containerRegistry</span><span class="p">)</span>
    <span class="p">{</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h4>
<span id="親モジュール側" class="fragment"></span><a href="#%E8%A6%AA%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB%E5%81%B4"><i class="fa fa-link"></i></a>親モジュール側</h4>

<p>親モジュール側のコードに、ModuleA を直接記述している箇所は App.configのみ。</p>

<div class="code-frame" data-lang="xml"><div class="highlight"><pre class="with-code"><code><span class="nt">&lt;modules&gt;</span>
  <span class="nt">&lt;module</span> <span class="na">assemblyFile=</span><span class="s">"ModuleA.dll"</span>
          <span class="na">moduleType=</span><span class="s">"ModuleA.ModuleAModule,
                      ModuleA,
                      Version=1.0.0.0,
                      Culture=neutral,
                      PublicKeyToken=null"</span>
          <span class="na">moduleName=</span><span class="s">"ModuleAModule"</span>
          <span class="na">startupLoaded=</span><span class="s">"True"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/modules&gt;</span>
</code></pre></div></div>

<p>App.xamlのコードビハインド CreateModuleCatalog() にて、App.configに記載されたジュールを自動で配置しているっぽい。</p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="k">protected</span> <span class="k">override</span> <span class="n">IModuleCatalog</span> <span class="nf">CreateModuleCatalog</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nf">ConfigurationModuleCatalog</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div></div>

<h2>
<span id="07-modules---code-" class="fragment"></span><a href="#07-modules---code-"><i class="fa fa-link"></i></a>07-Modules - Code ◎</h2>

<p>07-Modules は子モジュールを読み込むサンプルの２つめ。<br>
見たことあるパターンで、以降のサンプルでも度々登場する。</p>

<h3>
<span id="実行-7" class="fragment"></span><a href="#%E5%AE%9F%E8%A1%8C-7"><i class="fa fa-link"></i></a>実行</h3>

<p>ViewAが表示される 。 (07-Modules共通)</p>

<h3>
<span id="内容-7" class="fragment"></span><a href="#%E5%86%85%E5%AE%B9-7"><i class="fa fa-link"></i></a>内容</h3>

<h4>
<span id="子モジュール側-1" class="fragment"></span><a href="#%E5%AD%90%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB%E5%81%B4-1"><i class="fa fa-link"></i></a>子モジュール側</h4>

<p>07-Modules - AppConfig と同内容なので割愛（07-Modules共通）</p>

<h4>
<span id="親モジュール側-1" class="fragment"></span><a href="#%E8%A6%AA%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB%E5%81%B4-1"><i class="fa fa-link"></i></a>親モジュール側</h4>

<p>App.xaml のコードビハインド ConfigureModuleCatalog() で、ModuleAプロジェクトのクラス ModuleAModule を直接指定して、Viewに配置している。</p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="k">protected</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">ConfigureModuleCatalog</span><span class="p">(</span><span class="n">IModuleCatalog</span> <span class="n">moduleCatalog</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">moduleCatalog</span><span class="p">.</span><span class="n">AddModule</span><span class="p">&lt;</span><span class="n">ModuleA</span><span class="p">.</span><span class="n">ModuleAModule</span><span class="p">&gt;();</span>
<span class="p">}</span>
</code></pre></div></div>

<h2>
<span id="07-modules---directory-" class="fragment"></span><a href="#07-modules---directory-"><i class="fa fa-link"></i></a>07-Modules - Directory ◎</h2>

<p>07-Modules は子モジュールを読み込むサンプルの３つめ。<br>
dllが含まれるディレクトリを指定する。機能拡張などに使えるかも。</p>

<h3>
<span id="実行-8" class="fragment"></span><a href="#%E5%AE%9F%E8%A1%8C-8"><i class="fa fa-link"></i></a>実行</h3>

<p>ViewAが表示される 。 (07-Modules共通)</p>

<h3>
<span id="内容-8" class="fragment"></span><a href="#%E5%86%85%E5%AE%B9-8"><i class="fa fa-link"></i></a>内容</h3>

<h4>
<span id="子モジュール側-2" class="fragment"></span><a href="#%E5%AD%90%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB%E5%81%B4-2"><i class="fa fa-link"></i></a>子モジュール側</h4>

<p>07-Modules - AppConfig と同内容なので割愛（07-Modules共通）</p>

<h4>
<span id="親モジュール側-2" class="fragment"></span><a href="#%E8%A6%AA%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB%E5%81%B4-2"><i class="fa fa-link"></i></a>親モジュール側</h4>

<p>App.xaml のコードビハインドで、子モジュール.dll が格納された DirectoryPATH を指定して読み出している。<br>
dll が存在しなければ何も読み込まれないので、機能拡張などに使えるかも。</p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="k">protected</span> <span class="k">override</span> <span class="n">IModuleCatalog</span> <span class="nf">CreateModuleCatalog</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nf">DirectoryModuleCatalog</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">ModulePath</span> <span class="p">=</span> <span class="s">@"C:\source\Prism-Samples-Wpf\07-Modules - Directory\Modules\bin\Debug\Modules"</span>
    <span class="p">};</span>
<span class="p">}</span>
</code></pre></div></div>

<h2>
<span id="07-modules---loadmanual-" class="fragment"></span><a href="#07-modules---loadmanual-"><i class="fa fa-link"></i></a>07-Modules - LoadManual ◎</h2>

<p>07-Modules は子モジュールを読み込むサンプルの４つめ。</p>

<h3>
<span id="実行-9" class="fragment"></span><a href="#%E5%AE%9F%E8%A1%8C-9"><i class="fa fa-link"></i></a>実行</h3>

<p>ViewAが表示される 。 (07-Modules共通)</p>

<h3>
<span id="内容-9" class="fragment"></span><a href="#%E5%86%85%E5%AE%B9-9"><i class="fa fa-link"></i></a>内容</h3>

<h4>
<span id="子モジュール側-3" class="fragment"></span><a href="#%E5%AD%90%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB%E5%81%B4-3"><i class="fa fa-link"></i></a>子モジュール側</h4>

<p>07-Modules - AppConfig と同内容なので割愛（07-Modules共通）</p>

<h4>
<span id="親モジュール側-3" class="fragment"></span><a href="#%E8%A6%AA%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB%E5%81%B4-3"><i class="fa fa-link"></i></a>親モジュール側</h4>

<p>親モジュールのUIイベント（Windowのコードビハインド）で子モジュールを読み出している。</p>

<p>UserControl を読み出してたやつ（05-ViewInjection）のモジュール版。<br>
こちらも遅延読み込みに使えそう。</p>

<p>子モジュールの指定は、子モジュールクラス名の文字列により行われているが、nameof() 演算子を使った方が安全そう。</p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="k">private</span> <span class="k">void</span> <span class="nf">Button_Click</span><span class="p">(</span><span class="kt">object</span> <span class="n">sender</span><span class="p">,</span> <span class="n">RoutedEventArgs</span> <span class="n">e</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">_moduleManager</span><span class="p">.</span><span class="nf">LoadModule</span><span class="p">(</span><span class="s">"ModuleAModule"</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<h2>
<span id="08-viewmodellocator-" class="fragment"></span><a href="#08-viewmodellocator-"><i class="fa fa-link"></i></a>08-ViewModelLocator ◎</h2>

<p>Viewに対応する ViewModel を自動で配置するサンプル。<br>
ViewModel が初登場！</p>

<h3>
<span id="実行-10" class="fragment"></span><a href="#%E5%AE%9F%E8%A1%8C-10"><i class="fa fa-link"></i></a>実行</h3>

<p>真っ白なウィンドウが表示されるだけだが、Windowタイトル が ViewModel で指定された文字列になっている。</p>

<h3>
<span id="内容-10" class="fragment"></span><a href="#%E5%86%85%E5%AE%B9-10"><i class="fa fa-link"></i></a>内容</h3>

<p>xaml に1行書いとけば、対応する ViewModel が自動で読み込まれる。<br>
DataContext で指定する必要がない。</p>

<div class="code-frame" data-lang="xml"><div class="highlight"><pre class="with-code"><code><span class="nt">&lt;Window</span> <span class="na">x:Class=</span><span class="s">"ViewModelLocator.Views.MainWindow"</span>
          <span class="err">～中略～</span>
        <span class="na">xmlns:prism=</span><span class="s">"http://prismlibrary.com/"</span>
        <span class="na">prism:ViewModelLocator.AutoWireViewModel=</span><span class="s">"True"</span>
</code></pre></div></div>

<h4>
<span id="viewmodel" class="fragment"></span><a href="#viewmodel"><i class="fa fa-link"></i></a>ViewModel</h4>

<p>Prism.Mvvm.BindableBase を継承しており、BindableBase は INotifyPropertyChanged を継承している。<br>
ViewModel は必ず BindableBase を継承しておけば良さげ。</p>

<h2>
<span id="09-changeconvention-" class="fragment"></span><a href="#09-changeconvention-"><i class="fa fa-link"></i></a>09-ChangeConvention ○</h2>

<p>Viewのxamlファイルに ViewModel を含めたような記述ができるっぽい。</p>

<h3>
<span id="実行-11" class="fragment"></span><a href="#%E5%AE%9F%E8%A1%8C-11"><i class="fa fa-link"></i></a>実行</h3>

<p>08-ViewModelLocatorと同じ<br>
真っ白なウィンドウが表示されるだけだが、Windowタイトル が ViewModel で指定された文字列になっている。</p>

<h3>
<span id="内容-11" class="fragment"></span><a href="#%E5%86%85%E5%AE%B9-11"><i class="fa fa-link"></i></a>内容</h3>

<p>Viewのxamlファイルに ViewModel を含めたような記述ができるっぽい。（xamlに2つの*.csがぶらさった構成を初めて見た）<br>
MVVM記法から外れている気がするので使わなさそう。</p>

<p><a href="https://camo.qiitausercontent.com/c8774b2318b4eca6c9e02beeb517ee36ddc20ff4/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3234393831362f33376635386534332d333362312d623466662d326137612d6138653534306338336662612e6a706567" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F249816%2F37f58e43-33b1-b4ff-2a7a-a8e540c83fba.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=462d5dea7fae304e22ca73cbacd4df8f" alt="09-ChangeConvention.jpg" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/249816/37f58e43-33b1-b4ff-2a7a-a8e540c83fba.jpeg" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F249816%2F37f58e43-33b1-b4ff-2a7a-a8e540c83fba.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=1699cfa37c34874d35fa658b18a18884 1x" loading="lazy"></a></p>

<h2>
<span id="10-customregistrations-" class="fragment"></span><a href="#10-customregistrations-"><i class="fa fa-link"></i></a>10-CustomRegistrations ○</h2>

<p>08-ViewModelLocator で出てきた、自動で名前解決される ViewModel のクラス名を指定できるっぽい。<br>
サンプルでは、View の MainWindow.xaml に対して、ViewModel の CustomViewModel.cs を割り当てている。<br>
どのような場面で使うかが想像できないので使わなさそう。</p>

<h3>
<span id="実行-12" class="fragment"></span><a href="#%E5%AE%9F%E8%A1%8C-12"><i class="fa fa-link"></i></a>実行</h3>

<p>08-ViewModelLocatorと同じ。<br>
真っ白なウィンドウが表示されるだけだが、Windowタイトル が ViewModel で指定された文字列になっている。</p>

<h3>
<span id="内容-12" class="fragment"></span><a href="#%E5%86%85%E5%AE%B9-12"><i class="fa fa-link"></i></a>内容</h3>

<p>App.xaml.cs で View に対応する ViewModel を指定している。<br>
いくつかの方法があるっぽく、サンプル時点でコメントアウトされていた。</p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="k">protected</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">ConfigureViewModelLocator</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">base</span><span class="p">.</span><span class="nf">ConfigureViewModelLocator</span><span class="p">();</span>

    <span class="c1">// type / type</span>
    <span class="c1">//ViewModelLocationProvider.Register(typeof(MainWindow).ToString(), typeof(CustomViewModel));</span>

    <span class="c1">// type / factory</span>
    <span class="c1">//ViewModelLocationProvider.Register(typeof(MainWindow).ToString(), () =&gt; Container.Resolve&lt;CustomViewModel&gt;());</span>

    <span class="c1">// generic factory</span>
    <span class="c1">//ViewModelLocationProvider.Register&lt;MainWindow&gt;(() =&gt; Container.Resolve&lt;CustomViewModel&gt;());</span>

    <span class="c1">// generic type</span>
    <span class="n">ViewModelLocationProvider</span><span class="p">.</span><span class="n">Register</span><span class="p">&lt;</span><span class="n">MainWindow</span><span class="p">,</span> <span class="n">CustomViewModel</span><span class="p">&gt;();</span>
<span class="p">}</span>
</code></pre></div></div>

<h2>
<span id="11-usingdelegatecommands-" class="fragment"></span><a href="#11-usingdelegatecommands-"><i class="fa fa-link"></i></a>11-UsingDelegateCommands ○</h2>

<p>xaml の Button.Command に応じた ViewModel 処理。</p>

<h3>
<span id="実行-13" class="fragment"></span><a href="#%E5%AE%9F%E8%A1%8C-13"><i class="fa fa-link"></i></a>実行</h3>

<p>チェックボックスを有効にすると各ボタンが有効になり、各ボタンを押すと下部に現在時間が表示される。</p>

<p>複雑で文字で説明できなくなってしまったので、図を貼ってみる。<br>
<a href="https://camo.qiitausercontent.com/c9018a9dc5d34879ec4fcbaab13a395e43b2ded4/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3234393831362f64633230376634642d333834322d356130652d336439632d6232313861616537633162312e6a706567" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F249816%2Fdc207f4d-3842-5a0e-3d9c-b218aae7c1b1.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=93886570a965b910b44a017f2eac5728" alt="11-UsingDelegateCommands_View1.jpg" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/249816/dc207f4d-3842-5a0e-3d9c-b218aae7c1b1.jpeg" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F249816%2Fdc207f4d-3842-5a0e-3d9c-b218aae7c1b1.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=f16610d24b2774b5b00aefbfea145a76 1x" loading="lazy"></a><br>
<a href="https://camo.qiitausercontent.com/f8a02840f09ed25a6dad17348a78823b8bbc5f9a/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3234393831362f34336537376265642d306339652d393633642d343731632d3164653964663361386234322e6a706567" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F249816%2F43e77bed-0c9e-963d-471c-1de9df3a8b42.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=4e52ab9f943c6804b8c3f429c06aef0b" alt="11-UsingDelegateCommands_View3.jpg" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/249816/43e77bed-0c9e-963d-471c-1de9df3a8b42.jpeg" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F249816%2F43e77bed-0c9e-963d-471c-1de9df3a8b42.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=d1b9413cac26c51f0b87d700d982a1c0 1x" loading="lazy"></a></p>

<h3>
<span id="内容-13" class="fragment"></span><a href="#%E5%86%85%E5%AE%B9-13"><i class="fa fa-link"></i></a>内容</h3>

<p>ICommand を継承した Prism.Commands.DelegateCommand を使って、Action / CanExecute を指定してる。</p>

<p>4つのボタンそれぞれで実装が異なる。</p>

<p><del>使い慣れた ReactiveCommand で代替できそうなので使わなさそう。</del><br>
最後までサンプルをやった結果、DelegateCommand がゴリゴリ出てくるので、ちゃんと使えるようになるべきと考えを改めました。</p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="n">DelegateCommand</span> <span class="n">ExecuteDelegateCommand</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>
<span class="k">public</span> <span class="n">DelegateCommand</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span> <span class="n">ExecuteGenericDelegateCommand</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>
<span class="k">public</span> <span class="n">DelegateCommand</span> <span class="n">DelegateCommandObservesProperty</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>
<span class="k">public</span> <span class="n">DelegateCommand</span> <span class="n">DelegateCommandObservesCanExecute</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>

<span class="k">public</span> <span class="nf">MainWindowViewModel</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">ExecuteDelegateCommand</span> <span class="p">=</span>
        <span class="k">new</span> <span class="nf">DelegateCommand</span><span class="p">(</span><span class="n">Execute</span><span class="p">,</span> <span class="n">CanExecute</span><span class="p">);</span>

    <span class="n">DelegateCommandObservesProperty</span> <span class="p">=</span>
        <span class="k">new</span> <span class="nf">DelegateCommand</span><span class="p">(</span><span class="n">Execute</span><span class="p">,</span> <span class="n">CanExecute</span><span class="p">).</span><span class="nf">ObservesProperty</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="n">IsEnabled</span><span class="p">);</span>

    <span class="n">DelegateCommandObservesCanExecute</span> <span class="p">=</span>
        <span class="k">new</span> <span class="nf">DelegateCommand</span><span class="p">(</span><span class="n">Execute</span><span class="p">).</span><span class="nf">ObservesCanExecute</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="n">IsEnabled</span><span class="p">);</span>

    <span class="n">ExecuteGenericDelegateCommand</span> <span class="p">=</span>
        <span class="k">new</span> <span class="n">DelegateCommand</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;(</span><span class="n">ExecuteGeneric</span><span class="p">).</span><span class="nf">ObservesCanExecute</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="n">IsEnabled</span><span class="p">);</span>
<span class="p">}</span>   
</code></pre></div></div>

<h2>
<span id="12-usingcompositecommands-" class="fragment"></span><a href="#12-usingcompositecommands-"><i class="fa fa-link"></i></a>12-UsingCompositeCommands △</h2>

<p>複数の DelegateCommand を1つに集約するサンプル。<br>
集約されたCommandを実行したら、各Commandを全実行した動作になる。</p>

<h3>
<span id="実行-14" class="fragment"></span><a href="#%E5%AE%9F%E8%A1%8C-14"><i class="fa fa-link"></i></a>実行</h3>

<h4>
<span id="コントロールのenable" class="fragment"></span><a href="#%E3%82%B3%E3%83%B3%E3%83%88%E3%83%AD%E3%83%BC%E3%83%AB%E3%81%AEenable"><i class="fa fa-link"></i></a>コントロールのEnable</h4>

<ul>
<li><p>3つのTabが存在し、各Tabがチェックボックスを持っている。</p></li>
<li><p>各Tabのチェックボックスが有効なら、自Tabのボタンが有効になる。</p></li>
<li><p>全てのTabのボタンが有効なら、上部の Saveボタンが有効になる。</p></li>
</ul>

<h4>
<span id="ボタンクリック" class="fragment"></span><a href="#%E3%83%9C%E3%82%BF%E3%83%B3%E3%82%AF%E3%83%AA%E3%83%83%E3%82%AF"><i class="fa fa-link"></i></a>ボタンクリック</h4>

<p>各TabのSaveボタンを押下すると、自タブに現在時刻が表示される。</p>

<p>上部のSaveボタンを押下すると、全てのタブに現在時刻が表示される。（=全タブのボタンを押した動作）<br>
<a href="https://camo.qiitausercontent.com/60c57a9955eaf5e8ed122851c2947b0d1888ed51/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3234393831362f64343430623263382d313737622d663939332d646365372d6562656663363534666265622e6a706567" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F249816%2Fd440b2c8-177b-f993-dce7-ebefc654fbeb.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=03ec72c37a7c35619bfebc9c8a46eca2" alt="12-UsingCompositeCommands_View1.jpg" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/249816/d440b2c8-177b-f993-dce7-ebefc654fbeb.jpeg" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F249816%2Fd440b2c8-177b-f993-dce7-ebefc654fbeb.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=e0336d898c2146f2ea31f078d2390915 1x" loading="lazy"></a></p>

<h3>
<span id="内容-14" class="fragment"></span><a href="#%E5%86%85%E5%AE%B9-14"><i class="fa fa-link"></i></a>内容</h3>

<p>この辺りから理解が難しくなってきた。</p>

<h4>
<span id="tabcontrolへの子要素の登録方法" class="fragment"></span><a href="#tabcontrol%E3%81%B8%E3%81%AE%E5%AD%90%E8%A6%81%E7%B4%A0%E3%81%AE%E7%99%BB%E9%8C%B2%E6%96%B9%E6%B3%95"><i class="fa fa-link"></i></a>TabControlへの子要素の登録方法</h4>

<ol>
<li>
<p>親Moduleの xaml で TabControl を定義し、Region名を付けておく</p>

<div class="code-frame" data-lang="xml"><div class="highlight"><pre class="with-code"><code><span class="nt">&lt;TabControl</span> <span class="na">prism:RegionManager.RegionName=</span><span class="s">"ContentRegion"</span> <span class="nt">/&gt;</span>
</code></pre></div></div>
</li>
<li><p>UserControl をベースに TabItem  を作成する（TabView.xaml）</p></li>
<li>
<p>子モジュールの fogeModule.OnInitialized() にて、作成した TabItem を登録していく。<br>
TabView から TabViewModel の取得法が力業で引いた…<br>
ViewModelのコンストラクタにTitleを渡すような実装はできないのでしょうか。</p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">ModuleAModule</span> <span class="p">:</span> <span class="n">IModule</span>
<span class="p">{</span>
   <span class="k">public</span> <span class="k">void</span> <span class="nf">OnInitialized</span><span class="p">(</span><span class="n">IContainerProvider</span> <span class="n">containerProvider</span><span class="p">)</span>
   <span class="p">{</span>
       <span class="kt">var</span> <span class="n">regionManager</span> <span class="p">=</span> <span class="n">containerProvider</span><span class="p">.</span><span class="n">Resolve</span><span class="p">&lt;</span><span class="n">IRegionManager</span><span class="p">&gt;();</span>
       <span class="n">IRegion</span> <span class="n">region</span> <span class="p">=</span> <span class="n">regionManager</span><span class="p">.</span><span class="n">Regions</span><span class="p">[</span><span class="s">"ContentRegion"</span><span class="p">];</span>

       <span class="kt">var</span> <span class="n">tabA</span> <span class="p">=</span> <span class="n">containerProvider</span><span class="p">.</span><span class="n">Resolve</span><span class="p">&lt;</span><span class="n">TabView</span><span class="p">&gt;();</span>
       <span class="nf">SetTitle</span><span class="p">(</span><span class="n">tabA</span><span class="p">,</span> <span class="s">"Tab A"</span><span class="p">);</span>
       <span class="n">region</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">tabA</span><span class="p">);</span>

       <span class="cm">/* tabB,tabC は同じなので割愛 */</span>
   <span class="p">}</span>
<span class="p">}</span>

<span class="k">private</span> <span class="k">void</span> <span class="nf">SetTitle</span><span class="p">(</span><span class="n">TabView</span> <span class="n">tab</span><span class="p">,</span> <span class="kt">string</span> <span class="n">title</span><span class="p">)</span>
<span class="p">{</span>
    <span class="p">(</span><span class="n">tab</span><span class="p">.</span><span class="n">DataContext</span> <span class="k">as</span> <span class="n">TabViewModel</span><span class="p">).</span><span class="n">Title</span> <span class="p">=</span> <span class="n">title</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>
</li>
</ol>

<h4>
<span id="compositecommand" class="fragment"></span><a href="#compositecommand"><i class="fa fa-link"></i></a>CompositeCommand</h4>

<p>各Tab が保持する ICommand を結合して、上部のSaveボタンに割り当てているっぽい。</p>

<p>登録された全ての ICommand が CanExecute == true なら、統合された CompositeCommand が実行可能となる。</p>

<p>CompositeCommand が実行されると、登録されたすべての ICommand が実行される。</p>

<ol>
<li>
<p>親と子モジュールが参照できるところに（サンプルでは別プロジェクト）、ApplicationCommands クラスを定義する。<br>
ApplicationCommands の中身は Prism.Command.CompositeCommand のみ。</p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="k">interface</span> <span class="nc">IApplicationCommands</span>
<span class="p">{</span>
    <span class="n">CompositeCommand</span> <span class="n">SaveCommand</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>
<span class="p">}</span>
<span class="k">public</span> <span class="k">class</span> <span class="nc">ApplicationCommands</span> <span class="p">:</span> <span class="n">IApplicationCommands</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="n">CompositeCommand</span> <span class="n">SaveCommand</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">CompositeCommand</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div></div>
</li>
<li>
<p>親Module の App.xaml.cs にて、上記自作クラスのインターフェースと実装をコンテナに登録する。<br>
サンプルでは Singleton で登録。</p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="k">protected</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">RegisterTypes</span><span class="p">(</span><span class="n">IContainerRegistry</span> <span class="n">containerRegistry</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">containerRegistry</span><span class="p">.</span><span class="n">RegisterSingleton</span><span class="p">&lt;</span><span class="n">IApplicationCommands</span><span class="p">,</span> <span class="n">ApplicationCommands</span><span class="p">&gt;();</span>
<span class="p">}</span>
</code></pre></div></div>
</li>
<li>
<p>MainWindow の ViewModel のコンストラクタ引数に対して、上記自作クラスが自動で注入されるので受け取る。</p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="nf">MainWindowViewModel</span><span class="p">(</span><span class="n">IApplicationCommands</span> <span class="n">applicationCommands</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">ApplicationCommands</span> <span class="p">=</span> <span class="n">applicationCommands</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>
</li>
<li>
<p>各TabItem の ViewModel も同様にコンストラクタで自作クラスを受け取り、自クラスの UpdateCommand(ICommand) を登録していく。<br>
自クラスの UpdateCommand は自クラスのチェックボックスにバインドされたフラグを監視している。(2行目)</p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="nf">TabViewModel</span><span class="p">(</span><span class="n">IApplicationCommands</span> <span class="n">applicationCommands</span><span class="p">)</span>
<span class="p">{</span>
   <span class="n">_applicationCommands</span> <span class="p">=</span> <span class="n">applicationCommands</span><span class="p">;</span>
   <span class="n">UpdateCommand</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">DelegateCommand</span><span class="p">(</span><span class="n">Update</span><span class="p">).</span><span class="nf">ObservesCanExecute</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="n">CanUpdate</span><span class="p">);</span>
   <span class="n">_applicationCommands</span><span class="p">.</span><span class="n">SaveCommand</span><span class="p">.</span><span class="nf">RegisterCommand</span><span class="p">(</span><span class="n">UpdateCommand</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>
</li>
</ol>

<h2>
<span id="13-iactiveawarecommands-" class="fragment"></span><a href="#13-iactiveawarecommands-"><i class="fa fa-link"></i></a>13-IActiveAwareCommands △</h2>

<p>12-UsingCompositeCommands と同様に複数の DelegateCommand を1つに集約するが、アクティブなコントロールを参照するサンプル。</p>

<h3>
<span id="実行-15" class="fragment"></span><a href="#%E5%AE%9F%E8%A1%8C-15"><i class="fa fa-link"></i></a>実行</h3>

<p>12-UsingCompositeCommands と同じ View。</p>

<p>動作は少し違って、こちらはActiveなTabの チェックボックスに応じて上部ボタンの IsEnable を切り替えている。<br>
コマンドが実行されるのもActiveなタブのみ。</p>

<p>各Tabのチェックボックス状態と上部ボタン状態</p>

<p>　TabA： CheckBox.IsEnable=True　（Viewで選択中のTab）<br>
　TabB： CheckBox.IsEnable=False<br>
　TabC： CheckBox.IsEnable=False<br>
　　12-UsingCompositeCommands　⇒　TopButton.IsEnable=False<br>
　　13-IActiveAwareCommands　⇒　TopButton.IsEnable=True</p>

<h3>
<span id="内容-15" class="fragment"></span><a href="#%E5%86%85%E5%AE%B9-15"><i class="fa fa-link"></i></a>内容</h3>

<p>CompositeCommand が Active な Control を判別するために、下記対応をしてるっぽい（抜けてるかも）</p>

<ol>
<li>
<p>Prism.Commands.CompositeCommand のコンストラクタ引数を true にする。</p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="c1">// 概要:</span>
<span class="c1">//     Initializes a new instance of Prism.Commands.CompositeCommand.</span>
<span class="c1">//</span>
<span class="c1">// パラメーター:</span>
<span class="c1">//   monitorCommandActivity:</span>
<span class="c1">//     Indicates when the command activity is going to be monitored.</span>
<span class="k">public</span> <span class="nf">CompositeCommand</span><span class="p">(</span><span class="kt">bool</span> <span class="n">monitorCommandActivity</span><span class="p">);</span>
</code></pre></div></div>
</li>
<li>
<p>TabItem の ViewModel にて、IActiveAware インターフェースを継承する。</p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="k">interface</span> <span class="nc">IActiveAware</span>
<span class="p">{</span>
    <span class="c1">//Gets or sets a value indicating whether the object is active.</span>
    <span class="kt">bool</span> <span class="n">IsActive</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>

    <span class="c1">//Notifies that the value for Prism.IActiveAware.IsActive property has changed.</span>
    <span class="k">event</span> <span class="n">EventHandler</span> <span class="n">IsActiveChanged</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>
</li>
<li>
<p>継承した IActiveAware  に対応するコードを書き、IsActiveプロパティを更新する。</p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="kt">bool</span> <span class="n">_isActive</span><span class="p">;</span>
<span class="k">public</span> <span class="kt">bool</span> <span class="n">IsActive</span>
<span class="p">{</span>
    <span class="k">get</span> <span class="p">{</span> <span class="k">return</span> <span class="n">_isActive</span><span class="p">;</span> <span class="p">}</span>
    <span class="k">set</span>
    <span class="p">{</span>
        <span class="n">_isActive</span> <span class="p">=</span> <span class="k">value</span><span class="p">;</span>
        <span class="nf">OnIsActiveChanged</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="k">private</span> <span class="k">void</span> <span class="nf">OnIsActiveChanged</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">UpdateCommand</span><span class="p">.</span><span class="n">IsActive</span> <span class="p">=</span> <span class="n">IsActive</span><span class="p">;</span>
    <span class="n">IsActiveChanged</span><span class="p">?.</span><span class="nf">Invoke</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="k">new</span> <span class="nf">EventArgs</span><span class="p">());</span>
<span class="p">}</span>
<span class="k">public</span> <span class="k">event</span> <span class="n">EventHandler</span> <span class="n">IsActiveChanged</span><span class="p">;</span>
</code></pre></div></div>
</li>
</ol>

<p>サンプルには出てこないが、IsActiveChanged にイベントを登録しておけば、IsActiveの変化時に処理ができる。</p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="nf">ctor</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">IsActiveChanged</span> <span class="p">+=</span> <span class="p">(</span><span class="kt">object</span> <span class="n">sender</span><span class="p">,</span> <span class="n">EventArgs</span> <span class="n">e</span><span class="p">)</span> <span class="p">=&gt;</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">e</span> <span class="k">is</span> <span class="n">DataEventArgs</span><span class="p">&lt;</span><span class="kt">bool</span><span class="p">&gt;</span> <span class="n">e2</span><span class="p">)</span>
            <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">$"ActiveChanged: </span><span class="p">{</span><span class="n">e2</span><span class="p">.</span><span class="n">Value</span><span class="p">}</span><span class="s">"</span><span class="p">);</span>
    <span class="p">};</span>
<span class="p">}</span>

<span class="k">private</span> <span class="kt">bool</span> <span class="n">_isActive</span><span class="p">;</span>
<span class="k">public</span> <span class="kt">bool</span> <span class="n">IsActive</span>
<span class="p">{</span>
    <span class="k">get</span> <span class="p">=&gt;</span> <span class="n">_isActive</span><span class="p">;</span>
    <span class="k">set</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nf">SetProperty</span><span class="p">(</span><span class="k">ref</span> <span class="n">_isActive</span><span class="p">,</span> <span class="k">value</span><span class="p">))</span>
            <span class="n">IsActiveChanged</span><span class="p">?.</span><span class="nf">Invoke</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="k">new</span> <span class="n">DataEventArgs</span><span class="p">&lt;</span><span class="kt">bool</span><span class="p">&gt;(</span><span class="k">value</span><span class="p">));</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="k">public</span> <span class="k">event</span> <span class="n">EventHandler</span> <span class="n">IsActiveChanged</span><span class="p">;</span>
</code></pre></div></div>

<h2>
<span id="14-usingeventaggregator-" class="fragment"></span><a href="#14-usingeventaggregator-"><i class="fa fa-link"></i></a>14-UsingEventAggregator ○</h2>

<p>モジュール間で情報の受け渡しをするサンプル</p>

<h3>
<span id="実行-16" class="fragment"></span><a href="#%E5%AE%9F%E8%A1%8C-16"><i class="fa fa-link"></i></a>実行</h3>

<p>ボタンをクリックすると、テキストボックスに入力された文字列が、右のリストボックスに表示される<br>
<a href="https://camo.qiitausercontent.com/eb1089106c5e8f43a6a4ba376a5a2b6a5befe97d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3234393831362f36623465633130622d633737362d333361302d396237662d3661313436623035616332342e6a706567" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F249816%2F6b4ec10b-c776-33a0-9b7f-6a146b05ac24.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=799268c82649194be07860248a0d79c7" alt="14-UsingEventAggregator_View1.jpg" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/249816/6b4ec10b-c776-33a0-9b7f-6a146b05ac24.jpeg" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F249816%2F6b4ec10b-c776-33a0-9b7f-6a146b05ac24.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=d0777edd5f69f8b92ab2189859870fd9 1x" loading="lazy"></a></p>

<h3>
<span id="内容-16" class="fragment"></span><a href="#%E5%86%85%E5%AE%B9-16"><i class="fa fa-link"></i></a>内容</h3>

<p>左右でModule(プロジェクト)が分かれている。</p>

<h4>
<span id="共通部" class="fragment"></span><a href="#%E5%85%B1%E9%80%9A%E9%83%A8"><i class="fa fa-link"></i></a>共通部</h4>

<p>各プロジェクトが参照できるところに MessageSentEvent.cs を定義する。(サンプルでは別プロジェクト）</p>

<p>MessageSentEvent.cs は、Prism.Events.PubSubEvent&lt;TPayload&gt; を継承してるだけの空クラス。</p>

<p>定義しなくても対応できると思うが、使用時にジェネリックの型パラメータのネストが深くなり見辛いのかも。</p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">MessageSentEvent</span> <span class="p">:</span> <span class="n">PubSubEvent</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span>
<span class="p">{</span>
<span class="p">}</span>
</code></pre></div></div>

<h4>
<span id="親モジュール" class="fragment"></span><a href="#%E8%A6%AA%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB"><i class="fa fa-link"></i></a>親モジュール</h4>

<p>MainWindowを左右に分割して、リージョン名を付けてるだけ。</p>

<div class="code-frame" data-lang="xml"><div class="highlight"><pre class="with-code"><code><span class="nt">&lt;Grid&gt;</span>
    <span class="nt">&lt;Grid.ColumnDefinitions&gt;</span>
        <span class="nt">&lt;ColumnDefinition</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;ColumnDefinition</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/Grid.ColumnDefinitions&gt;</span>
    <span class="nt">&lt;ContentControl</span> <span class="na">prism:RegionManager.RegionName=</span><span class="s">"LeftRegion"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;ContentControl</span> <span class="na">Grid.Column=</span><span class="s">"1"</span>
                    <span class="na">prism:RegionManager.RegionName=</span><span class="s">"RightRegion"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/Grid&gt;</span>
</code></pre></div></div>

<h4>
<span id="子モジュール左情報発行側" class="fragment"></span><a href="#%E5%AD%90%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB%E5%B7%A6%E6%83%85%E5%A0%B1%E7%99%BA%E8%A1%8C%E5%81%B4"><i class="fa fa-link"></i></a>子モジュール（左：情報発行側）</h4>

<p>親モジュールへの配置は、07-Modules と同じ手法なので割愛。</p>

<p>ViewModelのコンストラクタで IEventAggregator を受けており、ボタンクリック時に DelegateCommand で SendMessage() がコールされている。</p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">MessageViewModel</span> <span class="p">:</span> <span class="n">BindableBase</span>
<span class="p">{</span>
    <span class="n">IEventAggregator</span> <span class="n">_ea</span><span class="p">;</span>

    <span class="k">private</span> <span class="kt">string</span> <span class="n">_message</span> <span class="p">=</span> <span class="s">"Message to Send"</span><span class="p">;</span>
    <span class="k">public</span> <span class="kt">string</span> <span class="n">Message</span>
    <span class="p">{</span>
        <span class="k">get</span> <span class="p">{</span> <span class="k">return</span> <span class="n">_message</span><span class="p">;</span> <span class="p">}</span>
        <span class="k">set</span> <span class="p">{</span> <span class="nf">SetProperty</span><span class="p">(</span><span class="k">ref</span> <span class="n">_message</span><span class="p">,</span> <span class="k">value</span><span class="p">);</span> <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="n">DelegateCommand</span> <span class="n">SendMessageCommand</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>

    <span class="k">public</span> <span class="nf">MessageViewModel</span><span class="p">(</span><span class="n">IEventAggregator</span> <span class="n">ea</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">_ea</span> <span class="p">=</span> <span class="n">ea</span><span class="p">;</span>
        <span class="n">SendMessageCommand</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">DelegateCommand</span><span class="p">(</span><span class="n">SendMessage</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">private</span> <span class="k">void</span> <span class="nf">SendMessage</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">_ea</span><span class="p">.</span><span class="n">GetEvent</span><span class="p">&lt;</span><span class="n">MessageSentEvent</span><span class="p">&gt;().</span><span class="nf">Publish</span><span class="p">(</span><span class="n">Message</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>情報発行は、デリゲートコマンド引数のActionがポイント</p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="n">_ea</span><span class="p">.</span><span class="n">GetEvent</span><span class="p">&lt;</span><span class="n">MessageSentEvent</span><span class="p">&gt;().</span><span class="nf">Publish</span><span class="p">(</span><span class="n">Message</span><span class="p">);</span>
</code></pre></div></div>

<h4>
<span id="子モジュール右情報取得側" class="fragment"></span><a href="#%E5%AD%90%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB%E5%8F%B3%E6%83%85%E5%A0%B1%E5%8F%96%E5%BE%97%E5%81%B4"><i class="fa fa-link"></i></a>子モジュール（右：情報取得側）</h4>

<p>左側の子モジュールと同様に、コンストラクタで IEventAggregator を受ける。</p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">MessageListViewModel</span> <span class="p">:</span> <span class="n">BindableBase</span>
<span class="p">{</span>
    <span class="n">IEventAggregator</span> <span class="n">_ea</span><span class="p">;</span>

    <span class="k">private</span> <span class="n">ObservableCollection</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span> <span class="n">_messages</span><span class="p">;</span>
    <span class="k">public</span> <span class="n">ObservableCollection</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span> <span class="n">Messages</span>
    <span class="p">{</span>
        <span class="k">get</span> <span class="p">{</span> <span class="k">return</span> <span class="n">_messages</span><span class="p">;</span> <span class="p">}</span>
        <span class="k">set</span> <span class="p">{</span> <span class="nf">SetProperty</span><span class="p">(</span><span class="k">ref</span> <span class="n">_messages</span><span class="p">,</span> <span class="k">value</span><span class="p">);</span> <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="nf">MessageListViewModel</span><span class="p">(</span><span class="n">IEventAggregator</span> <span class="n">ea</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">_ea</span> <span class="p">=</span> <span class="n">ea</span><span class="p">;</span>
        <span class="n">Messages</span> <span class="p">=</span> <span class="k">new</span> <span class="n">ObservableCollection</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;();</span>
        <span class="n">_ea</span><span class="p">.</span><span class="n">GetEvent</span><span class="p">&lt;</span><span class="n">MessageSentEvent</span><span class="p">&gt;().</span><span class="nf">Subscribe</span><span class="p">(</span><span class="n">MessageReceived</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">private</span> <span class="k">void</span> <span class="nf">MessageReceived</span><span class="p">(</span><span class="kt">string</span> <span class="n">message</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">Messages</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">message</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>情報取得は、コンストラクタ内のメソッドがポイント</p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="n">_ea</span><span class="p">.</span><span class="n">GetEvent</span><span class="p">&lt;</span><span class="n">MessageSentEvent</span><span class="p">&gt;().</span><span class="nf">Subscribe</span><span class="p">(</span><span class="n">MessageReceived</span><span class="p">);</span>
</code></pre></div></div>

<h2>
<span id="15-filteringevents-" class="fragment"></span><a href="#15-filteringevents-"><i class="fa fa-link"></i></a>15-FilteringEvents ○</h2>

<p>EventAggregator にて、情報取得側が取得する情報のフィルタリングを行うサンプル</p>

<h3>
<span id="実行-17" class="fragment"></span><a href="#%E5%AE%9F%E8%A1%8C-17"><i class="fa fa-link"></i></a>実行</h3>

<p>14-UsingEventAggregator と同じView。</p>

<p>機能差分は情報の取得側のフィルタリングで、文字列に "Brian" が含まれる場合のみ情報を取得している。</p>

<p>※情報の発行側は、14-UsingEventAggregator と同じで、文字列に関わらず発行する。</p>

<h3>
<span id="内容-17" class="fragment"></span><a href="#%E5%86%85%E5%AE%B9-17"><i class="fa fa-link"></i></a>内容</h3>

<p>14-UsingEventAggregator からの変化点である 右側モジュール（ModuleB）についてのみまとめる。</p>

<h4>
<span id="子モジュール右情報取得側-1" class="fragment"></span><a href="#%E5%AD%90%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB%E5%8F%B3%E6%83%85%E5%A0%B1%E5%8F%96%E5%BE%97%E5%81%B4-1"><i class="fa fa-link"></i></a>子モジュール（右：情報取得側）</h4>

<p>フィルタリングは、ModuleB の ViewModel に実装されており、判定は Predicate&lt;T&gt; なので、色々と差し替えできそう。</p>

<p>引数の " ThreadOption threadOption" と "bool keepSubscriberReferenceAlive" については未調査。</p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="c1">// PubSubEvent&lt;TPayload&gt;.Subscribe(</span>
<span class="c1">//     Action&lt;TPayload&gt; action,</span>
<span class="c1">//     ThreadOption threadOption,</span>
<span class="c1">//     bool keepSubscriberReferenceAlive,</span>
<span class="c1">//     Predicate&lt;TPayload&gt; filter) </span>
<span class="n">_ea</span><span class="p">.</span><span class="n">GetEvent</span><span class="p">&lt;</span><span class="n">MessageSentEvent</span><span class="p">&gt;()</span>
    <span class="p">.</span><span class="nf">Subscribe</span><span class="p">(</span><span class="n">MessageReceived</span><span class="p">,</span> <span class="n">ThreadOption</span><span class="p">.</span><span class="n">PublisherThread</span><span class="p">,</span>
        <span class="k">false</span><span class="p">,</span> <span class="p">(</span><span class="n">filter</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="n">filter</span><span class="p">.</span><span class="nf">Contains</span><span class="p">(</span><span class="s">"Brian"</span><span class="p">));</span>
</code></pre></div></div>

<h2>
<span id="16-regioncontext-" class="fragment"></span><a href="#16-regioncontext-"><i class="fa fa-link"></i></a>16-RegionContext ○</h2>

<p>初の複数Region。上下で分かれている。</p>

<h3>
<span id="実行-18" class="fragment"></span><a href="#%E5%AE%9F%E8%A1%8C-18"><i class="fa fa-link"></i></a>実行</h3>

<p>上下に分かれており、上部リストボックスで選択した情報が、下部テキストブロックに表示される。</p>

<p><a href="https://camo.qiitausercontent.com/ea77a0a2f9df9facd88e49564783dbea2a942e2a/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3234393831362f37383432666262332d323465342d653737312d616661622d3533373535346235656135652e6a706567" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F249816%2F7842fbb3-24e4-e771-afab-537554b5ea5e.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=957193406c7e28fecbd9cd145db0459b" alt="16-RegionContext_View1.jpg" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/249816/7842fbb3-24e4-e771-afab-537554b5ea5e.jpeg" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F249816%2F7842fbb3-24e4-e771-afab-537554b5ea5e.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=2e04b9c5262b4ac6eaed277d84a1f850 1x" loading="lazy"></a></p>

<h3>
<span id="内容-18" class="fragment"></span><a href="#%E5%86%85%E5%AE%B9-18"><i class="fa fa-link"></i></a>内容</h3>

<p>リッチUIアプリの頻出パターン。</p>

<p>Prism特有のクラスとかは使ってなさげで、特別難しいことはないと思う。</p>

<h4>
<span id="親モジュール-1" class="fragment"></span><a href="#%E8%A6%AA%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB-1"><i class="fa fa-link"></i></a>親モジュール</h4>

<p>特別なことはしてない。子モジュールを読み込むだけ。（07-Modules - Code）</p>

<h4>
<span id="子モジュール" class="fragment"></span><a href="#%E5%AD%90%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB"><i class="fa fa-link"></i></a>子モジュール</h4>

<p>ListBox の選択情報を SelectedItem で取得し表示している。</p>

<p>下部コントロールの配置をリージョン名から行っており、こーゆー雰囲気でUIコントロールを細分化して管理するのかなと思った。</p>

<div class="code-frame" data-lang="xml"><div class="highlight"><pre class="with-code"><code>prism:RegionManager.RegionName="PersonDetailsRegion"
</code></pre></div></div>

<h2>
<span id="17-basicregionnavigation-" class="fragment"></span><a href="#17-basicregionnavigation-"><i class="fa fa-link"></i></a>17-BasicRegionNavigation ○</h2>

<p>Navitgation を使って、表示する自作UserControl を切り替えるサンプル</p>

<h3>
<span id="実行-19" class="fragment"></span><a href="#%E5%AE%9F%E8%A1%8C-19"><i class="fa fa-link"></i></a>実行</h3>

<p>ボタンが二つ配置されており、各ボタンを押すと、ウィンドウ下部に ViewA もしくは ViewB が読み込まれる。</p>

<p>起動時は ViewA も ViewB も読み込まれていない状態。</p>

<p><a href="https://camo.qiitausercontent.com/c68e9971150ba9b4f90bae30b9e4969d504bf643/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3234393831362f30306335646239352d363439352d376263352d333666642d6334376363323734646431382e6a706567" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F249816%2F00c5db95-6495-7bc5-36fd-c47cc274dd18.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=f323c6af0fc55ed3c2647b6244c98513" alt="17-BasicRegionNavigation_View1.jpg" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/249816/00c5db95-6495-7bc5-36fd-c47cc274dd18.jpeg" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F249816%2F00c5db95-6495-7bc5-36fd-c47cc274dd18.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=4beeca6bf321d0bd68dba1319e1a4b9a 1x" loading="lazy"></a></p>

<h3>
<span id="内容-19" class="fragment"></span><a href="#%E5%86%85%E5%AE%B9-19"><i class="fa fa-link"></i></a>内容</h3>

<h4>
<span id="子モジュール-1" class="fragment"></span><a href="#%E5%AD%90%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB-1"><i class="fa fa-link"></i></a>子モジュール</h4>

<p>コンテナに ViewA/ViewB を登録している。</p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">ModuleAModule</span> <span class="p">:</span> <span class="n">IModule</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">void</span> <span class="nf">OnInitialized</span><span class="p">(</span><span class="n">IContainerProvider</span> <span class="n">containerProvider</span><span class="p">)</span>
    <span class="p">{</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">void</span> <span class="nf">RegisterTypes</span><span class="p">(</span><span class="n">IContainerRegistry</span> <span class="n">containerRegistry</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">containerRegistry</span><span class="p">.</span><span class="n">RegisterForNavigation</span><span class="p">&lt;</span><span class="n">ViewA</span><span class="p">&gt;();</span>
        <span class="n">containerRegistry</span><span class="p">.</span><span class="n">RegisterForNavigation</span><span class="p">&lt;</span><span class="n">ViewB</span><span class="p">&gt;();</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h4>
<span id="親モジュール-2" class="fragment"></span><a href="#%E8%A6%AA%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB-2"><i class="fa fa-link"></i></a>親モジュール</h4>

<p>重要なのは親モジュール。</p>

<p>親モジュールでは、View(xaml)のButtonの CommandParameter で 子モジュールの UserControl名 (ViewAorViewB) を指定している。</p>

<div class="code-frame" data-lang="xml"><div class="highlight"><pre class="with-code"><code><span class="nt">&lt;Button</span> <span class="na">Command=</span><span class="s">"{Binding NavigateCommand}"</span>
        <span class="na">CommandParameter=</span><span class="s">"ViewA"</span>
        <span class="na">Content=</span><span class="s">"Navigate to View A"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;Button</span> <span class="na">Command=</span><span class="s">"{Binding NavigateCommand}"</span>
        <span class="na">CommandParameter=</span><span class="s">"ViewB"</span>
        <span class="na">Content=</span><span class="s">"Navigate to View B"</span> <span class="nt">/&gt;</span>
</code></pre></div></div>

<p>ViewModel の DelegateCommand で、子モジュールの UserControl を読み込んでいる。</p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="n">DelegateCommand</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span> <span class="n">NavigateCommand</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">private</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>

<span class="k">public</span> <span class="nf">MainWindowViewModel</span><span class="p">(</span><span class="n">IRegionManager</span> <span class="n">regionManager</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">_regionManager</span> <span class="p">=</span> <span class="n">regionManager</span><span class="p">;</span>
    <span class="n">NavigateCommand</span> <span class="p">=</span> <span class="k">new</span> <span class="n">DelegateCommand</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;(</span><span class="n">Navigate</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">private</span> <span class="k">void</span> <span class="nf">Navigate</span><span class="p">(</span><span class="kt">string</span> <span class="n">navigatePath</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">navigatePath</span> <span class="p">!=</span> <span class="k">null</span><span class="p">)</span>
        <span class="n">_regionManager</span><span class="p">.</span><span class="nf">RequestNavigate</span><span class="p">(</span><span class="s">"ContentRegion"</span><span class="p">,</span> <span class="n">navigatePath</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>試しに存在しない UserControl名 (ViewC) を指定したところ、画面に "System.Object" と表示された。例外は発生しなかった。</p>

<h2>
<span id="18-navigationcallback-" class="fragment"></span><a href="#18-navigationcallback-"><i class="fa fa-link"></i></a>18-NavigationCallback ○</h2>

<p>Navigation の完了時に Callback(Action) を行うサンプル。</p>

<h3>
<span id="実行-20" class="fragment"></span><a href="#%E5%AE%9F%E8%A1%8C-20"><i class="fa fa-link"></i></a>実行</h3>

<p>17-BasicRegionNavigation と同じ見た目。</p>

<p>差分としては、ボタンのクリックにより、子モジュールの View が読み込まれたあとに、ポップアップウィンドウが表示される。</p>

<h3>
<span id="内容-20" class="fragment"></span><a href="#%E5%86%85%E5%AE%B9-20"><i class="fa fa-link"></i></a>内容</h3>

<p>モジュール読み出し完了のタイミングで処理を行っている。</p>

<h4>
<span id="親モジュール-3" class="fragment"></span><a href="#%E8%A6%AA%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB-3"><i class="fa fa-link"></i></a>親モジュール</h4>

<p>UserControl の呼び出し時に、Callbackとして Action&lt;NavigationResult&gt; を登録している。</p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="k">private</span> <span class="k">void</span> <span class="nf">Navigate</span><span class="p">(</span><span class="kt">string</span> <span class="n">navigatePath</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">navigatePath</span> <span class="p">!=</span> <span class="k">null</span><span class="p">)</span>
        <span class="n">_regionManager</span><span class="p">.</span><span class="nf">RequestNavigate</span><span class="p">(</span><span class="s">"ContentRegion"</span><span class="p">,</span> <span class="n">navigatePath</span><span class="p">,</span> <span class="n">NavigationComplete</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">private</span> <span class="k">void</span> <span class="nf">NavigationComplete</span><span class="p">(</span><span class="n">NavigationResult</span> <span class="n">result</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">MessageBox</span><span class="p">.</span><span class="nf">Show</span><span class="p">(</span><span class="n">String</span><span class="p">.</span><span class="nf">Format</span><span class="p">(</span><span class="s">"Navigation to {0} complete. "</span><span class="p">,</span> <span class="n">result</span><span class="p">.</span><span class="n">Context</span><span class="p">.</span><span class="n">Uri</span><span class="p">));</span>
<span class="p">}</span>
</code></pre></div></div>

<p>先ほどと同様に存在しない UserControl の指定を試したところ、読み込めていないのに complete. と表示された。</p>

<p><a target="_blank"><img alt="" loading="lazy"></a></p>

<p>NavigationResult には、Errorプロパティ が存在するので、読み込めない場合は、Errorに何か情報が入るかと期待したが、モジュールが見つからない場合でも Error は null だった。（いつErrroが入るか謎…）</p>

<h2>
<span id="19-navigationparticipation-" class="fragment"></span><a href="#19-navigationparticipation-"><i class="fa fa-link"></i></a>19-NavigationParticipation ○</h2>

<p>自作UserControl に INavigationAware を継承することで、Navigationの遷移時に処理を行うサンプル</p>

<h3>
<span id="実行-21" class="fragment"></span><a href="#%E5%AE%9F%E8%A1%8C-21"><i class="fa fa-link"></i></a>実行</h3>

<p>ボタンが二つ配置されており、ボタンを押すと各ボタンに対応した UserControl がタブに読み込まれる。</p>

<p>ボタンをクリックするたびに、UserControl 内のカウンタがインクリメントされていく。</p>

<p>また、ボタンクリック時に対応する UserControl が表示されていなければ、対応するタブにフォーカスが移動する。 </p>

<p><a href="https://camo.qiitausercontent.com/cfcca515ecf4db02310ebe0bb095f9507cb912d6/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3234393831362f65386134333664302d666238302d653463342d383066372d6239643833353234363261642e6a706567" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F249816%2Fe8a436d0-fb80-e4c4-80f7-b9d8352462ad.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=1f41072e3f322f2b216131d7f9d5fd45" alt="19-NavigationParticipation_View1.jpg" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/249816/e8a436d0-fb80-e4c4-80f7-b9d8352462ad.jpeg" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F249816%2Fe8a436d0-fb80-e4c4-80f7-b9d8352462ad.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=81db769e8d75ce2639edc73b6ca29a1e 1x" loading="lazy"></a></p>

<h3>
<span id="内容-21" class="fragment"></span><a href="#%E5%86%85%E5%AE%B9-21"><i class="fa fa-link"></i></a>内容</h3>

<h4>
<span id="親モジュール-4" class="fragment"></span><a href="#%E8%A6%AA%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB-4"><i class="fa fa-link"></i></a>親モジュール</h4>

<p>17-BasicRegionNavigation と同じ。</p>

<p>xaml で UserControl名 を指定して、DelegateCommand で読み込み。</p>

<h4>
<span id="子モジュール-2" class="fragment"></span><a href="#%E5%AD%90%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB-2"><i class="fa fa-link"></i></a>子モジュール</h4>

<p>17-BasicRegionNavigation からの差分として、ViewModel が Prism.Regions.INavigationAware を継承している。</p>

<p>INavigationAware には 3つのメソッドが存在し、カウントアップなどを実現している。</p>

<p>下記コメントは勝手に書いています。</p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="k">interface</span> <span class="nc">INavigationAware</span>
<span class="p">{</span>
    <span class="c1">// ナビゲーションが移る前にコールされる。</span>
    <span class="c1">// trueを返すと、このインスタンスが使いまわされる。</span>
    <span class="c1">// falseを返すと、別のインスタンスが作成される。</span>
    <span class="c1">// サンプルの動作だとボタンクリックの度にタブが増えていく。</span>
    <span class="kt">bool</span> <span class="nf">IsNavigationTarget</span><span class="p">(</span><span class="n">NavigationContext</span> <span class="n">navigationContext</span><span class="p">);</span>

    <span class="c1">// ナビゲーションが他に移る時にコールされる。</span>
    <span class="k">void</span> <span class="nf">OnNavigatedFrom</span><span class="p">(</span><span class="n">NavigationContext</span> <span class="n">navigationContext</span><span class="p">);</span>

    <span class="c1">// ナビゲーションが移ってきた時にコールされる。</span>
    <span class="c1">// これでカウンタをインクリメントしていた。</span>
    <span class="k">void</span> <span class="nf">OnNavigatedTo</span><span class="p">(</span><span class="n">NavigationContext</span> <span class="n">navigationContext</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<h2>
<span id="20-navigatetoexistingviews-" class="fragment"></span><a href="#20-navigatetoexistingviews-"><i class="fa fa-link"></i></a>20-NavigateToExistingViews ○</h2>

<p>19-NavigationParticipation の応用サンプル。<br>
特定条件で 自作View を使い回さずに新規追加する。</p>

<h3>
<span id="実行-22" class="fragment"></span><a href="#%E5%AE%9F%E8%A1%8C-22"><i class="fa fa-link"></i></a>実行</h3>

<p>19-NavigationParticipation と同じ見た目。</p>

<p>差分としては、ボタンを一定回数クリックすると、新規タブが作成されて増えていく。</p>

<h3>
<span id="内容-22" class="fragment"></span><a href="#%E5%86%85%E5%AE%B9-22"><i class="fa fa-link"></i></a>内容</h3>

<p>先ほど少し出てきた INavigationAware.IsNavigationTarget() の戻り値をカウンタに応じて変えているだけ。</p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="kt">bool</span> <span class="nf">IsNavigationTarget</span><span class="p">(</span><span class="n">NavigationContext</span> <span class="n">navigationContext</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="n">PageViews</span> <span class="p">/</span> <span class="m">6</span> <span class="p">!=</span> <span class="m">1</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h2>
<span id="21-passingparameters-" class="fragment"></span><a href="#21-passingparameters-"><i class="fa fa-link"></i></a>21-PassingParameters △</h2>

<h3>
<span id="実行-23" class="fragment"></span><a href="#%E5%AE%9F%E8%A1%8C-23"><i class="fa fa-link"></i></a>実行</h3>

<p>16-RegionContext とほぼ同じ見た目。</p>

<p>差分としては、リストアイテムのクリックにより、下部にタブが追加されて情報が表示される。</p>

<p><a href="https://camo.qiitausercontent.com/462d400efdd57077ebec7e9c3b57b5a7deeac486/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3234393831362f62636134306234642d353233382d346235342d353165312d3362626135343437643336342e6a706567" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F249816%2Fbca40b4d-5238-4b54-51e1-3bba5447d364.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=1ba24f01b427224ec1e46cf05daa8143" alt="21-PassingParameters_View1.jpg" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/249816/bca40b4d-5238-4b54-51e1-3bba5447d364.jpeg" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F249816%2Fbca40b4d-5238-4b54-51e1-3bba5447d364.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=1f8925c47cf004adbd47612b05d3ca03 1x" loading="lazy"></a></p>

<h3>
<span id="内容-23" class="fragment"></span><a href="#%E5%86%85%E5%AE%B9-23"><i class="fa fa-link"></i></a>内容</h3>

<p>複雑で少し付いていけない…<br>
<del>実現してることに比べて実装が難しすぎる気がする…</del></p>

<h4>
<span id="親モジュール-5" class="fragment"></span><a href="#%E8%A6%AA%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB-5"><i class="fa fa-link"></i></a>親モジュール</h4>

<p>特に目新しいことはしてない</p>

<h4>
<span id="子モジュール-3" class="fragment"></span><a href="#%E5%AD%90%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB-3"><i class="fa fa-link"></i></a>子モジュール</h4>

<ol>
<li><p>ListBox の SelectionChanged イベントで 選択されている Personインスタンス を DelegateCommand の Action&lt;Person&gt; に渡す</p></li>
<li>
<p>Action&lt;Person&gt; では、Tabのリージョン("PersonDetailsRegion") に PersonDetail.xaml を登録する</p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="k">private</span> <span class="k">void</span> <span class="nf">PersonSelected</span><span class="p">(</span><span class="n">Person</span> <span class="n">person</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">var</span> <span class="n">parameters</span> <span class="p">=</span> <span class="k">new</span> <span class="n">NavigationParameters</span>
    <span class="p">{</span>
        <span class="p">{</span> <span class="s">"person"</span><span class="p">,</span> <span class="n">person</span> <span class="p">}</span>
    <span class="p">};</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">person</span> <span class="p">!=</span> <span class="k">null</span><span class="p">)</span>
        <span class="n">_regionManager</span><span class="p">.</span><span class="nf">RequestNavigate</span><span class="p">(</span>
            <span class="s">"PersonDetailsRegion"</span><span class="p">,</span> <span class="s">"PersonDetail"</span><span class="p">,</span> <span class="n">parameters</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>
</li>
<li>
<p>初回の PersonDetailViewModel では、インスタンスが作成されて、OnNavigatedTo() で SelectedPerson が更新される</p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="k">void</span> <span class="nf">OnNavigatedTo</span><span class="p">(</span><span class="n">NavigationContext</span> <span class="n">navigationContext</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">navigationContext</span><span class="p">.</span><span class="n">Parameters</span><span class="p">[</span><span class="s">"person"</span><span class="p">]</span> <span class="k">is</span> <span class="n">Person</span> <span class="n">person</span><span class="p">)</span>
        <span class="n">SelectedPerson</span> <span class="p">=</span> <span class="n">person</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">public</span> <span class="kt">bool</span> <span class="nf">IsNavigationTarget</span><span class="p">(</span><span class="n">NavigationContext</span> <span class="n">navigationContext</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">navigationContext</span><span class="p">.</span><span class="n">Parameters</span><span class="p">[</span><span class="s">"person"</span><span class="p">]</span> <span class="k">is</span> <span class="n">Person</span> <span class="n">person</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">SelectedPerson</span> <span class="p">!=</span> <span class="k">null</span> <span class="p">&amp;&amp;</span> <span class="n">SelectedPerson</span><span class="p">.</span><span class="n">LastName</span> <span class="p">==</span> <span class="n">person</span><span class="p">.</span><span class="n">LastName</span><span class="p">;</span>
    <span class="k">else</span>
        <span class="k">return</span> <span class="k">true</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>
</li>
<li><p>初回以降は、IsNavigationTarget() で 選択された Person に対応するViewModelインスタンスが存在するかがチェックされて、存在しなければ新たなインスタンスが作成され増えていく。</p></li>
</ol>

<h2>
<span id="22-confirmcancelnavigation-" class="fragment"></span><a href="#22-confirmcancelnavigation-"><i class="fa fa-link"></i></a>22-ConfirmCancelNavigation ○</h2>

<p>Navigation に遷移するかどうかをダイアログで切り替えるサンプル</p>

<h3>
<span id="実行-24" class="fragment"></span><a href="#%E5%AE%9F%E8%A1%8C-24"><i class="fa fa-link"></i></a>実行</h3>

<p>17-BasicRegionNavigation と同じ見た目で、機能もほぼ同じ。</p>

<p>差分としては、ViewAを表示中にボタンBを押下すると、Navigate するかどうかを Yes/No 形式のメッセージボックスで質問される。<br>
Yes を選択すると ViewB の表示に切り替わる。<br>
No を選択すると ViewA の表示のまま変化しない。</p>

<h3>
<span id="内容-24" class="fragment"></span><a href="#%E5%86%85%E5%AE%B9-24"><i class="fa fa-link"></i></a>内容</h3>

<h4>
<span id="親モジュール-6" class="fragment"></span><a href="#%E8%A6%AA%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB-6"><i class="fa fa-link"></i></a>親モジュール</h4>

<p>17-BasicRegionNavigation と同じで、目新しいことはない</p>

<h4>
<span id="子モジュール-4" class="fragment"></span><a href="#%E5%AD%90%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB-4"><i class="fa fa-link"></i></a>子モジュール</h4>

<p>ViewA の ViewModel のみ Prism.Regions.IConfirmNavigationRequest を継承している。</p>

<ul>
<li>IConfirmNavigationRequest が継承してるインターフェースは既出（19-NavigationParticipation）</li>
<li>IConfirmNavigationRequest  のメソッドは 以下の 1つのみで『このインスタンスからの移動を受け入れるかどうか』を選択できる。</li>
</ul>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="k">interface</span> <span class="nc">IConfirmNavigationRequest</span> <span class="p">:</span> <span class="n">INavigationAware</span>
<span class="p">{</span>
    <span class="k">void</span> <span class="nf">ConfirmNavigationRequest</span><span class="p">(</span><span class="n">NavigationContext</span> <span class="n">navigationContext</span><span class="p">,</span> <span class="n">Action</span><span class="p">&lt;</span><span class="kt">bool</span><span class="p">&gt;</span> <span class="n">continuationCallback</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>ViewAViewModel の実装</p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="k">void</span> <span class="nf">ConfirmNavigationRequest</span><span class="p">(</span>
    <span class="n">NavigationContext</span> <span class="n">navigationContext</span><span class="p">,</span> <span class="n">Action</span><span class="p">&lt;</span><span class="kt">bool</span><span class="p">&gt;</span> <span class="n">continuationCallback</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">bool</span> <span class="n">result</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">MessageBox</span><span class="p">.</span><span class="nf">Show</span><span class="p">(</span><span class="s">"Do you to navigate?"</span><span class="p">,</span> <span class="s">"Navigate?"</span><span class="p">,</span>
                        <span class="n">MessageBoxButton</span><span class="p">.</span><span class="n">YesNo</span><span class="p">)</span> <span class="p">==</span> <span class="n">MessageBoxResult</span><span class="p">.</span><span class="n">No</span><span class="p">)</span>
        <span class="n">result</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
    <span class="nf">continuationCallback</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<h2>
<span id="23-regionmemberlifetime-" class="fragment"></span><a href="#23-regionmemberlifetime-"><i class="fa fa-link"></i></a>23-RegionMemberLifetime ○</h2>

<p>Viewの非アクティブ時にインスタンスを保持するかどうかを IRegionMemberLifetime により指定するサンプル</p>

<h3>
<span id="実行-25" class="fragment"></span><a href="#%E5%AE%9F%E8%A1%8C-25"><i class="fa fa-link"></i></a>実行</h3>

<p>17-BasicRegionNavigation と同じ見た目。</p>

<ul>
<li>ViewA/ViewB ボタンをクリックすると、各Viewの名前が表示された 水色のパネルが表示される。</li>
<li>ViewBはクリックするたびにパネルが増えていく。</li>
<li>ViewAは何度クリックしても 1つのパネルしかできず、ViewBをクリックするとViewAパネルは消える。</li>
</ul>

<p>動作だけ見ても意味が分からないが、コードを見るに、水色パネルはViewのインスタンスを可視化している。</p>

<p>ViewAは非アクティブ時にインスタンスを保持しない造りにしているので、ViewA→ViewB と操作すると、ViewAパネル（インスタンス）が消える。</p>

<h3>
<span id="内容-25" class="fragment"></span><a href="#%E5%86%85%E5%AE%B9-25"><i class="fa fa-link"></i></a>内容</h3>

<h4>
<span id="親モジュール-7" class="fragment"></span><a href="#%E8%A6%AA%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB-7"><i class="fa fa-link"></i></a>親モジュール</h4>

<p>水色パネルは、ObservableCollection&lt;object&gt; を ItemsControl により表示してる。</p>

<p>ObservableCollection&lt;object&gt; だが string しか格納されないので、ObservableCollection&lt;string&gt; でも問題ない。</p>

<h5>
<span id="regionにviewが追加された際の処理" class="fragment"></span><a href="#region%E3%81%ABview%E3%81%8C%E8%BF%BD%E5%8A%A0%E3%81%95%E3%82%8C%E3%81%9F%E9%9A%9B%E3%81%AE%E5%87%A6%E7%90%86"><i class="fa fa-link"></i></a>RegionにViewが追加された際の処理</h5>

<p>CollectionChangedイベントにより実現されている。サンプルで初めて出てきた。</p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="nf">MainWindowViewModel</span><span class="p">(</span><span class="n">IRegionManager</span> <span class="n">regionManager</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">_regionManager</span> <span class="p">=</span> <span class="n">regionManager</span><span class="p">;</span>
    <span class="n">_regionManager</span><span class="p">.</span><span class="n">Regions</span><span class="p">.</span><span class="n">CollectionChanged</span> <span class="p">+=</span> <span class="n">Regions_CollectionChanged</span><span class="p">;</span>
    <span class="n">NavigateCommand</span> <span class="p">=</span> <span class="k">new</span> <span class="n">DelegateCommand</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;(</span><span class="n">Navigate</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// こちらはアプリ起動直後に1回しか来ない (xaml "ContentRegion" の追加)</span>
<span class="k">private</span> <span class="k">void</span> <span class="nf">Regions_CollectionChanged</span><span class="p">(</span><span class="kt">object</span> <span class="n">sender</span><span class="p">,</span> <span class="n">NotifyCollectionChangedEventArgs</span> <span class="n">e</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">Action</span> <span class="p">==</span> <span class="n">NotifyCollectionChangedAction</span><span class="p">.</span><span class="n">Add</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">var</span> <span class="n">region</span> <span class="p">=</span> <span class="p">(</span><span class="n">IRegion</span><span class="p">)</span><span class="n">e</span><span class="p">.</span><span class="n">NewItems</span><span class="p">[</span><span class="m">0</span><span class="p">];</span>
        <span class="n">region</span><span class="p">.</span><span class="n">Views</span><span class="p">.</span><span class="n">CollectionChanged</span> <span class="p">+=</span> <span class="n">Views_CollectionChanged</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// こちらはボタンクリック(ViewA/B)追加の度にAddが来る</span>
<span class="c1">// ViewAインスタンスが消える際にはRemoveが来る</span>
<span class="k">private</span> <span class="k">void</span> <span class="nf">Views_CollectionChanged</span><span class="p">(</span><span class="kt">object</span> <span class="n">sender</span><span class="p">,</span> <span class="n">NotifyCollectionChangedEventArgs</span> <span class="n">e</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">Action</span> <span class="p">==</span> <span class="n">NotifyCollectionChangedAction</span><span class="p">.</span><span class="n">Add</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">ViewPanels</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">NewItems</span><span class="p">[</span><span class="m">0</span><span class="p">].</span><span class="nf">GetType</span><span class="p">().</span><span class="n">Name</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">Action</span> <span class="p">==</span> <span class="n">NotifyCollectionChangedAction</span><span class="p">.</span><span class="n">Remove</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">ViewPanels</span><span class="p">.</span><span class="nf">Remove</span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">OldItems</span><span class="p">[</span><span class="m">0</span><span class="p">].</span><span class="nf">GetType</span><span class="p">().</span><span class="n">Name</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h4>
<span id="子モジュール-5" class="fragment"></span><a href="#%E5%AD%90%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB-5"><i class="fa fa-link"></i></a>子モジュール</h4>

<p>ほぼ 19-NavigationParticipation と同じ。</p>

<p>差分は、ViewAViewModel が Prism.Regions.IRegionMemberLifetime を継承している点だけ。</p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="k">interface</span> <span class="nc">IRegionMemberLifetime</span>
<span class="p">{</span>
    <span class="c1">// インスタンスを非アクティブ化時に保持するか？</span>
    <span class="kt">bool</span> <span class="n">KeepAlive</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>ViewAViewModel の実装（非アクティブ時は常にインスタンスを保持しない）</p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="kt">bool</span> <span class="n">KeepAlive</span> <span class="p">{</span> <span class="k">get</span> <span class="p">=&gt;</span> <span class="k">false</span><span class="p">;</span> <span class="p">}</span>
</code></pre></div></div>

<h2>
<span id="24-navigationjournal-" class="fragment"></span><a href="#24-navigationjournal-"><i class="fa fa-link"></i></a>24-NavigationJournal ○</h2>

<p>ブラウザの戻る進むのように画面遷移するサンプル</p>

<h3>
<span id="実行-26" class="fragment"></span><a href="#%E5%AE%9F%E8%A1%8C-26"><i class="fa fa-link"></i></a>実行</h3>

<p>16-RegionContext と同じ Person選択系。</p>

<p>リストボックスが表示されており、選択すると詳細表示に画面が遷移する。</p>

<p>GoBackボタンで戻れて、GoForwardボタンで進める。画面遷移が初めて出てきた。</p>

<p><a href="https://camo.qiitausercontent.com/2f549f42df375c2a5599512f913fe3212805264f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3234393831362f33373338626133662d313537622d656665652d666138312d6166646636363634623563312e676966" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F249816%2F3738ba3f-157b-efee-fa81-afdf6664b5c1.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=8c7f8b709236cb4c87f0a63fca3befe7" alt="24-NavigationJournal_View1.gif" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/249816/3738ba3f-157b-efee-fa81-afdf6664b5c1.gif" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F249816%2F3738ba3f-157b-efee-fa81-afdf6664b5c1.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=40228b6841d52c7858a3240ce46ddfc9 1x" loading="lazy"></a></p>

<h3>
<span id="内容-26" class="fragment"></span><a href="#%E5%86%85%E5%AE%B9-26"><i class="fa fa-link"></i></a>内容</h3>

<h4>
<span id="親モジュール-8" class="fragment"></span><a href="#%E8%A6%AA%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB-8"><i class="fa fa-link"></i></a>親モジュール</h4>

<p>特に目新しい点はなし</p>

<h4>
<span id="子モジュール-6" class="fragment"></span><a href="#%E5%AD%90%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB-6"><i class="fa fa-link"></i></a>子モジュール</h4>

<ol>
<li>
<p>ListBoxのSelectionChangedイベントで、ViewModelからUserControlのPersonDetailを読み出す。</p>

<div class="code-frame" data-lang="xml"><div class="highlight"><pre class="with-code"><code><span class="nt">&lt;i:Interaction.Triggers&gt;</span>
   <span class="nt">&lt;i:EventTrigger</span> <span class="na">EventName=</span><span class="s">"SelectionChanged"</span><span class="nt">&gt;</span>
       <span class="nt">&lt;prism:InvokeCommandAction</span>
           <span class="na">Command=</span><span class="s">"{Binding PersonSelectedCommand}"</span>
           <span class="na">CommandParameter=</span><span class="s">"{Binding SelectedItem, ElementName=_listOfPeople}"</span> <span class="nt">/&gt;</span>
   <span class="nt">&lt;/i:EventTrigger&gt;</span>
<span class="nt">&lt;/i:Interaction.Triggers&gt;</span>
</code></pre></div></div>
</li>
<li>
<p>PersonDetailViewModel は INavigationAware を継承しており、ナビゲートが移った際に IRegionNavigationJournal を保持する。<br>
この Prism.Regions.IRegionNavigationJournal を使って画面遷移を制御する。</p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="n">DelegateCommand</span> <span class="n">GoBackCommand</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>

<span class="k">public</span> <span class="nf">PersonDetailViewModel</span><span class="p">()</span>
<span class="p">{</span>
   <span class="n">GoBackCommand</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">DelegateCommand</span><span class="p">(</span><span class="n">GoBack</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">private</span> <span class="k">void</span> <span class="nf">GoBack</span><span class="p">()</span> <span class="p">=&gt;</span> <span class="n">_journal</span><span class="p">.</span><span class="nf">GoBack</span><span class="p">();</span>

<span class="k">public</span> <span class="k">void</span> <span class="nf">OnNavigatedTo</span><span class="p">(</span><span class="n">NavigationContext</span> <span class="n">navigationContext</span><span class="p">)</span>
<span class="p">{</span>
   <span class="n">_journal</span> <span class="p">=</span> <span class="n">navigationContext</span><span class="p">.</span><span class="n">NavigationService</span><span class="p">.</span><span class="n">Journal</span><span class="p">;</span>
   <span class="k">if</span> <span class="p">(</span><span class="n">navigationContext</span><span class="p">.</span><span class="n">Parameters</span><span class="p">[</span><span class="s">"person"</span><span class="p">]</span> <span class="k">is</span> <span class="n">Person</span> <span class="n">person</span><span class="p">)</span>
       <span class="n">SelectedPerson</span> <span class="p">=</span> <span class="n">person</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>
</li>
<li>
<p>Go Backボタンが押されたら、IRegionNavigationJournal.GoBack() により、最初のViewModelに戻る。<br>
ここでも INavigationAware.OnNavigatedTo()  で IRegionNavigationJournal を取得し、Forward に使用する。</p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="n">DelegateCommand</span> <span class="n">GoForwardCommand</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>

<span class="k">public</span> <span class="nf">PersonListViewModel</span><span class="p">(</span><span class="n">IRegionManager</span> <span class="n">regionManager</span><span class="p">)</span>
<span class="p">{</span>
   <span class="n">_regionManager</span> <span class="p">=</span> <span class="n">regionManager</span><span class="p">;</span>
   <span class="n">PersonSelectedCommand</span> <span class="p">=</span> <span class="k">new</span> <span class="n">DelegateCommand</span><span class="p">&lt;</span><span class="n">Person</span><span class="p">&gt;(</span><span class="n">PersonSelected</span><span class="p">);</span>
   <span class="nf">CreatePeople</span><span class="p">();</span>

   <span class="n">GoForwardCommand</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">DelegateCommand</span><span class="p">(</span><span class="n">GoForward</span><span class="p">,</span> <span class="n">CanGoForward</span><span class="p">);</span>
<span class="p">}</span>
<span class="k">private</span> <span class="k">void</span> <span class="nf">GoForward</span><span class="p">()</span> <span class="p">=&gt;</span> <span class="n">_journal</span><span class="p">.</span><span class="nf">GoForward</span><span class="p">();</span>
<span class="k">private</span> <span class="kt">bool</span> <span class="nf">CanGoForward</span><span class="p">()</span> <span class="p">=&gt;</span> <span class="n">_journal</span> <span class="p">!=</span> <span class="k">null</span> <span class="p">&amp;&amp;</span> <span class="n">_journal</span><span class="p">.</span><span class="n">CanGoForward</span><span class="p">;</span>

<span class="k">public</span> <span class="k">void</span> <span class="nf">OnNavigatedTo</span><span class="p">(</span><span class="n">NavigationContext</span> <span class="n">navigationContext</span><span class="p">)</span>
<span class="p">{</span>
   <span class="n">_journal</span> <span class="p">=</span> <span class="n">navigationContext</span><span class="p">.</span><span class="n">NavigationService</span><span class="p">.</span><span class="n">Journal</span><span class="p">;</span>
   <span class="n">GoForwardCommand</span><span class="p">.</span><span class="nf">RaiseCanExecuteChanged</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div></div>
</li>
</ol>

<h2>
<span id="25-notificationrequest-" class="fragment"></span><a href="#25-notificationrequest-"><i class="fa fa-link"></i></a>25-NotificationRequest ○</h2>

<p>ポップアップウィンドウ（OKのみ）を表示するサンプル</p>

<h3>
<span id="実行-27" class="fragment"></span><a href="#%E5%AE%9F%E8%A1%8C-27"><i class="fa fa-link"></i></a>実行</h3>

<p>ボタンが1つ配置されており、クリックするとポップアップウィンドウが表示される。<br>
ポップアップウィンドウの OK ボタンを押すと、タイトル文字列が変化する。</p>

<h3>
<span id="内容-27" class="fragment"></span><a href="#%E5%86%85%E5%AE%B9-27"><i class="fa fa-link"></i></a>内容</h3>

<p>ポップアップウィンドウ（OKボタンのみ）を出す方法</p>

<ol>
<li>
<p>ViewModel に InteractionRequest&lt;INotification&gt;  プロパティを定義し、Buttonコマンドなどをトリガにして Raise() する。<br>
Raise() は Action&lt;T&gt; で callback を指定できるので、OKボタン押下後の処理はそちらで行う。</p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="n">InteractionRequest</span><span class="p">&lt;</span><span class="n">INotification</span><span class="p">&gt;</span> <span class="n">NotificationRequest</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>
    <span class="p">=</span> <span class="k">new</span> <span class="n">InteractionRequest</span><span class="p">&lt;</span><span class="n">INotification</span><span class="p">&gt;();</span>

<span class="k">public</span> <span class="n">DelegateCommand</span> <span class="n">NotificationCommand</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>

<span class="k">public</span> <span class="nf">MainWindowViewModel</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">NotificationCommand</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">DelegateCommand</span><span class="p">(()</span> <span class="p">=&gt;</span>
    <span class="p">{</span>
        <span class="n">NotificationRequest</span><span class="p">.</span><span class="nf">Raise</span><span class="p">(</span>
            <span class="k">new</span> <span class="n">Notification</span>
            <span class="p">{</span>
                <span class="n">Content</span> <span class="p">=</span> <span class="s">"Notification Message"</span><span class="p">,</span>
                <span class="n">Title</span> <span class="p">=</span> <span class="s">"Notification"</span>
            <span class="p">},</span>
            <span class="n">r</span> <span class="p">=&gt;</span> <span class="n">Title</span> <span class="p">=</span> <span class="s">"Notified"</span><span class="p">);</span>
    <span class="p">});</span>
<span class="p">}</span>
</code></pre></div></div>
</li>
<li><p>xaml側にも下記対応が必要</p></li>
</ol>

<ul>
<li>IsModal：ポップアップ表示後に親ウィンドウの操作を禁止する</li>
<li>
<p>CenterOverAssociatedObject：ポップアップウィンドウを親ウィンドウの中央に表示する</p>

<div class="code-frame" data-lang="xml"><div class="highlight"><pre class="with-code"><code><span class="nt">&lt;i:Interaction.Triggers&gt;</span>
    <span class="nt">&lt;prism:InteractionRequestTrigger</span>
            <span class="na">SourceObject=</span><span class="s">"{Binding NotificationRequest}"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;prism:PopupWindowAction</span> <span class="na">IsModal=</span><span class="s">"True"</span>
            <span class="na">CenterOverAssociatedObject=</span><span class="s">"True"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/prism:InteractionRequestTrigger&gt;</span>
<span class="nt">&lt;/i:Interaction.Triggers&gt;</span>
</code></pre></div></div>
</li>
</ul>

<h2>
<span id="26-confirmationrequest-" class="fragment"></span><a href="#26-confirmationrequest-"><i class="fa fa-link"></i></a>26-ConfirmationRequest ○</h2>

<p>ポップアップウィンドウ（OK/Cancel）を表示するサンプル</p>

<h3>
<span id="実行-28" class="fragment"></span><a href="#%E5%AE%9F%E8%A1%8C-28"><i class="fa fa-link"></i></a>実行</h3>

<p>25-NotificationRequest に、OK/Cancel 形式のポップアップウィンドウを表示するボタンが追加されたサンプル。</p>

<h3>
<span id="内容-28" class="fragment"></span><a href="#%E5%86%85%E5%AE%B9-28"><i class="fa fa-link"></i></a>内容</h3>

<p>ポップアップウィンドウ（OK/Cancelボタン）を出す方法</p>

<ol>
<li>
<p>ViewModel対応<br>
25-NotificationRequest とほぼ同じ。OK/Cancelは Confirmed(bool型) で取得できる。</p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="n">InteractionRequest</span><span class="p">&lt;</span><span class="n">IConfirmation</span><span class="p">&gt;</span> <span class="n">ConfirmationRequest</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>
   <span class="p">=</span> <span class="k">new</span> <span class="n">InteractionRequest</span><span class="p">&lt;</span><span class="n">IConfirmation</span><span class="p">&gt;();</span>

<span class="k">public</span> <span class="n">DelegateCommand</span> <span class="n">ConfirmationCommand</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>

<span class="k">public</span> <span class="nf">MainWindowViewModel</span><span class="p">()</span>
<span class="p">{</span>
   <span class="n">ConfirmationCommand</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">DelegateCommand</span><span class="p">(()</span> <span class="p">=&gt;</span>
       <span class="n">ConfirmationRequest</span><span class="p">.</span><span class="nf">Raise</span><span class="p">(</span>
           <span class="k">new</span> <span class="n">Confirmation</span>
           <span class="p">{</span>
               <span class="n">Title</span> <span class="p">=</span> <span class="s">"Confirmation"</span><span class="p">,</span>
               <span class="n">Content</span> <span class="p">=</span> <span class="s">"Confirmation Message"</span>
           <span class="p">},</span>
           <span class="n">r</span> <span class="p">=&gt;</span> <span class="n">Title</span> <span class="p">=</span> <span class="n">r</span><span class="p">.</span><span class="n">Confirmed</span> <span class="p">?</span> <span class="s">"Confirmed"</span> <span class="p">:</span> <span class="s">"Not Confirmed"</span><span class="p">));</span>
<span class="p">}</span>
</code></pre></div></div>
</li>
<li>
<p>xaml対応<br>
先ほどと全く同じ。SourceObjectの指定を変えているだけ。</p>

<div class="code-frame" data-lang="xml"><div class="highlight"><pre class="with-code"><code><span class="nt">&lt;i:Interaction.Triggers&gt;</span>
   <span class="nt">&lt;prism:InteractionRequestTrigger</span>
       <span class="na">SourceObject=</span><span class="s">"{Binding ConfirmationRequest}"</span><span class="nt">&gt;</span>
       <span class="nt">&lt;prism:PopupWindowAction</span> <span class="na">IsModal=</span><span class="s">"True"</span>
           <span class="na">CenterOverAssociatedObject=</span><span class="s">"True"</span> <span class="nt">/&gt;</span>
   <span class="nt">&lt;/prism:InteractionRequestTrigger&gt;</span>
<span class="nt">&lt;/i:Interaction.Triggers&gt;</span>
</code></pre></div></div>
</li>
</ol>

<h2>
<span id="27-customcontent-" class="fragment"></span><a href="#27-customcontent-"><i class="fa fa-link"></i></a>27-CustomContent ○</h2>

<p>ポップアップウィンドウ（自作View）を表示するサンプル</p>

<h3>
<span id="実行-29" class="fragment"></span><a href="#%E5%AE%9F%E8%A1%8C-29"><i class="fa fa-link"></i></a>実行</h3>

<p>26-ConfirmationRequest に、カスタムポップアップを表示するボタンが追加されたサンプル。</p>

<h3>
<span id="内容-29" class="fragment"></span><a href="#%E5%86%85%E5%AE%B9-29"><i class="fa fa-link"></i></a>内容</h3>

<p>カスタムポップアップを出す方法</p>

<ol>
<li>
<p>ViewModel対応<br>
26-ConfirmationRequest とほぼ同じ。</p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="n">InteractionRequest</span><span class="p">&lt;</span><span class="n">INotification</span><span class="p">&gt;</span> <span class="n">CustomPopupRequest</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>
    <span class="p">=</span> <span class="k">new</span> <span class="n">InteractionRequest</span><span class="p">&lt;</span><span class="n">INotification</span><span class="p">&gt;();</span>

<span class="k">public</span> <span class="n">DelegateCommand</span> <span class="n">CustomPopupCommand</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>

<span class="k">public</span> <span class="nf">MainWindowViewModel</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">CustomPopupCommand</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">DelegateCommand</span><span class="p">(()</span> <span class="p">=&gt;</span>
        <span class="n">CustomPopupRequest</span><span class="p">.</span><span class="nf">Raise</span><span class="p">(</span>
            <span class="k">new</span> <span class="n">Notification</span>
            <span class="p">{</span>
                <span class="n">Title</span> <span class="p">=</span> <span class="s">"Custom Popup"</span><span class="p">,</span>
                <span class="n">Content</span> <span class="p">=</span> <span class="s">"Custom Popup Message "</span>
            <span class="p">},</span> <span class="n">r</span> <span class="p">=&gt;</span> <span class="n">Title</span> <span class="p">=</span> <span class="s">"Good to go"</span><span class="p">));</span>
<span class="p">}</span>
</code></pre></div></div>
</li>
<li>
<p>xaml対応<br>
PopupWindowAction.WindowContent に、自作UserControl (CustomPopupView) を指定する。<br>
ポップアップウィンドウの初期サイズなどは、PopupWindowAction.WindowStyle から指定できます。</p>

<div class="code-frame" data-lang="xml"><div class="highlight"><pre class="with-code"><code><span class="nt">&lt;prism:InteractionRequestTrigger</span>
       <span class="na">SourceObject=</span><span class="s">"{Binding CustomPopupRequest}"</span><span class="nt">&gt;</span>
   <span class="nt">&lt;prism:PopupWindowAction</span> <span class="na">IsModal=</span><span class="s">"True"</span>
           <span class="na">CenterOverAssociatedObject=</span><span class="s">"True"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;prism:PopupWindowAction.WindowStyle&gt;</span>
            <span class="nt">&lt;Style</span> <span class="na">TargetType=</span><span class="s">"Window"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;Setter</span> <span class="na">Property=</span><span class="s">"Width"</span> <span class="na">Value=</span><span class="s">"400"</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;Setter</span> <span class="na">Property=</span><span class="s">"Height"</span> <span class="na">Value=</span><span class="s">"200"</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;/Style&gt;</span>
        <span class="nt">&lt;/prism:PopupWindowAction.WindowStyle&gt;</span>
        <span class="nt">&lt;prism:PopupWindowAction.WindowContent&gt;</span>
            <span class="nt">&lt;views:CustomPopupView</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/prism:PopupWindowAction.WindowContent&gt;</span>
    <span class="nt">&lt;/prism:PopupWindowAction&gt;</span>
<span class="nt">&lt;/prism:InteractionRequestTrigger&gt;</span>
</code></pre></div></div>
</li>
</ol>

<h2>
<span id="28-customrequest-" class="fragment"></span><a href="#28-customrequest-"><i class="fa fa-link"></i></a>28-CustomRequest ○</h2>

<p>ポップアップウィンドウ（自作Viewで結果を戻す）を表示するサンプル</p>

<h3>
<span id="実行-30" class="fragment"></span><a href="#%E5%AE%9F%E8%A1%8C-30"><i class="fa fa-link"></i></a>実行</h3>

<p>ポップアップウィンドウで選択した情報を親ウィンドウに戻している。<br>
Cancel（非選択）も判別できる。<br>
アイテム選択後に ×ボタンでウィンドウを閉じた場合も、ちゃんと Cancel として扱われる。</p>

<p><a href="https://camo.qiitausercontent.com/b996a819de8d5bdafbac4c07934a90ce072af3fb/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3234393831362f61643633316665322d313731332d663335622d626463642d3864396566663437393639312e676966" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F249816%2Fad631fe2-1713-f35b-bdcd-8d9eff479691.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=68c5e0e0e0d6d28bf852297b528070e8" alt="28-CustomRequest_View1.gif" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/249816/ad631fe2-1713-f35b-bdcd-8d9eff479691.gif" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F249816%2Fad631fe2-1713-f35b-bdcd-8d9eff479691.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=770ff7570858d4b7ebbdeb68c6a70817 1x" loading="lazy"></a></p>

<h3>
<span id="内容-30" class="fragment"></span><a href="#%E5%86%85%E5%AE%B9-30"><i class="fa fa-link"></i></a>内容</h3>

<ol>
<li>
<p>親ウィンドウのViewModel対応</p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="n">InteractionRequest</span><span class="p">&lt;</span><span class="n">ICustomNotification</span><span class="p">&gt;</span> <span class="n">CustomNotificationRequest</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>
   <span class="p">=</span> <span class="k">new</span> <span class="n">InteractionRequest</span><span class="p">&lt;</span><span class="n">ICustomNotification</span><span class="p">&gt;();</span>

<span class="k">public</span> <span class="n">DelegateCommand</span> <span class="n">CustomNotificationCommand</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>

<span class="k">public</span> <span class="nf">MainWindowViewModel</span><span class="p">()</span>
<span class="p">{</span>
   <span class="n">CustomNotificationCommand</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">DelegateCommand</span><span class="p">(()</span> <span class="p">=&gt;</span>
       <span class="n">CustomNotificationRequest</span><span class="p">.</span><span class="nf">Raise</span><span class="p">(</span>
           <span class="k">new</span> <span class="n">CustomNotification</span>
           <span class="p">{</span>
               <span class="n">Title</span> <span class="p">=</span> <span class="s">"Custom Notification"</span>
           <span class="p">},</span>
           <span class="n">r</span> <span class="p">=&gt;</span>
           <span class="p">{</span>
               <span class="k">if</span> <span class="p">(</span><span class="n">r</span><span class="p">.</span><span class="n">Confirmed</span> <span class="p">&amp;&amp;</span> <span class="n">r</span><span class="p">.</span><span class="n">SelectedItem</span> <span class="p">!=</span> <span class="k">null</span><span class="p">)</span>
                   <span class="n">Title</span> <span class="p">=</span> <span class="s">$"User selected: </span><span class="p">{</span><span class="n">r</span><span class="p">.</span><span class="n">SelectedItem</span><span class="p">}</span><span class="s">"</span><span class="p">;</span>
               <span class="k">else</span>
                   <span class="n">Title</span> <span class="p">=</span> <span class="s">"User cancelled or didn't select an item"</span><span class="p">;</span>
           <span class="p">}));</span>
<span class="p">}</span>
</code></pre></div></div>

<p>InteractionRequest&lt;T&gt; の ICustomNotification がポイント。</p>

<p>ICustomNotification は 自作クラスで（Prism名前空間でない）、26-ConfirmationRequest で出てきた Prism.Interactivity.InteractionRequest.IConfirmation を継承している。</p>

<p>SelectedItemプロパティだけを持っており、ポップアップウィンドウで選択されたアイテムを設定/取得できる。</p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="k">using</span> <span class="nn">Prism.Interactivity.InteractionRequest</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">UsingPopupWindowAction.Notifications</span>
<span class="p">{</span>
   <span class="k">public</span> <span class="k">interface</span> <span class="nc">ICustomNotification</span> <span class="p">:</span> <span class="n">IConfirmation</span>
   <span class="p">{</span>
       <span class="kt">string</span> <span class="n">SelectedItem</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
   <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>
</li>
<li>
<p>親ウィンドウのView対応</p>

<p>27-CustomContent と同じ。ポップアップウィンドウの View 指定が異なるだけ</p>

<div class="code-frame" data-lang="xml"><div class="highlight"><pre class="with-code"><code><span class="nt">&lt;i:Interaction.Triggers&gt;</span> 
   <span class="nt">&lt;prism:InteractionRequestTrigger</span>
       <span class="na">SourceObject=</span><span class="s">"{Binding CustomNotificationRequest}"</span><span class="nt">&gt;</span>
       <span class="nt">&lt;prism:PopupWindowAction</span>
           <span class="na">IsModal=</span><span class="s">"True"</span>
           <span class="na">CenterOverAssociatedObject=</span><span class="s">"True"</span><span class="nt">&gt;</span>
           <span class="nt">&lt;prism:PopupWindowAction.WindowContent&gt;</span>
               <span class="nt">&lt;views:ItemSelectionView</span> <span class="nt">/&gt;</span>
           <span class="nt">&lt;/prism:PopupWindowAction.WindowContent&gt;</span>
       <span class="nt">&lt;/prism:PopupWindowAction&gt;</span>
   <span class="nt">&lt;/prism:InteractionRequestTrigger&gt;</span>
<span class="nt">&lt;/i:Interaction.Triggers&gt;</span>
</code></pre></div></div>
</li>
<li>
<p>子ウィンドウのViewModel対応</p>

<p>ViewModel は、Prism.Interactivity.InteractionRequest.IInteractionRequestAware を継承している。</p>

<p>ポイントは、IInteractionRequestAware の Notificationプロパティを定義しつつ、バックフィールド(?) ではINotificationを継承した自作の ICustomNotification で受けている点やと思う。</p>

<p>プロパティとバックフィールドの型が異なる実装を初めて見たので勉強になった。</p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="k">private</span> <span class="n">ICustomNotification</span> <span class="n">_notification</span><span class="p">;</span>
<span class="k">public</span> <span class="n">INotification</span> <span class="n">Notification</span>
<span class="p">{</span>
   <span class="k">get</span> <span class="p">{</span> <span class="k">return</span> <span class="n">_notification</span><span class="p">;</span> <span class="p">}</span>
   <span class="k">set</span> <span class="p">{</span> <span class="nf">SetProperty</span><span class="p">(</span><span class="k">ref</span> <span class="n">_notification</span><span class="p">,</span> <span class="p">(</span><span class="n">ICustomNotification</span><span class="p">)</span><span class="k">value</span><span class="p">);</span> <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>以下は、各ボタン(Select/Cancel)に応じたコマンド</p>

<p>情報の設定後に IInteractionRequestAware インターフェースの Actionである FinishInteraction を実行することで、ポップアップウィンドウを閉じている。</p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="nf">ItemSelectionViewModel</span><span class="p">()</span>
<span class="p">{</span>
   <span class="n">SelectItemCommand</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">DelegateCommand</span><span class="p">(()</span> <span class="p">=&gt;</span>
   <span class="p">{</span>
       <span class="n">_notification</span><span class="p">.</span><span class="n">SelectedItem</span> <span class="p">=</span> <span class="n">SelectedItem</span><span class="p">;</span>
       <span class="n">_notification</span><span class="p">.</span><span class="n">Confirmed</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
       <span class="n">FinishInteraction</span><span class="p">?.</span><span class="nf">Invoke</span><span class="p">();</span>
   <span class="p">});</span>
   <span class="n">CancelCommand</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">DelegateCommand</span><span class="p">(()</span> <span class="p">=&gt;</span>
   <span class="p">{</span>
       <span class="n">_notification</span><span class="p">.</span><span class="n">SelectedItem</span> <span class="p">=</span> <span class="k">null</span><span class="p">;</span>
       <span class="n">_notification</span><span class="p">.</span><span class="n">Confirmed</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
       <span class="n">FinishInteraction</span><span class="p">?.</span><span class="nf">Invoke</span><span class="p">();</span>
   <span class="p">});</span>
<span class="p">}</span>
</code></pre></div></div>
</li>
<li>
<p>子ウィンドウのView対応</p>

<p>見た目通りの実装なので割愛。</p>

<h4>
<span id="automationpropertiesautomationid" class="fragment"></span><a href="#automationpropertiesautomationid"><i class="fa fa-link"></i></a>AutomationProperties.AutomationId</h4>

<p>Viewでちらっと出てきたのでメモ。</p>

<p>AutomationProperties.AutomationIdは、UIコントロールを一意に識別するためのIDのようです。</p>

<p>検索すると色々ヒットしましたが、Microsoft Docs以外の日本語解説が見つからず…</p>

<p><del>Microsoft Docsって少し理解してる状態で読まないと、理解できないイメージがあり敬遠しちゃう…</del></p>

<p>Prism機能ではないので今回は置いときます。</p>

<div class="code-frame" data-lang="xml"><div class="highlight"><pre class="with-code"><code><span class="nt">&lt;Button</span> <span class="na">AutomationProperties.AutomationId=</span><span class="s">"ItemsSelectButton"</span>
        <span class="na">Command=</span><span class="s">"{Binding SelectItemCommand}"</span>
        <span class="na">Content=</span><span class="s">"Select Item"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;Button</span> <span class="na">AutomationProperties.AutomationId=</span><span class="s">"ItemsCancelButton"</span>
        <span class="na">Command=</span><span class="s">"{Binding CancelCommand}"</span>
        <span class="na">Content=</span><span class="s">"Cancel"</span> <span class="nt">/&gt;</span>
</code></pre></div></div>
</li>
</ol>

<h2>
<span id="29-invokecommandaction-" class="fragment"></span><a href="#29-invokecommandaction-"><i class="fa fa-link"></i></a>29-InvokeCommandAction ○</h2>

<p>UserControlのEventトリガでコマンドを実行するサンプル</p>

<h3>
<span id="実行-31" class="fragment"></span><a href="#%E5%AE%9F%E8%A1%8C-31"><i class="fa fa-link"></i></a>実行</h3>

<p>ListBoxが表示されており、選択したアイテム名が下部に表示される。</p>

<p><a href="https://camo.qiitausercontent.com/bb4789fbe2e40d789b07a091730a9313dc554d79/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3234393831362f65613831396434392d616261352d363632662d383264392d3665353934346364346561312e676966" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F249816%2Fea819d49-aba5-662f-82d9-6e5944cd4ea1.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=bd16d9a5144b5d4ab6f31ed5a18cf205" alt="29-InvokeCommandAction_View1.gif" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/249816/ea819d49-aba5-662f-82d9-6e5944cd4ea1.gif" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F249816%2Fea819d49-aba5-662f-82d9-6e5944cd4ea1.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=ebee3fe8a86a67757d05ba3f1d9db1cf 1x" loading="lazy"></a></p>

<h3>
<span id="内容-31" class="fragment"></span><a href="#%E5%86%85%E5%AE%B9-31"><i class="fa fa-link"></i></a>内容</h3>

<h4>
<span id="invokecommandaction" class="fragment"></span><a href="#invokecommandaction"><i class="fa fa-link"></i></a>InvokeCommandAction</h4>

<p>View の InvokeCommandAction によって、ListBox の SelectionChanged 時に ViewModelのコマンドを実行している。</p>

<div class="code-frame" data-lang="xml"><div class="highlight"><pre class="with-code"><code><span class="nt">&lt;ListBox</span> <span class="na">ItemsSource=</span><span class="s">"{Binding Items}"</span>
         <span class="na">SelectionMode=</span><span class="s">"Single"</span> <span class="nt">&gt;</span>
    <span class="nt">&lt;i:Interaction.Triggers&gt;</span>
        <span class="nt">&lt;i:EventTrigger</span> <span class="na">EventName=</span><span class="s">"SelectionChanged"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;prism:InvokeCommandAction</span> <span class="na">Command=</span><span class="s">"{Binding SelectedCommand}"</span>
                                       <span class="na">TriggerParameterPath=</span><span class="s">"AddedItems"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/i:EventTrigger&gt;</span>
    <span class="nt">&lt;/i:Interaction.Triggers&gt;</span>
<span class="nt">&lt;/ListBox&gt;</span>
</code></pre></div></div>

<p>TriggerParameterPath で指定されている AddedItems は、SelectionChangedEventArgsクラスのプロパティで、選択された項目を含むリストが格納されている。</p>

<p>サンプルでは ListBox の SelectionMode が Single なので、AddedItems は長さ1の配列となるが、SelectionMode を Extended にして Shiftボタン＋クリックなどで複数アイテムを選択すると、選択分のアイテム配列となる。</p>

<p>ViewModel の DelegateCommand、配列先頭の要素名を表示している。</p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="c1">// This command will be executed when the selection of the ListBox in the view changes.</span>
<span class="n">SelectedCommand</span> <span class="p">=</span> <span class="k">new</span> <span class="n">DelegateCommand</span><span class="p">&lt;</span><span class="kt">object</span><span class="p">[</span><span class="k">]&gt;</span><span class="p">(</span><span class="n">x</span> <span class="p">=&gt;</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">x</span> <span class="p">!=</span> <span class="k">null</span> <span class="p">&amp;&amp;</span> <span class="n">x</span><span class="p">.</span><span class="nf">Count</span><span class="p">()</span> <span class="p">&gt;</span> <span class="m">0</span><span class="p">)</span>
            <span class="n">SelectedItemText</span> <span class="p">=</span> <span class="n">x</span><span class="p">.</span><span class="nf">FirstOrDefault</span><span class="p">().</span><span class="nf">ToString</span><span class="p">();</span>
    <span class="p">});</span>
</code></pre></div></div>

<h2>
<span id="最後に" class="fragment"></span><a href="#%E6%9C%80%E5%BE%8C%E3%81%AB"><i class="fa fa-link"></i></a>最後に</h2>

<p>全部で32項目もあったが『Prismは任せろ！』までの理解度にはならなかった。</p>

<p>学習開始前から、モジュールのDisposeについて知りたいと思っていたが、サンプルでは出てこなかった。</p>

<p>基本的な操作（子モジュールの配置、画面遷移、ポップアップ）については知れたので、何となくは使えそう。<br>
出力しつつ勉強していこうと思う。</p>

<p>Qiitaのおかげで、Markdownの書き方を学べた。</p>
</div></div></section><div class="css-1yzj1fm"><div class="css-1uv1qiv"><span class="fa fa-twitter"></span></div><div class="css-1uv1qiv"><span class="fa fa-facebook"></span></div></div><div class="apm-Content"><div class="apm-Content_title">Why not register and get more from Qiita?</div><ol class="apm-Content_list"><li>We will deliver articles that match you<div class="description">By following users and tags, you can catch up information on technical fields that you are interested in as a whole</div></li><li>you can read useful information later efficiently<div class="description">By &quot;stocking&quot; the articles you like, you can search right away</div></li><div><a class="apm-Content_help" href="https://help.qiita.com/ja/articles/qiita-login-user" target="_blank"><i class="fa fa-fw fa-arrow-circle-right"></i>What you can do with signing up</a></div></ol><a href="/signup?callback_action=login_or_signup&amp;redirect_to=%2Fmyoga%2Fitems%2F5d883d1bc61819f750c4&amp;realm=qiita" class="apm-Content_button apm-Content_button-signup">Sign up</a><a href="/login?callback_action=login_or_signup&amp;redirect_to=%2Fmyoga%2Fitems%2F5d883d1bc61819f750c4&amp;realm=qiita" class="apm-Content_button apm-Content_button-signin">Login</a></div></div><div class="css-helsa7"></div></div></div></div><div class="css-109dbrr"><div class="css-5jpx49"><div class="css-mnxgyc"><button class=" css-1vlpknv"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/myoga/items/5d883d1bc61819f750c4/likers" class="css-1iupg5d">32</a></div><div class="css-fsjkhv"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-1b17vb0">33</span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-7i7f4d"><div class="css-1gj7nt">Improve article</div><a href="/drafts/5d883d1bc61819f750c4/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/myoga/items/5d883d1bc61819f750c4/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/myoga/items/5d883d1bc61819f750c4/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/myoga/items/5d883d1bc61819f750c4/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/myoga/items/5d883d1bc61819f750c4.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="PersonalArticlePage" data-dom-id="PersonalArticlePage-react-component-28d353b4-0be4-4767-9dd9-92933ddeb324">{"authorAnalyticsTrackingId":null,"organizationAnalyticsTrackingId":null}</script>
      
<footer id="globalFooter" class="st-Footer"><div class="st-Footer_container"><div class="st-Footer_start"><div class="st-Footer_logo"><svg viewbox="0 0 426.57 130" xmlns="http://www.w3.org/2000/svg"><circle cx="167.08" cy="21.4" r="12.28" /><path d="M250.81 29.66h23.48v18.9h-23.48z" /><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z" /><circle cx="216.33" cy="21.4" r="12.28" /></svg></div><div class="st-Footer_catchcopy">How developers code is here.</div><div class="st-Footer_socials"><a class="fa fa-twitter" href="https://twitter.com/qiita"></a><a class="fa fa-facebook-square" href="https://www.facebook.com/qiita/"></a></div></div><div class="st-Footer_end"><div class="st-Footer_qiita"><div class="st-Footer_label">Qiita</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="/about">About</a><a href="/terms">Terms</a><a href="/privacy">Privacy</a><a target="_blank" href="http://help.qiita.com/ja/articles/qiita-community-guideline">Guideline</a><a target="_blank" href="https://help.qiita.com/ja/articles/others-brand-guideline">Design Guideline</a></div><div class="st-Footer_column"><a href="/release-notes">Release</a><a href="/api/v2/docs">API</a><a href="/feedback/new">ご意見</a><a href="https://help.qiita.com">Help</a><a target="_blank" href="https://qiita.com/ads?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Advertisement</a></div></div></div><div class="st-Footer_increments"><div class="st-Footer_label">Increments</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="https://increments.co.jp/company/">About</a><a href="https://increments.co.jp/jobs/">採用情報</a><a href="https://blog.qiita.com">Blog</a></div><div class="st-Footer_column"><a href="https://teams.qiita.com/">Qiita Team</a><a href="https://jobs.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Jobs</a><a href="https://zine.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Zine</a></div></div></div></div></div><div class="st-Footer_copyright">© 2011-2021 Increments Inc.</div></footer><div id="Snackbar-react-component-065f5bb7-15da-4194-888c-5dab8c925eff"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="Snackbar" data-dom-id="Snackbar-react-component-065f5bb7-15da-4194-888c-5dab8c925eff">{}</script>
      
<div id="LoginModal-react-component-69d5f4da-259e-480e-b505-1c0319059a23"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="LoginModal" data-dom-id="LoginModal-react-component-69d5f4da-259e-480e-b505-1c0319059a23">{}</script>
      
<div id="StockModal-react-component-e008bfc4-60a8-42e8-b3bb-80864eb4d6d3"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="StockModal" data-dom-id="StockModal-react-component-e008bfc4-60a8-42e8-b3bb-80864eb4d6d3">{}</script>
      
</div><div id="dataContainer" style="display: none;" data-config="{&quot;actionPath&quot;:&quot;public/items#show&quot;,&quot;settings&quot;:{&quot;analyticsTrackingId&quot;:&quot;UA-24675221-12&quot;,&quot;assetsMap&quot;:{},&quot;csrfToken&quot;:&quot;dGC+xExxi0ej0L6aBKoR5jsaGStJ751Nr5LyMvwv6V9rX7koZMFxc5n99Z8FwhO3pIOzAJsn1PJ06ej5/5Y2cg==&quot;,&quot;locale&quot;:&quot;en&quot;},&quot;currentUser&quot;:null}" /></body></html><script type="application/json" data-js-react-on-rails-store="AppStoreWithReactOnRails">{"snackbar":{"type":"","body":"","isActive":false},"article":{"article":{"body":"\n\u003ch1\u003e\n\u003cspan id=\"prism-samples-wpf-の勉強メモ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#prism-samples-wpf-%E3%81%AE%E5%8B%89%E5%BC%B7%E3%83%A1%E3%83%A2\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003ePrism-Samples-Wpf の勉強メモ\u003c/h1\u003e\n\n\u003cp\u003e個人の勉強メモです。\u003c/p\u003e\n\n\u003cp\u003e\u003cqiita-embed-ogp src=\"https://github.com/PrismLibrary/Prism-Samples-Wpf\"\u003e\u003c/qiita-embed-ogp\u003e\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"経緯\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E7%B5%8C%E7%B7%AF\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e経緯\u003c/h2\u003e\n\n\u003cp\u003e本業は組み込みなのですが、業務補助ツールなどでWPFアプリを作成することがあります。\u003cbr\u003e\nMVVMインフラには Livet を使っているのですが、規模の大きいアプリでは、Viewの遅延読み込みやDIコンテナを使いたいことがあり、少し物足りないと感じることがありました。\u003c/p\u003e\n\n\u003cp\u003eそこでPrismの習得に向けて、公式のWPFサンプルを順に勉強していきます。\u003cbr\u003e\nタイトル横の記号は理解度の印象で、深い意味はありません。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"01-bootstrappershell-\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#01-bootstrappershell-\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e01-BootstrapperShell ○\u003c/h2\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"実行\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AE%9F%E8%A1%8C\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e実行\u003c/h3\u003e\n\n\u003cp\u003e真っ白なウィンドウが表示されるだけ。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"内容\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%86%85%E5%AE%B9\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e内容\u003c/h3\u003e\n\n\u003cp\u003e次の 02-Regions と同じ内容っぽいし、こちらは IntelliSense に旧型式って表示されるので、重要でなさげ。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"02-regions-\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#02-regions-\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e02-Regions ◎\u003c/h2\u003e\n\n\u003cp\u003ePrismを使って真っ白なウィンドウを表示するサンプル\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"実行-1\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AE%9F%E8%A1%8C-1\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e実行\u003c/h3\u003e\n\n\u003cp\u003e真っ白なウィンドウが表示されるだけ。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"内容-1\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%86%85%E5%AE%B9-1\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e内容\u003c/h3\u003e\n\n\u003cp\u003eApp.xaml のコードビハインド CreateShell() にて、コンテナを使って MainWindowクラスを探して起動してる感じ。\u003cbr\u003e\n全てのソリューションで必要そう。\u003c/p\u003e\n\n\u003cp\u003eAppの継承元が、System.Windows.Application でなく、Prism.Unity.PrismApplication になっている点がポイントで、App.xaml のクラスも通常とは異なっている。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003epartial\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eApp\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003ePrismApplication\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eprotected\u003c/span\u003e \u003cspan class=\"k\"\u003eoverride\u003c/span\u003e \u003cspan class=\"n\"\u003eWindow\u003c/span\u003e \u003cspan class=\"nf\"\u003eCreateShell\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003eContainer\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eResolve\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eMainWindow\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;();\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003eprotected\u003c/span\u003e \u003cspan class=\"k\"\u003eoverride\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eRegisterTypes\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eIContainerRegistry\u003c/span\u003e \u003cspan class=\"n\"\u003econtainerRegistry\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"xml\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"nt\"\u003e\u0026lt;prism:PrismApplication\u003c/span\u003e\n    \u003cspan class=\"na\"\u003ex:Class=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Regions.App\"\u003c/span\u003e\n    \u003cspan class=\"na\"\u003exmlns=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"http://schemas.microsoft.com/winfx/2006/xaml/presentation\"\u003c/span\u003e\n    \u003cspan class=\"na\"\u003exmlns:x=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"http://schemas.microsoft.com/winfx/2006/xaml\"\u003c/span\u003e\n    \u003cspan class=\"na\"\u003exmlns:prism=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"http://prismlibrary.com/\"\u003c/span\u003e \u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;Application.Resources\u0026gt;\u003c/span\u003e\n\n    \u003cspan class=\"nt\"\u003e\u0026lt;/Application.Resources\u0026gt;\u003c/span\u003e\n\u003cspan class=\"nt\"\u003e\u0026lt;/prism:PrismApplication\u0026gt;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"03-customregions-\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#03-customregions-\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e03-CustomRegions ×\u003c/h2\u003e\n\n\u003cp\u003e何のサンプルか分からない…\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"実行-2\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AE%9F%E8%A1%8C-2\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e実行\u003c/h3\u003e\n\n\u003cp\u003e真っ白なウィンドウが表示されるだけ。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"内容-2\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%86%85%E5%AE%B9-2\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e内容\u003c/h3\u003e\n\n\u003cp\u003eこれで何が出来ているのかが分からない。\u003cbr\u003e\n新たに PrismApplicationBase.ConfigureRegionAdapterMappings() や、class RegionAdapterBase\u0026lt;T\u0026gt; が出てきた。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"04-viewdiscovery-\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#04-viewdiscovery-\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e04-ViewDiscovery ◎\u003c/h2\u003e\n\n\u003cp\u003eコードビハインドから xaml で命名した Region に 自作UserControl を表示するサンプル。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"実行-3\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AE%9F%E8%A1%8C-3\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e実行\u003c/h3\u003e\n\n\u003cp\u003eViewAが表示される。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"内容-3\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%86%85%E5%AE%B9-3\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e内容\u003c/h3\u003e\n\n\u003cul\u003e\n\u003cli\u003eMainWindowのxaml\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eRegion名を付けているだけ\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"xml\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"nt\"\u003e\u0026lt;Window\u003c/span\u003e \u003cspan class=\"na\"\u003ex:Class=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"ViewDiscovery.Views.MainWindow\"\u003c/span\u003e\n        \u003cspan class=\"na\"\u003exmlns=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"http://schemas.microsoft.com/winfx/2006/xaml/presentation\"\u003c/span\u003e\n        \u003cspan class=\"na\"\u003exmlns:x=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"http://schemas.microsoft.com/winfx/2006/xaml\"\u003c/span\u003e\n        \u003cspan class=\"na\"\u003exmlns:prism=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"http://prismlibrary.com/\"\u003c/span\u003e\n        \u003cspan class=\"na\"\u003eTitle=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Shell\"\u003c/span\u003e \u003cspan class=\"na\"\u003eHeight=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"350\"\u003c/span\u003e \u003cspan class=\"na\"\u003eWidth=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"525\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;Grid\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"nt\"\u003e\u0026lt;ContentControl\u003c/span\u003e \u003cspan class=\"na\"\u003eprism:RegionManager.RegionName=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"ContentRegion\"\u003c/span\u003e \u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;/Grid\u0026gt;\u003c/span\u003e\n\u003cspan class=\"nt\"\u003e\u0026lt;/Window\u0026gt;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cul\u003e\n\u003cli\u003eMainWindowのコードビハインド\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eViewAを登録するために、MainWindowコンストラクタに IRegionManager が渡されている。\u003c/p\u003e\n\n\u003cp\u003e明示的にMainWindowのコンストラクタをコールしている記述はなく、コンテナがええ感じでインターフェスを渡していると思われる。インジェクションと言われるやつ？\u003c/p\u003e\n\n\u003cp\u003eシンプルなコードであっても、コードビハインドにコードを書くことに抵抗がある…\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003epartial\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eMainWindow\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eWindow\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003eMainWindow\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eIRegionManager\u003c/span\u003e \u003cspan class=\"n\"\u003eregionManager\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"nf\"\u003eInitializeComponent\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n        \u003cspan class=\"c1\"\u003e// RegionにViewを読み出す ★重要\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eregionManager\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eRegisterViewWithRegion\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"ContentRegion\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003etypeof\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eViewA\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"05-viewinjection-\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#05-viewinjection-\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e05-ViewInjection ◎\u003c/h2\u003e\n\n\u003cp\u003eButton の Clickイベントで、自作UserControl を読み出すサンプル\u003cbr\u003e\nUserControl の登録の実装が 04-ViewDiscovery と異なる。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"実行-4\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AE%9F%E8%A1%8C-4\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e実行\u003c/h3\u003e\n\n\u003cp\u003eボタンが1つ配置されており、クリックするとViewAが読み込まれる。\u003c/p\u003e\n\n\u003cp\u003eボタンを複数回クリックしても View の見た目は変わらないが、内部では ViewA が複数追加されていると思われイマイチ。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"内容-4\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%86%85%E5%AE%B9-4\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e内容\u003c/h3\u003e\n\n\u003cp\u003eMainWindow のボタンClickイベントにより、コードビハインドから UserControl を読み出している。\u003cbr\u003e\nこれは View の遅延読み込みに使えそう。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eButton_Click\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eobject\u003c/span\u003e \u003cspan class=\"n\"\u003esender\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eRoutedEventArgs\u003c/span\u003e \u003cspan class=\"n\"\u003ee\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e// RegionにViewを読み出す ★重要\u003c/span\u003e\n    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eview\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003e_container\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eResolve\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eViewA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;();\u003c/span\u003e\n    \u003cspan class=\"n\"\u003e_regionManager\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eRegions\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s\"\u003e\"ContentRegion\"\u003c/span\u003e\u003cspan class=\"p\"\u003e].\u003c/span\u003e\u003cspan class=\"nf\"\u003eAdd\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eview\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e上記対応のために、MainWindowのコンストラクタに引数 IContainerExtension が増えた。\u003c/p\u003e\n\n\u003cp\u003eやはり明示的にMainWindowのコンストラクタをコールしている記述はなく、コンテナがええ感じで解決していると思われる。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003eMainWindow\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eIContainerExtension\u003c/span\u003e \u003cspan class=\"n\"\u003econtainer\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eIRegionManager\u003c/span\u003e \u003cspan class=\"n\"\u003eregionManager\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"nf\"\u003eInitializeComponent\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n    \u003cspan class=\"n\"\u003e_container\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003econtainer\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"n\"\u003e_regionManager\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eregionManager\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"06-viewactivationdeactivation-\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#06-viewactivationdeactivation-\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e06-ViewActivationDeactivation ○\u003c/h2\u003e\n\n\u003cp\u003e自作UserControl のアクティブ/非アクティブを切り替えるサンプル。（破棄ではない）\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"実行-5\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AE%9F%E8%A1%8C-5\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e実行\u003c/h3\u003e\n\n\u003cp\u003eボタンが4つ配置されており、ViewAが表示されている。\u003c/p\u003e\n\n\u003cp\u003e各ボタンは、ViewA/ViewBの読み込みと破棄に割り当てられており、ボタンに応じてViewの見た目が変化する。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"内容-5\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%86%85%E5%AE%B9-5\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e内容\u003c/h3\u003e\n\n\u003cp\u003eMainWindow の ContentControl に対して、登録済み UserControl の表示/非表示を行う。\u003c/p\u003e\n\n\u003cp\u003e表示の切り替えなので、05-ViewInjection のように View が複数個登録されることはない。\u003c/p\u003e\n\n\u003cp\u003eViewの表示は、先にRegionに登録した方(ViewA)が、優先して表示されるルールっぽい。\u003cbr\u003e\nMainWindow のコードビハインドに UserControl の実体を定義してることに違和感を感じる。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"n\"\u003eViewA\u003c/span\u003e \u003cspan class=\"n\"\u003e_viewA\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"n\"\u003eViewB\u003c/span\u003e \u003cspan class=\"n\"\u003e_viewB\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eMainWindow_Loaded\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eobject\u003c/span\u003e \u003cspan class=\"n\"\u003esender\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eRoutedEventArgs\u003c/span\u003e \u003cspan class=\"n\"\u003ee\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"n\"\u003e_viewA\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003e_container\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eResolve\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eViewA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;();\u003c/span\u003e\n    \u003cspan class=\"n\"\u003e_viewB\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003e_container\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eResolve\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eViewB\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;();\u003c/span\u003e\n    \u003cspan class=\"n\"\u003e_region\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003e_regionManager\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eRegions\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s\"\u003e\"ContentRegion\"\u003c/span\u003e\u003cspan class=\"p\"\u003e];\u003c/span\u003e\n    \u003cspan class=\"n\"\u003e_region\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAdd\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003e_viewA\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"n\"\u003e_region\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAdd\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003e_viewB\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eButton_Click\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eobject\u003c/span\u003e \u003cspan class=\"n\"\u003esender\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eRoutedEventArgs\u003c/span\u003e \u003cspan class=\"n\"\u003ee\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"n\"\u003e_region\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eActivate\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003e_viewA\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eButton_Click_1\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eobject\u003c/span\u003e \u003cspan class=\"n\"\u003esender\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eRoutedEventArgs\u003c/span\u003e \u003cspan class=\"n\"\u003ee\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"n\"\u003e_region\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eDeactivate\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003e_viewA\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"07-modules---appconfig-\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#07-modules---appconfig-\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e07-Modules - AppConfig △\u003c/h2\u003e\n\n\u003cp\u003e07-Modules は子モジュールを読み込むサンプル。\u003cbr\u003e\nAppConfig / Code / Directory / LoadManual の4項目が用意されている。\u003cbr\u003e\n2つめの Code が最も広く使われているっぽい。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"実行-6\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AE%9F%E8%A1%8C-6\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e実行\u003c/h3\u003e\n\n\u003cp\u003eViewAが表示される 。 (07-Modules共通)\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"内容-6\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%86%85%E5%AE%B9-6\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e内容\u003c/h3\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"親モジュール-07-modules-共通\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%A6%AA%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB-07-modules-%E5%85%B1%E9%80%9A\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e親モジュール 07-Modules 共通\u003c/h4\u003e\n\n\u003cp\u003eContentRegionの名前で ContentControl を配置しておく。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"xml\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"nt\"\u003e\u0026lt;Grid\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;ContentControl\u003c/span\u003e \u003cspan class=\"na\"\u003eprism:RegionManager.RegionName=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"ContentRegion\"\u003c/span\u003e \u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n\u003cspan class=\"nt\"\u003e\u0026lt;/Grid\u0026gt;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"子モジュール側\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AD%90%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB%E5%81%B4\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e子モジュール側\u003c/h4\u003e\n\n\u003cp\u003e子モジュールのProject直下に ModuleAModule.cs を追加して、親モジュールの Region名を string で指定する。（07-Modules共通）\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eModuleAModule\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eIModule\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eOnInitialized\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eIContainerProvider\u003c/span\u003e \u003cspan class=\"n\"\u003econtainerProvider\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eregionManager\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003econtainerProvider\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eResolve\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eIRegionManager\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;();\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eregionManager\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eRegisterViewWithRegion\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"ContentRegion\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003etypeof\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eViewA\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eRegisterTypes\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eIContainerRegistry\u003c/span\u003e \u003cspan class=\"n\"\u003econtainerRegistry\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"親モジュール側\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%A6%AA%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB%E5%81%B4\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e親モジュール側\u003c/h4\u003e\n\n\u003cp\u003e親モジュール側のコードに、ModuleA を直接記述している箇所は App.configのみ。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"xml\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"nt\"\u003e\u0026lt;modules\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"nt\"\u003e\u0026lt;module\u003c/span\u003e \u003cspan class=\"na\"\u003eassemblyFile=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"ModuleA.dll\"\u003c/span\u003e\n          \u003cspan class=\"na\"\u003emoduleType=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"ModuleA.ModuleAModule,\n                      ModuleA,\n                      Version=1.0.0.0,\n                      Culture=neutral,\n                      PublicKeyToken=null\"\u003c/span\u003e\n          \u003cspan class=\"na\"\u003emoduleName=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"ModuleAModule\"\u003c/span\u003e\n          \u003cspan class=\"na\"\u003estartupLoaded=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"True\"\u003c/span\u003e \u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n\u003cspan class=\"nt\"\u003e\u0026lt;/modules\u0026gt;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eApp.xamlのコードビハインド CreateModuleCatalog() にて、App.configに記載されたジュールを自動で配置しているっぽい。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eprotected\u003c/span\u003e \u003cspan class=\"k\"\u003eoverride\u003c/span\u003e \u003cspan class=\"n\"\u003eIModuleCatalog\u003c/span\u003e \u003cspan class=\"nf\"\u003eCreateModuleCatalog\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eConfigurationModuleCatalog\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"07-modules---code-\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#07-modules---code-\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e07-Modules - Code ◎\u003c/h2\u003e\n\n\u003cp\u003e07-Modules は子モジュールを読み込むサンプルの２つめ。\u003cbr\u003e\n見たことあるパターンで、以降のサンプルでも度々登場する。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"実行-7\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AE%9F%E8%A1%8C-7\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e実行\u003c/h3\u003e\n\n\u003cp\u003eViewAが表示される 。 (07-Modules共通)\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"内容-7\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%86%85%E5%AE%B9-7\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e内容\u003c/h3\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"子モジュール側-1\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AD%90%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB%E5%81%B4-1\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e子モジュール側\u003c/h4\u003e\n\n\u003cp\u003e07-Modules - AppConfig と同内容なので割愛（07-Modules共通）\u003c/p\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"親モジュール側-1\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%A6%AA%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB%E5%81%B4-1\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e親モジュール側\u003c/h4\u003e\n\n\u003cp\u003eApp.xaml のコードビハインド ConfigureModuleCatalog() で、ModuleAプロジェクトのクラス ModuleAModule を直接指定して、Viewに配置している。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eprotected\u003c/span\u003e \u003cspan class=\"k\"\u003eoverride\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eConfigureModuleCatalog\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eIModuleCatalog\u003c/span\u003e \u003cspan class=\"n\"\u003emoduleCatalog\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"n\"\u003emoduleCatalog\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eAddModule\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eModuleA\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eModuleAModule\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;();\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"07-modules---directory-\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#07-modules---directory-\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e07-Modules - Directory ◎\u003c/h2\u003e\n\n\u003cp\u003e07-Modules は子モジュールを読み込むサンプルの３つめ。\u003cbr\u003e\ndllが含まれるディレクトリを指定する。機能拡張などに使えるかも。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"実行-8\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AE%9F%E8%A1%8C-8\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e実行\u003c/h3\u003e\n\n\u003cp\u003eViewAが表示される 。 (07-Modules共通)\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"内容-8\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%86%85%E5%AE%B9-8\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e内容\u003c/h3\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"子モジュール側-2\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AD%90%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB%E5%81%B4-2\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e子モジュール側\u003c/h4\u003e\n\n\u003cp\u003e07-Modules - AppConfig と同内容なので割愛（07-Modules共通）\u003c/p\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"親モジュール側-2\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%A6%AA%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB%E5%81%B4-2\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e親モジュール側\u003c/h4\u003e\n\n\u003cp\u003eApp.xaml のコードビハインドで、子モジュール.dll が格納された DirectoryPATH を指定して読み出している。\u003cbr\u003e\ndll が存在しなければ何も読み込まれないので、機能拡張などに使えるかも。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eprotected\u003c/span\u003e \u003cspan class=\"k\"\u003eoverride\u003c/span\u003e \u003cspan class=\"n\"\u003eIModuleCatalog\u003c/span\u003e \u003cspan class=\"nf\"\u003eCreateModuleCatalog\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eDirectoryModuleCatalog\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eModulePath\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e@\"C:\\source\\Prism-Samples-Wpf\\07-Modules - Directory\\Modules\\bin\\Debug\\Modules\"\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e};\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"07-modules---loadmanual-\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#07-modules---loadmanual-\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e07-Modules - LoadManual ◎\u003c/h2\u003e\n\n\u003cp\u003e07-Modules は子モジュールを読み込むサンプルの４つめ。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"実行-9\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AE%9F%E8%A1%8C-9\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e実行\u003c/h3\u003e\n\n\u003cp\u003eViewAが表示される 。 (07-Modules共通)\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"内容-9\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%86%85%E5%AE%B9-9\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e内容\u003c/h3\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"子モジュール側-3\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AD%90%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB%E5%81%B4-3\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e子モジュール側\u003c/h4\u003e\n\n\u003cp\u003e07-Modules - AppConfig と同内容なので割愛（07-Modules共通）\u003c/p\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"親モジュール側-3\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%A6%AA%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB%E5%81%B4-3\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e親モジュール側\u003c/h4\u003e\n\n\u003cp\u003e親モジュールのUIイベント（Windowのコードビハインド）で子モジュールを読み出している。\u003c/p\u003e\n\n\u003cp\u003eUserControl を読み出してたやつ（05-ViewInjection）のモジュール版。\u003cbr\u003e\nこちらも遅延読み込みに使えそう。\u003c/p\u003e\n\n\u003cp\u003e子モジュールの指定は、子モジュールクラス名の文字列により行われているが、nameof() 演算子を使った方が安全そう。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eButton_Click\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eobject\u003c/span\u003e \u003cspan class=\"n\"\u003esender\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eRoutedEventArgs\u003c/span\u003e \u003cspan class=\"n\"\u003ee\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"n\"\u003e_moduleManager\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eLoadModule\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"ModuleAModule\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"08-viewmodellocator-\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#08-viewmodellocator-\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e08-ViewModelLocator ◎\u003c/h2\u003e\n\n\u003cp\u003eViewに対応する ViewModel を自動で配置するサンプル。\u003cbr\u003e\nViewModel が初登場！\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"実行-10\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AE%9F%E8%A1%8C-10\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e実行\u003c/h3\u003e\n\n\u003cp\u003e真っ白なウィンドウが表示されるだけだが、Windowタイトル が ViewModel で指定された文字列になっている。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"内容-10\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%86%85%E5%AE%B9-10\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e内容\u003c/h3\u003e\n\n\u003cp\u003examl に1行書いとけば、対応する ViewModel が自動で読み込まれる。\u003cbr\u003e\nDataContext で指定する必要がない。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"xml\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"nt\"\u003e\u0026lt;Window\u003c/span\u003e \u003cspan class=\"na\"\u003ex:Class=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"ViewModelLocator.Views.MainWindow\"\u003c/span\u003e\n          \u003cspan class=\"err\"\u003e～中略～\u003c/span\u003e\n        \u003cspan class=\"na\"\u003exmlns:prism=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"http://prismlibrary.com/\"\u003c/span\u003e\n        \u003cspan class=\"na\"\u003eprism:ViewModelLocator.AutoWireViewModel=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"True\"\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"viewmodel\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#viewmodel\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eViewModel\u003c/h4\u003e\n\n\u003cp\u003ePrism.Mvvm.BindableBase を継承しており、BindableBase は INotifyPropertyChanged を継承している。\u003cbr\u003e\nViewModel は必ず BindableBase を継承しておけば良さげ。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"09-changeconvention-\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#09-changeconvention-\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e09-ChangeConvention ○\u003c/h2\u003e\n\n\u003cp\u003eViewのxamlファイルに ViewModel を含めたような記述ができるっぽい。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"実行-11\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AE%9F%E8%A1%8C-11\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e実行\u003c/h3\u003e\n\n\u003cp\u003e08-ViewModelLocatorと同じ\u003cbr\u003e\n真っ白なウィンドウが表示されるだけだが、Windowタイトル が ViewModel で指定された文字列になっている。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"内容-11\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%86%85%E5%AE%B9-11\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e内容\u003c/h3\u003e\n\n\u003cp\u003eViewのxamlファイルに ViewModel を含めたような記述ができるっぽい。（xamlに2つの*.csがぶらさった構成を初めて見た）\u003cbr\u003e\nMVVM記法から外れている気がするので使わなさそう。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/c8774b2318b4eca6c9e02beeb517ee36ddc20ff4/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3234393831362f33376635386534332d333362312d623466662d326137612d6138653534306338336662612e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F249816%2F37f58e43-33b1-b4ff-2a7a-a8e540c83fba.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=462d5dea7fae304e22ca73cbacd4df8f\" alt=\"09-ChangeConvention.jpg\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/249816/37f58e43-33b1-b4ff-2a7a-a8e540c83fba.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F249816%2F37f58e43-33b1-b4ff-2a7a-a8e540c83fba.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=1699cfa37c34874d35fa658b18a18884 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"10-customregistrations-\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#10-customregistrations-\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e10-CustomRegistrations ○\u003c/h2\u003e\n\n\u003cp\u003e08-ViewModelLocator で出てきた、自動で名前解決される ViewModel のクラス名を指定できるっぽい。\u003cbr\u003e\nサンプルでは、View の MainWindow.xaml に対して、ViewModel の CustomViewModel.cs を割り当てている。\u003cbr\u003e\nどのような場面で使うかが想像できないので使わなさそう。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"実行-12\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AE%9F%E8%A1%8C-12\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e実行\u003c/h3\u003e\n\n\u003cp\u003e08-ViewModelLocatorと同じ。\u003cbr\u003e\n真っ白なウィンドウが表示されるだけだが、Windowタイトル が ViewModel で指定された文字列になっている。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"内容-12\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%86%85%E5%AE%B9-12\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e内容\u003c/h3\u003e\n\n\u003cp\u003eApp.xaml.cs で View に対応する ViewModel を指定している。\u003cbr\u003e\nいくつかの方法があるっぽく、サンプル時点でコメントアウトされていた。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eprotected\u003c/span\u003e \u003cspan class=\"k\"\u003eoverride\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eConfigureViewModelLocator\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ebase\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eConfigureViewModelLocator\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e// type / type\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e//ViewModelLocationProvider.Register(typeof(MainWindow).ToString(), typeof(CustomViewModel));\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e// type / factory\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e//ViewModelLocationProvider.Register(typeof(MainWindow).ToString(), () =\u0026gt; Container.Resolve\u0026lt;CustomViewModel\u0026gt;());\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e// generic factory\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e//ViewModelLocationProvider.Register\u0026lt;MainWindow\u0026gt;(() =\u0026gt; Container.Resolve\u0026lt;CustomViewModel\u0026gt;());\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e// generic type\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eViewModelLocationProvider\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eRegister\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eMainWindow\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eCustomViewModel\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;();\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"11-usingdelegatecommands-\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#11-usingdelegatecommands-\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e11-UsingDelegateCommands ○\u003c/h2\u003e\n\n\u003cp\u003examl の Button.Command に応じた ViewModel 処理。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"実行-13\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AE%9F%E8%A1%8C-13\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e実行\u003c/h3\u003e\n\n\u003cp\u003eチェックボックスを有効にすると各ボタンが有効になり、各ボタンを押すと下部に現在時間が表示される。\u003c/p\u003e\n\n\u003cp\u003e複雑で文字で説明できなくなってしまったので、図を貼ってみる。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/c9018a9dc5d34879ec4fcbaab13a395e43b2ded4/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3234393831362f64633230376634642d333834322d356130652d336439632d6232313861616537633162312e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F249816%2Fdc207f4d-3842-5a0e-3d9c-b218aae7c1b1.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=93886570a965b910b44a017f2eac5728\" alt=\"11-UsingDelegateCommands_View1.jpg\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/249816/dc207f4d-3842-5a0e-3d9c-b218aae7c1b1.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F249816%2Fdc207f4d-3842-5a0e-3d9c-b218aae7c1b1.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=f16610d24b2774b5b00aefbfea145a76 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/f8a02840f09ed25a6dad17348a78823b8bbc5f9a/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3234393831362f34336537376265642d306339652d393633642d343731632d3164653964663361386234322e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F249816%2F43e77bed-0c9e-963d-471c-1de9df3a8b42.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=4e52ab9f943c6804b8c3f429c06aef0b\" alt=\"11-UsingDelegateCommands_View3.jpg\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/249816/43e77bed-0c9e-963d-471c-1de9df3a8b42.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F249816%2F43e77bed-0c9e-963d-471c-1de9df3a8b42.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=d1b9413cac26c51f0b87d700d982a1c0 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"内容-13\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%86%85%E5%AE%B9-13\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e内容\u003c/h3\u003e\n\n\u003cp\u003eICommand を継承した Prism.Commands.DelegateCommand を使って、Action / CanExecute を指定してる。\u003c/p\u003e\n\n\u003cp\u003e4つのボタンそれぞれで実装が異なる。\u003c/p\u003e\n\n\u003cp\u003e\u003cdel\u003e使い慣れた ReactiveCommand で代替できそうなので使わなさそう。\u003c/del\u003e\u003cbr\u003e\n最後までサンプルをやった結果、DelegateCommand がゴリゴリ出てくるので、ちゃんと使えるようになるべきと考えを改めました。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eDelegateCommand\u003c/span\u003e \u003cspan class=\"n\"\u003eExecuteDelegateCommand\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eDelegateCommand\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eExecuteGenericDelegateCommand\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eDelegateCommand\u003c/span\u003e \u003cspan class=\"n\"\u003eDelegateCommandObservesProperty\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eDelegateCommand\u003c/span\u003e \u003cspan class=\"n\"\u003eDelegateCommandObservesCanExecute\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003eMainWindowViewModel\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eExecuteDelegateCommand\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e\n        \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eDelegateCommand\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eExecute\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eCanExecute\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n    \u003cspan class=\"n\"\u003eDelegateCommandObservesProperty\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e\n        \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eDelegateCommand\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eExecute\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eCanExecute\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nf\"\u003eObservesProperty\u003c/span\u003e\u003cspan class=\"p\"\u003e(()\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eIsEnabled\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n    \u003cspan class=\"n\"\u003eDelegateCommandObservesCanExecute\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e\n        \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eDelegateCommand\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eExecute\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nf\"\u003eObservesCanExecute\u003c/span\u003e\u003cspan class=\"p\"\u003e(()\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eIsEnabled\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n    \u003cspan class=\"n\"\u003eExecuteGenericDelegateCommand\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e\n        \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eDelegateCommand\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"n\"\u003eExecuteGeneric\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nf\"\u003eObservesCanExecute\u003c/span\u003e\u003cspan class=\"p\"\u003e(()\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eIsEnabled\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e   \n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"12-usingcompositecommands-\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#12-usingcompositecommands-\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e12-UsingCompositeCommands △\u003c/h2\u003e\n\n\u003cp\u003e複数の DelegateCommand を1つに集約するサンプル。\u003cbr\u003e\n集約されたCommandを実行したら、各Commandを全実行した動作になる。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"実行-14\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AE%9F%E8%A1%8C-14\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e実行\u003c/h3\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"コントロールのenable\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%B3%E3%83%B3%E3%83%88%E3%83%AD%E3%83%BC%E3%83%AB%E3%81%AEenable\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eコントロールのEnable\u003c/h4\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003cp\u003e3つのTabが存在し、各Tabがチェックボックスを持っている。\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e各Tabのチェックボックスが有効なら、自Tabのボタンが有効になる。\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e全てのTabのボタンが有効なら、上部の Saveボタンが有効になる。\u003c/p\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"ボタンクリック\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%9C%E3%82%BF%E3%83%B3%E3%82%AF%E3%83%AA%E3%83%83%E3%82%AF\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eボタンクリック\u003c/h4\u003e\n\n\u003cp\u003e各TabのSaveボタンを押下すると、自タブに現在時刻が表示される。\u003c/p\u003e\n\n\u003cp\u003e上部のSaveボタンを押下すると、全てのタブに現在時刻が表示される。（=全タブのボタンを押した動作）\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/60c57a9955eaf5e8ed122851c2947b0d1888ed51/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3234393831362f64343430623263382d313737622d663939332d646365372d6562656663363534666265622e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F249816%2Fd440b2c8-177b-f993-dce7-ebefc654fbeb.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=03ec72c37a7c35619bfebc9c8a46eca2\" alt=\"12-UsingCompositeCommands_View1.jpg\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/249816/d440b2c8-177b-f993-dce7-ebefc654fbeb.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F249816%2Fd440b2c8-177b-f993-dce7-ebefc654fbeb.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=e0336d898c2146f2ea31f078d2390915 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"内容-14\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%86%85%E5%AE%B9-14\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e内容\u003c/h3\u003e\n\n\u003cp\u003eこの辺りから理解が難しくなってきた。\u003c/p\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"tabcontrolへの子要素の登録方法\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#tabcontrol%E3%81%B8%E3%81%AE%E5%AD%90%E8%A6%81%E7%B4%A0%E3%81%AE%E7%99%BB%E9%8C%B2%E6%96%B9%E6%B3%95\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eTabControlへの子要素の登録方法\u003c/h4\u003e\n\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e親Moduleの xaml で TabControl を定義し、Region名を付けておく\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"xml\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"nt\"\u003e\u0026lt;TabControl\u003c/span\u003e \u003cspan class=\"na\"\u003eprism:RegionManager.RegionName=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"ContentRegion\"\u003c/span\u003e \u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eUserControl をベースに TabItem  を作成する（TabView.xaml）\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e子モジュールの fogeModule.OnInitialized() にて、作成した TabItem を登録していく。\u003cbr\u003e\nTabView から TabViewModel の取得法が力業で引いた…\u003cbr\u003e\nViewModelのコンストラクタにTitleを渡すような実装はできないのでしょうか。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eModuleAModule\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eIModule\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n   \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eOnInitialized\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eIContainerProvider\u003c/span\u003e \u003cspan class=\"n\"\u003econtainerProvider\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n   \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n       \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eregionManager\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003econtainerProvider\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eResolve\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eIRegionManager\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;();\u003c/span\u003e\n       \u003cspan class=\"n\"\u003eIRegion\u003c/span\u003e \u003cspan class=\"n\"\u003eregion\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eregionManager\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eRegions\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s\"\u003e\"ContentRegion\"\u003c/span\u003e\u003cspan class=\"p\"\u003e];\u003c/span\u003e\n\n       \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003etabA\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003econtainerProvider\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eResolve\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eTabView\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;();\u003c/span\u003e\n       \u003cspan class=\"nf\"\u003eSetTitle\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003etabA\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\"Tab A\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n       \u003cspan class=\"n\"\u003eregion\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAdd\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003etabA\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n       \u003cspan class=\"cm\"\u003e/* tabB,tabC は同じなので割愛 */\u003c/span\u003e\n   \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eSetTitle\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eTabView\u003c/span\u003e \u003cspan class=\"n\"\u003etab\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003etitle\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003etab\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eDataContext\u003c/span\u003e \u003cspan class=\"k\"\u003eas\u003c/span\u003e \u003cspan class=\"n\"\u003eTabViewModel\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"n\"\u003eTitle\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003etitle\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"compositecommand\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#compositecommand\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eCompositeCommand\u003c/h4\u003e\n\n\u003cp\u003e各Tab が保持する ICommand を結合して、上部のSaveボタンに割り当てているっぽい。\u003c/p\u003e\n\n\u003cp\u003e登録された全ての ICommand が CanExecute == true なら、統合された CompositeCommand が実行可能となる。\u003c/p\u003e\n\n\u003cp\u003eCompositeCommand が実行されると、登録されたすべての ICommand が実行される。\u003c/p\u003e\n\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e親と子モジュールが参照できるところに（サンプルでは別プロジェクト）、ApplicationCommands クラスを定義する。\u003cbr\u003e\nApplicationCommands の中身は Prism.Command.CompositeCommand のみ。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003einterface\u003c/span\u003e \u003cspan class=\"nc\"\u003eIApplicationCommands\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eCompositeCommand\u003c/span\u003e \u003cspan class=\"n\"\u003eSaveCommand\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eApplicationCommands\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eIApplicationCommands\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eCompositeCommand\u003c/span\u003e \u003cspan class=\"n\"\u003eSaveCommand\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eCompositeCommand\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e親Module の App.xaml.cs にて、上記自作クラスのインターフェースと実装をコンテナに登録する。\u003cbr\u003e\nサンプルでは Singleton で登録。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eprotected\u003c/span\u003e \u003cspan class=\"k\"\u003eoverride\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eRegisterTypes\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eIContainerRegistry\u003c/span\u003e \u003cspan class=\"n\"\u003econtainerRegistry\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"n\"\u003econtainerRegistry\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eRegisterSingleton\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eIApplicationCommands\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eApplicationCommands\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;();\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eMainWindow の ViewModel のコンストラクタ引数に対して、上記自作クラスが自動で注入されるので受け取る。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003eMainWindowViewModel\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eIApplicationCommands\u003c/span\u003e \u003cspan class=\"n\"\u003eapplicationCommands\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eApplicationCommands\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eapplicationCommands\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e各TabItem の ViewModel も同様にコンストラクタで自作クラスを受け取り、自クラスの UpdateCommand(ICommand) を登録していく。\u003cbr\u003e\n自クラスの UpdateCommand は自クラスのチェックボックスにバインドされたフラグを監視している。(2行目)\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003eTabViewModel\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eIApplicationCommands\u003c/span\u003e \u003cspan class=\"n\"\u003eapplicationCommands\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n   \u003cspan class=\"n\"\u003e_applicationCommands\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eapplicationCommands\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n   \u003cspan class=\"n\"\u003eUpdateCommand\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eDelegateCommand\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eUpdate\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nf\"\u003eObservesCanExecute\u003c/span\u003e\u003cspan class=\"p\"\u003e(()\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eCanUpdate\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n   \u003cspan class=\"n\"\u003e_applicationCommands\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eSaveCommand\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eRegisterCommand\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eUpdateCommand\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"13-iactiveawarecommands-\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#13-iactiveawarecommands-\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e13-IActiveAwareCommands △\u003c/h2\u003e\n\n\u003cp\u003e12-UsingCompositeCommands と同様に複数の DelegateCommand を1つに集約するが、アクティブなコントロールを参照するサンプル。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"実行-15\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AE%9F%E8%A1%8C-15\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e実行\u003c/h3\u003e\n\n\u003cp\u003e12-UsingCompositeCommands と同じ View。\u003c/p\u003e\n\n\u003cp\u003e動作は少し違って、こちらはActiveなTabの チェックボックスに応じて上部ボタンの IsEnable を切り替えている。\u003cbr\u003e\nコマンドが実行されるのもActiveなタブのみ。\u003c/p\u003e\n\n\u003cp\u003e各Tabのチェックボックス状態と上部ボタン状態\u003c/p\u003e\n\n\u003cp\u003e　TabA： CheckBox.IsEnable=True　（Viewで選択中のTab）\u003cbr\u003e\n　TabB： CheckBox.IsEnable=False\u003cbr\u003e\n　TabC： CheckBox.IsEnable=False\u003cbr\u003e\n　　12-UsingCompositeCommands　⇒　TopButton.IsEnable=False\u003cbr\u003e\n　　13-IActiveAwareCommands　⇒　TopButton.IsEnable=True\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"内容-15\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%86%85%E5%AE%B9-15\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e内容\u003c/h3\u003e\n\n\u003cp\u003eCompositeCommand が Active な Control を判別するために、下記対応をしてるっぽい（抜けてるかも）\u003c/p\u003e\n\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003ePrism.Commands.CompositeCommand のコンストラクタ引数を true にする。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"c1\"\u003e// 概要:\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e//     Initializes a new instance of Prism.Commands.CompositeCommand.\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e//\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e// パラメーター:\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e//   monitorCommandActivity:\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e//     Indicates when the command activity is going to be monitored.\u003c/span\u003e\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003eCompositeCommand\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"n\"\u003emonitorCommandActivity\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eTabItem の ViewModel にて、IActiveAware インターフェースを継承する。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003einterface\u003c/span\u003e \u003cspan class=\"nc\"\u003eIActiveAware\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e//Gets or sets a value indicating whether the object is active.\u003c/span\u003e\n    \u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"n\"\u003eIsActive\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"k\"\u003eset\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e//Notifies that the value for Prism.IActiveAware.IsActive property has changed.\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eevent\u003c/span\u003e \u003cspan class=\"n\"\u003eEventHandler\u003c/span\u003e \u003cspan class=\"n\"\u003eIsActiveChanged\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e継承した IActiveAware  に対応するコードを書き、IsActiveプロパティを更新する。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"n\"\u003e_isActive\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"n\"\u003eIsActive\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eget\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003e_isActive\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eset\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003e_isActive\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003evalue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"nf\"\u003eOnIsActiveChanged\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eOnIsActiveChanged\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eUpdateCommand\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eIsActive\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eIsActive\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eIsActiveChanged\u003c/span\u003e\u003cspan class=\"p\"\u003e?.\u003c/span\u003e\u003cspan class=\"nf\"\u003eInvoke\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eEventArgs\u003c/span\u003e\u003cspan class=\"p\"\u003e());\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eevent\u003c/span\u003e \u003cspan class=\"n\"\u003eEventHandler\u003c/span\u003e \u003cspan class=\"n\"\u003eIsActiveChanged\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003cp\u003eサンプルには出てこないが、IsActiveChanged にイベントを登録しておけば、IsActiveの変化時に処理ができる。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003ector\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eIsActiveChanged\u003c/span\u003e \u003cspan class=\"p\"\u003e+=\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eobject\u003c/span\u003e \u003cspan class=\"n\"\u003esender\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eEventArgs\u003c/span\u003e \u003cspan class=\"n\"\u003ee\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ee\u003c/span\u003e \u003cspan class=\"k\"\u003eis\u003c/span\u003e \u003cspan class=\"n\"\u003eDataEventArgs\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003ebool\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ee2\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eConsole\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWriteLine\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e$\"ActiveChanged: \u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003ee2\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eValue\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e};\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"n\"\u003e_isActive\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"n\"\u003eIsActive\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eget\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003e_isActive\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eset\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nf\"\u003eSetProperty\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003eref\u003c/span\u003e \u003cspan class=\"n\"\u003e_isActive\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003evalue\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eIsActiveChanged\u003c/span\u003e\u003cspan class=\"p\"\u003e?.\u003c/span\u003e\u003cspan class=\"nf\"\u003eInvoke\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eDataEventArgs\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003ebool\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"k\"\u003evalue\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eevent\u003c/span\u003e \u003cspan class=\"n\"\u003eEventHandler\u003c/span\u003e \u003cspan class=\"n\"\u003eIsActiveChanged\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"14-usingeventaggregator-\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#14-usingeventaggregator-\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e14-UsingEventAggregator ○\u003c/h2\u003e\n\n\u003cp\u003eモジュール間で情報の受け渡しをするサンプル\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"実行-16\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AE%9F%E8%A1%8C-16\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e実行\u003c/h3\u003e\n\n\u003cp\u003eボタンをクリックすると、テキストボックスに入力された文字列が、右のリストボックスに表示される\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/eb1089106c5e8f43a6a4ba376a5a2b6a5befe97d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3234393831362f36623465633130622d633737362d333361302d396237662d3661313436623035616332342e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F249816%2F6b4ec10b-c776-33a0-9b7f-6a146b05ac24.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=799268c82649194be07860248a0d79c7\" alt=\"14-UsingEventAggregator_View1.jpg\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/249816/6b4ec10b-c776-33a0-9b7f-6a146b05ac24.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F249816%2F6b4ec10b-c776-33a0-9b7f-6a146b05ac24.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=d0777edd5f69f8b92ab2189859870fd9 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"内容-16\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%86%85%E5%AE%B9-16\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e内容\u003c/h3\u003e\n\n\u003cp\u003e左右でModule(プロジェクト)が分かれている。\u003c/p\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"共通部\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%85%B1%E9%80%9A%E9%83%A8\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e共通部\u003c/h4\u003e\n\n\u003cp\u003e各プロジェクトが参照できるところに MessageSentEvent.cs を定義する。(サンプルでは別プロジェクト）\u003c/p\u003e\n\n\u003cp\u003eMessageSentEvent.cs は、Prism.Events.PubSubEvent\u0026lt;TPayload\u0026gt; を継承してるだけの空クラス。\u003c/p\u003e\n\n\u003cp\u003e定義しなくても対応できると思うが、使用時にジェネリックの型パラメータのネストが深くなり見辛いのかも。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eMessageSentEvent\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003ePubSubEvent\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"親モジュール\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%A6%AA%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e親モジュール\u003c/h4\u003e\n\n\u003cp\u003eMainWindowを左右に分割して、リージョン名を付けてるだけ。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"xml\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"nt\"\u003e\u0026lt;Grid\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;Grid.ColumnDefinitions\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"nt\"\u003e\u0026lt;ColumnDefinition\u003c/span\u003e \u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"nt\"\u003e\u0026lt;ColumnDefinition\u003c/span\u003e \u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;/Grid.ColumnDefinitions\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;ContentControl\u003c/span\u003e \u003cspan class=\"na\"\u003eprism:RegionManager.RegionName=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"LeftRegion\"\u003c/span\u003e \u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;ContentControl\u003c/span\u003e \u003cspan class=\"na\"\u003eGrid.Column=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"1\"\u003c/span\u003e\n                    \u003cspan class=\"na\"\u003eprism:RegionManager.RegionName=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"RightRegion\"\u003c/span\u003e \u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n\u003cspan class=\"nt\"\u003e\u0026lt;/Grid\u0026gt;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"子モジュール左情報発行側\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AD%90%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB%E5%B7%A6%E6%83%85%E5%A0%B1%E7%99%BA%E8%A1%8C%E5%81%B4\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e子モジュール（左：情報発行側）\u003c/h4\u003e\n\n\u003cp\u003e親モジュールへの配置は、07-Modules と同じ手法なので割愛。\u003c/p\u003e\n\n\u003cp\u003eViewModelのコンストラクタで IEventAggregator を受けており、ボタンクリック時に DelegateCommand で SendMessage() がコールされている。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eMessageViewModel\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eBindableBase\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eIEventAggregator\u003c/span\u003e \u003cspan class=\"n\"\u003e_ea\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003e_message\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"Message to Send\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003eMessage\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eget\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003e_message\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eset\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"nf\"\u003eSetProperty\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003eref\u003c/span\u003e \u003cspan class=\"n\"\u003e_message\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003evalue\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eDelegateCommand\u003c/span\u003e \u003cspan class=\"n\"\u003eSendMessageCommand\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003eMessageViewModel\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eIEventAggregator\u003c/span\u003e \u003cspan class=\"n\"\u003eea\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003e_ea\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eea\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eSendMessageCommand\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eDelegateCommand\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eSendMessage\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eSendMessage\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003e_ea\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eGetEvent\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eMessageSentEvent\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;().\u003c/span\u003e\u003cspan class=\"nf\"\u003ePublish\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eMessage\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e情報発行は、デリゲートコマンド引数のActionがポイント\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"n\"\u003e_ea\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eGetEvent\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eMessageSentEvent\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;().\u003c/span\u003e\u003cspan class=\"nf\"\u003ePublish\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eMessage\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"子モジュール右情報取得側\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AD%90%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB%E5%8F%B3%E6%83%85%E5%A0%B1%E5%8F%96%E5%BE%97%E5%81%B4\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e子モジュール（右：情報取得側）\u003c/h4\u003e\n\n\u003cp\u003e左側の子モジュールと同様に、コンストラクタで IEventAggregator を受ける。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eMessageListViewModel\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eBindableBase\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eIEventAggregator\u003c/span\u003e \u003cspan class=\"n\"\u003e_ea\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003eObservableCollection\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003e_messages\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eObservableCollection\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eMessages\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eget\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003e_messages\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eset\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"nf\"\u003eSetProperty\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003eref\u003c/span\u003e \u003cspan class=\"n\"\u003e_messages\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003evalue\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003eMessageListViewModel\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eIEventAggregator\u003c/span\u003e \u003cspan class=\"n\"\u003eea\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003e_ea\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eea\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eMessages\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eObservableCollection\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;();\u003c/span\u003e\n        \u003cspan class=\"n\"\u003e_ea\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eGetEvent\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eMessageSentEvent\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;().\u003c/span\u003e\u003cspan class=\"nf\"\u003eSubscribe\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eMessageReceived\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eMessageReceived\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003emessage\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eMessages\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAdd\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003emessage\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e情報取得は、コンストラクタ内のメソッドがポイント\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"n\"\u003e_ea\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eGetEvent\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eMessageSentEvent\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;().\u003c/span\u003e\u003cspan class=\"nf\"\u003eSubscribe\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eMessageReceived\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"15-filteringevents-\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#15-filteringevents-\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e15-FilteringEvents ○\u003c/h2\u003e\n\n\u003cp\u003eEventAggregator にて、情報取得側が取得する情報のフィルタリングを行うサンプル\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"実行-17\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AE%9F%E8%A1%8C-17\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e実行\u003c/h3\u003e\n\n\u003cp\u003e14-UsingEventAggregator と同じView。\u003c/p\u003e\n\n\u003cp\u003e機能差分は情報の取得側のフィルタリングで、文字列に \"Brian\" が含まれる場合のみ情報を取得している。\u003c/p\u003e\n\n\u003cp\u003e※情報の発行側は、14-UsingEventAggregator と同じで、文字列に関わらず発行する。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"内容-17\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%86%85%E5%AE%B9-17\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e内容\u003c/h3\u003e\n\n\u003cp\u003e14-UsingEventAggregator からの変化点である 右側モジュール（ModuleB）についてのみまとめる。\u003c/p\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"子モジュール右情報取得側-1\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AD%90%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB%E5%8F%B3%E6%83%85%E5%A0%B1%E5%8F%96%E5%BE%97%E5%81%B4-1\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e子モジュール（右：情報取得側）\u003c/h4\u003e\n\n\u003cp\u003eフィルタリングは、ModuleB の ViewModel に実装されており、判定は Predicate\u0026lt;T\u0026gt; なので、色々と差し替えできそう。\u003c/p\u003e\n\n\u003cp\u003e引数の \" ThreadOption threadOption\" と \"bool keepSubscriberReferenceAlive\" については未調査。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"c1\"\u003e// PubSubEvent\u0026lt;TPayload\u0026gt;.Subscribe(\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e//     Action\u0026lt;TPayload\u0026gt; action,\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e//     ThreadOption threadOption,\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e//     bool keepSubscriberReferenceAlive,\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e//     Predicate\u0026lt;TPayload\u0026gt; filter) \u003c/span\u003e\n\u003cspan class=\"n\"\u003e_ea\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eGetEvent\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eMessageSentEvent\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSubscribe\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eMessageReceived\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eThreadOption\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ePublisherThread\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"k\"\u003efalse\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003efilter\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003efilter\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eContains\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Brian\"\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"16-regioncontext-\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#16-regioncontext-\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e16-RegionContext ○\u003c/h2\u003e\n\n\u003cp\u003e初の複数Region。上下で分かれている。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"実行-18\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AE%9F%E8%A1%8C-18\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e実行\u003c/h3\u003e\n\n\u003cp\u003e上下に分かれており、上部リストボックスで選択した情報が、下部テキストブロックに表示される。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/ea77a0a2f9df9facd88e49564783dbea2a942e2a/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3234393831362f37383432666262332d323465342d653737312d616661622d3533373535346235656135652e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F249816%2F7842fbb3-24e4-e771-afab-537554b5ea5e.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=957193406c7e28fecbd9cd145db0459b\" alt=\"16-RegionContext_View1.jpg\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/249816/7842fbb3-24e4-e771-afab-537554b5ea5e.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F249816%2F7842fbb3-24e4-e771-afab-537554b5ea5e.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=2e04b9c5262b4ac6eaed277d84a1f850 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"内容-18\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%86%85%E5%AE%B9-18\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e内容\u003c/h3\u003e\n\n\u003cp\u003eリッチUIアプリの頻出パターン。\u003c/p\u003e\n\n\u003cp\u003ePrism特有のクラスとかは使ってなさげで、特別難しいことはないと思う。\u003c/p\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"親モジュール-1\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%A6%AA%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB-1\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e親モジュール\u003c/h4\u003e\n\n\u003cp\u003e特別なことはしてない。子モジュールを読み込むだけ。（07-Modules - Code）\u003c/p\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"子モジュール\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AD%90%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e子モジュール\u003c/h4\u003e\n\n\u003cp\u003eListBox の選択情報を SelectedItem で取得し表示している。\u003c/p\u003e\n\n\u003cp\u003e下部コントロールの配置をリージョン名から行っており、こーゆー雰囲気でUIコントロールを細分化して管理するのかなと思った。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"xml\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eprism:RegionManager.RegionName=\"PersonDetailsRegion\"\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"17-basicregionnavigation-\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#17-basicregionnavigation-\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e17-BasicRegionNavigation ○\u003c/h2\u003e\n\n\u003cp\u003eNavitgation を使って、表示する自作UserControl を切り替えるサンプル\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"実行-19\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AE%9F%E8%A1%8C-19\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e実行\u003c/h3\u003e\n\n\u003cp\u003eボタンが二つ配置されており、各ボタンを押すと、ウィンドウ下部に ViewA もしくは ViewB が読み込まれる。\u003c/p\u003e\n\n\u003cp\u003e起動時は ViewA も ViewB も読み込まれていない状態。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/c68e9971150ba9b4f90bae30b9e4969d504bf643/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3234393831362f30306335646239352d363439352d376263352d333666642d6334376363323734646431382e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F249816%2F00c5db95-6495-7bc5-36fd-c47cc274dd18.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=f323c6af0fc55ed3c2647b6244c98513\" alt=\"17-BasicRegionNavigation_View1.jpg\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/249816/00c5db95-6495-7bc5-36fd-c47cc274dd18.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F249816%2F00c5db95-6495-7bc5-36fd-c47cc274dd18.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=4beeca6bf321d0bd68dba1319e1a4b9a 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"内容-19\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%86%85%E5%AE%B9-19\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e内容\u003c/h3\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"子モジュール-1\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AD%90%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB-1\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e子モジュール\u003c/h4\u003e\n\n\u003cp\u003eコンテナに ViewA/ViewB を登録している。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eModuleAModule\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eIModule\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eOnInitialized\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eIContainerProvider\u003c/span\u003e \u003cspan class=\"n\"\u003econtainerProvider\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eRegisterTypes\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eIContainerRegistry\u003c/span\u003e \u003cspan class=\"n\"\u003econtainerRegistry\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003econtainerRegistry\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eRegisterForNavigation\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eViewA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;();\u003c/span\u003e\n        \u003cspan class=\"n\"\u003econtainerRegistry\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eRegisterForNavigation\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eViewB\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;();\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"親モジュール-2\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%A6%AA%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB-2\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e親モジュール\u003c/h4\u003e\n\n\u003cp\u003e重要なのは親モジュール。\u003c/p\u003e\n\n\u003cp\u003e親モジュールでは、View(xaml)のButtonの CommandParameter で 子モジュールの UserControl名 (ViewAorViewB) を指定している。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"xml\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"nt\"\u003e\u0026lt;Button\u003c/span\u003e \u003cspan class=\"na\"\u003eCommand=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"{Binding NavigateCommand}\"\u003c/span\u003e\n        \u003cspan class=\"na\"\u003eCommandParameter=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"ViewA\"\u003c/span\u003e\n        \u003cspan class=\"na\"\u003eContent=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Navigate to View A\"\u003c/span\u003e \u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n\u003cspan class=\"nt\"\u003e\u0026lt;Button\u003c/span\u003e \u003cspan class=\"na\"\u003eCommand=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"{Binding NavigateCommand}\"\u003c/span\u003e\n        \u003cspan class=\"na\"\u003eCommandParameter=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"ViewB\"\u003c/span\u003e\n        \u003cspan class=\"na\"\u003eContent=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Navigate to View B\"\u003c/span\u003e \u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eViewModel の DelegateCommand で、子モジュールの UserControl を読み込んでいる。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eDelegateCommand\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eNavigateCommand\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003eset\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003eMainWindowViewModel\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eIRegionManager\u003c/span\u003e \u003cspan class=\"n\"\u003eregionManager\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"n\"\u003e_regionManager\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eregionManager\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eNavigateCommand\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eDelegateCommand\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"n\"\u003eNavigate\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eNavigate\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003enavigatePath\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003enavigatePath\u003c/span\u003e \u003cspan class=\"p\"\u003e!=\u003c/span\u003e \u003cspan class=\"k\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"n\"\u003e_regionManager\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eRequestNavigate\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"ContentRegion\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003enavigatePath\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e試しに存在しない UserControl名 (ViewC) を指定したところ、画面に \"System.Object\" と表示された。例外は発生しなかった。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"18-navigationcallback-\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#18-navigationcallback-\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e18-NavigationCallback ○\u003c/h2\u003e\n\n\u003cp\u003eNavigation の完了時に Callback(Action) を行うサンプル。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"実行-20\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AE%9F%E8%A1%8C-20\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e実行\u003c/h3\u003e\n\n\u003cp\u003e17-BasicRegionNavigation と同じ見た目。\u003c/p\u003e\n\n\u003cp\u003e差分としては、ボタンのクリックにより、子モジュールの View が読み込まれたあとに、ポップアップウィンドウが表示される。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"内容-20\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%86%85%E5%AE%B9-20\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e内容\u003c/h3\u003e\n\n\u003cp\u003eモジュール読み出し完了のタイミングで処理を行っている。\u003c/p\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"親モジュール-3\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%A6%AA%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB-3\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e親モジュール\u003c/h4\u003e\n\n\u003cp\u003eUserControl の呼び出し時に、Callbackとして Action\u0026lt;NavigationResult\u0026gt; を登録している。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eNavigate\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003enavigatePath\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003enavigatePath\u003c/span\u003e \u003cspan class=\"p\"\u003e!=\u003c/span\u003e \u003cspan class=\"k\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"n\"\u003e_regionManager\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eRequestNavigate\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"ContentRegion\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003enavigatePath\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eNavigationComplete\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eNavigationComplete\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eNavigationResult\u003c/span\u003e \u003cspan class=\"n\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eMessageBox\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eShow\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eString\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eFormat\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Navigation to {0} complete. \"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eContext\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eUri\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e先ほどと同様に存在しない UserControl の指定を試したところ、読み込めていないのに complete. と表示された。\u003c/p\u003e\n\n\u003cp\u003e\u003ca target=\"_blank\"\u003e\u003cimg alt=\"\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eNavigationResult には、Errorプロパティ が存在するので、読み込めない場合は、Errorに何か情報が入るかと期待したが、モジュールが見つからない場合でも Error は null だった。（いつErrroが入るか謎…）\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"19-navigationparticipation-\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#19-navigationparticipation-\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e19-NavigationParticipation ○\u003c/h2\u003e\n\n\u003cp\u003e自作UserControl に INavigationAware を継承することで、Navigationの遷移時に処理を行うサンプル\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"実行-21\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AE%9F%E8%A1%8C-21\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e実行\u003c/h3\u003e\n\n\u003cp\u003eボタンが二つ配置されており、ボタンを押すと各ボタンに対応した UserControl がタブに読み込まれる。\u003c/p\u003e\n\n\u003cp\u003eボタンをクリックするたびに、UserControl 内のカウンタがインクリメントされていく。\u003c/p\u003e\n\n\u003cp\u003eまた、ボタンクリック時に対応する UserControl が表示されていなければ、対応するタブにフォーカスが移動する。 \u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/cfcca515ecf4db02310ebe0bb095f9507cb912d6/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3234393831362f65386134333664302d666238302d653463342d383066372d6239643833353234363261642e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F249816%2Fe8a436d0-fb80-e4c4-80f7-b9d8352462ad.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=1f41072e3f322f2b216131d7f9d5fd45\" alt=\"19-NavigationParticipation_View1.jpg\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/249816/e8a436d0-fb80-e4c4-80f7-b9d8352462ad.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F249816%2Fe8a436d0-fb80-e4c4-80f7-b9d8352462ad.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=81db769e8d75ce2639edc73b6ca29a1e 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"内容-21\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%86%85%E5%AE%B9-21\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e内容\u003c/h3\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"親モジュール-4\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%A6%AA%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB-4\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e親モジュール\u003c/h4\u003e\n\n\u003cp\u003e17-BasicRegionNavigation と同じ。\u003c/p\u003e\n\n\u003cp\u003examl で UserControl名 を指定して、DelegateCommand で読み込み。\u003c/p\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"子モジュール-2\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AD%90%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB-2\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e子モジュール\u003c/h4\u003e\n\n\u003cp\u003e17-BasicRegionNavigation からの差分として、ViewModel が Prism.Regions.INavigationAware を継承している。\u003c/p\u003e\n\n\u003cp\u003eINavigationAware には 3つのメソッドが存在し、カウントアップなどを実現している。\u003c/p\u003e\n\n\u003cp\u003e下記コメントは勝手に書いています。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003einterface\u003c/span\u003e \u003cspan class=\"nc\"\u003eINavigationAware\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e// ナビゲーションが移る前にコールされる。\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e// trueを返すと、このインスタンスが使いまわされる。\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e// falseを返すと、別のインスタンスが作成される。\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e// サンプルの動作だとボタンクリックの度にタブが増えていく。\u003c/span\u003e\n    \u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"nf\"\u003eIsNavigationTarget\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eNavigationContext\u003c/span\u003e \u003cspan class=\"n\"\u003enavigationContext\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e// ナビゲーションが他に移る時にコールされる。\u003c/span\u003e\n    \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eOnNavigatedFrom\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eNavigationContext\u003c/span\u003e \u003cspan class=\"n\"\u003enavigationContext\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e// ナビゲーションが移ってきた時にコールされる。\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e// これでカウンタをインクリメントしていた。\u003c/span\u003e\n    \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eOnNavigatedTo\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eNavigationContext\u003c/span\u003e \u003cspan class=\"n\"\u003enavigationContext\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"20-navigatetoexistingviews-\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#20-navigatetoexistingviews-\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e20-NavigateToExistingViews ○\u003c/h2\u003e\n\n\u003cp\u003e19-NavigationParticipation の応用サンプル。\u003cbr\u003e\n特定条件で 自作View を使い回さずに新規追加する。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"実行-22\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AE%9F%E8%A1%8C-22\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e実行\u003c/h3\u003e\n\n\u003cp\u003e19-NavigationParticipation と同じ見た目。\u003c/p\u003e\n\n\u003cp\u003e差分としては、ボタンを一定回数クリックすると、新規タブが作成されて増えていく。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"内容-22\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%86%85%E5%AE%B9-22\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e内容\u003c/h3\u003e\n\n\u003cp\u003e先ほど少し出てきた INavigationAware.IsNavigationTarget() の戻り値をカウンタに応じて変えているだけ。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"nf\"\u003eIsNavigationTarget\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eNavigationContext\u003c/span\u003e \u003cspan class=\"n\"\u003enavigationContext\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003ePageViews\u003c/span\u003e \u003cspan class=\"p\"\u003e/\u003c/span\u003e \u003cspan class=\"m\"\u003e6\u003c/span\u003e \u003cspan class=\"p\"\u003e!=\u003c/span\u003e \u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"21-passingparameters-\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#21-passingparameters-\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e21-PassingParameters △\u003c/h2\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"実行-23\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AE%9F%E8%A1%8C-23\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e実行\u003c/h3\u003e\n\n\u003cp\u003e16-RegionContext とほぼ同じ見た目。\u003c/p\u003e\n\n\u003cp\u003e差分としては、リストアイテムのクリックにより、下部にタブが追加されて情報が表示される。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/462d400efdd57077ebec7e9c3b57b5a7deeac486/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3234393831362f62636134306234642d353233382d346235342d353165312d3362626135343437643336342e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F249816%2Fbca40b4d-5238-4b54-51e1-3bba5447d364.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=1ba24f01b427224ec1e46cf05daa8143\" alt=\"21-PassingParameters_View1.jpg\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/249816/bca40b4d-5238-4b54-51e1-3bba5447d364.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F249816%2Fbca40b4d-5238-4b54-51e1-3bba5447d364.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=1f8925c47cf004adbd47612b05d3ca03 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"内容-23\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%86%85%E5%AE%B9-23\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e内容\u003c/h3\u003e\n\n\u003cp\u003e複雑で少し付いていけない…\u003cbr\u003e\n\u003cdel\u003e実現してることに比べて実装が難しすぎる気がする…\u003c/del\u003e\u003c/p\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"親モジュール-5\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%A6%AA%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB-5\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e親モジュール\u003c/h4\u003e\n\n\u003cp\u003e特に目新しいことはしてない\u003c/p\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"子モジュール-3\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AD%90%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB-3\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e子モジュール\u003c/h4\u003e\n\n\u003col\u003e\n\u003cli\u003e\u003cp\u003eListBox の SelectionChanged イベントで 選択されている Personインスタンス を DelegateCommand の Action\u0026lt;Person\u0026gt; に渡す\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eAction\u0026lt;Person\u0026gt; では、Tabのリージョン(\"PersonDetailsRegion\") に PersonDetail.xaml を登録する\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003ePersonSelected\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ePerson\u003c/span\u003e \u003cspan class=\"n\"\u003eperson\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eparameters\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eNavigationParameters\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"s\"\u003e\"person\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eperson\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e};\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eperson\u003c/span\u003e \u003cspan class=\"p\"\u003e!=\u003c/span\u003e \u003cspan class=\"k\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"n\"\u003e_regionManager\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eRequestNavigate\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n            \u003cspan class=\"s\"\u003e\"PersonDetailsRegion\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\"PersonDetail\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eparameters\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e初回の PersonDetailViewModel では、インスタンスが作成されて、OnNavigatedTo() で SelectedPerson が更新される\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eOnNavigatedTo\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eNavigationContext\u003c/span\u003e \u003cspan class=\"n\"\u003enavigationContext\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003enavigationContext\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eParameters\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s\"\u003e\"person\"\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"k\"\u003eis\u003c/span\u003e \u003cspan class=\"n\"\u003ePerson\u003c/span\u003e \u003cspan class=\"n\"\u003eperson\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eSelectedPerson\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eperson\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"nf\"\u003eIsNavigationTarget\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eNavigationContext\u003c/span\u003e \u003cspan class=\"n\"\u003enavigationContext\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003enavigationContext\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eParameters\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s\"\u003e\"person\"\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"k\"\u003eis\u003c/span\u003e \u003cspan class=\"n\"\u003ePerson\u003c/span\u003e \u003cspan class=\"n\"\u003eperson\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003eSelectedPerson\u003c/span\u003e \u003cspan class=\"p\"\u003e!=\u003c/span\u003e \u003cspan class=\"k\"\u003enull\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e \u003cspan class=\"n\"\u003eSelectedPerson\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eLastName\u003c/span\u003e \u003cspan class=\"p\"\u003e==\u003c/span\u003e \u003cspan class=\"n\"\u003eperson\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eLastName\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eelse\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e初回以降は、IsNavigationTarget() で 選択された Person に対応するViewModelインスタンスが存在するかがチェックされて、存在しなければ新たなインスタンスが作成され増えていく。\u003c/p\u003e\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"22-confirmcancelnavigation-\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#22-confirmcancelnavigation-\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e22-ConfirmCancelNavigation ○\u003c/h2\u003e\n\n\u003cp\u003eNavigation に遷移するかどうかをダイアログで切り替えるサンプル\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"実行-24\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AE%9F%E8%A1%8C-24\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e実行\u003c/h3\u003e\n\n\u003cp\u003e17-BasicRegionNavigation と同じ見た目で、機能もほぼ同じ。\u003c/p\u003e\n\n\u003cp\u003e差分としては、ViewAを表示中にボタンBを押下すると、Navigate するかどうかを Yes/No 形式のメッセージボックスで質問される。\u003cbr\u003e\nYes を選択すると ViewB の表示に切り替わる。\u003cbr\u003e\nNo を選択すると ViewA の表示のまま変化しない。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"内容-24\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%86%85%E5%AE%B9-24\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e内容\u003c/h3\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"親モジュール-6\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%A6%AA%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB-6\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e親モジュール\u003c/h4\u003e\n\n\u003cp\u003e17-BasicRegionNavigation と同じで、目新しいことはない\u003c/p\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"子モジュール-4\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AD%90%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB-4\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e子モジュール\u003c/h4\u003e\n\n\u003cp\u003eViewA の ViewModel のみ Prism.Regions.IConfirmNavigationRequest を継承している。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eIConfirmNavigationRequest が継承してるインターフェースは既出（19-NavigationParticipation）\u003c/li\u003e\n\u003cli\u003eIConfirmNavigationRequest  のメソッドは 以下の 1つのみで『このインスタンスからの移動を受け入れるかどうか』を選択できる。\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003einterface\u003c/span\u003e \u003cspan class=\"nc\"\u003eIConfirmNavigationRequest\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eINavigationAware\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eConfirmNavigationRequest\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eNavigationContext\u003c/span\u003e \u003cspan class=\"n\"\u003enavigationContext\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eAction\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003ebool\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003econtinuationCallback\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eViewAViewModel の実装\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eConfirmNavigationRequest\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eNavigationContext\u003c/span\u003e \u003cspan class=\"n\"\u003enavigationContext\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eAction\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003ebool\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003econtinuationCallback\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"n\"\u003eresult\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eMessageBox\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eShow\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Do you to navigate?\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\"Navigate?\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                        \u003cspan class=\"n\"\u003eMessageBoxButton\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eYesNo\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e==\u003c/span\u003e \u003cspan class=\"n\"\u003eMessageBoxResult\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eNo\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eresult\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003efalse\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"nf\"\u003econtinuationCallback\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"23-regionmemberlifetime-\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#23-regionmemberlifetime-\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e23-RegionMemberLifetime ○\u003c/h2\u003e\n\n\u003cp\u003eViewの非アクティブ時にインスタンスを保持するかどうかを IRegionMemberLifetime により指定するサンプル\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"実行-25\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AE%9F%E8%A1%8C-25\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e実行\u003c/h3\u003e\n\n\u003cp\u003e17-BasicRegionNavigation と同じ見た目。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eViewA/ViewB ボタンをクリックすると、各Viewの名前が表示された 水色のパネルが表示される。\u003c/li\u003e\n\u003cli\u003eViewBはクリックするたびにパネルが増えていく。\u003c/li\u003e\n\u003cli\u003eViewAは何度クリックしても 1つのパネルしかできず、ViewBをクリックするとViewAパネルは消える。\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e動作だけ見ても意味が分からないが、コードを見るに、水色パネルはViewのインスタンスを可視化している。\u003c/p\u003e\n\n\u003cp\u003eViewAは非アクティブ時にインスタンスを保持しない造りにしているので、ViewA→ViewB と操作すると、ViewAパネル（インスタンス）が消える。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"内容-25\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%86%85%E5%AE%B9-25\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e内容\u003c/h3\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"親モジュール-7\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%A6%AA%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB-7\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e親モジュール\u003c/h4\u003e\n\n\u003cp\u003e水色パネルは、ObservableCollection\u0026lt;object\u0026gt; を ItemsControl により表示してる。\u003c/p\u003e\n\n\u003cp\u003eObservableCollection\u0026lt;object\u0026gt; だが string しか格納されないので、ObservableCollection\u0026lt;string\u0026gt; でも問題ない。\u003c/p\u003e\n\n\u003ch5\u003e\n\u003cspan id=\"regionにviewが追加された際の処理\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#region%E3%81%ABview%E3%81%8C%E8%BF%BD%E5%8A%A0%E3%81%95%E3%82%8C%E3%81%9F%E9%9A%9B%E3%81%AE%E5%87%A6%E7%90%86\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eRegionにViewが追加された際の処理\u003c/h5\u003e\n\n\u003cp\u003eCollectionChangedイベントにより実現されている。サンプルで初めて出てきた。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003eMainWindowViewModel\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eIRegionManager\u003c/span\u003e \u003cspan class=\"n\"\u003eregionManager\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"n\"\u003e_regionManager\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eregionManager\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"n\"\u003e_regionManager\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eRegions\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eCollectionChanged\u003c/span\u003e \u003cspan class=\"p\"\u003e+=\u003c/span\u003e \u003cspan class=\"n\"\u003eRegions_CollectionChanged\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eNavigateCommand\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eDelegateCommand\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"n\"\u003eNavigate\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// こちらはアプリ起動直後に1回しか来ない (xaml \"ContentRegion\" の追加)\u003c/span\u003e\n\u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eRegions_CollectionChanged\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eobject\u003c/span\u003e \u003cspan class=\"n\"\u003esender\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eNotifyCollectionChangedEventArgs\u003c/span\u003e \u003cspan class=\"n\"\u003ee\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ee\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eAction\u003c/span\u003e \u003cspan class=\"p\"\u003e==\u003c/span\u003e \u003cspan class=\"n\"\u003eNotifyCollectionChangedAction\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eAdd\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eregion\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eIRegion\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"n\"\u003ee\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eNewItems\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e];\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eregion\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eViews\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eCollectionChanged\u003c/span\u003e \u003cspan class=\"p\"\u003e+=\u003c/span\u003e \u003cspan class=\"n\"\u003eViews_CollectionChanged\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// こちらはボタンクリック(ViewA/B)追加の度にAddが来る\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e// ViewAインスタンスが消える際にはRemoveが来る\u003c/span\u003e\n\u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eViews_CollectionChanged\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eobject\u003c/span\u003e \u003cspan class=\"n\"\u003esender\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eNotifyCollectionChangedEventArgs\u003c/span\u003e \u003cspan class=\"n\"\u003ee\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ee\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eAction\u003c/span\u003e \u003cspan class=\"p\"\u003e==\u003c/span\u003e \u003cspan class=\"n\"\u003eNotifyCollectionChangedAction\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eAdd\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eViewPanels\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAdd\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ee\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eNewItems\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e].\u003c/span\u003e\u003cspan class=\"nf\"\u003eGetType\u003c/span\u003e\u003cspan class=\"p\"\u003e().\u003c/span\u003e\u003cspan class=\"n\"\u003eName\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eelse\u003c/span\u003e \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ee\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eAction\u003c/span\u003e \u003cspan class=\"p\"\u003e==\u003c/span\u003e \u003cspan class=\"n\"\u003eNotifyCollectionChangedAction\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eRemove\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eViewPanels\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eRemove\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ee\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eOldItems\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e].\u003c/span\u003e\u003cspan class=\"nf\"\u003eGetType\u003c/span\u003e\u003cspan class=\"p\"\u003e().\u003c/span\u003e\u003cspan class=\"n\"\u003eName\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"子モジュール-5\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AD%90%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB-5\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e子モジュール\u003c/h4\u003e\n\n\u003cp\u003eほぼ 19-NavigationParticipation と同じ。\u003c/p\u003e\n\n\u003cp\u003e差分は、ViewAViewModel が Prism.Regions.IRegionMemberLifetime を継承している点だけ。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003einterface\u003c/span\u003e \u003cspan class=\"nc\"\u003eIRegionMemberLifetime\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e// インスタンスを非アクティブ化時に保持するか？\u003c/span\u003e\n    \u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"n\"\u003eKeepAlive\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eViewAViewModel の実装（非アクティブ時は常にインスタンスを保持しない）\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"n\"\u003eKeepAlive\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"k\"\u003efalse\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"24-navigationjournal-\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#24-navigationjournal-\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e24-NavigationJournal ○\u003c/h2\u003e\n\n\u003cp\u003eブラウザの戻る進むのように画面遷移するサンプル\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"実行-26\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AE%9F%E8%A1%8C-26\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e実行\u003c/h3\u003e\n\n\u003cp\u003e16-RegionContext と同じ Person選択系。\u003c/p\u003e\n\n\u003cp\u003eリストボックスが表示されており、選択すると詳細表示に画面が遷移する。\u003c/p\u003e\n\n\u003cp\u003eGoBackボタンで戻れて、GoForwardボタンで進める。画面遷移が初めて出てきた。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/2f549f42df375c2a5599512f913fe3212805264f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3234393831362f33373338626133662d313537622d656665652d666138312d6166646636363634623563312e676966\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F249816%2F3738ba3f-157b-efee-fa81-afdf6664b5c1.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=8c7f8b709236cb4c87f0a63fca3befe7\" alt=\"24-NavigationJournal_View1.gif\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/249816/3738ba3f-157b-efee-fa81-afdf6664b5c1.gif\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F249816%2F3738ba3f-157b-efee-fa81-afdf6664b5c1.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=40228b6841d52c7858a3240ce46ddfc9 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"内容-26\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%86%85%E5%AE%B9-26\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e内容\u003c/h3\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"親モジュール-8\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%A6%AA%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB-8\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e親モジュール\u003c/h4\u003e\n\n\u003cp\u003e特に目新しい点はなし\u003c/p\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"子モジュール-6\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AD%90%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB-6\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e子モジュール\u003c/h4\u003e\n\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003eListBoxのSelectionChangedイベントで、ViewModelからUserControlのPersonDetailを読み出す。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"xml\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"nt\"\u003e\u0026lt;i:Interaction.Triggers\u0026gt;\u003c/span\u003e\n   \u003cspan class=\"nt\"\u003e\u0026lt;i:EventTrigger\u003c/span\u003e \u003cspan class=\"na\"\u003eEventName=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"SelectionChanged\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e\n       \u003cspan class=\"nt\"\u003e\u0026lt;prism:InvokeCommandAction\u003c/span\u003e\n           \u003cspan class=\"na\"\u003eCommand=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"{Binding PersonSelectedCommand}\"\u003c/span\u003e\n           \u003cspan class=\"na\"\u003eCommandParameter=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"{Binding SelectedItem, ElementName=_listOfPeople}\"\u003c/span\u003e \u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n   \u003cspan class=\"nt\"\u003e\u0026lt;/i:EventTrigger\u0026gt;\u003c/span\u003e\n\u003cspan class=\"nt\"\u003e\u0026lt;/i:Interaction.Triggers\u0026gt;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003ePersonDetailViewModel は INavigationAware を継承しており、ナビゲートが移った際に IRegionNavigationJournal を保持する。\u003cbr\u003e\nこの Prism.Regions.IRegionNavigationJournal を使って画面遷移を制御する。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eDelegateCommand\u003c/span\u003e \u003cspan class=\"n\"\u003eGoBackCommand\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003ePersonDetailViewModel\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n   \u003cspan class=\"n\"\u003eGoBackCommand\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eDelegateCommand\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eGoBack\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eGoBack\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003e_journal\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eGoBack\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eOnNavigatedTo\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eNavigationContext\u003c/span\u003e \u003cspan class=\"n\"\u003enavigationContext\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n   \u003cspan class=\"n\"\u003e_journal\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003enavigationContext\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eNavigationService\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eJournal\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n   \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003enavigationContext\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eParameters\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s\"\u003e\"person\"\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"k\"\u003eis\u003c/span\u003e \u003cspan class=\"n\"\u003ePerson\u003c/span\u003e \u003cspan class=\"n\"\u003eperson\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n       \u003cspan class=\"n\"\u003eSelectedPerson\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eperson\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eGo Backボタンが押されたら、IRegionNavigationJournal.GoBack() により、最初のViewModelに戻る。\u003cbr\u003e\nここでも INavigationAware.OnNavigatedTo()  で IRegionNavigationJournal を取得し、Forward に使用する。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eDelegateCommand\u003c/span\u003e \u003cspan class=\"n\"\u003eGoForwardCommand\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003ePersonListViewModel\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eIRegionManager\u003c/span\u003e \u003cspan class=\"n\"\u003eregionManager\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n   \u003cspan class=\"n\"\u003e_regionManager\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eregionManager\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n   \u003cspan class=\"n\"\u003ePersonSelectedCommand\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eDelegateCommand\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003ePerson\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"n\"\u003ePersonSelected\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n   \u003cspan class=\"nf\"\u003eCreatePeople\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n   \u003cspan class=\"n\"\u003eGoForwardCommand\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eDelegateCommand\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eGoForward\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eCanGoForward\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eGoForward\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003e_journal\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eGoForward\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"nf\"\u003eCanGoForward\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003e_journal\u003c/span\u003e \u003cspan class=\"p\"\u003e!=\u003c/span\u003e \u003cspan class=\"k\"\u003enull\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e \u003cspan class=\"n\"\u003e_journal\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eCanGoForward\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eOnNavigatedTo\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eNavigationContext\u003c/span\u003e \u003cspan class=\"n\"\u003enavigationContext\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n   \u003cspan class=\"n\"\u003e_journal\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003enavigationContext\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eNavigationService\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eJournal\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n   \u003cspan class=\"n\"\u003eGoForwardCommand\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eRaiseCanExecuteChanged\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"25-notificationrequest-\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#25-notificationrequest-\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e25-NotificationRequest ○\u003c/h2\u003e\n\n\u003cp\u003eポップアップウィンドウ（OKのみ）を表示するサンプル\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"実行-27\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AE%9F%E8%A1%8C-27\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e実行\u003c/h3\u003e\n\n\u003cp\u003eボタンが1つ配置されており、クリックするとポップアップウィンドウが表示される。\u003cbr\u003e\nポップアップウィンドウの OK ボタンを押すと、タイトル文字列が変化する。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"内容-27\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%86%85%E5%AE%B9-27\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e内容\u003c/h3\u003e\n\n\u003cp\u003eポップアップウィンドウ（OKボタンのみ）を出す方法\u003c/p\u003e\n\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003eViewModel に InteractionRequest\u0026lt;INotification\u0026gt;  プロパティを定義し、Buttonコマンドなどをトリガにして Raise() する。\u003cbr\u003e\nRaise() は Action\u0026lt;T\u0026gt; で callback を指定できるので、OKボタン押下後の処理はそちらで行う。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eInteractionRequest\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eINotification\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eNotificationRequest\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eInteractionRequest\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eINotification\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;();\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eDelegateCommand\u003c/span\u003e \u003cspan class=\"n\"\u003eNotificationCommand\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003eMainWindowViewModel\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eNotificationCommand\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eDelegateCommand\u003c/span\u003e\u003cspan class=\"p\"\u003e(()\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eNotificationRequest\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eRaise\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n            \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eNotification\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"n\"\u003eContent\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"Notification Message\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                \u003cspan class=\"n\"\u003eTitle\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"Notification\"\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e},\u003c/span\u003e\n            \u003cspan class=\"n\"\u003er\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eTitle\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"Notified\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e});\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003examl側にも下記対応が必要\u003c/p\u003e\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003cul\u003e\n\u003cli\u003eIsModal：ポップアップ表示後に親ウィンドウの操作を禁止する\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eCenterOverAssociatedObject：ポップアップウィンドウを親ウィンドウの中央に表示する\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"xml\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"nt\"\u003e\u0026lt;i:Interaction.Triggers\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;prism:InteractionRequestTrigger\u003c/span\u003e\n            \u003cspan class=\"na\"\u003eSourceObject=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"{Binding NotificationRequest}\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"nt\"\u003e\u0026lt;prism:PopupWindowAction\u003c/span\u003e \u003cspan class=\"na\"\u003eIsModal=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"True\"\u003c/span\u003e\n            \u003cspan class=\"na\"\u003eCenterOverAssociatedObject=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"True\"\u003c/span\u003e \u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;/prism:InteractionRequestTrigger\u0026gt;\u003c/span\u003e\n\u003cspan class=\"nt\"\u003e\u0026lt;/i:Interaction.Triggers\u0026gt;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"26-confirmationrequest-\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#26-confirmationrequest-\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e26-ConfirmationRequest ○\u003c/h2\u003e\n\n\u003cp\u003eポップアップウィンドウ（OK/Cancel）を表示するサンプル\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"実行-28\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AE%9F%E8%A1%8C-28\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e実行\u003c/h3\u003e\n\n\u003cp\u003e25-NotificationRequest に、OK/Cancel 形式のポップアップウィンドウを表示するボタンが追加されたサンプル。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"内容-28\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%86%85%E5%AE%B9-28\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e内容\u003c/h3\u003e\n\n\u003cp\u003eポップアップウィンドウ（OK/Cancelボタン）を出す方法\u003c/p\u003e\n\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003eViewModel対応\u003cbr\u003e\n25-NotificationRequest とほぼ同じ。OK/Cancelは Confirmed(bool型) で取得できる。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eInteractionRequest\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eIConfirmation\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eConfirmationRequest\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n   \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eInteractionRequest\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eIConfirmation\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;();\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eDelegateCommand\u003c/span\u003e \u003cspan class=\"n\"\u003eConfirmationCommand\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003eMainWindowViewModel\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n   \u003cspan class=\"n\"\u003eConfirmationCommand\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eDelegateCommand\u003c/span\u003e\u003cspan class=\"p\"\u003e(()\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e\n       \u003cspan class=\"n\"\u003eConfirmationRequest\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eRaise\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n           \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eConfirmation\u003c/span\u003e\n           \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n               \u003cspan class=\"n\"\u003eTitle\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"Confirmation\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n               \u003cspan class=\"n\"\u003eContent\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"Confirmation Message\"\u003c/span\u003e\n           \u003cspan class=\"p\"\u003e},\u003c/span\u003e\n           \u003cspan class=\"n\"\u003er\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eTitle\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003er\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eConfirmed\u003c/span\u003e \u003cspan class=\"p\"\u003e?\u003c/span\u003e \u003cspan class=\"s\"\u003e\"Confirmed\"\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"s\"\u003e\"Not Confirmed\"\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003examl対応\u003cbr\u003e\n先ほどと全く同じ。SourceObjectの指定を変えているだけ。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"xml\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"nt\"\u003e\u0026lt;i:Interaction.Triggers\u0026gt;\u003c/span\u003e\n   \u003cspan class=\"nt\"\u003e\u0026lt;prism:InteractionRequestTrigger\u003c/span\u003e\n       \u003cspan class=\"na\"\u003eSourceObject=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"{Binding ConfirmationRequest}\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e\n       \u003cspan class=\"nt\"\u003e\u0026lt;prism:PopupWindowAction\u003c/span\u003e \u003cspan class=\"na\"\u003eIsModal=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"True\"\u003c/span\u003e\n           \u003cspan class=\"na\"\u003eCenterOverAssociatedObject=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"True\"\u003c/span\u003e \u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n   \u003cspan class=\"nt\"\u003e\u0026lt;/prism:InteractionRequestTrigger\u0026gt;\u003c/span\u003e\n\u003cspan class=\"nt\"\u003e\u0026lt;/i:Interaction.Triggers\u0026gt;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"27-customcontent-\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#27-customcontent-\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e27-CustomContent ○\u003c/h2\u003e\n\n\u003cp\u003eポップアップウィンドウ（自作View）を表示するサンプル\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"実行-29\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AE%9F%E8%A1%8C-29\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e実行\u003c/h3\u003e\n\n\u003cp\u003e26-ConfirmationRequest に、カスタムポップアップを表示するボタンが追加されたサンプル。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"内容-29\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%86%85%E5%AE%B9-29\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e内容\u003c/h3\u003e\n\n\u003cp\u003eカスタムポップアップを出す方法\u003c/p\u003e\n\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003eViewModel対応\u003cbr\u003e\n26-ConfirmationRequest とほぼ同じ。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eInteractionRequest\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eINotification\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eCustomPopupRequest\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eInteractionRequest\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eINotification\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;();\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eDelegateCommand\u003c/span\u003e \u003cspan class=\"n\"\u003eCustomPopupCommand\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003eMainWindowViewModel\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eCustomPopupCommand\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eDelegateCommand\u003c/span\u003e\u003cspan class=\"p\"\u003e(()\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eCustomPopupRequest\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eRaise\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n            \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eNotification\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"n\"\u003eTitle\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"Custom Popup\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                \u003cspan class=\"n\"\u003eContent\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"Custom Popup Message \"\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e},\u003c/span\u003e \u003cspan class=\"n\"\u003er\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eTitle\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"Good to go\"\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003examl対応\u003cbr\u003e\nPopupWindowAction.WindowContent に、自作UserControl (CustomPopupView) を指定する。\u003cbr\u003e\nポップアップウィンドウの初期サイズなどは、PopupWindowAction.WindowStyle から指定できます。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"xml\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"nt\"\u003e\u0026lt;prism:InteractionRequestTrigger\u003c/span\u003e\n       \u003cspan class=\"na\"\u003eSourceObject=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"{Binding CustomPopupRequest}\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e\n   \u003cspan class=\"nt\"\u003e\u0026lt;prism:PopupWindowAction\u003c/span\u003e \u003cspan class=\"na\"\u003eIsModal=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"True\"\u003c/span\u003e\n           \u003cspan class=\"na\"\u003eCenterOverAssociatedObject=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"True\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"nt\"\u003e\u0026lt;prism:PopupWindowAction.WindowStyle\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"nt\"\u003e\u0026lt;Style\u003c/span\u003e \u003cspan class=\"na\"\u003eTargetType=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Window\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e\n                \u003cspan class=\"nt\"\u003e\u0026lt;Setter\u003c/span\u003e \u003cspan class=\"na\"\u003eProperty=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Width\"\u003c/span\u003e \u003cspan class=\"na\"\u003eValue=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"400\"\u003c/span\u003e \u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n                \u003cspan class=\"nt\"\u003e\u0026lt;Setter\u003c/span\u003e \u003cspan class=\"na\"\u003eProperty=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Height\"\u003c/span\u003e \u003cspan class=\"na\"\u003eValue=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"200\"\u003c/span\u003e \u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"nt\"\u003e\u0026lt;/Style\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"nt\"\u003e\u0026lt;/prism:PopupWindowAction.WindowStyle\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"nt\"\u003e\u0026lt;prism:PopupWindowAction.WindowContent\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"nt\"\u003e\u0026lt;views:CustomPopupView\u003c/span\u003e \u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"nt\"\u003e\u0026lt;/prism:PopupWindowAction.WindowContent\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;/prism:PopupWindowAction\u0026gt;\u003c/span\u003e\n\u003cspan class=\"nt\"\u003e\u0026lt;/prism:InteractionRequestTrigger\u0026gt;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"28-customrequest-\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#28-customrequest-\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e28-CustomRequest ○\u003c/h2\u003e\n\n\u003cp\u003eポップアップウィンドウ（自作Viewで結果を戻す）を表示するサンプル\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"実行-30\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AE%9F%E8%A1%8C-30\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e実行\u003c/h3\u003e\n\n\u003cp\u003eポップアップウィンドウで選択した情報を親ウィンドウに戻している。\u003cbr\u003e\nCancel（非選択）も判別できる。\u003cbr\u003e\nアイテム選択後に ×ボタンでウィンドウを閉じた場合も、ちゃんと Cancel として扱われる。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/b996a819de8d5bdafbac4c07934a90ce072af3fb/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3234393831362f61643633316665322d313731332d663335622d626463642d3864396566663437393639312e676966\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F249816%2Fad631fe2-1713-f35b-bdcd-8d9eff479691.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=68c5e0e0e0d6d28bf852297b528070e8\" alt=\"28-CustomRequest_View1.gif\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/249816/ad631fe2-1713-f35b-bdcd-8d9eff479691.gif\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F249816%2Fad631fe2-1713-f35b-bdcd-8d9eff479691.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=770ff7570858d4b7ebbdeb68c6a70817 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"内容-30\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%86%85%E5%AE%B9-30\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e内容\u003c/h3\u003e\n\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e親ウィンドウのViewModel対応\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eInteractionRequest\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eICustomNotification\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eCustomNotificationRequest\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n   \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eInteractionRequest\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eICustomNotification\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;();\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eDelegateCommand\u003c/span\u003e \u003cspan class=\"n\"\u003eCustomNotificationCommand\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003eMainWindowViewModel\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n   \u003cspan class=\"n\"\u003eCustomNotificationCommand\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eDelegateCommand\u003c/span\u003e\u003cspan class=\"p\"\u003e(()\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e\n       \u003cspan class=\"n\"\u003eCustomNotificationRequest\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eRaise\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n           \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eCustomNotification\u003c/span\u003e\n           \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n               \u003cspan class=\"n\"\u003eTitle\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"Custom Notification\"\u003c/span\u003e\n           \u003cspan class=\"p\"\u003e},\u003c/span\u003e\n           \u003cspan class=\"n\"\u003er\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e\n           \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n               \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003er\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eConfirmed\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e \u003cspan class=\"n\"\u003er\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eSelectedItem\u003c/span\u003e \u003cspan class=\"p\"\u003e!=\u003c/span\u003e \u003cspan class=\"k\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n                   \u003cspan class=\"n\"\u003eTitle\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e$\"User selected: \u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003er\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eSelectedItem\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n               \u003cspan class=\"k\"\u003eelse\u003c/span\u003e\n                   \u003cspan class=\"n\"\u003eTitle\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"User cancelled or didn't select an item\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n           \u003cspan class=\"p\"\u003e}));\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eInteractionRequest\u0026lt;T\u0026gt; の ICustomNotification がポイント。\u003c/p\u003e\n\n\u003cp\u003eICustomNotification は 自作クラスで（Prism名前空間でない）、26-ConfirmationRequest で出てきた Prism.Interactivity.InteractionRequest.IConfirmation を継承している。\u003c/p\u003e\n\n\u003cp\u003eSelectedItemプロパティだけを持っており、ポップアップウィンドウで選択されたアイテムを設定/取得できる。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003ePrism.Interactivity.InteractionRequest\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003enamespace\u003c/span\u003e \u003cspan class=\"nn\"\u003eUsingPopupWindowAction.Notifications\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n   \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003einterface\u003c/span\u003e \u003cspan class=\"nc\"\u003eICustomNotification\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eIConfirmation\u003c/span\u003e\n   \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n       \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003eSelectedItem\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"k\"\u003eset\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n   \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e親ウィンドウのView対応\u003c/p\u003e\n\n\u003cp\u003e27-CustomContent と同じ。ポップアップウィンドウの View 指定が異なるだけ\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"xml\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"nt\"\u003e\u0026lt;i:Interaction.Triggers\u0026gt;\u003c/span\u003e \n   \u003cspan class=\"nt\"\u003e\u0026lt;prism:InteractionRequestTrigger\u003c/span\u003e\n       \u003cspan class=\"na\"\u003eSourceObject=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"{Binding CustomNotificationRequest}\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e\n       \u003cspan class=\"nt\"\u003e\u0026lt;prism:PopupWindowAction\u003c/span\u003e\n           \u003cspan class=\"na\"\u003eIsModal=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"True\"\u003c/span\u003e\n           \u003cspan class=\"na\"\u003eCenterOverAssociatedObject=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"True\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e\n           \u003cspan class=\"nt\"\u003e\u0026lt;prism:PopupWindowAction.WindowContent\u0026gt;\u003c/span\u003e\n               \u003cspan class=\"nt\"\u003e\u0026lt;views:ItemSelectionView\u003c/span\u003e \u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n           \u003cspan class=\"nt\"\u003e\u0026lt;/prism:PopupWindowAction.WindowContent\u0026gt;\u003c/span\u003e\n       \u003cspan class=\"nt\"\u003e\u0026lt;/prism:PopupWindowAction\u0026gt;\u003c/span\u003e\n   \u003cspan class=\"nt\"\u003e\u0026lt;/prism:InteractionRequestTrigger\u0026gt;\u003c/span\u003e\n\u003cspan class=\"nt\"\u003e\u0026lt;/i:Interaction.Triggers\u0026gt;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e子ウィンドウのViewModel対応\u003c/p\u003e\n\n\u003cp\u003eViewModel は、Prism.Interactivity.InteractionRequest.IInteractionRequestAware を継承している。\u003c/p\u003e\n\n\u003cp\u003eポイントは、IInteractionRequestAware の Notificationプロパティを定義しつつ、バックフィールド(?) ではINotificationを継承した自作の ICustomNotification で受けている点やと思う。\u003c/p\u003e\n\n\u003cp\u003eプロパティとバックフィールドの型が異なる実装を初めて見たので勉強になった。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003eICustomNotification\u003c/span\u003e \u003cspan class=\"n\"\u003e_notification\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eINotification\u003c/span\u003e \u003cspan class=\"n\"\u003eNotification\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n   \u003cspan class=\"k\"\u003eget\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003e_notification\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n   \u003cspan class=\"k\"\u003eset\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"nf\"\u003eSetProperty\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003eref\u003c/span\u003e \u003cspan class=\"n\"\u003e_notification\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eICustomNotification\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"k\"\u003evalue\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e以下は、各ボタン(Select/Cancel)に応じたコマンド\u003c/p\u003e\n\n\u003cp\u003e情報の設定後に IInteractionRequestAware インターフェースの Actionである FinishInteraction を実行することで、ポップアップウィンドウを閉じている。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003eItemSelectionViewModel\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n   \u003cspan class=\"n\"\u003eSelectItemCommand\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eDelegateCommand\u003c/span\u003e\u003cspan class=\"p\"\u003e(()\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e\n   \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n       \u003cspan class=\"n\"\u003e_notification\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eSelectedItem\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eSelectedItem\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n       \u003cspan class=\"n\"\u003e_notification\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eConfirmed\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n       \u003cspan class=\"n\"\u003eFinishInteraction\u003c/span\u003e\u003cspan class=\"p\"\u003e?.\u003c/span\u003e\u003cspan class=\"nf\"\u003eInvoke\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n   \u003cspan class=\"p\"\u003e});\u003c/span\u003e\n   \u003cspan class=\"n\"\u003eCancelCommand\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eDelegateCommand\u003c/span\u003e\u003cspan class=\"p\"\u003e(()\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e\n   \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n       \u003cspan class=\"n\"\u003e_notification\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eSelectedItem\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n       \u003cspan class=\"n\"\u003e_notification\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eConfirmed\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003efalse\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n       \u003cspan class=\"n\"\u003eFinishInteraction\u003c/span\u003e\u003cspan class=\"p\"\u003e?.\u003c/span\u003e\u003cspan class=\"nf\"\u003eInvoke\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n   \u003cspan class=\"p\"\u003e});\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e子ウィンドウのView対応\u003c/p\u003e\n\n\u003cp\u003e見た目通りの実装なので割愛。\u003c/p\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"automationpropertiesautomationid\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#automationpropertiesautomationid\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eAutomationProperties.AutomationId\u003c/h4\u003e\n\n\u003cp\u003eViewでちらっと出てきたのでメモ。\u003c/p\u003e\n\n\u003cp\u003eAutomationProperties.AutomationIdは、UIコントロールを一意に識別するためのIDのようです。\u003c/p\u003e\n\n\u003cp\u003e検索すると色々ヒットしましたが、Microsoft Docs以外の日本語解説が見つからず…\u003c/p\u003e\n\n\u003cp\u003e\u003cdel\u003eMicrosoft Docsって少し理解してる状態で読まないと、理解できないイメージがあり敬遠しちゃう…\u003c/del\u003e\u003c/p\u003e\n\n\u003cp\u003ePrism機能ではないので今回は置いときます。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"xml\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"nt\"\u003e\u0026lt;Button\u003c/span\u003e \u003cspan class=\"na\"\u003eAutomationProperties.AutomationId=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"ItemsSelectButton\"\u003c/span\u003e\n        \u003cspan class=\"na\"\u003eCommand=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"{Binding SelectItemCommand}\"\u003c/span\u003e\n        \u003cspan class=\"na\"\u003eContent=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Select Item\"\u003c/span\u003e \u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n\u003cspan class=\"nt\"\u003e\u0026lt;Button\u003c/span\u003e \u003cspan class=\"na\"\u003eAutomationProperties.AutomationId=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"ItemsCancelButton\"\u003c/span\u003e\n        \u003cspan class=\"na\"\u003eCommand=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"{Binding CancelCommand}\"\u003c/span\u003e\n        \u003cspan class=\"na\"\u003eContent=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Cancel\"\u003c/span\u003e \u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"29-invokecommandaction-\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#29-invokecommandaction-\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e29-InvokeCommandAction ○\u003c/h2\u003e\n\n\u003cp\u003eUserControlのEventトリガでコマンドを実行するサンプル\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"実行-31\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AE%9F%E8%A1%8C-31\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e実行\u003c/h3\u003e\n\n\u003cp\u003eListBoxが表示されており、選択したアイテム名が下部に表示される。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/bb4789fbe2e40d789b07a091730a9313dc554d79/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3234393831362f65613831396434392d616261352d363632662d383264392d3665353934346364346561312e676966\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F249816%2Fea819d49-aba5-662f-82d9-6e5944cd4ea1.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=bd16d9a5144b5d4ab6f31ed5a18cf205\" alt=\"29-InvokeCommandAction_View1.gif\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/249816/ea819d49-aba5-662f-82d9-6e5944cd4ea1.gif\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F249816%2Fea819d49-aba5-662f-82d9-6e5944cd4ea1.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=ebee3fe8a86a67757d05ba3f1d9db1cf 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"内容-31\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%86%85%E5%AE%B9-31\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e内容\u003c/h3\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"invokecommandaction\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#invokecommandaction\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eInvokeCommandAction\u003c/h4\u003e\n\n\u003cp\u003eView の InvokeCommandAction によって、ListBox の SelectionChanged 時に ViewModelのコマンドを実行している。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"xml\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"nt\"\u003e\u0026lt;ListBox\u003c/span\u003e \u003cspan class=\"na\"\u003eItemsSource=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"{Binding Items}\"\u003c/span\u003e\n         \u003cspan class=\"na\"\u003eSelectionMode=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Single\"\u003c/span\u003e \u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;i:Interaction.Triggers\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"nt\"\u003e\u0026lt;i:EventTrigger\u003c/span\u003e \u003cspan class=\"na\"\u003eEventName=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"SelectionChanged\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"nt\"\u003e\u0026lt;prism:InvokeCommandAction\u003c/span\u003e \u003cspan class=\"na\"\u003eCommand=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"{Binding SelectedCommand}\"\u003c/span\u003e\n                                       \u003cspan class=\"na\"\u003eTriggerParameterPath=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"AddedItems\"\u003c/span\u003e \u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"nt\"\u003e\u0026lt;/i:EventTrigger\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;/i:Interaction.Triggers\u0026gt;\u003c/span\u003e\n\u003cspan class=\"nt\"\u003e\u0026lt;/ListBox\u0026gt;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eTriggerParameterPath で指定されている AddedItems は、SelectionChangedEventArgsクラスのプロパティで、選択された項目を含むリストが格納されている。\u003c/p\u003e\n\n\u003cp\u003eサンプルでは ListBox の SelectionMode が Single なので、AddedItems は長さ1の配列となるが、SelectionMode を Extended にして Shiftボタン＋クリックなどで複数アイテムを選択すると、選択分のアイテム配列となる。\u003c/p\u003e\n\n\u003cp\u003eViewModel の DelegateCommand、配列先頭の要素名を表示している。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"c1\"\u003e// This command will be executed when the selection of the ListBox in the view changes.\u003c/span\u003e\n\u003cspan class=\"n\"\u003eSelectedCommand\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eDelegateCommand\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eobject\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"k\"\u003e]\u0026gt;\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"p\"\u003e!=\u003c/span\u003e \u003cspan class=\"k\"\u003enull\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eCount\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eSelectedItemText\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eFirstOrDefault\u003c/span\u003e\u003cspan class=\"p\"\u003e().\u003c/span\u003e\u003cspan class=\"nf\"\u003eToString\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e});\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"最後に\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%9C%80%E5%BE%8C%E3%81%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e最後に\u003c/h2\u003e\n\n\u003cp\u003e全部で32項目もあったが『Prismは任せろ！』までの理解度にはならなかった。\u003c/p\u003e\n\n\u003cp\u003e学習開始前から、モジュールのDisposeについて知りたいと思っていたが、サンプルでは出てこなかった。\u003c/p\u003e\n\n\u003cp\u003e基本的な操作（子モジュールの配置、画面遷移、ポップアップ）については知れたので、何となくは使えそう。\u003cbr\u003e\n出力しつつ勉強していこうと思う。\u003c/p\u003e\n\n\u003cp\u003eQiitaのおかげで、Markdownの書き方を学べた。\u003c/p\u003e\n","createdAt":"2019-01-14T09:52:07Z","elapsedYearsFromLastModifiedAt":2,"encryptedId":"JwAjqXl2KVYMBqKH+I9PdvkTRupcywcu--RmIrf5LFtzqEWGQN--1EgZnZsQlEglF/iJGBAOlw==","isBanned":false,"isDeprecated":true,"isDestroyableByViewer":false,"isEditRequestReadableByViewer":true,"isEditRequestSendableByViewer":true,"isLikableByViewer":true,"isLikedByViewer":false,"isPublic":true,"isSlide":false,"isStockableByViewer":true,"isStockedByViewer":false,"isSubscribableByViewer":false,"isSubscribedByViewer":false,"isUpdatableByViewer":false,"isUpdated":true,"lastModifiedAt":"2019-02-03T04:31:07Z","likesCount":32,"linkUrl":"https://qiita.com/myoga/items/5d883d1bc61819f750c4","organization":null,"originalId":765481,"stockedCount":33,"title":"Prism-Samples-Wpfの勉強メモ","toc":"\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#prism-samples-wpf-%E3%81%AE%E5%8B%89%E5%BC%B7%E3%83%A1%E3%83%A2\"\u003ePrism-Samples-Wpf の勉強メモ\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E7%B5%8C%E7%B7%AF\"\u003e経緯\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#01-bootstrappershell-\"\u003e01-BootstrapperShell ○\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AE%9F%E8%A1%8C\"\u003e実行\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%86%85%E5%AE%B9\"\u003e内容\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#02-regions-\"\u003e02-Regions ◎\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AE%9F%E8%A1%8C-1\"\u003e実行\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%86%85%E5%AE%B9-1\"\u003e内容\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#03-customregions-\"\u003e03-CustomRegions ×\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AE%9F%E8%A1%8C-2\"\u003e実行\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%86%85%E5%AE%B9-2\"\u003e内容\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#04-viewdiscovery-\"\u003e04-ViewDiscovery ◎\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AE%9F%E8%A1%8C-3\"\u003e実行\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%86%85%E5%AE%B9-3\"\u003e内容\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#05-viewinjection-\"\u003e05-ViewInjection ◎\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AE%9F%E8%A1%8C-4\"\u003e実行\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%86%85%E5%AE%B9-4\"\u003e内容\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#06-viewactivationdeactivation-\"\u003e06-ViewActivationDeactivation ○\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AE%9F%E8%A1%8C-5\"\u003e実行\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%86%85%E5%AE%B9-5\"\u003e内容\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#07-modules---appconfig-\"\u003e07-Modules - AppConfig △\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AE%9F%E8%A1%8C-6\"\u003e実行\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%86%85%E5%AE%B9-6\"\u003e内容\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E8%A6%AA%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB-07-modules-%E5%85%B1%E9%80%9A\"\u003e親モジュール 07-Modules 共通\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AD%90%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB%E5%81%B4\"\u003e子モジュール側\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E8%A6%AA%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB%E5%81%B4\"\u003e親モジュール側\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#07-modules---code-\"\u003e07-Modules - Code ◎\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AE%9F%E8%A1%8C-7\"\u003e実行\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%86%85%E5%AE%B9-7\"\u003e内容\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AD%90%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB%E5%81%B4-1\"\u003e子モジュール側\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E8%A6%AA%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB%E5%81%B4-1\"\u003e親モジュール側\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#07-modules---directory-\"\u003e07-Modules - Directory ◎\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AE%9F%E8%A1%8C-8\"\u003e実行\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%86%85%E5%AE%B9-8\"\u003e内容\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AD%90%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB%E5%81%B4-2\"\u003e子モジュール側\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E8%A6%AA%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB%E5%81%B4-2\"\u003e親モジュール側\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#07-modules---loadmanual-\"\u003e07-Modules - LoadManual ◎\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AE%9F%E8%A1%8C-9\"\u003e実行\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%86%85%E5%AE%B9-9\"\u003e内容\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AD%90%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB%E5%81%B4-3\"\u003e子モジュール側\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E8%A6%AA%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB%E5%81%B4-3\"\u003e親モジュール側\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#08-viewmodellocator-\"\u003e08-ViewModelLocator ◎\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AE%9F%E8%A1%8C-10\"\u003e実行\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%86%85%E5%AE%B9-10\"\u003e内容\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#viewmodel\"\u003eViewModel\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#09-changeconvention-\"\u003e09-ChangeConvention ○\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AE%9F%E8%A1%8C-11\"\u003e実行\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%86%85%E5%AE%B9-11\"\u003e内容\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#10-customregistrations-\"\u003e10-CustomRegistrations ○\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AE%9F%E8%A1%8C-12\"\u003e実行\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%86%85%E5%AE%B9-12\"\u003e内容\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#11-usingdelegatecommands-\"\u003e11-UsingDelegateCommands ○\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AE%9F%E8%A1%8C-13\"\u003e実行\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%86%85%E5%AE%B9-13\"\u003e内容\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#12-usingcompositecommands-\"\u003e12-UsingCompositeCommands △\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AE%9F%E8%A1%8C-14\"\u003e実行\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%B3%E3%83%B3%E3%83%88%E3%83%AD%E3%83%BC%E3%83%AB%E3%81%AEenable\"\u003eコントロールのEnable\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%9C%E3%82%BF%E3%83%B3%E3%82%AF%E3%83%AA%E3%83%83%E3%82%AF\"\u003eボタンクリック\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%86%85%E5%AE%B9-14\"\u003e内容\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#tabcontrol%E3%81%B8%E3%81%AE%E5%AD%90%E8%A6%81%E7%B4%A0%E3%81%AE%E7%99%BB%E9%8C%B2%E6%96%B9%E6%B3%95\"\u003eTabControlへの子要素の登録方法\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#compositecommand\"\u003eCompositeCommand\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#13-iactiveawarecommands-\"\u003e13-IActiveAwareCommands △\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AE%9F%E8%A1%8C-15\"\u003e実行\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%86%85%E5%AE%B9-15\"\u003e内容\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#14-usingeventaggregator-\"\u003e14-UsingEventAggregator ○\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AE%9F%E8%A1%8C-16\"\u003e実行\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%86%85%E5%AE%B9-16\"\u003e内容\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%85%B1%E9%80%9A%E9%83%A8\"\u003e共通部\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E8%A6%AA%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB\"\u003e親モジュール\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AD%90%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB%E5%B7%A6%E6%83%85%E5%A0%B1%E7%99%BA%E8%A1%8C%E5%81%B4\"\u003e子モジュール（左：情報発行側）\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AD%90%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB%E5%8F%B3%E6%83%85%E5%A0%B1%E5%8F%96%E5%BE%97%E5%81%B4\"\u003e子モジュール（右：情報取得側）\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#15-filteringevents-\"\u003e15-FilteringEvents ○\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AE%9F%E8%A1%8C-17\"\u003e実行\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%86%85%E5%AE%B9-17\"\u003e内容\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AD%90%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB%E5%8F%B3%E6%83%85%E5%A0%B1%E5%8F%96%E5%BE%97%E5%81%B4-1\"\u003e子モジュール（右：情報取得側）\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#16-regioncontext-\"\u003e16-RegionContext ○\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AE%9F%E8%A1%8C-18\"\u003e実行\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%86%85%E5%AE%B9-18\"\u003e内容\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E8%A6%AA%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB-1\"\u003e親モジュール\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AD%90%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB\"\u003e子モジュール\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#17-basicregionnavigation-\"\u003e17-BasicRegionNavigation ○\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AE%9F%E8%A1%8C-19\"\u003e実行\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%86%85%E5%AE%B9-19\"\u003e内容\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AD%90%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB-1\"\u003e子モジュール\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E8%A6%AA%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB-2\"\u003e親モジュール\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#18-navigationcallback-\"\u003e18-NavigationCallback ○\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AE%9F%E8%A1%8C-20\"\u003e実行\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%86%85%E5%AE%B9-20\"\u003e内容\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E8%A6%AA%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB-3\"\u003e親モジュール\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#19-navigationparticipation-\"\u003e19-NavigationParticipation ○\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AE%9F%E8%A1%8C-21\"\u003e実行\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%86%85%E5%AE%B9-21\"\u003e内容\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E8%A6%AA%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB-4\"\u003e親モジュール\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AD%90%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB-2\"\u003e子モジュール\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#20-navigatetoexistingviews-\"\u003e20-NavigateToExistingViews ○\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AE%9F%E8%A1%8C-22\"\u003e実行\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%86%85%E5%AE%B9-22\"\u003e内容\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#21-passingparameters-\"\u003e21-PassingParameters △\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AE%9F%E8%A1%8C-23\"\u003e実行\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%86%85%E5%AE%B9-23\"\u003e内容\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E8%A6%AA%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB-5\"\u003e親モジュール\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AD%90%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB-3\"\u003e子モジュール\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#22-confirmcancelnavigation-\"\u003e22-ConfirmCancelNavigation ○\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AE%9F%E8%A1%8C-24\"\u003e実行\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%86%85%E5%AE%B9-24\"\u003e内容\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E8%A6%AA%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB-6\"\u003e親モジュール\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AD%90%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB-4\"\u003e子モジュール\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#23-regionmemberlifetime-\"\u003e23-RegionMemberLifetime ○\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AE%9F%E8%A1%8C-25\"\u003e実行\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%86%85%E5%AE%B9-25\"\u003e内容\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E8%A6%AA%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB-7\"\u003e親モジュール\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#region%E3%81%ABview%E3%81%8C%E8%BF%BD%E5%8A%A0%E3%81%95%E3%82%8C%E3%81%9F%E9%9A%9B%E3%81%AE%E5%87%A6%E7%90%86\"\u003eRegionにViewが追加された際の処理\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AD%90%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB-5\"\u003e子モジュール\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#24-navigationjournal-\"\u003e24-NavigationJournal ○\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AE%9F%E8%A1%8C-26\"\u003e実行\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%86%85%E5%AE%B9-26\"\u003e内容\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E8%A6%AA%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB-8\"\u003e親モジュール\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AD%90%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB-6\"\u003e子モジュール\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#25-notificationrequest-\"\u003e25-NotificationRequest ○\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AE%9F%E8%A1%8C-27\"\u003e実行\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%86%85%E5%AE%B9-27\"\u003e内容\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#26-confirmationrequest-\"\u003e26-ConfirmationRequest ○\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AE%9F%E8%A1%8C-28\"\u003e実行\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%86%85%E5%AE%B9-28\"\u003e内容\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#27-customcontent-\"\u003e27-CustomContent ○\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AE%9F%E8%A1%8C-29\"\u003e実行\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%86%85%E5%AE%B9-29\"\u003e内容\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#28-customrequest-\"\u003e28-CustomRequest ○\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AE%9F%E8%A1%8C-30\"\u003e実行\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%86%85%E5%AE%B9-30\"\u003e内容\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#29-invokecommandaction-\"\u003e29-InvokeCommandAction ○\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AE%9F%E8%A1%8C-31\"\u003e実行\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%86%85%E5%AE%B9-31\"\u003e内容\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#invokecommandaction\"\u003eInvokeCommandAction\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E6%9C%80%E5%BE%8C%E3%81%AB\"\u003e最後に\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\n\n","totalPv":18633,"uuid":"5d883d1bc61819f750c4","banReason":null,"adventCalendarItem":null,"author":{"encryptedId":"e5XOF0vcZeCIu6nIhMtacJ5iUzrb--J0z+mmm1BqSrMJtW--HOCe41RcxozS88Ey91433w==","originalId":249816,"description":".NET開発に憧れる組み込み技術者です。","facebookUrl":null,"githubUrl":"https://github.com/hsytkm","isBlockingViewer":false,"isFollowableByViewer":true,"isFollowedByViewer":false,"isTweetWebNotificationReceivable":true,"linkedinUrl":null,"name":"","profileImageUrl":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/249816/profile-images/1557637252","profileImageUrlW48":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F249816%2Fprofile-images%2F1557637252?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=48\u0026s=f7135980f1b3c34e3fc90df8eb95fe8f","profileImageUrlW75":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F249816%2Fprofile-images%2F1557637252?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=f03125ab73b3c40f6193ac2d5f0298c7","urlName":"myoga","websiteUrl":"","twitterUrl":null,"twitterUrlName":null,"revealedOrganizations":{"edges":[]}},"tags":[{"name":"C#","urlName":"csharp"},{"name":"Xaml","urlName":"xaml"},{"name":"PRISM","urlName":"prism"}],"followingLikers":{"edges":[]},"comments":{"totalCount":0}},"comments":[],"client":null,"ads_event_emitter":null}}</script>
