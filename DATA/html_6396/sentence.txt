More than 3 years have passed since last update.試作ゲームでユーザーデータをローカルにファイル保存することにしたため、そのためのクラスを作ってみました。暗号化なし版と暗号化あり版です。
インスタンスをシリアライズし → 圧縮し → (暗号化し → )ファイルに保存 します。ちなみに公式のPlayerPrefsを使わなかったのは、オブジェクトをまるっと保存する用途には向かなさそうに思えたためです。GZip圧縮用に、DotNetZipのライブラリIonic.Zlib.CF.dll を、Asset以下の適当なディレクトリに保存しておきます。今回は \DotNetZipLib-DevKit-v1.9\zlib-v1.9-CompactFramework\Release\Ionic.Zlib.CF.dll を利用しました。まずは暗号化なし版から記載します。
インスタンスのシリアライズ・圧縮・保存を行うクラスです。チートしたくば存分にするがよいと言わんばかりのファイル名となりますが、開発中はデバッグしやすいこちらのほうが楽と思われます。
また、あとで差し替えるため、インターフェイスを切っています。それがこちら。次に、上述のコードに暗号化を加えたバージョンがこちらです。尚、暗号化の箇所は下記の記事とサンプルを参考にさせて頂きました。最後に、動作確認に使ったテストコードがこちらとなります。
Windows上のUnityで、Editor Tests Runnerから動作させました。ちゃんとファイルが残っています。
以上。


