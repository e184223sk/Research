<!DOCTYPE html><html><head><meta charset="utf-8" /><title>【昔話】ETロボコン 2007年向けシミュレーター開発の記録【アーカイブ】 - Qiita</title><meta content="width=device-width,initial-scale=1,shrink-to-fit=no,viewport-fit=cover" name="viewport" /><meta content="#55c500" name="theme-color" /><meta content="XWpkTG32-_C4joZoJ_UsmDUi-zaH-hcrjF6ZC_FoFbk" name="google-site-verification" /><meta content="telephone=no" name="format-detection" /><link rel="canonical" href="https://qiita.com/riversun/items/61b7e1050aa3ec9fff7c" /><link href="/manifest.json" rel="manifest" /><link href="/opensearch.xml" rel="search" title="Qiita" type="application/opensearchdescription+xml" /><link as="script" href="https://www.googletagservices.com/tag/js/gpt.js" rel="preload" /><link href="https://securepubads.g.doubleclick.net" rel="preconnect" /><script async="" src="https://www.googletagservices.com/tag/js/gpt.js"></script><meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="3RXQ3nvmZPZfg7jIhOy/ZvhntAO2ljuEKJbyPXrLuVLZ1N3Yu8FQmuCEK8SZm8TBzjren0y2TRaMiHGk1PkwEA==" /><link rel="shortcut icon" type="image/x-icon" href="https://cdn.qiita.com/assets/favicons/public/production-c620d3e403342b1022967ba5e3db1aaa.ico" /><link rel="apple-touch-icon" type="image/png" href="https://cdn.qiita.com/assets/favicons/public/apple-touch-icon-ec5ba42a24ae923f16825592efdc356f.png" /><link rel="stylesheet" media="all" href="https://cdn.qiita.com/assets/public/article-2eaa7dbedc42a8ea65c722cda46d0ebb.min.css" /><script src="https://cdn.qiita.com/assets/public/v3-article-bundle-63de2d91fef827269d3f6b958db2335b.min.js" defer="defer"></script><meta name="twitter:card" content="summary_large_image"><meta content="@Qiita" name="twitter:site" /><meta property="og:type" content="article"><meta property="og:title" content="【昔話】ETロボコン 2007年向けシミュレーター開発の記録【アーカイブ】 - Qiita"><meta property="og:image" content="https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0&amp;w=1200&amp;mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND00NENRNXBpVTZLbXg0NENSUlZUamc2M2pnNXpqZ3JQamc3TWdNakF3Ti1XNXRPV1FrZU9Ca2VPQ3QtT0RuLU9EcGVPRHJPT0R2T09Ddi1PRHZPbVdpLWVadXVPQnJ1aW9tT21Nc3VPQWtPT0NvdU9Edk9PQ3EtT0NwT09EbHVPQWtRJnR4dC1jb2xvcj0lMjMzMzMmdHh0LWZvbnQ9SGlyYWdpbm8lMjBTYW5zJTIwVzYmdHh0LXNpemU9NTQmdHh0LWNsaXA9ZWxsaXBzaXMmdHh0LWFsaWduPWNlbnRlciUyQ21pZGRsZSZzPWQ3ZjA2YWQxOGJlZTU5MjdmYzYxZDgzY2JkODUzZjU5&amp;mark-align=center%2Cmiddle&amp;blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RSEpwZG1WeWMzVnUmdHh0LWNvbG9yPSUyMzMzMyZ0eHQtZm9udD1IaXJhZ2lubyUyMFNhbnMlMjBXNiZ0eHQtc2l6ZT00NSZ0eHQtYWxpZ249cmlnaHQlMkNib3R0b20mcz1mOTcwZjk4N2IxY2E0MzE1ZTE2ZmE1MDY4Y2E5NWIxNA&amp;blend-align=center%2Cmiddle&amp;blend-mode=normal&amp;s=145aedd50e413ee158897f0abcc3e83d"><meta property="og:description" content="本投稿は10年以上前のブログ記事が元になっているため、技術の情報が古いです。ご注意ください


概要



ETロボコン 2007用のシミュレーターを開発したときの記録です（参戦記を兼ねる）
まだ 気軽なUnityも、気軽な物理シミュ..."><meta content="https://qiita.com/riversun/items/61b7e1050aa3ec9fff7c" property="og:url" /><meta content="Qiita" property="og:site_name" /><meta content="564524038" property="fb:admins" /><meta content="C++,C#,ETロボコン" name="keywords" /><script>!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window, document,'script',
'https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '668972150489891');
fbq('track', 'PageView');</script><style data-emotion-css="17jxvjw 11t2ec1 1dvr2p8 18lkoru 1g4cku8 1iupg5d ijvq0v 15cocm3 12rp90f 115f4t 1b8uj5v 79elbk 16hhh7b fcbn8c 1gj7nt 154zy0m yikrym 1jqivyb 1ode1bp le4d8r 1hbd3g7 1nzh4zz 38fzdi helsa7 8qb8m4 2imjyh he5w1s 70qvj9 3ojehk 100alwu 1dtnjt5 10ougpm 1ay9vb9 m19uds cgzq40 1wa99t2 1l3zk9f 4czcte 1yzj1fm 1uv1qiv 109dbrr 5jpx49 mnxgyc 1vlpknv fsjkhv 1b17vb0 7i7f4d"}>.css-17jxvjw{display:grid;display:-ms-grid;grid-template-columns:80px minmax(0,1fr) 300px;-ms-grid-columns:80px minmax(0,1fr) 300px;grid-template-rows:minmax(270px,auto) 1fr;-ms-grid-rows:minmax(270px,auto) 1fr;max-width:1280px;margin-right:auto;margin-left:auto;padding-top:24px;padding-right:24px;padding-left:24px;}@media (max-width:1200px){.css-17jxvjw{padding-bottom:0;padding-left:0;padding-right:0;}}@media (max-width:992px){.css-17jxvjw{grid-template-columns:80px 452px 300px;-ms-grid-columns:80px 452px 300px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}}@media (max-width:770px){.css-17jxvjw{display:block;}}@media (max-width:480px){.css-17jxvjw{padding-top:0;}}.css-11t2ec1{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;z-index:5;position:-webkit-sticky;position:sticky;top:calc(56px + 24px + 16px + 32px - 16px);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:16px;width:80px;}.css-11t2ec1:after{content:'';display:table;}.css-11t2ec1:before{content:'';display:table;}@media (max-width:770px){.css-11t2ec1{display:none;}}.css-1dvr2p8{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-18lkoru{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;background-color:#FFFFFF;}.css-1g4cku8{display:inline-block;vertical-align:middle;height:20px;width:20px;fill:#55C500;}.css-1iupg5d{color:#55C500;cursor:pointer;font-size:14px;font-weight:bold;}.css-ijvq0v{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-15cocm3{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#FFFFFF;border:2px solid #6E6F70;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:2px 0px 0px;width:40px;}.css-12rp90f{display:inline-block;vertical-align:bottom;height:17.77777777777778px;width:16px;fill:#6E6F70;}.css-115f4t{color:#6E6F70;font-size:14px;font-weight:bold;}.css-1b8uj5v{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;margin-bottom:16px;padding:0;}.css-79elbk{position:relative;}.css-16hhh7b{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;padding:0;}.css-fcbn8c{display:none;bottom:initial;left:initial;right:initial;top:initial;left:100%;top:calc(-8px - (14px * 1.8) - 16px - 4px);}.css-1gj7nt{color:rgba(0,0,0,0.6);font-size:14px;font-weight:bold;line-height:1.8;padding:8px 16px;}.css-154zy0m{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.87);cursor:pointer;font-size:16px;font-weight:normal;line-height:1.8;padding:4px 16px;}.css-154zy0m:hover{-webkit-text-decoration:none;text-decoration:none;background-color:#F2F2F2;}.css-yikrym{width:20px;}.css-1jqivyb{color:rgba(0,0,0,0.6);font-size:13px;}.css-1ode1bp{background-color:rgba(0,0,0,0.12);height:1px;width:100%;margin:8px 0;}.css-le4d8r{display:inline-block;vertical-align:middle;height:13px;width:13px;fill:rgba(0,0,0,0.6);}.css-1hbd3g7{height:250px;}.css-1nzh4zz{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:16px 32px;background-color:#FBE69E;color:rgba(0,0,0,0.87);line-height:1.5;font-weight:600;}@media (max-width:770px){.css-1nzh4zz{padding:16px;}}.css-38fzdi{color:#CA832A;margin-right:4px;}.css-helsa7{background-color:#FFFFFF;padding:32px;margin-bottom:24px;}@media (max-width:992px){.css-helsa7{margin:0 auto 40px;}}@media (max-width:480px){.css-helsa7{margin:0 0 40px;padding:32px 16px;}}.css-8qb8m4{margin-bottom:48px;}.css-2imjyh{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-he5w1s{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;width:100%;}@media (max-width:770px){.css-he5w1s{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}}.css-70qvj9{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.css-3ojehk{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;margin-right:4px;}.css-100alwu{display:inline-block;border-radius:50%;line-height:1;overflow:hidden;vertical-align:middle;}.css-1dtnjt5{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-10ougpm{color:rgba(0,0,0,0.87);font-size:14px;font-weight:600;line-height:1.8;margin-right:4px;text-wrap:break-word;word-break:break-all;}.css-1ay9vb9{margin-right:16px;}.css-m19uds{color:rgba(0,0,0,0.6);font-size:14px;line-height:1.8;}.css-cgzq40{color:rgba(0,0,0,0.87);font-size:32px;font-weight:bold;line-height:1.4;margin-top:8px;text-wrap:break-word;word-break:break-all;}.css-1wa99t2{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.6);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:8px;}.css-1l3zk9f{color:rgba(0,0,0,0.6);font-size:20px;margin-right:8px;}.css-4czcte{margin-right:4px;color:inherit;font-size:14px;line-height:1.8;}.css-4czcte:not(:last-child)::after{content:',';margin-right:4px;}.css-1yzj1fm{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:32px;}.css-1uv1qiv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-size:20px;height:32px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin-right:16px;outline:none;padding:0;width:32px;}.css-109dbrr{background-color:#F9F9F9;border-top:1px solid rgba(0,0,0,0.12);bottom:0;box-shadow:0px 1px 4px rgba(0,0,0,0.14);display:none;height:calc(env(safe-area-inset-bottom,0px) + 56px);-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding-bottom:env(safe-area-inset-bottom);position:-webkit-sticky;position:sticky;width:100%;z-index:2000;}@media (max-width:770px){.css-109dbrr{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}.css-5jpx49{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:space-evenly;-webkit-justify-content:space-evenly;-ms-flex-pack:space-evenly;justify-content:space-evenly;width:100%;}.css-mnxgyc{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1vlpknv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;margin-right:4px;background-color:#FFFFFF;}.css-fsjkhv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1b17vb0{color:#6E6F70;font-size:14px;font-weight:bold;margin-left:4px;}.css-7i7f4d{display:none;bottom:initial;left:initial;right:initial;top:initial;bottom:32px;right:0;}</style></head><body><div class="allWrapper"><div><div id="GlobalHeader-react-component-d21138af-86b4-4c74-9e25-f888cb431ffa"><div class="st-Header"><div class="st-Header_container"><div class="st-Header_start"><a href="/" class="st-Header_logo"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 426.57 130"><circle cx="167.08" cy="21.4" r="12.28"></circle><path d="M250.81 29.66h23.48v18.9h-23.48z"></path><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z"></path><circle cx="216.33" cy="21.4" r="12.28"></circle></svg></a><div class="st-Header_communitySelector" tabindex="0"><span class="fa fa-caret-down"></span></div><div class="st-Header_dropdown"><div class="st-Header_dropdownHeading">Qiita Teams that are logged in</div><div class="st-Header_dropdownItemNote">You are not logged in to any team</div><hr class="st-Header_dropdownDivider st-Header_dropdownDivider-shrink"/><a href="https://teams-center.qiita.com/find_team" class="st-Header_dropdownItem"><span class="fa fa-fw fa-sign-in st-Header_dropdownItemIcon"></span><div>Log in to Qiita Team</div></a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Community</div><a href="/organizations" class="st-Header_dropdownItem">Organization</a><a href="/official-events/open" class="st-Header_dropdownItem">Event</a><a href="/advent-calendar" class="st-Header_dropdownItem">Advent Calendar</a><a href="https://qiitadon.com/" class="st-Header_dropdownItem" target="_blank">Qiitadon (β)</a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Service</div><a href="https://jobs.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Jobs</a><a href="https://zine.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Zine</a><a href="https://blog.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Blog</a></div><form class="st-Header_search" action="/search" method="get"><span class="fa fa-search st-Header_searchIcon"></span><input type="search" class="st-Header_searchInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form><form class="st-Header_searchModal" action="/search" method="get"><input type="text" class="st-Header_searchModalInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form></div><div class="st-Header_end"><div class="st-Header_searchButton"><span class="fa fa-search"></span></div><a class="st-Header_signupButton" href="/signup?redirect_to=%2Friversun%2Fitems%2F61b7e1050aa3ec9fff7c">Signup</a><a class="st-Header_loginLink" href="/login?redirect_to=%2Friversun%2Fitems%2F61b7e1050aa3ec9fff7c">Login</a></div><div class="st-Header_overlay"></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="GlobalHeader" data-dom-id="GlobalHeader-react-component-d21138af-86b4-4c74-9e25-f888cb431ffa">{"unreadNotificationsCount":null,"realms":[{"humanName":"Qiita","isCurrentRealm":true,"isQiita":true,"isQiitaTeam":false,"loggedInUser":null,"teamId":null,"url":"https://qiita.com/"}],"teamFindUrl":"https://teams-center.qiita.com/find_team","isTeamOnlyUser":null,"currentUser":null}</script>
      
</div><div class="st-HeaderAlert st-HeaderAlert-warning"><div class="st-HeaderAlert_body"></div></div><script type="application/ld+json">{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"/","name":"Qiita"}},{"@type":"ListItem","position":2,"item":{"@id":"/tags/cpp","name":"C++"}}]}</script><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","datePublished":"2019-03-10T22:39:58.000+09:00","dateModified":"2019-03-10T23:23:04.000+09:00","headline":"【昔話】ETロボコン 2007年向けシミュレーター開発の記録【アーカイブ】","image":"https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0\u0026w=1200\u0026mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND00NENRNXBpVTZLbXg0NENSUlZUamc2M2pnNXpqZ3JQamc3TWdNakF3Ti1XNXRPV1FrZU9Ca2VPQ3QtT0RuLU9EcGVPRHJPT0R2T09Ddi1PRHZPbVdpLWVadXVPQnJ1aW9tT21Nc3VPQWtPT0NvdU9Edk9PQ3EtT0NwT09EbHVPQWtRJnR4dC1jb2xvcj0lMjMzMzMmdHh0LWZvbnQ9SGlyYWdpbm8lMjBTYW5zJTIwVzYmdHh0LXNpemU9NTQmdHh0LWNsaXA9ZWxsaXBzaXMmdHh0LWFsaWduPWNlbnRlciUyQ21pZGRsZSZzPWQ3ZjA2YWQxOGJlZTU5MjdmYzYxZDgzY2JkODUzZjU5\u0026mark-align=center%2Cmiddle\u0026blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RSEpwZG1WeWMzVnUmdHh0LWNvbG9yPSUyMzMzMyZ0eHQtZm9udD1IaXJhZ2lubyUyMFNhbnMlMjBXNiZ0eHQtc2l6ZT00NSZ0eHQtYWxpZ249cmlnaHQlMkNib3R0b20mcz1mOTcwZjk4N2IxY2E0MzE1ZTE2ZmE1MDY4Y2E5NWIxNA\u0026blend-align=center%2Cmiddle\u0026blend-mode=normal\u0026s=145aedd50e413ee158897f0abcc3e83d","mainEntityOfPage":"https://qiita.com/riversun/items/61b7e1050aa3ec9fff7c","author":{"@type":"Person","address":"Tokyo,Japan","email":null,"identifier":"riversun","name":"riversun","image":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fprofile-images%2F1542519361?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=99f04a1bb57bbe91cce3e6cd95070879","url":"https://qiita.com/riversun","description":"UX producer and Full-Stack developer with more than 15 years of experience.","memberOf":[]},"publisher":{"@type":"Organization","name":"Qiita","logo":{"@type":"ImageObject","url":"//cdn.qiita.com/assets/public/qiita-logo-c39ded593afa388e2e1ba435b110554e.png"}}}</script><style type="text/css">.wb-CampaignLink {
  background-color: #333333;
  width: 100%;
}

.wb-CampaignLink_container {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  max-width: 1100px;
  margin: 0 auto;
  font-size: 13px;
  padding: 0.8em;
}
.wb-CampaignLink_container > a {
  color: #fff;
}

.wb-CampaignLink_container > a:hover {
  text-decoration: underline;
}</style><div class="wb-CampaignLink"><div class="wb-CampaignLink_container"><a target="_blank" id="header_text_message_1" href="https://zine.qiita.com/interview/202105-uzabase/?utm_source=qiita&amp;utm_medium=header-banner">自己組織化されたユーザベースSaaS Product Teamが面白い理由</a><a target="_blank" id="header_text_message_2" href="https://zine.qiita.com/interview/202105-uzabase/?utm_source=qiita&amp;utm_medium=header-banner">詳しくはこちら</a></div><script>td.trackEvent(
  'front_events',
  {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"riversun","type":"items","id":"61b7e1050aa3ec9fff7c"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Show","data":{"message":"自己組織化されたユーザベースSaaS Product Teamが面白い理由","url":"https://zine.qiita.com/interview/202105-uzabase/?utm_source=qiita\u0026utm_medium=header-banner","sub_message":"詳しくはこちら"}}
)</script><script>document.getElementById('header_text_message_1').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"riversun","type":"items","id":"61b7e1050aa3ec9fff7c"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":0,"pos_id":"header_text_message_1","message":"自己組織化されたユーザベースSaaS Product Teamが面白い理由","url":"https://zine.qiita.com/interview/202105-uzabase/?utm_source=qiita\u0026utm_medium=header-banner","sub_message":"詳しくはこちら"}}
  )
})</script><script>document.getElementById('header_text_message_2').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"riversun","type":"items","id":"61b7e1050aa3ec9fff7c"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":0,"pos_id":"header_text_message_2","message":"自己組織化されたユーザベースSaaS Product Teamが面白い理由","url":"https://zine.qiita.com/interview/202105-uzabase/?utm_source=qiita\u0026utm_medium=header-banner","sub_message":"詳しくはこちら"}}
  )
})</script></div><script type="application/json" id="js-react-on-rails-context">{"railsEnv":"production","inMailer":false,"i18nLocale":"en","i18nDefaultLocale":"en","href":"https://qiita.com/riversun/items/61b7e1050aa3ec9fff7c","location":"/riversun/items/61b7e1050aa3ec9fff7c","scheme":"https","host":"qiita.com","port":null,"pathname":"/riversun/items/61b7e1050aa3ec9fff7c","search":null,"httpAcceptLanguage":null,"actionPath":"public/items#show","settings":{"analyticsTrackingId":"UA-24675221-12","assetsMap":{},"csrfToken":"vc7K57BsH7CsQFLAFP2FVa4LbdEYstyTXx6TQ9Z+8++5D8fhcEsr3BNHwcwJiv7ymFYHTeKSqgH7ABDaeEx6rQ==","locale":"en"},"currentUser":null,"isLoggedIn":false,"recaptchaSiteKey":"6LfNkiQTAAAAAM3UGnSquBy2akTITGNMO_QDxMw6","serverSide":false}</script>
<div id="PersonalArticlePage-react-component-0ec88947-8979-49cb-bf63-dc5f18e59746"><div class="p-items_wrapper"><div class=" css-17jxvjw"><div class="css-11t2ec1"><div class="css-1dvr2p8"><button class=" css-18lkoru"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/riversun/items/61b7e1050aa3ec9fff7c/likers" class="css-1iupg5d">5</a></div><div class="css-ijvq0v"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-115f4t">6</span></div><div class="css-1b8uj5v"><span class="fa fa-twitter"></span></div><div class="css-1b8uj5v"><span class="fa fa-facebook"></span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-fcbn8c"><div class="css-1gj7nt">Improve article</div><a href="/drafts/61b7e1050aa3ec9fff7c/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/riversun/items/61b7e1050aa3ec9fff7c/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/riversun/items/61b7e1050aa3ec9fff7c/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/riversun/items/61b7e1050aa3ec9fff7c/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/riversun/items/61b7e1050aa3ec9fff7c.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div><div class="p-items_options"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_toc"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_main"><div class="css-1nzh4zz"><span class="fa fa-fw fa-warning css-38fzdi"></span><p>More than 1 year has passed since last update.</p></div><div class="css-helsa7"><div class="css-8qb8m4"><div class="css-2imjyh"><div class="css-he5w1s"><div class="css-70qvj9"><div class="css-3ojehk"><a href="/riversun"><img class="css-100alwu eyfquo10" src="https://qiita-image-store.s3.amazonaws.com/0/170905/profile-images/1542519361" width="24" height="24" loading="lazy"/></a></div><div class="css-1dtnjt5"><a href="/riversun" class="css-10ougpm">@<!-- -->riversun</a><div class="css-1ay9vb9"><span><meta content="2019-03-10T13:39:58Z"/><time dateTime="2019-03-10T14:23:04Z" class="css-m19uds">updated at 2019-03-10</time></span></div></div></div></div></div><h1 class="css-cgzq40">【昔話】ETロボコン 2007年向けシミュレーター開発の記録【アーカイブ】</h1><div class="css-1wa99t2"><span class="fa fa-tags mr-1of2 css-1l3zk9f" aria-hidden="true"></span><a href="/tags/cpp" class="css-4czcte">C++</a><a href="/tags/csharp" class="css-4czcte">C#</a><a href="/tags/et%e3%83%ad%e3%83%9c%e3%82%b3%e3%83%b3" class="css-4czcte">ETロボコン</a></div></div><section class="it-MdContent"><div id="personal-public-article-body"><div><p><font color="red">本投稿は10年以上前のブログ記事が元になっているため、技術の情報が古いです。ご注意ください</font></p>

<h1>
<span id="概要" class="fragment"></span><a href="#%E6%A6%82%E8%A6%81"><i class="fa fa-link"></i></a>概要</h1>

<ul>
<li>
<strong>ETロボコン 2007</strong>用のシミュレーターを開発したときの記録です（参戦記を兼ねる）</li>
<li>まだ 気軽なUnityも、気軽な物理シミュレーターも、気軽なDeep Learningも無い時代に、若さ！？とパッションだけでシミュレーターをフルスクラッチ開発しました＾＾</li>
</ul>

<h2>
<span id="etロボコンシミュレーターとは" class="fragment"></span><a href="#et%E3%83%AD%E3%83%9C%E3%82%B3%E3%83%B3%E3%82%B7%E3%83%9F%E3%83%A5%E3%83%AC%E3%83%BC%E3%82%BF%E3%83%BC%E3%81%A8%E3%81%AF"><i class="fa fa-link"></i></a>ETロボコンシミュレーターとは</h2>

<p>作ったETロボコンシミュレーターが動いている様子はこれです。(注意：BGMつきの動画が開きます）</p>

<p><a href="https://www.youtube.com/watch?v=rhE9s7tCPP4" rel="nofollow noopener" target="_blank"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F05fa6413-dceb-907c-9277-e496f2256b51.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=6b259d556e49797a5a055f7d22369d83" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/05fa6413-dceb-907c-9277-e496f2256b51.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F05fa6413-dceb-907c-9277-e496f2256b51.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=bae1f1307cc162f4369cb9149970316e 1x" loading="lazy"></a></p>

<p>12年前の自分がもっているスキルをフル動員してフルスクラッチでETロボコン(RCX時代)のPCシミュレーターを作りました。</p>

<p>【技術】</p>

<ul>
<li>Visual C++ 2005 →走行ロジック</li>
<li>Visual C# 2005 →シミュレーション計算、GUIパート</li>
<li>Direct3D →3Dレンダリング</li>
<li>H8 C++(RCX)</li>
</ul>

<p>【シミュレータースペック】 </p>

<ul>
<li>運動学計算：2輪モデル</li>
<li>BRICK：LEGO Mindstorm(RCX)</li>
<li>緒元値：RCXベースのパスファインダーから実測、2D表示モード・3D表示モード、実時間シミュレーション可能、ETロボコン 2007対応</li>
</ul>

<h1>
<span id="プロローグ" class="fragment"></span><a href="#%E3%83%97%E3%83%AD%E3%83%AD%E3%83%BC%E3%82%B0"><i class="fa fa-link"></i></a>プロローグ</h1>

<p>UMLでロボットのソフトウェアを設計して戦うロボコンがあるという話を、同じプロジェクトの仲間のN女史から聞いた。<br>
彼女の所属会社でETロボコンに参加するチームがあるということで、そのチームの仲間に入れてもらうことになった。</p>

<p><strong>ROBO-ONE</strong>など、ロボコンには何度か参加したことはあったが<strong>UMLでロボットのソフト設計</strong>を競うというのは個人的に思いもよらなかった面白い視点。</p>

<p>私が出場していたロボコンではたいていメカとか回路まわりに苦戦して、ソフトももちろん書くけど、<strong>ソフトの中身のつくり</strong>で勝負しようとは思っていませんでした。</p>

<p>でも、このロボコンはソフトウェアの設計にフォーカスしているらしい。</p>

<p>ロボットもソフトも好きな人間としてはとっても興味がわく。</p>

<h1>
<span id="etロボコン-2007-とは" class="fragment"></span><a href="#et%E3%83%AD%E3%83%9C%E3%82%B3%E3%83%B3-2007-%E3%81%A8%E3%81%AF"><i class="fa fa-link"></i></a>ETロボコン 2007 とは</h1>

<h2>
<span id="ロボコン名称" class="fragment"></span><a href="#%E3%83%AD%E3%83%9C%E3%82%B3%E3%83%B3%E5%90%8D%E7%A7%B0"><i class="fa fa-link"></i></a>ロボコン名称</h2>

<p>ロボコンの名前は「ETロボコン」と呼ばれている。古くは、ETソフトウェアデザインロボコンと呼んでいたそう。</p>

<p>このロボコンの面白いところは、本来ロボコンの主役となるはずのロボットがあらかじめ規定されているということ。</p>

<p>Webサイト <a href="http://www.etrobo.jp/" class="autolink" rel="nofollow noopener" target="_blank">http://www.etrobo.jp/</a></p>

<h2>
<span id="パスファインダー" class="fragment"></span><a href="#%E3%83%91%E3%82%B9%E3%83%95%E3%82%A1%E3%82%A4%E3%83%B3%E3%83%80%E3%83%BC"><i class="fa fa-link"></i></a>パスファインダー</h2>

<p><a href="https://camo.qiitausercontent.com/6aecfa6f08ab793289dd48280028e0d05b123996/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f65386366313234382d663164322d646431332d366330372d3836373863653035306131642e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fe8cf1248-f1d2-dd13-6c07-8678ce050a1d.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=227cbcfe5d89fe78dba7791227996c4f" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/e8cf1248-f1d2-dd13-6c07-8678ce050a1d.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fe8cf1248-f1d2-dd13-6c07-8678ce050a1d.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=64090f0441ace599db7625fff4c2aa2a 1x" loading="lazy"></a></p>

<p><a href="https://camo.qiitausercontent.com/d0b4e37ff7591dc91c7c9bf5bf7e9ac46ce71347/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f31633562356238312d646639652d636633612d653731372d3030646538363037376633362e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F1c5b5b81-df9e-cf3a-e717-00de86077f36.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=be143c7f1d7214eaf4717a429ac268f3" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/1c5b5b81-df9e-cf3a-e717-00de86077f36.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F1c5b5b81-df9e-cf3a-e717-00de86077f36.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=0ec6b47232652e23fa1cd8eb53f0c159 1x" loading="lazy"></a></p>

<p>その規定されているロボットというのがLEGO Mindstormで作ったパスファインダーと呼ばれる走行ロボット。</p>

<p>LEGOでできた機構部分だけでなく、モーター、センサー、からマイコン、それらをつなぐ回路などまで、出場者みんなが同じ機体を使う。</p>

<p><strong>「何で勝敗・優劣を決めるのか？」</strong></p>

<p>機体が一緒なんだから、</p>

<p><strong>「当然、勝敗はソフトウェアで決まります。」</strong></p>

<p>ということだそう。</p>

<h2>
<span id="コンテストの内容" class="fragment"></span><a href="#%E3%82%B3%E3%83%B3%E3%83%86%E3%82%B9%E3%83%88%E3%81%AE%E5%86%85%E5%AE%B9"><i class="fa fa-link"></i></a>コンテストの内容</h2>

<p>勝敗、優劣の判定基準は大きく分けると、 ソフトウェアのモデルで競う、レースのタイムで競う、の２つの側面がある。</p>

<h1>
<span id="コンセプト" class="fragment"></span><a href="#%E3%82%B3%E3%83%B3%E3%82%BB%E3%83%97%E3%83%88"><i class="fa fa-link"></i></a>コンセプト</h1>

<p>参加にあたり、こんなコンセプトをたてた</p>

<p>■モデル評価重視型アプローチ</p>

<p>(1)アーキテクチャ方針<br>
　・内部および外部品質特性を明示的にアピールできるようにする。→ISO9126の１つ１つに<br>
すべてロジカルに答えられるようにする。</p>

<p>　・アーキテクチャと品質特性の因果を明示したい。→○○を達成したいから、ここはこう<br>
なっているという説明ができるように。</p>

<p>(2)分析・設計<br>
　・プロダクトライン（コアと変動性の層別）分析設計をやってみたい。→コアと変動部分の分析、例えば次回ルールが変わりそうなところはどこ？</p>

<p>　・カタリシスによるコンポ分析をやってみたい。</p>

<p>■タイムアタック重視型アプローチ</p>

<p>(3)制御アルゴリズム<br>
　・PID制御をきちっとSWで実装する。＆それをOOで設計する。<br>
　・自機の相対ポジションを保持する。　→モータ電圧とステアリングと経過時間から計算<br>
可能？<br>
　・フィードフォワード制御をする。　→あらかじめすべての通路情報をインプットしてお<br>
く。<br>
　・シャトル多数決システムの採用　→同一アルゴリズムを意味的に異なる設計で多重につ<br>
くり、多数決値を制御につかうスペースシャトル方式を使う。<br>
　・学習システム搭載　→GA,強化学習,ニューラルネットとか。</p>

<p>(4)シミュレーション<br>
　・シミュレータを作成し、最適アルゴリズムを探す。</p>

<h2>
<span id="追加アイデア" class="fragment"></span><a href="#%E8%BF%BD%E5%8A%A0%E3%82%A2%E3%82%A4%E3%83%87%E3%82%A2"><i class="fa fa-link"></i></a>追加アイデア</h2>

<p>(1)外乱に強いつくりにする<br>
　　→光量の情報なども瞬間値でなく積分値、加重平均でとるなどの工夫。</p>

<p>(2)実機の操作には薄いラッパーをはさむ。直接APIをたたかない。<br>
　　→シミュレータも同じインタフェースで実装しておけば実機とシミュで同じ制御ロジックを使いまわせるでしょ。</p>

<p>(3)タッチセンサーを活用する。</p>

<h1>
<span id="スケジュール" class="fragment"></span><a href="#%E3%82%B9%E3%82%B1%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB"><i class="fa fa-link"></i></a>スケジュール</h1>

<div class="code-frame" data-lang="text"><div class="highlight"><pre><code>    | 公式            | 内部予定
-----+-----------------+---------------
4/20 |                 | ▲コンセプトの決定
     |                 | ▲アーキテクチャ＆担当の決定
4/25 |                 | ▲LimitedFunction 1
4/27 | モデリング教育  | 教育２：Yさん参加
5/11 |                 | ▲LimitedFunction 2
5/18 |                 | ▲FullFunction
5/25 |                 | ▲RC
5/27 | 試走会Ⅰ        | おそらく土曜に参加
6/08 | 試走会Ⅱ        | 未定
6/30 | 関東地区予選    | 未定
7/14 | 本戦            | 未定
</code></pre></div></div>

<h1>
<span id="チーム" class="fragment"></span><a href="#%E3%83%81%E3%83%BC%E3%83%A0"><i class="fa fa-link"></i></a>チーム</h1>

<p>チームは私ふくめて4人。</p>

<p>チームといっても、それぞれのプロジェクトがあるので、ほとんど集まれないので<br>
主担当をきめて、それぞれが自宅で各自進めるということになった。</p>

<h1>
<span id="私の担当" class="fragment"></span><a href="#%E7%A7%81%E3%81%AE%E6%8B%85%E5%BD%93"><i class="fa fa-link"></i></a>私の担当</h1>

<p>他のメンバーは所属会社のお金で実機を買ってもらっていた。彼らは業務としてロボコンに参加できるのだが、<br>
私は所属会社もプロジェクトも違うので実機（パスファインダー）を持っていなかった。</p>

<p>もちろん業務としての参加ではなかったので、<br>
実機のアルゴを試せるシミュレーターを開発する役割を買って出た。</p>

<p>うまくいくか不明だが、　最適アルゴリズムを探す　というミッションのもとシミュレーターを開発することにした。</p>

<h1>
<span id="シミュレータのアイデア" class="fragment"></span><a href="#%E3%82%B7%E3%83%9F%E3%83%A5%E3%83%AC%E3%83%BC%E3%82%BF%E3%81%AE%E3%82%A2%E3%82%A4%E3%83%87%E3%82%A2"><i class="fa fa-link"></i></a>シミュレータのアイデア</h1>

<h2>
<span id="シミュレータの実現ステップ" class="fragment"></span><a href="#%E3%82%B7%E3%83%9F%E3%83%A5%E3%83%AC%E3%83%BC%E3%82%BF%E3%81%AE%E5%AE%9F%E7%8F%BE%E3%82%B9%E3%83%86%E3%83%83%E3%83%97"><i class="fa fa-link"></i></a>シミュレータの実現ステップ</h2>

<p>こんなステップでシミュレータをつくる。期間内にベストエフォートで。</p>

<p>目的にあわせて、どのレベルの正確さを求めるか、が物理シミュレーター作りのポイント。</p>

<ul>
<li>STEP1:通称：LV1
最低限の動作をシミュレーションする。2次元、3自由度（X,Y,ヨー）の車両のシミュレーション。必要な各種パラメータは実機あわせ。実時間シミュレーションの離散化はシンプルなオイラー法。2週間くらいで作るというのはこれくらいが限界かな</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/a5bb668c16c3f2398990006ccac3dd02e3d70a2d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f39303932333731352d613433372d356464362d336337652d6230666236373935323231382e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F90923715-a437-5dd6-3c7e-b0fb67952218.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=fd03df96d3c8878e0451212f5ed694a9" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/90923715-a437-5dd6-3c7e-b0fb67952218.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F90923715-a437-5dd6-3c7e-b0fb67952218.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=d205d059c608779371af0ab98a5bdb11 1x" loading="lazy"></a></p>

<ul>
<li><p>STEP2:通称：LV2<br>
少し動力学、運動学をいれてみる。各種パラメータ（たとえば慣性モーメントとか、テンソルとか）は物性値から計算してみる。2次元、3自由度（X,Y,yaw）の車両のシミュレーション。実時間シミュレーションの離散化はルンゲクッタで。 </p></li>
<li><p>STEP3:通称：LV3<br>
3次元、6自由度の運動シミュレーション。ぜんぶ自作プログラミングだと厳しいかも。まっとうな物理エンジンとか、最低でもMATLABくらいは使いたい。 </p></li>
</ul>

<h2>
<span id="実装よりの整理" class="fragment"></span><a href="#%E5%AE%9F%E8%A3%85%E3%82%88%E3%82%8A%E3%81%AE%E6%95%B4%E7%90%86"><i class="fa fa-link"></i></a>実装よりの整理</h2>

<p>実装よりにシミュレータへの要望を整理してみると、こんな感じ</p>

<ul>
<li><p><strong>Windowsプラットフォームで動作すること</strong><br>
みんなのPCがWindowsだから。昔つくった3Dライブラリあるので、DirectXつかう。</p></li>
<li><p><strong>今後のSTEP2,STEP3への物理計算拡張を考慮した設計とすること</strong><br>
物理計算処理も階層化したほうがよさそう。ソルバー単位になるかな。</p></li>
<li><p><strong>物理計算エンジン部分を取替え可能に設計すること</strong><br>
物理計算と描画の境界線は意識しましょう。学生の頃、物理計算用のPG組んだとき、これを混ぜて痛い目を見た。後から描画処理を追加するときに、計算処理に手をいれたくなるもの。</p></li>
<li><p><strong>パスファインダーをパーツのアセンブリとして表現すること</strong><br>
将来パスファインダーを構成する部品が変わってもいいように。</p></li>
<li><p><strong>3Dグラフィックスへの対応を考慮した設計とすること</strong><br>
いずれ3Dにも対応させたいので、スケール感をもって、2Dの計算をさせたほうが良い。</p></li>
<li><p><strong>複数台のパスファインダーの同時シミュレーションに対応すること</strong><br>
複数でアルゴリズム対決みたいなのをシミュレータ上でできたら楽しそう。</p></li>
<li><p><strong>C++で記述されたパスファインダー制御コードと連携できること</strong><br>
パスファインダーの制御コードはC++なので、薄いWrapperをかませるような使い方を想定します。</p></li>
</ul>

<h2>
<span id="実装イメージ" class="fragment"></span><a href="#%E5%AE%9F%E8%A3%85%E3%82%A4%E3%83%A1%E3%83%BC%E3%82%B8"><i class="fa fa-link"></i></a>実装イメージ</h2>

<p>もう少しイメージをふくらませて</p>

<p><a href="https://camo.qiitausercontent.com/0c911be2ef26d729700822abe3eb9529eed9704d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f63303936366163382d343639322d616162622d626130392d3564613032333861303265302e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fc0966ac8-4692-aabb-ba09-5da0238a02e0.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=bb8eddb35ac2a6e54c6e18b436608974" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/c0966ac8-4692-aabb-ba09-5da0238a02e0.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fc0966ac8-4692-aabb-ba09-5da0238a02e0.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=c2e03dd16346e1ee5a6396958793555c 1x" loading="lazy"></a></p>

<h1>
<span id="シミュレータの能力" class="fragment"></span><a href="#%E3%82%B7%E3%83%9F%E3%83%A5%E3%83%AC%E3%83%BC%E3%82%BF%E3%81%AE%E8%83%BD%E5%8A%9B"><i class="fa fa-link"></i></a>シミュレータの能力</h1>

<h2>
<span id="パスファインダー実機写真" class="fragment"></span><a href="#%E3%83%91%E3%82%B9%E3%83%95%E3%82%A1%E3%82%A4%E3%83%B3%E3%83%80%E3%83%BC%E5%AE%9F%E6%A9%9F%E5%86%99%E7%9C%9F"><i class="fa fa-link"></i></a>パスファインダー（実機）写真</h2>

<p><a href="https://camo.qiitausercontent.com/c8b588fe3d15373cfe4d5af18f9dfcf838d4c629/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f63356639363432622d326264352d666239352d656466662d6332666431623732313732362e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fc5f9642b-2bd5-fb95-edff-c2fd1b721726.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=a5ed2f6b9a62f2738cae1ee13dc8131b" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/c5f9642b-2bd5-fb95-edff-c2fd1b721726.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fc5f9642b-2bd5-fb95-edff-c2fd1b721726.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=0d7afa61fc3ffd5140b05ac11be4e7b9 1x" loading="lazy"></a></p>

<h2>
<span id="シミュレーションする現象" class="fragment"></span><a href="#%E3%82%B7%E3%83%9F%E3%83%A5%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%99%E3%82%8B%E7%8F%BE%E8%B1%A1"><i class="fa fa-link"></i></a>シミュレーションする現象</h2>

<p>とりあえず、STEP1では以下のようなものを再現してみる。</p>

<ul>
<li><p>動きの再現<br><br>
直進、バック<br>
ステアリングによる旋回（円旋回） </p></li>
<li><p>動きの原因の再現<br><br>
トラクションモーター<br>
ステアリングモーター</p></li>
</ul>

<h1>
<span id="物理計算の制約" class="fragment"></span><a href="#%E7%89%A9%E7%90%86%E8%A8%88%E7%AE%97%E3%81%AE%E5%88%B6%E7%B4%84"><i class="fa fa-link"></i></a>物理計算の制約</h1>

<p>STEP1では、</p>

<ul>
<li>計算は2次元、3自由度</li>
<li>車両は4輪等価な2輪モデル</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/09ce5fba25b023f2a1846d53a49c1b05f2173c96/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f64623061353436632d343134342d373931312d656635322d3734626465366539623837302e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fdb0a546c-4144-7911-ef52-74bde6e9b870.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=9c90d0100f04191a20c23c5bdae94793" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/db0a546c-4144-7911-ef52-74bde6e9b870.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fdb0a546c-4144-7911-ef52-74bde6e9b870.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=e1ef5e58c91708b2241b04c83708c6f4 1x" loading="lazy"></a></p>

<ul>
<li>急激な運動は考慮しない。急加速、減速、急ステアリングなど。</li>
<li>過渡現象は考えない→車両速度は一定 
みたいな感じを想定</li>
</ul>

<h1>
<span id="いよいよ実機で計測" class="fragment"></span><a href="#%E3%81%84%E3%82%88%E3%81%84%E3%82%88%E5%AE%9F%E6%A9%9F%E3%81%A7%E8%A8%88%E6%B8%AC"><i class="fa fa-link"></i></a>いよいよ実機で計測</h1>

<h2>
<span id="実機のサイズ" class="fragment"></span><a href="#%E5%AE%9F%E6%A9%9F%E3%81%AE%E3%82%B5%E3%82%A4%E3%82%BA"><i class="fa fa-link"></i></a>実機のサイズ</h2>

<p>パスファインダーの寸法をマニュアルで測る。<br>
それにしても資料をさがしてもどこにも寸法が書いていないというのは不思議</p>

<p><a href="https://camo.qiitausercontent.com/903ef5f792a94a69b6012d69804bd8eb8dac2bc9/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f38343131623262622d616662392d313863632d623330652d6663356439343463613465312e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F8411b2bb-afb9-18cc-b30e-fc5d944ca4e1.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=5060b869e8ecaf61008cf5552646ace4" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/8411b2bb-afb9-18cc-b30e-fc5d944ca4e1.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F8411b2bb-afb9-18cc-b30e-fc5d944ca4e1.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=3e4d33428dd814e6a957351b57156d15 1x" loading="lazy"></a></p>

<p>こんな計測方法なので精度がまったく保証されない。<br>
しかし、物理シミュレーションのアバウトさ加減を考えると1mm,2mmずれてもどうってことは無い。</p>

<h1>
<span id="実機走行実験" class="fragment"></span><a href="#%E5%AE%9F%E6%A9%9F%E8%B5%B0%E8%A1%8C%E5%AE%9F%E9%A8%93"><i class="fa fa-link"></i></a>実機走行実験</h1>

<h2>
<span id="速度測定実験" class="fragment"></span><a href="#%E9%80%9F%E5%BA%A6%E6%B8%AC%E5%AE%9A%E5%AE%9F%E9%A8%93"><i class="fa fa-link"></i></a>①速度測定実験</h2>

<p>実機の速度を測定する実験を行う。</p>

<ul>
<li><p>目的<br>
プログラム内でのトラクションモータ制御値とパスファインダー（実機）の速度の関係を調査する。</p></li>
<li><p>実験方法<br>
一定距離の直線を走行させて、走破時間をストップウォッチで計測する。</p></li>
</ul>

<p><a href="https://camo.qiitausercontent.com/0ef079a799dc35ca5617b598029141a720f2e289/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f62363565386262622d323964612d613233302d373061662d6462343237393166343431322e676966" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fb65e8bbb-29da-a230-70af-db42791f4412.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=b23245a45e9a38440ac62058e4b28281" alt="speedt.gif" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/b65e8bbb-29da-a230-70af-db42791f4412.gif" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fb65e8bbb-29da-a230-70af-db42791f4412.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=34ac43ce7500ef55f3311c886f2fab63 1x" loading="lazy"></a></p>

<ul>
<li>実験条件
593mmの直線コースを、モーター制御値 255 128 64 32 でそれぞれ走行させる。 </li>
</ul>

<p><a href="https://camo.qiitausercontent.com/303e6e0825bd6456508aa45580a7ddc3648cbd58/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f34333730363166662d343530632d346639642d363830622d6238306339616334343465382e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F437061ff-450c-4f9d-680b-b80c9ac444e8.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=dad54e19e4692c278bd11a905ac70c45" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/437061ff-450c-4f9d-680b-b80c9ac444e8.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F437061ff-450c-4f9d-680b-b80c9ac444e8.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=0c31b03d37caad733ab4782af26b0cef 1x" loading="lazy"></a></p>

<p>実験結果を以下に示す</p>

<p><a href="https://camo.qiitausercontent.com/6e1859de4f238c4dbf8d6ef2bb365391f5bc4932/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f33623465366262362d616363652d616431642d613065662d3163383631613639356631632e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F3b4e6bb6-acce-ad1d-a0ef-1c861a695f1c.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=9df6abfe50b5afdaad958d4d1018f471" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/3b4e6bb6-acce-ad1d-a0ef-1c861a695f1c.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F3b4e6bb6-acce-ad1d-a0ef-1c861a695f1c.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=7c359f8f559a3464601e863c4ed771bc 1x" loading="lazy"></a></p>

<p><strong>考察</strong></p>

<ul>
<li>実験1,2,3は制御値(電圧)とほぼ速度と比例の関係を確認した。</li>
<li>実験4は低電圧のため、かかる負荷トルクにモータトルクが影響を受けていると思われる。</li>
<li>電池はフル</li>
<li>ストップウォッチは人間の目視のため不正確</li>
</ul>

<h2>
<span id="利用できそうな計算式の導出" class="fragment"></span><a href="#%E5%88%A9%E7%94%A8%E3%81%A7%E3%81%8D%E3%81%9D%E3%81%86%E3%81%AA%E8%A8%88%E7%AE%97%E5%BC%8F%E3%81%AE%E5%B0%8E%E5%87%BA"><i class="fa fa-link"></i></a>利用できそうな計算式の導出</h2>

<ul>
<li>計算式の導出
速度と制御値Xの関係を1次式で近似してみた</li>
</ul>

<div class="code-frame" data-lang="math"><div class="highlight"><pre><code>y=2.0552x+51.445
</code></pre></div></div>

<p>負荷トルクを無視できる、制御量がある程度大きいときには上式で近似する。</p>

<p><a href="https://camo.qiitausercontent.com/d2bbf5d889802b2289ca98d74654b210c44a8a07/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f33383161346262662d366239392d303438642d373234642d3561393331623938616230612e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F381a4bbf-6b99-048d-724d-5a931b98ab0a.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=d67dcb6b0b73d07054acdf02e044bfa3" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/381a4bbf-6b99-048d-724d-5a931b98ab0a.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F381a4bbf-6b99-048d-724d-5a931b98ab0a.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=43ba71bb7fb73107198906b888f31258 1x" loading="lazy"></a></p>

<h2>
<span id="定常円旋回実験" class="fragment"></span><a href="#%E5%AE%9A%E5%B8%B8%E5%86%86%E6%97%8B%E5%9B%9E%E5%AE%9F%E9%A8%93"><i class="fa fa-link"></i></a>②定常円旋回実験</h2>

<p>ステアリング性能をみるため、ある角度にステアリングをきったまま同一速度で旋回運動をさせる実験をする。</p>

<ul>
<li><p>目的<br>
舵角δと旋回半径Rの関係を調査すること</p></li>
<li><p>実験方法<br>
舵角と速度を固定し、定常円旋回運動をさせ、パスファインダーの走行軌跡を調べる </p></li>
</ul>

<p><a href="https://camo.qiitausercontent.com/c2db2d6ff221e74b9433708f63a5a5f403d8cbbb/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f62363739633233612d373931342d353761632d303835622d3839386336346134363234612e676966" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fb679c23a-7914-57ac-085b-898c64a4624a.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=7f03d589d5b59c112f1180d82d232c13" alt="mov.gif" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/b679c23a-7914-57ac-085b-898c64a4624a.gif" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fb679c23a-7914-57ac-085b-898c64a4624a.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=c8e123ecc695525bd2ce125f9ba88111 1x" loading="lazy"></a></p>

<p><a href="https://camo.qiitausercontent.com/6e1b526b7ae8208409e2c5a9997346f42b477e56/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f32373233313132322d386635332d316237382d343563352d6133336464333363303332632e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F27231122-8f53-1b78-45c5-a33dd33c032c.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=1723b897597471350caabfe5b07e8309" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/27231122-8f53-1b78-45c5-a33dd33c032c.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F27231122-8f53-1b78-45c5-a33dd33c032c.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=6e00c60c9e0ca62992347310b9d31b44 1x" loading="lazy"></a></p>

<ul>
<li>実験条件</li>
</ul>

<div class="code-frame" data-lang="math"><div class="highlight"><pre><code>一定速度V=325(mm/s^2)\\
一定舵角δ=0.698(rad)・・・40°\\
</code></pre></div></div>

<h2>
<span id="定常円旋回実験結果" class="fragment"></span><a href="#%E5%AE%9A%E5%B8%B8%E5%86%86%E6%97%8B%E5%9B%9E%E5%AE%9F%E9%A8%93%E7%B5%90%E6%9E%9C"><i class="fa fa-link"></i></a>定常円旋回実験結果</h2>

<p>走行させたものを固定カメラで録画し画像解析して定常円旋回性能をしることができた。<br>
下の図はステアリングを40°に固定したときの軌跡。きれいな円を描いている。</p>

<ul>
<li>実験結果<br>
<a href="https://camo.qiitausercontent.com/baf2de564e0399384c8d1f25291cb35534964a83/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f38353034343030302d633866612d393137642d396663332d3862646432376135653233322e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F85044000-c8fa-917d-9fc3-8bdd27a5e232.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=ab4995f6660b1527588710e0071bacfb" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/85044000-c8fa-917d-9fc3-8bdd27a5e232.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F85044000-c8fa-917d-9fc3-8bdd27a5e232.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=551547185715fd61f347b384e4b3e50c 1x" loading="lazy"></a>
</li>
</ul>

<p>**走行軌道より旋回半径</p>

<p>旋回半径が判明</p>

<div class="code-frame" data-lang="math"><div class="highlight"><pre><code>R=111 (mm)
</code></pre></div></div>

<h2>
<span id="定常円旋回計算式確認" class="fragment"></span><a href="#%E5%AE%9A%E5%B8%B8%E5%86%86%E6%97%8B%E5%9B%9E%E8%A8%88%E7%AE%97%E5%BC%8F%E7%A2%BA%E8%AA%8D"><i class="fa fa-link"></i></a>定常円旋回計算式確認</h2>

<ul>
<li>定常円旋回計算式
パスファインダーを四輪と等価な二輪車モデルとすると、一定速度V(mm/s2)、一定舵角δ(°)の定常円旋回運動は以下の式で表すことができる</li>
</ul>

<div class="code-frame" data-lang="math"><div class="highlight"><pre><code>R=\frac{(1+AV^2)L}{δ} ・・・（１）
</code></pre></div></div>

<div class="code-frame" data-lang="math"><div class="highlight"><pre><code>\begin{align}
&amp;R:旋回半径(mm)\\
&amp;L:ホイールベース（:車軸間距離） (mm)\\
&amp;δ:舵角(rad)\\ 
&amp;V:速度(mm/s^2)\\ 
&amp;A:スタビリティファクタ\\
\end{align}
</code></pre></div></div>

<p>上式より</p>

<div class="code-frame" data-lang="math"><div class="highlight"><pre><code>A=\frac{Rδ}{L – 1}\frac{1}{V^2} ・・・（２）
</code></pre></div></div>

<p>Aはスタビリティファクタとなる。</p>

<ul>
<li>スタビリティファクタAの導出</li>
</ul>

<p>実験結果を(2)式に代入</p>

<div class="code-frame" data-lang="math"><div class="highlight"><pre><code>A=-1.22×10^{-6}
</code></pre></div></div>

<p>ここで</p>

<div class="code-frame" data-lang="math"><div class="highlight"><pre><code>\begin{align}
&amp;A &gt;0 アンダーステア(US)・・・速度増加とともにRが増加する。\\
&amp;A =0 ニュートラルステア(NS)　\\
&amp;A &lt;0 オーバーステア(OS)・・・速度増加とともにRが減少する。\\
\end{align}
</code></pre></div></div>

<p>であるので </p>

<p>パスファインダーは <strong>オーバーステア（OS)</strong> の特性をもった車両ということになる。</p>

<h2>
<span id="ステアリングモーター動作実験" class="fragment"></span><a href="#%E3%82%B9%E3%83%86%E3%82%A2%E3%83%AA%E3%83%B3%E3%82%B0%E3%83%A2%E3%83%BC%E3%82%BF%E3%83%BC%E5%8B%95%E4%BD%9C%E5%AE%9F%E9%A8%93"><i class="fa fa-link"></i></a>③ステアリングモーター動作実験</h2>

<ul>
<li><p>目的<br>
プログラムから指示する制御値に対するステアリングの回転数（角速度）の導出。<br>
LEGOモータの定格とステアリングに力を伝達するギア比から計算してもいいが、結局のところ<strong>慣性モーメント</strong>その他の影響を考慮すると実際にタイアを地面につけたまま、制御の末端であるステアリングの回転数をはかったほうがより現実的だろうという判断をした。</p></li>
<li><p>実験<br>
ステアリングが90°回転するまでの所用時間を計測した</p></li>
</ul>

<p><a href="https://camo.qiitausercontent.com/288f25bd2cd7d6cc36460d916668325fb838eb0f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f66393865373163622d323665382d613864322d636665312d6138383363633330306336632e676966" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Ff98e71cb-26e8-a8d2-cfe1-a883cc300c6c.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=3596b0e058f1476682bc307621f7169f" alt="anglet.gif" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/f98e71cb-26e8-a8d2-cfe1-a883cc300c6c.gif" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Ff98e71cb-26e8-a8d2-cfe1-a883cc300c6c.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=61a90d86ae0e6f9d907e6744c9f904f3 1x" loading="lazy"></a></p>

<ul>
<li>実験結果</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/d4fe2f44d55d49950477f6d3e10076c5e3e86600/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f64393131666461312d643261352d396364352d343063612d3065353435356230323638652e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fd911fda1-d2a5-9cd5-40ca-0e5455b0268e.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=d5e50fed1a52c4d10acbf9734237d5d7" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/d911fda1-d2a5-9cd5-40ca-0e5455b0268e.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fd911fda1-d2a5-9cd5-40ca-0e5455b0268e.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=3f4dd3b16e598c7c588e79d47198e0f2 1x" loading="lazy"></a></p>

<p><a href="https://camo.qiitausercontent.com/0b229d268a44cb5902114f4ec655a5d9a45c77fc/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f33316365303738652d663466362d303963352d373763332d6638623231363232336662632e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F31ce078e-f4f6-09c5-77c3-f8b216223fbc.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=56eb95eba1f2a60a2703c748ee908bdd" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/31ce078e-f4f6-09c5-77c3-f8b216223fbc.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F31ce078e-f4f6-09c5-77c3-f8b216223fbc.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=8ab5b1b676a350bb279367b32dd1d4c3 1x" loading="lazy"></a></p>

<p>実験データを対数近似でフィットさせた以下の式をステアリング角速度の計算に用いる</p>

<div class="code-frame" data-lang="math"><div class="highlight"><pre><code>Y=103.29Ln(x)-209.04 
</code></pre></div></div>

<p>x:制御値 (17～255)</p>

<p>制御値&lt;16の場合、<br>
まったく動作しない(モータ＋ギアのトルクが摩擦にまけて動かない）</p>

<h1>
<span id="可動寸法計測" class="fragment"></span><a href="#%E5%8F%AF%E5%8B%95%E5%AF%B8%E6%B3%95%E8%A8%88%E6%B8%AC"><i class="fa fa-link"></i></a>可動・寸法計測</h1>

<h2>
<span id="ステアリングの可動範囲" class="fragment"></span><a href="#%E3%82%B9%E3%83%86%E3%82%A2%E3%83%AA%E3%83%B3%E3%82%B0%E3%81%AE%E5%8F%AF%E5%8B%95%E7%AF%84%E5%9B%B2"><i class="fa fa-link"></i></a>ステアリングの可動範囲</h2>

<p>以下の２つについて計測する</p>

<ul>
<li>運動限界舵角<br>
勝手に命名(本当は何て言うんだっけ？)
これ以上ステアリングを切りすぎるとまともな動きをしなくなる（つかえる、倒れる、壊れる等）限界の角度を計測する</li>
</ul>

<div class="code-frame" data-lang="math"><div class="highlight"><pre><code>運動限界舵角＝±80°
</code></pre></div></div>

<ul>
<li>可動限界舵角<br>
メカ的に動くことのできる角度を計測</li>
</ul>

<div class="code-frame" data-lang="math"><div class="highlight"><pre><code>可動限界舵角＝±120°
</code></pre></div></div>

<p><a href="https://camo.qiitausercontent.com/bbcf339ccd9d21b3f4c006f4684dfbb6e308eaa7/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f66303266636462662d336237332d616366332d363163362d6230343364646530656537392e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Ff02fcdbf-3b73-acf3-61c6-b043dde0ee79.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=542ddd6382d6d5d6c741cf2c5b7dcc4b" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/f02fcdbf-3b73-acf3-61c6-b043dde0ee79.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Ff02fcdbf-3b73-acf3-61c6-b043dde0ee79.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=33f380f2372cde54ec30df8c9d416775 1x" loading="lazy"></a></p>

<h2>
<span id="計算用のモデル化" class="fragment"></span><a href="#%E8%A8%88%E7%AE%97%E7%94%A8%E3%81%AE%E3%83%A2%E3%83%87%E3%83%AB%E5%8C%96"><i class="fa fa-link"></i></a>計算用のモデル化</h2>

<p>以前計測したものを、計算用の簡易寸法にした</p>

<p><a href="https://camo.qiitausercontent.com/4e7984029998fef5f4d062bf6297f0d15979169b/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f38326131316332352d316463392d393932612d353432362d6235373537333133666366612e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F82a11c25-1dc9-992a-5426-b5757313fcfa.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=5c9f391a94259126e14e36c8a6b434a8" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/82a11c25-1dc9-992a-5426-b5757313fcfa.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F82a11c25-1dc9-992a-5426-b5757313fcfa.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=ce3bdbd66a49c942de11c70dd21ab061 1x" loading="lazy"></a></p>

<p><a href="https://camo.qiitausercontent.com/3a55aab24ab25d499c572204b003d2e1ffdf5ae1/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f30363530633834612d323830332d343364622d323939372d3934386430356134623433352e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F0650c84a-2803-43db-2997-948d05a4b435.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=241eeec966f2bdb448c6871269c00336" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/0650c84a-2803-43db-2997-948d05a4b435.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F0650c84a-2803-43db-2997-948d05a4b435.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=9f55f797fdf01316f17b2b59b0e7db6d 1x" loading="lazy"></a></p>

<h1>
<span id="20070428-シミュレータ用計算式まとめ" class="fragment"></span><a href="#20070428-%E3%82%B7%E3%83%9F%E3%83%A5%E3%83%AC%E3%83%BC%E3%82%BF%E7%94%A8%E8%A8%88%E7%AE%97%E5%BC%8F%E3%81%BE%E3%81%A8%E3%82%81"><i class="fa fa-link"></i></a>20070428 シミュレータ用計算式まとめ</h1>

<p>これまで導出してきたパスファインダー自身の動作に関する計算式の類を備忘録もかねてまとめておく</p>

<h2>
<span id="速度-vs" class="fragment"></span><a href="#%E9%80%9F%E5%BA%A6-vs"><i class="fa fa-link"></i></a>速度 Vs</h2>

<p><a href="https://camo.qiitausercontent.com/27a8ed8c4e99ff7c7b286517e81a11f85ec93e1c/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f30323136356634332d393861362d633133322d393638302d6538653132663166636131392e676966" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F02165f43-98a6-c132-9680-e8e12f1fca19.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=9ad310300afd50ecfdb4ec7f43b5f478" alt="speedt.gif" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/02165f43-98a6-c132-9680-e8e12f1fca19.gif" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F02165f43-98a6-c132-9680-e8e12f1fca19.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=7dbef846e20f7b71e551debafac70920 1x" loading="lazy"></a></p>

<div class="code-frame" data-lang="math"><div class="highlight"><pre><code>
Ctr&lt;64 のとき\\
Vs=0
</code></pre></div></div>

<div class="code-frame" data-lang="math"><div class="highlight"><pre><code>64≦Ctr≦255 のとき\\
Vs=2.0552Ctr+51.445
</code></pre></div></div>

<div class="code-frame" data-lang="math"><div class="highlight"><pre><code>Ctr:トラクションモータ制御値\\
Vs:速度 (mm/s)
</code></pre></div></div>

<h2>
<span id="ステアリングの角速度ω" class="fragment"></span><a href="#%E3%82%B9%E3%83%86%E3%82%A2%E3%83%AA%E3%83%B3%E3%82%B0%E3%81%AE%E8%A7%92%E9%80%9F%E5%BA%A6%CF%89"><i class="fa fa-link"></i></a>ステアリングの角速度ω</h2>

<p><a href="https://camo.qiitausercontent.com/bab66799b66f98a406ac40258101d9d3cf1e998f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f30633137313839312d643632312d373665312d386631352d3962646263613366636534622e676966" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F0c171891-d621-76e1-8f15-9bdbca3fce4b.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=b751ed472bcde1ef1315b7c3054fd59a" alt="anglet.gif" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/0c171891-d621-76e1-8f15-9bdbca3fce4b.gif" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F0c171891-d621-76e1-8f15-9bdbca3fce4b.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=1a4d58c9d2da293966cc9f3e2ae56724 1x" loading="lazy"></a></p>

<div class="code-frame" data-lang="math"><div class="highlight"><pre><code>Cst&lt;16のとき\\
ω=0

</code></pre></div></div>

<div class="code-frame" data-lang="math"><div class="highlight"><pre><code>16≦Cst≦255 のとき\\
ω=103.29Ln(Cst)-209.04\\
</code></pre></div></div>

<h2>
<span id="定常円旋回半径-r" class="fragment"></span><a href="#%E5%AE%9A%E5%B8%B8%E5%86%86%E6%97%8B%E5%9B%9E%E5%8D%8A%E5%BE%84-r"><i class="fa fa-link"></i></a>定常円旋回半径 R</h2>

<p><a href="https://camo.qiitausercontent.com/596a33371025d520b61b11c32b102a1af18a1b20/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f35393261353263312d393035622d353866632d346165352d3662336263383834356531352e676966" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F592a52c1-905b-58fc-4ae5-6b3bc8845e15.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=1d853e5089f20c14d4740bb87d6171b2" alt="mov.gif" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/592a52c1-905b-58fc-4ae5-6b3bc8845e15.gif" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F592a52c1-905b-58fc-4ae5-6b3bc8845e15.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=192b31f7fff90c800eeaef42ed3352c5 1x" loading="lazy"></a></p>

<ul>
<li>定常円旋回半径の一般式</li>
</ul>

<div class="code-frame" data-lang="math"><div class="highlight"><pre><code>R=\frac{(1+AV^2)L}{δ} ・・・（１）
</code></pre></div></div>

<div class="code-frame" data-lang="math"><div class="highlight"><pre><code>\begin{align}
&amp;R:旋回半径(mm)\\
&amp;L:ホイールベース（:車軸間距離） (mm)\\
&amp;δ:舵角(rad)\\ 
&amp;V:速度(mm/s^2)\\ 
&amp;A:スタビリティファクタ\\
\end{align}
</code></pre></div></div>

<p>パスファインダーの定常円旋回半径計算式</p>

<div class="code-frame" data-lang="math"><div class="highlight"><pre><code>L=88(mm)\\
A= -1.22×10'-6'\\
</code></pre></div></div>

<p>より</p>

<div class="code-frame" data-lang="math"><div class="highlight"><pre><code>R=\frac{(1+(-1.22×10^{-6}Vs^2))×88}{δ}
</code></pre></div></div>

<h2>
<span id="定常円旋回半径r計算の補足" class="fragment"></span><a href="#%E5%AE%9A%E5%B8%B8%E5%86%86%E6%97%8B%E5%9B%9E%E5%8D%8A%E5%BE%84r%E8%A8%88%E7%AE%97%E3%81%AE%E8%A3%9C%E8%B6%B3"><i class="fa fa-link"></i></a>定常円旋回半径R計算の補足</h2>

<p>ある時間t1における舵角（ステアリングの角度)をδ1とすると、そこからΔt秒進んだ時間t2(=t1+Δt)における舵角δ2は以下のようになる</p>

<div class="code-frame" data-lang="math"><div class="highlight"><pre><code>δ2=δ1+ωΔt
</code></pre></div></div>

<p>ここで</p>

<div class="code-frame" data-lang="math"><div class="highlight"><pre><code>ω=103.29Ln(Cst)-209.04 
</code></pre></div></div>

<div class="code-frame" data-lang="math"><div class="highlight"><pre><code>Vs=2.0552Ctr+51.445
</code></pre></div></div>

<p>なので、これを</p>

<div class="code-frame" data-lang="math"><div class="highlight"><pre><code>R= \frac{(1+(-1.22×10^{-6}Vs^2))×88}{δ}
</code></pre></div></div>

<p>に代入すると</p>

<div class="code-frame" data-lang="math"><div class="highlight"><pre><code>R= \frac{(1+(-1.22×10^{-6}(2.0552Ctr+51.445)^2))×88}{(δ1+(103.29Ln(Cst)-209.04)Δt)}
</code></pre></div></div>

<p>となり、定常円旋回半径RはCstとCtrと経過時間Δtの関数として計算することができる</p>

<h1>
<span id="シミュレータ構想" class="fragment"></span><a href="#%E3%82%B7%E3%83%9F%E3%83%A5%E3%83%AC%E3%83%BC%E3%82%BF%E6%A7%8B%E6%83%B3"><i class="fa fa-link"></i></a>シミュレータ構想</h1>

<h2>
<span id="設計の構想" class="fragment"></span><a href="#%E8%A8%AD%E8%A8%88%E3%81%AE%E6%A7%8B%E6%83%B3"><i class="fa fa-link"></i></a>設計の構想</h2>

<p>ここでは設計指針、機能要求、非機能要求、を要求と呼ぶことにして、再度やりたいことをまとめた。</p>

<p>以下のような感じ</p>

<p>1.Windowsプラットフォームで動作すること</p>

<p>2.今後のSTEP2,STEP3への物理計算拡張を考慮した設計とすること</p>

<p>3.物理計算エンジン部分を取替え可能に設計すること</p>

<p>4.パスファインダーをパーツのアセンブリとして表現すること</p>

<p>5.3Dグラフィックスへの対応を考慮した設計とすること</p>

<p>6.複数台のパスファインダーの同時シミュレーションに対応すること</p>

<p>7.C++で記述されたパスファインダー制御コードと連携できること</p>

<p>8.新しい技術ネタを取り入れること<br>
やるからには単なるソフトの設計作業でなくて、何か新しいことSomething Newが欲しい。</p>

<p>9.とにかく動くこと<br>
2007年のゴールデンウィーク中に動くものを作る</p>

<p>10.見た目（も）重視<br>
シミュレータでインパクトを与えるのも目的。見た目もダサくならないように注意。</p>

<h2>
<span id="アーキテクチャを考える" class="fragment"></span><a href="#%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E3%82%92%E8%80%83%E3%81%88%E3%82%8B"><i class="fa fa-link"></i></a>アーキテクチャを考える</h2>

<p>アーキテクチャとはソフトウェア構造のラフスケッチ、要求からラフスケッチをおこす</p>

<h2>
<span id="スケッチの修正" class="fragment"></span><a href="#%E3%82%B9%E3%82%B1%E3%83%83%E3%83%81%E3%81%AE%E4%BF%AE%E6%AD%A3"><i class="fa fa-link"></i></a>スケッチの修正</h2>

<p><a href="https://camo.qiitausercontent.com/62ecbf86371417b2412c8640cc25b5707943d768/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f31616339613637392d373836642d666632302d316663622d6531613566623262346566312e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F1ac9a679-786d-ff20-1fcb-e1a5fb2b4ef1.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=6890b3888d86ac420d21b5c9527edb8e" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/1ac9a679-786d-ff20-1fcb-e1a5fb2b4ef1.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F1ac9a679-786d-ff20-1fcb-e1a5fb2b4ef1.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=32b84fb1ed9429de24587e73c74f48b0 1x" loading="lazy"></a></p>

<p><strong>責務</strong></p>

<ul>
<li><p>Algorithm<br>
パスファインダーのアルゴリズムを担当。シミュレータとは物理的にも完全に分離する。シミュレータに対するクライアントになる。シミュレータをCOMで作ってしまうのもありだ。</p></li>
<li><p>Wrapper<br>
スクラッチで作るので、実質インタフェースを定義して、インタフェースに対して実装しようねと言っている。</p></li>
<li>
<p>Simulator<br>
COMではなくて、.NETライブラリで実装する。実装レイヤーに近いほど覚えた知識があっというまに使えなくなる、時代の流れは早い。</p>

<ul>
<li>RCX Simulator
パスファインダーと、パスファインダーの外的環境、その２者の相互作用など。</li>
<li>Kinetics
動力学。学生のときには「ｘｘｘにおける動力学」みたいなレポートをよく作ったが今回は時間的におそらくまともな実装はできない。</li>
<li>Kinematics
運動学。こちらは、「モドキ」レベルで最低限実装する。</li>
</ul>
</li>
<li><p>Draw<br><br>
画面への描画を担当。RCX Simulatorと密接に関わる。</p></li>
</ul>

<h2>
<span id="要求に答える" class="fragment"></span><a href="#%E8%A6%81%E6%B1%82%E3%81%AB%E7%AD%94%E3%81%88%E3%82%8B"><i class="fa fa-link"></i></a>要求に答える</h2>

<h3>
<span id="要求とアーキテクチャ" class="fragment"></span><a href="#%E8%A6%81%E6%B1%82%E3%81%A8%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3"><i class="fa fa-link"></i></a>要求とアーキテクチャ</h3>

<p>要求から、アーキテクチャをすこし詳細化する。実装に入りたいので、もうパッケージを意識する</p>

<p><a href="https://camo.qiitausercontent.com/8e8274dc8908ad202128919df82b9b2370abee17/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f31366139643235372d326631642d636263342d343439352d3331373764633136323539652e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F16a9d257-2f1d-cbc4-4495-3177dc16259e.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=1a49b42fecd56e4ab5989faa69865941" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/16a9d257-2f1d-cbc4-4495-3177dc16259e.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F16a9d257-2f1d-cbc4-4495-3177dc16259e.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=e6fa1974fe367f3e4773b26c0f1b996b 1x" loading="lazy"></a></p>

<p>□内の数字はアーキテクチャに対応する、要求番号となる</p>

<ul>
<li><p>2.今後のSTEP2,STEP3への物理計算拡張を考慮した設計とする</p></li>
<li><p>3.物理計算エンジン部分を取替え可能に設計する<br>
2と3はパスファインダーと物理計算の分離および、物理計算と外部環境（たとえばコースとのインタファクション）との分離を意識して設計せよ、ということになる</p></li>
<li><p>4.パスファインダーをパーツのアセンブリとして表現すること<br>
パスファインダーの形状は毎年変わるかもしれないので、パーツ（たとえば１つのLEGOブロック）を組んでパスファインダーの形状を再現できるように設計しておく必要がある。ルールが変わってもいいように、違う形状のパスファインダーを同時に走らせるなんてこともやりたい。</p></li>
<li><p>5.3Dグラフィックスへの対応を考慮した設計とすること<br>
パスファインダーを描画するグラフィックはとりあえず2Dで作るが、3Dでも使えるように設計しておく。つまり2Dでも3Dでも同じ操作体系で使えるように設計せよ、との方針になる。Factory MethodとかTemplate Methodとか「サブクラスさんおまかせ」系のデザパタがつかえる。</p></li>
<li><p>6.複数台のパスファインダーの同時シミュレーションに対応すること<br>
PathFinderクラスをnewしてaddして大量生産できるよに設計する。OOP的にはあたりまえかもしれないが、最初に考えておかないと苦労する「あるある」ポイント。二十歳そこらの頃、robo-one用のシミュレータを作ったときは、ここで泣いた（笑）</p></li>
</ul>

<h2>
<span id="要求と開発環境" class="fragment"></span><a href="#%E8%A6%81%E6%B1%82%E3%81%A8%E9%96%8B%E7%99%BA%E7%92%B0%E5%A2%83"><i class="fa fa-link"></i></a>要求と開発環境</h2>

<p>もういちど考えを整理</p>

<table>
<tr>
<td></td>
<td>Algorithm</td>
<td>Wrapper</td>
<td>Simulator</td>
</tr>
<tr>
<td>プラットフォーム</td>
<td colspan="3">Windows .NET Framework2.0</td>
</tr>
<tr>
<td>(理由)</td>
<td colspan="3">MFCがタダで使える環境が無いので。</td>
</tr>
<tr>
<td>開発環境</td>
<td colspan="2">VC++ 2005 Express</td>
<td>VC# 2005 Express</td>
</tr>
<tr>
<td>（理由）</td>
<td colspan="2">ロジックはパスファインダー側と同じにしたいのでC++。C++/CLIをさわってみたい。</td>
<td>VC#のりファクタリング機能が使いたい(VC++には無いの）＆新しいことを覚えたい。</td>
</tr>
<tr>
<td>構成管理</td>
<td colspan="3">SubVersion</td>
</tr>
<tr>
<td>（理由）</td>
<td colspan="3">VSSが有料でSubVersionもTortoiseSVNも無料だから</td>
</tr>
<tr>
<td>C++とC#の連携</td>
<td colspan="3">.NETのコンポーネントにするので問題無いはず。Event/Delegateまわりには注意。</td>
</tr>
</table>

<ul>
<li>
<p>要求の整理</p>

<ul>
<li>1.Windowsプラットフォームで動作すること</li>
<li>7.C++で記述されたパスファインダー制御コードと連携できること
Windowsプラットフォームの選択肢を考える。パスファインダー用のマイコン(H8)コードはC言語 or C++言語を使うので、そっちと連携するにはWinでもC++を使うのがよさげ。</li>
<li>8.新しい技術ネタを取り入れること
(1).NET Framework 2.0ってどんな感じか。
(2)C++/CLIってどんな感じか。
(3)C#の新しい仕様（パーシャルクラスとか）ってどんな感じか。
(4)新しい開発環境</li>
<li>9.とにかく動くこと
RADする</li>
<li>10.見た目（も）重視</li>
</ul>
</li>
</ul>

<h1>
<span id="設計実装開始" class="fragment"></span><a href="#%E8%A8%AD%E8%A8%88%E5%AE%9F%E8%A3%85%E9%96%8B%E5%A7%8B"><i class="fa fa-link"></i></a>設計・実装開始</h1>

<h2>
<span id="開発環境インストール" class="fragment"></span><a href="#%E9%96%8B%E7%99%BA%E7%92%B0%E5%A2%83%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB"><i class="fa fa-link"></i></a>開発環境インストール</h2>

<p>Visual C# ExpressとVisual C++ Expressをダウンロード・インストールする。<br>
<a href="http://www.microsoft.com/japan/msdn/vstudio/express/default.aspx" class="autolink" rel="nofollow noopener" target="_blank">http://www.microsoft.com/japan/msdn/vstudio/express/default.aspx</a></p>

<p>SQL Server Express サーバは不要。Webからインストールするが、数時間かかった。</p>

<h2>
<span id="クラス設計" class="fragment"></span><a href="#%E3%82%AF%E3%83%A9%E3%82%B9%E8%A8%AD%E8%A8%88"><i class="fa fa-link"></i></a>クラス設計</h2>

<p><a href="https://camo.qiitausercontent.com/fb75ca5d0424628238e8de5fb44efed5ddb2b14d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f38336333343932302d383761322d323165622d626538642d6434363735613539666537392e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F83c34920-87a2-21eb-be8d-d4675a59fe79.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=2eb80cfa7f86b634597d32074791713c" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/83c34920-87a2-21eb-be8d-d4675a59fe79.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F83c34920-87a2-21eb-be8d-d4675a59fe79.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=bd4dec87a3b6b7ee63a0e523ad2481f8 1x" loading="lazy"></a></p>

<p>無償で使えるUMLツールJUDEを使わせていただいた。</p>

<p><a href="https://camo.qiitausercontent.com/a42716428abf9bd50720da67eaea89fffee02479/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f66333932313065612d663433662d346633642d366131652d3733666638393237653530372e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Ff39210ea-f43f-4f3d-6a1e-73ff8927e507.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=72f78dfbbb8bc21fc310f0faba9c8a7e" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/f39210ea-f43f-4f3d-6a1e-73ff8927e507.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Ff39210ea-f43f-4f3d-6a1e-73ff8927e507.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=6d4e966e1c146533667c6ae2994a195d 1x" loading="lazy"></a></p>

<h2>
<span id="パッケージgraphicmisawa2dparts" class="fragment"></span><a href="#%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8graphicmisawa2dparts"><i class="fa fa-link"></i></a>パッケージGraphic.Misawa2D.Parts</h2>

<p>とっかかりはグラフィックから。１つ１つのグラフィックパーツとなる。 2Dのパッケージ名は数字からはじめられないのでMisawa2Dで。。。<br>
.NETのSystem.Drawingと同じクラス名だとまぎらわしいのでPrefix、M2Dを使う。</p>

<p><a href="https://camo.qiitausercontent.com/7fb68c8b0002693d3aaa246df8c3b31289c01724/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f35393761346264652d353433372d663132322d366438362d6465363534383235656636312e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F597a4bde-5437-f122-6d86-de654825ef61.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=565d60a0e62829853db744bdd685c055" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/597a4bde-5437-f122-6d86-de654825ef61.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F597a4bde-5437-f122-6d86-de654825ef61.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=debb9c2ea694d71405109ccaf008b4fd 1x" loading="lazy"></a></p>

<p>.NET Frameworkに依存しないように書いてみる。C#はJavaに少し似ているので、後でAppletにも移植してみようという野心あり。モデルベースで書いておけば、苦労せずにJavaに持っていけそう。</p>

<h2>
<span id="パッケージgraphicmisawa2dmodel" class="fragment"></span><a href="#%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8graphicmisawa2dmodel"><i class="fa fa-link"></i></a>パッケージGraphic.Misawa2D.Model</h2>

<p><a href="https://camo.qiitausercontent.com/4258e2c0bf3798a375885775391d0f910951d2d9/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f65303636303665662d316231302d303431392d383336372d3333313566643165373766372e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fe06606ef-1b10-0419-8367-3315fd1e77f7.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=7862acd4102dfc035cd18bd8bcf34080" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/e06606ef-1b10-0419-8367-3315fd1e77f7.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fe06606ef-1b10-0419-8367-3315fd1e77f7.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=848e13f056f3992d8505f7776524de40 1x" loading="lazy"></a></p>

<p>複数パーツを組み合わせてPathFinderを構成するクラスとなる。PathFinderの形状は今のところ１つだけ。</p>

<h2>
<span id="実装" class="fragment"></span><a href="#%E5%AE%9F%E8%A3%85"><i class="fa fa-link"></i></a>実装</h2>

<p>3日かけてGraphicパッケージ（とその周辺）の0版実装が終わった。</p>

<ul>
<li>今回の教訓その１：マトリックス演算は
Utilクラスの座標変換にはマトリックスを使うが、これを.NETが持っているものを使うか、自分でマトリックス演算を書くか最後まで悩んだ末、自分で書くことに。Javan等、他プラットフォームに移植したいので特定言語にしかない便利系ライブラリをつかうと移植が面倒そうという理由。2Dの場合は2x2のいわゆる行列演算なのでまだ楽。</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/ef795a099635d18e96a3774fcd342a88fcc9b98b/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f33313663656534652d363933632d303630642d653731322d3465666530383131653364612e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F316cee4e-693c-060d-e712-4efe0811e3da.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=38db263608dc4e4af5e16138676975af" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/316cee4e-693c-060d-e712-4efe0811e3da.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F316cee4e-693c-060d-e712-4efe0811e3da.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=b1cc413da3c5db6fbdc1d405c189795f 1x" loading="lazy"></a></p>

<p>こんな感じ</p>

<div class="code-frame" data-lang="c#"><div class="highlight"><pre><code><span class="c1">//位置ベクトルの回転</span>
<span class="k">public</span> <span class="k">static</span> <span class="n">M2DVector</span> <span class="nf">RotateVector</span><span class="p">(</span><span class="n">M2DVector</span> <span class="n">srcVector</span><span class="p">,</span> <span class="kt">double</span> <span class="n">degree</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">double</span> <span class="n">radian</span> <span class="p">=</span> <span class="nf">GetRadianByDegree</span><span class="p">(</span><span class="n">degree</span><span class="p">);</span>

    <span class="n">M2DVector</span> <span class="n">destVector</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">M2DVector</span><span class="p">();</span>
    <span class="n">destVector</span><span class="p">.</span><span class="n">U</span> <span class="p">=</span> <span class="p">(</span><span class="n">srcVector</span><span class="p">.</span><span class="n">U</span><span class="p">)</span> <span class="p">*</span> <span class="n">Math</span><span class="p">.</span><span class="nf">Cos</span><span class="p">(</span><span class="n">radian</span><span class="p">)</span> <span class="p">-</span> <span class="p">(</span><span class="n">srcVector</span><span class="p">.</span><span class="n">V</span><span class="p">)</span> <span class="p">*</span> <span class="n">Math</span><span class="p">.</span><span class="nf">Sin</span><span class="p">(</span><span class="n">radian</span><span class="p">);</span>
    <span class="n">destVector</span><span class="p">.</span><span class="n">V</span> <span class="p">=</span> <span class="p">(</span><span class="n">srcVector</span><span class="p">.</span><span class="n">U</span><span class="p">)</span> <span class="p">*</span> <span class="n">Math</span><span class="p">.</span><span class="nf">Sin</span><span class="p">(</span><span class="n">radian</span><span class="p">)</span> <span class="p">+</span> <span class="p">(</span><span class="n">srcVector</span><span class="p">.</span><span class="n">V</span><span class="p">)</span> <span class="p">*</span> <span class="n">Math</span><span class="p">.</span><span class="nf">Cos</span><span class="p">(</span><span class="n">radian</span><span class="p">);</span>

    <span class="k">return</span> <span class="n">destVector</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<ul>
<li>今回の教訓その2：プロパティを使うかどうか
C#にはCOMの時代よろしくプロパティという概念がある。アクセッサをメソッドを合理的に扱うというものだが、これを使うと便利だけど、移植性ややきになる。</li>
</ul>

<p>モデルベースといいつつも、コードそのまま流用ももくろむ。</p>

<p>こんな感じ。</p>

<div class="code-frame" data-lang="c#"><div class="highlight"><pre><code>
<span class="k">public</span> <span class="kt">double</span> <span class="n">U</span>
<span class="p">{</span>
    <span class="k">set</span> <span class="p">{</span> <span class="k">this</span><span class="p">.</span><span class="n">_relativeU</span> <span class="p">=</span> <span class="k">value</span><span class="p">;</span> <span class="p">}</span>
    <span class="k">get</span> <span class="p">{</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="n">_relativeU</span><span class="p">;</span> <span class="p">}</span>
<span class="p">}</span>
<span class="k">public</span> <span class="kt">double</span> <span class="n">V</span>
<span class="p">{</span>
    <span class="k">set</span> <span class="p">{</span> <span class="k">this</span><span class="p">.</span><span class="n">_relativeV</span> <span class="p">=</span> <span class="k">value</span><span class="p">;</span> <span class="p">}</span>
    <span class="k">get</span> <span class="p">{</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="n">_relativeV</span><span class="p">;</span> <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h2>
<span id="実行イメージ" class="fragment"></span><a href="#%E5%AE%9F%E8%A1%8C%E3%82%A4%E3%83%A1%E3%83%BC%E3%82%B8"><i class="fa fa-link"></i></a>実行イメージ</h2>

<p>デフォルメされたパスファインダーが動いた</p>

<p><a href="https://camo.qiitausercontent.com/65094a93ccdd7f6891cd9d1db5dad051cbc3a9e4/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f38363235363737632d393236662d306538632d623337352d3639316530353266333038302e676966" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F8625677c-926f-0e8c-b375-691e052f3080.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=38a8d1384c6fe0ae0f853a17c41e8a67" alt="pathfinder0.gif" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/8625677c-926f-0e8c-b375-691e052f3080.gif" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F8625677c-926f-0e8c-b375-691e052f3080.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=9def5e797ceea2d96b664a92ce8ccd8b 1x" loading="lazy"></a></p>

<h2>
<span id="genericは便利" class="fragment"></span><a href="#generic%E3%81%AF%E4%BE%BF%E5%88%A9"><i class="fa fa-link"></i></a>Genericは便利</h2>

<p>C#でもGenericタイプが使えるようになった。Javaよりやや遅れて。コレクションではわかりやすくその恩恵にあやかることができる。</p>

<div class="code-frame" data-lang="c#"><div class="highlight"><pre><code><span class="k">private</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">M2DVertex</span><span class="p">&gt;</span> <span class="n">_lstVertex</span><span class="p">;</span>
</code></pre></div></div>

<p>型パラメータとしてM2DVertexを指定するので、このListはM2DVertex用のリストということになる。いちいちキャストしなくて済むのでとっても便利。</p>

<h2>
<span id="クラス設計-1" class="fragment"></span><a href="#%E3%82%AF%E3%83%A9%E3%82%B9%E8%A8%AD%E8%A8%88-1"><i class="fa fa-link"></i></a>クラス設計</h2>

<h2>
<span id="パッケージetrobosimulator" class="fragment"></span><a href="#%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8etrobosimulator"><i class="fa fa-link"></i></a>パッケージEtrobo.Simulator</h2>

<p>パスファインダー、コース、論理的なモーターなどを設計する</p>

<p><a href="https://camo.qiitausercontent.com/98b403ba433a2351728248bf8bba15aceae11901/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f65323966613566382d626266362d366437352d336437642d6337666661313763383037622e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fe29fa5f8-bbf6-6d75-3d7d-c7ffa17c807b.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=c828c58bad78c1b2b1e548d3ce406d60" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/e29fa5f8-bbf6-6d75-3d7d-c7ffa17c807b.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fe29fa5f8-bbf6-6d75-3d7d-c7ffa17c807b.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=ecae4909a443dc12f3048f4a2b376bef 1x" loading="lazy"></a></p>

<p>と最初はこうしたが、無意味に一般化してもしょうがないので、下のような現実案とすることにする。またSensorは分け合って独立事象にした。</p>

<p><a href="https://camo.qiitausercontent.com/a0e5294c6fefc5e5bdf81101d8eba6d0db162309/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f38306436383361382d356264352d383331382d393435662d3065633963326334666235392e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F80d683a8-5bd5-8318-945f-0ec9c2c4fb59.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=6d71f9b4fa8629d5bbd6630960265fac" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/80d683a8-5bd5-8318-945f-0ec9c2c4fb59.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F80d683a8-5bd5-8318-945f-0ec9c2c4fb59.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=c6d23b89094956849923cec2f1ad9c5e 1x" loading="lazy"></a></p>

<p>あとでC++用にさらにWrapperをかぶせる予定なので、あまりしつこい設計にしたくないというのが今回の現実案の理由となる。</p>

<h2>
<span id="パッケージetrobokinematics" class="fragment"></span><a href="#%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8etrobokinematics"><i class="fa fa-link"></i></a>パッケージEtrobo.Kinematics</h2>

<p>さらに、パスファインダーの動作を計算する運動学用（切り替え可能）のクラスを追加した。切り替え可能だが現状ではAggregateではなくNavigate扱いにしておく。設計をややこしくしたくないので、物理計算を切り替えたいときはこのクラスのサブクラスをつくっていって、PathFinderからつかうときは、クラス名そのものを書き換えることにする。<br>
ModelBaseのModelは物理モデルを意識している。</p>

<p><a href="https://camo.qiitausercontent.com/cef35f776e10a309eac4aedce3bf1e4e347662f4/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f38343535386532622d613761362d663134642d613436322d3762356466636435303330302e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F84558e2b-a7a6-f14d-a462-7b5dfcd50300.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=2773e042e3b29b20e0f7d1df3121f77a" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/84558e2b-a7a6-f14d-a462-7b5dfcd50300.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F84558e2b-a7a6-f14d-a462-7b5dfcd50300.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=a47d86d7d9085f50ce84fb9324cdc354 1x" loading="lazy"></a></p>

<h2>
<span id="実装-1" class="fragment"></span><a href="#%E5%AE%9F%E8%A3%85-1"><i class="fa fa-link"></i></a>実装</h2>

<h3>
<span id="親のコンストラクタでdelegate使う" class="fragment"></span><a href="#%E8%A6%AA%E3%81%AE%E3%82%B3%E3%83%B3%E3%82%B9%E3%83%88%E3%83%A9%E3%82%AF%E3%82%BF%E3%81%A7delegate%E4%BD%BF%E3%81%86"><i class="fa fa-link"></i></a>親のコンストラクタでdelegate使う</h3>

<p>delegateを使ってトリッキーな継承をやってみた。<br>
従来のC++ではオブジェクトを作ってから、メソッドの関数ポインタを取得してきて、それを使用側であてがって使ったりしたところが、delegateと親クラスをあらわすbaseの柔軟性により１つにまとめて書いた。</p>

<div class="code-frame" data-lang="c#">
<div class="code-lang"><span class="bold">Motor.cs</span></div>
<div class="highlight"><pre><code>
<span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Text</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">Misawat.Etrobo.Simulator</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">Motor</span>
    <span class="p">{</span>
        <span class="c1">//SetMotorSpeedメソッドのデリゲート変数</span>
        <span class="n">SetMotorSpeed</span> <span class="n">_func_SetMotorSpeed</span><span class="p">;</span>

        <span class="c1">//回転方向 1:正転 -1:逆転</span>
        <span class="kt">int</span> <span class="n">_direction</span> <span class="p">=</span> <span class="m">1</span><span class="p">;</span>

        <span class="c1">//回転速度</span>
        <span class="kt">int</span> <span class="n">_speed</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span>

        <span class="k">public</span> <span class="nf">Motor</span><span class="p">(</span><span class="n">SetMotorSpeed</span> <span class="n">func_SetMotorSpeed</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">_func_SetMotorSpeed</span> <span class="p">=</span> <span class="n">func_SetMotorSpeed</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">public</span> <span class="k">void</span> <span class="nf">Foward</span><span class="p">(</span><span class="kt">int</span> <span class="n">speed</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">_speed</span> <span class="p">=</span> <span class="n">speed</span><span class="p">;</span>
            <span class="n">_direction</span> <span class="p">=</span> <span class="m">1</span><span class="p">;</span>
            <span class="nf">_func_SetMotorSpeed</span><span class="p">((</span><span class="kt">double</span><span class="p">)(</span><span class="n">_direction</span> <span class="p">*</span> <span class="n">_speed</span><span class="p">));</span>
        <span class="p">}</span>
        <span class="k">public</span> <span class="k">void</span> <span class="nf">Reverse</span><span class="p">(</span><span class="kt">int</span> <span class="n">speed</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">_speed</span> <span class="p">=</span> <span class="n">speed</span><span class="p">;</span>
            <span class="n">_direction</span> <span class="p">=</span> <span class="p">-</span><span class="m">1</span><span class="p">;</span>
            <span class="nf">_func_SetMotorSpeed</span><span class="p">((</span><span class="kt">double</span><span class="p">)(</span><span class="n">_direction</span> <span class="p">*</span> <span class="n">_speed</span><span class="p">));</span>
        <span class="p">}</span>
        <span class="k">public</span> <span class="k">void</span> <span class="nf">Speed</span><span class="p">(</span><span class="kt">int</span> <span class="n">speed</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">_speed</span> <span class="p">=</span> <span class="n">speed</span><span class="p">;</span>
            <span class="nf">_func_SetMotorSpeed</span><span class="p">((</span><span class="kt">double</span><span class="p">)(</span><span class="n">_direction</span> <span class="p">*</span> <span class="n">_speed</span><span class="p">));</span>
        <span class="p">}</span>

        <span class="k">public</span> <span class="k">void</span> <span class="nf">Brake</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="c1">//TBD</span>
        <span class="p">}</span>
        <span class="k">public</span> <span class="k">void</span> <span class="nf">Off</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="c1">//TBD</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<div class="code-frame" data-lang="c#">
<div class="code-lang"><span class="bold">SteeringMotor.cs</span></div>
<div class="highlight"><pre><code>
<span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Text</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">Misawat.Etrobo.Simulator</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">SteeringMotor</span> <span class="p">:</span> <span class="n">Motor</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="nf">SteeringMotor</span><span class="p">(</span><span class="n">PathFinder</span> <span class="n">pathFinder</span><span class="p">)</span>
            <span class="p">:</span> <span class="k">base</span><span class="p">(</span><span class="n">pathFinder</span><span class="p">.</span><span class="n">SetSteeringMotorSpeed</span><span class="p">)</span>
        <span class="p">{</span>
        <span class="p">}</span>

    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<h2>
<span id="graphicmisawa2dpartsを振り返る" class="fragment"></span><a href="#graphicmisawa2dparts%E3%82%92%E6%8C%AF%E3%82%8A%E8%BF%94%E3%82%8B"><i class="fa fa-link"></i></a>Graphic.Misawa2D.Partsを振り返る</h2>

<p>実装したところの修正をかけていて、クラス図の修正をした</p>

<p><a href="https://camo.qiitausercontent.com/90d40b6f96a2b9b73ade7f543534107020a2f497/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f63666431636331332d356364392d663161392d396162352d3231343937333231346564662e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fcfd1cc13-5cd9-f1a9-9ab5-214973214edf.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=e8e78e0a64c20901441aa86ad9aad1a4" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/cfd1cc13-5cd9-f1a9-9ab5-214973214edf.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fcfd1cc13-5cd9-f1a9-9ab5-214973214edf.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=197e682a1b2caf1b98aa72830d86202b 1x" loading="lazy"></a></p>

<p>グラフィックパーツはそれぞれ子要素をもっており１つのモデルをくみ上げるときには複数のグラフィックパーツの親子関係を設定してツリーを作っていく。</p>

<p>つまり、再帰的にツリーを構成していく部分(build())をcompositeパターンとして実現しているので、クラス図に少し補足をいれた。</p>

<h2>
<span id="実行イメージ-1" class="fragment"></span><a href="#%E5%AE%9F%E8%A1%8C%E3%82%A4%E3%83%A1%E3%83%BC%E3%82%B8-1"><i class="fa fa-link"></i></a>実行イメージ</h2>

<p>赤い点が旋回中心、円が定常円旋回軌道となる。</p>

<p>ステアリングの角度に対して定常円旋回計算式は正常に動作した模様。<br>
最後はステアリングの限界舵角を超えているので、旋回円は無効となる。</p>

<p><a href="https://camo.qiitausercontent.com/884cc45e11935e058b85ec1eb1193fa36e5e438b/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f31636665346161332d613865642d633831622d646363332d6331383930383162343366332e676966" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F1cfe4aa3-a8ed-c81b-dcc3-c189081b43f3.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=226f18bb21e099c423a3013c3e1f05f1" alt="ani_radius.gif" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/1cfe4aa3-a8ed-c81b-dcc3-c189081b43f3.gif" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F1cfe4aa3-a8ed-c81b-dcc3-c189081b43f3.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=bbd31b30f059d8996789dd7012cd00bb 1x" loading="lazy"></a></p>

<h2>
<span id="離散化にともなうδtの取り扱い" class="fragment"></span><a href="#%E9%9B%A2%E6%95%A3%E5%8C%96%E3%81%AB%E3%81%A8%E3%82%82%E3%81%AA%E3%81%86%CE%B4t%E3%81%AE%E5%8F%96%E3%82%8A%E6%89%B1%E3%81%84"><i class="fa fa-link"></i></a>離散化にともなうΔtの取り扱い</h2>

<p>物理シミュレーションを行うときには、必ず物理方程式の離散化を考えるが、今回は軽量シミュレータなので、運動方程式といっても一階微分方程式くらいのもの。微分方程式は、漸化式による差分方程式を作ってシミュレーションするが、ここで注意しなくてはならないのは、位置を更新する際の経過時間Δtとなる。</p>

<p>一般にΔtは小さいほど精度良くシミュレーションできるがこのシミュレータでは、パスファインダーに入るセンサー情報のサンプリング周期とΔtを同期させている為、なるべくΔtはシミュレータのサンプリング周期にあわせたい。</p>

<p>Δtが100msecとか、あんまり大きいとまずいなと思い実機でサンプリング周期をはかってみたところ5msecであった。<br>
最高速度500mm/s程度のスケール感なら、まあいいかということで、Δtを5msecとした。あとはこの状態でシミュレーションをして実機との挙動があまりに違っていたらΔtの長さの変更や、Δtとシミュレータのサンプリング周期の同期をやめるなどの判断をしていきたい。最後は現物あわせ</p>

<h2>
<span id="コースとのインタラクション" class="fragment"></span><a href="#%E3%82%B3%E3%83%BC%E3%82%B9%E3%81%A8%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%BF%E3%83%A9%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3"><i class="fa fa-link"></i></a>コースとのインタラクション</h2>

<p><a href="https://camo.qiitausercontent.com/90fe046f34db2a1be4e5514979848a2a9482166b/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f31313438353164612d386265632d353962342d616330312d6565373562363730333735662e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F114851da-8bec-59b4-ac01-ee75b670375f.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=6bf4550a2a88e4024ca212549b87d6bf" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/114851da-8bec-59b4-ac01-ee75b670375f.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F114851da-8bec-59b4-ac01-ee75b670375f.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=f06625b9c9cbf9c44f2f4b0af21a345b 1x" loading="lazy"></a></p>

<p>コースは1mmにつき1pixelとして取り扱う。つまり1m×1mだと1000pixel x 1000pixelのコース画像を用意する。</p>

<h2>
<span id="コースの色情報の抽出" class="fragment"></span><a href="#%E3%82%B3%E3%83%BC%E3%82%B9%E3%81%AE%E8%89%B2%E6%83%85%E5%A0%B1%E3%81%AE%E6%8A%BD%E5%87%BA"><i class="fa fa-link"></i></a>コースの色情報の抽出</h2>

<p>パスファインダーの先端部分にある光センサーの座標を計算し、その座標に対応するコース画像上の1pixel x 1pixelの色情報を取得して、LightSensorの値にセットするというシンプルなロジック。</p>

<p>シミュレータ部分のコーディングはひとまず終わり。<br>
リバースかけてみると。</p>

<p><a href="https://camo.qiitausercontent.com/7a04ec7cb87eda607479a5c282efdc696f9d7f86/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f66616466313066612d613832312d353565382d326666332d3561306132336239336139622e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Ffadf10fa-a821-55e8-2ff3-5a0a23b93a9b.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=bab6c279e1d4b45651c684041a0f6397" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/fadf10fa-a821-55e8-2ff3-5a0a23b93a9b.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Ffadf10fa-a821-55e8-2ff3-5a0a23b93a9b.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=027a302a6f6f20cda23563d1852b567b 1x" loading="lazy"></a></p>

<h2>
<span id="実行イメージ-2" class="fragment"></span><a href="#%E5%AE%9F%E8%A1%8C%E3%82%A4%E3%83%A1%E3%83%BC%E3%82%B8-2"><i class="fa fa-link"></i></a>実行イメージ</h2>

<p><a href="https://camo.qiitausercontent.com/9cbdbec32c48f11ccdeab32e8a86a8cb233d31ec/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f64373033656666662d373030302d313437352d326262352d6338663431626138396133312e676966" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fd703efff-7000-1475-2bb5-c8f41ba89a31.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=cc8d83c925fe65d271808e0aff05d29a" alt="mova.gif" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/d703efff-7000-1475-2bb5-c8f41ba89a31.gif" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fd703efff-7000-1475-2bb5-c8f41ba89a31.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=122f5bc3189d6435ce76ca5e51ca055a 1x" loading="lazy"></a></p>

<h1>
<span id="シミュレータを使ったコーディング" class="fragment"></span><a href="#%E3%82%B7%E3%83%9F%E3%83%A5%E3%83%AC%E3%83%BC%E3%82%BF%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%9F%E3%82%B3%E3%83%BC%E3%83%87%E3%82%A3%E3%83%B3%E3%82%B0"><i class="fa fa-link"></i></a>シミュレータを使ったコーディング</h1>

<h2>
<span id="cでシミュレータプログラムを作る" class="fragment"></span><a href="#c%E3%81%A7%E3%82%B7%E3%83%9F%E3%83%A5%E3%83%AC%E3%83%BC%E3%82%BF%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%A0%E3%82%92%E4%BD%9C%E3%82%8B"><i class="fa fa-link"></i></a>C++でシミュレータプログラムを作る</h2>

<p>C++でパスファインダーに搭載するプログラムを意識して、プログラミングをしていく。<br>
C++といっても.NET2.0のC++はちょっと違うので「H8用のコテコテのC++とVisual C++で同じコード使いたい」ときには色々と注しないといけない。</p>

<p>こういうところが面白い。</p>

<p>.NET Framework 2.0 のC++はC++/CLIに準拠していて、今までのC++とは文法の記法が違うところもあり注意が必要。.NET1.1から.NET2.0（C++/CLI)でポインタが*から^になったのにはちょっと驚いた。</p>

<p>ほかにも、Visual C++ 6.0時代はnmakeでmakefileベースでビルドできたのに、VC2005みてたらどうやらMSBuildというツールに変わった模様。Apache ANTっぽい感じになっている。</p>

<h2>
<span id="managed-cとoldsyntax" class="fragment"></span><a href="#managed-c%E3%81%A8oldsyntax"><i class="fa fa-link"></i></a>Managed C++とOldSyntax</h2>

<p>.NET時代のc++はUnmanagedとManagedの２つがあるが、C#でつくってきたシミュレータライブラリ(SimEtrLib.dllという名前にした)がこれをManagedなライブラリとしたので、C++もManaged C++を使う。また、C++/cliで導入された構文でなくて、C++の構文を使わないとパスファインダーのコードと連携ができなさそうなので、構文はC++を使う</p>

<p>.NET Framework 2.0のManagedなコンパイラでは、デフォルトでC++/CLIとなっているので、オプションで古い構文(OldSyntax)を指定してやる必要がある。</p>

<h2>
<span id="ライブラリを用いたコーディング" class="fragment"></span><a href="#%E3%83%A9%E3%82%A4%E3%83%96%E3%83%A9%E3%83%AA%E3%82%92%E7%94%A8%E3%81%84%E3%81%9F%E3%82%B3%E3%83%BC%E3%83%87%E3%82%A3%E3%83%B3%E3%82%B0"><i class="fa fa-link"></i></a>ライブラリを用いたコーディング</h2>

<p>コード例は、イメージをつかむために掲載する。ヘッダ読めばわかるところなどは省略。</p>

<p>走行アルゴリズム部分(RunningLogic)のコード<br>
これはH8用のBrickOS APIのシグネチャを真似て作ったもので、これを使ってH8側とWindows側でアルゴリズム部分のソースコードを同一のものにすることができる。</p>

<div class="code-frame" data-lang="c++">
<div class="code-lang"><span class="bold">RunningLogic</span></div>
<div class="highlight"><pre><code>
<span class="o">-------</span><span class="n">RunningLogic</span><span class="p">.</span><span class="n">h</span><span class="o">----------------------------------------</span>
<span class="cp">#pragma once
</span><span class="k">using</span> <span class="k">namespace</span> <span class="n">Misawat</span><span class="o">::</span><span class="n">Etrobo</span><span class="o">::</span><span class="n">Simulator</span><span class="p">;</span>

<span class="k">public</span> <span class="n">__gc</span> <span class="k">class</span> <span class="nc">RunningLogic</span>
<span class="p">{</span>
<span class="nl">public:</span>
    <span class="n">RunningLogic</span><span class="p">(</span><span class="n">PathFinder</span><span class="o">*</span> <span class="n">pathFinder</span><span class="p">);</span>
    <span class="o">~</span><span class="n">RunningLogic</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
    <span class="kt">void</span> <span class="n">RunningLogic</span><span class="o">::</span><span class="n">Run</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>

<span class="nl">private:</span>
    <span class="n">RunningLogic</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span> 
    <span class="n">PathFinder</span><span class="o">*</span> <span class="n">pathFinder</span><span class="p">;</span>
    <span class="n">LightSensor</span><span class="o">*</span> <span class="n">lightSensor</span><span class="p">;</span>
    <span class="n">TouchSensor</span><span class="o">*</span> <span class="n">touchSensor</span><span class="p">;</span>
    <span class="n">Motor</span><span class="o">*</span> <span class="n">tractionMotor</span><span class="p">;</span>
    <span class="n">Motor</span><span class="o">*</span> <span class="n">steeringMotor</span><span class="p">;</span>
<span class="p">};</span>

<span class="o">-------</span><span class="n">RunningLogic</span><span class="p">.</span><span class="n">cpp</span><span class="o">----------------------------------------</span>

<span class="cp">#include "StdAfx.h"
#include "RunningLogic.h"
</span>
<span class="n">RunningLogic</span><span class="o">::</span><span class="n">RunningLogic</span><span class="p">(</span><span class="n">PathFinder</span><span class="o">*</span> <span class="n">pathFinder</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">lightSensor</span> <span class="o">=</span> <span class="n">pathFinder</span><span class="o">-&gt;</span><span class="n">GetLightSensor</span><span class="p">();</span>
    <span class="n">touchSensor</span> <span class="o">=</span> <span class="n">pathFinder</span><span class="o">-&gt;</span><span class="n">GetTouchSensor</span><span class="p">();</span>
    <span class="n">tractionMotor</span> <span class="o">=</span> <span class="n">pathFinder</span><span class="o">-&gt;</span><span class="n">GetTractionMotor</span><span class="p">();</span>
    <span class="n">steeringMotor</span> <span class="o">=</span> <span class="n">pathFinder</span><span class="o">-&gt;</span><span class="n">GetSteeringMotor</span><span class="p">();</span>
<span class="p">}</span>

<span class="c1">//↓ここからが走行アルゴリズムそのもの</span>
<span class="kt">void</span> <span class="n">RunningLogic</span><span class="o">::</span><span class="n">Run</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">tractionMotor</span><span class="o">-&gt;</span><span class="n">Foward</span><span class="p">(</span><span class="mi">255</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">lightSensor</span><span class="o">-&gt;</span><span class="n">Get</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mi">50</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">steeringMotor</span><span class="o">-&gt;</span><span class="n">Foward</span><span class="p">(</span><span class="mi">255</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="n">steeringMotor</span><span class="o">-&gt;</span><span class="n">Reverse</span><span class="p">(</span><span class="mi">255</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<p>※クラスをnewするときの_gcキーワードは、ガベージコレクションの対象とするオブジェクトですよということを宣言している。そのため、オブジェクトを破棄するときに明示的にdeleteする必要は無い。</p>

<p>シミュレータ部分のコード<br>
PathFinderオブジェクトをCreateして、SimulatorPlatformにAddすると、コース上にパスファインダーが出現する。<br>
何台でもCreateしてAddできる。<br>
RunningLogicクラスでは、LightSensorの値（コースの白黒値）を読んで、TractionMotorやSteeringMotorを制御する。</p>

<div class="code-frame" data-lang="c++">
<div class="code-lang"><span class="bold">Simulation.cpp</span></div>
<div class="highlight"><pre><code><span class="o">-------</span><span class="n">Simulation</span><span class="p">.</span><span class="n">h</span><span class="o">----------------------------------------</span>
<span class="cp">#pragma once
</span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">System</span><span class="p">;</span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">System</span><span class="o">::</span><span class="n">Text</span><span class="p">;</span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">Misawat</span><span class="o">::</span><span class="n">Etrobo</span><span class="o">::</span><span class="n">Simulator</span><span class="p">;</span>

<span class="k">public</span> <span class="n">__gc</span> <span class="k">class</span> <span class="nc">Simulation</span>
    <span class="p">{</span>
    <span class="nl">public:</span>
        <span class="n">Simulation</span><span class="p">(</span><span class="n">System</span><span class="o">::</span><span class="n">Drawing</span><span class="o">::</span><span class="n">Graphics</span><span class="o">*</span> <span class="n">myGraphics</span><span class="p">);</span>
        <span class="k">virtual</span> <span class="o">~</span><span class="n">Simulation</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
        <span class="kt">void</span> <span class="n">Simulation</span><span class="o">::</span><span class="n">Start</span><span class="p">();</span>
        <span class="kt">void</span> <span class="n">Simulation</span><span class="o">::</span><span class="n">Stop</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
    <span class="nl">private:</span>
        <span class="n">Simulation</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
        <span class="kt">bool</span> <span class="n">running</span><span class="p">;</span>
        <span class="n">SimulatorPlatform</span><span class="o">*</span> <span class="n">_simulatorPlatform</span><span class="p">;</span>
        <span class="n">System</span><span class="o">::</span><span class="n">Drawing</span><span class="o">::</span><span class="n">Graphics</span><span class="o">*</span> <span class="n">_myGraphics</span><span class="p">;</span>
    <span class="p">};</span>
 <span class="o">-------</span><span class="n">Simulation</span><span class="p">.</span><span class="n">cpp</span><span class="o">----------------------------------------</span>
<span class="cp">#include "StdAfx.h"
#include "Simulation.h"
#include "RunningLogic.h"
</span>
<span class="n">Simulation</span><span class="o">::</span><span class="n">Simulation</span><span class="p">(</span><span class="n">System</span><span class="o">::</span><span class="n">Drawing</span><span class="o">::</span><span class="n">Graphics</span><span class="o">*</span> <span class="n">myGraphics</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">_myGraphics</span><span class="o">=</span><span class="n">myGraphics</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="n">Simulation</span><span class="o">::</span><span class="n">Start</span><span class="p">()</span>
<span class="p">{</span>
    <span class="c1">//SimulatorPlatform(コースの画像データ,グラフィックコンテクスト,描画時の倍率)</span>
    <span class="n">_simulatorPlatform</span> <span class="o">=</span> <span class="n">__gc</span> <span class="k">new</span> <span class="n">SimulatorPlatform</span><span class="p">(</span><span class="s">".</span><span class="se">\\</span><span class="s">test_course01.png"</span><span class="p">,</span> <span class="n">_myGraphics</span><span class="p">,</span><span class="mf">0.6</span><span class="p">);</span>

    <span class="n">PathFinder</span><span class="o">*</span> <span class="n">pathFinder</span> <span class="o">=</span> <span class="n">_simulatorPlatform</span><span class="o">-&gt;</span><span class="n">CreatePathFinder</span><span class="p">(</span><span class="mi">2400</span><span class="p">,</span> <span class="mi">500</span><span class="p">,</span> <span class="mi">90</span><span class="p">);</span>
    <span class="n">pathFinder</span><span class="o">-&gt;</span><span class="n">SetBodyColor</span><span class="p">(</span><span class="n">System</span><span class="o">::</span><span class="n">Drawing</span><span class="o">::</span><span class="n">Color</span><span class="o">::</span><span class="n">FromArgb</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">));</span>

    <span class="n">RunningLogic</span><span class="o">*</span> <span class="n">pathFinderLogic</span><span class="o">=</span><span class="n">__gc</span> <span class="k">new</span> <span class="n">RunningLogic</span><span class="p">(</span><span class="n">pathFinder</span><span class="p">);</span>

    <span class="n">running</span><span class="o">=</span><span class="nb">true</span><span class="p">;</span>

    <span class="k">while</span><span class="p">(</span><span class="n">running</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">System</span><span class="o">::</span><span class="n">Windows</span><span class="o">::</span><span class="n">Forms</span><span class="o">::</span><span class="n">Application</span><span class="o">::</span><span class="n">DoEvents</span><span class="p">();</span>
        <span class="n">_simulatorPlatform</span><span class="o">-&gt;</span><span class="n">Update</span><span class="p">(</span><span class="mf">0.01</span><span class="p">);</span>
        <span class="n">pathFinderLogic</span><span class="o">-&gt;</span><span class="n">Run</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<h2>
<span id="いろいろなシミュレーション条件" class="fragment"></span><a href="#%E3%81%84%E3%82%8D%E3%81%84%E3%82%8D%E3%81%AA%E3%82%B7%E3%83%9F%E3%83%A5%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E6%9D%A1%E4%BB%B6"><i class="fa fa-link"></i></a>いろいろなシミュレーション条件</h2>

<h2>
<span id="情報を表示しながら" class="fragment"></span><a href="#%E6%83%85%E5%A0%B1%E3%82%92%E8%A1%A8%E7%A4%BA%E3%81%97%E3%81%AA%E3%81%8C%E3%82%89"><i class="fa fa-link"></i></a>情報を表示しながら</h2>

<p><a href="https://camo.qiitausercontent.com/fab4d404cff6b55af853bbe01beab3e0f10c9d5c/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f30303335356431302d613331392d326638662d373664662d6534633936386664343536622e676966" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F00355d10-a319-2f8f-76df-e4c968fd456b.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=3c6b59e7a67a1fd1dce36c35295f6020" alt="info.gif" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/00355d10-a319-2f8f-76df-e4c968fd456b.gif" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F00355d10-a319-2f8f-76df-e4c968fd456b.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=998b19a904903faad4cb626e4487f64e 1x" loading="lazy"></a></p>

<h2>
<span id="2台同時走行" class="fragment"></span><a href="#2%E5%8F%B0%E5%90%8C%E6%99%82%E8%B5%B0%E8%A1%8C"><i class="fa fa-link"></i></a>2台同時走行</h2>

<p>方向を変えて２台で。</p>

<p><a href="https://camo.qiitausercontent.com/427047d6f0033e7e9e5a8f74dd692a8210bb7612/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f30373664353132632d363631662d316463302d353962642d3364663361613665636537332e676966" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F076d512c-661f-1dc0-59bd-3df3aa6ece73.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=42c52031de985b430a5527798b0e8cc3" alt="2pf.gif" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/076d512c-661f-1dc0-59bd-3df3aa6ece73.gif" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F076d512c-661f-1dc0-59bd-3df3aa6ece73.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=f64d3a29504ca2b703305c999d6a2d79 1x" loading="lazy"></a></p>

<h2>
<span id="4台同時走行" class="fragment"></span><a href="#4%E5%8F%B0%E5%90%8C%E6%99%82%E8%B5%B0%E8%A1%8C"><i class="fa fa-link"></i></a>4台同時走行</h2>

<p>カラフルに4台で。にぎやか。</p>

<p><a href="https://camo.qiitausercontent.com/1e1d4e5377ab3bc7772e0a05dee9575149da7126/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f30383235653264342d643961652d616462302d666237312d3763633638323034373536652e676966" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F0825e2d4-d9ae-adb0-fb71-7cc68204756e.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=179ce27ba81022e24e9450d4f253089b" alt="4pf.gif" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/0825e2d4-d9ae-adb0-fb71-7cc68204756e.gif" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F0825e2d4-d9ae-adb0-fb71-7cc68204756e.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=115b555948d72989e7e5eaaacb2ff7c5 1x" loading="lazy"></a></p>

<p>これでシミュレータV1.0は完成<br>
あとは、本番コースの画像で、ちゃんとしたシミュレーションロジックでシミュレーションをまわしてみる。</p>

<h1>
<span id="コース画像の準備" class="fragment"></span><a href="#%E3%82%B3%E3%83%BC%E3%82%B9%E7%94%BB%E5%83%8F%E3%81%AE%E6%BA%96%E5%82%99"><i class="fa fa-link"></i></a>コース画像の準備</h1>

<h2>
<span id="コースの大きさ" class="fragment"></span><a href="#%E3%82%B3%E3%83%BC%E3%82%B9%E3%81%AE%E5%A4%A7%E3%81%8D%E3%81%95"><i class="fa fa-link"></i></a>コースの大きさ</h2>

<p>5460mm×3640mm </p>

<h2>
<span id="コースのダウンロード" class="fragment"></span><a href="#%E3%82%B3%E3%83%BC%E3%82%B9%E3%81%AE%E3%83%80%E3%82%A6%E3%83%B3%E3%83%AD%E3%83%BC%E3%83%89"><i class="fa fa-link"></i></a>コースのダウンロード</h2>

<p>ETロボコンのサイトからコースのＰＤＦをダウンロードする</p>

<p><a href="https://camo.qiitausercontent.com/8f12fe95cfe3be5a9c1621e9e3819bb16da44932/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f31373931323535322d313134362d613666352d373036332d3162643931393035653035372e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F17912552-1146-a6f5-7063-1bd91905e057.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=56bd72e1af0e31849b6328c1c86ed976" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/17912552-1146-a6f5-7063-1bd91905e057.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F17912552-1146-a6f5-7063-1bd91905e057.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=7c95120c3790f6a7952a1ae875a33d75 1x" loading="lazy"></a></p>

<p>ETロボコン事務局から配布されるPDFをみてみると、</p>

<p><a href="https://camo.qiitausercontent.com/72a1710eba9e5bf9dadb77a068c0d2ba29abe83f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f39313964616665322d376237372d616464312d363465632d3034356165356562636135382e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F919dafe2-7b77-add1-64ec-045ae5ebca58.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=ac47ef5befbfabaee0ab82b85d4a82c6" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/919dafe2-7b77-add1-64ec-045ae5ebca58.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F919dafe2-7b77-add1-64ec-045ae5ebca58.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=680494171af07b7388ef9b664a26d72e 1x" loading="lazy"></a></p>

<p>なので、これは実際の縦横それぞれ1/2スケールになっている。</p>

<h2>
<span id="コース画像の変換" class="fragment"></span><a href="#%E3%82%B3%E3%83%BC%E3%82%B9%E7%94%BB%E5%83%8F%E3%81%AE%E5%A4%89%E6%8F%9B"><i class="fa fa-link"></i></a>コース画像の変換</h2>

<h3>
<span id="pdfからpngへ" class="fragment"></span><a href="#pdf%E3%81%8B%E3%82%89png%E3%81%B8"><i class="fa fa-link"></i></a>PDFからPNGへ</h3>

<p>シミュレータでは1mmあたり1pixelのコース画像を使う（ことにしました）のでこのＰＤＦ(2730mm x 1820mm)を5460pixel x 3640pixel　の画像に変換する。</p>

<p>PostScriptオペレーションの定番<a href="https://www.ghostscript.com/" rel="nofollow noopener" target="_blank">GhostScript</a>をつかうと、PDFをPNG形式の画像に変換することができる。</p>

<div class="code-frame" data-lang="shell"><div class="highlight"><pre><code>
gswin32c.exe <span class="nt">-dSAFER</span> <span class="nt">-dBATCH</span> <span class="nt">-dNOPAUSE</span> <span class="nt">-sDEVICE</span><span class="o">=</span>png16m
    <span class="nt">-r96</span> <span class="nt">-sOutputFile</span><span class="o">=</span>.<span class="se">\h</span>onban_course.png  .<span class="se">\r</span>obocon_course20070423.pdf
</code></pre></div></div>

<p><a href="https://camo.qiitausercontent.com/8aa4006264c5f94ec0fc8e4119a2049e06759366/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f65326634356532632d323266372d613166612d343466302d6430343832306436623761622e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fe2f45e2c-22f7-a1fa-44f0-d04820d6b7ab.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=cde76fc1c9777008f2a0bd080f0f8d6c" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/e2f45e2c-22f7-a1fa-44f0-d04820d6b7ab.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fe2f45e2c-22f7-a1fa-44f0-d04820d6b7ab.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=961fd37c8f759ed20a9a165d1be37cdd 1x" loading="lazy"></a></p>

<p>PNGファイルはサイズが10318 x 6879 ある。これは96DPIを指定したからなので、こうなっているが、これはGIMPで補完圧縮をし、さらに簡単なスクリプトを書いて変な色になっていた部分を変換して使えそうなコース画像を作った。</p>

<p>最終的に 5260 x 3640 の画像となる。</p>

<p><a href="https://camo.qiitausercontent.com/84813866cb8063e1c45aaa2942f795c31fc1c3c1/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f65643863373162312d623231362d313531632d313636622d3931343139393336353030352e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fed8c71b1-b216-151c-166b-914199365005.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=84ce718df174ec038f6d0b69a88d9b9f" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/ed8c71b1-b216-151c-166b-914199365005.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fed8c71b1-b216-151c-166b-914199365005.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=54cf1a983d4a1f235ff7ef3944c33dc8 1x" loading="lazy"></a></p>

<h1>
<span id="メンバー向けにシミュレーターリリース" class="fragment"></span><a href="#%E3%83%A1%E3%83%B3%E3%83%90%E3%83%BC%E5%90%91%E3%81%91%E3%81%AB%E3%82%B7%E3%83%9F%E3%83%A5%E3%83%AC%E3%83%BC%E3%82%BF%E3%83%BC%E3%83%AA%E3%83%AA%E3%83%BC%E3%82%B9"><i class="fa fa-link"></i></a>メンバー向けにシミュレーターリリース</h1>

<p>2007 ゴールデンウィークを使って開発したシミュレータ＋サンプルコードを同じチームのメンバーに初公開しましました。</p>

<p>評判はまずまずで、最低限の役目は果たせたような気がする。</p>

<h1>
<span id="本番コースでシミュレーション" class="fragment"></span><a href="#%E6%9C%AC%E7%95%AA%E3%82%B3%E3%83%BC%E3%82%B9%E3%81%A7%E3%82%B7%E3%83%9F%E3%83%A5%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3"><i class="fa fa-link"></i></a>本番コースでシミュレーション</h1>

<p>本番コースでシミュレーションしてみた。2台で併走。</p>

<p><a href="https://camo.qiitausercontent.com/17fb7d3843ce1be99ad8b2d71fb593ddec3b0531/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f61313731376430372d303034612d313365382d333038662d3863346539336461613430332e676966" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fa1717d07-004a-13e8-308f-8c4e93daa403.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=8b2c6b5fa824a7990dae96ce2d0fe7f1" alt="movm.gif" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/a1717d07-004a-13e8-308f-8c4e93daa403.gif" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fa1717d07-004a-13e8-308f-8c4e93daa403.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=7bec3e100dc955cfbfe6afca4ed75ed0 1x" loading="lazy"></a></p>

<p>全体像</p>

<p><a href="https://camo.qiitausercontent.com/e6fdd30c9618e471a7a9a148c3fac6aa1be1142f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f63353139383464302d666434662d663366612d386366352d3866323736323263646237332e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fc51984d0-fd4f-f3fa-8cf5-8f27622cdb73.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=6e53a0669a766eea00bd00fe1fd77187" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/c51984d0-fd4f-f3fa-8cf5-8f27622cdb73.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fc51984d0-fd4f-f3fa-8cf5-8f27622cdb73.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=53e71a3cfeea7b0414585e0b2e72eaa9 1x" loading="lazy"></a></p>

<p>ちゃんと動いているようでひと安心。</p>

<h2>
<span id="ダメだし" class="fragment"></span><a href="#%E3%83%80%E3%83%A1%E3%81%A0%E3%81%97"><i class="fa fa-link"></i></a>ダメだし</h2>

<p>友人(工学博士、物理シミュレーション、運動学)にこのページ+ソースコードを見せて運動学の計算について読んでもらいましたが、当然いろいろとダメだしが。方程式、離散化、剛体か質点か、厳密にやろうとするといろいろ問題が。アカデミック軸ではなく、「モドキ」軸ということで貴重な意見を今後の改善に生かすとして今回はこのまま行こうということに。</p>

<h1>
<span id="3d化対応設計" class="fragment"></span><a href="#3d%E5%8C%96%E5%AF%BE%E5%BF%9C%E8%A8%AD%E8%A8%88"><i class="fa fa-link"></i></a>3D化対応設計</h1>

<h2>
<span id="パッケージ" class="fragment"></span><a href="#%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8"><i class="fa fa-link"></i></a>パッケージ</h2>

<p>もともと3Dへの対応を考慮して設計していたので、特に今までの設計と変更はなし。Misawa2Dというのに加えてMisawa3Dというパッケージにする。</p>

<p><a href="https://camo.qiitausercontent.com/0afc776a73ad72e5c66ef5f83f2f51083f82bed4/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f33393963646263612d376265652d666533652d626433312d6664323434653866656538622e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F399cdbca-7bee-fe3e-bd31-fd244e8fee8b.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=b04db287ab348652557e5cae34566a82" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/399cdbca-7bee-fe3e-bd31-fd244e8fee8b.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F399cdbca-7bee-fe3e-bd31-fd244e8fee8b.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=eaa1a9a2c5b7fbce536fb4bf522f92d1 1x" loading="lazy"></a></p>

<h2>
<span id="クラスの設計" class="fragment"></span><a href="#%E3%82%AF%E3%83%A9%E3%82%B9%E3%81%AE%E8%A8%AD%E8%A8%88"><i class="fa fa-link"></i></a>クラスの設計</h2>

<p>3Dの実現には、Windowsのゲーム用APIのDirect3Dを使用する。<br>
OpenGLでも良かったが昔作ったコードを流用したかったのでDirect3Dを使うことに。</p>

<p>設計の構想は2Dのときとほぼ同じ。</p>

<p>3Dのモデルは3Dモデラー(LightWave)を使ってモデリングする。</p>

<p><a href="https://camo.qiitausercontent.com/0f3b3ef5d0cf3ba728ad2484d6368a2f3653020d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f63363437623338662d333934312d393238362d343438342d3236336336363163613966372e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fc647b38f-3941-9286-4484-263c661ca9f7.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=1fb43bac78f05ac9e8f4b72c250cc41c" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/c647b38f-3941-9286-4484-263c661ca9f7.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fc647b38f-3941-9286-4484-263c661ca9f7.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=9daecb37ef2359337d7201829eb2aee6 1x" loading="lazy"></a></p>

<h1>
<span id="3dのパスファインダー" class="fragment"></span><a href="#3d%E3%81%AE%E3%83%91%E3%82%B9%E3%83%95%E3%82%A1%E3%82%A4%E3%83%B3%E3%83%80%E3%83%BC"><i class="fa fa-link"></i></a>3Dのパスファインダー</h1>

<h2>
<span id="3dプラットフォームの実装" class="fragment"></span><a href="#3d%E3%83%97%E3%83%A9%E3%83%83%E3%83%88%E3%83%95%E3%82%A9%E3%83%BC%E3%83%A0%E3%81%AE%E5%AE%9F%E8%A3%85"><i class="fa fa-link"></i></a>3Dプラットフォームの実装</h2>

<p>Direct3Dを用いて実装を開始。</p>

<ul>
<li>地面ポリゴンを配置する。マウスでグリグリするインタフェースを搭載。</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/2402a241e3289cecb58ba3051835d022c1573065/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f38636635333037312d313831352d643566362d613061372d6564656633343731626636392e676966" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F8cf53071-1815-d5f6-a0a7-edef3471bf69.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=c82d845945191938924042779f2720ad" alt="3d_1.gif" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/8cf53071-1815-d5f6-a0a7-edef3471bf69.gif" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F8cf53071-1815-d5f6-a0a7-edef3471bf69.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=5182945c46aa6d3f5dd3e0e1cc7e5c3d 1x" loading="lazy"></a></p>

<ul>
<li>コース画像のテクスチャを地面ポリゴンに貼る</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/7a2d7c3b6ed29e9182a6ab8f490a5f190e735cd9/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f35306235393531332d373536312d346163342d623635662d3962386438326362616631332e676966" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F50b59513-7561-4ac4-b65f-9b8d82cbaf13.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=c59780d693ce9f01d30b104408820cd3" alt="3d_2.gif" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/50b59513-7561-4ac4-b65f-9b8d82cbaf13.gif" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F50b59513-7561-4ac4-b65f-9b8d82cbaf13.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=5136e2e94fe0cb3ab5cc1e422f4da01a 1x" loading="lazy"></a></p>

<h2>
<span id="3d車両データ" class="fragment"></span><a href="#3d%E8%BB%8A%E4%B8%A1%E3%83%87%E3%83%BC%E3%82%BF"><i class="fa fa-link"></i></a>3D車両データ</h2>

<p>LDRAWの3Dデータを組み合わせてログラムから操作できる3Dデータにする。</p>

<h1>
<span id="3d実装つづき" class="fragment"></span><a href="#3d%E5%AE%9F%E8%A3%85%E3%81%A4%E3%81%A5%E3%81%8D"><i class="fa fa-link"></i></a>3D実装つづき</h1>

<h2>
<span id="3dプログラミングは純粋にたのしい" class="fragment"></span><a href="#3d%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0%E3%81%AF%E7%B4%94%E7%B2%8B%E3%81%AB%E3%81%9F%E3%81%AE%E3%81%97%E3%81%84"><i class="fa fa-link"></i></a>3Dプログラミングは純粋にたのしい</h2>

<p>3Dのプログラミングは純粋に楽しい。<br>
過去のETロボコンのサイトを見ていたら、コース上にモアイのような置物がおいてあったのでLightWave3Dをつかってモアイ君をモデリングした。</p>

<p>モアイ君をSimulator3D上に配置してグリグリ動かしてみた。</p>

<p><a href="https://camo.qiitausercontent.com/c014e48a7aacd9b4da13c2282ec2bd9c4c9372cd/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f33326664323763612d383864302d343038372d363461632d3631303936353265656231312e676966" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F32fd27ca-88d0-4087-64ac-6109652eeb11.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=7073b6dcb1ae45ca00b7c3fad6fab560" alt="3d_moai.gif" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/32fd27ca-88d0-4087-64ac-6109652eeb11.gif" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F32fd27ca-88d0-4087-64ac-6109652eeb11.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=97514f089aa8cc268ab7d5aac46a3890 1x" loading="lazy"></a></p>

<p>せっかくモデリングしたのでどこかでこのモアイ君を使いたいなぁ。</p>

<h1>
<span id="2007年5月23日-プレ試走会" class="fragment"></span><a href="#2007%E5%B9%B45%E6%9C%8823%E6%97%A5-%E3%83%97%E3%83%AC%E8%A9%A6%E8%B5%B0%E4%BC%9A"><i class="fa fa-link"></i></a>2007年5月23日 プレ試走会</h1>

<h2>
<span id="某社の某会議室で実機を走らせてみた" class="fragment"></span><a href="#%E6%9F%90%E7%A4%BE%E3%81%AE%E6%9F%90%E4%BC%9A%E8%AD%B0%E5%AE%A4%E3%81%A7%E5%AE%9F%E6%A9%9F%E3%82%92%E8%B5%B0%E3%82%89%E3%81%9B%E3%81%A6%E3%81%BF%E3%81%9F"><i class="fa fa-link"></i></a>某社の某会議室で実機を走らせてみた</h2>

<p>本番用のコースを印刷したものを会議室にならべてこれから実機を走行させてみた。</p>

<p>数十枚を並べる作業はかなり手間がかかる。<br>
1枚ならべると隣がずれたり、ずれを修正しているとまたほかがずれたり。やはり現実の世界は何かと”リアル”な問題が起こる。<br>
これが楽しい。</p>

<p><a href="https://camo.qiitausercontent.com/7a319433ac57bb378175ac4a10bd62a314dca6f6/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f30613238626262372d323332392d663539622d333263342d6461306162393365346564362e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F0a28bbb7-2329-f59b-32c4-da0ab93e4ed6.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=788f75b0d2d049b18fbebd01119141a9" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/0a28bbb7-2329-f59b-32c4-da0ab93e4ed6.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F0a28bbb7-2329-f59b-32c4-da0ab93e4ed6.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=ef7cc4808f95e0ae86c7ab7926e1d9a4 1x" loading="lazy"></a></p>

<p>↓ようやくしきつめた、でもパスファインダーが走行するたびにズレる(笑)</p>

<p><a href="https://camo.qiitausercontent.com/8caf55252867e78100c9a2e1e0f35caf6792981b/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f65366666313966622d666364382d373664372d303636302d3738343133613261616664612e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fe6ff19fb-fcd8-76d7-0660-78413a2aafda.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=c80e9bbe0d3a6882304acf26167c6b8d" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/e6ff19fb-fcd8-76d7-0660-78413a2aafda.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fe6ff19fb-fcd8-76d7-0660-78413a2aafda.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=4ccd02567ad1d190be248ae10602164a 1x" loading="lazy"></a></p>

<p>シミュレータで基本ロジックは確認したものの、結局現実世界へのあわせこみは実機を使ってTry&amp;Errorしかない。実機にプログラムを焼いちゃ消し、焼いちゃ消しという作業に明け暮れた。</p>

<p>組み込み界隈ではよく見る光景。</p>

<p>実機が動くと楽しいので、深夜までTry&amp;Errorは続く。</p>

<h1>
<span id="物理計算モジュールとの連携" class="fragment"></span><a href="#%E7%89%A9%E7%90%86%E8%A8%88%E7%AE%97%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB%E3%81%A8%E3%81%AE%E9%80%A3%E6%90%BA"><i class="fa fa-link"></i></a>物理計算モジュールとの連携</h1>

<h2>
<span id="連携" class="fragment"></span><a href="#%E9%80%A3%E6%90%BA"><i class="fa fa-link"></i></a>連携</h2>

<p>計算モジュール(Misawat.Etrobo.Kinematics)と3Dの表示モジュール(Misawat.Graphics.Misawa3D)を連携させた。</p>

<h2>
<span id="コースを疾走するモアイ君" class="fragment"></span><a href="#%E3%82%B3%E3%83%BC%E3%82%B9%E3%82%92%E7%96%BE%E8%B5%B0%E3%81%99%E3%82%8B%E3%83%A2%E3%82%A2%E3%82%A4%E5%90%9B"><i class="fa fa-link"></i></a>コースを疾走するモアイ君</h2>

<p>裏で物理演算モジュールが、コースの計算をしている。<br>
3D上では、パスファインダーの代わりにモアイ君を走行させてみた。</p>

<p>モアイがんばれ</p>

<p><a href="https://camo.qiitausercontent.com/7d6ce6e5f2db88daefb7fcb6ebab3ec2540be914/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f34656134386234372d643462382d623132662d396165332d6562313863396164613137352e676966" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F4ea48b47-d4b8-b12f-9ae3-eb18c9ada175.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=38e02949deab4b04828a904d124b9f3c" alt="runningmoai.gif" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/4ea48b47-d4b8-b12f-9ae3-eb18c9ada175.gif" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F4ea48b47-d4b8-b12f-9ae3-eb18c9ada175.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=f60799a44817c6aba21344ef9def4e1e 1x" loading="lazy"></a></p>

<h1>
<span id="3dモデルの生成成功" class="fragment"></span><a href="#3d%E3%83%A2%E3%83%87%E3%83%AB%E3%81%AE%E7%94%9F%E6%88%90%E6%88%90%E5%8A%9F"><i class="fa fa-link"></i></a>3Dモデルの生成成功</h1>

<h2>
<span id="3dのパスファインダーモデルの生成に成功" class="fragment"></span><a href="#3d%E3%81%AE%E3%83%91%E3%82%B9%E3%83%95%E3%82%A1%E3%82%A4%E3%83%B3%E3%83%80%E3%83%BC%E3%83%A2%E3%83%87%E3%83%AB%E3%81%AE%E7%94%9F%E6%88%90%E3%81%AB%E6%88%90%E5%8A%9F"><i class="fa fa-link"></i></a>3Dのパスファインダーモデルの生成に成功</h2>

<p>簡単に書くと、LDRAWにあるパスファインダーは頂点数が多すぎて使い物にならない(HAL使っても超ノロノロ描画)ことが判明。</p>

<p>LightWaveでブーリアンを駆使して足し算引き算、その後、オリジナルスクリプトで面の向きをすべて外向きにし、そとから見えないところを削除し、頂点を減らして、くっつけて、構成しているパーツから重なっている面をとりのぞいて、、、と全部で３０ステップくらいフィルターをかましてやっと、プログラムからリアルタイムでレンダリングできる3Dモデルに変換できた</p>

<p><a href="https://camo.qiitausercontent.com/01930efa45d988e973942440c7cbf410c9d33fd8/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f39656665346534632d396261352d653133662d396366642d3038363130376461643366392e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F9efe4e4c-9ba5-e13f-9cfd-086107dad3f9.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=96c2df26f8fc5f511416e64a784386a8" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/9efe4e4c-9ba5-e13f-9cfd-086107dad3f9.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F9efe4e4c-9ba5-e13f-9cfd-086107dad3f9.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=69817dd894e7419007d77e9b994b79e9 1x" loading="lazy"></a></p>

<h2>
<span id="モアイ君-タイア" class="fragment"></span><a href="#%E3%83%A2%E3%82%A2%E3%82%A4%E5%90%9B-%E3%82%BF%E3%82%A4%E3%82%A2"><i class="fa fa-link"></i></a>モアイ君-&gt;タイア</h2>

<p>3Dモデルを作ったので、モアイ君を卒業して、3Dモデル化したパスファインダーのタイアに差し替える。<br>
タイアが転がった～。</p>

<p><a href="https://camo.qiitausercontent.com/e210f918b9a5be282690cf96e18d9dd8705327d7/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f66376337633430392d323861642d313334392d313465342d6662316636613531666265312e676966" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Ff7c7c409-28ad-1349-14e4-fb1f6a51fbe1.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=29265a8d4136f9ce613861609b8efba4" alt="tirea.gif" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/f7c7c409-28ad-1349-14e4-fb1f6a51fbe1.gif" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Ff7c7c409-28ad-1349-14e4-fb1f6a51fbe1.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=c58752bd210bb4753a9b3333ce9faada 1x" loading="lazy"></a></p>

<h1>
<span id="3dの親子関係" class="fragment"></span><a href="#3d%E3%81%AE%E8%A6%AA%E5%AD%90%E9%96%A2%E4%BF%82"><i class="fa fa-link"></i></a>3Dの親子関係</h1>

<h2>
<span id="3dモデル" class="fragment"></span><a href="#3d%E3%83%A2%E3%83%87%E3%83%AB"><i class="fa fa-link"></i></a>3Dモデル</h2>

<p>3Dモデルは以下のような親子のツリー構造になっている。</p>

<p>パスファインダーはBody(本体部分＝ＲＣＸと機構部）,FrontWheel（前輪）,RearWheel(後輪),LightSensor(光センサーと機構部)をそれぞれ独立したパーツとした。</p>

<p>2Dのときは、とても簡単なモデルだったので、頂点座標を計測して、それらを結んで多角形をつくってパスファインダーの外形にしたが、3Dでは構造がとても複雑なので、もっと大きな単位（たとえばBodyだけでも数千のポリゴンがある)で扱った。</p>

<p><a href="https://camo.qiitausercontent.com/870fa58e08e027cac9b371918e1e849853ce8a79/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f31396436353435642d393236622d383039622d366237372d3164666134323537323434372e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F19d6545d-926b-809b-6b77-1dfa42572447.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=c9230791172d05e87ebf94c8fe04103e" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/19d6545d-926b-809b-6b77-1dfa42572447.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F19d6545d-926b-809b-6b77-1dfa42572447.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=93ff32a36127732f94e7f4b6b9d1864c 1x" loading="lazy"></a></p>

<p>↑FrontWheelはLightSensorの回転と連動するので、LightSensorの子になっている。</p>

<h2>
<span id="パーツごとの動作" class="fragment"></span><a href="#%E3%83%91%E3%83%BC%E3%83%84%E3%81%94%E3%81%A8%E3%81%AE%E5%8B%95%E4%BD%9C"><i class="fa fa-link"></i></a>パーツごとの動作</h2>

<p>親子関係をつけた状態でパーツごとに適当に動かす。ちゃんとそれぞれ連携して動いている。</p>

<p><a href="https://camo.qiitausercontent.com/e9745dbc4cd627bbbaf1af4b2ee495f0071602b1/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f31313866303934352d343639652d666638662d303436622d3439356337656165303333612e676966" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F118f0945-469e-ff8f-046b-495c7eae033a.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=a9b7596078d4ff971d8587ce457dadb3" alt="revolve.gif" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/118f0945-469e-ff8f-046b-495c7eae033a.gif" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F118f0945-469e-ff8f-046b-495c7eae033a.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=d9846b471ed8adcffcfdbf20ed069fcd 1x" loading="lazy"></a></p>

<h2>
<span id="タイヤの回転" class="fragment"></span><a href="#%E3%82%BF%E3%82%A4%E3%83%A4%E3%81%AE%E5%9B%9E%E8%BB%A2"><i class="fa fa-link"></i></a>タイヤの回転</h2>

<p>前輪と後輪を速度から計算して回転させる、ここのロジックは単純で、</p>

<div class="code-frame" data-lang="math"><div class="highlight"><pre><code>\begin{align}
&amp;v=rω\\
&amp;v:速さ(mm)\\
&amp;r:タイヤの半径\\
&amp;ω:角速度(rad/s)\\
\end{align}
</code></pre></div></div>

<p>なので、</p>

<div class="code-frame" data-lang="math"><div class="highlight"><pre><code>ω=v/r
</code></pre></div></div>

<p>より計算する</p>

<p><a href="https://camo.qiitausercontent.com/ba34fded6981db1686d016d3c6662883fc01baea/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f32356565376437352d393961632d376232392d623261652d6639373263396137666339312e676966" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F25ee7d75-99ac-7b29-b2ae-f972c9a7fc91.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=f131ffe77a3424f20aa11d27bfebe795" alt="rev.gif" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/25ee7d75-99ac-7b29-b2ae-f972c9a7fc91.gif" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F25ee7d75-99ac-7b29-b2ae-f972c9a7fc91.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=88c125be5c64f014e86fb4ca1112fd4d 1x" loading="lazy"></a></p>

<h1>
<span id="パスファインダー疾走" class="fragment"></span><a href="#%E3%83%91%E3%82%B9%E3%83%95%E3%82%A1%E3%82%A4%E3%83%B3%E3%83%80%E3%83%BC%E7%96%BE%E8%B5%B0"><i class="fa fa-link"></i></a>パスファインダー疾走！</h1>

<p>パスファインダーを、本番コースをセットしたシミュレータ上で実際に走らせて見た。<br>
やはり、2Dよりも、モアイ君よりリアリティある</p>

<p><a href="https://camo.qiitausercontent.com/d9624517f6705ba69320d0f7f508fb95656ea6c0/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f66356562313233332d316538622d303465652d643666342d3866343039636538623830662e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Ff5eb1233-1e8b-04ee-d6f4-8f409ce8b80f.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=416f48fb81e6b9826e005d13665ba5fe" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/f5eb1233-1e8b-04ee-d6f4-8f409ce8b80f.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Ff5eb1233-1e8b-04ee-d6f4-8f409ce8b80f.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=c920868ce67819e43e5adf9afdcde490 1x" loading="lazy"></a></p>

<h2>
<span id="カメラアングル" class="fragment"></span><a href="#%E3%82%AB%E3%83%A1%E3%83%A9%E3%82%A2%E3%83%B3%E3%82%B0%E3%83%AB"><i class="fa fa-link"></i></a>カメラアングル</h2>

<p>3Dシミュレータのよい点は、簡単に好きなところにカメラを持ってこられる点</p>

<p>これでカメラワーク演出が可能となる</p>

<p>ズームIN/OUTや固定視点、可動視点などいろいろと実装した。</p>

<p><strong>移動追跡カメラ</strong></p>

<p><a href="https://camo.qiitausercontent.com/a2fbd6bd87c6dd2fcec129a38d8cb7df26022b50/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f62373334306336662d376431342d333063632d336363622d3436303561396366383831392e676966" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fb7340c6f-7d14-30cc-3ccb-4605a9cf8819.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=b26e46e5cc70e2fdeb64d0c7773c1dd8" alt="ugoki42.gif" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/b7340c6f-7d14-30cc-3ccb-4605a9cf8819.gif" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fb7340c6f-7d14-30cc-3ccb-4605a9cf8819.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=59e10cb0cca362869e75a04710095518 1x" loading="lazy"></a></p>

<p><a href="https://camo.qiitausercontent.com/b9643ec721d70e451f2ce0e8a4164fb9d78804f5/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f32653132613035342d326432312d353836652d346335332d3162373362306164356232372e676966" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F2e12a054-2d21-586e-4c53-1b73b0ad5b27.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=51cb1da504cf1babb415415ae09aba8e" alt="ugoki31.gif" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/2e12a054-2d21-586e-4c53-1b73b0ad5b27.gif" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F2e12a054-2d21-586e-4c53-1b73b0ad5b27.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=571a35da077c74c0c23e73a0b93c12fb 1x" loading="lazy"></a></p>

<p><strong>固定カメラ</strong></p>

<p><a href="https://camo.qiitausercontent.com/69ea7aac0e062f31634caefb2152aaf9044f8c09/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f63633263383435372d363331302d356465312d386434622d6239666138353532393762642e676966" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fcc2c8457-6310-5de1-8d4b-b9fa855297bd.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=34f23ea86bd582dba0af8a29173c8ed7" alt="two2.gif" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/cc2c8457-6310-5de1-8d4b-b9fa855297bd.gif" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fcc2c8457-6310-5de1-8d4b-b9fa855297bd.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=b9b4a94178b1d6cd4109be3dee3f1f4e 1x" loading="lazy"></a></p>

<h1>
<span id="車載カメラ搭載" class="fragment"></span><a href="#%E8%BB%8A%E8%BC%89%E3%82%AB%E3%83%A1%E3%83%A9%E6%90%AD%E8%BC%89"><i class="fa fa-link"></i></a>車載カメラ搭載</h1>

<h2>
<span id="パスファインダーに乗車" class="fragment"></span><a href="#%E3%83%91%E3%82%B9%E3%83%95%E3%82%A1%E3%82%A4%E3%83%B3%E3%83%80%E3%83%BC%E3%81%AB%E4%B9%97%E8%BB%8A"><i class="fa fa-link"></i></a>パスファインダーに乗車</h2>

<p>車載カメラを搭載した</p>

<p>どこに載せてもいいが(パラメータを変えるだけなので）、リアルでは不可能そうな場所ということで、光センターの後方の本体部につけてみた。</p>

<p>もし実際ここにカメラがついていたら、こんなに左右にゆさぶられるものだった。めがまわりそー。</p>

<p>でも走るレゴに乗った気分は楽しめる</p>

<p><a href="https://www.youtube.com/watch?v=5tGwpDOcx34" rel="nofollow noopener" target="_blank"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F40669a0f-b1eb-0560-3144-057a120ee45d.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=c088939df81916a43e449ac36d1cf628" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/40669a0f-b1eb-0560-3144-057a120ee45d.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F40669a0f-b1eb-0560-3144-057a120ee45d.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=656a04885ab62d1c8b1bbd2e80646f3d 1x" loading="lazy"></a></p>

<h1>
<span id="ソフトウェア設計変更" class="fragment"></span><a href="#%E3%82%BD%E3%83%95%E3%83%88%E3%82%A6%E3%82%A7%E3%82%A2%E8%A8%AD%E8%A8%88%E5%A4%89%E6%9B%B4"><i class="fa fa-link"></i></a>ソフトウェア設計変更</h1>

<h2>
<span id="設計書はメンテしよう" class="fragment"></span><a href="#%E8%A8%AD%E8%A8%88%E6%9B%B8%E3%81%AF%E3%83%A1%E3%83%B3%E3%83%86%E3%81%97%E3%82%88%E3%81%86"><i class="fa fa-link"></i></a>設計書はメンテしよう</h2>

<p>3Dで遊びすぎていてソフトウェアの設計そのものをないがしろにしつつあったが、、設計変更した。というか、実装してみてしっくりこなかったので、修正をかけてみた。</p>

<p>よくありがちな、設計書のメンテナンス放棄ということに陥らないように常に設計書(JUDE)をふりかえるようにしたい</p>

<h2>
<span id="before-after" class="fragment"></span><a href="#before-after"><i class="fa fa-link"></i></a>Before After</h2>

<p>クラスの意味も説明せずにやぶからぼうにBefore Afterだけを掲載しておくと、、、</p>

<p><strong>設計変更前</strong><br>
<a href="https://camo.qiitausercontent.com/853353a987ac799dd1055fff2bdfabed3df31082/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f35373166343162622d623833372d643432382d363532352d3134633963323462373261322e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F571f41bb-b837-d428-6525-14c9c24b72a2.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=5b4bf0d267360ec16a30267c79c6cc06" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/571f41bb-b837-d428-6525-14c9c24b72a2.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F571f41bb-b837-d428-6525-14c9c24b72a2.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=f50f582068e6bc4d4e7b5bc1af3653c7 1x" loading="lazy"></a></p>

<p><strong>設計変更後</strong><br>
<a href="https://camo.qiitausercontent.com/b1aeb031578abec9175f7584aa384f302c6b454a/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f36316634646432312d616239352d366234382d323832352d3661373763383366303561392e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F61f4dd21-ab95-6b48-2825-6a77c83f05a9.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=a50ddb9160f45e1709a674d84930ce8b" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/61f4dd21-ab95-6b48-2825-6a77c83f05a9.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F61f4dd21-ab95-6b48-2825-6a77c83f05a9.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=89c3460c8643413e3ce361cb5166feb1 1x" loading="lazy"></a></p>

<h2>
<span id="設計変更したのに" class="fragment"></span><a href="#%E8%A8%AD%E8%A8%88%E5%A4%89%E6%9B%B4%E3%81%97%E3%81%9F%E3%81%AE%E3%81%AB"><i class="fa fa-link"></i></a>設計変更したのに</h2>

<p>設計とソースコードは、連動しないもの。。。</p>

<p>リバースしたものがこちら。</p>

<p><a href="https://camo.qiitausercontent.com/65bfa216db09957d2800c5c6c71b7abc71dd9f38/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f37343737623639332d666332382d343162652d393062312d3432363430623333616137342e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F7477b693-fc28-41be-90b1-42640b33aa74.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=3a68d8afbf74287265f3e03df97c44d6" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/7477b693-fc28-41be-90b1-42640b33aa74.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F7477b693-fc28-41be-90b1-42640b33aa74.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=653f335a70ba11bc2a1e60e8611ba37c 1x" loading="lazy"></a></p>

<p>レビュー不足。</p>

<p>M3DFormは専用3Dウィンドウを出そうと思いつきで作ったが、これも使わないことにしたんだった、、、ということも忘れていた。</p>

<p>リバースをして確認というのは、このレベルでも役に立つなぁ。</p>

<h1>
<span id="gadgetの追加" class="fragment"></span><a href="#gadget%E3%81%AE%E8%BF%BD%E5%8A%A0"><i class="fa fa-link"></i></a>Gadgetの追加</h1>

<h2>
<span id="なんだかものさびしいので" class="fragment"></span><a href="#%E3%81%AA%E3%82%93%E3%81%A0%E3%81%8B%E3%82%82%E3%81%AE%E3%81%95%E3%81%B3%E3%81%97%E3%81%84%E3%81%AE%E3%81%A7"><i class="fa fa-link"></i></a>なんだかものさびしいので</h2>

<p>ネットで本番のETロボコンの写真などをみていると、コース上にオブジェ（障害物？）がおいてある模様。非機能要件ということで、3Dシミュレータ上に、オブジェを配置できるようにしようかと。</p>

<h2>
<span id="オブジェの場所" class="fragment"></span><a href="#%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%81%AE%E5%A0%B4%E6%89%80"><i class="fa fa-link"></i></a>オブジェの場所</h2>

<p><a href="https://camo.qiitausercontent.com/da1eabe1991c57a5e3cba89ec792ac8196014d8c/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f36343563613163302d336463352d333833382d363863352d3266313238666234343134652e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F645ca1c0-3dc5-3838-68c5-2f128fb4414e.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=cb5aa64ac7a460eb6783f7e37f61fe04" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/645ca1c0-3dc5-3838-68c5-2f128fb4414e.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F645ca1c0-3dc5-3838-68c5-2f128fb4414e.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=75bfa07f9fdb50483f48f4c21e10885b 1x" loading="lazy"></a></p>

<h2>
<span id="3dモデリングした" class="fragment"></span><a href="#3d%E3%83%A2%E3%83%87%E3%83%AA%E3%83%B3%E3%82%B0%E3%81%97%E3%81%9F"><i class="fa fa-link"></i></a>3Dモデリングした</h2>

<p>スケールをあわせながら3Dモデラーでモデリングした</p>

<p>スタート、中間ゲートにつかうポール<br>
<a href="https://camo.qiitausercontent.com/83b8a04ab266c21bb6a331eb973dc4c92464c24f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f66333863646438612d383264342d396361322d386365312d3335313565653037653766652e676966" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Ff38cdd8a-82d4-9ca2-8ce1-3515ee07e7fe.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=cb964ee55add4d61f82cf690045983b0" alt="gpoll.gif" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/f38cdd8a-82d4-9ca2-8ce1-3515ee07e7fe.gif" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Ff38cdd8a-82d4-9ca2-8ce1-3515ee07e7fe.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=2a4f282edd1c866776198f50a5ec730e 1x" loading="lazy"></a></p>

<p>スフィンクス<br>
<a href="https://camo.qiitausercontent.com/bb5394cee8ba2f61be3adcc9ab3bbf5b1e8619d1/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f61323763656336352d303261372d343331372d626138662d3763623337623466653465642e676966" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fa27cec65-02a7-4317-ba8f-7cb37b4fe4ed.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=b8cbf9928bf8fd45667799a21214a7d4" alt="sphynx.gif" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/a27cec65-02a7-4317-ba8f-7cb37b4fe4ed.gif" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fa27cec65-02a7-4317-ba8f-7cb37b4fe4ed.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=0ae5b860adf016bbe897887f566cf120 1x" loading="lazy"></a></p>

<p>ピサの斜塔（テクスチャあり）<br>
<a href="https://camo.qiitausercontent.com/3d9bede3b9dcfbad020bf04d185945bc9ed7bf72/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f31643937666432642d623763652d626539322d313839342d3465346334646130323033642e676966" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F1d97fd2d-b7ce-be92-1894-4e4c4da0203d.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=44c0a5aa933bf33b3579d504e800e8aa" alt="pisa.gif" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/1d97fd2d-b7ce-be92-1894-4e4c4da0203d.gif" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F1d97fd2d-b7ce-be92-1894-4e4c4da0203d.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=8d3a0d6300f1d645bf5696353aa6a9f9 1x" loading="lazy"></a></p>

<p>ピラミッド（テクスチャあり）<br>
<a href="https://camo.qiitausercontent.com/cc7bf3a3ec7e56d07836fca4a093c5522dd04669/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f34373531303934612d383165352d663837332d303963312d3130346330336134383864342e676966" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F4751094a-81e5-f873-09c1-104c03a488d4.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=54a720a5c00b6f9d8d7bd41924c55699" alt="pyramid.gif" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/4751094a-81e5-f873-09c1-104c03a488d4.gif" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F4751094a-81e5-f873-09c1-104c03a488d4.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=e915c209e07ee0db4a5f8a7904d72e5c 1x" loading="lazy"></a></p>

<p>凱旋門（テクスチャあり）<br>
<a href="https://camo.qiitausercontent.com/253ea854466bc5be0423a1b9939c832ac73a7c7f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f66653931366461352d316136302d656230302d353534392d3232333563313530373031312e676966" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Ffe916da5-1a60-eb00-5549-2235c1507011.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=bb50fff9f8dcecf6be782e1454ce93de" alt="gate.gif" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/fe916da5-1a60-eb00-5549-2235c1507011.gif" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Ffe916da5-1a60-eb00-5549-2235c1507011.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=34bc18bf0318c9c74e7cf23a2661b9ec 1x" loading="lazy"></a></p>

<p>モアイ君 （テクスチャあり）<br>
<a href="https://camo.qiitausercontent.com/5e2bdcaed373293ba706cddaeb4c22fd7e96d759/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f61373365373037322d346531382d636661632d663661632d6535616563643337336662662e676966" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fa73e7072-4e18-cfac-f6ac-e5aecd373fbf.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=4bd458be1cbcb83ee1d9763e5d0759d0" alt="moai.gif" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/a73e7072-4e18-cfac-f6ac-e5aecd373fbf.gif" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fa73e7072-4e18-cfac-f6ac-e5aecd373fbf.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=13162368a00d93c6939f4a0706aae7bd 1x" loading="lazy"></a></p>

<p>テクスチャ（3Dモデルの表面に貼り付ける画像）があると、質感がでてリアルになる。</p>

<h1>
<span id="オブジェを配置" class="fragment"></span><a href="#%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%92%E9%85%8D%E7%BD%AE"><i class="fa fa-link"></i></a>オブジェを配置</h1>

<h2>
<span id="また設計変更" class="fragment"></span><a href="#%E3%81%BE%E3%81%9F%E8%A8%AD%E8%A8%88%E5%A4%89%E6%9B%B4"><i class="fa fa-link"></i></a>また設計変更</h2>

<p>オブジェを配置できるようにするために、設計変更をしました。</p>

<p><a href="https://camo.qiitausercontent.com/b3f29799b5a87a601e6afaf6be897831854befdd/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f36323835353439662d353364312d393430642d316262362d3462386634323137626265372e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F6285549f-53d1-940d-1bb6-4b8f4217bbe7.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=fd5e9f4b98089b4bf3bbc2af14f61b5a" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/6285549f-53d1-940d-1bb6-4b8f4217bbe7.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F6285549f-53d1-940d-1bb6-4b8f4217bbe7.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=2eb7c9f7c0d1ab149766a2a78431a249 1x" loading="lazy"></a></p>

<p>SimulatorPlatform3D#AddGadgetメソッドでオブジェを追加できるようになった。</p>

<h2>
<span id="実行結果" class="fragment"></span><a href="#%E5%AE%9F%E8%A1%8C%E7%B5%90%E6%9E%9C"><i class="fa fa-link"></i></a>実行結果</h2>

<p><a href="https://camo.qiitausercontent.com/525afad67f91311ab62dac21c8ee47452d355451/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f38373930336338622d633262632d316532352d333930322d6630626235616532623532612e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F87903c8b-c2bc-1e25-3902-f0bb5ae2b52a.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=9abb5d7ad5d286300f3f88296b12a5c0" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/87903c8b-c2bc-1e25-3902-f0bb5ae2b52a.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F87903c8b-c2bc-1e25-3902-f0bb5ae2b52a.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=448cd81add97dfc387daf0bb9b1e3b91 1x" loading="lazy"></a></p>

<p>コース上にオブジェを配置した。</p>

<p>ここまでプログラムが出来てくると箱庭をつくっているような感覚で楽しい。</p>

<p>モアイ君も自分の居場所をみつけた。<br>
モアイ君に石模様のテクスチャをつけたらちょっと怖かったので、テクスチャはつけないことにした。</p>

<h1>
<span id="車載カメラのブレ防止" class="fragment"></span><a href="#%E8%BB%8A%E8%BC%89%E3%82%AB%E3%83%A1%E3%83%A9%E3%81%AE%E3%83%96%E3%83%AC%E9%98%B2%E6%AD%A2"><i class="fa fa-link"></i></a>車載カメラのブレ防止</h1>

<h2>
<span id="ローパス" class="fragment"></span><a href="#%E3%83%AD%E3%83%BC%E3%83%91%E3%82%B9"><i class="fa fa-link"></i></a>ローパス</h2>

<ul>
<li>車載カメラのブレが激しいため、カメラのlooking計算にローパスフィルターを導入。だいぶ揺れがおさまり、乗車感が向上。</li>
<li>車載カメラの位置を前にして景色が良くなるよう改善。</li>
</ul>

<p>完全3Dプログラミング遊びになってきたが楽しいのでやめられない。</p>

<p>箱庭コースの中を疾走！</p>

<ul>
<li>車載カメラ視点（BGMあり)</li>
</ul>

<p><a href="https://www.youtube.com/watch?v=nepdFs-2V1Y" rel="nofollow noopener" target="_blank"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fb5ed0172-b949-2217-89ac-fd5d53983f54.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=3223959568bf645f5876b7144fe9f955" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/b5ed0172-b949-2217-89ac-fd5d53983f54.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fb5ed0172-b949-2217-89ac-fd5d53983f54.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=bb4c9fc08f3b2dc7a73499c42d03860e 1x" loading="lazy"></a></p>

<h1>
<span id="車載カメラ２つ" class="fragment"></span><a href="#%E8%BB%8A%E8%BC%89%E3%82%AB%E3%83%A1%E3%83%A9%EF%BC%92%E3%81%A4"><i class="fa fa-link"></i></a>車載カメラ２つ</h1>

<h2>
<span id="カメラ視点２つ" class="fragment"></span><a href="#%E3%82%AB%E3%83%A1%E3%83%A9%E8%A6%96%E7%82%B9%EF%BC%92%E3%81%A4"><i class="fa fa-link"></i></a>カメラ視点２つ。</h2>

<p>それぞれのパスファインダーの車載カメラ視点で走行させてみた。</p>

<p><a href="https://www.youtube.com/watch?v=b-g5lE7Ed5s" rel="nofollow noopener" target="_blank"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F690ea363-6780-4135-dda7-c11e79c4e133.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=9cd314293d14cba9194f9899b4523e6d" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/690ea363-6780-4135-dda7-c11e79c4e133.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F690ea363-6780-4135-dda7-c11e79c4e133.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=55f76eb6677acdcca6d2845fbba38b5c 1x" loading="lazy"></a></p>

<h1>
<span id="本番前日" class="fragment"></span><a href="#%E6%9C%AC%E7%95%AA%E5%89%8D%E6%97%A5"><i class="fa fa-link"></i></a>本番前日</h1>

<h2>
<span id="本番とは" class="fragment"></span><a href="#%E6%9C%AC%E7%95%AA%E3%81%A8%E3%81%AF"><i class="fa fa-link"></i></a>本番とは</h2>

<p>いよいよ明日が本番。<br>
本番とは関東地区予選大会 第1日目のこと。まだ予選。</p>

<p>シミュレーターを使ったアルゴリズム確認は各メンバーで行ってだいぶいい感じの動きをしていたとのフィードバックをもらう。</p>

<h1>
<span id="2007年6月30日-etロボコン当日レポート" class="fragment"></span><a href="#2007%E5%B9%B46%E6%9C%8830%E6%97%A5-et%E3%83%AD%E3%83%9C%E3%82%B3%E3%83%B3%E5%BD%93%E6%97%A5%E3%83%AC%E3%83%9D%E3%83%BC%E3%83%88"><i class="fa fa-link"></i></a>2007年6月30日 ETロボコン当日レポート</h1>

<p>ETロボコンの関東地区予選会第１日目に参加した</p>

<h2>
<span id="開催概要" class="fragment"></span><a href="#%E9%96%8B%E5%82%AC%E6%A6%82%E8%A6%81"><i class="fa fa-link"></i></a>開催概要</h2>

<p>日時 2007年6月30日(土) 8:50- <br>
場所 工学院大学（新宿)</p>

<h2>
<span id="当日のタイムテーブル" class="fragment"></span><a href="#%E5%BD%93%E6%97%A5%E3%81%AE%E3%82%BF%E3%82%A4%E3%83%A0%E3%83%86%E3%83%BC%E3%83%96%E3%83%AB"><i class="fa fa-link"></i></a>当日のタイムテーブル</h2>

<table>
<tr>
<td>9:00</td>
<td>参加者受付</td>
</tr>
<tr>
<td>9:30 ～ 11:30</td>
<td>試走・車検</td>
</tr>
<tr>
<td>11:30</td>
<td>モデル評価 (※ここまでは参加者のみ)</td>
</tr>
<tr>
<td>12:00</td>
<td>開会式</td>
</tr>
<tr>
<td>12:10 ～ 13:40</td>
<td>競技１回目</td>
</tr>
<tr>
<td></td>
<td>休憩</td>
</tr>
<tr>
<td>14:00 ～ 15:20</td>
<td>競技２回目</td>
</tr>
<tr>
<td>15:30</td>
<td>表彰式</td>
</tr>
<tr>
<td>16:20 ～ 17:10</td>
<td>モデルワークショップ</td>
</tr>
</table>

<h2>
<span id="受付試走会" class="fragment"></span><a href="#%E5%8F%97%E4%BB%98%E8%A9%A6%E8%B5%B0%E4%BC%9A"><i class="fa fa-link"></i></a>受付～試走会</h2>

<ul>
<li>8:50に開催場所である工学院大学に集合。工学院大学は都庁至近の都会のなかの大学という感じ</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/9cac073752108658132c7672e2bee0df4901c582/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f32636139316336632d313239392d373966332d336463362d6263663533633131643837352e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F2ca91c6c-1299-79f3-3dc6-bcf53c11d875.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=a41f6f79d3724a0a7dc1e274d9e974fc" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/2ca91c6c-1299-79f3-3dc6-bcf53c11d875.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F2ca91c6c-1299-79f3-3dc6-bcf53c11d875.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=8a609f37f6087865ebc43e04a6a52494 1x" loading="lazy"></a></p>

<p><a href="https://camo.qiitausercontent.com/f9693cc1edb6efe9d75b873092b8aa9a6d73ffed/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f64303762326132382d643330622d633735382d616331632d3837363462636335383736662e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fd07b2a28-d30b-c758-ac1c-8764bcc5876f.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=5ba5802a48874180ec9e5a4eb8c37d7e" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/d07b2a28-d30b-c758-ac1c-8764bcc5876f.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fd07b2a28-d30b-c758-ac1c-8764bcc5876f.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=cfce6368e3fc09122281ec812d1865da 1x" loading="lazy"></a></p>

<ul>
<li>受付でチームごとのゼッケンと名札をもらう</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/91ee6e664b585c36c667347f7fce179c6f7b4ca2/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f30653162313239342d666638622d636661352d626634622d6530366538356131316631322e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F0e1b1294-ff8b-cfa5-bf4b-e06e85a11f12.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=8c64a441a769c7693b8acb30e33f5088" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/0e1b1294-ff8b-cfa5-bf4b-e06e85a11f12.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F0e1b1294-ff8b-cfa5-bf4b-e06e85a11f12.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=daab53465c7a91fc28eecda3aa2a5a06 1x" loading="lazy"></a></p>

<ul>
<li>会場に入ると、目の前に本番用コースが。これはシミュレータのネタ収集のチャンス！</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/65d5a7e782b31249b637471141fa51ffae3d7139/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f65363031353932342d626539662d373165652d373237392d3732363562393536363031302e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fe6015924-be9f-71ee-7279-7265b9566010.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=8ec0aa48fee392cc07420bd6eb9cb2a9" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/e6015924-be9f-71ee-7279-7265b9566010.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fe6015924-be9f-71ee-7279-7265b9566010.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=41d449c04e2ae8ae09a09f7d7e34b41a 1x" loading="lazy"></a></p>

<ul>
<li>チームにはピットと呼ばれる、チーム用の机（会議室なんかにある折りたたみ机のようなもの）がある。２チームで１個の机を共有して、実機の調整等を行う。</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/ddfc944e4ffb3de8a871c1582e024a57016b8f7a/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f36613039633035332d373836632d306633382d633230352d3338326337633032383463642e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F6a09c053-786c-0f38-c205-382c7c0284cd.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=14a990f751fd9ccde00e84cc2c55c4d9" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/6a09c053-786c-0f38-c205-382c7c0284cd.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F6a09c053-786c-0f38-c205-382c7c0284cd.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=453251101d7d6920e94ee427c2377dba 1x" loading="lazy"></a></p>

<p><a href="https://camo.qiitausercontent.com/031c15b966ff938de300e3e9ddd7e18ed129307e/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f31343538666564632d633065392d313961652d663037372d3435643064373139626336622e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F1458fedc-c0e9-19ae-f077-45d0d719bc6b.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=c8acc1b770159f9b4db51274d32d6123" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/1458fedc-c0e9-19ae-f077-45d0d719bc6b.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F1458fedc-c0e9-19ae-f077-45d0d719bc6b.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=2956905e75c540036c4bd836e1fbbe33 1x" loading="lazy"></a></p>

<ul>
<li>ピットで早速工作、光センサーの遮光のための遮光スカートをつくる作業を行った。スカート部分をのりづけ。</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/0b62399cbf2ee291db927297acad859d5c26bffb/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f34653036323037382d316136322d643364642d386565352d6232363439306130396530622e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F4e062078-1a62-d3dd-8ee5-b26490a09e0b.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=c8d731853bbc4ad5bb24850039749f17" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/4e062078-1a62-d3dd-8ee5-b26490a09e0b.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F4e062078-1a62-d3dd-8ee5-b26490a09e0b.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=354e11d4d7cbfb1fa310ba4d07a5c94e 1x" loading="lazy"></a></p>

<p><a href="https://camo.qiitausercontent.com/96f8cadbe364443e07ca521b431c6449472400e2/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f63336365616130342d383233302d346137322d326661352d3261336564306564303834312e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fc3ceaa04-8230-4a72-2fa5-2a3ed0ed0841.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=cb82f8b9d99a02e877f05864c3e0046f" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/c3ceaa04-8230-4a72-2fa5-2a3ed0ed0841.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fc3ceaa04-8230-4a72-2fa5-2a3ed0ed0841.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=5ebd68d40b3c2085765a83ebe4421ad8 1x" loading="lazy"></a></p>

<ul>
<li>遮光スカート工作終了</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/a7380d0e72f910079ef8fdafc841187dd5f9db58/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f38353466646464612d616161612d353237632d353265392d3232653962306138613535652e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F854fddda-aaaa-527c-52e9-22e9b0a8a55e.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=a731c0b578fc71cca37855b904b91af2" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/854fddda-aaaa-527c-52e9-22e9b0a8a55e.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F854fddda-aaaa-527c-52e9-22e9b0a8a55e.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=82041c2cc60cea90ec3c28e96294cdf7 1x" loading="lazy"></a></p>

<ul>
<li>試走会がはじまった。一度に数チームがコース上でパスファインダーを試走させる</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/2c6e96e9574ddb081a0e2c2cf2eb7cc1b5f22e21/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f38386662386637302d656338622d323161372d623361622d3835336361313364663865632e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F88fb8f70-ec8b-21a7-b3ab-853ca13df8ec.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=363777a203bac15250637815709dec69" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/88fb8f70-ec8b-21a7-b3ab-853ca13df8ec.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F88fb8f70-ec8b-21a7-b3ab-853ca13df8ec.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=c57bfacb193a2dd91f77ba93b9305170 1x" loading="lazy"></a></p>

<ul>
<li>我々のチームの試走の順番がまわってきた</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/9e03121465c439f579ffc6b2f64fb0e1d0a8a13f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f33623361383931642d343462392d346265342d386164652d6561303163373136323863312e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F3b3a891d-44b9-4be4-8ade-ea01c71628c1.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=fde2cb20f02f9231ef31b4987181bed5" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/3b3a891d-44b9-4be4-8ade-ea01c71628c1.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F3b3a891d-44b9-4be4-8ade-ea01c71628c1.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=b3a38a6c187541add011ecae734ed17b 1x" loading="lazy"></a></p>

<h2>
<span id="試走会予選走行" class="fragment"></span><a href="#%E8%A9%A6%E8%B5%B0%E4%BC%9A%E4%BA%88%E9%81%B8%E8%B5%B0%E8%A1%8C"><i class="fa fa-link"></i></a>試走会～予選走行</h2>

<ul>
<li><p>いよいよ本番コースでの、試走となる<br>
別チームのパスファインダーが高速に追い抜いていたりするが、うちはうちの走りができればOK</p></li>
<li><p>試走終了後、車検を行う。車検では、パスファインダーが設計図通りくみ上げられているか、不正改造が無いかなどがチェックされる。<br>
車検に合格すると、競技時に使用する電池(Panasonic製)をもらうことができる。</p></li>
</ul>

<p><a href="https://camo.qiitausercontent.com/cb5911b6d8ce4b78bf6faf30130c2b2aec1a5a59/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f30313633613936302d323738612d356266662d323139652d3665363530623931383163302e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F0163a960-278a-5bff-219e-6e650b9181c0.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=716250147d66e1f8436e41fd18860b0f" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/0163a960-278a-5bff-219e-6e650b9181c0.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F0163a960-278a-5bff-219e-6e650b9181c0.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=984e191d8e679af3826265b0768de388 1x" loading="lazy"></a></p>

<ul>
<li>競技用電池をパスファインダーにセットして、RCXのふたを閉じた後に封をしてもらう。「よくできました」</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/ac20739f956b6a7071312ecc9ee4296fd12e8069/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f65343638356539372d386630632d336666392d616131342d3831663035613135393534302e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fe4685e97-8f0c-3ff9-aa14-81f05a159540.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=a6c53c9100b1ad563463966e5e873061" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/e4685e97-8f0c-3ff9-aa14-81f05a159540.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fe4685e97-8f0c-3ff9-aa14-81f05a159540.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=d48e9271eafc90498e5c3e1c2a171e3d 1x" loading="lazy"></a></p>

<ul>
<li>モデル審査開始。各チームが他チームのモデルを審査して、投票する。これがうちのモデルシート。</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/abf34472aeafb1b67898cb4029409b009c43896a/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f38353366336132322d373162392d336237622d636162382d6434386638376266353337632e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F853f3a22-71b9-3b7b-cab8-d48f87bf537c.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=89227b7e277f60b64d32699ce1739808" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/853f3a22-71b9-3b7b-cab8-d48f87bf537c.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F853f3a22-71b9-3b7b-cab8-d48f87bf537c.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=d16d6ecdad6c5ade049c59e3986baa92 1x" loading="lazy"></a></p>

<ul>
<li>お昼12:00に、一般見学のお客さんたちもそろって、開会式がはじまる</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/b7ebcb6b01724ed6e405a1cb50fab334afad8385/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f35626638333832382d613230642d306663652d393264362d6537616161623036396237392e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F5bf83828-a20d-0fce-92d6-e7aaab069b79.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=6890a766a2dcba8c21530974f6296729" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/5bf83828-a20d-0fce-92d6-e7aaab069b79.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F5bf83828-a20d-0fce-92d6-e7aaab069b79.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=4416f3cc752efacf2768f58711a0fbda 1x" loading="lazy"></a></p>

<ul>
<li>開会式後から予選会スタート。予選会の本番走行の第１回目として、２チーム同時にインコース、アウトコースといった具合に走行していく。</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/62f930b538e1f523c47c9723245b086cdd8f934c/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f65666538666262352d613431622d353439322d393030322d3334393266643865313532612e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fefe8fbb5-a41b-5492-9002-3492fd8e152a.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=cd6cbceb92f69c5ff8a853f48734d906" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/efe8fbb5-a41b-5492-9002-3492fd8e152a.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fefe8fbb5-a41b-5492-9002-3492fd8e152a.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=74d684d2720515140f9b5fc7a7199f93 1x" loading="lazy"></a></p>

<ul>
<li>われらがパスファインダー走り</li>
</ul>

<p><a href="https://www.youtube.com/watch?v=-WS6tBwbS8w" rel="nofollow noopener" target="_blank"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F492f0c1c-5b9d-4f74-01d2-eca2cbd216fc.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=9db3015e518a0ece703adf8251b40d1a" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/492f0c1c-5b9d-4f74-01d2-eca2cbd216fc.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F492f0c1c-5b9d-4f74-01d2-eca2cbd216fc.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=23a5a6faeb8c85eddd78e229ed308188 1x" loading="lazy"></a></p>

<h2>
<span id="予選走行レース結果" class="fragment"></span><a href="#%E4%BA%88%E9%81%B8%E8%B5%B0%E8%A1%8C%E3%83%AC%E3%83%BC%E3%82%B9%E7%B5%90%E6%9E%9C"><i class="fa fa-link"></i></a>予選走行～レース結果</h2>

<ul>
<li>トラブル発生
車検のときに、大会で使用するためのオフィシャル電池に取り替えた。その都合でRCXに再度ソフトウェアを書き込まなければいけないんのだが、書き込み用ソフトが起動しない、、、本番前になると、きまってこうトラブルが発生する。組み込みあるある。</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/6299e4b88628aaca2b5c3d547e21095d59b7681f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f31316634623139362d663336632d633133632d363062642d6263633231373739616433372e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F11f4b196-f36c-c13c-60bd-bcc21779ad37.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=69aa2cd6871872ce3e283f7826a96a57" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/11f4b196-f36c-c13c-60bd-bcc21779ad37.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F11f4b196-f36c-c13c-60bd-bcc21779ad37.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=bd2b1161d42d99393c9a5b9f709869a5 1x" loading="lazy"></a></p>

<ul>
<li>なんとか復活
IRタワーのUSBを抜いて、PCを再起動して、、を何回か繰り返しているうちに、起動した。</li>
</ul>

<p>またもや、あるあるな解決法</p>

<p>一安心してソフトウェアを書き込み</p>

<p><a href="https://camo.qiitausercontent.com/f0d9aa006f96faa992dc6fba5fca7fbfd1f0db59/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f35323966653333632d643266392d313162652d316135342d3863303632663033323365622e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F529fe33c-d2f9-11be-1a54-8c062f0323eb.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=37fa6b3748da010f3f5022d437fcd086" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/529fe33c-d2f9-11be-1a54-8c062f0323eb.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F529fe33c-d2f9-11be-1a54-8c062f0323eb.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=91c2ee78e2bf621f189bceab498ff1d3 1x" loading="lazy"></a></p>

<ul>
<li>そして、ついに、うちのゼッケン番号が呼ばれた。いよいよ、順番が回ってきた。本番コースで走行前のキャリブレーションを行う。</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/687f938f99bf3c848cecd65743c3c4cb4e0b2fba/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f35656465386330382d653331662d303465662d616264332d6639383535336138656131362e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F5ede8c08-e31f-04ef-abd3-f98553a8ea16.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=92412ad9c7d8cb69ecdb069e5fc4925b" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/5ede8c08-e31f-04ef-abd3-f98553a8ea16.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F5ede8c08-e31f-04ef-abd3-f98553a8ea16.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=042731cbc5a0e40aed36933e50112ede 1x" loading="lazy"></a></p>

<ul>
<li>いよいよ、スタート。手前がうちのパスファインダー、奥が一緒にはしるチームのパスファインダー。
司会の方のReady GOでスタート！</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/7e74c89e0d5eeb3e5b69a4bfb035363b4b95395a/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f65663233383730382d613737622d643062662d343330352d3535343637626339383434642e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fef238708-a77b-d0bf-4305-55467bc9844d.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=d7e6ea35a5573da24f2256dad5b3b7da" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/ef238708-a77b-d0bf-4305-55467bc9844d.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fef238708-a77b-d0bf-4305-55467bc9844d.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=a0c4ae43ac620ff895cacf17d78cf2c7 1x" loading="lazy"></a></p>

<ul>
<li>序盤、順調な走りをみせる</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/39e6f97660a7975e5148ed4e14060218338dd20f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f62656530363333392d663065362d376663342d303136342d6138383463353962323163632e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fbee06339-f0e6-7fc4-0164-a884c59b21cc.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=de4de06fc1422ffc10f1c6452b1b947b" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/bee06339-f0e6-7fc4-0164-a884c59b21cc.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fbee06339-f0e6-7fc4-0164-a884c59b21cc.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=c03495d8bad02fbbd09ec9bda96ddc13 1x" loading="lazy"></a></p>

<ul>
<li>なかなか快調。一緒にはしるチームはパスファインダーの起動がうまくいかなかった模様</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/aeac548fbcba0c313d2c099e4daa523eeb3d925d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f66346236383861322d366139632d613561622d613738622d3062353438656230356231362e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Ff4b688a2-6a9c-a5ab-a78b-0b548eb05b16.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=adea172019f0b19563210ee314cccf3b" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/f4b688a2-6a9c-a5ab-a78b-0b548eb05b16.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Ff4b688a2-6a9c-a5ab-a78b-0b548eb05b16.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=cf72879061c9971eef57ed1dd9f05d6e 1x" loading="lazy"></a></p>

<h2>
<span id="そして落下" class="fragment"></span><a href="#%E3%81%9D%E3%81%97%E3%81%A6%E8%90%BD%E4%B8%8B"><i class="fa fa-link"></i></a>そして落下・・・</h2>

<ul>
<li><p>1週目後半、悪夢が。。。突然のコースアウト。その後、道無き道を迷走して、谷底に落下という末路をたどることに。<br>
司会の方は「あららー落下しちゃいましたね～」 </p></li>
<li><p>パスファインダーを持って唖然としている仲間達。</p></li>
</ul>

<p><a href="https://camo.qiitausercontent.com/7be83991588700f98ee7cad2a2444d76bce9781f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f34303266356438362d373438622d353862322d643130302d3135383639633030356437372e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F402f5d86-748b-58b2-d100-15869c005d77.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=96ce0db77359aa1372d3ed197dc131b8" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/170905/402f5d86-748b-58b2-d100-15869c005d77.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F402f5d86-748b-58b2-d100-15869c005d77.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=c8717cf95e3404c0c34ce99506564fe2 1x" loading="lazy"></a></p>

<ul>
<li>ということで、わがチームはリタイアとなりました。</li>
</ul>

<p>無念！</p>

<p>後で分析したところ、ざっくりいうと、電池が強すぎたみたい。<br>
(われわれが使っていた電池が弱かったみたい）</p>

<h1>
<span id="ふりかえり" class="fragment"></span><a href="#%E3%81%B5%E3%82%8A%E3%81%8B%E3%81%88%E3%82%8A"><i class="fa fa-link"></i></a>ふりかえり</h1>

<ul>
<li>
<p>Keep</p>

<ul>
<li>シミュレーターを使ったアルゴリズム調整
描いた設計思想に忠実な実装</li>
</ul>
</li>
<li>
<p>Problem</p>

<ul>
<li>実機を走らせる時間（と空間）を十分確保できなかった
電池まで本番と完全に同じものを使うべきだった</li>
</ul>
</li>
</ul>

<h2>
<span id="使い方" class="fragment"></span><a href="#%E4%BD%BF%E3%81%84%E6%96%B9"><i class="fa fa-link"></i></a>使い方</h2>

<ul>
<li>コース画像を準備する。</li>
<li>走行ロジックを書く。ラッパー(インタフェース)をたたくだけでOK
CPU Core2Duo以上、DirectX9～対応グラボなら3D表示しても実時間実行可能
　離散化⊿tの値を大きくすれば、計算は荒くなるが遅いPCでもサクサク動くはず。
コース上の指定した座標にPathfinderを配置してシミュレーションスタート</li>
</ul>

<h1>
<span id="シミュレーターコードについて" class="fragment"></span><a href="#%E3%82%B7%E3%83%9F%E3%83%A5%E3%83%AC%E3%83%BC%E3%82%BF%E3%83%BC%E3%82%B3%E3%83%BC%E3%83%89%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>シミュレーターコードについて</h1>

<h2>
<span id="インタフェース" class="fragment"></span><a href="#%E3%82%A4%E3%83%B3%E3%82%BF%E3%83%95%E3%82%A7%E3%83%BC%E3%82%B9"><i class="fa fa-link"></i></a>インタフェース</h2>

<p><strong>BrickOSWrapper.h</strong><br>
実機とシミュレータでこのインタフェースを共通化してつかう</p>

<div class="code-frame" data-lang="c++">
<div class="code-lang"><span class="bold">BrickOSWrapper.h</span></div>
<div class="highlight"><pre><code><span class="cp">#pragma once
#include &lt;vcclr.h&gt;
</span><span class="k">namespace</span> <span class="n">BrickOSWrapper</span><span class="p">{</span>
<span class="k">class</span> <span class="nc">PathFinder</span><span class="p">{</span>
<span class="nl">private:</span>
        <span class="k">static</span> <span class="n">gcroot</span><span class="o">&lt;</span><span class="n">Misawat</span><span class="o">::</span><span class="n">Etrobo</span><span class="o">::</span><span class="n">Simulator</span><span class="o">::</span><span class="n">PathFinder</span><span class="o">*&gt;</span> <span class="n">_pathFinder</span><span class="p">;</span>
<span class="nl">public:</span>
        <span class="k">static</span> <span class="kt">void</span> <span class="n">Set</span><span class="p">(</span> <span class="n">Misawat</span><span class="o">::</span><span class="n">Etrobo</span><span class="o">::</span><span class="n">Simulator</span><span class="o">::</span><span class="n">PathFinder</span><span class="o">*</span> <span class="n">pathFinder</span> <span class="p">){</span>
                <span class="n">_pathFinder</span> <span class="o">=</span> <span class="n">pathFinder</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">static</span> <span class="n">Misawat</span><span class="o">::</span><span class="n">Etrobo</span><span class="o">::</span><span class="n">Simulator</span><span class="o">::</span><span class="n">PathFinder</span><span class="o">*</span> <span class="n">pathFinder</span><span class="p">(){</span>
                <span class="k">return</span> <span class="n">_pathFinder</span><span class="p">;</span>
        <span class="p">}</span>
<span class="p">};</span>
<span class="k">class</span> <span class="nc">LightSensorWrapper</span><span class="p">{</span>
<span class="nl">private:</span>
        <span class="n">gcroot</span><span class="o">&lt;</span><span class="n">Misawat</span><span class="o">::</span><span class="n">Etrobo</span><span class="o">::</span><span class="n">Simulator</span><span class="o">::</span><span class="n">LightSensor</span><span class="o">*&gt;</span> <span class="n">_lightSensor</span><span class="p">;</span>
<span class="nl">public:</span>
        <span class="n">LightSensorWrapper</span><span class="p">(){</span>
                <span class="n">_lightSensor</span> <span class="o">=</span> <span class="n">PathFinder</span><span class="o">::</span><span class="n">pathFinder</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">GetLightSensor</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">get</span><span class="p">()</span> <span class="k">const</span><span class="p">{</span>
                <span class="k">return</span> <span class="n">_lightSensor</span><span class="o">-&gt;</span><span class="n">Get</span><span class="p">();</span>
        <span class="p">}</span>
<span class="p">};</span>
<span class="k">class</span> <span class="nc">TractionMotorWrapper</span><span class="p">{</span>
<span class="nl">private:</span>
        <span class="n">gcroot</span><span class="o">&lt;</span><span class="n">Misawat</span><span class="o">::</span><span class="n">Etrobo</span><span class="o">::</span><span class="n">Simulator</span><span class="o">::</span><span class="n">Motor</span><span class="o">*&gt;</span> <span class="n">_tractionMotor</span><span class="p">;</span>
<span class="nl">public:</span>
        <span class="n">TractionMotorWrapper</span><span class="p">(){</span>
                <span class="n">_tractionMotor</span> <span class="o">=</span> <span class="n">PathFinder</span><span class="o">::</span><span class="n">pathFinder</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">GetTractionMotor</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="kt">void</span> <span class="n">Forward</span><span class="p">(</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">s</span> <span class="p">)</span> <span class="k">const</span><span class="p">{</span>
                <span class="n">_tractionMotor</span><span class="o">-&gt;</span><span class="n">Foward</span><span class="p">(</span><span class="n">s</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="kt">void</span> <span class="n">Reverse</span><span class="p">(</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">s</span> <span class="p">)</span> <span class="k">const</span><span class="p">{</span>
                <span class="n">_tractionMotor</span><span class="o">-&gt;</span><span class="n">Reverse</span><span class="p">(</span><span class="n">s</span><span class="p">);</span>
        <span class="p">}</span>
<span class="p">};</span>
<span class="k">class</span> <span class="nc">SteeringMotorWrapper</span><span class="p">{</span>
<span class="nl">private:</span>
        <span class="n">gcroot</span><span class="o">&lt;</span><span class="n">Misawat</span><span class="o">::</span><span class="n">Etrobo</span><span class="o">::</span><span class="n">Simulator</span><span class="o">::</span><span class="n">Motor</span><span class="o">*&gt;</span> <span class="n">_steeringMotor</span><span class="p">;</span>
<span class="nl">public:</span>
        <span class="n">SteeringMotorWrapper</span><span class="p">(){</span>
                <span class="n">_steeringMotor</span> <span class="o">=</span> <span class="n">PathFinder</span><span class="o">::</span><span class="n">pathFinder</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">GetSteeringMotor</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="kt">void</span> <span class="n">Forward</span><span class="p">(</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">s</span> <span class="p">)</span> <span class="k">const</span><span class="p">{</span>
                <span class="n">_steeringMotor</span><span class="o">-&gt;</span><span class="n">Foward</span><span class="p">(</span><span class="n">s</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="kt">void</span> <span class="n">Reverse</span><span class="p">(</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">s</span> <span class="p">)</span> <span class="k">const</span><span class="p">{</span>
                <span class="n">_steeringMotor</span><span class="o">-&gt;</span><span class="n">Reverse</span><span class="p">(</span><span class="n">s</span><span class="p">);</span>
        <span class="p">}</span>
<span class="p">};</span>
<span class="p">};</span>
</code></pre></div>
</div>

<h2>
<span id="走行ロジックアルゴリズムクラスの例" class="fragment"></span><a href="#%E8%B5%B0%E8%A1%8C%E3%83%AD%E3%82%B8%E3%83%83%E3%82%AF%E3%82%A2%E3%83%AB%E3%82%B4%E3%83%AA%E3%82%BA%E3%83%A0%E3%82%AF%E3%83%A9%E3%82%B9%E3%81%AE%E4%BE%8B"><i class="fa fa-link"></i></a>走行ロジック（アルゴリズム）クラスの例</h2>

<p><strong>RunningMethodManager.cpp</strong><br>
走行ロジックのマネージャ</p>

<div class="code-frame" data-lang="c++"><div class="highlight"><pre><code><span class="cp">#include "StdAfx.h"
</span> <span class="cp">#include "RunningMethodManager.h"
</span> <span class="c1">// Normal</span>
 <span class="cp">#include "RunningMethod_Normal.h"
</span> <span class="n">RunningMethod</span><span class="o">::</span><span class="n">Normal</span><span class="o">*</span> <span class="n">iRunningMethodNormal</span><span class="p">;</span>
 <span class="c1">// TODO-start: ここに各自のRunngingMethodクラスを追加</span>
 <span class="c1">// #include "RunningMethod_XXX.h"</span>
 <span class="c1">// iRunningMethodXXX* iRunningMethodXXX;</span>
 <span class="c1">// TODO-end:</span>
 <span class="n">RunningMethodManager</span><span class="o">::</span><span class="n">RunningMethodManager</span><span class="p">()</span>
 <span class="p">{</span>
         <span class="c1">// 光センサー値履歴管理モジュール生成</span>
         <span class="n">iLightValueHistory</span>   <span class="o">=</span> <span class="k">new</span> <span class="n">Common</span><span class="o">::</span><span class="n">LightValueHistory</span><span class="p">();</span>
         <span class="n">iRunningMethodNormal</span> <span class="o">=</span> <span class="k">new</span> <span class="n">RunningMethod</span><span class="o">::</span><span class="n">Normal</span><span class="p">();</span>

         <span class="c1">// TODO-start: ここに各自のRunngingMethodクラスを追加</span>
         <span class="c1">// iRunningMethodXXX = new iRunningMethodXXX();</span>
         <span class="c1">// TODO-end:</span>

         <span class="c1">// 閾値設定</span>
         <span class="n">Common</span><span class="o">::</span><span class="n">LightValueHistory</span><span class="o">::</span><span class="n">setThreshold</span><span class="p">(</span> <span class="mi">100</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span> <span class="mi">50</span> <span class="p">);</span>
 <span class="p">}</span>
 <span class="n">RunningMethodManager</span><span class="o">::~</span><span class="n">RunningMethodManager</span><span class="p">()</span>
 <span class="p">{</span>
 <span class="p">}</span>
 <span class="kt">int</span> <span class="n">RunningMethodManager</span><span class="o">::</span><span class="n">StartRunning</span><span class="p">()</span>
 <span class="p">{</span>
         <span class="kt">bool</span>         <span class="n">courseDetection</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
         <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">latestValue</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
         <span class="c1">// 光センサー値更新</span>
         <span class="n">iLightValueHistory</span><span class="o">-&gt;</span><span class="n">UpdateLightValueHistory</span><span class="p">(</span><span class="o">&amp;</span><span class="n">latestValue</span><span class="p">);</span>
         <span class="c1">// コース判別</span>
         <span class="c1">// TODO-start: ここに各自のRunngingMethodクラスを追加</span>
         <span class="c1">// courseDetection = iRunningMethodXXX-&gt;DetectCourse(iLightValueHistory);</span>
         <span class="c1">// if(true == courseDetection){</span>
         <span class="c1">//      iRunningMethodXXX-&gt;Run();</span>
         <span class="c1">// }</span>
         <span class="c1">// TODO-end:</span>
         <span class="n">courseDetection</span> <span class="o">=</span> <span class="n">iRunningMethodNormal</span><span class="o">-&gt;</span><span class="n">DetectCourse</span><span class="p">(</span><span class="n">iLightValueHistory</span><span class="p">);</span>
         <span class="k">if</span><span class="p">(</span><span class="nb">true</span> <span class="o">==</span> <span class="n">courseDetection</span><span class="p">){</span>
                 <span class="n">iRunningMethodNormal</span><span class="o">-&gt;</span><span class="n">Run</span><span class="p">();</span>
         <span class="p">}</span>
         <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
 <span class="p">}</span>
 <span class="kt">int</span> <span class="n">RunningMethodManager</span><span class="o">::</span><span class="n">StopRunning</span><span class="p">()</span>
 <span class="p">{</span>
         <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
 <span class="p">}</span>
</code></pre></div></div>

<p><em>RunningMethod_Normal.cpp</em>*<br>
状況ごとの走行ロジック（複数用意しても、１つでもＯＫ）</p>

<div class="code-frame" data-lang="c++">
<div class="code-lang"><span class="bold">RunningMethod_Normal.cpp</span></div>
<div class="highlight"><pre><code> <span class="c1">//==============================================================================</span>
 <span class="c1">// - 名前: 通常走行</span>
 <span class="c1">// - 機能: 難所などを含まない通常のカーブ・直線を走るロジックを持つ。</span>
 <span class="c1">//         - 灰色検出のためコースの外側をエッジ走行する。</span>
 <span class="c1">//           つまり、黒：右、白：左にステアリングを切る。</span>
 <span class="c1">//         - 一定角度以上ステアリングをきらないようにリミットを設ける。</span>
 <span class="c1">//==============================================================================</span>
 <span class="cp">#include "stdafx.h"
</span> <span class="cp">#include "RunningMethod_Normal.h"
</span> <span class="k">using</span> <span class="k">namespace</span> <span class="n">Common</span><span class="p">;</span>
 <span class="k">using</span> <span class="k">namespace</span> <span class="n">BrickOSWrapper</span><span class="p">;</span>
 <span class="k">using</span> <span class="k">namespace</span> <span class="n">RunningMethod</span><span class="p">;</span>
 <span class="cp">#define ABS(x) (0&lt;(x)?(x):-(x))
</span> <span class="n">Normal</span><span class="o">::</span><span class="n">Normal</span><span class="p">()</span> <span class="o">:</span>
         <span class="n">_currentDirection</span><span class="p">(</span> <span class="n">DirectionRight</span> <span class="p">),</span>
         <span class="n">_counter</span><span class="p">(</span> <span class="mi">0</span> <span class="p">)</span>
 <span class="p">{</span>
         <span class="n">COUNTER_MAX</span>    <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>
         <span class="n">STEERING_SPEED</span> <span class="o">=</span> <span class="mi">255</span> <span class="o">/</span> <span class="p">(</span><span class="n">LIGHT_HISTORY_MAX</span> <span class="o">/</span> <span class="mi">2</span><span class="p">);</span>
 <span class="p">}</span>
 <span class="n">Normal</span><span class="o">::~</span><span class="n">Normal</span><span class="p">()</span>
 <span class="p">{</span>
 <span class="p">}</span>
 <span class="kt">int</span> <span class="n">Normal</span><span class="o">::</span><span class="n">Run</span><span class="p">()</span>
 <span class="p">{</span>
         <span class="n">_tractionMotor</span><span class="p">.</span><span class="n">Forward</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
         <span class="k">if</span><span class="p">(</span> <span class="n">_lightValueHistory</span><span class="o">-&gt;</span><span class="n">isWhite</span><span class="p">(</span> <span class="n">_lightSensor</span><span class="p">.</span><span class="n">get</span><span class="p">()</span> <span class="p">)</span> <span class="p">){</span>
                 <span class="n">Left</span><span class="p">();</span>
         <span class="p">}</span><span class="k">else</span><span class="p">{</span>
                 <span class="n">Right</span><span class="p">();</span>
         <span class="p">}</span>
         <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
 <span class="p">}</span>
 <span class="kt">void</span> <span class="n">Normal</span><span class="o">::</span><span class="n">Right</span><span class="p">()</span>
 <span class="p">{</span>
         <span class="n">Count</span><span class="p">(</span> <span class="n">DirectionRight</span> <span class="p">);</span>
         <span class="n">_steeringMotor</span><span class="p">.</span><span class="n">Forward</span><span class="p">(</span> <span class="n">GetSpeed</span><span class="p">()</span> <span class="p">);</span>
 <span class="p">}</span>
 <span class="kt">void</span> <span class="n">Normal</span><span class="o">::</span><span class="n">Left</span><span class="p">()</span>
 <span class="p">{</span>
         <span class="n">Count</span><span class="p">(</span> <span class="n">DirectionLeft</span> <span class="p">);</span>
         <span class="n">_steeringMotor</span><span class="p">.</span><span class="n">Reverse</span><span class="p">(</span> <span class="n">GetSpeed</span><span class="p">()</span> <span class="p">);</span>
 <span class="p">}</span>
 <span class="kt">void</span> <span class="n">Normal</span><span class="o">::</span><span class="n">Count</span><span class="p">(</span> <span class="n">Direction</span> <span class="n">direction</span> <span class="p">)</span>
 <span class="p">{</span>
         <span class="k">if</span><span class="p">(</span> <span class="n">_currentDirection</span><span class="o">!=</span><span class="n">direction</span> <span class="p">){</span>
                 <span class="n">_counter</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
         <span class="p">}</span>
         <span class="k">else</span><span class="p">{</span>
                 <span class="n">_counter</span> <span class="o">++</span><span class="p">;</span>
         <span class="p">}</span>
         <span class="n">_currentDirection</span> <span class="o">=</span> <span class="n">direction</span><span class="p">;</span>
 <span class="p">}</span>
 <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">Normal</span><span class="o">::</span><span class="n">GetSpeed</span><span class="p">()</span>
 <span class="p">{</span>
         <span class="k">if</span><span class="p">(</span> <span class="n">_counter</span> <span class="o">&lt;</span> <span class="n">COUNTER_MAX</span> <span class="p">){</span>
                 <span class="k">return</span> <span class="n">GetSpeedFromHistory</span><span class="p">();</span>
         <span class="p">}</span>
         <span class="k">else</span><span class="p">{</span>
                 <span class="c1">// ステアリングきりすぎ防止</span>
                 <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
         <span class="p">}</span>
 <span class="p">}</span>
 <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">Normal</span><span class="o">::</span><span class="n">GetSpeedFromHistory</span><span class="p">()</span>
 <span class="p">{</span>
         <span class="c1">// 白黒の割合によって、ステアリングスピードの変更</span>
         <span class="k">return</span> <span class="n">ABS</span><span class="p">(</span><span class="n">_lightValueHistory</span><span class="o">-&gt;</span><span class="n">GetWhiteRate</span><span class="p">()</span><span class="o">-</span><span class="n">LIGHT_HISTORY_MAX</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">STEERING_SPEED</span><span class="p">;</span>
 <span class="p">}</span>
 <span class="kt">bool</span> <span class="n">Normal</span><span class="o">::</span><span class="n">DetectCourse</span><span class="p">(</span><span class="n">Common</span><span class="o">::</span><span class="n">LightValueHistory</span><span class="o">*</span> <span class="n">lightValueHistory</span><span class="p">)</span>
 <span class="p">{</span>
         <span class="c1">// runで使用するのでポインタを保持</span>
         <span class="n">_lightValueHistory</span> <span class="o">=</span> <span class="n">lightValueHistory</span><span class="p">;</span>
         <span class="c1">// 通常走行なので必ずtrueを返す</span>
         <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
 <span class="p">}</span>
</code></pre></div>
</div>

<p><strong>シミュレータメイン</strong></p>

<div class="code-frame" data-lang="c++">
<div class="code-lang"><span class="bold">Simulation.cpp</span></div>
<div class="highlight"><pre><code>
<span class="cp">#include "StdAfx.h"
#include "Simulation.h"
#include "BrickOSWrapper.h"
#include "RunningMethodManager.h"
</span>
<span class="n">Simulation</span><span class="o">::</span><span class="n">Simulation</span><span class="p">(</span><span class="n">System</span><span class="o">::</span><span class="n">Drawing</span><span class="o">::</span><span class="n">Graphics</span><span class="o">*</span> <span class="n">myGraphics</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">_myGraphics</span><span class="o">=</span><span class="n">myGraphics</span><span class="p">;</span>

<span class="p">}</span>

<span class="n">Simulation</span><span class="o">::</span><span class="n">Simulation</span><span class="p">(</span><span class="n">System</span><span class="o">::</span><span class="n">Windows</span><span class="o">::</span><span class="n">Forms</span><span class="o">::</span><span class="n">Form</span><span class="o">*</span> <span class="n">form</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">_myForm</span><span class="o">=</span><span class="n">form</span><span class="p">;</span>
    <span class="n">_myGraphics</span><span class="o">=</span><span class="n">form</span><span class="o">-&gt;</span><span class="n">CreateGraphics</span><span class="p">();</span>
<span class="p">}</span>

<span class="n">Simulation</span><span class="o">::</span><span class="n">Simulation</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">//UNAVAILABLE</span>
<span class="p">}</span>

<span class="n">Simulation</span><span class="o">::~</span><span class="n">Simulation</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">//DO NOTHING</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="n">Simulation</span><span class="o">::</span><span class="n">Stop</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">running</span><span class="o">=</span><span class="nb">false</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="n">Simulation</span><span class="o">::</span><span class="n">Start</span><span class="p">()</span>
<span class="p">{</span>
    <span class="c1">//[NOTICE]</span>
    <span class="c1">//Windows標準は、左上を(0,0)として右方向にX軸,下方向にY軸をとった座標系</span>
    <span class="c1">//であるので回転角度0°は下向き、回転は反時計回り</span>

    <span class="c1">//[HINT]</span>
    <span class="c1">//SimulatorPlatform(コースの画像データ,グラフィックコンテクスト,描画時の倍率)</span>
    <span class="c1">//単位は1pixel=1mm換算</span>
    <span class="c1">//コースの画像データの横幅が1000pxで倍率が0.6なら600pixelで描画されます</span>

    <span class="c1">//コース</span>
    <span class="n">String</span><span class="o">*</span> <span class="n">courseImageFile</span><span class="o">=</span><span class="s">".</span><span class="se">\\</span><span class="s">honban_course.png"</span><span class="p">;</span>

    <span class="n">_simulatorPlatform</span> <span class="o">=</span> <span class="n">__gc</span> <span class="k">new</span> <span class="n">SimulatorPlatform</span><span class="p">(</span><span class="n">courseImageFile</span><span class="p">,</span> <span class="n">_myGraphics</span><span class="p">,</span><span class="mf">0.001</span><span class="p">);</span>
    <span class="n">PathFinder</span><span class="o">*</span> <span class="n">pathFinder</span> <span class="o">=</span> <span class="n">_simulatorPlatform</span><span class="o">-&gt;</span><span class="n">CreatePathFinder</span><span class="p">(</span><span class="mi">2400</span><span class="p">,</span><span class="mi">500</span><span class="p">,</span><span class="mi">90</span><span class="p">);</span>
    <span class="n">PathFinder</span><span class="o">*</span> <span class="n">pathFinder2</span> <span class="o">=</span> <span class="n">_simulatorPlatform</span><span class="o">-&gt;</span><span class="n">CreatePathFinder</span><span class="p">(</span><span class="mi">2400</span><span class="p">,</span><span class="mi">300</span><span class="p">,</span><span class="mi">90</span><span class="p">);</span>


<span class="c1">//  Misawat::Graphic::Misawa3D::M3DDeviceContext::SetHALMode(false);</span>
    <span class="n">Misawat</span><span class="o">::</span><span class="n">Graphic</span><span class="o">::</span><span class="n">Misawa3D</span><span class="o">::</span><span class="n">M3DDeviceContext</span><span class="o">::</span><span class="n">SetDataDirectory</span><span class="p">(</span><span class="s">"."</span><span class="p">);</span>

    <span class="n">SimulatorPlatform3D</span><span class="o">*</span> <span class="n">simulator3D</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SimulatorPlatform3D</span><span class="p">(</span><span class="n">courseImageFile</span><span class="p">,</span> <span class="nb">false</span><span class="p">,</span><span class="n">_myForm</span><span class="o">-&gt;</span><span class="n">Handle</span><span class="p">.</span><span class="n">ToInt32</span><span class="p">(),</span><span class="n">_myForm</span><span class="o">-&gt;</span><span class="n">ClientRectangle</span><span class="p">.</span><span class="n">Width</span><span class="p">,</span><span class="n">_myForm</span><span class="o">-&gt;</span><span class="n">ClientRectangle</span><span class="p">.</span><span class="n">Height</span><span class="p">);</span>


    <span class="n">_myForm</span><span class="o">-&gt;</span><span class="n">MouseDown</span><span class="o">+=</span><span class="k">new</span> <span class="n">System</span><span class="o">::</span><span class="n">Windows</span><span class="o">::</span><span class="n">Forms</span><span class="o">::</span><span class="n">MouseEventHandler</span><span class="p">(</span><span class="n">simulator3D</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">Misawat</span><span class="o">::</span><span class="n">Etrobo</span><span class="o">::</span><span class="n">Simulator</span><span class="o">::</span><span class="n">SimulatorPlatform3D</span><span class="o">::</span><span class="n">MouseDown</span><span class="p">);</span>
    <span class="n">_myForm</span><span class="o">-&gt;</span><span class="n">MouseUp</span><span class="o">+=</span><span class="k">new</span> <span class="n">System</span><span class="o">::</span><span class="n">Windows</span><span class="o">::</span><span class="n">Forms</span><span class="o">::</span><span class="n">MouseEventHandler</span><span class="p">(</span><span class="n">simulator3D</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">Misawat</span><span class="o">::</span><span class="n">Etrobo</span><span class="o">::</span><span class="n">Simulator</span><span class="o">::</span><span class="n">SimulatorPlatform3D</span><span class="o">::</span><span class="n">MouseUp</span><span class="p">);</span>
    <span class="n">_myForm</span><span class="o">-&gt;</span><span class="n">MouseMove</span><span class="o">+=</span><span class="k">new</span> <span class="n">System</span><span class="o">::</span><span class="n">Windows</span><span class="o">::</span><span class="n">Forms</span><span class="o">::</span><span class="n">MouseEventHandler</span><span class="p">(</span><span class="n">simulator3D</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">Misawat</span><span class="o">::</span><span class="n">Etrobo</span><span class="o">::</span><span class="n">Simulator</span><span class="o">::</span><span class="n">SimulatorPlatform3D</span><span class="o">::</span><span class="n">MouseMove</span><span class="p">);</span>

    <span class="n">simulator3D</span><span class="o">-&gt;</span><span class="n">AddPathFinder</span><span class="p">(</span><span class="n">pathFinder</span><span class="p">);</span>
    <span class="n">simulator3D</span><span class="o">-&gt;</span><span class="n">AddPathFinder</span><span class="p">(</span><span class="n">pathFinder2</span><span class="p">);</span>

    <span class="c1">//パスファインダーに乗車した視点でシミュレータを実行する場合</span>
    <span class="c1">//simulator3D-&gt;SetOnVehicleMode(pathFinder);</span>


    <span class="c1">//ガジェットを配置する。</span>
    <span class="n">simulator3D</span><span class="o">-&gt;</span><span class="n">AddGadget</span><span class="p">(</span><span class="s">"etrobo_moai.x"</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mi">3750</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2040</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="n">simulator3D</span><span class="o">-&gt;</span><span class="n">AddGadget</span><span class="p">(</span><span class="s">"etrobo_gate.x"</span><span class="p">,</span> <span class="s">"marble.bmp"</span><span class="p">,</span> <span class="mi">3280</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2600</span><span class="p">,</span> <span class="mi">83</span><span class="p">);</span>


    <span class="c1">//パスファインダーのボディの色を指定する。</span>
    <span class="n">pathFinder</span><span class="o">-&gt;</span><span class="n">SetBodyColor</span><span class="p">(</span><span class="n">System</span><span class="o">::</span><span class="n">Drawing</span><span class="o">::</span><span class="n">Color</span><span class="o">::</span><span class="n">FromArgb</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">));</span>

    <span class="c1">// Wrapper用にパスファインダをセットする</span>
    <span class="n">BrickOSWrapper</span><span class="o">::</span><span class="n">PathFinder</span><span class="o">::</span><span class="n">Set</span><span class="p">(</span> <span class="n">pathFinder</span> <span class="p">);</span>

    <span class="c1">//pathFinder用走行ロジックオブジェクトを生成する</span>
    <span class="n">RunningMethodManager</span><span class="o">*</span> <span class="n">runningMethodManager</span><span class="o">=</span><span class="n">__gc</span> <span class="k">new</span> <span class="n">RunningMethodManager</span><span class="p">();</span>

    <span class="c1">//画面全体を描画する</span>
    <span class="c1">//_simulatorPlatform-&gt;PaintAll();</span>
    <span class="n">_simulatorPlatform</span><span class="o">-&gt;</span><span class="n">DisableDraw</span><span class="p">(</span><span class="nb">true</span><span class="p">);</span>
    <span class="n">running</span><span class="o">=</span><span class="nb">true</span><span class="p">;</span>

    <span class="c1">//パスファインダーの制御ループ</span>
    <span class="k">while</span><span class="p">(</span><span class="n">running</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">System</span><span class="o">::</span><span class="n">Windows</span><span class="o">::</span><span class="n">Forms</span><span class="o">::</span><span class="n">Application</span><span class="o">::</span><span class="n">DoEvents</span><span class="p">();</span>

        <span class="c1">//シミュレータの時間を0.03sec(30msec)を進める</span>
        <span class="c1">//ここは実機の制御周期(1ループにかかる時間）に即した値を入れる</span>
        <span class="n">_simulatorPlatform</span><span class="o">-&gt;</span><span class="n">Update</span><span class="p">(</span><span class="mf">0.03</span><span class="p">);</span>
        <span class="n">simulator3D</span><span class="o">-&gt;</span><span class="n">Update</span><span class="p">();</span>
        <span class="c1">//走行計算を行う</span>
        <span class="n">runningMethodManager</span><span class="o">-&gt;</span><span class="n">StartRunning</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>


</code></pre></div>
</div>

<p>(以前はフルソースコードを公開していましたが、10年以上前でビルドも通らない可能性があるので、需要があればまた公開検討します^^)</p>

<h1>
<span id="まとめ" class="fragment"></span><a href="#%E3%81%BE%E3%81%A8%E3%82%81"><i class="fa fa-link"></i></a>まとめ</h1>

<ul>
<li>2007年に参加したETロボコンと、そのために作ったETロボコンシミュレーター開発の記録をアーカイブとして掲載しました</li>
<li>2019年現在とはだいぶ異なる手法でシミュレータを開発しましたが、とてもエキサイティングな経験となりました。</li>
</ul>
</div></div></section><div class="css-1yzj1fm"><div class="css-1uv1qiv"><span class="fa fa-twitter"></span></div><div class="css-1uv1qiv"><span class="fa fa-facebook"></span></div></div><div class="apm-Content"><div class="apm-Content_title">Why not register and get more from Qiita?</div><ol class="apm-Content_list"><li>We will deliver articles that match you<div class="description">By following users and tags, you can catch up information on technical fields that you are interested in as a whole</div></li><li>you can read useful information later efficiently<div class="description">By &quot;stocking&quot; the articles you like, you can search right away</div></li><div><a class="apm-Content_help" href="https://help.qiita.com/ja/articles/qiita-login-user" target="_blank"><i class="fa fa-fw fa-arrow-circle-right"></i>What you can do with signing up</a></div></ol><a href="/signup?callback_action=login_or_signup&amp;redirect_to=%2Friversun%2Fitems%2F61b7e1050aa3ec9fff7c&amp;realm=qiita" class="apm-Content_button apm-Content_button-signup">Sign up</a><a href="/login?callback_action=login_or_signup&amp;redirect_to=%2Friversun%2Fitems%2F61b7e1050aa3ec9fff7c&amp;realm=qiita" class="apm-Content_button apm-Content_button-signin">Login</a></div></div><div class="css-helsa7"></div></div></div></div><div class="css-109dbrr"><div class="css-5jpx49"><div class="css-mnxgyc"><button class=" css-1vlpknv"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/riversun/items/61b7e1050aa3ec9fff7c/likers" class="css-1iupg5d">5</a></div><div class="css-fsjkhv"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-1b17vb0">6</span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-7i7f4d"><div class="css-1gj7nt">Improve article</div><a href="/drafts/61b7e1050aa3ec9fff7c/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/riversun/items/61b7e1050aa3ec9fff7c/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/riversun/items/61b7e1050aa3ec9fff7c/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/riversun/items/61b7e1050aa3ec9fff7c/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/riversun/items/61b7e1050aa3ec9fff7c.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="PersonalArticlePage" data-dom-id="PersonalArticlePage-react-component-0ec88947-8979-49cb-bf63-dc5f18e59746">{"authorAnalyticsTrackingId":"UA-129076670-1","organizationAnalyticsTrackingId":null}</script>
      
<footer id="globalFooter" class="st-Footer"><div class="st-Footer_container"><div class="st-Footer_start"><div class="st-Footer_logo"><svg viewbox="0 0 426.57 130" xmlns="http://www.w3.org/2000/svg"><circle cx="167.08" cy="21.4" r="12.28" /><path d="M250.81 29.66h23.48v18.9h-23.48z" /><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z" /><circle cx="216.33" cy="21.4" r="12.28" /></svg></div><div class="st-Footer_catchcopy">How developers code is here.</div><div class="st-Footer_socials"><a class="fa fa-twitter" href="https://twitter.com/qiita"></a><a class="fa fa-facebook-square" href="https://www.facebook.com/qiita/"></a></div></div><div class="st-Footer_end"><div class="st-Footer_qiita"><div class="st-Footer_label">Qiita</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="/about">About</a><a href="/terms">Terms</a><a href="/privacy">Privacy</a><a target="_blank" href="http://help.qiita.com/ja/articles/qiita-community-guideline">Guideline</a><a target="_blank" href="https://help.qiita.com/ja/articles/others-brand-guideline">Design Guideline</a></div><div class="st-Footer_column"><a href="/release-notes">Release</a><a href="/api/v2/docs">API</a><a href="/feedback/new">ご意見</a><a href="https://help.qiita.com">Help</a><a target="_blank" href="https://qiita.com/ads?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Advertisement</a></div></div></div><div class="st-Footer_increments"><div class="st-Footer_label">Increments</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="https://increments.co.jp/company/">About</a><a href="https://increments.co.jp/jobs/">採用情報</a><a href="https://blog.qiita.com">Blog</a></div><div class="st-Footer_column"><a href="https://teams.qiita.com/">Qiita Team</a><a href="https://jobs.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Jobs</a><a href="https://zine.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Zine</a></div></div></div></div></div><div class="st-Footer_copyright">© 2011-2021 Increments Inc.</div></footer><div id="Snackbar-react-component-14207904-ec0a-4aa7-8df9-5ee98d572955"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="Snackbar" data-dom-id="Snackbar-react-component-14207904-ec0a-4aa7-8df9-5ee98d572955">{}</script>
      
<div id="LoginModal-react-component-61ee781a-3992-4bd7-9662-c9bd005d05c6"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="LoginModal" data-dom-id="LoginModal-react-component-61ee781a-3992-4bd7-9662-c9bd005d05c6">{}</script>
      
<div id="StockModal-react-component-eaa71d6d-1175-4f1d-9adb-f89d53a00028"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="StockModal" data-dom-id="StockModal-react-component-eaa71d6d-1175-4f1d-9adb-f89d53a00028">{}</script>
      
</div><div id="dataContainer" style="display: none;" data-config="{&quot;actionPath&quot;:&quot;public/items#show&quot;,&quot;settings&quot;:{&quot;analyticsTrackingId&quot;:&quot;UA-24675221-12&quot;,&quot;assetsMap&quot;:{},&quot;csrfToken&quot;:&quot;vKJwpMkTuOK8f/5ah1lxDNVWIrTfG0YrB2qPGDyGmLO4Y32iCTSMjgN4bVaaLgqr4wtIKCU7MLmjdAyBkrQR8Q==&quot;,&quot;locale&quot;:&quot;en&quot;},&quot;currentUser&quot;:null}" /></body></html><script type="application/json" data-js-react-on-rails-store="AppStoreWithReactOnRails">{"snackbar":{"type":"","body":"","isActive":false},"article":{"article":{"body":"\u003cp\u003e\u003cfont color=\"red\"\u003e本投稿は10年以上前のブログ記事が元になっているため、技術の情報が古いです。ご注意ください\u003c/font\u003e\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"概要\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%A6%82%E8%A6%81\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e概要\u003c/h1\u003e\n\n\u003cul\u003e\n\u003cli\u003e\n\u003cstrong\u003eETロボコン 2007\u003c/strong\u003e用のシミュレーターを開発したときの記録です（参戦記を兼ねる）\u003c/li\u003e\n\u003cli\u003eまだ 気軽なUnityも、気軽な物理シミュレーターも、気軽なDeep Learningも無い時代に、若さ！？とパッションだけでシミュレーターをフルスクラッチ開発しました＾＾\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"etロボコンシミュレーターとは\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#et%E3%83%AD%E3%83%9C%E3%82%B3%E3%83%B3%E3%82%B7%E3%83%9F%E3%83%A5%E3%83%AC%E3%83%BC%E3%82%BF%E3%83%BC%E3%81%A8%E3%81%AF\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eETロボコンシミュレーターとは\u003c/h2\u003e\n\n\u003cp\u003e作ったETロボコンシミュレーターが動いている様子はこれです。(注意：BGMつきの動画が開きます）\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://www.youtube.com/watch?v=rhE9s7tCPP4\" rel=\"nofollow noopener\" target=\"_blank\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F05fa6413-dceb-907c-9277-e496f2256b51.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=6b259d556e49797a5a055f7d22369d83\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/05fa6413-dceb-907c-9277-e496f2256b51.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F05fa6413-dceb-907c-9277-e496f2256b51.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=bae1f1307cc162f4369cb9149970316e 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e12年前の自分がもっているスキルをフル動員してフルスクラッチでETロボコン(RCX時代)のPCシミュレーターを作りました。\u003c/p\u003e\n\n\u003cp\u003e【技術】\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eVisual C++ 2005 →走行ロジック\u003c/li\u003e\n\u003cli\u003eVisual C# 2005 →シミュレーション計算、GUIパート\u003c/li\u003e\n\u003cli\u003eDirect3D →3Dレンダリング\u003c/li\u003e\n\u003cli\u003eH8 C++(RCX)\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e【シミュレータースペック】 \u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e運動学計算：2輪モデル\u003c/li\u003e\n\u003cli\u003eBRICK：LEGO Mindstorm(RCX)\u003c/li\u003e\n\u003cli\u003e緒元値：RCXベースのパスファインダーから実測、2D表示モード・3D表示モード、実時間シミュレーション可能、ETロボコン 2007対応\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"プロローグ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%97%E3%83%AD%E3%83%AD%E3%83%BC%E3%82%B0\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eプロローグ\u003c/h1\u003e\n\n\u003cp\u003eUMLでロボットのソフトウェアを設計して戦うロボコンがあるという話を、同じプロジェクトの仲間のN女史から聞いた。\u003cbr\u003e\n彼女の所属会社でETロボコンに参加するチームがあるということで、そのチームの仲間に入れてもらうことになった。\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003eROBO-ONE\u003c/strong\u003eなど、ロボコンには何度か参加したことはあったが\u003cstrong\u003eUMLでロボットのソフト設計\u003c/strong\u003eを競うというのは個人的に思いもよらなかった面白い視点。\u003c/p\u003e\n\n\u003cp\u003e私が出場していたロボコンではたいていメカとか回路まわりに苦戦して、ソフトももちろん書くけど、\u003cstrong\u003eソフトの中身のつくり\u003c/strong\u003eで勝負しようとは思っていませんでした。\u003c/p\u003e\n\n\u003cp\u003eでも、このロボコンはソフトウェアの設計にフォーカスしているらしい。\u003c/p\u003e\n\n\u003cp\u003eロボットもソフトも好きな人間としてはとっても興味がわく。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"etロボコン-2007-とは\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#et%E3%83%AD%E3%83%9C%E3%82%B3%E3%83%B3-2007-%E3%81%A8%E3%81%AF\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eETロボコン 2007 とは\u003c/h1\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"ロボコン名称\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%AD%E3%83%9C%E3%82%B3%E3%83%B3%E5%90%8D%E7%A7%B0\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eロボコン名称\u003c/h2\u003e\n\n\u003cp\u003eロボコンの名前は「ETロボコン」と呼ばれている。古くは、ETソフトウェアデザインロボコンと呼んでいたそう。\u003c/p\u003e\n\n\u003cp\u003eこのロボコンの面白いところは、本来ロボコンの主役となるはずのロボットがあらかじめ規定されているということ。\u003c/p\u003e\n\n\u003cp\u003eWebサイト \u003ca href=\"http://www.etrobo.jp/\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://www.etrobo.jp/\u003c/a\u003e\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"パスファインダー\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%91%E3%82%B9%E3%83%95%E3%82%A1%E3%82%A4%E3%83%B3%E3%83%80%E3%83%BC\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eパスファインダー\u003c/h2\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/6aecfa6f08ab793289dd48280028e0d05b123996/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f65386366313234382d663164322d646431332d366330372d3836373863653035306131642e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fe8cf1248-f1d2-dd13-6c07-8678ce050a1d.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=227cbcfe5d89fe78dba7791227996c4f\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/e8cf1248-f1d2-dd13-6c07-8678ce050a1d.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fe8cf1248-f1d2-dd13-6c07-8678ce050a1d.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=64090f0441ace599db7625fff4c2aa2a 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/d0b4e37ff7591dc91c7c9bf5bf7e9ac46ce71347/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f31633562356238312d646639652d636633612d653731372d3030646538363037376633362e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F1c5b5b81-df9e-cf3a-e717-00de86077f36.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=be143c7f1d7214eaf4717a429ac268f3\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/1c5b5b81-df9e-cf3a-e717-00de86077f36.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F1c5b5b81-df9e-cf3a-e717-00de86077f36.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=0ec6b47232652e23fa1cd8eb53f0c159 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eその規定されているロボットというのがLEGO Mindstormで作ったパスファインダーと呼ばれる走行ロボット。\u003c/p\u003e\n\n\u003cp\u003eLEGOでできた機構部分だけでなく、モーター、センサー、からマイコン、それらをつなぐ回路などまで、出場者みんなが同じ機体を使う。\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003e「何で勝敗・優劣を決めるのか？」\u003c/strong\u003e\u003c/p\u003e\n\n\u003cp\u003e機体が一緒なんだから、\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003e「当然、勝敗はソフトウェアで決まります。」\u003c/strong\u003e\u003c/p\u003e\n\n\u003cp\u003eということだそう。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"コンテストの内容\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%B3%E3%83%B3%E3%83%86%E3%82%B9%E3%83%88%E3%81%AE%E5%86%85%E5%AE%B9\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eコンテストの内容\u003c/h2\u003e\n\n\u003cp\u003e勝敗、優劣の判定基準は大きく分けると、 ソフトウェアのモデルで競う、レースのタイムで競う、の２つの側面がある。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"コンセプト\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%B3%E3%83%B3%E3%82%BB%E3%83%97%E3%83%88\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eコンセプト\u003c/h1\u003e\n\n\u003cp\u003e参加にあたり、こんなコンセプトをたてた\u003c/p\u003e\n\n\u003cp\u003e■モデル評価重視型アプローチ\u003c/p\u003e\n\n\u003cp\u003e(1)アーキテクチャ方針\u003cbr\u003e\n　・内部および外部品質特性を明示的にアピールできるようにする。→ISO9126の１つ１つに\u003cbr\u003e\nすべてロジカルに答えられるようにする。\u003c/p\u003e\n\n\u003cp\u003e　・アーキテクチャと品質特性の因果を明示したい。→○○を達成したいから、ここはこう\u003cbr\u003e\nなっているという説明ができるように。\u003c/p\u003e\n\n\u003cp\u003e(2)分析・設計\u003cbr\u003e\n　・プロダクトライン（コアと変動性の層別）分析設計をやってみたい。→コアと変動部分の分析、例えば次回ルールが変わりそうなところはどこ？\u003c/p\u003e\n\n\u003cp\u003e　・カタリシスによるコンポ分析をやってみたい。\u003c/p\u003e\n\n\u003cp\u003e■タイムアタック重視型アプローチ\u003c/p\u003e\n\n\u003cp\u003e(3)制御アルゴリズム\u003cbr\u003e\n　・PID制御をきちっとSWで実装する。＆それをOOで設計する。\u003cbr\u003e\n　・自機の相対ポジションを保持する。　→モータ電圧とステアリングと経過時間から計算\u003cbr\u003e\n可能？\u003cbr\u003e\n　・フィードフォワード制御をする。　→あらかじめすべての通路情報をインプットしてお\u003cbr\u003e\nく。\u003cbr\u003e\n　・シャトル多数決システムの採用　→同一アルゴリズムを意味的に異なる設計で多重につ\u003cbr\u003e\nくり、多数決値を制御につかうスペースシャトル方式を使う。\u003cbr\u003e\n　・学習システム搭載　→GA,強化学習,ニューラルネットとか。\u003c/p\u003e\n\n\u003cp\u003e(4)シミュレーション\u003cbr\u003e\n　・シミュレータを作成し、最適アルゴリズムを探す。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"追加アイデア\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%BF%BD%E5%8A%A0%E3%82%A2%E3%82%A4%E3%83%87%E3%82%A2\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e追加アイデア\u003c/h2\u003e\n\n\u003cp\u003e(1)外乱に強いつくりにする\u003cbr\u003e\n　　→光量の情報なども瞬間値でなく積分値、加重平均でとるなどの工夫。\u003c/p\u003e\n\n\u003cp\u003e(2)実機の操作には薄いラッパーをはさむ。直接APIをたたかない。\u003cbr\u003e\n　　→シミュレータも同じインタフェースで実装しておけば実機とシミュで同じ制御ロジックを使いまわせるでしょ。\u003c/p\u003e\n\n\u003cp\u003e(3)タッチセンサーを活用する。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"スケジュール\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%B9%E3%82%B1%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eスケジュール\u003c/h1\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e    | 公式            | 内部予定\n-----+-----------------+---------------\n4/20 |                 | ▲コンセプトの決定\n     |                 | ▲アーキテクチャ＆担当の決定\n4/25 |                 | ▲LimitedFunction 1\n4/27 | モデリング教育  | 教育２：Yさん参加\n5/11 |                 | ▲LimitedFunction 2\n5/18 |                 | ▲FullFunction\n5/25 |                 | ▲RC\n5/27 | 試走会Ⅰ        | おそらく土曜に参加\n6/08 | 試走会Ⅱ        | 未定\n6/30 | 関東地区予選    | 未定\n7/14 | 本戦            | 未定\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"チーム\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%81%E3%83%BC%E3%83%A0\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eチーム\u003c/h1\u003e\n\n\u003cp\u003eチームは私ふくめて4人。\u003c/p\u003e\n\n\u003cp\u003eチームといっても、それぞれのプロジェクトがあるので、ほとんど集まれないので\u003cbr\u003e\n主担当をきめて、それぞれが自宅で各自進めるということになった。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"私の担当\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E7%A7%81%E3%81%AE%E6%8B%85%E5%BD%93\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e私の担当\u003c/h1\u003e\n\n\u003cp\u003e他のメンバーは所属会社のお金で実機を買ってもらっていた。彼らは業務としてロボコンに参加できるのだが、\u003cbr\u003e\n私は所属会社もプロジェクトも違うので実機（パスファインダー）を持っていなかった。\u003c/p\u003e\n\n\u003cp\u003eもちろん業務としての参加ではなかったので、\u003cbr\u003e\n実機のアルゴを試せるシミュレーターを開発する役割を買って出た。\u003c/p\u003e\n\n\u003cp\u003eうまくいくか不明だが、　最適アルゴリズムを探す　というミッションのもとシミュレーターを開発することにした。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"シミュレータのアイデア\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%B7%E3%83%9F%E3%83%A5%E3%83%AC%E3%83%BC%E3%82%BF%E3%81%AE%E3%82%A2%E3%82%A4%E3%83%87%E3%82%A2\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eシミュレータのアイデア\u003c/h1\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"シミュレータの実現ステップ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%B7%E3%83%9F%E3%83%A5%E3%83%AC%E3%83%BC%E3%82%BF%E3%81%AE%E5%AE%9F%E7%8F%BE%E3%82%B9%E3%83%86%E3%83%83%E3%83%97\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eシミュレータの実現ステップ\u003c/h2\u003e\n\n\u003cp\u003eこんなステップでシミュレータをつくる。期間内にベストエフォートで。\u003c/p\u003e\n\n\u003cp\u003e目的にあわせて、どのレベルの正確さを求めるか、が物理シミュレーター作りのポイント。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eSTEP1:通称：LV1\n最低限の動作をシミュレーションする。2次元、3自由度（X,Y,ヨー）の車両のシミュレーション。必要な各種パラメータは実機あわせ。実時間シミュレーションの離散化はシンプルなオイラー法。2週間くらいで作るというのはこれくらいが限界かな\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/a5bb668c16c3f2398990006ccac3dd02e3d70a2d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f39303932333731352d613433372d356464362d336337652d6230666236373935323231382e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F90923715-a437-5dd6-3c7e-b0fb67952218.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=fd03df96d3c8878e0451212f5ed694a9\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/90923715-a437-5dd6-3c7e-b0fb67952218.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F90923715-a437-5dd6-3c7e-b0fb67952218.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=d205d059c608779371af0ab98a5bdb11 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003cp\u003eSTEP2:通称：LV2\u003cbr\u003e\n少し動力学、運動学をいれてみる。各種パラメータ（たとえば慣性モーメントとか、テンソルとか）は物性値から計算してみる。2次元、3自由度（X,Y,yaw）の車両のシミュレーション。実時間シミュレーションの離散化はルンゲクッタで。 \u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eSTEP3:通称：LV3\u003cbr\u003e\n3次元、6自由度の運動シミュレーション。ぜんぶ自作プログラミングだと厳しいかも。まっとうな物理エンジンとか、最低でもMATLABくらいは使いたい。 \u003c/p\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"実装よりの整理\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AE%9F%E8%A3%85%E3%82%88%E3%82%8A%E3%81%AE%E6%95%B4%E7%90%86\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e実装よりの整理\u003c/h2\u003e\n\n\u003cp\u003e実装よりにシミュレータへの要望を整理してみると、こんな感じ\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003cp\u003e\u003cstrong\u003eWindowsプラットフォームで動作すること\u003c/strong\u003e\u003cbr\u003e\nみんなのPCがWindowsだから。昔つくった3Dライブラリあるので、DirectXつかう。\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e\u003cstrong\u003e今後のSTEP2,STEP3への物理計算拡張を考慮した設計とすること\u003c/strong\u003e\u003cbr\u003e\n物理計算処理も階層化したほうがよさそう。ソルバー単位になるかな。\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e\u003cstrong\u003e物理計算エンジン部分を取替え可能に設計すること\u003c/strong\u003e\u003cbr\u003e\n物理計算と描画の境界線は意識しましょう。学生の頃、物理計算用のPG組んだとき、これを混ぜて痛い目を見た。後から描画処理を追加するときに、計算処理に手をいれたくなるもの。\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e\u003cstrong\u003eパスファインダーをパーツのアセンブリとして表現すること\u003c/strong\u003e\u003cbr\u003e\n将来パスファインダーを構成する部品が変わってもいいように。\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e\u003cstrong\u003e3Dグラフィックスへの対応を考慮した設計とすること\u003c/strong\u003e\u003cbr\u003e\nいずれ3Dにも対応させたいので、スケール感をもって、2Dの計算をさせたほうが良い。\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e\u003cstrong\u003e複数台のパスファインダーの同時シミュレーションに対応すること\u003c/strong\u003e\u003cbr\u003e\n複数でアルゴリズム対決みたいなのをシミュレータ上でできたら楽しそう。\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e\u003cstrong\u003eC++で記述されたパスファインダー制御コードと連携できること\u003c/strong\u003e\u003cbr\u003e\nパスファインダーの制御コードはC++なので、薄いWrapperをかませるような使い方を想定します。\u003c/p\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"実装イメージ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AE%9F%E8%A3%85%E3%82%A4%E3%83%A1%E3%83%BC%E3%82%B8\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e実装イメージ\u003c/h2\u003e\n\n\u003cp\u003eもう少しイメージをふくらませて\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/0c911be2ef26d729700822abe3eb9529eed9704d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f63303936366163382d343639322d616162622d626130392d3564613032333861303265302e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fc0966ac8-4692-aabb-ba09-5da0238a02e0.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=bb8eddb35ac2a6e54c6e18b436608974\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/c0966ac8-4692-aabb-ba09-5da0238a02e0.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fc0966ac8-4692-aabb-ba09-5da0238a02e0.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=c2e03dd16346e1ee5a6396958793555c 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"シミュレータの能力\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%B7%E3%83%9F%E3%83%A5%E3%83%AC%E3%83%BC%E3%82%BF%E3%81%AE%E8%83%BD%E5%8A%9B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eシミュレータの能力\u003c/h1\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"パスファインダー実機写真\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%91%E3%82%B9%E3%83%95%E3%82%A1%E3%82%A4%E3%83%B3%E3%83%80%E3%83%BC%E5%AE%9F%E6%A9%9F%E5%86%99%E7%9C%9F\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eパスファインダー（実機）写真\u003c/h2\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/c8b588fe3d15373cfe4d5af18f9dfcf838d4c629/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f63356639363432622d326264352d666239352d656466662d6332666431623732313732362e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fc5f9642b-2bd5-fb95-edff-c2fd1b721726.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=a5ed2f6b9a62f2738cae1ee13dc8131b\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/c5f9642b-2bd5-fb95-edff-c2fd1b721726.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fc5f9642b-2bd5-fb95-edff-c2fd1b721726.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=0d7afa61fc3ffd5140b05ac11be4e7b9 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"シミュレーションする現象\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%B7%E3%83%9F%E3%83%A5%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%99%E3%82%8B%E7%8F%BE%E8%B1%A1\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eシミュレーションする現象\u003c/h2\u003e\n\n\u003cp\u003eとりあえず、STEP1では以下のようなものを再現してみる。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003cp\u003e動きの再現\u003cbr\u003e\u003cbr\u003e\n直進、バック\u003cbr\u003e\nステアリングによる旋回（円旋回） \u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e動きの原因の再現\u003cbr\u003e\u003cbr\u003e\nトラクションモーター\u003cbr\u003e\nステアリングモーター\u003c/p\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"物理計算の制約\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E7%89%A9%E7%90%86%E8%A8%88%E7%AE%97%E3%81%AE%E5%88%B6%E7%B4%84\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e物理計算の制約\u003c/h1\u003e\n\n\u003cp\u003eSTEP1では、\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e計算は2次元、3自由度\u003c/li\u003e\n\u003cli\u003e車両は4輪等価な2輪モデル\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/09ce5fba25b023f2a1846d53a49c1b05f2173c96/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f64623061353436632d343134342d373931312d656635322d3734626465366539623837302e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fdb0a546c-4144-7911-ef52-74bde6e9b870.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=9c90d0100f04191a20c23c5bdae94793\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/db0a546c-4144-7911-ef52-74bde6e9b870.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fdb0a546c-4144-7911-ef52-74bde6e9b870.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=e1ef5e58c91708b2241b04c83708c6f4 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e急激な運動は考慮しない。急加速、減速、急ステアリングなど。\u003c/li\u003e\n\u003cli\u003e過渡現象は考えない→車両速度は一定 \nみたいな感じを想定\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"いよいよ実機で計測\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%84%E3%82%88%E3%81%84%E3%82%88%E5%AE%9F%E6%A9%9F%E3%81%A7%E8%A8%88%E6%B8%AC\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eいよいよ実機で計測\u003c/h1\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"実機のサイズ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AE%9F%E6%A9%9F%E3%81%AE%E3%82%B5%E3%82%A4%E3%82%BA\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e実機のサイズ\u003c/h2\u003e\n\n\u003cp\u003eパスファインダーの寸法をマニュアルで測る。\u003cbr\u003e\nそれにしても資料をさがしてもどこにも寸法が書いていないというのは不思議\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/903ef5f792a94a69b6012d69804bd8eb8dac2bc9/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f38343131623262622d616662392d313863632d623330652d6663356439343463613465312e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F8411b2bb-afb9-18cc-b30e-fc5d944ca4e1.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=5060b869e8ecaf61008cf5552646ace4\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/8411b2bb-afb9-18cc-b30e-fc5d944ca4e1.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F8411b2bb-afb9-18cc-b30e-fc5d944ca4e1.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=3e4d33428dd814e6a957351b57156d15 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eこんな計測方法なので精度がまったく保証されない。\u003cbr\u003e\nしかし、物理シミュレーションのアバウトさ加減を考えると1mm,2mmずれてもどうってことは無い。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"実機走行実験\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AE%9F%E6%A9%9F%E8%B5%B0%E8%A1%8C%E5%AE%9F%E9%A8%93\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e実機走行実験\u003c/h1\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"速度測定実験\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E9%80%9F%E5%BA%A6%E6%B8%AC%E5%AE%9A%E5%AE%9F%E9%A8%93\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e①速度測定実験\u003c/h2\u003e\n\n\u003cp\u003e実機の速度を測定する実験を行う。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003cp\u003e目的\u003cbr\u003e\nプログラム内でのトラクションモータ制御値とパスファインダー（実機）の速度の関係を調査する。\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e実験方法\u003cbr\u003e\n一定距離の直線を走行させて、走破時間をストップウォッチで計測する。\u003c/p\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/0ef079a799dc35ca5617b598029141a720f2e289/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f62363565386262622d323964612d613233302d373061662d6462343237393166343431322e676966\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fb65e8bbb-29da-a230-70af-db42791f4412.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=b23245a45e9a38440ac62058e4b28281\" alt=\"speedt.gif\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/b65e8bbb-29da-a230-70af-db42791f4412.gif\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fb65e8bbb-29da-a230-70af-db42791f4412.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=34ac43ce7500ef55f3311c886f2fab63 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e実験条件\n593mmの直線コースを、モーター制御値 255 128 64 32 でそれぞれ走行させる。 \u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/303e6e0825bd6456508aa45580a7ddc3648cbd58/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f34333730363166662d343530632d346639642d363830622d6238306339616334343465382e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F437061ff-450c-4f9d-680b-b80c9ac444e8.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=dad54e19e4692c278bd11a905ac70c45\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/437061ff-450c-4f9d-680b-b80c9ac444e8.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F437061ff-450c-4f9d-680b-b80c9ac444e8.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=0c31b03d37caad733ab4782af26b0cef 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e実験結果を以下に示す\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/6e1859de4f238c4dbf8d6ef2bb365391f5bc4932/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f33623465366262362d616363652d616431642d613065662d3163383631613639356631632e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F3b4e6bb6-acce-ad1d-a0ef-1c861a695f1c.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=9df6abfe50b5afdaad958d4d1018f471\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/3b4e6bb6-acce-ad1d-a0ef-1c861a695f1c.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F3b4e6bb6-acce-ad1d-a0ef-1c861a695f1c.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=7c359f8f559a3464601e863c4ed771bc 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003e考察\u003c/strong\u003e\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e実験1,2,3は制御値(電圧)とほぼ速度と比例の関係を確認した。\u003c/li\u003e\n\u003cli\u003e実験4は低電圧のため、かかる負荷トルクにモータトルクが影響を受けていると思われる。\u003c/li\u003e\n\u003cli\u003e電池はフル\u003c/li\u003e\n\u003cli\u003eストップウォッチは人間の目視のため不正確\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"利用できそうな計算式の導出\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%88%A9%E7%94%A8%E3%81%A7%E3%81%8D%E3%81%9D%E3%81%86%E3%81%AA%E8%A8%88%E7%AE%97%E5%BC%8F%E3%81%AE%E5%B0%8E%E5%87%BA\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e利用できそうな計算式の導出\u003c/h2\u003e\n\n\u003cul\u003e\n\u003cli\u003e計算式の導出\n速度と制御値Xの関係を1次式で近似してみた\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"math\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003ey=2.0552x+51.445\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e負荷トルクを無視できる、制御量がある程度大きいときには上式で近似する。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/d2bbf5d889802b2289ca98d74654b210c44a8a07/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f33383161346262662d366239392d303438642d373234642d3561393331623938616230612e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F381a4bbf-6b99-048d-724d-5a931b98ab0a.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=d67dcb6b0b73d07054acdf02e044bfa3\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/381a4bbf-6b99-048d-724d-5a931b98ab0a.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F381a4bbf-6b99-048d-724d-5a931b98ab0a.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=43ba71bb7fb73107198906b888f31258 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"定常円旋回実験\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AE%9A%E5%B8%B8%E5%86%86%E6%97%8B%E5%9B%9E%E5%AE%9F%E9%A8%93\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e②定常円旋回実験\u003c/h2\u003e\n\n\u003cp\u003eステアリング性能をみるため、ある角度にステアリングをきったまま同一速度で旋回運動をさせる実験をする。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003cp\u003e目的\u003cbr\u003e\n舵角δと旋回半径Rの関係を調査すること\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e実験方法\u003cbr\u003e\n舵角と速度を固定し、定常円旋回運動をさせ、パスファインダーの走行軌跡を調べる \u003c/p\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/c2db2d6ff221e74b9433708f63a5a5f403d8cbbb/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f62363739633233612d373931342d353761632d303835622d3839386336346134363234612e676966\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fb679c23a-7914-57ac-085b-898c64a4624a.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=7f03d589d5b59c112f1180d82d232c13\" alt=\"mov.gif\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/b679c23a-7914-57ac-085b-898c64a4624a.gif\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fb679c23a-7914-57ac-085b-898c64a4624a.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=c8e123ecc695525bd2ce125f9ba88111 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/6e1b526b7ae8208409e2c5a9997346f42b477e56/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f32373233313132322d386635332d316237382d343563352d6133336464333363303332632e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F27231122-8f53-1b78-45c5-a33dd33c032c.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=1723b897597471350caabfe5b07e8309\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/27231122-8f53-1b78-45c5-a33dd33c032c.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F27231122-8f53-1b78-45c5-a33dd33c032c.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=6e00c60c9e0ca62992347310b9d31b44 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e実験条件\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"math\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e一定速度V=325(mm/s^2)\\\\\n一定舵角δ=0.698(rad)・・・40°\\\\\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"定常円旋回実験結果\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AE%9A%E5%B8%B8%E5%86%86%E6%97%8B%E5%9B%9E%E5%AE%9F%E9%A8%93%E7%B5%90%E6%9E%9C\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e定常円旋回実験結果\u003c/h2\u003e\n\n\u003cp\u003e走行させたものを固定カメラで録画し画像解析して定常円旋回性能をしることができた。\u003cbr\u003e\n下の図はステアリングを40°に固定したときの軌跡。きれいな円を描いている。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e実験結果\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/baf2de564e0399384c8d1f25291cb35534964a83/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f38353034343030302d633866612d393137642d396663332d3862646432376135653233322e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F85044000-c8fa-917d-9fc3-8bdd27a5e232.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=ab4995f6660b1527588710e0071bacfb\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/85044000-c8fa-917d-9fc3-8bdd27a5e232.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F85044000-c8fa-917d-9fc3-8bdd27a5e232.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=551547185715fd61f347b384e4b3e50c 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e**走行軌道より旋回半径\u003c/p\u003e\n\n\u003cp\u003e旋回半径が判明\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"math\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003eR=111 (mm)\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"定常円旋回計算式確認\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AE%9A%E5%B8%B8%E5%86%86%E6%97%8B%E5%9B%9E%E8%A8%88%E7%AE%97%E5%BC%8F%E7%A2%BA%E8%AA%8D\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e定常円旋回計算式確認\u003c/h2\u003e\n\n\u003cul\u003e\n\u003cli\u003e定常円旋回計算式\nパスファインダーを四輪と等価な二輪車モデルとすると、一定速度V(mm/s2)、一定舵角δ(°)の定常円旋回運動は以下の式で表すことができる\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"math\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003eR=\\frac{(1+AV^2)L}{δ} ・・・（１）\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"math\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\\begin{align}\n\u0026amp;R:旋回半径(mm)\\\\\n\u0026amp;L:ホイールベース（:車軸間距離） (mm)\\\\\n\u0026amp;δ:舵角(rad)\\\\ \n\u0026amp;V:速度(mm/s^2)\\\\ \n\u0026amp;A:スタビリティファクタ\\\\\n\\end{align}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e上式より\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"math\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003eA=\\frac{Rδ}{L – 1}\\frac{1}{V^2} ・・・（２）\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eAはスタビリティファクタとなる。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eスタビリティファクタAの導出\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e実験結果を(2)式に代入\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"math\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003eA=-1.22×10^{-6}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eここで\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"math\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\\begin{align}\n\u0026amp;A \u0026gt;0 アンダーステア(US)・・・速度増加とともにRが増加する。\\\\\n\u0026amp;A =0 ニュートラルステア(NS)　\\\\\n\u0026amp;A \u0026lt;0 オーバーステア(OS)・・・速度増加とともにRが減少する。\\\\\n\\end{align}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eであるので \u003c/p\u003e\n\n\u003cp\u003eパスファインダーは \u003cstrong\u003eオーバーステア（OS)\u003c/strong\u003e の特性をもった車両ということになる。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"ステアリングモーター動作実験\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%B9%E3%83%86%E3%82%A2%E3%83%AA%E3%83%B3%E3%82%B0%E3%83%A2%E3%83%BC%E3%82%BF%E3%83%BC%E5%8B%95%E4%BD%9C%E5%AE%9F%E9%A8%93\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e③ステアリングモーター動作実験\u003c/h2\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003cp\u003e目的\u003cbr\u003e\nプログラムから指示する制御値に対するステアリングの回転数（角速度）の導出。\u003cbr\u003e\nLEGOモータの定格とステアリングに力を伝達するギア比から計算してもいいが、結局のところ\u003cstrong\u003e慣性モーメント\u003c/strong\u003eその他の影響を考慮すると実際にタイアを地面につけたまま、制御の末端であるステアリングの回転数をはかったほうがより現実的だろうという判断をした。\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e実験\u003cbr\u003e\nステアリングが90°回転するまでの所用時間を計測した\u003c/p\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/288f25bd2cd7d6cc36460d916668325fb838eb0f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f66393865373163622d323665382d613864322d636665312d6138383363633330306336632e676966\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Ff98e71cb-26e8-a8d2-cfe1-a883cc300c6c.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=3596b0e058f1476682bc307621f7169f\" alt=\"anglet.gif\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/f98e71cb-26e8-a8d2-cfe1-a883cc300c6c.gif\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Ff98e71cb-26e8-a8d2-cfe1-a883cc300c6c.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=61a90d86ae0e6f9d907e6744c9f904f3 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e実験結果\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/d4fe2f44d55d49950477f6d3e10076c5e3e86600/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f64393131666461312d643261352d396364352d343063612d3065353435356230323638652e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fd911fda1-d2a5-9cd5-40ca-0e5455b0268e.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=d5e50fed1a52c4d10acbf9734237d5d7\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/d911fda1-d2a5-9cd5-40ca-0e5455b0268e.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fd911fda1-d2a5-9cd5-40ca-0e5455b0268e.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=3f4dd3b16e598c7c588e79d47198e0f2 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/0b229d268a44cb5902114f4ec655a5d9a45c77fc/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f33316365303738652d663466362d303963352d373763332d6638623231363232336662632e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F31ce078e-f4f6-09c5-77c3-f8b216223fbc.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=56eb95eba1f2a60a2703c748ee908bdd\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/31ce078e-f4f6-09c5-77c3-f8b216223fbc.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F31ce078e-f4f6-09c5-77c3-f8b216223fbc.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=8ab5b1b676a350bb279367b32dd1d4c3 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e実験データを対数近似でフィットさせた以下の式をステアリング角速度の計算に用いる\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"math\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003eY=103.29Ln(x)-209.04 \n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003ex:制御値 (17～255)\u003c/p\u003e\n\n\u003cp\u003e制御値\u0026lt;16の場合、\u003cbr\u003e\nまったく動作しない(モータ＋ギアのトルクが摩擦にまけて動かない）\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"可動寸法計測\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%8F%AF%E5%8B%95%E5%AF%B8%E6%B3%95%E8%A8%88%E6%B8%AC\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e可動・寸法計測\u003c/h1\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"ステアリングの可動範囲\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%B9%E3%83%86%E3%82%A2%E3%83%AA%E3%83%B3%E3%82%B0%E3%81%AE%E5%8F%AF%E5%8B%95%E7%AF%84%E5%9B%B2\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eステアリングの可動範囲\u003c/h2\u003e\n\n\u003cp\u003e以下の２つについて計測する\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e運動限界舵角\u003cbr\u003e\n勝手に命名(本当は何て言うんだっけ？)\nこれ以上ステアリングを切りすぎるとまともな動きをしなくなる（つかえる、倒れる、壊れる等）限界の角度を計測する\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"math\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e運動限界舵角＝±80°\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cul\u003e\n\u003cli\u003e可動限界舵角\u003cbr\u003e\nメカ的に動くことのできる角度を計測\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"math\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e可動限界舵角＝±120°\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/bbcf339ccd9d21b3f4c006f4684dfbb6e308eaa7/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f66303266636462662d336237332d616366332d363163362d6230343364646530656537392e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Ff02fcdbf-3b73-acf3-61c6-b043dde0ee79.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=542ddd6382d6d5d6c741cf2c5b7dcc4b\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/f02fcdbf-3b73-acf3-61c6-b043dde0ee79.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Ff02fcdbf-3b73-acf3-61c6-b043dde0ee79.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=33f380f2372cde54ec30df8c9d416775 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"計算用のモデル化\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%A8%88%E7%AE%97%E7%94%A8%E3%81%AE%E3%83%A2%E3%83%87%E3%83%AB%E5%8C%96\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e計算用のモデル化\u003c/h2\u003e\n\n\u003cp\u003e以前計測したものを、計算用の簡易寸法にした\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/4e7984029998fef5f4d062bf6297f0d15979169b/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f38326131316332352d316463392d393932612d353432362d6235373537333133666366612e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F82a11c25-1dc9-992a-5426-b5757313fcfa.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=5c9f391a94259126e14e36c8a6b434a8\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/82a11c25-1dc9-992a-5426-b5757313fcfa.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F82a11c25-1dc9-992a-5426-b5757313fcfa.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=ce3bdbd66a49c942de11c70dd21ab061 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/3a55aab24ab25d499c572204b003d2e1ffdf5ae1/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f30363530633834612d323830332d343364622d323939372d3934386430356134623433352e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F0650c84a-2803-43db-2997-948d05a4b435.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=241eeec966f2bdb448c6871269c00336\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/0650c84a-2803-43db-2997-948d05a4b435.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F0650c84a-2803-43db-2997-948d05a4b435.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=9f55f797fdf01316f17b2b59b0e7db6d 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"20070428-シミュレータ用計算式まとめ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#20070428-%E3%82%B7%E3%83%9F%E3%83%A5%E3%83%AC%E3%83%BC%E3%82%BF%E7%94%A8%E8%A8%88%E7%AE%97%E5%BC%8F%E3%81%BE%E3%81%A8%E3%82%81\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e20070428 シミュレータ用計算式まとめ\u003c/h1\u003e\n\n\u003cp\u003eこれまで導出してきたパスファインダー自身の動作に関する計算式の類を備忘録もかねてまとめておく\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"速度-vs\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E9%80%9F%E5%BA%A6-vs\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e速度 Vs\u003c/h2\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/27a8ed8c4e99ff7c7b286517e81a11f85ec93e1c/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f30323136356634332d393861362d633133322d393638302d6538653132663166636131392e676966\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F02165f43-98a6-c132-9680-e8e12f1fca19.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=9ad310300afd50ecfdb4ec7f43b5f478\" alt=\"speedt.gif\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/02165f43-98a6-c132-9680-e8e12f1fca19.gif\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F02165f43-98a6-c132-9680-e8e12f1fca19.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=7dbef846e20f7b71e551debafac70920 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"math\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\nCtr\u0026lt;64 のとき\\\\\nVs=0\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"math\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e64≦Ctr≦255 のとき\\\\\nVs=2.0552Ctr+51.445\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"math\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003eCtr:トラクションモータ制御値\\\\\nVs:速度 (mm/s)\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"ステアリングの角速度ω\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%B9%E3%83%86%E3%82%A2%E3%83%AA%E3%83%B3%E3%82%B0%E3%81%AE%E8%A7%92%E9%80%9F%E5%BA%A6%CF%89\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eステアリングの角速度ω\u003c/h2\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/bab66799b66f98a406ac40258101d9d3cf1e998f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f30633137313839312d643632312d373665312d386631352d3962646263613366636534622e676966\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F0c171891-d621-76e1-8f15-9bdbca3fce4b.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=b751ed472bcde1ef1315b7c3054fd59a\" alt=\"anglet.gif\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/0c171891-d621-76e1-8f15-9bdbca3fce4b.gif\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F0c171891-d621-76e1-8f15-9bdbca3fce4b.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=1a4d58c9d2da293966cc9f3e2ae56724 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"math\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003eCst\u0026lt;16のとき\\\\\nω=0\n\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"math\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e16≦Cst≦255 のとき\\\\\nω=103.29Ln(Cst)-209.04\\\\\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"定常円旋回半径-r\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AE%9A%E5%B8%B8%E5%86%86%E6%97%8B%E5%9B%9E%E5%8D%8A%E5%BE%84-r\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e定常円旋回半径 R\u003c/h2\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/596a33371025d520b61b11c32b102a1af18a1b20/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f35393261353263312d393035622d353866632d346165352d3662336263383834356531352e676966\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F592a52c1-905b-58fc-4ae5-6b3bc8845e15.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=1d853e5089f20c14d4740bb87d6171b2\" alt=\"mov.gif\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/592a52c1-905b-58fc-4ae5-6b3bc8845e15.gif\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F592a52c1-905b-58fc-4ae5-6b3bc8845e15.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=192b31f7fff90c800eeaef42ed3352c5 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e定常円旋回半径の一般式\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"math\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003eR=\\frac{(1+AV^2)L}{δ} ・・・（１）\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"math\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\\begin{align}\n\u0026amp;R:旋回半径(mm)\\\\\n\u0026amp;L:ホイールベース（:車軸間距離） (mm)\\\\\n\u0026amp;δ:舵角(rad)\\\\ \n\u0026amp;V:速度(mm/s^2)\\\\ \n\u0026amp;A:スタビリティファクタ\\\\\n\\end{align}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eパスファインダーの定常円旋回半径計算式\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"math\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003eL=88(mm)\\\\\nA= -1.22×10'-6'\\\\\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eより\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"math\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003eR=\\frac{(1+(-1.22×10^{-6}Vs^2))×88}{δ}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"定常円旋回半径r計算の補足\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AE%9A%E5%B8%B8%E5%86%86%E6%97%8B%E5%9B%9E%E5%8D%8A%E5%BE%84r%E8%A8%88%E7%AE%97%E3%81%AE%E8%A3%9C%E8%B6%B3\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e定常円旋回半径R計算の補足\u003c/h2\u003e\n\n\u003cp\u003eある時間t1における舵角（ステアリングの角度)をδ1とすると、そこからΔt秒進んだ時間t2(=t1+Δt)における舵角δ2は以下のようになる\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"math\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003eδ2=δ1+ωΔt\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eここで\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"math\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003eω=103.29Ln(Cst)-209.04 \n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"math\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003eVs=2.0552Ctr+51.445\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eなので、これを\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"math\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003eR= \\frac{(1+(-1.22×10^{-6}Vs^2))×88}{δ}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eに代入すると\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"math\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003eR= \\frac{(1+(-1.22×10^{-6}(2.0552Ctr+51.445)^2))×88}{(δ1+(103.29Ln(Cst)-209.04)Δt)}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eとなり、定常円旋回半径RはCstとCtrと経過時間Δtの関数として計算することができる\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"シミュレータ構想\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%B7%E3%83%9F%E3%83%A5%E3%83%AC%E3%83%BC%E3%82%BF%E6%A7%8B%E6%83%B3\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eシミュレータ構想\u003c/h1\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"設計の構想\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%A8%AD%E8%A8%88%E3%81%AE%E6%A7%8B%E6%83%B3\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e設計の構想\u003c/h2\u003e\n\n\u003cp\u003eここでは設計指針、機能要求、非機能要求、を要求と呼ぶことにして、再度やりたいことをまとめた。\u003c/p\u003e\n\n\u003cp\u003e以下のような感じ\u003c/p\u003e\n\n\u003cp\u003e1.Windowsプラットフォームで動作すること\u003c/p\u003e\n\n\u003cp\u003e2.今後のSTEP2,STEP3への物理計算拡張を考慮した設計とすること\u003c/p\u003e\n\n\u003cp\u003e3.物理計算エンジン部分を取替え可能に設計すること\u003c/p\u003e\n\n\u003cp\u003e4.パスファインダーをパーツのアセンブリとして表現すること\u003c/p\u003e\n\n\u003cp\u003e5.3Dグラフィックスへの対応を考慮した設計とすること\u003c/p\u003e\n\n\u003cp\u003e6.複数台のパスファインダーの同時シミュレーションに対応すること\u003c/p\u003e\n\n\u003cp\u003e7.C++で記述されたパスファインダー制御コードと連携できること\u003c/p\u003e\n\n\u003cp\u003e8.新しい技術ネタを取り入れること\u003cbr\u003e\nやるからには単なるソフトの設計作業でなくて、何か新しいことSomething Newが欲しい。\u003c/p\u003e\n\n\u003cp\u003e9.とにかく動くこと\u003cbr\u003e\n2007年のゴールデンウィーク中に動くものを作る\u003c/p\u003e\n\n\u003cp\u003e10.見た目（も）重視\u003cbr\u003e\nシミュレータでインパクトを与えるのも目的。見た目もダサくならないように注意。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"アーキテクチャを考える\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E3%82%92%E8%80%83%E3%81%88%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eアーキテクチャを考える\u003c/h2\u003e\n\n\u003cp\u003eアーキテクチャとはソフトウェア構造のラフスケッチ、要求からラフスケッチをおこす\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"スケッチの修正\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%B9%E3%82%B1%E3%83%83%E3%83%81%E3%81%AE%E4%BF%AE%E6%AD%A3\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eスケッチの修正\u003c/h2\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/62ecbf86371417b2412c8640cc25b5707943d768/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f31616339613637392d373836642d666632302d316663622d6531613566623262346566312e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F1ac9a679-786d-ff20-1fcb-e1a5fb2b4ef1.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=6890b3888d86ac420d21b5c9527edb8e\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/1ac9a679-786d-ff20-1fcb-e1a5fb2b4ef1.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F1ac9a679-786d-ff20-1fcb-e1a5fb2b4ef1.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=32b84fb1ed9429de24587e73c74f48b0 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003e責務\u003c/strong\u003e\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003cp\u003eAlgorithm\u003cbr\u003e\nパスファインダーのアルゴリズムを担当。シミュレータとは物理的にも完全に分離する。シミュレータに対するクライアントになる。シミュレータをCOMで作ってしまうのもありだ。\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eWrapper\u003cbr\u003e\nスクラッチで作るので、実質インタフェースを定義して、インタフェースに対して実装しようねと言っている。\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eSimulator\u003cbr\u003e\nCOMではなくて、.NETライブラリで実装する。実装レイヤーに近いほど覚えた知識があっというまに使えなくなる、時代の流れは早い。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eRCX Simulator\nパスファインダーと、パスファインダーの外的環境、その２者の相互作用など。\u003c/li\u003e\n\u003cli\u003eKinetics\n動力学。学生のときには「ｘｘｘにおける動力学」みたいなレポートをよく作ったが今回は時間的におそらくまともな実装はできない。\u003c/li\u003e\n\u003cli\u003eKinematics\n運動学。こちらは、「モドキ」レベルで最低限実装する。\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eDraw\u003cbr\u003e\u003cbr\u003e\n画面への描画を担当。RCX Simulatorと密接に関わる。\u003c/p\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"要求に答える\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%A6%81%E6%B1%82%E3%81%AB%E7%AD%94%E3%81%88%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e要求に答える\u003c/h2\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"要求とアーキテクチャ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%A6%81%E6%B1%82%E3%81%A8%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e要求とアーキテクチャ\u003c/h3\u003e\n\n\u003cp\u003e要求から、アーキテクチャをすこし詳細化する。実装に入りたいので、もうパッケージを意識する\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/8e8274dc8908ad202128919df82b9b2370abee17/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f31366139643235372d326631642d636263342d343439352d3331373764633136323539652e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F16a9d257-2f1d-cbc4-4495-3177dc16259e.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=1a49b42fecd56e4ab5989faa69865941\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/16a9d257-2f1d-cbc4-4495-3177dc16259e.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F16a9d257-2f1d-cbc4-4495-3177dc16259e.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=e6fa1974fe367f3e4773b26c0f1b996b 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e□内の数字はアーキテクチャに対応する、要求番号となる\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003cp\u003e2.今後のSTEP2,STEP3への物理計算拡張を考慮した設計とする\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e3.物理計算エンジン部分を取替え可能に設計する\u003cbr\u003e\n2と3はパスファインダーと物理計算の分離および、物理計算と外部環境（たとえばコースとのインタファクション）との分離を意識して設計せよ、ということになる\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e4.パスファインダーをパーツのアセンブリとして表現すること\u003cbr\u003e\nパスファインダーの形状は毎年変わるかもしれないので、パーツ（たとえば１つのLEGOブロック）を組んでパスファインダーの形状を再現できるように設計しておく必要がある。ルールが変わってもいいように、違う形状のパスファインダーを同時に走らせるなんてこともやりたい。\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e5.3Dグラフィックスへの対応を考慮した設計とすること\u003cbr\u003e\nパスファインダーを描画するグラフィックはとりあえず2Dで作るが、3Dでも使えるように設計しておく。つまり2Dでも3Dでも同じ操作体系で使えるように設計せよ、との方針になる。Factory MethodとかTemplate Methodとか「サブクラスさんおまかせ」系のデザパタがつかえる。\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e6.複数台のパスファインダーの同時シミュレーションに対応すること\u003cbr\u003e\nPathFinderクラスをnewしてaddして大量生産できるよに設計する。OOP的にはあたりまえかもしれないが、最初に考えておかないと苦労する「あるある」ポイント。二十歳そこらの頃、robo-one用のシミュレータを作ったときは、ここで泣いた（笑）\u003c/p\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"要求と開発環境\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%A6%81%E6%B1%82%E3%81%A8%E9%96%8B%E7%99%BA%E7%92%B0%E5%A2%83\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e要求と開発環境\u003c/h2\u003e\n\n\u003cp\u003eもういちど考えを整理\u003c/p\u003e\n\n\u003ctable\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003c/td\u003e\n\u003ctd\u003eAlgorithm\u003c/td\u003e\n\u003ctd\u003eWrapper\u003c/td\u003e\n\u003ctd\u003eSimulator\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eプラットフォーム\u003c/td\u003e\n\u003ctd colspan=\"3\"\u003eWindows .NET Framework2.0\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e(理由)\u003c/td\u003e\n\u003ctd colspan=\"3\"\u003eMFCがタダで使える環境が無いので。\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e開発環境\u003c/td\u003e\n\u003ctd colspan=\"2\"\u003eVC++ 2005 Express\u003c/td\u003e\n\u003ctd\u003eVC# 2005 Express\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e（理由）\u003c/td\u003e\n\u003ctd colspan=\"2\"\u003eロジックはパスファインダー側と同じにしたいのでC++。C++/CLIをさわってみたい。\u003c/td\u003e\n\u003ctd\u003eVC#のりファクタリング機能が使いたい(VC++には無いの）＆新しいことを覚えたい。\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e構成管理\u003c/td\u003e\n\u003ctd colspan=\"3\"\u003eSubVersion\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e（理由）\u003c/td\u003e\n\u003ctd colspan=\"3\"\u003eVSSが有料でSubVersionもTortoiseSVNも無料だから\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eC++とC#の連携\u003c/td\u003e\n\u003ctd colspan=\"3\"\u003e.NETのコンポーネントにするので問題無いはず。Event/Delegateまわりには注意。\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/table\u003e\n\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e要求の整理\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e1.Windowsプラットフォームで動作すること\u003c/li\u003e\n\u003cli\u003e7.C++で記述されたパスファインダー制御コードと連携できること\nWindowsプラットフォームの選択肢を考える。パスファインダー用のマイコン(H8)コードはC言語 or C++言語を使うので、そっちと連携するにはWinでもC++を使うのがよさげ。\u003c/li\u003e\n\u003cli\u003e8.新しい技術ネタを取り入れること\n(1).NET Framework 2.0ってどんな感じか。\n(2)C++/CLIってどんな感じか。\n(3)C#の新しい仕様（パーシャルクラスとか）ってどんな感じか。\n(4)新しい開発環境\u003c/li\u003e\n\u003cli\u003e9.とにかく動くこと\nRADする\u003c/li\u003e\n\u003cli\u003e10.見た目（も）重視\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"設計実装開始\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%A8%AD%E8%A8%88%E5%AE%9F%E8%A3%85%E9%96%8B%E5%A7%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e設計・実装開始\u003c/h1\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"開発環境インストール\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E9%96%8B%E7%99%BA%E7%92%B0%E5%A2%83%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e開発環境インストール\u003c/h2\u003e\n\n\u003cp\u003eVisual C# ExpressとVisual C++ Expressをダウンロード・インストールする。\u003cbr\u003e\n\u003ca href=\"http://www.microsoft.com/japan/msdn/vstudio/express/default.aspx\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://www.microsoft.com/japan/msdn/vstudio/express/default.aspx\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eSQL Server Express サーバは不要。Webからインストールするが、数時間かかった。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"クラス設計\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%AF%E3%83%A9%E3%82%B9%E8%A8%AD%E8%A8%88\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eクラス設計\u003c/h2\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/fb75ca5d0424628238e8de5fb44efed5ddb2b14d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f38336333343932302d383761322d323165622d626538642d6434363735613539666537392e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F83c34920-87a2-21eb-be8d-d4675a59fe79.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=2eb80cfa7f86b634597d32074791713c\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/83c34920-87a2-21eb-be8d-d4675a59fe79.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F83c34920-87a2-21eb-be8d-d4675a59fe79.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=bd4dec87a3b6b7ee63a0e523ad2481f8 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e無償で使えるUMLツールJUDEを使わせていただいた。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/a42716428abf9bd50720da67eaea89fffee02479/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f66333932313065612d663433662d346633642d366131652d3733666638393237653530372e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Ff39210ea-f43f-4f3d-6a1e-73ff8927e507.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=72f78dfbbb8bc21fc310f0faba9c8a7e\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/f39210ea-f43f-4f3d-6a1e-73ff8927e507.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Ff39210ea-f43f-4f3d-6a1e-73ff8927e507.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=6d4e966e1c146533667c6ae2994a195d 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"パッケージgraphicmisawa2dparts\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8graphicmisawa2dparts\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eパッケージGraphic.Misawa2D.Parts\u003c/h2\u003e\n\n\u003cp\u003eとっかかりはグラフィックから。１つ１つのグラフィックパーツとなる。 2Dのパッケージ名は数字からはじめられないのでMisawa2Dで。。。\u003cbr\u003e\n.NETのSystem.Drawingと同じクラス名だとまぎらわしいのでPrefix、M2Dを使う。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/7fb68c8b0002693d3aaa246df8c3b31289c01724/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f35393761346264652d353433372d663132322d366438362d6465363534383235656636312e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F597a4bde-5437-f122-6d86-de654825ef61.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=565d60a0e62829853db744bdd685c055\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/597a4bde-5437-f122-6d86-de654825ef61.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F597a4bde-5437-f122-6d86-de654825ef61.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=debb9c2ea694d71405109ccaf008b4fd 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e.NET Frameworkに依存しないように書いてみる。C#はJavaに少し似ているので、後でAppletにも移植してみようという野心あり。モデルベースで書いておけば、苦労せずにJavaに持っていけそう。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"パッケージgraphicmisawa2dmodel\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8graphicmisawa2dmodel\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eパッケージGraphic.Misawa2D.Model\u003c/h2\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/4258e2c0bf3798a375885775391d0f910951d2d9/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f65303636303665662d316231302d303431392d383336372d3333313566643165373766372e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fe06606ef-1b10-0419-8367-3315fd1e77f7.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=7862acd4102dfc035cd18bd8bcf34080\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/e06606ef-1b10-0419-8367-3315fd1e77f7.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fe06606ef-1b10-0419-8367-3315fd1e77f7.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=848e13f056f3992d8505f7776524de40 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e複数パーツを組み合わせてPathFinderを構成するクラスとなる。PathFinderの形状は今のところ１つだけ。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"実装\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AE%9F%E8%A3%85\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e実装\u003c/h2\u003e\n\n\u003cp\u003e3日かけてGraphicパッケージ（とその周辺）の0版実装が終わった。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e今回の教訓その１：マトリックス演算は\nUtilクラスの座標変換にはマトリックスを使うが、これを.NETが持っているものを使うか、自分でマトリックス演算を書くか最後まで悩んだ末、自分で書くことに。Javan等、他プラットフォームに移植したいので特定言語にしかない便利系ライブラリをつかうと移植が面倒そうという理由。2Dの場合は2x2のいわゆる行列演算なのでまだ楽。\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/ef795a099635d18e96a3774fcd342a88fcc9b98b/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f33313663656534652d363933632d303630642d653731322d3465666530383131653364612e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F316cee4e-693c-060d-e712-4efe0811e3da.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=38db263608dc4e4af5e16138676975af\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/316cee4e-693c-060d-e712-4efe0811e3da.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F316cee4e-693c-060d-e712-4efe0811e3da.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=b1cc413da3c5db6fbdc1d405c189795f 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eこんな感じ\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"c1\"\u003e//位置ベクトルの回転\u003c/span\u003e\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003estatic\u003c/span\u003e \u003cspan class=\"n\"\u003eM2DVector\u003c/span\u003e \u003cspan class=\"nf\"\u003eRotateVector\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eM2DVector\u003c/span\u003e \u003cspan class=\"n\"\u003esrcVector\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003edouble\u003c/span\u003e \u003cspan class=\"n\"\u003edegree\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"kt\"\u003edouble\u003c/span\u003e \u003cspan class=\"n\"\u003eradian\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nf\"\u003eGetRadianByDegree\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003edegree\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n    \u003cspan class=\"n\"\u003eM2DVector\u003c/span\u003e \u003cspan class=\"n\"\u003edestVector\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eM2DVector\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n    \u003cspan class=\"n\"\u003edestVector\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eU\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003esrcVector\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eU\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003eMath\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eCos\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eradian\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e-\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003esrcVector\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eV\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003eMath\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSin\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eradian\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"n\"\u003edestVector\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eV\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003esrcVector\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eU\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003eMath\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSin\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eradian\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003esrcVector\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eV\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003eMath\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eCos\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eradian\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003edestVector\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cul\u003e\n\u003cli\u003e今回の教訓その2：プロパティを使うかどうか\nC#にはCOMの時代よろしくプロパティという概念がある。アクセッサをメソッドを合理的に扱うというものだが、これを使うと便利だけど、移植性ややきになる。\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eモデルベースといいつつも、コードそのまま流用ももくろむ。\u003c/p\u003e\n\n\u003cp\u003eこんな感じ。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003edouble\u003c/span\u003e \u003cspan class=\"n\"\u003eU\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eset\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003e_relativeU\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003evalue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eget\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003e_relativeU\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003edouble\u003c/span\u003e \u003cspan class=\"n\"\u003eV\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eset\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003e_relativeV\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003evalue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eget\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003e_relativeV\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"実行イメージ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AE%9F%E8%A1%8C%E3%82%A4%E3%83%A1%E3%83%BC%E3%82%B8\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e実行イメージ\u003c/h2\u003e\n\n\u003cp\u003eデフォルメされたパスファインダーが動いた\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/65094a93ccdd7f6891cd9d1db5dad051cbc3a9e4/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f38363235363737632d393236662d306538632d623337352d3639316530353266333038302e676966\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F8625677c-926f-0e8c-b375-691e052f3080.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=38a8d1384c6fe0ae0f853a17c41e8a67\" alt=\"pathfinder0.gif\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/8625677c-926f-0e8c-b375-691e052f3080.gif\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F8625677c-926f-0e8c-b375-691e052f3080.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=9def5e797ceea2d96b664a92ce8ccd8b 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"genericは便利\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#generic%E3%81%AF%E4%BE%BF%E5%88%A9\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eGenericは便利\u003c/h2\u003e\n\n\u003cp\u003eC#でもGenericタイプが使えるようになった。Javaよりやや遅れて。コレクションではわかりやすくその恩恵にあやかることができる。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003eList\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eM2DVertex\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003e_lstVertex\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e型パラメータとしてM2DVertexを指定するので、このListはM2DVertex用のリストということになる。いちいちキャストしなくて済むのでとっても便利。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"クラス設計-1\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%AF%E3%83%A9%E3%82%B9%E8%A8%AD%E8%A8%88-1\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eクラス設計\u003c/h2\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"パッケージetrobosimulator\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8etrobosimulator\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eパッケージEtrobo.Simulator\u003c/h2\u003e\n\n\u003cp\u003eパスファインダー、コース、論理的なモーターなどを設計する\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/98b403ba433a2351728248bf8bba15aceae11901/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f65323966613566382d626266362d366437352d336437642d6337666661313763383037622e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fe29fa5f8-bbf6-6d75-3d7d-c7ffa17c807b.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=c828c58bad78c1b2b1e548d3ce406d60\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/e29fa5f8-bbf6-6d75-3d7d-c7ffa17c807b.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fe29fa5f8-bbf6-6d75-3d7d-c7ffa17c807b.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=ecae4909a443dc12f3048f4a2b376bef 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eと最初はこうしたが、無意味に一般化してもしょうがないので、下のような現実案とすることにする。またSensorは分け合って独立事象にした。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/a0e5294c6fefc5e5bdf81101d8eba6d0db162309/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f38306436383361382d356264352d383331382d393435662d3065633963326334666235392e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F80d683a8-5bd5-8318-945f-0ec9c2c4fb59.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=6d71f9b4fa8629d5bbd6630960265fac\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/80d683a8-5bd5-8318-945f-0ec9c2c4fb59.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F80d683a8-5bd5-8318-945f-0ec9c2c4fb59.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=c6d23b89094956849923cec2f1ad9c5e 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eあとでC++用にさらにWrapperをかぶせる予定なので、あまりしつこい設計にしたくないというのが今回の現実案の理由となる。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"パッケージetrobokinematics\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8etrobokinematics\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eパッケージEtrobo.Kinematics\u003c/h2\u003e\n\n\u003cp\u003eさらに、パスファインダーの動作を計算する運動学用（切り替え可能）のクラスを追加した。切り替え可能だが現状ではAggregateではなくNavigate扱いにしておく。設計をややこしくしたくないので、物理計算を切り替えたいときはこのクラスのサブクラスをつくっていって、PathFinderからつかうときは、クラス名そのものを書き換えることにする。\u003cbr\u003e\nModelBaseのModelは物理モデルを意識している。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/cef35f776e10a309eac4aedce3bf1e4e347662f4/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f38343535386532622d613761362d663134642d613436322d3762356466636435303330302e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F84558e2b-a7a6-f14d-a462-7b5dfcd50300.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=2773e042e3b29b20e0f7d1df3121f77a\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/84558e2b-a7a6-f14d-a462-7b5dfcd50300.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F84558e2b-a7a6-f14d-a462-7b5dfcd50300.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=a47d86d7d9085f50ce84fb9324cdc354 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"実装-1\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AE%9F%E8%A3%85-1\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e実装\u003c/h2\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"親のコンストラクタでdelegate使う\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%A6%AA%E3%81%AE%E3%82%B3%E3%83%B3%E3%82%B9%E3%83%88%E3%83%A9%E3%82%AF%E3%82%BF%E3%81%A7delegate%E4%BD%BF%E3%81%86\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e親のコンストラクタでdelegate使う\u003c/h3\u003e\n\n\u003cp\u003edelegateを使ってトリッキーな継承をやってみた。\u003cbr\u003e\n従来のC++ではオブジェクトを作ってから、メソッドの関数ポインタを取得してきて、それを使用側であてがって使ったりしたところが、delegateと親クラスをあらわすbaseの柔軟性により１つにまとめて書いた。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eMotor.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem.Collections.Generic\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem.Text\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003enamespace\u003c/span\u003e \u003cspan class=\"nn\"\u003eMisawat.Etrobo.Simulator\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eMotor\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e//SetMotorSpeedメソッドのデリゲート変数\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eSetMotorSpeed\u003c/span\u003e \u003cspan class=\"n\"\u003e_func_SetMotorSpeed\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n        \u003cspan class=\"c1\"\u003e//回転方向 1:正転 -1:逆転\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003e_direction\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n        \u003cspan class=\"c1\"\u003e//回転速度\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003e_speed\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003eMotor\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eSetMotorSpeed\u003c/span\u003e \u003cspan class=\"n\"\u003efunc_SetMotorSpeed\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"n\"\u003e_func_SetMotorSpeed\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003efunc_SetMotorSpeed\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eFoward\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003espeed\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"n\"\u003e_speed\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003espeed\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"n\"\u003e_direction\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"nf\"\u003e_func_SetMotorSpeed\u003c/span\u003e\u003cspan class=\"p\"\u003e((\u003c/span\u003e\u003cspan class=\"kt\"\u003edouble\u003c/span\u003e\u003cspan class=\"p\"\u003e)(\u003c/span\u003e\u003cspan class=\"n\"\u003e_direction\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003e_speed\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eReverse\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003espeed\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"n\"\u003e_speed\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003espeed\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"n\"\u003e_direction\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e-\u003c/span\u003e\u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"nf\"\u003e_func_SetMotorSpeed\u003c/span\u003e\u003cspan class=\"p\"\u003e((\u003c/span\u003e\u003cspan class=\"kt\"\u003edouble\u003c/span\u003e\u003cspan class=\"p\"\u003e)(\u003c/span\u003e\u003cspan class=\"n\"\u003e_direction\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003e_speed\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eSpeed\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003espeed\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"n\"\u003e_speed\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003espeed\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"nf\"\u003e_func_SetMotorSpeed\u003c/span\u003e\u003cspan class=\"p\"\u003e((\u003c/span\u003e\u003cspan class=\"kt\"\u003edouble\u003c/span\u003e\u003cspan class=\"p\"\u003e)(\u003c/span\u003e\u003cspan class=\"n\"\u003e_direction\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003e_speed\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eBrake\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"c1\"\u003e//TBD\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eOff\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"c1\"\u003e//TBD\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eSteeringMotor.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem.Collections.Generic\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem.Text\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003enamespace\u003c/span\u003e \u003cspan class=\"nn\"\u003eMisawat.Etrobo.Simulator\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eSteeringMotor\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eMotor\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003eSteeringMotor\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ePathFinder\u003c/span\u003e \u003cspan class=\"n\"\u003epathFinder\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"k\"\u003ebase\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003epathFinder\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eSetSteeringMotorSpeed\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"graphicmisawa2dpartsを振り返る\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#graphicmisawa2dparts%E3%82%92%E6%8C%AF%E3%82%8A%E8%BF%94%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eGraphic.Misawa2D.Partsを振り返る\u003c/h2\u003e\n\n\u003cp\u003e実装したところの修正をかけていて、クラス図の修正をした\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/90d40b6f96a2b9b73ade7f543534107020a2f497/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f63666431636331332d356364392d663161392d396162352d3231343937333231346564662e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fcfd1cc13-5cd9-f1a9-9ab5-214973214edf.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=e8e78e0a64c20901441aa86ad9aad1a4\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/cfd1cc13-5cd9-f1a9-9ab5-214973214edf.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fcfd1cc13-5cd9-f1a9-9ab5-214973214edf.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=197e682a1b2caf1b98aa72830d86202b 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eグラフィックパーツはそれぞれ子要素をもっており１つのモデルをくみ上げるときには複数のグラフィックパーツの親子関係を設定してツリーを作っていく。\u003c/p\u003e\n\n\u003cp\u003eつまり、再帰的にツリーを構成していく部分(build())をcompositeパターンとして実現しているので、クラス図に少し補足をいれた。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"実行イメージ-1\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AE%9F%E8%A1%8C%E3%82%A4%E3%83%A1%E3%83%BC%E3%82%B8-1\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e実行イメージ\u003c/h2\u003e\n\n\u003cp\u003e赤い点が旋回中心、円が定常円旋回軌道となる。\u003c/p\u003e\n\n\u003cp\u003eステアリングの角度に対して定常円旋回計算式は正常に動作した模様。\u003cbr\u003e\n最後はステアリングの限界舵角を超えているので、旋回円は無効となる。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/884cc45e11935e058b85ec1eb1193fa36e5e438b/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f31636665346161332d613865642d633831622d646363332d6331383930383162343366332e676966\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F1cfe4aa3-a8ed-c81b-dcc3-c189081b43f3.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=226f18bb21e099c423a3013c3e1f05f1\" alt=\"ani_radius.gif\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/1cfe4aa3-a8ed-c81b-dcc3-c189081b43f3.gif\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F1cfe4aa3-a8ed-c81b-dcc3-c189081b43f3.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=bbd31b30f059d8996789dd7012cd00bb 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"離散化にともなうδtの取り扱い\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E9%9B%A2%E6%95%A3%E5%8C%96%E3%81%AB%E3%81%A8%E3%82%82%E3%81%AA%E3%81%86%CE%B4t%E3%81%AE%E5%8F%96%E3%82%8A%E6%89%B1%E3%81%84\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e離散化にともなうΔtの取り扱い\u003c/h2\u003e\n\n\u003cp\u003e物理シミュレーションを行うときには、必ず物理方程式の離散化を考えるが、今回は軽量シミュレータなので、運動方程式といっても一階微分方程式くらいのもの。微分方程式は、漸化式による差分方程式を作ってシミュレーションするが、ここで注意しなくてはならないのは、位置を更新する際の経過時間Δtとなる。\u003c/p\u003e\n\n\u003cp\u003e一般にΔtは小さいほど精度良くシミュレーションできるがこのシミュレータでは、パスファインダーに入るセンサー情報のサンプリング周期とΔtを同期させている為、なるべくΔtはシミュレータのサンプリング周期にあわせたい。\u003c/p\u003e\n\n\u003cp\u003eΔtが100msecとか、あんまり大きいとまずいなと思い実機でサンプリング周期をはかってみたところ5msecであった。\u003cbr\u003e\n最高速度500mm/s程度のスケール感なら、まあいいかということで、Δtを5msecとした。あとはこの状態でシミュレーションをして実機との挙動があまりに違っていたらΔtの長さの変更や、Δtとシミュレータのサンプリング周期の同期をやめるなどの判断をしていきたい。最後は現物あわせ\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"コースとのインタラクション\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%B3%E3%83%BC%E3%82%B9%E3%81%A8%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%BF%E3%83%A9%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eコースとのインタラクション\u003c/h2\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/90fe046f34db2a1be4e5514979848a2a9482166b/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f31313438353164612d386265632d353962342d616330312d6565373562363730333735662e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F114851da-8bec-59b4-ac01-ee75b670375f.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=6bf4550a2a88e4024ca212549b87d6bf\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/114851da-8bec-59b4-ac01-ee75b670375f.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F114851da-8bec-59b4-ac01-ee75b670375f.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=f06625b9c9cbf9c44f2f4b0af21a345b 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eコースは1mmにつき1pixelとして取り扱う。つまり1m×1mだと1000pixel x 1000pixelのコース画像を用意する。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"コースの色情報の抽出\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%B3%E3%83%BC%E3%82%B9%E3%81%AE%E8%89%B2%E6%83%85%E5%A0%B1%E3%81%AE%E6%8A%BD%E5%87%BA\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eコースの色情報の抽出\u003c/h2\u003e\n\n\u003cp\u003eパスファインダーの先端部分にある光センサーの座標を計算し、その座標に対応するコース画像上の1pixel x 1pixelの色情報を取得して、LightSensorの値にセットするというシンプルなロジック。\u003c/p\u003e\n\n\u003cp\u003eシミュレータ部分のコーディングはひとまず終わり。\u003cbr\u003e\nリバースかけてみると。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/7a04ec7cb87eda607479a5c282efdc696f9d7f86/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f66616466313066612d613832312d353565382d326666332d3561306132336239336139622e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Ffadf10fa-a821-55e8-2ff3-5a0a23b93a9b.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=bab6c279e1d4b45651c684041a0f6397\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/fadf10fa-a821-55e8-2ff3-5a0a23b93a9b.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Ffadf10fa-a821-55e8-2ff3-5a0a23b93a9b.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=027a302a6f6f20cda23563d1852b567b 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"実行イメージ-2\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AE%9F%E8%A1%8C%E3%82%A4%E3%83%A1%E3%83%BC%E3%82%B8-2\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e実行イメージ\u003c/h2\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/9cbdbec32c48f11ccdeab32e8a86a8cb233d31ec/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f64373033656666662d373030302d313437352d326262352d6338663431626138396133312e676966\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fd703efff-7000-1475-2bb5-c8f41ba89a31.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=cc8d83c925fe65d271808e0aff05d29a\" alt=\"mova.gif\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/d703efff-7000-1475-2bb5-c8f41ba89a31.gif\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fd703efff-7000-1475-2bb5-c8f41ba89a31.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=122f5bc3189d6435ce76ca5e51ca055a 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"シミュレータを使ったコーディング\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%B7%E3%83%9F%E3%83%A5%E3%83%AC%E3%83%BC%E3%82%BF%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%9F%E3%82%B3%E3%83%BC%E3%83%87%E3%82%A3%E3%83%B3%E3%82%B0\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eシミュレータを使ったコーディング\u003c/h1\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"cでシミュレータプログラムを作る\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#c%E3%81%A7%E3%82%B7%E3%83%9F%E3%83%A5%E3%83%AC%E3%83%BC%E3%82%BF%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%A0%E3%82%92%E4%BD%9C%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eC++でシミュレータプログラムを作る\u003c/h2\u003e\n\n\u003cp\u003eC++でパスファインダーに搭載するプログラムを意識して、プログラミングをしていく。\u003cbr\u003e\nC++といっても.NET2.0のC++はちょっと違うので「H8用のコテコテのC++とVisual C++で同じコード使いたい」ときには色々と注しないといけない。\u003c/p\u003e\n\n\u003cp\u003eこういうところが面白い。\u003c/p\u003e\n\n\u003cp\u003e.NET Framework 2.0 のC++はC++/CLIに準拠していて、今までのC++とは文法の記法が違うところもあり注意が必要。.NET1.1から.NET2.0（C++/CLI)でポインタが*から^になったのにはちょっと驚いた。\u003c/p\u003e\n\n\u003cp\u003eほかにも、Visual C++ 6.0時代はnmakeでmakefileベースでビルドできたのに、VC2005みてたらどうやらMSBuildというツールに変わった模様。Apache ANTっぽい感じになっている。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"managed-cとoldsyntax\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#managed-c%E3%81%A8oldsyntax\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eManaged C++とOldSyntax\u003c/h2\u003e\n\n\u003cp\u003e.NET時代のc++はUnmanagedとManagedの２つがあるが、C#でつくってきたシミュレータライブラリ(SimEtrLib.dllという名前にした)がこれをManagedなライブラリとしたので、C++もManaged C++を使う。また、C++/cliで導入された構文でなくて、C++の構文を使わないとパスファインダーのコードと連携ができなさそうなので、構文はC++を使う\u003c/p\u003e\n\n\u003cp\u003e.NET Framework 2.0のManagedなコンパイラでは、デフォルトでC++/CLIとなっているので、オプションで古い構文(OldSyntax)を指定してやる必要がある。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"ライブラリを用いたコーディング\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%A9%E3%82%A4%E3%83%96%E3%83%A9%E3%83%AA%E3%82%92%E7%94%A8%E3%81%84%E3%81%9F%E3%82%B3%E3%83%BC%E3%83%87%E3%82%A3%E3%83%B3%E3%82%B0\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eライブラリを用いたコーディング\u003c/h2\u003e\n\n\u003cp\u003eコード例は、イメージをつかむために掲載する。ヘッダ読めばわかるところなどは省略。\u003c/p\u003e\n\n\u003cp\u003e走行アルゴリズム部分(RunningLogic)のコード\u003cbr\u003e\nこれはH8用のBrickOS APIのシグネチャを真似て作ったもので、これを使ってH8側とWindows側でアルゴリズム部分のソースコードを同一のものにすることができる。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c++\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eRunningLogic\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\n\u003cspan class=\"o\"\u003e-------\u003c/span\u003e\u003cspan class=\"n\"\u003eRunningLogic\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eh\u003c/span\u003e\u003cspan class=\"o\"\u003e----------------------------------------\u003c/span\u003e\n\u003cspan class=\"cp\"\u003e#pragma once\n\u003c/span\u003e\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"k\"\u003enamespace\u003c/span\u003e \u003cspan class=\"n\"\u003eMisawat\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eEtrobo\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eSimulator\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003e__gc\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eRunningLogic\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003cspan class=\"nl\"\u003epublic:\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eRunningLogic\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ePathFinder\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003epathFinder\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"o\"\u003e~\u003c/span\u003e\u003cspan class=\"n\"\u003eRunningLogic\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003evoid\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"kt\"\u003evoid\u003c/span\u003e \u003cspan class=\"n\"\u003eRunningLogic\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eRun\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003evoid\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n\u003cspan class=\"nl\"\u003eprivate:\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eRunningLogic\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003evoid\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e \n    \u003cspan class=\"n\"\u003ePathFinder\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003epathFinder\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eLightSensor\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003elightSensor\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eTouchSensor\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003etouchSensor\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eMotor\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003etractionMotor\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eMotor\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003esteeringMotor\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e};\u003c/span\u003e\n\n\u003cspan class=\"o\"\u003e-------\u003c/span\u003e\u003cspan class=\"n\"\u003eRunningLogic\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ecpp\u003c/span\u003e\u003cspan class=\"o\"\u003e----------------------------------------\u003c/span\u003e\n\n\u003cspan class=\"cp\"\u003e#include \"StdAfx.h\"\n#include \"RunningLogic.h\"\n\u003c/span\u003e\n\u003cspan class=\"n\"\u003eRunningLogic\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eRunningLogic\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ePathFinder\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003epathFinder\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"n\"\u003elightSensor\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003epathFinder\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003eGetLightSensor\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n    \u003cspan class=\"n\"\u003etouchSensor\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003epathFinder\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003eGetTouchSensor\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n    \u003cspan class=\"n\"\u003etractionMotor\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003epathFinder\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003eGetTractionMotor\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n    \u003cspan class=\"n\"\u003esteeringMotor\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003epathFinder\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003eGetSteeringMotor\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e//↓ここからが走行アルゴリズムそのもの\u003c/span\u003e\n\u003cspan class=\"kt\"\u003evoid\u003c/span\u003e \u003cspan class=\"n\"\u003eRunningLogic\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eRun\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003evoid\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"n\"\u003etractionMotor\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003eFoward\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e255\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003elightSensor\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003eGet\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"mi\"\u003e50\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003esteeringMotor\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003eFoward\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e255\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eelse\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003esteeringMotor\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003eReverse\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e255\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e※クラスをnewするときの_gcキーワードは、ガベージコレクションの対象とするオブジェクトですよということを宣言している。そのため、オブジェクトを破棄するときに明示的にdeleteする必要は無い。\u003c/p\u003e\n\n\u003cp\u003eシミュレータ部分のコード\u003cbr\u003e\nPathFinderオブジェクトをCreateして、SimulatorPlatformにAddすると、コース上にパスファインダーが出現する。\u003cbr\u003e\n何台でもCreateしてAddできる。\u003cbr\u003e\nRunningLogicクラスでは、LightSensorの値（コースの白黒値）を読んで、TractionMotorやSteeringMotorを制御する。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c++\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eSimulation.cpp\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"o\"\u003e-------\u003c/span\u003e\u003cspan class=\"n\"\u003eSimulation\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eh\u003c/span\u003e\u003cspan class=\"o\"\u003e----------------------------------------\u003c/span\u003e\n\u003cspan class=\"cp\"\u003e#pragma once\n\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"k\"\u003enamespace\u003c/span\u003e \u003cspan class=\"n\"\u003eSystem\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"k\"\u003enamespace\u003c/span\u003e \u003cspan class=\"n\"\u003eSystem\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eText\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"k\"\u003enamespace\u003c/span\u003e \u003cspan class=\"n\"\u003eMisawat\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eEtrobo\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eSimulator\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003e__gc\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eSimulation\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"nl\"\u003epublic:\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eSimulation\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eSystem\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eDrawing\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eGraphics\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003emyGraphics\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"k\"\u003evirtual\u003c/span\u003e \u003cspan class=\"o\"\u003e~\u003c/span\u003e\u003cspan class=\"n\"\u003eSimulation\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003evoid\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003evoid\u003c/span\u003e \u003cspan class=\"n\"\u003eSimulation\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eStart\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003evoid\u003c/span\u003e \u003cspan class=\"n\"\u003eSimulation\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eStop\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003evoid\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"nl\"\u003eprivate:\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eSimulation\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003evoid\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"n\"\u003erunning\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eSimulatorPlatform\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003e_simulatorPlatform\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eSystem\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eDrawing\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eGraphics\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003e_myGraphics\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e};\u003c/span\u003e\n \u003cspan class=\"o\"\u003e-------\u003c/span\u003e\u003cspan class=\"n\"\u003eSimulation\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ecpp\u003c/span\u003e\u003cspan class=\"o\"\u003e----------------------------------------\u003c/span\u003e\n\u003cspan class=\"cp\"\u003e#include \"StdAfx.h\"\n#include \"Simulation.h\"\n#include \"RunningLogic.h\"\n\u003c/span\u003e\n\u003cspan class=\"n\"\u003eSimulation\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eSimulation\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eSystem\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eDrawing\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eGraphics\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003emyGraphics\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"n\"\u003e_myGraphics\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003emyGraphics\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"kt\"\u003evoid\u003c/span\u003e \u003cspan class=\"n\"\u003eSimulation\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eStart\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e//SimulatorPlatform(コースの画像データ,グラフィックコンテクスト,描画時の倍率)\u003c/span\u003e\n    \u003cspan class=\"n\"\u003e_simulatorPlatform\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003e__gc\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eSimulatorPlatform\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\".\u003c/span\u003e\u003cspan class=\"se\"\u003e\\\\\u003c/span\u003e\u003cspan class=\"s\"\u003etest_course01.png\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003e_myGraphics\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mf\"\u003e0.6\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n    \u003cspan class=\"n\"\u003ePathFinder\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003epathFinder\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003e_simulatorPlatform\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003eCreatePathFinder\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e2400\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e500\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e90\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"n\"\u003epathFinder\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003eSetBodyColor\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eSystem\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eDrawing\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eColor\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eFromArgb\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e255\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e255\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n\n    \u003cspan class=\"n\"\u003eRunningLogic\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003epathFinderLogic\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003e__gc\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eRunningLogic\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003epathFinder\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n    \u003cspan class=\"n\"\u003erunning\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"nb\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003ewhile\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003erunning\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eSystem\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eWindows\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eForms\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eApplication\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eDoEvents\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n        \u003cspan class=\"n\"\u003e_simulatorPlatform\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003eUpdate\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mf\"\u003e0.01\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"n\"\u003epathFinderLogic\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003eRun\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"いろいろなシミュレーション条件\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%84%E3%82%8D%E3%81%84%E3%82%8D%E3%81%AA%E3%82%B7%E3%83%9F%E3%83%A5%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E6%9D%A1%E4%BB%B6\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eいろいろなシミュレーション条件\u003c/h2\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"情報を表示しながら\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%83%85%E5%A0%B1%E3%82%92%E8%A1%A8%E7%A4%BA%E3%81%97%E3%81%AA%E3%81%8C%E3%82%89\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e情報を表示しながら\u003c/h2\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/fab4d404cff6b55af853bbe01beab3e0f10c9d5c/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f30303335356431302d613331392d326638662d373664662d6534633936386664343536622e676966\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F00355d10-a319-2f8f-76df-e4c968fd456b.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=3c6b59e7a67a1fd1dce36c35295f6020\" alt=\"info.gif\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/00355d10-a319-2f8f-76df-e4c968fd456b.gif\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F00355d10-a319-2f8f-76df-e4c968fd456b.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=998b19a904903faad4cb626e4487f64e 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"2台同時走行\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#2%E5%8F%B0%E5%90%8C%E6%99%82%E8%B5%B0%E8%A1%8C\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e2台同時走行\u003c/h2\u003e\n\n\u003cp\u003e方向を変えて２台で。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/427047d6f0033e7e9e5a8f74dd692a8210bb7612/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f30373664353132632d363631662d316463302d353962642d3364663361613665636537332e676966\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F076d512c-661f-1dc0-59bd-3df3aa6ece73.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=42c52031de985b430a5527798b0e8cc3\" alt=\"2pf.gif\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/076d512c-661f-1dc0-59bd-3df3aa6ece73.gif\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F076d512c-661f-1dc0-59bd-3df3aa6ece73.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=f64d3a29504ca2b703305c999d6a2d79 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"4台同時走行\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#4%E5%8F%B0%E5%90%8C%E6%99%82%E8%B5%B0%E8%A1%8C\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e4台同時走行\u003c/h2\u003e\n\n\u003cp\u003eカラフルに4台で。にぎやか。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/1e1d4e5377ab3bc7772e0a05dee9575149da7126/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f30383235653264342d643961652d616462302d666237312d3763633638323034373536652e676966\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F0825e2d4-d9ae-adb0-fb71-7cc68204756e.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=179ce27ba81022e24e9450d4f253089b\" alt=\"4pf.gif\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/0825e2d4-d9ae-adb0-fb71-7cc68204756e.gif\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F0825e2d4-d9ae-adb0-fb71-7cc68204756e.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=115b555948d72989e7e5eaaacb2ff7c5 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eこれでシミュレータV1.0は完成\u003cbr\u003e\nあとは、本番コースの画像で、ちゃんとしたシミュレーションロジックでシミュレーションをまわしてみる。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"コース画像の準備\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%B3%E3%83%BC%E3%82%B9%E7%94%BB%E5%83%8F%E3%81%AE%E6%BA%96%E5%82%99\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eコース画像の準備\u003c/h1\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"コースの大きさ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%B3%E3%83%BC%E3%82%B9%E3%81%AE%E5%A4%A7%E3%81%8D%E3%81%95\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eコースの大きさ\u003c/h2\u003e\n\n\u003cp\u003e5460mm×3640mm \u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"コースのダウンロード\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%B3%E3%83%BC%E3%82%B9%E3%81%AE%E3%83%80%E3%82%A6%E3%83%B3%E3%83%AD%E3%83%BC%E3%83%89\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eコースのダウンロード\u003c/h2\u003e\n\n\u003cp\u003eETロボコンのサイトからコースのＰＤＦをダウンロードする\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/8f12fe95cfe3be5a9c1621e9e3819bb16da44932/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f31373931323535322d313134362d613666352d373036332d3162643931393035653035372e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F17912552-1146-a6f5-7063-1bd91905e057.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=56bd72e1af0e31849b6328c1c86ed976\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/17912552-1146-a6f5-7063-1bd91905e057.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F17912552-1146-a6f5-7063-1bd91905e057.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=7c95120c3790f6a7952a1ae875a33d75 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eETロボコン事務局から配布されるPDFをみてみると、\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/72a1710eba9e5bf9dadb77a068c0d2ba29abe83f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f39313964616665322d376237372d616464312d363465632d3034356165356562636135382e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F919dafe2-7b77-add1-64ec-045ae5ebca58.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=ac47ef5befbfabaee0ab82b85d4a82c6\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/919dafe2-7b77-add1-64ec-045ae5ebca58.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F919dafe2-7b77-add1-64ec-045ae5ebca58.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=680494171af07b7388ef9b664a26d72e 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eなので、これは実際の縦横それぞれ1/2スケールになっている。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"コース画像の変換\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%B3%E3%83%BC%E3%82%B9%E7%94%BB%E5%83%8F%E3%81%AE%E5%A4%89%E6%8F%9B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eコース画像の変換\u003c/h2\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"pdfからpngへ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#pdf%E3%81%8B%E3%82%89png%E3%81%B8\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003ePDFからPNGへ\u003c/h3\u003e\n\n\u003cp\u003eシミュレータでは1mmあたり1pixelのコース画像を使う（ことにしました）のでこのＰＤＦ(2730mm x 1820mm)を5460pixel x 3640pixel　の画像に変換する。\u003c/p\u003e\n\n\u003cp\u003ePostScriptオペレーションの定番\u003ca href=\"https://www.ghostscript.com/\" rel=\"nofollow noopener\" target=\"_blank\"\u003eGhostScript\u003c/a\u003eをつかうと、PDFをPNG形式の画像に変換することができる。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"shell\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\ngswin32c.exe \u003cspan class=\"nt\"\u003e-dSAFER\u003c/span\u003e \u003cspan class=\"nt\"\u003e-dBATCH\u003c/span\u003e \u003cspan class=\"nt\"\u003e-dNOPAUSE\u003c/span\u003e \u003cspan class=\"nt\"\u003e-sDEVICE\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003epng16m\n    \u003cspan class=\"nt\"\u003e-r96\u003c/span\u003e \u003cspan class=\"nt\"\u003e-sOutputFile\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e.\u003cspan class=\"se\"\u003e\\h\u003c/span\u003eonban_course.png  .\u003cspan class=\"se\"\u003e\\r\u003c/span\u003eobocon_course20070423.pdf\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/8aa4006264c5f94ec0fc8e4119a2049e06759366/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f65326634356532632d323266372d613166612d343466302d6430343832306436623761622e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fe2f45e2c-22f7-a1fa-44f0-d04820d6b7ab.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=cde76fc1c9777008f2a0bd080f0f8d6c\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/e2f45e2c-22f7-a1fa-44f0-d04820d6b7ab.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fe2f45e2c-22f7-a1fa-44f0-d04820d6b7ab.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=961fd37c8f759ed20a9a165d1be37cdd 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003ePNGファイルはサイズが10318 x 6879 ある。これは96DPIを指定したからなので、こうなっているが、これはGIMPで補完圧縮をし、さらに簡単なスクリプトを書いて変な色になっていた部分を変換して使えそうなコース画像を作った。\u003c/p\u003e\n\n\u003cp\u003e最終的に 5260 x 3640 の画像となる。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/84813866cb8063e1c45aaa2942f795c31fc1c3c1/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f65643863373162312d623231362d313531632d313636622d3931343139393336353030352e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fed8c71b1-b216-151c-166b-914199365005.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=84ce718df174ec038f6d0b69a88d9b9f\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/ed8c71b1-b216-151c-166b-914199365005.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fed8c71b1-b216-151c-166b-914199365005.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=54cf1a983d4a1f235ff7ef3944c33dc8 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"メンバー向けにシミュレーターリリース\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%A1%E3%83%B3%E3%83%90%E3%83%BC%E5%90%91%E3%81%91%E3%81%AB%E3%82%B7%E3%83%9F%E3%83%A5%E3%83%AC%E3%83%BC%E3%82%BF%E3%83%BC%E3%83%AA%E3%83%AA%E3%83%BC%E3%82%B9\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eメンバー向けにシミュレーターリリース\u003c/h1\u003e\n\n\u003cp\u003e2007 ゴールデンウィークを使って開発したシミュレータ＋サンプルコードを同じチームのメンバーに初公開しましました。\u003c/p\u003e\n\n\u003cp\u003e評判はまずまずで、最低限の役目は果たせたような気がする。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"本番コースでシミュレーション\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%9C%AC%E7%95%AA%E3%82%B3%E3%83%BC%E3%82%B9%E3%81%A7%E3%82%B7%E3%83%9F%E3%83%A5%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e本番コースでシミュレーション\u003c/h1\u003e\n\n\u003cp\u003e本番コースでシミュレーションしてみた。2台で併走。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/17fb7d3843ce1be99ad8b2d71fb593ddec3b0531/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f61313731376430372d303034612d313365382d333038662d3863346539336461613430332e676966\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fa1717d07-004a-13e8-308f-8c4e93daa403.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=8b2c6b5fa824a7990dae96ce2d0fe7f1\" alt=\"movm.gif\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/a1717d07-004a-13e8-308f-8c4e93daa403.gif\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fa1717d07-004a-13e8-308f-8c4e93daa403.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=7bec3e100dc955cfbfe6afca4ed75ed0 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e全体像\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/e6fdd30c9618e471a7a9a148c3fac6aa1be1142f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f63353139383464302d666434662d663366612d386366352d3866323736323263646237332e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fc51984d0-fd4f-f3fa-8cf5-8f27622cdb73.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=6e53a0669a766eea00bd00fe1fd77187\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/c51984d0-fd4f-f3fa-8cf5-8f27622cdb73.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fc51984d0-fd4f-f3fa-8cf5-8f27622cdb73.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=53e71a3cfeea7b0414585e0b2e72eaa9 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eちゃんと動いているようでひと安心。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"ダメだし\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%80%E3%83%A1%E3%81%A0%E3%81%97\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eダメだし\u003c/h2\u003e\n\n\u003cp\u003e友人(工学博士、物理シミュレーション、運動学)にこのページ+ソースコードを見せて運動学の計算について読んでもらいましたが、当然いろいろとダメだしが。方程式、離散化、剛体か質点か、厳密にやろうとするといろいろ問題が。アカデミック軸ではなく、「モドキ」軸ということで貴重な意見を今後の改善に生かすとして今回はこのまま行こうということに。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"3d化対応設計\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#3d%E5%8C%96%E5%AF%BE%E5%BF%9C%E8%A8%AD%E8%A8%88\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e3D化対応設計\u003c/h1\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"パッケージ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eパッケージ\u003c/h2\u003e\n\n\u003cp\u003eもともと3Dへの対応を考慮して設計していたので、特に今までの設計と変更はなし。Misawa2Dというのに加えてMisawa3Dというパッケージにする。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/0afc776a73ad72e5c66ef5f83f2f51083f82bed4/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f33393963646263612d376265652d666533652d626433312d6664323434653866656538622e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F399cdbca-7bee-fe3e-bd31-fd244e8fee8b.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=b04db287ab348652557e5cae34566a82\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/399cdbca-7bee-fe3e-bd31-fd244e8fee8b.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F399cdbca-7bee-fe3e-bd31-fd244e8fee8b.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=eaa1a9a2c5b7fbce536fb4bf522f92d1 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"クラスの設計\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%AF%E3%83%A9%E3%82%B9%E3%81%AE%E8%A8%AD%E8%A8%88\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eクラスの設計\u003c/h2\u003e\n\n\u003cp\u003e3Dの実現には、Windowsのゲーム用APIのDirect3Dを使用する。\u003cbr\u003e\nOpenGLでも良かったが昔作ったコードを流用したかったのでDirect3Dを使うことに。\u003c/p\u003e\n\n\u003cp\u003e設計の構想は2Dのときとほぼ同じ。\u003c/p\u003e\n\n\u003cp\u003e3Dのモデルは3Dモデラー(LightWave)を使ってモデリングする。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/0f3b3ef5d0cf3ba728ad2484d6368a2f3653020d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f63363437623338662d333934312d393238362d343438342d3236336336363163613966372e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fc647b38f-3941-9286-4484-263c661ca9f7.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=1fb43bac78f05ac9e8f4b72c250cc41c\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/c647b38f-3941-9286-4484-263c661ca9f7.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fc647b38f-3941-9286-4484-263c661ca9f7.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=9daecb37ef2359337d7201829eb2aee6 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"3dのパスファインダー\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#3d%E3%81%AE%E3%83%91%E3%82%B9%E3%83%95%E3%82%A1%E3%82%A4%E3%83%B3%E3%83%80%E3%83%BC\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e3Dのパスファインダー\u003c/h1\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"3dプラットフォームの実装\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#3d%E3%83%97%E3%83%A9%E3%83%83%E3%83%88%E3%83%95%E3%82%A9%E3%83%BC%E3%83%A0%E3%81%AE%E5%AE%9F%E8%A3%85\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e3Dプラットフォームの実装\u003c/h2\u003e\n\n\u003cp\u003eDirect3Dを用いて実装を開始。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e地面ポリゴンを配置する。マウスでグリグリするインタフェースを搭載。\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/2402a241e3289cecb58ba3051835d022c1573065/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f38636635333037312d313831352d643566362d613061372d6564656633343731626636392e676966\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F8cf53071-1815-d5f6-a0a7-edef3471bf69.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=c82d845945191938924042779f2720ad\" alt=\"3d_1.gif\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/8cf53071-1815-d5f6-a0a7-edef3471bf69.gif\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F8cf53071-1815-d5f6-a0a7-edef3471bf69.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=5182945c46aa6d3f5dd3e0e1cc7e5c3d 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eコース画像のテクスチャを地面ポリゴンに貼る\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/7a2d7c3b6ed29e9182a6ab8f490a5f190e735cd9/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f35306235393531332d373536312d346163342d623635662d3962386438326362616631332e676966\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F50b59513-7561-4ac4-b65f-9b8d82cbaf13.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=c59780d693ce9f01d30b104408820cd3\" alt=\"3d_2.gif\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/50b59513-7561-4ac4-b65f-9b8d82cbaf13.gif\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F50b59513-7561-4ac4-b65f-9b8d82cbaf13.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=5136e2e94fe0cb3ab5cc1e422f4da01a 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"3d車両データ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#3d%E8%BB%8A%E4%B8%A1%E3%83%87%E3%83%BC%E3%82%BF\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e3D車両データ\u003c/h2\u003e\n\n\u003cp\u003eLDRAWの3Dデータを組み合わせてログラムから操作できる3Dデータにする。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"3d実装つづき\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#3d%E5%AE%9F%E8%A3%85%E3%81%A4%E3%81%A5%E3%81%8D\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e3D実装つづき\u003c/h1\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"3dプログラミングは純粋にたのしい\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#3d%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0%E3%81%AF%E7%B4%94%E7%B2%8B%E3%81%AB%E3%81%9F%E3%81%AE%E3%81%97%E3%81%84\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e3Dプログラミングは純粋にたのしい\u003c/h2\u003e\n\n\u003cp\u003e3Dのプログラミングは純粋に楽しい。\u003cbr\u003e\n過去のETロボコンのサイトを見ていたら、コース上にモアイのような置物がおいてあったのでLightWave3Dをつかってモアイ君をモデリングした。\u003c/p\u003e\n\n\u003cp\u003eモアイ君をSimulator3D上に配置してグリグリ動かしてみた。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/c014e48a7aacd9b4da13c2282ec2bd9c4c9372cd/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f33326664323763612d383864302d343038372d363461632d3631303936353265656231312e676966\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F32fd27ca-88d0-4087-64ac-6109652eeb11.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=7073b6dcb1ae45ca00b7c3fad6fab560\" alt=\"3d_moai.gif\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/32fd27ca-88d0-4087-64ac-6109652eeb11.gif\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F32fd27ca-88d0-4087-64ac-6109652eeb11.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=97514f089aa8cc268ab7d5aac46a3890 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eせっかくモデリングしたのでどこかでこのモアイ君を使いたいなぁ。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"2007年5月23日-プレ試走会\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#2007%E5%B9%B45%E6%9C%8823%E6%97%A5-%E3%83%97%E3%83%AC%E8%A9%A6%E8%B5%B0%E4%BC%9A\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e2007年5月23日 プレ試走会\u003c/h1\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"某社の某会議室で実機を走らせてみた\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%9F%90%E7%A4%BE%E3%81%AE%E6%9F%90%E4%BC%9A%E8%AD%B0%E5%AE%A4%E3%81%A7%E5%AE%9F%E6%A9%9F%E3%82%92%E8%B5%B0%E3%82%89%E3%81%9B%E3%81%A6%E3%81%BF%E3%81%9F\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e某社の某会議室で実機を走らせてみた\u003c/h2\u003e\n\n\u003cp\u003e本番用のコースを印刷したものを会議室にならべてこれから実機を走行させてみた。\u003c/p\u003e\n\n\u003cp\u003e数十枚を並べる作業はかなり手間がかかる。\u003cbr\u003e\n1枚ならべると隣がずれたり、ずれを修正しているとまたほかがずれたり。やはり現実の世界は何かと”リアル”な問題が起こる。\u003cbr\u003e\nこれが楽しい。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/7a319433ac57bb378175ac4a10bd62a314dca6f6/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f30613238626262372d323332392d663539622d333263342d6461306162393365346564362e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F0a28bbb7-2329-f59b-32c4-da0ab93e4ed6.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=788f75b0d2d049b18fbebd01119141a9\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/0a28bbb7-2329-f59b-32c4-da0ab93e4ed6.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F0a28bbb7-2329-f59b-32c4-da0ab93e4ed6.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=ef7cc4808f95e0ae86c7ab7926e1d9a4 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e↓ようやくしきつめた、でもパスファインダーが走行するたびにズレる(笑)\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/8caf55252867e78100c9a2e1e0f35caf6792981b/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f65366666313966622d666364382d373664372d303636302d3738343133613261616664612e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fe6ff19fb-fcd8-76d7-0660-78413a2aafda.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=c80e9bbe0d3a6882304acf26167c6b8d\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/e6ff19fb-fcd8-76d7-0660-78413a2aafda.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fe6ff19fb-fcd8-76d7-0660-78413a2aafda.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=4ccd02567ad1d190be248ae10602164a 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eシミュレータで基本ロジックは確認したものの、結局現実世界へのあわせこみは実機を使ってTry\u0026amp;Errorしかない。実機にプログラムを焼いちゃ消し、焼いちゃ消しという作業に明け暮れた。\u003c/p\u003e\n\n\u003cp\u003e組み込み界隈ではよく見る光景。\u003c/p\u003e\n\n\u003cp\u003e実機が動くと楽しいので、深夜までTry\u0026amp;Errorは続く。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"物理計算モジュールとの連携\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E7%89%A9%E7%90%86%E8%A8%88%E7%AE%97%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB%E3%81%A8%E3%81%AE%E9%80%A3%E6%90%BA\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e物理計算モジュールとの連携\u003c/h1\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"連携\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E9%80%A3%E6%90%BA\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e連携\u003c/h2\u003e\n\n\u003cp\u003e計算モジュール(Misawat.Etrobo.Kinematics)と3Dの表示モジュール(Misawat.Graphics.Misawa3D)を連携させた。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"コースを疾走するモアイ君\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%B3%E3%83%BC%E3%82%B9%E3%82%92%E7%96%BE%E8%B5%B0%E3%81%99%E3%82%8B%E3%83%A2%E3%82%A2%E3%82%A4%E5%90%9B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eコースを疾走するモアイ君\u003c/h2\u003e\n\n\u003cp\u003e裏で物理演算モジュールが、コースの計算をしている。\u003cbr\u003e\n3D上では、パスファインダーの代わりにモアイ君を走行させてみた。\u003c/p\u003e\n\n\u003cp\u003eモアイがんばれ\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/7d6ce6e5f2db88daefb7fcb6ebab3ec2540be914/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f34656134386234372d643462382d623132662d396165332d6562313863396164613137352e676966\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F4ea48b47-d4b8-b12f-9ae3-eb18c9ada175.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=38e02949deab4b04828a904d124b9f3c\" alt=\"runningmoai.gif\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/4ea48b47-d4b8-b12f-9ae3-eb18c9ada175.gif\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F4ea48b47-d4b8-b12f-9ae3-eb18c9ada175.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=f60799a44817c6aba21344ef9def4e1e 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"3dモデルの生成成功\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#3d%E3%83%A2%E3%83%87%E3%83%AB%E3%81%AE%E7%94%9F%E6%88%90%E6%88%90%E5%8A%9F\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e3Dモデルの生成成功\u003c/h1\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"3dのパスファインダーモデルの生成に成功\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#3d%E3%81%AE%E3%83%91%E3%82%B9%E3%83%95%E3%82%A1%E3%82%A4%E3%83%B3%E3%83%80%E3%83%BC%E3%83%A2%E3%83%87%E3%83%AB%E3%81%AE%E7%94%9F%E6%88%90%E3%81%AB%E6%88%90%E5%8A%9F\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e3Dのパスファインダーモデルの生成に成功\u003c/h2\u003e\n\n\u003cp\u003e簡単に書くと、LDRAWにあるパスファインダーは頂点数が多すぎて使い物にならない(HAL使っても超ノロノロ描画)ことが判明。\u003c/p\u003e\n\n\u003cp\u003eLightWaveでブーリアンを駆使して足し算引き算、その後、オリジナルスクリプトで面の向きをすべて外向きにし、そとから見えないところを削除し、頂点を減らして、くっつけて、構成しているパーツから重なっている面をとりのぞいて、、、と全部で３０ステップくらいフィルターをかましてやっと、プログラムからリアルタイムでレンダリングできる3Dモデルに変換できた\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/01930efa45d988e973942440c7cbf410c9d33fd8/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f39656665346534632d396261352d653133662d396366642d3038363130376461643366392e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F9efe4e4c-9ba5-e13f-9cfd-086107dad3f9.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=96c2df26f8fc5f511416e64a784386a8\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/9efe4e4c-9ba5-e13f-9cfd-086107dad3f9.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F9efe4e4c-9ba5-e13f-9cfd-086107dad3f9.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=69817dd894e7419007d77e9b994b79e9 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"モアイ君-タイア\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%A2%E3%82%A2%E3%82%A4%E5%90%9B-%E3%82%BF%E3%82%A4%E3%82%A2\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eモアイ君-\u0026gt;タイア\u003c/h2\u003e\n\n\u003cp\u003e3Dモデルを作ったので、モアイ君を卒業して、3Dモデル化したパスファインダーのタイアに差し替える。\u003cbr\u003e\nタイアが転がった～。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/e210f918b9a5be282690cf96e18d9dd8705327d7/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f66376337633430392d323861642d313334392d313465342d6662316636613531666265312e676966\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Ff7c7c409-28ad-1349-14e4-fb1f6a51fbe1.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=29265a8d4136f9ce613861609b8efba4\" alt=\"tirea.gif\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/f7c7c409-28ad-1349-14e4-fb1f6a51fbe1.gif\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Ff7c7c409-28ad-1349-14e4-fb1f6a51fbe1.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=c58752bd210bb4753a9b3333ce9faada 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"3dの親子関係\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#3d%E3%81%AE%E8%A6%AA%E5%AD%90%E9%96%A2%E4%BF%82\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e3Dの親子関係\u003c/h1\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"3dモデル\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#3d%E3%83%A2%E3%83%87%E3%83%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e3Dモデル\u003c/h2\u003e\n\n\u003cp\u003e3Dモデルは以下のような親子のツリー構造になっている。\u003c/p\u003e\n\n\u003cp\u003eパスファインダーはBody(本体部分＝ＲＣＸと機構部）,FrontWheel（前輪）,RearWheel(後輪),LightSensor(光センサーと機構部)をそれぞれ独立したパーツとした。\u003c/p\u003e\n\n\u003cp\u003e2Dのときは、とても簡単なモデルだったので、頂点座標を計測して、それらを結んで多角形をつくってパスファインダーの外形にしたが、3Dでは構造がとても複雑なので、もっと大きな単位（たとえばBodyだけでも数千のポリゴンがある)で扱った。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/870fa58e08e027cac9b371918e1e849853ce8a79/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f31396436353435642d393236622d383039622d366237372d3164666134323537323434372e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F19d6545d-926b-809b-6b77-1dfa42572447.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=c9230791172d05e87ebf94c8fe04103e\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/19d6545d-926b-809b-6b77-1dfa42572447.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F19d6545d-926b-809b-6b77-1dfa42572447.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=93ff32a36127732f94e7f4b6b9d1864c 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e↑FrontWheelはLightSensorの回転と連動するので、LightSensorの子になっている。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"パーツごとの動作\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%91%E3%83%BC%E3%83%84%E3%81%94%E3%81%A8%E3%81%AE%E5%8B%95%E4%BD%9C\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eパーツごとの動作\u003c/h2\u003e\n\n\u003cp\u003e親子関係をつけた状態でパーツごとに適当に動かす。ちゃんとそれぞれ連携して動いている。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/e9745dbc4cd627bbbaf1af4b2ee495f0071602b1/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f31313866303934352d343639652d666638662d303436622d3439356337656165303333612e676966\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F118f0945-469e-ff8f-046b-495c7eae033a.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=a9b7596078d4ff971d8587ce457dadb3\" alt=\"revolve.gif\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/118f0945-469e-ff8f-046b-495c7eae033a.gif\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F118f0945-469e-ff8f-046b-495c7eae033a.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=d9846b471ed8adcffcfdbf20ed069fcd 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"タイヤの回転\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%BF%E3%82%A4%E3%83%A4%E3%81%AE%E5%9B%9E%E8%BB%A2\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eタイヤの回転\u003c/h2\u003e\n\n\u003cp\u003e前輪と後輪を速度から計算して回転させる、ここのロジックは単純で、\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"math\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\\begin{align}\n\u0026amp;v=rω\\\\\n\u0026amp;v:速さ(mm)\\\\\n\u0026amp;r:タイヤの半径\\\\\n\u0026amp;ω:角速度(rad/s)\\\\\n\\end{align}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eなので、\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"math\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003eω=v/r\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eより計算する\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/ba34fded6981db1686d016d3c6662883fc01baea/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f32356565376437352d393961632d376232392d623261652d6639373263396137666339312e676966\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F25ee7d75-99ac-7b29-b2ae-f972c9a7fc91.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=f131ffe77a3424f20aa11d27bfebe795\" alt=\"rev.gif\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/25ee7d75-99ac-7b29-b2ae-f972c9a7fc91.gif\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F25ee7d75-99ac-7b29-b2ae-f972c9a7fc91.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=88c125be5c64f014e86fb4ca1112fd4d 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"パスファインダー疾走\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%91%E3%82%B9%E3%83%95%E3%82%A1%E3%82%A4%E3%83%B3%E3%83%80%E3%83%BC%E7%96%BE%E8%B5%B0\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eパスファインダー疾走！\u003c/h1\u003e\n\n\u003cp\u003eパスファインダーを、本番コースをセットしたシミュレータ上で実際に走らせて見た。\u003cbr\u003e\nやはり、2Dよりも、モアイ君よりリアリティある\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/d9624517f6705ba69320d0f7f508fb95656ea6c0/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f66356562313233332d316538622d303465652d643666342d3866343039636538623830662e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Ff5eb1233-1e8b-04ee-d6f4-8f409ce8b80f.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=416f48fb81e6b9826e005d13665ba5fe\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/f5eb1233-1e8b-04ee-d6f4-8f409ce8b80f.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Ff5eb1233-1e8b-04ee-d6f4-8f409ce8b80f.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=c920868ce67819e43e5adf9afdcde490 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"カメラアングル\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%AB%E3%83%A1%E3%83%A9%E3%82%A2%E3%83%B3%E3%82%B0%E3%83%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eカメラアングル\u003c/h2\u003e\n\n\u003cp\u003e3Dシミュレータのよい点は、簡単に好きなところにカメラを持ってこられる点\u003c/p\u003e\n\n\u003cp\u003eこれでカメラワーク演出が可能となる\u003c/p\u003e\n\n\u003cp\u003eズームIN/OUTや固定視点、可動視点などいろいろと実装した。\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003e移動追跡カメラ\u003c/strong\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/a2fbd6bd87c6dd2fcec129a38d8cb7df26022b50/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f62373334306336662d376431342d333063632d336363622d3436303561396366383831392e676966\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fb7340c6f-7d14-30cc-3ccb-4605a9cf8819.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=b26e46e5cc70e2fdeb64d0c7773c1dd8\" alt=\"ugoki42.gif\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/b7340c6f-7d14-30cc-3ccb-4605a9cf8819.gif\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fb7340c6f-7d14-30cc-3ccb-4605a9cf8819.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=59e10cb0cca362869e75a04710095518 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/b9643ec721d70e451f2ce0e8a4164fb9d78804f5/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f32653132613035342d326432312d353836652d346335332d3162373362306164356232372e676966\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F2e12a054-2d21-586e-4c53-1b73b0ad5b27.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=51cb1da504cf1babb415415ae09aba8e\" alt=\"ugoki31.gif\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/2e12a054-2d21-586e-4c53-1b73b0ad5b27.gif\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F2e12a054-2d21-586e-4c53-1b73b0ad5b27.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=571a35da077c74c0c23e73a0b93c12fb 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003e固定カメラ\u003c/strong\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/69ea7aac0e062f31634caefb2152aaf9044f8c09/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f63633263383435372d363331302d356465312d386434622d6239666138353532393762642e676966\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fcc2c8457-6310-5de1-8d4b-b9fa855297bd.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=34f23ea86bd582dba0af8a29173c8ed7\" alt=\"two2.gif\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/cc2c8457-6310-5de1-8d4b-b9fa855297bd.gif\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fcc2c8457-6310-5de1-8d4b-b9fa855297bd.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=b9b4a94178b1d6cd4109be3dee3f1f4e 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"車載カメラ搭載\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%BB%8A%E8%BC%89%E3%82%AB%E3%83%A1%E3%83%A9%E6%90%AD%E8%BC%89\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e車載カメラ搭載\u003c/h1\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"パスファインダーに乗車\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%91%E3%82%B9%E3%83%95%E3%82%A1%E3%82%A4%E3%83%B3%E3%83%80%E3%83%BC%E3%81%AB%E4%B9%97%E8%BB%8A\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eパスファインダーに乗車\u003c/h2\u003e\n\n\u003cp\u003e車載カメラを搭載した\u003c/p\u003e\n\n\u003cp\u003eどこに載せてもいいが(パラメータを変えるだけなので）、リアルでは不可能そうな場所ということで、光センターの後方の本体部につけてみた。\u003c/p\u003e\n\n\u003cp\u003eもし実際ここにカメラがついていたら、こんなに左右にゆさぶられるものだった。めがまわりそー。\u003c/p\u003e\n\n\u003cp\u003eでも走るレゴに乗った気分は楽しめる\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://www.youtube.com/watch?v=5tGwpDOcx34\" rel=\"nofollow noopener\" target=\"_blank\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F40669a0f-b1eb-0560-3144-057a120ee45d.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=c088939df81916a43e449ac36d1cf628\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/40669a0f-b1eb-0560-3144-057a120ee45d.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F40669a0f-b1eb-0560-3144-057a120ee45d.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=656a04885ab62d1c8b1bbd2e80646f3d 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"ソフトウェア設計変更\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%BD%E3%83%95%E3%83%88%E3%82%A6%E3%82%A7%E3%82%A2%E8%A8%AD%E8%A8%88%E5%A4%89%E6%9B%B4\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eソフトウェア設計変更\u003c/h1\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"設計書はメンテしよう\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%A8%AD%E8%A8%88%E6%9B%B8%E3%81%AF%E3%83%A1%E3%83%B3%E3%83%86%E3%81%97%E3%82%88%E3%81%86\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e設計書はメンテしよう\u003c/h2\u003e\n\n\u003cp\u003e3Dで遊びすぎていてソフトウェアの設計そのものをないがしろにしつつあったが、、設計変更した。というか、実装してみてしっくりこなかったので、修正をかけてみた。\u003c/p\u003e\n\n\u003cp\u003eよくありがちな、設計書のメンテナンス放棄ということに陥らないように常に設計書(JUDE)をふりかえるようにしたい\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"before-after\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#before-after\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eBefore After\u003c/h2\u003e\n\n\u003cp\u003eクラスの意味も説明せずにやぶからぼうにBefore Afterだけを掲載しておくと、、、\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003e設計変更前\u003c/strong\u003e\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/853353a987ac799dd1055fff2bdfabed3df31082/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f35373166343162622d623833372d643432382d363532352d3134633963323462373261322e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F571f41bb-b837-d428-6525-14c9c24b72a2.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=5b4bf0d267360ec16a30267c79c6cc06\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/571f41bb-b837-d428-6525-14c9c24b72a2.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F571f41bb-b837-d428-6525-14c9c24b72a2.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=f50f582068e6bc4d4e7b5bc1af3653c7 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003e設計変更後\u003c/strong\u003e\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/b1aeb031578abec9175f7584aa384f302c6b454a/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f36316634646432312d616239352d366234382d323832352d3661373763383366303561392e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F61f4dd21-ab95-6b48-2825-6a77c83f05a9.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=a50ddb9160f45e1709a674d84930ce8b\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/61f4dd21-ab95-6b48-2825-6a77c83f05a9.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F61f4dd21-ab95-6b48-2825-6a77c83f05a9.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=89c3460c8643413e3ce361cb5166feb1 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"設計変更したのに\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%A8%AD%E8%A8%88%E5%A4%89%E6%9B%B4%E3%81%97%E3%81%9F%E3%81%AE%E3%81%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e設計変更したのに\u003c/h2\u003e\n\n\u003cp\u003e設計とソースコードは、連動しないもの。。。\u003c/p\u003e\n\n\u003cp\u003eリバースしたものがこちら。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/65bfa216db09957d2800c5c6c71b7abc71dd9f38/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f37343737623639332d666332382d343162652d393062312d3432363430623333616137342e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F7477b693-fc28-41be-90b1-42640b33aa74.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=3a68d8afbf74287265f3e03df97c44d6\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/7477b693-fc28-41be-90b1-42640b33aa74.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F7477b693-fc28-41be-90b1-42640b33aa74.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=653f335a70ba11bc2a1e60e8611ba37c 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eレビュー不足。\u003c/p\u003e\n\n\u003cp\u003eM3DFormは専用3Dウィンドウを出そうと思いつきで作ったが、これも使わないことにしたんだった、、、ということも忘れていた。\u003c/p\u003e\n\n\u003cp\u003eリバースをして確認というのは、このレベルでも役に立つなぁ。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"gadgetの追加\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#gadget%E3%81%AE%E8%BF%BD%E5%8A%A0\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eGadgetの追加\u003c/h1\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"なんだかものさびしいので\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%AA%E3%82%93%E3%81%A0%E3%81%8B%E3%82%82%E3%81%AE%E3%81%95%E3%81%B3%E3%81%97%E3%81%84%E3%81%AE%E3%81%A7\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eなんだかものさびしいので\u003c/h2\u003e\n\n\u003cp\u003eネットで本番のETロボコンの写真などをみていると、コース上にオブジェ（障害物？）がおいてある模様。非機能要件ということで、3Dシミュレータ上に、オブジェを配置できるようにしようかと。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"オブジェの場所\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%81%AE%E5%A0%B4%E6%89%80\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eオブジェの場所\u003c/h2\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/da1eabe1991c57a5e3cba89ec792ac8196014d8c/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f36343563613163302d336463352d333833382d363863352d3266313238666234343134652e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F645ca1c0-3dc5-3838-68c5-2f128fb4414e.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=cb5aa64ac7a460eb6783f7e37f61fe04\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/645ca1c0-3dc5-3838-68c5-2f128fb4414e.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F645ca1c0-3dc5-3838-68c5-2f128fb4414e.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=75bfa07f9fdb50483f48f4c21e10885b 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"3dモデリングした\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#3d%E3%83%A2%E3%83%87%E3%83%AA%E3%83%B3%E3%82%B0%E3%81%97%E3%81%9F\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e3Dモデリングした\u003c/h2\u003e\n\n\u003cp\u003eスケールをあわせながら3Dモデラーでモデリングした\u003c/p\u003e\n\n\u003cp\u003eスタート、中間ゲートにつかうポール\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/83b8a04ab266c21bb6a331eb973dc4c92464c24f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f66333863646438612d383264342d396361322d386365312d3335313565653037653766652e676966\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Ff38cdd8a-82d4-9ca2-8ce1-3515ee07e7fe.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=cb964ee55add4d61f82cf690045983b0\" alt=\"gpoll.gif\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/f38cdd8a-82d4-9ca2-8ce1-3515ee07e7fe.gif\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Ff38cdd8a-82d4-9ca2-8ce1-3515ee07e7fe.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=2a4f282edd1c866776198f50a5ec730e 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eスフィンクス\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/bb5394cee8ba2f61be3adcc9ab3bbf5b1e8619d1/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f61323763656336352d303261372d343331372d626138662d3763623337623466653465642e676966\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fa27cec65-02a7-4317-ba8f-7cb37b4fe4ed.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=b8cbf9928bf8fd45667799a21214a7d4\" alt=\"sphynx.gif\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/a27cec65-02a7-4317-ba8f-7cb37b4fe4ed.gif\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fa27cec65-02a7-4317-ba8f-7cb37b4fe4ed.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=0ae5b860adf016bbe897887f566cf120 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eピサの斜塔（テクスチャあり）\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/3d9bede3b9dcfbad020bf04d185945bc9ed7bf72/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f31643937666432642d623763652d626539322d313839342d3465346334646130323033642e676966\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F1d97fd2d-b7ce-be92-1894-4e4c4da0203d.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=44c0a5aa933bf33b3579d504e800e8aa\" alt=\"pisa.gif\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/1d97fd2d-b7ce-be92-1894-4e4c4da0203d.gif\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F1d97fd2d-b7ce-be92-1894-4e4c4da0203d.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=8d3a0d6300f1d645bf5696353aa6a9f9 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eピラミッド（テクスチャあり）\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/cc7bf3a3ec7e56d07836fca4a093c5522dd04669/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f34373531303934612d383165352d663837332d303963312d3130346330336134383864342e676966\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F4751094a-81e5-f873-09c1-104c03a488d4.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=54a720a5c00b6f9d8d7bd41924c55699\" alt=\"pyramid.gif\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/4751094a-81e5-f873-09c1-104c03a488d4.gif\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F4751094a-81e5-f873-09c1-104c03a488d4.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=e915c209e07ee0db4a5f8a7904d72e5c 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e凱旋門（テクスチャあり）\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/253ea854466bc5be0423a1b9939c832ac73a7c7f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f66653931366461352d316136302d656230302d353534392d3232333563313530373031312e676966\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Ffe916da5-1a60-eb00-5549-2235c1507011.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=bb50fff9f8dcecf6be782e1454ce93de\" alt=\"gate.gif\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/fe916da5-1a60-eb00-5549-2235c1507011.gif\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Ffe916da5-1a60-eb00-5549-2235c1507011.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=34bc18bf0318c9c74e7cf23a2661b9ec 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eモアイ君 （テクスチャあり）\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/5e2bdcaed373293ba706cddaeb4c22fd7e96d759/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f61373365373037322d346531382d636661632d663661632d6535616563643337336662662e676966\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fa73e7072-4e18-cfac-f6ac-e5aecd373fbf.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=4bd458be1cbcb83ee1d9763e5d0759d0\" alt=\"moai.gif\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/a73e7072-4e18-cfac-f6ac-e5aecd373fbf.gif\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fa73e7072-4e18-cfac-f6ac-e5aecd373fbf.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=13162368a00d93c6939f4a0706aae7bd 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eテクスチャ（3Dモデルの表面に貼り付ける画像）があると、質感がでてリアルになる。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"オブジェを配置\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%92%E9%85%8D%E7%BD%AE\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eオブジェを配置\u003c/h1\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"また設計変更\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%BE%E3%81%9F%E8%A8%AD%E8%A8%88%E5%A4%89%E6%9B%B4\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eまた設計変更\u003c/h2\u003e\n\n\u003cp\u003eオブジェを配置できるようにするために、設計変更をしました。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/b3f29799b5a87a601e6afaf6be897831854befdd/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f36323835353439662d353364312d393430642d316262362d3462386634323137626265372e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F6285549f-53d1-940d-1bb6-4b8f4217bbe7.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=fd5e9f4b98089b4bf3bbc2af14f61b5a\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/6285549f-53d1-940d-1bb6-4b8f4217bbe7.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F6285549f-53d1-940d-1bb6-4b8f4217bbe7.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=2eb7c9f7c0d1ab149766a2a78431a249 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eSimulatorPlatform3D#AddGadgetメソッドでオブジェを追加できるようになった。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"実行結果\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AE%9F%E8%A1%8C%E7%B5%90%E6%9E%9C\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e実行結果\u003c/h2\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/525afad67f91311ab62dac21c8ee47452d355451/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f38373930336338622d633262632d316532352d333930322d6630626235616532623532612e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F87903c8b-c2bc-1e25-3902-f0bb5ae2b52a.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=9abb5d7ad5d286300f3f88296b12a5c0\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/87903c8b-c2bc-1e25-3902-f0bb5ae2b52a.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F87903c8b-c2bc-1e25-3902-f0bb5ae2b52a.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=448cd81add97dfc387daf0bb9b1e3b91 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eコース上にオブジェを配置した。\u003c/p\u003e\n\n\u003cp\u003eここまでプログラムが出来てくると箱庭をつくっているような感覚で楽しい。\u003c/p\u003e\n\n\u003cp\u003eモアイ君も自分の居場所をみつけた。\u003cbr\u003e\nモアイ君に石模様のテクスチャをつけたらちょっと怖かったので、テクスチャはつけないことにした。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"車載カメラのブレ防止\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%BB%8A%E8%BC%89%E3%82%AB%E3%83%A1%E3%83%A9%E3%81%AE%E3%83%96%E3%83%AC%E9%98%B2%E6%AD%A2\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e車載カメラのブレ防止\u003c/h1\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"ローパス\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%AD%E3%83%BC%E3%83%91%E3%82%B9\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eローパス\u003c/h2\u003e\n\n\u003cul\u003e\n\u003cli\u003e車載カメラのブレが激しいため、カメラのlooking計算にローパスフィルターを導入。だいぶ揺れがおさまり、乗車感が向上。\u003c/li\u003e\n\u003cli\u003e車載カメラの位置を前にして景色が良くなるよう改善。\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e完全3Dプログラミング遊びになってきたが楽しいのでやめられない。\u003c/p\u003e\n\n\u003cp\u003e箱庭コースの中を疾走！\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e車載カメラ視点（BGMあり)\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e\u003ca href=\"https://www.youtube.com/watch?v=nepdFs-2V1Y\" rel=\"nofollow noopener\" target=\"_blank\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fb5ed0172-b949-2217-89ac-fd5d53983f54.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=3223959568bf645f5876b7144fe9f955\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/b5ed0172-b949-2217-89ac-fd5d53983f54.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fb5ed0172-b949-2217-89ac-fd5d53983f54.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=bb4c9fc08f3b2dc7a73499c42d03860e 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"車載カメラ２つ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%BB%8A%E8%BC%89%E3%82%AB%E3%83%A1%E3%83%A9%EF%BC%92%E3%81%A4\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e車載カメラ２つ\u003c/h1\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"カメラ視点２つ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%AB%E3%83%A1%E3%83%A9%E8%A6%96%E7%82%B9%EF%BC%92%E3%81%A4\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eカメラ視点２つ。\u003c/h2\u003e\n\n\u003cp\u003eそれぞれのパスファインダーの車載カメラ視点で走行させてみた。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://www.youtube.com/watch?v=b-g5lE7Ed5s\" rel=\"nofollow noopener\" target=\"_blank\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F690ea363-6780-4135-dda7-c11e79c4e133.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=9cd314293d14cba9194f9899b4523e6d\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/690ea363-6780-4135-dda7-c11e79c4e133.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F690ea363-6780-4135-dda7-c11e79c4e133.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=55f76eb6677acdcca6d2845fbba38b5c 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"本番前日\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%9C%AC%E7%95%AA%E5%89%8D%E6%97%A5\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e本番前日\u003c/h1\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"本番とは\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%9C%AC%E7%95%AA%E3%81%A8%E3%81%AF\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e本番とは\u003c/h2\u003e\n\n\u003cp\u003eいよいよ明日が本番。\u003cbr\u003e\n本番とは関東地区予選大会 第1日目のこと。まだ予選。\u003c/p\u003e\n\n\u003cp\u003eシミュレーターを使ったアルゴリズム確認は各メンバーで行ってだいぶいい感じの動きをしていたとのフィードバックをもらう。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"2007年6月30日-etロボコン当日レポート\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#2007%E5%B9%B46%E6%9C%8830%E6%97%A5-et%E3%83%AD%E3%83%9C%E3%82%B3%E3%83%B3%E5%BD%93%E6%97%A5%E3%83%AC%E3%83%9D%E3%83%BC%E3%83%88\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e2007年6月30日 ETロボコン当日レポート\u003c/h1\u003e\n\n\u003cp\u003eETロボコンの関東地区予選会第１日目に参加した\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"開催概要\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E9%96%8B%E5%82%AC%E6%A6%82%E8%A6%81\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e開催概要\u003c/h2\u003e\n\n\u003cp\u003e日時 2007年6月30日(土) 8:50- \u003cbr\u003e\n場所 工学院大学（新宿)\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"当日のタイムテーブル\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%BD%93%E6%97%A5%E3%81%AE%E3%82%BF%E3%82%A4%E3%83%A0%E3%83%86%E3%83%BC%E3%83%96%E3%83%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e当日のタイムテーブル\u003c/h2\u003e\n\n\u003ctable\u003e\n\u003ctr\u003e\n\u003ctd\u003e9:00\u003c/td\u003e\n\u003ctd\u003e参加者受付\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e9:30 ～ 11:30\u003c/td\u003e\n\u003ctd\u003e試走・車検\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e11:30\u003c/td\u003e\n\u003ctd\u003eモデル評価 (※ここまでは参加者のみ)\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e12:00\u003c/td\u003e\n\u003ctd\u003e開会式\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e12:10 ～ 13:40\u003c/td\u003e\n\u003ctd\u003e競技１回目\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003c/td\u003e\n\u003ctd\u003e休憩\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e14:00 ～ 15:20\u003c/td\u003e\n\u003ctd\u003e競技２回目\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e15:30\u003c/td\u003e\n\u003ctd\u003e表彰式\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e16:20 ～ 17:10\u003c/td\u003e\n\u003ctd\u003eモデルワークショップ\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/table\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"受付試走会\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%8F%97%E4%BB%98%E8%A9%A6%E8%B5%B0%E4%BC%9A\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e受付～試走会\u003c/h2\u003e\n\n\u003cul\u003e\n\u003cli\u003e8:50に開催場所である工学院大学に集合。工学院大学は都庁至近の都会のなかの大学という感じ\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/9cac073752108658132c7672e2bee0df4901c582/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f32636139316336632d313239392d373966332d336463362d6263663533633131643837352e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F2ca91c6c-1299-79f3-3dc6-bcf53c11d875.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=a41f6f79d3724a0a7dc1e274d9e974fc\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/2ca91c6c-1299-79f3-3dc6-bcf53c11d875.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F2ca91c6c-1299-79f3-3dc6-bcf53c11d875.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=8a609f37f6087865ebc43e04a6a52494 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/f9693cc1edb6efe9d75b873092b8aa9a6d73ffed/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f64303762326132382d643330622d633735382d616331632d3837363462636335383736662e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fd07b2a28-d30b-c758-ac1c-8764bcc5876f.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=5ba5802a48874180ec9e5a4eb8c37d7e\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/d07b2a28-d30b-c758-ac1c-8764bcc5876f.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fd07b2a28-d30b-c758-ac1c-8764bcc5876f.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=cfce6368e3fc09122281ec812d1865da 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e受付でチームごとのゼッケンと名札をもらう\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/91ee6e664b585c36c667347f7fce179c6f7b4ca2/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f30653162313239342d666638622d636661352d626634622d6530366538356131316631322e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F0e1b1294-ff8b-cfa5-bf4b-e06e85a11f12.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=8c64a441a769c7693b8acb30e33f5088\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/0e1b1294-ff8b-cfa5-bf4b-e06e85a11f12.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F0e1b1294-ff8b-cfa5-bf4b-e06e85a11f12.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=daab53465c7a91fc28eecda3aa2a5a06 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e会場に入ると、目の前に本番用コースが。これはシミュレータのネタ収集のチャンス！\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/65d5a7e782b31249b637471141fa51ffae3d7139/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f65363031353932342d626539662d373165652d373237392d3732363562393536363031302e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fe6015924-be9f-71ee-7279-7265b9566010.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=8ec0aa48fee392cc07420bd6eb9cb2a9\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/e6015924-be9f-71ee-7279-7265b9566010.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fe6015924-be9f-71ee-7279-7265b9566010.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=41d449c04e2ae8ae09a09f7d7e34b41a 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eチームにはピットと呼ばれる、チーム用の机（会議室なんかにある折りたたみ机のようなもの）がある。２チームで１個の机を共有して、実機の調整等を行う。\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/ddfc944e4ffb3de8a871c1582e024a57016b8f7a/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f36613039633035332d373836632d306633382d633230352d3338326337633032383463642e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F6a09c053-786c-0f38-c205-382c7c0284cd.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=14a990f751fd9ccde00e84cc2c55c4d9\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/6a09c053-786c-0f38-c205-382c7c0284cd.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F6a09c053-786c-0f38-c205-382c7c0284cd.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=453251101d7d6920e94ee427c2377dba 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/031c15b966ff938de300e3e9ddd7e18ed129307e/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f31343538666564632d633065392d313961652d663037372d3435643064373139626336622e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F1458fedc-c0e9-19ae-f077-45d0d719bc6b.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=c8acc1b770159f9b4db51274d32d6123\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/1458fedc-c0e9-19ae-f077-45d0d719bc6b.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F1458fedc-c0e9-19ae-f077-45d0d719bc6b.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=2956905e75c540036c4bd836e1fbbe33 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eピットで早速工作、光センサーの遮光のための遮光スカートをつくる作業を行った。スカート部分をのりづけ。\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/0b62399cbf2ee291db927297acad859d5c26bffb/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f34653036323037382d316136322d643364642d386565352d6232363439306130396530622e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F4e062078-1a62-d3dd-8ee5-b26490a09e0b.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=c8d731853bbc4ad5bb24850039749f17\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/4e062078-1a62-d3dd-8ee5-b26490a09e0b.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F4e062078-1a62-d3dd-8ee5-b26490a09e0b.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=354e11d4d7cbfb1fa310ba4d07a5c94e 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/96f8cadbe364443e07ca521b431c6449472400e2/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f63336365616130342d383233302d346137322d326661352d3261336564306564303834312e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fc3ceaa04-8230-4a72-2fa5-2a3ed0ed0841.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=cb82f8b9d99a02e877f05864c3e0046f\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/c3ceaa04-8230-4a72-2fa5-2a3ed0ed0841.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fc3ceaa04-8230-4a72-2fa5-2a3ed0ed0841.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=5ebd68d40b3c2085765a83ebe4421ad8 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e遮光スカート工作終了\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/a7380d0e72f910079ef8fdafc841187dd5f9db58/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f38353466646464612d616161612d353237632d353265392d3232653962306138613535652e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F854fddda-aaaa-527c-52e9-22e9b0a8a55e.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=a731c0b578fc71cca37855b904b91af2\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/854fddda-aaaa-527c-52e9-22e9b0a8a55e.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F854fddda-aaaa-527c-52e9-22e9b0a8a55e.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=82041c2cc60cea90ec3c28e96294cdf7 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e試走会がはじまった。一度に数チームがコース上でパスファインダーを試走させる\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/2c6e96e9574ddb081a0e2c2cf2eb7cc1b5f22e21/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f38386662386637302d656338622d323161372d623361622d3835336361313364663865632e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F88fb8f70-ec8b-21a7-b3ab-853ca13df8ec.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=363777a203bac15250637815709dec69\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/88fb8f70-ec8b-21a7-b3ab-853ca13df8ec.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F88fb8f70-ec8b-21a7-b3ab-853ca13df8ec.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=c57bfacb193a2dd91f77ba93b9305170 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e我々のチームの試走の順番がまわってきた\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/9e03121465c439f579ffc6b2f64fb0e1d0a8a13f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f33623361383931642d343462392d346265342d386164652d6561303163373136323863312e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F3b3a891d-44b9-4be4-8ade-ea01c71628c1.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=fde2cb20f02f9231ef31b4987181bed5\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/3b3a891d-44b9-4be4-8ade-ea01c71628c1.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F3b3a891d-44b9-4be4-8ade-ea01c71628c1.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=b3a38a6c187541add011ecae734ed17b 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"試走会予選走行\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%A9%A6%E8%B5%B0%E4%BC%9A%E4%BA%88%E9%81%B8%E8%B5%B0%E8%A1%8C\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e試走会～予選走行\u003c/h2\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003cp\u003eいよいよ本番コースでの、試走となる\u003cbr\u003e\n別チームのパスファインダーが高速に追い抜いていたりするが、うちはうちの走りができればOK\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e試走終了後、車検を行う。車検では、パスファインダーが設計図通りくみ上げられているか、不正改造が無いかなどがチェックされる。\u003cbr\u003e\n車検に合格すると、競技時に使用する電池(Panasonic製)をもらうことができる。\u003c/p\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/cb5911b6d8ce4b78bf6faf30130c2b2aec1a5a59/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f30313633613936302d323738612d356266662d323139652d3665363530623931383163302e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F0163a960-278a-5bff-219e-6e650b9181c0.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=716250147d66e1f8436e41fd18860b0f\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/0163a960-278a-5bff-219e-6e650b9181c0.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F0163a960-278a-5bff-219e-6e650b9181c0.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=984e191d8e679af3826265b0768de388 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e競技用電池をパスファインダーにセットして、RCXのふたを閉じた後に封をしてもらう。「よくできました」\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/ac20739f956b6a7071312ecc9ee4296fd12e8069/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f65343638356539372d386630632d336666392d616131342d3831663035613135393534302e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fe4685e97-8f0c-3ff9-aa14-81f05a159540.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=a6c53c9100b1ad563463966e5e873061\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/e4685e97-8f0c-3ff9-aa14-81f05a159540.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fe4685e97-8f0c-3ff9-aa14-81f05a159540.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=d48e9271eafc90498e5c3e1c2a171e3d 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eモデル審査開始。各チームが他チームのモデルを審査して、投票する。これがうちのモデルシート。\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/abf34472aeafb1b67898cb4029409b009c43896a/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f38353366336132322d373162392d336237622d636162382d6434386638376266353337632e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F853f3a22-71b9-3b7b-cab8-d48f87bf537c.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=89227b7e277f60b64d32699ce1739808\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/853f3a22-71b9-3b7b-cab8-d48f87bf537c.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F853f3a22-71b9-3b7b-cab8-d48f87bf537c.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=d16d6ecdad6c5ade049c59e3986baa92 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eお昼12:00に、一般見学のお客さんたちもそろって、開会式がはじまる\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/b7ebcb6b01724ed6e405a1cb50fab334afad8385/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f35626638333832382d613230642d306663652d393264362d6537616161623036396237392e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F5bf83828-a20d-0fce-92d6-e7aaab069b79.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=6890a766a2dcba8c21530974f6296729\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/5bf83828-a20d-0fce-92d6-e7aaab069b79.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F5bf83828-a20d-0fce-92d6-e7aaab069b79.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=4416f3cc752efacf2768f58711a0fbda 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e開会式後から予選会スタート。予選会の本番走行の第１回目として、２チーム同時にインコース、アウトコースといった具合に走行していく。\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/62f930b538e1f523c47c9723245b086cdd8f934c/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f65666538666262352d613431622d353439322d393030322d3334393266643865313532612e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fefe8fbb5-a41b-5492-9002-3492fd8e152a.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=cd6cbceb92f69c5ff8a853f48734d906\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/efe8fbb5-a41b-5492-9002-3492fd8e152a.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fefe8fbb5-a41b-5492-9002-3492fd8e152a.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=74d684d2720515140f9b5fc7a7199f93 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eわれらがパスファインダー走り\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e\u003ca href=\"https://www.youtube.com/watch?v=-WS6tBwbS8w\" rel=\"nofollow noopener\" target=\"_blank\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F492f0c1c-5b9d-4f74-01d2-eca2cbd216fc.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=9db3015e518a0ece703adf8251b40d1a\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/492f0c1c-5b9d-4f74-01d2-eca2cbd216fc.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F492f0c1c-5b9d-4f74-01d2-eca2cbd216fc.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=23a5a6faeb8c85eddd78e229ed308188 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"予選走行レース結果\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E4%BA%88%E9%81%B8%E8%B5%B0%E8%A1%8C%E3%83%AC%E3%83%BC%E3%82%B9%E7%B5%90%E6%9E%9C\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e予選走行～レース結果\u003c/h2\u003e\n\n\u003cul\u003e\n\u003cli\u003eトラブル発生\n車検のときに、大会で使用するためのオフィシャル電池に取り替えた。その都合でRCXに再度ソフトウェアを書き込まなければいけないんのだが、書き込み用ソフトが起動しない、、、本番前になると、きまってこうトラブルが発生する。組み込みあるある。\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/6299e4b88628aaca2b5c3d547e21095d59b7681f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f31316634623139362d663336632d633133632d363062642d6263633231373739616433372e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F11f4b196-f36c-c13c-60bd-bcc21779ad37.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=69aa2cd6871872ce3e283f7826a96a57\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/11f4b196-f36c-c13c-60bd-bcc21779ad37.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F11f4b196-f36c-c13c-60bd-bcc21779ad37.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=bd2b1161d42d99393c9a5b9f709869a5 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eなんとか復活\nIRタワーのUSBを抜いて、PCを再起動して、、を何回か繰り返しているうちに、起動した。\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eまたもや、あるあるな解決法\u003c/p\u003e\n\n\u003cp\u003e一安心してソフトウェアを書き込み\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/f0d9aa006f96faa992dc6fba5fca7fbfd1f0db59/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f35323966653333632d643266392d313162652d316135342d3863303632663033323365622e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F529fe33c-d2f9-11be-1a54-8c062f0323eb.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=37fa6b3748da010f3f5022d437fcd086\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/529fe33c-d2f9-11be-1a54-8c062f0323eb.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F529fe33c-d2f9-11be-1a54-8c062f0323eb.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=91c2ee78e2bf621f189bceab498ff1d3 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eそして、ついに、うちのゼッケン番号が呼ばれた。いよいよ、順番が回ってきた。本番コースで走行前のキャリブレーションを行う。\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/687f938f99bf3c848cecd65743c3c4cb4e0b2fba/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f35656465386330382d653331662d303465662d616264332d6639383535336138656131362e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F5ede8c08-e31f-04ef-abd3-f98553a8ea16.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=92412ad9c7d8cb69ecdb069e5fc4925b\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/5ede8c08-e31f-04ef-abd3-f98553a8ea16.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F5ede8c08-e31f-04ef-abd3-f98553a8ea16.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=042731cbc5a0e40aed36933e50112ede 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eいよいよ、スタート。手前がうちのパスファインダー、奥が一緒にはしるチームのパスファインダー。\n司会の方のReady GOでスタート！\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/7e74c89e0d5eeb3e5b69a4bfb035363b4b95395a/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f65663233383730382d613737622d643062662d343330352d3535343637626339383434642e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fef238708-a77b-d0bf-4305-55467bc9844d.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=d7e6ea35a5573da24f2256dad5b3b7da\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/ef238708-a77b-d0bf-4305-55467bc9844d.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fef238708-a77b-d0bf-4305-55467bc9844d.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=a0c4ae43ac620ff895cacf17d78cf2c7 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e序盤、順調な走りをみせる\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/39e6f97660a7975e5148ed4e14060218338dd20f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f62656530363333392d663065362d376663342d303136342d6138383463353962323163632e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fbee06339-f0e6-7fc4-0164-a884c59b21cc.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=de4de06fc1422ffc10f1c6452b1b947b\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/bee06339-f0e6-7fc4-0164-a884c59b21cc.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fbee06339-f0e6-7fc4-0164-a884c59b21cc.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=c03495d8bad02fbbd09ec9bda96ddc13 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eなかなか快調。一緒にはしるチームはパスファインダーの起動がうまくいかなかった模様\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/aeac548fbcba0c313d2c099e4daa523eeb3d925d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f66346236383861322d366139632d613561622d613738622d3062353438656230356231362e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Ff4b688a2-6a9c-a5ab-a78b-0b548eb05b16.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=adea172019f0b19563210ee314cccf3b\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/f4b688a2-6a9c-a5ab-a78b-0b548eb05b16.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Ff4b688a2-6a9c-a5ab-a78b-0b548eb05b16.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=cf72879061c9971eef57ed1dd9f05d6e 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"そして落下\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%9D%E3%81%97%E3%81%A6%E8%90%BD%E4%B8%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eそして落下・・・\u003c/h2\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003cp\u003e1週目後半、悪夢が。。。突然のコースアウト。その後、道無き道を迷走して、谷底に落下という末路をたどることに。\u003cbr\u003e\n司会の方は「あららー落下しちゃいましたね～」 \u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eパスファインダーを持って唖然としている仲間達。\u003c/p\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/7be83991588700f98ee7cad2a2444d76bce9781f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3137303930352f34303266356438362d373438622d353862322d643130302d3135383639633030356437372e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F402f5d86-748b-58b2-d100-15869c005d77.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=96ce0db77359aa1372d3ed197dc131b8\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/170905/402f5d86-748b-58b2-d100-15869c005d77.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2F402f5d86-748b-58b2-d100-15869c005d77.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=c8717cf95e3404c0c34ce99506564fe2 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eということで、わがチームはリタイアとなりました。\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e無念！\u003c/p\u003e\n\n\u003cp\u003e後で分析したところ、ざっくりいうと、電池が強すぎたみたい。\u003cbr\u003e\n(われわれが使っていた電池が弱かったみたい）\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"ふりかえり\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%B5%E3%82%8A%E3%81%8B%E3%81%88%E3%82%8A\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eふりかえり\u003c/h1\u003e\n\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eKeep\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eシミュレーターを使ったアルゴリズム調整\n描いた設計思想に忠実な実装\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eProblem\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e実機を走らせる時間（と空間）を十分確保できなかった\n電池まで本番と完全に同じものを使うべきだった\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"使い方\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E4%BD%BF%E3%81%84%E6%96%B9\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e使い方\u003c/h2\u003e\n\n\u003cul\u003e\n\u003cli\u003eコース画像を準備する。\u003c/li\u003e\n\u003cli\u003e走行ロジックを書く。ラッパー(インタフェース)をたたくだけでOK\nCPU Core2Duo以上、DirectX9～対応グラボなら3D表示しても実時間実行可能\n　離散化⊿tの値を大きくすれば、計算は荒くなるが遅いPCでもサクサク動くはず。\nコース上の指定した座標にPathfinderを配置してシミュレーションスタート\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"シミュレーターコードについて\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%B7%E3%83%9F%E3%83%A5%E3%83%AC%E3%83%BC%E3%82%BF%E3%83%BC%E3%82%B3%E3%83%BC%E3%83%89%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eシミュレーターコードについて\u003c/h1\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"インタフェース\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%A4%E3%83%B3%E3%82%BF%E3%83%95%E3%82%A7%E3%83%BC%E3%82%B9\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eインタフェース\u003c/h2\u003e\n\n\u003cp\u003e\u003cstrong\u003eBrickOSWrapper.h\u003c/strong\u003e\u003cbr\u003e\n実機とシミュレータでこのインタフェースを共通化してつかう\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c++\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eBrickOSWrapper.h\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"cp\"\u003e#pragma once\n#include \u0026lt;vcclr.h\u0026gt;\n\u003c/span\u003e\u003cspan class=\"k\"\u003enamespace\u003c/span\u003e \u003cspan class=\"n\"\u003eBrickOSWrapper\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003ePathFinder\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003cspan class=\"nl\"\u003eprivate:\u003c/span\u003e\n        \u003cspan class=\"k\"\u003estatic\u003c/span\u003e \u003cspan class=\"n\"\u003egcroot\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eMisawat\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eEtrobo\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eSimulator\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003ePathFinder\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003e_pathFinder\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"nl\"\u003epublic:\u003c/span\u003e\n        \u003cspan class=\"k\"\u003estatic\u003c/span\u003e \u003cspan class=\"kt\"\u003evoid\u003c/span\u003e \u003cspan class=\"n\"\u003eSet\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"n\"\u003eMisawat\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eEtrobo\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eSimulator\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003ePathFinder\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003epathFinder\u003c/span\u003e \u003cspan class=\"p\"\u003e){\u003c/span\u003e\n                \u003cspan class=\"n\"\u003e_pathFinder\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003epathFinder\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"k\"\u003estatic\u003c/span\u003e \u003cspan class=\"n\"\u003eMisawat\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eEtrobo\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eSimulator\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003ePathFinder\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003epathFinder\u003c/span\u003e\u003cspan class=\"p\"\u003e(){\u003c/span\u003e\n                \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003e_pathFinder\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e};\u003c/span\u003e\n\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eLightSensorWrapper\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003cspan class=\"nl\"\u003eprivate:\u003c/span\u003e\n        \u003cspan class=\"n\"\u003egcroot\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eMisawat\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eEtrobo\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eSimulator\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eLightSensor\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003e_lightSensor\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"nl\"\u003epublic:\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eLightSensorWrapper\u003c/span\u003e\u003cspan class=\"p\"\u003e(){\u003c/span\u003e\n                \u003cspan class=\"n\"\u003e_lightSensor\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ePathFinder\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003epathFinder\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003eGetLightSensor\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003eunsigned\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"k\"\u003econst\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003e_lightSensor\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003eGet\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e};\u003c/span\u003e\n\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eTractionMotorWrapper\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003cspan class=\"nl\"\u003eprivate:\u003c/span\u003e\n        \u003cspan class=\"n\"\u003egcroot\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eMisawat\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eEtrobo\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eSimulator\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eMotor\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003e_tractionMotor\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"nl\"\u003epublic:\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eTractionMotorWrapper\u003c/span\u003e\u003cspan class=\"p\"\u003e(){\u003c/span\u003e\n                \u003cspan class=\"n\"\u003e_tractionMotor\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ePathFinder\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003epathFinder\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003eGetTractionMotor\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003evoid\u003c/span\u003e \u003cspan class=\"n\"\u003eForward\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"kt\"\u003eunsigned\u003c/span\u003e \u003cspan class=\"kt\"\u003echar\u003c/span\u003e \u003cspan class=\"n\"\u003es\u003c/span\u003e \u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"k\"\u003econst\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"n\"\u003e_tractionMotor\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003eFoward\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003es\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003evoid\u003c/span\u003e \u003cspan class=\"n\"\u003eReverse\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"kt\"\u003eunsigned\u003c/span\u003e \u003cspan class=\"kt\"\u003echar\u003c/span\u003e \u003cspan class=\"n\"\u003es\u003c/span\u003e \u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"k\"\u003econst\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"n\"\u003e_tractionMotor\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003eReverse\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003es\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e};\u003c/span\u003e\n\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eSteeringMotorWrapper\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003cspan class=\"nl\"\u003eprivate:\u003c/span\u003e\n        \u003cspan class=\"n\"\u003egcroot\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eMisawat\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eEtrobo\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eSimulator\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eMotor\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003e_steeringMotor\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"nl\"\u003epublic:\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eSteeringMotorWrapper\u003c/span\u003e\u003cspan class=\"p\"\u003e(){\u003c/span\u003e\n                \u003cspan class=\"n\"\u003e_steeringMotor\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ePathFinder\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003epathFinder\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003eGetSteeringMotor\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003evoid\u003c/span\u003e \u003cspan class=\"n\"\u003eForward\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"kt\"\u003eunsigned\u003c/span\u003e \u003cspan class=\"kt\"\u003echar\u003c/span\u003e \u003cspan class=\"n\"\u003es\u003c/span\u003e \u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"k\"\u003econst\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"n\"\u003e_steeringMotor\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003eFoward\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003es\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003evoid\u003c/span\u003e \u003cspan class=\"n\"\u003eReverse\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"kt\"\u003eunsigned\u003c/span\u003e \u003cspan class=\"kt\"\u003echar\u003c/span\u003e \u003cspan class=\"n\"\u003es\u003c/span\u003e \u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"k\"\u003econst\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"n\"\u003e_steeringMotor\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003eReverse\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003es\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e};\u003c/span\u003e\n\u003cspan class=\"p\"\u003e};\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"走行ロジックアルゴリズムクラスの例\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%B5%B0%E8%A1%8C%E3%83%AD%E3%82%B8%E3%83%83%E3%82%AF%E3%82%A2%E3%83%AB%E3%82%B4%E3%83%AA%E3%82%BA%E3%83%A0%E3%82%AF%E3%83%A9%E3%82%B9%E3%81%AE%E4%BE%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e走行ロジック（アルゴリズム）クラスの例\u003c/h2\u003e\n\n\u003cp\u003e\u003cstrong\u003eRunningMethodManager.cpp\u003c/strong\u003e\u003cbr\u003e\n走行ロジックのマネージャ\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c++\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"cp\"\u003e#include \"StdAfx.h\"\n\u003c/span\u003e \u003cspan class=\"cp\"\u003e#include \"RunningMethodManager.h\"\n\u003c/span\u003e \u003cspan class=\"c1\"\u003e// Normal\u003c/span\u003e\n \u003cspan class=\"cp\"\u003e#include \"RunningMethod_Normal.h\"\n\u003c/span\u003e \u003cspan class=\"n\"\u003eRunningMethod\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eNormal\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003eiRunningMethodNormal\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n \u003cspan class=\"c1\"\u003e// TODO-start: ここに各自のRunngingMethodクラスを追加\u003c/span\u003e\n \u003cspan class=\"c1\"\u003e// #include \"RunningMethod_XXX.h\"\u003c/span\u003e\n \u003cspan class=\"c1\"\u003e// iRunningMethodXXX* iRunningMethodXXX;\u003c/span\u003e\n \u003cspan class=\"c1\"\u003e// TODO-end:\u003c/span\u003e\n \u003cspan class=\"n\"\u003eRunningMethodManager\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eRunningMethodManager\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n         \u003cspan class=\"c1\"\u003e// 光センサー値履歴管理モジュール生成\u003c/span\u003e\n         \u003cspan class=\"n\"\u003eiLightValueHistory\u003c/span\u003e   \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eCommon\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eLightValueHistory\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n         \u003cspan class=\"n\"\u003eiRunningMethodNormal\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eRunningMethod\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eNormal\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n         \u003cspan class=\"c1\"\u003e// TODO-start: ここに各自のRunngingMethodクラスを追加\u003c/span\u003e\n         \u003cspan class=\"c1\"\u003e// iRunningMethodXXX = new iRunningMethodXXX();\u003c/span\u003e\n         \u003cspan class=\"c1\"\u003e// TODO-end:\u003c/span\u003e\n\n         \u003cspan class=\"c1\"\u003e// 閾値設定\u003c/span\u003e\n         \u003cspan class=\"n\"\u003eCommon\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eLightValueHistory\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003esetThreshold\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"mi\"\u003e100\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e50\u003c/span\u003e \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n \u003cspan class=\"n\"\u003eRunningMethodManager\u003c/span\u003e\u003cspan class=\"o\"\u003e::~\u003c/span\u003e\u003cspan class=\"n\"\u003eRunningMethodManager\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003eRunningMethodManager\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eStartRunning\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n         \u003cspan class=\"kt\"\u003ebool\u003c/span\u003e         \u003cspan class=\"n\"\u003ecourseDetection\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nb\"\u003efalse\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n         \u003cspan class=\"kt\"\u003eunsigned\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003elatestValue\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n         \u003cspan class=\"c1\"\u003e// 光センサー値更新\u003c/span\u003e\n         \u003cspan class=\"n\"\u003eiLightValueHistory\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003eUpdateLightValueHistory\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026amp;\u003c/span\u003e\u003cspan class=\"n\"\u003elatestValue\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n         \u003cspan class=\"c1\"\u003e// コース判別\u003c/span\u003e\n         \u003cspan class=\"c1\"\u003e// TODO-start: ここに各自のRunngingMethodクラスを追加\u003c/span\u003e\n         \u003cspan class=\"c1\"\u003e// courseDetection = iRunningMethodXXX-\u0026gt;DetectCourse(iLightValueHistory);\u003c/span\u003e\n         \u003cspan class=\"c1\"\u003e// if(true == courseDetection){\u003c/span\u003e\n         \u003cspan class=\"c1\"\u003e//      iRunningMethodXXX-\u0026gt;Run();\u003c/span\u003e\n         \u003cspan class=\"c1\"\u003e// }\u003c/span\u003e\n         \u003cspan class=\"c1\"\u003e// TODO-end:\u003c/span\u003e\n         \u003cspan class=\"n\"\u003ecourseDetection\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eiRunningMethodNormal\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003eDetectCourse\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eiLightValueHistory\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n         \u003cspan class=\"k\"\u003eif\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nb\"\u003etrue\u003c/span\u003e \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"n\"\u003ecourseDetection\u003c/span\u003e\u003cspan class=\"p\"\u003e){\u003c/span\u003e\n                 \u003cspan class=\"n\"\u003eiRunningMethodNormal\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003eRun\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n         \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n         \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003eRunningMethodManager\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eStopRunning\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n         \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e\u003cem\u003eRunningMethod_Normal.cpp\u003c/em\u003e*\u003cbr\u003e\n状況ごとの走行ロジック（複数用意しても、１つでもＯＫ）\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c++\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eRunningMethod_Normal.cpp\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e \u003cspan class=\"c1\"\u003e//==============================================================================\u003c/span\u003e\n \u003cspan class=\"c1\"\u003e// - 名前: 通常走行\u003c/span\u003e\n \u003cspan class=\"c1\"\u003e// - 機能: 難所などを含まない通常のカーブ・直線を走るロジックを持つ。\u003c/span\u003e\n \u003cspan class=\"c1\"\u003e//         - 灰色検出のためコースの外側をエッジ走行する。\u003c/span\u003e\n \u003cspan class=\"c1\"\u003e//           つまり、黒：右、白：左にステアリングを切る。\u003c/span\u003e\n \u003cspan class=\"c1\"\u003e//         - 一定角度以上ステアリングをきらないようにリミットを設ける。\u003c/span\u003e\n \u003cspan class=\"c1\"\u003e//==============================================================================\u003c/span\u003e\n \u003cspan class=\"cp\"\u003e#include \"stdafx.h\"\n\u003c/span\u003e \u003cspan class=\"cp\"\u003e#include \"RunningMethod_Normal.h\"\n\u003c/span\u003e \u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"k\"\u003enamespace\u003c/span\u003e \u003cspan class=\"n\"\u003eCommon\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n \u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"k\"\u003enamespace\u003c/span\u003e \u003cspan class=\"n\"\u003eBrickOSWrapper\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n \u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"k\"\u003enamespace\u003c/span\u003e \u003cspan class=\"n\"\u003eRunningMethod\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n \u003cspan class=\"cp\"\u003e#define ABS(x) (0\u0026lt;(x)?(x):-(x))\n\u003c/span\u003e \u003cspan class=\"n\"\u003eNormal\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eNormal\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e:\u003c/span\u003e\n         \u003cspan class=\"n\"\u003e_currentDirection\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"n\"\u003eDirectionRight\u003c/span\u003e \u003cspan class=\"p\"\u003e),\u003c/span\u003e\n         \u003cspan class=\"n\"\u003e_counter\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n         \u003cspan class=\"n\"\u003eCOUNTER_MAX\u003c/span\u003e    \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e100\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n         \u003cspan class=\"n\"\u003eSTEERING_SPEED\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e255\u003c/span\u003e \u003cspan class=\"o\"\u003e/\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eLIGHT_HISTORY_MAX\u003c/span\u003e \u003cspan class=\"o\"\u003e/\u003c/span\u003e \u003cspan class=\"mi\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n \u003cspan class=\"n\"\u003eNormal\u003c/span\u003e\u003cspan class=\"o\"\u003e::~\u003c/span\u003e\u003cspan class=\"n\"\u003eNormal\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003eNormal\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eRun\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n         \u003cspan class=\"n\"\u003e_tractionMotor\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eForward\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e100\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n         \u003cspan class=\"k\"\u003eif\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"n\"\u003e_lightValueHistory\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003eisWhite\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"n\"\u003e_lightSensor\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e){\u003c/span\u003e\n                 \u003cspan class=\"n\"\u003eLeft\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n         \u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"k\"\u003eelse\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                 \u003cspan class=\"n\"\u003eRight\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n         \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n         \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n \u003cspan class=\"kt\"\u003evoid\u003c/span\u003e \u003cspan class=\"n\"\u003eNormal\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eRight\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n         \u003cspan class=\"n\"\u003eCount\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"n\"\u003eDirectionRight\u003c/span\u003e \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n         \u003cspan class=\"n\"\u003e_steeringMotor\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eForward\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"n\"\u003eGetSpeed\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n \u003cspan class=\"kt\"\u003evoid\u003c/span\u003e \u003cspan class=\"n\"\u003eNormal\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eLeft\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n         \u003cspan class=\"n\"\u003eCount\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"n\"\u003eDirectionLeft\u003c/span\u003e \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n         \u003cspan class=\"n\"\u003e_steeringMotor\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eReverse\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"n\"\u003eGetSpeed\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n \u003cspan class=\"kt\"\u003evoid\u003c/span\u003e \u003cspan class=\"n\"\u003eNormal\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eCount\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"n\"\u003eDirection\u003c/span\u003e \u003cspan class=\"n\"\u003edirection\u003c/span\u003e \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n         \u003cspan class=\"k\"\u003eif\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"n\"\u003e_currentDirection\u003c/span\u003e\u003cspan class=\"o\"\u003e!=\u003c/span\u003e\u003cspan class=\"n\"\u003edirection\u003c/span\u003e \u003cspan class=\"p\"\u003e){\u003c/span\u003e\n                 \u003cspan class=\"n\"\u003e_counter\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n         \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n         \u003cspan class=\"k\"\u003eelse\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                 \u003cspan class=\"n\"\u003e_counter\u003c/span\u003e \u003cspan class=\"o\"\u003e++\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n         \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n         \u003cspan class=\"n\"\u003e_currentDirection\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003edirection\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n \u003cspan class=\"kt\"\u003eunsigned\u003c/span\u003e \u003cspan class=\"kt\"\u003echar\u003c/span\u003e \u003cspan class=\"n\"\u003eNormal\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eGetSpeed\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n         \u003cspan class=\"k\"\u003eif\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"n\"\u003e_counter\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"n\"\u003eCOUNTER_MAX\u003c/span\u003e \u003cspan class=\"p\"\u003e){\u003c/span\u003e\n                 \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003eGetSpeedFromHistory\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n         \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n         \u003cspan class=\"k\"\u003eelse\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                 \u003cspan class=\"c1\"\u003e// ステアリングきりすぎ防止\u003c/span\u003e\n                 \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n         \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n \u003cspan class=\"kt\"\u003eunsigned\u003c/span\u003e \u003cspan class=\"kt\"\u003echar\u003c/span\u003e \u003cspan class=\"n\"\u003eNormal\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eGetSpeedFromHistory\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n         \u003cspan class=\"c1\"\u003e// 白黒の割合によって、ステアリングスピードの変更\u003c/span\u003e\n         \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003eABS\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003e_lightValueHistory\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003eGetWhiteRate\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u003c/span\u003e\u003cspan class=\"n\"\u003eLIGHT_HISTORY_MAX\u003c/span\u003e\u003cspan class=\"o\"\u003e/\u003c/span\u003e\u003cspan class=\"mi\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003eSTEERING_SPEED\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n \u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"n\"\u003eNormal\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eDetectCourse\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eCommon\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eLightValueHistory\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003elightValueHistory\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n         \u003cspan class=\"c1\"\u003e// runで使用するのでポインタを保持\u003c/span\u003e\n         \u003cspan class=\"n\"\u003e_lightValueHistory\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003elightValueHistory\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n         \u003cspan class=\"c1\"\u003e// 通常走行なので必ずtrueを返す\u003c/span\u003e\n         \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"nb\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e\u003cstrong\u003eシミュレータメイン\u003c/strong\u003e\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c++\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eSimulation.cpp\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\n\u003cspan class=\"cp\"\u003e#include \"StdAfx.h\"\n#include \"Simulation.h\"\n#include \"BrickOSWrapper.h\"\n#include \"RunningMethodManager.h\"\n\u003c/span\u003e\n\u003cspan class=\"n\"\u003eSimulation\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eSimulation\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eSystem\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eDrawing\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eGraphics\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003emyGraphics\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"n\"\u003e_myGraphics\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003emyGraphics\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"n\"\u003eSimulation\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eSimulation\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eSystem\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eWindows\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eForms\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eForm\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003eform\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"n\"\u003e_myForm\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003eform\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"n\"\u003e_myGraphics\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003eform\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003eCreateGraphics\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"n\"\u003eSimulation\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eSimulation\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003evoid\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e//UNAVAILABLE\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"n\"\u003eSimulation\u003c/span\u003e\u003cspan class=\"o\"\u003e::~\u003c/span\u003e\u003cspan class=\"n\"\u003eSimulation\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003evoid\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e//DO NOTHING\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"kt\"\u003evoid\u003c/span\u003e \u003cspan class=\"n\"\u003eSimulation\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eStop\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003evoid\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"n\"\u003erunning\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"nb\"\u003efalse\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"kt\"\u003evoid\u003c/span\u003e \u003cspan class=\"n\"\u003eSimulation\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eStart\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e//[NOTICE]\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e//Windows標準は、左上を(0,0)として右方向にX軸,下方向にY軸をとった座標系\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e//であるので回転角度0°は下向き、回転は反時計回り\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e//[HINT]\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e//SimulatorPlatform(コースの画像データ,グラフィックコンテクスト,描画時の倍率)\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e//単位は1pixel=1mm換算\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e//コースの画像データの横幅が1000pxで倍率が0.6なら600pixelで描画されます\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e//コース\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eString\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003ecourseImageFile\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\".\u003c/span\u003e\u003cspan class=\"se\"\u003e\\\\\u003c/span\u003e\u003cspan class=\"s\"\u003ehonban_course.png\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"n\"\u003e_simulatorPlatform\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003e__gc\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eSimulatorPlatform\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ecourseImageFile\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003e_myGraphics\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mf\"\u003e0.001\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"n\"\u003ePathFinder\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003epathFinder\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003e_simulatorPlatform\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003eCreatePathFinder\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e2400\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e500\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e90\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"n\"\u003ePathFinder\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003epathFinder2\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003e_simulatorPlatform\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003eCreatePathFinder\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e2400\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e300\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e90\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n\n\u003cspan class=\"c1\"\u003e//  Misawat::Graphic::Misawa3D::M3DDeviceContext::SetHALMode(false);\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eMisawat\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eGraphic\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eMisawa3D\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eM3DDeviceContext\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eSetDataDirectory\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\".\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n    \u003cspan class=\"n\"\u003eSimulatorPlatform3D\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003esimulator3D\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eSimulatorPlatform3D\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ecourseImageFile\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nb\"\u003efalse\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003e_myForm\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003eHandle\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eToInt32\u003c/span\u003e\u003cspan class=\"p\"\u003e(),\u003c/span\u003e\u003cspan class=\"n\"\u003e_myForm\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003eClientRectangle\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eWidth\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003e_myForm\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003eClientRectangle\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eHeight\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n\n    \u003cspan class=\"n\"\u003e_myForm\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003eMouseDown\u003c/span\u003e\u003cspan class=\"o\"\u003e+=\u003c/span\u003e\u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eSystem\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eWindows\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eForms\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eMouseEventHandler\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003esimulator3D\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026amp;\u003c/span\u003e\u003cspan class=\"n\"\u003eMisawat\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eEtrobo\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eSimulator\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eSimulatorPlatform3D\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eMouseDown\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"n\"\u003e_myForm\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003eMouseUp\u003c/span\u003e\u003cspan class=\"o\"\u003e+=\u003c/span\u003e\u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eSystem\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eWindows\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eForms\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eMouseEventHandler\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003esimulator3D\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026amp;\u003c/span\u003e\u003cspan class=\"n\"\u003eMisawat\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eEtrobo\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eSimulator\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eSimulatorPlatform3D\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eMouseUp\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"n\"\u003e_myForm\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003eMouseMove\u003c/span\u003e\u003cspan class=\"o\"\u003e+=\u003c/span\u003e\u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eSystem\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eWindows\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eForms\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eMouseEventHandler\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003esimulator3D\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026amp;\u003c/span\u003e\u003cspan class=\"n\"\u003eMisawat\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eEtrobo\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eSimulator\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eSimulatorPlatform3D\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eMouseMove\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n    \u003cspan class=\"n\"\u003esimulator3D\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003eAddPathFinder\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003epathFinder\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"n\"\u003esimulator3D\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003eAddPathFinder\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003epathFinder2\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e//パスファインダーに乗車した視点でシミュレータを実行する場合\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e//simulator3D-\u0026gt;SetOnVehicleMode(pathFinder);\u003c/span\u003e\n\n\n    \u003cspan class=\"c1\"\u003e//ガジェットを配置する。\u003c/span\u003e\n    \u003cspan class=\"n\"\u003esimulator3D\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003eAddGadget\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"etrobo_moai.x\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nb\"\u003eNULL\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e3750\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e2040\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"n\"\u003esimulator3D\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003eAddGadget\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"etrobo_gate.x\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\"marble.bmp\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e3280\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e2600\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e83\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n\n    \u003cspan class=\"c1\"\u003e//パスファインダーのボディの色を指定する。\u003c/span\u003e\n    \u003cspan class=\"n\"\u003epathFinder\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003eSetBodyColor\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eSystem\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eDrawing\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eColor\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eFromArgb\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e200\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e255\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e// Wrapper用にパスファインダをセットする\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eBrickOSWrapper\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003ePathFinder\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eSet\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"n\"\u003epathFinder\u003c/span\u003e \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e//pathFinder用走行ロジックオブジェクトを生成する\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eRunningMethodManager\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003erunningMethodManager\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003e__gc\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eRunningMethodManager\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e//画面全体を描画する\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e//_simulatorPlatform-\u0026gt;PaintAll();\u003c/span\u003e\n    \u003cspan class=\"n\"\u003e_simulatorPlatform\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003eDisableDraw\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nb\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"n\"\u003erunning\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"nb\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e//パスファインダーの制御ループ\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ewhile\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003erunning\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eSystem\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eWindows\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eForms\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eApplication\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eDoEvents\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n        \u003cspan class=\"c1\"\u003e//シミュレータの時間を0.03sec(30msec)を進める\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e//ここは実機の制御周期(1ループにかかる時間）に即した値を入れる\u003c/span\u003e\n        \u003cspan class=\"n\"\u003e_simulatorPlatform\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003eUpdate\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mf\"\u003e0.03\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"n\"\u003esimulator3D\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003eUpdate\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e//走行計算を行う\u003c/span\u003e\n        \u003cspan class=\"n\"\u003erunningMethodManager\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003eStartRunning\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e(以前はフルソースコードを公開していましたが、10年以上前でビルドも通らない可能性があるので、需要があればまた公開検討します^^)\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"まとめ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%BE%E3%81%A8%E3%82%81\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eまとめ\u003c/h1\u003e\n\n\u003cul\u003e\n\u003cli\u003e2007年に参加したETロボコンと、そのために作ったETロボコンシミュレーター開発の記録をアーカイブとして掲載しました\u003c/li\u003e\n\u003cli\u003e2019年現在とはだいぶ異なる手法でシミュレータを開発しましたが、とてもエキサイティングな経験となりました。\u003c/li\u003e\n\u003c/ul\u003e\n","createdAt":"2019-03-10T13:39:58Z","elapsedYearsFromLastModifiedAt":2,"encryptedId":"B2j1HuTxXbayh8KIi6pVfoZD8X5XXv0I--48VqlWey+2LqcvSI--A8BwjQGr/pCHhpeMVzQgdQ==","isBanned":false,"isDeprecated":true,"isDestroyableByViewer":false,"isEditRequestReadableByViewer":true,"isEditRequestSendableByViewer":true,"isLikableByViewer":true,"isLikedByViewer":false,"isPublic":true,"isSlide":false,"isStockableByViewer":true,"isStockedByViewer":false,"isSubscribableByViewer":false,"isSubscribedByViewer":false,"isUpdatableByViewer":false,"isUpdated":true,"lastModifiedAt":"2019-03-10T14:23:04Z","likesCount":5,"linkUrl":"https://qiita.com/riversun/items/61b7e1050aa3ec9fff7c","organization":null,"originalId":820535,"stockedCount":6,"title":"【昔話】ETロボコン 2007年向けシミュレーター開発の記録【アーカイブ】","toc":"\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E6%A6%82%E8%A6%81\"\u003e概要\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#et%E3%83%AD%E3%83%9C%E3%82%B3%E3%83%B3%E3%82%B7%E3%83%9F%E3%83%A5%E3%83%AC%E3%83%BC%E3%82%BF%E3%83%BC%E3%81%A8%E3%81%AF\"\u003eETロボコンシミュレーターとは\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%97%E3%83%AD%E3%83%AD%E3%83%BC%E3%82%B0\"\u003eプロローグ\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#et%E3%83%AD%E3%83%9C%E3%82%B3%E3%83%B3-2007-%E3%81%A8%E3%81%AF\"\u003eETロボコン 2007 とは\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%AD%E3%83%9C%E3%82%B3%E3%83%B3%E5%90%8D%E7%A7%B0\"\u003eロボコン名称\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%91%E3%82%B9%E3%83%95%E3%82%A1%E3%82%A4%E3%83%B3%E3%83%80%E3%83%BC\"\u003eパスファインダー\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%B3%E3%83%B3%E3%83%86%E3%82%B9%E3%83%88%E3%81%AE%E5%86%85%E5%AE%B9\"\u003eコンテストの内容\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%B3%E3%83%B3%E3%82%BB%E3%83%97%E3%83%88\"\u003eコンセプト\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E8%BF%BD%E5%8A%A0%E3%82%A2%E3%82%A4%E3%83%87%E3%82%A2\"\u003e追加アイデア\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%B9%E3%82%B1%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB\"\u003eスケジュール\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%81%E3%83%BC%E3%83%A0\"\u003eチーム\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E7%A7%81%E3%81%AE%E6%8B%85%E5%BD%93\"\u003e私の担当\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%B7%E3%83%9F%E3%83%A5%E3%83%AC%E3%83%BC%E3%82%BF%E3%81%AE%E3%82%A2%E3%82%A4%E3%83%87%E3%82%A2\"\u003eシミュレータのアイデア\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%B7%E3%83%9F%E3%83%A5%E3%83%AC%E3%83%BC%E3%82%BF%E3%81%AE%E5%AE%9F%E7%8F%BE%E3%82%B9%E3%83%86%E3%83%83%E3%83%97\"\u003eシミュレータの実現ステップ\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AE%9F%E8%A3%85%E3%82%88%E3%82%8A%E3%81%AE%E6%95%B4%E7%90%86\"\u003e実装よりの整理\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AE%9F%E8%A3%85%E3%82%A4%E3%83%A1%E3%83%BC%E3%82%B8\"\u003e実装イメージ\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%B7%E3%83%9F%E3%83%A5%E3%83%AC%E3%83%BC%E3%82%BF%E3%81%AE%E8%83%BD%E5%8A%9B\"\u003eシミュレータの能力\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%91%E3%82%B9%E3%83%95%E3%82%A1%E3%82%A4%E3%83%B3%E3%83%80%E3%83%BC%E5%AE%9F%E6%A9%9F%E5%86%99%E7%9C%9F\"\u003eパスファインダー（実機）写真\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%B7%E3%83%9F%E3%83%A5%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%99%E3%82%8B%E7%8F%BE%E8%B1%A1\"\u003eシミュレーションする現象\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E7%89%A9%E7%90%86%E8%A8%88%E7%AE%97%E3%81%AE%E5%88%B6%E7%B4%84\"\u003e物理計算の制約\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%81%84%E3%82%88%E3%81%84%E3%82%88%E5%AE%9F%E6%A9%9F%E3%81%A7%E8%A8%88%E6%B8%AC\"\u003eいよいよ実機で計測\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AE%9F%E6%A9%9F%E3%81%AE%E3%82%B5%E3%82%A4%E3%82%BA\"\u003e実機のサイズ\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AE%9F%E6%A9%9F%E8%B5%B0%E8%A1%8C%E5%AE%9F%E9%A8%93\"\u003e実機走行実験\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E9%80%9F%E5%BA%A6%E6%B8%AC%E5%AE%9A%E5%AE%9F%E9%A8%93\"\u003e①速度測定実験\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%88%A9%E7%94%A8%E3%81%A7%E3%81%8D%E3%81%9D%E3%81%86%E3%81%AA%E8%A8%88%E7%AE%97%E5%BC%8F%E3%81%AE%E5%B0%8E%E5%87%BA\"\u003e利用できそうな計算式の導出\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AE%9A%E5%B8%B8%E5%86%86%E6%97%8B%E5%9B%9E%E5%AE%9F%E9%A8%93\"\u003e②定常円旋回実験\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AE%9A%E5%B8%B8%E5%86%86%E6%97%8B%E5%9B%9E%E5%AE%9F%E9%A8%93%E7%B5%90%E6%9E%9C\"\u003e定常円旋回実験結果\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AE%9A%E5%B8%B8%E5%86%86%E6%97%8B%E5%9B%9E%E8%A8%88%E7%AE%97%E5%BC%8F%E7%A2%BA%E8%AA%8D\"\u003e定常円旋回計算式確認\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%B9%E3%83%86%E3%82%A2%E3%83%AA%E3%83%B3%E3%82%B0%E3%83%A2%E3%83%BC%E3%82%BF%E3%83%BC%E5%8B%95%E4%BD%9C%E5%AE%9F%E9%A8%93\"\u003e③ステアリングモーター動作実験\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%8F%AF%E5%8B%95%E5%AF%B8%E6%B3%95%E8%A8%88%E6%B8%AC\"\u003e可動・寸法計測\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%B9%E3%83%86%E3%82%A2%E3%83%AA%E3%83%B3%E3%82%B0%E3%81%AE%E5%8F%AF%E5%8B%95%E7%AF%84%E5%9B%B2\"\u003eステアリングの可動範囲\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E8%A8%88%E7%AE%97%E7%94%A8%E3%81%AE%E3%83%A2%E3%83%87%E3%83%AB%E5%8C%96\"\u003e計算用のモデル化\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#20070428-%E3%82%B7%E3%83%9F%E3%83%A5%E3%83%AC%E3%83%BC%E3%82%BF%E7%94%A8%E8%A8%88%E7%AE%97%E5%BC%8F%E3%81%BE%E3%81%A8%E3%82%81\"\u003e20070428 シミュレータ用計算式まとめ\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E9%80%9F%E5%BA%A6-vs\"\u003e速度 Vs\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%B9%E3%83%86%E3%82%A2%E3%83%AA%E3%83%B3%E3%82%B0%E3%81%AE%E8%A7%92%E9%80%9F%E5%BA%A6%CF%89\"\u003eステアリングの角速度ω\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AE%9A%E5%B8%B8%E5%86%86%E6%97%8B%E5%9B%9E%E5%8D%8A%E5%BE%84-r\"\u003e定常円旋回半径 R\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AE%9A%E5%B8%B8%E5%86%86%E6%97%8B%E5%9B%9E%E5%8D%8A%E5%BE%84r%E8%A8%88%E7%AE%97%E3%81%AE%E8%A3%9C%E8%B6%B3\"\u003e定常円旋回半径R計算の補足\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%B7%E3%83%9F%E3%83%A5%E3%83%AC%E3%83%BC%E3%82%BF%E6%A7%8B%E6%83%B3\"\u003eシミュレータ構想\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E8%A8%AD%E8%A8%88%E3%81%AE%E6%A7%8B%E6%83%B3\"\u003e設計の構想\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E3%82%92%E8%80%83%E3%81%88%E3%82%8B\"\u003eアーキテクチャを考える\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%B9%E3%82%B1%E3%83%83%E3%83%81%E3%81%AE%E4%BF%AE%E6%AD%A3\"\u003eスケッチの修正\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E8%A6%81%E6%B1%82%E3%81%AB%E7%AD%94%E3%81%88%E3%82%8B\"\u003e要求に答える\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E8%A6%81%E6%B1%82%E3%81%A8%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3\"\u003e要求とアーキテクチャ\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E8%A6%81%E6%B1%82%E3%81%A8%E9%96%8B%E7%99%BA%E7%92%B0%E5%A2%83\"\u003e要求と開発環境\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E8%A8%AD%E8%A8%88%E5%AE%9F%E8%A3%85%E9%96%8B%E5%A7%8B\"\u003e設計・実装開始\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E9%96%8B%E7%99%BA%E7%92%B0%E5%A2%83%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB\"\u003e開発環境インストール\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%AF%E3%83%A9%E3%82%B9%E8%A8%AD%E8%A8%88\"\u003eクラス設計\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8graphicmisawa2dparts\"\u003eパッケージGraphic.Misawa2D.Parts\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8graphicmisawa2dmodel\"\u003eパッケージGraphic.Misawa2D.Model\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AE%9F%E8%A3%85\"\u003e実装\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AE%9F%E8%A1%8C%E3%82%A4%E3%83%A1%E3%83%BC%E3%82%B8\"\u003e実行イメージ\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#generic%E3%81%AF%E4%BE%BF%E5%88%A9\"\u003eGenericは便利\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%AF%E3%83%A9%E3%82%B9%E8%A8%AD%E8%A8%88-1\"\u003eクラス設計\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8etrobosimulator\"\u003eパッケージEtrobo.Simulator\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8etrobokinematics\"\u003eパッケージEtrobo.Kinematics\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AE%9F%E8%A3%85-1\"\u003e実装\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E8%A6%AA%E3%81%AE%E3%82%B3%E3%83%B3%E3%82%B9%E3%83%88%E3%83%A9%E3%82%AF%E3%82%BF%E3%81%A7delegate%E4%BD%BF%E3%81%86\"\u003e親のコンストラクタでdelegate使う\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#graphicmisawa2dparts%E3%82%92%E6%8C%AF%E3%82%8A%E8%BF%94%E3%82%8B\"\u003eGraphic.Misawa2D.Partsを振り返る\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AE%9F%E8%A1%8C%E3%82%A4%E3%83%A1%E3%83%BC%E3%82%B8-1\"\u003e実行イメージ\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E9%9B%A2%E6%95%A3%E5%8C%96%E3%81%AB%E3%81%A8%E3%82%82%E3%81%AA%E3%81%86%CE%B4t%E3%81%AE%E5%8F%96%E3%82%8A%E6%89%B1%E3%81%84\"\u003e離散化にともなうΔtの取り扱い\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%B3%E3%83%BC%E3%82%B9%E3%81%A8%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%BF%E3%83%A9%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3\"\u003eコースとのインタラクション\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%B3%E3%83%BC%E3%82%B9%E3%81%AE%E8%89%B2%E6%83%85%E5%A0%B1%E3%81%AE%E6%8A%BD%E5%87%BA\"\u003eコースの色情報の抽出\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AE%9F%E8%A1%8C%E3%82%A4%E3%83%A1%E3%83%BC%E3%82%B8-2\"\u003e実行イメージ\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%B7%E3%83%9F%E3%83%A5%E3%83%AC%E3%83%BC%E3%82%BF%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%9F%E3%82%B3%E3%83%BC%E3%83%87%E3%82%A3%E3%83%B3%E3%82%B0\"\u003eシミュレータを使ったコーディング\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#c%E3%81%A7%E3%82%B7%E3%83%9F%E3%83%A5%E3%83%AC%E3%83%BC%E3%82%BF%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%A0%E3%82%92%E4%BD%9C%E3%82%8B\"\u003eC++でシミュレータプログラムを作る\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#managed-c%E3%81%A8oldsyntax\"\u003eManaged C++とOldSyntax\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%A9%E3%82%A4%E3%83%96%E3%83%A9%E3%83%AA%E3%82%92%E7%94%A8%E3%81%84%E3%81%9F%E3%82%B3%E3%83%BC%E3%83%87%E3%82%A3%E3%83%B3%E3%82%B0\"\u003eライブラリを用いたコーディング\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%81%84%E3%82%8D%E3%81%84%E3%82%8D%E3%81%AA%E3%82%B7%E3%83%9F%E3%83%A5%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E6%9D%A1%E4%BB%B6\"\u003eいろいろなシミュレーション条件\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E6%83%85%E5%A0%B1%E3%82%92%E8%A1%A8%E7%A4%BA%E3%81%97%E3%81%AA%E3%81%8C%E3%82%89\"\u003e情報を表示しながら\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#2%E5%8F%B0%E5%90%8C%E6%99%82%E8%B5%B0%E8%A1%8C\"\u003e2台同時走行\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#4%E5%8F%B0%E5%90%8C%E6%99%82%E8%B5%B0%E8%A1%8C\"\u003e4台同時走行\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%B3%E3%83%BC%E3%82%B9%E7%94%BB%E5%83%8F%E3%81%AE%E6%BA%96%E5%82%99\"\u003eコース画像の準備\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%B3%E3%83%BC%E3%82%B9%E3%81%AE%E5%A4%A7%E3%81%8D%E3%81%95\"\u003eコースの大きさ\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%B3%E3%83%BC%E3%82%B9%E3%81%AE%E3%83%80%E3%82%A6%E3%83%B3%E3%83%AD%E3%83%BC%E3%83%89\"\u003eコースのダウンロード\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%B3%E3%83%BC%E3%82%B9%E7%94%BB%E5%83%8F%E3%81%AE%E5%A4%89%E6%8F%9B\"\u003eコース画像の変換\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#pdf%E3%81%8B%E3%82%89png%E3%81%B8\"\u003ePDFからPNGへ\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%A1%E3%83%B3%E3%83%90%E3%83%BC%E5%90%91%E3%81%91%E3%81%AB%E3%82%B7%E3%83%9F%E3%83%A5%E3%83%AC%E3%83%BC%E3%82%BF%E3%83%BC%E3%83%AA%E3%83%AA%E3%83%BC%E3%82%B9\"\u003eメンバー向けにシミュレーターリリース\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E6%9C%AC%E7%95%AA%E3%82%B3%E3%83%BC%E3%82%B9%E3%81%A7%E3%82%B7%E3%83%9F%E3%83%A5%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3\"\u003e本番コースでシミュレーション\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%80%E3%83%A1%E3%81%A0%E3%81%97\"\u003eダメだし\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#3d%E5%8C%96%E5%AF%BE%E5%BF%9C%E8%A8%AD%E8%A8%88\"\u003e3D化対応設計\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8\"\u003eパッケージ\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%AF%E3%83%A9%E3%82%B9%E3%81%AE%E8%A8%AD%E8%A8%88\"\u003eクラスの設計\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#3d%E3%81%AE%E3%83%91%E3%82%B9%E3%83%95%E3%82%A1%E3%82%A4%E3%83%B3%E3%83%80%E3%83%BC\"\u003e3Dのパスファインダー\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#3d%E3%83%97%E3%83%A9%E3%83%83%E3%83%88%E3%83%95%E3%82%A9%E3%83%BC%E3%83%A0%E3%81%AE%E5%AE%9F%E8%A3%85\"\u003e3Dプラットフォームの実装\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#3d%E8%BB%8A%E4%B8%A1%E3%83%87%E3%83%BC%E3%82%BF\"\u003e3D車両データ\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#3d%E5%AE%9F%E8%A3%85%E3%81%A4%E3%81%A5%E3%81%8D\"\u003e3D実装つづき\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#3d%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0%E3%81%AF%E7%B4%94%E7%B2%8B%E3%81%AB%E3%81%9F%E3%81%AE%E3%81%97%E3%81%84\"\u003e3Dプログラミングは純粋にたのしい\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#2007%E5%B9%B45%E6%9C%8823%E6%97%A5-%E3%83%97%E3%83%AC%E8%A9%A6%E8%B5%B0%E4%BC%9A\"\u003e2007年5月23日 プレ試走会\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E6%9F%90%E7%A4%BE%E3%81%AE%E6%9F%90%E4%BC%9A%E8%AD%B0%E5%AE%A4%E3%81%A7%E5%AE%9F%E6%A9%9F%E3%82%92%E8%B5%B0%E3%82%89%E3%81%9B%E3%81%A6%E3%81%BF%E3%81%9F\"\u003e某社の某会議室で実機を走らせてみた\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E7%89%A9%E7%90%86%E8%A8%88%E7%AE%97%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB%E3%81%A8%E3%81%AE%E9%80%A3%E6%90%BA\"\u003e物理計算モジュールとの連携\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E9%80%A3%E6%90%BA\"\u003e連携\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%B3%E3%83%BC%E3%82%B9%E3%82%92%E7%96%BE%E8%B5%B0%E3%81%99%E3%82%8B%E3%83%A2%E3%82%A2%E3%82%A4%E5%90%9B\"\u003eコースを疾走するモアイ君\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#3d%E3%83%A2%E3%83%87%E3%83%AB%E3%81%AE%E7%94%9F%E6%88%90%E6%88%90%E5%8A%9F\"\u003e3Dモデルの生成成功\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#3d%E3%81%AE%E3%83%91%E3%82%B9%E3%83%95%E3%82%A1%E3%82%A4%E3%83%B3%E3%83%80%E3%83%BC%E3%83%A2%E3%83%87%E3%83%AB%E3%81%AE%E7%94%9F%E6%88%90%E3%81%AB%E6%88%90%E5%8A%9F\"\u003e3Dのパスファインダーモデルの生成に成功\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%A2%E3%82%A2%E3%82%A4%E5%90%9B-%E3%82%BF%E3%82%A4%E3%82%A2\"\u003eモアイ君-\u0026gt;タイア\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#3d%E3%81%AE%E8%A6%AA%E5%AD%90%E9%96%A2%E4%BF%82\"\u003e3Dの親子関係\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#3d%E3%83%A2%E3%83%87%E3%83%AB\"\u003e3Dモデル\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%91%E3%83%BC%E3%83%84%E3%81%94%E3%81%A8%E3%81%AE%E5%8B%95%E4%BD%9C\"\u003eパーツごとの動作\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%BF%E3%82%A4%E3%83%A4%E3%81%AE%E5%9B%9E%E8%BB%A2\"\u003eタイヤの回転\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%91%E3%82%B9%E3%83%95%E3%82%A1%E3%82%A4%E3%83%B3%E3%83%80%E3%83%BC%E7%96%BE%E8%B5%B0\"\u003eパスファインダー疾走！\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%AB%E3%83%A1%E3%83%A9%E3%82%A2%E3%83%B3%E3%82%B0%E3%83%AB\"\u003eカメラアングル\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E8%BB%8A%E8%BC%89%E3%82%AB%E3%83%A1%E3%83%A9%E6%90%AD%E8%BC%89\"\u003e車載カメラ搭載\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%91%E3%82%B9%E3%83%95%E3%82%A1%E3%82%A4%E3%83%B3%E3%83%80%E3%83%BC%E3%81%AB%E4%B9%97%E8%BB%8A\"\u003eパスファインダーに乗車\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%BD%E3%83%95%E3%83%88%E3%82%A6%E3%82%A7%E3%82%A2%E8%A8%AD%E8%A8%88%E5%A4%89%E6%9B%B4\"\u003eソフトウェア設計変更\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E8%A8%AD%E8%A8%88%E6%9B%B8%E3%81%AF%E3%83%A1%E3%83%B3%E3%83%86%E3%81%97%E3%82%88%E3%81%86\"\u003e設計書はメンテしよう\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#before-after\"\u003eBefore After\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E8%A8%AD%E8%A8%88%E5%A4%89%E6%9B%B4%E3%81%97%E3%81%9F%E3%81%AE%E3%81%AB\"\u003e設計変更したのに\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#gadget%E3%81%AE%E8%BF%BD%E5%8A%A0\"\u003eGadgetの追加\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%81%AA%E3%82%93%E3%81%A0%E3%81%8B%E3%82%82%E3%81%AE%E3%81%95%E3%81%B3%E3%81%97%E3%81%84%E3%81%AE%E3%81%A7\"\u003eなんだかものさびしいので\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%81%AE%E5%A0%B4%E6%89%80\"\u003eオブジェの場所\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#3d%E3%83%A2%E3%83%87%E3%83%AA%E3%83%B3%E3%82%B0%E3%81%97%E3%81%9F\"\u003e3Dモデリングした\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%92%E9%85%8D%E7%BD%AE\"\u003eオブジェを配置\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%81%BE%E3%81%9F%E8%A8%AD%E8%A8%88%E5%A4%89%E6%9B%B4\"\u003eまた設計変更\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AE%9F%E8%A1%8C%E7%B5%90%E6%9E%9C\"\u003e実行結果\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E8%BB%8A%E8%BC%89%E3%82%AB%E3%83%A1%E3%83%A9%E3%81%AE%E3%83%96%E3%83%AC%E9%98%B2%E6%AD%A2\"\u003e車載カメラのブレ防止\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%AD%E3%83%BC%E3%83%91%E3%82%B9\"\u003eローパス\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E8%BB%8A%E8%BC%89%E3%82%AB%E3%83%A1%E3%83%A9%EF%BC%92%E3%81%A4\"\u003e車載カメラ２つ\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%AB%E3%83%A1%E3%83%A9%E8%A6%96%E7%82%B9%EF%BC%92%E3%81%A4\"\u003eカメラ視点２つ。\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E6%9C%AC%E7%95%AA%E5%89%8D%E6%97%A5\"\u003e本番前日\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E6%9C%AC%E7%95%AA%E3%81%A8%E3%81%AF\"\u003e本番とは\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#2007%E5%B9%B46%E6%9C%8830%E6%97%A5-et%E3%83%AD%E3%83%9C%E3%82%B3%E3%83%B3%E5%BD%93%E6%97%A5%E3%83%AC%E3%83%9D%E3%83%BC%E3%83%88\"\u003e2007年6月30日 ETロボコン当日レポート\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E9%96%8B%E5%82%AC%E6%A6%82%E8%A6%81\"\u003e開催概要\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%BD%93%E6%97%A5%E3%81%AE%E3%82%BF%E3%82%A4%E3%83%A0%E3%83%86%E3%83%BC%E3%83%96%E3%83%AB\"\u003e当日のタイムテーブル\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%8F%97%E4%BB%98%E8%A9%A6%E8%B5%B0%E4%BC%9A\"\u003e受付～試走会\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E8%A9%A6%E8%B5%B0%E4%BC%9A%E4%BA%88%E9%81%B8%E8%B5%B0%E8%A1%8C\"\u003e試走会～予選走行\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E4%BA%88%E9%81%B8%E8%B5%B0%E8%A1%8C%E3%83%AC%E3%83%BC%E3%82%B9%E7%B5%90%E6%9E%9C\"\u003e予選走行～レース結果\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%81%9D%E3%81%97%E3%81%A6%E8%90%BD%E4%B8%8B\"\u003eそして落下・・・\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%81%B5%E3%82%8A%E3%81%8B%E3%81%88%E3%82%8A\"\u003eふりかえり\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E4%BD%BF%E3%81%84%E6%96%B9\"\u003e使い方\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%B7%E3%83%9F%E3%83%A5%E3%83%AC%E3%83%BC%E3%82%BF%E3%83%BC%E3%82%B3%E3%83%BC%E3%83%89%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6\"\u003eシミュレーターコードについて\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%A4%E3%83%B3%E3%82%BF%E3%83%95%E3%82%A7%E3%83%BC%E3%82%B9\"\u003eインタフェース\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E8%B5%B0%E8%A1%8C%E3%83%AD%E3%82%B8%E3%83%83%E3%82%AF%E3%82%A2%E3%83%AB%E3%82%B4%E3%83%AA%E3%82%BA%E3%83%A0%E3%82%AF%E3%83%A9%E3%82%B9%E3%81%AE%E4%BE%8B\"\u003e走行ロジック（アルゴリズム）クラスの例\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%81%BE%E3%81%A8%E3%82%81\"\u003eまとめ\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n","totalPv":1142,"uuid":"61b7e1050aa3ec9fff7c","banReason":null,"adventCalendarItem":null,"author":{"encryptedId":"iLP3Vnt4xoyPDnIw6xIZ6f8P9BSU--AnI7nyGlEzHTvSRg--9ykKerKA5D7s00VQPtoryA==","originalId":170905,"description":"UX producer and Full-Stack developer with more than 15 years of experience.","facebookUrl":null,"githubUrl":null,"isBlockingViewer":false,"isFollowableByViewer":true,"isFollowedByViewer":false,"isTweetWebNotificationReceivable":true,"linkedinUrl":null,"name":"","profileImageUrl":"https://qiita-image-store.s3.amazonaws.com/0/170905/profile-images/1542519361","profileImageUrlW48":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fprofile-images%2F1542519361?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=48\u0026s=537de44e00675eb9509f6d2914cc2700","profileImageUrlW75":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F170905%2Fprofile-images%2F1542519361?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=99f04a1bb57bbe91cce3e6cd95070879","urlName":"riversun","websiteUrl":"https://github.com/riversun","twitterUrl":null,"twitterUrlName":null,"revealedOrganizations":{"edges":[]}},"tags":[{"name":"C++","urlName":"cpp"},{"name":"C#","urlName":"csharp"},{"name":"ETロボコン","urlName":"et%e3%83%ad%e3%83%9c%e3%82%b3%e3%83%b3"}],"followingLikers":{"edges":[]},"comments":{"totalCount":0}},"comments":[],"client":null,"ads_event_emitter":null}}</script>
