More than 1 year has passed since last update.良いAssetを教えてもらいました。
イワシくん←泳ぎのアニメーションが最初からついているのでこれで前に進めてあげるだけで泳いでいる感じが出ます。今回はAddTorqueで向きを変えたいと思います。Unity道場を参考にしました。
Youtube←動画にもありますが、
AddTorque(回転力)は重ねても破綻することはないとのこと。もちろん求めている動きにするには調整して回転力を重ねる必要がありますが"X軸に回転力が加っている最中にZ軸の回転力を重ねて加える"
"X軸のプラス方向の回転力をX軸のマイナス方向の回転力で打ち消す"みたいなことも可能と解釈しました。(間違っていたらご指摘ください)実際にTorqueを合成したデモがこちらです。
赤い線はイワシくんの軌跡です。
一度目の方向転換時には
左向きにAddTorque、下向きにAddTorqueを同時に行っています。練習がてらUniRxを使って実装しました。
使い方を覚えたかっただけで特に意味はありません。今回はUnity道場の動画にも紹介があった外積を利用しています。
回転を加えた際に魚がひっくり返ったりしないように
水平を保つ回転力を外積から算出して加えています。水平を保ちたいだけであれば外積を使わなくてもRigidbodyの設定から可能です。
FreezeRotationで固定したい軸にチェックを入れればOKです。
今回は角度を変えながら自由に動き回った後で水平に戻る仕様にしたいので
外積を利用しました。加える回転力を調節すれば、画像右側のようにゆらゆらと動かすこともできます。
自然と水平に戻るようにAngularDragを調整しておきます。
AngularDragは文字通り、角度に対する抵抗力です。
ここがもし0であれば、角度に対して加えた力は永遠に消滅せずに回転を続けます。終わってから調べて気付きましたが、そもそもイワシはゆらゆらのんびりと泳がないっぽいです。
イワシがどう泳ぐかなんて心底どうでもいいのでこのまま公開することにしました。今回使ったAddTorqueや外積などを組み合わせると、
ゆらゆらした動きや方向転換が簡単に再現できるのでぜひお試しください。あとUnity道場は私くらいの初心者レベルだと本当にためになることばかりなので
初学者の方は軽い気持ちで覗いてみることをお勧めします。


