More than 3 years have passed since last update.ミニゲームを作ってUnityを学ぶ！[ひつじコレクション編]前回はゲームに開始・終了の概念とやり直しの機能を実装しました。
今回は各種UIを実装予定だったのですが、思っていたより分量が多くなってしまいそうなため、DOTweenを使ったTweenアニメーションをUIに設定するところまでとなります。UIを実装する際に必要なアセットをあらかじめプロジェクトにインポートしておきます。Simple UI
DOTween (HOTween v2)まずはじめにそれぞれのUIについて、表示・非表示の切り替えやアニメーションの設定を一元的に管理するマネージャーを作成しておきます。作成したUiManagerはどのスクリプトからでも利用できるようにGameControllerに参照を保持させています。ゲーム開始前、プレイヤーにEnterキーの入力を促すためのテキストを表示します。プロジェクトを実行するとキー入力を促すメッセージが表示され、Enterキーを押してゲームが開始されるタイミングでメッセージが非表示になります。続いて、先ほど作成したテキストにtweenアニメーションを設定します。DOTweenはインポートとは別に、現在使っているUnityのversionに合わせたセットアップをしなければプロジェクトで利用することができません。
セットアップと言っても何ら難しいことはなく、3クリックで完了します。真ん中やや上の「DOTWEEN SETUP REQUIRED」の文字が消えれば完了です。では、UiManagerを修正して中央のテキストにTweenアニメーションを設定していきます。参考： DOTweenを使ってUI要素を点滅させるLoadUi()に中央テキストのアルファ値を操作した点滅するTweenアニメーションの設定を追加しました。
こちらについては上記の記事が大変わかりやすく解説されていますので、ご紹介させていただきます。プロジェクトを実行すると画面センターのメッセージが点滅することが確認できます。一度開始したTweenアニメーションは適用されているオブジェクトのアクティブ状態にかかわらず、Killするまで停止されません。
Enterキーの入力を受け付けるとUiManager#HideCenterMsg()によって中央のメッセージは非アクティブな（見えない）状態となりますが、mCenterTextに設定しているTweenアニメーションはそのまま動作し続けます。この問題を解消するために、メッセージを非表示にすると同時にTweenアニメーションを終了します。これによってUiにTweenアニメーション開始から終了までを実装することができました。
今回のフェード処理以外にもDOTWeenには様々なメソッドが定義されています。DOTween - DocumentationTweenエンジンなしで今回のフェード処理（に近いモノ）を実装する場合は恐らく以下のようなかんじになります。DOTweenを使えばこういった専用のクラスを一から作ることなく、より複雑なTweenアニメーションを簡単に実装することができます。次のページに進む
イントロダクションに戻る

この作品はユニティちゃんライセンス条項の元に提供されています


