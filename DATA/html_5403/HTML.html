<!DOCTYPE html><html><head><meta charset="utf-8" /><title>ミニゲームを作ってUnityを学ぶ！  [ タンクウォーズ編 - 5. HPの管理とステージの作り込み ] - Qiita</title><meta content="width=device-width,initial-scale=1,shrink-to-fit=no,viewport-fit=cover" name="viewport" /><meta content="#55c500" name="theme-color" /><meta content="XWpkTG32-_C4joZoJ_UsmDUi-zaH-hcrjF6ZC_FoFbk" name="google-site-verification" /><meta content="telephone=no" name="format-detection" /><link rel="canonical" href="https://qiita.com/YzRoid/items/b2544cab6463d82506c5" /><link href="/manifest.json" rel="manifest" /><link href="/opensearch.xml" rel="search" title="Qiita" type="application/opensearchdescription+xml" /><link as="script" href="https://www.googletagservices.com/tag/js/gpt.js" rel="preload" /><link href="https://securepubads.g.doubleclick.net" rel="preconnect" /><script async="" src="https://www.googletagservices.com/tag/js/gpt.js"></script><meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="LTzxfPbnLXnIux+4QQTdl5Jf2VPWAVskS6pP52lwQQpc5Wgqo0BRMLJoFe1ycT79sTw8ZUbXKPVD474y3pAeSQ==" /><link rel="shortcut icon" type="image/x-icon" href="https://cdn.qiita.com/assets/favicons/public/production-c620d3e403342b1022967ba5e3db1aaa.ico" /><link rel="apple-touch-icon" type="image/png" href="https://cdn.qiita.com/assets/favicons/public/apple-touch-icon-ec5ba42a24ae923f16825592efdc356f.png" /><link rel="stylesheet" media="all" href="https://cdn.qiita.com/assets/public/article-2eaa7dbedc42a8ea65c722cda46d0ebb.min.css" /><script src="https://cdn.qiita.com/assets/public/v3-article-bundle-63de2d91fef827269d3f6b958db2335b.min.js" defer="defer"></script><meta name="twitter:card" content="summary_large_image"><meta content="@Qiita" name="twitter:site" /><meta property="og:type" content="article"><meta property="og:title" content="ミニゲームを作ってUnityを学ぶ！  [ タンクウォーズ編 - 5. HPの管理とステージの作り込み ] - Qiita"><meta property="og:image" content="https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0&amp;w=1200&amp;mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND00NE9mNDRPTDQ0S3k0NE84NDRPZzQ0S1M1TDJjNDRHajQ0R21WVzVwZEhuamdwTGxyYWJqZ2JidnZJRWdJRnNnNDRLXzQ0T3o0NEt2NDRLbTQ0S3A0NE84NDRLNjU3ZW9JQzBnTlM0Z1NGRGpnYTducnFIbmtJYmpnYWpqZ3Juamc0YmpnN3pqZ3JqamdhN2t2WnpqZ29yb3ZyempnYjhnWFEmdHh0LWNvbG9yPSUyMzMzMyZ0eHQtZm9udD1IaXJhZ2lubyUyMFNhbnMlMjBXNiZ0eHQtc2l6ZT01NCZ0eHQtY2xpcD1lbGxpcHNpcyZ0eHQtYWxpZ249Y2VudGVyJTJDbWlkZGxlJnM9OTQzYzgxNDM2YjhlMGJjNWRjYjY2NTU5MDVkYmU2MDA&amp;mark-align=center%2Cmiddle&amp;blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RRmw2VW05cFpBJnR4dC1jb2xvcj0lMjMzMzMmdHh0LWZvbnQ9SGlyYWdpbm8lMjBTYW5zJTIwVzYmdHh0LXNpemU9NDUmdHh0LWFsaWduPXJpZ2h0JTJDYm90dG9tJnM9NTBjMTUyNzQzNWE1MWIwYzgzNjA4YTZkYTMxOGE2ZTk&amp;blend-align=center%2Cmiddle&amp;blend-mode=normal&amp;s=9938906618e03302c358963c84899b68"><meta property="og:description" content="ミニゲームを作ってUnityを学ぶ！[タンクウォーズ編]


第5回目: HPの管理とステージの作り込み


これまではプレイヤーの操作する戦車についてのみ機能を実装してきましたが、ここからようやく対戦相手となる戦車オブジェクトを追加..."><meta content="https://qiita.com/YzRoid/items/b2544cab6463d82506c5" property="og:url" /><meta content="Qiita" property="og:site_name" /><meta content="564524038" property="fb:admins" /><meta content="C#,game,Unity,Unity入門" name="keywords" /><script>!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window, document,'script',
'https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '668972150489891');
fbq('track', 'PageView');</script><style data-emotion-css="17jxvjw 11t2ec1 1dvr2p8 18lkoru 1g4cku8 1iupg5d ijvq0v 15cocm3 12rp90f 115f4t 1b8uj5v 79elbk 16hhh7b fcbn8c 1gj7nt 154zy0m yikrym 1jqivyb 1ode1bp le4d8r 1hbd3g7 1nzh4zz 38fzdi helsa7 8qb8m4 2imjyh he5w1s 70qvj9 3ojehk 100alwu 1dtnjt5 10ougpm 1ay9vb9 m19uds cgzq40 1wa99t2 1l3zk9f 4czcte 1yzj1fm 1uv1qiv 109dbrr 5jpx49 mnxgyc 1vlpknv fsjkhv 1b17vb0 7i7f4d"}>.css-17jxvjw{display:grid;display:-ms-grid;grid-template-columns:80px minmax(0,1fr) 300px;-ms-grid-columns:80px minmax(0,1fr) 300px;grid-template-rows:minmax(270px,auto) 1fr;-ms-grid-rows:minmax(270px,auto) 1fr;max-width:1280px;margin-right:auto;margin-left:auto;padding-top:24px;padding-right:24px;padding-left:24px;}@media (max-width:1200px){.css-17jxvjw{padding-bottom:0;padding-left:0;padding-right:0;}}@media (max-width:992px){.css-17jxvjw{grid-template-columns:80px 452px 300px;-ms-grid-columns:80px 452px 300px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}}@media (max-width:770px){.css-17jxvjw{display:block;}}@media (max-width:480px){.css-17jxvjw{padding-top:0;}}.css-11t2ec1{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;z-index:5;position:-webkit-sticky;position:sticky;top:calc(56px + 24px + 16px + 32px - 16px);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:16px;width:80px;}.css-11t2ec1:after{content:'';display:table;}.css-11t2ec1:before{content:'';display:table;}@media (max-width:770px){.css-11t2ec1{display:none;}}.css-1dvr2p8{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-18lkoru{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;background-color:#FFFFFF;}.css-1g4cku8{display:inline-block;vertical-align:middle;height:20px;width:20px;fill:#55C500;}.css-1iupg5d{color:#55C500;cursor:pointer;font-size:14px;font-weight:bold;}.css-ijvq0v{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-15cocm3{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#FFFFFF;border:2px solid #6E6F70;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:2px 0px 0px;width:40px;}.css-12rp90f{display:inline-block;vertical-align:bottom;height:17.77777777777778px;width:16px;fill:#6E6F70;}.css-115f4t{color:#6E6F70;font-size:14px;font-weight:bold;}.css-1b8uj5v{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;margin-bottom:16px;padding:0;}.css-79elbk{position:relative;}.css-16hhh7b{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;padding:0;}.css-fcbn8c{display:none;bottom:initial;left:initial;right:initial;top:initial;left:100%;top:calc(-8px - (14px * 1.8) - 16px - 4px);}.css-1gj7nt{color:rgba(0,0,0,0.6);font-size:14px;font-weight:bold;line-height:1.8;padding:8px 16px;}.css-154zy0m{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.87);cursor:pointer;font-size:16px;font-weight:normal;line-height:1.8;padding:4px 16px;}.css-154zy0m:hover{-webkit-text-decoration:none;text-decoration:none;background-color:#F2F2F2;}.css-yikrym{width:20px;}.css-1jqivyb{color:rgba(0,0,0,0.6);font-size:13px;}.css-1ode1bp{background-color:rgba(0,0,0,0.12);height:1px;width:100%;margin:8px 0;}.css-le4d8r{display:inline-block;vertical-align:middle;height:13px;width:13px;fill:rgba(0,0,0,0.6);}.css-1hbd3g7{height:250px;}.css-1nzh4zz{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:16px 32px;background-color:#FBE69E;color:rgba(0,0,0,0.87);line-height:1.5;font-weight:600;}@media (max-width:770px){.css-1nzh4zz{padding:16px;}}.css-38fzdi{color:#CA832A;margin-right:4px;}.css-helsa7{background-color:#FFFFFF;padding:32px;margin-bottom:24px;}@media (max-width:992px){.css-helsa7{margin:0 auto 40px;}}@media (max-width:480px){.css-helsa7{margin:0 0 40px;padding:32px 16px;}}.css-8qb8m4{margin-bottom:48px;}.css-2imjyh{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-he5w1s{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;width:100%;}@media (max-width:770px){.css-he5w1s{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}}.css-70qvj9{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.css-3ojehk{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;margin-right:4px;}.css-100alwu{display:inline-block;border-radius:50%;line-height:1;overflow:hidden;vertical-align:middle;}.css-1dtnjt5{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-10ougpm{color:rgba(0,0,0,0.87);font-size:14px;font-weight:600;line-height:1.8;margin-right:4px;text-wrap:break-word;word-break:break-all;}.css-1ay9vb9{margin-right:16px;}.css-m19uds{color:rgba(0,0,0,0.6);font-size:14px;line-height:1.8;}.css-cgzq40{color:rgba(0,0,0,0.87);font-size:32px;font-weight:bold;line-height:1.4;margin-top:8px;text-wrap:break-word;word-break:break-all;}.css-1wa99t2{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.6);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:8px;}.css-1l3zk9f{color:rgba(0,0,0,0.6);font-size:20px;margin-right:8px;}.css-4czcte{margin-right:4px;color:inherit;font-size:14px;line-height:1.8;}.css-4czcte:not(:last-child)::after{content:',';margin-right:4px;}.css-1yzj1fm{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:32px;}.css-1uv1qiv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-size:20px;height:32px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin-right:16px;outline:none;padding:0;width:32px;}.css-109dbrr{background-color:#F9F9F9;border-top:1px solid rgba(0,0,0,0.12);bottom:0;box-shadow:0px 1px 4px rgba(0,0,0,0.14);display:none;height:calc(env(safe-area-inset-bottom,0px) + 56px);-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding-bottom:env(safe-area-inset-bottom);position:-webkit-sticky;position:sticky;width:100%;z-index:2000;}@media (max-width:770px){.css-109dbrr{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}.css-5jpx49{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:space-evenly;-webkit-justify-content:space-evenly;-ms-flex-pack:space-evenly;justify-content:space-evenly;width:100%;}.css-mnxgyc{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1vlpknv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;margin-right:4px;background-color:#FFFFFF;}.css-fsjkhv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1b17vb0{color:#6E6F70;font-size:14px;font-weight:bold;margin-left:4px;}.css-7i7f4d{display:none;bottom:initial;left:initial;right:initial;top:initial;bottom:32px;right:0;}</style></head><body><div class="allWrapper"><div><div id="GlobalHeader-react-component-74a4b07c-ee3e-4a8b-990a-50396ebe93e7"><div class="st-Header"><div class="st-Header_container"><div class="st-Header_start"><a href="/" class="st-Header_logo"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 426.57 130"><circle cx="167.08" cy="21.4" r="12.28"></circle><path d="M250.81 29.66h23.48v18.9h-23.48z"></path><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z"></path><circle cx="216.33" cy="21.4" r="12.28"></circle></svg></a><div class="st-Header_communitySelector" tabindex="0"><span class="fa fa-caret-down"></span></div><div class="st-Header_dropdown"><div class="st-Header_dropdownHeading">Qiita Teams that are logged in</div><div class="st-Header_dropdownItemNote">You are not logged in to any team</div><hr class="st-Header_dropdownDivider st-Header_dropdownDivider-shrink"/><a href="https://teams-center.qiita.com/find_team" class="st-Header_dropdownItem"><span class="fa fa-fw fa-sign-in st-Header_dropdownItemIcon"></span><div>Log in to Qiita Team</div></a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Community</div><a href="/organizations" class="st-Header_dropdownItem">Organization</a><a href="/official-events/open" class="st-Header_dropdownItem">Event</a><a href="/advent-calendar" class="st-Header_dropdownItem">Advent Calendar</a><a href="https://qiitadon.com/" class="st-Header_dropdownItem" target="_blank">Qiitadon (β)</a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Service</div><a href="https://jobs.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Jobs</a><a href="https://zine.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Zine</a><a href="https://blog.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Blog</a></div><form class="st-Header_search" action="/search" method="get"><span class="fa fa-search st-Header_searchIcon"></span><input type="search" class="st-Header_searchInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form><form class="st-Header_searchModal" action="/search" method="get"><input type="text" class="st-Header_searchModalInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form></div><div class="st-Header_end"><div class="st-Header_searchButton"><span class="fa fa-search"></span></div><a class="st-Header_signupButton" href="/signup?redirect_to=%2FYzRoid%2Fitems%2Fb2544cab6463d82506c5">Signup</a><a class="st-Header_loginLink" href="/login?redirect_to=%2FYzRoid%2Fitems%2Fb2544cab6463d82506c5">Login</a></div><div class="st-Header_overlay"></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="GlobalHeader" data-dom-id="GlobalHeader-react-component-74a4b07c-ee3e-4a8b-990a-50396ebe93e7">{"unreadNotificationsCount":null,"realms":[{"humanName":"Qiita","isCurrentRealm":true,"isQiita":true,"isQiitaTeam":false,"loggedInUser":null,"teamId":null,"url":"https://qiita.com/"}],"teamFindUrl":"https://teams-center.qiita.com/find_team","isTeamOnlyUser":null,"currentUser":null}</script>
      
</div><div class="st-HeaderAlert st-HeaderAlert-warning"><div class="st-HeaderAlert_body"></div></div><script type="application/ld+json">{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"/","name":"Qiita"}},{"@type":"ListItem","position":2,"item":{"@id":"/tags/csharp","name":"C#"}}]}</script><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","datePublished":"2018-03-11T21:16:24.000+09:00","dateModified":"2018-03-11T21:22:30.000+09:00","headline":"ミニゲームを作ってUnityを学ぶ！  [ タンクウォーズ編 - 5. HPの管理とステージの作り込み ]","image":"https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0\u0026w=1200\u0026mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND00NE9mNDRPTDQ0S3k0NE84NDRPZzQ0S1M1TDJjNDRHajQ0R21WVzVwZEhuamdwTGxyYWJqZ2JidnZJRWdJRnNnNDRLXzQ0T3o0NEt2NDRLbTQ0S3A0NE84NDRLNjU3ZW9JQzBnTlM0Z1NGRGpnYTducnFIbmtJYmpnYWpqZ3Juamc0YmpnN3pqZ3JqamdhN2t2WnpqZ29yb3ZyempnYjhnWFEmdHh0LWNvbG9yPSUyMzMzMyZ0eHQtZm9udD1IaXJhZ2lubyUyMFNhbnMlMjBXNiZ0eHQtc2l6ZT01NCZ0eHQtY2xpcD1lbGxpcHNpcyZ0eHQtYWxpZ249Y2VudGVyJTJDbWlkZGxlJnM9OTQzYzgxNDM2YjhlMGJjNWRjYjY2NTU5MDVkYmU2MDA\u0026mark-align=center%2Cmiddle\u0026blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RRmw2VW05cFpBJnR4dC1jb2xvcj0lMjMzMzMmdHh0LWZvbnQ9SGlyYWdpbm8lMjBTYW5zJTIwVzYmdHh0LXNpemU9NDUmdHh0LWFsaWduPXJpZ2h0JTJDYm90dG9tJnM9NTBjMTUyNzQzNWE1MWIwYzgzNjA4YTZkYTMxOGE2ZTk\u0026blend-align=center%2Cmiddle\u0026blend-mode=normal\u0026s=9938906618e03302c358963c84899b68","mainEntityOfPage":"https://qiita.com/YzRoid/items/b2544cab6463d82506c5","author":{"@type":"Person","address":"","email":null,"identifier":"YzRoid","name":"YzRoid","image":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F239877%2Fprofile-images%2F1519195494?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=2fcbd90d54d7bc05cc2fbb8b49f9a2ea","url":"https://qiita.com/YzRoid","description":"JavaでAndroid用アプリ作ったりしてます。\r\nただいまUnity勉強中！","memberOf":[]},"publisher":{"@type":"Organization","name":"Qiita","logo":{"@type":"ImageObject","url":"//cdn.qiita.com/assets/public/qiita-logo-c39ded593afa388e2e1ba435b110554e.png"}}}</script><style type="text/css">.wb-CampaignLink {
  background-color: #333333;
  width: 100%;
}

.wb-CampaignLink_container {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  max-width: 1100px;
  margin: 0 auto;
  font-size: 13px;
  padding: 0.8em;
}
.wb-CampaignLink_container > a {
  color: #fff;
}

.wb-CampaignLink_container > a:hover {
  text-decoration: underline;
}</style><div class="wb-CampaignLink"><div class="wb-CampaignLink_container"><a target="_blank" id="header_text_message_1" href="https://increments.connpass.com/event/211948/">【9/9(木)開催】Qiitaの過去と未来についてお話しします！Qiita エンジニアフェスタ 2021 Online Meetup</a><a target="_blank" id="header_text_message_2" href="https://increments.connpass.com/event/211948/">詳しくはこちら</a></div><script>td.trackEvent(
  'front_events',
  {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"YzRoid","type":"items","id":"b2544cab6463d82506c5"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Show","data":{"message":"【9/9(木)開催】Qiitaの過去と未来についてお話しします！Qiita エンジニアフェスタ 2021 Online Meetup","url":"https://increments.connpass.com/event/211948/","sub_message":"詳しくはこちら"}}
)</script><script>document.getElementById('header_text_message_1').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"YzRoid","type":"items","id":"b2544cab6463d82506c5"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":2,"pos_id":"header_text_message_1","message":"【9/9(木)開催】Qiitaの過去と未来についてお話しします！Qiita エンジニアフェスタ 2021 Online Meetup","url":"https://increments.connpass.com/event/211948/","sub_message":"詳しくはこちら"}}
  )
})</script><script>document.getElementById('header_text_message_2').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"YzRoid","type":"items","id":"b2544cab6463d82506c5"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":2,"pos_id":"header_text_message_2","message":"【9/9(木)開催】Qiitaの過去と未来についてお話しします！Qiita エンジニアフェスタ 2021 Online Meetup","url":"https://increments.connpass.com/event/211948/","sub_message":"詳しくはこちら"}}
  )
})</script></div><script type="application/json" id="js-react-on-rails-context">{"railsEnv":"production","inMailer":false,"i18nLocale":"en","i18nDefaultLocale":"en","href":"https://qiita.com/YzRoid/items/b2544cab6463d82506c5","location":"/YzRoid/items/b2544cab6463d82506c5","scheme":"https","host":"qiita.com","port":null,"pathname":"/YzRoid/items/b2544cab6463d82506c5","search":null,"httpAcceptLanguage":null,"actionPath":"public/items#show","settings":{"analyticsTrackingId":"UA-24675221-12","assetsMap":{},"csrfToken":"pwjMXKlH8MQ6cN8ilaSQZz/cwLm7llW0wpd2vvcj8x/W0VUK/OCMjUCj1Xem0XMNHL8ljytAJmXK3odrQMOsXA==","locale":"en"},"currentUser":null,"isLoggedIn":false,"recaptchaSiteKey":"6LfNkiQTAAAAAM3UGnSquBy2akTITGNMO_QDxMw6","serverSide":false}</script>
<div id="PersonalArticlePage-react-component-9645819b-47d5-4eda-aac1-6db531220611"><div class="p-items_wrapper"><div class=" css-17jxvjw"><div class="css-11t2ec1"><div class="css-1dvr2p8"><button class=" css-18lkoru"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/YzRoid/items/b2544cab6463d82506c5/likers" class="css-1iupg5d">0</a></div><div class="css-ijvq0v"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-115f4t">2</span></div><div class="css-1b8uj5v"><span class="fa fa-twitter"></span></div><div class="css-1b8uj5v"><span class="fa fa-facebook"></span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-fcbn8c"><div class="css-1gj7nt">Improve article</div><a href="/drafts/b2544cab6463d82506c5/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/YzRoid/items/b2544cab6463d82506c5/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/YzRoid/items/b2544cab6463d82506c5/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/YzRoid/items/b2544cab6463d82506c5/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/YzRoid/items/b2544cab6463d82506c5.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div><div class="p-items_options"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_toc"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_main"><div class="css-1nzh4zz"><span class="fa fa-fw fa-warning css-38fzdi"></span><p>More than 3 years have passed since last update.</p></div><div class="css-helsa7"><div class="css-8qb8m4"><div class="css-2imjyh"><div class="css-he5w1s"><div class="css-70qvj9"><div class="css-3ojehk"><a href="/YzRoid"><img class="css-100alwu eyfquo10" src="https://qiita-image-store.s3.amazonaws.com/0/239877/profile-images/1519195494" width="24" height="24" loading="lazy"/></a></div><div class="css-1dtnjt5"><a href="/YzRoid" class="css-10ougpm">@<!-- -->YzRoid</a><div class="css-1ay9vb9"><span><meta content="2018-03-11T12:16:24Z"/><time dateTime="2018-03-11T12:22:30Z" class="css-m19uds">updated at 2018-03-11</time></span></div></div></div></div></div><h1 class="css-cgzq40">ミニゲームを作ってUnityを学ぶ！  [ タンクウォーズ編 - 5. HPの管理とステージの作り込み ]</h1><div class="css-1wa99t2"><span class="fa fa-tags mr-1of2 css-1l3zk9f" aria-hidden="true"></span><a href="/tags/csharp" class="css-4czcte">C#</a><a href="/tags/game" class="css-4czcte">game</a><a href="/tags/unity" class="css-4czcte">Unity</a><a href="/tags/unity%e5%85%a5%e9%96%80" class="css-4czcte">Unity入門</a></div></div><section class="it-MdContent"><div id="personal-public-article-body"><div><p><a href="https://qiita.com/YzRoid/items/544426ceffd4283d6977" id="reference-0e047528af0e61a24260">ミニゲームを作ってUnityを学ぶ！[タンクウォーズ編]</a></p>

<h3>
<span id="第5回目-hpの管理とステージの作り込み" class="fragment"></span><a href="#%E7%AC%AC5%E5%9B%9E%E7%9B%AE-hp%E3%81%AE%E7%AE%A1%E7%90%86%E3%81%A8%E3%82%B9%E3%83%86%E3%83%BC%E3%82%B8%E3%81%AE%E4%BD%9C%E3%82%8A%E8%BE%BC%E3%81%BF"><i class="fa fa-link"></i></a><strong>第5回目: HPの管理とステージの作り込み</strong>
</h3>

<p>これまではプレイヤーの操作する戦車についてのみ機能を実装してきましたが、ここからようやく対戦相手となる戦車オブジェクトを追加していきます。</p>

<h1>
<span id="対戦相手の追加" class="fragment"></span><a href="#%E5%AF%BE%E6%88%A6%E7%9B%B8%E6%89%8B%E3%81%AE%E8%BF%BD%E5%8A%A0"><i class="fa fa-link"></i></a>対戦相手の追加</h1>

<ul>
<li>PlayerTankのプレハブをシーンの適当な場所に配置</li>
<li>配置されたオブジェクトの名前を「EnemyTank」に変更</li>
<li>EnemyTankのプレハブを書き出し</li>
</ul>

<p>以上で敵キャラクターが完成しました。<br>
こちらの戦車については<strong>プレイヤーが操作できないように、mIsPlayerのチェックを外しておきます。</strong></p>

<p><a href="https://camo.qiitausercontent.com/39fcceb311d8419539bc5048846d9f1ded75e71d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3233393837372f31303837346162622d633237662d333161382d613539322d3833323866303630356361642e6a706567" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F239877%2F10874abb-c27f-31a8-a592-8328f0605cad.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=79ae14bdb714a75f47a0c2094cb9fab2" alt="tankwars_ss_5_1.jpg" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/239877/10874abb-c27f-31a8-a592-8328f0605cad.jpeg" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F239877%2F10874abb-c27f-31a8-a592-8328f0605cad.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=dc1837939d53180a19bfa98ca1642611 1x" loading="lazy"></a></p>

<h1>
<span id="戦場の作成" class="fragment"></span><a href="#%E6%88%A6%E5%A0%B4%E3%81%AE%E4%BD%9C%E6%88%90"><i class="fa fa-link"></i></a>戦場の作成</h1>

<p>続いて、今はまだ地面だけの戦場をゲームシステムに合わせて作りこみます。<br>
最終的には以下のようにプレイヤーと相手が左右に分かれて弾を撃ちあう形になります。</p>

<p><a href="https://camo.qiitausercontent.com/befd9c6f0fe3e4112d37ca4e8ec0e1ff911cf546/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3233393837372f63313063656333342d323962382d393834362d616265322d3539633161373863643365362e6a706567" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F239877%2Fc10cec34-29b8-9846-abe2-59c1a78cd3e6.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=6be0cc6ee80dbd81dfad35766825d419" alt="tankwars_ss_5_2.jpg" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/239877/c10cec34-29b8-9846-abe2-59c1a78cd3e6.jpeg" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F239877%2Fc10cec34-29b8-9846-abe2-59c1a78cd3e6.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=2318d8294c50e4b97372ad2c1043dd8e 1x" loading="lazy"></a></p>

<h3>
<span id="バリケードテープを地面に貼る" class="fragment"></span><a href="#%E3%83%90%E3%83%AA%E3%82%B1%E3%83%BC%E3%83%89%E3%83%86%E3%83%BC%E3%83%97%E3%82%92%E5%9C%B0%E9%9D%A2%E3%81%AB%E8%B2%BC%E3%82%8B"><i class="fa fa-link"></i></a><strong>バリケードテープを地面に貼る</strong>
</h3>

<p><a href="https://camo.qiitausercontent.com/85c91af454e56f5e9c3bb0ef70810621ebc0440e/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3233393837372f32616632616535632d366132332d346637362d616662632d3037336235343561366335632e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F239877%2F2af2ae5c-6a23-4f76-afbc-073b545a6c5c.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=aba1f7ee810b1123931e5a3f3a5899d0" alt="Barricade.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/239877/2af2ae5c-6a23-4f76-afbc-073b545a6c5c.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F239877%2F2af2ae5c-6a23-4f76-afbc-073b545a6c5c.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=c2ef93499ec5a902c2c78406c3e352d6 1x" loading="lazy"></a></p>

<ol>
<li>上の画像をダウンロード後「BarricadeTape」に名前を変更してプロジェクトにインポート</li>
<li>新しいマテリアル「Barricade」を作成してAlbedoにインポートしたBarricadeTapeを設定</li>
<li>シーンに2つのPlane「BarricadeLeft」と「BarricadeRight」を作成して、それぞれに「Barricade」マテリアルをアタッチ</li>
<li>BarricadeLeftとBarricadeRightのTransformを下記のように設定</li>
</ol>

<table>
<thead>
<tr>
<th style="text-align: center"></th>
<th style="text-align: center">Position(x, y, z)</th>
<th style="text-align: center">Rotation</th>
<th style="text-align: center">Scale</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center"><strong>BarricadeLeft</strong></td>
<td style="text-align: center">(-17, 0.02, 0)</td>
<td style="text-align: center">(0, 90, 0)</td>
<td style="text-align: center">(5, 1, 0.2)</td>
</tr>
<tr>
<td style="text-align: center"><strong>BarricadeRight</strong></td>
<td style="text-align: center">(17, 0.02, 0)</td>
<td style="text-align: center">(0, 90, 0)</td>
<td style="text-align: center">(5, 1, 0.2)</td>
</tr>
</tbody>
</table>

<h3>
<span id="戦車の位置を変更" class="fragment"></span><a href="#%E6%88%A6%E8%BB%8A%E3%81%AE%E4%BD%8D%E7%BD%AE%E3%82%92%E5%A4%89%E6%9B%B4"><i class="fa fa-link"></i></a><strong>戦車の位置を変更</strong>
</h3>

<p>PlayerTankとEnemyTankのPositionを下記のように設定</p>

<table>
<thead>
<tr>
<th></th>
<th>Position(x, y, z)</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>PlayerTank</strong></td>
<td>(-20, 1.2, 0)</td>
</tr>
<tr>
<td><strong>EnemyTank</strong></td>
<td>(20, 1.2, 0)</td>
</tr>
</tbody>
</table>

<p>これで先ほどの画像と同じような見た目になりました。</p>

<h3>
<span id="見えないコライダーで戦車の移動を制限する" class="fragment"></span><a href="#%E8%A6%8B%E3%81%88%E3%81%AA%E3%81%84%E3%82%B3%E3%83%A9%E3%82%A4%E3%83%80%E3%83%BC%E3%81%A7%E6%88%A6%E8%BB%8A%E3%81%AE%E7%A7%BB%E5%8B%95%E3%82%92%E5%88%B6%E9%99%90%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a><strong>見えないコライダーで戦車の移動を制限する</strong>
</h3>

<p>このままだと戦車が上下移動をした際に画面外へ出ていくことが可能で、最終的にはGroundを超えて奈落に落ちていってしまいます。<br>
これを防止するため、<strong>先に進んでほしくない位置にコライダーの壁を作ることで戦車の移動を制限</strong>します。</p>

<ol>
<li>Cubeを2つ作成し、それぞれ名前を「BarricadeTop」「BarricadeBottom」に変更</li>
<li>Mesh Rendererのチェックを外して透明状態にする</li>
<li>Transformステータスを下記のように設定</li>
</ol>

<table>
<thead>
<tr>
<th></th>
<th>Position(x, y, z)</th>
<th>Rotation</th>
<th>Scale</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>BarricadeTop</strong></td>
<td>(0, 0, 18)</td>
<td>(0, 0, 0)</td>
<td>(50, 1, 1)</td>
</tr>
<tr>
<td><strong>BarricadeBottom</strong></td>
<td>(0, 0, -17.6)</td>
<td>(0, 0, 0)</td>
<td>(50, 1, 1)</td>
</tr>
</tbody>
</table>

<p><a href="https://camo.qiitausercontent.com/a4697107c3c92d51bb8ea46f0f7cc323db9c5e58/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3233393837372f33643632653438352d633131322d316132312d636262392d3734353863356436306438622e6a706567" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F239877%2F3d62e485-c112-1a21-cbb9-7458c5d60d8b.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=7e0fcfdca7f1b627dbe148d3b23a5d41" alt="tankwars_ss_5_3.jpg" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/239877/3d62e485-c112-1a21-cbb9-7458c5d60d8b.jpeg" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F239877%2F3d62e485-c112-1a21-cbb9-7458c5d60d8b.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=a0460d6919048c9171767780a2e169d0 1x" loading="lazy"></a></p>

<p>これで上下とも、透明な壁に当たった時点で戦車の移動が制限されます。<br>
<font color="Blue">（厳密には制限しきれずに抜けてしまったりするのですが、今後の作り込みによって改善されますので今は気にせずに進めてください）</font></p>

<h3>
<span id="戦場オブジェクトをまとめる" class="fragment"></span><a href="#%E6%88%A6%E5%A0%B4%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%82%92%E3%81%BE%E3%81%A8%E3%82%81%E3%82%8B"><i class="fa fa-link"></i></a><strong>戦場オブジェクトをまとめる</strong>
</h3>

<p>ここでHierarchyウインドウを一度整理します。</p>

<ol>
<li>空オブジェクト「Area」をゼロポジションに作成</li>
<li>今までに作成した「Ground」「DestroyArea」「4種のBarricade」を「Area」の子に設定</li>
</ol>

<p><a href="https://camo.qiitausercontent.com/34ac39ba37167bff91a00542b29a010a2a0ce683/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3233393837372f38626138663937612d383432612d383533312d633439322d3534633435326464653639382e6a706567" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F239877%2F8ba8f97a-842a-8531-c492-54c452dde698.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=66d80e0db15a9fc355c23397b537b180" alt="tankwars_ss_5_4.jpg" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/239877/8ba8f97a-842a-8531-c492-54c452dde698.jpeg" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F239877%2F8ba8f97a-842a-8531-c492-54c452dde698.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=aa6918ba6dee2ccc2f7957f328c913cc 1x" loading="lazy"></a></p>

<h1>
<span id="hpの概念を実装する" class="fragment"></span><a href="#hp%E3%81%AE%E6%A6%82%E5%BF%B5%E3%82%92%E5%AE%9F%E8%A3%85%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>HPの概念を実装する</h1>

<p>戦場と対戦相手が用意できましたので、ここからはスクリプトでHPの概念を実装していきます。</p>

<ul>
<li>TankHealthという名前でスクリプトを作成</li>
<li>PlayerTankとEnemyTankにTankHealthをアタッチ</li>
</ul>

<div class="code-frame" data-lang="cs">
<div class="code-lang"><span class="bold">TankHealth.cs</span></div>
<div class="highlight"><pre class="with-code"><code>
<span class="k">using</span> <span class="nn">System.Collections</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UnityEngine</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UnityEngine.UI</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">class</span> <span class="nc">TankHealth</span> <span class="p">:</span> <span class="n">MonoBehaviour</span>
    <span class="p">{</span>

        <span class="p">[</span><span class="n">SerializeField</span><span class="p">]</span>
        <span class="p">[</span><span class="nf">Tooltip</span><span class="p">(</span><span class="s">"HPの初期値"</span><span class="p">)]</span>
        <span class="k">private</span> <span class="kt">int</span> <span class="n">mHp</span> <span class="p">=</span> <span class="m">100</span><span class="p">;</span>
        <span class="k">private</span> <span class="kt">int</span> <span class="n">mDamage</span><span class="p">;</span>

        <span class="c1">/// &lt;summary&gt;</span>
        <span class="c1">/// 戦車に被弾ダメージを与える</span>
        <span class="c1">/// &lt;/summary&gt;</span>
        <span class="c1">/// &lt;param name="damage"&gt;&lt;/param&gt;</span>
        <span class="c1">/// &lt;returns&gt;HPが0になった場合はtrueを返す&lt;/returns&gt;</span>
        <span class="k">public</span> <span class="kt">bool</span> <span class="nf">AddDamage</span><span class="p">(</span><span class="kt">int</span> <span class="n">damage</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">mDamage</span> <span class="p">+=</span> <span class="n">damage</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">mDamage</span> <span class="p">&gt;</span> <span class="n">mHp</span><span class="p">)</span> <span class="n">mDamage</span> <span class="p">=</span> <span class="n">mHp</span><span class="p">;</span>
            <span class="nf">CalHealthBarRate</span><span class="p">();</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">mDamage</span> <span class="p">&gt;=</span> <span class="n">mHp</span><span class="p">)</span> <span class="k">return</span> <span class="k">true</span><span class="p">;</span>
            <span class="k">return</span> <span class="k">false</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">private</span> <span class="k">void</span> <span class="nf">CalHealthBarRate</span><span class="p">()</span>
        <span class="p">{</span>

        <span class="p">}</span>


    <span class="p">}</span>

</code></pre></div>
</div>

<p>最大時のHPと受けたダメージという2つのフィールドを持ったシンプルなクラスです。<br>
AddDamage()は弾が当たったときに呼び出されるメソッドで、ダメージを受けた後HPが残っているかどうかの結果を返します。</p>

<p><strong>CalHealthBarRate()については後述しますので今は気にしないでください。</strong></p>

<h1>
<span id="戦車の当たり判定と弾の命中処理" class="fragment"></span><a href="#%E6%88%A6%E8%BB%8A%E3%81%AE%E5%BD%93%E3%81%9F%E3%82%8A%E5%88%A4%E5%AE%9A%E3%81%A8%E5%BC%BE%E3%81%AE%E5%91%BD%E4%B8%AD%E5%87%A6%E7%90%86"><i class="fa fa-link"></i></a>戦車の当たり判定と弾の命中処理</h1>

<p>これで戦車にHPが設定できましたので、次は当たり判定と弾が当たったときの処理を作っていきます。</p>

<h3>
<span id="box-colliderで当たり判定を設定" class="fragment"></span><a href="#box-collider%E3%81%A7%E5%BD%93%E3%81%9F%E3%82%8A%E5%88%A4%E5%AE%9A%E3%82%92%E8%A8%AD%E5%AE%9A"><i class="fa fa-link"></i></a><strong>Box Colliderで当たり判定を設定</strong>
</h3>

<p>今回は当たり判定をよりシンプルにするため、戦車オブジェクトに最初からアタッチされている2つのMesh Colliderを外して代わりにBox Colliderをアタッチします。</p>

<ul>
<li>PlayerTank, EnemyTankともにアタッチされている2つのMesh Colliderを外す</li>
<li>両戦車にBoxColliderをアタッチ</li>
<li>数値を下記のように設定</li>
</ul>

<table>
<thead>
<tr>
<th>Center(x, y, z)</th>
<th>Size</th>
</tr>
</thead>
<tbody>
<tr>
<td>(0, 0.4, -0.08)</td>
<td>(2.6, 3, 4.8)</td>
</tr>
</tbody>
</table>

<ul>
<li>両戦車のタグを「Tank」に設定</li>
</ul>

<h3>
<span id="bulletmodelに命中処理を追加" class="fragment"></span><a href="#bulletmodel%E3%81%AB%E5%91%BD%E4%B8%AD%E5%87%A6%E7%90%86%E3%82%92%E8%BF%BD%E5%8A%A0"><i class="fa fa-link"></i></a><strong>BulletModelに命中処理を追加</strong>
</h3>

<div class="code-frame" data-lang="cs">
<div class="code-lang"><span class="bold">BulletModel.cs</span></div>
<div class="highlight"><pre class="with-code"><code>
        <span class="k">private</span> <span class="k">readonly</span> <span class="kt">string</span> <span class="n">TAG_TANK</span> <span class="p">=</span> <span class="s">"Tank"</span><span class="p">;</span>

        <span class="p">[</span><span class="n">SerializeField</span><span class="p">]</span>
        <span class="p">[</span><span class="nf">Tooltip</span><span class="p">(</span><span class="s">"爆発エフェクト小"</span><span class="p">)]</span>
<span class="m">1</span><span class="p">:</span>      <span class="k">private</span> <span class="n">GameObject</span> <span class="n">mExplosionSmallPrefab</span><span class="p">;</span>
        <span class="p">[</span><span class="n">SerializeField</span><span class="p">]</span>
        <span class="p">[</span><span class="nf">Tooltip</span><span class="p">(</span><span class="s">"爆発エフェクト大"</span><span class="p">)]</span>
<span class="m">2</span><span class="p">:</span>      <span class="k">private</span> <span class="n">GameObject</span> <span class="n">mExplosionLargePrefab</span><span class="p">;</span>

        <span class="c1">/// &lt;summary&gt;</span>
        <span class="c1">/// 弾が戦車に当たった際の処理</span>
        <span class="c1">/// &lt;/summary&gt;</span>
        <span class="c1">/// &lt;param name="collider"&gt;&lt;/param&gt;</span>
        <span class="k">void</span> <span class="nf">OnTriggerEnter</span><span class="p">(</span><span class="n">Collider</span> <span class="n">collider</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">collider</span><span class="p">.</span><span class="n">tag</span> <span class="p">==</span> <span class="n">TAG_TANK</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="c1">// 被弾した戦車にダメージを与える</span>
                <span class="kt">bool</span> <span class="n">IsDead</span> <span class="p">=</span> <span class="n">collider</span><span class="p">.</span><span class="n">transform</span><span class="p">.</span><span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">TankHealth</span><span class="p">&gt;().</span><span class="nf">AddDamage</span><span class="p">(</span><span class="n">mAttackValue</span><span class="p">);</span>

                <span class="k">if</span> <span class="p">(!</span><span class="n">IsDead</span><span class="p">)</span>
                <span class="p">{</span>
                    <span class="c1">// おおまかな接触点を取得（OnCollisionEnterとは異なり、triggerでは正確な座標を取得できない：でも着弾点としては十分？）</span>
                    <span class="n">Vector3</span> <span class="n">hitPos</span> <span class="p">=</span> <span class="n">collider</span><span class="p">.</span><span class="nf">ClosestPointOnBounds</span><span class="p">(</span><span class="n">mTrans</span><span class="p">.</span><span class="n">position</span><span class="p">);</span>

                    <span class="c1">// 接触した場所に爆発エフェクトを生成</span>
                    <span class="nf">Instantiate</span><span class="p">(</span><span class="n">mExplosionSmallPrefab</span><span class="p">,</span> <span class="n">hitPos</span><span class="p">,</span> <span class="n">Quaternion</span><span class="p">.</span><span class="n">identity</span><span class="p">);</span>
                <span class="p">}</span>
                <span class="k">else</span>
                <span class="p">{</span>
                    <span class="c1">// HPが無くなった場合は戦車中央のポイントに大きな爆発エフェクトを生成</span>
                    <span class="n">Vector3</span> <span class="n">hitPos</span> <span class="p">=</span> <span class="n">collider</span><span class="p">.</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">;</span>
                    <span class="nf">Instantiate</span><span class="p">(</span><span class="n">mExplosionLargePrefab</span><span class="p">,</span> <span class="n">hitPos</span><span class="p">,</span> <span class="n">Quaternion</span><span class="p">.</span><span class="n">identity</span><span class="p">);</span>

                    <span class="c1">// 対象を死亡状態へ</span>
                    <span class="n">collider</span><span class="p">.</span><span class="n">transform</span><span class="p">.</span><span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">TankModel</span><span class="p">&gt;().</span><span class="n">IsDead</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
                <span class="p">}</span>

                <span class="c1">// この弾を休眠状態へ</span>
                <span class="nf">Sleep</span><span class="p">();</span>
            <span class="p">}</span>
        <span class="p">}</span>

</code></pre></div>
</div>

<p>1: プレハブExplosionSを設定<br>
2: プレハブExplosionLを設定</p>

<p>弾オブジェクトがTankタグの付いたコライダーに接触した場合に、そのコライダーからTankHealthを取得してAddDamage()を実行します。</p>

<p>その結果、戦車のHPが残っている場合は小爆発のエフェクトが発生。<br>
残っていない場合は大きな爆発エフェクトを発生させ、同時にTankModelの死亡フラグを立てています。</p>

<p>そして対象の生死に関わらず、最後に自身（弾）を休眠状態にするという流れです。</p>

<h1>
<span id="hpを可視化する" class="fragment"></span><a href="#hp%E3%82%92%E5%8F%AF%E8%A6%96%E5%8C%96%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>HPを可視化する</h1>

<p>戦車にHPの概念を実装し、そのHPが被弾で減るという処理が完成しました。<br>
最後にこのHPを格闘ゲームのHPバーのような形で画面内に表示します。</p>

<p><a href="https://camo.qiitausercontent.com/0d5721e241396eebc0ee400dd3c4e4f226cb3a0c/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3233393837372f33333832343332652d636563352d623137302d633833352d3134383538366334616461642e6a706567" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F239877%2F3382432e-cec5-b170-c835-148586c4adad.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=7e74e02e09fb2ec645986269bb95bae7" alt="tankwars_ss_5_9.jpg" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/239877/3382432e-cec5-b170-c835-148586c4adad.jpeg" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F239877%2F3382432e-cec5-b170-c835-148586c4adad.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=60f8828807bd7dcb46b870811f359ffd 1x" loading="lazy"></a></p>

<h3>
<span id="spriteの準備" class="fragment"></span><a href="#sprite%E3%81%AE%E6%BA%96%E5%82%99"><i class="fa fa-link"></i></a><strong>Spriteの準備</strong>
</h3>

<ul>
<li>下の画像を「HealthBar」という名前でインポート</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/03ee4c4ffd38eeaf069fe7a928190922cad4e0d6/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3233393837372f33356361363539362d326136332d616565642d396661632d6361306666613931316662642e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F239877%2F35ca6596-2a63-aeed-9fac-ca0ffa911fbd.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=bc5abd8c07b4cf7f99f96af50652957f" alt="AtlasUi.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/239877/35ca6596-2a63-aeed-9fac-ca0ffa911fbd.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F239877%2F35ca6596-2a63-aeed-9fac-ca0ffa911fbd.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=14101aeb1006b93584497387567f83f1 1x" loading="lazy"></a></p>

<ul>
<li>Texture TypeをSprite(2D and UI)に変更</li>
<li>Sprite ModeをMultipleに変更</li>
<li>Sprite Editorを使って以下のように2つのSpriteに切り分ける</li>
</ul>

<table>
<thead>
<tr>
<th style="text-align: center"></th>
<th style="text-align: center">x</th>
<th style="text-align: center">y</th>
<th style="text-align: center">w</th>
<th style="text-align: center">h</th>
<th style="text-align: center">Pivot</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center">HealthBarBack（上）</td>
<td style="text-align: center">0</td>
<td style="text-align: center">224</td>
<td style="text-align: center">256</td>
<td style="text-align: center">32</td>
<td style="text-align: center">Center</td>
</tr>
<tr>
<td style="text-align: center">HealthBarFront（下）</td>
<td style="text-align: center">0</td>
<td style="text-align: center">192</td>
<td style="text-align: center">256</td>
<td style="text-align: center">32</td>
<td style="text-align: center">Center</td>
</tr>
</tbody>
</table>

<p><font color="blue">この際に理屈はわからないのですが<strong>SpriteのFilter Modeを「Point(no filter)」に設定しておかないとシーンに配置されたときに画像の一部分が欠けてしまうようです。</strong></font></p>

<h3>
<span id="hpバーの配置" class="fragment"></span><a href="#hp%E3%83%90%E3%83%BC%E3%81%AE%E9%85%8D%E7%BD%AE"><i class="fa fa-link"></i></a><strong>HPバーの配置</strong>
</h3>

<p>画像が準備できたらシーンにCanvasを作成し、HPバーをちょうど良さそうな位置に配置していきます。</p>

<p><strong>1. ルートパネル</strong></p>

<ol>
<li>Canvas内に「PanelHealthBar」という名前でPanelを作成</li>
<li>Imageのチェックを外してPanel自体は表示されないようにする</li>
<li>Rect Transformを以下のように設定</li>
</ol>

<p><a href="https://camo.qiitausercontent.com/0a38b5326dcbee607854a6a54706012eeddeba62/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3233393837372f39356637383734382d376530382d636133302d353964652d3333643333656336363966312e6a706567" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F239877%2F95f78748-7e08-ca30-59de-33d33ec669f1.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=f06472aadc44bb23ac708c9b515bb119" alt="tankwars_ss_5_5.jpg" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/239877/95f78748-7e08-ca30-59de-33d33ec669f1.jpeg" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F239877%2F95f78748-7e08-ca30-59de-33d33ec669f1.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=58c1c37670c37dfb7503eb7c052180a7 1x" loading="lazy"></a><br>
<br></p>

<p><strong>2. 左側のHPバー</strong></p>

<ol>
<li>PanelHealthBarの子に「HealthBarBackLeft」という名前のImageを作成</li>
<li>HealthBarBackLeftのSource Imageに先ほど切り分けたHealthBarBackを設定</li>
<li>PanelHealthBarの子に「HealthBarFrontLeft」という名前のImageを作成</li>
<li>HealthBarFrontLeftのSource Imageに先ほど切り分けたHealthBarFrontを設定</li>
<li>両ImageのRect Transformを以下のように設定 </li>
</ol>

<p><a href="https://camo.qiitausercontent.com/b4ae456899bea3650eb731c9062614eee34ecdae/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3233393837372f35313432393732332d653464632d623164612d366364652d3632373565376136613061612e6a706567" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F239877%2F51429723-e4dc-b1da-6cde-6275e7a6a0aa.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=7460771c39a3cde1182e7a3ddd379710" alt="tankwars_ss_5_6.jpg" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/239877/51429723-e4dc-b1da-6cde-6275e7a6a0aa.jpeg" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F239877%2F51429723-e4dc-b1da-6cde-6275e7a6a0aa.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=f84508d4ef20748570bf236bed76d31a 1x" loading="lazy"></a></p>

<p>HPバーは2つのSpriteを重ねあわせて表現していますが、<font color="Blue">もしこのときに青色のゲージが手前に表示されていない場合はインスペクタからImageの並び順を変更して青色のゲージが手前に表示されるように修正してください。</font><br>
<br></p>

<p><strong>3. 右側のHPバー</strong><br>
左側のHPバーと同様に右側にもHPバーを表示させます。</p>

<ol>
<li>PanelHealthBarの子に「HealthBarBackRight」という名前のImageを作成</li>
<li>HealthBarBackRightのSource Imageに先ほど切り分けたHealthBarBackを設定</li>
<li>PanelHealthBarの子に「HealthBarFrontRight」という名前のImageを作成</li>
<li>HealthBarFrontRightのSource Imageに先ほど切り分けたHealthBarFrontを設定</li>
<li>両ImageのRect Transformを以下のように設定 </li>
</ol>

<p><a href="https://camo.qiitausercontent.com/c92f1f973e5106d9b4ecdf9dd225475aa0bef017/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3233393837372f30323463323638662d643965322d633430382d353264642d6537653063653063613138632e6a706567" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F239877%2F024c268f-d9e2-c408-52dd-e7e0ce0ca18c.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=71136561daf3974bb08447954efa0c81" alt="tankwars_ss_5_7.jpg" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/239877/024c268f-d9e2-c408-52dd-e7e0ce0ca18c.jpeg" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F239877%2F024c268f-d9e2-c408-52dd-e7e0ce0ca18c.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=ad49cef1385220b81d91370af3557006 1x" loading="lazy"></a></p>

<p><font color="Red">右側のHPバーについては、Rotationの値によって画像を反転させている点に注意してください。</font><br>
<br></p>

<p><strong>4. HPバーを割合表示に対応させる</strong><br>
最後に、両方に配置したHPバーの青いゲージ部分「HealthBarFront~」のImage Typeを変更します。</p>

<table>
<thead>
<tr>
<th style="text-align: center">Image Type</th>
<th style="text-align: center">Fill Method</th>
<th style="text-align: center">Fill Origin</th>
<th style="text-align: center">Fill Amount</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center">Filled</td>
<td style="text-align: center">Horizontal</td>
<td style="text-align: center">Right</td>
<td style="text-align: center">1</td>
</tr>
</tbody>
</table>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>[Image Type = Filled]

この設定にした画像は描画範囲を割合で指定できるようになります。
上記の設定でいえば「水平方向について、Amountの値が0から1に近くなるほど右から左まで」
描画されていきます。

＊右のHPバーは反転されているため左から右に向かって描画されます
</code></pre></div></div>

<p><a href="http://hiyotama.hatenablog.com/entry/2015/06/25/090000" rel="nofollow noopener" target="_blank">参考サイト:ひよこのたまご（uGUIのImageの使い方）</a><br>
<br></p>

<p><strong>5. HPバー上部のテキスト</strong><br>
HPバーの上部に「Player」と「Enemy」のテキストを追加します。</p>

<ul>
<li>HealthBarFrontLeft内にテキストを作成</li>
<li>TextのColorを<font color="Blue">(R=255, G=255, B=255, A=255)</font>に変更</li>
<li>Textの赤枠部分とポジションを以下のように設定</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/523a5e3fbaf633ebd9a2eb4667cdb81df52b3e46/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3233393837372f65626632656265342d383265652d613438372d336265662d6636646331636233333937372e6a706567" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F239877%2Febf2ebe4-82ee-a487-3bef-f6dc1cb33977.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=435b281693c67396250e12abcbff5a73" alt="tankwars_ss_5_10.jpg" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/239877/ebf2ebe4-82ee-a487-3bef-f6dc1cb33977.jpeg" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F239877%2Febf2ebe4-82ee-a487-3bef-f6dc1cb33977.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=b669467c64ad169b4370c928ee77aa46 1x" loading="lazy"></a></p>

<ul>
<li>HealthBarFrontRight内にテキストを作成</li>
<li>TextのColorを<font color="Blue">(R=255, G=255, B=255, A=255)</font>に変更</li>
<li>Textの赤枠部分とポジションを以下のように設定</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/12ff42c18d4290ce7d8cb0318396bc9d1ef4eae0/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3233393837372f64636334396262312d316133622d366238382d626138632d3731333866376261663438352e6a706567" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F239877%2Fdcc49bb1-1a3b-6b88-ba8c-7138f7baf485.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=a58d8502db290b0c510b17d4c9aa7abb" alt="tankwars_ss_5_11.jpg" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/239877/dcc49bb1-1a3b-6b88-ba8c-7138f7baf485.jpeg" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F239877%2Fdcc49bb1-1a3b-6b88-ba8c-7138f7baf485.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=ae3f403515c2cc86fcf2e5a371229dda 1x" loading="lazy"></a></p>

<h3>
<span id="hpバーをスクリプトで制御する" class="fragment"></span><a href="#hp%E3%83%90%E3%83%BC%E3%82%92%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%97%E3%83%88%E3%81%A7%E5%88%B6%E5%BE%A1%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a><strong>HPバーをスクリプトで制御する</strong>
</h3>

<p>出来上がったHPバーが実際の戦車のHPと連動するように、TankHealthクラスとTankModelクラスにコードを追加していきます。</p>

<div class="code-frame" data-lang="cs">
<div class="code-lang"><span class="bold">TankHealth.cs</span></div>
<div class="highlight"><pre class="with-code"><code>
        <span class="k">private</span> <span class="k">enum</span> <span class="n">STATE</span>
        <span class="p">{</span>
            <span class="n">DEFAULT</span> <span class="p">=</span> <span class="m">0</span><span class="p">,</span>
            <span class="n">DAMAGE</span><span class="p">,</span>
            <span class="n">HEAL</span>
        <span class="p">}</span>
        <span class="k">private</span> <span class="n">STATE</span> <span class="n">mState</span> <span class="p">=</span> <span class="n">STATE</span><span class="p">.</span><span class="n">DEFAULT</span><span class="p">;</span>

        <span class="k">private</span> <span class="k">readonly</span> <span class="kt">float</span> <span class="n">UNIT_FILL_AMOUNT</span> <span class="p">=</span> <span class="m">1.0f</span><span class="p">;</span>

        <span class="p">[</span><span class="n">SerializeField</span><span class="p">]</span>
<span class="m">1</span><span class="p">:</span>      <span class="k">private</span> <span class="n">Image</span> <span class="n">mHealthBar</span><span class="p">;</span> <span class="c1">// 描画を制御したい画像（HPバーの青い部分）</span>
        <span class="k">private</span> <span class="kt">float</span> <span class="n">mCurrentFillAmount</span> <span class="p">=</span> <span class="m">1.0f</span><span class="p">;</span> <span class="c1">// 現在描画されているHPバーのfillAmount</span>
        <span class="k">private</span> <span class="kt">float</span> <span class="n">mPreFillAmount</span><span class="p">;</span> <span class="c1">// 増減アクションの終了条件となるHPバーのfillAmount</span>

        <span class="c1">/// &lt;summary&gt;</span>
        <span class="c1">/// 残りHPに合わせてHPバーの描画割合を決定し、適切なmStateを設定する</span>
        <span class="c1">/// &lt;/summary&gt;</span>
        <span class="k">private</span> <span class="k">void</span> <span class="nf">CalHealthBarRate</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="kt">float</span> <span class="n">currentHp</span> <span class="p">=</span> <span class="p">(</span><span class="kt">float</span><span class="p">)(</span><span class="n">mHp</span> <span class="p">-</span> <span class="n">mDamage</span><span class="p">);</span>
            <span class="n">mPreFillAmount</span> <span class="p">=</span> <span class="n">Mathf</span><span class="p">.</span><span class="nf">Clamp</span><span class="p">(</span><span class="n">currentHp</span> <span class="p">/</span> <span class="n">mHp</span><span class="p">,</span> <span class="m">0.0f</span><span class="p">,</span> <span class="m">1.0f</span><span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">mPreFillAmount</span> <span class="p">&lt;</span> <span class="n">mCurrentFillAmount</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">mState</span> <span class="p">=</span> <span class="n">STATE</span><span class="p">.</span><span class="n">DAMAGE</span><span class="p">;</span>
            <span class="p">}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">mPreFillAmount</span> <span class="p">&gt;</span> <span class="n">mCurrentFillAmount</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">mState</span> <span class="p">=</span> <span class="n">STATE</span><span class="p">.</span><span class="n">HEAL</span><span class="p">;</span>
            <span class="p">}</span><span class="k">else</span>
            <span class="p">{</span>
                <span class="n">mState</span> <span class="p">=</span> <span class="n">STATE</span><span class="p">.</span><span class="n">DEFAULT</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">public</span> <span class="k">void</span> <span class="nf">RenewHealthBar</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="k">switch</span> <span class="p">(</span><span class="n">mState</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">case</span> <span class="n">STATE</span><span class="p">.</span><span class="n">DAMAGE</span><span class="p">:</span>
                    <span class="n">mCurrentFillAmount</span> <span class="p">-=</span> <span class="n">UNIT_FILL_AMOUNT</span> <span class="p">*</span> <span class="n">Time</span><span class="p">.</span><span class="n">deltaTime</span><span class="p">;</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">mCurrentFillAmount</span> <span class="p">&lt;</span> <span class="n">mPreFillAmount</span><span class="p">)</span>
                    <span class="p">{</span>
                        <span class="n">mCurrentFillAmount</span> <span class="p">=</span> <span class="n">mPreFillAmount</span><span class="p">;</span>
                        <span class="n">mHealthBar</span><span class="p">.</span><span class="n">fillAmount</span> <span class="p">=</span> <span class="n">mCurrentFillAmount</span><span class="p">;</span>
                        <span class="n">mState</span> <span class="p">=</span> <span class="n">STATE</span><span class="p">.</span><span class="n">DEFAULT</span><span class="p">;</span>
                        <span class="k">return</span><span class="p">;</span>
                    <span class="p">}</span>
                    <span class="n">mHealthBar</span><span class="p">.</span><span class="n">fillAmount</span> <span class="p">=</span> <span class="n">mCurrentFillAmount</span><span class="p">;</span>
                    <span class="k">break</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>

</code></pre></div>
</div>

<p>1: PlayerTankの場合はHealthBarFrontLeftを設定し、EnemyTankの場合はHealthBarFrontRightを設定。</p>

<p>CalHealthBarRate()は戦車が被弾した際に実行されるAddDamage()から呼び出され、残りHPの割合から青いHPゲージをどのくらい描画すれば良いかを計算しています。<br>
また同時に、この戦車の状態mStateを「通常・被弾・回復」のいずれかに更新しています。</p>

<p>RenewHealthBar()では状態mStateが被弾（DAMAGE）の場合のみ、青いHPゲージの表示割合を徐々に減らす処理を行っています。</p>

<div class="code-frame" data-lang="cs">
<div class="code-lang"><span class="bold">TankModel.cs</span></div>
<div class="highlight"><pre class="with-code"><code>
        <span class="k">private</span> <span class="n">TankMovement</span> <span class="n">mMovementScript</span><span class="p">;</span>
        <span class="k">private</span> <span class="n">TurretController</span> <span class="n">mTurretScript</span><span class="p">;</span>
        <span class="k">private</span> <span class="n">FireController</span> <span class="n">mFireScript</span><span class="p">;</span>
<span class="err">追加</span>    <span class="k">private</span> <span class="n">TankHealth</span> <span class="n">mHealthScript</span><span class="p">;</span>

        <span class="k">void</span> <span class="nf">Start</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="nf">SetLayerCollision</span><span class="p">();</span>
            <span class="n">mMovementScript</span> <span class="p">=</span> <span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">TankMovement</span><span class="p">&gt;();</span>
            <span class="n">mTurretScript</span> <span class="p">=</span> <span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">TurretController</span><span class="p">&gt;();</span>
            <span class="n">mFireScript</span> <span class="p">=</span> <span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">FireController</span><span class="p">&gt;();</span>
<span class="err">追加</span>        <span class="n">mHealthScript</span> <span class="p">=</span> <span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">TankHealth</span><span class="p">&gt;();</span>
        <span class="p">}</span>

        <span class="k">void</span> <span class="nf">Update</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">IsPlayer</span> <span class="p">&amp;&amp;</span> <span class="n">IsActive</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="c1">// 移動入力の受付</span>
                <span class="n">mMovementScript</span><span class="p">.</span><span class="nf">CheckInput</span><span class="p">();</span>

                <span class="c1">// 砲台角度を計算</span>
                <span class="n">mTurretScript</span><span class="p">.</span><span class="nf">CalRotation</span><span class="p">();</span>

                <span class="c1">// 弾発射の入力を受付</span>
                <span class="n">mFireScript</span><span class="p">.</span><span class="nf">CheckInput</span><span class="p">();</span>
            <span class="p">}</span>

            <span class="c1">// HPバーの更新</span>
<span class="err">追加</span>        <span class="n">mHealthScript</span><span class="p">.</span><span class="nf">RenewHealthBar</span><span class="p">();</span>
        <span class="p">}</span>

</code></pre></div>
</div>

<p>いつもと同じようにTankModelクラスのUpdate()でHPバーの更新が行えるようコードを追加しますが、今回はプレイヤーでなくてもHPが減ること、<strong>被弾して死亡フラグが立った段階ではまだ青いHPゲージが残っている状態</strong>であることを加味して、条件式の外から呼び出します。</p>

<p><a href="https://camo.qiitausercontent.com/4129ab97ebaad143514b99f67abdb1d72d8a7d7c/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3233393837372f35653865313030372d303335642d373739312d316536632d6439353166646266366332362e6a706567" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F239877%2F5e8e1007-035d-7791-1e6c-d951fdbf6c26.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=656c3d6e3d776db7382b5fb0b69f7577" alt="tankwars_ss_5_8.jpg" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/239877/5e8e1007-035d-7791-1e6c-d951fdbf6c26.jpeg" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F239877%2F5e8e1007-035d-7791-1e6c-d951fdbf6c26.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=e448a40a6158ec8f12ce04c8cdc537bf 1x" loading="lazy"></a></p>

<p>プロジェクトを実行して、HPバーが戦車の被弾によって減っていくことを確認します。</p>

<hr>

<p><a href="https://qiita.com/YzRoid/items/a01cb3e7311577c41030" id="reference-d1935e7a7691244184e6">次のページに進む</a><br>
<a href="https://qiita.com/YzRoid/items/544426ceffd4283d6977">イントロダクションに戻る</a><br>
<br></p>
</div></div></section><div class="css-1yzj1fm"><div class="css-1uv1qiv"><span class="fa fa-twitter"></span></div><div class="css-1uv1qiv"><span class="fa fa-facebook"></span></div></div><div class="apm-Content"><div class="apm-Content_title">Why not register and get more from Qiita?</div><ol class="apm-Content_list"><li>We will deliver articles that match you<div class="description">By following users and tags, you can catch up information on technical fields that you are interested in as a whole</div></li><li>you can read useful information later efficiently<div class="description">By &quot;stocking&quot; the articles you like, you can search right away</div></li><div><a class="apm-Content_help" href="https://help.qiita.com/ja/articles/qiita-login-user" target="_blank"><i class="fa fa-fw fa-arrow-circle-right"></i>What you can do with signing up</a></div></ol><a href="/signup?callback_action=login_or_signup&amp;redirect_to=%2FYzRoid%2Fitems%2Fb2544cab6463d82506c5&amp;realm=qiita" class="apm-Content_button apm-Content_button-signup">Sign up</a><a href="/login?callback_action=login_or_signup&amp;redirect_to=%2FYzRoid%2Fitems%2Fb2544cab6463d82506c5&amp;realm=qiita" class="apm-Content_button apm-Content_button-signin">Login</a></div></div><div class="css-helsa7"></div></div></div></div><div class="css-109dbrr"><div class="css-5jpx49"><div class="css-mnxgyc"><button class=" css-1vlpknv"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/YzRoid/items/b2544cab6463d82506c5/likers" class="css-1iupg5d">0</a></div><div class="css-fsjkhv"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-1b17vb0">2</span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-7i7f4d"><div class="css-1gj7nt">Improve article</div><a href="/drafts/b2544cab6463d82506c5/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/YzRoid/items/b2544cab6463d82506c5/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/YzRoid/items/b2544cab6463d82506c5/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/YzRoid/items/b2544cab6463d82506c5/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/YzRoid/items/b2544cab6463d82506c5.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="PersonalArticlePage" data-dom-id="PersonalArticlePage-react-component-9645819b-47d5-4eda-aac1-6db531220611">{"authorAnalyticsTrackingId":null,"organizationAnalyticsTrackingId":null}</script>
      
<footer id="globalFooter" class="st-Footer"><div class="st-Footer_container"><div class="st-Footer_start"><div class="st-Footer_logo"><svg viewbox="0 0 426.57 130" xmlns="http://www.w3.org/2000/svg"><circle cx="167.08" cy="21.4" r="12.28" /><path d="M250.81 29.66h23.48v18.9h-23.48z" /><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z" /><circle cx="216.33" cy="21.4" r="12.28" /></svg></div><div class="st-Footer_catchcopy">How developers code is here.</div><div class="st-Footer_socials"><a class="fa fa-twitter" href="https://twitter.com/qiita"></a><a class="fa fa-facebook-square" href="https://www.facebook.com/qiita/"></a></div></div><div class="st-Footer_end"><div class="st-Footer_qiita"><div class="st-Footer_label">Qiita</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="/about">About</a><a href="/terms">Terms</a><a href="/privacy">Privacy</a><a target="_blank" href="http://help.qiita.com/ja/articles/qiita-community-guideline">Guideline</a><a target="_blank" href="https://help.qiita.com/ja/articles/others-brand-guideline">Design Guideline</a></div><div class="st-Footer_column"><a href="/release-notes">Release</a><a href="/api/v2/docs">API</a><a href="/feedback/new">ご意見</a><a href="https://help.qiita.com">Help</a><a target="_blank" href="https://qiita.com/ads?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Advertisement</a></div></div></div><div class="st-Footer_increments"><div class="st-Footer_label">Increments</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="https://increments.co.jp/company/">About</a><a href="https://increments.co.jp/jobs/">採用情報</a><a href="https://blog.qiita.com">Blog</a></div><div class="st-Footer_column"><a href="https://teams.qiita.com/">Qiita Team</a><a href="https://jobs.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Jobs</a><a href="https://zine.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Zine</a></div></div></div></div></div><div class="st-Footer_copyright">© 2011-2021 Increments Inc.</div></footer><div id="Snackbar-react-component-ede01d6d-2c35-4bba-8eb6-62052e2159b1"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="Snackbar" data-dom-id="Snackbar-react-component-ede01d6d-2c35-4bba-8eb6-62052e2159b1">{}</script>
      
<div id="LoginModal-react-component-ad72d515-3c78-4627-a0f4-f74df39aad20"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="LoginModal" data-dom-id="LoginModal-react-component-ad72d515-3c78-4627-a0f4-f74df39aad20">{}</script>
      
<div id="StockModal-react-component-e870030d-9cd1-40f4-920a-d511f8899b91"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="StockModal" data-dom-id="StockModal-react-component-e870030d-9cd1-40f4-920a-d511f8899b91">{}</script>
      
</div><div id="dataContainer" style="display: none;" data-config="{&quot;actionPath&quot;:&quot;public/items#show&quot;,&quot;settings&quot;:{&quot;analyticsTrackingId&quot;:&quot;UA-24675221-12&quot;,&quot;assetsMap&quot;:{},&quot;csrfToken&quot;:&quot;09cb5t0l8ONOXPyht+Y+xclxMpuKkv2TVPHiS4VvLxOiDoKwiIKMqjSP9vSEk92v6hLXrRpEjkJcuBOeMo9wUA==&quot;,&quot;locale&quot;:&quot;en&quot;},&quot;currentUser&quot;:null}" /></body></html><script type="application/json" data-js-react-on-rails-store="AppStoreWithReactOnRails">{"snackbar":{"type":"","body":"","isActive":false},"article":{"article":{"body":"\u003cp\u003e\u003ca href=\"https://qiita.com/YzRoid/items/544426ceffd4283d6977\" id=\"reference-0e047528af0e61a24260\"\u003eミニゲームを作ってUnityを学ぶ！[タンクウォーズ編]\u003c/a\u003e\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"第5回目-hpの管理とステージの作り込み\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E7%AC%AC5%E5%9B%9E%E7%9B%AE-hp%E3%81%AE%E7%AE%A1%E7%90%86%E3%81%A8%E3%82%B9%E3%83%86%E3%83%BC%E3%82%B8%E3%81%AE%E4%BD%9C%E3%82%8A%E8%BE%BC%E3%81%BF\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003cstrong\u003e第5回目: HPの管理とステージの作り込み\u003c/strong\u003e\n\u003c/h3\u003e\n\n\u003cp\u003eこれまではプレイヤーの操作する戦車についてのみ機能を実装してきましたが、ここからようやく対戦相手となる戦車オブジェクトを追加していきます。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"対戦相手の追加\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AF%BE%E6%88%A6%E7%9B%B8%E6%89%8B%E3%81%AE%E8%BF%BD%E5%8A%A0\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e対戦相手の追加\u003c/h1\u003e\n\n\u003cul\u003e\n\u003cli\u003ePlayerTankのプレハブをシーンの適当な場所に配置\u003c/li\u003e\n\u003cli\u003e配置されたオブジェクトの名前を「EnemyTank」に変更\u003c/li\u003e\n\u003cli\u003eEnemyTankのプレハブを書き出し\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e以上で敵キャラクターが完成しました。\u003cbr\u003e\nこちらの戦車については\u003cstrong\u003eプレイヤーが操作できないように、mIsPlayerのチェックを外しておきます。\u003c/strong\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/39fcceb311d8419539bc5048846d9f1ded75e71d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3233393837372f31303837346162622d633237662d333161382d613539322d3833323866303630356361642e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F239877%2F10874abb-c27f-31a8-a592-8328f0605cad.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=79ae14bdb714a75f47a0c2094cb9fab2\" alt=\"tankwars_ss_5_1.jpg\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/239877/10874abb-c27f-31a8-a592-8328f0605cad.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F239877%2F10874abb-c27f-31a8-a592-8328f0605cad.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=dc1837939d53180a19bfa98ca1642611 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"戦場の作成\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%88%A6%E5%A0%B4%E3%81%AE%E4%BD%9C%E6%88%90\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e戦場の作成\u003c/h1\u003e\n\n\u003cp\u003e続いて、今はまだ地面だけの戦場をゲームシステムに合わせて作りこみます。\u003cbr\u003e\n最終的には以下のようにプレイヤーと相手が左右に分かれて弾を撃ちあう形になります。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/befd9c6f0fe3e4112d37ca4e8ec0e1ff911cf546/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3233393837372f63313063656333342d323962382d393834362d616265322d3539633161373863643365362e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F239877%2Fc10cec34-29b8-9846-abe2-59c1a78cd3e6.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=6be0cc6ee80dbd81dfad35766825d419\" alt=\"tankwars_ss_5_2.jpg\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/239877/c10cec34-29b8-9846-abe2-59c1a78cd3e6.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F239877%2Fc10cec34-29b8-9846-abe2-59c1a78cd3e6.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=2318d8294c50e4b97372ad2c1043dd8e 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"バリケードテープを地面に貼る\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%90%E3%83%AA%E3%82%B1%E3%83%BC%E3%83%89%E3%83%86%E3%83%BC%E3%83%97%E3%82%92%E5%9C%B0%E9%9D%A2%E3%81%AB%E8%B2%BC%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003cstrong\u003eバリケードテープを地面に貼る\u003c/strong\u003e\n\u003c/h3\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/85c91af454e56f5e9c3bb0ef70810621ebc0440e/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3233393837372f32616632616535632d366132332d346637362d616662632d3037336235343561366335632e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F239877%2F2af2ae5c-6a23-4f76-afbc-073b545a6c5c.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=aba1f7ee810b1123931e5a3f3a5899d0\" alt=\"Barricade.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/239877/2af2ae5c-6a23-4f76-afbc-073b545a6c5c.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F239877%2F2af2ae5c-6a23-4f76-afbc-073b545a6c5c.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=c2ef93499ec5a902c2c78406c3e352d6 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003col\u003e\n\u003cli\u003e上の画像をダウンロード後「BarricadeTape」に名前を変更してプロジェクトにインポート\u003c/li\u003e\n\u003cli\u003e新しいマテリアル「Barricade」を作成してAlbedoにインポートしたBarricadeTapeを設定\u003c/li\u003e\n\u003cli\u003eシーンに2つのPlane「BarricadeLeft」と「BarricadeRight」を作成して、それぞれに「Barricade」マテリアルをアタッチ\u003c/li\u003e\n\u003cli\u003eBarricadeLeftとBarricadeRightのTransformを下記のように設定\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth style=\"text-align: center\"\u003e\u003c/th\u003e\n\u003cth style=\"text-align: center\"\u003ePosition(x, y, z)\u003c/th\u003e\n\u003cth style=\"text-align: center\"\u003eRotation\u003c/th\u003e\n\u003cth style=\"text-align: center\"\u003eScale\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd style=\"text-align: center\"\u003e\u003cstrong\u003eBarricadeLeft\u003c/strong\u003e\u003c/td\u003e\n\u003ctd style=\"text-align: center\"\u003e(-17, 0.02, 0)\u003c/td\u003e\n\u003ctd style=\"text-align: center\"\u003e(0, 90, 0)\u003c/td\u003e\n\u003ctd style=\"text-align: center\"\u003e(5, 1, 0.2)\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd style=\"text-align: center\"\u003e\u003cstrong\u003eBarricadeRight\u003c/strong\u003e\u003c/td\u003e\n\u003ctd style=\"text-align: center\"\u003e(17, 0.02, 0)\u003c/td\u003e\n\u003ctd style=\"text-align: center\"\u003e(0, 90, 0)\u003c/td\u003e\n\u003ctd style=\"text-align: center\"\u003e(5, 1, 0.2)\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"戦車の位置を変更\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%88%A6%E8%BB%8A%E3%81%AE%E4%BD%8D%E7%BD%AE%E3%82%92%E5%A4%89%E6%9B%B4\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003cstrong\u003e戦車の位置を変更\u003c/strong\u003e\n\u003c/h3\u003e\n\n\u003cp\u003ePlayerTankとEnemyTankのPositionを下記のように設定\u003c/p\u003e\n\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003e\u003c/th\u003e\n\u003cth\u003ePosition(x, y, z)\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003cstrong\u003ePlayerTank\u003c/strong\u003e\u003c/td\u003e\n\u003ctd\u003e(-20, 1.2, 0)\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003cstrong\u003eEnemyTank\u003c/strong\u003e\u003c/td\u003e\n\u003ctd\u003e(20, 1.2, 0)\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\n\u003cp\u003eこれで先ほどの画像と同じような見た目になりました。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"見えないコライダーで戦車の移動を制限する\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%A6%8B%E3%81%88%E3%81%AA%E3%81%84%E3%82%B3%E3%83%A9%E3%82%A4%E3%83%80%E3%83%BC%E3%81%A7%E6%88%A6%E8%BB%8A%E3%81%AE%E7%A7%BB%E5%8B%95%E3%82%92%E5%88%B6%E9%99%90%E3%81%99%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003cstrong\u003e見えないコライダーで戦車の移動を制限する\u003c/strong\u003e\n\u003c/h3\u003e\n\n\u003cp\u003eこのままだと戦車が上下移動をした際に画面外へ出ていくことが可能で、最終的にはGroundを超えて奈落に落ちていってしまいます。\u003cbr\u003e\nこれを防止するため、\u003cstrong\u003e先に進んでほしくない位置にコライダーの壁を作ることで戦車の移動を制限\u003c/strong\u003eします。\u003c/p\u003e\n\n\u003col\u003e\n\u003cli\u003eCubeを2つ作成し、それぞれ名前を「BarricadeTop」「BarricadeBottom」に変更\u003c/li\u003e\n\u003cli\u003eMesh Rendererのチェックを外して透明状態にする\u003c/li\u003e\n\u003cli\u003eTransformステータスを下記のように設定\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003e\u003c/th\u003e\n\u003cth\u003ePosition(x, y, z)\u003c/th\u003e\n\u003cth\u003eRotation\u003c/th\u003e\n\u003cth\u003eScale\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003cstrong\u003eBarricadeTop\u003c/strong\u003e\u003c/td\u003e\n\u003ctd\u003e(0, 0, 18)\u003c/td\u003e\n\u003ctd\u003e(0, 0, 0)\u003c/td\u003e\n\u003ctd\u003e(50, 1, 1)\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003cstrong\u003eBarricadeBottom\u003c/strong\u003e\u003c/td\u003e\n\u003ctd\u003e(0, 0, -17.6)\u003c/td\u003e\n\u003ctd\u003e(0, 0, 0)\u003c/td\u003e\n\u003ctd\u003e(50, 1, 1)\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/a4697107c3c92d51bb8ea46f0f7cc323db9c5e58/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3233393837372f33643632653438352d633131322d316132312d636262392d3734353863356436306438622e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F239877%2F3d62e485-c112-1a21-cbb9-7458c5d60d8b.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=7e0fcfdca7f1b627dbe148d3b23a5d41\" alt=\"tankwars_ss_5_3.jpg\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/239877/3d62e485-c112-1a21-cbb9-7458c5d60d8b.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F239877%2F3d62e485-c112-1a21-cbb9-7458c5d60d8b.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=a0460d6919048c9171767780a2e169d0 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eこれで上下とも、透明な壁に当たった時点で戦車の移動が制限されます。\u003cbr\u003e\n\u003cfont color=\"Blue\"\u003e（厳密には制限しきれずに抜けてしまったりするのですが、今後の作り込みによって改善されますので今は気にせずに進めてください）\u003c/font\u003e\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"戦場オブジェクトをまとめる\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%88%A6%E5%A0%B4%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%82%92%E3%81%BE%E3%81%A8%E3%82%81%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003cstrong\u003e戦場オブジェクトをまとめる\u003c/strong\u003e\n\u003c/h3\u003e\n\n\u003cp\u003eここでHierarchyウインドウを一度整理します。\u003c/p\u003e\n\n\u003col\u003e\n\u003cli\u003e空オブジェクト「Area」をゼロポジションに作成\u003c/li\u003e\n\u003cli\u003e今までに作成した「Ground」「DestroyArea」「4種のBarricade」を「Area」の子に設定\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/34ac39ba37167bff91a00542b29a010a2a0ce683/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3233393837372f38626138663937612d383432612d383533312d633439322d3534633435326464653639382e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F239877%2F8ba8f97a-842a-8531-c492-54c452dde698.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=66d80e0db15a9fc355c23397b537b180\" alt=\"tankwars_ss_5_4.jpg\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/239877/8ba8f97a-842a-8531-c492-54c452dde698.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F239877%2F8ba8f97a-842a-8531-c492-54c452dde698.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=aa6918ba6dee2ccc2f7957f328c913cc 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"hpの概念を実装する\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#hp%E3%81%AE%E6%A6%82%E5%BF%B5%E3%82%92%E5%AE%9F%E8%A3%85%E3%81%99%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eHPの概念を実装する\u003c/h1\u003e\n\n\u003cp\u003e戦場と対戦相手が用意できましたので、ここからはスクリプトでHPの概念を実装していきます。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eTankHealthという名前でスクリプトを作成\u003c/li\u003e\n\u003cli\u003ePlayerTankとEnemyTankにTankHealthをアタッチ\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"cs\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eTankHealth.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem.Collections\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem.Collections.Generic\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eUnityEngine\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eUnityEngine.UI\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eTankHealth\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eMonoBehaviour\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\n        \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eSerializeField\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nf\"\u003eTooltip\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"HPの初期値\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)]\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003emHp\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e100\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003emDamage\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n        \u003cspan class=\"c1\"\u003e/// \u0026lt;summary\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e/// 戦車に被弾ダメージを与える\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e/// \u0026lt;/summary\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e/// \u0026lt;param name=\"damage\"\u0026gt;\u0026lt;/param\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e/// \u0026lt;returns\u0026gt;HPが0になった場合はtrueを返す\u0026lt;/returns\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"nf\"\u003eAddDamage\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003edamage\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"n\"\u003emDamage\u003c/span\u003e \u003cspan class=\"p\"\u003e+=\u003c/span\u003e \u003cspan class=\"n\"\u003edamage\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003emDamage\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003emHp\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"n\"\u003emDamage\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003emHp\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"nf\"\u003eCalHealthBarRate\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n            \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003emDamage\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026gt;=\u003c/span\u003e \u003cspan class=\"n\"\u003emHp\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003efalse\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eCalHealthBarRate\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e最大時のHPと受けたダメージという2つのフィールドを持ったシンプルなクラスです。\u003cbr\u003e\nAddDamage()は弾が当たったときに呼び出されるメソッドで、ダメージを受けた後HPが残っているかどうかの結果を返します。\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003eCalHealthBarRate()については後述しますので今は気にしないでください。\u003c/strong\u003e\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"戦車の当たり判定と弾の命中処理\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%88%A6%E8%BB%8A%E3%81%AE%E5%BD%93%E3%81%9F%E3%82%8A%E5%88%A4%E5%AE%9A%E3%81%A8%E5%BC%BE%E3%81%AE%E5%91%BD%E4%B8%AD%E5%87%A6%E7%90%86\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e戦車の当たり判定と弾の命中処理\u003c/h1\u003e\n\n\u003cp\u003eこれで戦車にHPが設定できましたので、次は当たり判定と弾が当たったときの処理を作っていきます。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"box-colliderで当たり判定を設定\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#box-collider%E3%81%A7%E5%BD%93%E3%81%9F%E3%82%8A%E5%88%A4%E5%AE%9A%E3%82%92%E8%A8%AD%E5%AE%9A\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003cstrong\u003eBox Colliderで当たり判定を設定\u003c/strong\u003e\n\u003c/h3\u003e\n\n\u003cp\u003e今回は当たり判定をよりシンプルにするため、戦車オブジェクトに最初からアタッチされている2つのMesh Colliderを外して代わりにBox Colliderをアタッチします。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003ePlayerTank, EnemyTankともにアタッチされている2つのMesh Colliderを外す\u003c/li\u003e\n\u003cli\u003e両戦車にBoxColliderをアタッチ\u003c/li\u003e\n\u003cli\u003e数値を下記のように設定\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003eCenter(x, y, z)\u003c/th\u003e\n\u003cth\u003eSize\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003e(0, 0.4, -0.08)\u003c/td\u003e\n\u003ctd\u003e(2.6, 3, 4.8)\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\n\u003cul\u003e\n\u003cli\u003e両戦車のタグを「Tank」に設定\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"bulletmodelに命中処理を追加\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#bulletmodel%E3%81%AB%E5%91%BD%E4%B8%AD%E5%87%A6%E7%90%86%E3%82%92%E8%BF%BD%E5%8A%A0\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003cstrong\u003eBulletModelに命中処理を追加\u003c/strong\u003e\n\u003c/h3\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"cs\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eBulletModel.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\n        \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003ereadonly\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003eTAG_TANK\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"Tank\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n        \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eSerializeField\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nf\"\u003eTooltip\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"爆発エフェクト小\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)]\u003c/span\u003e\n\u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e      \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003eGameObject\u003c/span\u003e \u003cspan class=\"n\"\u003emExplosionSmallPrefab\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eSerializeField\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nf\"\u003eTooltip\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"爆発エフェクト大\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)]\u003c/span\u003e\n\u003cspan class=\"m\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e      \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003eGameObject\u003c/span\u003e \u003cspan class=\"n\"\u003emExplosionLargePrefab\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n        \u003cspan class=\"c1\"\u003e/// \u0026lt;summary\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e/// 弾が戦車に当たった際の処理\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e/// \u0026lt;/summary\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e/// \u0026lt;param name=\"collider\"\u0026gt;\u0026lt;/param\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eOnTriggerEnter\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eCollider\u003c/span\u003e \u003cspan class=\"n\"\u003ecollider\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ecollider\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003etag\u003c/span\u003e \u003cspan class=\"p\"\u003e==\u003c/span\u003e \u003cspan class=\"n\"\u003eTAG_TANK\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"c1\"\u003e// 被弾した戦車にダメージを与える\u003c/span\u003e\n                \u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"n\"\u003eIsDead\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ecollider\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003etransform\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eGetComponent\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eTankHealth\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;().\u003c/span\u003e\u003cspan class=\"nf\"\u003eAddDamage\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003emAttackValue\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n                \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(!\u003c/span\u003e\u003cspan class=\"n\"\u003eIsDead\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                    \u003cspan class=\"c1\"\u003e// おおまかな接触点を取得（OnCollisionEnterとは異なり、triggerでは正確な座標を取得できない：でも着弾点としては十分？）\u003c/span\u003e\n                    \u003cspan class=\"n\"\u003eVector3\u003c/span\u003e \u003cspan class=\"n\"\u003ehitPos\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ecollider\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eClosestPointOnBounds\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003emTrans\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eposition\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n                    \u003cspan class=\"c1\"\u003e// 接触した場所に爆発エフェクトを生成\u003c/span\u003e\n                    \u003cspan class=\"nf\"\u003eInstantiate\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003emExplosionSmallPrefab\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ehitPos\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eQuaternion\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eidentity\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n                \u003cspan class=\"k\"\u003eelse\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                    \u003cspan class=\"c1\"\u003e// HPが無くなった場合は戦車中央のポイントに大きな爆発エフェクトを生成\u003c/span\u003e\n                    \u003cspan class=\"n\"\u003eVector3\u003c/span\u003e \u003cspan class=\"n\"\u003ehitPos\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ecollider\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003etransform\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eposition\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n                    \u003cspan class=\"nf\"\u003eInstantiate\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003emExplosionLargePrefab\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ehitPos\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eQuaternion\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eidentity\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n                    \u003cspan class=\"c1\"\u003e// 対象を死亡状態へ\u003c/span\u003e\n                    \u003cspan class=\"n\"\u003ecollider\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003etransform\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eGetComponent\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eTankModel\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;().\u003c/span\u003e\u003cspan class=\"n\"\u003eIsDead\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n                \u003cspan class=\"c1\"\u003e// この弾を休眠状態へ\u003c/span\u003e\n                \u003cspan class=\"nf\"\u003eSleep\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e1: プレハブExplosionSを設定\u003cbr\u003e\n2: プレハブExplosionLを設定\u003c/p\u003e\n\n\u003cp\u003e弾オブジェクトがTankタグの付いたコライダーに接触した場合に、そのコライダーからTankHealthを取得してAddDamage()を実行します。\u003c/p\u003e\n\n\u003cp\u003eその結果、戦車のHPが残っている場合は小爆発のエフェクトが発生。\u003cbr\u003e\n残っていない場合は大きな爆発エフェクトを発生させ、同時にTankModelの死亡フラグを立てています。\u003c/p\u003e\n\n\u003cp\u003eそして対象の生死に関わらず、最後に自身（弾）を休眠状態にするという流れです。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"hpを可視化する\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#hp%E3%82%92%E5%8F%AF%E8%A6%96%E5%8C%96%E3%81%99%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eHPを可視化する\u003c/h1\u003e\n\n\u003cp\u003e戦車にHPの概念を実装し、そのHPが被弾で減るという処理が完成しました。\u003cbr\u003e\n最後にこのHPを格闘ゲームのHPバーのような形で画面内に表示します。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/0d5721e241396eebc0ee400dd3c4e4f226cb3a0c/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3233393837372f33333832343332652d636563352d623137302d633833352d3134383538366334616461642e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F239877%2F3382432e-cec5-b170-c835-148586c4adad.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=7e74e02e09fb2ec645986269bb95bae7\" alt=\"tankwars_ss_5_9.jpg\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/239877/3382432e-cec5-b170-c835-148586c4adad.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F239877%2F3382432e-cec5-b170-c835-148586c4adad.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=60f8828807bd7dcb46b870811f359ffd 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"spriteの準備\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#sprite%E3%81%AE%E6%BA%96%E5%82%99\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003cstrong\u003eSpriteの準備\u003c/strong\u003e\n\u003c/h3\u003e\n\n\u003cul\u003e\n\u003cli\u003e下の画像を「HealthBar」という名前でインポート\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/03ee4c4ffd38eeaf069fe7a928190922cad4e0d6/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3233393837372f33356361363539362d326136332d616565642d396661632d6361306666613931316662642e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F239877%2F35ca6596-2a63-aeed-9fac-ca0ffa911fbd.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=bc5abd8c07b4cf7f99f96af50652957f\" alt=\"AtlasUi.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/239877/35ca6596-2a63-aeed-9fac-ca0ffa911fbd.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F239877%2F35ca6596-2a63-aeed-9fac-ca0ffa911fbd.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=14101aeb1006b93584497387567f83f1 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eTexture TypeをSprite(2D and UI)に変更\u003c/li\u003e\n\u003cli\u003eSprite ModeをMultipleに変更\u003c/li\u003e\n\u003cli\u003eSprite Editorを使って以下のように2つのSpriteに切り分ける\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth style=\"text-align: center\"\u003e\u003c/th\u003e\n\u003cth style=\"text-align: center\"\u003ex\u003c/th\u003e\n\u003cth style=\"text-align: center\"\u003ey\u003c/th\u003e\n\u003cth style=\"text-align: center\"\u003ew\u003c/th\u003e\n\u003cth style=\"text-align: center\"\u003eh\u003c/th\u003e\n\u003cth style=\"text-align: center\"\u003ePivot\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd style=\"text-align: center\"\u003eHealthBarBack（上）\u003c/td\u003e\n\u003ctd style=\"text-align: center\"\u003e0\u003c/td\u003e\n\u003ctd style=\"text-align: center\"\u003e224\u003c/td\u003e\n\u003ctd style=\"text-align: center\"\u003e256\u003c/td\u003e\n\u003ctd style=\"text-align: center\"\u003e32\u003c/td\u003e\n\u003ctd style=\"text-align: center\"\u003eCenter\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd style=\"text-align: center\"\u003eHealthBarFront（下）\u003c/td\u003e\n\u003ctd style=\"text-align: center\"\u003e0\u003c/td\u003e\n\u003ctd style=\"text-align: center\"\u003e192\u003c/td\u003e\n\u003ctd style=\"text-align: center\"\u003e256\u003c/td\u003e\n\u003ctd style=\"text-align: center\"\u003e32\u003c/td\u003e\n\u003ctd style=\"text-align: center\"\u003eCenter\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\n\u003cp\u003e\u003cfont color=\"blue\"\u003eこの際に理屈はわからないのですが\u003cstrong\u003eSpriteのFilter Modeを「Point(no filter)」に設定しておかないとシーンに配置されたときに画像の一部分が欠けてしまうようです。\u003c/strong\u003e\u003c/font\u003e\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"hpバーの配置\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#hp%E3%83%90%E3%83%BC%E3%81%AE%E9%85%8D%E7%BD%AE\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003cstrong\u003eHPバーの配置\u003c/strong\u003e\n\u003c/h3\u003e\n\n\u003cp\u003e画像が準備できたらシーンにCanvasを作成し、HPバーをちょうど良さそうな位置に配置していきます。\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003e1. ルートパネル\u003c/strong\u003e\u003c/p\u003e\n\n\u003col\u003e\n\u003cli\u003eCanvas内に「PanelHealthBar」という名前でPanelを作成\u003c/li\u003e\n\u003cli\u003eImageのチェックを外してPanel自体は表示されないようにする\u003c/li\u003e\n\u003cli\u003eRect Transformを以下のように設定\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/0a38b5326dcbee607854a6a54706012eeddeba62/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3233393837372f39356637383734382d376530382d636133302d353964652d3333643333656336363966312e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F239877%2F95f78748-7e08-ca30-59de-33d33ec669f1.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=f06472aadc44bb23ac708c9b515bb119\" alt=\"tankwars_ss_5_5.jpg\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/239877/95f78748-7e08-ca30-59de-33d33ec669f1.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F239877%2F95f78748-7e08-ca30-59de-33d33ec669f1.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=58c1c37670c37dfb7503eb7c052180a7 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003cbr\u003e\n\u003cbr\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003e2. 左側のHPバー\u003c/strong\u003e\u003c/p\u003e\n\n\u003col\u003e\n\u003cli\u003ePanelHealthBarの子に「HealthBarBackLeft」という名前のImageを作成\u003c/li\u003e\n\u003cli\u003eHealthBarBackLeftのSource Imageに先ほど切り分けたHealthBarBackを設定\u003c/li\u003e\n\u003cli\u003ePanelHealthBarの子に「HealthBarFrontLeft」という名前のImageを作成\u003c/li\u003e\n\u003cli\u003eHealthBarFrontLeftのSource Imageに先ほど切り分けたHealthBarFrontを設定\u003c/li\u003e\n\u003cli\u003e両ImageのRect Transformを以下のように設定 \u003c/li\u003e\n\u003c/ol\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/b4ae456899bea3650eb731c9062614eee34ecdae/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3233393837372f35313432393732332d653464632d623164612d366364652d3632373565376136613061612e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F239877%2F51429723-e4dc-b1da-6cde-6275e7a6a0aa.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=7460771c39a3cde1182e7a3ddd379710\" alt=\"tankwars_ss_5_6.jpg\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/239877/51429723-e4dc-b1da-6cde-6275e7a6a0aa.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F239877%2F51429723-e4dc-b1da-6cde-6275e7a6a0aa.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=f84508d4ef20748570bf236bed76d31a 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eHPバーは2つのSpriteを重ねあわせて表現していますが、\u003cfont color=\"Blue\"\u003eもしこのときに青色のゲージが手前に表示されていない場合はインスペクタからImageの並び順を変更して青色のゲージが手前に表示されるように修正してください。\u003c/font\u003e\u003cbr\u003e\n\u003cbr\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003e3. 右側のHPバー\u003c/strong\u003e\u003cbr\u003e\n左側のHPバーと同様に右側にもHPバーを表示させます。\u003c/p\u003e\n\n\u003col\u003e\n\u003cli\u003ePanelHealthBarの子に「HealthBarBackRight」という名前のImageを作成\u003c/li\u003e\n\u003cli\u003eHealthBarBackRightのSource Imageに先ほど切り分けたHealthBarBackを設定\u003c/li\u003e\n\u003cli\u003ePanelHealthBarの子に「HealthBarFrontRight」という名前のImageを作成\u003c/li\u003e\n\u003cli\u003eHealthBarFrontRightのSource Imageに先ほど切り分けたHealthBarFrontを設定\u003c/li\u003e\n\u003cli\u003e両ImageのRect Transformを以下のように設定 \u003c/li\u003e\n\u003c/ol\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/c92f1f973e5106d9b4ecdf9dd225475aa0bef017/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3233393837372f30323463323638662d643965322d633430382d353264642d6537653063653063613138632e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F239877%2F024c268f-d9e2-c408-52dd-e7e0ce0ca18c.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=71136561daf3974bb08447954efa0c81\" alt=\"tankwars_ss_5_7.jpg\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/239877/024c268f-d9e2-c408-52dd-e7e0ce0ca18c.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F239877%2F024c268f-d9e2-c408-52dd-e7e0ce0ca18c.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=ad49cef1385220b81d91370af3557006 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003cfont color=\"Red\"\u003e右側のHPバーについては、Rotationの値によって画像を反転させている点に注意してください。\u003c/font\u003e\u003cbr\u003e\n\u003cbr\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003e4. HPバーを割合表示に対応させる\u003c/strong\u003e\u003cbr\u003e\n最後に、両方に配置したHPバーの青いゲージ部分「HealthBarFront~」のImage Typeを変更します。\u003c/p\u003e\n\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth style=\"text-align: center\"\u003eImage Type\u003c/th\u003e\n\u003cth style=\"text-align: center\"\u003eFill Method\u003c/th\u003e\n\u003cth style=\"text-align: center\"\u003eFill Origin\u003c/th\u003e\n\u003cth style=\"text-align: center\"\u003eFill Amount\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd style=\"text-align: center\"\u003eFilled\u003c/td\u003e\n\u003ctd style=\"text-align: center\"\u003eHorizontal\u003c/td\u003e\n\u003ctd style=\"text-align: center\"\u003eRight\u003c/td\u003e\n\u003ctd style=\"text-align: center\"\u003e1\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e[Image Type = Filled]\n\nこの設定にした画像は描画範囲を割合で指定できるようになります。\n上記の設定でいえば「水平方向について、Amountの値が0から1に近くなるほど右から左まで」\n描画されていきます。\n\n＊右のHPバーは反転されているため左から右に向かって描画されます\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e\u003ca href=\"http://hiyotama.hatenablog.com/entry/2015/06/25/090000\" rel=\"nofollow noopener\" target=\"_blank\"\u003e参考サイト:ひよこのたまご（uGUIのImageの使い方）\u003c/a\u003e\u003cbr\u003e\n\u003cbr\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003e5. HPバー上部のテキスト\u003c/strong\u003e\u003cbr\u003e\nHPバーの上部に「Player」と「Enemy」のテキストを追加します。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eHealthBarFrontLeft内にテキストを作成\u003c/li\u003e\n\u003cli\u003eTextのColorを\u003cfont color=\"Blue\"\u003e(R=255, G=255, B=255, A=255)\u003c/font\u003eに変更\u003c/li\u003e\n\u003cli\u003eTextの赤枠部分とポジションを以下のように設定\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/523a5e3fbaf633ebd9a2eb4667cdb81df52b3e46/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3233393837372f65626632656265342d383265652d613438372d336265662d6636646331636233333937372e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F239877%2Febf2ebe4-82ee-a487-3bef-f6dc1cb33977.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=435b281693c67396250e12abcbff5a73\" alt=\"tankwars_ss_5_10.jpg\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/239877/ebf2ebe4-82ee-a487-3bef-f6dc1cb33977.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F239877%2Febf2ebe4-82ee-a487-3bef-f6dc1cb33977.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=b669467c64ad169b4370c928ee77aa46 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eHealthBarFrontRight内にテキストを作成\u003c/li\u003e\n\u003cli\u003eTextのColorを\u003cfont color=\"Blue\"\u003e(R=255, G=255, B=255, A=255)\u003c/font\u003eに変更\u003c/li\u003e\n\u003cli\u003eTextの赤枠部分とポジションを以下のように設定\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/12ff42c18d4290ce7d8cb0318396bc9d1ef4eae0/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3233393837372f64636334396262312d316133622d366238382d626138632d3731333866376261663438352e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F239877%2Fdcc49bb1-1a3b-6b88-ba8c-7138f7baf485.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=a58d8502db290b0c510b17d4c9aa7abb\" alt=\"tankwars_ss_5_11.jpg\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/239877/dcc49bb1-1a3b-6b88-ba8c-7138f7baf485.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F239877%2Fdcc49bb1-1a3b-6b88-ba8c-7138f7baf485.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=ae3f403515c2cc86fcf2e5a371229dda 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"hpバーをスクリプトで制御する\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#hp%E3%83%90%E3%83%BC%E3%82%92%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%97%E3%83%88%E3%81%A7%E5%88%B6%E5%BE%A1%E3%81%99%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003cstrong\u003eHPバーをスクリプトで制御する\u003c/strong\u003e\n\u003c/h3\u003e\n\n\u003cp\u003e出来上がったHPバーが実際の戦車のHPと連動するように、TankHealthクラスとTankModelクラスにコードを追加していきます。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"cs\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eTankHealth.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\n        \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003eenum\u003c/span\u003e \u003cspan class=\"n\"\u003eSTATE\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eDEFAULT\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eDAMAGE\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eHEAL\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003eSTATE\u003c/span\u003e \u003cspan class=\"n\"\u003emState\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eSTATE\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eDEFAULT\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003ereadonly\u003c/span\u003e \u003cspan class=\"kt\"\u003efloat\u003c/span\u003e \u003cspan class=\"n\"\u003eUNIT_FILL_AMOUNT\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e1.0f\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n        \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eSerializeField\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n\u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e      \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003eImage\u003c/span\u003e \u003cspan class=\"n\"\u003emHealthBar\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"c1\"\u003e// 描画を制御したい画像（HPバーの青い部分）\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"kt\"\u003efloat\u003c/span\u003e \u003cspan class=\"n\"\u003emCurrentFillAmount\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e1.0f\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"c1\"\u003e// 現在描画されているHPバーのfillAmount\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"kt\"\u003efloat\u003c/span\u003e \u003cspan class=\"n\"\u003emPreFillAmount\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"c1\"\u003e// 増減アクションの終了条件となるHPバーのfillAmount\u003c/span\u003e\n\n        \u003cspan class=\"c1\"\u003e/// \u0026lt;summary\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e/// 残りHPに合わせてHPバーの描画割合を決定し、適切なmStateを設定する\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e/// \u0026lt;/summary\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eCalHealthBarRate\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"kt\"\u003efloat\u003c/span\u003e \u003cspan class=\"n\"\u003ecurrentHp\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003efloat\u003c/span\u003e\u003cspan class=\"p\"\u003e)(\u003c/span\u003e\u003cspan class=\"n\"\u003emHp\u003c/span\u003e \u003cspan class=\"p\"\u003e-\u003c/span\u003e \u003cspan class=\"n\"\u003emDamage\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n            \u003cspan class=\"n\"\u003emPreFillAmount\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eMathf\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eClamp\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ecurrentHp\u003c/span\u003e \u003cspan class=\"p\"\u003e/\u003c/span\u003e \u003cspan class=\"n\"\u003emHp\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"m\"\u003e0.0f\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"m\"\u003e1.0f\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003emPreFillAmount\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"n\"\u003emCurrentFillAmount\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"n\"\u003emState\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eSTATE\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eDAMAGE\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"k\"\u003eelse\u003c/span\u003e \u003cspan class=\"k\"\u003eif\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003emPreFillAmount\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003emCurrentFillAmount\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"n\"\u003emState\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eSTATE\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eHEAL\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"k\"\u003eelse\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"n\"\u003emState\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eSTATE\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eDEFAULT\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eRenewHealthBar\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eswitch\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003emState\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"k\"\u003ecase\u003c/span\u003e \u003cspan class=\"n\"\u003eSTATE\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eDAMAGE\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n                    \u003cspan class=\"n\"\u003emCurrentFillAmount\u003c/span\u003e \u003cspan class=\"p\"\u003e-=\u003c/span\u003e \u003cspan class=\"n\"\u003eUNIT_FILL_AMOUNT\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003eTime\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003edeltaTime\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n                    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003emCurrentFillAmount\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"n\"\u003emPreFillAmount\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n                    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                        \u003cspan class=\"n\"\u003emCurrentFillAmount\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003emPreFillAmount\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n                        \u003cspan class=\"n\"\u003emHealthBar\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003efillAmount\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003emCurrentFillAmount\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n                        \u003cspan class=\"n\"\u003emState\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eSTATE\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eDEFAULT\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n                        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n                    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n                    \u003cspan class=\"n\"\u003emHealthBar\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003efillAmount\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003emCurrentFillAmount\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n                    \u003cspan class=\"k\"\u003ebreak\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e1: PlayerTankの場合はHealthBarFrontLeftを設定し、EnemyTankの場合はHealthBarFrontRightを設定。\u003c/p\u003e\n\n\u003cp\u003eCalHealthBarRate()は戦車が被弾した際に実行されるAddDamage()から呼び出され、残りHPの割合から青いHPゲージをどのくらい描画すれば良いかを計算しています。\u003cbr\u003e\nまた同時に、この戦車の状態mStateを「通常・被弾・回復」のいずれかに更新しています。\u003c/p\u003e\n\n\u003cp\u003eRenewHealthBar()では状態mStateが被弾（DAMAGE）の場合のみ、青いHPゲージの表示割合を徐々に減らす処理を行っています。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"cs\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eTankModel.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\n        \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003eTankMovement\u003c/span\u003e \u003cspan class=\"n\"\u003emMovementScript\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003eTurretController\u003c/span\u003e \u003cspan class=\"n\"\u003emTurretScript\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003eFireController\u003c/span\u003e \u003cspan class=\"n\"\u003emFireScript\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"err\"\u003e追加\u003c/span\u003e    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003eTankHealth\u003c/span\u003e \u003cspan class=\"n\"\u003emHealthScript\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eStart\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"nf\"\u003eSetLayerCollision\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n            \u003cspan class=\"n\"\u003emMovementScript\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eGetComponent\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eTankMovement\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;();\u003c/span\u003e\n            \u003cspan class=\"n\"\u003emTurretScript\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eGetComponent\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eTurretController\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;();\u003c/span\u003e\n            \u003cspan class=\"n\"\u003emFireScript\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eGetComponent\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eFireController\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;();\u003c/span\u003e\n\u003cspan class=\"err\"\u003e追加\u003c/span\u003e        \u003cspan class=\"n\"\u003emHealthScript\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eGetComponent\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eTankHealth\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;();\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eUpdate\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eIsPlayer\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e \u003cspan class=\"n\"\u003eIsActive\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"c1\"\u003e// 移動入力の受付\u003c/span\u003e\n                \u003cspan class=\"n\"\u003emMovementScript\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eCheckInput\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n                \u003cspan class=\"c1\"\u003e// 砲台角度を計算\u003c/span\u003e\n                \u003cspan class=\"n\"\u003emTurretScript\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eCalRotation\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n                \u003cspan class=\"c1\"\u003e// 弾発射の入力を受付\u003c/span\u003e\n                \u003cspan class=\"n\"\u003emFireScript\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eCheckInput\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n            \u003cspan class=\"c1\"\u003e// HPバーの更新\u003c/span\u003e\n\u003cspan class=\"err\"\u003e追加\u003c/span\u003e        \u003cspan class=\"n\"\u003emHealthScript\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eRenewHealthBar\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003eいつもと同じようにTankModelクラスのUpdate()でHPバーの更新が行えるようコードを追加しますが、今回はプレイヤーでなくてもHPが減ること、\u003cstrong\u003e被弾して死亡フラグが立った段階ではまだ青いHPゲージが残っている状態\u003c/strong\u003eであることを加味して、条件式の外から呼び出します。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/4129ab97ebaad143514b99f67abdb1d72d8a7d7c/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3233393837372f35653865313030372d303335642d373739312d316536632d6439353166646266366332362e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F239877%2F5e8e1007-035d-7791-1e6c-d951fdbf6c26.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=656c3d6e3d776db7382b5fb0b69f7577\" alt=\"tankwars_ss_5_8.jpg\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/239877/5e8e1007-035d-7791-1e6c-d951fdbf6c26.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F239877%2F5e8e1007-035d-7791-1e6c-d951fdbf6c26.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=e448a40a6158ec8f12ce04c8cdc537bf 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eプロジェクトを実行して、HPバーが戦車の被弾によって減っていくことを確認します。\u003c/p\u003e\n\n\u003chr\u003e\n\n\u003cp\u003e\u003ca href=\"https://qiita.com/YzRoid/items/a01cb3e7311577c41030\" id=\"reference-d1935e7a7691244184e6\"\u003e次のページに進む\u003c/a\u003e\u003cbr\u003e\n\u003ca href=\"https://qiita.com/YzRoid/items/544426ceffd4283d6977\"\u003eイントロダクションに戻る\u003c/a\u003e\u003cbr\u003e\n\u003cbr\u003e\u003c/p\u003e\n","createdAt":"2018-03-11T12:16:24Z","elapsedYearsFromLastModifiedAt":3,"encryptedId":"c/1hHPtdu6p97OAIzYm4rCXzVFuNsZpc--eG5t1W5hk4R45ujt--iWrL+8z+LRI+l0Is4iShNg==","isBanned":false,"isDeprecated":true,"isDestroyableByViewer":false,"isEditRequestReadableByViewer":true,"isEditRequestSendableByViewer":true,"isLikableByViewer":true,"isLikedByViewer":false,"isPublic":true,"isSlide":false,"isStockableByViewer":true,"isStockedByViewer":false,"isSubscribableByViewer":false,"isSubscribedByViewer":false,"isUpdatableByViewer":false,"isUpdated":true,"lastModifiedAt":"2018-03-11T12:22:30Z","likesCount":0,"linkUrl":"https://qiita.com/YzRoid/items/b2544cab6463d82506c5","organization":null,"originalId":618138,"stockedCount":2,"title":"ミニゲームを作ってUnityを学ぶ！  [ タンクウォーズ編 - 5. HPの管理とステージの作り込み ]","toc":"\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E7%AC%AC5%E5%9B%9E%E7%9B%AE-hp%E3%81%AE%E7%AE%A1%E7%90%86%E3%81%A8%E3%82%B9%E3%83%86%E3%83%BC%E3%82%B8%E3%81%AE%E4%BD%9C%E3%82%8A%E8%BE%BC%E3%81%BF\"\u003e第5回目: HPの管理とステージの作り込み\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AF%BE%E6%88%A6%E7%9B%B8%E6%89%8B%E3%81%AE%E8%BF%BD%E5%8A%A0\"\u003e対戦相手の追加\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E6%88%A6%E5%A0%B4%E3%81%AE%E4%BD%9C%E6%88%90\"\u003e戦場の作成\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%90%E3%83%AA%E3%82%B1%E3%83%BC%E3%83%89%E3%83%86%E3%83%BC%E3%83%97%E3%82%92%E5%9C%B0%E9%9D%A2%E3%81%AB%E8%B2%BC%E3%82%8B\"\u003eバリケードテープを地面に貼る\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E6%88%A6%E8%BB%8A%E3%81%AE%E4%BD%8D%E7%BD%AE%E3%82%92%E5%A4%89%E6%9B%B4\"\u003e戦車の位置を変更\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E8%A6%8B%E3%81%88%E3%81%AA%E3%81%84%E3%82%B3%E3%83%A9%E3%82%A4%E3%83%80%E3%83%BC%E3%81%A7%E6%88%A6%E8%BB%8A%E3%81%AE%E7%A7%BB%E5%8B%95%E3%82%92%E5%88%B6%E9%99%90%E3%81%99%E3%82%8B\"\u003e見えないコライダーで戦車の移動を制限する\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E6%88%A6%E5%A0%B4%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%82%92%E3%81%BE%E3%81%A8%E3%82%81%E3%82%8B\"\u003e戦場オブジェクトをまとめる\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#hp%E3%81%AE%E6%A6%82%E5%BF%B5%E3%82%92%E5%AE%9F%E8%A3%85%E3%81%99%E3%82%8B\"\u003eHPの概念を実装する\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E6%88%A6%E8%BB%8A%E3%81%AE%E5%BD%93%E3%81%9F%E3%82%8A%E5%88%A4%E5%AE%9A%E3%81%A8%E5%BC%BE%E3%81%AE%E5%91%BD%E4%B8%AD%E5%87%A6%E7%90%86\"\u003e戦車の当たり判定と弾の命中処理\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#box-collider%E3%81%A7%E5%BD%93%E3%81%9F%E3%82%8A%E5%88%A4%E5%AE%9A%E3%82%92%E8%A8%AD%E5%AE%9A\"\u003eBox Colliderで当たり判定を設定\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#bulletmodel%E3%81%AB%E5%91%BD%E4%B8%AD%E5%87%A6%E7%90%86%E3%82%92%E8%BF%BD%E5%8A%A0\"\u003eBulletModelに命中処理を追加\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#hp%E3%82%92%E5%8F%AF%E8%A6%96%E5%8C%96%E3%81%99%E3%82%8B\"\u003eHPを可視化する\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#sprite%E3%81%AE%E6%BA%96%E5%82%99\"\u003eSpriteの準備\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#hp%E3%83%90%E3%83%BC%E3%81%AE%E9%85%8D%E7%BD%AE\"\u003eHPバーの配置\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#hp%E3%83%90%E3%83%BC%E3%82%92%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%97%E3%83%88%E3%81%A7%E5%88%B6%E5%BE%A1%E3%81%99%E3%82%8B\"\u003eHPバーをスクリプトで制御する\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n","totalPv":2479,"uuid":"b2544cab6463d82506c5","banReason":null,"adventCalendarItem":null,"author":{"encryptedId":"AqC4Wp3ycEGQgpc28MQBjcYCewz5--UrcQw4CSxwm0hqqh--7k0UWkWQSV8reCeiaf730A==","originalId":239877,"description":"JavaでAndroid用アプリ作ったりしてます。\r\nただいまUnity勉強中！","facebookUrl":null,"githubUrl":null,"isBlockingViewer":false,"isFollowableByViewer":true,"isFollowedByViewer":false,"isTweetWebNotificationReceivable":true,"linkedinUrl":null,"name":"YzRoid","profileImageUrl":"https://qiita-image-store.s3.amazonaws.com/0/239877/profile-images/1519195494","profileImageUrlW48":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F239877%2Fprofile-images%2F1519195494?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=48\u0026s=f13ea2064a54622182605fa6059ec04c","profileImageUrlW75":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F239877%2Fprofile-images%2F1519195494?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=2fcbd90d54d7bc05cc2fbb8b49f9a2ea","urlName":"YzRoid","websiteUrl":"","twitterUrl":null,"twitterUrlName":null,"revealedOrganizations":{"edges":[]}},"tags":[{"name":"C#","urlName":"csharp"},{"name":"game","urlName":"game"},{"name":"Unity","urlName":"unity"},{"name":"Unity入門","urlName":"unity%e5%85%a5%e9%96%80"}],"followingLikers":{"edges":[]},"comments":{"totalCount":0}},"comments":[],"client":null,"ads_event_emitter":null}}</script>
