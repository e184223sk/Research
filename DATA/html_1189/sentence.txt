More than 1 year has passed since last update.最初の記事はこちら今回はインターセプターについて紹介します。ソースはこちら各処理の前や後に処理を組み込むためのものです。基底のインターフェースとしてIInterceptor が用意されており、組み込みポイント毎にさらに継承したインターフェースが用意されています。インターセプターを登録するにはDatabase.Interceptors プロパティに実装クラスのインスタンスを追加します。次に各インターセプターの紹介をします。クエリの実行前、実行後に呼び出されます私はクエリのロギングのために使っています。コネクションが開いた、閉じたときに呼ばれるようです(使ったことない)例外発生時に呼ばれます。例外ログを残したり、
一意制約違反判定を行い一意制約違反であれば別例外にラップしてスローといった使い方を私はしています。クエリ自動生成によるInsert, Update, Delete時に呼ばれます。
false を返すと実行を中止します。私は共通列への値のセットを行うために使っています。トランザクションの開始、コミット、ロールバックで呼ばれるようです。(使ったことない)


