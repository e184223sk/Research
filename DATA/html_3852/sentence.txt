More than 1 year has passed since last update.　　
　　
　　
この記事は『プログラミング完全未経験からUnityでの開発現場に迎え入れてもらえた世界一の幸せ者』の記事です。そのつもりでお読みください。
　　[SteamVR Pluginを使うフェード]←こちらです。前回の記事を活かして作りました。→3Dでのフェード他にもやり方はありますが、今回はVRのカメラとは別にサブカメラを用意する方法を書きます。サブカメラにキャンバス(UI)のみ映る設定をします。
Culling MaskでUI以外のチェックをはずせばOKです。
Culling Maskは描画するオブジェクトをレイヤーごとに設定できる便利なプロパティーです。つぎに、
・サブカメラの描画順を最後(一番目に近い位置)にする
・背景が二つのカメラで描画される(片方のカメラに映る背景が片方のカメラの映像を塗りつぶす)ことを防ぐ
上記2点を設定します。

このとても上手な絵を見れば一目瞭然だと思いますが、
メインカメラ、サブカメラで描画する順番があります。私は最初聞いたとき描画とか言われてもイメージしづらいと感じました。
なので、絵のように物理的に距離があるものだと考えるようにしました。
目に近い位置のもの(描画順が遅いもの)が一番手前に描画される、といった理解の仕方です。※以後、描画順の違いに物理的な距離の違いがあるような説明をしますが
　そんなものはありませんのでご注意ください。ただのイメージですしかし、カメラの場合、目に近いほう(サブカメラ)にもメインカメラと同じ背景が映りこみます。
(Culling Maskで背景の描画は消せません)それにより、サブカメラに映った背景が、メインカメラより目に近い位置で描画されるので
メインカメラの映像を上から塗りつぶしてしまいます。
(ここの説明はややこしいので声に出して5回くらい読んでください)この塗りつぶしを防ぐために
Clear FlagsをDepth onlyにします。
背景が上書きされることがなくなります。ただし、Depthというパラメーターの確認をしてください。
数字の小さい順番で先に描画される(目から遠くなる)ので今回の場合は
メインカメラの方がサブカメラよりDepthが小さくないといけません。
(おそらく勝手にそうなってます)
長々と説明しましたが、設定項目としてはこれだけです。コードの解説も書きたいことが多くて長くなりそうなので
明日続き書きます。
続き→こちらです


