<!DOCTYPE html><html><head><meta charset="utf-8" /><title>パーサジェネレーターLIME入門その３(単項演算子にマッチさせる) - Qiita</title><meta content="width=device-width,initial-scale=1,shrink-to-fit=no,viewport-fit=cover" name="viewport" /><meta content="#55c500" name="theme-color" /><meta content="XWpkTG32-_C4joZoJ_UsmDUi-zaH-hcrjF6ZC_FoFbk" name="google-site-verification" /><meta content="telephone=no" name="format-detection" /><link rel="canonical" href="https://qiita.com/ryu_shizumi/items/c4aeffe2afc4416fcb69" /><link href="/manifest.json" rel="manifest" /><link href="/opensearch.xml" rel="search" title="Qiita" type="application/opensearchdescription+xml" /><link as="script" href="https://www.googletagservices.com/tag/js/gpt.js" rel="preload" /><link href="https://securepubads.g.doubleclick.net" rel="preconnect" /><script async="" src="https://www.googletagservices.com/tag/js/gpt.js"></script><meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="ssaWHUS3yn6Lgv8MtaUg1Na0rl5xprC8gCRhSqMJXyDoBtNGWq0TVAd84stC0LgeVFgeDYMe8iNUuOJ1jjQZ9w==" /><link rel="shortcut icon" type="image/x-icon" href="https://cdn.qiita.com/assets/favicons/public/production-c620d3e403342b1022967ba5e3db1aaa.ico" /><link rel="apple-touch-icon" type="image/png" href="https://cdn.qiita.com/assets/favicons/public/apple-touch-icon-ec5ba42a24ae923f16825592efdc356f.png" /><link rel="stylesheet" media="all" href="https://cdn.qiita.com/assets/public/article-2eaa7dbedc42a8ea65c722cda46d0ebb.min.css" /><script src="https://cdn.qiita.com/assets/public/v3-article-bundle-63de2d91fef827269d3f6b958db2335b.min.js" defer="defer"></script><meta name="twitter:card" content="summary_large_image"><meta content="@Qiita" name="twitter:site" /><meta content="@ryu_shizumi" name="twitter:creator" /><meta property="og:type" content="article"><meta property="og:title" content="パーサジェネレーターLIME入門その３(単項演算子にマッチさせる) - Qiita"><meta property="og:image" content="https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0&amp;w=1200&amp;mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND00NE9SNDRPODQ0SzE0NEs0NDRLbjQ0T040NE9zNDRPODQ0S180NE84VEVsTlJlV0ZwZW1XZ09PQm5lT0JydS04a3lqbGpaanBvSVhtdkpUbnJwZmxyWkRqZ2F2amc1N2pnNFBqZzRIamdaWGpnWnZqZ29zcCZ0eHQtY29sb3I9JTIzMzMzJnR4dC1mb250PUhpcmFnaW5vJTIwU2FucyUyMFc2JnR4dC1zaXplPTU0JnR4dC1jbGlwPWVsbGlwc2lzJnR4dC1hbGlnbj1jZW50ZXIlMkNtaWRkbGUmcz1kYWQzYzE1YzQ5MjM0M2JhYTFjMjJkZDBlNmQ2MDY4Mw&amp;mark-align=center%2Cmiddle&amp;blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RSEo1ZFY5emFHbDZkVzFwJnR4dC1jb2xvcj0lMjMzMzMmdHh0LWZvbnQ9SGlyYWdpbm8lMjBTYW5zJTIwVzYmdHh0LXNpemU9NDUmdHh0LWFsaWduPXJpZ2h0JTJDYm90dG9tJnM9ZWY0N2ExZDI3OTU2NWUxZGJmMjNmODg5NGRiZjBhZTI&amp;blend-align=center%2Cmiddle&amp;blend-mode=normal&amp;s=7d117f1ee2a1750202e2cd71636648ce"><meta property="og:description" content="この記事は
パーサジェネレーターLIME入門
パーサジェネレーターLIME入門その２(二項演算式にマッチさせる)
の続きになります。

今回は「後置デクリメント」「前置デクリメント」「前置マイナス」といった単項演算子にマッチさせる定義..."><meta content="https://qiita.com/ryu_shizumi/items/c4aeffe2afc4416fcb69" property="og:url" /><meta content="Qiita" property="og:site_name" /><meta content="564524038" property="fb:admins" /><meta content="C#,構文解析,パーサジェネレータ" name="keywords" /><script>!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window, document,'script',
'https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '668972150489891');
fbq('track', 'PageView');</script><style data-emotion-css="17jxvjw 11t2ec1 1dvr2p8 18lkoru 1g4cku8 1iupg5d ijvq0v 15cocm3 12rp90f 115f4t 1b8uj5v 79elbk 16hhh7b fcbn8c 1gj7nt 154zy0m yikrym 1jqivyb 1ode1bp le4d8r 1hbd3g7 1nzh4zz 38fzdi helsa7 8qb8m4 2imjyh he5w1s 70qvj9 3ojehk 100alwu 1dtnjt5 10ougpm 1ay9vb9 m19uds cgzq40 1wa99t2 1l3zk9f 4czcte 1yzj1fm 1uv1qiv 109dbrr 5jpx49 mnxgyc 1vlpknv fsjkhv 1b17vb0 7i7f4d"}>.css-17jxvjw{display:grid;display:-ms-grid;grid-template-columns:80px minmax(0,1fr) 300px;-ms-grid-columns:80px minmax(0,1fr) 300px;grid-template-rows:minmax(270px,auto) 1fr;-ms-grid-rows:minmax(270px,auto) 1fr;max-width:1280px;margin-right:auto;margin-left:auto;padding-top:24px;padding-right:24px;padding-left:24px;}@media (max-width:1200px){.css-17jxvjw{padding-bottom:0;padding-left:0;padding-right:0;}}@media (max-width:992px){.css-17jxvjw{grid-template-columns:80px 452px 300px;-ms-grid-columns:80px 452px 300px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}}@media (max-width:770px){.css-17jxvjw{display:block;}}@media (max-width:480px){.css-17jxvjw{padding-top:0;}}.css-11t2ec1{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;z-index:5;position:-webkit-sticky;position:sticky;top:calc(56px + 24px + 16px + 32px - 16px);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:16px;width:80px;}.css-11t2ec1:after{content:'';display:table;}.css-11t2ec1:before{content:'';display:table;}@media (max-width:770px){.css-11t2ec1{display:none;}}.css-1dvr2p8{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-18lkoru{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;background-color:#FFFFFF;}.css-1g4cku8{display:inline-block;vertical-align:middle;height:20px;width:20px;fill:#55C500;}.css-1iupg5d{color:#55C500;cursor:pointer;font-size:14px;font-weight:bold;}.css-ijvq0v{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-15cocm3{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#FFFFFF;border:2px solid #6E6F70;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:2px 0px 0px;width:40px;}.css-12rp90f{display:inline-block;vertical-align:bottom;height:17.77777777777778px;width:16px;fill:#6E6F70;}.css-115f4t{color:#6E6F70;font-size:14px;font-weight:bold;}.css-1b8uj5v{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;margin-bottom:16px;padding:0;}.css-79elbk{position:relative;}.css-16hhh7b{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;padding:0;}.css-fcbn8c{display:none;bottom:initial;left:initial;right:initial;top:initial;left:100%;top:calc(-8px - (14px * 1.8) - 16px - 4px);}.css-1gj7nt{color:rgba(0,0,0,0.6);font-size:14px;font-weight:bold;line-height:1.8;padding:8px 16px;}.css-154zy0m{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.87);cursor:pointer;font-size:16px;font-weight:normal;line-height:1.8;padding:4px 16px;}.css-154zy0m:hover{-webkit-text-decoration:none;text-decoration:none;background-color:#F2F2F2;}.css-yikrym{width:20px;}.css-1jqivyb{color:rgba(0,0,0,0.6);font-size:13px;}.css-1ode1bp{background-color:rgba(0,0,0,0.12);height:1px;width:100%;margin:8px 0;}.css-le4d8r{display:inline-block;vertical-align:middle;height:13px;width:13px;fill:rgba(0,0,0,0.6);}.css-1hbd3g7{height:250px;}.css-1nzh4zz{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:16px 32px;background-color:#FBE69E;color:rgba(0,0,0,0.87);line-height:1.5;font-weight:600;}@media (max-width:770px){.css-1nzh4zz{padding:16px;}}.css-38fzdi{color:#CA832A;margin-right:4px;}.css-helsa7{background-color:#FFFFFF;padding:32px;margin-bottom:24px;}@media (max-width:992px){.css-helsa7{margin:0 auto 40px;}}@media (max-width:480px){.css-helsa7{margin:0 0 40px;padding:32px 16px;}}.css-8qb8m4{margin-bottom:48px;}.css-2imjyh{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-he5w1s{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;width:100%;}@media (max-width:770px){.css-he5w1s{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}}.css-70qvj9{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.css-3ojehk{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;margin-right:4px;}.css-100alwu{display:inline-block;border-radius:50%;line-height:1;overflow:hidden;vertical-align:middle;}.css-1dtnjt5{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-10ougpm{color:rgba(0,0,0,0.87);font-size:14px;font-weight:600;line-height:1.8;margin-right:4px;text-wrap:break-word;word-break:break-all;}.css-1ay9vb9{margin-right:16px;}.css-m19uds{color:rgba(0,0,0,0.6);font-size:14px;line-height:1.8;}.css-cgzq40{color:rgba(0,0,0,0.87);font-size:32px;font-weight:bold;line-height:1.4;margin-top:8px;text-wrap:break-word;word-break:break-all;}.css-1wa99t2{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.6);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:8px;}.css-1l3zk9f{color:rgba(0,0,0,0.6);font-size:20px;margin-right:8px;}.css-4czcte{margin-right:4px;color:inherit;font-size:14px;line-height:1.8;}.css-4czcte:not(:last-child)::after{content:',';margin-right:4px;}.css-1yzj1fm{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:32px;}.css-1uv1qiv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-size:20px;height:32px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin-right:16px;outline:none;padding:0;width:32px;}.css-109dbrr{background-color:#F9F9F9;border-top:1px solid rgba(0,0,0,0.12);bottom:0;box-shadow:0px 1px 4px rgba(0,0,0,0.14);display:none;height:calc(env(safe-area-inset-bottom,0px) + 56px);-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding-bottom:env(safe-area-inset-bottom);position:-webkit-sticky;position:sticky;width:100%;z-index:2000;}@media (max-width:770px){.css-109dbrr{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}.css-5jpx49{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:space-evenly;-webkit-justify-content:space-evenly;-ms-flex-pack:space-evenly;justify-content:space-evenly;width:100%;}.css-mnxgyc{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1vlpknv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;margin-right:4px;background-color:#FFFFFF;}.css-fsjkhv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1b17vb0{color:#6E6F70;font-size:14px;font-weight:bold;margin-left:4px;}.css-7i7f4d{display:none;bottom:initial;left:initial;right:initial;top:initial;bottom:32px;right:0;}</style></head><body><div class="allWrapper"><div><div id="GlobalHeader-react-component-dae10740-b48f-496d-93b8-787b44508a19"><div class="st-Header"><div class="st-Header_container"><div class="st-Header_start"><a href="/" class="st-Header_logo"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 426.57 130"><circle cx="167.08" cy="21.4" r="12.28"></circle><path d="M250.81 29.66h23.48v18.9h-23.48z"></path><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z"></path><circle cx="216.33" cy="21.4" r="12.28"></circle></svg></a><div class="st-Header_communitySelector" tabindex="0"><span class="fa fa-caret-down"></span></div><div class="st-Header_dropdown"><div class="st-Header_dropdownHeading">Qiita Teams that are logged in</div><div class="st-Header_dropdownItemNote">You are not logged in to any team</div><hr class="st-Header_dropdownDivider st-Header_dropdownDivider-shrink"/><a href="https://teams-center.qiita.com/find_team" class="st-Header_dropdownItem"><span class="fa fa-fw fa-sign-in st-Header_dropdownItemIcon"></span><div>Log in to Qiita Team</div></a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Community</div><a href="/organizations" class="st-Header_dropdownItem">Organization</a><a href="/official-events/open" class="st-Header_dropdownItem">Event</a><a href="/advent-calendar" class="st-Header_dropdownItem">Advent Calendar</a><a href="https://qiitadon.com/" class="st-Header_dropdownItem" target="_blank">Qiitadon (β)</a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Service</div><a href="https://jobs.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Jobs</a><a href="https://zine.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Zine</a><a href="https://blog.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Blog</a></div><form class="st-Header_search" action="/search" method="get"><span class="fa fa-search st-Header_searchIcon"></span><input type="search" class="st-Header_searchInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form><form class="st-Header_searchModal" action="/search" method="get"><input type="text" class="st-Header_searchModalInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form></div><div class="st-Header_end"><div class="st-Header_searchButton"><span class="fa fa-search"></span></div><a class="st-Header_signupButton" href="/signup?redirect_to=%2Fryu_shizumi%2Fitems%2Fc4aeffe2afc4416fcb69">Signup</a><a class="st-Header_loginLink" href="/login?redirect_to=%2Fryu_shizumi%2Fitems%2Fc4aeffe2afc4416fcb69">Login</a></div><div class="st-Header_overlay"></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="GlobalHeader" data-dom-id="GlobalHeader-react-component-dae10740-b48f-496d-93b8-787b44508a19">{"unreadNotificationsCount":null,"realms":[{"humanName":"Qiita","isCurrentRealm":true,"isQiita":true,"isQiitaTeam":false,"loggedInUser":null,"teamId":null,"url":"https://qiita.com/"}],"teamFindUrl":"https://teams-center.qiita.com/find_team","isTeamOnlyUser":null,"currentUser":null}</script>
      
</div><div class="st-HeaderAlert st-HeaderAlert-warning"><div class="st-HeaderAlert_body"></div></div><script type="application/ld+json">{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"/","name":"Qiita"}},{"@type":"ListItem","position":2,"item":{"@id":"/tags/csharp","name":"C#"}}]}</script><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","datePublished":"2019-01-24T19:57:16.000+09:00","dateModified":"2020-01-07T15:34:20.000+09:00","headline":"パーサジェネレーターLIME入門その３(単項演算子にマッチさせる)","image":"https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0\u0026w=1200\u0026mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND00NE9SNDRPODQ0SzE0NEs0NDRLbjQ0T040NE9zNDRPODQ0S180NE84VEVsTlJlV0ZwZW1XZ09PQm5lT0JydS04a3lqbGpaanBvSVhtdkpUbnJwZmxyWkRqZ2F2amc1N2pnNFBqZzRIamdaWGpnWnZqZ29zcCZ0eHQtY29sb3I9JTIzMzMzJnR4dC1mb250PUhpcmFnaW5vJTIwU2FucyUyMFc2JnR4dC1zaXplPTU0JnR4dC1jbGlwPWVsbGlwc2lzJnR4dC1hbGlnbj1jZW50ZXIlMkNtaWRkbGUmcz1kYWQzYzE1YzQ5MjM0M2JhYTFjMjJkZDBlNmQ2MDY4Mw\u0026mark-align=center%2Cmiddle\u0026blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RSEo1ZFY5emFHbDZkVzFwJnR4dC1jb2xvcj0lMjMzMzMmdHh0LWZvbnQ9SGlyYWdpbm8lMjBTYW5zJTIwVzYmdHh0LXNpemU9NDUmdHh0LWFsaWduPXJpZ2h0JTJDYm90dG9tJnM9ZWY0N2ExZDI3OTU2NWUxZGJmMjNmODg5NGRiZjBhZTI\u0026blend-align=center%2Cmiddle\u0026blend-mode=normal\u0026s=7d117f1ee2a1750202e2cd71636648ce","mainEntityOfPage":"https://qiita.com/ryu_shizumi/items/c4aeffe2afc4416fcb69","author":{"@type":"Person","address":"大阪府堺市","email":null,"identifier":"ryu_shizumi","name":"ryu_shizumi","image":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F325854%2Fprofile-images%2F1544756979?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=0f9142524ffa07b953d06412bf3ad22a","url":"https://qiita.com/ryu_shizumi","description":"ホビープログラマー23年生。\r\n言語の自作に専念すべく退社。\r\n背水の陣で挑みます。\r\n貯金を食い潰すのが先か言語ができるのが先か？\r\nワイ君の明日はどっちだ？\r\n\r\ntwitter : https://twitter.com/ryu_shizumi","memberOf":[]},"publisher":{"@type":"Organization","name":"Qiita","logo":{"@type":"ImageObject","url":"//cdn.qiita.com/assets/public/qiita-logo-c39ded593afa388e2e1ba435b110554e.png"}}}</script><style type="text/css">.wb-CampaignLink {
  background-color: #333333;
  width: 100%;
}

.wb-CampaignLink_container {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  max-width: 1100px;
  margin: 0 auto;
  font-size: 13px;
  padding: 0.8em;
}
.wb-CampaignLink_container > a {
  color: #fff;
}

.wb-CampaignLink_container > a:hover {
  text-decoration: underline;
}</style><div class="wb-CampaignLink"><div class="wb-CampaignLink_container"><a target="_blank" id="header_text_message_1" href="https://zine.qiita.com/interview/202107-hitachi-3/?utm_source=qiita&amp;utm_medium=header-banner">日立の研究者が、2年間ドイツ人工知能研究センターで学んだこと</a><a target="_blank" id="header_text_message_2" href="https://zine.qiita.com/interview/202107-hitachi-3/?utm_source=qiita&amp;utm_medium=header-banner">詳しくはこちら</a></div><script>td.trackEvent(
  'front_events',
  {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"ryu_shizumi","type":"items","id":"c4aeffe2afc4416fcb69"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Show","data":{"message":"日立の研究者が、2年間ドイツ人工知能研究センターで学んだこと","url":"https://zine.qiita.com/interview/202107-hitachi-3/?utm_source=qiita\u0026utm_medium=header-banner","sub_message":"詳しくはこちら"}}
)</script><script>document.getElementById('header_text_message_1').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"ryu_shizumi","type":"items","id":"c4aeffe2afc4416fcb69"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":0,"pos_id":"header_text_message_1","message":"日立の研究者が、2年間ドイツ人工知能研究センターで学んだこと","url":"https://zine.qiita.com/interview/202107-hitachi-3/?utm_source=qiita\u0026utm_medium=header-banner","sub_message":"詳しくはこちら"}}
  )
})</script><script>document.getElementById('header_text_message_2').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"ryu_shizumi","type":"items","id":"c4aeffe2afc4416fcb69"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":0,"pos_id":"header_text_message_2","message":"日立の研究者が、2年間ドイツ人工知能研究センターで学んだこと","url":"https://zine.qiita.com/interview/202107-hitachi-3/?utm_source=qiita\u0026utm_medium=header-banner","sub_message":"詳しくはこちら"}}
  )
})</script></div><script type="application/json" id="js-react-on-rails-context">{"railsEnv":"production","inMailer":false,"i18nLocale":"en","i18nDefaultLocale":"en","href":"https://qiita.com/ryu_shizumi/items/c4aeffe2afc4416fcb69","location":"/ryu_shizumi/items/c4aeffe2afc4416fcb69","scheme":"https","host":"qiita.com","port":null,"pathname":"/ryu_shizumi/items/c4aeffe2afc4416fcb69","search":null,"httpAcceptLanguage":null,"actionPath":"public/items#show","settings":{"analyticsTrackingId":"UA-24675221-12","assetsMap":{},"csrfToken":"Pg5HGytimKumPHzqpUTP4FaWEsdhYnnaT4KnX2w9FmhkzgJANXhBgSrCYS1SMVcq1HqilJPaO0WbHiRgQQBQvw==","locale":"en"},"currentUser":null,"isLoggedIn":false,"recaptchaSiteKey":"6LfNkiQTAAAAAM3UGnSquBy2akTITGNMO_QDxMw6","serverSide":false}</script>
<div id="PersonalArticlePage-react-component-40e1a8ab-fc56-4418-88a0-45f4bfe93849"><div class="p-items_wrapper"><div class=" css-17jxvjw"><div class="css-11t2ec1"><div class="css-1dvr2p8"><button class=" css-18lkoru"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/ryu_shizumi/items/c4aeffe2afc4416fcb69/likers" class="css-1iupg5d">0</a></div><div class="css-ijvq0v"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-115f4t">0</span></div><div class="css-1b8uj5v"><span class="fa fa-twitter"></span></div><div class="css-1b8uj5v"><span class="fa fa-facebook"></span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-fcbn8c"><div class="css-1gj7nt">Improve article</div><a href="/drafts/c4aeffe2afc4416fcb69/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/ryu_shizumi/items/c4aeffe2afc4416fcb69/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/ryu_shizumi/items/c4aeffe2afc4416fcb69/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/ryu_shizumi/items/c4aeffe2afc4416fcb69/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/ryu_shizumi/items/c4aeffe2afc4416fcb69.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div><div class="p-items_options"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_toc"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_main"><div class="css-1nzh4zz"><span class="fa fa-fw fa-warning css-38fzdi"></span><p>More than 1 year has passed since last update.</p></div><div class="css-helsa7"><div class="css-8qb8m4"><div class="css-2imjyh"><div class="css-he5w1s"><div class="css-70qvj9"><div class="css-3ojehk"><a href="/ryu_shizumi"><img class="css-100alwu eyfquo10" src="https://qiita-image-store.s3.amazonaws.com/0/325854/profile-images/1544756979" width="24" height="24" loading="lazy"/></a></div><div class="css-1dtnjt5"><a href="/ryu_shizumi" class="css-10ougpm">@<!-- -->ryu_shizumi</a><div class="css-1ay9vb9"><span><meta content="2019-01-24T10:57:16Z"/><time dateTime="2020-01-07T06:34:20Z" class="css-m19uds">updated at 2020-01-07</time></span></div></div></div></div></div><h1 class="css-cgzq40">パーサジェネレーターLIME入門その３(単項演算子にマッチさせる)</h1><div class="css-1wa99t2"><span class="fa fa-tags mr-1of2 css-1l3zk9f" aria-hidden="true"></span><a href="/tags/csharp" class="css-4czcte">C#</a><a href="/tags/%e6%a7%8b%e6%96%87%e8%a7%a3%e6%9e%90" class="css-4czcte">構文解析</a><a href="/tags/%e3%83%91%e3%83%bc%e3%82%b5%e3%82%b8%e3%82%a7%e3%83%8d%e3%83%ac%e3%83%bc%e3%82%bf" class="css-4czcte">パーサジェネレータ</a></div></div><section class="it-MdContent"><div id="personal-public-article-body"><div><p>この記事は<br>
<a href="https://qiita.com/ryu_shizumi/items/254c09736526878e4639" id="reference-b5ee9f5c2028bd82c22b">パーサジェネレーターLIME入門</a><br>
<a href="https://qiita.com/ryu_shizumi/items/f4ef3c016a8968516cfa" id="reference-5f276a54b308d8c0242c">パーサジェネレーターLIME入門その２(二項演算式にマッチさせる)</a><br>
の続きになります。</p>

<p>今回は「後置デクリメント」「前置デクリメント」「前置マイナス」といった単項演算子にマッチさせる定義と、単項と二項演算の減算が複合する Nnn----Aaa のような式を正確にマッチングさせる方法を解説します。</p>

<h1>
<span id="今回大事になる用語の説明" class="fragment"></span><a href="#%E4%BB%8A%E5%9B%9E%E5%A4%A7%E4%BA%8B%E3%81%AB%E3%81%AA%E3%82%8B%E7%94%A8%E8%AA%9E%E3%81%AE%E8%AA%AC%E6%98%8E"><i class="fa fa-link"></i></a>今回大事になる用語の説明</h1>

<p>「オペレータ」は演算子、「オペランド」は演算の対象です。</p>

<p>例えば<code>810+114514</code> という二項演算式の場合、<br>
<code>810</code>は「左オペランド」<br>
<code>+</code>が「オペーレータ(演算子)」<br>
<code>114514</code>は「右オペランド」となります。</p>

<p>演算子とオペランドが合わさった式を「演算式」と呼ぶ事にします。</p>

<h1>
<span id="式expression-と-文statement-の違い" class="fragment"></span><a href="#%E5%BC%8Fexpression-%E3%81%A8-%E6%96%87statement-%E3%81%AE%E9%81%95%E3%81%84"><i class="fa fa-link"></i></a>式(expression) と 文(statement) の違い</h1>

<p>オペランドになれたり変数に代入できるものが「式」です。<br>
実は整数リテラルも識別子も、オペランドになれたり変数に代入できるので式です。</p>

<p>オペランドになれないし変数に代入できないものが「文」です。<br>
そもそも「変数に代入できない」という事は「代入演算のオペランドになれない」という事です。<br>
今回は代入演算文を実装します。</p>

<h1>
<span id="--と--の連続に注意" class="fragment"></span><a href="#--%E3%81%A8--%E3%81%AE%E9%80%A3%E7%B6%9A%E3%81%AB%E6%B3%A8%E6%84%8F"><i class="fa fa-link"></i></a><code>-</code> と <code>+</code> の連続に注意</h1>

<table>
<thead>
<tr>
<th>演算式</th>
<th>解釈</th>
<th>備考</th>
</tr>
</thead>
<tbody>
<tr>
<td>-Aaa</td>
<td>符号反転</td>
<td></td>
</tr>
<tr>
<td>--Aaa</td>
<td>前置デクリメント</td>
<td>「マイナスのマイナス」は不可</td>
</tr>
<tr>
<td>---Aaa</td>
<td>-(--Aaa) 後置デクリメントの符号反転</td>
<td>--(-Aaa) は不可</td>
</tr>
<tr>
<td>----Aaa</td>
<td>解釈不能</td>
<td>-の連発は４個以上全て不可</td>
</tr>
<tr>
<td>+Aaa</td>
<td>符号そのまま</td>
<td></td>
</tr>
<tr>
<td>++Aaa</td>
<td>前置インクリメント</td>
<td>「プラスのプラスは不可」</td>
</tr>
<tr>
<td>+++Aaa</td>
<td>+(++Aaa) 後置インクリメントの符号そのまま</td>
<td>++(+Aaa) は不可</td>
</tr>
<tr>
<td>++++Aaa</td>
<td>解釈不能</td>
<td>+の連発は４個以上全て不可</td>
</tr>
</tbody>
</table>

<p>順に注意点を解説します。</p>

<h1>
<span id="マイナスのマイナスプラスのプラスは不可能" class="fragment"></span><a href="#%E3%83%9E%E3%82%A4%E3%83%8A%E3%82%B9%E3%81%AE%E3%83%9E%E3%82%A4%E3%83%8A%E3%82%B9%E3%83%97%E3%83%A9%E3%82%B9%E3%81%AE%E3%83%97%E3%83%A9%E3%82%B9%E3%81%AF%E4%B8%8D%E5%8F%AF%E8%83%BD"><i class="fa fa-link"></i></a>「マイナスのマイナス」「プラスのプラス」は不可能</h1>

<p>--Aaa を「マイナスのマイナス」と解釈してしまっては前置デクリメントを表現する手段が無くなってしまいます。<br>
++Aaa を「プラスのプラス」と解釈してしまっては前置インクリメントを表現する手段が無くなってしまいます。</p>

<h1>
<span id="---aaa-や-aaa-と解釈してしまうのは不可" class="fragment"></span><a href="#---aaa-%E3%82%84-aaa-%E3%81%A8%E8%A7%A3%E9%87%88%E3%81%97%E3%81%A6%E3%81%97%E3%81%BE%E3%81%86%E3%81%AE%E3%81%AF%E4%B8%8D%E5%8F%AF"><i class="fa fa-link"></i></a>--(-Aaa) や ++(+Aaa) と解釈してしまうのは不可</h1>

<p>インクリメントやデクリメントのオペランドは書き込み可能変数・書き込み可能プロパティ・書き込み可能インデクサーである必要があるからです。<br>
-(--Aaa) や +(++Aaa) という解釈なら成り立ちます。</p>

<p>…理論上は確かに成り立つのですが、世間に存在するIDEやコンパイラの中には +++Aaa や ---Aaaを受理しないものがあります。Visual Studioも対応していません。<br>
恐らくは構文解析の前段階となる「字句解析(正規表現でソースコードを最小単位に分割する)」の段階で「早い段階で見つかった最長一致」という原則に基づいて <code>++ +Aaa</code> や <code>-- -Aaa</code> と分割している為と思われます。</p>

<p>一方LIMEは正規表現に頼る必要が無いので字句解析の段階はありません。<br>
１文字単位からパターンを構築する事が可能で、かつ、取り得る可能性の全ての状態を同時に保持しながらマッチングを実行します。<br>
取り得る可能性を勝手に切り捨てないので、複数の解釈が成り立つ場合はマッチ結果を複数返すという動作をします。<br>
デクリメント演算式やインクリメント演算式のオペランドとして変数・プロパティ・インデクサのみを指定するパターンを定義する事で --(-Aaa) や ++(+Aaa) と誤解釈する可能性を無くしつつ -(--Aaa) や +(++Aaa) と解釈するマッチングが可能です。</p>

<h1>
<span id="----aaa-や-aaaはなぜ不可能なのか" class="fragment"></span><a href="#----aaa-%E3%82%84-aaa%E3%81%AF%E3%81%AA%E3%81%9C%E4%B8%8D%E5%8F%AF%E8%83%BD%E3%81%AA%E3%81%AE%E3%81%8B"><i class="fa fa-link"></i></a>----Aaa や ++++Aaaはなぜ不可能なのか？</h1>

<p>まずは ----Aaa を考えます。<br>
括弧を補ってみましょう。<br>
-(-(-(-Aaa))) マイナスのマイナスのマイナスのマイナス。論外です。<br>
--(-(-Aaa)) マイナスのマイナスのデクリメント。論外です。<br>
-(-(--Aaa)) デクリメントのマイナスのマイナス。論外です。</p>

<p>--(--Aaa) デクリメントのデクリメント も不可能です。<br>
(--Aaa) の部分はは代入不能な一時変数です。--(代入不能式) は成り立ちません。</p>

<p>結局----Aaaはどうやっても成り立ちません。<br>
同様の理由で++++Aaaも成り立たないのはもう説明不要でしょう。</p>

<h1>
<span id="次は二項演算の場合" class="fragment"></span><a href="#%E6%AC%A1%E3%81%AF%E4%BA%8C%E9%A0%85%E6%BC%94%E7%AE%97%E3%81%AE%E5%A0%B4%E5%90%88"><i class="fa fa-link"></i></a>次は二項演算の場合</h1>

<p><code>-</code> も <code>+</code> も要諦は同じなので今回は<code>-</code>だけを示します。</p>

<table>
<thead>
<tr>
<th>演算式</th>
<th>解釈</th>
</tr>
</thead>
<tbody>
<tr>
<td>Aaa-Bbb</td>
<td>(Aaa)-(Bbb)</td>
</tr>
<tr>
<td>Aaa--Bbb</td>
<td>(Aaa)-(-Bbb)</td>
</tr>
<tr>
<td>Aaa---Bbb</td>
<td>(Aaa)-(--Bbb) 又は (Aaa--)-(Bbb)</td>
</tr>
<tr>
<td>Aaa----Bbb</td>
<td>(Aaa)-(-(--Bbb)) 又は (Aaa--)-(-Bbb)</td>
</tr>
<tr>
<td>Aaa-----Bbb</td>
<td>(Aaa--)-(--Bbb)</td>
</tr>
<tr>
<td>Aaa------Bbb</td>
<td>(Aaa--)-(-(--Bbb))</td>
</tr>
<tr>
<td>Aaa-------Bbb</td>
<td>解釈不能</td>
</tr>
</tbody>
</table>

<p><code>-</code>の連発は６連発まで可能で、７連発以上は不可能となります。</p>

<p>３連発と４連発はそれぞれ解釈が２通りあり、それぞれが正しいと言えます。<br>
どちらを採用するかは言語仕様によりますが、今回は３連発なら (Aaa--)-(Bbb) を採用し、４連発なら (Aaa--)-(-Bbb) を採用する事にします。</p>

<h1>
<span id="採用しない方の解釈にマッチさせない方法は" class="fragment"></span><a href="#%E6%8E%A1%E7%94%A8%E3%81%97%E3%81%AA%E3%81%84%E6%96%B9%E3%81%AE%E8%A7%A3%E9%87%88%E3%81%AB%E3%83%9E%E3%83%83%E3%83%81%E3%81%95%E3%81%9B%E3%81%AA%E3%81%84%E6%96%B9%E6%B3%95%E3%81%AF"><i class="fa fa-link"></i></a>採用しない方の解釈にマッチさせない方法は？</h1>

<p>先の述べたようにLIMEは複数のマッチ結果を返す可能性があります。<br>
現時点でのLIMEの実装では「マッチさせない」はできませんが、「一旦マッチさせておいて後で破棄する」は可能です。<br>
要するにパターンマッチングで合致してしまったマッチは別の検査方法で改めてふるい落とす事になります。<br>
ふるい落とす方法は一旦棚上げしてマッチャーの実装に進みます。</p>

<p>以上、例外的に対応しなければならない単項演算および単項と二項の複合を挙げました。</p>

<h1>
<span id="実装する演算式の一覧" class="fragment"></span><a href="#%E5%AE%9F%E8%A3%85%E3%81%99%E3%82%8B%E6%BC%94%E7%AE%97%E5%BC%8F%E3%81%AE%E4%B8%80%E8%A6%A7"><i class="fa fa-link"></i></a>実装する演算式の一覧</h1>

<p>今回より整数値が複数ケタに対応します。<br>
<code>(5+9)</code>のように丸括弧で括って優先順位を高める式を「括弧式」と命名して導入します。<br>
メンバアクセス式・関数呼び出し式・インデックスアクセス式も導入します。<br>
インクリメント・デクリメント・メンバアクセス式のオペランドとして識別子が必要になります。<br>
代入演算も導入します。</p>

<p>今回実装する演算式の優先順位としては下記の通りです。<br>
演算子の優先順位は<a href="https://docs.microsoft.com/ja-jp/dotnet/csharp/language-reference/operators/" rel="nofollow noopener" target="_blank">C# 演算子</a>に従っています。</p>

<table>
<thead>
<tr>
<th>優先順位</th>
<th>項数</th>
<th>種類</th>
<th>許容するオペランド</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td></td>
<td>リテラル値式</td>
<td>各種リテラル値</td>
</tr>
<tr>
<td>1</td>
<td></td>
<td>識別子</td>
<td>(無し)</td>
</tr>
<tr>
<td>1</td>
<td>単項</td>
<td>括弧式</td>
<td>代入可能式以外の全ての式</td>
</tr>
<tr>
<td>1</td>
<td></td>
<td>代入可能式</td>
<td>識別子・メンバアクセス式・インデックスアクセス式・代入可能式を括弧で括ったもの</td>
</tr>
<tr>
<td>1</td>
<td>単項</td>
<td>関数呼び出し式</td>
<td>関数呼び出し式・インデックスアクセス・入可能式。各引数は全ての演算式を許容する</td>
</tr>
<tr>
<td>1</td>
<td>単項</td>
<td>インデックスアクセス式</td>
<td>関数呼び出し式・インデックスアクセス・代入可能式。各引数は全ての演算式を許容する</td>
</tr>
<tr>
<td>1</td>
<td>単項</td>
<td>後置デクリメント式</td>
<td>代入可能式</td>
</tr>
<tr>
<td>1</td>
<td>単項</td>
<td>後置インクリメント式</td>
<td>代入可能式</td>
</tr>
<tr>
<td>1</td>
<td>二項</td>
<td>メンバアクセス式</td>
<td>左オペランドは&lt;1&gt; 。右オペランドは識別子</td>
</tr>
<tr>
<td>1</td>
<td></td>
<td>(1)  (優先順位1)</td>
<td>リテラル値式・識別子・括弧式・代入可能式・関数呼び出し式・インデックスアクセス式・後置デクリメント式・後置インクリメント式・メンバアクセス式</td>
</tr>
<tr>
<td>2</td>
<td>単項</td>
<td>前置デクリメント式</td>
<td>代入可能式</td>
</tr>
<tr>
<td>2</td>
<td>単項</td>
<td>前置インクリメント式</td>
<td>代入可能式</td>
</tr>
<tr>
<td>2</td>
<td>単項</td>
<td>前置マイナス式</td>
<td>(1)・前置デクリメント式・前置インクリメント式・前置プラス式</td>
</tr>
<tr>
<td>2</td>
<td>単項</td>
<td>前置プラス式</td>
<td>(1)・前置デクリメント式・前置インクリメント式・前置マイナス式</td>
</tr>
<tr>
<td>2</td>
<td></td>
<td>(2)  (優先順位2より高い)</td>
<td>(1)・前置デクリメント式・前置インクリメント式・前置マイナス式・前置プラス式</td>
</tr>
<tr>
<td>3</td>
<td>二項</td>
<td>乗除算式</td>
<td>左オペランドは(3)。右オペランドは(2)</td>
</tr>
<tr>
<td>3</td>
<td></td>
<td>(3)  (優先順位3より高い)</td>
<td>&lt;2&gt;・乗除算式</td>
</tr>
<tr>
<td>4</td>
<td>二項</td>
<td>加減算式</td>
<td>左オペランドは(4)。右オペランドは(3)</td>
</tr>
<tr>
<td>4</td>
<td></td>
<td>(4)  (優先順位4より高い)</td>
<td>(3)・加減算式</td>
</tr>
<tr>
<td>999</td>
<td>二項</td>
<td>代入文</td>
<td>左オペランドは代入可能式。右オペランドは優先順位4を超えるの全て</td>
</tr>
</tbody>
</table>

<p>前回解説した二項演算式の場合はオペランドは<br>
「自分と同等以上の優先度の演算式」か「自分を超える優先度の演算式」でした。<br>
今回の表では優先順位3～999に当たります。</p>

<p>優先順位2以上は前回までの常識が通じません。同じ優先度の式であっても同一に扱う事はできません。<br>
ですがこのようにキチンと明文化できるならば実装は可能です。</p>

<h1>
<span id="リテラル値式" class="fragment"></span><a href="#%E3%83%AA%E3%83%86%E3%83%A9%E3%83%AB%E5%80%A4%E5%BC%8F"><i class="fa fa-link"></i></a>リテラル値式</h1>

<p>今回の場合該当するのは整数値だけですが、実用的な言語のパーサを実装するなら浮動小数点数・文字・文字列に加えて配列リテラルやラムダ式もこれに該当します。</p>

<h1>
<span id="識別子" class="fragment"></span><a href="#%E8%AD%98%E5%88%A5%E5%AD%90"><i class="fa fa-link"></i></a>識別子</h1>

<p>先頭はアンダースコアかアルファベット、２文字目以降は数字も使えます。<br>
C#のように日本語でも有効という仕様は今回は考えません。</p>

<h1>
<span id="括弧式" class="fragment"></span><a href="#%E6%8B%AC%E5%BC%A7%E5%BC%8F"><i class="fa fa-link"></i></a>括弧式</h1>

<p>優先順位が最優先の整数値・識別子に並ぶという点が重要です。<br>
代入可能式を括弧で括ったものは代入可能式に含め、括弧式に含めません。<br>
代入可能式を除外しないと優先順位の関係で<code>(6)++</code>のような式を許す事になってしまいます。</p>

<h1>
<span id="代入可能式" class="fragment"></span><a href="#%E4%BB%A3%E5%85%A5%E5%8F%AF%E8%83%BD%E5%BC%8F"><i class="fa fa-link"></i></a>代入可能式</h1>

<p>これは演算ではなく複数の要素をまとめただけです。<br>
インクリメント・デクリメント・代入文のオペランドになれます。<br>
<code>(Aaa)++</code>や<code>(((Aaa)))++</code>のように括弧で括った状態にも対処する為に、括弧で括った代入可能式もまた代入可能式に含めています。</p>

<h1>
<span id="関数呼び出し式" class="fragment"></span><a href="#%E9%96%A2%E6%95%B0%E5%91%BC%E3%81%B3%E5%87%BA%E3%81%97%E5%BC%8F"><i class="fa fa-link"></i></a>関数呼び出し式</h1>

<p><code>Fff(5,8)</code>のように関数型の値に引数を与えて実行して値を得る演算です。<br>
0個以上の引数をカンマで区切る事とします。<br>
<code>Fff</code>の部分がオペランドとなります。<br>
関数型の値になり得ない整数値・インクリメント演算式・デクリメント演算式はオペランドになれません。<br>
引数リストの中身は全ての演算式が許可されます。<br>
関数呼び出し式が関数型を返すならば<code>Fff(5,8)(4)</code>のようにいくつでも連結する可能性があります。</p>

<h1>
<span id="インデックスアクセス式" class="fragment"></span><a href="#%E3%82%A4%E3%83%B3%E3%83%87%E3%83%83%E3%82%AF%E3%82%B9%E3%82%A2%E3%82%AF%E3%82%BB%E3%82%B9%E5%BC%8F"><i class="fa fa-link"></i></a>インデックスアクセス式</h1>

<p><code>Aaa[5]</code>のようにインデックスでAaaの内部データにアクセスする演算です。<br>
そもそも「インデックスアクセス式」という名称が正しいのかわかりませんがこう呼んでおく事にします。<br>
1個以上の引数をカンマで区切る事とします。<br>
引数リストの中身は全ての演算式が許可されます。これは関数呼び出し式と共通です。<br>
<code>Aaa[5][8]</code>のようにいくつでも連結する可能性がある事も関数呼び出し式と共通です。</p>

<h1>
<span id="メンバアクセス式" class="fragment"></span><a href="#%E3%83%A1%E3%83%B3%E3%83%90%E3%82%A2%E3%82%AF%E3%82%BB%E3%82%B9%E5%BC%8F"><i class="fa fa-link"></i></a>メンバアクセス式</h1>

<p><code>Aaa.Length</code>のようにメンバを呼び出す式です。<br>
左オペランドは「自分と同等以上の優先度の演算式」という二項演算の普通のルールに則っています。<br>
右オペランドとなるメンバ名は識別子のみとなります。<br>
Swift言語のようにメンバ名として数値を許可する特別な仕様の言語もありますが、今回は考えない事とします。</p>

<h1>
<span id="1" class="fragment"></span><a href="#1"><i class="fa fa-link"></i></a>(1)</h1>

<p>これは演算ではなく優先順位1の式をまとめただけです。</p>

<h1>
<span id="後置デクリメント式後置インクリメント式前置デクリメント式前置インクリメント式" class="fragment"></span><a href="#%E5%BE%8C%E7%BD%AE%E3%83%87%E3%82%AF%E3%83%AA%E3%83%A1%E3%83%B3%E3%83%88%E5%BC%8F%E5%BE%8C%E7%BD%AE%E3%82%A4%E3%83%B3%E3%82%AF%E3%83%AA%E3%83%A1%E3%83%B3%E3%83%88%E5%BC%8F%E5%89%8D%E7%BD%AE%E3%83%87%E3%82%AF%E3%83%AA%E3%83%A1%E3%83%B3%E3%83%88%E5%BC%8F%E5%89%8D%E7%BD%AE%E3%82%A4%E3%83%B3%E3%82%AF%E3%83%AA%E3%83%A1%E3%83%B3%E3%83%88%E5%BC%8F"><i class="fa fa-link"></i></a>後置デクリメント式・後置インクリメント式・前置デクリメント式・前置インクリメント式</h1>

<p>前置と後置で優先順位に差があります。<br>
<code>++Aaa.ToString()</code>という式は「前置インクリメントのオペランドが代入不能なのでアウト」です。<br>
優先順位2の前置インクリメントより優先順位1のメンバアクセス式・関数呼び出し式が優先されます。</p>

<p><code>Aaa++.ToString()</code>という式は許されます。後置インクリメントはメンバアクセスのオペランドになり得ます。</p>

<h1>
<span id="前置マイナス式" class="fragment"></span><a href="#%E5%89%8D%E7%BD%AE%E3%83%9E%E3%82%A4%E3%83%8A%E3%82%B9%E5%BC%8F"><i class="fa fa-link"></i></a>前置マイナス式</h1>

<p>前置マイナス式を含まない優先順位2以上がオペランドになります。</p>

<h1>
<span id="前置プラス式" class="fragment"></span><a href="#%E5%89%8D%E7%BD%AE%E3%83%97%E3%83%A9%E3%82%B9%E5%BC%8F"><i class="fa fa-link"></i></a>前置プラス式</h1>

<p>前置プラス式を含まない優先順位2以上がオペランドになります。</p>

<h1>
<span id="2" class="fragment"></span><a href="#2"><i class="fa fa-link"></i></a>(2)</h1>

<p>これも演算ではなく優先順位2以上の式をまとめただけです。<br>
優先順位2以上なので&lt;1&gt;を含む定義となっています。</p>

<h1>
<span id="乗除算式加減算式" class="fragment"></span><a href="#%E4%B9%97%E9%99%A4%E7%AE%97%E5%BC%8F%E5%8A%A0%E6%B8%9B%E7%AE%97%E5%BC%8F"><i class="fa fa-link"></i></a>乗除算式・加減算式</h1>

<p>前回解説した二項演算式です。<br>
前回一般化した通り、左オペランドは自分と同等以上の式、右オペランドは自分を超える優先度の式となります。<br>
もしシフト演算や論理和などを表に組み込みたい場合は加減算と代入文の間に挿入する事になります。</p>

<h1>
<span id="代入文" class="fragment"></span><a href="#%E4%BB%A3%E5%85%A5%E6%96%87"><i class="fa fa-link"></i></a>代入文</h1>

<p>二項演算で最も優先順位の低いものがこの代入文です。<br>
式ではなく文なのでどの式のオペランドにもなれません。<br>
代入文自体は代入文のオペランドにはなれませんので<code>Aaa=Bbb=1+4</code>のような書き方はできません。</p>

<h1>
<span id="優先順位1000より先とは" class="fragment"></span><a href="#%E5%84%AA%E5%85%88%E9%A0%86%E4%BD%8D1000%E3%82%88%E3%82%8A%E5%85%88%E3%81%A8%E3%81%AF"><i class="fa fa-link"></i></a>優先順位1000より先とは？</h1>

<p>変数宣言文・if文・switch文・try文 などといった「文」が該当します。</p>

<p>例えば<code>var Aaa=1+2</code>といった変数宣言文の場合、宣言文は代入文より低い優先順位が必要になります。<br>
「優先順位が低い」という事を言い換えると「自分より優先順位が高い要素を部品として取り込める」です。<br>
この例では変数宣言文の一部として代入文を取り込んでいますし、代入文の一部として加減算式を取り込んでいます。</p>

<p>文をゼロ個以上取り込む事で「関数宣言文」が定義可能になります。<br>
関数宣言文も含めた文を取り込んで「クラス宣言文」を定義可能です。<br>
クラス宣言文も含めた文を取り込んで「名前空間宣言文」を定義可能です。<br>
名前空間宣言文も含めた文を取り込んで「●●言語のソースコード」を定義可能です。</p>

<p>「●●言語のソースコード」として定義したマッチャーに文字列を入力してマッチすればパースできた事になります。</p>

<h1>
<span id="ラムダ式は表のどこに入るのか" class="fragment"></span><a href="#%E3%83%A9%E3%83%A0%E3%83%80%E5%BC%8F%E3%81%AF%E8%A1%A8%E3%81%AE%E3%81%A9%E3%81%93%E3%81%AB%E5%85%A5%E3%82%8B%E3%81%AE%E3%81%8B"><i class="fa fa-link"></i></a>ラムダ式は表のどこに入るのか？</h1>

<p>リテラル値式として処理する事になります。</p>

<h1>
<span id="構文解析のついでに型検査もできるんじゃないの" class="fragment"></span><a href="#%E6%A7%8B%E6%96%87%E8%A7%A3%E6%9E%90%E3%81%AE%E3%81%A4%E3%81%84%E3%81%A7%E3%81%AB%E5%9E%8B%E6%A4%9C%E6%9F%BB%E3%82%82%E3%81%A7%E3%81%8D%E3%82%8B%E3%82%93%E3%81%98%E3%82%83%E3%81%AA%E3%81%84%E3%81%AE"><i class="fa fa-link"></i></a>構文解析のついでに型検査もできるんじゃないの？</h1>

<p>そんなふうに考えていた時期が俺にもありました。<br>
結論から言うとできません。</p>

<p>確かに<code>133</code>はint型と確定できますし<code>133+986</code>もint型と確定できますが、識別子の型は確定できません。<br>
識別子の型を確定するのは構文解析の先の段階です。<br>
<code>()=&gt;{1+2}++</code>といったトンチンカンなソースコードでも構文解析の段階では一旦受け入れておいて、その先の段階でエラー扱いにする事になります。</p>

<h1>
<span id="実装" class="fragment"></span><a href="#%E5%AE%9F%E8%A3%85"><i class="fa fa-link"></i></a>実装</h1>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre><code>
<span class="c1">//</span>
<span class="c1">// 優先度１</span>
<span class="c1">//</span>

<span class="c1">// 整数値</span>
<span class="n">Matcher</span> <span class="n">Number</span> <span class="p">=</span> <span class="sc">'1'</span><span class="p">.</span><span class="nf">To</span><span class="p">(</span><span class="sc">'9'</span><span class="p">)</span> <span class="p">+</span> <span class="sc">'0'</span><span class="p">.</span><span class="nf">To</span><span class="p">(</span><span class="sc">'9'</span><span class="p">).</span><span class="nf">_0Max</span><span class="p">();</span>
<span class="c1">//アルファベット</span>
<span class="n">Matcher</span> <span class="n">Alphabet</span> <span class="p">=</span> <span class="p">(</span><span class="sc">'A'</span><span class="p">.</span><span class="nf">To</span><span class="p">(</span><span class="sc">'Z'</span><span class="p">)</span> <span class="p">|</span> <span class="sc">'a'</span><span class="p">.</span><span class="nf">To</span><span class="p">(</span><span class="sc">'z'</span><span class="p">));</span>
<span class="c1">// 識別子</span>
<span class="n">Matcher</span> <span class="n">Identifier</span> <span class="p">=</span> <span class="p">(</span><span class="n">Alphabet</span> <span class="p">|</span> <span class="sc">'_'</span><span class="p">)</span> <span class="p">+</span> <span class="p">(</span><span class="n">Alphabet</span> <span class="p">|</span> <span class="sc">'0'</span><span class="p">.</span><span class="nf">To</span><span class="p">(</span><span class="sc">'9'</span><span class="p">)</span> <span class="p">|</span> <span class="sc">'_'</span><span class="p">).</span><span class="nf">_0Max</span><span class="p">();</span>

<span class="c1">// 「リテラル値式」のマッチャーを作る。(但し中身は空っぽ)</span>
<span class="n">RecursionMatcher</span> <span class="n">LiteralExp</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RecursionMatcher</span><span class="p">();</span>

<span class="c1">// 「括弧式」のマッチャーを作る。(但し中身は空っぽ)</span>
<span class="n">RecursionMatcher</span> <span class="n">ParenExp</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RecursionMatcher</span><span class="p">();</span>

<span class="c1">// 「代入可能式」のマッチャーを作る。(但し中身は空っぽ)</span>
<span class="n">RecursionMatcher</span> <span class="n">AssignableExp</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RecursionMatcher</span><span class="p">();</span>

<span class="c1">// 「関数呼び出し式」のマッチャーを作る。(但し中身は空っぽ)</span>
<span class="n">RecursionMatcher</span> <span class="n">FunctionCallExp</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RecursionMatcher</span><span class="p">();</span>

<span class="c1">// 「メンバアクセス式」のマッチャーを作る。(但し中身は空っぽ)</span>
<span class="n">RecursionMatcher</span> <span class="n">MemberAccessExp</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RecursionMatcher</span><span class="p">();</span>

<span class="c1">// 「インデックスアクセス式」のマッチャーを作る。(但し中身は空っぽ)</span>
<span class="n">RecursionMatcher</span> <span class="n">IndexAccessExp</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RecursionMatcher</span><span class="p">();</span>

<span class="c1">// 「後置デクリメント」のマッチャーを作る。(但し中身は空っぽ)</span>
<span class="n">Matcher</span> <span class="n">PostDecrementExp</span> <span class="p">=</span> <span class="n">AssignableExp</span> <span class="p">+</span> <span class="s">"--"</span><span class="p">;</span>

<span class="c1">// 「後置インクリメント」のマッチャーを作る。(但し中身は空っぽ)</span>
<span class="n">Matcher</span> <span class="n">PostIncrementExp</span> <span class="p">=</span> <span class="n">AssignableExp</span> <span class="p">+</span> <span class="s">"++"</span><span class="p">;</span>

<span class="c1">// 優先順位１式</span>
<span class="n">Matcher</span> <span class="n">Priority1Exp</span> <span class="p">=</span> <span class="n">LiteralExp</span> <span class="p">|</span> <span class="n">Identifier</span> <span class="p">|</span> <span class="n">ParenExp</span> <span class="p">|</span> <span class="n">AssignableExp</span> <span class="p">|</span> 
    <span class="n">FunctionCallExp</span> <span class="p">|</span> <span class="n">IndexAccessExp</span> <span class="p">|</span> <span class="n">MemberAccessExp</span> <span class="p">|</span> <span class="n">PostDecrementExp</span> <span class="p">|</span> <span class="n">PostIncrementExp</span> <span class="p">;</span>


<span class="c1">//</span>
<span class="c1">// 優先度２</span>
<span class="c1">//</span>

<span class="c1">// 「前置デクリメント」のマッチャーを作る。(但し中身は空っぽ)</span>
<span class="n">Matcher</span> <span class="n">PreDecrementExp</span> <span class="p">=</span> <span class="s">"--"</span> <span class="p">+</span> <span class="n">AssignableExp</span><span class="p">;</span>

<span class="c1">// 「前置インクリメント」のマッチャーを作る。(但し中身は空っぽ)</span>
<span class="n">Matcher</span> <span class="n">PreIncrementExp</span> <span class="p">=</span> <span class="s">"++"</span> <span class="p">+</span> <span class="n">AssignableExp</span><span class="p">;</span>

<span class="c1">// 「前置マイナス」のマッチャーを作る。(但し中身は空っぽ)</span>
<span class="n">RecursionMatcher</span> <span class="n">PreMinusExp</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RecursionMatcher</span><span class="p">();</span>

<span class="c1">// 「前置プラス」のマッチャーを作る。(但し中身は空っぽ)</span>
<span class="n">RecursionMatcher</span> <span class="n">PrePlusExp</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RecursionMatcher</span><span class="p">();</span>

<span class="c1">// 優先順位２式</span>
<span class="n">Matcher</span> <span class="n">Priority2Exp</span> <span class="p">=</span> <span class="n">PreDecrementExp</span> <span class="p">|</span> <span class="n">PreIncrementExp</span> <span class="p">|</span> <span class="n">PreMinusExp</span> <span class="p">|</span> <span class="n">PrePlusExp</span> <span class="p">;</span>

<span class="c1">// 優先順位２以上式</span>
<span class="n">Matcher</span> <span class="n">PriorityAbove2Exp</span> <span class="p">=</span> <span class="n">Priority1Exp</span> <span class="p">|</span> <span class="n">Priority2Exp</span> <span class="p">;</span>


<span class="c1">//</span>
<span class="c1">// 優先度３</span>
<span class="c1">//</span>

<span class="c1">// 「乗除算式」のマッチャーを作る。(但し中身は空っぽ)</span>
<span class="n">RecursionMatcher</span> <span class="n">MulDivExp</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RecursionMatcher</span><span class="p">();</span>

<span class="c1">// 優先順位３式</span>
<span class="n">Matcher</span> <span class="n">Priority3Exp</span> <span class="p">=</span> <span class="n">MulDivExp</span> <span class="p">;</span>

<span class="c1">// 優先順位３以上式</span>
<span class="n">Matcher</span> <span class="n">PriorityAbove3Exp</span> <span class="p">=</span> <span class="n">PriorityAbove2Exp</span> <span class="p">|</span> <span class="n">Priority3Exp</span> <span class="p">;</span>


<span class="c1">//</span>
<span class="c1">// 優先度４</span>
<span class="c1">//</span>

<span class="c1">// 「加減算式」のマッチャーを作る。(但し中身は空っぽ)</span>
<span class="n">RecursionMatcher</span> <span class="n">AddSubExp</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RecursionMatcher</span><span class="p">();</span>

<span class="c1">// 優先順位４式</span>
<span class="n">Matcher</span> <span class="n">Priority4Exp</span> <span class="p">=</span> <span class="n">AddSubExp</span> <span class="p">;</span>

<span class="c1">// 優先順位４式</span>
<span class="n">Matcher</span> <span class="n">PriorityAbove4Exp</span> <span class="p">=</span> <span class="n">PriorityAbove3Exp</span> <span class="p">|</span> <span class="n">Priority4Exp</span> <span class="p">;</span>

<span class="c1">//</span>
<span class="c1">// (優先順位の低い演算子を増やしたい場合はここに挿入する。)</span>
<span class="c1">//</span>

<span class="c1">// 式の全て</span>
<span class="n">Matcher</span> <span class="n">Exp</span> <span class="p">=</span> <span class="n">PriorityAbove4Exp</span><span class="p">;</span>

<span class="c1">//</span>
<span class="c1">// 優先度９９９</span>
<span class="c1">//</span>

<span class="c1">// 代入演算文</span>
<span class="n">Matcher</span> <span class="n">AssignStatement</span> <span class="p">=</span> <span class="n">AssignableExp</span> <span class="p">+</span> <span class="sc">'='</span> <span class="p">+</span> <span class="n">Exp</span><span class="p">;</span>


<span class="c1">//</span>
<span class="c1">// 以下、中身が未設定なマッチャーの中身を設定</span>
<span class="c1">//</span>

<span class="c1">// 括弧式の中身</span>
<span class="n">ParenExp</span><span class="p">.</span><span class="n">Inner</span> <span class="p">=</span> <span class="sc">'('</span> <span class="p">+</span> 
    <span class="p">(</span>
    <span class="c1">// 代入可能式を除く優先順位１式</span>
    <span class="n">LiteralExp</span> <span class="p">|</span> <span class="n">Identifier</span> <span class="p">|</span> <span class="n">ParenExp</span> <span class="p">|</span> <span class="n">FunctionCallExp</span> <span class="p">|</span> 
    <span class="n">IndexAccessExp</span> <span class="p">|</span> <span class="n">MemberAccessExp</span> <span class="p">|</span> <span class="n">PostDecrementExp</span> <span class="p">|</span> <span class="n">PostIncrementExp</span> <span class="p">|</span>

    <span class="c1">// 優先順位２以下の全ての式</span>
    <span class="n">Priority2Exp</span> <span class="p">|</span> <span class="n">Priority3Exp</span> <span class="p">|</span> <span class="n">Priority4Exp</span>
    <span class="p">)</span>
     <span class="p">+</span> <span class="sc">')'</span><span class="p">;</span>

<span class="c1">// 代入可能式の中身</span>
<span class="n">AssignableExp</span><span class="p">.</span><span class="n">Inner</span> <span class="p">=</span> <span class="n">Identifier</span> <span class="p">|</span> <span class="n">MemberAccessExp</span> <span class="p">|</span> <span class="n">IndexAccessExp</span> <span class="p">|</span> <span class="p">(</span> <span class="sc">'('</span> <span class="p">+</span> <span class="n">AssignableExp</span> <span class="p">+</span> <span class="sc">')'</span> <span class="p">);</span>

<span class="c1">// 関数呼び出し式の中身</span>
<span class="n">FunctionCallExp</span><span class="p">.</span><span class="n">Inner</span> <span class="p">=</span> <span class="p">(</span><span class="n">FunctionCallExp</span> <span class="p">|</span> <span class="n">IndexAccessExp</span> <span class="p">|</span> <span class="n">AssignableExp</span><span class="p">)</span> <span class="p">+</span> <span class="sc">'('</span> <span class="p">+</span> <span class="n">Exp</span><span class="p">.</span><span class="nf">_0Max</span><span class="p">(</span><span class="sc">','</span><span class="p">)</span> <span class="p">+</span> <span class="sc">')'</span><span class="p">;</span>

<span class="c1">// インデックスアクセス式の中身</span>
<span class="n">IndexAccessExp</span><span class="p">.</span><span class="n">Inner</span> <span class="p">=</span> <span class="p">(</span><span class="n">FunctionCallExp</span> <span class="p">|</span> <span class="n">IndexAccessExp</span> <span class="p">|</span> <span class="n">AssignableExp</span><span class="p">)</span> <span class="p">+</span> <span class="sc">'['</span> <span class="p">+</span> <span class="n">Exp</span><span class="p">.</span><span class="nf">_1Max</span><span class="p">(</span><span class="sc">','</span><span class="p">)</span> <span class="p">+</span> <span class="sc">']'</span><span class="p">;</span>

<span class="c1">// メンバアクセス式の中身</span>
<span class="n">MemberAccessExp</span><span class="p">.</span><span class="n">Inner</span> <span class="p">=</span> <span class="n">Priority1Exp</span> <span class="p">+</span> <span class="sc">'.'</span> <span class="p">+</span> <span class="n">Identifier</span><span class="p">;</span>

<span class="c1">// 前置マイナス式の中身</span>
<span class="n">PreMinusExp</span><span class="p">.</span><span class="n">Inner</span> <span class="p">=</span> <span class="sc">'-'</span> <span class="p">+</span> <span class="p">(</span><span class="n">Priority1Exp</span> <span class="p">|</span> <span class="n">PreDecrementExp</span> <span class="p">|</span> <span class="n">PreIncrementExp</span> <span class="p">|</span> <span class="n">PrePlusExp</span><span class="p">);</span>

<span class="c1">// 前置プラス式の中身</span>
<span class="n">PrePlusExp</span><span class="p">.</span><span class="n">Inner</span> <span class="p">=</span> <span class="sc">'+'</span> <span class="p">+</span> <span class="p">(</span><span class="n">Priority1Exp</span> <span class="p">|</span> <span class="n">PreDecrementExp</span> <span class="p">|</span> <span class="n">PreIncrementExp</span> <span class="p">|</span> <span class="n">PreMinusExp</span><span class="p">);</span>

<span class="c1">// 乗除算式の中身</span>
<span class="n">MulDivExp</span><span class="p">.</span><span class="n">Inner</span> <span class="p">=</span>  <span class="n">PriorityAbove3Exp</span> <span class="p">+</span> <span class="p">(</span><span class="sc">'*'</span><span class="p">.</span><span class="nf">_</span><span class="p">()</span> <span class="p">|</span> <span class="sc">'/'</span><span class="p">)</span> <span class="p">+</span> <span class="n">PriorityAbove2Exp</span><span class="p">;</span>

<span class="c1">// 加減算式の中身</span>
<span class="n">AddSubExp</span><span class="p">.</span><span class="n">Inner</span> <span class="p">=</span>  <span class="n">PriorityAbove4Exp</span> <span class="p">+</span> <span class="p">(</span><span class="sc">'+'</span><span class="p">.</span><span class="nf">_</span><span class="p">()</span> <span class="p">|</span> <span class="sc">'-'</span><span class="p">)</span> <span class="p">+</span> <span class="n">PriorityAbove3Exp</span><span class="p">;</span>
</code></pre></div></div>

<p>関数呼び出しやインデックスアクセスでデリミタとしてカンマを指定しています。<br>
MatcherのTimes()や_0Max()や_1Max()がデリミタ指定に対応している仕様は引数リストの定義を簡潔に記述する為です。</p>

<p>Matcher と宣言するか RecursionMatcher と宣言するかの使い分けは、宣言した時点で初期化できるか否かです。<br>
実は全ての宣言を RecursionMatcher でまとめて行い、後から中身をまとめて設定する事も可能です。</p>

<h1>
<span id="次回の予定" class="fragment"></span><a href="#%E6%AC%A1%E5%9B%9E%E3%81%AE%E4%BA%88%E5%AE%9A"><i class="fa fa-link"></i></a>次回の予定</h1>

<p>LIMEの動作原理を解説する予定です。</p>

<h1>
<span id="20190303-追記" class="fragment"></span><a href="#20190303-%E8%BF%BD%E8%A8%98"><i class="fa fa-link"></i></a>2019/03/03 追記</h1>

<p>続きができました。<br>
<a href="https://qiita.com/ryu_shizumi/items/cbdbda211555e84dadd0" id="reference-fcfb905d4d5d01dd7478">パーサジェネレーターLIME入門その４(マッチング動作の原理)</a></p>
</div></div></section><div class="css-1yzj1fm"><div class="css-1uv1qiv"><span class="fa fa-twitter"></span></div><div class="css-1uv1qiv"><span class="fa fa-facebook"></span></div></div><div class="apm-Content"><div class="apm-Content_title">Why not register and get more from Qiita?</div><ol class="apm-Content_list"><li>We will deliver articles that match you<div class="description">By following users and tags, you can catch up information on technical fields that you are interested in as a whole</div></li><li>you can read useful information later efficiently<div class="description">By &quot;stocking&quot; the articles you like, you can search right away</div></li><div><a class="apm-Content_help" href="https://help.qiita.com/ja/articles/qiita-login-user" target="_blank"><i class="fa fa-fw fa-arrow-circle-right"></i>What you can do with signing up</a></div></ol><a href="/signup?callback_action=login_or_signup&amp;redirect_to=%2Fryu_shizumi%2Fitems%2Fc4aeffe2afc4416fcb69&amp;realm=qiita" class="apm-Content_button apm-Content_button-signup">Sign up</a><a href="/login?callback_action=login_or_signup&amp;redirect_to=%2Fryu_shizumi%2Fitems%2Fc4aeffe2afc4416fcb69&amp;realm=qiita" class="apm-Content_button apm-Content_button-signin">Login</a></div></div><div class="css-helsa7"></div></div></div></div><div class="css-109dbrr"><div class="css-5jpx49"><div class="css-mnxgyc"><button class=" css-1vlpknv"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/ryu_shizumi/items/c4aeffe2afc4416fcb69/likers" class="css-1iupg5d">0</a></div><div class="css-fsjkhv"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-1b17vb0">0</span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-7i7f4d"><div class="css-1gj7nt">Improve article</div><a href="/drafts/c4aeffe2afc4416fcb69/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/ryu_shizumi/items/c4aeffe2afc4416fcb69/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/ryu_shizumi/items/c4aeffe2afc4416fcb69/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/ryu_shizumi/items/c4aeffe2afc4416fcb69/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/ryu_shizumi/items/c4aeffe2afc4416fcb69.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="PersonalArticlePage" data-dom-id="PersonalArticlePage-react-component-40e1a8ab-fc56-4418-88a0-45f4bfe93849">{"authorAnalyticsTrackingId":null,"organizationAnalyticsTrackingId":null}</script>
      
<footer id="globalFooter" class="st-Footer"><div class="st-Footer_container"><div class="st-Footer_start"><div class="st-Footer_logo"><svg viewbox="0 0 426.57 130" xmlns="http://www.w3.org/2000/svg"><circle cx="167.08" cy="21.4" r="12.28" /><path d="M250.81 29.66h23.48v18.9h-23.48z" /><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z" /><circle cx="216.33" cy="21.4" r="12.28" /></svg></div><div class="st-Footer_catchcopy">How developers code is here.</div><div class="st-Footer_socials"><a class="fa fa-twitter" href="https://twitter.com/qiita"></a><a class="fa fa-facebook-square" href="https://www.facebook.com/qiita/"></a></div></div><div class="st-Footer_end"><div class="st-Footer_qiita"><div class="st-Footer_label">Qiita</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="/about">About</a><a href="/terms">Terms</a><a href="/privacy">Privacy</a><a target="_blank" href="http://help.qiita.com/ja/articles/qiita-community-guideline">Guideline</a><a target="_blank" href="https://help.qiita.com/ja/articles/others-brand-guideline">Design Guideline</a></div><div class="st-Footer_column"><a href="/release-notes">Release</a><a href="/api/v2/docs">API</a><a href="/feedback/new">ご意見</a><a href="https://help.qiita.com">Help</a><a target="_blank" href="https://qiita.com/ads?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Advertisement</a></div></div></div><div class="st-Footer_increments"><div class="st-Footer_label">Increments</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="https://increments.co.jp/company/">About</a><a href="https://increments.co.jp/jobs/">採用情報</a><a href="https://blog.qiita.com">Blog</a></div><div class="st-Footer_column"><a href="https://teams.qiita.com/">Qiita Team</a><a href="https://jobs.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Jobs</a><a href="https://zine.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Zine</a></div></div></div></div></div><div class="st-Footer_copyright">© 2011-2021 Increments Inc.</div></footer><div id="Snackbar-react-component-171f6c4e-0f37-4e9f-8acb-1de68e7403d7"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="Snackbar" data-dom-id="Snackbar-react-component-171f6c4e-0f37-4e9f-8acb-1de68e7403d7">{}</script>
      
<div id="LoginModal-react-component-fc0bd1b9-947d-4ba0-b2e5-93464a6df693"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="LoginModal" data-dom-id="LoginModal-react-component-fc0bd1b9-947d-4ba0-b2e5-93464a6df693">{}</script>
      
<div id="StockModal-react-component-7ed101c5-7d67-4ad2-a01c-de1dd2391bb3"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="StockModal" data-dom-id="StockModal-react-component-7ed101c5-7d67-4ad2-a01c-de1dd2391bb3">{}</script>
      
</div><div id="dataContainer" style="display: none;" data-config="{&quot;actionPath&quot;:&quot;public/items#show&quot;,&quot;settings&quot;:{&quot;analyticsTrackingId&quot;:&quot;UA-24675221-12&quot;,&quot;assetsMap&quot;:{},&quot;csrfToken&quot;:&quot;l3at5zTw5lR9xJBjOHmuV3/21oaa2y71qlvW4CvUv5jNtui8Kuo/fvE6jaTPDDad/Rpm1WhjbGp+x1XfBun5Tw==&quot;,&quot;locale&quot;:&quot;en&quot;},&quot;currentUser&quot;:null}" /></body></html><script type="application/json" data-js-react-on-rails-store="AppStoreWithReactOnRails">{"snackbar":{"type":"","body":"","isActive":false},"article":{"article":{"body":"\u003cp\u003eこの記事は\u003cbr\u003e\n\u003ca href=\"https://qiita.com/ryu_shizumi/items/254c09736526878e4639\" id=\"reference-b5ee9f5c2028bd82c22b\"\u003eパーサジェネレーターLIME入門\u003c/a\u003e\u003cbr\u003e\n\u003ca href=\"https://qiita.com/ryu_shizumi/items/f4ef3c016a8968516cfa\" id=\"reference-5f276a54b308d8c0242c\"\u003eパーサジェネレーターLIME入門その２(二項演算式にマッチさせる)\u003c/a\u003e\u003cbr\u003e\nの続きになります。\u003c/p\u003e\n\n\u003cp\u003e今回は「後置デクリメント」「前置デクリメント」「前置マイナス」といった単項演算子にマッチさせる定義と、単項と二項演算の減算が複合する Nnn----Aaa のような式を正確にマッチングさせる方法を解説します。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"今回大事になる用語の説明\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E4%BB%8A%E5%9B%9E%E5%A4%A7%E4%BA%8B%E3%81%AB%E3%81%AA%E3%82%8B%E7%94%A8%E8%AA%9E%E3%81%AE%E8%AA%AC%E6%98%8E\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e今回大事になる用語の説明\u003c/h1\u003e\n\n\u003cp\u003e「オペレータ」は演算子、「オペランド」は演算の対象です。\u003c/p\u003e\n\n\u003cp\u003e例えば\u003ccode\u003e810+114514\u003c/code\u003e という二項演算式の場合、\u003cbr\u003e\n\u003ccode\u003e810\u003c/code\u003eは「左オペランド」\u003cbr\u003e\n\u003ccode\u003e+\u003c/code\u003eが「オペーレータ(演算子)」\u003cbr\u003e\n\u003ccode\u003e114514\u003c/code\u003eは「右オペランド」となります。\u003c/p\u003e\n\n\u003cp\u003e演算子とオペランドが合わさった式を「演算式」と呼ぶ事にします。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"式expression-と-文statement-の違い\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%BC%8Fexpression-%E3%81%A8-%E6%96%87statement-%E3%81%AE%E9%81%95%E3%81%84\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e式(expression) と 文(statement) の違い\u003c/h1\u003e\n\n\u003cp\u003eオペランドになれたり変数に代入できるものが「式」です。\u003cbr\u003e\n実は整数リテラルも識別子も、オペランドになれたり変数に代入できるので式です。\u003c/p\u003e\n\n\u003cp\u003eオペランドになれないし変数に代入できないものが「文」です。\u003cbr\u003e\nそもそも「変数に代入できない」という事は「代入演算のオペランドになれない」という事です。\u003cbr\u003e\n今回は代入演算文を実装します。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"--と--の連続に注意\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#--%E3%81%A8--%E3%81%AE%E9%80%A3%E7%B6%9A%E3%81%AB%E6%B3%A8%E6%84%8F\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003ccode\u003e-\u003c/code\u003e と \u003ccode\u003e+\u003c/code\u003e の連続に注意\u003c/h1\u003e\n\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003e演算式\u003c/th\u003e\n\u003cth\u003e解釈\u003c/th\u003e\n\u003cth\u003e備考\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003e-Aaa\u003c/td\u003e\n\u003ctd\u003e符号反転\u003c/td\u003e\n\u003ctd\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e--Aaa\u003c/td\u003e\n\u003ctd\u003e前置デクリメント\u003c/td\u003e\n\u003ctd\u003e「マイナスのマイナス」は不可\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e---Aaa\u003c/td\u003e\n\u003ctd\u003e-(--Aaa) 後置デクリメントの符号反転\u003c/td\u003e\n\u003ctd\u003e--(-Aaa) は不可\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e----Aaa\u003c/td\u003e\n\u003ctd\u003e解釈不能\u003c/td\u003e\n\u003ctd\u003e-の連発は４個以上全て不可\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e+Aaa\u003c/td\u003e\n\u003ctd\u003e符号そのまま\u003c/td\u003e\n\u003ctd\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e++Aaa\u003c/td\u003e\n\u003ctd\u003e前置インクリメント\u003c/td\u003e\n\u003ctd\u003e「プラスのプラスは不可」\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e+++Aaa\u003c/td\u003e\n\u003ctd\u003e+(++Aaa) 後置インクリメントの符号そのまま\u003c/td\u003e\n\u003ctd\u003e++(+Aaa) は不可\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e++++Aaa\u003c/td\u003e\n\u003ctd\u003e解釈不能\u003c/td\u003e\n\u003ctd\u003e+の連発は４個以上全て不可\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\n\u003cp\u003e順に注意点を解説します。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"マイナスのマイナスプラスのプラスは不可能\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%9E%E3%82%A4%E3%83%8A%E3%82%B9%E3%81%AE%E3%83%9E%E3%82%A4%E3%83%8A%E3%82%B9%E3%83%97%E3%83%A9%E3%82%B9%E3%81%AE%E3%83%97%E3%83%A9%E3%82%B9%E3%81%AF%E4%B8%8D%E5%8F%AF%E8%83%BD\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e「マイナスのマイナス」「プラスのプラス」は不可能\u003c/h1\u003e\n\n\u003cp\u003e--Aaa を「マイナスのマイナス」と解釈してしまっては前置デクリメントを表現する手段が無くなってしまいます。\u003cbr\u003e\n++Aaa を「プラスのプラス」と解釈してしまっては前置インクリメントを表現する手段が無くなってしまいます。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"---aaa-や-aaa-と解釈してしまうのは不可\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#---aaa-%E3%82%84-aaa-%E3%81%A8%E8%A7%A3%E9%87%88%E3%81%97%E3%81%A6%E3%81%97%E3%81%BE%E3%81%86%E3%81%AE%E3%81%AF%E4%B8%8D%E5%8F%AF\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e--(-Aaa) や ++(+Aaa) と解釈してしまうのは不可\u003c/h1\u003e\n\n\u003cp\u003eインクリメントやデクリメントのオペランドは書き込み可能変数・書き込み可能プロパティ・書き込み可能インデクサーである必要があるからです。\u003cbr\u003e\n-(--Aaa) や +(++Aaa) という解釈なら成り立ちます。\u003c/p\u003e\n\n\u003cp\u003e…理論上は確かに成り立つのですが、世間に存在するIDEやコンパイラの中には +++Aaa や ---Aaaを受理しないものがあります。Visual Studioも対応していません。\u003cbr\u003e\n恐らくは構文解析の前段階となる「字句解析(正規表現でソースコードを最小単位に分割する)」の段階で「早い段階で見つかった最長一致」という原則に基づいて \u003ccode\u003e++ +Aaa\u003c/code\u003e や \u003ccode\u003e-- -Aaa\u003c/code\u003e と分割している為と思われます。\u003c/p\u003e\n\n\u003cp\u003e一方LIMEは正規表現に頼る必要が無いので字句解析の段階はありません。\u003cbr\u003e\n１文字単位からパターンを構築する事が可能で、かつ、取り得る可能性の全ての状態を同時に保持しながらマッチングを実行します。\u003cbr\u003e\n取り得る可能性を勝手に切り捨てないので、複数の解釈が成り立つ場合はマッチ結果を複数返すという動作をします。\u003cbr\u003e\nデクリメント演算式やインクリメント演算式のオペランドとして変数・プロパティ・インデクサのみを指定するパターンを定義する事で --(-Aaa) や ++(+Aaa) と誤解釈する可能性を無くしつつ -(--Aaa) や +(++Aaa) と解釈するマッチングが可能です。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"----aaa-や-aaaはなぜ不可能なのか\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#----aaa-%E3%82%84-aaa%E3%81%AF%E3%81%AA%E3%81%9C%E4%B8%8D%E5%8F%AF%E8%83%BD%E3%81%AA%E3%81%AE%E3%81%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e----Aaa や ++++Aaaはなぜ不可能なのか？\u003c/h1\u003e\n\n\u003cp\u003eまずは ----Aaa を考えます。\u003cbr\u003e\n括弧を補ってみましょう。\u003cbr\u003e\n-(-(-(-Aaa))) マイナスのマイナスのマイナスのマイナス。論外です。\u003cbr\u003e\n--(-(-Aaa)) マイナスのマイナスのデクリメント。論外です。\u003cbr\u003e\n-(-(--Aaa)) デクリメントのマイナスのマイナス。論外です。\u003c/p\u003e\n\n\u003cp\u003e--(--Aaa) デクリメントのデクリメント も不可能です。\u003cbr\u003e\n(--Aaa) の部分はは代入不能な一時変数です。--(代入不能式) は成り立ちません。\u003c/p\u003e\n\n\u003cp\u003e結局----Aaaはどうやっても成り立ちません。\u003cbr\u003e\n同様の理由で++++Aaaも成り立たないのはもう説明不要でしょう。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"次は二項演算の場合\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%AC%A1%E3%81%AF%E4%BA%8C%E9%A0%85%E6%BC%94%E7%AE%97%E3%81%AE%E5%A0%B4%E5%90%88\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e次は二項演算の場合\u003c/h1\u003e\n\n\u003cp\u003e\u003ccode\u003e-\u003c/code\u003e も \u003ccode\u003e+\u003c/code\u003e も要諦は同じなので今回は\u003ccode\u003e-\u003c/code\u003eだけを示します。\u003c/p\u003e\n\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003e演算式\u003c/th\u003e\n\u003cth\u003e解釈\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003eAaa-Bbb\u003c/td\u003e\n\u003ctd\u003e(Aaa)-(Bbb)\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eAaa--Bbb\u003c/td\u003e\n\u003ctd\u003e(Aaa)-(-Bbb)\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eAaa---Bbb\u003c/td\u003e\n\u003ctd\u003e(Aaa)-(--Bbb) 又は (Aaa--)-(Bbb)\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eAaa----Bbb\u003c/td\u003e\n\u003ctd\u003e(Aaa)-(-(--Bbb)) 又は (Aaa--)-(-Bbb)\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eAaa-----Bbb\u003c/td\u003e\n\u003ctd\u003e(Aaa--)-(--Bbb)\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eAaa------Bbb\u003c/td\u003e\n\u003ctd\u003e(Aaa--)-(-(--Bbb))\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eAaa-------Bbb\u003c/td\u003e\n\u003ctd\u003e解釈不能\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\n\u003cp\u003e\u003ccode\u003e-\u003c/code\u003eの連発は６連発まで可能で、７連発以上は不可能となります。\u003c/p\u003e\n\n\u003cp\u003e３連発と４連発はそれぞれ解釈が２通りあり、それぞれが正しいと言えます。\u003cbr\u003e\nどちらを採用するかは言語仕様によりますが、今回は３連発なら (Aaa--)-(Bbb) を採用し、４連発なら (Aaa--)-(-Bbb) を採用する事にします。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"採用しない方の解釈にマッチさせない方法は\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%8E%A1%E7%94%A8%E3%81%97%E3%81%AA%E3%81%84%E6%96%B9%E3%81%AE%E8%A7%A3%E9%87%88%E3%81%AB%E3%83%9E%E3%83%83%E3%83%81%E3%81%95%E3%81%9B%E3%81%AA%E3%81%84%E6%96%B9%E6%B3%95%E3%81%AF\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e採用しない方の解釈にマッチさせない方法は？\u003c/h1\u003e\n\n\u003cp\u003e先の述べたようにLIMEは複数のマッチ結果を返す可能性があります。\u003cbr\u003e\n現時点でのLIMEの実装では「マッチさせない」はできませんが、「一旦マッチさせておいて後で破棄する」は可能です。\u003cbr\u003e\n要するにパターンマッチングで合致してしまったマッチは別の検査方法で改めてふるい落とす事になります。\u003cbr\u003e\nふるい落とす方法は一旦棚上げしてマッチャーの実装に進みます。\u003c/p\u003e\n\n\u003cp\u003e以上、例外的に対応しなければならない単項演算および単項と二項の複合を挙げました。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"実装する演算式の一覧\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AE%9F%E8%A3%85%E3%81%99%E3%82%8B%E6%BC%94%E7%AE%97%E5%BC%8F%E3%81%AE%E4%B8%80%E8%A6%A7\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e実装する演算式の一覧\u003c/h1\u003e\n\n\u003cp\u003e今回より整数値が複数ケタに対応します。\u003cbr\u003e\n\u003ccode\u003e(5+9)\u003c/code\u003eのように丸括弧で括って優先順位を高める式を「括弧式」と命名して導入します。\u003cbr\u003e\nメンバアクセス式・関数呼び出し式・インデックスアクセス式も導入します。\u003cbr\u003e\nインクリメント・デクリメント・メンバアクセス式のオペランドとして識別子が必要になります。\u003cbr\u003e\n代入演算も導入します。\u003c/p\u003e\n\n\u003cp\u003e今回実装する演算式の優先順位としては下記の通りです。\u003cbr\u003e\n演算子の優先順位は\u003ca href=\"https://docs.microsoft.com/ja-jp/dotnet/csharp/language-reference/operators/\" rel=\"nofollow noopener\" target=\"_blank\"\u003eC# 演算子\u003c/a\u003eに従っています。\u003c/p\u003e\n\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003e優先順位\u003c/th\u003e\n\u003cth\u003e項数\u003c/th\u003e\n\u003cth\u003e種類\u003c/th\u003e\n\u003cth\u003e許容するオペランド\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003e1\u003c/td\u003e\n\u003ctd\u003e\u003c/td\u003e\n\u003ctd\u003eリテラル値式\u003c/td\u003e\n\u003ctd\u003e各種リテラル値\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e1\u003c/td\u003e\n\u003ctd\u003e\u003c/td\u003e\n\u003ctd\u003e識別子\u003c/td\u003e\n\u003ctd\u003e(無し)\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e1\u003c/td\u003e\n\u003ctd\u003e単項\u003c/td\u003e\n\u003ctd\u003e括弧式\u003c/td\u003e\n\u003ctd\u003e代入可能式以外の全ての式\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e1\u003c/td\u003e\n\u003ctd\u003e\u003c/td\u003e\n\u003ctd\u003e代入可能式\u003c/td\u003e\n\u003ctd\u003e識別子・メンバアクセス式・インデックスアクセス式・代入可能式を括弧で括ったもの\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e1\u003c/td\u003e\n\u003ctd\u003e単項\u003c/td\u003e\n\u003ctd\u003e関数呼び出し式\u003c/td\u003e\n\u003ctd\u003e関数呼び出し式・インデックスアクセス・入可能式。各引数は全ての演算式を許容する\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e1\u003c/td\u003e\n\u003ctd\u003e単項\u003c/td\u003e\n\u003ctd\u003eインデックスアクセス式\u003c/td\u003e\n\u003ctd\u003e関数呼び出し式・インデックスアクセス・代入可能式。各引数は全ての演算式を許容する\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e1\u003c/td\u003e\n\u003ctd\u003e単項\u003c/td\u003e\n\u003ctd\u003e後置デクリメント式\u003c/td\u003e\n\u003ctd\u003e代入可能式\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e1\u003c/td\u003e\n\u003ctd\u003e単項\u003c/td\u003e\n\u003ctd\u003e後置インクリメント式\u003c/td\u003e\n\u003ctd\u003e代入可能式\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e1\u003c/td\u003e\n\u003ctd\u003e二項\u003c/td\u003e\n\u003ctd\u003eメンバアクセス式\u003c/td\u003e\n\u003ctd\u003e左オペランドは\u0026lt;1\u0026gt; 。右オペランドは識別子\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e1\u003c/td\u003e\n\u003ctd\u003e\u003c/td\u003e\n\u003ctd\u003e(1)  (優先順位1)\u003c/td\u003e\n\u003ctd\u003eリテラル値式・識別子・括弧式・代入可能式・関数呼び出し式・インデックスアクセス式・後置デクリメント式・後置インクリメント式・メンバアクセス式\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e2\u003c/td\u003e\n\u003ctd\u003e単項\u003c/td\u003e\n\u003ctd\u003e前置デクリメント式\u003c/td\u003e\n\u003ctd\u003e代入可能式\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e2\u003c/td\u003e\n\u003ctd\u003e単項\u003c/td\u003e\n\u003ctd\u003e前置インクリメント式\u003c/td\u003e\n\u003ctd\u003e代入可能式\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e2\u003c/td\u003e\n\u003ctd\u003e単項\u003c/td\u003e\n\u003ctd\u003e前置マイナス式\u003c/td\u003e\n\u003ctd\u003e(1)・前置デクリメント式・前置インクリメント式・前置プラス式\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e2\u003c/td\u003e\n\u003ctd\u003e単項\u003c/td\u003e\n\u003ctd\u003e前置プラス式\u003c/td\u003e\n\u003ctd\u003e(1)・前置デクリメント式・前置インクリメント式・前置マイナス式\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e2\u003c/td\u003e\n\u003ctd\u003e\u003c/td\u003e\n\u003ctd\u003e(2)  (優先順位2より高い)\u003c/td\u003e\n\u003ctd\u003e(1)・前置デクリメント式・前置インクリメント式・前置マイナス式・前置プラス式\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e3\u003c/td\u003e\n\u003ctd\u003e二項\u003c/td\u003e\n\u003ctd\u003e乗除算式\u003c/td\u003e\n\u003ctd\u003e左オペランドは(3)。右オペランドは(2)\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e3\u003c/td\u003e\n\u003ctd\u003e\u003c/td\u003e\n\u003ctd\u003e(3)  (優先順位3より高い)\u003c/td\u003e\n\u003ctd\u003e\u0026lt;2\u0026gt;・乗除算式\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e4\u003c/td\u003e\n\u003ctd\u003e二項\u003c/td\u003e\n\u003ctd\u003e加減算式\u003c/td\u003e\n\u003ctd\u003e左オペランドは(4)。右オペランドは(3)\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e4\u003c/td\u003e\n\u003ctd\u003e\u003c/td\u003e\n\u003ctd\u003e(4)  (優先順位4より高い)\u003c/td\u003e\n\u003ctd\u003e(3)・加減算式\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e999\u003c/td\u003e\n\u003ctd\u003e二項\u003c/td\u003e\n\u003ctd\u003e代入文\u003c/td\u003e\n\u003ctd\u003e左オペランドは代入可能式。右オペランドは優先順位4を超えるの全て\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\n\u003cp\u003e前回解説した二項演算式の場合はオペランドは\u003cbr\u003e\n「自分と同等以上の優先度の演算式」か「自分を超える優先度の演算式」でした。\u003cbr\u003e\n今回の表では優先順位3～999に当たります。\u003c/p\u003e\n\n\u003cp\u003e優先順位2以上は前回までの常識が通じません。同じ優先度の式であっても同一に扱う事はできません。\u003cbr\u003e\nですがこのようにキチンと明文化できるならば実装は可能です。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"リテラル値式\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%AA%E3%83%86%E3%83%A9%E3%83%AB%E5%80%A4%E5%BC%8F\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eリテラル値式\u003c/h1\u003e\n\n\u003cp\u003e今回の場合該当するのは整数値だけですが、実用的な言語のパーサを実装するなら浮動小数点数・文字・文字列に加えて配列リテラルやラムダ式もこれに該当します。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"識別子\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%AD%98%E5%88%A5%E5%AD%90\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e識別子\u003c/h1\u003e\n\n\u003cp\u003e先頭はアンダースコアかアルファベット、２文字目以降は数字も使えます。\u003cbr\u003e\nC#のように日本語でも有効という仕様は今回は考えません。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"括弧式\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%8B%AC%E5%BC%A7%E5%BC%8F\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e括弧式\u003c/h1\u003e\n\n\u003cp\u003e優先順位が最優先の整数値・識別子に並ぶという点が重要です。\u003cbr\u003e\n代入可能式を括弧で括ったものは代入可能式に含め、括弧式に含めません。\u003cbr\u003e\n代入可能式を除外しないと優先順位の関係で\u003ccode\u003e(6)++\u003c/code\u003eのような式を許す事になってしまいます。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"代入可能式\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E4%BB%A3%E5%85%A5%E5%8F%AF%E8%83%BD%E5%BC%8F\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e代入可能式\u003c/h1\u003e\n\n\u003cp\u003eこれは演算ではなく複数の要素をまとめただけです。\u003cbr\u003e\nインクリメント・デクリメント・代入文のオペランドになれます。\u003cbr\u003e\n\u003ccode\u003e(Aaa)++\u003c/code\u003eや\u003ccode\u003e(((Aaa)))++\u003c/code\u003eのように括弧で括った状態にも対処する為に、括弧で括った代入可能式もまた代入可能式に含めています。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"関数呼び出し式\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E9%96%A2%E6%95%B0%E5%91%BC%E3%81%B3%E5%87%BA%E3%81%97%E5%BC%8F\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e関数呼び出し式\u003c/h1\u003e\n\n\u003cp\u003e\u003ccode\u003eFff(5,8)\u003c/code\u003eのように関数型の値に引数を与えて実行して値を得る演算です。\u003cbr\u003e\n0個以上の引数をカンマで区切る事とします。\u003cbr\u003e\n\u003ccode\u003eFff\u003c/code\u003eの部分がオペランドとなります。\u003cbr\u003e\n関数型の値になり得ない整数値・インクリメント演算式・デクリメント演算式はオペランドになれません。\u003cbr\u003e\n引数リストの中身は全ての演算式が許可されます。\u003cbr\u003e\n関数呼び出し式が関数型を返すならば\u003ccode\u003eFff(5,8)(4)\u003c/code\u003eのようにいくつでも連結する可能性があります。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"インデックスアクセス式\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%A4%E3%83%B3%E3%83%87%E3%83%83%E3%82%AF%E3%82%B9%E3%82%A2%E3%82%AF%E3%82%BB%E3%82%B9%E5%BC%8F\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eインデックスアクセス式\u003c/h1\u003e\n\n\u003cp\u003e\u003ccode\u003eAaa[5]\u003c/code\u003eのようにインデックスでAaaの内部データにアクセスする演算です。\u003cbr\u003e\nそもそも「インデックスアクセス式」という名称が正しいのかわかりませんがこう呼んでおく事にします。\u003cbr\u003e\n1個以上の引数をカンマで区切る事とします。\u003cbr\u003e\n引数リストの中身は全ての演算式が許可されます。これは関数呼び出し式と共通です。\u003cbr\u003e\n\u003ccode\u003eAaa[5][8]\u003c/code\u003eのようにいくつでも連結する可能性がある事も関数呼び出し式と共通です。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"メンバアクセス式\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%A1%E3%83%B3%E3%83%90%E3%82%A2%E3%82%AF%E3%82%BB%E3%82%B9%E5%BC%8F\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eメンバアクセス式\u003c/h1\u003e\n\n\u003cp\u003e\u003ccode\u003eAaa.Length\u003c/code\u003eのようにメンバを呼び出す式です。\u003cbr\u003e\n左オペランドは「自分と同等以上の優先度の演算式」という二項演算の普通のルールに則っています。\u003cbr\u003e\n右オペランドとなるメンバ名は識別子のみとなります。\u003cbr\u003e\nSwift言語のようにメンバ名として数値を許可する特別な仕様の言語もありますが、今回は考えない事とします。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"1\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#1\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e(1)\u003c/h1\u003e\n\n\u003cp\u003eこれは演算ではなく優先順位1の式をまとめただけです。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"後置デクリメント式後置インクリメント式前置デクリメント式前置インクリメント式\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%BE%8C%E7%BD%AE%E3%83%87%E3%82%AF%E3%83%AA%E3%83%A1%E3%83%B3%E3%83%88%E5%BC%8F%E5%BE%8C%E7%BD%AE%E3%82%A4%E3%83%B3%E3%82%AF%E3%83%AA%E3%83%A1%E3%83%B3%E3%83%88%E5%BC%8F%E5%89%8D%E7%BD%AE%E3%83%87%E3%82%AF%E3%83%AA%E3%83%A1%E3%83%B3%E3%83%88%E5%BC%8F%E5%89%8D%E7%BD%AE%E3%82%A4%E3%83%B3%E3%82%AF%E3%83%AA%E3%83%A1%E3%83%B3%E3%83%88%E5%BC%8F\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e後置デクリメント式・後置インクリメント式・前置デクリメント式・前置インクリメント式\u003c/h1\u003e\n\n\u003cp\u003e前置と後置で優先順位に差があります。\u003cbr\u003e\n\u003ccode\u003e++Aaa.ToString()\u003c/code\u003eという式は「前置インクリメントのオペランドが代入不能なのでアウト」です。\u003cbr\u003e\n優先順位2の前置インクリメントより優先順位1のメンバアクセス式・関数呼び出し式が優先されます。\u003c/p\u003e\n\n\u003cp\u003e\u003ccode\u003eAaa++.ToString()\u003c/code\u003eという式は許されます。後置インクリメントはメンバアクセスのオペランドになり得ます。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"前置マイナス式\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%89%8D%E7%BD%AE%E3%83%9E%E3%82%A4%E3%83%8A%E3%82%B9%E5%BC%8F\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e前置マイナス式\u003c/h1\u003e\n\n\u003cp\u003e前置マイナス式を含まない優先順位2以上がオペランドになります。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"前置プラス式\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%89%8D%E7%BD%AE%E3%83%97%E3%83%A9%E3%82%B9%E5%BC%8F\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e前置プラス式\u003c/h1\u003e\n\n\u003cp\u003e前置プラス式を含まない優先順位2以上がオペランドになります。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"2\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#2\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e(2)\u003c/h1\u003e\n\n\u003cp\u003eこれも演算ではなく優先順位2以上の式をまとめただけです。\u003cbr\u003e\n優先順位2以上なので\u0026lt;1\u0026gt;を含む定義となっています。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"乗除算式加減算式\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E4%B9%97%E9%99%A4%E7%AE%97%E5%BC%8F%E5%8A%A0%E6%B8%9B%E7%AE%97%E5%BC%8F\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e乗除算式・加減算式\u003c/h1\u003e\n\n\u003cp\u003e前回解説した二項演算式です。\u003cbr\u003e\n前回一般化した通り、左オペランドは自分と同等以上の式、右オペランドは自分を超える優先度の式となります。\u003cbr\u003e\nもしシフト演算や論理和などを表に組み込みたい場合は加減算と代入文の間に挿入する事になります。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"代入文\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E4%BB%A3%E5%85%A5%E6%96%87\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e代入文\u003c/h1\u003e\n\n\u003cp\u003e二項演算で最も優先順位の低いものがこの代入文です。\u003cbr\u003e\n式ではなく文なのでどの式のオペランドにもなれません。\u003cbr\u003e\n代入文自体は代入文のオペランドにはなれませんので\u003ccode\u003eAaa=Bbb=1+4\u003c/code\u003eのような書き方はできません。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"優先順位1000より先とは\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%84%AA%E5%85%88%E9%A0%86%E4%BD%8D1000%E3%82%88%E3%82%8A%E5%85%88%E3%81%A8%E3%81%AF\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e優先順位1000より先とは？\u003c/h1\u003e\n\n\u003cp\u003e変数宣言文・if文・switch文・try文 などといった「文」が該当します。\u003c/p\u003e\n\n\u003cp\u003e例えば\u003ccode\u003evar Aaa=1+2\u003c/code\u003eといった変数宣言文の場合、宣言文は代入文より低い優先順位が必要になります。\u003cbr\u003e\n「優先順位が低い」という事を言い換えると「自分より優先順位が高い要素を部品として取り込める」です。\u003cbr\u003e\nこの例では変数宣言文の一部として代入文を取り込んでいますし、代入文の一部として加減算式を取り込んでいます。\u003c/p\u003e\n\n\u003cp\u003e文をゼロ個以上取り込む事で「関数宣言文」が定義可能になります。\u003cbr\u003e\n関数宣言文も含めた文を取り込んで「クラス宣言文」を定義可能です。\u003cbr\u003e\nクラス宣言文も含めた文を取り込んで「名前空間宣言文」を定義可能です。\u003cbr\u003e\n名前空間宣言文も含めた文を取り込んで「●●言語のソースコード」を定義可能です。\u003c/p\u003e\n\n\u003cp\u003e「●●言語のソースコード」として定義したマッチャーに文字列を入力してマッチすればパースできた事になります。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"ラムダ式は表のどこに入るのか\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%A9%E3%83%A0%E3%83%80%E5%BC%8F%E3%81%AF%E8%A1%A8%E3%81%AE%E3%81%A9%E3%81%93%E3%81%AB%E5%85%A5%E3%82%8B%E3%81%AE%E3%81%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eラムダ式は表のどこに入るのか？\u003c/h1\u003e\n\n\u003cp\u003eリテラル値式として処理する事になります。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"構文解析のついでに型検査もできるんじゃないの\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%A7%8B%E6%96%87%E8%A7%A3%E6%9E%90%E3%81%AE%E3%81%A4%E3%81%84%E3%81%A7%E3%81%AB%E5%9E%8B%E6%A4%9C%E6%9F%BB%E3%82%82%E3%81%A7%E3%81%8D%E3%82%8B%E3%82%93%E3%81%98%E3%82%83%E3%81%AA%E3%81%84%E3%81%AE\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e構文解析のついでに型検査もできるんじゃないの？\u003c/h1\u003e\n\n\u003cp\u003eそんなふうに考えていた時期が俺にもありました。\u003cbr\u003e\n結論から言うとできません。\u003c/p\u003e\n\n\u003cp\u003e確かに\u003ccode\u003e133\u003c/code\u003eはint型と確定できますし\u003ccode\u003e133+986\u003c/code\u003eもint型と確定できますが、識別子の型は確定できません。\u003cbr\u003e\n識別子の型を確定するのは構文解析の先の段階です。\u003cbr\u003e\n\u003ccode\u003e()=\u0026gt;{1+2}++\u003c/code\u003eといったトンチンカンなソースコードでも構文解析の段階では一旦受け入れておいて、その先の段階でエラー扱いにする事になります。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"実装\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AE%9F%E8%A3%85\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e実装\u003c/h1\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\n\u003cspan class=\"c1\"\u003e//\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e// 優先度１\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e//\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// 整数値\u003c/span\u003e\n\u003cspan class=\"n\"\u003eMatcher\u003c/span\u003e \u003cspan class=\"n\"\u003eNumber\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"sc\"\u003e'1'\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eTo\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"sc\"\u003e'9'\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"sc\"\u003e'0'\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eTo\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"sc\"\u003e'9'\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nf\"\u003e_0Max\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e//アルファベット\u003c/span\u003e\n\u003cspan class=\"n\"\u003eMatcher\u003c/span\u003e \u003cspan class=\"n\"\u003eAlphabet\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"sc\"\u003e'A'\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eTo\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"sc\"\u003e'Z'\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e|\u003c/span\u003e \u003cspan class=\"sc\"\u003e'a'\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eTo\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"sc\"\u003e'z'\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e// 識別子\u003c/span\u003e\n\u003cspan class=\"n\"\u003eMatcher\u003c/span\u003e \u003cspan class=\"n\"\u003eIdentifier\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eAlphabet\u003c/span\u003e \u003cspan class=\"p\"\u003e|\u003c/span\u003e \u003cspan class=\"sc\"\u003e'_'\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eAlphabet\u003c/span\u003e \u003cspan class=\"p\"\u003e|\u003c/span\u003e \u003cspan class=\"sc\"\u003e'0'\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eTo\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"sc\"\u003e'9'\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e|\u003c/span\u003e \u003cspan class=\"sc\"\u003e'_'\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nf\"\u003e_0Max\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// 「リテラル値式」のマッチャーを作る。(但し中身は空っぽ)\u003c/span\u003e\n\u003cspan class=\"n\"\u003eRecursionMatcher\u003c/span\u003e \u003cspan class=\"n\"\u003eLiteralExp\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eRecursionMatcher\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// 「括弧式」のマッチャーを作る。(但し中身は空っぽ)\u003c/span\u003e\n\u003cspan class=\"n\"\u003eRecursionMatcher\u003c/span\u003e \u003cspan class=\"n\"\u003eParenExp\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eRecursionMatcher\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// 「代入可能式」のマッチャーを作る。(但し中身は空っぽ)\u003c/span\u003e\n\u003cspan class=\"n\"\u003eRecursionMatcher\u003c/span\u003e \u003cspan class=\"n\"\u003eAssignableExp\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eRecursionMatcher\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// 「関数呼び出し式」のマッチャーを作る。(但し中身は空っぽ)\u003c/span\u003e\n\u003cspan class=\"n\"\u003eRecursionMatcher\u003c/span\u003e \u003cspan class=\"n\"\u003eFunctionCallExp\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eRecursionMatcher\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// 「メンバアクセス式」のマッチャーを作る。(但し中身は空っぽ)\u003c/span\u003e\n\u003cspan class=\"n\"\u003eRecursionMatcher\u003c/span\u003e \u003cspan class=\"n\"\u003eMemberAccessExp\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eRecursionMatcher\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// 「インデックスアクセス式」のマッチャーを作る。(但し中身は空っぽ)\u003c/span\u003e\n\u003cspan class=\"n\"\u003eRecursionMatcher\u003c/span\u003e \u003cspan class=\"n\"\u003eIndexAccessExp\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eRecursionMatcher\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// 「後置デクリメント」のマッチャーを作る。(但し中身は空っぽ)\u003c/span\u003e\n\u003cspan class=\"n\"\u003eMatcher\u003c/span\u003e \u003cspan class=\"n\"\u003ePostDecrementExp\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eAssignableExp\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"s\"\u003e\"--\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// 「後置インクリメント」のマッチャーを作る。(但し中身は空っぽ)\u003c/span\u003e\n\u003cspan class=\"n\"\u003eMatcher\u003c/span\u003e \u003cspan class=\"n\"\u003ePostIncrementExp\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eAssignableExp\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"s\"\u003e\"++\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// 優先順位１式\u003c/span\u003e\n\u003cspan class=\"n\"\u003eMatcher\u003c/span\u003e \u003cspan class=\"n\"\u003ePriority1Exp\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eLiteralExp\u003c/span\u003e \u003cspan class=\"p\"\u003e|\u003c/span\u003e \u003cspan class=\"n\"\u003eIdentifier\u003c/span\u003e \u003cspan class=\"p\"\u003e|\u003c/span\u003e \u003cspan class=\"n\"\u003eParenExp\u003c/span\u003e \u003cspan class=\"p\"\u003e|\u003c/span\u003e \u003cspan class=\"n\"\u003eAssignableExp\u003c/span\u003e \u003cspan class=\"p\"\u003e|\u003c/span\u003e \n    \u003cspan class=\"n\"\u003eFunctionCallExp\u003c/span\u003e \u003cspan class=\"p\"\u003e|\u003c/span\u003e \u003cspan class=\"n\"\u003eIndexAccessExp\u003c/span\u003e \u003cspan class=\"p\"\u003e|\u003c/span\u003e \u003cspan class=\"n\"\u003eMemberAccessExp\u003c/span\u003e \u003cspan class=\"p\"\u003e|\u003c/span\u003e \u003cspan class=\"n\"\u003ePostDecrementExp\u003c/span\u003e \u003cspan class=\"p\"\u003e|\u003c/span\u003e \u003cspan class=\"n\"\u003ePostIncrementExp\u003c/span\u003e \u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\n\u003cspan class=\"c1\"\u003e//\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e// 優先度２\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e//\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// 「前置デクリメント」のマッチャーを作る。(但し中身は空っぽ)\u003c/span\u003e\n\u003cspan class=\"n\"\u003eMatcher\u003c/span\u003e \u003cspan class=\"n\"\u003ePreDecrementExp\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"--\"\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"n\"\u003eAssignableExp\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// 「前置インクリメント」のマッチャーを作る。(但し中身は空っぽ)\u003c/span\u003e\n\u003cspan class=\"n\"\u003eMatcher\u003c/span\u003e \u003cspan class=\"n\"\u003ePreIncrementExp\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"++\"\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"n\"\u003eAssignableExp\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// 「前置マイナス」のマッチャーを作る。(但し中身は空っぽ)\u003c/span\u003e\n\u003cspan class=\"n\"\u003eRecursionMatcher\u003c/span\u003e \u003cspan class=\"n\"\u003ePreMinusExp\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eRecursionMatcher\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// 「前置プラス」のマッチャーを作る。(但し中身は空っぽ)\u003c/span\u003e\n\u003cspan class=\"n\"\u003eRecursionMatcher\u003c/span\u003e \u003cspan class=\"n\"\u003ePrePlusExp\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eRecursionMatcher\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// 優先順位２式\u003c/span\u003e\n\u003cspan class=\"n\"\u003eMatcher\u003c/span\u003e \u003cspan class=\"n\"\u003ePriority2Exp\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ePreDecrementExp\u003c/span\u003e \u003cspan class=\"p\"\u003e|\u003c/span\u003e \u003cspan class=\"n\"\u003ePreIncrementExp\u003c/span\u003e \u003cspan class=\"p\"\u003e|\u003c/span\u003e \u003cspan class=\"n\"\u003ePreMinusExp\u003c/span\u003e \u003cspan class=\"p\"\u003e|\u003c/span\u003e \u003cspan class=\"n\"\u003ePrePlusExp\u003c/span\u003e \u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// 優先順位２以上式\u003c/span\u003e\n\u003cspan class=\"n\"\u003eMatcher\u003c/span\u003e \u003cspan class=\"n\"\u003ePriorityAbove2Exp\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ePriority1Exp\u003c/span\u003e \u003cspan class=\"p\"\u003e|\u003c/span\u003e \u003cspan class=\"n\"\u003ePriority2Exp\u003c/span\u003e \u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\n\u003cspan class=\"c1\"\u003e//\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e// 優先度３\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e//\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// 「乗除算式」のマッチャーを作る。(但し中身は空っぽ)\u003c/span\u003e\n\u003cspan class=\"n\"\u003eRecursionMatcher\u003c/span\u003e \u003cspan class=\"n\"\u003eMulDivExp\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eRecursionMatcher\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// 優先順位３式\u003c/span\u003e\n\u003cspan class=\"n\"\u003eMatcher\u003c/span\u003e \u003cspan class=\"n\"\u003ePriority3Exp\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eMulDivExp\u003c/span\u003e \u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// 優先順位３以上式\u003c/span\u003e\n\u003cspan class=\"n\"\u003eMatcher\u003c/span\u003e \u003cspan class=\"n\"\u003ePriorityAbove3Exp\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ePriorityAbove2Exp\u003c/span\u003e \u003cspan class=\"p\"\u003e|\u003c/span\u003e \u003cspan class=\"n\"\u003ePriority3Exp\u003c/span\u003e \u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\n\u003cspan class=\"c1\"\u003e//\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e// 優先度４\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e//\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// 「加減算式」のマッチャーを作る。(但し中身は空っぽ)\u003c/span\u003e\n\u003cspan class=\"n\"\u003eRecursionMatcher\u003c/span\u003e \u003cspan class=\"n\"\u003eAddSubExp\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eRecursionMatcher\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// 優先順位４式\u003c/span\u003e\n\u003cspan class=\"n\"\u003eMatcher\u003c/span\u003e \u003cspan class=\"n\"\u003ePriority4Exp\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eAddSubExp\u003c/span\u003e \u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// 優先順位４式\u003c/span\u003e\n\u003cspan class=\"n\"\u003eMatcher\u003c/span\u003e \u003cspan class=\"n\"\u003ePriorityAbove4Exp\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ePriorityAbove3Exp\u003c/span\u003e \u003cspan class=\"p\"\u003e|\u003c/span\u003e \u003cspan class=\"n\"\u003ePriority4Exp\u003c/span\u003e \u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e//\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e// (優先順位の低い演算子を増やしたい場合はここに挿入する。)\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e//\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// 式の全て\u003c/span\u003e\n\u003cspan class=\"n\"\u003eMatcher\u003c/span\u003e \u003cspan class=\"n\"\u003eExp\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ePriorityAbove4Exp\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e//\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e// 優先度９９９\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e//\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// 代入演算文\u003c/span\u003e\n\u003cspan class=\"n\"\u003eMatcher\u003c/span\u003e \u003cspan class=\"n\"\u003eAssignStatement\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eAssignableExp\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"sc\"\u003e'='\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"n\"\u003eExp\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\n\u003cspan class=\"c1\"\u003e//\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e// 以下、中身が未設定なマッチャーの中身を設定\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e//\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// 括弧式の中身\u003c/span\u003e\n\u003cspan class=\"n\"\u003eParenExp\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eInner\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"sc\"\u003e'('\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \n    \u003cspan class=\"p\"\u003e(\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e// 代入可能式を除く優先順位１式\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eLiteralExp\u003c/span\u003e \u003cspan class=\"p\"\u003e|\u003c/span\u003e \u003cspan class=\"n\"\u003eIdentifier\u003c/span\u003e \u003cspan class=\"p\"\u003e|\u003c/span\u003e \u003cspan class=\"n\"\u003eParenExp\u003c/span\u003e \u003cspan class=\"p\"\u003e|\u003c/span\u003e \u003cspan class=\"n\"\u003eFunctionCallExp\u003c/span\u003e \u003cspan class=\"p\"\u003e|\u003c/span\u003e \n    \u003cspan class=\"n\"\u003eIndexAccessExp\u003c/span\u003e \u003cspan class=\"p\"\u003e|\u003c/span\u003e \u003cspan class=\"n\"\u003eMemberAccessExp\u003c/span\u003e \u003cspan class=\"p\"\u003e|\u003c/span\u003e \u003cspan class=\"n\"\u003ePostDecrementExp\u003c/span\u003e \u003cspan class=\"p\"\u003e|\u003c/span\u003e \u003cspan class=\"n\"\u003ePostIncrementExp\u003c/span\u003e \u003cspan class=\"p\"\u003e|\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e// 優先順位２以下の全ての式\u003c/span\u003e\n    \u003cspan class=\"n\"\u003ePriority2Exp\u003c/span\u003e \u003cspan class=\"p\"\u003e|\u003c/span\u003e \u003cspan class=\"n\"\u003ePriority3Exp\u003c/span\u003e \u003cspan class=\"p\"\u003e|\u003c/span\u003e \u003cspan class=\"n\"\u003ePriority4Exp\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n     \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"sc\"\u003e')'\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// 代入可能式の中身\u003c/span\u003e\n\u003cspan class=\"n\"\u003eAssignableExp\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eInner\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eIdentifier\u003c/span\u003e \u003cspan class=\"p\"\u003e|\u003c/span\u003e \u003cspan class=\"n\"\u003eMemberAccessExp\u003c/span\u003e \u003cspan class=\"p\"\u003e|\u003c/span\u003e \u003cspan class=\"n\"\u003eIndexAccessExp\u003c/span\u003e \u003cspan class=\"p\"\u003e|\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"sc\"\u003e'('\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"n\"\u003eAssignableExp\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"sc\"\u003e')'\u003c/span\u003e \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// 関数呼び出し式の中身\u003c/span\u003e\n\u003cspan class=\"n\"\u003eFunctionCallExp\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eInner\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eFunctionCallExp\u003c/span\u003e \u003cspan class=\"p\"\u003e|\u003c/span\u003e \u003cspan class=\"n\"\u003eIndexAccessExp\u003c/span\u003e \u003cspan class=\"p\"\u003e|\u003c/span\u003e \u003cspan class=\"n\"\u003eAssignableExp\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"sc\"\u003e'('\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"n\"\u003eExp\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003e_0Max\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"sc\"\u003e','\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"sc\"\u003e')'\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// インデックスアクセス式の中身\u003c/span\u003e\n\u003cspan class=\"n\"\u003eIndexAccessExp\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eInner\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eFunctionCallExp\u003c/span\u003e \u003cspan class=\"p\"\u003e|\u003c/span\u003e \u003cspan class=\"n\"\u003eIndexAccessExp\u003c/span\u003e \u003cspan class=\"p\"\u003e|\u003c/span\u003e \u003cspan class=\"n\"\u003eAssignableExp\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"sc\"\u003e'['\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"n\"\u003eExp\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003e_1Max\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"sc\"\u003e','\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"sc\"\u003e']'\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// メンバアクセス式の中身\u003c/span\u003e\n\u003cspan class=\"n\"\u003eMemberAccessExp\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eInner\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ePriority1Exp\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"sc\"\u003e'.'\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"n\"\u003eIdentifier\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// 前置マイナス式の中身\u003c/span\u003e\n\u003cspan class=\"n\"\u003ePreMinusExp\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eInner\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"sc\"\u003e'-'\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ePriority1Exp\u003c/span\u003e \u003cspan class=\"p\"\u003e|\u003c/span\u003e \u003cspan class=\"n\"\u003ePreDecrementExp\u003c/span\u003e \u003cspan class=\"p\"\u003e|\u003c/span\u003e \u003cspan class=\"n\"\u003ePreIncrementExp\u003c/span\u003e \u003cspan class=\"p\"\u003e|\u003c/span\u003e \u003cspan class=\"n\"\u003ePrePlusExp\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// 前置プラス式の中身\u003c/span\u003e\n\u003cspan class=\"n\"\u003ePrePlusExp\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eInner\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"sc\"\u003e'+'\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ePriority1Exp\u003c/span\u003e \u003cspan class=\"p\"\u003e|\u003c/span\u003e \u003cspan class=\"n\"\u003ePreDecrementExp\u003c/span\u003e \u003cspan class=\"p\"\u003e|\u003c/span\u003e \u003cspan class=\"n\"\u003ePreIncrementExp\u003c/span\u003e \u003cspan class=\"p\"\u003e|\u003c/span\u003e \u003cspan class=\"n\"\u003ePreMinusExp\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// 乗除算式の中身\u003c/span\u003e\n\u003cspan class=\"n\"\u003eMulDivExp\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eInner\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e  \u003cspan class=\"n\"\u003ePriorityAbove3Exp\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"sc\"\u003e'*'\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003e_\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e|\u003c/span\u003e \u003cspan class=\"sc\"\u003e'/'\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"n\"\u003ePriorityAbove2Exp\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// 加減算式の中身\u003c/span\u003e\n\u003cspan class=\"n\"\u003eAddSubExp\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eInner\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e  \u003cspan class=\"n\"\u003ePriorityAbove4Exp\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"sc\"\u003e'+'\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003e_\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e|\u003c/span\u003e \u003cspan class=\"sc\"\u003e'-'\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"n\"\u003ePriorityAbove3Exp\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e関数呼び出しやインデックスアクセスでデリミタとしてカンマを指定しています。\u003cbr\u003e\nMatcherのTimes()や_0Max()や_1Max()がデリミタ指定に対応している仕様は引数リストの定義を簡潔に記述する為です。\u003c/p\u003e\n\n\u003cp\u003eMatcher と宣言するか RecursionMatcher と宣言するかの使い分けは、宣言した時点で初期化できるか否かです。\u003cbr\u003e\n実は全ての宣言を RecursionMatcher でまとめて行い、後から中身をまとめて設定する事も可能です。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"次回の予定\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%AC%A1%E5%9B%9E%E3%81%AE%E4%BA%88%E5%AE%9A\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e次回の予定\u003c/h1\u003e\n\n\u003cp\u003eLIMEの動作原理を解説する予定です。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"20190303-追記\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#20190303-%E8%BF%BD%E8%A8%98\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e2019/03/03 追記\u003c/h1\u003e\n\n\u003cp\u003e続きができました。\u003cbr\u003e\n\u003ca href=\"https://qiita.com/ryu_shizumi/items/cbdbda211555e84dadd0\" id=\"reference-fcfb905d4d5d01dd7478\"\u003eパーサジェネレーターLIME入門その４(マッチング動作の原理)\u003c/a\u003e\u003c/p\u003e\n","createdAt":"2019-01-24T10:57:16Z","elapsedYearsFromLastModifiedAt":1,"encryptedId":"qr4B7mfHu3jjQDXY2mv8zwNdJxh4GG+D--5UnVjtECWx/N/0ja--NyXrMUKHmmapI0MoekMs1w==","isBanned":false,"isDeprecated":true,"isDestroyableByViewer":false,"isEditRequestReadableByViewer":true,"isEditRequestSendableByViewer":true,"isLikableByViewer":true,"isLikedByViewer":false,"isPublic":true,"isSlide":false,"isStockableByViewer":true,"isStockedByViewer":false,"isSubscribableByViewer":false,"isSubscribedByViewer":false,"isUpdatableByViewer":false,"isUpdated":true,"lastModifiedAt":"2020-01-07T06:34:20Z","likesCount":0,"linkUrl":"https://qiita.com/ryu_shizumi/items/c4aeffe2afc4416fcb69","organization":null,"originalId":772490,"stockedCount":0,"title":"パーサジェネレーターLIME入門その３(単項演算子にマッチさせる)","toc":"\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E4%BB%8A%E5%9B%9E%E5%A4%A7%E4%BA%8B%E3%81%AB%E3%81%AA%E3%82%8B%E7%94%A8%E8%AA%9E%E3%81%AE%E8%AA%AC%E6%98%8E\"\u003e今回大事になる用語の説明\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%BC%8Fexpression-%E3%81%A8-%E6%96%87statement-%E3%81%AE%E9%81%95%E3%81%84\"\u003e式(expression) と 文(statement) の違い\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#--%E3%81%A8--%E3%81%AE%E9%80%A3%E7%B6%9A%E3%81%AB%E6%B3%A8%E6%84%8F\"\u003e- と + の連続に注意\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%9E%E3%82%A4%E3%83%8A%E3%82%B9%E3%81%AE%E3%83%9E%E3%82%A4%E3%83%8A%E3%82%B9%E3%83%97%E3%83%A9%E3%82%B9%E3%81%AE%E3%83%97%E3%83%A9%E3%82%B9%E3%81%AF%E4%B8%8D%E5%8F%AF%E8%83%BD\"\u003e「マイナスのマイナス」「プラスのプラス」は不可能\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#---aaa-%E3%82%84-aaa-%E3%81%A8%E8%A7%A3%E9%87%88%E3%81%97%E3%81%A6%E3%81%97%E3%81%BE%E3%81%86%E3%81%AE%E3%81%AF%E4%B8%8D%E5%8F%AF\"\u003e--(-Aaa) や ++(+Aaa) と解釈してしまうのは不可\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#----aaa-%E3%82%84-aaa%E3%81%AF%E3%81%AA%E3%81%9C%E4%B8%8D%E5%8F%AF%E8%83%BD%E3%81%AA%E3%81%AE%E3%81%8B\"\u003e----Aaa や ++++Aaaはなぜ不可能なのか？\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E6%AC%A1%E3%81%AF%E4%BA%8C%E9%A0%85%E6%BC%94%E7%AE%97%E3%81%AE%E5%A0%B4%E5%90%88\"\u003e次は二項演算の場合\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E6%8E%A1%E7%94%A8%E3%81%97%E3%81%AA%E3%81%84%E6%96%B9%E3%81%AE%E8%A7%A3%E9%87%88%E3%81%AB%E3%83%9E%E3%83%83%E3%83%81%E3%81%95%E3%81%9B%E3%81%AA%E3%81%84%E6%96%B9%E6%B3%95%E3%81%AF\"\u003e採用しない方の解釈にマッチさせない方法は？\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AE%9F%E8%A3%85%E3%81%99%E3%82%8B%E6%BC%94%E7%AE%97%E5%BC%8F%E3%81%AE%E4%B8%80%E8%A6%A7\"\u003e実装する演算式の一覧\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%AA%E3%83%86%E3%83%A9%E3%83%AB%E5%80%A4%E5%BC%8F\"\u003eリテラル値式\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E8%AD%98%E5%88%A5%E5%AD%90\"\u003e識別子\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E6%8B%AC%E5%BC%A7%E5%BC%8F\"\u003e括弧式\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E4%BB%A3%E5%85%A5%E5%8F%AF%E8%83%BD%E5%BC%8F\"\u003e代入可能式\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E9%96%A2%E6%95%B0%E5%91%BC%E3%81%B3%E5%87%BA%E3%81%97%E5%BC%8F\"\u003e関数呼び出し式\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%A4%E3%83%B3%E3%83%87%E3%83%83%E3%82%AF%E3%82%B9%E3%82%A2%E3%82%AF%E3%82%BB%E3%82%B9%E5%BC%8F\"\u003eインデックスアクセス式\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%A1%E3%83%B3%E3%83%90%E3%82%A2%E3%82%AF%E3%82%BB%E3%82%B9%E5%BC%8F\"\u003eメンバアクセス式\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#1\"\u003e(1)\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%BE%8C%E7%BD%AE%E3%83%87%E3%82%AF%E3%83%AA%E3%83%A1%E3%83%B3%E3%83%88%E5%BC%8F%E5%BE%8C%E7%BD%AE%E3%82%A4%E3%83%B3%E3%82%AF%E3%83%AA%E3%83%A1%E3%83%B3%E3%83%88%E5%BC%8F%E5%89%8D%E7%BD%AE%E3%83%87%E3%82%AF%E3%83%AA%E3%83%A1%E3%83%B3%E3%83%88%E5%BC%8F%E5%89%8D%E7%BD%AE%E3%82%A4%E3%83%B3%E3%82%AF%E3%83%AA%E3%83%A1%E3%83%B3%E3%83%88%E5%BC%8F\"\u003e後置デクリメント式・後置インクリメント式・前置デクリメント式・前置インクリメント式\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%89%8D%E7%BD%AE%E3%83%9E%E3%82%A4%E3%83%8A%E3%82%B9%E5%BC%8F\"\u003e前置マイナス式\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%89%8D%E7%BD%AE%E3%83%97%E3%83%A9%E3%82%B9%E5%BC%8F\"\u003e前置プラス式\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#2\"\u003e(2)\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E4%B9%97%E9%99%A4%E7%AE%97%E5%BC%8F%E5%8A%A0%E6%B8%9B%E7%AE%97%E5%BC%8F\"\u003e乗除算式・加減算式\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E4%BB%A3%E5%85%A5%E6%96%87\"\u003e代入文\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%84%AA%E5%85%88%E9%A0%86%E4%BD%8D1000%E3%82%88%E3%82%8A%E5%85%88%E3%81%A8%E3%81%AF\"\u003e優先順位1000より先とは？\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%A9%E3%83%A0%E3%83%80%E5%BC%8F%E3%81%AF%E8%A1%A8%E3%81%AE%E3%81%A9%E3%81%93%E3%81%AB%E5%85%A5%E3%82%8B%E3%81%AE%E3%81%8B\"\u003eラムダ式は表のどこに入るのか？\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E6%A7%8B%E6%96%87%E8%A7%A3%E6%9E%90%E3%81%AE%E3%81%A4%E3%81%84%E3%81%A7%E3%81%AB%E5%9E%8B%E6%A4%9C%E6%9F%BB%E3%82%82%E3%81%A7%E3%81%8D%E3%82%8B%E3%82%93%E3%81%98%E3%82%83%E3%81%AA%E3%81%84%E3%81%AE\"\u003e構文解析のついでに型検査もできるんじゃないの？\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AE%9F%E8%A3%85\"\u003e実装\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E6%AC%A1%E5%9B%9E%E3%81%AE%E4%BA%88%E5%AE%9A\"\u003e次回の予定\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#20190303-%E8%BF%BD%E8%A8%98\"\u003e2019/03/03 追記\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n","totalPv":849,"uuid":"c4aeffe2afc4416fcb69","banReason":null,"adventCalendarItem":null,"author":{"encryptedId":"1Xq0XDigK+7O+JKhZ+CnXsGVOF0O--vLzFTgLZUgnBp+Y3--sjBxiw/Cw0OGl/xFuMjIWw==","originalId":325854,"description":"ホビープログラマー23年生。\r\n言語の自作に専念すべく退社。\r\n背水の陣で挑みます。\r\n貯金を食い潰すのが先か言語ができるのが先か？\r\nワイ君の明日はどっちだ？\r\n\r\ntwitter : https://twitter.com/ryu_shizumi","facebookUrl":null,"githubUrl":null,"isBlockingViewer":false,"isFollowableByViewer":true,"isFollowedByViewer":false,"isTweetWebNotificationReceivable":true,"linkedinUrl":null,"name":"しずみ りゅう","profileImageUrl":"https://qiita-image-store.s3.amazonaws.com/0/325854/profile-images/1544756979","profileImageUrlW48":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F325854%2Fprofile-images%2F1544756979?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=48\u0026s=653d183b46373f940e4cdac625b120c8","profileImageUrlW75":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F325854%2Fprofile-images%2F1544756979?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=0f9142524ffa07b953d06412bf3ad22a","urlName":"ryu_shizumi","websiteUrl":"https://github.com/ryu-shizumi","twitterUrl":"https://twitter.com/ryu_shizumi","twitterUrlName":"ryu_shizumi","revealedOrganizations":{"edges":[]}},"tags":[{"name":"C#","urlName":"csharp"},{"name":"構文解析","urlName":"%e6%a7%8b%e6%96%87%e8%a7%a3%e6%9e%90"},{"name":"パーサジェネレータ","urlName":"%e3%83%91%e3%83%bc%e3%82%b5%e3%82%b8%e3%82%a7%e3%83%8d%e3%83%ac%e3%83%bc%e3%82%bf"}],"followingLikers":{"edges":[]},"comments":{"totalCount":0}},"comments":[],"client":null,"ads_event_emitter":null}}</script>
