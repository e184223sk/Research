<!DOCTYPE html><html><head><meta charset="utf-8" /><title>OpenCV plus Unityの顔認識を使って顔の部分だけトリミングしよう（そして顔ハメパネルを作ろう） - Qiita</title><meta content="width=device-width,initial-scale=1,shrink-to-fit=no,viewport-fit=cover" name="viewport" /><meta content="#55c500" name="theme-color" /><meta content="XWpkTG32-_C4joZoJ_UsmDUi-zaH-hcrjF6ZC_FoFbk" name="google-site-verification" /><meta content="telephone=no" name="format-detection" /><link rel="canonical" href="https://qiita.com/Hirai0827/items/8462c4c2dc2ab0315500" /><link href="/manifest.json" rel="manifest" /><link href="/opensearch.xml" rel="search" title="Qiita" type="application/opensearchdescription+xml" /><link as="script" href="https://www.googletagservices.com/tag/js/gpt.js" rel="preload" /><link href="https://securepubads.g.doubleclick.net" rel="preconnect" /><script async="" src="https://www.googletagservices.com/tag/js/gpt.js"></script><meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="QQ3Gn7j+4kvwd223zyc/LgyQwKoaDRriCPma8kb/7JMBkgnNjQjPx5Cj2M8HXC/pAcK0Al5jNnXnuxLy8kL/XA==" /><link rel="shortcut icon" type="image/x-icon" href="https://cdn.qiita.com/assets/favicons/public/production-c620d3e403342b1022967ba5e3db1aaa.ico" /><link rel="apple-touch-icon" type="image/png" href="https://cdn.qiita.com/assets/favicons/public/apple-touch-icon-ec5ba42a24ae923f16825592efdc356f.png" /><link rel="stylesheet" media="all" href="https://cdn.qiita.com/assets/public/article-2eaa7dbedc42a8ea65c722cda46d0ebb.min.css" /><script src="https://cdn.qiita.com/assets/public/v3-article-bundle-63de2d91fef827269d3f6b958db2335b.min.js" defer="defer"></script><meta name="twitter:card" content="summary_large_image"><meta content="@Qiita" name="twitter:site" /><meta content="@lucknknock" name="twitter:creator" /><meta property="og:type" content="article"><meta property="og:title" content="OpenCV plus Unityの顔認識を使って顔の部分だけトリミングしよう（そして顔ハメパネルを作ろう） - Qiita"><meta property="og:image" content="https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0&amp;w=1200&amp;mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND1UM0JsYmtOV0lIQnNkWE1nVlc1cGRIbmpnYTdwb1pUb3FvM29yWmpqZ3BMa3ZiX2pnYVBqZ2FicG9aVGpnYTdwZzZqbGlJYmpnYURqZ1pIamc0ampnNnJqZzVfamc3UGpnckRqZ1pmamdvampnWWJ2dklqamdaM2pnWmZqZ2FicG9aVGpnNF9qZzZIamc1SGpnNDNqZzZ2amdwTGt2WnpqZ28zamdZYnZ2SWsmdHh0LWNvbG9yPSUyMzMzMyZ0eHQtZm9udD1IaXJhZ2lubyUyMFNhbnMlMjBXNiZ0eHQtc2l6ZT01NCZ0eHQtY2xpcD1lbGxpcHNpcyZ0eHQtYWxpZ249Y2VudGVyJTJDbWlkZGxlJnM9MTg0ZWFmZDViMTJmNTIzZTc4ODQ5OGI3NDVhMjdmNGU&amp;mark-align=center%2Cmiddle&amp;blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RRWhwY21GcE1EZ3lOdyZ0eHQtY29sb3I9JTIzMzMzJnR4dC1mb250PUhpcmFnaW5vJTIwU2FucyUyMFc2JnR4dC1zaXplPTQ1JnR4dC1hbGlnbj1yaWdodCUyQ2JvdHRvbSZzPTE5OTNmOTFhY2RlMTI1YTlkNDcwOWZlYzM1YzI4ZTA2&amp;blend-align=center%2Cmiddle&amp;blend-mode=normal&amp;s=e1c78e4d8c7d41beebf11e3828005baf"><meta property="og:description" content="

はじめに

こんにちは、避雷です。お仕事の関係でOpenCV叩いてAR顔ハメパネルを作る、みたいな案件に取り組んだのでその時のノウハウを提供します。ちなみに案件自体は提案したコンサルの先生が渋い顔をしたので消滅しました。合掌。

..."><meta content="https://qiita.com/Hirai0827/items/8462c4c2dc2ab0315500" property="og:url" /><meta content="Qiita" property="og:site_name" /><meta content="564524038" property="fb:admins" /><meta content="C#,OpenCV,Unity" name="keywords" /><script>!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window, document,'script',
'https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '668972150489891');
fbq('track', 'PageView');</script><style data-emotion-css="17jxvjw 11t2ec1 1dvr2p8 18lkoru 1g4cku8 1iupg5d ijvq0v 15cocm3 12rp90f 115f4t 1b8uj5v 79elbk 16hhh7b fcbn8c 1gj7nt 154zy0m yikrym 1jqivyb 1ode1bp le4d8r 1hbd3g7 1nzh4zz 38fzdi helsa7 8qb8m4 2imjyh he5w1s 70qvj9 3ojehk 100alwu 1dtnjt5 10ougpm 1ay9vb9 m19uds cgzq40 1wa99t2 1l3zk9f 4czcte 1yzj1fm 1uv1qiv 109dbrr 5jpx49 mnxgyc 1vlpknv fsjkhv 1b17vb0 7i7f4d"}>.css-17jxvjw{display:grid;display:-ms-grid;grid-template-columns:80px minmax(0,1fr) 300px;-ms-grid-columns:80px minmax(0,1fr) 300px;grid-template-rows:minmax(270px,auto) 1fr;-ms-grid-rows:minmax(270px,auto) 1fr;max-width:1280px;margin-right:auto;margin-left:auto;padding-top:24px;padding-right:24px;padding-left:24px;}@media (max-width:1200px){.css-17jxvjw{padding-bottom:0;padding-left:0;padding-right:0;}}@media (max-width:992px){.css-17jxvjw{grid-template-columns:80px 452px 300px;-ms-grid-columns:80px 452px 300px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}}@media (max-width:770px){.css-17jxvjw{display:block;}}@media (max-width:480px){.css-17jxvjw{padding-top:0;}}.css-11t2ec1{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;z-index:5;position:-webkit-sticky;position:sticky;top:calc(56px + 24px + 16px + 32px - 16px);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:16px;width:80px;}.css-11t2ec1:after{content:'';display:table;}.css-11t2ec1:before{content:'';display:table;}@media (max-width:770px){.css-11t2ec1{display:none;}}.css-1dvr2p8{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-18lkoru{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;background-color:#FFFFFF;}.css-1g4cku8{display:inline-block;vertical-align:middle;height:20px;width:20px;fill:#55C500;}.css-1iupg5d{color:#55C500;cursor:pointer;font-size:14px;font-weight:bold;}.css-ijvq0v{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-15cocm3{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#FFFFFF;border:2px solid #6E6F70;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:2px 0px 0px;width:40px;}.css-12rp90f{display:inline-block;vertical-align:bottom;height:17.77777777777778px;width:16px;fill:#6E6F70;}.css-115f4t{color:#6E6F70;font-size:14px;font-weight:bold;}.css-1b8uj5v{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;margin-bottom:16px;padding:0;}.css-79elbk{position:relative;}.css-16hhh7b{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;padding:0;}.css-fcbn8c{display:none;bottom:initial;left:initial;right:initial;top:initial;left:100%;top:calc(-8px - (14px * 1.8) - 16px - 4px);}.css-1gj7nt{color:rgba(0,0,0,0.6);font-size:14px;font-weight:bold;line-height:1.8;padding:8px 16px;}.css-154zy0m{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.87);cursor:pointer;font-size:16px;font-weight:normal;line-height:1.8;padding:4px 16px;}.css-154zy0m:hover{-webkit-text-decoration:none;text-decoration:none;background-color:#F2F2F2;}.css-yikrym{width:20px;}.css-1jqivyb{color:rgba(0,0,0,0.6);font-size:13px;}.css-1ode1bp{background-color:rgba(0,0,0,0.12);height:1px;width:100%;margin:8px 0;}.css-le4d8r{display:inline-block;vertical-align:middle;height:13px;width:13px;fill:rgba(0,0,0,0.6);}.css-1hbd3g7{height:250px;}.css-1nzh4zz{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:16px 32px;background-color:#FBE69E;color:rgba(0,0,0,0.87);line-height:1.5;font-weight:600;}@media (max-width:770px){.css-1nzh4zz{padding:16px;}}.css-38fzdi{color:#CA832A;margin-right:4px;}.css-helsa7{background-color:#FFFFFF;padding:32px;margin-bottom:24px;}@media (max-width:992px){.css-helsa7{margin:0 auto 40px;}}@media (max-width:480px){.css-helsa7{margin:0 0 40px;padding:32px 16px;}}.css-8qb8m4{margin-bottom:48px;}.css-2imjyh{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-he5w1s{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;width:100%;}@media (max-width:770px){.css-he5w1s{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}}.css-70qvj9{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.css-3ojehk{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;margin-right:4px;}.css-100alwu{display:inline-block;border-radius:50%;line-height:1;overflow:hidden;vertical-align:middle;}.css-1dtnjt5{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-10ougpm{color:rgba(0,0,0,0.87);font-size:14px;font-weight:600;line-height:1.8;margin-right:4px;text-wrap:break-word;word-break:break-all;}.css-1ay9vb9{margin-right:16px;}.css-m19uds{color:rgba(0,0,0,0.6);font-size:14px;line-height:1.8;}.css-cgzq40{color:rgba(0,0,0,0.87);font-size:32px;font-weight:bold;line-height:1.4;margin-top:8px;text-wrap:break-word;word-break:break-all;}.css-1wa99t2{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.6);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:8px;}.css-1l3zk9f{color:rgba(0,0,0,0.6);font-size:20px;margin-right:8px;}.css-4czcte{margin-right:4px;color:inherit;font-size:14px;line-height:1.8;}.css-4czcte:not(:last-child)::after{content:',';margin-right:4px;}.css-1yzj1fm{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:32px;}.css-1uv1qiv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-size:20px;height:32px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin-right:16px;outline:none;padding:0;width:32px;}.css-109dbrr{background-color:#F9F9F9;border-top:1px solid rgba(0,0,0,0.12);bottom:0;box-shadow:0px 1px 4px rgba(0,0,0,0.14);display:none;height:calc(env(safe-area-inset-bottom,0px) + 56px);-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding-bottom:env(safe-area-inset-bottom);position:-webkit-sticky;position:sticky;width:100%;z-index:2000;}@media (max-width:770px){.css-109dbrr{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}.css-5jpx49{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:space-evenly;-webkit-justify-content:space-evenly;-ms-flex-pack:space-evenly;justify-content:space-evenly;width:100%;}.css-mnxgyc{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1vlpknv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;margin-right:4px;background-color:#FFFFFF;}.css-fsjkhv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1b17vb0{color:#6E6F70;font-size:14px;font-weight:bold;margin-left:4px;}.css-7i7f4d{display:none;bottom:initial;left:initial;right:initial;top:initial;bottom:32px;right:0;}</style></head><body><div class="allWrapper"><div><div id="GlobalHeader-react-component-165c089e-57be-4841-9d0f-a414cac7d4d0"><div class="st-Header"><div class="st-Header_container"><div class="st-Header_start"><a href="/" class="st-Header_logo"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 426.57 130"><circle cx="167.08" cy="21.4" r="12.28"></circle><path d="M250.81 29.66h23.48v18.9h-23.48z"></path><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z"></path><circle cx="216.33" cy="21.4" r="12.28"></circle></svg></a><div class="st-Header_communitySelector" tabindex="0"><span class="fa fa-caret-down"></span></div><div class="st-Header_dropdown"><div class="st-Header_dropdownHeading">Qiita Teams that are logged in</div><div class="st-Header_dropdownItemNote">You are not logged in to any team</div><hr class="st-Header_dropdownDivider st-Header_dropdownDivider-shrink"/><a href="https://teams-center.qiita.com/find_team" class="st-Header_dropdownItem"><span class="fa fa-fw fa-sign-in st-Header_dropdownItemIcon"></span><div>Log in to Qiita Team</div></a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Community</div><a href="/organizations" class="st-Header_dropdownItem">Organization</a><a href="/official-events/open" class="st-Header_dropdownItem">Event</a><a href="/advent-calendar" class="st-Header_dropdownItem">Advent Calendar</a><a href="https://qiitadon.com/" class="st-Header_dropdownItem" target="_blank">Qiitadon (β)</a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Service</div><a href="https://jobs.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Jobs</a><a href="https://zine.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Zine</a><a href="https://blog.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Blog</a></div><form class="st-Header_search" action="/search" method="get"><span class="fa fa-search st-Header_searchIcon"></span><input type="search" class="st-Header_searchInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form><form class="st-Header_searchModal" action="/search" method="get"><input type="text" class="st-Header_searchModalInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form></div><div class="st-Header_end"><div class="st-Header_searchButton"><span class="fa fa-search"></span></div><a class="st-Header_signupButton" href="/signup?redirect_to=%2FHirai0827%2Fitems%2F8462c4c2dc2ab0315500">Signup</a><a class="st-Header_loginLink" href="/login?redirect_to=%2FHirai0827%2Fitems%2F8462c4c2dc2ab0315500">Login</a></div><div class="st-Header_overlay"></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="GlobalHeader" data-dom-id="GlobalHeader-react-component-165c089e-57be-4841-9d0f-a414cac7d4d0">{"unreadNotificationsCount":null,"realms":[{"humanName":"Qiita","isCurrentRealm":true,"isQiita":true,"isQiitaTeam":false,"loggedInUser":null,"teamId":null,"url":"https://qiita.com/"}],"teamFindUrl":"https://teams-center.qiita.com/find_team","isTeamOnlyUser":null,"currentUser":null}</script>
      
</div><div class="st-HeaderAlert st-HeaderAlert-warning"><div class="st-HeaderAlert_body"></div></div><script type="application/ld+json">{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"/","name":"Qiita"}},{"@type":"ListItem","position":2,"item":{"@id":"/tags/csharp","name":"C#"}}]}</script><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","datePublished":"2019-09-24T21:10:46.000+09:00","dateModified":"2019-09-24T21:10:46.000+09:00","headline":"OpenCV plus Unityの顔認識を使って顔の部分だけトリミングしよう（そして顔ハメパネルを作ろう）","image":"https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0\u0026w=1200\u0026mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND1UM0JsYmtOV0lIQnNkWE1nVlc1cGRIbmpnYTdwb1pUb3FvM29yWmpqZ3BMa3ZiX2pnYVBqZ2FicG9aVGpnYTdwZzZqbGlJYmpnYURqZ1pIamc0ampnNnJqZzVfamc3UGpnckRqZ1pmamdvampnWWJ2dklqamdaM2pnWmZqZ2FicG9aVGpnNF9qZzZIamc1SGpnNDNqZzZ2amdwTGt2WnpqZ28zamdZYnZ2SWsmdHh0LWNvbG9yPSUyMzMzMyZ0eHQtZm9udD1IaXJhZ2lubyUyMFNhbnMlMjBXNiZ0eHQtc2l6ZT01NCZ0eHQtY2xpcD1lbGxpcHNpcyZ0eHQtYWxpZ249Y2VudGVyJTJDbWlkZGxlJnM9MTg0ZWFmZDViMTJmNTIzZTc4ODQ5OGI3NDVhMjdmNGU\u0026mark-align=center%2Cmiddle\u0026blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RRWhwY21GcE1EZ3lOdyZ0eHQtY29sb3I9JTIzMzMzJnR4dC1mb250PUhpcmFnaW5vJTIwU2FucyUyMFc2JnR4dC1zaXplPTQ1JnR4dC1hbGlnbj1yaWdodCUyQ2JvdHRvbSZzPTE5OTNmOTFhY2RlMTI1YTlkNDcwOWZlYzM1YzI4ZTA2\u0026blend-align=center%2Cmiddle\u0026blend-mode=normal\u0026s=e1c78e4d8c7d41beebf11e3828005baf","mainEntityOfPage":"https://qiita.com/Hirai0827/items/8462c4c2dc2ab0315500","author":{"@type":"Person","address":null,"email":null,"identifier":"Hirai0827","name":"Hirai0827","image":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F256231%2Fprofile-images%2F1551797107?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=fa44f4327ac0047f74e1de4a70ef8956","url":"https://qiita.com/Hirai0827","description":null,"memberOf":[{"@type":"Organization","address":"東京大学駒場リサーチキャンパス","legalName":"UT-virtual","image":"https://s3-ap-northeast-1.amazonaws.com/qiita-organization-image/6bf18c681b3483037fe0c6346dbb24602d2a7a12/original.jpg?1569548252","logo":"https://s3-ap-northeast-1.amazonaws.com/qiita-organization-image/d16fae2434659d86f70b2dda0eeca79c237ce359/original.jpg?1569548252","identifier":"utvirtual","description":"VRの普及啓蒙と体験創造を理念として、VR作品の制作・展示、勉強会などを行っているインカレサークル"}]},"publisher":{"@type":"Organization","name":"Qiita","logo":{"@type":"ImageObject","url":"//cdn.qiita.com/assets/public/qiita-logo-c39ded593afa388e2e1ba435b110554e.png"}}}</script><style type="text/css">.wb-CampaignLink {
  background-color: #333333;
  width: 100%;
}

.wb-CampaignLink_container {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  max-width: 1100px;
  margin: 0 auto;
  font-size: 13px;
  padding: 0.8em;
}
.wb-CampaignLink_container > a {
  color: #fff;
}

.wb-CampaignLink_container > a:hover {
  text-decoration: underline;
}</style><div class="wb-CampaignLink"><div class="wb-CampaignLink_container"><a target="_blank" id="header_text_message_1" href="https://zine.qiita.com/interview/202107-hitachi/?utm_source=qiita&amp;utm_medium=header-banner">グループ会社出納業務の証票処理を70％自動化。日立のAI-OCR技術とは？</a><a target="_blank" id="header_text_message_2" href="https://zine.qiita.com/interview/202107-hitachi/?utm_source=qiita&amp;utm_medium=header-banner">詳しくはこちら</a></div><script>td.trackEvent(
  'front_events',
  {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"Hirai0827","type":"items","id":"8462c4c2dc2ab0315500"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Show","data":{"message":"グループ会社出納業務の証票処理を70％自動化。日立のAI-OCR技術とは？","url":"https://zine.qiita.com/interview/202107-hitachi/?utm_source=qiita\u0026utm_medium=header-banner","sub_message":"詳しくはこちら"}}
)</script><script>document.getElementById('header_text_message_1').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"Hirai0827","type":"items","id":"8462c4c2dc2ab0315500"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":1,"pos_id":"header_text_message_1","message":"グループ会社出納業務の証票処理を70％自動化。日立のAI-OCR技術とは？","url":"https://zine.qiita.com/interview/202107-hitachi/?utm_source=qiita\u0026utm_medium=header-banner","sub_message":"詳しくはこちら"}}
  )
})</script><script>document.getElementById('header_text_message_2').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"Hirai0827","type":"items","id":"8462c4c2dc2ab0315500"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":1,"pos_id":"header_text_message_2","message":"グループ会社出納業務の証票処理を70％自動化。日立のAI-OCR技術とは？","url":"https://zine.qiita.com/interview/202107-hitachi/?utm_source=qiita\u0026utm_medium=header-banner","sub_message":"詳しくはこちら"}}
  )
})</script></div><script type="application/json" id="js-react-on-rails-context">{"railsEnv":"production","inMailer":false,"i18nLocale":"en","i18nDefaultLocale":"en","href":"https://qiita.com/Hirai0827/items/8462c4c2dc2ab0315500","location":"/Hirai0827/items/8462c4c2dc2ab0315500","scheme":"https","host":"qiita.com","port":null,"pathname":"/Hirai0827/items/8462c4c2dc2ab0315500","search":null,"httpAcceptLanguage":null,"actionPath":"public/items#show","settings":{"analyticsTrackingId":"UA-24675221-12","assetsMap":{},"csrfToken":"d82DzUHovxDmrDAVZWHgA19IfCd41Z9SvugrpZjbh2I3UkyfdB6SnIZ4hW2tGvDEUhoIjzy7s8VRqqOlLGaUrQ==","locale":"en"},"currentUser":null,"isLoggedIn":false,"recaptchaSiteKey":"6LfNkiQTAAAAAM3UGnSquBy2akTITGNMO_QDxMw6","serverSide":false}</script>
<div id="PersonalArticlePage-react-component-334d56ca-9445-4cff-a19c-d216c6c0f260"><div class="p-items_wrapper"><div class=" css-17jxvjw"><div class="css-11t2ec1"><div class="css-1dvr2p8"><button class=" css-18lkoru"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/Hirai0827/items/8462c4c2dc2ab0315500/likers" class="css-1iupg5d">15</a></div><div class="css-ijvq0v"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-115f4t">14</span></div><div class="css-1b8uj5v"><span class="fa fa-twitter"></span></div><div class="css-1b8uj5v"><span class="fa fa-facebook"></span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-fcbn8c"><div class="css-1gj7nt">Improve article</div><a href="/drafts/8462c4c2dc2ab0315500/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/Hirai0827/items/8462c4c2dc2ab0315500/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/Hirai0827/items/8462c4c2dc2ab0315500/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/Hirai0827/items/8462c4c2dc2ab0315500/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/Hirai0827/items/8462c4c2dc2ab0315500.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div><div class="p-items_options"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_toc"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_main"><div class="css-1nzh4zz"><span class="fa fa-fw fa-warning css-38fzdi"></span><p>More than 1 year has passed since last update.</p></div><div class="css-helsa7"><div class="css-8qb8m4"><div class="css-2imjyh"><div class="css-he5w1s"><div class="css-70qvj9"><div class="css-3ojehk"><a href="/Hirai0827"><img class="css-100alwu eyfquo10" src="https://qiita-image-store.s3.amazonaws.com/0/256231/profile-images/1551797107" width="24" height="24" loading="lazy"/></a></div><div class="css-1dtnjt5"><a href="/Hirai0827" class="css-10ougpm">@<!-- -->Hirai0827</a><div class="css-1ay9vb9"><time dateTime="2019-09-24T12:10:46Z" class="css-m19uds">posted at 2019-09-24</time></div></div></div></div></div><h1 class="css-cgzq40">OpenCV plus Unityの顔認識を使って顔の部分だけトリミングしよう（そして顔ハメパネルを作ろう）</h1><div class="css-1wa99t2"><span class="fa fa-tags mr-1of2 css-1l3zk9f" aria-hidden="true"></span><a href="/tags/csharp" class="css-4czcte">C#</a><a href="/tags/opencv" class="css-4czcte">OpenCV</a><a href="/tags/unity" class="css-4czcte">Unity</a></div></div><section class="it-MdContent"><div id="personal-public-article-body"><div>
<h1>
<span id="はじめに" class="fragment"></span><a href="#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB"><i class="fa fa-link"></i></a>はじめに</h1>

<p>こんにちは、避雷です。お仕事の関係でOpenCV叩いてAR顔ハメパネルを作る、みたいな案件に取り組んだのでその時のノウハウを提供します。ちなみに案件自体は提案したコンサルの先生が渋い顔をしたので消滅しました。合掌。</p>

<h1>
<span id="用いる技術" class="fragment"></span><a href="#%E7%94%A8%E3%81%84%E3%82%8B%E6%8A%80%E8%A1%93"><i class="fa fa-link"></i></a>用いる技術</h1>

<h2>
<span id="opencv-plus-unity" class="fragment"></span><a href="#opencv-plus-unity"><i class="fa fa-link"></i></a>OpenCV plus Unity</h2>

<p>基本的に高価なイメージのある（出来が良いので仕方なくは有りますが）OpenCV x Unity系のAssetの救世主、OpenCV plus Unityくんです。OpenCVsharp（OpenCVをC#で使えるようにしたライブラリ）をベースに、Unityに適応させたブツです。基本的にテクスチャ→画像処理用の変数→加工→テクスチャに戻すというステップで画像を加工します。<br>
<a href="https://assetstore.unity.com/packages/tools/integration/opencv-plus-unity-85928" class="autolink" rel="nofollow noopener" target="_blank">https://assetstore.unity.com/packages/tools/integration/opencv-plus-unity-85928</a></p>

<h2>
<span id="unity" class="fragment"></span><a href="#unity"><i class="fa fa-link"></i></a>Unity</h2>

<p>言わずと知れたゲームエンジンくん。説明不要でしょう。今回取り扱う部分ではバージョンを特にこだわる必要はないと思います（もちろんOpenCVplusUnityの対応範囲内で）</p>

<h1>
<span id="試しに顔認識部分を動かしてみよう" class="fragment"></span><a href="#%E8%A9%A6%E3%81%97%E3%81%AB%E9%A1%94%E8%AA%8D%E8%AD%98%E9%83%A8%E5%88%86%E3%82%92%E5%8B%95%E3%81%8B%E3%81%97%E3%81%A6%E3%81%BF%E3%82%88%E3%81%86"><i class="fa fa-link"></i></a>試しに顔認識部分を動かしてみよう</h1>

<h2>
<span id="アセットのインポート" class="fragment"></span><a href="#%E3%82%A2%E3%82%BB%E3%83%83%E3%83%88%E3%81%AE%E3%82%A4%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%88"><i class="fa fa-link"></i></a>アセットのインポート</h2>

<p>OpenCVplusUnityをAssetStoreで開いてダウンロード、インポートします。<br>
<a href="https://assetstore.unity.com/packages/tools/integration/opencv-plus-unity-85928" class="autolink" rel="nofollow noopener" target="_blank">https://assetstore.unity.com/packages/tools/integration/opencv-plus-unity-85928</a></p>

<h2>
<span id="unsafecodeを許可する" class="fragment"></span><a href="#unsafecode%E3%82%92%E8%A8%B1%E5%8F%AF%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>UnsafeCodeを許可する</h2>

<p>もしこの時点で警告が出たら、Unsafeなコードを許可してあげる必要があります。<br>
BuildSettings→PlayerSettings→OtherSettings→Configuration→Allow 'Unsafe' Codeをチェックすると動くようになります。<br>
<a href="https://camo.qiitausercontent.com/59d69358dbfe7f56d192c4eba18d12d8274b470d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3235363233312f31366635613262312d353765372d363834622d323031302d3735636435633361386563392e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F256231%2F16f5a2b1-57e7-684b-2010-75cd5c3a8ec9.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=b9025c7f957000aecf701b690421b704" alt="キャプチャ489.PNG" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/256231/16f5a2b1-57e7-684b-2010-75cd5c3a8ec9.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F256231%2F16f5a2b1-57e7-684b-2010-75cd5c3a8ec9.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=3e6e2a3f4f4f05ca5e0610f7eacb610f 1x" loading="lazy"></a></p>

<h2>
<span id="ウェブカメラがあるか確認する" class="fragment"></span><a href="#%E3%82%A6%E3%82%A7%E3%83%96%E3%82%AB%E3%83%A1%E3%83%A9%E3%81%8C%E3%81%82%E3%82%8B%E3%81%8B%E7%A2%BA%E8%AA%8D%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>ウェブカメラがあるか確認する</h2>

<p>今回はカメラから画像を取り込んで、顔認識して、顔の部分を四角で囲む、みたいなサンプルなのでウェブカメラが存在しないとそもそも動きません。PCに内蔵してあるカメラかElecom当たりのUSBでつなぐウェブカメラとかを買いましょう。（最安で1000円ぐらいで買えそう）</p>

<h2>
<span id="buildsettingsにsceneを加える" class="fragment"></span><a href="#buildsettings%E3%81%ABscene%E3%82%92%E5%8A%A0%E3%81%88%E3%82%8B"><i class="fa fa-link"></i></a>BuildSettingsにSceneを加える</h2>

<p>次にOpenCV+Unity/Demo内にあるLobby.sceneというシーンを開きます。これは各種サンプルにつながるハブの役割を果たすシーンなのですが、BuildSettingsで移動先のシーンを追加しないとシーン間の移動ができません、追加しましょう。今回は顔認識のサンプルだけ確認できればいいのでFaceDetector.sceneだけ追加。</p>

<h2>
<span id="サンプルシーンを起動する" class="fragment"></span><a href="#%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB%E3%82%B7%E3%83%BC%E3%83%B3%E3%82%92%E8%B5%B7%E5%8B%95%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>サンプルシーンを起動する</h2>

<p>早速サンプルシーンを起動しましょう。LobbyシーンからFaceDetectorのボタンを押すとカメラの視界が出てきて、その中にオタクの顔が四角い線でハイライトされていれば成功です。こんな感じ。<br>
<a href="https://camo.qiitausercontent.com/bd13975046c11ccad4293238ccf0c5bb94ee8e92/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3235363233312f65623261373062662d626466352d386138302d616134392d6136613731393762353830352e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F256231%2Feb2a70bf-bdf5-8a80-aa49-a6a7197b5805.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=7222daa4e1a59fc621d38444623358db" alt="キャプチャ414.PNG" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/256231/eb2a70bf-bdf5-8a80-aa49-a6a7197b5805.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F256231%2Feb2a70bf-bdf5-8a80-aa49-a6a7197b5805.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=23d0850194a73e0cf24e57ff0342611c 1x" loading="lazy"></a></p>

<h1>
<span id="じゃあ顔の部分だけ切り抜こう" class="fragment"></span><a href="#%E3%81%98%E3%82%83%E3%81%82%E9%A1%94%E3%81%AE%E9%83%A8%E5%88%86%E3%81%A0%E3%81%91%E5%88%87%E3%82%8A%E6%8A%9C%E3%81%93%E3%81%86"><i class="fa fa-link"></i></a>じゃあ、顔の部分だけ切り抜こう</h1>

<p>ここからが本記事独自の内容です。これより上は多分他の記事でも書いてある気がします。</p>

<h2>
<span id="サンプルをコピーする" class="fragment"></span><a href="#%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB%E3%82%92%E3%82%B3%E3%83%94%E3%83%BC%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>サンプルをコピーする</h2>

<p>折角うまく動いているサンプル(FaceDetector.cs)があるのでこれを参考に作っていきます。と言っても顔の部分を切り抜くだけなら全体を把握する必要はなくて、顔認識の結果を処理している<code>ProcessTexture</code>の部分だけに注目すればよいです。</p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code>        <span class="k">protected</span> <span class="k">override</span> <span class="kt">bool</span> <span class="nf">ProcessTexture</span><span class="p">(</span><span class="n">WebCamTexture</span> <span class="n">input</span><span class="p">,</span> <span class="k">ref</span> <span class="n">Texture2D</span> <span class="n">output</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="c1">// detect everything we're interested in</span>
            <span class="n">processor</span><span class="p">.</span><span class="nf">ProcessTexture</span><span class="p">(</span><span class="n">input</span><span class="p">,</span> <span class="n">TextureParameters</span><span class="p">);</span>

            <span class="c1">// mark detected objects</span>
            <span class="n">processor</span><span class="p">.</span><span class="nf">MarkDetected</span><span class="p">();</span>

            <span class="c1">// processor.Image now holds data we'd like to visualize</span>
            <span class="n">output</span> <span class="p">=</span> <span class="n">Unity</span><span class="p">.</span><span class="nf">MatToTexture</span><span class="p">(</span><span class="n">processor</span><span class="p">.</span><span class="n">Image</span><span class="p">,</span> <span class="n">output</span><span class="p">);</span>   <span class="c1">// if output is valid texture it's buffer will be re-used, otherwise it will be re-created</span>

            <span class="k">return</span> <span class="k">true</span><span class="p">;</span>
        <span class="p">}</span>
</code></pre></div></div>

<p>(このコードでやっていること自体は、ウェブカメラの映像からテクスチャを取得→顔認識をかける→結果をもとに顔を四角くマークする、というもの(WebCamera.csを継承する形で最終画像を出力するprocess部分を書き換えている))<br>
コレを少しずつ書き換えて動かしていきます。</p>

<h2>
<span id="顔が何個あるか取得する" class="fragment"></span><a href="#%E9%A1%94%E3%81%8C%E4%BD%95%E5%80%8B%E3%81%82%E3%82%8B%E3%81%8B%E5%8F%96%E5%BE%97%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>顔が何個あるか取得する</h2>

<p>顔の個数は<code>processor.Faces.Count</code>で取得します。Facesクラス内にそれぞれの顔のデータが入っています。</p>

<h2>
<span id="顔がある矩形範囲を取得する" class="fragment"></span><a href="#%E9%A1%94%E3%81%8C%E3%81%82%E3%82%8B%E7%9F%A9%E5%BD%A2%E7%AF%84%E5%9B%B2%E3%82%92%E5%8F%96%E5%BE%97%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>顔がある矩形範囲を取得する</h2>

<p>顔を含む長方形の範囲の各頂点（右上、左上、右下、左下）のテクスチャ上の座標（この座標はテクスチャのピクセル上の物で、UnityのTransformではない）は それぞれ<br>
<code>processor.Faces[i].Region.TopRight</code><br>
<code>processor.Faces[i].Region.TopLeft</code><br>
<code>processor.Faces[i].Region.BottomRight</code><br>
<code>processor.Faces[i].Region.BottomLeft</code><br>
 で取得することができます。今回は長方形の各辺がx軸とy軸に平行なので右上と左下の座標がわかれば、元の長方形を再現することができます。これらの情報をキープして切り抜くときに使いましょう。</p>

<h2>
<span id="opencvの座標をtexture2dの座標に直す" class="fragment"></span><a href="#opencv%E3%81%AE%E5%BA%A7%E6%A8%99%E3%82%92texture2d%E3%81%AE%E5%BA%A7%E6%A8%99%E3%81%AB%E7%9B%B4%E3%81%99"><i class="fa fa-link"></i></a>OpenCVの座標をTexture2Dの座標に直す</h2>

<p>ここ、僕個人が滅茶苦茶詰まったところなんですけど、OpenCVで使われている座標系とUnityのTexture2Dで使われている座標系は原点と各軸の正の向きが違います。 しょうがないのでこれらを変換しましょう。</p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="n">afterPos</span><span class="p">.</span><span class="n">x</span> <span class="p">=</span> <span class="n">beforePos</span><span class="p">.</span><span class="n">x</span><span class="p">;</span>
<span class="n">afterPos</span><span class="p">.</span><span class="n">y</span> <span class="p">=</span> <span class="n">targetTexture</span><span class="p">.</span><span class="n">height</span> <span class="p">-</span> <span class="n">beforePos</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>
</code></pre></div></div>

<p><a href="https://camo.qiitausercontent.com/af6baea9dd024652bf441767097a198c458e03be/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3235363233312f34663736333762612d336366662d343037382d373266342d6561373731396531386238662e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F256231%2F4f7637ba-3cff-4078-72f4-ea7719e18b8f.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=0d35b8364cbdb9e54c82e2a1d5dea76a" alt="pic_for_art_001.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/256231/4f7637ba-3cff-4078-72f4-ea7719e18b8f.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F256231%2F4f7637ba-3cff-4078-72f4-ea7719e18b8f.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=493cf37a66e58ecadf1115a80dd7875a 1x" loading="lazy"></a></p>

<h2>
<span id="テクスチャを切り出す" class="fragment"></span><a href="#%E3%83%86%E3%82%AF%E3%82%B9%E3%83%81%E3%83%A3%E3%82%92%E5%88%87%E3%82%8A%E5%87%BA%E3%81%99"><i class="fa fa-link"></i></a>テクスチャを切り出す</h2>

<p>Texture2Dには特定の範囲のpixelを転写する便利な関数 <code>GetPixels(起点座標x,起点座標y,幅,高さ)</code> があり、これがそのままトリミングの機能を果たしてくれます。超便利。これを使って元画像からピクセル列を取り出しそれを新しいテクスチャに貼り付けることでトリミングが可能になります。この際にトリミング後の画像サイズの情報が必要になるのでそれも用意しましょう。実装例のTrimmingTexureです。右上と左下のポイントを指定するとそれらを頂点とした矩形範囲を切り取ってTexture2Dとして切り出してくれます。</p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">TrimmingTexture</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="n">Vector2Int</span> <span class="n">pointRightTop</span><span class="p">;</span>
    <span class="k">private</span> <span class="n">Vector2Int</span> <span class="n">pointLeftBottom</span><span class="p">;</span>
    <span class="k">private</span> <span class="n">Texture2D</span> <span class="n">inputTex</span><span class="p">;</span>
    <span class="k">public</span> <span class="nf">TrimmingTexture</span><span class="p">(</span><span class="n">Vector2Int</span> <span class="n">pointRightTop</span><span class="p">,</span> <span class="n">Vector2Int</span> <span class="n">pointLeftBottom</span><span class="p">,</span><span class="n">Texture2D</span> <span class="n">inputTex</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="n">pointRightTop</span> <span class="p">=</span> <span class="n">pointRightTop</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="n">pointLeftBottom</span> <span class="p">=</span> <span class="n">pointLeftBottom</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="n">inputTex</span> <span class="p">=</span> <span class="n">inputTex</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">public</span> <span class="n">Texture2D</span> <span class="nf">Trim</span> <span class="p">()</span>
    <span class="p">{</span>
        <span class="kt">var</span> <span class="n">tw</span> <span class="p">=</span> <span class="n">pointRightTop</span><span class="p">.</span><span class="n">x</span> <span class="p">-</span> <span class="n">pointLeftBottom</span><span class="p">.</span><span class="n">x</span><span class="p">;</span>
        <span class="kt">var</span> <span class="n">th</span> <span class="p">=</span> <span class="n">pointRightTop</span><span class="p">.</span><span class="n">y</span> <span class="p">-</span> <span class="n">pointLeftBottom</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>
        <span class="kt">var</span> <span class="n">result</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Texture2D</span><span class="p">(</span><span class="n">tw</span><span class="p">,</span><span class="n">th</span><span class="p">);</span>
        <span class="kt">var</span> <span class="n">pixels</span> <span class="p">=</span> <span class="n">inputTex</span><span class="p">.</span><span class="nf">GetPixels</span><span class="p">(</span><span class="n">pointLeftBottom</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">pointLeftBottom</span><span class="p">.</span><span class="n">y</span><span class="p">,</span><span class="n">tw</span><span class="p">,</span><span class="n">th</span><span class="p">);</span>
        <span class="n">result</span><span class="p">.</span><span class="nf">SetPixels</span><span class="p">(</span><span class="n">pixels</span><span class="p">);</span>
        <span class="n">result</span><span class="p">.</span><span class="nf">Apply</span><span class="p">();</span>
        <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h2>
<span id="トリミング成功" class="fragment"></span><a href="#%E3%83%88%E3%83%AA%E3%83%9F%E3%83%B3%E3%82%B0%E6%88%90%E5%8A%9F"><i class="fa fa-link"></i></a>トリミング成功！</h2>

<p>コレで顔の部分を追いかけ続けるテクスチャが完成しました。後はmaterialの_MainTextureに貼り付けるなどすると好きなモデルに貼り付けたりできます。空きフレームの線形補完とかトラッキングが外れたときの処理とかを入れるともっとそれらしくなるかもしれません。綺麗にUV展開したモデルに貼り付けると、顔ハメパネルを作ることもできます</p>

<h1>
<span id="さいごに" class="fragment"></span><a href="#%E3%81%95%E3%81%84%E3%81%94%E3%81%AB"><i class="fa fa-link"></i></a>さいごに</h1>

<p>コレで顔の切り抜きを取得することができたので、何か好きなものの顔ハメパネルでもつくれば良さそう。</p>
</div></div></section><div class="css-1yzj1fm"><div class="css-1uv1qiv"><span class="fa fa-twitter"></span></div><div class="css-1uv1qiv"><span class="fa fa-facebook"></span></div></div><div class="apm-Content"><div class="apm-Content_title">Why not register and get more from Qiita?</div><ol class="apm-Content_list"><li>We will deliver articles that match you<div class="description">By following users and tags, you can catch up information on technical fields that you are interested in as a whole</div></li><li>you can read useful information later efficiently<div class="description">By &quot;stocking&quot; the articles you like, you can search right away</div></li><div><a class="apm-Content_help" href="https://help.qiita.com/ja/articles/qiita-login-user" target="_blank"><i class="fa fa-fw fa-arrow-circle-right"></i>What you can do with signing up</a></div></ol><a href="/signup?callback_action=login_or_signup&amp;redirect_to=%2FHirai0827%2Fitems%2F8462c4c2dc2ab0315500&amp;realm=qiita" class="apm-Content_button apm-Content_button-signup">Sign up</a><a href="/login?callback_action=login_or_signup&amp;redirect_to=%2FHirai0827%2Fitems%2F8462c4c2dc2ab0315500&amp;realm=qiita" class="apm-Content_button apm-Content_button-signin">Login</a></div></div><div class="css-helsa7"></div></div></div></div><div class="css-109dbrr"><div class="css-5jpx49"><div class="css-mnxgyc"><button class=" css-1vlpknv"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/Hirai0827/items/8462c4c2dc2ab0315500/likers" class="css-1iupg5d">15</a></div><div class="css-fsjkhv"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-1b17vb0">14</span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-7i7f4d"><div class="css-1gj7nt">Improve article</div><a href="/drafts/8462c4c2dc2ab0315500/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/Hirai0827/items/8462c4c2dc2ab0315500/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/Hirai0827/items/8462c4c2dc2ab0315500/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/Hirai0827/items/8462c4c2dc2ab0315500/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/Hirai0827/items/8462c4c2dc2ab0315500.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="PersonalArticlePage" data-dom-id="PersonalArticlePage-react-component-334d56ca-9445-4cff-a19c-d216c6c0f260">{"authorAnalyticsTrackingId":null,"organizationAnalyticsTrackingId":null}</script>
      
<footer id="globalFooter" class="st-Footer"><div class="st-Footer_container"><div class="st-Footer_start"><div class="st-Footer_logo"><svg viewbox="0 0 426.57 130" xmlns="http://www.w3.org/2000/svg"><circle cx="167.08" cy="21.4" r="12.28" /><path d="M250.81 29.66h23.48v18.9h-23.48z" /><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z" /><circle cx="216.33" cy="21.4" r="12.28" /></svg></div><div class="st-Footer_catchcopy">How developers code is here.</div><div class="st-Footer_socials"><a class="fa fa-twitter" href="https://twitter.com/qiita"></a><a class="fa fa-facebook-square" href="https://www.facebook.com/qiita/"></a></div></div><div class="st-Footer_end"><div class="st-Footer_qiita"><div class="st-Footer_label">Qiita</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="/about">About</a><a href="/terms">Terms</a><a href="/privacy">Privacy</a><a target="_blank" href="http://help.qiita.com/ja/articles/qiita-community-guideline">Guideline</a><a target="_blank" href="https://help.qiita.com/ja/articles/others-brand-guideline">Design Guideline</a></div><div class="st-Footer_column"><a href="/release-notes">Release</a><a href="/api/v2/docs">API</a><a href="/feedback/new">ご意見</a><a href="https://help.qiita.com">Help</a><a target="_blank" href="https://qiita.com/ads?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Advertisement</a></div></div></div><div class="st-Footer_increments"><div class="st-Footer_label">Increments</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="https://increments.co.jp/company/">About</a><a href="https://increments.co.jp/jobs/">採用情報</a><a href="https://blog.qiita.com">Blog</a></div><div class="st-Footer_column"><a href="https://teams.qiita.com/">Qiita Team</a><a href="https://jobs.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Jobs</a><a href="https://zine.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Zine</a></div></div></div></div></div><div class="st-Footer_copyright">© 2011-2021 Increments Inc.</div></footer><div id="Snackbar-react-component-dd293d39-48b4-43ce-a02e-8029fc2126e5"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="Snackbar" data-dom-id="Snackbar-react-component-dd293d39-48b4-43ce-a02e-8029fc2126e5">{}</script>
      
<div id="LoginModal-react-component-e9207b4d-d075-4da9-a3f5-4143c4b3d878"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="LoginModal" data-dom-id="LoginModal-react-component-e9207b4d-d075-4da9-a3f5-4143c4b3d878">{}</script>
      
<div id="StockModal-react-component-9a181cca-4f50-4a0a-afa5-f1c6bb79e728"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="StockModal" data-dom-id="StockModal-react-component-9a181cca-4f50-4a0a-afa5-f1c6bb79e728">{}</script>
      
</div><div id="dataContainer" style="display: none;" data-config="{&quot;actionPath&quot;:&quot;public/items#show&quot;,&quot;settings&quot;:{&quot;analyticsTrackingId&quot;:&quot;UA-24675221-12&quot;,&quot;assetsMap&quot;:{},&quot;csrfToken&quot;:&quot;yl67BHMvDLpWscyEbG0R31ash16Y7hqJamT+zOP/QFGKwXRWRtkhNjZlefykFgEYW/7z9tyANh6FJnbMV0JTng==&quot;,&quot;locale&quot;:&quot;en&quot;},&quot;currentUser&quot;:null}" /></body></html><script type="application/json" data-js-react-on-rails-store="AppStoreWithReactOnRails">{"snackbar":{"type":"","body":"","isActive":false},"article":{"article":{"body":"\n\u003ch1\u003e\n\u003cspan id=\"はじめに\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eはじめに\u003c/h1\u003e\n\n\u003cp\u003eこんにちは、避雷です。お仕事の関係でOpenCV叩いてAR顔ハメパネルを作る、みたいな案件に取り組んだのでその時のノウハウを提供します。ちなみに案件自体は提案したコンサルの先生が渋い顔をしたので消滅しました。合掌。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"用いる技術\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E7%94%A8%E3%81%84%E3%82%8B%E6%8A%80%E8%A1%93\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e用いる技術\u003c/h1\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"opencv-plus-unity\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#opencv-plus-unity\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eOpenCV plus Unity\u003c/h2\u003e\n\n\u003cp\u003e基本的に高価なイメージのある（出来が良いので仕方なくは有りますが）OpenCV x Unity系のAssetの救世主、OpenCV plus Unityくんです。OpenCVsharp（OpenCVをC#で使えるようにしたライブラリ）をベースに、Unityに適応させたブツです。基本的にテクスチャ→画像処理用の変数→加工→テクスチャに戻すというステップで画像を加工します。\u003cbr\u003e\n\u003ca href=\"https://assetstore.unity.com/packages/tools/integration/opencv-plus-unity-85928\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://assetstore.unity.com/packages/tools/integration/opencv-plus-unity-85928\u003c/a\u003e\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"unity\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#unity\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eUnity\u003c/h2\u003e\n\n\u003cp\u003e言わずと知れたゲームエンジンくん。説明不要でしょう。今回取り扱う部分ではバージョンを特にこだわる必要はないと思います（もちろんOpenCVplusUnityの対応範囲内で）\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"試しに顔認識部分を動かしてみよう\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%A9%A6%E3%81%97%E3%81%AB%E9%A1%94%E8%AA%8D%E8%AD%98%E9%83%A8%E5%88%86%E3%82%92%E5%8B%95%E3%81%8B%E3%81%97%E3%81%A6%E3%81%BF%E3%82%88%E3%81%86\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e試しに顔認識部分を動かしてみよう\u003c/h1\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"アセットのインポート\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%A2%E3%82%BB%E3%83%83%E3%83%88%E3%81%AE%E3%82%A4%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%88\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eアセットのインポート\u003c/h2\u003e\n\n\u003cp\u003eOpenCVplusUnityをAssetStoreで開いてダウンロード、インポートします。\u003cbr\u003e\n\u003ca href=\"https://assetstore.unity.com/packages/tools/integration/opencv-plus-unity-85928\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://assetstore.unity.com/packages/tools/integration/opencv-plus-unity-85928\u003c/a\u003e\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"unsafecodeを許可する\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#unsafecode%E3%82%92%E8%A8%B1%E5%8F%AF%E3%81%99%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eUnsafeCodeを許可する\u003c/h2\u003e\n\n\u003cp\u003eもしこの時点で警告が出たら、Unsafeなコードを許可してあげる必要があります。\u003cbr\u003e\nBuildSettings→PlayerSettings→OtherSettings→Configuration→Allow 'Unsafe' Codeをチェックすると動くようになります。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/59d69358dbfe7f56d192c4eba18d12d8274b470d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3235363233312f31366635613262312d353765372d363834622d323031302d3735636435633361386563392e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F256231%2F16f5a2b1-57e7-684b-2010-75cd5c3a8ec9.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=b9025c7f957000aecf701b690421b704\" alt=\"キャプチャ489.PNG\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/256231/16f5a2b1-57e7-684b-2010-75cd5c3a8ec9.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F256231%2F16f5a2b1-57e7-684b-2010-75cd5c3a8ec9.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=3e6e2a3f4f4f05ca5e0610f7eacb610f 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"ウェブカメラがあるか確認する\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%A6%E3%82%A7%E3%83%96%E3%82%AB%E3%83%A1%E3%83%A9%E3%81%8C%E3%81%82%E3%82%8B%E3%81%8B%E7%A2%BA%E8%AA%8D%E3%81%99%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eウェブカメラがあるか確認する\u003c/h2\u003e\n\n\u003cp\u003e今回はカメラから画像を取り込んで、顔認識して、顔の部分を四角で囲む、みたいなサンプルなのでウェブカメラが存在しないとそもそも動きません。PCに内蔵してあるカメラかElecom当たりのUSBでつなぐウェブカメラとかを買いましょう。（最安で1000円ぐらいで買えそう）\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"buildsettingsにsceneを加える\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#buildsettings%E3%81%ABscene%E3%82%92%E5%8A%A0%E3%81%88%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eBuildSettingsにSceneを加える\u003c/h2\u003e\n\n\u003cp\u003e次にOpenCV+Unity/Demo内にあるLobby.sceneというシーンを開きます。これは各種サンプルにつながるハブの役割を果たすシーンなのですが、BuildSettingsで移動先のシーンを追加しないとシーン間の移動ができません、追加しましょう。今回は顔認識のサンプルだけ確認できればいいのでFaceDetector.sceneだけ追加。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"サンプルシーンを起動する\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB%E3%82%B7%E3%83%BC%E3%83%B3%E3%82%92%E8%B5%B7%E5%8B%95%E3%81%99%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eサンプルシーンを起動する\u003c/h2\u003e\n\n\u003cp\u003e早速サンプルシーンを起動しましょう。LobbyシーンからFaceDetectorのボタンを押すとカメラの視界が出てきて、その中にオタクの顔が四角い線でハイライトされていれば成功です。こんな感じ。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/bd13975046c11ccad4293238ccf0c5bb94ee8e92/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3235363233312f65623261373062662d626466352d386138302d616134392d6136613731393762353830352e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F256231%2Feb2a70bf-bdf5-8a80-aa49-a6a7197b5805.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=7222daa4e1a59fc621d38444623358db\" alt=\"キャプチャ414.PNG\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/256231/eb2a70bf-bdf5-8a80-aa49-a6a7197b5805.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F256231%2Feb2a70bf-bdf5-8a80-aa49-a6a7197b5805.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=23d0850194a73e0cf24e57ff0342611c 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"じゃあ顔の部分だけ切り抜こう\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%98%E3%82%83%E3%81%82%E9%A1%94%E3%81%AE%E9%83%A8%E5%88%86%E3%81%A0%E3%81%91%E5%88%87%E3%82%8A%E6%8A%9C%E3%81%93%E3%81%86\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eじゃあ、顔の部分だけ切り抜こう\u003c/h1\u003e\n\n\u003cp\u003eここからが本記事独自の内容です。これより上は多分他の記事でも書いてある気がします。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"サンプルをコピーする\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB%E3%82%92%E3%82%B3%E3%83%94%E3%83%BC%E3%81%99%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eサンプルをコピーする\u003c/h2\u003e\n\n\u003cp\u003e折角うまく動いているサンプル(FaceDetector.cs)があるのでこれを参考に作っていきます。と言っても顔の部分を切り抜くだけなら全体を把握する必要はなくて、顔認識の結果を処理している\u003ccode\u003eProcessTexture\u003c/code\u003eの部分だけに注目すればよいです。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e        \u003cspan class=\"k\"\u003eprotected\u003c/span\u003e \u003cspan class=\"k\"\u003eoverride\u003c/span\u003e \u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"nf\"\u003eProcessTexture\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eWebCamTexture\u003c/span\u003e \u003cspan class=\"n\"\u003einput\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003eref\u003c/span\u003e \u003cspan class=\"n\"\u003eTexture2D\u003c/span\u003e \u003cspan class=\"n\"\u003eoutput\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"c1\"\u003e// detect everything we're interested in\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eprocessor\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eProcessTexture\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003einput\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eTextureParameters\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n            \u003cspan class=\"c1\"\u003e// mark detected objects\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eprocessor\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eMarkDetected\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n            \u003cspan class=\"c1\"\u003e// processor.Image now holds data we'd like to visualize\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eoutput\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eUnity\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eMatToTexture\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eprocessor\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eImage\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eoutput\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e   \u003cspan class=\"c1\"\u003e// if output is valid texture it's buffer will be re-used, otherwise it will be re-created\u003c/span\u003e\n\n            \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e(このコードでやっていること自体は、ウェブカメラの映像からテクスチャを取得→顔認識をかける→結果をもとに顔を四角くマークする、というもの(WebCamera.csを継承する形で最終画像を出力するprocess部分を書き換えている))\u003cbr\u003e\nコレを少しずつ書き換えて動かしていきます。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"顔が何個あるか取得する\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E9%A1%94%E3%81%8C%E4%BD%95%E5%80%8B%E3%81%82%E3%82%8B%E3%81%8B%E5%8F%96%E5%BE%97%E3%81%99%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e顔が何個あるか取得する\u003c/h2\u003e\n\n\u003cp\u003e顔の個数は\u003ccode\u003eprocessor.Faces.Count\u003c/code\u003eで取得します。Facesクラス内にそれぞれの顔のデータが入っています。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"顔がある矩形範囲を取得する\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E9%A1%94%E3%81%8C%E3%81%82%E3%82%8B%E7%9F%A9%E5%BD%A2%E7%AF%84%E5%9B%B2%E3%82%92%E5%8F%96%E5%BE%97%E3%81%99%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e顔がある矩形範囲を取得する\u003c/h2\u003e\n\n\u003cp\u003e顔を含む長方形の範囲の各頂点（右上、左上、右下、左下）のテクスチャ上の座標（この座標はテクスチャのピクセル上の物で、UnityのTransformではない）は それぞれ\u003cbr\u003e\n\u003ccode\u003eprocessor.Faces[i].Region.TopRight\u003c/code\u003e\u003cbr\u003e\n\u003ccode\u003eprocessor.Faces[i].Region.TopLeft\u003c/code\u003e\u003cbr\u003e\n\u003ccode\u003eprocessor.Faces[i].Region.BottomRight\u003c/code\u003e\u003cbr\u003e\n\u003ccode\u003eprocessor.Faces[i].Region.BottomLeft\u003c/code\u003e\u003cbr\u003e\n で取得することができます。今回は長方形の各辺がx軸とy軸に平行なので右上と左下の座標がわかれば、元の長方形を再現することができます。これらの情報をキープして切り抜くときに使いましょう。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"opencvの座標をtexture2dの座標に直す\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#opencv%E3%81%AE%E5%BA%A7%E6%A8%99%E3%82%92texture2d%E3%81%AE%E5%BA%A7%E6%A8%99%E3%81%AB%E7%9B%B4%E3%81%99\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eOpenCVの座標をTexture2Dの座標に直す\u003c/h2\u003e\n\n\u003cp\u003eここ、僕個人が滅茶苦茶詰まったところなんですけど、OpenCVで使われている座標系とUnityのTexture2Dで使われている座標系は原点と各軸の正の向きが違います。 しょうがないのでこれらを変換しましょう。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"n\"\u003eafterPos\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ebeforePos\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"n\"\u003eafterPos\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ey\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003etargetTexture\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eheight\u003c/span\u003e \u003cspan class=\"p\"\u003e-\u003c/span\u003e \u003cspan class=\"n\"\u003ebeforePos\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/af6baea9dd024652bf441767097a198c458e03be/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3235363233312f34663736333762612d336366662d343037382d373266342d6561373731396531386238662e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F256231%2F4f7637ba-3cff-4078-72f4-ea7719e18b8f.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=0d35b8364cbdb9e54c82e2a1d5dea76a\" alt=\"pic_for_art_001.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/256231/4f7637ba-3cff-4078-72f4-ea7719e18b8f.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F256231%2F4f7637ba-3cff-4078-72f4-ea7719e18b8f.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=493cf37a66e58ecadf1115a80dd7875a 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"テクスチャを切り出す\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%86%E3%82%AF%E3%82%B9%E3%83%81%E3%83%A3%E3%82%92%E5%88%87%E3%82%8A%E5%87%BA%E3%81%99\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eテクスチャを切り出す\u003c/h2\u003e\n\n\u003cp\u003eTexture2Dには特定の範囲のpixelを転写する便利な関数 \u003ccode\u003eGetPixels(起点座標x,起点座標y,幅,高さ)\u003c/code\u003e があり、これがそのままトリミングの機能を果たしてくれます。超便利。これを使って元画像からピクセル列を取り出しそれを新しいテクスチャに貼り付けることでトリミングが可能になります。この際にトリミング後の画像サイズの情報が必要になるのでそれも用意しましょう。実装例のTrimmingTexureです。右上と左下のポイントを指定するとそれらを頂点とした矩形範囲を切り取ってTexture2Dとして切り出してくれます。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eTrimmingTexture\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003eVector2Int\u003c/span\u003e \u003cspan class=\"n\"\u003epointRightTop\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003eVector2Int\u003c/span\u003e \u003cspan class=\"n\"\u003epointLeftBottom\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003eTexture2D\u003c/span\u003e \u003cspan class=\"n\"\u003einputTex\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003eTrimmingTexture\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eVector2Int\u003c/span\u003e \u003cspan class=\"n\"\u003epointRightTop\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eVector2Int\u003c/span\u003e \u003cspan class=\"n\"\u003epointLeftBottom\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003eTexture2D\u003c/span\u003e \u003cspan class=\"n\"\u003einputTex\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003epointRightTop\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003epointRightTop\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003epointLeftBottom\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003epointLeftBottom\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003einputTex\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003einputTex\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eTexture2D\u003c/span\u003e \u003cspan class=\"nf\"\u003eTrim\u003c/span\u003e \u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003etw\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003epointRightTop\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"p\"\u003e-\u003c/span\u003e \u003cspan class=\"n\"\u003epointLeftBottom\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eth\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003epointRightTop\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ey\u003c/span\u003e \u003cspan class=\"p\"\u003e-\u003c/span\u003e \u003cspan class=\"n\"\u003epointLeftBottom\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eresult\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eTexture2D\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003etw\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003eth\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003epixels\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003einputTex\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eGetPixels\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003epointLeftBottom\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003epointLeftBottom\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003etw\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003eth\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSetPixels\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003epixels\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eApply\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"トリミング成功\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%88%E3%83%AA%E3%83%9F%E3%83%B3%E3%82%B0%E6%88%90%E5%8A%9F\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eトリミング成功！\u003c/h2\u003e\n\n\u003cp\u003eコレで顔の部分を追いかけ続けるテクスチャが完成しました。後はmaterialの_MainTextureに貼り付けるなどすると好きなモデルに貼り付けたりできます。空きフレームの線形補完とかトラッキングが外れたときの処理とかを入れるともっとそれらしくなるかもしれません。綺麗にUV展開したモデルに貼り付けると、顔ハメパネルを作ることもできます\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"さいごに\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%95%E3%81%84%E3%81%94%E3%81%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eさいごに\u003c/h1\u003e\n\n\u003cp\u003eコレで顔の切り抜きを取得することができたので、何か好きなものの顔ハメパネルでもつくれば良さそう。\u003c/p\u003e\n","createdAt":"2019-09-24T12:10:46Z","elapsedYearsFromLastModifiedAt":1,"encryptedId":"tBQdgK2IGvC4HRWmgnsMG/9mT39bfymsWA==--5T+yTQyAd91QEnvF--+N4PWAxxNu21hkYVDH7DWQ==","isBanned":false,"isDeprecated":true,"isDestroyableByViewer":false,"isEditRequestReadableByViewer":true,"isEditRequestSendableByViewer":true,"isLikableByViewer":true,"isLikedByViewer":false,"isPublic":true,"isSlide":false,"isStockableByViewer":true,"isStockedByViewer":false,"isSubscribableByViewer":false,"isSubscribedByViewer":false,"isUpdatableByViewer":false,"isUpdated":false,"lastModifiedAt":"2019-09-24T12:10:46Z","likesCount":15,"linkUrl":"https://qiita.com/Hirai0827/items/8462c4c2dc2ab0315500","organization":null,"originalId":1029076,"stockedCount":14,"title":"OpenCV plus Unityの顔認識を使って顔の部分だけトリミングしよう（そして顔ハメパネルを作ろう）","toc":"\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB\"\u003eはじめに\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E7%94%A8%E3%81%84%E3%82%8B%E6%8A%80%E8%A1%93\"\u003e用いる技術\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#opencv-plus-unity\"\u003eOpenCV plus Unity\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#unity\"\u003eUnity\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E8%A9%A6%E3%81%97%E3%81%AB%E9%A1%94%E8%AA%8D%E8%AD%98%E9%83%A8%E5%88%86%E3%82%92%E5%8B%95%E3%81%8B%E3%81%97%E3%81%A6%E3%81%BF%E3%82%88%E3%81%86\"\u003e試しに顔認識部分を動かしてみよう\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%A2%E3%82%BB%E3%83%83%E3%83%88%E3%81%AE%E3%82%A4%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%88\"\u003eアセットのインポート\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#unsafecode%E3%82%92%E8%A8%B1%E5%8F%AF%E3%81%99%E3%82%8B\"\u003eUnsafeCodeを許可する\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%A6%E3%82%A7%E3%83%96%E3%82%AB%E3%83%A1%E3%83%A9%E3%81%8C%E3%81%82%E3%82%8B%E3%81%8B%E7%A2%BA%E8%AA%8D%E3%81%99%E3%82%8B\"\u003eウェブカメラがあるか確認する\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#buildsettings%E3%81%ABscene%E3%82%92%E5%8A%A0%E3%81%88%E3%82%8B\"\u003eBuildSettingsにSceneを加える\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB%E3%82%B7%E3%83%BC%E3%83%B3%E3%82%92%E8%B5%B7%E5%8B%95%E3%81%99%E3%82%8B\"\u003eサンプルシーンを起動する\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%81%98%E3%82%83%E3%81%82%E9%A1%94%E3%81%AE%E9%83%A8%E5%88%86%E3%81%A0%E3%81%91%E5%88%87%E3%82%8A%E6%8A%9C%E3%81%93%E3%81%86\"\u003eじゃあ、顔の部分だけ切り抜こう\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB%E3%82%92%E3%82%B3%E3%83%94%E3%83%BC%E3%81%99%E3%82%8B\"\u003eサンプルをコピーする\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E9%A1%94%E3%81%8C%E4%BD%95%E5%80%8B%E3%81%82%E3%82%8B%E3%81%8B%E5%8F%96%E5%BE%97%E3%81%99%E3%82%8B\"\u003e顔が何個あるか取得する\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E9%A1%94%E3%81%8C%E3%81%82%E3%82%8B%E7%9F%A9%E5%BD%A2%E7%AF%84%E5%9B%B2%E3%82%92%E5%8F%96%E5%BE%97%E3%81%99%E3%82%8B\"\u003e顔がある矩形範囲を取得する\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#opencv%E3%81%AE%E5%BA%A7%E6%A8%99%E3%82%92texture2d%E3%81%AE%E5%BA%A7%E6%A8%99%E3%81%AB%E7%9B%B4%E3%81%99\"\u003eOpenCVの座標をTexture2Dの座標に直す\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%86%E3%82%AF%E3%82%B9%E3%83%81%E3%83%A3%E3%82%92%E5%88%87%E3%82%8A%E5%87%BA%E3%81%99\"\u003eテクスチャを切り出す\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%88%E3%83%AA%E3%83%9F%E3%83%B3%E3%82%B0%E6%88%90%E5%8A%9F\"\u003eトリミング成功！\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%81%95%E3%81%84%E3%81%94%E3%81%AB\"\u003eさいごに\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n","totalPv":6404,"uuid":"8462c4c2dc2ab0315500","banReason":null,"adventCalendarItem":null,"author":{"encryptedId":"I3Cmncy5ZCMgtYIfZbS/ZIGDfx2Z--8Q5+ZKlS36tcScBl--03OeHoSNnIr/wSpfWzo0+A==","originalId":256231,"description":"","facebookUrl":null,"githubUrl":null,"isBlockingViewer":false,"isFollowableByViewer":true,"isFollowedByViewer":false,"isTweetWebNotificationReceivable":true,"linkedinUrl":null,"name":"","profileImageUrl":"https://qiita-image-store.s3.amazonaws.com/0/256231/profile-images/1551797107","profileImageUrlW48":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F256231%2Fprofile-images%2F1551797107?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=48\u0026s=f1cae015f31bc7e5432d8df77455d000","profileImageUrlW75":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F256231%2Fprofile-images%2F1551797107?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=fa44f4327ac0047f74e1de4a70ef8956","urlName":"Hirai0827","websiteUrl":null,"twitterUrl":"https://twitter.com/lucknknock","twitterUrlName":"lucknknock","revealedOrganizations":{"edges":[{"node":{"encryptedId":"f7wWISfFYXFIH3xnLwjgAo3vWQQc7s2X3fg=--8YnByXUHhvxDQ5mP--VoTdFCWPAJXZMcyRium1zg==","isBetaReleaseEnabled":false,"isFollowableByViewer":false,"isFollowedByViewer":false,"name":"UT-virtual","logoUrl":"https://s3-ap-northeast-1.amazonaws.com/qiita-organization-image/d16fae2434659d86f70b2dda0eeca79c237ce359/original.jpg?1569548252","urlName":"utvirtual","description":"VRの普及啓蒙と体験創造を理念として、VR作品の制作・展示、勉強会などを行っているインカレサークル","url":"http://utvirtual.tech/"}}]}},"tags":[{"name":"C#","urlName":"csharp"},{"name":"OpenCV","urlName":"opencv"},{"name":"Unity","urlName":"unity"}],"followingLikers":{"edges":[]},"comments":{"totalCount":0}},"comments":[],"client":null,"ads_event_emitter":null}}</script>
