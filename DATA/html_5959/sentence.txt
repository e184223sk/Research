More than 3 years have passed since last update.よく組み込みのメソッドで付いてる、みたいなプリミティブ型から繋げられるチェーンを
D, C#, VB.Net, JavaScript, Python
で試してみた。数値xに対し、buyメソッドを繋げる。
buyメソッドは数値xの値を2倍にして返すものである。D言語ではbuy(x)とx.buyが等価であるため、
特別なことは何も行わなくても実装が可能。C#には拡張メソッドと言われる、
疑似的にチェーンメソッドを作成できる仕組みが用意されているのでこれを利用。C#と同様に拡張メソッドが利用できる。Numberオブジェクトに直接prototypeを生やすことで可能。
globalオブジェクトに直接手を加えることになるので余り良い手では無さそう。
なお、数値をNumberオブジェクトと認識させるためには括弧で囲む必要がある。素の数値型(int,float)に対してのチェーンを繋げることは不可能っぽい。
クラス自体のオーバーロードや拡張も許されていない様子。
そのため、適当なクラスに数値型を継承してメソッドを拡張させることで疑似的に対応することは可能。
今までint関数だと思っていたけど、これはintオブジェクトのコンストラクタだったということなのかな。rubyとか見てると何でもチェーンしているイメージだったので、
他の言語だとどうなるのか試してみた次第。意外にやろうと思えばできたけど、
僕は普通に関数使っていればいいのかなぁと思った。
メソッドチェーンカッコいいけど。


