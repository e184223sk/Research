More than 3 years have passed since last update.ヴァル研究所 Advent Calendar 2016 の11日目はUnityに関するお話です。Super Mario Runなどで話題のUnity上で駅すぱあとの経路探索をやってしまう方法です。
しかも、Unityも駅すぱあとも無料で始められるので、初めての方にもお勧めです。まずはUnityをWebサイトからダウンロードします。
ダウンロードはこちら(Unity Technologies社)から行うことが出来ます。
ちなみに、WindowsとMacOSXのどちらでも動きます。ダウンロードしたファイルを実行してインストールします。
今回はUnityのエディター本体だけで十分ですが、将来的にiOSやAndroidなどでも動かしたい場合は対応するプラットフォームのコンポーネントも入れておくと良いでしょう。「駅すぱあとWebサービス」は、駅すぱあとの検索エンジン等をWebAPIとして活用出来るサービスです。
有料のスタンダードプランと無料のフリープランがありますが、今回利用する駅すぱあとWebサービスはフリープランでかまいません。駅すぱあとWebサービスお申し込みページはこちらからなお、ご利用ドメインの入力を求められますが、Unityのエディターから利用する場合はドメイン指定が不要ですので、ドメインが分からない場合は「localhost」などを入れておけば大丈夫です。アクセスキーが発行されるまでしばらくかかります。その間にUnityを動かしてみたり、アセットストア(Unity Technologies社)でUnity Technologies社のサンプルプロジェクトをダウンロードして動かしてみたりして、Unityに慣れておくことをオススメします。サンプルプロジェクト一覧(Unity Technologies社)Unityを起動します。
なお、初めて使う場合はUnityのアカウント作成が必要になります。
画面の指示にしたがって登録を完了させてください。今回は分かりやすいように空のプロジェクトを作成します。
プロジェクト名は特に制限がありませんので、分かりやすいものを指定すれば大丈夫です。
また、エディター拡張のみ利用しますので、3Dと2Dのどちらでもかまいません。ちなみに、既にUnityを使いこなせている方は自分のプロジェクトに入れてみるのも良いでしょう。
※このページに記載のC#スクリプトは転載可ですので、GitHubなどで共有いただいても問題ありません。これで Ekispert.cs ファイルが出来上がりました。先ほど作成したスクリプトファイルをダブルクリックするとMonoDevelopが開くはずです。
下記のスクリプトを Ekispert.cs のスクリプトに置き換えて保存してみてください。Window メニューの中に「駅すぱあと」が表示されるようになりました。
早速カーソルを合わせて選択してみます。すると、どうでしょう、駅すぱあとウィンドウが開きます。出発地、目的地、送られてきた駅すぱあとWebサービスのアクセスキーを入力すると「探索結果を表示」のボタンが出ますので、押してみます。ブラウザが立ちあがって、経路が表示されましたか？Unityのエディターに統合することで簡単に移動経路が表示出来るようになりました。
「開発に夢中になって帰宅時間が分からない」とか「終電あるの？」とか、色々な場面で活用できると思います。
また、今回利用した駅すぱあとWebサービスフリープランのAPIは「駅すぱあと for web URL生成」です。
フリープランドキュメント
スクリプトを書き換えて「常に終電で経路を表示してみる」とか、アクセスキーの入力が面倒なので埋め込んでみるとか、カスタマイズすることも可能です。ご注意 アクセスキーは大切に扱ってください。埋め込んだ状態でGitHubなどで公開は行わないようにお願いします。


