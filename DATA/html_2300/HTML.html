<!DOCTYPE html><html><head><meta charset="utf-8" /><title>リンクスリングスのアウトゲーム設計 - Qiita</title><meta content="width=device-width,initial-scale=1,shrink-to-fit=no,viewport-fit=cover" name="viewport" /><meta content="#55c500" name="theme-color" /><meta content="XWpkTG32-_C4joZoJ_UsmDUi-zaH-hcrjF6ZC_FoFbk" name="google-site-verification" /><meta content="telephone=no" name="format-detection" /><link rel="canonical" href="https://qiita.com/ozaki_shinya/items/bac70ebdbd330ccbb6d3" /><link href="/manifest.json" rel="manifest" /><link href="/opensearch.xml" rel="search" title="Qiita" type="application/opensearchdescription+xml" /><link as="script" href="https://www.googletagservices.com/tag/js/gpt.js" rel="preload" /><link href="https://securepubads.g.doubleclick.net" rel="preconnect" /><script async="" src="https://www.googletagservices.com/tag/js/gpt.js"></script><meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="SRkwPrFEZWk3Oj15U8OzLZBX0hGzESXQczzLkz03dtXuY0iiwo+CV9JF/x+eA8vtUWHUtGecjRyt6aSMERs7dA==" /><link rel="shortcut icon" type="image/x-icon" href="https://cdn.qiita.com/assets/favicons/public/production-c620d3e403342b1022967ba5e3db1aaa.ico" /><link rel="apple-touch-icon" type="image/png" href="https://cdn.qiita.com/assets/favicons/public/apple-touch-icon-ec5ba42a24ae923f16825592efdc356f.png" /><link rel="stylesheet" media="all" href="https://cdn.qiita.com/assets/public/article-2eaa7dbedc42a8ea65c722cda46d0ebb.min.css" /><script src="https://cdn.qiita.com/assets/public/v3-article-bundle-63de2d91fef827269d3f6b958db2335b.min.js" defer="defer"></script><meta name="twitter:card" content="summary_large_image"><meta content="@Qiita" name="twitter:site" /><meta property="og:type" content="article"><meta property="og:title" content="リンクスリングスのアウトゲーム設計 - Qiita"><meta property="og:image" content="https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0&amp;w=1200&amp;mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND00NE9xNDRPejQ0S3Y0NEs1NDRPcTQ0T3o0NEt3NDRLNTQ0R3U0NEtpNDRLbTQ0T0k0NEt5NDRPODQ0T2c2S2l0NktpSSZ0eHQtY29sb3I9JTIzMzMzJnR4dC1mb250PUhpcmFnaW5vJTIwU2FucyUyMFc2JnR4dC1zaXplPTU0JnR4dC1jbGlwPWVsbGlwc2lzJnR4dC1hbGlnbj1jZW50ZXIlMkNtaWRkbGUmcz1iZDgzZGQzY2FkYWZiZTdkZDEzNjljZjAzMGQ3MWRmOQ&amp;mark-align=center%2Cmiddle&amp;blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RRzk2WVd0cFgzTm9hVzU1WVEmdHh0LWNvbG9yPSUyMzMzMyZ0eHQtZm9udD1IaXJhZ2lubyUyMFNhbnMlMjBXNiZ0eHQtc2l6ZT00NSZ0eHQtYWxpZ249cmlnaHQlMkNib3R0b20mcz0wMWE0ZjZiZDY4MmQ5ODNjNGVlYmZkZGZjMTM3NzFkZA&amp;blend-align=center%2Cmiddle&amp;blend-mode=normal&amp;s=1926869aa3bdc6b489aaf7ae49524b17"><meta property="og:description" content="

はじめに

サムザップ #2 Advent Calendar 2019 の12/3の記事です。

株式会社サムザップの尾崎です。Unityエンジニアです。


内容

リンクスリングスのアウトゲームの設計について紹介したいと思いま..."><meta content="https://qiita.com/ozaki_shinya/items/bac70ebdbd330ccbb6d3" property="og:url" /><meta content="Qiita" property="og:site_name" /><meta content="564524038" property="fb:admins" /><meta content="C#,Unity,設計,デザインパターン,ゲームプログラミング" name="keywords" /><script>!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window, document,'script',
'https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '668972150489891');
fbq('track', 'PageView');</script><style data-emotion-css="17jxvjw 11t2ec1 1dvr2p8 18lkoru 1g4cku8 1iupg5d ijvq0v 15cocm3 12rp90f 115f4t 1b8uj5v 79elbk 16hhh7b fcbn8c 1gj7nt 154zy0m yikrym 1jqivyb 1ode1bp le4d8r 1hbd3g7 1nzh4zz 38fzdi helsa7 8qb8m4 2imjyh he5w1s 70qvj9 3ojehk 100alwu 1dtnjt5 10ougpm 1ay9vb9 m19uds cgzq40 1wa99t2 1l3zk9f 4czcte 1yzj1fm 1uv1qiv 109dbrr 5jpx49 mnxgyc 1vlpknv fsjkhv 1b17vb0 7i7f4d"}>.css-17jxvjw{display:grid;display:-ms-grid;grid-template-columns:80px minmax(0,1fr) 300px;-ms-grid-columns:80px minmax(0,1fr) 300px;grid-template-rows:minmax(270px,auto) 1fr;-ms-grid-rows:minmax(270px,auto) 1fr;max-width:1280px;margin-right:auto;margin-left:auto;padding-top:24px;padding-right:24px;padding-left:24px;}@media (max-width:1200px){.css-17jxvjw{padding-bottom:0;padding-left:0;padding-right:0;}}@media (max-width:992px){.css-17jxvjw{grid-template-columns:80px 452px 300px;-ms-grid-columns:80px 452px 300px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}}@media (max-width:770px){.css-17jxvjw{display:block;}}@media (max-width:480px){.css-17jxvjw{padding-top:0;}}.css-11t2ec1{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;z-index:5;position:-webkit-sticky;position:sticky;top:calc(56px + 24px + 16px + 32px - 16px);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:16px;width:80px;}.css-11t2ec1:after{content:'';display:table;}.css-11t2ec1:before{content:'';display:table;}@media (max-width:770px){.css-11t2ec1{display:none;}}.css-1dvr2p8{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-18lkoru{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;background-color:#FFFFFF;}.css-1g4cku8{display:inline-block;vertical-align:middle;height:20px;width:20px;fill:#55C500;}.css-1iupg5d{color:#55C500;cursor:pointer;font-size:14px;font-weight:bold;}.css-ijvq0v{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-15cocm3{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#FFFFFF;border:2px solid #6E6F70;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:2px 0px 0px;width:40px;}.css-12rp90f{display:inline-block;vertical-align:bottom;height:17.77777777777778px;width:16px;fill:#6E6F70;}.css-115f4t{color:#6E6F70;font-size:14px;font-weight:bold;}.css-1b8uj5v{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;margin-bottom:16px;padding:0;}.css-79elbk{position:relative;}.css-16hhh7b{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;padding:0;}.css-fcbn8c{display:none;bottom:initial;left:initial;right:initial;top:initial;left:100%;top:calc(-8px - (14px * 1.8) - 16px - 4px);}.css-1gj7nt{color:rgba(0,0,0,0.6);font-size:14px;font-weight:bold;line-height:1.8;padding:8px 16px;}.css-154zy0m{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.87);cursor:pointer;font-size:16px;font-weight:normal;line-height:1.8;padding:4px 16px;}.css-154zy0m:hover{-webkit-text-decoration:none;text-decoration:none;background-color:#F2F2F2;}.css-yikrym{width:20px;}.css-1jqivyb{color:rgba(0,0,0,0.6);font-size:13px;}.css-1ode1bp{background-color:rgba(0,0,0,0.12);height:1px;width:100%;margin:8px 0;}.css-le4d8r{display:inline-block;vertical-align:middle;height:13px;width:13px;fill:rgba(0,0,0,0.6);}.css-1hbd3g7{height:250px;}.css-1nzh4zz{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:16px 32px;background-color:#FBE69E;color:rgba(0,0,0,0.87);line-height:1.5;font-weight:600;}@media (max-width:770px){.css-1nzh4zz{padding:16px;}}.css-38fzdi{color:#CA832A;margin-right:4px;}.css-helsa7{background-color:#FFFFFF;padding:32px;margin-bottom:24px;}@media (max-width:992px){.css-helsa7{margin:0 auto 40px;}}@media (max-width:480px){.css-helsa7{margin:0 0 40px;padding:32px 16px;}}.css-8qb8m4{margin-bottom:48px;}.css-2imjyh{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-he5w1s{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;width:100%;}@media (max-width:770px){.css-he5w1s{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}}.css-70qvj9{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.css-3ojehk{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;margin-right:4px;}.css-100alwu{display:inline-block;border-radius:50%;line-height:1;overflow:hidden;vertical-align:middle;}.css-1dtnjt5{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-10ougpm{color:rgba(0,0,0,0.87);font-size:14px;font-weight:600;line-height:1.8;margin-right:4px;text-wrap:break-word;word-break:break-all;}.css-1ay9vb9{margin-right:16px;}.css-m19uds{color:rgba(0,0,0,0.6);font-size:14px;line-height:1.8;}.css-cgzq40{color:rgba(0,0,0,0.87);font-size:32px;font-weight:bold;line-height:1.4;margin-top:8px;text-wrap:break-word;word-break:break-all;}.css-1wa99t2{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.6);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:8px;}.css-1l3zk9f{color:rgba(0,0,0,0.6);font-size:20px;margin-right:8px;}.css-4czcte{margin-right:4px;color:inherit;font-size:14px;line-height:1.8;}.css-4czcte:not(:last-child)::after{content:',';margin-right:4px;}.css-1yzj1fm{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:32px;}.css-1uv1qiv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-size:20px;height:32px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin-right:16px;outline:none;padding:0;width:32px;}.css-109dbrr{background-color:#F9F9F9;border-top:1px solid rgba(0,0,0,0.12);bottom:0;box-shadow:0px 1px 4px rgba(0,0,0,0.14);display:none;height:calc(env(safe-area-inset-bottom,0px) + 56px);-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding-bottom:env(safe-area-inset-bottom);position:-webkit-sticky;position:sticky;width:100%;z-index:2000;}@media (max-width:770px){.css-109dbrr{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}.css-5jpx49{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:space-evenly;-webkit-justify-content:space-evenly;-ms-flex-pack:space-evenly;justify-content:space-evenly;width:100%;}.css-mnxgyc{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1vlpknv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;margin-right:4px;background-color:#FFFFFF;}.css-fsjkhv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1b17vb0{color:#6E6F70;font-size:14px;font-weight:bold;margin-left:4px;}.css-7i7f4d{display:none;bottom:initial;left:initial;right:initial;top:initial;bottom:32px;right:0;}</style></head><body><div class="allWrapper"><div><div id="GlobalHeader-react-component-d9c4073a-7e6d-4ea2-8fa6-372bdf3156c7"><div class="st-Header"><div class="st-Header_container"><div class="st-Header_start"><a href="/" class="st-Header_logo"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 426.57 130"><circle cx="167.08" cy="21.4" r="12.28"></circle><path d="M250.81 29.66h23.48v18.9h-23.48z"></path><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z"></path><circle cx="216.33" cy="21.4" r="12.28"></circle></svg></a><div class="st-Header_communitySelector" tabindex="0"><span class="fa fa-caret-down"></span></div><div class="st-Header_dropdown"><div class="st-Header_dropdownHeading">Qiita Teams that are logged in</div><div class="st-Header_dropdownItemNote">You are not logged in to any team</div><hr class="st-Header_dropdownDivider st-Header_dropdownDivider-shrink"/><a href="https://teams-center.qiita.com/find_team" class="st-Header_dropdownItem"><span class="fa fa-fw fa-sign-in st-Header_dropdownItemIcon"></span><div>Log in to Qiita Team</div></a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Community</div><a href="/organizations" class="st-Header_dropdownItem">Organization</a><a href="/official-events/open" class="st-Header_dropdownItem">Event</a><a href="/advent-calendar" class="st-Header_dropdownItem">Advent Calendar</a><a href="https://qiitadon.com/" class="st-Header_dropdownItem" target="_blank">Qiitadon (β)</a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Service</div><a href="https://jobs.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Jobs</a><a href="https://zine.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Zine</a><a href="https://blog.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Blog</a></div><form class="st-Header_search" action="/search" method="get"><span class="fa fa-search st-Header_searchIcon"></span><input type="search" class="st-Header_searchInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form><form class="st-Header_searchModal" action="/search" method="get"><input type="text" class="st-Header_searchModalInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form></div><div class="st-Header_end"><div class="st-Header_searchButton"><span class="fa fa-search"></span></div><a class="st-Header_signupButton" href="/signup?redirect_to=%2Fozaki_shinya%2Fitems%2Fbac70ebdbd330ccbb6d3">Signup</a><a class="st-Header_loginLink" href="/login?redirect_to=%2Fozaki_shinya%2Fitems%2Fbac70ebdbd330ccbb6d3">Login</a></div><div class="st-Header_overlay"></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="GlobalHeader" data-dom-id="GlobalHeader-react-component-d9c4073a-7e6d-4ea2-8fa6-372bdf3156c7">{"unreadNotificationsCount":null,"realms":[{"humanName":"Qiita","isCurrentRealm":true,"isQiita":true,"isQiitaTeam":false,"loggedInUser":null,"teamId":null,"url":"https://qiita.com/"}],"teamFindUrl":"https://teams-center.qiita.com/find_team","isTeamOnlyUser":null,"currentUser":null}</script>
      
</div><div class="st-HeaderAlert st-HeaderAlert-warning"><div class="st-HeaderAlert_body"></div></div><script type="application/ld+json">{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"/","name":"Qiita"}},{"@type":"ListItem","position":2,"item":{"@id":"/tags/csharp","name":"C#"}}]}</script><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","datePublished":"2019-12-04T22:12:07.000+09:00","dateModified":"2019-12-11T11:18:36.000+09:00","headline":"リンクスリングスのアウトゲーム設計","image":"https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0\u0026w=1200\u0026mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND00NE9xNDRPejQ0S3Y0NEs1NDRPcTQ0T3o0NEt3NDRLNTQ0R3U0NEtpNDRLbTQ0T0k0NEt5NDRPODQ0T2c2S2l0NktpSSZ0eHQtY29sb3I9JTIzMzMzJnR4dC1mb250PUhpcmFnaW5vJTIwU2FucyUyMFc2JnR4dC1zaXplPTU0JnR4dC1jbGlwPWVsbGlwc2lzJnR4dC1hbGlnbj1jZW50ZXIlMkNtaWRkbGUmcz1iZDgzZGQzY2FkYWZiZTdkZDEzNjljZjAzMGQ3MWRmOQ\u0026mark-align=center%2Cmiddle\u0026blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RRzk2WVd0cFgzTm9hVzU1WVEmdHh0LWNvbG9yPSUyMzMzMyZ0eHQtZm9udD1IaXJhZ2lubyUyMFNhbnMlMjBXNiZ0eHQtc2l6ZT00NSZ0eHQtYWxpZ249cmlnaHQlMkNib3R0b20mcz0wMWE0ZjZiZDY4MmQ5ODNjNGVlYmZkZGZjMTM3NzFkZA\u0026blend-align=center%2Cmiddle\u0026blend-mode=normal\u0026s=1926869aa3bdc6b489aaf7ae49524b17","mainEntityOfPage":"https://qiita.com/ozaki_shinya/items/bac70ebdbd330ccbb6d3","author":{"@type":"Person","address":"","email":"ozaki_shinya@sumzap.co.jp","identifier":"ozaki_shinya","name":"ozaki_shinya","image":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fsecure.gravatar.com%2Favatar%2Fee2571ae54a5634d1ce66f70ba4f945b?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=b319ad4cdd4afd77a6f89e92da8fcaeb","url":"https://qiita.com/ozaki_shinya","description":"","memberOf":[{"@type":"Organization","address":"東京都渋谷区宇田川町40番1号Abema Towers","legalName":"サムザップ","image":"https://s3-ap-northeast-1.amazonaws.com/qiita-organization-image/d3aa92800b726b95568ae82e84555b37b2e786d2/original.jpg?1575867579","logo":"https://s3-ap-northeast-1.amazonaws.com/qiita-organization-image/89762330cd3ad4c570e295c58d31ae81c9acc456/original.jpg?1575859802","identifier":"sumzap","description":"スマートフォンゲームの企画・運営・配信事業をしています。"}]},"publisher":{"@type":"Organization","name":"Qiita","logo":{"@type":"ImageObject","url":"//cdn.qiita.com/assets/public/qiita-logo-c39ded593afa388e2e1ba435b110554e.png"}}}</script><style type="text/css">.wb-CampaignLink {
  background-color: #333333;
  width: 100%;
}

.wb-CampaignLink_container {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  max-width: 1100px;
  margin: 0 auto;
  font-size: 13px;
  padding: 0.8em;
}
.wb-CampaignLink_container > a {
  color: #fff;
}

.wb-CampaignLink_container > a:hover {
  text-decoration: underline;
}</style><div class="wb-CampaignLink"><div class="wb-CampaignLink_container"><a target="_blank" id="header_text_message_1" href="https://zine.qiita.com/interview/202105-uzabase/?utm_source=qiita&amp;utm_medium=header-banner">プロダクト全体の「エコシステム」を考えるユーザベースの開発手法とは？</a><a target="_blank" id="header_text_message_2" href="https://zine.qiita.com/interview/202105-uzabase/?utm_source=qiita&amp;utm_medium=header-banner">詳しくはこちら</a></div><script>td.trackEvent(
  'front_events',
  {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"ozaki_shinya","type":"items","id":"bac70ebdbd330ccbb6d3"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Show","data":{"message":"プロダクト全体の「エコシステム」を考えるユーザベースの開発手法とは？","url":"https://zine.qiita.com/interview/202105-uzabase/?utm_source=qiita\u0026utm_medium=header-banner","sub_message":"詳しくはこちら"}}
)</script><script>document.getElementById('header_text_message_1').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"ozaki_shinya","type":"items","id":"bac70ebdbd330ccbb6d3"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":1,"pos_id":"header_text_message_1","message":"プロダクト全体の「エコシステム」を考えるユーザベースの開発手法とは？","url":"https://zine.qiita.com/interview/202105-uzabase/?utm_source=qiita\u0026utm_medium=header-banner","sub_message":"詳しくはこちら"}}
  )
})</script><script>document.getElementById('header_text_message_2').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"ozaki_shinya","type":"items","id":"bac70ebdbd330ccbb6d3"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":1,"pos_id":"header_text_message_2","message":"プロダクト全体の「エコシステム」を考えるユーザベースの開発手法とは？","url":"https://zine.qiita.com/interview/202105-uzabase/?utm_source=qiita\u0026utm_medium=header-banner","sub_message":"詳しくはこちら"}}
  )
})</script></div><script type="application/json" id="js-react-on-rails-context">{"railsEnv":"production","inMailer":false,"i18nLocale":"en","i18nDefaultLocale":"en","href":"https://qiita.com/ozaki_shinya/items/bac70ebdbd330ccbb6d3","location":"/ozaki_shinya/items/bac70ebdbd330ccbb6d3","scheme":"https","host":"qiita.com","port":null,"pathname":"/ozaki_shinya/items/bac70ebdbd330ccbb6d3","search":null,"httpAcceptLanguage":null,"actionPath":"public/items#show","settings":{"analyticsTrackingId":"UA-24675221-12","assetsMap":{},"csrfToken":"0R308unfeSiE1YXSTy11wgm3KaAWeZJ3knCT3SNdQv52Z4xumhSeFmGqR7SC7Q0CyIEvBcL0OrtMpfzCD3EPXw==","locale":"en"},"currentUser":null,"isLoggedIn":false,"recaptchaSiteKey":"6LfNkiQTAAAAAM3UGnSquBy2akTITGNMO_QDxMw6","serverSide":false}</script>
<div id="PersonalArticlePage-react-component-6f8733e6-cac9-4178-ab05-403db6b853f8"><div class="p-items_wrapper"><div class=" css-17jxvjw"><div class="css-11t2ec1"><div class="css-1dvr2p8"><button class=" css-18lkoru"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/ozaki_shinya/items/bac70ebdbd330ccbb6d3/likers" class="css-1iupg5d">16</a></div><div class="css-ijvq0v"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-115f4t">10</span></div><div class="css-1b8uj5v"><span class="fa fa-twitter"></span></div><div class="css-1b8uj5v"><span class="fa fa-facebook"></span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-fcbn8c"><div class="css-1gj7nt">Improve article</div><a href="/drafts/bac70ebdbd330ccbb6d3/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/ozaki_shinya/items/bac70ebdbd330ccbb6d3/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/ozaki_shinya/items/bac70ebdbd330ccbb6d3/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/ozaki_shinya/items/bac70ebdbd330ccbb6d3/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/ozaki_shinya/items/bac70ebdbd330ccbb6d3.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div><div class="p-items_options"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_toc"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_main"><div class="css-1nzh4zz"><span class="fa fa-fw fa-warning css-38fzdi"></span><p>More than 1 year has passed since last update.</p></div><div class="css-helsa7"><div class="css-8qb8m4"><div class="it-AdcalRibbon"><span><a href="/advent-calendar/2019/sumzap2" class="it-AdcalRibbon_title">サムザップ #2<!-- --> Advent Calendar<!-- --> <!-- -->2019</a>Day 3</span></div><div class="css-2imjyh"><div class="css-he5w1s"><div class="css-70qvj9"><div class="css-3ojehk"><a href="/ozaki_shinya"><img class="css-100alwu eyfquo10" src="https://secure.gravatar.com/avatar/ee2571ae54a5634d1ce66f70ba4f945b" width="24" height="24" loading="lazy"/></a></div><div class="css-1dtnjt5"><a href="/ozaki_shinya" class="css-10ougpm">@<!-- -->ozaki_shinya</a><div class="css-1ay9vb9"><span><meta content="2019-12-04T13:12:07Z"/><time dateTime="2019-12-11T02:18:36Z" class="css-m19uds">updated at 2019-12-11</time></span></div></div></div></div></div><h1 class="css-cgzq40">リンクスリングスのアウトゲーム設計</h1><div class="css-1wa99t2"><span class="fa fa-tags mr-1of2 css-1l3zk9f" aria-hidden="true"></span><a href="/tags/csharp" class="css-4czcte">C#</a><a href="/tags/unity" class="css-4czcte">Unity</a><a href="/tags/%e8%a8%ad%e8%a8%88" class="css-4czcte">設計</a><a href="/tags/%e3%83%87%e3%82%b6%e3%82%a4%e3%83%b3%e3%83%91%e3%82%bf%e3%83%bc%e3%83%b3" class="css-4czcte">デザインパターン</a><a href="/tags/%e3%82%b2%e3%83%bc%e3%83%a0%e3%83%97%e3%83%ad%e3%82%b0%e3%83%a9%e3%83%9f%e3%83%b3%e3%82%b0" class="css-4czcte">ゲームプログラミング</a></div></div><section class="it-MdContent"><div id="personal-public-article-body"><div>
<h2>
<span id="はじめに" class="fragment"></span><a href="#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB"><i class="fa fa-link"></i></a>はじめに</h2>

<p><a href="https://qiita.com/advent-calendar/2019/sumzap2">サムザップ #2 Advent Calendar 2019</a> の12/3の記事です。</p>

<p>株式会社サムザップの尾崎です。Unityエンジニアです。</p>

<h2>
<span id="内容" class="fragment"></span><a href="#%E5%86%85%E5%AE%B9"><i class="fa fa-link"></i></a>内容</h2>

<p>リンクスリングスのアウトゲームの設計について紹介したいと思います。<br>
また扱いやすいAPI(プログラムインターフェース)を目指しているのでそのコードを紹介します。</p>

<p>※ アウトゲームとはキャラクター選択画面など4v4バトルのゲーム本体以外の機能を指します<br>
※ 紹介するコードはエラー処理を省いて記載してきます</p>

<h2>
<span id="リンクスリングスについて" class="fragment"></span><a href="#%E3%83%AA%E3%83%B3%E3%82%AF%E3%82%B9%E3%83%AA%E3%83%B3%E3%82%B0%E3%82%B9%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>リンクスリングスについて</h2>

<h4>
<span id="公式サイト" class="fragment"></span><a href="#%E5%85%AC%E5%BC%8F%E3%82%B5%E3%82%A4%E3%83%88"><i class="fa fa-link"></i></a>公式サイト</h4>

<p><qiita-embed-ogp src="https://linqsrings.jp/"></qiita-embed-ogp></p>

<h4>
<span id="画面イメージ" class="fragment"></span><a href="#%E7%94%BB%E9%9D%A2%E3%82%A4%E3%83%A1%E3%83%BC%E3%82%B8"><i class="fa fa-link"></i></a>画面イメージ</h4>

<table>
<thead>
<tr>
<th style="text-align: left"><a href="https://camo.qiitausercontent.com/daaec59949132340fec7fb72863486b12788bd58/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3230333232312f31616133303339362d316632302d656133362d313762312d3436323731393036633864342e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F203221%2F1aa30396-1f20-ea36-17b1-46271906c8d4.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=a7adbcaa952c830e3abd7d65b8d8c7b0" alt="スクリーンショット 2019-12-04 午後9.25.20.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/203221/1aa30396-1f20-ea36-17b1-46271906c8d4.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F203221%2F1aa30396-1f20-ea36-17b1-46271906c8d4.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=c160597d5c4ff8f6654672cb9ab4a443 1x" loading="lazy"></a></th>
<th style="text-align: right"><a href="https://camo.qiitausercontent.com/c05bb2d4cd7d0df4b71024b45e45b06e572d4917/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3230333232312f37666164313164662d623933322d336462612d633239662d3962376239646435623738612e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F203221%2F7fad11df-b932-3dba-c29f-9b7b9dd5b78a.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=e6a1620863af1c6eee1f6254173fc5de" alt="スクリーンショット 2019-12-04 午後9.32.08.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/203221/7fad11df-b932-3dba-c29f-9b7b9dd5b78a.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F203221%2F7fad11df-b932-3dba-c29f-9b7b9dd5b78a.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=5895ab2ed4794ac8e074d7ce5756f3e5 1x" loading="lazy"></a></th>
<th style="text-align: right"><a href="https://camo.qiitausercontent.com/3f30cb2ff51d3f095b19d81d5ffee6f4d4d70eab/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3230333232312f66353232343333392d613930382d643630302d376537392d6132363464646434323630612e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F203221%2Ff5224339-a908-d600-7e79-a264ddd4260a.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=9e3d81c4e85be6e11241f0b2406d8a48" alt="スクリーンショット 2019-12-04 午後9.26.49.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/203221/f5224339-a908-d600-7e79-a264ddd4260a.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F203221%2Ff5224339-a908-d600-7e79-a264ddd4260a.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=5491dd08848080db26b9e7dc844fca12 1x" loading="lazy"></a></th>
</tr>
</thead>
<tbody>
</tbody>
</table>

<p><a href="https://camo.qiitausercontent.com/862a6935dd3138ebaa145bad1f7221512caa8f5c/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3230333232312f62636461663561372d356631662d336235392d363066382d3661393562396438653934332e676966" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F203221%2Fbcdaf5a7-5f1f-3b59-60f8-6a95b9d8e943.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=546e09d517fc571bdcd96f449a5e7e25" alt="linqs_sample.gif" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/203221/bcdaf5a7-5f1f-3b59-60f8-6a95b9d8e943.gif" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F203221%2Fbcdaf5a7-5f1f-3b59-60f8-6a95b9d8e943.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=d6713c672d53b662621d6cd33e15723c 1x" loading="lazy"></a></p>

<h4>
<span id="ゲーム画面動画" class="fragment"></span><a href="#%E3%82%B2%E3%83%BC%E3%83%A0%E7%94%BB%E9%9D%A2%E5%8B%95%E7%94%BB"><i class="fa fa-link"></i></a>ゲーム画面動画</h4>

<p><qiita-embed-ogp src="https://www.youtube.com/watch?v=XFfSejixKfE"></qiita-embed-ogp></p>

<h2>
<span id="設計方針" class="fragment"></span><a href="#%E8%A8%AD%E8%A8%88%E6%96%B9%E9%87%9D"><i class="fa fa-link"></i></a>設計方針</h2>

<ul>
<li>分かりやすいシンプルな構成</li>
<li>使いやすいAPI</li>
<li>メンテナンスしやすい</li>
<li>簡単に動作確認できる</li>
</ul>

<h2>
<span id="主な採用技術" class="fragment"></span><a href="#%E4%B8%BB%E3%81%AA%E6%8E%A1%E7%94%A8%E6%8A%80%E8%A1%93"><i class="fa fa-link"></i></a>主な採用技術</h2>

<h4>
<span id="asyncawait-unitask" class="fragment"></span><a href="#asyncawait-unitask"><i class="fa fa-link"></i></a><a href="https://docs.microsoft.com/ja-jp/dotnet/csharp/programming-guide/concepts/async/index" rel="nofollow noopener" target="_blank">async/await</a>、 <a href="https://github.com/Cysharp/UniTask" rel="nofollow noopener" target="_blank">UniTask</a>
</h4>

<p>async/awaitはC#標準の非同期処理のための機能です。<br>
コルーチンの代わりとして使っていて、画面遷移や通信やアニメーションなどの非同期系処理はasync/awaitに統一しています。<br>
コールバックがなく読みやすいコードになっています。</p>

<h4>
<span id="zenject" class="fragment"></span><a href="#zenject"><i class="fa fa-link"></i></a><a href="https://github.com/modesttree/Zenject" rel="nofollow noopener" target="_blank">Zenject</a>
</h4>

<p>オブジェクト同士を参照させるのにZenjectを採用しています。<br>
staticやシングルトンがなくなり、整理されたクラス関係を構築できました。</p>

<h4>
<span id="pusher" class="fragment"></span><a href="#pusher"><i class="fa fa-link"></i></a><a href="https://pusher.com/" rel="nofollow noopener" target="_blank">Pusher</a>
</h4>

<p>アウトゲームでのリアルタイム通信のために採用しています。<br>
マッチング、チャット、ゲーム内通知などに使用しています。<br>
HTTPポーリングに比べて高速なレスポンスが得られています。<br>
ちなみにインゲームではPhotonを採用しています。</p>

<h2>
<span id="プログラム構成" class="fragment"></span><a href="#%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%A0%E6%A7%8B%E6%88%90"><i class="fa fa-link"></i></a>プログラム構成</h2>

<p>MVC(Model-View-Controller)パターンです。<br>
MVVM、MVPと比較検証した結果、シンプルなMVCを採用しました。</p>

<h3>
<span id="model" class="fragment"></span><a href="#model"><i class="fa fa-link"></i></a>Model</h3>

<p>Model=データはxxxDataというクラスに定義しています。<br>
データそのものとそれを扱うメソッドを持ちます。<br>
サーバーから受け取ったjsonをC#オブジェクトにする役割もあります。</p>

<div class="code-frame" data-lang="csharp"><div class="highlight"><pre class="with-code"><code>
<span class="k">public</span> <span class="k">partial</span> <span class="k">class</span> <span class="nc">SomeData</span> <span class="p">:</span> <span class="n">ISerializationCallbackReceiver</span>
<span class="p">{</span>
    <span class="c1">// サーバーから受け取ったintへのプロパティ。読み取り専用</span>
    <span class="k">public</span> <span class="kt">int</span> <span class="n">SomeCount</span> <span class="p">=&gt;</span> <span class="n">someCount</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">enum</span> <span class="n">SomeTypes</span>
    <span class="p">{</span>
        <span class="n">None</span><span class="p">,</span>
        <span class="n">Type1</span><span class="p">,</span>
        <span class="n">Type2</span>
    <span class="p">}</span>

    <span class="c1">// サーバーから受け取ったstringをenumに変換</span>
    <span class="k">public</span> <span class="n">SomeTypes</span> <span class="n">SomeType</span><span class="p">;</span>

    <span class="c1">// データを元に判定を行ったりするプロパティ</span>
    <span class="k">public</span> <span class="kt">bool</span> <span class="n">SomeUsefulProperty</span>
    <span class="p">{</span>
        <span class="k">get</span>
        <span class="p">{</span>
            <span class="p">...</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="c1">// データ検索などを行うメソッド</span>
    <span class="k">public</span> <span class="kt">int</span> <span class="nf">SomeUsefulMethod</span><span class="p">(</span><span class="n">SomeTypes</span> <span class="n">type</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="p">...</span>
        <span class="p">...</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">void</span> <span class="nf">OnAfterDeserialize</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// 文字列をenumに変換</span>
        <span class="n">Enum</span><span class="p">.</span><span class="nf">TryParse</span><span class="p">(</span><span class="n">someType</span><span class="p">,</span> <span class="k">out</span> <span class="n">SomeType</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">void</span> <span class="nf">OnBeforeSerialize</span><span class="p">()</span> <span class="p">{</span> <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// サーバーから受け取るjsonをデシリアライズするためのクラス</span>
<span class="c1">// 半自動生成</span>
<span class="p">[</span><span class="n">Serializable</span><span class="p">]</span>
<span class="k">public</span> <span class="k">partial</span> <span class="k">class</span> <span class="nc">SomeData</span>
<span class="p">{</span>
    <span class="p">[</span><span class="n">SerializeField</span><span class="p">]</span>
    <span class="k">private</span> <span class="kt">int</span> <span class="n">someCount</span><span class="p">;</span>

    <span class="p">[</span><span class="n">SerializeField</span><span class="p">]</span>
    <span class="k">private</span> <span class="kt">string</span> <span class="n">someType</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h3>
<span id="controller" class="fragment"></span><a href="#controller"><i class="fa fa-link"></i></a>Controller</h3>

<p>画面を制御する部分です。<br>
ModelとViewの橋渡しをします。<br>
1画面につき1つのメインコントローラーを用意します。<br>
複雑な画面ではメインコントローラー1つだとクラスが大きくなるので画面内の一部分を制御するサブコントローラーを作成します。</p>

<div class="code-frame" data-lang="csharp"><div class="highlight"><pre class="with-code"><code><span class="c1">// 画面のメインコントローラー</span>
<span class="k">public</span> <span class="k">class</span> <span class="nc">SomeScene</span> <span class="p">:</span> <span class="n">MonoBehaviour</span><span class="p">,</span> <span class="n">IAdditiveSceneTask</span>
<span class="p">{</span>
    <span class="c1">// 画面遷移システム</span>
    <span class="p">[</span><span class="n">Inject</span><span class="p">]</span>
    <span class="k">private</span> <span class="n">SceneLoader</span> <span class="n">_sceneLoader</span><span class="p">;</span>

    <span class="c1">// View</span>
    <span class="p">[</span><span class="n">SerializeField</span><span class="p">]</span>
    <span class="k">private</span> <span class="n">Text</span> <span class="n">_text</span><span class="p">;</span>

    <span class="c1">// サブコントローラー</span>
    <span class="p">[</span><span class="n">SerializeField</span><span class="p">]</span>
    <span class="k">private</span> <span class="n">SomeSubController</span> <span class="n">_subController</span><span class="p">;</span>

    <span class="c1">// 画面遷移トゥイーン</span>
    <span class="c1">// インスペクタでリストにトゥイーンを登録するコンポーネントです</span>
    <span class="p">[</span><span class="n">SerializeField</span><span class="p">]</span>
    <span class="k">private</span> <span class="n">Tweens</span> <span class="n">_tweens</span><span class="p">;</span>

    <span class="c1">// 初期化</span>
    <span class="k">private</span> <span class="k">void</span> <span class="nf">Start</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">_text</span><span class="p">.</span><span class="n">text</span> <span class="p">=</span> <span class="s">""</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// 画面遷移システムから画面開始時に呼び出される独自のコールバックです</span>
    <span class="c1">// IAdditiveSceneTaskを実装すると呼ばれます</span>
    <span class="k">public</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">Activate</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="cm">/* 画面開始時の処理 */</span>
        <span class="c1">// 通信</span>
        <span class="kt">var</span> <span class="n">someData</span> <span class="p">=</span> <span class="k">await</span> <span class="n">WebRequest</span><span class="p">.</span><span class="n">Factory</span><span class="p">.</span><span class="nf">SomeInfo</span><span class="p">(</span><span class="n">param</span><span class="p">).</span><span class="nf">Send</span><span class="p">();</span>

        <span class="c1">// データをUIにセット</span>
        <span class="n">_text</span><span class="p">.</span><span class="n">text</span> <span class="p">=</span> <span class="n">someData</span><span class="p">.</span><span class="n">name</span><span class="p">;</span>

        <span class="c1">// サブコントローラーの実行</span>
        <span class="n">_subController</span><span class="p">.</span><span class="nf">Execute</span><span class="p">();</span>

        <span class="c1">// UI出現アニメーション</span>
        <span class="k">await</span> <span class="n">_tweens</span><span class="p">.</span><span class="nf">PlayInAnimations</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">Inactivate</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="cm">/* 画面終了時の処理 */</span>
        <span class="c1">// UIを消すアニメーション</span>
        <span class="k">await</span> <span class="n">_tweens</span><span class="p">.</span><span class="nf">PlayOutAnimations</span><span class="p">();</span>

        <span class="c1">// 各種アンロード</span>
    <span class="p">}</span>

    <span class="k">private</span> <span class="k">void</span> <span class="nf">OnDestroy</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// 後処理</span>
    <span class="p">}</span>

    <span class="c1">// ボタンが押されたときの処理</span>
    <span class="c1">// インスペクタでButtonコンポーネントから呼び出すように設定します</span>
    <span class="k">public</span> <span class="k">void</span> <span class="nf">OnClickButton</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// 例でバトルトップ画面に遷移</span>
        <span class="c1">// 画面はシーンをAdditiveロードする仕組み</span>
        <span class="c1">// 次シーンをロードしてActivate()を呼び出し、現在シーンのInactivateを呼び出します</span>
        <span class="n">_sceneLoader</span><span class="p">.</span><span class="nf">LoadSceneAdditive</span><span class="p">(</span><span class="n">ScenesEnum</span><span class="p">.</span><span class="n">BattleTop</span><span class="p">,</span> <span class="k">false</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3>
<span id="view" class="fragment"></span><a href="#view"><i class="fa fa-link"></i></a>View</h3>

<p>Unity UIのCanvasやImage、ScrollRect、LayoutGroupなど見た目を制御するコンポーネントをViewコンポーネントと位置付けています。<br>
それら見た目を制御するコンポーネントを組み合わせてHierarchyを構築してファイル化したSceneやPrefabがViewの扱いです。<br>
基本的にはUnity UI標準コンポーネントを利用して、独自のViewコンポーネントを組み合わせています。<br>
独自コンポーネントにはタブ、トゥイーン、スプライトアニメなど多数あります。<br>
WebでいうHTMLのイメージです。</p>

<h2>
<span id="アウトゲームの機能" class="fragment"></span><a href="#%E3%82%A2%E3%82%A6%E3%83%88%E3%82%B2%E3%83%BC%E3%83%A0%E3%81%AE%E6%A9%9F%E8%83%BD"><i class="fa fa-link"></i></a>アウトゲームの機能</h2>

<h3>
<span id="画面遷移" class="fragment"></span><a href="#%E7%94%BB%E9%9D%A2%E9%81%B7%E7%A7%BB"><i class="fa fa-link"></i></a>画面遷移</h3>

<div class="code-frame" data-lang="csharp"><div class="highlight"><pre class="with-code"><code><span class="c1">// 画面遷移のためのクラス</span>
<span class="p">[</span><span class="n">Inject</span><span class="p">]</span>
<span class="k">private</span> <span class="n">SceneLoader</span> <span class="n">_sceneLoader</span><span class="p">;</span>

<span class="c1">// シーンをAdditiveロード</span>
<span class="n">_sceneLoader</span><span class="p">.</span><span class="nf">LoadSceneAdditive</span><span class="p">(</span>
    <span class="n">Scenes</span><span class="p">.</span><span class="n">SomeFunc</span><span class="p">,</span>
    <span class="k">new</span> <span class="n">SomeFuncScene</span><span class="p">.</span><span class="n">Arguments</span>
    <span class="p">{</span>
        <span class="n">TargetId</span> <span class="p">=</span> <span class="m">1001</span>
    <span class="p">}</span>
<span class="p">);</span>
</code></pre></div></div>

<h4>
<span id="ダイアログ-ポップアップウインドウ" class="fragment"></span><a href="#%E3%83%80%E3%82%A4%E3%82%A2%E3%83%AD%E3%82%B0-%E3%83%9D%E3%83%83%E3%83%97%E3%82%A2%E3%83%83%E3%83%97%E3%82%A6%E3%82%A4%E3%83%B3%E3%83%89%E3%82%A6"><i class="fa fa-link"></i></a>ダイアログ (ポップアップウインドウ)</h4>

<div class="code-frame" data-lang="csharp"><div class="highlight"><pre class="with-code"><code><span class="c1">// ダイアログ開く</span>
<span class="kt">var</span> <span class="n">dialog</span> <span class="p">=</span> <span class="k">await</span> <span class="n">DialogLoader</span><span class="p">.</span><span class="n">Load</span><span class="p">&lt;</span><span class="n">SomeDialog</span><span class="p">&gt;();</span>
<span class="n">dialog</span><span class="p">.</span><span class="nf">Execute</span><span class="p">(</span><span class="n">param</span><span class="p">);</span>
<span class="c1">// ボタンが押されて閉じられるまで待つ</span>
<span class="kt">bool</span> <span class="n">isOk</span> <span class="p">=</span> <span class="n">dialog</span><span class="p">.</span><span class="nf">WaitClose</span><span class="p">();</span>
<span class="k">if</span> <span class="p">(</span><span class="n">isOk</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// OKが押されたときの処理</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="code-frame" data-lang="csharp"><div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">SomeDialog</span> <span class="p">:</span> <span class="n">MonoBehaviour</span>
<span class="p">{</span>
    <span class="c1">// ダイアログ共通処理コンポーネント</span>
    <span class="p">[</span><span class="n">SerializeField</span><span class="p">]</span>
    <span class="k">private</span> <span class="n">DialogCommon</span> <span class="n">_common</span><span class="p">;</span>

    <span class="c1">// OKボタンを押した？</span>
    <span class="k">private</span> <span class="kt">bool</span> <span class="n">_isOk</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>

    <span class="k">private</span> <span class="k">void</span> <span class="nf">Awake</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// 初期化</span>
        <span class="c1">// 開く処理はDialogCommonによって自動的に行われます</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">void</span> <span class="nf">Execute</span><span class="p">(</span><span class="kt">int</span> <span class="n">param</span><span class="p">)</span>
    <span class="p">{</span>
       <span class="c1">// 引数を使った処理 </span>
    <span class="p">}</span>

    <span class="c1">// OKボタンを押した</span>
    <span class="k">public</span> <span class="k">void</span> <span class="nf">OnClickOkButton</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">_isOk</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
        <span class="n">_common</span><span class="p">.</span><span class="nf">Close</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="c1">// キャンセルボタンを押した</span>
    <span class="k">public</span> <span class="k">void</span> <span class="nf">OnClickCancelButton</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">_common</span><span class="p">.</span><span class="nf">Close</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="c1">// ボタンが押されてダイアログが閉じるまで待つ</span>
    <span class="c1">// 選択結果を返す</span>
    <span class="k">public</span> <span class="k">async</span> <span class="n">Task</span><span class="p">&lt;</span><span class="kt">bool</span><span class="p">&gt;</span> <span class="nf">WaitClose</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">await</span> <span class="n">Common</span><span class="p">.</span><span class="nf">WaitClose</span><span class="p">();</span>
        <span class="k">return</span> <span class="n">_isOk</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

</code></pre></div></div>

<h3>
<span id="通信" class="fragment"></span><a href="#%E9%80%9A%E4%BF%A1"><i class="fa fa-link"></i></a>通信</h3>

<div class="code-frame" data-lang="csharp"><div class="highlight"><pre class="with-code"><code><span class="k">try</span>
<span class="p">{</span>
    <span class="kt">var</span> <span class="n">webRequest</span> <span class="p">=</span> <span class="k">new</span> <span class="n">WebRequest</span><span class="p">&lt;</span><span class="n">SomeData</span><span class="p">&gt;(</span><span class="n">APIType</span><span class="p">.</span><span class="n">SomeInfo</span><span class="p">,</span> <span class="n">param</span><span class="p">);</span>
    <span class="kt">var</span> <span class="n">responseData</span> <span class="p">=</span> <span class="k">await</span> <span class="n">webRequest</span><span class="p">.</span><span class="nf">Send</span><span class="p">();</span>
<span class="p">}</span>
<span class="k">catch</span> <span class="p">(</span><span class="n">WebRequestException</span> <span class="n">e</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// 通信エラー時</span>
<span class="p">}</span>
</code></pre></div></div>

<h3>
<span id="リアルタイム通信" class="fragment"></span><a href="#%E3%83%AA%E3%82%A2%E3%83%AB%E3%82%BF%E3%82%A4%E3%83%A0%E9%80%9A%E4%BF%A1"><i class="fa fa-link"></i></a>リアルタイム通信</h3>

<div class="code-frame" data-lang="csharp"><div class="highlight"><pre class="with-code"><code><span class="p">[</span><span class="n">Inject</span><span class="p">]</span>
<span class="k">private</span> <span class="n">IPusher</span> <span class="n">_pusher</span><span class="p">;</span>

<span class="k">await</span> <span class="n">_pusher</span><span class="p">.</span><span class="nf">Subscribe</span><span class="p">(</span><span class="s">"channel_name"</span><span class="p">,);</span>
<span class="n">_pusher</span><span class="p">.</span><span class="n">Bind</span><span class="p">&lt;</span><span class="n">SomeRealtimeData</span><span class="p">&gt;(</span><span class="s">"channel_name"</span><span class="p">,</span> <span class="s">"event_name"</span><span class="p">,</span> <span class="p">(</span><span class="n">someData</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="c1">// サーバーからデータ受信したときの処理</span>
    <span class="c1">// 例. マッチングしたプレイヤーの情報を表示、チャットメッセージを表示</span>
<span class="p">});</span>
</code></pre></div></div>

<h3>
<span id="アセットバンドル" class="fragment"></span><a href="#%E3%82%A2%E3%82%BB%E3%83%83%E3%83%88%E3%83%90%E3%83%B3%E3%83%89%E3%83%AB"><i class="fa fa-link"></i></a>アセットバンドル</h3>

<p>アセットバンドルシステムは<code>IAssetBundleLoader</code>として抽象化してサーバーからロードするクラスとローカルファイルからロードするクラスを切り替えられるようにしています。<br>
Loadメソッドの第三引数ownerはGameObject型の引数でownerがDestroyされるとアセットバンドルもアンロードされる仕組みにしています。</p>

<div class="code-frame" data-lang="csharp"><div class="highlight"><pre class="with-code"><code><span class="c1">// アセットバンドルロードシステム</span>
<span class="p">[</span><span class="n">Inject</span><span class="p">]</span>
<span class="k">private</span> <span class="n">IAssetBundleLoader</span> <span class="n">_assetBundleLoader</span><span class="p">;</span>

<span class="kt">var</span> <span class="n">prefab</span> <span class="p">=</span> <span class="k">await</span> <span class="n">_assetBundleLoader</span><span class="p">.</span><span class="n">Load</span><span class="p">&lt;</span><span class="n">GameObject</span><span class="p">&gt;(</span><span class="n">assetBundleName</span><span class="p">,</span> <span class="n">assetName</span><span class="p">,</span> <span class="n">owner</span><span class="p">);</span>
</code></pre></div></div>

<h2>
<span id="設計で気をつけていること" class="fragment"></span><a href="#%E8%A8%AD%E8%A8%88%E3%81%A7%E6%B0%97%E3%82%92%E3%81%A4%E3%81%91%E3%81%A6%E3%81%84%E3%82%8B%E3%81%93%E3%81%A8"><i class="fa fa-link"></i></a>設計で気をつけていること</h2>

<h3>
<span id="コンポーネント指向" class="fragment"></span><a href="#%E3%82%B3%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%8D%E3%83%B3%E3%83%88%E6%8C%87%E5%90%91"><i class="fa fa-link"></i></a>コンポーネント指向</h3>

<p>Unityの設計に習いコンポーネント指向で開発しています。<br>
小さい機能を実現するコンポーネントを組み合わせて大きな機能を作ります。<br>
コンポーネントが充実してくると組み合わせて新しい機能を効率よく作れます。<br>
コードを書く必要がなく、非エンジニアにも優しいです。</p>

<p>これはコンポーネントの組み合わせで作ったボタンです。<br>
<a href="https://camo.qiitausercontent.com/43bfc6921b26c58c5fe21615285916da604484d3/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3230333232312f34353164616137632d646564332d323762312d633537372d6430616132646262303166652e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F203221%2F451daa7c-ded3-27b1-c577-d0aa2dbb01fe.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=4177800637a1e928ee0c943091472db6" alt="スクリーンショット 2019-11-18 午後3.21.51.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/203221/451daa7c-ded3-27b1-c577-d0aa2dbb01fe.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F203221%2F451daa7c-ded3-27b1-c577-d0aa2dbb01fe.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=cc5e2a9ec6eebcbd38c0b2d0759f1709 1x" loading="lazy"></a></p>

<p>各コンポーネントの役割です</p>

<ul>
<li>xxxButton: 独自ボタン制御(小さなコントローラー。クリック時の画面遷移などを行う)</li>
<li>Image: 見た目</li>
<li>Button: ボタン</li>
<li>CanvasGroup: 透明度とクリック可否</li>
<li>SwitchSprite: Imageに割り当てるスプライトの切り替え</li>
<li>ScaleInTween: UI出現時のトゥイーンアニメ</li>
<li>ScaleOutTween: UI消失時のトゥイーンアニメ</li>
<li>ClickTween: クリック時のトゥイーンアニメ</li>
<li>Se: クリック時のSE再生</li>
</ul>

<p>各種TweenやSeはボタン以外でも利用しています。</p>

<p>コンポーネント指向の逆はオブジェクト指向の継承だと思います。<br>
継承で上記ボタンを作ると標準Button継承したCustomButtonを作成しその中でトゥイーンやSe再生を作り込むことになり、それらは再利用しにくいものになります。<br>
また大規模プログラムで継承を多用すると基底クラスに不必要な機能が入って肥大化することが多いです。コンポーネントの組み合わせで作ることでコード重複が少なく、再利用性の高いプログラムになります。<br>
リンクスでは使い所をわきまえて継承階層が深くならないようにしています。</p>

<h3>
<span id="依存性の注入" class="fragment"></span><a href="#%E4%BE%9D%E5%AD%98%E6%80%A7%E3%81%AE%E6%B3%A8%E5%85%A5"><i class="fa fa-link"></i></a>依存性の注入</h3>

<p>Zenjectを利用しています。<br>
1つの実装に依存しない柔軟性のあるプログラムにしています。<br>
複数の実装が必要のないものはinterfaceを定義せずにクラス1つにしています。</p>

<p>シングルトンは禁止しています。</p>

<h3>
<span id="テストしやすい環境" class="fragment"></span><a href="#%E3%83%86%E3%82%B9%E3%83%88%E3%81%97%E3%82%84%E3%81%99%E3%81%84%E7%92%B0%E5%A2%83"><i class="fa fa-link"></i></a>テストしやすい環境</h3>

<p>シーンやコンポーネントをテストしやすくしています。<br>
例えばシーンではバトル後の結果画面は正規フローだとログイン、マッチング、バトルを経るため動作確認までにとても手間がかかります。<br>
バトル結果画面のシーンを開いた状態でUnity再生するとダミーデータで動作させて素早く確認できるようにしています。<br>
コンポーネントはインスペクタにデバッグボタンを用意して確認しやすくしています。</p>

<h3>
<span id="unirxオペレーターを多用しない" class="fragment"></span><a href="#unirx%E3%82%AA%E3%83%9A%E3%83%AC%E3%83%BC%E3%82%BF%E3%83%BC%E3%82%92%E5%A4%9A%E7%94%A8%E3%81%97%E3%81%AA%E3%81%84"><i class="fa fa-link"></i></a>UniRxオペレーターを多用しない</h3>

<p>UniRxには多数のオペレーターが用意されていますが習得コストが高いと判断し、Whereなど超基本的なもののみを使うようにしています。<br>
UniRxで使用しているのはSubject、ReactiveProperty、MicroCoroutineです。</p>

<ul>
<li>Subject

<ul>
<li>C#標準eventの代わりに使用。解放が楽です。</li>
</ul>
</li>
<li>ReactiveProperty

<ul>
<li>値の変化を購読するときに使用しています。</li>
</ul>
</li>
<li>MicroCoroutine

<ul>
<li>高速なUpdate、コルーチンとして使用しています。</li>
</ul>
</li>
</ul>

<p>通信などの非同期処理にもRxを使わずasync/awaitかコルーチンを使っています。<br>
手続き型で記述することで分かりやすくしています。</p>

<h3>
<span id="シングルトンを使用しない" class="fragment"></span><a href="#%E3%82%B7%E3%83%B3%E3%82%B0%E3%83%AB%E3%83%88%E3%83%B3%E3%82%92%E4%BD%BF%E7%94%A8%E3%81%97%E3%81%AA%E3%81%84"><i class="fa fa-link"></i></a>シングルトンを使用しない</h3>

<p>シングルトンをアンチパターンと捉えて使用しないようにしています。<br>
１つの実装に依存することになるのと、グローバル変数と同じく様々なところからアクセスされると分かりにくいコードになってしまうためです。</p>

<h2>
<span id="シーン構成" class="fragment"></span><a href="#%E3%82%B7%E3%83%BC%E3%83%B3%E6%A7%8B%E6%88%90"><i class="fa fa-link"></i></a>シーン構成</h2>

<p>Unityのマルチーシーン機能を活用して1画面1シーンの構成にしています。<br>
この構成にすることで作業分担しやすくなっています。<br>
またシーンを開いて再生することで編集中画面の動作を素早く確認することもできます。</p>

<p>この画面はホーム画面でミッション画面を開きアイテム詳細ダイアログを開いた状態です。<br>
<a href="https://camo.qiitausercontent.com/f7b806d5dd12cb30900294f92c558e6e889df0b4/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3230333232312f61353237623832352d393430632d333636642d643461302d3735386132376439323965372e6a706567" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F203221%2Fa527b825-940c-366d-d4a0-758a27d929e7.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=5e488b1936f3ef7b18f2c48c2fd00754" alt="スクリーンショット 2019-12-04 午後9.45.32.jpg" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/203221/a527b825-940c-366d-d4a0-758a27d929e7.jpeg" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F203221%2Fa527b825-940c-366d-d4a0-758a27d929e7.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=b93862321ac1d9e0927303abd6d5f3b7 1x" loading="lazy"></a><br>
このときのHierarchyはこのようになっています。<br>
<a href="https://camo.qiitausercontent.com/fcf1093fb472aa1dad3a508a42b016c7af1f90a4/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3230333232312f32306337336335392d393532312d333334632d396335342d3763303062373132333566382e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F203221%2F20c73c59-9521-334c-9c54-7c00b71235f8.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=80adfae6cc91b9fdffe666958edcd7a8" alt="スクリーンショット 2019-12-04 午後9.45.21.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/203221/20c73c59-9521-334c-9c54-7c00b71235f8.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F203221%2F20c73c59-9521-334c-9c54-7c00b71235f8.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=369f4741cd997adef6fc51eeb775e87c 1x" loading="lazy"></a></p>

<ul>
<li>OutGameMain: アウトゲームのメイン部分。アウトゲーム自体の起動を担当。グローバルフッターなどのUI要素も持ちます。</li>
<li>MyPage3D: ホーム画面の背景3D表示を担当。背景3Dは様々な機能の後ろに表示されるので生存期間の長いシーンです。</li>
<li>MyPage: ホーム画面の2D表示を担当。</li>
<li>ChallengeDialog: チャレンジ機能のダイアログ画面です。</li>
<li>ChallengeDialogDetail: チャレンジ機能の詳細表示のダイアログ画面です。</li>
<li>ItemDetailDialog: 上のスクリーンショットの最前面に表示されているアイテム詳細ダイアログ画面です。</li>
<li>DontDestroyOnLoad: 全シーンで常に存在するオブジェクトが配置されるUnityデフォルトシーンです。画面遷移システムやアセットバンドルシステムはこの領域に配置されています。</li>
</ul>

<h2>
<span id="最後に" class="fragment"></span><a href="#%E6%9C%80%E5%BE%8C%E3%81%AB"><i class="fa fa-link"></i></a>最後に</h2>

<p>明日は <a href="/tomeitou" class="user-mention js-hovercard" title="tomeitou" data-hovercard-target-type="user" data-hovercard-target-name="tomeitou">@tomeitou</a> さんの記事です。</p>
</div></div></section><div class="css-1yzj1fm"><div class="css-1uv1qiv"><span class="fa fa-twitter"></span></div><div class="css-1uv1qiv"><span class="fa fa-facebook"></span></div></div><div class="apm-Content"><div class="apm-Content_title">Why not register and get more from Qiita?</div><ol class="apm-Content_list"><li>We will deliver articles that match you<div class="description">By following users and tags, you can catch up information on technical fields that you are interested in as a whole</div></li><li>you can read useful information later efficiently<div class="description">By &quot;stocking&quot; the articles you like, you can search right away</div></li><div><a class="apm-Content_help" href="https://help.qiita.com/ja/articles/qiita-login-user" target="_blank"><i class="fa fa-fw fa-arrow-circle-right"></i>What you can do with signing up</a></div></ol><a href="/signup?callback_action=login_or_signup&amp;redirect_to=%2Fozaki_shinya%2Fitems%2Fbac70ebdbd330ccbb6d3&amp;realm=qiita" class="apm-Content_button apm-Content_button-signup">Sign up</a><a href="/login?callback_action=login_or_signup&amp;redirect_to=%2Fozaki_shinya%2Fitems%2Fbac70ebdbd330ccbb6d3&amp;realm=qiita" class="apm-Content_button apm-Content_button-signin">Login</a></div></div><div class="css-helsa7"></div></div></div></div><div class="css-109dbrr"><div class="css-5jpx49"><div class="css-mnxgyc"><button class=" css-1vlpknv"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/ozaki_shinya/items/bac70ebdbd330ccbb6d3/likers" class="css-1iupg5d">16</a></div><div class="css-fsjkhv"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-1b17vb0">10</span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-7i7f4d"><div class="css-1gj7nt">Improve article</div><a href="/drafts/bac70ebdbd330ccbb6d3/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/ozaki_shinya/items/bac70ebdbd330ccbb6d3/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/ozaki_shinya/items/bac70ebdbd330ccbb6d3/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/ozaki_shinya/items/bac70ebdbd330ccbb6d3/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/ozaki_shinya/items/bac70ebdbd330ccbb6d3.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="PersonalArticlePage" data-dom-id="PersonalArticlePage-react-component-6f8733e6-cac9-4178-ab05-403db6b853f8">{"authorAnalyticsTrackingId":null,"organizationAnalyticsTrackingId":null}</script>
      
<footer id="globalFooter" class="st-Footer"><div class="st-Footer_container"><div class="st-Footer_start"><div class="st-Footer_logo"><svg viewbox="0 0 426.57 130" xmlns="http://www.w3.org/2000/svg"><circle cx="167.08" cy="21.4" r="12.28" /><path d="M250.81 29.66h23.48v18.9h-23.48z" /><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z" /><circle cx="216.33" cy="21.4" r="12.28" /></svg></div><div class="st-Footer_catchcopy">How developers code is here.</div><div class="st-Footer_socials"><a class="fa fa-twitter" href="https://twitter.com/qiita"></a><a class="fa fa-facebook-square" href="https://www.facebook.com/qiita/"></a></div></div><div class="st-Footer_end"><div class="st-Footer_qiita"><div class="st-Footer_label">Qiita</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="/about">About</a><a href="/terms">Terms</a><a href="/privacy">Privacy</a><a target="_blank" href="http://help.qiita.com/ja/articles/qiita-community-guideline">Guideline</a><a target="_blank" href="https://help.qiita.com/ja/articles/others-brand-guideline">Design Guideline</a></div><div class="st-Footer_column"><a href="/release-notes">Release</a><a href="/api/v2/docs">API</a><a href="/feedback/new">ご意見</a><a href="https://help.qiita.com">Help</a><a target="_blank" href="https://qiita.com/ads?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Advertisement</a></div></div></div><div class="st-Footer_increments"><div class="st-Footer_label">Increments</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="https://increments.co.jp/company/">About</a><a href="https://increments.co.jp/jobs/">採用情報</a><a href="https://blog.qiita.com">Blog</a></div><div class="st-Footer_column"><a href="https://teams.qiita.com/">Qiita Team</a><a href="https://jobs.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Jobs</a><a href="https://zine.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Zine</a></div></div></div></div></div><div class="st-Footer_copyright">© 2011-2021 Increments Inc.</div></footer><div id="Snackbar-react-component-b8e4d763-8454-4745-9a7d-11fc096fcf88"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="Snackbar" data-dom-id="Snackbar-react-component-b8e4d763-8454-4745-9a7d-11fc096fcf88">{}</script>
      
<div id="LoginModal-react-component-f68d4cc2-997e-4848-9223-9b7d6a366908"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="LoginModal" data-dom-id="LoginModal-react-component-f68d4cc2-997e-4848-9223-9b7d6a366908">{}</script>
      
<div id="StockModal-react-component-33ac82da-c163-47f5-80b1-f56e327eb1fe"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="StockModal" data-dom-id="StockModal-react-component-33ac82da-c163-47f5-80b1-f56e327eb1fe">{}</script>
      
</div><div id="dataContainer" style="display: none;" data-config="{&quot;actionPath&quot;:&quot;public/items#show&quot;,&quot;settings&quot;:{&quot;analyticsTrackingId&quot;:&quot;UA-24675221-12&quot;,&quot;assetsMap&quot;:{},&quot;csrfToken&quot;:&quot;+rrWTIxVN2KvWto7HroCDhCeQj+obTLC3CSiX2qeUjxdwK7Q/57QXEolGF3TenrO0ahEmnzgmg4C8c1ARrIfnQ==&quot;,&quot;locale&quot;:&quot;en&quot;},&quot;currentUser&quot;:null}" /></body></html><script type="application/json" data-js-react-on-rails-store="AppStoreWithReactOnRails">{"snackbar":{"type":"","body":"","isActive":false},"article":{"article":{"body":"\n\u003ch2\u003e\n\u003cspan id=\"はじめに\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eはじめに\u003c/h2\u003e\n\n\u003cp\u003e\u003ca href=\"https://qiita.com/advent-calendar/2019/sumzap2\"\u003eサムザップ #2 Advent Calendar 2019\u003c/a\u003e の12/3の記事です。\u003c/p\u003e\n\n\u003cp\u003e株式会社サムザップの尾崎です。Unityエンジニアです。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"内容\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%86%85%E5%AE%B9\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e内容\u003c/h2\u003e\n\n\u003cp\u003eリンクスリングスのアウトゲームの設計について紹介したいと思います。\u003cbr\u003e\nまた扱いやすいAPI(プログラムインターフェース)を目指しているのでそのコードを紹介します。\u003c/p\u003e\n\n\u003cp\u003e※ アウトゲームとはキャラクター選択画面など4v4バトルのゲーム本体以外の機能を指します\u003cbr\u003e\n※ 紹介するコードはエラー処理を省いて記載してきます\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"リンクスリングスについて\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%AA%E3%83%B3%E3%82%AF%E3%82%B9%E3%83%AA%E3%83%B3%E3%82%B0%E3%82%B9%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eリンクスリングスについて\u003c/h2\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"公式サイト\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%85%AC%E5%BC%8F%E3%82%B5%E3%82%A4%E3%83%88\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e公式サイト\u003c/h4\u003e\n\n\u003cp\u003e\u003cqiita-embed-ogp src=\"https://linqsrings.jp/\"\u003e\u003c/qiita-embed-ogp\u003e\u003c/p\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"画面イメージ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E7%94%BB%E9%9D%A2%E3%82%A4%E3%83%A1%E3%83%BC%E3%82%B8\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e画面イメージ\u003c/h4\u003e\n\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth style=\"text-align: left\"\u003e\u003ca href=\"https://camo.qiitausercontent.com/daaec59949132340fec7fb72863486b12788bd58/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3230333232312f31616133303339362d316632302d656133362d313762312d3436323731393036633864342e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F203221%2F1aa30396-1f20-ea36-17b1-46271906c8d4.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=a7adbcaa952c830e3abd7d65b8d8c7b0\" alt=\"スクリーンショット 2019-12-04 午後9.25.20.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/203221/1aa30396-1f20-ea36-17b1-46271906c8d4.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F203221%2F1aa30396-1f20-ea36-17b1-46271906c8d4.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=c160597d5c4ff8f6654672cb9ab4a443 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/th\u003e\n\u003cth style=\"text-align: right\"\u003e\u003ca href=\"https://camo.qiitausercontent.com/c05bb2d4cd7d0df4b71024b45e45b06e572d4917/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3230333232312f37666164313164662d623933322d336462612d633239662d3962376239646435623738612e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F203221%2F7fad11df-b932-3dba-c29f-9b7b9dd5b78a.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=e6a1620863af1c6eee1f6254173fc5de\" alt=\"スクリーンショット 2019-12-04 午後9.32.08.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/203221/7fad11df-b932-3dba-c29f-9b7b9dd5b78a.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F203221%2F7fad11df-b932-3dba-c29f-9b7b9dd5b78a.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=5895ab2ed4794ac8e074d7ce5756f3e5 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/th\u003e\n\u003cth style=\"text-align: right\"\u003e\u003ca href=\"https://camo.qiitausercontent.com/3f30cb2ff51d3f095b19d81d5ffee6f4d4d70eab/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3230333232312f66353232343333392d613930382d643630302d376537392d6132363464646434323630612e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F203221%2Ff5224339-a908-d600-7e79-a264ddd4260a.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=9e3d81c4e85be6e11241f0b2406d8a48\" alt=\"スクリーンショット 2019-12-04 午後9.26.49.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/203221/f5224339-a908-d600-7e79-a264ddd4260a.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F203221%2Ff5224339-a908-d600-7e79-a264ddd4260a.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=5491dd08848080db26b9e7dc844fca12 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/862a6935dd3138ebaa145bad1f7221512caa8f5c/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3230333232312f62636461663561372d356631662d336235392d363066382d3661393562396438653934332e676966\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F203221%2Fbcdaf5a7-5f1f-3b59-60f8-6a95b9d8e943.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=546e09d517fc571bdcd96f449a5e7e25\" alt=\"linqs_sample.gif\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/203221/bcdaf5a7-5f1f-3b59-60f8-6a95b9d8e943.gif\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F203221%2Fbcdaf5a7-5f1f-3b59-60f8-6a95b9d8e943.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=d6713c672d53b662621d6cd33e15723c 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"ゲーム画面動画\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%B2%E3%83%BC%E3%83%A0%E7%94%BB%E9%9D%A2%E5%8B%95%E7%94%BB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eゲーム画面動画\u003c/h4\u003e\n\n\u003cp\u003e\u003cqiita-embed-ogp src=\"https://www.youtube.com/watch?v=XFfSejixKfE\"\u003e\u003c/qiita-embed-ogp\u003e\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"設計方針\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%A8%AD%E8%A8%88%E6%96%B9%E9%87%9D\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e設計方針\u003c/h2\u003e\n\n\u003cul\u003e\n\u003cli\u003e分かりやすいシンプルな構成\u003c/li\u003e\n\u003cli\u003e使いやすいAPI\u003c/li\u003e\n\u003cli\u003eメンテナンスしやすい\u003c/li\u003e\n\u003cli\u003e簡単に動作確認できる\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"主な採用技術\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E4%B8%BB%E3%81%AA%E6%8E%A1%E7%94%A8%E6%8A%80%E8%A1%93\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e主な採用技術\u003c/h2\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"asyncawait-unitask\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#asyncawait-unitask\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003ca href=\"https://docs.microsoft.com/ja-jp/dotnet/csharp/programming-guide/concepts/async/index\" rel=\"nofollow noopener\" target=\"_blank\"\u003easync/await\u003c/a\u003e、 \u003ca href=\"https://github.com/Cysharp/UniTask\" rel=\"nofollow noopener\" target=\"_blank\"\u003eUniTask\u003c/a\u003e\n\u003c/h4\u003e\n\n\u003cp\u003easync/awaitはC#標準の非同期処理のための機能です。\u003cbr\u003e\nコルーチンの代わりとして使っていて、画面遷移や通信やアニメーションなどの非同期系処理はasync/awaitに統一しています。\u003cbr\u003e\nコールバックがなく読みやすいコードになっています。\u003c/p\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"zenject\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#zenject\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003ca href=\"https://github.com/modesttree/Zenject\" rel=\"nofollow noopener\" target=\"_blank\"\u003eZenject\u003c/a\u003e\n\u003c/h4\u003e\n\n\u003cp\u003eオブジェクト同士を参照させるのにZenjectを採用しています。\u003cbr\u003e\nstaticやシングルトンがなくなり、整理されたクラス関係を構築できました。\u003c/p\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"pusher\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#pusher\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003ca href=\"https://pusher.com/\" rel=\"nofollow noopener\" target=\"_blank\"\u003ePusher\u003c/a\u003e\n\u003c/h4\u003e\n\n\u003cp\u003eアウトゲームでのリアルタイム通信のために採用しています。\u003cbr\u003e\nマッチング、チャット、ゲーム内通知などに使用しています。\u003cbr\u003e\nHTTPポーリングに比べて高速なレスポンスが得られています。\u003cbr\u003e\nちなみにインゲームではPhotonを採用しています。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"プログラム構成\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%A0%E6%A7%8B%E6%88%90\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eプログラム構成\u003c/h2\u003e\n\n\u003cp\u003eMVC(Model-View-Controller)パターンです。\u003cbr\u003e\nMVVM、MVPと比較検証した結果、シンプルなMVCを採用しました。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"model\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#model\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eModel\u003c/h3\u003e\n\n\u003cp\u003eModel=データはxxxDataというクラスに定義しています。\u003cbr\u003e\nデータそのものとそれを扱うメソッドを持ちます。\u003cbr\u003e\nサーバーから受け取ったjsonをC#オブジェクトにする役割もあります。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003epartial\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eSomeData\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eISerializationCallbackReceiver\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e// サーバーから受け取ったintへのプロパティ。読み取り専用\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003eSomeCount\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003esomeCount\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eenum\u003c/span\u003e \u003cspan class=\"n\"\u003eSomeTypes\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eNone\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eType1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eType2\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e// サーバーから受け取ったstringをenumに変換\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eSomeTypes\u003c/span\u003e \u003cspan class=\"n\"\u003eSomeType\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e// データを元に判定を行ったりするプロパティ\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"n\"\u003eSomeUsefulProperty\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eget\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e...\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e// データ検索などを行うメソッド\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"nf\"\u003eSomeUsefulMethod\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eSomeTypes\u003c/span\u003e \u003cspan class=\"n\"\u003etype\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e...\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e...\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eOnAfterDeserialize\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e// 文字列をenumに変換\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eEnum\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eTryParse\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003esomeType\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003eout\u003c/span\u003e \u003cspan class=\"n\"\u003eSomeType\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eOnBeforeSerialize\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// サーバーから受け取るjsonをデシリアライズするためのクラス\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e// 半自動生成\u003c/span\u003e\n\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eSerializable\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003epartial\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eSomeData\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eSerializeField\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003esomeCount\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eSerializeField\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003esomeType\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"controller\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#controller\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eController\u003c/h3\u003e\n\n\u003cp\u003e画面を制御する部分です。\u003cbr\u003e\nModelとViewの橋渡しをします。\u003cbr\u003e\n1画面につき1つのメインコントローラーを用意します。\u003cbr\u003e\n複雑な画面ではメインコントローラー1つだとクラスが大きくなるので画面内の一部分を制御するサブコントローラーを作成します。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"c1\"\u003e// 画面のメインコントローラー\u003c/span\u003e\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eSomeScene\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eMonoBehaviour\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eIAdditiveSceneTask\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e// 画面遷移システム\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eInject\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003eSceneLoader\u003c/span\u003e \u003cspan class=\"n\"\u003e_sceneLoader\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e// View\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eSerializeField\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003eText\u003c/span\u003e \u003cspan class=\"n\"\u003e_text\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e// サブコントローラー\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eSerializeField\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003eSomeSubController\u003c/span\u003e \u003cspan class=\"n\"\u003e_subController\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e// 画面遷移トゥイーン\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e// インスペクタでリストにトゥイーンを登録するコンポーネントです\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eSerializeField\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003eTweens\u003c/span\u003e \u003cspan class=\"n\"\u003e_tweens\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e// 初期化\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eStart\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003e_text\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003etext\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e// 画面遷移システムから画面開始時に呼び出される独自のコールバックです\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e// IAdditiveSceneTaskを実装すると呼ばれます\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003easync\u003c/span\u003e \u003cspan class=\"n\"\u003eTask\u003c/span\u003e \u003cspan class=\"nf\"\u003eActivate\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"cm\"\u003e/* 画面開始時の処理 */\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e// 通信\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003esomeData\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003eawait\u003c/span\u003e \u003cspan class=\"n\"\u003eWebRequest\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eFactory\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSomeInfo\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eparam\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nf\"\u003eSend\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n        \u003cspan class=\"c1\"\u003e// データをUIにセット\u003c/span\u003e\n        \u003cspan class=\"n\"\u003e_text\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003etext\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003esomeData\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n        \u003cspan class=\"c1\"\u003e// サブコントローラーの実行\u003c/span\u003e\n        \u003cspan class=\"n\"\u003e_subController\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eExecute\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n        \u003cspan class=\"c1\"\u003e// UI出現アニメーション\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eawait\u003c/span\u003e \u003cspan class=\"n\"\u003e_tweens\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003ePlayInAnimations\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003easync\u003c/span\u003e \u003cspan class=\"n\"\u003eTask\u003c/span\u003e \u003cspan class=\"nf\"\u003eInactivate\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"cm\"\u003e/* 画面終了時の処理 */\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e// UIを消すアニメーション\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eawait\u003c/span\u003e \u003cspan class=\"n\"\u003e_tweens\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003ePlayOutAnimations\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n        \u003cspan class=\"c1\"\u003e// 各種アンロード\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eOnDestroy\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e// 後処理\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e// ボタンが押されたときの処理\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e// インスペクタでButtonコンポーネントから呼び出すように設定します\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eOnClickButton\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e// 例でバトルトップ画面に遷移\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e// 画面はシーンをAdditiveロードする仕組み\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e// 次シーンをロードしてActivate()を呼び出し、現在シーンのInactivateを呼び出します\u003c/span\u003e\n        \u003cspan class=\"n\"\u003e_sceneLoader\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eLoadSceneAdditive\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eScenesEnum\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eBattleTop\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003efalse\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"view\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#view\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eView\u003c/h3\u003e\n\n\u003cp\u003eUnity UIのCanvasやImage、ScrollRect、LayoutGroupなど見た目を制御するコンポーネントをViewコンポーネントと位置付けています。\u003cbr\u003e\nそれら見た目を制御するコンポーネントを組み合わせてHierarchyを構築してファイル化したSceneやPrefabがViewの扱いです。\u003cbr\u003e\n基本的にはUnity UI標準コンポーネントを利用して、独自のViewコンポーネントを組み合わせています。\u003cbr\u003e\n独自コンポーネントにはタブ、トゥイーン、スプライトアニメなど多数あります。\u003cbr\u003e\nWebでいうHTMLのイメージです。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"アウトゲームの機能\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%A2%E3%82%A6%E3%83%88%E3%82%B2%E3%83%BC%E3%83%A0%E3%81%AE%E6%A9%9F%E8%83%BD\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eアウトゲームの機能\u003c/h2\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"画面遷移\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E7%94%BB%E9%9D%A2%E9%81%B7%E7%A7%BB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e画面遷移\u003c/h3\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"c1\"\u003e// 画面遷移のためのクラス\u003c/span\u003e\n\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eInject\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n\u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003eSceneLoader\u003c/span\u003e \u003cspan class=\"n\"\u003e_sceneLoader\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// シーンをAdditiveロード\u003c/span\u003e\n\u003cspan class=\"n\"\u003e_sceneLoader\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eLoadSceneAdditive\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eScenes\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eSomeFunc\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eSomeFuncScene\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eArguments\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eTargetId\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e1001\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"ダイアログ-ポップアップウインドウ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%80%E3%82%A4%E3%82%A2%E3%83%AD%E3%82%B0-%E3%83%9D%E3%83%83%E3%83%97%E3%82%A2%E3%83%83%E3%83%97%E3%82%A6%E3%82%A4%E3%83%B3%E3%83%89%E3%82%A6\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eダイアログ (ポップアップウインドウ)\u003c/h4\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"c1\"\u003e// ダイアログ開く\u003c/span\u003e\n\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003edialog\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003eawait\u003c/span\u003e \u003cspan class=\"n\"\u003eDialogLoader\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eLoad\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eSomeDialog\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;();\u003c/span\u003e\n\u003cspan class=\"n\"\u003edialog\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eExecute\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eparam\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e// ボタンが押されて閉じられるまで待つ\u003c/span\u003e\n\u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"n\"\u003eisOk\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003edialog\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWaitClose\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eisOk\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e// OKが押されたときの処理\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eSomeDialog\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eMonoBehaviour\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e// ダイアログ共通処理コンポーネント\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eSerializeField\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003eDialogCommon\u003c/span\u003e \u003cspan class=\"n\"\u003e_common\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e// OKボタンを押した？\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"n\"\u003e_isOk\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003efalse\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eAwake\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e// 初期化\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e// 開く処理はDialogCommonによって自動的に行われます\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eExecute\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003eparam\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n       \u003cspan class=\"c1\"\u003e// 引数を使った処理 \u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e// OKボタンを押した\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eOnClickOkButton\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003e_isOk\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"n\"\u003e_common\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eClose\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e// キャンセルボタンを押した\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eOnClickCancelButton\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003e_common\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eClose\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e// ボタンが押されてダイアログが閉じるまで待つ\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e// 選択結果を返す\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003easync\u003c/span\u003e \u003cspan class=\"n\"\u003eTask\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003ebool\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"nf\"\u003eWaitClose\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eawait\u003c/span\u003e \u003cspan class=\"n\"\u003eCommon\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWaitClose\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003e_isOk\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"通信\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E9%80%9A%E4%BF%A1\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e通信\u003c/h3\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003etry\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003ewebRequest\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eWebRequest\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eSomeData\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"n\"\u003eAPIType\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eSomeInfo\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eparam\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eresponseData\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003eawait\u003c/span\u003e \u003cspan class=\"n\"\u003ewebRequest\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSend\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"k\"\u003ecatch\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eWebRequestException\u003c/span\u003e \u003cspan class=\"n\"\u003ee\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e// 通信エラー時\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"リアルタイム通信\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%AA%E3%82%A2%E3%83%AB%E3%82%BF%E3%82%A4%E3%83%A0%E9%80%9A%E4%BF%A1\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eリアルタイム通信\u003c/h3\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eInject\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n\u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003eIPusher\u003c/span\u003e \u003cspan class=\"n\"\u003e_pusher\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003eawait\u003c/span\u003e \u003cspan class=\"n\"\u003e_pusher\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSubscribe\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"channel_name\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,);\u003c/span\u003e\n\u003cspan class=\"n\"\u003e_pusher\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eBind\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eSomeRealtimeData\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"channel_name\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\"event_name\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003esomeData\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e// サーバーからデータ受信したときの処理\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e// 例. マッチングしたプレイヤーの情報を表示、チャットメッセージを表示\u003c/span\u003e\n\u003cspan class=\"p\"\u003e});\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"アセットバンドル\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%A2%E3%82%BB%E3%83%83%E3%83%88%E3%83%90%E3%83%B3%E3%83%89%E3%83%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eアセットバンドル\u003c/h3\u003e\n\n\u003cp\u003eアセットバンドルシステムは\u003ccode\u003eIAssetBundleLoader\u003c/code\u003eとして抽象化してサーバーからロードするクラスとローカルファイルからロードするクラスを切り替えられるようにしています。\u003cbr\u003e\nLoadメソッドの第三引数ownerはGameObject型の引数でownerがDestroyされるとアセットバンドルもアンロードされる仕組みにしています。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"c1\"\u003e// アセットバンドルロードシステム\u003c/span\u003e\n\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eInject\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n\u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003eIAssetBundleLoader\u003c/span\u003e \u003cspan class=\"n\"\u003e_assetBundleLoader\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eprefab\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003eawait\u003c/span\u003e \u003cspan class=\"n\"\u003e_assetBundleLoader\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eLoad\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eGameObject\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"n\"\u003eassetBundleName\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eassetName\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eowner\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"設計で気をつけていること\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%A8%AD%E8%A8%88%E3%81%A7%E6%B0%97%E3%82%92%E3%81%A4%E3%81%91%E3%81%A6%E3%81%84%E3%82%8B%E3%81%93%E3%81%A8\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e設計で気をつけていること\u003c/h2\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"コンポーネント指向\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%B3%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%8D%E3%83%B3%E3%83%88%E6%8C%87%E5%90%91\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eコンポーネント指向\u003c/h3\u003e\n\n\u003cp\u003eUnityの設計に習いコンポーネント指向で開発しています。\u003cbr\u003e\n小さい機能を実現するコンポーネントを組み合わせて大きな機能を作ります。\u003cbr\u003e\nコンポーネントが充実してくると組み合わせて新しい機能を効率よく作れます。\u003cbr\u003e\nコードを書く必要がなく、非エンジニアにも優しいです。\u003c/p\u003e\n\n\u003cp\u003eこれはコンポーネントの組み合わせで作ったボタンです。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/43bfc6921b26c58c5fe21615285916da604484d3/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3230333232312f34353164616137632d646564332d323762312d633537372d6430616132646262303166652e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F203221%2F451daa7c-ded3-27b1-c577-d0aa2dbb01fe.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=4177800637a1e928ee0c943091472db6\" alt=\"スクリーンショット 2019-11-18 午後3.21.51.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/203221/451daa7c-ded3-27b1-c577-d0aa2dbb01fe.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F203221%2F451daa7c-ded3-27b1-c577-d0aa2dbb01fe.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=cc5e2a9ec6eebcbd38c0b2d0759f1709 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e各コンポーネントの役割です\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003exxxButton: 独自ボタン制御(小さなコントローラー。クリック時の画面遷移などを行う)\u003c/li\u003e\n\u003cli\u003eImage: 見た目\u003c/li\u003e\n\u003cli\u003eButton: ボタン\u003c/li\u003e\n\u003cli\u003eCanvasGroup: 透明度とクリック可否\u003c/li\u003e\n\u003cli\u003eSwitchSprite: Imageに割り当てるスプライトの切り替え\u003c/li\u003e\n\u003cli\u003eScaleInTween: UI出現時のトゥイーンアニメ\u003c/li\u003e\n\u003cli\u003eScaleOutTween: UI消失時のトゥイーンアニメ\u003c/li\u003e\n\u003cli\u003eClickTween: クリック時のトゥイーンアニメ\u003c/li\u003e\n\u003cli\u003eSe: クリック時のSE再生\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e各種TweenやSeはボタン以外でも利用しています。\u003c/p\u003e\n\n\u003cp\u003eコンポーネント指向の逆はオブジェクト指向の継承だと思います。\u003cbr\u003e\n継承で上記ボタンを作ると標準Button継承したCustomButtonを作成しその中でトゥイーンやSe再生を作り込むことになり、それらは再利用しにくいものになります。\u003cbr\u003e\nまた大規模プログラムで継承を多用すると基底クラスに不必要な機能が入って肥大化することが多いです。コンポーネントの組み合わせで作ることでコード重複が少なく、再利用性の高いプログラムになります。\u003cbr\u003e\nリンクスでは使い所をわきまえて継承階層が深くならないようにしています。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"依存性の注入\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E4%BE%9D%E5%AD%98%E6%80%A7%E3%81%AE%E6%B3%A8%E5%85%A5\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e依存性の注入\u003c/h3\u003e\n\n\u003cp\u003eZenjectを利用しています。\u003cbr\u003e\n1つの実装に依存しない柔軟性のあるプログラムにしています。\u003cbr\u003e\n複数の実装が必要のないものはinterfaceを定義せずにクラス1つにしています。\u003c/p\u003e\n\n\u003cp\u003eシングルトンは禁止しています。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"テストしやすい環境\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%86%E3%82%B9%E3%83%88%E3%81%97%E3%82%84%E3%81%99%E3%81%84%E7%92%B0%E5%A2%83\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eテストしやすい環境\u003c/h3\u003e\n\n\u003cp\u003eシーンやコンポーネントをテストしやすくしています。\u003cbr\u003e\n例えばシーンではバトル後の結果画面は正規フローだとログイン、マッチング、バトルを経るため動作確認までにとても手間がかかります。\u003cbr\u003e\nバトル結果画面のシーンを開いた状態でUnity再生するとダミーデータで動作させて素早く確認できるようにしています。\u003cbr\u003e\nコンポーネントはインスペクタにデバッグボタンを用意して確認しやすくしています。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"unirxオペレーターを多用しない\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#unirx%E3%82%AA%E3%83%9A%E3%83%AC%E3%83%BC%E3%82%BF%E3%83%BC%E3%82%92%E5%A4%9A%E7%94%A8%E3%81%97%E3%81%AA%E3%81%84\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eUniRxオペレーターを多用しない\u003c/h3\u003e\n\n\u003cp\u003eUniRxには多数のオペレーターが用意されていますが習得コストが高いと判断し、Whereなど超基本的なもののみを使うようにしています。\u003cbr\u003e\nUniRxで使用しているのはSubject、ReactiveProperty、MicroCoroutineです。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eSubject\n\n\u003cul\u003e\n\u003cli\u003eC#標準eventの代わりに使用。解放が楽です。\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eReactiveProperty\n\n\u003cul\u003e\n\u003cli\u003e値の変化を購読するときに使用しています。\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eMicroCoroutine\n\n\u003cul\u003e\n\u003cli\u003e高速なUpdate、コルーチンとして使用しています。\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e通信などの非同期処理にもRxを使わずasync/awaitかコルーチンを使っています。\u003cbr\u003e\n手続き型で記述することで分かりやすくしています。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"シングルトンを使用しない\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%B7%E3%83%B3%E3%82%B0%E3%83%AB%E3%83%88%E3%83%B3%E3%82%92%E4%BD%BF%E7%94%A8%E3%81%97%E3%81%AA%E3%81%84\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eシングルトンを使用しない\u003c/h3\u003e\n\n\u003cp\u003eシングルトンをアンチパターンと捉えて使用しないようにしています。\u003cbr\u003e\n１つの実装に依存することになるのと、グローバル変数と同じく様々なところからアクセスされると分かりにくいコードになってしまうためです。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"シーン構成\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%B7%E3%83%BC%E3%83%B3%E6%A7%8B%E6%88%90\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eシーン構成\u003c/h2\u003e\n\n\u003cp\u003eUnityのマルチーシーン機能を活用して1画面1シーンの構成にしています。\u003cbr\u003e\nこの構成にすることで作業分担しやすくなっています。\u003cbr\u003e\nまたシーンを開いて再生することで編集中画面の動作を素早く確認することもできます。\u003c/p\u003e\n\n\u003cp\u003eこの画面はホーム画面でミッション画面を開きアイテム詳細ダイアログを開いた状態です。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/f7b806d5dd12cb30900294f92c558e6e889df0b4/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3230333232312f61353237623832352d393430632d333636642d643461302d3735386132376439323965372e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F203221%2Fa527b825-940c-366d-d4a0-758a27d929e7.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=5e488b1936f3ef7b18f2c48c2fd00754\" alt=\"スクリーンショット 2019-12-04 午後9.45.32.jpg\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/203221/a527b825-940c-366d-d4a0-758a27d929e7.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F203221%2Fa527b825-940c-366d-d4a0-758a27d929e7.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=b93862321ac1d9e0927303abd6d5f3b7 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003cbr\u003e\nこのときのHierarchyはこのようになっています。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/fcf1093fb472aa1dad3a508a42b016c7af1f90a4/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3230333232312f32306337336335392d393532312d333334632d396335342d3763303062373132333566382e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F203221%2F20c73c59-9521-334c-9c54-7c00b71235f8.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=80adfae6cc91b9fdffe666958edcd7a8\" alt=\"スクリーンショット 2019-12-04 午後9.45.21.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/203221/20c73c59-9521-334c-9c54-7c00b71235f8.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F203221%2F20c73c59-9521-334c-9c54-7c00b71235f8.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=369f4741cd997adef6fc51eeb775e87c 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eOutGameMain: アウトゲームのメイン部分。アウトゲーム自体の起動を担当。グローバルフッターなどのUI要素も持ちます。\u003c/li\u003e\n\u003cli\u003eMyPage3D: ホーム画面の背景3D表示を担当。背景3Dは様々な機能の後ろに表示されるので生存期間の長いシーンです。\u003c/li\u003e\n\u003cli\u003eMyPage: ホーム画面の2D表示を担当。\u003c/li\u003e\n\u003cli\u003eChallengeDialog: チャレンジ機能のダイアログ画面です。\u003c/li\u003e\n\u003cli\u003eChallengeDialogDetail: チャレンジ機能の詳細表示のダイアログ画面です。\u003c/li\u003e\n\u003cli\u003eItemDetailDialog: 上のスクリーンショットの最前面に表示されているアイテム詳細ダイアログ画面です。\u003c/li\u003e\n\u003cli\u003eDontDestroyOnLoad: 全シーンで常に存在するオブジェクトが配置されるUnityデフォルトシーンです。画面遷移システムやアセットバンドルシステムはこの領域に配置されています。\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"最後に\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%9C%80%E5%BE%8C%E3%81%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e最後に\u003c/h2\u003e\n\n\u003cp\u003e明日は \u003ca href=\"/tomeitou\" class=\"user-mention js-hovercard\" title=\"tomeitou\" data-hovercard-target-type=\"user\" data-hovercard-target-name=\"tomeitou\"\u003e@tomeitou\u003c/a\u003e さんの記事です。\u003c/p\u003e\n","createdAt":"2019-12-04T13:12:07Z","elapsedYearsFromLastModifiedAt":1,"encryptedId":"j35X5HXDIIia2uCc7nDdCbEoyL3zfyW6cg==--yXo/WVpfkOrL7ckC--lhfyHfnXkG9YPDvNheFamw==","isBanned":false,"isDeprecated":true,"isDestroyableByViewer":false,"isEditRequestReadableByViewer":true,"isEditRequestSendableByViewer":true,"isLikableByViewer":true,"isLikedByViewer":false,"isPublic":true,"isSlide":false,"isStockableByViewer":true,"isStockedByViewer":false,"isSubscribableByViewer":false,"isSubscribedByViewer":false,"isUpdatableByViewer":false,"isUpdated":true,"lastModifiedAt":"2019-12-11T02:18:36Z","likesCount":16,"linkUrl":"https://qiita.com/ozaki_shinya/items/bac70ebdbd330ccbb6d3","organization":null,"originalId":1098884,"stockedCount":10,"title":"リンクスリングスのアウトゲーム設計","toc":"\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB\"\u003eはじめに\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%86%85%E5%AE%B9\"\u003e内容\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%AA%E3%83%B3%E3%82%AF%E3%82%B9%E3%83%AA%E3%83%B3%E3%82%B0%E3%82%B9%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6\"\u003eリンクスリングスについて\u003c/a\u003e\n\u003cul\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%85%AC%E5%BC%8F%E3%82%B5%E3%82%A4%E3%83%88\"\u003e公式サイト\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E7%94%BB%E9%9D%A2%E3%82%A4%E3%83%A1%E3%83%BC%E3%82%B8\"\u003e画面イメージ\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%B2%E3%83%BC%E3%83%A0%E7%94%BB%E9%9D%A2%E5%8B%95%E7%94%BB\"\u003eゲーム画面動画\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cli\u003e\n\u003ca href=\"#%E8%A8%AD%E8%A8%88%E6%96%B9%E9%87%9D\"\u003e設計方針\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E4%B8%BB%E3%81%AA%E6%8E%A1%E7%94%A8%E6%8A%80%E8%A1%93\"\u003e主な採用技術\u003c/a\u003e\n\u003cul\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#asyncawait-unitask\"\u003easync/await、 UniTask\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#zenject\"\u003eZenject\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#pusher\"\u003ePusher\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\n\n\u003cli\u003e\n\u003ca href=\"#%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%A0%E6%A7%8B%E6%88%90\"\u003eプログラム構成\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#model\"\u003eModel\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#controller\"\u003eController\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#view\"\u003eView\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%A2%E3%82%A6%E3%83%88%E3%82%B2%E3%83%BC%E3%83%A0%E3%81%AE%E6%A9%9F%E8%83%BD\"\u003eアウトゲームの機能\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E7%94%BB%E9%9D%A2%E9%81%B7%E7%A7%BB\"\u003e画面遷移\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%80%E3%82%A4%E3%82%A2%E3%83%AD%E3%82%B0-%E3%83%9D%E3%83%83%E3%83%97%E3%82%A2%E3%83%83%E3%83%97%E3%82%A6%E3%82%A4%E3%83%B3%E3%83%89%E3%82%A6\"\u003eダイアログ (ポップアップウインドウ)\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E9%80%9A%E4%BF%A1\"\u003e通信\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%AA%E3%82%A2%E3%83%AB%E3%82%BF%E3%82%A4%E3%83%A0%E9%80%9A%E4%BF%A1\"\u003eリアルタイム通信\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%A2%E3%82%BB%E3%83%83%E3%83%88%E3%83%90%E3%83%B3%E3%83%89%E3%83%AB\"\u003eアセットバンドル\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E8%A8%AD%E8%A8%88%E3%81%A7%E6%B0%97%E3%82%92%E3%81%A4%E3%81%91%E3%81%A6%E3%81%84%E3%82%8B%E3%81%93%E3%81%A8\"\u003e設計で気をつけていること\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%B3%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%8D%E3%83%B3%E3%83%88%E6%8C%87%E5%90%91\"\u003eコンポーネント指向\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E4%BE%9D%E5%AD%98%E6%80%A7%E3%81%AE%E6%B3%A8%E5%85%A5\"\u003e依存性の注入\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%86%E3%82%B9%E3%83%88%E3%81%97%E3%82%84%E3%81%99%E3%81%84%E7%92%B0%E5%A2%83\"\u003eテストしやすい環境\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#unirx%E3%82%AA%E3%83%9A%E3%83%AC%E3%83%BC%E3%82%BF%E3%83%BC%E3%82%92%E5%A4%9A%E7%94%A8%E3%81%97%E3%81%AA%E3%81%84\"\u003eUniRxオペレーターを多用しない\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%B7%E3%83%B3%E3%82%B0%E3%83%AB%E3%83%88%E3%83%B3%E3%82%92%E4%BD%BF%E7%94%A8%E3%81%97%E3%81%AA%E3%81%84\"\u003eシングルトンを使用しない\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%B7%E3%83%BC%E3%83%B3%E6%A7%8B%E6%88%90\"\u003eシーン構成\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E6%9C%80%E5%BE%8C%E3%81%AB\"\u003e最後に\u003c/a\u003e\n\u003c/li\u003e\n\n","totalPv":2024,"uuid":"bac70ebdbd330ccbb6d3","banReason":null,"adventCalendarItem":{"day":3,"calendar":{"name":"サムザップ #2","urlName":"sumzap2","year":2019,"organization":null}},"author":{"encryptedId":"9caX3m921SMwfW8T/VrDCL1EtHL9--nScL9YaWdF1Ao5iJ--84KDPNQaLM+mqn2WJCDuBA==","originalId":203221,"description":"","facebookUrl":"https://facebook.com/shinya.ozaki3","githubUrl":null,"isBlockingViewer":false,"isFollowableByViewer":true,"isFollowedByViewer":false,"isTweetWebNotificationReceivable":true,"linkedinUrl":null,"name":"真也 尾崎","profileImageUrl":"https://secure.gravatar.com/avatar/ee2571ae54a5634d1ce66f70ba4f945b","profileImageUrlW48":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fsecure.gravatar.com%2Favatar%2Fee2571ae54a5634d1ce66f70ba4f945b?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=48\u0026s=0fe48cdb3925bd0d27b60ce0f9470f4f","profileImageUrlW75":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fsecure.gravatar.com%2Favatar%2Fee2571ae54a5634d1ce66f70ba4f945b?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=b319ad4cdd4afd77a6f89e92da8fcaeb","urlName":"ozaki_shinya","websiteUrl":"","twitterUrl":null,"twitterUrlName":null,"revealedOrganizations":{"edges":[{"node":{"encryptedId":"U/MI0lInTeJilHiHyVJXzUoV/T+BKlisogGZ--vCEO4rv8fzxx9d3z--VnAOeV46D5S5gnOsg0Ly7A==","isBetaReleaseEnabled":false,"isFollowableByViewer":false,"isFollowedByViewer":false,"name":"サムザップ","logoUrl":"https://s3-ap-northeast-1.amazonaws.com/qiita-organization-image/89762330cd3ad4c570e295c58d31ae81c9acc456/original.jpg?1575859802","urlName":"sumzap","description":"スマートフォンゲームの企画・運営・配信事業をしています。","url":"https://tech.sumzap.co.jp/"}}]}},"tags":[{"name":"C#","urlName":"csharp"},{"name":"Unity","urlName":"unity"},{"name":"設計","urlName":"%e8%a8%ad%e8%a8%88"},{"name":"デザインパターン","urlName":"%e3%83%87%e3%82%b6%e3%82%a4%e3%83%b3%e3%83%91%e3%82%bf%e3%83%bc%e3%83%b3"},{"name":"ゲームプログラミング","urlName":"%e3%82%b2%e3%83%bc%e3%83%a0%e3%83%97%e3%83%ad%e3%82%b0%e3%83%a9%e3%83%9f%e3%83%b3%e3%82%b0"}],"followingLikers":{"edges":[]},"comments":{"totalCount":0}},"comments":[],"client":null,"ads_event_emitter":null}}</script>
