.NET5.0も正式リリースされ、C#言語バージョンも9.0となりました。
とはいえ、私自身C#の知識が7.0くらいの知識からアップデートされていなかったりします。そこで今回はC#8、9辺りの新しい機能を意識しつつ、.NET5.0のアプリケーションを一から作ってみようと思います。さて、何を作るかですが
「ほとんどの人がどのようなものか知っている（仕様の説明が要らない）」
「実装の結果が視覚的にわかりやすい」
との理由からWord、Excel等についているオートシェイプ機能のような図形描画のライブラリを作ることとしました。※ 行き当たりばったりで設計しながら作る過程を連載記事として公開してゆく予定ですので、「それあまり良くない設計ですよ」とか「もっといい方法ありますよ」などフィードバックをいただけますと大変うれしいです。本記事のソースコードはGitHub上に置いておきます。（「blog/cahpter0-2」のように章ごとにブランチを切っていく予定です）それでは、まずは開発の準備から始めましょう！Visual Studio2019 の最新バージョン(12/13現在はVersion 16.8.3)を使用して開発します。以下のような構成でプロジェクトを作成します。CoreShapeライブラリはどのプラットフォーム、ライブラリにも依存しないポータブルな状態を保つようにします。.NET5.0 対応のプロジェクトテンプレートを利用するには今のところVisual Studioのオプション設定を変更する必要があります。下記の手順で「CoreShape」及び「CoreShape.Extensions.SkiaSharp」のプロジェクトを作成します。「新しいプロジェクトの作成」ダイアログでテンプレート「Class library」を選択して「次へ」
プロジェクト名「CoareShape」を入力して「次へ」「追加情報」でターゲットフレームワークで「.NET5.0」を選択して「作成」
メニュー「ファイル」-「追加」-「新しいプロジェクト」から「CoreShape.Extensions.SkiaSharp」プロジェクトも同様に作成します。続けてWPFアプリケーション（SampleWpf）のプロジェクトを作成します。「新しいプロジェクトの追加」ダイアログでテンプレート「WPF Application」を選択して「次へ」
プロジェクト名を入力して「次へ」「追加情報」でターゲットフレームワークで「.NET5.0」を選択して「作成」
「ツール」-「NuGetパッケージマネージャ」-「ソリューションのNuGetパッケージの管理」を開き、「SkiaSharp」のパッケージを検索し、プロジェクトに追加します。下記の通りにプロジェクト間の参照設定を行います。作成されたcsprojファイルに &lt;Nullable&gt;enable&lt;/Nullable&gt; を追加します。
こうすることで参照型もNULL非許容が前提となり、NULL以外の値に初期化しないと警告が出るようになります。（作成した全てのプロジェクトでこの設定を行います）Null許容参照型 - C#リファレンスSampleWPFでMainWindow.xamlを開き、SkiaSharpで図形を描画するためのコントロールSKElementを追加します。そしてコードビハインド（MainWindow.xaml.cs）には描画面を更新する際のイベント PaintSurfaceのイベントハンドラを追加しておきます。これで実装前の準備は完了です。次回はです。  


