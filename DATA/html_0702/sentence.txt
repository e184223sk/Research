C#でReflectionを使ったことがありますか？
Reflectionを使うことで今まではできなかったような処理を書くことができます
その一つとしてgenericのクラスの呼び出し方法を今回はご紹介します。注意点としては文字列で&lt;&gt;ではなく[]にする必要があり、ジェネリックの数が`の後に必要です通常ライブラリを使うだけならなにも問題はありません
しかし、動的コード生成する場合や動的にDLLを読み込むときに使用する場合は問題が発生します。動的にDLL等を読み込むときは上記の方法ではできません
なので別な方法でする必要があります。
これは他のクラスを取得する方法と同じだと思っていました
しかしそれではダメだったのでご紹介しますこの方法では他の型を読み込んでくれないためだめでした。調べているとMakeGenericTypeメソッドでgenericの型の引数を任意に決めれると書いてあったのでやってみました。しかし問題がこれを書いてブレークポイントで確認してみましたが
tの中は変わっていませんでした。実はMakeGenericTypeは適応したgeneric型のtypeを新しく作るメソッドでしたつまり...このようにすることで動的に読み込んだgeneric型のTypeを取得することができます。
MakeGenericTypeメソッドは新しく作ったType型を戻り値として出すメソッドですので
ちゃんと代入しないとだめですよねまとめとしてはちゃんとメソッドの仕様を調べて使うことにしましょう。
でないと、私みたいに痛い目を見ます。
皆様お気を付けてこの辺りで失礼します。


