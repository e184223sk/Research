More than 1 year has passed since last update.先日 Unity の Navigation 機能について説明を求められる機会がありました。私自身、基本的に Navigation を利用するようなゲームを作らないので、 Navigation に関してはあまり触れたことがなく...。軽く触ってみたら、爆速で簡単な移動AIができて圧巻！ということで記事にしてみました。[この記事の対象者] 
・Unity初級〜中級者
[この記事の目的]
・爆速で簡単な移動AIを作ろうそれでは始めていきましょう！まずステージがないと始まらないのでステージを簡単に作っておきます。
今回はこんな感じ。
青が player 、赤が target となるオブジェクトです。
青の player が赤の target まで、道に沿って移動するAI機能を作成します。[操作]
1. player（自動で動かしたいもの）に Nav Mesh Agent という Component をアタッチします。
2. 次に、 Navigation ウィンドウで地形を Bake します。
3. スクリプトを書きます。
4. player オブジェクトにスクリプトをアタッチして、 Inspector から player, target　にそれぞれ対応するオブジェクトを入れます。はい、これで自動追従AIの作成終了です！簡単！あれ、動かない...なんかエラーが出ている...
Bake し忘れたかなー、と思ってもう一度 Bake して再生しても変わらず...調べてみたら、どうやら通路や壁として使うオブジェクトは Static にチェック入れないとだめなんですね。Terrain はデフォルトで Static になってるので気づきませんでした。
[操作]
1. ステージに使用しているオブジェクト（床 Plane , 壁 Cube ）全てを Static に設定
2. 再度 Bake する
水色のエリアがちゃんと通路に沿って作られました！再生すると、ちゃんと通路に沿って player が target を追いかけています。
こんなに簡単に作れちゃうんですね！さて続いて、次のステップに進みましょう。ステージの形を少し変えます。
先ほどと同じく、青が player 、赤が target で、新たに加えた黄色のオブジェクトは obstacle （障害物）です。
ここでは、障害物を認識して、障害物のある通路を避けて迂回して target を追いかける移動AIを作成します。
これには、Nav Mesh Obstacle というものを使います。[操作]
1. 黄色の obstacle （障害物となるオブジェクト）に Nav Mesh Obstacle という Component　をアタッチします。これだけです！わずか3秒！
うーん？なんか違うな...障害物のある通路を避けてくれず、行き詰まってしまいました。
調べてみると、 Nav Mesh Obstacle Component の Carve にチェックを入れると良いらしい。[操作]
1. Nav Mesh Obstacle Component の Carve にチェックを入れる

おや、水色の範囲が障害物周りだけなくなりました！気を取り直して、この状態でもう一度再生。
見事に迂回しました！今回は以上です。
AIって、なんだか実装大変そうなイメージの項目。実際ゲームの企画をしている時にも、「敵どうする？」「AI必要じゃない？」「作るのムズそう」「NPC対戦やめて対戦プレイ形式にしよっか」みたいな話が出たりしました。Unityなら、非常に簡単に、爆速で、移動AI作れます。
ぜひ試してみてください！【Unity】NavMeshを学ぶ 障害物編 - うら干物書き
NavMeshの使い方　その１ - テラシュールブログ
NavMesh Obstacle の作成 - Unity User Manual


