More than 1 year has passed since last update.*注意*この記事はプログラミングの基礎知識がある前提で進みます。
レベルとしてはC++でちょっと書いたことあるよとか、Javaならいじったことあるぜ、って人ならば十分に理解できるでしょう。
あと高校数学の知識を必要とします。
それと、その１を見ないと多分意味わからないから見てね。やっとタイトルが出てきましたね。
前回はこんなコードで終了しましたね。さあ、何故ダメなのかを答え合わせしよう。
実際にやってみた人ならばわかるだろうが、カメラの視点とカメラの移動が同期されていないのです。さてここからは最も重要な範囲であり、最も退屈な理論の時間です。カメラの移動はカメラの視点に同期する必要があると思いました。
じゃあどうして同期してやればいいでしょう。
私が思いついた方法を説明します。実はその１で sight_x の範囲を 0 ～ 360にしましたね。
その理由が今回、その値を利用して方角を決めるからなのです。
sight_x は z軸方向を正方向つまり 0度と定めた角度なのです。ではまず左スティックの上下入力があった場合を考えてみましょう。

カメラが向いている方向が sight_x度方向であるとして、ベクトルの移動量が１であるとすると　　　　　　　　　　　　　　　　　　　　　つまり　　　　　　入力量は常に1または-1であるとは限らないので、入力量を両辺にかける　　　　　　　したがって各成分を分解してみると、z軸方法の移動量をdz1とすると　　　　　　　　　　　　　　　　　x軸方法の移動量をdx1とすると　　　　　　　　　　　　　　　　　となることがわかりました。これはカメラが向いている方向から右に90度方向に進めばいいということになります。
ということは気づいた方もいると思いますが、sight_xに90を足せばいいということです。　　　　　　　　　　　　先ほどの理論より、x軸方向の移動量を掛けると　　　　　　　したがって各成分を分解してみると、z軸方法の移動量をdz2とすると　　　　　　　　　　　　　　　　　x軸方法の移動量をdx1とすると　　　　　　　　　　　　　　　　　となることがわかりました。上下左右の入力から求めた移動量をあわせるとz軸方向の移動量をdz、x軸方向の移動量をdxとすると、となります。お疲れさまでした、理論は終わりです。さあ、長い理論にお付き合いいただきましたので、さっそく使っていただきましょう。
先ほどの移動量の式をコードに変換するとこのコードを追加して、コードを完成させるとよく頑張りました、これで視点操作とカメラ移動の同期を終了します。
何かわからないことがあればコメントで遠慮せずに尋ねてください。
私はすべてのプログラマーの味方でありたいと思っていますので。　　　それではさようならっ！！私はVonletと申します。
プログラミング、電子工作、作曲などを生きがいにしています。
一番わかりやすいものでしたら、マクドナルド(シオンタウン店)
https://www.nicovideo.jp/watch/sm34895662FutureHouse神社(bootleg).dondiablo
https://www.nicovideo.jp/watch/sm34666016などを作って恥を晒しています。よろしければ見に行ってやってください。最後に自分のSNSを載せておきます
YouTube : https://www.youtube.com/channel/UCvL2cxUWsnBDT95jSq1G9QQ
Twitter : https://twitter.com/Vonlet
ニコニコ動画 : https://www.nicovideo.jp/user/87637963
Sound Cloud : https://soundcloud.com/8yve6bc8icio


