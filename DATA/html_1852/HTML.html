<!DOCTYPE html><html><head><meta charset="utf-8" /><title>TwilioをAzure Functions(C#)で動かす - Qiita</title><meta content="width=device-width,initial-scale=1,shrink-to-fit=no,viewport-fit=cover" name="viewport" /><meta content="#55c500" name="theme-color" /><meta content="XWpkTG32-_C4joZoJ_UsmDUi-zaH-hcrjF6ZC_FoFbk" name="google-site-verification" /><meta content="telephone=no" name="format-detection" /><link rel="canonical" href="https://qiita.com/masaya3/items/429c12c2c742b5fc07f5" /><link href="/manifest.json" rel="manifest" /><link href="/opensearch.xml" rel="search" title="Qiita" type="application/opensearchdescription+xml" /><link as="script" href="https://www.googletagservices.com/tag/js/gpt.js" rel="preload" /><link href="https://securepubads.g.doubleclick.net" rel="preconnect" /><script async="" src="https://www.googletagservices.com/tag/js/gpt.js"></script><meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="ilrEMNnJ7afChLKAMdiF6qGlFTRSZeAGyoOLQzT8PTrsYQwmZZSt5l80mzsYafKvm74soFkkRMChfygEMuj1zA==" /><link rel="shortcut icon" type="image/x-icon" href="https://cdn.qiita.com/assets/favicons/public/production-c620d3e403342b1022967ba5e3db1aaa.ico" /><link rel="apple-touch-icon" type="image/png" href="https://cdn.qiita.com/assets/favicons/public/apple-touch-icon-ec5ba42a24ae923f16825592efdc356f.png" /><link rel="stylesheet" media="all" href="https://cdn.qiita.com/assets/public/article-2eaa7dbedc42a8ea65c722cda46d0ebb.min.css" /><script src="https://cdn.qiita.com/assets/public/v3-article-bundle-63de2d91fef827269d3f6b958db2335b.min.js" defer="defer"></script><meta name="twitter:card" content="summary_large_image"><meta content="@Qiita" name="twitter:site" /><meta content="@masaya3" name="twitter:creator" /><meta property="og:type" content="article"><meta property="og:title" content="TwilioをAzure Functions(C#)で動かす - Qiita"><meta property="og:image" content="https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0&amp;w=1200&amp;mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND1WSGRwYkdsdjQ0S1NRWHAxY21VZ1JuVnVZM1JwYjI1ektFTWpLZU9CcC1XTGxlT0JpLU9CbVEmdHh0LWNvbG9yPSUyMzMzMyZ0eHQtZm9udD1IaXJhZ2lubyUyMFNhbnMlMjBXNiZ0eHQtc2l6ZT01NCZ0eHQtY2xpcD1lbGxpcHNpcyZ0eHQtYWxpZ249Y2VudGVyJTJDbWlkZGxlJnM9YTMzZjEyNzkxYzEzNmMxYWZlY2NkY2I1MWY4OWNmMjE&amp;mark-align=center%2Cmiddle&amp;blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RRzFoYzJGNVlUTSZ0eHQtY29sb3I9JTIzMzMzJnR4dC1mb250PUhpcmFnaW5vJTIwU2FucyUyMFc2JnR4dC1zaXplPTQ1JnR4dC1hbGlnbj1yaWdodCUyQ2JvdHRvbSZzPWU5MGQwNjBlMTMyZDExZDUxYWJiYzhiYWM3MDNiZTZm&amp;blend-align=center%2Cmiddle&amp;blend-mode=normal&amp;s=70b7d9284b71b5935b6c3cfdf27dc07d"><meta property="og:description" content="TwilioをAzure FunctionsとC#で、使用するためのまとめです。
備忘録的な内容なので細かな部分において、説明が雑なところがありますがご了承ください。


事前準備について

TwilioやAzureのアカウント登録、..."><meta content="https://qiita.com/masaya3/items/429c12c2c742b5fc07f5" property="og:url" /><meta content="Qiita" property="og:site_name" /><meta content="564524038" property="fb:admins" /><meta content="C#,twilio,AzureFunctions" name="keywords" /><script>!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window, document,'script',
'https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '668972150489891');
fbq('track', 'PageView');</script><style data-emotion-css="17jxvjw 11t2ec1 1dvr2p8 18lkoru 1g4cku8 1iupg5d ijvq0v 15cocm3 12rp90f 115f4t 1b8uj5v 79elbk 16hhh7b fcbn8c 1gj7nt 154zy0m yikrym 1jqivyb 1ode1bp le4d8r 1hbd3g7 helsa7 8qb8m4 2imjyh he5w1s 70qvj9 3ojehk 100alwu 1dtnjt5 10ougpm 1ay9vb9 m19uds cgzq40 1wa99t2 1l3zk9f 4czcte 1yzj1fm 1uv1qiv 109dbrr 5jpx49 mnxgyc 1vlpknv fsjkhv 1b17vb0 7i7f4d"}>.css-17jxvjw{display:grid;display:-ms-grid;grid-template-columns:80px minmax(0,1fr) 300px;-ms-grid-columns:80px minmax(0,1fr) 300px;grid-template-rows:minmax(270px,auto) 1fr;-ms-grid-rows:minmax(270px,auto) 1fr;max-width:1280px;margin-right:auto;margin-left:auto;padding-top:24px;padding-right:24px;padding-left:24px;}@media (max-width:1200px){.css-17jxvjw{padding-bottom:0;padding-left:0;padding-right:0;}}@media (max-width:992px){.css-17jxvjw{grid-template-columns:80px 452px 300px;-ms-grid-columns:80px 452px 300px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}}@media (max-width:770px){.css-17jxvjw{display:block;}}@media (max-width:480px){.css-17jxvjw{padding-top:0;}}.css-11t2ec1{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;z-index:5;position:-webkit-sticky;position:sticky;top:calc(56px + 24px + 16px + 32px - 16px);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:16px;width:80px;}.css-11t2ec1:after{content:'';display:table;}.css-11t2ec1:before{content:'';display:table;}@media (max-width:770px){.css-11t2ec1{display:none;}}.css-1dvr2p8{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-18lkoru{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;background-color:#FFFFFF;}.css-1g4cku8{display:inline-block;vertical-align:middle;height:20px;width:20px;fill:#55C500;}.css-1iupg5d{color:#55C500;cursor:pointer;font-size:14px;font-weight:bold;}.css-ijvq0v{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-15cocm3{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#FFFFFF;border:2px solid #6E6F70;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:2px 0px 0px;width:40px;}.css-12rp90f{display:inline-block;vertical-align:bottom;height:17.77777777777778px;width:16px;fill:#6E6F70;}.css-115f4t{color:#6E6F70;font-size:14px;font-weight:bold;}.css-1b8uj5v{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;margin-bottom:16px;padding:0;}.css-79elbk{position:relative;}.css-16hhh7b{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;padding:0;}.css-fcbn8c{display:none;bottom:initial;left:initial;right:initial;top:initial;left:100%;top:calc(-8px - (14px * 1.8) - 16px - 4px);}.css-1gj7nt{color:rgba(0,0,0,0.6);font-size:14px;font-weight:bold;line-height:1.8;padding:8px 16px;}.css-154zy0m{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.87);cursor:pointer;font-size:16px;font-weight:normal;line-height:1.8;padding:4px 16px;}.css-154zy0m:hover{-webkit-text-decoration:none;text-decoration:none;background-color:#F2F2F2;}.css-yikrym{width:20px;}.css-1jqivyb{color:rgba(0,0,0,0.6);font-size:13px;}.css-1ode1bp{background-color:rgba(0,0,0,0.12);height:1px;width:100%;margin:8px 0;}.css-le4d8r{display:inline-block;vertical-align:middle;height:13px;width:13px;fill:rgba(0,0,0,0.6);}.css-1hbd3g7{height:250px;}.css-helsa7{background-color:#FFFFFF;padding:32px;margin-bottom:24px;}@media (max-width:992px){.css-helsa7{margin:0 auto 40px;}}@media (max-width:480px){.css-helsa7{margin:0 0 40px;padding:32px 16px;}}.css-8qb8m4{margin-bottom:48px;}.css-2imjyh{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-he5w1s{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;width:100%;}@media (max-width:770px){.css-he5w1s{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}}.css-70qvj9{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.css-3ojehk{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;margin-right:4px;}.css-100alwu{display:inline-block;border-radius:50%;line-height:1;overflow:hidden;vertical-align:middle;}.css-1dtnjt5{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-10ougpm{color:rgba(0,0,0,0.87);font-size:14px;font-weight:600;line-height:1.8;margin-right:4px;text-wrap:break-word;word-break:break-all;}.css-1ay9vb9{margin-right:16px;}.css-m19uds{color:rgba(0,0,0,0.6);font-size:14px;line-height:1.8;}.css-cgzq40{color:rgba(0,0,0,0.87);font-size:32px;font-weight:bold;line-height:1.4;margin-top:8px;text-wrap:break-word;word-break:break-all;}.css-1wa99t2{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.6);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:8px;}.css-1l3zk9f{color:rgba(0,0,0,0.6);font-size:20px;margin-right:8px;}.css-4czcte{margin-right:4px;color:inherit;font-size:14px;line-height:1.8;}.css-4czcte:not(:last-child)::after{content:',';margin-right:4px;}.css-1yzj1fm{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:32px;}.css-1uv1qiv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-size:20px;height:32px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin-right:16px;outline:none;padding:0;width:32px;}.css-109dbrr{background-color:#F9F9F9;border-top:1px solid rgba(0,0,0,0.12);bottom:0;box-shadow:0px 1px 4px rgba(0,0,0,0.14);display:none;height:calc(env(safe-area-inset-bottom,0px) + 56px);-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding-bottom:env(safe-area-inset-bottom);position:-webkit-sticky;position:sticky;width:100%;z-index:2000;}@media (max-width:770px){.css-109dbrr{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}.css-5jpx49{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:space-evenly;-webkit-justify-content:space-evenly;-ms-flex-pack:space-evenly;justify-content:space-evenly;width:100%;}.css-mnxgyc{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1vlpknv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;margin-right:4px;background-color:#FFFFFF;}.css-fsjkhv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1b17vb0{color:#6E6F70;font-size:14px;font-weight:bold;margin-left:4px;}.css-7i7f4d{display:none;bottom:initial;left:initial;right:initial;top:initial;bottom:32px;right:0;}</style></head><body><div class="allWrapper"><div><div id="GlobalHeader-react-component-000754d0-7403-4831-954e-0689bfecec8c"><div class="st-Header"><div class="st-Header_container"><div class="st-Header_start"><a href="/" class="st-Header_logo"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 426.57 130"><circle cx="167.08" cy="21.4" r="12.28"></circle><path d="M250.81 29.66h23.48v18.9h-23.48z"></path><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z"></path><circle cx="216.33" cy="21.4" r="12.28"></circle></svg></a><div class="st-Header_communitySelector" tabindex="0"><span class="fa fa-caret-down"></span></div><div class="st-Header_dropdown"><div class="st-Header_dropdownHeading">Qiita Teams that are logged in</div><div class="st-Header_dropdownItemNote">You are not logged in to any team</div><hr class="st-Header_dropdownDivider st-Header_dropdownDivider-shrink"/><a href="https://teams-center.qiita.com/find_team" class="st-Header_dropdownItem"><span class="fa fa-fw fa-sign-in st-Header_dropdownItemIcon"></span><div>Log in to Qiita Team</div></a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Community</div><a href="/organizations" class="st-Header_dropdownItem">Organization</a><a href="/official-events/open" class="st-Header_dropdownItem">Event</a><a href="/advent-calendar" class="st-Header_dropdownItem">Advent Calendar</a><a href="https://qiitadon.com/" class="st-Header_dropdownItem" target="_blank">Qiitadon (β)</a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Service</div><a href="https://jobs.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Jobs</a><a href="https://zine.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Zine</a><a href="https://blog.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Blog</a></div><form class="st-Header_search" action="/search" method="get"><span class="fa fa-search st-Header_searchIcon"></span><input type="search" class="st-Header_searchInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form><form class="st-Header_searchModal" action="/search" method="get"><input type="text" class="st-Header_searchModalInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form></div><div class="st-Header_end"><div class="st-Header_searchButton"><span class="fa fa-search"></span></div><a class="st-Header_signupButton" href="/signup?redirect_to=%2Fmasaya3%2Fitems%2F429c12c2c742b5fc07f5">Signup</a><a class="st-Header_loginLink" href="/login?redirect_to=%2Fmasaya3%2Fitems%2F429c12c2c742b5fc07f5">Login</a></div><div class="st-Header_overlay"></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="GlobalHeader" data-dom-id="GlobalHeader-react-component-000754d0-7403-4831-954e-0689bfecec8c">{"unreadNotificationsCount":null,"realms":[{"humanName":"Qiita","isCurrentRealm":true,"isQiita":true,"isQiitaTeam":false,"loggedInUser":null,"teamId":null,"url":"https://qiita.com/"}],"teamFindUrl":"https://teams-center.qiita.com/find_team","isTeamOnlyUser":null,"currentUser":null}</script>
      
</div><div class="st-HeaderAlert st-HeaderAlert-warning"><div class="st-HeaderAlert_body"></div></div><script type="application/ld+json">{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"/","name":"Qiita"}},{"@type":"ListItem","position":2,"item":{"@id":"/tags/csharp","name":"C#"}}]}</script><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","datePublished":"2021-06-15T00:30:54.000+09:00","dateModified":"2021-06-15T09:06:28.000+09:00","headline":"TwilioをAzure Functions(C#)で動かす","image":"https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0\u0026w=1200\u0026mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND1WSGRwYkdsdjQ0S1NRWHAxY21VZ1JuVnVZM1JwYjI1ektFTWpLZU9CcC1XTGxlT0JpLU9CbVEmdHh0LWNvbG9yPSUyMzMzMyZ0eHQtZm9udD1IaXJhZ2lubyUyMFNhbnMlMjBXNiZ0eHQtc2l6ZT01NCZ0eHQtY2xpcD1lbGxpcHNpcyZ0eHQtYWxpZ249Y2VudGVyJTJDbWlkZGxlJnM9YTMzZjEyNzkxYzEzNmMxYWZlY2NkY2I1MWY4OWNmMjE\u0026mark-align=center%2Cmiddle\u0026blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RRzFoYzJGNVlUTSZ0eHQtY29sb3I9JTIzMzMzJnR4dC1mb250PUhpcmFnaW5vJTIwU2FucyUyMFc2JnR4dC1zaXplPTQ1JnR4dC1hbGlnbj1yaWdodCUyQ2JvdHRvbSZzPWU5MGQwNjBlMTMyZDExZDUxYWJiYzhiYWM3MDNiZTZm\u0026blend-align=center%2Cmiddle\u0026blend-mode=normal\u0026s=70b7d9284b71b5935b6c3cfdf27dc07d","mainEntityOfPage":"https://qiita.com/masaya3/items/429c12c2c742b5fc07f5","author":{"@type":"Person","address":"","email":null,"identifier":"masaya3","name":"masaya3","image":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F189829%2Fprofile-images%2F1512574022?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=cb9c758b1439f991bbb6aa3dc73144ad","url":"https://qiita.com/masaya3","description":"いろいろ物作りが好きな中年です。","memberOf":[{"@type":"Organization","address":"","legalName":"痛快技術株式会社","image":"https://s3-ap-northeast-1.amazonaws.com/qiita-organization-image/59a520fcb5e05658432ca393731047455436bddc/original.jpg?1621580178","logo":"https://s3-ap-northeast-1.amazonaws.com/qiita-organization-image/a669c125f29c6ae01dbb645120c44f9862609597/original.jpg?1621580178","identifier":"tsux","description":"技術の楽しさを広め伝える\r\n技術で社会の問題を解決する\r\n技術で私達を幸せにする"}]},"publisher":{"@type":"Organization","name":"Qiita","logo":{"@type":"ImageObject","url":"//cdn.qiita.com/assets/public/qiita-logo-c39ded593afa388e2e1ba435b110554e.png"}}}</script><style type="text/css">.wb-CampaignLink {
  background-color: #333333;
  width: 100%;
}

.wb-CampaignLink_container {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  max-width: 1100px;
  margin: 0 auto;
  font-size: 13px;
  padding: 0.8em;
}
.wb-CampaignLink_container > a {
  color: #fff;
}

.wb-CampaignLink_container > a:hover {
  text-decoration: underline;
}</style><div class="wb-CampaignLink"><div class="wb-CampaignLink_container"><a target="_blank" id="header_text_message_1" href="https://zine.qiita.com/interview/202107-hitachi-3/?utm_source=qiita&amp;utm_medium=header-banner">「作業者の負荷情報の見える化」に取り組む研究者が語る日立の魅力</a><a target="_blank" id="header_text_message_2" href="https://zine.qiita.com/interview/202107-hitachi-3/?utm_source=qiita&amp;utm_medium=header-banner">詳しくはこちら</a></div><script>td.trackEvent(
  'front_events',
  {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"masaya3","type":"items","id":"429c12c2c742b5fc07f5"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Show","data":{"message":"「作業者の負荷情報の見える化」に取り組む研究者が語る日立の魅力","url":"https://zine.qiita.com/interview/202107-hitachi-3/?utm_source=qiita\u0026utm_medium=header-banner","sub_message":"詳しくはこちら"}}
)</script><script>document.getElementById('header_text_message_1').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"masaya3","type":"items","id":"429c12c2c742b5fc07f5"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":1,"pos_id":"header_text_message_1","message":"「作業者の負荷情報の見える化」に取り組む研究者が語る日立の魅力","url":"https://zine.qiita.com/interview/202107-hitachi-3/?utm_source=qiita\u0026utm_medium=header-banner","sub_message":"詳しくはこちら"}}
  )
})</script><script>document.getElementById('header_text_message_2').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"masaya3","type":"items","id":"429c12c2c742b5fc07f5"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":1,"pos_id":"header_text_message_2","message":"「作業者の負荷情報の見える化」に取り組む研究者が語る日立の魅力","url":"https://zine.qiita.com/interview/202107-hitachi-3/?utm_source=qiita\u0026utm_medium=header-banner","sub_message":"詳しくはこちら"}}
  )
})</script></div><script type="application/json" id="js-react-on-rails-context">{"railsEnv":"production","inMailer":false,"i18nLocale":"en","i18nDefaultLocale":"en","href":"https://qiita.com/masaya3/items/429c12c2c742b5fc07f5","location":"/masaya3/items/429c12c2c742b5fc07f5","scheme":"https","host":"qiita.com","port":null,"pathname":"/masaya3/items/429c12c2c742b5fc07f5","search":null,"httpAcceptLanguage":null,"actionPath":"public/items#show","settings":{"analyticsTrackingId":"UA-24675221-12","assetsMap":{},"csrfToken":"CxJRnZOFRXgj0HRw9on+E7Mcc7QIlqY4fnkWsjiF11BtKZmLL9gFOb5gXcvfOIlWiQdKIAPXAv4VhbX1PpEfpg==","locale":"en"},"currentUser":null,"isLoggedIn":false,"recaptchaSiteKey":"6LfNkiQTAAAAAM3UGnSquBy2akTITGNMO_QDxMw6","serverSide":false}</script>
<div id="PersonalArticlePage-react-component-c722ba85-624a-43b4-b2c1-100cdbb64ac3"><div class="p-items_wrapper"><div class=" css-17jxvjw"><div class="css-11t2ec1"><div class="css-1dvr2p8"><button class=" css-18lkoru"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/masaya3/items/429c12c2c742b5fc07f5/likers" class="css-1iupg5d">4</a></div><div class="css-ijvq0v"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-115f4t">3</span></div><div class="css-1b8uj5v"><span class="fa fa-twitter"></span></div><div class="css-1b8uj5v"><span class="fa fa-facebook"></span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-fcbn8c"><div class="css-1gj7nt">Improve article</div><a href="/drafts/429c12c2c742b5fc07f5/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/masaya3/items/429c12c2c742b5fc07f5/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/masaya3/items/429c12c2c742b5fc07f5/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/masaya3/items/429c12c2c742b5fc07f5/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/masaya3/items/429c12c2c742b5fc07f5.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div><div class="p-items_options"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_toc"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_main"><div class="css-helsa7"><div class="css-8qb8m4"><div class="css-2imjyh"><div class="css-he5w1s"><div class="css-70qvj9"><div class="css-3ojehk"><a href="/masaya3"><img class="css-100alwu eyfquo10" src="https://qiita-image-store.s3.amazonaws.com/0/189829/profile-images/1512574022" width="24" height="24" loading="lazy"/></a></div><div class="css-1dtnjt5"><a href="/masaya3" class="css-10ougpm">@<!-- -->masaya3</a><div class="css-1ay9vb9"><span><meta content="2021-06-14T15:30:54Z"/><time dateTime="2021-06-15T00:06:28Z" class="css-m19uds">updated at 2021-06-15</time></span></div></div></div></div></div><h1 class="css-cgzq40">TwilioをAzure Functions(C#)で動かす</h1><div class="css-1wa99t2"><span class="fa fa-tags mr-1of2 css-1l3zk9f" aria-hidden="true"></span><a href="/tags/csharp" class="css-4czcte">C#</a><a href="/tags/twilio" class="css-4czcte">twilio</a><a href="/tags/azurefunctions" class="css-4czcte">AzureFunctions</a></div></div><section class="it-MdContent"><div id="personal-public-article-body"><div><p><code>Twilio</code>を<code>Azure Functions</code>と<code>C#</code>で、使用するためのまとめです。<br>
備忘録的な内容なので細かな部分において、説明が雑なところがありますがご了承ください。</p>

<h1>
<span id="事前準備について" class="fragment"></span><a href="#%E4%BA%8B%E5%89%8D%E6%BA%96%E5%82%99%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>事前準備について</h1>

<p>TwilioやAzureのアカウント登録、VSCodeの拡張機能のインストール方法はここでご説明致しませんのでQiita等でお調べください。</p>

<ul>
<li>
<a href="https://qiita.com/mobilebiz/items/932eb21ff6ed36f524d8" id="reference-494cc20b44d95d569e35">Twilioアカウント</a>　<br><a href="/mobilebiz" class="user-mention js-hovercard" title="mobilebiz" data-hovercard-target-type="user" data-hovercard-target-name="mobilebiz">@mobilebiz</a>さんをフォローするといろいろ情報が集まると思います。</li>
<li><a href="https://docs.microsoft.com/ja-jp/learn/modules/create-an-azure-account/" rel="nofollow noopener" target="_blank">Azureアカウント</a></li>
<li>
<a href="https://azure.microsoft.com/ja-jp/products/visual-studio-code/" rel="nofollow noopener" target="_blank">Visual Studio Code</a>　<br>開発環境（VS2019でもいいですが、私の環境がmacなので・・）</li>
<li>
<a href="https://docs.microsoft.com/ja-jp/azure/developer/javascript/tutorial/vscode-function-app-http-trigger/tutorial-vscode-serverless-node-install?tabs=bash" rel="nofollow noopener" target="_blank">Azure Functions拡張機能</a>　<br>
Azure Functionsとの連動などで使用します。</li>
<li>
<a href="https://github.com/Azure/azure-functions-core-tools" rel="nofollow noopener" target="_blank">Azure Functions Core Tools</a> <br>
ローカルの実行で使用します。</li>
<li>
<a href="https://zenn.dev/midoliy/articles/9e3cff958ff89ba151de#%F0%9F%94%B5nuget-package-manager-(optional)" rel="nofollow noopener" target="_blank">Nuget拡張機能</a> <br>
私はNuGet Gallery使ってます。</li>
<li>
<a href="https://zenn.dev/midoliy/articles/9e3cff958ff89ba151de" rel="nofollow noopener" target="_blank">その他の拡張機能</a> <br>
いろいろ開発に便利なものがあるのでお好みで。</li>
</ul>

<h1>
<span id="手順" class="fragment"></span><a href="#%E6%89%8B%E9%A0%86"><i class="fa fa-link"></i></a>手順</h1>

<h2>
<span id="azure-functionsのプロジェクトを作成する" class="fragment"></span><a href="#azure-functions%E3%81%AE%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>Azure Functionsのプロジェクトを作成する</h2>

<p>Azure Functionsの拡張機能を使用して、Azure Functionsのプロジェクトを作成します。</p>

<p>まずはAzureのタブを選び、稲妻マークをクリックします。<br>
<a href="https://camo.qiitausercontent.com/e2b586315ea3275a0bb68d4c6629b9aa2b8eec37/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3138393832392f37663638616365622d366636332d646230392d393539652d6462663630366336373563302e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2F7f68aceb-6f63-db09-959e-dbf606c675c0.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=afbb63b8bde27396d1cc3a47d75215cb" alt="プロジェクト作成" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/189829/7f68aceb-6f63-db09-959e-dbf606c675c0.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2F7f68aceb-6f63-db09-959e-dbf606c675c0.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=96dcf74127ff504355ff6ef3f6a3876e 1x" loading="lazy"></a></p>

<p>「Create new project」を選択し、保存先のパスを指定します。<br>
<a href="https://camo.qiitausercontent.com/7a9f82e871e86fb796c93c5012b73c332d95c3f9/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3138393832392f30373461613836352d343434362d353832612d353764392d3266663565376466633335392e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2F074aa865-4446-582a-57d9-2ff5e7dfc359.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=9a49b0ec0e2771104d0c1ec943bd4c8d" alt="プロジェクト作成" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/189829/074aa865-4446-582a-57d9-2ff5e7dfc359.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2F074aa865-4446-582a-57d9-2ff5e7dfc359.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=f5262d0477bcbf48feb021b62378ffb4 1x" loading="lazy"></a></p>

<p>プロジェクトの設定を行います。今回は<code>C#</code>を使用したいので、<code>C#</code>を選びます。<br>
<a href="https://camo.qiitausercontent.com/0a5e5b3f3fc7abf6f625dc10b29f1c264efe89ba/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3138393832392f33306134323739322d373330322d646333612d616261342d6432623333333364616663352e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2F30a42792-7302-dc3a-aba4-d2b3333dafc5.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=2a41b6f7f7e380c5a5d23895d66138fa" alt="言語設定" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/189829/30a42792-7302-dc3a-aba4-d2b3333dafc5.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2F30a42792-7302-dc3a-aba4-d2b3333dafc5.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=83343fd0695e431cd85657ca4b8971b4 1x" loading="lazy"></a></p>

<p><code>C#</code>のランタイムをしています。今回は、<code>.NET Core 3 LTS</code>を選んでいます。<br>
<a href="https://camo.qiitausercontent.com/d5a4e1bb4264f7a0976c5de079a174ac19a79fea/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3138393832392f35303761326336642d333062312d333638392d613938302d6130666239356330353536372e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2F507a2c6d-30b1-3689-a980-a0fb95c05567.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=f30edddb2e0f76727126f021aa0b2a34" alt="言語設定" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/189829/507a2c6d-30b1-3689-a980-a0fb95c05567.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2F507a2c6d-30b1-3689-a980-a0fb95c05567.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=ad299988d6ce05552f2344326cae241f 1x" loading="lazy"></a></p>

<p>Twilioから　呼び出してもらうため、<code>HTTP trigger</code>を選びます。<br>
<a href="https://camo.qiitausercontent.com/c2a68fe20a62a2a0090044fdb894c6dcb02cc2f4/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3138393832392f64303031626536372d323161372d393733352d333830302d6539663431663734366365362e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2Fd001be67-21a7-9735-3800-e9f41f746ce6.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=0eafbce7a032da992721bd4156fd51ff" alt="種類設定" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/189829/d001be67-21a7-9735-3800-e9f41f746ce6.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2Fd001be67-21a7-9735-3800-e9f41f746ce6.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=47b473f1e020c41e484ad29e01a53f45 1x" loading="lazy"></a></p>

<p>APIの名前を指定します。今回は、<code>twiliosample</code>を入力しています。<br>
<a href="https://camo.qiitausercontent.com/9167264aa211f403f1d9ab7da7b0eb7be75cfad6/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3138393832392f30613535396464622d333338382d653035622d656466302d6164313538633738373938612e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2F0a559ddb-3388-e05b-edf0-ad158c78798a.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=f9e13c865f0985ce62c8e33a58dcd254" alt="ランタイム設定" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/189829/0a559ddb-3388-e05b-edf0-ad158c78798a.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2F0a559ddb-3388-e05b-edf0-ad158c78798a.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=53f479ee9797f20672db8f85127a0fa2 1x" loading="lazy"></a></p>

<p>namespaceを指定します。今回は、<code>masaya3.twilio</code>を入力しています。<br>
<a href="https://camo.qiitausercontent.com/933cc7c304d69547ad2b508d592a7de089f76ff8/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3138393832392f38366164363830342d643634312d333164332d386662312d3231616436633936616434372e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2F86ad6804-d641-31d3-8fb1-21ad6c96ad47.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=62ce9445354ae007b1aa664f8771dfc4" alt="namespace設定" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/189829/86ad6804-d641-31d3-8fb1-21ad6c96ad47.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2F86ad6804-d641-31d3-8fb1-21ad6c96ad47.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=8d89bf7f103e0272b10dd3650854a988 1x" loading="lazy"></a></p>

<p>関数の<a href="https://docs.microsoft.com/ja-jp/azure/azure-functions/functions-bindings-http-webhook-trigger?tabs=csharp" rel="nofollow noopener" target="_blank">アクセスの制約</a>を指定します。今回は、初期値である<code>Function</code>を選んでいます。<br>
<a href="https://camo.qiitausercontent.com/1f2b1b77c970d4619497f4abffcd079877cc4c29/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3138393832392f36336339313234332d313566392d623833612d363431382d3764343239653162353137382e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2F63c91243-15f9-b83a-6418-7d429e1b5178.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=ee5380b17ef782fe21ef2d3ba54214c0" alt="アクセス設定" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/189829/63c91243-15f9-b83a-6418-7d429e1b5178.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2F63c91243-15f9-b83a-6418-7d429e1b5178.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=34637663f5ad96a327270f7362b40263 1x" loading="lazy"></a></p>

<p>最後に、新しいウィンドウでプロジェクトを開くかを選びます。今回は、現在のウィンドウをそのまま使用しています。<br>
<a href="https://camo.qiitausercontent.com/1fe3bd0e91edd682d6cb88d535036627e7e8cece/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3138393832392f34643639666330622d343865342d356635382d396535362d3136343336373263393433612e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2F4d69fc0b-48e4-5f58-9e56-1643672c943a.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=2f0416c16e5ef10b4aae8c97fe541bbe" alt="状態設定" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/189829/4d69fc0b-48e4-5f58-9e56-1643672c943a.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2F4d69fc0b-48e4-5f58-9e56-1643672c943a.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=6481432e0998ab4f164d839be12337c3 1x" loading="lazy"></a></p>

<p>問題がなければ、Azure Functionsのプロジェクト作成されます。<br>
<a href="https://camo.qiitausercontent.com/f302becc7e77eeb039c9367773e85896acd0771e/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3138393832392f36653138633563322d613637662d636639362d326262372d3461313432623463383239372e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2F6e18c5c2-a67f-cf96-2bb7-4a142b4c8297.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=877516a80d14ec937c580ff62811b6b5" alt="完成" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/189829/6e18c5c2-a67f-cf96-2bb7-4a142b4c8297.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2F6e18c5c2-a67f-cf96-2bb7-4a142b4c8297.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=fd78b022e56f9126c5dd51cf2de3bb53 1x" loading="lazy"></a></p>

<h3>
<span id="動作検証" class="fragment"></span><a href="#%E5%8B%95%E4%BD%9C%E6%A4%9C%E8%A8%BC"><i class="fa fa-link"></i></a>動作検証</h3>

<p>作成したプロジェクトが動くか確認してみます。<br>
<code>F5</code>を押すことで、ビルドされ、問題がなければローカルのサーバが起動します。<br>
※ローカルで動かすには、<a href="https://github.com/Azure/azure-functions-core-tools" rel="nofollow noopener" target="_blank">Azure Functions Core Tools</a> が必要です。もしインストールされていない場合は、エラーがでるので、エラー内容にそって設定してください。</p>

<p>起動すると、TERMINALにローカルサーバのURLが表示されます。</p>

<div class="code-frame" data-lang="shell"><div class="highlight"><pre><code>twiliosample: <span class="o">[</span>GET,POST] http://localhost:7071/api/twiliosample
</code></pre></div></div>

<p>TERMINALに表示されているURLに<code>Ctrl</code>を押しながらクリックするか、URLをブラウザで入力しアクセスすると動きを見ることができます。</p>

<p><a href="https://camo.qiitausercontent.com/436c75dec2287448bff6b4006559363ea9fda117/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3138393832392f32383263353231632d396234312d353430392d663864662d6562626664653935616666642e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2F282c521c-9b41-5409-f8df-ebbfde95affd.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=5c4a0eba39a23358c0829ea19a66468a" alt="実行" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/189829/282c521c-9b41-5409-f8df-ebbfde95affd.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2F282c521c-9b41-5409-f8df-ebbfde95affd.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=29946236567797dc2898e56eaf5d6965 1x" loading="lazy"></a></p>

<p>正常に実行されると以下のような文字が表示されます。<br>
<a href="https://camo.qiitausercontent.com/bfdc2affa89668612bc4a42e27b851df569a73c2/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3138393832392f62383364663263372d303963652d393536332d343761372d3638376565333030623637302e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2Fb83df2c7-09ce-9563-47a7-687ee300b670.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=217f90e5b26bcdc86d28d5e62c1e0b00" alt="　実行完了" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/189829/b83df2c7-09ce-9563-47a7-687ee300b670.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2Fb83df2c7-09ce-9563-47a7-687ee300b670.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=e6fb2406fc6da7ef8c556a28e067fc74 1x" loading="lazy"></a></p>

<h3>
<span id="twilioのsdkをインストール" class="fragment"></span><a href="#twilio%E3%81%AEsdk%E3%82%92%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB"><i class="fa fa-link"></i></a>TwilioのSDKをインストール</h3>

<p>Azure Functionsのベースができましたので、次はTwilioのライブラリをインストールします。</p>

<p>使用するライブラリはこちら</p>

<p><qiita-embed-ogp src="https://www.nuget.org/packages/Microsoft.Azure.WebJobs.Extensions.Twilio"></qiita-embed-ogp></p>

<p>VSCodeで<code>F1</code>を押して、メニューから<code>Nuget:Open Nuget Gallery</code>を選択します。<br>
<a href="https://camo.qiitausercontent.com/bf751c2b8e18fcf8f4ccbd68b9faa9ffd10d2d04/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3138393832392f32313561336437662d633665622d326637352d356534632d3932663939663435656232632e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2F215a3d7f-c6eb-2f75-5e4c-92f99f45eb2c.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=27914d407d800a98e9c7f71843ad39eb" alt="拡張機能　" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/189829/215a3d7f-c6eb-2f75-5e4c-92f99f45eb2c.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2F215a3d7f-c6eb-2f75-5e4c-92f99f45eb2c.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=36fd4ee9b7421ee5db191c4386dc2395 1x" loading="lazy"></a></p>

<p>メニューから、<code>Microsoft.Azure.WebJobs.Extensions.Twilio</code>を探し、　右のプロジェクト名にチェックをつけて、「Install」をクリックしてインストールします。<br>
※Twilioだけだといっぱい検索に引っかかるので、<code>Microsoft Twilio</code>等で検索してみてください。<br>
<a href="https://camo.qiitausercontent.com/df509e9cf541b826c08c01d446e0cd7ee51633dc/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3138393832392f64356133396166632d396565642d643336622d393638662d3137333639373835663464652e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2Fd5a39afc-9eed-d36b-968f-17369785f4de.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=f6376a19069f1ca0bf1e40a17816a271" alt="拡張機能　" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/189829/d5a39afc-9eed-d36b-968f-17369785f4de.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2Fd5a39afc-9eed-d36b-968f-17369785f4de.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=2bff4b375f240e98cf5e9daf4cabfe85 1x" loading="lazy"></a></p>

<h2>
<span id="コードを書く" class="fragment"></span><a href="#%E3%82%B3%E3%83%BC%E3%83%89%E3%82%92%E6%9B%B8%E3%81%8F"><i class="fa fa-link"></i></a>コードを書く</h2>

<p>ライブラリもインストールできたので、実際のコードを記述していきます。</p>

<p>今回説明しているサンプルコードは<a href="https://github.com/tanaka3/twilio_azure_sample" rel="nofollow noopener" target="_blank">こちらで公開</a>しています。</p>

<h3>
<span id="twilioからの情報取得する" class="fragment"></span><a href="#twilio%E3%81%8B%E3%82%89%E3%81%AE%E6%83%85%E5%A0%B1%E5%8F%96%E5%BE%97%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>Twilioからの情報取得する</h3>

<p>API呼び出し時にTwilioから渡されるデータを取得します。<br>
以下は、電話番号を取得しています。</p>

<div class="code-frame" data-lang="csharp">
<div class="code-lang"><span class="bold">twiliosample.cs</span></div>
<div class="highlight"><pre><code><span class="kt">string</span> <span class="k">from</span> <span class="p">=</span> <span class="n">req</span><span class="p">.</span><span class="n">Form</span><span class="p">[</span><span class="s">"From"</span><span class="p">];</span>   
</code></pre></div>
</div>

<p>データは、<code>Form-Data</code>に格納されていますので、そこから必要となるデータを取得してください。</p>

<p>どのようなデータが取れるかは、以下のリファレンスを参照してください（これいつも忘れる・・）</p>

<p><qiita-embed-ogp src="https://jp.twilio.com/docs/voice/twiml#request-parameters"></qiita-embed-ogp></p>

<h3>
<span id="発話処理を書く" class="fragment"></span><a href="#%E7%99%BA%E8%A9%B1%E5%87%A6%E7%90%86%E3%82%92%E6%9B%B8%E3%81%8F"><i class="fa fa-link"></i></a>発話処理を書く</h3>

<p>電話の応答などは、<a href="https://jp.twilio.com/docs/voice/twiml" rel="nofollow noopener" target="_blank">TwiML</a>を使って記述します。<br>
直接、XMLを作っても良いですが、インストールしたTwilio SDKの<code>VoiceResponse</code>で簡単に作成することができます。</p>

<p>VoiceResponseのSayメソッドで、応答時に話すメッセージを文字が設定できます。<br>
今回は、発話のパラメータとして、日本語音声である<code>language: "ja-jp"</code>や、音声の種類の<code>voice: "alice"</code>を指定しています。<br>
発話で登録可能な各種パラメータは、以下のリファレンスを参照してください。</p>

<p><qiita-embed-ogp src="https://www.twilio.com/docs/voice/twiml/say"></qiita-embed-ogp></p>

<p><code>VoiceResponse.ToString()</code>でTwiMLが作成されます。<br>
このTwiMLをAPIの返り値として返します。</p>

<p>返り値の返却方法として、<code>ContentResult</code>を使用し、必ず<code>ContentType = "application/xml"</code>を指定します。<br>
これを指定しないとTwilio側で認識されません。</p>

<div class="code-frame" data-lang="csharp">
<div class="code-lang"><span class="bold">twiliosample.cs</span></div>
<div class="highlight"><pre><code><span class="kt">var</span> <span class="n">response</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">VoiceResponse</span><span class="p">();</span>
<span class="n">response</span><span class="p">.</span><span class="nf">Say</span><span class="p">(</span><span class="k">from</span> <span class="p">+</span> <span class="s">"から着信がありました。"</span><span class="p">,</span> <span class="n">language</span><span class="p">:</span> <span class="s">"ja-jp"</span><span class="p">,</span> <span class="n">voice</span><span class="p">:</span> <span class="s">"alice"</span><span class="p">);</span>

<span class="k">return</span> <span class="k">new</span> <span class="n">ContentResult</span><span class="p">{</span><span class="n">Content</span> <span class="p">=</span> <span class="n">response</span><span class="p">.</span><span class="nf">ToString</span><span class="p">(),</span> <span class="n">ContentType</span> <span class="p">=</span> <span class="s">"application/xml"</span><span class="p">};</span>
</code></pre></div>
</div>

<h4>
<span id="vocieについて" class="fragment"></span><a href="#vocie%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>vocieについて</h4>

<p>日本語のVoiceで使用できるパラメータは、<code>alice</code>、<code>Polly.Mizuki</code>、<code>Polly.Takumi</code>です。<br>
<code>man</code>と<code>woman</code>は指定できないため、<code>alice</code>と同じになってます。</p>

<p><qiita-embed-tweet src="https://twitter.com/masaya3/status/1404345884322648066"></qiita-embed-tweet></p>

<h4>
<span id="入力受付を書く" class="fragment"></span><a href="#%E5%85%A5%E5%8A%9B%E5%8F%97%E4%BB%98%E3%82%92%E6%9B%B8%E3%81%8F"><i class="fa fa-link"></i></a>入力受付を書く</h4>

<p>今回は動かしていませんが、ボタンによる入力方法もまとめます。<br>
ボタンの入力は、<code>Gather</code>を使用します。<br>
これを使用することで、よくある電話を使った入力を実現することができます。<br>
入力後は、<code>Action</code>パラメータで指定されたURLが呼び出されます。</p>

<p>詳しいパラメータは、以下のリファレンスを参照してください。</p>

<p><qiita-embed-ogp src="https://www.twilio.com/docs/voice/twiml/gather"></qiita-embed-ogp></p>

<p>タイムアウト後に、発話をさせたい場合は、Gather後に発話のSayを登録します。</p>

<div class="code-frame" data-lang="csharp">
<div class="code-lang"><span class="bold">twiliosample.cs</span></div>
<div class="highlight"><pre><code><span class="kt">var</span> <span class="n">digitsResponse</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">VoiceResponse</span><span class="p">();</span>
<span class="n">digitsResponse</span><span class="p">.</span><span class="nf">Gather</span><span class="p">(</span><span class="k">new</span> <span class="nf">Gather</span><span class="p">(</span><span class="n">numDigits</span><span class="p">:</span> <span class="err">入力桁数</span><span class="p">,</span> <span class="n">timeout</span><span class="p">:</span><span class="err">入力のタイムアウト時間</span><span class="p">,</span> <span class="n">action</span><span class="p">:</span><span class="s">"番号入力後の呼び出しURL"</span><span class="p">)</span>
                         <span class="p">.</span><span class="nf">Say</span><span class="p">(</span><span class="s">"ボタン入力を促すメッセージ"</span><span class="p">),</span> <span class="n">language</span><span class="p">:</span> <span class="s">"ja-jp"</span><span class="p">,</span> <span class="n">voice</span><span class="p">:</span> <span class="s">"alice"</span><span class="p">));</span>

<span class="n">digitsResponse</span><span class="p">.</span><span class="nf">Say</span><span class="p">(</span><span class="s">"タイムアウト後のメッセージ"</span><span class="p">,</span> <span class="n">language</span><span class="p">:</span> <span class="s">"ja-jp"</span><span class="p">,</span> <span class="n">voice</span><span class="p">:</span> <span class="s">"alice"</span><span class="p">);</span>

<span class="k">return</span> <span class="k">new</span> <span class="n">ContentResult</span><span class="p">{</span><span class="n">Content</span> <span class="p">=</span> <span class="n">digitsResponse</span><span class="p">.</span><span class="nf">ToString</span><span class="p">(),</span> <span class="n">ContentType</span> <span class="p">=</span> <span class="s">"application/xml"</span><span class="p">};</span>
</code></pre></div>
</div>

<h2>
<span id="ローカルで動作検証する" class="fragment"></span><a href="#%E3%83%AD%E3%83%BC%E3%82%AB%E3%83%AB%E3%81%A7%E5%8B%95%E4%BD%9C%E6%A4%9C%E8%A8%BC%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>ローカルで動作検証する　</h2>

<p>Azureに登録する前に、ローカル環境で動作を検証します。<br>
今回も<code>F5</code>を押して、ローカルサーバを起動します。</p>

<p><code>curl</code>などを使用(私はPostman)して、<code>form-data</code>に<code>From:+8109012345678</code>を入力して、<code>POST</code>します。</p>

<p>正常に動作すれば、戻り値として、「入力された電番番号ら着信がありました」というメッセージが入ったTwiMLが表示されます。<br>
<a href="https://camo.qiitausercontent.com/6f3bcd4c2803ad554f8bf535bfed8bd5698b4aa7/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3138393832392f30393066623930612d316139642d623433302d366332322d6139366438316330316239392e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2F090fb90a-1a9d-b430-6c22-a96d81c01b99.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=19ff747ea76cd800e1bd5043d800c19c" alt="実行結果" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/189829/090fb90a-1a9d-b430-6c22-a96d81c01b99.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2F090fb90a-1a9d-b430-6c22-a96d81c01b99.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=a6cae8641eba9b1816859396562fa051 1x" loading="lazy"></a></p>

<h2>
<span id="azure-functionsにデプロイする" class="fragment"></span><a href="#azure-functions%E3%81%AB%E3%83%87%E3%83%97%E3%83%AD%E3%82%A4%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>Azure Functionsにデプロイする</h2>

<p>ローカルで動きが確認できたら、Azureに登録します。<br>
VSCodeからAzureへサインインが必要となりますが、サインイン方法は、<a href="https://news.yahoo.co.jp/articles/33a9a29ddd8262b1c94963ed37f796ed6961f4fc" rel="nofollow noopener" target="_blank">こちら</a>を参照ください</p>

<p>まずは、Azureタブを開き、FUNCTIONSから以下のマークをクリックします。<br>
<a href="https://camo.qiitausercontent.com/81c035776afdf09bfc4cfa74fb3e9b033f8b7d7c/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3138393832392f65363566663036612d353166382d636337352d643430342d3432323034613163313434312e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2Fe65ff06a-51f8-cc75-d404-42204a1c1441.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=9947dbeeab0cd6bf65e9dc130137bc35" alt="image.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/189829/e65ff06a-51f8-cc75-d404-42204a1c1441.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2Fe65ff06a-51f8-cc75-d404-42204a1c1441.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=ed683df6da64a78b7751a4cafd57b45d 1x" loading="lazy"></a></p>

<p>登録先として、ここではすでに作成済みの関数アプリ（higedaruma）を指定しています。<br>
関数アプリから作成する場合は、こちらの<a href="https://news.yahoo.co.jp/articles/33a9a29ddd8262b1c94963ed37f796ed6961f4fc" rel="nofollow noopener" target="_blank">記事</a>を参照ください<br>
<a href="https://camo.qiitausercontent.com/abc35e6b63d73f98c98d5912da5527e2c2ab00b0/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3138393832392f31646635313638342d653866372d656163382d373435302d6132643933363465613638312e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2F1df51684-e8f7-eac8-7450-a2d9364ea681.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=9f38eed142765c92211fc87cebd8a5e2" alt="image.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/189829/1df51684-e8f7-eac8-7450-a2d9364ea681.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2F1df51684-e8f7-eac8-7450-a2d9364ea681.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=ee6690aa7c54c70362856061330cc5d3 1x" loading="lazy"></a></p>

<p>問題なければ「Deploy」ボタンをクリックします。<br>
<a href="https://camo.qiitausercontent.com/a9d052302b14ebfcdfd940a23dd5fc467a1b9673/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3138393832392f66356161633638382d363930622d393262652d646331372d3966643164636262373733302e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2Ff5aac688-690b-92be-dc17-9fd1dcbb7730.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=764365c9ea0bb18bf55aa2dd1cd030ff" alt="image.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/189829/f5aac688-690b-92be-dc17-9fd1dcbb7730.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2Ff5aac688-690b-92be-dc17-9fd1dcbb7730.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=cdb3cce64ec17117985c92aa36a1ae0b 1x" loading="lazy"></a></p>

<p>デプロイが成功すれば、Azureの関数アプリに<code>twiliosample</code>が追加されます。<br>
<a href="https://camo.qiitausercontent.com/f787707c5593c493b872dc068a2f411d290b48c3/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3138393832392f31333562373166362d666437392d633235302d653331622d6237393139633330653239642e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2F135b71f6-fd79-c250-e31b-b7919c30e29d.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=ee2578fb340233dc7501ccf6b604e225" alt="image.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/189829/135b71f6-fd79-c250-e31b-b7919c30e29d.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2F135b71f6-fd79-c250-e31b-b7919c30e29d.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=cee1d4fe273872629a46390869728a83 1x" loading="lazy"></a></p>

<h3>
<span id="動きを確認する" class="fragment"></span><a href="#%E5%8B%95%E3%81%8D%E3%82%92%E7%A2%BA%E8%AA%8D%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>動きを確認する</h3>

<p>関数からtwiliosampleを開き、「コードとテスト」を選択、「テストと実行」をクリックすると、入出力の確認が確認ができます。<br>
事前に動きを見てると、問題が発生したときの切り分けがしやすくなので一度は動作確認をしましょう。<br>
<a href="https://camo.qiitausercontent.com/24dba594468d3233ffaed6cf4f4cf07dad367dfe/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3138393832392f35633464326661352d363964382d376363302d323537642d6431393565376466643430622e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2F5c4d2fa5-69d8-7cc0-257d-d195e7dfd40b.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=b24788d0f2889fef4860b9c12eb3a770" alt="image.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/189829/5c4d2fa5-69d8-7cc0-257d-d195e7dfd40b.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2F5c4d2fa5-69d8-7cc0-257d-d195e7dfd40b.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=96726d4b07ed520622fa868c404142ff 1x" loading="lazy"></a></p>

<h2>
<span id="twilioに登録する" class="fragment"></span><a href="#twilio%E3%81%AB%E7%99%BB%E9%8C%B2%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>Twilioに登録する</h2>

<p>Azureに登録した関数アプリをTwilioに登録します。</p>

<p>Azure Functionsのtwiliosampleから、<code>関数のURLの取得</code>を選択し、APIのURLを取得します。<br>
<a href="https://camo.qiitausercontent.com/259a08dd9054bc0de66b8425a217554a7312df4b/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3138393832392f61343535303531312d633230372d663362312d656661332d3735626439396635613939622e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2Fa4550511-c207-f3b1-efa3-75bd99f5a99b.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=e3a6761c937468885e6d18adbb84e776" alt="image.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/189829/a4550511-c207-f3b1-efa3-75bd99f5a99b.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2Fa4550511-c207-f3b1-efa3-75bd99f5a99b.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=7ea3d96ff559df9457a9113ce38373d9 1x" loading="lazy"></a></p>

<p>Twilioの<code>Webhook</code>に先ほどコピーしたURLを登録します。<br>
あとは、電話番号に電話をすれば動作を確認できます。<br>
<a href="https://camo.qiitausercontent.com/91f09f81f764c0b73a475b20dbdaa409ad03b27b/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3138393832392f63366236333061372d663430392d643331332d393066312d3331326339393630313065612e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2Fc6b630a7-f409-d313-90f1-312c996010ea.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=d8bb5bf0cab8715c90a894d6fbbe9b42" alt="image.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/189829/c6b630a7-f409-d313-90f1-312c996010ea.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2Fc6b630a7-f409-d313-90f1-312c996010ea.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=e83b5faa4860b67d6c7e17201a323a95 1x" loading="lazy"></a></p>

<h1>
<span id="まとめ" class="fragment"></span><a href="#%E3%81%BE%E3%81%A8%E3%82%81"><i class="fa fa-link"></i></a>まとめ</h1>

<p>半年ぐらいすると、この流れを忘れそうだったので、メモとして作成しました。<br>
サーバを意識せず、デバッグ含めてローカルでできるのはかなり便利です。</p>
</div></div></section><div class="css-1yzj1fm"><div class="css-1uv1qiv"><span class="fa fa-twitter"></span></div><div class="css-1uv1qiv"><span class="fa fa-facebook"></span></div></div><div class="apm-Content"><div class="apm-Content_title">Why not register and get more from Qiita?</div><ol class="apm-Content_list"><li>We will deliver articles that match you<div class="description">By following users and tags, you can catch up information on technical fields that you are interested in as a whole</div></li><li>you can read useful information later efficiently<div class="description">By &quot;stocking&quot; the articles you like, you can search right away</div></li><div><a class="apm-Content_help" href="https://help.qiita.com/ja/articles/qiita-login-user" target="_blank"><i class="fa fa-fw fa-arrow-circle-right"></i>What you can do with signing up</a></div></ol><a href="/signup?callback_action=login_or_signup&amp;redirect_to=%2Fmasaya3%2Fitems%2F429c12c2c742b5fc07f5&amp;realm=qiita" class="apm-Content_button apm-Content_button-signup">Sign up</a><a href="/login?callback_action=login_or_signup&amp;redirect_to=%2Fmasaya3%2Fitems%2F429c12c2c742b5fc07f5&amp;realm=qiita" class="apm-Content_button apm-Content_button-signin">Login</a></div></div><div class="css-helsa7"></div></div></div></div><div class="css-109dbrr"><div class="css-5jpx49"><div class="css-mnxgyc"><button class=" css-1vlpknv"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/masaya3/items/429c12c2c742b5fc07f5/likers" class="css-1iupg5d">4</a></div><div class="css-fsjkhv"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-1b17vb0">3</span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-7i7f4d"><div class="css-1gj7nt">Improve article</div><a href="/drafts/429c12c2c742b5fc07f5/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/masaya3/items/429c12c2c742b5fc07f5/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/masaya3/items/429c12c2c742b5fc07f5/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/masaya3/items/429c12c2c742b5fc07f5/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/masaya3/items/429c12c2c742b5fc07f5.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="PersonalArticlePage" data-dom-id="PersonalArticlePage-react-component-c722ba85-624a-43b4-b2c1-100cdbb64ac3">{"authorAnalyticsTrackingId":null,"organizationAnalyticsTrackingId":null}</script>
      
<footer id="globalFooter" class="st-Footer"><div class="st-Footer_container"><div class="st-Footer_start"><div class="st-Footer_logo"><svg viewbox="0 0 426.57 130" xmlns="http://www.w3.org/2000/svg"><circle cx="167.08" cy="21.4" r="12.28" /><path d="M250.81 29.66h23.48v18.9h-23.48z" /><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z" /><circle cx="216.33" cy="21.4" r="12.28" /></svg></div><div class="st-Footer_catchcopy">How developers code is here.</div><div class="st-Footer_socials"><a class="fa fa-twitter" href="https://twitter.com/qiita"></a><a class="fa fa-facebook-square" href="https://www.facebook.com/qiita/"></a></div></div><div class="st-Footer_end"><div class="st-Footer_qiita"><div class="st-Footer_label">Qiita</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="/about">About</a><a href="/terms">Terms</a><a href="/privacy">Privacy</a><a target="_blank" href="http://help.qiita.com/ja/articles/qiita-community-guideline">Guideline</a><a target="_blank" href="https://help.qiita.com/ja/articles/others-brand-guideline">Design Guideline</a></div><div class="st-Footer_column"><a href="/release-notes">Release</a><a href="/api/v2/docs">API</a><a href="/feedback/new">ご意見</a><a href="https://help.qiita.com">Help</a><a target="_blank" href="https://qiita.com/ads?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Advertisement</a></div></div></div><div class="st-Footer_increments"><div class="st-Footer_label">Increments</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="https://increments.co.jp/company/">About</a><a href="https://increments.co.jp/jobs/">採用情報</a><a href="https://blog.qiita.com">Blog</a></div><div class="st-Footer_column"><a href="https://teams.qiita.com/">Qiita Team</a><a href="https://jobs.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Jobs</a><a href="https://zine.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Zine</a></div></div></div></div></div><div class="st-Footer_copyright">© 2011-2021 Increments Inc.</div></footer><div id="Snackbar-react-component-18a8d272-8b4e-4dcc-9ca6-7817ff3ed8d5"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="Snackbar" data-dom-id="Snackbar-react-component-18a8d272-8b4e-4dcc-9ca6-7817ff3ed8d5">{}</script>
      
<div id="LoginModal-react-component-0a5a92f3-b2bb-4ae8-acbd-6b45a23ca5fa"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="LoginModal" data-dom-id="LoginModal-react-component-0a5a92f3-b2bb-4ae8-acbd-6b45a23ca5fa">{}</script>
      
<div id="StockModal-react-component-cae7c6c0-eee2-44b8-9fb9-2d4aa65616ef"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="StockModal" data-dom-id="StockModal-react-component-cae7c6c0-eee2-44b8-9fb9-2d4aa65616ef">{}</script>
      
</div><div id="dataContainer" style="display: none;" data-config="{&quot;actionPath&quot;:&quot;public/items#show&quot;,&quot;settings&quot;:{&quot;analyticsTrackingId&quot;:&quot;UA-24675221-12&quot;,&quot;assetsMap&quot;:{},&quot;csrfToken&quot;:&quot;yX3De13uozFLNaM73acnXg9VGQbiERiG+NF7DqruzDqvRgtt4bPjcNaFioD0FlAbNU4gkulQvECTLdhJrPoEzA==&quot;,&quot;locale&quot;:&quot;en&quot;},&quot;currentUser&quot;:null}" /></body></html><script type="application/json" data-js-react-on-rails-store="AppStoreWithReactOnRails">{"snackbar":{"type":"","body":"","isActive":false},"article":{"article":{"body":"\u003cp\u003e\u003ccode\u003eTwilio\u003c/code\u003eを\u003ccode\u003eAzure Functions\u003c/code\u003eと\u003ccode\u003eC#\u003c/code\u003eで、使用するためのまとめです。\u003cbr\u003e\n備忘録的な内容なので細かな部分において、説明が雑なところがありますがご了承ください。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"事前準備について\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E4%BA%8B%E5%89%8D%E6%BA%96%E5%82%99%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e事前準備について\u003c/h1\u003e\n\n\u003cp\u003eTwilioやAzureのアカウント登録、VSCodeの拡張機能のインストール方法はここでご説明致しませんのでQiita等でお調べください。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"https://qiita.com/mobilebiz/items/932eb21ff6ed36f524d8\" id=\"reference-494cc20b44d95d569e35\"\u003eTwilioアカウント\u003c/a\u003e　\u003cbr\u003e\u003ca href=\"/mobilebiz\" class=\"user-mention js-hovercard\" title=\"mobilebiz\" data-hovercard-target-type=\"user\" data-hovercard-target-name=\"mobilebiz\"\u003e@mobilebiz\u003c/a\u003eさんをフォローするといろいろ情報が集まると思います。\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://docs.microsoft.com/ja-jp/learn/modules/create-an-azure-account/\" rel=\"nofollow noopener\" target=\"_blank\"\u003eAzureアカウント\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"https://azure.microsoft.com/ja-jp/products/visual-studio-code/\" rel=\"nofollow noopener\" target=\"_blank\"\u003eVisual Studio Code\u003c/a\u003e　\u003cbr\u003e開発環境（VS2019でもいいですが、私の環境がmacなので・・）\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"https://docs.microsoft.com/ja-jp/azure/developer/javascript/tutorial/vscode-function-app-http-trigger/tutorial-vscode-serverless-node-install?tabs=bash\" rel=\"nofollow noopener\" target=\"_blank\"\u003eAzure Functions拡張機能\u003c/a\u003e　\u003cbr\u003e\nAzure Functionsとの連動などで使用します。\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"https://github.com/Azure/azure-functions-core-tools\" rel=\"nofollow noopener\" target=\"_blank\"\u003eAzure Functions Core Tools\u003c/a\u003e \u003cbr\u003e\nローカルの実行で使用します。\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"https://zenn.dev/midoliy/articles/9e3cff958ff89ba151de#%F0%9F%94%B5nuget-package-manager-(optional)\" rel=\"nofollow noopener\" target=\"_blank\"\u003eNuget拡張機能\u003c/a\u003e \u003cbr\u003e\n私はNuGet Gallery使ってます。\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"https://zenn.dev/midoliy/articles/9e3cff958ff89ba151de\" rel=\"nofollow noopener\" target=\"_blank\"\u003eその他の拡張機能\u003c/a\u003e \u003cbr\u003e\nいろいろ開発に便利なものがあるのでお好みで。\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"手順\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%89%8B%E9%A0%86\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e手順\u003c/h1\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"azure-functionsのプロジェクトを作成する\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#azure-functions%E3%81%AE%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eAzure Functionsのプロジェクトを作成する\u003c/h2\u003e\n\n\u003cp\u003eAzure Functionsの拡張機能を使用して、Azure Functionsのプロジェクトを作成します。\u003c/p\u003e\n\n\u003cp\u003eまずはAzureのタブを選び、稲妻マークをクリックします。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/e2b586315ea3275a0bb68d4c6629b9aa2b8eec37/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3138393832392f37663638616365622d366636332d646230392d393539652d6462663630366336373563302e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2F7f68aceb-6f63-db09-959e-dbf606c675c0.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=afbb63b8bde27396d1cc3a47d75215cb\" alt=\"プロジェクト作成\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/189829/7f68aceb-6f63-db09-959e-dbf606c675c0.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2F7f68aceb-6f63-db09-959e-dbf606c675c0.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=96dcf74127ff504355ff6ef3f6a3876e 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e「Create new project」を選択し、保存先のパスを指定します。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/7a9f82e871e86fb796c93c5012b73c332d95c3f9/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3138393832392f30373461613836352d343434362d353832612d353764392d3266663565376466633335392e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2F074aa865-4446-582a-57d9-2ff5e7dfc359.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=9a49b0ec0e2771104d0c1ec943bd4c8d\" alt=\"プロジェクト作成\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/189829/074aa865-4446-582a-57d9-2ff5e7dfc359.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2F074aa865-4446-582a-57d9-2ff5e7dfc359.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=f5262d0477bcbf48feb021b62378ffb4 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eプロジェクトの設定を行います。今回は\u003ccode\u003eC#\u003c/code\u003eを使用したいので、\u003ccode\u003eC#\u003c/code\u003eを選びます。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/0a5e5b3f3fc7abf6f625dc10b29f1c264efe89ba/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3138393832392f33306134323739322d373330322d646333612d616261342d6432623333333364616663352e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2F30a42792-7302-dc3a-aba4-d2b3333dafc5.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=2a41b6f7f7e380c5a5d23895d66138fa\" alt=\"言語設定\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/189829/30a42792-7302-dc3a-aba4-d2b3333dafc5.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2F30a42792-7302-dc3a-aba4-d2b3333dafc5.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=83343fd0695e431cd85657ca4b8971b4 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003ccode\u003eC#\u003c/code\u003eのランタイムをしています。今回は、\u003ccode\u003e.NET Core 3 LTS\u003c/code\u003eを選んでいます。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/d5a4e1bb4264f7a0976c5de079a174ac19a79fea/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3138393832392f35303761326336642d333062312d333638392d613938302d6130666239356330353536372e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2F507a2c6d-30b1-3689-a980-a0fb95c05567.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=f30edddb2e0f76727126f021aa0b2a34\" alt=\"言語設定\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/189829/507a2c6d-30b1-3689-a980-a0fb95c05567.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2F507a2c6d-30b1-3689-a980-a0fb95c05567.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=ad299988d6ce05552f2344326cae241f 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eTwilioから　呼び出してもらうため、\u003ccode\u003eHTTP trigger\u003c/code\u003eを選びます。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/c2a68fe20a62a2a0090044fdb894c6dcb02cc2f4/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3138393832392f64303031626536372d323161372d393733352d333830302d6539663431663734366365362e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2Fd001be67-21a7-9735-3800-e9f41f746ce6.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=0eafbce7a032da992721bd4156fd51ff\" alt=\"種類設定\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/189829/d001be67-21a7-9735-3800-e9f41f746ce6.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2Fd001be67-21a7-9735-3800-e9f41f746ce6.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=47b473f1e020c41e484ad29e01a53f45 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eAPIの名前を指定します。今回は、\u003ccode\u003etwiliosample\u003c/code\u003eを入力しています。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/9167264aa211f403f1d9ab7da7b0eb7be75cfad6/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3138393832392f30613535396464622d333338382d653035622d656466302d6164313538633738373938612e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2F0a559ddb-3388-e05b-edf0-ad158c78798a.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=f9e13c865f0985ce62c8e33a58dcd254\" alt=\"ランタイム設定\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/189829/0a559ddb-3388-e05b-edf0-ad158c78798a.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2F0a559ddb-3388-e05b-edf0-ad158c78798a.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=53f479ee9797f20672db8f85127a0fa2 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003enamespaceを指定します。今回は、\u003ccode\u003emasaya3.twilio\u003c/code\u003eを入力しています。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/933cc7c304d69547ad2b508d592a7de089f76ff8/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3138393832392f38366164363830342d643634312d333164332d386662312d3231616436633936616434372e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2F86ad6804-d641-31d3-8fb1-21ad6c96ad47.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=62ce9445354ae007b1aa664f8771dfc4\" alt=\"namespace設定\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/189829/86ad6804-d641-31d3-8fb1-21ad6c96ad47.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2F86ad6804-d641-31d3-8fb1-21ad6c96ad47.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=8d89bf7f103e0272b10dd3650854a988 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e関数の\u003ca href=\"https://docs.microsoft.com/ja-jp/azure/azure-functions/functions-bindings-http-webhook-trigger?tabs=csharp\" rel=\"nofollow noopener\" target=\"_blank\"\u003eアクセスの制約\u003c/a\u003eを指定します。今回は、初期値である\u003ccode\u003eFunction\u003c/code\u003eを選んでいます。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/1f2b1b77c970d4619497f4abffcd079877cc4c29/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3138393832392f36336339313234332d313566392d623833612d363431382d3764343239653162353137382e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2F63c91243-15f9-b83a-6418-7d429e1b5178.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=ee5380b17ef782fe21ef2d3ba54214c0\" alt=\"アクセス設定\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/189829/63c91243-15f9-b83a-6418-7d429e1b5178.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2F63c91243-15f9-b83a-6418-7d429e1b5178.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=34637663f5ad96a327270f7362b40263 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e最後に、新しいウィンドウでプロジェクトを開くかを選びます。今回は、現在のウィンドウをそのまま使用しています。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/1fe3bd0e91edd682d6cb88d535036627e7e8cece/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3138393832392f34643639666330622d343865342d356635382d396535362d3136343336373263393433612e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2F4d69fc0b-48e4-5f58-9e56-1643672c943a.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=2f0416c16e5ef10b4aae8c97fe541bbe\" alt=\"状態設定\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/189829/4d69fc0b-48e4-5f58-9e56-1643672c943a.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2F4d69fc0b-48e4-5f58-9e56-1643672c943a.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=6481432e0998ab4f164d839be12337c3 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e問題がなければ、Azure Functionsのプロジェクト作成されます。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/f302becc7e77eeb039c9367773e85896acd0771e/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3138393832392f36653138633563322d613637662d636639362d326262372d3461313432623463383239372e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2F6e18c5c2-a67f-cf96-2bb7-4a142b4c8297.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=877516a80d14ec937c580ff62811b6b5\" alt=\"完成\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/189829/6e18c5c2-a67f-cf96-2bb7-4a142b4c8297.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2F6e18c5c2-a67f-cf96-2bb7-4a142b4c8297.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=fd78b022e56f9126c5dd51cf2de3bb53 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"動作検証\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%8B%95%E4%BD%9C%E6%A4%9C%E8%A8%BC\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e動作検証\u003c/h3\u003e\n\n\u003cp\u003e作成したプロジェクトが動くか確認してみます。\u003cbr\u003e\n\u003ccode\u003eF5\u003c/code\u003eを押すことで、ビルドされ、問題がなければローカルのサーバが起動します。\u003cbr\u003e\n※ローカルで動かすには、\u003ca href=\"https://github.com/Azure/azure-functions-core-tools\" rel=\"nofollow noopener\" target=\"_blank\"\u003eAzure Functions Core Tools\u003c/a\u003e が必要です。もしインストールされていない場合は、エラーがでるので、エラー内容にそって設定してください。\u003c/p\u003e\n\n\u003cp\u003e起動すると、TERMINALにローカルサーバのURLが表示されます。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"shell\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003etwiliosample: \u003cspan class=\"o\"\u003e[\u003c/span\u003eGET,POST] http://localhost:7071/api/twiliosample\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eTERMINALに表示されているURLに\u003ccode\u003eCtrl\u003c/code\u003eを押しながらクリックするか、URLをブラウザで入力しアクセスすると動きを見ることができます。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/436c75dec2287448bff6b4006559363ea9fda117/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3138393832392f32383263353231632d396234312d353430392d663864662d6562626664653935616666642e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2F282c521c-9b41-5409-f8df-ebbfde95affd.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=5c4a0eba39a23358c0829ea19a66468a\" alt=\"実行\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/189829/282c521c-9b41-5409-f8df-ebbfde95affd.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2F282c521c-9b41-5409-f8df-ebbfde95affd.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=29946236567797dc2898e56eaf5d6965 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e正常に実行されると以下のような文字が表示されます。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/bfdc2affa89668612bc4a42e27b851df569a73c2/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3138393832392f62383364663263372d303963652d393536332d343761372d3638376565333030623637302e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2Fb83df2c7-09ce-9563-47a7-687ee300b670.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=217f90e5b26bcdc86d28d5e62c1e0b00\" alt=\"　実行完了\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/189829/b83df2c7-09ce-9563-47a7-687ee300b670.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2Fb83df2c7-09ce-9563-47a7-687ee300b670.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=e6fb2406fc6da7ef8c556a28e067fc74 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"twilioのsdkをインストール\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#twilio%E3%81%AEsdk%E3%82%92%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eTwilioのSDKをインストール\u003c/h3\u003e\n\n\u003cp\u003eAzure Functionsのベースができましたので、次はTwilioのライブラリをインストールします。\u003c/p\u003e\n\n\u003cp\u003e使用するライブラリはこちら\u003c/p\u003e\n\n\u003cp\u003e\u003cqiita-embed-ogp src=\"https://www.nuget.org/packages/Microsoft.Azure.WebJobs.Extensions.Twilio\"\u003e\u003c/qiita-embed-ogp\u003e\u003c/p\u003e\n\n\u003cp\u003eVSCodeで\u003ccode\u003eF1\u003c/code\u003eを押して、メニューから\u003ccode\u003eNuget:Open Nuget Gallery\u003c/code\u003eを選択します。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/bf751c2b8e18fcf8f4ccbd68b9faa9ffd10d2d04/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3138393832392f32313561336437662d633665622d326637352d356534632d3932663939663435656232632e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2F215a3d7f-c6eb-2f75-5e4c-92f99f45eb2c.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=27914d407d800a98e9c7f71843ad39eb\" alt=\"拡張機能　\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/189829/215a3d7f-c6eb-2f75-5e4c-92f99f45eb2c.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2F215a3d7f-c6eb-2f75-5e4c-92f99f45eb2c.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=36fd4ee9b7421ee5db191c4386dc2395 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eメニューから、\u003ccode\u003eMicrosoft.Azure.WebJobs.Extensions.Twilio\u003c/code\u003eを探し、　右のプロジェクト名にチェックをつけて、「Install」をクリックしてインストールします。\u003cbr\u003e\n※Twilioだけだといっぱい検索に引っかかるので、\u003ccode\u003eMicrosoft Twilio\u003c/code\u003e等で検索してみてください。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/df509e9cf541b826c08c01d446e0cd7ee51633dc/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3138393832392f64356133396166632d396565642d643336622d393638662d3137333639373835663464652e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2Fd5a39afc-9eed-d36b-968f-17369785f4de.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=f6376a19069f1ca0bf1e40a17816a271\" alt=\"拡張機能　\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/189829/d5a39afc-9eed-d36b-968f-17369785f4de.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2Fd5a39afc-9eed-d36b-968f-17369785f4de.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=2bff4b375f240e98cf5e9daf4cabfe85 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"コードを書く\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%B3%E3%83%BC%E3%83%89%E3%82%92%E6%9B%B8%E3%81%8F\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eコードを書く\u003c/h2\u003e\n\n\u003cp\u003eライブラリもインストールできたので、実際のコードを記述していきます。\u003c/p\u003e\n\n\u003cp\u003e今回説明しているサンプルコードは\u003ca href=\"https://github.com/tanaka3/twilio_azure_sample\" rel=\"nofollow noopener\" target=\"_blank\"\u003eこちらで公開\u003c/a\u003eしています。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"twilioからの情報取得する\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#twilio%E3%81%8B%E3%82%89%E3%81%AE%E6%83%85%E5%A0%B1%E5%8F%96%E5%BE%97%E3%81%99%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eTwilioからの情報取得する\u003c/h3\u003e\n\n\u003cp\u003eAPI呼び出し時にTwilioから渡されるデータを取得します。\u003cbr\u003e\n以下は、電話番号を取得しています。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003etwiliosample.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"k\"\u003efrom\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ereq\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eForm\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s\"\u003e\"From\"\u003c/span\u003e\u003cspan class=\"p\"\u003e];\u003c/span\u003e   \n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003eデータは、\u003ccode\u003eForm-Data\u003c/code\u003eに格納されていますので、そこから必要となるデータを取得してください。\u003c/p\u003e\n\n\u003cp\u003eどのようなデータが取れるかは、以下のリファレンスを参照してください（これいつも忘れる・・）\u003c/p\u003e\n\n\u003cp\u003e\u003cqiita-embed-ogp src=\"https://jp.twilio.com/docs/voice/twiml#request-parameters\"\u003e\u003c/qiita-embed-ogp\u003e\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"発話処理を書く\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E7%99%BA%E8%A9%B1%E5%87%A6%E7%90%86%E3%82%92%E6%9B%B8%E3%81%8F\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e発話処理を書く\u003c/h3\u003e\n\n\u003cp\u003e電話の応答などは、\u003ca href=\"https://jp.twilio.com/docs/voice/twiml\" rel=\"nofollow noopener\" target=\"_blank\"\u003eTwiML\u003c/a\u003eを使って記述します。\u003cbr\u003e\n直接、XMLを作っても良いですが、インストールしたTwilio SDKの\u003ccode\u003eVoiceResponse\u003c/code\u003eで簡単に作成することができます。\u003c/p\u003e\n\n\u003cp\u003eVoiceResponseのSayメソッドで、応答時に話すメッセージを文字が設定できます。\u003cbr\u003e\n今回は、発話のパラメータとして、日本語音声である\u003ccode\u003elanguage: \"ja-jp\"\u003c/code\u003eや、音声の種類の\u003ccode\u003evoice: \"alice\"\u003c/code\u003eを指定しています。\u003cbr\u003e\n発話で登録可能な各種パラメータは、以下のリファレンスを参照してください。\u003c/p\u003e\n\n\u003cp\u003e\u003cqiita-embed-ogp src=\"https://www.twilio.com/docs/voice/twiml/say\"\u003e\u003c/qiita-embed-ogp\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003ccode\u003eVoiceResponse.ToString()\u003c/code\u003eでTwiMLが作成されます。\u003cbr\u003e\nこのTwiMLをAPIの返り値として返します。\u003c/p\u003e\n\n\u003cp\u003e返り値の返却方法として、\u003ccode\u003eContentResult\u003c/code\u003eを使用し、必ず\u003ccode\u003eContentType = \"application/xml\"\u003c/code\u003eを指定します。\u003cbr\u003e\nこれを指定しないとTwilio側で認識されません。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003etwiliosample.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eresponse\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eVoiceResponse\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\u003cspan class=\"n\"\u003eresponse\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSay\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003efrom\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"s\"\u003e\"から着信がありました。\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003elanguage\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"s\"\u003e\"ja-jp\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003evoice\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"s\"\u003e\"alice\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eContentResult\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003eContent\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eresponse\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eToString\u003c/span\u003e\u003cspan class=\"p\"\u003e(),\u003c/span\u003e \u003cspan class=\"n\"\u003eContentType\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"application/xml\"\u003c/span\u003e\u003cspan class=\"p\"\u003e};\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"vocieについて\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#vocie%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003evocieについて\u003c/h4\u003e\n\n\u003cp\u003e日本語のVoiceで使用できるパラメータは、\u003ccode\u003ealice\u003c/code\u003e、\u003ccode\u003ePolly.Mizuki\u003c/code\u003e、\u003ccode\u003ePolly.Takumi\u003c/code\u003eです。\u003cbr\u003e\n\u003ccode\u003eman\u003c/code\u003eと\u003ccode\u003ewoman\u003c/code\u003eは指定できないため、\u003ccode\u003ealice\u003c/code\u003eと同じになってます。\u003c/p\u003e\n\n\u003cp\u003e\u003cqiita-embed-tweet src=\"https://twitter.com/masaya3/status/1404345884322648066\"\u003e\u003c/qiita-embed-tweet\u003e\u003c/p\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"入力受付を書く\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%85%A5%E5%8A%9B%E5%8F%97%E4%BB%98%E3%82%92%E6%9B%B8%E3%81%8F\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e入力受付を書く\u003c/h4\u003e\n\n\u003cp\u003e今回は動かしていませんが、ボタンによる入力方法もまとめます。\u003cbr\u003e\nボタンの入力は、\u003ccode\u003eGather\u003c/code\u003eを使用します。\u003cbr\u003e\nこれを使用することで、よくある電話を使った入力を実現することができます。\u003cbr\u003e\n入力後は、\u003ccode\u003eAction\u003c/code\u003eパラメータで指定されたURLが呼び出されます。\u003c/p\u003e\n\n\u003cp\u003e詳しいパラメータは、以下のリファレンスを参照してください。\u003c/p\u003e\n\n\u003cp\u003e\u003cqiita-embed-ogp src=\"https://www.twilio.com/docs/voice/twiml/gather\"\u003e\u003c/qiita-embed-ogp\u003e\u003c/p\u003e\n\n\u003cp\u003eタイムアウト後に、発話をさせたい場合は、Gather後に発話のSayを登録します。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003etwiliosample.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003edigitsResponse\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eVoiceResponse\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\u003cspan class=\"n\"\u003edigitsResponse\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eGather\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eGather\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003enumDigits\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"err\"\u003e入力桁数\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003etimeout\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"err\"\u003e入力のタイムアウト時間\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eaction\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"s\"\u003e\"番号入力後の呼び出しURL\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n                         \u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSay\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"ボタン入力を促すメッセージ\"\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"n\"\u003elanguage\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"s\"\u003e\"ja-jp\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003evoice\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"s\"\u003e\"alice\"\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n\n\u003cspan class=\"n\"\u003edigitsResponse\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSay\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"タイムアウト後のメッセージ\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003elanguage\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"s\"\u003e\"ja-jp\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003evoice\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"s\"\u003e\"alice\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eContentResult\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003eContent\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003edigitsResponse\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eToString\u003c/span\u003e\u003cspan class=\"p\"\u003e(),\u003c/span\u003e \u003cspan class=\"n\"\u003eContentType\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"application/xml\"\u003c/span\u003e\u003cspan class=\"p\"\u003e};\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"ローカルで動作検証する\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%AD%E3%83%BC%E3%82%AB%E3%83%AB%E3%81%A7%E5%8B%95%E4%BD%9C%E6%A4%9C%E8%A8%BC%E3%81%99%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eローカルで動作検証する　\u003c/h2\u003e\n\n\u003cp\u003eAzureに登録する前に、ローカル環境で動作を検証します。\u003cbr\u003e\n今回も\u003ccode\u003eF5\u003c/code\u003eを押して、ローカルサーバを起動します。\u003c/p\u003e\n\n\u003cp\u003e\u003ccode\u003ecurl\u003c/code\u003eなどを使用(私はPostman)して、\u003ccode\u003eform-data\u003c/code\u003eに\u003ccode\u003eFrom:+8109012345678\u003c/code\u003eを入力して、\u003ccode\u003ePOST\u003c/code\u003eします。\u003c/p\u003e\n\n\u003cp\u003e正常に動作すれば、戻り値として、「入力された電番番号ら着信がありました」というメッセージが入ったTwiMLが表示されます。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/6f3bcd4c2803ad554f8bf535bfed8bd5698b4aa7/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3138393832392f30393066623930612d316139642d623433302d366332322d6139366438316330316239392e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2F090fb90a-1a9d-b430-6c22-a96d81c01b99.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=19ff747ea76cd800e1bd5043d800c19c\" alt=\"実行結果\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/189829/090fb90a-1a9d-b430-6c22-a96d81c01b99.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2F090fb90a-1a9d-b430-6c22-a96d81c01b99.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=a6cae8641eba9b1816859396562fa051 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"azure-functionsにデプロイする\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#azure-functions%E3%81%AB%E3%83%87%E3%83%97%E3%83%AD%E3%82%A4%E3%81%99%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eAzure Functionsにデプロイする\u003c/h2\u003e\n\n\u003cp\u003eローカルで動きが確認できたら、Azureに登録します。\u003cbr\u003e\nVSCodeからAzureへサインインが必要となりますが、サインイン方法は、\u003ca href=\"https://news.yahoo.co.jp/articles/33a9a29ddd8262b1c94963ed37f796ed6961f4fc\" rel=\"nofollow noopener\" target=\"_blank\"\u003eこちら\u003c/a\u003eを参照ください\u003c/p\u003e\n\n\u003cp\u003eまずは、Azureタブを開き、FUNCTIONSから以下のマークをクリックします。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/81c035776afdf09bfc4cfa74fb3e9b033f8b7d7c/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3138393832392f65363566663036612d353166382d636337352d643430342d3432323034613163313434312e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2Fe65ff06a-51f8-cc75-d404-42204a1c1441.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=9947dbeeab0cd6bf65e9dc130137bc35\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/189829/e65ff06a-51f8-cc75-d404-42204a1c1441.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2Fe65ff06a-51f8-cc75-d404-42204a1c1441.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=ed683df6da64a78b7751a4cafd57b45d 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e登録先として、ここではすでに作成済みの関数アプリ（higedaruma）を指定しています。\u003cbr\u003e\n関数アプリから作成する場合は、こちらの\u003ca href=\"https://news.yahoo.co.jp/articles/33a9a29ddd8262b1c94963ed37f796ed6961f4fc\" rel=\"nofollow noopener\" target=\"_blank\"\u003e記事\u003c/a\u003eを参照ください\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/abc35e6b63d73f98c98d5912da5527e2c2ab00b0/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3138393832392f31646635313638342d653866372d656163382d373435302d6132643933363465613638312e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2F1df51684-e8f7-eac8-7450-a2d9364ea681.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=9f38eed142765c92211fc87cebd8a5e2\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/189829/1df51684-e8f7-eac8-7450-a2d9364ea681.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2F1df51684-e8f7-eac8-7450-a2d9364ea681.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=ee6690aa7c54c70362856061330cc5d3 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e問題なければ「Deploy」ボタンをクリックします。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/a9d052302b14ebfcdfd940a23dd5fc467a1b9673/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3138393832392f66356161633638382d363930622d393262652d646331372d3966643164636262373733302e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2Ff5aac688-690b-92be-dc17-9fd1dcbb7730.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=764365c9ea0bb18bf55aa2dd1cd030ff\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/189829/f5aac688-690b-92be-dc17-9fd1dcbb7730.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2Ff5aac688-690b-92be-dc17-9fd1dcbb7730.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=cdb3cce64ec17117985c92aa36a1ae0b 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eデプロイが成功すれば、Azureの関数アプリに\u003ccode\u003etwiliosample\u003c/code\u003eが追加されます。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/f787707c5593c493b872dc068a2f411d290b48c3/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3138393832392f31333562373166362d666437392d633235302d653331622d6237393139633330653239642e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2F135b71f6-fd79-c250-e31b-b7919c30e29d.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=ee2578fb340233dc7501ccf6b604e225\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/189829/135b71f6-fd79-c250-e31b-b7919c30e29d.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2F135b71f6-fd79-c250-e31b-b7919c30e29d.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=cee1d4fe273872629a46390869728a83 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"動きを確認する\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%8B%95%E3%81%8D%E3%82%92%E7%A2%BA%E8%AA%8D%E3%81%99%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e動きを確認する\u003c/h3\u003e\n\n\u003cp\u003e関数からtwiliosampleを開き、「コードとテスト」を選択、「テストと実行」をクリックすると、入出力の確認が確認ができます。\u003cbr\u003e\n事前に動きを見てると、問題が発生したときの切り分けがしやすくなので一度は動作確認をしましょう。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/24dba594468d3233ffaed6cf4f4cf07dad367dfe/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3138393832392f35633464326661352d363964382d376363302d323537642d6431393565376466643430622e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2F5c4d2fa5-69d8-7cc0-257d-d195e7dfd40b.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=b24788d0f2889fef4860b9c12eb3a770\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/189829/5c4d2fa5-69d8-7cc0-257d-d195e7dfd40b.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2F5c4d2fa5-69d8-7cc0-257d-d195e7dfd40b.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=96726d4b07ed520622fa868c404142ff 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"twilioに登録する\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#twilio%E3%81%AB%E7%99%BB%E9%8C%B2%E3%81%99%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eTwilioに登録する\u003c/h2\u003e\n\n\u003cp\u003eAzureに登録した関数アプリをTwilioに登録します。\u003c/p\u003e\n\n\u003cp\u003eAzure Functionsのtwiliosampleから、\u003ccode\u003e関数のURLの取得\u003c/code\u003eを選択し、APIのURLを取得します。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/259a08dd9054bc0de66b8425a217554a7312df4b/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3138393832392f61343535303531312d633230372d663362312d656661332d3735626439396635613939622e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2Fa4550511-c207-f3b1-efa3-75bd99f5a99b.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=e3a6761c937468885e6d18adbb84e776\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/189829/a4550511-c207-f3b1-efa3-75bd99f5a99b.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2Fa4550511-c207-f3b1-efa3-75bd99f5a99b.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=7ea3d96ff559df9457a9113ce38373d9 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eTwilioの\u003ccode\u003eWebhook\u003c/code\u003eに先ほどコピーしたURLを登録します。\u003cbr\u003e\nあとは、電話番号に電話をすれば動作を確認できます。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/91f09f81f764c0b73a475b20dbdaa409ad03b27b/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3138393832392f63366236333061372d663430392d643331332d393066312d3331326339393630313065612e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2Fc6b630a7-f409-d313-90f1-312c996010ea.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=d8bb5bf0cab8715c90a894d6fbbe9b42\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/189829/c6b630a7-f409-d313-90f1-312c996010ea.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F189829%2Fc6b630a7-f409-d313-90f1-312c996010ea.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=e83b5faa4860b67d6c7e17201a323a95 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"まとめ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%BE%E3%81%A8%E3%82%81\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eまとめ\u003c/h1\u003e\n\n\u003cp\u003e半年ぐらいすると、この流れを忘れそうだったので、メモとして作成しました。\u003cbr\u003e\nサーバを意識せず、デバッグ含めてローカルでできるのはかなり便利です。\u003c/p\u003e\n","createdAt":"2021-06-14T15:30:54Z","elapsedYearsFromLastModifiedAt":0,"encryptedId":"cXIiIiUhQF3sruSCmN4L76VzOexZL3QuKg==--aLksbIx0l4/wxM0p--n9URBXcK98GIhgooxmQzMQ==","isBanned":false,"isDeprecated":false,"isDestroyableByViewer":false,"isEditRequestReadableByViewer":true,"isEditRequestSendableByViewer":true,"isLikableByViewer":true,"isLikedByViewer":false,"isPublic":true,"isSlide":false,"isStockableByViewer":true,"isStockedByViewer":false,"isSubscribableByViewer":false,"isSubscribedByViewer":false,"isUpdatableByViewer":false,"isUpdated":true,"lastModifiedAt":"2021-06-15T00:06:28Z","likesCount":4,"linkUrl":"https://qiita.com/masaya3/items/429c12c2c742b5fc07f5","organization":null,"originalId":1449043,"stockedCount":3,"title":"TwilioをAzure Functions(C#)で動かす","toc":"\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E4%BA%8B%E5%89%8D%E6%BA%96%E5%82%99%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6\"\u003e事前準備について\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E6%89%8B%E9%A0%86\"\u003e手順\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#azure-functions%E3%81%AE%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B\"\u003eAzure Functionsのプロジェクトを作成する\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%8B%95%E4%BD%9C%E6%A4%9C%E8%A8%BC\"\u003e動作検証\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#twilio%E3%81%AEsdk%E3%82%92%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB\"\u003eTwilioのSDKをインストール\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%B3%E3%83%BC%E3%83%89%E3%82%92%E6%9B%B8%E3%81%8F\"\u003eコードを書く\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#twilio%E3%81%8B%E3%82%89%E3%81%AE%E6%83%85%E5%A0%B1%E5%8F%96%E5%BE%97%E3%81%99%E3%82%8B\"\u003eTwilioからの情報取得する\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E7%99%BA%E8%A9%B1%E5%87%A6%E7%90%86%E3%82%92%E6%9B%B8%E3%81%8F\"\u003e発話処理を書く\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#vocie%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6\"\u003evocieについて\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%85%A5%E5%8A%9B%E5%8F%97%E4%BB%98%E3%82%92%E6%9B%B8%E3%81%8F\"\u003e入力受付を書く\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%AD%E3%83%BC%E3%82%AB%E3%83%AB%E3%81%A7%E5%8B%95%E4%BD%9C%E6%A4%9C%E8%A8%BC%E3%81%99%E3%82%8B\"\u003eローカルで動作検証する　\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#azure-functions%E3%81%AB%E3%83%87%E3%83%97%E3%83%AD%E3%82%A4%E3%81%99%E3%82%8B\"\u003eAzure Functionsにデプロイする\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%8B%95%E3%81%8D%E3%82%92%E7%A2%BA%E8%AA%8D%E3%81%99%E3%82%8B\"\u003e動きを確認する\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#twilio%E3%81%AB%E7%99%BB%E9%8C%B2%E3%81%99%E3%82%8B\"\u003eTwilioに登録する\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%81%BE%E3%81%A8%E3%82%81\"\u003eまとめ\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n","totalPv":882,"uuid":"429c12c2c742b5fc07f5","banReason":null,"adventCalendarItem":null,"author":{"encryptedId":"RA9RIpdVqihpQxLKBZQwp2MPKqWp--dklBHsxOFDH4DaG2--PRtJDoHwMSabGQehySGMmQ==","originalId":189829,"description":"いろいろ物作りが好きな中年です。","facebookUrl":"https://facebook.com/tanaka.masaya3","githubUrl":null,"isBlockingViewer":false,"isFollowableByViewer":true,"isFollowedByViewer":false,"isTweetWebNotificationReceivable":true,"linkedinUrl":null,"name":"","profileImageUrl":"https://qiita-image-store.s3.amazonaws.com/0/189829/profile-images/1512574022","profileImageUrlW48":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F189829%2Fprofile-images%2F1512574022?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=48\u0026s=2d2b6cf19bd934f3a085f5cb8893e792","profileImageUrlW75":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F189829%2Fprofile-images%2F1512574022?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=cb9c758b1439f991bbb6aa3dc73144ad","urlName":"masaya3","websiteUrl":"https://protopedia.net/prototyper/higedaruma","twitterUrl":"https://twitter.com/masaya3","twitterUrlName":"masaya3","revealedOrganizations":{"edges":[{"node":{"encryptedId":"jky7wqc/fvzGG0/x6innOT+dnWlPmQlCepfk--dEtJOjeTFm/FR7Gn--H8k15H9YTq0wpYJXqpGGrg==","isBetaReleaseEnabled":false,"isFollowableByViewer":false,"isFollowedByViewer":false,"name":"痛快技術株式会社","logoUrl":"https://s3-ap-northeast-1.amazonaws.com/qiita-organization-image/a669c125f29c6ae01dbb645120c44f9862609597/original.jpg?1621580178","urlName":"tsux","description":"技術の楽しさを広め伝える\r\n技術で社会の問題を解決する\r\n技術で私達を幸せにする","url":""}}]}},"tags":[{"name":"C#","urlName":"csharp"},{"name":"twilio","urlName":"twilio"},{"name":"AzureFunctions","urlName":"azurefunctions"}],"followingLikers":{"edges":[]},"comments":{"totalCount":0}},"comments":[],"client":null,"ads_event_emitter":null}}</script>
