More than 3 years have passed since last update.サマータイムなんてやめてほしいけど、ちょっと気になるので調べてみたら、C#のDateTimeにKindというプロパティがあることに今更ながら気がついた。DateTime::Kind プロパティ
DateTimeKind 列挙型で、のいずれかの値を持つ。
初期値は、Unspecifiedこの結果は、となる。
ここで、datetime2とdatetime3でTimeSpanを出したらどうなるのかな？この結果は、となる。
TimeSpanや比較ではDateTimeのKindは関係なしということなのかな。じゃ、DateTimeのKindってどういう使い方をするのか？
DateTimeが表す日時が現地時刻かUTCかを設定するKindプロパティの値によって違いが出るのは、DateTimeを別のタイムゾーンの日時に変換する時です。DateTimeの計算や比較には影響を与えません。とあるので、ひとつのタイムゾーンのみを考えればいいような場合は気にしなくてもいいのかな。
まぁ、それでもKindはLocalにしておくのが良さそうな気はする。.NET2.0 SP1からDateTimeOffsetという型が追加になっているみたいで、UTC+オフセット時間を持っているらしい。
こっちのほうがサマータイムでは有効なのかな？とも思ったけど、
DateTimeの代わりにDateTimeOffsetを使用するただし、DateTimeOffsetはUTCとの時差を保持しているだけで、タイムゾーンの情報は持っていませんので、サマータイムのように特定の時期だけ時差が変わってしまうケースにまでは対応していません。とあるので、例えばOSのアップデートでサマータイム対応されたとしてもDateTimeOffsetではダメということかな。前に、データベースのTIMESTAMP WITH TIME ZONE型を値をC#でやり取りするときにはDateTimeOffsetを使うんじゃないのかな？と思って確認したときも、TIMESTAMP WITH TIME ZONE型もTIMESTAMP WITHOUT TIME ZONE型もDateTime型で扱うということだったけど、じゃそのときのDateTimeのKindはそれぞれどうなっていたのか？これは確認する必要がありそう。


