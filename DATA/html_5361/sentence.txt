More than 3 years have passed since last update.小町数を使った数学パズルの第6弾です。単位分数が、1/n となる、1-9までの数を１回ずつ使った分数を求めよ。
ただし、n は、2から 9までの数とする。
たとえば、6729/13458 は、1/2かつ1-9までの数を1回ずつ使っているので、求める答えのひとつである。この問題を解くプログラムは、すぐに2つのやり方が考えつきます。※ 1,2,3,4,5,6,7,8,9で構成される数を小町数と呼びます。後者のほうがプログラムが簡単そうなので、後者の方法でプログラムを作成しました。1/2, 1/3 ... 1/9 となる小町数を求めるわけですから、求める分数は、必ず 4桁/5桁となるはずです。
3桁/6桁だと、1/nにはなりえません。5桁/4桁だと、1以上になりますから、ｙはり、1/nにはなりません。そのため、上記のm/(n*m)のmは、1234から9876までの範囲ということになります。たとえば、1/2の時は、1234 / (1234 * 2)、つまり、1234/2468 が 1から9で構成されているかを調べます。次に1235 / (1235 * 2) -&gt; 1235/2470 が1から9で構成されているかを調べます。次に1236 / (1236 * 2) -&gt; 1236/2472 が1から9で構成されているかを調べます。次に...と順に調べていきます。これは、123456789の順列を求める前者のやり方(小町数となる分数を求め、それが、1/nとなるかどうかを調べる方法)よりも明らかに効率が良さそうです。小町数かどうかを調べるのは、文字列にして文字順に並べ替え、"123456789"と等しいかを調べています。文字列の長さが9であることが保証されていればで小町数かどうかを調べればいいのですが、ここでは以下のようなコードにしています。これならば、長さが9以外の場合には、falseになるので、このほうが、汎用性が高いし、意図が明確になりますね。最初の3つの分子を見てびっくりしました。6729, 6792, 6927 ですよ。
そして、さらに下を見ていくと、7269, 7692,　9267, 2697, 2769, 2967, 9627なんて数も出てきます。実に面白いですね。そして不思議です。分数 1/2 と 1/5 のところだけぬきだして並び替えしてみると、以下のようになり、分子が2,3,7,9からなるグループと、分子が2,6,7,9の２つのグループに綺麗に分かれました。
2,7,9 が共通していて、違いは3と6だけ、数字のもつ不思議さを感じた問題でした。この記事は、Gushwell's C# Programming Pageで公開したものをに加筆・修正したものです。


