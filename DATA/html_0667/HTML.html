<!DOCTYPE html><html><head><meta charset="utf-8" /><title>[.NET][C#]NUnitを使用した単体テストのカバレッジレポートを自動生成する - Qiita</title><meta content="width=device-width,initial-scale=1,shrink-to-fit=no,viewport-fit=cover" name="viewport" /><meta content="#55c500" name="theme-color" /><meta content="XWpkTG32-_C4joZoJ_UsmDUi-zaH-hcrjF6ZC_FoFbk" name="google-site-verification" /><meta content="telephone=no" name="format-detection" /><link rel="canonical" href="https://qiita.com/suganury/items/62e0770d16eb579799d8" /><link href="/manifest.json" rel="manifest" /><link href="/opensearch.xml" rel="search" title="Qiita" type="application/opensearchdescription+xml" /><link as="script" href="https://www.googletagservices.com/tag/js/gpt.js" rel="preload" /><link href="https://securepubads.g.doubleclick.net" rel="preconnect" /><script async="" src="https://www.googletagservices.com/tag/js/gpt.js"></script><meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="KMidoVDTDk+K9jZgY8DJiQcCvuTMiWRwI62NvTOXNRpKWcvSMhUZEBY300EQcUvH4B9RfU3gE0HzrnQC7urvKQ==" /><link rel="shortcut icon" type="image/x-icon" href="https://cdn.qiita.com/assets/favicons/public/production-c620d3e403342b1022967ba5e3db1aaa.ico" /><link rel="apple-touch-icon" type="image/png" href="https://cdn.qiita.com/assets/favicons/public/apple-touch-icon-ec5ba42a24ae923f16825592efdc356f.png" /><link rel="stylesheet" media="all" href="https://cdn.qiita.com/assets/public/article-2eaa7dbedc42a8ea65c722cda46d0ebb.min.css" /><script src="https://cdn.qiita.com/assets/public/v3-article-bundle-63de2d91fef827269d3f6b958db2335b.min.js" defer="defer"></script><meta name="twitter:card" content="summary_large_image"><meta content="@Qiita" name="twitter:site" /><meta content="@suganury" name="twitter:creator" /><meta property="og:type" content="article"><meta property="og:title" content="[.NET][C#]NUnitを使用した単体テストのカバレッジレポートを自動生成する - Qiita"><meta property="og:image" content="https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0&amp;w=1200&amp;mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND1XeTVPUlZSZFcwTWpYVTVWYm1sMDQ0S1M1TDJfNTVTbzQ0R1g0NEdmNVkyWTVMMlQ0NE9HNDRLNTQ0T0k0NEd1NDRLcjQ0T1E0NE9zNDRPRDQ0SzQ0NE9zNDRPZDQ0Tzg0NE9JNDRLUzZJZXE1WXVWNTVTZjVvaVE0NEdaNDRLTCZ0eHQtY29sb3I9JTIzMzMzJnR4dC1mb250PUhpcmFnaW5vJTIwU2FucyUyMFc2JnR4dC1zaXplPTU0JnR4dC1jbGlwPWVsbGlwc2lzJnR4dC1hbGlnbj1jZW50ZXIlMkNtaWRkbGUmcz1jMmMyNTJkMmYwZDNhODA5NmZlZGQ0YTU1ZmNmY2NkYg&amp;mark-align=center%2Cmiddle&amp;blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RSE4xWjJGdWRYSjUmdHh0LWNvbG9yPSUyMzMzMyZ0eHQtZm9udD1IaXJhZ2lubyUyMFNhbnMlMjBXNiZ0eHQtc2l6ZT00NSZ0eHQtYWxpZ249cmlnaHQlMkNib3R0b20mcz0zMGExMjRiODE1MjU3YzU3Nzk3NzhmOWY3MmZkOTMyMg&amp;blend-align=center%2Cmiddle&amp;blend-mode=normal&amp;s=264541af8a2b7d0a0ee6276e5ca4d966"><meta property="og:description" content="

はじめに

前回、NUnitによる単体テスト自動化方法を学んだので、
今回は実行したNUnitテストのコードカバレッジレポートを自動生成してみる。

【前回】
[.NET][C#]NUnitを使用して単体テスト自動化　基本編


..."><meta content="https://qiita.com/suganury/items/62e0770d16eb579799d8" property="og:url" /><meta content="Qiita" property="og:site_name" /><meta content="564524038" property="fb:admins" /><meta content="C#,.NET,NUnit,.NETCore" name="keywords" /><script>!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window, document,'script',
'https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '668972150489891');
fbq('track', 'PageView');</script><style data-emotion-css="17jxvjw 11t2ec1 1dvr2p8 18lkoru 1g4cku8 1iupg5d ijvq0v 15cocm3 12rp90f 115f4t 1b8uj5v 79elbk 16hhh7b fcbn8c 1gj7nt 154zy0m yikrym 1jqivyb 1ode1bp le4d8r 1hbd3g7 helsa7 8qb8m4 2imjyh he5w1s 70qvj9 3ojehk 100alwu 1dtnjt5 10ougpm 1ay9vb9 m19uds cgzq40 1wa99t2 1l3zk9f 4czcte 1yzj1fm 1uv1qiv 109dbrr 5jpx49 mnxgyc 1vlpknv fsjkhv 1b17vb0 7i7f4d"}>.css-17jxvjw{display:grid;display:-ms-grid;grid-template-columns:80px minmax(0,1fr) 300px;-ms-grid-columns:80px minmax(0,1fr) 300px;grid-template-rows:minmax(270px,auto) 1fr;-ms-grid-rows:minmax(270px,auto) 1fr;max-width:1280px;margin-right:auto;margin-left:auto;padding-top:24px;padding-right:24px;padding-left:24px;}@media (max-width:1200px){.css-17jxvjw{padding-bottom:0;padding-left:0;padding-right:0;}}@media (max-width:992px){.css-17jxvjw{grid-template-columns:80px 452px 300px;-ms-grid-columns:80px 452px 300px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}}@media (max-width:770px){.css-17jxvjw{display:block;}}@media (max-width:480px){.css-17jxvjw{padding-top:0;}}.css-11t2ec1{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;z-index:5;position:-webkit-sticky;position:sticky;top:calc(56px + 24px + 16px + 32px - 16px);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:16px;width:80px;}.css-11t2ec1:after{content:'';display:table;}.css-11t2ec1:before{content:'';display:table;}@media (max-width:770px){.css-11t2ec1{display:none;}}.css-1dvr2p8{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-18lkoru{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;background-color:#FFFFFF;}.css-1g4cku8{display:inline-block;vertical-align:middle;height:20px;width:20px;fill:#55C500;}.css-1iupg5d{color:#55C500;cursor:pointer;font-size:14px;font-weight:bold;}.css-ijvq0v{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-15cocm3{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#FFFFFF;border:2px solid #6E6F70;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:2px 0px 0px;width:40px;}.css-12rp90f{display:inline-block;vertical-align:bottom;height:17.77777777777778px;width:16px;fill:#6E6F70;}.css-115f4t{color:#6E6F70;font-size:14px;font-weight:bold;}.css-1b8uj5v{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;margin-bottom:16px;padding:0;}.css-79elbk{position:relative;}.css-16hhh7b{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;padding:0;}.css-fcbn8c{display:none;bottom:initial;left:initial;right:initial;top:initial;left:100%;top:calc(-8px - (14px * 1.8) - 16px - 4px);}.css-1gj7nt{color:rgba(0,0,0,0.6);font-size:14px;font-weight:bold;line-height:1.8;padding:8px 16px;}.css-154zy0m{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.87);cursor:pointer;font-size:16px;font-weight:normal;line-height:1.8;padding:4px 16px;}.css-154zy0m:hover{-webkit-text-decoration:none;text-decoration:none;background-color:#F2F2F2;}.css-yikrym{width:20px;}.css-1jqivyb{color:rgba(0,0,0,0.6);font-size:13px;}.css-1ode1bp{background-color:rgba(0,0,0,0.12);height:1px;width:100%;margin:8px 0;}.css-le4d8r{display:inline-block;vertical-align:middle;height:13px;width:13px;fill:rgba(0,0,0,0.6);}.css-1hbd3g7{height:250px;}.css-helsa7{background-color:#FFFFFF;padding:32px;margin-bottom:24px;}@media (max-width:992px){.css-helsa7{margin:0 auto 40px;}}@media (max-width:480px){.css-helsa7{margin:0 0 40px;padding:32px 16px;}}.css-8qb8m4{margin-bottom:48px;}.css-2imjyh{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-he5w1s{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;width:100%;}@media (max-width:770px){.css-he5w1s{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}}.css-70qvj9{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.css-3ojehk{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;margin-right:4px;}.css-100alwu{display:inline-block;border-radius:50%;line-height:1;overflow:hidden;vertical-align:middle;}.css-1dtnjt5{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-10ougpm{color:rgba(0,0,0,0.87);font-size:14px;font-weight:600;line-height:1.8;margin-right:4px;text-wrap:break-word;word-break:break-all;}.css-1ay9vb9{margin-right:16px;}.css-m19uds{color:rgba(0,0,0,0.6);font-size:14px;line-height:1.8;}.css-cgzq40{color:rgba(0,0,0,0.87);font-size:32px;font-weight:bold;line-height:1.4;margin-top:8px;text-wrap:break-word;word-break:break-all;}.css-1wa99t2{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.6);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:8px;}.css-1l3zk9f{color:rgba(0,0,0,0.6);font-size:20px;margin-right:8px;}.css-4czcte{margin-right:4px;color:inherit;font-size:14px;line-height:1.8;}.css-4czcte:not(:last-child)::after{content:',';margin-right:4px;}.css-1yzj1fm{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:32px;}.css-1uv1qiv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-size:20px;height:32px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin-right:16px;outline:none;padding:0;width:32px;}.css-109dbrr{background-color:#F9F9F9;border-top:1px solid rgba(0,0,0,0.12);bottom:0;box-shadow:0px 1px 4px rgba(0,0,0,0.14);display:none;height:calc(env(safe-area-inset-bottom,0px) + 56px);-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding-bottom:env(safe-area-inset-bottom);position:-webkit-sticky;position:sticky;width:100%;z-index:2000;}@media (max-width:770px){.css-109dbrr{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}.css-5jpx49{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:space-evenly;-webkit-justify-content:space-evenly;-ms-flex-pack:space-evenly;justify-content:space-evenly;width:100%;}.css-mnxgyc{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1vlpknv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;margin-right:4px;background-color:#FFFFFF;}.css-fsjkhv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1b17vb0{color:#6E6F70;font-size:14px;font-weight:bold;margin-left:4px;}.css-7i7f4d{display:none;bottom:initial;left:initial;right:initial;top:initial;bottom:32px;right:0;}</style></head><body><div class="allWrapper"><div><div id="GlobalHeader-react-component-e9e15af6-39f4-4b4e-b5fd-6229b1a94222"><div class="st-Header"><div class="st-Header_container"><div class="st-Header_start"><a href="/" class="st-Header_logo"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 426.57 130"><circle cx="167.08" cy="21.4" r="12.28"></circle><path d="M250.81 29.66h23.48v18.9h-23.48z"></path><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z"></path><circle cx="216.33" cy="21.4" r="12.28"></circle></svg></a><div class="st-Header_communitySelector" tabindex="0"><span class="fa fa-caret-down"></span></div><div class="st-Header_dropdown"><div class="st-Header_dropdownHeading">Qiita Teams that are logged in</div><div class="st-Header_dropdownItemNote">You are not logged in to any team</div><hr class="st-Header_dropdownDivider st-Header_dropdownDivider-shrink"/><a href="https://teams-center.qiita.com/find_team" class="st-Header_dropdownItem"><span class="fa fa-fw fa-sign-in st-Header_dropdownItemIcon"></span><div>Log in to Qiita Team</div></a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Community</div><a href="/organizations" class="st-Header_dropdownItem">Organization</a><a href="/official-events/open" class="st-Header_dropdownItem">Event</a><a href="/advent-calendar" class="st-Header_dropdownItem">Advent Calendar</a><a href="https://qiitadon.com/" class="st-Header_dropdownItem" target="_blank">Qiitadon (β)</a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Service</div><a href="https://jobs.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Jobs</a><a href="https://zine.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Zine</a><a href="https://blog.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Blog</a></div><form class="st-Header_search" action="/search" method="get"><span class="fa fa-search st-Header_searchIcon"></span><input type="search" class="st-Header_searchInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form><form class="st-Header_searchModal" action="/search" method="get"><input type="text" class="st-Header_searchModalInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form></div><div class="st-Header_end"><div class="st-Header_searchButton"><span class="fa fa-search"></span></div><a class="st-Header_signupButton" href="/signup?redirect_to=%2Fsuganury%2Fitems%2F62e0770d16eb579799d8">Signup</a><a class="st-Header_loginLink" href="/login?redirect_to=%2Fsuganury%2Fitems%2F62e0770d16eb579799d8">Login</a></div><div class="st-Header_overlay"></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="GlobalHeader" data-dom-id="GlobalHeader-react-component-e9e15af6-39f4-4b4e-b5fd-6229b1a94222">{"unreadNotificationsCount":null,"realms":[{"humanName":"Qiita","isCurrentRealm":true,"isQiita":true,"isQiitaTeam":false,"loggedInUser":null,"teamId":null,"url":"https://qiita.com/"}],"teamFindUrl":"https://teams-center.qiita.com/find_team","isTeamOnlyUser":null,"currentUser":null}</script>
      
</div><div class="st-HeaderAlert st-HeaderAlert-warning"><div class="st-HeaderAlert_body"></div></div><script type="application/ld+json">{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"/","name":"Qiita"}},{"@type":"ListItem","position":2,"item":{"@id":"/tags/csharp","name":"C#"}}]}</script><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","datePublished":"2020-10-03T13:34:15.000+09:00","dateModified":"2020-10-10T23:08:18.000+09:00","headline":"[.NET][C#]NUnitを使用した単体テストのカバレッジレポートを自動生成する","image":"https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0\u0026w=1200\u0026mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND1XeTVPUlZSZFcwTWpYVTVWYm1sMDQ0S1M1TDJfNTVTbzQ0R1g0NEdmNVkyWTVMMlQ0NE9HNDRLNTQ0T0k0NEd1NDRLcjQ0T1E0NE9zNDRPRDQ0SzQ0NE9zNDRPZDQ0Tzg0NE9JNDRLUzZJZXE1WXVWNTVTZjVvaVE0NEdaNDRLTCZ0eHQtY29sb3I9JTIzMzMzJnR4dC1mb250PUhpcmFnaW5vJTIwU2FucyUyMFc2JnR4dC1zaXplPTU0JnR4dC1jbGlwPWVsbGlwc2lzJnR4dC1hbGlnbj1jZW50ZXIlMkNtaWRkbGUmcz1jMmMyNTJkMmYwZDNhODA5NmZlZGQ0YTU1ZmNmY2NkYg\u0026mark-align=center%2Cmiddle\u0026blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RSE4xWjJGdWRYSjUmdHh0LWNvbG9yPSUyMzMzMyZ0eHQtZm9udD1IaXJhZ2lubyUyMFNhbnMlMjBXNiZ0eHQtc2l6ZT00NSZ0eHQtYWxpZ249cmlnaHQlMkNib3R0b20mcz0zMGExMjRiODE1MjU3YzU3Nzk3NzhmOWY3MmZkOTMyMg\u0026blend-align=center%2Cmiddle\u0026blend-mode=normal\u0026s=264541af8a2b7d0a0ee6276e5ca4d966","mainEntityOfPage":"https://qiita.com/suganury/items/62e0770d16eb579799d8","author":{"@type":"Person","address":"","email":null,"identifier":"suganury","name":"suganury","image":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fabs.twimg.com%2Fsticky%2Fdefault_profile_images%2Fdefault_profile_bigger.png?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=7db7f19f7449c608adab42dd38e24552","url":"https://qiita.com/suganury","description":"レガシー脱却目指すおじさん","memberOf":[]},"publisher":{"@type":"Organization","name":"Qiita","logo":{"@type":"ImageObject","url":"//cdn.qiita.com/assets/public/qiita-logo-c39ded593afa388e2e1ba435b110554e.png"}}}</script><style type="text/css">.wb-CampaignLink {
  background-color: #333333;
  width: 100%;
}

.wb-CampaignLink_container {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  max-width: 1100px;
  margin: 0 auto;
  font-size: 13px;
  padding: 0.8em;
}
.wb-CampaignLink_container > a {
  color: #fff;
}

.wb-CampaignLink_container > a:hover {
  text-decoration: underline;
}</style><div class="wb-CampaignLink"><div class="wb-CampaignLink_container"><a target="_blank" id="header_text_message_1" href="https://zine.qiita.com/interview/202107-hitachi-3/?utm_source=qiita&amp;utm_medium=header-banner">日立の研究者が、2年間ドイツ人工知能研究センターで学んだこと</a><a target="_blank" id="header_text_message_2" href="https://zine.qiita.com/interview/202107-hitachi-3/?utm_source=qiita&amp;utm_medium=header-banner">詳しくはこちら</a></div><script>td.trackEvent(
  'front_events',
  {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"suganury","type":"items","id":"62e0770d16eb579799d8"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Show","data":{"message":"日立の研究者が、2年間ドイツ人工知能研究センターで学んだこと","url":"https://zine.qiita.com/interview/202107-hitachi-3/?utm_source=qiita\u0026utm_medium=header-banner","sub_message":"詳しくはこちら"}}
)</script><script>document.getElementById('header_text_message_1').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"suganury","type":"items","id":"62e0770d16eb579799d8"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":0,"pos_id":"header_text_message_1","message":"日立の研究者が、2年間ドイツ人工知能研究センターで学んだこと","url":"https://zine.qiita.com/interview/202107-hitachi-3/?utm_source=qiita\u0026utm_medium=header-banner","sub_message":"詳しくはこちら"}}
  )
})</script><script>document.getElementById('header_text_message_2').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"suganury","type":"items","id":"62e0770d16eb579799d8"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":0,"pos_id":"header_text_message_2","message":"日立の研究者が、2年間ドイツ人工知能研究センターで学んだこと","url":"https://zine.qiita.com/interview/202107-hitachi-3/?utm_source=qiita\u0026utm_medium=header-banner","sub_message":"詳しくはこちら"}}
  )
})</script></div><script type="application/json" id="js-react-on-rails-context">{"railsEnv":"production","inMailer":false,"i18nLocale":"en","i18nDefaultLocale":"en","href":"https://qiita.com/suganury/items/62e0770d16eb579799d8","location":"/suganury/items/62e0770d16eb579799d8","scheme":"https","host":"qiita.com","port":null,"pathname":"/suganury/items/62e0770d16eb579799d8","search":null,"httpAcceptLanguage":null,"actionPath":"public/items#show","settings":{"analyticsTrackingId":"UA-24675221-12","assetsMap":{},"csrfToken":"fP+oRg/tA3ZG1+Gf9LZO+MqHdloG0uEjf18Mf3+laZIebv41bSsUKdoWBL6HB8y2LZqZw4e7lhKvXPXAotizoQ==","locale":"en"},"currentUser":null,"isLoggedIn":false,"recaptchaSiteKey":"6LfNkiQTAAAAAM3UGnSquBy2akTITGNMO_QDxMw6","serverSide":false}</script>
<div id="PersonalArticlePage-react-component-b3aab32f-cdd3-423a-affb-0450291a2757"><div class="p-items_wrapper"><div class=" css-17jxvjw"><div class="css-11t2ec1"><div class="css-1dvr2p8"><button class=" css-18lkoru"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/suganury/items/62e0770d16eb579799d8/likers" class="css-1iupg5d">2</a></div><div class="css-ijvq0v"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-115f4t">2</span></div><div class="css-1b8uj5v"><span class="fa fa-twitter"></span></div><div class="css-1b8uj5v"><span class="fa fa-facebook"></span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-fcbn8c"><div class="css-1gj7nt">Improve article</div><a href="/drafts/62e0770d16eb579799d8/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/suganury/items/62e0770d16eb579799d8/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/suganury/items/62e0770d16eb579799d8/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/suganury/items/62e0770d16eb579799d8/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/suganury/items/62e0770d16eb579799d8.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div><div class="p-items_options"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_toc"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_main"><div class="css-helsa7"><div class="css-8qb8m4"><div class="css-2imjyh"><div class="css-he5w1s"><div class="css-70qvj9"><div class="css-3ojehk"><a href="/suganury"><img class="css-100alwu eyfquo10" src="https://abs.twimg.com/sticky/default_profile_images/default_profile_bigger.png" width="24" height="24" loading="lazy"/></a></div><div class="css-1dtnjt5"><a href="/suganury" class="css-10ougpm">@<!-- -->suganury</a><div class="css-1ay9vb9"><span><meta content="2020-10-03T04:34:15Z"/><time dateTime="2020-10-10T14:08:18Z" class="css-m19uds">updated at 2020-10-10</time></span></div></div></div></div></div><h1 class="css-cgzq40">[.NET][C#]NUnitを使用した単体テストのカバレッジレポートを自動生成する</h1><div class="css-1wa99t2"><span class="fa fa-tags mr-1of2 css-1l3zk9f" aria-hidden="true"></span><a href="/tags/csharp" class="css-4czcte">C#</a><a href="/tags/.net" class="css-4czcte">.NET</a><a href="/tags/nunit" class="css-4czcte">NUnit</a><a href="/tags/.netcore" class="css-4czcte">.NETCore</a></div></div><section class="it-MdContent"><div id="personal-public-article-body"><div>
<h1>
<span id="はじめに" class="fragment"></span><a href="#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB"><i class="fa fa-link"></i></a>はじめに</h1>

<p>前回、NUnitによる単体テスト自動化方法を学んだので、<br>
今回は実行したNUnitテストのコードカバレッジレポートを自動生成してみる。</p>

<p>【前回】<br>
<a href="https://qiita.com/suganury/items/d255ae140373af7d0146" id="reference-7d7471ca24aa4e4e022d">[.NET][C#]NUnitを使用して単体テスト自動化　基本編</a></p>

<h1>
<span id="テストコードカバレッジとは" class="fragment"></span><a href="#%E3%83%86%E3%82%B9%E3%83%88%E3%82%B3%E3%83%BC%E3%83%89%E3%82%AB%E3%83%90%E3%83%AC%E3%83%83%E3%82%B8%E3%81%A8%E3%81%AF"><i class="fa fa-link"></i></a>(テスト)コードカバレッジとは</h1>

<blockquote>
<p>コードカバレッジとは、単体テストで実行する、行、分岐、またはメソッドのいずれかのコード量の尺度です。 たとえば、条件分岐が (分岐 a と<em>分岐 b</em> の) 2 つしかない単純なアプリケーションのコードで、条件付き<em>分岐 a</em> を単体テストで検証する場合、分岐のコードカバレッジは 50% と報告されます。</p>
</blockquote>

<p><a href="https://docs.microsoft.com/ja-jp/dotnet/core/testing/unit-testing-code-coverage" rel="nofollow noopener" target="_blank">MicroSoft 単体テストにコードカバレッジを使用する</a>　より引用</p>

<p>つまり、テスト実行によってテスト対象のコードを<br>
どれだけ網羅できたかを示す。<br>
これによりテスト抜け漏れのコードが無いかを検知できる。</p>

<p>ただし、あくまでコードの網羅率を示すだけのものであり、<br>
機能の正しさ、テストの正しさを完全に保証するものではない。<br>
例えば引数の四捨五入結果を返すメソッドに引数として1と9を渡すテストを行えば、<br>
切り捨て・繰り上げのすべてのコードを網羅するだろうが、<br>
その境目の判定が想定通り機能するかはテストされていない。<br>
コードカバレッジが100%だからといって完全にバグを取り除けたということは無いということを念頭に置く。</p>

<h1>
<span id="実施環境" class="fragment"></span><a href="#%E5%AE%9F%E6%96%BD%E7%92%B0%E5%A2%83"><i class="fa fa-link"></i></a>実施環境</h1>

<p>.NET：3.1.401<br>
C#：8.0<br>
NUnit：3.12.0<br>
Coverlet：2.9.0<br>
ReportGenerator：4.6.7</p>

<p>今回、テストデータコレクターとしてCoverlet、<br>
レポートジェネレータとしてReportGeneratorを使用する。</p>

<h1>
<span id="事前準備" class="fragment"></span><a href="#%E4%BA%8B%E5%89%8D%E6%BA%96%E5%82%99"><i class="fa fa-link"></i></a>事前準備</h1>

<h2>
<span id="1プロジェクト作成" class="fragment"></span><a href="#1%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E4%BD%9C%E6%88%90"><i class="fa fa-link"></i></a>1.プロジェクト作成</h2>

<p>まず、テスト対象のコードを持つプロジェクトと<br>
テスト用プロジェクトを作成する。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>NUnitTestCoverage
│  NUnitTestCoverage.sln
│
├─TargetLib
│  │  TrafficLight.cs
│  │  TargetLib.csproj
│  │
│  └─obj
│      {省略}
│
└─TargetLibTest
    │  TargetLibTest.csproj
    │  TrafficLightTest.cs
    │
    └─obj
        {省略}
</code></pre></div></div>

<p><code>TargetLib</code>がテスト対象のプロジェクトで<br>
<code>TargetLibTest</code>がテスト用のプロジェクト。<br>
<code>TargetLibTest</code>から<code>TargetLib</code>が参照できるようにしておく。</p>

<h2>
<span id="2テスト用ツールの追加" class="fragment"></span><a href="#2%E3%83%86%E3%82%B9%E3%83%88%E7%94%A8%E3%83%84%E3%83%BC%E3%83%AB%E3%81%AE%E8%BF%BD%E5%8A%A0"><i class="fa fa-link"></i></a>2.テスト用ツールの追加</h2>

<p>テスト用プロジェクトにCocerletパッケージを追加する。<br>
<code>TargetLibTest</code>プロジェクト配下に移動し、以下のコマンドを実行する。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>dotnet add package coverlet.msbuild
</code></pre></div></div>

<p>すると、TargetLibTest.csprojに以下の依存関係の設定が追加される。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>&lt;PackageReference Include="coverlet.msbuild" Version="2.9.0"&gt;
  &lt;IncludeAssets&gt;runtime; build; native; contentfiles; analyzers; buildtransitive&lt;/IncludeAssets&gt;
  &lt;PrivateAssets&gt;all&lt;/PrivateAssets&gt;
&lt;/PackageReference&gt;
</code></pre></div></div>

<p>次にReportGeneratorをインストールする。<br>
以下のコマンドを実行。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>dotnet tool install --global dotnet-reportgenerator-globaltool --version 4.6.7
</code></pre></div></div>

<p>コマンドラインで<code>reportgenerator</code>コマンドを打ってヘルプが表示されればOK。</p>

<h2>
<span id="3テスト対象クラス作成" class="fragment"></span><a href="#3%E3%83%86%E3%82%B9%E3%83%88%E5%AF%BE%E8%B1%A1%E3%82%AF%E3%83%A9%E3%82%B9%E4%BD%9C%E6%88%90"><i class="fa fa-link"></i></a>3.テスト対象クラス作成</h2>

<p>今回は下記のような信号機クラスを作成した。</p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code>    <span class="k">public</span> <span class="k">class</span> <span class="nc">TrafficLight</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="k">enum</span> <span class="n">Color</span> <span class="p">{</span><span class="n">BLUE</span><span class="p">,</span> <span class="n">YELLOW</span><span class="p">,</span> <span class="n">RED</span><span class="p">}</span>

        <span class="k">public</span> <span class="k">static</span> <span class="kt">string</span> <span class="nf">judge</span><span class="p">(</span><span class="n">Color</span> <span class="n">color</span><span class="p">)</span> <span class="p">{</span>

            <span class="k">switch</span><span class="p">(</span><span class="n">color</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">case</span> <span class="n">Color</span><span class="p">.</span><span class="n">BLUE</span><span class="p">:</span>
                    <span class="k">return</span> <span class="s">"進め！"</span><span class="p">;</span>
                <span class="k">case</span> <span class="n">Color</span><span class="p">.</span><span class="n">YELLOW</span><span class="p">:</span>
                    <span class="k">return</span> <span class="s">"注意して進め！"</span><span class="p">;</span>
                <span class="k">case</span> <span class="n">Color</span><span class="p">.</span><span class="n">RED</span><span class="p">:</span>
                    <span class="k">return</span> <span class="s">"止まれ！"</span><span class="p">;</span>
                <span class="k">default</span><span class="p">:</span>
                    <span class="k">throw</span> <span class="k">new</span> <span class="nf">ArgumentOutOfRangeException</span><span class="p">();</span>
            <span class="p">}</span>

        <span class="p">}</span>
    <span class="p">}</span>
</code></pre></div></div>

<h1>
<span id="テスト実施" class="fragment"></span><a href="#%E3%83%86%E3%82%B9%E3%83%88%E5%AE%9F%E6%96%BD"><i class="fa fa-link"></i></a>テスト実施</h1>

<h2>
<span id="1テストメソッド作成" class="fragment"></span><a href="#1%E3%83%86%E3%82%B9%E3%83%88%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E4%BD%9C%E6%88%90"><i class="fa fa-link"></i></a>1.テストメソッド作成</h2>

<p>まずは、テスト用プロジェクトに<br>
以下のようなテストクラスを作成する。</p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="k">using</span> <span class="nn">NUnit.Framework</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">TargetLib</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">static</span> <span class="n">TargetLib</span><span class="p">.</span><span class="n">TrafficLight</span><span class="p">.</span><span class="n">Color</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">TargetLibTest</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">TrafficLightTest</span>
    <span class="p">{</span>
        <span class="p">[</span><span class="nf">TestCase</span><span class="p">(</span><span class="n">BLUE</span><span class="p">)]</span>
        <span class="k">public</span> <span class="k">void</span> <span class="nf">TrafficLight_judge_success</span><span class="p">(</span><span class="n">TrafficLight</span><span class="p">.</span><span class="n">Color</span> <span class="n">color</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="kt">string</span> <span class="n">result</span> <span class="p">=</span> <span class="n">TrafficLight</span><span class="p">.</span><span class="nf">judge</span><span class="p">(</span><span class="n">color</span><span class="p">);</span>
            <span class="n">Assert</span><span class="p">.</span><span class="nf">AreEqual</span><span class="p">(</span><span class="s">"進め！"</span><span class="p">,</span> <span class="n">result</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span> 
</code></pre></div></div>

<p>このテスト内容でテストを実施、およびテスト結果情報を収集してみよう。</p>

<h2>
<span id="2-テスト実施結果収集" class="fragment"></span><a href="#2-%E3%83%86%E3%82%B9%E3%83%88%E5%AE%9F%E6%96%BD%E7%B5%90%E6%9E%9C%E5%8F%8E%E9%9B%86"><i class="fa fa-link"></i></a>2. テスト実施、結果収集</h2>

<p>テスト用プロジェクト配下で以下のコマンドを実行する。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>dotnet test /p:CollectCoverage=true /p:CoverletOutputFormat=cobertura /p:CoverletOutput=./TestResults/20201003_120000/NUnitTestResult.xml
</code></pre></div></div>

<p>オプションの<code>/p:CoverletOutput</code>にはテスト結果収集ファイルを保存する場所、ファイル名を指定する。<br>
存在しないフォルダは自動的に生成される。</p>

<p>今回は<code>./TestResults/{テスト実行日時(yyymmdd_hhmiss)}/NUnitTestResult.xml</code>を指定した。<br>
単体テストは何度も実施することになるし、後々のテスト自動化のことを考えると<br>
日時を含むフォルダ名を含めた方が良いだろう。</p>

<p>上記コマンドを実行すると下記のようなメッセージが表示される。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>M:\develop\tools\VSCode\VSCodeWorkspace\NUnitTestCoverage\TargetLibTest\bin\Debug\netcoreapp3.1\TargetLibTest.dll(.NETCoreApp,Version=v3.1) のテスト実行
Microsoft (R) Test Execution Command Line Tool Version 16.7.0
Copyright (c) Microsoft Corporation.  All rights reserved.

テスト実行を開始しています。お待ちください...

合計 1 個のテスト ファイルが指定されたパターンと一致しました。

テストの実行に成功しました。
テストの合計数: 1
     成功: 1
合計時間: 0.6666 秒

Calculating coverage result...
  Generating report '.\TestResults\20201003_120000\NUnitTestResult.xml'

+-----------+--------+--------+--------+
| Module    | Line   | Branch | Method |
+-----------+--------+--------+--------+
| TargetLib | 57.14% | 25%    | 100%   |
+-----------+--------+--------+--------+

+---------+--------+--------+--------+
|         | Line   | Branch | Method |
+---------+--------+--------+--------+
| Total   | 57.14% | 25%    | 100%   |
+---------+--------+--------+--------+
| Average | 57.14% | 25%    | 100%   |
+---------+--------+--------+--------+
</code></pre></div></div>

<p>この時点である程度のカバレッジ情報を把握することができる。</p>

<h2>
<span id="3-レポートの生成" class="fragment"></span><a href="#3-%E3%83%AC%E3%83%9D%E3%83%BC%E3%83%88%E3%81%AE%E7%94%9F%E6%88%90"><i class="fa fa-link"></i></a>3. レポートの生成</h2>

<p>次に以下のコマンドでカバレッジレポートを生成する。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>reportgenerator -reports:./TestResults/20201003_120000/NUnitTestResult.xml -targetdir:./TestResults/20201003_120000 -reporttypes:Html
</code></pre></div></div>

<p>オプションの<code>-reports</code>には先ほどテスト実施時に出力したテスト結果収集ファイルを指定、<br>
<code>-targetdir</code>にはレポート出力先のディレクトリを指定する。<br>
テスト結果収集ファイルと同じ場所を指定しているが、違う場所を指定してもよい。</p>

<p>コマンドを実行すると指定したフォルダ配下に以下のようにHTML等のファイル群が生成される。<br>
<a href="https://camo.qiitausercontent.com/d60034a3691c96b38640c7fde03d7b29f1db8cb6/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3731323335322f64353866623735662d346437322d353937332d313538352d3062653334313430316164322e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F712352%2Fd58fb75f-4d72-5973-1585-0be341401ad2.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=2a2cf1cb7544d2d746034e3554f5ce46" alt="スクリーンショット 2020-10-03 122111.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/712352/d58fb75f-4d72-5973-1585-0be341401ad2.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F712352%2Fd58fb75f-4d72-5973-1585-0be341401ad2.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=49c5cb616b19e5d855b96cd5bb1a520b 1x" loading="lazy"></a><br>
これでめでたくレポート生成ができた。<br>
早速<code>index.html</code>を開いてみるとこんな感じだ。</p>

<p><a href="https://camo.qiitausercontent.com/d89fb8206c2836514b6bf829ad3e3897bd5b7efe/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3731323335322f39653335653035332d363533392d613130642d383132312d6330663064653630643638352e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F712352%2F9e35e053-6539-a10d-8121-c0f0de60d685.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=c5f916ad4969f759b9c7db7e3bd34a27" alt="スクリーンショット 2020-10-03 122609.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/712352/9e35e053-6539-a10d-8121-c0f0de60d685.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F712352%2F9e35e053-6539-a10d-8121-c0f0de60d685.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=b0d3ca670d3c80e7dd4ca2e83ebcf1f5 1x" loading="lazy"></a><br>
テスト対象クラスの行数カバレッジ率や分岐カバレッジ率がパっと見でわかるようになっている。<br>
これはいい<img alt=":relaxed:" class="emoji" height="20" src="https://cdn.qiita.com/emoji/twemoji/unicode/263a-fe0f.png" title=":relaxed:" width="20" loading="lazy"><br>
下の方にある表の一番左の列の対象クラス名のリンクをクリックすると<br>
対象クラスのカバレッジの詳細が見ることができる。<br>
<a href="https://camo.qiitausercontent.com/80c15685a38294e965e290f422fe4d7a6ca7d53a/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3731323335322f36363330306464382d633938322d383361632d393361662d6365316636303831313965372e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F712352%2F66300dd8-c982-83ac-93af-ce1f608119e7.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=12e372a14993351a4bf86de82c0cf9e2" alt="スクリーンショット 2020-10-03 123630.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/712352/66300dd8-c982-83ac-93af-ce1f608119e7.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F712352%2F66300dd8-c982-83ac-93af-ce1f608119e7.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=8131d3b6801203235b74873a22726dc7 1x" loading="lazy"></a><br>
コードのどの部分がテストによって実行されたかが一目で分かる。（背景が緑部分が実行された箇所）<br>
コードの左側の数値は実行回数（判定回数？）を表している。</p>

<p>今回はjudgeメソッドに引数をColor.BLUEだけ指定するテストしかないのでこのような結果となった。<br>
試しにテストコードを変えて、全コードを通るようにしてみよう。</p>

<ul>
<li>テストコード</li>
</ul>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code>        <span class="p">[</span><span class="nf">TestCase</span><span class="p">(</span><span class="n">BLUE</span><span class="p">,</span> <span class="s">"進め！"</span><span class="p">)]</span>
        <span class="p">[</span><span class="nf">TestCase</span><span class="p">(</span><span class="n">YELLOW</span><span class="p">,</span> <span class="s">"注意して進め！"</span><span class="p">)]</span>
        <span class="p">[</span><span class="nf">TestCase</span><span class="p">(</span><span class="n">RED</span><span class="p">,</span> <span class="s">"止まれ！"</span><span class="p">)]</span>
        <span class="k">public</span> <span class="k">void</span> <span class="nf">TrafficLight_judge_success</span><span class="p">(</span><span class="n">TrafficLight</span><span class="p">.</span><span class="n">Color</span> <span class="n">color</span><span class="p">,</span> <span class="kt">string</span> <span class="n">expectedResult</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="kt">string</span> <span class="n">result</span> <span class="p">=</span> <span class="n">TrafficLight</span><span class="p">.</span><span class="nf">judge</span><span class="p">(</span><span class="n">color</span><span class="p">);</span>
            <span class="n">Assert</span><span class="p">.</span><span class="nf">AreEqual</span><span class="p">(</span><span class="n">expectedResult</span><span class="p">,</span> <span class="n">result</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="p">[</span><span class="nf">TestCase</span><span class="p">((</span><span class="n">TrafficLight</span><span class="p">.</span><span class="n">Color</span><span class="p">)</span><span class="kt">int</span><span class="p">.</span><span class="n">MaxValue</span><span class="p">)]</span>
        <span class="k">public</span> <span class="k">void</span> <span class="nf">TrafficLight_judge_failure</span><span class="p">(</span><span class="n">TrafficLight</span><span class="p">.</span><span class="n">Color</span> <span class="n">color</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">Assert</span><span class="p">.</span><span class="n">Throws</span><span class="p">&lt;</span><span class="n">ArgumentOutOfRangeException</span><span class="p">&gt;(()</span> <span class="p">=&gt;</span> <span class="n">TrafficLight</span><span class="p">.</span><span class="nf">judge</span><span class="p">(</span><span class="n">color</span><span class="p">));</span>
        <span class="p">}</span>
</code></pre></div></div>

<ul>
<li>カバレッジレポート</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/8a602b50ba6c6d5dd86fe74d6f5a3556bd053360/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3731323335322f38663637626231622d613765622d313531622d373437652d3235333863343832613361392e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F712352%2F8f67bb1b-a7eb-151b-747e-2538c482a3a9.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=2f88004d2d72632d914332091d254629" alt="スクリーンショット 2020-10-03 124527.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/712352/8f67bb1b-a7eb-151b-747e-2538c482a3a9.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F712352%2F8f67bb1b-a7eb-151b-747e-2538c482a3a9.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=7cabe535df6ead473ac08619155ee262 1x" loading="lazy"></a><br>
おぉー<img alt=":grin:" class="emoji" height="20" src="https://cdn.qiita.com/emoji/twemoji/unicode/1f601.png" title=":grin:" width="20" loading="lazy"><br>
行数・分岐カバレッジ率が両方とも100%になった。</p>

<h1>
<span id="その他" class="fragment"></span><a href="#%E3%81%9D%E3%81%AE%E4%BB%96"><i class="fa fa-link"></i></a>その他</h1>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code>        <span class="k">public</span> <span class="k">static</span> <span class="kt">string</span> <span class="nf">judge2</span><span class="p">(</span><span class="n">Color</span> <span class="n">color</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">color</span><span class="p">.</span><span class="nf">Equals</span><span class="p">(</span><span class="n">Color</span><span class="p">.</span><span class="n">BLUE</span><span class="p">)</span> <span class="p">||</span> <span class="n">color</span><span class="p">.</span><span class="nf">Equals</span><span class="p">(</span><span class="n">Color</span><span class="p">.</span><span class="n">YELLOW</span><span class="p">))</span> <span class="p">{</span>
                <span class="k">return</span> <span class="s">"進んでヨシ！"</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="s">"ダメ"</span><span class="p">;</span>
        <span class="p">}</span>
</code></pre></div></div>

<p>上記のようなテスト対象のコードがあって</p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code>        <span class="p">[</span><span class="nf">TestCase</span><span class="p">(</span><span class="n">BLUE</span><span class="p">,</span> <span class="s">"進んでヨシ！"</span><span class="p">)]</span>
        <span class="p">[</span><span class="nf">TestCase</span><span class="p">(</span><span class="n">RED</span><span class="p">,</span> <span class="s">"ダメ"</span><span class="p">)]</span>
        <span class="k">public</span> <span class="k">void</span> <span class="nf">TrafficLight_judge2_success</span><span class="p">(</span><span class="n">TrafficLight</span><span class="p">.</span><span class="n">Color</span> <span class="n">color</span><span class="p">,</span> <span class="kt">string</span> <span class="n">expectedResult</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="kt">string</span> <span class="n">result</span> <span class="p">=</span> <span class="n">TrafficLight</span><span class="p">.</span><span class="nf">judge2</span><span class="p">(</span><span class="n">color</span><span class="p">);</span>
            <span class="n">Assert</span><span class="p">.</span><span class="nf">AreEqual</span><span class="p">(</span><span class="n">expectedResult</span><span class="p">,</span> <span class="n">result</span><span class="p">);</span>
        <span class="p">}</span>
</code></pre></div></div>

<p>テストコードを上記のようにした場合、<br>
カバレッジ率はどうなるんだろうか？<br>
<a href="https://camo.qiitausercontent.com/62c9ae80d51da9fab715cac1db98914ee593bcaa/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3731323335322f62373466383730322d633134352d396630332d363138312d6234623332353139343436372e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F712352%2Fb74f8702-c145-9f03-6181-b4b325194467.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=82f1af840364962f798ef762e5bb2f2a" alt="スクリーンショット 2020-10-03 130245.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/712352/b74f8702-c145-9f03-6181-b4b325194467.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F712352%2Fb74f8702-c145-9f03-6181-b4b325194467.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=ccaff4b3c9b6236b31fb6a2f99e37f3d 1x" loading="lazy"></a><br>
結果はカバレッジ率100%になった。<br>
<strong>条件付き論理 OR 演算子→「||」</strong>の場合、左側がtrueの場合、右側の式は評価されない。<br>
今回の場合、10行目の<code>color.Equals(Color.YELLOW)</code>は評価されていないので<br>
分岐カバレッジ率100%になって欲しくなかったところだが、100%になるようだ。</p>

<p>ひょっとしたらCoverletオプションでなんとかできるかも？<br>
そこらへんは今度調べておきたい。</p>

<h1>
<span id="まとめ" class="fragment"></span><a href="#%E3%81%BE%E3%81%A8%E3%82%81"><i class="fa fa-link"></i></a>まとめ</h1>

<p>NUnitでカバレッジレポートまで作成できた。<br>
テスト用のツールをインストール・設定しておけばコマンドラインで実行できるので<br>
テスト実行用のシェルを作っておけば実装の度にパパっとテスト実行・レポート生成まで実施できる。<br>
CD/CIではこれらを利用する感じになるんだろうか？<br>
プロジェクト立ち上げの標準化に関わることが多いので<br>
DepOps系の知識を身に着けていきたいですな</p>

<h1>
<span id="参考" class="fragment"></span><a href="#%E5%8F%82%E8%80%83"><i class="fa fa-link"></i></a>参考</h1>

<p><a href="https://github.com/coverlet-coverage/coverlet" rel="nofollow noopener" target="_blank">Coverlet(GitHub)</a><br>
<a href="https://github.com/danielpalme/ReportGenerator" rel="nofollow noopener" target="_blank">ReportGenerator(GitHub)</a></p>
</div></div></section><div class="css-1yzj1fm"><div class="css-1uv1qiv"><span class="fa fa-twitter"></span></div><div class="css-1uv1qiv"><span class="fa fa-facebook"></span></div></div><div class="apm-Content"><div class="apm-Content_title">Why not register and get more from Qiita?</div><ol class="apm-Content_list"><li>We will deliver articles that match you<div class="description">By following users and tags, you can catch up information on technical fields that you are interested in as a whole</div></li><li>you can read useful information later efficiently<div class="description">By &quot;stocking&quot; the articles you like, you can search right away</div></li><div><a class="apm-Content_help" href="https://help.qiita.com/ja/articles/qiita-login-user" target="_blank"><i class="fa fa-fw fa-arrow-circle-right"></i>What you can do with signing up</a></div></ol><a href="/signup?callback_action=login_or_signup&amp;redirect_to=%2Fsuganury%2Fitems%2F62e0770d16eb579799d8&amp;realm=qiita" class="apm-Content_button apm-Content_button-signup">Sign up</a><a href="/login?callback_action=login_or_signup&amp;redirect_to=%2Fsuganury%2Fitems%2F62e0770d16eb579799d8&amp;realm=qiita" class="apm-Content_button apm-Content_button-signin">Login</a></div></div><div class="css-helsa7"></div></div></div></div><div class="css-109dbrr"><div class="css-5jpx49"><div class="css-mnxgyc"><button class=" css-1vlpknv"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/suganury/items/62e0770d16eb579799d8/likers" class="css-1iupg5d">2</a></div><div class="css-fsjkhv"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-1b17vb0">2</span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-7i7f4d"><div class="css-1gj7nt">Improve article</div><a href="/drafts/62e0770d16eb579799d8/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/suganury/items/62e0770d16eb579799d8/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/suganury/items/62e0770d16eb579799d8/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/suganury/items/62e0770d16eb579799d8/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/suganury/items/62e0770d16eb579799d8.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="PersonalArticlePage" data-dom-id="PersonalArticlePage-react-component-b3aab32f-cdd3-423a-affb-0450291a2757">{"authorAnalyticsTrackingId":null,"organizationAnalyticsTrackingId":null}</script>
      
<footer id="globalFooter" class="st-Footer"><div class="st-Footer_container"><div class="st-Footer_start"><div class="st-Footer_logo"><svg viewbox="0 0 426.57 130" xmlns="http://www.w3.org/2000/svg"><circle cx="167.08" cy="21.4" r="12.28" /><path d="M250.81 29.66h23.48v18.9h-23.48z" /><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z" /><circle cx="216.33" cy="21.4" r="12.28" /></svg></div><div class="st-Footer_catchcopy">How developers code is here.</div><div class="st-Footer_socials"><a class="fa fa-twitter" href="https://twitter.com/qiita"></a><a class="fa fa-facebook-square" href="https://www.facebook.com/qiita/"></a></div></div><div class="st-Footer_end"><div class="st-Footer_qiita"><div class="st-Footer_label">Qiita</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="/about">About</a><a href="/terms">Terms</a><a href="/privacy">Privacy</a><a target="_blank" href="http://help.qiita.com/ja/articles/qiita-community-guideline">Guideline</a><a target="_blank" href="https://help.qiita.com/ja/articles/others-brand-guideline">Design Guideline</a></div><div class="st-Footer_column"><a href="/release-notes">Release</a><a href="/api/v2/docs">API</a><a href="/feedback/new">ご意見</a><a href="https://help.qiita.com">Help</a><a target="_blank" href="https://qiita.com/ads?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Advertisement</a></div></div></div><div class="st-Footer_increments"><div class="st-Footer_label">Increments</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="https://increments.co.jp/company/">About</a><a href="https://increments.co.jp/jobs/">採用情報</a><a href="https://blog.qiita.com">Blog</a></div><div class="st-Footer_column"><a href="https://teams.qiita.com/">Qiita Team</a><a href="https://jobs.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Jobs</a><a href="https://zine.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Zine</a></div></div></div></div></div><div class="st-Footer_copyright">© 2011-2021 Increments Inc.</div></footer><div id="Snackbar-react-component-8f947f47-87c0-465f-b291-182842f8350b"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="Snackbar" data-dom-id="Snackbar-react-component-8f947f47-87c0-465f-b291-182842f8350b">{}</script>
      
<div id="LoginModal-react-component-5f9df3e6-e64e-4316-bbc6-9d925ea78cf7"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="LoginModal" data-dom-id="LoginModal-react-component-5f9df3e6-e64e-4316-bbc6-9d925ea78cf7">{}</script>
      
<div id="StockModal-react-component-be669760-0c25-41ec-bf9b-9a188a8950f3"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="StockModal" data-dom-id="StockModal-react-component-be669760-0c25-41ec-bf9b-9a188a8950f3">{}</script>
      
</div><div id="dataContainer" style="display: none;" data-config="{&quot;actionPath&quot;:&quot;public/items#show&quot;,&quot;settings&quot;:{&quot;analyticsTrackingId&quot;:&quot;UA-24675221-12&quot;,&quot;assetsMap&quot;:{},&quot;csrfToken&quot;:&quot;9tqgrVYjWPRdLjuKrbpqIbxrE+AaynatoH3GBXp+JWmUS/beNOVPq8Hv3qveC+hvW3b8eZujAZxwfj+6pwP/Wg==&quot;,&quot;locale&quot;:&quot;en&quot;},&quot;currentUser&quot;:null}" /></body></html><script type="application/json" data-js-react-on-rails-store="AppStoreWithReactOnRails">{"snackbar":{"type":"","body":"","isActive":false},"article":{"article":{"body":"\n\u003ch1\u003e\n\u003cspan id=\"はじめに\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eはじめに\u003c/h1\u003e\n\n\u003cp\u003e前回、NUnitによる単体テスト自動化方法を学んだので、\u003cbr\u003e\n今回は実行したNUnitテストのコードカバレッジレポートを自動生成してみる。\u003c/p\u003e\n\n\u003cp\u003e【前回】\u003cbr\u003e\n\u003ca href=\"https://qiita.com/suganury/items/d255ae140373af7d0146\" id=\"reference-7d7471ca24aa4e4e022d\"\u003e[.NET][C#]NUnitを使用して単体テスト自動化　基本編\u003c/a\u003e\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"テストコードカバレッジとは\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%86%E3%82%B9%E3%83%88%E3%82%B3%E3%83%BC%E3%83%89%E3%82%AB%E3%83%90%E3%83%AC%E3%83%83%E3%82%B8%E3%81%A8%E3%81%AF\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e(テスト)コードカバレッジとは\u003c/h1\u003e\n\n\u003cblockquote\u003e\n\u003cp\u003eコードカバレッジとは、単体テストで実行する、行、分岐、またはメソッドのいずれかのコード量の尺度です。 たとえば、条件分岐が (分岐 a と\u003cem\u003e分岐 b\u003c/em\u003e の) 2 つしかない単純なアプリケーションのコードで、条件付き\u003cem\u003e分岐 a\u003c/em\u003e を単体テストで検証する場合、分岐のコードカバレッジは 50% と報告されます。\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003cp\u003e\u003ca href=\"https://docs.microsoft.com/ja-jp/dotnet/core/testing/unit-testing-code-coverage\" rel=\"nofollow noopener\" target=\"_blank\"\u003eMicroSoft 単体テストにコードカバレッジを使用する\u003c/a\u003e　より引用\u003c/p\u003e\n\n\u003cp\u003eつまり、テスト実行によってテスト対象のコードを\u003cbr\u003e\nどれだけ網羅できたかを示す。\u003cbr\u003e\nこれによりテスト抜け漏れのコードが無いかを検知できる。\u003c/p\u003e\n\n\u003cp\u003eただし、あくまでコードの網羅率を示すだけのものであり、\u003cbr\u003e\n機能の正しさ、テストの正しさを完全に保証するものではない。\u003cbr\u003e\n例えば引数の四捨五入結果を返すメソッドに引数として1と9を渡すテストを行えば、\u003cbr\u003e\n切り捨て・繰り上げのすべてのコードを網羅するだろうが、\u003cbr\u003e\nその境目の判定が想定通り機能するかはテストされていない。\u003cbr\u003e\nコードカバレッジが100%だからといって完全にバグを取り除けたということは無いということを念頭に置く。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"実施環境\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AE%9F%E6%96%BD%E7%92%B0%E5%A2%83\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e実施環境\u003c/h1\u003e\n\n\u003cp\u003e.NET：3.1.401\u003cbr\u003e\nC#：8.0\u003cbr\u003e\nNUnit：3.12.0\u003cbr\u003e\nCoverlet：2.9.0\u003cbr\u003e\nReportGenerator：4.6.7\u003c/p\u003e\n\n\u003cp\u003e今回、テストデータコレクターとしてCoverlet、\u003cbr\u003e\nレポートジェネレータとしてReportGeneratorを使用する。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"事前準備\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E4%BA%8B%E5%89%8D%E6%BA%96%E5%82%99\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e事前準備\u003c/h1\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"1プロジェクト作成\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#1%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E4%BD%9C%E6%88%90\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e1.プロジェクト作成\u003c/h2\u003e\n\n\u003cp\u003eまず、テスト対象のコードを持つプロジェクトと\u003cbr\u003e\nテスト用プロジェクトを作成する。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eNUnitTestCoverage\n│  NUnitTestCoverage.sln\n│\n├─TargetLib\n│  │  TrafficLight.cs\n│  │  TargetLib.csproj\n│  │\n│  └─obj\n│      {省略}\n│\n└─TargetLibTest\n    │  TargetLibTest.csproj\n    │  TrafficLightTest.cs\n    │\n    └─obj\n        {省略}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e\u003ccode\u003eTargetLib\u003c/code\u003eがテスト対象のプロジェクトで\u003cbr\u003e\n\u003ccode\u003eTargetLibTest\u003c/code\u003eがテスト用のプロジェクト。\u003cbr\u003e\n\u003ccode\u003eTargetLibTest\u003c/code\u003eから\u003ccode\u003eTargetLib\u003c/code\u003eが参照できるようにしておく。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"2テスト用ツールの追加\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#2%E3%83%86%E3%82%B9%E3%83%88%E7%94%A8%E3%83%84%E3%83%BC%E3%83%AB%E3%81%AE%E8%BF%BD%E5%8A%A0\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e2.テスト用ツールの追加\u003c/h2\u003e\n\n\u003cp\u003eテスト用プロジェクトにCocerletパッケージを追加する。\u003cbr\u003e\n\u003ccode\u003eTargetLibTest\u003c/code\u003eプロジェクト配下に移動し、以下のコマンドを実行する。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003edotnet add package coverlet.msbuild\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eすると、TargetLibTest.csprojに以下の依存関係の設定が追加される。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u0026lt;PackageReference Include=\"coverlet.msbuild\" Version=\"2.9.0\"\u0026gt;\n  \u0026lt;IncludeAssets\u0026gt;runtime; build; native; contentfiles; analyzers; buildtransitive\u0026lt;/IncludeAssets\u0026gt;\n  \u0026lt;PrivateAssets\u0026gt;all\u0026lt;/PrivateAssets\u0026gt;\n\u0026lt;/PackageReference\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e次にReportGeneratorをインストールする。\u003cbr\u003e\n以下のコマンドを実行。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003edotnet tool install --global dotnet-reportgenerator-globaltool --version 4.6.7\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eコマンドラインで\u003ccode\u003ereportgenerator\u003c/code\u003eコマンドを打ってヘルプが表示されればOK。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"3テスト対象クラス作成\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#3%E3%83%86%E3%82%B9%E3%83%88%E5%AF%BE%E8%B1%A1%E3%82%AF%E3%83%A9%E3%82%B9%E4%BD%9C%E6%88%90\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e3.テスト対象クラス作成\u003c/h2\u003e\n\n\u003cp\u003e今回は下記のような信号機クラスを作成した。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eTrafficLight\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eenum\u003c/span\u003e \u003cspan class=\"n\"\u003eColor\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003eBLUE\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eYELLOW\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eRED\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003estatic\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"nf\"\u003ejudge\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eColor\u003c/span\u003e \u003cspan class=\"n\"\u003ecolor\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\n            \u003cspan class=\"k\"\u003eswitch\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ecolor\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"k\"\u003ecase\u003c/span\u003e \u003cspan class=\"n\"\u003eColor\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eBLUE\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n                    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"s\"\u003e\"進め！\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n                \u003cspan class=\"k\"\u003ecase\u003c/span\u003e \u003cspan class=\"n\"\u003eColor\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eYELLOW\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n                    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"s\"\u003e\"注意して進め！\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n                \u003cspan class=\"k\"\u003ecase\u003c/span\u003e \u003cspan class=\"n\"\u003eColor\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eRED\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n                    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"s\"\u003e\"止まれ！\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n                \u003cspan class=\"k\"\u003edefault\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n                    \u003cspan class=\"k\"\u003ethrow\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eArgumentOutOfRangeException\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"テスト実施\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%86%E3%82%B9%E3%83%88%E5%AE%9F%E6%96%BD\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eテスト実施\u003c/h1\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"1テストメソッド作成\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#1%E3%83%86%E3%82%B9%E3%83%88%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E4%BD%9C%E6%88%90\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e1.テストメソッド作成\u003c/h2\u003e\n\n\u003cp\u003eまずは、テスト用プロジェクトに\u003cbr\u003e\n以下のようなテストクラスを作成する。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eNUnit.Framework\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eTargetLib\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003estatic\u003c/span\u003e \u003cspan class=\"n\"\u003eTargetLib\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eTrafficLight\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eColor\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003enamespace\u003c/span\u003e \u003cspan class=\"nn\"\u003eTargetLibTest\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eTrafficLightTest\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nf\"\u003eTestCase\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eBLUE\u003c/span\u003e\u003cspan class=\"p\"\u003e)]\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eTrafficLight_judge_success\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eTrafficLight\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eColor\u003c/span\u003e \u003cspan class=\"n\"\u003ecolor\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003eresult\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eTrafficLight\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003ejudge\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ecolor\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eAssert\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAreEqual\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"進め！\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e \n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eこのテスト内容でテストを実施、およびテスト結果情報を収集してみよう。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"2-テスト実施結果収集\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#2-%E3%83%86%E3%82%B9%E3%83%88%E5%AE%9F%E6%96%BD%E7%B5%90%E6%9E%9C%E5%8F%8E%E9%9B%86\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e2. テスト実施、結果収集\u003c/h2\u003e\n\n\u003cp\u003eテスト用プロジェクト配下で以下のコマンドを実行する。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003edotnet test /p:CollectCoverage=true /p:CoverletOutputFormat=cobertura /p:CoverletOutput=./TestResults/20201003_120000/NUnitTestResult.xml\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eオプションの\u003ccode\u003e/p:CoverletOutput\u003c/code\u003eにはテスト結果収集ファイルを保存する場所、ファイル名を指定する。\u003cbr\u003e\n存在しないフォルダは自動的に生成される。\u003c/p\u003e\n\n\u003cp\u003e今回は\u003ccode\u003e./TestResults/{テスト実行日時(yyymmdd_hhmiss)}/NUnitTestResult.xml\u003c/code\u003eを指定した。\u003cbr\u003e\n単体テストは何度も実施することになるし、後々のテスト自動化のことを考えると\u003cbr\u003e\n日時を含むフォルダ名を含めた方が良いだろう。\u003c/p\u003e\n\n\u003cp\u003e上記コマンドを実行すると下記のようなメッセージが表示される。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eM:\\develop\\tools\\VSCode\\VSCodeWorkspace\\NUnitTestCoverage\\TargetLibTest\\bin\\Debug\\netcoreapp3.1\\TargetLibTest.dll(.NETCoreApp,Version=v3.1) のテスト実行\nMicrosoft (R) Test Execution Command Line Tool Version 16.7.0\nCopyright (c) Microsoft Corporation.  All rights reserved.\n\nテスト実行を開始しています。お待ちください...\n\n合計 1 個のテスト ファイルが指定されたパターンと一致しました。\n\nテストの実行に成功しました。\nテストの合計数: 1\n     成功: 1\n合計時間: 0.6666 秒\n\nCalculating coverage result...\n  Generating report '.\\TestResults\\20201003_120000\\NUnitTestResult.xml'\n\n+-----------+--------+--------+--------+\n| Module    | Line   | Branch | Method |\n+-----------+--------+--------+--------+\n| TargetLib | 57.14% | 25%    | 100%   |\n+-----------+--------+--------+--------+\n\n+---------+--------+--------+--------+\n|         | Line   | Branch | Method |\n+---------+--------+--------+--------+\n| Total   | 57.14% | 25%    | 100%   |\n+---------+--------+--------+--------+\n| Average | 57.14% | 25%    | 100%   |\n+---------+--------+--------+--------+\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eこの時点である程度のカバレッジ情報を把握することができる。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"3-レポートの生成\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#3-%E3%83%AC%E3%83%9D%E3%83%BC%E3%83%88%E3%81%AE%E7%94%9F%E6%88%90\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e3. レポートの生成\u003c/h2\u003e\n\n\u003cp\u003e次に以下のコマンドでカバレッジレポートを生成する。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003ereportgenerator -reports:./TestResults/20201003_120000/NUnitTestResult.xml -targetdir:./TestResults/20201003_120000 -reporttypes:Html\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eオプションの\u003ccode\u003e-reports\u003c/code\u003eには先ほどテスト実施時に出力したテスト結果収集ファイルを指定、\u003cbr\u003e\n\u003ccode\u003e-targetdir\u003c/code\u003eにはレポート出力先のディレクトリを指定する。\u003cbr\u003e\nテスト結果収集ファイルと同じ場所を指定しているが、違う場所を指定してもよい。\u003c/p\u003e\n\n\u003cp\u003eコマンドを実行すると指定したフォルダ配下に以下のようにHTML等のファイル群が生成される。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/d60034a3691c96b38640c7fde03d7b29f1db8cb6/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3731323335322f64353866623735662d346437322d353937332d313538352d3062653334313430316164322e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F712352%2Fd58fb75f-4d72-5973-1585-0be341401ad2.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=2a2cf1cb7544d2d746034e3554f5ce46\" alt=\"スクリーンショット 2020-10-03 122111.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/712352/d58fb75f-4d72-5973-1585-0be341401ad2.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F712352%2Fd58fb75f-4d72-5973-1585-0be341401ad2.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=49c5cb616b19e5d855b96cd5bb1a520b 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003cbr\u003e\nこれでめでたくレポート生成ができた。\u003cbr\u003e\n早速\u003ccode\u003eindex.html\u003c/code\u003eを開いてみるとこんな感じだ。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/d89fb8206c2836514b6bf829ad3e3897bd5b7efe/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3731323335322f39653335653035332d363533392d613130642d383132312d6330663064653630643638352e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F712352%2F9e35e053-6539-a10d-8121-c0f0de60d685.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=c5f916ad4969f759b9c7db7e3bd34a27\" alt=\"スクリーンショット 2020-10-03 122609.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/712352/9e35e053-6539-a10d-8121-c0f0de60d685.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F712352%2F9e35e053-6539-a10d-8121-c0f0de60d685.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=b0d3ca670d3c80e7dd4ca2e83ebcf1f5 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003cbr\u003e\nテスト対象クラスの行数カバレッジ率や分岐カバレッジ率がパっと見でわかるようになっている。\u003cbr\u003e\nこれはいい\u003cimg alt=\":relaxed:\" class=\"emoji\" height=\"20\" src=\"https://cdn.qiita.com/emoji/twemoji/unicode/263a-fe0f.png\" title=\":relaxed:\" width=\"20\" loading=\"lazy\"\u003e\u003cbr\u003e\n下の方にある表の一番左の列の対象クラス名のリンクをクリックすると\u003cbr\u003e\n対象クラスのカバレッジの詳細が見ることができる。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/80c15685a38294e965e290f422fe4d7a6ca7d53a/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3731323335322f36363330306464382d633938322d383361632d393361662d6365316636303831313965372e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F712352%2F66300dd8-c982-83ac-93af-ce1f608119e7.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=12e372a14993351a4bf86de82c0cf9e2\" alt=\"スクリーンショット 2020-10-03 123630.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/712352/66300dd8-c982-83ac-93af-ce1f608119e7.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F712352%2F66300dd8-c982-83ac-93af-ce1f608119e7.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=8131d3b6801203235b74873a22726dc7 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003cbr\u003e\nコードのどの部分がテストによって実行されたかが一目で分かる。（背景が緑部分が実行された箇所）\u003cbr\u003e\nコードの左側の数値は実行回数（判定回数？）を表している。\u003c/p\u003e\n\n\u003cp\u003e今回はjudgeメソッドに引数をColor.BLUEだけ指定するテストしかないのでこのような結果となった。\u003cbr\u003e\n試しにテストコードを変えて、全コードを通るようにしてみよう。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eテストコード\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e        \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nf\"\u003eTestCase\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eBLUE\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\"進め！\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)]\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nf\"\u003eTestCase\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eYELLOW\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\"注意して進め！\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)]\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nf\"\u003eTestCase\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eRED\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\"止まれ！\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)]\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eTrafficLight_judge_success\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eTrafficLight\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eColor\u003c/span\u003e \u003cspan class=\"n\"\u003ecolor\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003eexpectedResult\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003eresult\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eTrafficLight\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003ejudge\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ecolor\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eAssert\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAreEqual\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eexpectedResult\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nf\"\u003eTestCase\u003c/span\u003e\u003cspan class=\"p\"\u003e((\u003c/span\u003e\u003cspan class=\"n\"\u003eTrafficLight\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eColor\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eMaxValue\u003c/span\u003e\u003cspan class=\"p\"\u003e)]\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eTrafficLight_judge_failure\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eTrafficLight\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eColor\u003c/span\u003e \u003cspan class=\"n\"\u003ecolor\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eAssert\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eThrows\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eArgumentOutOfRangeException\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(()\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eTrafficLight\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003ejudge\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ecolor\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cul\u003e\n\u003cli\u003eカバレッジレポート\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/8a602b50ba6c6d5dd86fe74d6f5a3556bd053360/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3731323335322f38663637626231622d613765622d313531622d373437652d3235333863343832613361392e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F712352%2F8f67bb1b-a7eb-151b-747e-2538c482a3a9.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=2f88004d2d72632d914332091d254629\" alt=\"スクリーンショット 2020-10-03 124527.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/712352/8f67bb1b-a7eb-151b-747e-2538c482a3a9.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F712352%2F8f67bb1b-a7eb-151b-747e-2538c482a3a9.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=7cabe535df6ead473ac08619155ee262 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003cbr\u003e\nおぉー\u003cimg alt=\":grin:\" class=\"emoji\" height=\"20\" src=\"https://cdn.qiita.com/emoji/twemoji/unicode/1f601.png\" title=\":grin:\" width=\"20\" loading=\"lazy\"\u003e\u003cbr\u003e\n行数・分岐カバレッジ率が両方とも100%になった。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"その他\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%9D%E3%81%AE%E4%BB%96\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eその他\u003c/h1\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003estatic\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"nf\"\u003ejudge2\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eColor\u003c/span\u003e \u003cspan class=\"n\"\u003ecolor\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eif\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ecolor\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eEquals\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eColor\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eBLUE\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e||\u003c/span\u003e \u003cspan class=\"n\"\u003ecolor\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eEquals\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eColor\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eYELLOW\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"s\"\u003e\"進んでヨシ！\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"s\"\u003e\"ダメ\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e上記のようなテスト対象のコードがあって\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e        \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nf\"\u003eTestCase\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eBLUE\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\"進んでヨシ！\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)]\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nf\"\u003eTestCase\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eRED\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\"ダメ\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)]\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eTrafficLight_judge2_success\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eTrafficLight\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eColor\u003c/span\u003e \u003cspan class=\"n\"\u003ecolor\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003eexpectedResult\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003eresult\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eTrafficLight\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003ejudge2\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ecolor\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eAssert\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAreEqual\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eexpectedResult\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eテストコードを上記のようにした場合、\u003cbr\u003e\nカバレッジ率はどうなるんだろうか？\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/62c9ae80d51da9fab715cac1db98914ee593bcaa/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3731323335322f62373466383730322d633134352d396630332d363138312d6234623332353139343436372e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F712352%2Fb74f8702-c145-9f03-6181-b4b325194467.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=82f1af840364962f798ef762e5bb2f2a\" alt=\"スクリーンショット 2020-10-03 130245.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/712352/b74f8702-c145-9f03-6181-b4b325194467.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F712352%2Fb74f8702-c145-9f03-6181-b4b325194467.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=ccaff4b3c9b6236b31fb6a2f99e37f3d 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003cbr\u003e\n結果はカバレッジ率100%になった。\u003cbr\u003e\n\u003cstrong\u003e条件付き論理 OR 演算子→「||」\u003c/strong\u003eの場合、左側がtrueの場合、右側の式は評価されない。\u003cbr\u003e\n今回の場合、10行目の\u003ccode\u003ecolor.Equals(Color.YELLOW)\u003c/code\u003eは評価されていないので\u003cbr\u003e\n分岐カバレッジ率100%になって欲しくなかったところだが、100%になるようだ。\u003c/p\u003e\n\n\u003cp\u003eひょっとしたらCoverletオプションでなんとかできるかも？\u003cbr\u003e\nそこらへんは今度調べておきたい。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"まとめ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%BE%E3%81%A8%E3%82%81\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eまとめ\u003c/h1\u003e\n\n\u003cp\u003eNUnitでカバレッジレポートまで作成できた。\u003cbr\u003e\nテスト用のツールをインストール・設定しておけばコマンドラインで実行できるので\u003cbr\u003e\nテスト実行用のシェルを作っておけば実装の度にパパっとテスト実行・レポート生成まで実施できる。\u003cbr\u003e\nCD/CIではこれらを利用する感じになるんだろうか？\u003cbr\u003e\nプロジェクト立ち上げの標準化に関わることが多いので\u003cbr\u003e\nDepOps系の知識を身に着けていきたいですな\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"参考\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%8F%82%E8%80%83\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e参考\u003c/h1\u003e\n\n\u003cp\u003e\u003ca href=\"https://github.com/coverlet-coverage/coverlet\" rel=\"nofollow noopener\" target=\"_blank\"\u003eCoverlet(GitHub)\u003c/a\u003e\u003cbr\u003e\n\u003ca href=\"https://github.com/danielpalme/ReportGenerator\" rel=\"nofollow noopener\" target=\"_blank\"\u003eReportGenerator(GitHub)\u003c/a\u003e\u003c/p\u003e\n","createdAt":"2020-10-03T04:34:15Z","elapsedYearsFromLastModifiedAt":0,"encryptedId":"fxkRP5iCJM7vKmQ9RPLm3qI+U/taSOrRjA==--KZW3n7ZOV3q2ZA7k--/wXlGBAFTTljP/MZSAPg4A==","isBanned":false,"isDeprecated":false,"isDestroyableByViewer":false,"isEditRequestReadableByViewer":true,"isEditRequestSendableByViewer":true,"isLikableByViewer":true,"isLikedByViewer":false,"isPublic":true,"isSlide":false,"isStockableByViewer":true,"isStockedByViewer":false,"isSubscribableByViewer":false,"isSubscribedByViewer":false,"isUpdatableByViewer":false,"isUpdated":true,"lastModifiedAt":"2020-10-10T14:08:18Z","likesCount":2,"linkUrl":"https://qiita.com/suganury/items/62e0770d16eb579799d8","organization":null,"originalId":1313210,"stockedCount":2,"title":"[.NET][C#]NUnitを使用した単体テストのカバレッジレポートを自動生成する","toc":"\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB\"\u003eはじめに\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%86%E3%82%B9%E3%83%88%E3%82%B3%E3%83%BC%E3%83%89%E3%82%AB%E3%83%90%E3%83%AC%E3%83%83%E3%82%B8%E3%81%A8%E3%81%AF\"\u003e(テスト)コードカバレッジとは\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AE%9F%E6%96%BD%E7%92%B0%E5%A2%83\"\u003e実施環境\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E4%BA%8B%E5%89%8D%E6%BA%96%E5%82%99\"\u003e事前準備\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#1%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E4%BD%9C%E6%88%90\"\u003e1.プロジェクト作成\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#2%E3%83%86%E3%82%B9%E3%83%88%E7%94%A8%E3%83%84%E3%83%BC%E3%83%AB%E3%81%AE%E8%BF%BD%E5%8A%A0\"\u003e2.テスト用ツールの追加\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#3%E3%83%86%E3%82%B9%E3%83%88%E5%AF%BE%E8%B1%A1%E3%82%AF%E3%83%A9%E3%82%B9%E4%BD%9C%E6%88%90\"\u003e3.テスト対象クラス作成\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%86%E3%82%B9%E3%83%88%E5%AE%9F%E6%96%BD\"\u003eテスト実施\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#1%E3%83%86%E3%82%B9%E3%83%88%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E4%BD%9C%E6%88%90\"\u003e1.テストメソッド作成\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#2-%E3%83%86%E3%82%B9%E3%83%88%E5%AE%9F%E6%96%BD%E7%B5%90%E6%9E%9C%E5%8F%8E%E9%9B%86\"\u003e2. テスト実施、結果収集\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#3-%E3%83%AC%E3%83%9D%E3%83%BC%E3%83%88%E3%81%AE%E7%94%9F%E6%88%90\"\u003e3. レポートの生成\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%81%9D%E3%81%AE%E4%BB%96\"\u003eその他\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%81%BE%E3%81%A8%E3%82%81\"\u003eまとめ\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%8F%82%E8%80%83\"\u003e参考\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n","totalPv":3060,"uuid":"62e0770d16eb579799d8","banReason":null,"adventCalendarItem":null,"author":{"encryptedId":"XnnFUQECZMjenwiuFfNC5PcPf66x--fJqC7vYH4wbe7sOy--26okHWB0VFq9i+OQeUORvA==","originalId":712352,"description":"レガシー脱却目指すおじさん","facebookUrl":null,"githubUrl":null,"isBlockingViewer":false,"isFollowableByViewer":true,"isFollowedByViewer":false,"isTweetWebNotificationReceivable":true,"linkedinUrl":null,"name":"","profileImageUrl":"https://abs.twimg.com/sticky/default_profile_images/default_profile_bigger.png","profileImageUrlW48":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fabs.twimg.com%2Fsticky%2Fdefault_profile_images%2Fdefault_profile_bigger.png?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=48\u0026s=2d49af83dfb78f619705d69709d6feaa","profileImageUrlW75":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fabs.twimg.com%2Fsticky%2Fdefault_profile_images%2Fdefault_profile_bigger.png?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=7db7f19f7449c608adab42dd38e24552","urlName":"suganury","websiteUrl":"","twitterUrl":"https://twitter.com/suganury","twitterUrlName":"suganury","revealedOrganizations":{"edges":[]}},"tags":[{"name":"C#","urlName":"csharp"},{"name":".NET","urlName":".net"},{"name":"NUnit","urlName":"nunit"},{"name":".NETCore","urlName":".netcore"}],"followingLikers":{"edges":[]},"comments":{"totalCount":2}},"comments":[],"client":null,"ads_event_emitter":null}}</script>
