More than 1 year has passed since last update.PopupWindowActionを記述したviewが生成されたタイミングでWindowContentで指定したView(紐づいているViewModelも)も生成される。
PopupWindowActionを何回実行してもWindowContentで指定したViewは再生成されずインスタンスが使い回される。PopupWindowActionを実行するたび新しくWindowContentTypeで指定したView(紐づいているViewModelも)が生成される。PRISMのサンプルを参照してPopupWindowActionを実装していたんですけど、WindowContent指定の方法しか載っていなくて、↑の挙動をしていてカスタムウィンドウの場合だと使いづらいなあと思っていたので調査しました。PopupWindowActionを見ればわかりました。ソースの通りWindowContent添付プロパティ以外にWindowContentType添付プロパティが定義されていて、両方定義されていた場合はWindowContentが優先されます。
WindowContentの場合はWindowContentで指定したインスタンスがそのまま設定されますが
WindowContentTypeの場合はコンテナから取得して設定されます。
なのでWindowContentTypeの場合の生成方法はコンテナ登録時の指定によりますがRegisterForNavigationで指定する分には都度生成でした。通知や確認などの簡単なウィンドウならWindowContetで指定して、カスタムウィンドウでゴリゴリやりたいならWindowContentType指定が良いかと思いました。


