More than 3 years have passed since last update.Stack Overflow に “Can .NET load and parse a properties file equivalent to Java Properties class?” (January, 2009) という質問があり、Java の properties ファイルを C# で読む方法を尋ねている。質問者のように、既存の properties ファイルに変更を加えずにそのまま C# で読みたいというケースは存在する。当該質問にはコード付きの回答が幾つか寄せられているが、私の回答を除き、いずれの実装も実用には耐えられない。存在しない仕様を勝手に追加しているものまである。; や ' をコメント行開始文字として扱ったり、プロパティー値を囲む引用符を勝手に削除したり。やはり自作するしかない。Java properties ファイルの仕様は java.util.Properties.load(java.io.Reader) の JavaDoc に書かれている。問題は、みんなが想像するよりも少し仕様が複雑だということだ。全てを網羅しているわけではないが、特に考慮すべき点は次のとおり。そういうわけで、例えば test.properties が次の内容を持っている場合次のキーバリューペア群として解釈されるべきである。NuGet パッケージ「Authlete.Authlete」に含まれる PropertiesLoader クラスは Properties ファイルの仕様を解釈することができる。次のコード例は次の出力を生成する。Java での同様のコードは次のとおり。PropertiesLoader.cs のソースコードは authlete-csharp 内に存在する。また、PropertiesLoader 用の xUnit テスト群は PropertiesLoaderTest.cs 内に記述されている。


