Prism.WpfでDialogServiceから呼び出したDialogの中にRegionを加えてRequestNavigateしたけれども、
ちょっと手を加えないと遷移しなかったため、その方法について記載します。DialogServiceを継承したクラスを用意して(ソース)をオーバーライドしてこんな感じでRegionManagerを新規に作成し、Dialogとして表示されるWindowに割り当てます。
ViewModelにRegionManagerを伝えるためにIDialogParametersにインスタンスを追加します。ViewModel側でRegionManagerを受け取ってRequestNavigateします。(ソース)Region間でのRequestNavigateはIRegionNavigationServiceを使用すれば意識する必要がなくなります。(参考)こんな感じでRegionManager添付プロパティを指定すれば出来ると思って実装したのですが出来ませんでした。調べてみるといくつか言及している質問がありました。いくつか抜粋してグーグル翻訳してみると等々。
メイン画面ではPrismさんが良い感じにアタッチしてくれてるみたいなのですが、新規に作成したWindowに関しては自分でアタッチしないといけないみたいです。とりあえず2.の方向で検討し、上記のような実装になりました。
デメリットですが、IDialogParametersを経由してRegionManagerの受け渡しを行うため、
それのキー(今回だと"rm")が予約語的になってしまうところです。
開発者間でわかっていれば問題ないことですが暗黙知になりそうです。Prism.Wpfの7から8の変化として等がありました。他にもあると思います。


