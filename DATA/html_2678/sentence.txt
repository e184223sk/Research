More than 1 year has passed since last update.普段Shift_JISでC#ソースを書いていたが、ちょっと気になったので調べてみた。
Shift_JISのテキストファイルを読み込むときは気を付けようくらいのつもりで
「初心者」タグをつけてみたものの、色々調べてみたら自分も「初心者」であることが露見した件。下記はWindows10環境です。
使ったコンパイラ：C:\Windows\Microsoft.NET\Framework64\v4.0.30319\csc.exe下記のコードを
1. Shift_JISで保存してコンパイル
2. UTF-8で保存してコンパイル
して実行してみる。実行結果はいずれも下記が表示された。C#ソースコードの文字コードはShift_JISでもUTF-8でもよさげ？
⇒コンパイルオプション(/codepage)で明示しない場合はUTF-8が推奨のよう直接cscを使う場合は/codepageが指定できるが、Visual Studioではこのオプションはサポートしてないらしい。（使う必要がないからと思われる。）/codepage:XXX オプションでソースコードの文字コードを指定できる。
ここのXXXはコードページ番号を指定しないといけない。(/codepage:UTF-8とかだとcscがエラーを吐く。)
UTF-8の場合は、csc /codepage:65001 YYY.cs みたいに指定する。
コードページ一覧はここ参考上記で作成した各exeをildasmで開いてみた。
C#の内部表現はUTF-16(のリトルエンディアンのほう)だそう。
さっきまでUTF-8かと思っていたとはいえ、処理速度やリソースがシビアでなければ内部表現を気にする必要はあまりないと思ってます。基本的には（エンコードを指定しない場合は）UTF-8のよう。(File.ReadAllLines(string)メソッドなど)
標準外のライブラリとかはしらんですが。Encodingクラスで明示的に指定するのが無難かと。
Shift_JISのテキストファイルを扱うプログラムを書くときは気を付けよう。下記のソースコードはコンパイルが通り、正しく動作する。ちなみに全角空白は空白として処理されるよう。
個人的には、英語が苦手でも識別子を日本語にするのはお勧めしない。日本語は表現がゆらぐので。。初心者向けから逸れてきた感があるが・・・
\sは全角スペースも含む。
[あ-お]みたいなこともできるっぽい。[あぁいぃうぅえぇお]と多分おなじ。※ちゃんと確認してない。自分の環境はデフォルトはShift_JISになっている。
参考サイト: Windowsコマンドプロンプト　文字コード設定


