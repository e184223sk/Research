重み付きランダム選択アルゴリズムは、「アイテムのドロップ」や「ガチャ」など、それぞれのアイテムに選出確立が設定されている中から1つのアイテムを選り抜くためのものです。その為に使用されるアルゴリズムは様々ですが、「結局、どの場面でどのアルゴリズムを使うのが最適なのか？」といったことが気になりました。なので、この記事では様々なシチュエーションでそれぞれのアルゴリズムの速度を計測していきます。この記事では『Choice』という重み付きランダム選択用のライブラリを使い、そこに実装されている3つのアルゴリズムを使用します。また、計測用コードは記事の最後に載せてあります。Linear Scan が最速。アイテム数が一桁の場合は Linear Scan を使っておけば良さそう。
なお、Alias Method はセットアップ処理が最適化されているので、反復が1回のみの時だけ速い。10アイテムはアイテムドロップの選択であり得る例。最初は Linear Scan と Binary Search が拮抗（ Linear Scan がやや優勢か）しているが、100辺りで Alias Method の良さが出始める。10アイテムの時とほぼ同じような感じ。
だが、Linear Scan よりも Binary Search がやや優勢か。綺麗な線形。
1000辺りで Alias Method 優勢になってくる。Binary Searchが優秀。セットアップ時間を含まない場合の計測結果。
やっぱり Alias Method が一番速い。アルゴリズム選定の参考になれば幸いです。今回使った『Choice』は気合を入れて作ったものなので使ってもらえると嬉しくなります。


