More than 1 year has passed since last update.最近、弊社では「健康経営」を意識して過ごそう！という話がありました。
自分の健康を考えて行動しようということなんですが、今回は「運動」の観点から、
自分の歩いた歩数を管理します！たまたま「GoogleFit」というアプリを入れていたのですが、歩数だけでなく運動の強度から
設定基準までの達成度を教えてくれます！
しかもデータはGoogleアカウントごとにクラウドに保存されており、別デバイスからも確認できるようです！これを使ってなんかできそう！と思った僕はとりあえずC#のコンソールアプリから自分のGoogleFitのデータを
とってみようと思いました！GoogleFitにOAuth認証で接続し、自分のGoogleアカウントのGoogleFit歩数データを取得する。VisualStudio 2017Googleアカウント
GoogleFitアプリ（iOS端末, Android端末）認証方法は3つあるみたいです！
下記のエントリを参考にさせて頂きました！
Google APIの認証の種類今回はOAuth認証でAPIに接続しようと思います。まずはGoogleAPIのコンソールでAPIを有効化します。
下記サイトにアクセスし、自分のGoogleアカウントでログインしてください。
https://console.developers.google.com/左のサイドメニューから「ライブラリ」を選択します。
検索窓で「fitness」と入力するとでてきます。
「Fitness API」を選択し、APIを有効化してください。続いて、認証情報を作成します。
左のサイドメニューから「認証情報」を選択します。「認証情報を作成」＞「OAuthクライアントID」を選択します。
アプリケーションの種類は、「その他」を選択してください。
これで認証情報が作成されました！
ダウンロードのマークからjsonをダウンロードして保管してください。（後々使います）
やっていきまっしょう！！
API操作部分のコードは下記のサイトを参考にしています！
Getting your weight from Google Fit with C#パッケージマネージャーで「Google.Apis.Fitness.v1」を検索し、インストールします。先ほどダウンロードした認証情報のjsonをプロジェクトのルートに配置します。まず、GoogleFitへの問い合わせを行うベースクラスを作成します。次に、GoogleAPIでは時間をミリ秒で扱いますので、DateTimeとの変換を行うヘルパークラスを作成します。APIから返ってきたデータを受け取るデータクラスを用意します。そして、歩数データのクエリを発行するクラスを作成します。では、最後にエントリポイントとなるクラスを作成します！コーディングはこれだけです！
実行してみると、GoogleのOAuth認証窓が出てきて、ログインし、コンソールに歩数がプリントされたら成功です！GoogleFitのデータをC#コンソールアプリで取得することができました！参考にできる日本語ドキュメントが少なかったので苦戦しました･･･
取りたいデータごとにデータソースとデータタイプ、スコープなどを設定する必要があるので、それは公式のREST APIのドキュメントを参考にしました～WebアプリからAPIに接続するとなるとドメイン許可設定やリダイレクト先の設定等必要になるみたいで、時間があればやって追記します！Getting your weight from Google Fit with C#
Fitness Client Library for .NET
Fitness Data Types


