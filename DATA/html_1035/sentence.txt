メモ帳苦行開発。その2。
使うかどうかわからない備忘録。.NET Framework には、時間を表す構造体が2種類あるそうな。（めんｄ、、）これら2つを使って現在時刻を取得したり、2つの日時の差異を計算できる。【参考】
■[C# File] テキストファイルの読み込みと書き込み
https://yaspage.com/prog/csharp/cs-sample-fileio/■日時や時間間隔の加減算を行うには？
https://www.atmarkit.co.jp/ait/articles/0502/25/news125.html■タイマにより一定時間間隔で処理を行うには？（Windowsタイマ編）
https://www.atmarkit.co.jp/ait/articles/0511/11/news117.html■Microsoft .NET入門 &gt; 6.塗りつぶす
http://wisdom.sakura.ne.jp/system/msnet/msnet_win6.html現在の日時を取得するには、DateTime.Now でできる。
DateTime型の変数にぶち込む。こうして得た日時を、テキストファイルなんかに記録して、次回起動したときに読み込みんでその時の日時と比較すれば差異を得られる。テキストファイルに書き込むにはStreamWriterクラス(System.IO名前空間)のWriteLine()メソッドか、File.WriteAllText()メソッド(System.IO名前空間)を使う。StreamWriter だと、Close() しないといけなかったり、ちょっとめんどいなー、という印象。
まぁ、とにかく使ってみる。これで、&lt;ファイルのパス&gt;に指定したファイルにテキストとして保存される。書き込んだ場合は、StreamReaderクラスのReadToEnd()メソッドかFile.ReadAllLines()メソッドを使う。
StreamReader は同じくClose()が必要。現在の日時と比較するために、DateTime構造体にパースしている。
（parseとかキャストとかToStringとかややこしいね）DateTime 型にさえなっちゃえば、単純に引き算できる。
計算結果の「時間間隔」についてはTimeSpam型じゃないとダメらしい。（ややこしい）時間、分、秒を取り出すにはそれぞれTotalHours、Minutes、Secondsなどのプロパティから取り出す。
TotalHoursのみは、(int)キャストしないと、0.XXXXXXXXXXXXみたいな数値になる。上記を利用して、前回の実行から何時間ぶりかを表示するだけのプログラムを作った。
たぶん、日をまたいだらその分も時間加算してくれるはず。なんか秒単位で返信を催促するメンヘラみたいなメッセージになっちまったがまぁ、これで完成。と、いえばたとえば放置ゲームとか。アプリケーションを開いている間は時間経過で成長し、アプリケーションを開いていない間についても、上記の「前回開いた時間から何時間ぶりかを計算するプログラム」を利用し、経過時間を計算し、成長に反映する。実際に作ってみた。
例によってコメントとかそのまま。
まぁ、自分用だし、、、、、、（言い訳）数分後。
丸っこいなにかがしっかり大きく成長しました！
（時間調整がばがばなので超速度で成長しちゃう）たぶんC#の基本的な機能ばかりなんだろうけど、なーんにもわからんことが多くて、勉強になったかな。
（これに打ち込んで休日がつぶれた、、、、。）


