画像の保存処理で手間取ったのでメモを残します。今回は下記の処理を行います。
・ImageコンポーネントにアタッチされたSprite(Texture)をPngに変換して保存
・Pngを読み込んでImageコンポーネントにSprite(Texture)としてアタッチ実際にAndroid端末にて検証したデモがこちらになります。
書き込んだ画像を消去したのち復元に成功しました。
端末内に画像データは保存されているのでアプリを終了しても復元が可能です。下記画像はPC内部の保存先ディレクトリを参照した際のスクショです。
ちゃんとPng形式で保存されていました。
お絵描きの部分の実装は完全にそのまんま使わせていただいてます。【参考リンク】：UI.Image にペイントする。線を手書きする。スマホ対応部分とテクスチャのリセットだけ下記のように追記してます。ボタンの押下処理はUniRxで実装してます。特に意味はないです。Application.persistentDataPathを呼ぶと
文字通りアプリ内に存在する永続的なパスへアクセスできます。
ここにフォルダを作って画像を保存しています。ImageConversionクラスからEncodeToPNGを呼び出すとbyte配列としてpngデータに変換してくれます。【参考リンク】：ImageConversion.EncodeToPNG
WriteAllBytes,ReadAllBytesそれぞれデータの書き込みと読み込みを担います。
これ書くだけでやってくれるのでありがとうございますって感じです。書き込み、読み込み時のリソースの開放とかがよくわかりませんでした。
書かなくても動いたので"まあいっか"ってなってます。
素直で良い子なので危険なコード書いてたら教えて下さい。【参考リンク】：EncodeToPNG hangs the script
【参考リンク】：はなちるのマイノート


