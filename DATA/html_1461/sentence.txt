More than 1 year has passed since last update.匿名型のオブジェクトをクラスのインスタンスにしたいとき、ありますよね。例えば、こんなソースがあったとします。などなど、static object NanrakaFunction の設計が激やばなのは認めます。
ただ、上記のソースコードほどではないとはいえ、こういう設計にならざるを得ないこともあるのではないでしょうか。このソースコード、実行すると当然が返されます。
ではどうするか？それが今日の本題です。これ、バッドプラクティスな可能性がだいぶありますので、
使用する際は自己責任で。↓バッドプラクティス臭がプンプンしますね！
要は一旦JSONでシリアライズできる形ならJSON文字列化してしまって、
あとでデシリアライズすればいいのです。例えば、 numHoge に float型の数値をいれてみたところ・・いいぞ。ちゃんとデシリアライズ時の例外をチェックすれば、型がちゃんとできてるかどうかもわかります。とまぁ、今回は NanrakaFunction というかたちで、関数で定義しましたが、
引数でやってくる場合もあるわけです。（objectで受けるな、というのはあるが）とりあえずの処置として使えるかな、ということで記事にしてみました。
変換を自前で書くほどデンジャラスなこともないと思うので、公式のライブラリに委ねてみましょう、ということでした。


