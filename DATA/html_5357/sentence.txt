More than 3 years have passed since last update.ミニゲームを作ってUnityを学ぶ！[3Dマインスイーパー編]前回作成したブロックについてはまだプレイヤーの操作で実際に開けたりマーカーを付けたりすることができませんが、今回はそれらの機能を実装する前にブロックを並べたフィールドの作成に取り掛かります。一口にマインスイーパーと言ってもフィールドを構成するマスの数や地雷の数、そもそものフィールド自体のレイアウトに色々種類があるようです。
今回は（おそらく）オーソドックスな以下の規格で作ることにしました。では早速、ブロックを並べてフィールドを作っていきましょう。フィールドの規格は上で決めたように3種類の難易度によって決定しますので、まずはGameControllerにレベルを表す定数を追加します。次に、BlockModelをまとめて管理するためのマネージャーを作成します。1: 前回作成したBlockのプレハブをインスペクタから設定Start()で実行されるCreateField()ではゲームの難易度をイージーに設定してフィールドの作成を行っています。またInstantiateBlocks()はゲームの難易度によって決まった規格に合わせてブロックを並べていき、同時に生成されたBlockModelをListに格納していきます。
この際に生成されたBlockModelには自分がフィールド内のどこに配置されたかという情報を持たせています。この時点でプロジェクトを実行すると、上の画像のようにタテヨコ9こずつのブロックが配置されます。ブロックを並べてフィールドを構築することができましたので、次は並べたブロックにたいしてランダムに爆弾を設置していきます。SetBombs()ではBlockModelを格納したListをランダムに並び替えた後、Listの先頭から決められた数までのBlockModelについてプロパティのHasBombをtrueにすることでブロックに爆弾を設置しています。これで爆弾と通常のブロックをランダムに並べたフィールドが完成しましたが、カメラ位置がフィールドからずれてしまっているのでそれを修正します。追加部分ではメインカメラのTransformを取得し、カメラがフィールドの中心を映すようにpositionとrotationの値を変更しています。プロジェクトを実行すると、画像のようにカメラがフィールドの中心を映すようになりました。次のページに進む
イントロダクションに戻る



