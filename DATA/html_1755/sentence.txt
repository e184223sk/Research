More than 1 year has passed since last update.遅い原因は単にCanvasのChildrenをClearしていなかっただけの模様。
修正したところ何とか違和感ないレベルになりました。
とはいえWindowトランジションの際はメキメキパフォーマンスが落ちるのでいったん不要なコントロールは非表示に。
NotifyIconに左上のCanvasのBitmapイメージを突っ込んでいます。
左に同じようなアイコンがもう一つありますが、そちらはForms＋VB版のアイコン。同じようにGDIで描画したものを動的に入れてますが１６ピクセル固定のイメージをそのまま入れているので当ノートPC（１２５％）のスケーリングにより２０ピクセルサイズになっているため、ボケ度合いが激しいです。拡大するとより分かりやすい。NotifyIconのもとになるCanvasのサイズを１６ピクセルではなく２０ピクセルで作ってるので、きれいに表示されています。１６のサイズで作っちゃうと
Froms版と大して変わりませんNotifyIconへのセット手順としては
①Canvas上に作成した時計のイメージを
②CanvasごとRenderTargetBitmapにして
③RenderTargetBitmapをCopyPixelsで普通のBitmap（System.Drawing）にして
④IconHandleをとって
⑤アイコン化してセット
という流れ。変換が多くて非常に手間がかるやり方なんですが、stream使うのも、なんかなあという気がしてこのような手順で行くことに。きっともっとうまい方法があるに違いない。


