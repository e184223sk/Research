More than 1 year has passed since last update.RayとLineRendererで実装します。Rayがオブジェクトに当たったかどうかの判定を行い、LineRendererの終点の位置を変えることで
レーザーの途切れを表現します。そのためにはRayとLineRendererの始点、終点を合わせておく必要があります。画像のようにぴったりと合わせることができました。(赤い線=Ray,青い線=LineRenderer)
先程のコードのままでは画像のようにオブジェクトを貫通してしまいます。
この問題を解決するうえで、RayとLineRendererをぴったりと合わせたことが鍵となります。Rayはオブジェクトとの衝突判定を行うことができます。
また、オブジェクトと衝突した座標を取得することもできます。つまり、LineRendererの終点にRayが衝突した座標を当てはめれば
オブジェクトに当たった箇所でレーザー(LineRenderer)が途切れているように見せることができるということです。コードに落とし込むとこうです。OculusQuestでビルドしたデモになります。
遮蔽物でレーザーが途切れているように見えます。ばっちりです。デモにおいて、始点も少しずらしているので
始点のずらし方に関しても最終的なコードと合わせて記述していきます。始点をずらしているのは下記の箇所です。Shaderで始点をずらしているようにみせる1こともできますが、
今回は始点そのものの座標を調節してます。手にコライダーが付いている状態で手のTransformを参照してRayを出した場合、
手のPivot、コライダーの大きさによっては
Rayが手のコライダーに衝突してしまって判定が取れない場合があります。
そもそものRayの始点をずらすことで意図しない衝突を回避できます。参考リンク ↩


