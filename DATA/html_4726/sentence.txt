More than 3 years have passed since last update.検出できないとき非常に遅いです
既に2値化に近い画像はマスクされてしまい読み取れませんでした・・・
QRを読みたいだけなら直接ZXingに投げてしまうのが一番速そうです環境はVisualStudio2017。
nugetパッケージマネージャで以下コマンドを実行しました。前提として画像のピントは合っているものとします。こちらを参考にC#で書いて見ました。
OpenCVでQRコード検出器を書くここでは大まかにと言ったことが紹介されています。これをC#で書いてみて使ってみた結果、
少し修正したい点がありましたので以下の点を追加、変更しました。2値化時にマスクをかけて真っ白部分を処理しないようにしました。
元々読み込んだ画像をグレースケールにして2値化～
とやってましたが、映像と無関係の真っ白があると2値化時点で閾値がずれてしまう問題が起こりました。
傾きの画像を作るときに図形を回転させて余白部分が真っ白になっていたわけですが、この真っ白の領域に閾値判定が引っ張られてしまい、QRコードの輪郭を検出できなくなりました。よって真っ白部分(ついでに真っ黒部分も)を除去しておきます。正方形検出をBoundingRectでなくMinAreaRectに変更しました。QRコードの画像を45度程度傾けるとBoundingRectでは検出が難しいのでは?
縦横比と面積比の関係が固定値では上手く導けないように感じました。
MinAreaRectで傾いたRectのWidthとHeightが取れそうなのでこちらを使ったほうが単純かな？と思いました。


