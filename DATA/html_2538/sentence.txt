More than 1 year has passed since last update.ずっとC/C++を使ってて、このごろC#も使っているのですが、C/C++とC#でファイルのオープンした後の挙動ががなんか違うぞ、という事に気づきました。
C/C++では他のアプリケーションで使用中のファイルを普通に開くことが出来たのに、C#ではオープン時エラーになります。
コード書いて試してみたら、C/C++とC#でデフォルトのファイル共有モードに相違がありました。なんてこったい(・o・)環境はWindows/VisualStudioです。以下はC/C++/C#でテキストファイルに追加書き込みする簡単なコードです。
エラーは省略しています。CとC++では使用中ファイルのオープンに成功して、書き込みも出来ます。C#では他のアプリケーションで使用しているファイルをオープンすると例外が発生します。FileStreamコンストラクタの最後のパラメータのFileShare.Writeで書き込み共有を設定しています。これでC/C++と同様に他のアプリケーションで使用しているファイルもエラーなくオープンできます。


