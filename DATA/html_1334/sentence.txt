More than 1 year has passed since last update.オブジェクトインスタンス化コード生成に必要な要素の調査で、オブジェクトインスタンス化に必要な最低限の要素を取得したが、せっかくなので取得結果を用いて、実際にインスタンス化のコード生成をユニットテストを書いて確認したので投下しておく。生成するコードとして、の3パターンについて、これらの型を戻りとするメソッドを持つインターフェースでもって確認した。意味解析の結果を取得する際、ASTを構築する必要があるため、そのあたりの諸々ののコードを静的クラスSyntaxGeneratorHelperとして用意した(Roslynによるインターフェースの実装クラスの構築で作ったコードを叩き台にして切り出しただけ)。以下ソースコード生成を行うソースコードテストコードにコメントアウトしたゴミを拾い集めコード生成の手引きとしてまとめるRoslynの@SyntaxFactory`はアホほどメソッドが生えててどれを使ったいいか結構迷う。その際の手引きとして、のように文字列から構文木を実体化させ、コンソールに出力してみるのが近道かも。
(NUnitの場合、TestContext.Progress.WriteLineメソッドで、出力してくれる)また、組み立てた構文木についても、ToFullString()メソッドを呼ぶことで文字列に戻すことができる（インデントはめちゃくちゃな可能性あり）


