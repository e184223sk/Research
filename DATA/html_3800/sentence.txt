More than 1 year has passed since last update.※画像クリックでリンクが開きます

Unityの教科書 Unity 2018完全対応版 2D&amp;3Dスマートフォンゲーム入門講座上記書籍4章の、 車をゴールのギリギリ手前で止める「寸止めゲーム」 のサンプルを作ってみました。
こんな感じです。

いざ作ってプレイしてみると、ゲームとして以下の欠点があることに気付きました。
(サンプルなので当たり前なのですが、、)1.一見何をすれば良いのかわからない
2.スワイプで車が動くが、何度でもスワイプが有効
3.ゴールしてもしなくてもゲームとしての終わりが無いもう少しゲームっぽくしたいなと思い、このサンプルに以下の仕様を追加したいと思います。1.ゲーム開始時にゲームの目的を提示する
2.スワイプは1回のみの一発勝負
3.プレイを評価して終わりを表現する初心者ですので、サンプルのコードをベースに仕様を追加します。
「良いやり方がある」や「間違ってる」等御座いましたら、コメントを頂ければ幸いです。※各画像ファイルは自作画像に差し替えてます

ゲーム仕様
・スワイプで車を動かし、ゴールのギリギリ手前で止める「寸止めゲーム」
　→ 車が動かせるのは１ゲームで1回　※仕様追加1
　→ 車がゴールを越えてしまったらゲームオーバーを表示し、自動的にリトライ　※仕様追加2
　→ 車がゴールから遠ざかった場合は自動的にリトライ　※仕様追加3
　→ いつでもリトライ出来るボタンを設置　※仕様追加4・画面中央のテキストで、ゲーム進行を表現する
　→ ゲーム開始時の案内　※仕様追加5
　→ ゴールまでの距離
　→ 停止位置に応じて評価する　※仕様追加6このゲームは下記スクリプトが実装されており、これらに仕様を追加する。
1.CarController：スワイプによる車の動作に関するスクリプト
2.GameDirector：テキストの表示などUIに関するスクリプト　→ 車が動かせるのは１ゲームで1回　※仕様追加1CarControllerは車の動作に関するコードなので、動作したかどうかの判定のみ実装。改修↓・ポイント1_1　boolのmovedFlgを設け1度のみ操作可能にする。　→仕様追加1・ポイント1_2　初速度が決まり、車が動いたタイミングでtrueにタップではmovedFlgがtrueにならないよう、スワイプしたかどうかの判定を追加。　→ 車がゴールを越えてしまったらゲームオーバーを表示し、自動的にリトライ　※仕様追加2
　→ 車がゴールから遠ざかった場合は自動的にリトライ　※仕様追加3
　→ ゲーム開始時の案内　※仕様追加5
　→ 停止位置に応じて評価する　※仕様追加6GameDirectorはゲームの監督役なので、ゲームの進行を全て一任する。改修↓・ポイント1_1　ゲーム開始時のシーンを取得しておく。
　※using UnityEngine.SceneManagement;を宣言する必要有り・ポイント1_2　ポイント1_1で取得したゲーム開始時のシーンを実行させるメソッドを作成する。
　※後述するRetryボタン(仕様追加4)からも呼び出したいのでメソッドはpublicに・ポイント1_3　リトライさせたい時に引数に指定した秒数後にポイント1_2で作成したメソッドを実行させるように実装。・ポイント2_1　ゲーム開始時の車とゴールの位置を取得しておく。・ポイント2_2　車とゴールの距離が初期値から変わっていない場合にゲーム開始時の案内を表示する。 →仕様追加5・ポイント2_3　車とゴールの距離が離れたら(車がゴールから遠ざかった場合は)1秒後にリトライ。 →仕様追加3・ポイント2_4　車とゴールの位置関係がマイナスの値になったらゲームオーバーを表示し、1秒後にリトライ。 →仕様追加2・ポイント3_1　距離に応じて評価するメソッドを作成する。1秒後にリトライ。・ポイント3_2　車が動作して10秒後にポイント3_1で作成したメソッドを実行させるように実装。 →仕様追加6　→ いつでもリトライ出来るボタンを設置　※仕様追加4
・下記キーを押下しながら指定すると、その位置を基準に再計算してくれる。
　→ポジションやサイズはこれを行ってから微修正する
mac:option + shift
win:Alt + Shift
・クリック時にGameDirectorのRetryを呼び出すように指定。 →仕様追加4
　※呼び出すメソッドはpublicにしておく必要あり
↓

↓

↓
評価メソッドGetScore()を呼び出す際、Invoke()を用いて秒数指定しておりますが、ここは車が止まっているかどうかで判断したかったです。
Rigidbodyを使うとIsSleeping()を使ってオブジェクトが動いているかどうかを判定できるようなので色々試しましたが、
今回はオブジェクトの操作を物理特性ではなく計算式で設定しているので、実現できませんでした。
PC上のテストプレイとスマートフォンの動作に乖離があったり躓くこともありますが、まだまだスタート地点なので勉強を続けていきたいと思います。


