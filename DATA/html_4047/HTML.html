<!DOCTYPE html><html><head><meta charset="utf-8" /><title>List&lt;T&gt;について本気出して調べてみた - Qiita</title><meta content="width=device-width,initial-scale=1,shrink-to-fit=no,viewport-fit=cover" name="viewport" /><meta content="#55c500" name="theme-color" /><meta content="XWpkTG32-_C4joZoJ_UsmDUi-zaH-hcrjF6ZC_FoFbk" name="google-site-verification" /><meta content="telephone=no" name="format-detection" /><link rel="canonical" href="https://qiita.com/NCT48/items/5ca2df4e3dbd053cd9f7" /><link href="/manifest.json" rel="manifest" /><link href="/opensearch.xml" rel="search" title="Qiita" type="application/opensearchdescription+xml" /><link as="script" href="https://www.googletagservices.com/tag/js/gpt.js" rel="preload" /><link href="https://securepubads.g.doubleclick.net" rel="preconnect" /><script async="" src="https://www.googletagservices.com/tag/js/gpt.js"></script><meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="mLmI9CBVEbmp4NM//tQKf7PuXgGDJ3hWI6L8V1WsY5wyLzsp1kCiSejRQVJqmSqJjmHKaKQ3ijUMeCUx0QzSRg==" /><link rel="shortcut icon" type="image/x-icon" href="https://cdn.qiita.com/assets/favicons/public/production-c620d3e403342b1022967ba5e3db1aaa.ico" /><link rel="apple-touch-icon" type="image/png" href="https://cdn.qiita.com/assets/favicons/public/apple-touch-icon-ec5ba42a24ae923f16825592efdc356f.png" /><link rel="stylesheet" media="all" href="https://cdn.qiita.com/assets/public/article-2eaa7dbedc42a8ea65c722cda46d0ebb.min.css" /><script src="https://cdn.qiita.com/assets/public/v3-article-bundle-63de2d91fef827269d3f6b958db2335b.min.js" defer="defer"></script><meta name="twitter:card" content="summary_large_image"><meta content="@Qiita" name="twitter:site" /><meta property="og:type" content="article"><meta property="og:title" content="List&lt;T&gt;について本気出して調べてみた - Qiita"><meta property="og:image" content="https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0&amp;w=1200&amp;mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND1UR2x6ZER4VVB1T0JxLU9CcE9PQmhPT0JwdWFjck9hd2wtV0h1dU9CbC1PQnB1aXF2LU9CdWVPQnB1T0J2LU9CbncmdHh0LWNvbG9yPSUyMzMzMyZ0eHQtZm9udD1IaXJhZ2lubyUyMFNhbnMlMjBXNiZ0eHQtc2l6ZT01NCZ0eHQtY2xpcD1lbGxpcHNpcyZ0eHQtYWxpZ249Y2VudGVyJTJDbWlkZGxlJnM9ZWU5MzI3YmU0M2FjM2Y4ODk5MmVjMDhlY2VlNWUzOTU&amp;mark-align=center%2Cmiddle&amp;blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RRTVEVkRRNCZ0eHQtY29sb3I9JTIzMzMzJnR4dC1mb250PUhpcmFnaW5vJTIwU2FucyUyMFc2JnR4dC1zaXplPTQ1JnR4dC1hbGlnbj1yaWdodCUyQ2JvdHRvbSZzPTUzYjcxZWIwMGYzYjAzOWEwZDE3MmU2MWViNWI4OTUz&amp;blend-align=center%2Cmiddle&amp;blend-mode=normal&amp;s=e1c56a40ed216160fce9b327d313d1ad"><meta property="og:description" content="

はじめに

List＜T＞クラスについて、あれやこれや書きたいと思います。

「普段何気なく使ってるけど、言われてみれば中身とか全然知らんわ。」

「でも改めて考えると、すごく気になってきた。」

っていうちょっと変わった人向けで..."><meta content="https://qiita.com/NCT48/items/5ca2df4e3dbd053cd9f7" property="og:url" /><meta content="Qiita" property="og:site_name" /><meta content="564524038" property="fb:admins" /><meta content="C#" name="keywords" /><script>!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window, document,'script',
'https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '668972150489891');
fbq('track', 'PageView');</script><style data-emotion-css="17jxvjw 11t2ec1 1dvr2p8 18lkoru 1g4cku8 1iupg5d ijvq0v 15cocm3 12rp90f 115f4t 1b8uj5v 79elbk 16hhh7b fcbn8c 1gj7nt 154zy0m yikrym 1jqivyb 1ode1bp le4d8r 1hbd3g7 1nzh4zz 38fzdi helsa7 8qb8m4 2imjyh he5w1s 70qvj9 3ojehk 100alwu 1dtnjt5 10ougpm 1ay9vb9 m19uds cgzq40 1wa99t2 1l3zk9f 4czcte 1yzj1fm 1uv1qiv 109dbrr 5jpx49 mnxgyc 1vlpknv fsjkhv 1b17vb0 7i7f4d"}>.css-17jxvjw{display:grid;display:-ms-grid;grid-template-columns:80px minmax(0,1fr) 300px;-ms-grid-columns:80px minmax(0,1fr) 300px;grid-template-rows:minmax(270px,auto) 1fr;-ms-grid-rows:minmax(270px,auto) 1fr;max-width:1280px;margin-right:auto;margin-left:auto;padding-top:24px;padding-right:24px;padding-left:24px;}@media (max-width:1200px){.css-17jxvjw{padding-bottom:0;padding-left:0;padding-right:0;}}@media (max-width:992px){.css-17jxvjw{grid-template-columns:80px 452px 300px;-ms-grid-columns:80px 452px 300px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}}@media (max-width:770px){.css-17jxvjw{display:block;}}@media (max-width:480px){.css-17jxvjw{padding-top:0;}}.css-11t2ec1{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;z-index:5;position:-webkit-sticky;position:sticky;top:calc(56px + 24px + 16px + 32px - 16px);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:16px;width:80px;}.css-11t2ec1:after{content:'';display:table;}.css-11t2ec1:before{content:'';display:table;}@media (max-width:770px){.css-11t2ec1{display:none;}}.css-1dvr2p8{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-18lkoru{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;background-color:#FFFFFF;}.css-1g4cku8{display:inline-block;vertical-align:middle;height:20px;width:20px;fill:#55C500;}.css-1iupg5d{color:#55C500;cursor:pointer;font-size:14px;font-weight:bold;}.css-ijvq0v{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-15cocm3{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#FFFFFF;border:2px solid #6E6F70;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:2px 0px 0px;width:40px;}.css-12rp90f{display:inline-block;vertical-align:bottom;height:17.77777777777778px;width:16px;fill:#6E6F70;}.css-115f4t{color:#6E6F70;font-size:14px;font-weight:bold;}.css-1b8uj5v{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;margin-bottom:16px;padding:0;}.css-79elbk{position:relative;}.css-16hhh7b{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;padding:0;}.css-fcbn8c{display:none;bottom:initial;left:initial;right:initial;top:initial;left:100%;top:calc(-8px - (14px * 1.8) - 16px - 4px);}.css-1gj7nt{color:rgba(0,0,0,0.6);font-size:14px;font-weight:bold;line-height:1.8;padding:8px 16px;}.css-154zy0m{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.87);cursor:pointer;font-size:16px;font-weight:normal;line-height:1.8;padding:4px 16px;}.css-154zy0m:hover{-webkit-text-decoration:none;text-decoration:none;background-color:#F2F2F2;}.css-yikrym{width:20px;}.css-1jqivyb{color:rgba(0,0,0,0.6);font-size:13px;}.css-1ode1bp{background-color:rgba(0,0,0,0.12);height:1px;width:100%;margin:8px 0;}.css-le4d8r{display:inline-block;vertical-align:middle;height:13px;width:13px;fill:rgba(0,0,0,0.6);}.css-1hbd3g7{height:250px;}.css-1nzh4zz{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:16px 32px;background-color:#FBE69E;color:rgba(0,0,0,0.87);line-height:1.5;font-weight:600;}@media (max-width:770px){.css-1nzh4zz{padding:16px;}}.css-38fzdi{color:#CA832A;margin-right:4px;}.css-helsa7{background-color:#FFFFFF;padding:32px;margin-bottom:24px;}@media (max-width:992px){.css-helsa7{margin:0 auto 40px;}}@media (max-width:480px){.css-helsa7{margin:0 0 40px;padding:32px 16px;}}.css-8qb8m4{margin-bottom:48px;}.css-2imjyh{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-he5w1s{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;width:100%;}@media (max-width:770px){.css-he5w1s{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}}.css-70qvj9{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.css-3ojehk{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;margin-right:4px;}.css-100alwu{display:inline-block;border-radius:50%;line-height:1;overflow:hidden;vertical-align:middle;}.css-1dtnjt5{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-10ougpm{color:rgba(0,0,0,0.87);font-size:14px;font-weight:600;line-height:1.8;margin-right:4px;text-wrap:break-word;word-break:break-all;}.css-1ay9vb9{margin-right:16px;}.css-m19uds{color:rgba(0,0,0,0.6);font-size:14px;line-height:1.8;}.css-cgzq40{color:rgba(0,0,0,0.87);font-size:32px;font-weight:bold;line-height:1.4;margin-top:8px;text-wrap:break-word;word-break:break-all;}.css-1wa99t2{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.6);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:8px;}.css-1l3zk9f{color:rgba(0,0,0,0.6);font-size:20px;margin-right:8px;}.css-4czcte{margin-right:4px;color:inherit;font-size:14px;line-height:1.8;}.css-4czcte:not(:last-child)::after{content:',';margin-right:4px;}.css-1yzj1fm{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:32px;}.css-1uv1qiv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-size:20px;height:32px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin-right:16px;outline:none;padding:0;width:32px;}.css-109dbrr{background-color:#F9F9F9;border-top:1px solid rgba(0,0,0,0.12);bottom:0;box-shadow:0px 1px 4px rgba(0,0,0,0.14);display:none;height:calc(env(safe-area-inset-bottom,0px) + 56px);-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding-bottom:env(safe-area-inset-bottom);position:-webkit-sticky;position:sticky;width:100%;z-index:2000;}@media (max-width:770px){.css-109dbrr{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}.css-5jpx49{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:space-evenly;-webkit-justify-content:space-evenly;-ms-flex-pack:space-evenly;justify-content:space-evenly;width:100%;}.css-mnxgyc{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1vlpknv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;margin-right:4px;background-color:#FFFFFF;}.css-fsjkhv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1b17vb0{color:#6E6F70;font-size:14px;font-weight:bold;margin-left:4px;}.css-7i7f4d{display:none;bottom:initial;left:initial;right:initial;top:initial;bottom:32px;right:0;}</style></head><body><div class="allWrapper"><div><div id="GlobalHeader-react-component-47d4d0f4-0d44-4874-a15f-e41b46432c84"><div class="st-Header"><div class="st-Header_container"><div class="st-Header_start"><a href="/" class="st-Header_logo"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 426.57 130"><circle cx="167.08" cy="21.4" r="12.28"></circle><path d="M250.81 29.66h23.48v18.9h-23.48z"></path><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z"></path><circle cx="216.33" cy="21.4" r="12.28"></circle></svg></a><div class="st-Header_communitySelector" tabindex="0"><span class="fa fa-caret-down"></span></div><div class="st-Header_dropdown"><div class="st-Header_dropdownHeading">Qiita Teams that are logged in</div><div class="st-Header_dropdownItemNote">You are not logged in to any team</div><hr class="st-Header_dropdownDivider st-Header_dropdownDivider-shrink"/><a href="https://teams-center.qiita.com/find_team" class="st-Header_dropdownItem"><span class="fa fa-fw fa-sign-in st-Header_dropdownItemIcon"></span><div>Log in to Qiita Team</div></a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Community</div><a href="/organizations" class="st-Header_dropdownItem">Organization</a><a href="/official-events/open" class="st-Header_dropdownItem">Event</a><a href="/advent-calendar" class="st-Header_dropdownItem">Advent Calendar</a><a href="https://qiitadon.com/" class="st-Header_dropdownItem" target="_blank">Qiitadon (β)</a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Service</div><a href="https://jobs.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Jobs</a><a href="https://zine.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Zine</a><a href="https://blog.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Blog</a></div><form class="st-Header_search" action="/search" method="get"><span class="fa fa-search st-Header_searchIcon"></span><input type="search" class="st-Header_searchInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form><form class="st-Header_searchModal" action="/search" method="get"><input type="text" class="st-Header_searchModalInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form></div><div class="st-Header_end"><div class="st-Header_searchButton"><span class="fa fa-search"></span></div><a class="st-Header_signupButton" href="/signup?redirect_to=%2FNCT48%2Fitems%2F5ca2df4e3dbd053cd9f7">Signup</a><a class="st-Header_loginLink" href="/login?redirect_to=%2FNCT48%2Fitems%2F5ca2df4e3dbd053cd9f7">Login</a></div><div class="st-Header_overlay"></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="GlobalHeader" data-dom-id="GlobalHeader-react-component-47d4d0f4-0d44-4874-a15f-e41b46432c84">{"unreadNotificationsCount":null,"realms":[{"humanName":"Qiita","isCurrentRealm":true,"isQiita":true,"isQiitaTeam":false,"loggedInUser":null,"teamId":null,"url":"https://qiita.com/"}],"teamFindUrl":"https://teams-center.qiita.com/find_team","isTeamOnlyUser":null,"currentUser":null}</script>
      
</div><div class="st-HeaderAlert st-HeaderAlert-warning"><div class="st-HeaderAlert_body"></div></div><script type="application/ld+json">{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"/","name":"Qiita"}},{"@type":"ListItem","position":2,"item":{"@id":"/tags/csharp","name":"C#"}}]}</script><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","datePublished":"2019-01-10T15:19:40.000+09:00","dateModified":"2019-05-07T08:51:02.000+09:00","headline":"List\u003cT\u003eについて本気出して調べてみた","image":"https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0\u0026w=1200\u0026mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND1UR2x6ZER4VVB1T0JxLU9CcE9PQmhPT0JwdWFjck9hd2wtV0h1dU9CbC1PQnB1aXF2LU9CdWVPQnB1T0J2LU9CbncmdHh0LWNvbG9yPSUyMzMzMyZ0eHQtZm9udD1IaXJhZ2lubyUyMFNhbnMlMjBXNiZ0eHQtc2l6ZT01NCZ0eHQtY2xpcD1lbGxpcHNpcyZ0eHQtYWxpZ249Y2VudGVyJTJDbWlkZGxlJnM9ZWU5MzI3YmU0M2FjM2Y4ODk5MmVjMDhlY2VlNWUzOTU\u0026mark-align=center%2Cmiddle\u0026blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RRTVEVkRRNCZ0eHQtY29sb3I9JTIzMzMzJnR4dC1mb250PUhpcmFnaW5vJTIwU2FucyUyMFc2JnR4dC1zaXplPTQ1JnR4dC1hbGlnbj1yaWdodCUyQ2JvdHRvbSZzPTUzYjcxZWIwMGYzYjAzOWEwZDE3MmU2MWViNWI4OTUz\u0026blend-align=center%2Cmiddle\u0026blend-mode=normal\u0026s=e1c56a40ed216160fce9b327d313d1ad","mainEntityOfPage":"https://qiita.com/NCT48/items/5ca2df4e3dbd053cd9f7","author":{"@type":"Person","address":"静岡","email":null,"identifier":"NCT48","name":"NCT48","image":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Favatars0.githubusercontent.com%2Fu%2F44828045%3Fv%3D4?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=43d79fdd304f677acc9fb57f5123633e","url":"https://qiita.com/NCT48","description":"モチベが上がらないだけで生きてますよ","memberOf":[]},"publisher":{"@type":"Organization","name":"Qiita","logo":{"@type":"ImageObject","url":"//cdn.qiita.com/assets/public/qiita-logo-c39ded593afa388e2e1ba435b110554e.png"}}}</script><style type="text/css">.wb-CampaignLink {
  background-color: #333333;
  width: 100%;
}

.wb-CampaignLink_container {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  max-width: 1100px;
  margin: 0 auto;
  font-size: 13px;
  padding: 0.8em;
}
.wb-CampaignLink_container > a {
  color: #fff;
}

.wb-CampaignLink_container > a:hover {
  text-decoration: underline;
}</style><div class="wb-CampaignLink"><div class="wb-CampaignLink_container"><a target="_blank" id="header_text_message_1" href="https://zine.qiita.com/interview/202105-uzabase/?utm_source=qiita&amp;utm_medium=header-banner">プロダクト全体の「エコシステム」を考えるユーザベースの開発手法とは？</a><a target="_blank" id="header_text_message_2" href="https://zine.qiita.com/interview/202105-uzabase/?utm_source=qiita&amp;utm_medium=header-banner">詳しくはこちら</a></div><script>td.trackEvent(
  'front_events',
  {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"NCT48","type":"items","id":"5ca2df4e3dbd053cd9f7"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Show","data":{"message":"プロダクト全体の「エコシステム」を考えるユーザベースの開発手法とは？","url":"https://zine.qiita.com/interview/202105-uzabase/?utm_source=qiita\u0026utm_medium=header-banner","sub_message":"詳しくはこちら"}}
)</script><script>document.getElementById('header_text_message_1').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"NCT48","type":"items","id":"5ca2df4e3dbd053cd9f7"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":1,"pos_id":"header_text_message_1","message":"プロダクト全体の「エコシステム」を考えるユーザベースの開発手法とは？","url":"https://zine.qiita.com/interview/202105-uzabase/?utm_source=qiita\u0026utm_medium=header-banner","sub_message":"詳しくはこちら"}}
  )
})</script><script>document.getElementById('header_text_message_2').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"NCT48","type":"items","id":"5ca2df4e3dbd053cd9f7"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":1,"pos_id":"header_text_message_2","message":"プロダクト全体の「エコシステム」を考えるユーザベースの開発手法とは？","url":"https://zine.qiita.com/interview/202105-uzabase/?utm_source=qiita\u0026utm_medium=header-banner","sub_message":"詳しくはこちら"}}
  )
})</script></div><script type="application/json" id="js-react-on-rails-context">{"railsEnv":"production","inMailer":false,"i18nLocale":"en","i18nDefaultLocale":"en","href":"https://qiita.com/NCT48/items/5ca2df4e3dbd053cd9f7","location":"/NCT48/items/5ca2df4e3dbd053cd9f7","scheme":"https","host":"qiita.com","port":null,"pathname":"/NCT48/items/5ca2df4e3dbd053cd9f7","search":null,"httpAcceptLanguage":null,"actionPath":"public/items#show","settings":{"analyticsTrackingId":"UA-24675221-12","assetsMap":{},"csrfToken":"P3kVslVdpCBnpcrwwHPU6HQ1/ErjlK+xeaFcCJdmnWOV76Zvo0gX0CaUWJ1UPvQeSbpoI8SEXdJWe4VuE8YsuQ==","locale":"en"},"currentUser":null,"isLoggedIn":false,"recaptchaSiteKey":"6LfNkiQTAAAAAM3UGnSquBy2akTITGNMO_QDxMw6","serverSide":false}</script>
<div id="PersonalArticlePage-react-component-8649d7c6-0fee-447e-9ba2-18e0a71e2132"><div class="p-items_wrapper"><div class=" css-17jxvjw"><div class="css-11t2ec1"><div class="css-1dvr2p8"><button class=" css-18lkoru"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/NCT48/items/5ca2df4e3dbd053cd9f7/likers" class="css-1iupg5d">98</a></div><div class="css-ijvq0v"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-115f4t">65</span></div><div class="css-1b8uj5v"><span class="fa fa-twitter"></span></div><div class="css-1b8uj5v"><span class="fa fa-facebook"></span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-fcbn8c"><div class="css-1gj7nt">Improve article</div><a href="/drafts/5ca2df4e3dbd053cd9f7/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/NCT48/items/5ca2df4e3dbd053cd9f7/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/NCT48/items/5ca2df4e3dbd053cd9f7/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/NCT48/items/5ca2df4e3dbd053cd9f7/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/NCT48/items/5ca2df4e3dbd053cd9f7.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div><div class="p-items_options"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_toc"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_main"><div class="css-1nzh4zz"><span class="fa fa-fw fa-warning css-38fzdi"></span><p>More than 1 year has passed since last update.</p></div><div class="css-helsa7"><div class="css-8qb8m4"><div class="css-2imjyh"><div class="css-he5w1s"><div class="css-70qvj9"><div class="css-3ojehk"><a href="/NCT48"><img class="css-100alwu eyfquo10" src="https://avatars0.githubusercontent.com/u/44828045?v=4" width="24" height="24" loading="lazy"/></a></div><div class="css-1dtnjt5"><a href="/NCT48" class="css-10ougpm">@<!-- -->NCT48</a><div class="css-1ay9vb9"><span><meta content="2019-01-10T06:19:40Z"/><time dateTime="2019-05-06T23:51:02Z" class="css-m19uds">updated at 2019-05-06</time></span></div></div></div></div></div><h1 class="css-cgzq40">List&lt;T&gt;について本気出して調べてみた</h1><div class="css-1wa99t2"><span class="fa fa-tags mr-1of2 css-1l3zk9f" aria-hidden="true"></span><a href="/tags/csharp" class="css-4czcte">C#</a></div></div><section class="it-MdContent"><div id="personal-public-article-body"><div>
<h1>
<span id="はじめに" class="fragment"></span><a href="#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB"><i class="fa fa-link"></i></a>はじめに</h1>

<p>List＜T＞クラスについて、あれやこれや書きたいと思います。</p>

<p>「普段何気なく使ってるけど、言われてみれば中身とか全然知らんわ。」</p>

<p>「でも改めて考えると、すごく気になってきた。」</p>

<p>っていう<del>ちょっと変わった</del>人向けです。</p>

<p>ほぼ全部独学で書いたので、間違ってたら指摘してください。</p>

<h1>
<span id="listtとは" class="fragment"></span><a href="#listt%E3%81%A8%E3%81%AF"><i class="fa fa-link"></i></a>List＜T＞とは</h1>

<p>CからC#に移って来た人間が一番最初に感動するやつ<strong>(私が証明です)</strong></p>

<p>ざっくり言うと、サイズの管理をしなくてもいい配列<strong>(多少の語弊あり)</strong></p>

<p>C#でそれなりの規模のプログラムを組んでいれば絶対に1度はお世話になる<strong>(はず)</strong></p>

<h2>
<span id="定義はどこにあるの" class="fragment"></span><a href="#%E5%AE%9A%E7%BE%A9%E3%81%AF%E3%81%A9%E3%81%93%E3%81%AB%E3%81%82%E3%82%8B%E3%81%AE"><i class="fa fa-link"></i></a>定義はどこにあるの？</h2>

<p>mscorlib.dll → System.Collections.Generic名前空間の下にあります。</p>

<p><qiita-embed-ogp src="https://referencesource.microsoft.com/#mscorlib/system/collections/generic/list.cs"></qiita-embed-ogp></p>

<p>ソースコードは↑でも見れるし、デコンパイルしても見れるよ。</p>

<h1>
<span id="listtのあれやこれや" class="fragment"></span><a href="#listt%E3%81%AE%E3%81%82%E3%82%8C%E3%82%84%E3%81%93%E3%82%8C%E3%82%84"><i class="fa fa-link"></i></a>List＜T＞のあれやこれや</h1>

<h2>
<span id="その前にtってなに" class="fragment"></span><a href="#%E3%81%9D%E3%81%AE%E5%89%8D%E3%81%ABt%E3%81%A3%E3%81%A6%E3%81%AA%E3%81%AB"><i class="fa fa-link"></i></a>その前に＜T＞ってなに？</h2>

<p>ジェネリクス（ジェネリック）と呼ばれている凄いヤツです。</p>

<p><strong>型だけ違っていて、中身は同じ</strong>であるような一連の処理があったときに、<strong>型をパラメータにとり</strong>、さまざまな型に対応したクラスや関数を作るためのものになります。</p>

<p><code>List&lt;string&gt;</code>とか<code>List&lt;int&gt;</code>とか<code>List&lt;MyClass&gt;</code>とかやると思いますが、この<code>string</code>とか<code>int</code>とか<code>MyClass</code>とかが<strong>型をパラメータにとり</strong>の部分。</p>

<p>どれも複数の値をまとめるものなので、<strong>型だけ違っていて、中身は同じ</strong>。</p>

<h2>
<span id="listの中身ってどうなってるの" class="fragment"></span><a href="#list%E3%81%AE%E4%B8%AD%E8%BA%AB%E3%81%A3%E3%81%A6%E3%81%A9%E3%81%86%E3%81%AA%E3%81%A3%E3%81%A6%E3%82%8B%E3%81%AE"><i class="fa fa-link"></i></a>Listの中身ってどうなってるの？</h2>

<p>配列です。<code>private T[] _items</code>で中身を管理してます。</p>

<p>なのに簡単に要素を増やせるし、減らせる。素晴らしいですね。</p>

<h2>
<span id="配列なのにサイズの管理をしなくてもいいの" class="fragment"></span><a href="#%E9%85%8D%E5%88%97%E3%81%AA%E3%81%AE%E3%81%AB%E3%82%B5%E3%82%A4%E3%82%BA%E3%81%AE%E7%AE%A1%E7%90%86%E3%82%92%E3%81%97%E3%81%AA%E3%81%8F%E3%81%A6%E3%82%82%E3%81%84%E3%81%84%E3%81%AE"><i class="fa fa-link"></i></a>配列なのにサイズの管理をしなくてもいいの？</h2>

<p>厳密に言えば<strong>しなくていい訳ではない</strong>です。<strong>List側で勝手にやって</strong>ます。</p>

<p>なので、利用者はあまり気にすることなく使えます。</p>

<p>具体的には<code>_items.Length</code>と <code>private int _size</code>と<code>public int Capacity</code>の3つの要素でサイズを管理しています。</p>

<h3>
<span id="countってのがあった気がするけど" class="fragment"></span><a href="#count%E3%81%A3%E3%81%A6%E3%81%AE%E3%81%8C%E3%81%82%E3%81%A3%E3%81%9F%E6%B0%97%E3%81%8C%E3%81%99%E3%82%8B%E3%81%91%E3%81%A9"><i class="fa fa-link"></i></a>Countってのがあった気がするけど？</h3>

<p>Listを使うときによく使うCount(プロパティ)ですが、</p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="kt">int</span> <span class="n">Count</span>
<span class="p">{</span>
    <span class="k">get</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="n">_size</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>となっているので、_sizeと同じです。</p>

<p>ちなみにCountメソッドってのもありますが、<strong>Listクラスに定義は存在しません。</strong></p>

<p><strong>拡張メソッド</strong>と呼ばれる機能を使って、<code>Enumerable</code>クラスに定義されてます。</p>

<p>こいつの話をしだすと、<code>IEnumerable&lt;T&gt;</code>とか、<code>Func</code>デリゲートとか、ラムダ式とか、LINQとか、色々話が広がりすぎるので今回は割愛します。</p>

<p>ソースコードは、System.Core.dll → System.Linq名前空間の下にいます。</p>

<p>こっちはGitHubにおいてあります。</p>

<p><qiita-embed-ogp src="https://github.com/dotnet/corefx/blob/master/src/System.Linq/src/System/Linq/Count.cs"></qiita-embed-ogp></p>

<h2>
<span id="要素の取得ってどうなってるの" class="fragment"></span><a href="#%E8%A6%81%E7%B4%A0%E3%81%AE%E5%8F%96%E5%BE%97%E3%81%A3%E3%81%A6%E3%81%A9%E3%81%86%E3%81%AA%E3%81%A3%E3%81%A6%E3%82%8B%E3%81%AE"><i class="fa fa-link"></i></a>要素の取得ってどうなってるの？</h2>

<p>[]で要素を取得・設定する処理のコードです。</p>

<div class="code-frame" data-lang="c#"><div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="n">T</span> <span class="k">this</span><span class="p">[</span><span class="kt">int</span> <span class="n">index</span><span class="p">]</span>
<span class="p">{</span>
    <span class="k">get</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">((</span><span class="kt">uint</span><span class="p">)</span><span class="n">index</span> <span class="p">&gt;=</span> <span class="p">(</span><span class="kt">uint</span><span class="p">)</span><span class="n">_size</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">ThrowHelper</span><span class="p">.</span><span class="nf">ThrowArgumentOutOfRangeException</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">_items</span><span class="p">[</span><span class="n">index</span><span class="p">];</span>
    <span class="p">}</span>
    <span class="k">set</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">((</span><span class="kt">uint</span><span class="p">)</span><span class="n">index</span> <span class="p">&gt;=</span> <span class="p">(</span><span class="kt">uint</span><span class="p">)</span><span class="n">_size</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">ThrowHelper</span><span class="p">.</span><span class="nf">ThrowArgumentOutOfRangeException</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="n">_items</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="p">=</span> <span class="k">value</span><span class="p">;</span>
        <span class="n">_version</span><span class="p">++;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>このメソッド自体は<strong>インデクサー</strong>と呼ばれるC#で用意されている機能です。</p>

<p>indexがsizeより大きい場合や0以下の場合、<code>ArgumentOutOfRangeException</code>が発生します。</p>

<h2>
<span id="要素の追加ってどうなってるの" class="fragment"></span><a href="#%E8%A6%81%E7%B4%A0%E3%81%AE%E8%BF%BD%E5%8A%A0%E3%81%A3%E3%81%A6%E3%81%A9%E3%81%86%E3%81%AA%E3%81%A3%E3%81%A6%E3%82%8B%E3%81%AE"><i class="fa fa-link"></i></a>要素の追加ってどうなってるの？</h2>

<p>要素追加用メソッド<code>Add</code>です。こいつは4段階の構成になっています。</p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="k">void</span> <span class="nf">Add</span><span class="p">(</span><span class="n">T</span> <span class="n">item</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">_size</span> <span class="p">==</span> <span class="n">_items</span><span class="p">.</span><span class="n">Length</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nf">EnsureCapacity</span><span class="p">(</span><span class="n">_size</span> <span class="p">+</span> <span class="m">1</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="n">_items</span><span class="p">[</span><span class="n">_size</span><span class="p">++]</span> <span class="p">=</span> <span class="n">item</span><span class="p">;</span>
    <span class="n">_version</span><span class="p">++;</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="k">private</span> <span class="k">void</span> <span class="nf">EnsureCapacity</span><span class="p">(</span><span class="kt">int</span> <span class="n">min</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">_items</span><span class="p">.</span><span class="n">Length</span> <span class="p">&lt;</span> <span class="n">min</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">num</span> <span class="p">=</span> <span class="p">(</span><span class="n">_items</span><span class="p">.</span><span class="n">Length</span> <span class="p">==</span> <span class="m">0</span><span class="p">)</span> <span class="p">?</span> <span class="m">4</span> <span class="p">:</span> <span class="p">(</span><span class="n">_items</span><span class="p">.</span><span class="n">Length</span> <span class="p">*</span> <span class="m">2</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">((</span><span class="kt">uint</span><span class="p">)</span><span class="n">num</span> <span class="p">&gt;</span> <span class="m">2146435071u</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">num</span> <span class="p">=</span> <span class="m">2146435071</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">num</span> <span class="p">&lt;</span> <span class="n">min</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">num</span> <span class="p">=</span> <span class="n">min</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="n">Capacity</span> <span class="p">=</span> <span class="n">num</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="kt">int</span> <span class="n">Capacity</span>
<span class="p">{</span>
    <span class="p">[</span><span class="n">__DynamicallyInvokable</span><span class="p">]</span>
    <span class="k">get</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="n">_items</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="p">[</span><span class="n">__DynamicallyInvokable</span><span class="p">]</span>
    <span class="k">set</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">value</span> <span class="p">&lt;</span> <span class="n">_size</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">ThrowHelper</span><span class="p">.</span><span class="nf">ThrowArgumentOutOfRangeException</span><span class="p">(</span><span class="n">ExceptionArgument</span><span class="p">.</span><span class="k">value</span><span class="p">,</span> <span class="n">ExceptionResource</span><span class="p">.</span><span class="n">ArgumentOutOfRange_SmallCapacity</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">value</span> <span class="p">!=</span> <span class="n">_items</span><span class="p">.</span><span class="n">Length</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="k">value</span> <span class="p">&gt;</span> <span class="m">0</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">T</span><span class="p">[]</span> <span class="n">array</span> <span class="p">=</span> <span class="k">new</span> <span class="n">T</span><span class="p">[</span><span class="k">value</span><span class="p">];</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">_size</span> <span class="p">&gt;</span> <span class="m">0</span><span class="p">)</span>
                <span class="p">{</span>
                    <span class="n">Array</span><span class="p">.</span><span class="nf">Copy</span><span class="p">(</span><span class="n">_items</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="n">array</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="n">_size</span><span class="p">);</span>
                <span class="p">}</span>
                <span class="n">_items</span> <span class="p">=</span> <span class="n">array</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">else</span>
            <span class="p">{</span>
                <span class="n">_items</span> <span class="p">=</span> <span class="n">_emptyArray</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>4段階目の<code>Array.Copy</code>は、配列をコピーするメソッドです。</p>

<p>後で詳しく説明しますので、この段階ではそんなもんかと思っていてください。</p>

<ol>
<li>
<code>Add</code>呼び出し時に<code>_size</code>と<code>_items.Length</code>が同じだった場合、<code>EnsureCapacity</code>を呼び出す。</li>
<li>
<code>EnsureCapacity</code>呼び出し時に<code>_items.Length</code>の2倍と引数<code>min</code>を比較し、大きい方を<code>Capacity</code>に設定。</li>
<li>
<code>Capacity</code>のSetterで<code>_items.Length</code>と設定値<code>value</code>を比較し、配列の新規作成と既存部分のコピーを行う。</li>
</ol>

<p>つまりListは<strong>「サイズを無視して要素を追加できる配列」</strong>ではなく、<strong>「サイズが足りなくなったら自動で作り直してくれる配列」</strong>なんです。実に優秀なお方ですね。</p>

<h3>
<span id="パフォーマンス測ってみた" class="fragment"></span><a href="#%E3%83%91%E3%83%95%E3%82%A9%E3%83%BC%E3%83%9E%E3%83%B3%E3%82%B9%E6%B8%AC%E3%81%A3%E3%81%A6%E3%81%BF%E3%81%9F"><i class="fa fa-link"></i></a>パフォーマンス測ってみた</h3>

<p>上記の理由から、Addを大量に呼び出す場合は、あらかじめ<code>Capacity</code>を自分で設定しておいたほうがパフォーマンスに優れます。(配列の新規作成や要素のコピーには時間がかかる)</p>

<p>というわけで、早速測ってみました。</p>

<div class="code-frame" data-lang="ini"><div class="highlight"><pre class="with-code"><code><span class="py">BenchmarkDotNet</span><span class="p">=</span><span class="s">v0.11.3, OS=Windows 10.0.15063.1508 (1703/CreatorsUpdate/Redstone2)</span>
<span class="err">Intel</span> <span class="err">Core</span> <span class="err">i7-4770</span> <span class="err">CPU</span> <span class="err">3.40GHz</span> <span class="err">(Haswell),</span> <span class="err">1</span> <span class="err">CPU,</span> <span class="err">8</span> <span class="err">logical</span> <span class="err">and</span> <span class="err">4</span> <span class="err">physical</span> <span class="err">cores</span>
<span class="py">Frequency</span><span class="p">=</span><span class="s">3312643 Hz, Resolution=301.8738 ns, Timer=TSC</span>
  <span class="nn">[Host]</span>     <span class="err">:</span> <span class="err">.NET</span> <span class="err">Framework</span> <span class="err">4.7.2</span> <span class="err">(CLR</span> <span class="err">4.0.30319.42000),</span> <span class="err">32bit</span> <span class="err">LegacyJIT-v4.7.3260.0</span>
  <span class="err">DefaultJob</span> <span class="err">:</span> <span class="err">.NET</span> <span class="err">Framework</span> <span class="err">4.7.2</span> <span class="err">(CLR</span> <span class="err">4.0.30319.42000),</span> <span class="err">32bit</span> <span class="err">LegacyJIT-v4.7.3260.0</span>
</code></pre></div></div>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">Tests</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="kt">int</span> <span class="n">num</span> <span class="p">=</span> <span class="m">100</span><span class="n">_000_000</span><span class="p">;</span>
    <span class="k">public</span> <span class="nf">Tests</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nf">ListTest1</span><span class="p">();</span>
        <span class="nf">ListTest2</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="p">[</span><span class="n">Benchmark</span><span class="p">]</span>
    <span class="k">public</span> <span class="k">void</span> <span class="nf">ListTest1</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">//特に何もしない。</span>
        <span class="kt">var</span> <span class="n">a</span> <span class="p">=</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;();</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">num</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
        <span class="p">{</span>
            <span class="n">a</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="p">[</span><span class="n">Benchmark</span><span class="p">]</span>
    <span class="k">public</span> <span class="k">void</span> <span class="nf">ListTest2</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// コンストラクタの引数であらかじめCapacityを設定できる。</span>
        <span class="kt">var</span> <span class="n">b</span> <span class="p">=</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;(</span><span class="n">num</span><span class="p">);</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">num</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
        <span class="p">{</span>
            <span class="n">b</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<table>
<thead>
<tr>
<th>Method</th>
<th style="text-align: right">Mean</th>
<th style="text-align: right">Error</th>
<th style="text-align: right">StdDev</th>
</tr>
</thead>
<tbody>
<tr>
<td>ListTest1</td>
<td style="text-align: right">550.7 ms</td>
<td style="text-align: right">4.740 ms</td>
<td style="text-align: right">4.434 ms</td>
</tr>
<tr>
<td>ListTest2</td>
<td style="text-align: right">336.4 ms</td>
<td style="text-align: right">1.259 ms</td>
<td style="text-align: right">1.116 ms</td>
</tr>
</tbody>
</table>

<p>リストに0から1億個数字を追加した時の差がこれくらいでした。</p>

<p>これを大きいと見るか、小さいと見るかは人それぞれですが、個人的にはそんなに大きくないと思います。</p>

<p>1億もデータがあったらもっと遅い処理がどこかにあるはずなので、誤差レベルじゃないかと。</p>

<p>ですが、シビアなパフォーマンスを求められる局面に出会ったら思い出してください。</p>

<h2>
<span id="要素の削除ってどうなってるの" class="fragment"></span><a href="#%E8%A6%81%E7%B4%A0%E3%81%AE%E5%89%8A%E9%99%A4%E3%81%A3%E3%81%A6%E3%81%A9%E3%81%86%E3%81%AA%E3%81%A3%E3%81%A6%E3%82%8B%E3%81%AE"><i class="fa fa-link"></i></a>要素の削除ってどうなってるの？</h2>

<p>要素削除用メソッド<code>RemoveAt</code>です。こいつの構成は2段階です。</p>

<div class="code-frame" data-lang="c#"><div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="k">void</span> <span class="nf">RemoveAt</span><span class="p">(</span><span class="kt">int</span> <span class="n">index</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// (1)</span>
    <span class="k">if</span> <span class="p">((</span><span class="kt">uint</span><span class="p">)</span><span class="n">index</span> <span class="p">&gt;=</span> <span class="p">(</span><span class="kt">uint</span><span class="p">)</span><span class="n">_size</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">ThrowHelper</span><span class="p">.</span><span class="nf">ThrowArgumentOutOfRangeException</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="c1">// (2)</span>
    <span class="n">_size</span><span class="p">--;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">index</span> <span class="p">&lt;</span> <span class="n">_size</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">Array</span><span class="p">.</span><span class="nf">Copy</span><span class="p">(</span><span class="n">_items</span><span class="p">,</span> <span class="n">index</span> <span class="p">+</span> <span class="m">1</span><span class="p">,</span> <span class="n">_items</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">_size</span> <span class="p">-</span> <span class="n">index</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="c1">// (3)</span>
    <span class="n">_items</span><span class="p">[</span><span class="n">_size</span><span class="p">]</span> <span class="p">=</span> <span class="k">default</span><span class="p">(</span><span class="n">T</span><span class="p">);</span>
    <span class="n">_version</span><span class="p">++;</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">Copy</span><span class="p">(</span><span class="n">Array</span> <span class="n">sourceArray</span><span class="p">,</span> <span class="kt">int</span> <span class="n">sourceIndex</span><span class="p">,</span> <span class="n">Array</span> <span class="n">destinationArray</span><span class="p">,</span> <span class="kt">int</span> <span class="n">destinationIndex</span><span class="p">,</span> <span class="kt">int</span> <span class="n">length</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nf">Copy</span><span class="p">(</span><span class="n">sourceArray</span><span class="p">,</span> <span class="n">sourceIndex</span><span class="p">,</span> <span class="n">destinationArray</span><span class="p">,</span> <span class="n">destinationIndex</span><span class="p">,</span> <span class="n">length</span><span class="p">,</span> <span class="k">false</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">internal</span> <span class="k">static</span> <span class="k">extern</span> <span class="k">void</span> <span class="nf">Copy</span><span class="p">(</span><span class="n">Array</span> <span class="n">sourceArray</span><span class="p">,</span> <span class="kt">int</span> <span class="n">sourceIndex</span><span class="p">,</span> <span class="n">Array</span> <span class="n">destinationArray</span><span class="p">,</span> <span class="kt">int</span> <span class="n">destinationIndex</span><span class="p">,</span> <span class="kt">int</span> <span class="n">length</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">reliable</span><span class="p">);</span>
</code></pre></div></div>

<p>ぱっと見て、分かりにくい処理です。</p>

<p>(1)から順に追っていきましょう。</p>

<div class="code-frame" data-lang="c#"><div class="highlight"><pre class="with-code"><code><span class="c1">// (1)</span>
<span class="k">if</span> <span class="p">((</span><span class="kt">uint</span><span class="p">)</span><span class="n">index</span> <span class="p">&gt;=</span> <span class="p">(</span><span class="kt">uint</span><span class="p">)</span><span class="n">_size</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">ThrowHelper</span><span class="p">.</span><span class="nf">ThrowArgumentOutOfRangeException</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div></div>

<p>ここは特に言うこともありません。</p>

<p>indexがsizeより大きい場合や0以下の場合、<code>ArgumentOutOfRangeException</code>が発生します。</p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="c1">// (2)</span>
<span class="n">_size</span><span class="p">--;</span>
<span class="k">if</span> <span class="p">(</span><span class="n">index</span> <span class="p">&lt;</span> <span class="n">_size</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">Array</span><span class="p">.</span><span class="nf">Copy</span><span class="p">(</span><span class="n">_items</span><span class="p">,</span> <span class="n">index</span> <span class="p">+</span> <span class="m">1</span><span class="p">,</span> <span class="n">_items</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">_size</span> <span class="p">-</span> <span class="n">index</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p><code>_size--</code>でListのサイズを1つ小さくします。</p>

<p>問題はその次です。</p>

<p>Array.Copyの中身はCopyですが、このCopyの中身は見ることができません。</p>

<p>こいつはC++で書かれてるDLLを参照しています。</p>

<p>仕方がないので、皆大好きMicrosoft公式リファレンスにて、Array.Copyの仕様を調べます。</p>

<blockquote>
<p>Copy(Array, Int32, Array, Int32, Int32)</p>

<p>Copies a range of elements from an <a href="https://docs.microsoft.com/en-us/dotnet/api/system.array?view=netframework-4.7.2" rel="nofollow noopener" target="_blank">Array</a> starting at the specified source index and pastes them to another <a href="https://docs.microsoft.com/en-us/dotnet/api/system.array?view=netframework-4.7.2" rel="nofollow noopener" target="_blank">Array</a> starting at the specified destination index. The length and the indexes are specified as 32-bit integers.</p>

<p>指定されたコピー元インデックスから始まる配列から要素の範囲をコピーし、指定されたコピー先インデックスから始まる別の配列にそれらを貼り付けます。 長さとインデックスは32ビット整数として指定されます。</p>

<h4>
<span id="parameters" class="fragment"></span><a href="#parameters"><i class="fa fa-link"></i></a>Parameters</h4>

<ul>
<li>sourceArray</li>
</ul>

<p><a href="https://docs.microsoft.com/en-us/dotnet/api/system.array?view=netframework-4.7.2" rel="nofollow noopener" target="_blank">Array</a></p>

<p>The <a href="https://docs.microsoft.com/en-us/dotnet/api/system.array?view=netframework-4.7.2" rel="nofollow noopener" target="_blank">Array</a> that contains the data to copy.</p>

<ul>
<li>sourceIndex</li>
</ul>

<p><a href="https://docs.microsoft.com/en-us/dotnet/api/system.int32?view=netframework-4.7.2" rel="nofollow noopener" target="_blank">Int32</a></p>

<p>A 32-bit integer that represents the index in the <code>sourceArray</code> at which copying begins.</p>

<ul>
<li>destinationArray</li>
</ul>

<p><a href="https://docs.microsoft.com/en-us/dotnet/api/system.array?view=netframework-4.7.2" rel="nofollow noopener" target="_blank">Array</a></p>

<p>The <a href="https://docs.microsoft.com/en-us/dotnet/api/system.array?view=netframework-4.7.2" rel="nofollow noopener" target="_blank">Array</a> that receives the data.</p>

<ul>
<li>destinationIndex</li>
</ul>

<p><a href="https://docs.microsoft.com/en-us/dotnet/api/system.int32?view=netframework-4.7.2" rel="nofollow noopener" target="_blank">Int32</a></p>

<p>A 32-bit integer that represents the index in the <code>destinationArray</code> at which storing begins.</p>

<ul>
<li>length</li>
</ul>

<p><a href="https://docs.microsoft.com/en-us/dotnet/api/system.int32?view=netframework-4.7.2" rel="nofollow noopener" target="_blank">Int32</a></p>

<p>A 32-bit integer that represents the number of elements to copy.</p>

<p>パラメーター<br>
sourceArray<br>
アレイ<br>
コピーするデータを含む配列。</p>

<p>sourceIndex<br>
Int32<br>
コピーが開始されるsourceArray内のインデックスを表す32ビット整数。</p>

<p>destinationArray<br>
アレイ<br>
データを受け取る配列。</p>

<p>destinationIndex<br>
Int32<br>
保存が始まるdestinationArray内のインデックスを表す32ビット整数。</p>

<p>長さ<br>
Int32<br>
コピーする要素の数を表す32ビット整数。</p>
</blockquote>

<p>日本語部分がGoogle翻訳にぶん投げた結果です。</p>

<p>つまり<code>_items</code>の <code>index + 1</code>インデックス目から<code>_size - index</code>個の要素を、<code>_items</code>の<code>index</code>インデックス目を開始位置としてコピーする処理ってことですね。</p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="c1">// (3)</span>
<span class="n">_items</span><span class="p">[</span><span class="n">_size</span><span class="p">]</span> <span class="p">=</span> <span class="k">default</span><span class="p">(</span><span class="n">T</span><span class="p">);</span>
<span class="n">_version</span><span class="p">++;</span>
</code></pre></div></div>

<p>そして最後に、隙間をdefaultで埋めて終わりです。</p>

<h3>
<span id="全く理解が追いつかないのだが" class="fragment"></span><a href="#%E5%85%A8%E3%81%8F%E7%90%86%E8%A7%A3%E3%81%8C%E8%BF%BD%E3%81%84%E3%81%A4%E3%81%8B%E3%81%AA%E3%81%84%E3%81%AE%E3%81%A0%E3%81%8C"><i class="fa fa-link"></i></a>全く理解が追いつかないのだが？</h3>

<p>表を使って詳しく説明します。</p>

<table>
<thead>
<tr>
<th>0</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>5</th>
</tr>
</thead>
<tbody>
<tr>
<td>a</td>
<td>b</td>
<td><strong>c</strong></td>
<td>d</td>
<td>e</td>
<td>f</td>
</tr>
</tbody>
</table>

<p>List＜string＞の中身だと思ってください。この時<code>_size</code>は6です。</p>

<p>このListからcを消したいと思います。</p>

<p><code>RemoveAt(2)</code>を実行します。<code>index</code>は2です。</p>

<p><code>index &lt; _size</code>なので(1)で例外は発生しません。</p>

<p>(2)の最初で<code>_size</code>が5になります。</p>

<p>よって、</p>

<p><code>index+1</code> =&gt; 3</p>

<p><code>_size - index</code> =&gt; 3</p>

<p>となるので、<code>_items</code>の3インデックス目から3個の要素を、<code>_items</code>の2インデックス目を開始位置としてコピーします。</p>

<table>
<thead>
<tr>
<th>0</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>5</th>
</tr>
</thead>
<tbody>
<tr>
<td>a</td>
<td>b</td>
<td><strong><em>ｄ</em></strong></td>
<td><strong><em>e</em></strong></td>
<td><strong><em>f</em></strong></td>
<td>f</td>
</tr>
</tbody>
</table>

<p>このままでは最後に不要なデータが残ってしまうので、一番最後をdefault(string)、空文字で埋めます。</p>

<table>
<thead>
<tr>
<th>0</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>5</th>
</tr>
</thead>
<tbody>
<tr>
<td>a</td>
<td>b</td>
<td>ｄ</td>
<td>e</td>
<td>f</td>
<td></td>
</tr>
</tbody>
</table>

<p>無事に、cを消すことができました。</p>

<p>ちなみに(2)で<code>if (index &lt; _size)</code>と判定してます。</p>

<p>これは<code>index</code>と<code>_size</code>が同じ(=一番最後の要素を削除したい)場合、一番最後をdefault(T)で埋めるだけでいいからです。</p>

<h3>
<span id="メモリ的な話" class="fragment"></span><a href="#%E3%83%A1%E3%83%A2%E3%83%AA%E7%9A%84%E3%81%AA%E8%A9%B1"><i class="fa fa-link"></i></a>メモリ的な話</h3>

<p>ここで1つ大事(かもしれない)事です。</p>

<p><strong>要素を削除した時、配列のサイズは変わらない</strong>んです。</p>

<p>なので、大量の要素を削除した時、配列の後ろに<strong>大量の空の部分</strong>が出来上がります。</p>

<p>中身は空でもメモリは消費するので、気をつけてください。</p>

<p>今どきそれほどシビアなメモリ管理が必要なことはあまり無いとは思いますが。</p>

<h2>
<span id="例外ってどうなってるの" class="fragment"></span><a href="#%E4%BE%8B%E5%A4%96%E3%81%A3%E3%81%A6%E3%81%A9%E3%81%86%E3%81%AA%E3%81%A3%E3%81%A6%E3%82%8B%E3%81%AE"><i class="fa fa-link"></i></a>例外ってどうなってるの？</h2>

<ol>
<li><code>System.ArgumentOutOfRangeException</code></li>
<li><code>System.ArgumentNullException</code></li>
<li><code>System.InvalidOperationException</code></li>
<li><code>System.ArgumentException</code></li>
<li><code>System.OutOfMemoryException</code></li>
</ol>

<p>Listクラス内で発生する可能性のある例外たちです。</p>

<p>出現頻度は、1 &gt;= 2 &gt; 3 &gt;&gt;&gt;&gt; 4 &gt;&gt;&gt;&gt; 5です。<strong>(当社調べ)</strong></p>

<p>ここでは出現頻度の低い4,5は割愛します。</p>

<h3>
<span id="1argumentoutofrangeexception" class="fragment"></span><a href="#1argumentoutofrangeexception"><i class="fa fa-link"></i></a>1.ArgumentOutOfRangeException</h3>

<p>要素の取得時や削除時に、<code>_size</code>より大きな値や0未満の値を設定すると発生します。</p>

<p>よく初心者が「要素が6なんだから最後は6番目やん、<code>list[6]</code>っと」と言って踏み抜くやつです。</p>

<h3>
<span id="2argumentnullexception" class="fragment"></span><a href="#2argumentnullexception"><i class="fa fa-link"></i></a>2.ArgumentNullException</h3>

<p>引数にnullを設定して一部のメソッドを呼び出すと、発生します。</p>

<p>「いちいち<code>Add</code>なんてやってられんわ、<code>AddRange</code>使ったろ」と言ったときに、引数を初期化し忘れて踏むことがあります。</p>

<h3>
<span id="3invalidoperationexception" class="fragment"></span><a href="#3invalidoperationexception"><i class="fa fa-link"></i></a>3.InvalidOperationException</h3>

<p>上2つはそのままですが、こいつは少しややこしいです。</p>

<p>直訳すると「<strong>無効な操作</strong>による例外」です。<strong>無効な操作</strong>ってなんやねん。</p>

<p>良く見るパターンはこんな感じのやつです。</p>

<div class="code-frame" data-lang="c#"><div class="highlight"><pre class="with-code"><code><span class="kt">var</span> <span class="n">listStr</span> <span class="p">=</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;()</span> <span class="p">{</span> <span class="s">"aaa"</span><span class="p">,</span> <span class="s">"abc"</span><span class="p">,</span> <span class="s">"bbc"</span><span class="p">,</span> <span class="s">"aba"</span><span class="p">,</span> <span class="s">"cbc"</span><span class="p">,</span> <span class="s">"bcc"</span> <span class="p">};</span>
<span class="k">foreach</span> <span class="p">(</span><span class="kt">var</span> <span class="n">item</span> <span class="k">in</span> <span class="n">listStr</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(!</span><span class="n">item</span><span class="p">.</span><span class="nf">Contains</span><span class="p">(</span><span class="s">"a"</span><span class="p">))</span>
    <span class="p">{</span>
        <span class="n">listStr</span><span class="p">.</span><span class="nf">Remove</span><span class="p">(</span><span class="n">item</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p><code>foreach</code>の中でListに手を加えてしまったパターンです。</p>

<p>”コレクションが変更されました。列挙操作は実行されない可能性があります。”と言われてしまいます。</p>

<p>列挙操作、つまり1つ1つ数え上げている途中で変えられてしまうと、どこまで処理を行ったか分からなくなってしまいます。</p>

<p>もしこれを許可してしまった場合、</p>

<table>
<thead>
<tr>
<th>0</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>5</th>
</tr>
</thead>
<tbody>
<tr>
<td>aaa</td>
<td>abc</td>
<td>bbc</td>
<td>aba</td>
<td>cbc</td>
<td>bcc</td>
</tr>
<tr>
<td>未</td>
<td>未</td>
<td>未</td>
<td>未</td>
<td>未</td>
<td>未</td>
</tr>
</tbody>
</table>

<table>
<thead>
<tr>
<th>0</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>5</th>
</tr>
</thead>
<tbody>
<tr>
<td>aaa</td>
<td>abc</td>
<td>bbc</td>
<td>aba</td>
<td>cbc</td>
<td>bcc</td>
</tr>
<tr>
<td>済→残</td>
<td>未</td>
<td>未</td>
<td>未</td>
<td>未</td>
<td>未</td>
</tr>
</tbody>
</table>

<table>
<thead>
<tr>
<th>0</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>5</th>
</tr>
</thead>
<tbody>
<tr>
<td>aaa</td>
<td>abc</td>
<td>bbc</td>
<td>aba</td>
<td>cbc</td>
<td>bcc</td>
</tr>
<tr>
<td>済</td>
<td>済→残</td>
<td>未</td>
<td>未</td>
<td>未</td>
<td>未</td>
</tr>
</tbody>
</table>

<table>
<thead>
<tr>
<th>0</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>5</th>
</tr>
</thead>
<tbody>
<tr>
<td>aaa</td>
<td>bbc</td>
<td>bbc</td>
<td>aba</td>
<td>cbc</td>
<td>bcc</td>
</tr>
<tr>
<td>済</td>
<td>済</td>
<td>済→削</td>
<td>未</td>
<td>未</td>
<td>未</td>
</tr>
</tbody>
</table>

<table>
<thead>
<tr>
<th>0</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>5</th>
</tr>
</thead>
<tbody>
<tr>
<td>aaa</td>
<td>bbc</td>
<td>aba</td>
<td>cbc</td>
<td>bcc</td>
<td></td>
</tr>
<tr>
<td>済</td>
<td>済</td>
<td>未</td>
<td>済→削</td>
<td>未</td>
<td>未</td>
</tr>
</tbody>
</table>

<table>
<thead>
<tr>
<th>0</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>5</th>
</tr>
</thead>
<tbody>
<tr>
<td>aaa</td>
<td>bbc</td>
<td>aba</td>
<td>bcc</td>
<td></td>
<td></td>
</tr>
<tr>
<td>済</td>
<td>済</td>
<td>未</td>
<td>未</td>
<td>済→完</td>
<td>未</td>
</tr>
</tbody>
</table>

<p>このように確認されない部分が出てしまいます。</p>

<p>これでは困るので、<code>foreach</code>の中では要素の変更ができないようになっています。</p>

<h2>
<span id="コレクションの変更ってどうなってるの" class="fragment"></span><a href="#%E3%82%B3%E3%83%AC%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%AE%E5%A4%89%E6%9B%B4%E3%81%A3%E3%81%A6%E3%81%A9%E3%81%86%E3%81%AA%E3%81%A3%E3%81%A6%E3%82%8B%E3%81%AE"><i class="fa fa-link"></i></a>コレクションの変更ってどうなってるの？</h2>

<p>InvalidOperationExceptionの説明の中に、”コレクションが変更されました。列挙～”とありました。</p>

<p>コレクションの変更をどうやって管理してるのかもついでに解説します。</p>

<p>とはいえ、実は答えの半分は既に出ていたりします。</p>

<p>要素の取得・追加・削除の解説内に<code>_version++</code>という処理がありました。</p>

<p>こいつを使っています。</p>

<div class="code-frame" data-lang="c#"><div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="k">void</span> <span class="nf">ForEach</span><span class="p">(</span><span class="n">Action</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span> <span class="n">action</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">action</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">ThrowHelper</span><span class="p">.</span><span class="nf">ThrowArgumentNullException</span><span class="p">(</span><span class="n">ExceptionArgument</span><span class="p">.</span><span class="n">match</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="c1">//ここと</span>
    <span class="kt">int</span> <span class="n">version</span> <span class="p">=</span> <span class="n">_version</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">_size</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
    <span class="p">{</span>
        <span class="c1">//ここと</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">version</span> <span class="p">!=</span> <span class="n">_version</span> <span class="p">&amp;&amp;</span> <span class="n">BinaryCompatibility</span><span class="p">.</span><span class="n">TargetsAtLeast_Desktop_V4_5</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="nf">action</span><span class="p">(</span><span class="n">_items</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
    <span class="p">}</span>
    <span class="c1">//ここ</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">version</span> <span class="p">!=</span> <span class="n">_version</span> <span class="p">&amp;&amp;</span> <span class="n">BinaryCompatibility</span><span class="p">.</span><span class="n">TargetsAtLeast_Desktop_V4_5</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">ThrowHelper</span><span class="p">.</span><span class="nf">ThrowInvalidOperationException</span><span class="p">(</span><span class="n">ExceptionResource</span><span class="p">.</span><span class="n">InvalidOperation_EnumFailedVersion</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p><code>ForEach</code>メソッドです。一般的に広く使われている<code>foreach</code>とは別物になります。</p>

<p>色々と分からない箇所があるとは思いますが、コメントのすぐ下の行だけ見てください。</p>

<ol>
<li>最初に現在の<code>_version</code>を取得し、<code>version</code>としておく。</li>
<li>
<code>_item</code>に対して反復処理をかける際に、都度<code>_version</code>と<code>version</code>を比較。</li>
<li>不一致だったら<code>for</code>から抜けて、例外を出力。</li>
</ol>

<p>これにより<code>Add</code>や<code>RemoveAt</code>等が実行されると<code>_version</code>と<code>version</code>にズレが生じる仕組みになっております。</p>

<p><code>foreach</code>も似たようなことをやっています。(詳細を解説しようとすると長くなるので割愛)</p>

<p>2019/01/15 <a href="https://qiita.com/NCT48/items/d8394d587e9fee969ca9" id="reference-f0c3336c696cc0ad987c">この辺について書いて見ました。</a></p>

<p>「Enumerator構造体ってなに？」の辺りで触れています。</p>

<h1>
<span id="おわりに" class="fragment"></span><a href="#%E3%81%8A%E3%82%8F%E3%82%8A%E3%81%AB"><i class="fa fa-link"></i></a>おわりに</h1>

<p>ここまで大量に書いておいてなんですが、C#でプログラミングする上で、ここに書いてあることの<strong>9割は不要</strong>です。</p>

<p>プログラミング言語ってのは、「何か」を作るための<strong>道具の1つ</strong>です。</p>

<p>道具の仕組みを知らなくても、使い方さえ知っていればその「何か」は作れるわけです。</p>

<p>ボールペンからインクが出る原理がわからなくても字は書けるし、どうやって電話が音を伝えているか知らなくても遠くの誰かとお話できるわけです。</p>

<p>ちなみにこの考え方はオブジェクト指向でよく出てくる<strong>カプセル化</strong>と呼ばれるものです。</p>

<p>複雑なもの(配列の長さの管理等)は中に隠し、外に見えるのは簡単な操作(取得・追加・削除等)のみにすることで誰でも利用可能になっています。</p>

<p>もちろん知っておいて損することはありません。</p>

<p>シビアなメモリ管理やパフォーマンスを求められた場合に役立つ可能性はありますし、こうやって長々と記事を書いて暇を潰すことも出来ます。</p>

<p>ただ費用対効果に見合っているかと言われると......疑問ですね。</p>

<h2>
<span id="なぜこんな物を書いたのか" class="fragment"></span><a href="#%E3%81%AA%E3%81%9C%E3%81%93%E3%82%93%E3%81%AA%E7%89%A9%E3%82%92%E6%9B%B8%E3%81%84%E3%81%9F%E3%81%AE%E3%81%8B"><i class="fa fa-link"></i></a>なぜこんな物を書いたのか</h2>

<p>よくプログラミングの世界では「おまじない」とか「動いてるからよし」とか「そういうものです」とか言われることがあります。</p>

<p>自作の機能だとマズいですが、C#にはじめから用意されている機能だったらそれでいいと思います。</p>

<p>でも中には「いや、そんな事言われても納得できんぞい。」と考える変わり者がいてもいいでしょう。</p>

<p>そんな変わり者が僕以外にいるかどうかはわかりませんが、「いたら嬉しいなぁ」というのが動機です。</p>

<blockquote>
<p>人は生まれながらに、知ることを欲する。　アリストテレス(古代ギリシア)</p>
</blockquote>

<p><del>かっこつけてアリストテレスとか言ってますが、元ネタはトリビアの泉です。</del></p>

<p>もし次回以降があれば、今回割愛した<code>IEnumerable&lt;T&gt;</code>とか、<code>Func</code>デリゲートとか、ラムダ式とか、LINQとかその変の話もしたいと思ってます。</p>
</div></div></section><div class="css-1yzj1fm"><div class="css-1uv1qiv"><span class="fa fa-twitter"></span></div><div class="css-1uv1qiv"><span class="fa fa-facebook"></span></div></div><div class="apm-Content"><div class="apm-Content_title">Why not register and get more from Qiita?</div><ol class="apm-Content_list"><li>We will deliver articles that match you<div class="description">By following users and tags, you can catch up information on technical fields that you are interested in as a whole</div></li><li>you can read useful information later efficiently<div class="description">By &quot;stocking&quot; the articles you like, you can search right away</div></li><div><a class="apm-Content_help" href="https://help.qiita.com/ja/articles/qiita-login-user" target="_blank"><i class="fa fa-fw fa-arrow-circle-right"></i>What you can do with signing up</a></div></ol><a href="/signup?callback_action=login_or_signup&amp;redirect_to=%2FNCT48%2Fitems%2F5ca2df4e3dbd053cd9f7&amp;realm=qiita" class="apm-Content_button apm-Content_button-signup">Sign up</a><a href="/login?callback_action=login_or_signup&amp;redirect_to=%2FNCT48%2Fitems%2F5ca2df4e3dbd053cd9f7&amp;realm=qiita" class="apm-Content_button apm-Content_button-signin">Login</a></div></div><div class="css-helsa7"></div></div></div></div><div class="css-109dbrr"><div class="css-5jpx49"><div class="css-mnxgyc"><button class=" css-1vlpknv"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/NCT48/items/5ca2df4e3dbd053cd9f7/likers" class="css-1iupg5d">98</a></div><div class="css-fsjkhv"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-1b17vb0">65</span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-7i7f4d"><div class="css-1gj7nt">Improve article</div><a href="/drafts/5ca2df4e3dbd053cd9f7/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/NCT48/items/5ca2df4e3dbd053cd9f7/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/NCT48/items/5ca2df4e3dbd053cd9f7/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/NCT48/items/5ca2df4e3dbd053cd9f7/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/NCT48/items/5ca2df4e3dbd053cd9f7.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="PersonalArticlePage" data-dom-id="PersonalArticlePage-react-component-8649d7c6-0fee-447e-9ba2-18e0a71e2132">{"authorAnalyticsTrackingId":null,"organizationAnalyticsTrackingId":null}</script>
      
<footer id="globalFooter" class="st-Footer"><div class="st-Footer_container"><div class="st-Footer_start"><div class="st-Footer_logo"><svg viewbox="0 0 426.57 130" xmlns="http://www.w3.org/2000/svg"><circle cx="167.08" cy="21.4" r="12.28" /><path d="M250.81 29.66h23.48v18.9h-23.48z" /><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z" /><circle cx="216.33" cy="21.4" r="12.28" /></svg></div><div class="st-Footer_catchcopy">How developers code is here.</div><div class="st-Footer_socials"><a class="fa fa-twitter" href="https://twitter.com/qiita"></a><a class="fa fa-facebook-square" href="https://www.facebook.com/qiita/"></a></div></div><div class="st-Footer_end"><div class="st-Footer_qiita"><div class="st-Footer_label">Qiita</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="/about">About</a><a href="/terms">Terms</a><a href="/privacy">Privacy</a><a target="_blank" href="http://help.qiita.com/ja/articles/qiita-community-guideline">Guideline</a><a target="_blank" href="https://help.qiita.com/ja/articles/others-brand-guideline">Design Guideline</a></div><div class="st-Footer_column"><a href="/release-notes">Release</a><a href="/api/v2/docs">API</a><a href="/feedback/new">ご意見</a><a href="https://help.qiita.com">Help</a><a target="_blank" href="https://qiita.com/ads?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Advertisement</a></div></div></div><div class="st-Footer_increments"><div class="st-Footer_label">Increments</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="https://increments.co.jp/company/">About</a><a href="https://increments.co.jp/jobs/">採用情報</a><a href="https://blog.qiita.com">Blog</a></div><div class="st-Footer_column"><a href="https://teams.qiita.com/">Qiita Team</a><a href="https://jobs.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Jobs</a><a href="https://zine.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Zine</a></div></div></div></div></div><div class="st-Footer_copyright">© 2011-2021 Increments Inc.</div></footer><div id="Snackbar-react-component-d4284f5e-ea27-418e-828e-979d42b2489d"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="Snackbar" data-dom-id="Snackbar-react-component-d4284f5e-ea27-418e-828e-979d42b2489d">{}</script>
      
<div id="LoginModal-react-component-db36b1b5-57d8-4f37-8766-140777c20fde"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="LoginModal" data-dom-id="LoginModal-react-component-db36b1b5-57d8-4f37-8766-140777c20fde">{}</script>
      
<div id="StockModal-react-component-3666ea21-e349-4d2c-a229-2872cdcddd94"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="StockModal" data-dom-id="StockModal-react-component-3666ea21-e349-4d2c-a229-2872cdcddd94">{}</script>
      
</div><div id="dataContainer" style="display: none;" data-config="{&quot;actionPath&quot;:&quot;public/items#show&quot;,&quot;settings&quot;:{&quot;analyticsTrackingId&quot;:&quot;UA-24675221-12&quot;,&quot;assetsMap&quot;:{},&quot;csrfToken&quot;:&quot;D7jGwhciVxLUrJqrnMr4+JcAJALF/p5iuUAQ1fn1PFGlLnUf4Tfk4pWdCMYIh9gOqo+wa+LubAGWmsmzfVWNiw==&quot;,&quot;locale&quot;:&quot;en&quot;},&quot;currentUser&quot;:null}" /></body></html><script type="application/json" data-js-react-on-rails-store="AppStoreWithReactOnRails">{"snackbar":{"type":"","body":"","isActive":false},"article":{"article":{"body":"\n\u003ch1\u003e\n\u003cspan id=\"はじめに\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eはじめに\u003c/h1\u003e\n\n\u003cp\u003eList＜T＞クラスについて、あれやこれや書きたいと思います。\u003c/p\u003e\n\n\u003cp\u003e「普段何気なく使ってるけど、言われてみれば中身とか全然知らんわ。」\u003c/p\u003e\n\n\u003cp\u003e「でも改めて考えると、すごく気になってきた。」\u003c/p\u003e\n\n\u003cp\u003eっていう\u003cdel\u003eちょっと変わった\u003c/del\u003e人向けです。\u003c/p\u003e\n\n\u003cp\u003eほぼ全部独学で書いたので、間違ってたら指摘してください。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"listtとは\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#listt%E3%81%A8%E3%81%AF\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eList＜T＞とは\u003c/h1\u003e\n\n\u003cp\u003eCからC#に移って来た人間が一番最初に感動するやつ\u003cstrong\u003e(私が証明です)\u003c/strong\u003e\u003c/p\u003e\n\n\u003cp\u003eざっくり言うと、サイズの管理をしなくてもいい配列\u003cstrong\u003e(多少の語弊あり)\u003c/strong\u003e\u003c/p\u003e\n\n\u003cp\u003eC#でそれなりの規模のプログラムを組んでいれば絶対に1度はお世話になる\u003cstrong\u003e(はず)\u003c/strong\u003e\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"定義はどこにあるの\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AE%9A%E7%BE%A9%E3%81%AF%E3%81%A9%E3%81%93%E3%81%AB%E3%81%82%E3%82%8B%E3%81%AE\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e定義はどこにあるの？\u003c/h2\u003e\n\n\u003cp\u003emscorlib.dll → System.Collections.Generic名前空間の下にあります。\u003c/p\u003e\n\n\u003cp\u003e\u003cqiita-embed-ogp src=\"https://referencesource.microsoft.com/#mscorlib/system/collections/generic/list.cs\"\u003e\u003c/qiita-embed-ogp\u003e\u003c/p\u003e\n\n\u003cp\u003eソースコードは↑でも見れるし、デコンパイルしても見れるよ。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"listtのあれやこれや\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#listt%E3%81%AE%E3%81%82%E3%82%8C%E3%82%84%E3%81%93%E3%82%8C%E3%82%84\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eList＜T＞のあれやこれや\u003c/h1\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"その前にtってなに\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%9D%E3%81%AE%E5%89%8D%E3%81%ABt%E3%81%A3%E3%81%A6%E3%81%AA%E3%81%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eその前に＜T＞ってなに？\u003c/h2\u003e\n\n\u003cp\u003eジェネリクス（ジェネリック）と呼ばれている凄いヤツです。\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003e型だけ違っていて、中身は同じ\u003c/strong\u003eであるような一連の処理があったときに、\u003cstrong\u003e型をパラメータにとり\u003c/strong\u003e、さまざまな型に対応したクラスや関数を作るためのものになります。\u003c/p\u003e\n\n\u003cp\u003e\u003ccode\u003eList\u0026lt;string\u0026gt;\u003c/code\u003eとか\u003ccode\u003eList\u0026lt;int\u0026gt;\u003c/code\u003eとか\u003ccode\u003eList\u0026lt;MyClass\u0026gt;\u003c/code\u003eとかやると思いますが、この\u003ccode\u003estring\u003c/code\u003eとか\u003ccode\u003eint\u003c/code\u003eとか\u003ccode\u003eMyClass\u003c/code\u003eとかが\u003cstrong\u003e型をパラメータにとり\u003c/strong\u003eの部分。\u003c/p\u003e\n\n\u003cp\u003eどれも複数の値をまとめるものなので、\u003cstrong\u003e型だけ違っていて、中身は同じ\u003c/strong\u003e。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"listの中身ってどうなってるの\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#list%E3%81%AE%E4%B8%AD%E8%BA%AB%E3%81%A3%E3%81%A6%E3%81%A9%E3%81%86%E3%81%AA%E3%81%A3%E3%81%A6%E3%82%8B%E3%81%AE\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eListの中身ってどうなってるの？\u003c/h2\u003e\n\n\u003cp\u003e配列です。\u003ccode\u003eprivate T[] _items\u003c/code\u003eで中身を管理してます。\u003c/p\u003e\n\n\u003cp\u003eなのに簡単に要素を増やせるし、減らせる。素晴らしいですね。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"配列なのにサイズの管理をしなくてもいいの\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E9%85%8D%E5%88%97%E3%81%AA%E3%81%AE%E3%81%AB%E3%82%B5%E3%82%A4%E3%82%BA%E3%81%AE%E7%AE%A1%E7%90%86%E3%82%92%E3%81%97%E3%81%AA%E3%81%8F%E3%81%A6%E3%82%82%E3%81%84%E3%81%84%E3%81%AE\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e配列なのにサイズの管理をしなくてもいいの？\u003c/h2\u003e\n\n\u003cp\u003e厳密に言えば\u003cstrong\u003eしなくていい訳ではない\u003c/strong\u003eです。\u003cstrong\u003eList側で勝手にやって\u003c/strong\u003eます。\u003c/p\u003e\n\n\u003cp\u003eなので、利用者はあまり気にすることなく使えます。\u003c/p\u003e\n\n\u003cp\u003e具体的には\u003ccode\u003e_items.Length\u003c/code\u003eと \u003ccode\u003eprivate int _size\u003c/code\u003eと\u003ccode\u003epublic int Capacity\u003c/code\u003eの3つの要素でサイズを管理しています。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"countってのがあった気がするけど\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#count%E3%81%A3%E3%81%A6%E3%81%AE%E3%81%8C%E3%81%82%E3%81%A3%E3%81%9F%E6%B0%97%E3%81%8C%E3%81%99%E3%82%8B%E3%81%91%E3%81%A9\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eCountってのがあった気がするけど？\u003c/h3\u003e\n\n\u003cp\u003eListを使うときによく使うCount(プロパティ)ですが、\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003eCount\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eget\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003e_size\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eとなっているので、_sizeと同じです。\u003c/p\u003e\n\n\u003cp\u003eちなみにCountメソッドってのもありますが、\u003cstrong\u003eListクラスに定義は存在しません。\u003c/strong\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003e拡張メソッド\u003c/strong\u003eと呼ばれる機能を使って、\u003ccode\u003eEnumerable\u003c/code\u003eクラスに定義されてます。\u003c/p\u003e\n\n\u003cp\u003eこいつの話をしだすと、\u003ccode\u003eIEnumerable\u0026lt;T\u0026gt;\u003c/code\u003eとか、\u003ccode\u003eFunc\u003c/code\u003eデリゲートとか、ラムダ式とか、LINQとか、色々話が広がりすぎるので今回は割愛します。\u003c/p\u003e\n\n\u003cp\u003eソースコードは、System.Core.dll → System.Linq名前空間の下にいます。\u003c/p\u003e\n\n\u003cp\u003eこっちはGitHubにおいてあります。\u003c/p\u003e\n\n\u003cp\u003e\u003cqiita-embed-ogp src=\"https://github.com/dotnet/corefx/blob/master/src/System.Linq/src/System/Linq/Count.cs\"\u003e\u003c/qiita-embed-ogp\u003e\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"要素の取得ってどうなってるの\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%A6%81%E7%B4%A0%E3%81%AE%E5%8F%96%E5%BE%97%E3%81%A3%E3%81%A6%E3%81%A9%E3%81%86%E3%81%AA%E3%81%A3%E3%81%A6%E3%82%8B%E3%81%AE\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e要素の取得ってどうなってるの？\u003c/h2\u003e\n\n\u003cp\u003e[]で要素を取得・設定する処理のコードです。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eT\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003eindex\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eget\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e((\u003c/span\u003e\u003cspan class=\"kt\"\u003euint\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"n\"\u003eindex\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026gt;=\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003euint\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"n\"\u003e_size\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eThrowHelper\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eThrowArgumentOutOfRangeException\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003e_items\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eindex\u003c/span\u003e\u003cspan class=\"p\"\u003e];\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eset\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e((\u003c/span\u003e\u003cspan class=\"kt\"\u003euint\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"n\"\u003eindex\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026gt;=\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003euint\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"n\"\u003e_size\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eThrowHelper\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eThrowArgumentOutOfRangeException\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"n\"\u003e_items\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eindex\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003evalue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"n\"\u003e_version\u003c/span\u003e\u003cspan class=\"p\"\u003e++;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eこのメソッド自体は\u003cstrong\u003eインデクサー\u003c/strong\u003eと呼ばれるC#で用意されている機能です。\u003c/p\u003e\n\n\u003cp\u003eindexがsizeより大きい場合や0以下の場合、\u003ccode\u003eArgumentOutOfRangeException\u003c/code\u003eが発生します。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"要素の追加ってどうなってるの\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%A6%81%E7%B4%A0%E3%81%AE%E8%BF%BD%E5%8A%A0%E3%81%A3%E3%81%A6%E3%81%A9%E3%81%86%E3%81%AA%E3%81%A3%E3%81%A6%E3%82%8B%E3%81%AE\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e要素の追加ってどうなってるの？\u003c/h2\u003e\n\n\u003cp\u003e要素追加用メソッド\u003ccode\u003eAdd\u003c/code\u003eです。こいつは4段階の構成になっています。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eAdd\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eT\u003c/span\u003e \u003cspan class=\"n\"\u003eitem\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003e_size\u003c/span\u003e \u003cspan class=\"p\"\u003e==\u003c/span\u003e \u003cspan class=\"n\"\u003e_items\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eLength\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"nf\"\u003eEnsureCapacity\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003e_size\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"n\"\u003e_items\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003e_size\u003c/span\u003e\u003cspan class=\"p\"\u003e++]\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eitem\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"n\"\u003e_version\u003c/span\u003e\u003cspan class=\"p\"\u003e++;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eEnsureCapacity\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003emin\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003e_items\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eLength\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"n\"\u003emin\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003enum\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003e_items\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eLength\u003c/span\u003e \u003cspan class=\"p\"\u003e==\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e?\u003c/span\u003e \u003cspan class=\"m\"\u003e4\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003e_items\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eLength\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"m\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e((\u003c/span\u003e\u003cspan class=\"kt\"\u003euint\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"n\"\u003enum\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"m\"\u003e2146435071u\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"n\"\u003enum\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e2146435071\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003enum\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"n\"\u003emin\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"n\"\u003enum\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003emin\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eCapacity\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003enum\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003eCapacity\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003e__DynamicallyInvokable\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eget\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003e_items\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eLength\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003e__DynamicallyInvokable\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eset\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003evalue\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"n\"\u003e_size\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eThrowHelper\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eThrowArgumentOutOfRangeException\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eExceptionArgument\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"k\"\u003evalue\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eExceptionResource\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eArgumentOutOfRange_SmallCapacity\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003evalue\u003c/span\u003e \u003cspan class=\"p\"\u003e!=\u003c/span\u003e \u003cspan class=\"n\"\u003e_items\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eLength\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003evalue\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"n\"\u003eT\u003c/span\u003e\u003cspan class=\"p\"\u003e[]\u003c/span\u003e \u003cspan class=\"n\"\u003earray\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eT\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"k\"\u003evalue\u003c/span\u003e\u003cspan class=\"p\"\u003e];\u003c/span\u003e\n                \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003e_size\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                    \u003cspan class=\"n\"\u003eArray\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eCopy\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003e_items\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003earray\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003e_size\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n                \u003cspan class=\"n\"\u003e_items\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003earray\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eelse\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"n\"\u003e_items\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003e_emptyArray\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e4段階目の\u003ccode\u003eArray.Copy\u003c/code\u003eは、配列をコピーするメソッドです。\u003c/p\u003e\n\n\u003cp\u003e後で詳しく説明しますので、この段階ではそんなもんかと思っていてください。\u003c/p\u003e\n\n\u003col\u003e\n\u003cli\u003e\n\u003ccode\u003eAdd\u003c/code\u003e呼び出し時に\u003ccode\u003e_size\u003c/code\u003eと\u003ccode\u003e_items.Length\u003c/code\u003eが同じだった場合、\u003ccode\u003eEnsureCapacity\u003c/code\u003eを呼び出す。\u003c/li\u003e\n\u003cli\u003e\n\u003ccode\u003eEnsureCapacity\u003c/code\u003e呼び出し時に\u003ccode\u003e_items.Length\u003c/code\u003eの2倍と引数\u003ccode\u003emin\u003c/code\u003eを比較し、大きい方を\u003ccode\u003eCapacity\u003c/code\u003eに設定。\u003c/li\u003e\n\u003cli\u003e\n\u003ccode\u003eCapacity\u003c/code\u003eのSetterで\u003ccode\u003e_items.Length\u003c/code\u003eと設定値\u003ccode\u003evalue\u003c/code\u003eを比較し、配列の新規作成と既存部分のコピーを行う。\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003cp\u003eつまりListは\u003cstrong\u003e「サイズを無視して要素を追加できる配列」\u003c/strong\u003eではなく、\u003cstrong\u003e「サイズが足りなくなったら自動で作り直してくれる配列」\u003c/strong\u003eなんです。実に優秀なお方ですね。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"パフォーマンス測ってみた\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%91%E3%83%95%E3%82%A9%E3%83%BC%E3%83%9E%E3%83%B3%E3%82%B9%E6%B8%AC%E3%81%A3%E3%81%A6%E3%81%BF%E3%81%9F\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eパフォーマンス測ってみた\u003c/h3\u003e\n\n\u003cp\u003e上記の理由から、Addを大量に呼び出す場合は、あらかじめ\u003ccode\u003eCapacity\u003c/code\u003eを自分で設定しておいたほうがパフォーマンスに優れます。(配列の新規作成や要素のコピーには時間がかかる)\u003c/p\u003e\n\n\u003cp\u003eというわけで、早速測ってみました。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"ini\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"py\"\u003eBenchmarkDotNet\u003c/span\u003e\u003cspan class=\"p\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003ev0.11.3, OS=Windows 10.0.15063.1508 (1703/CreatorsUpdate/Redstone2)\u003c/span\u003e\n\u003cspan class=\"err\"\u003eIntel\u003c/span\u003e \u003cspan class=\"err\"\u003eCore\u003c/span\u003e \u003cspan class=\"err\"\u003ei7-4770\u003c/span\u003e \u003cspan class=\"err\"\u003eCPU\u003c/span\u003e \u003cspan class=\"err\"\u003e3.40GHz\u003c/span\u003e \u003cspan class=\"err\"\u003e(Haswell),\u003c/span\u003e \u003cspan class=\"err\"\u003e1\u003c/span\u003e \u003cspan class=\"err\"\u003eCPU,\u003c/span\u003e \u003cspan class=\"err\"\u003e8\u003c/span\u003e \u003cspan class=\"err\"\u003elogical\u003c/span\u003e \u003cspan class=\"err\"\u003eand\u003c/span\u003e \u003cspan class=\"err\"\u003e4\u003c/span\u003e \u003cspan class=\"err\"\u003ephysical\u003c/span\u003e \u003cspan class=\"err\"\u003ecores\u003c/span\u003e\n\u003cspan class=\"py\"\u003eFrequency\u003c/span\u003e\u003cspan class=\"p\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e3312643 Hz, Resolution=301.8738 ns, Timer=TSC\u003c/span\u003e\n  \u003cspan class=\"nn\"\u003e[Host]\u003c/span\u003e     \u003cspan class=\"err\"\u003e:\u003c/span\u003e \u003cspan class=\"err\"\u003e.NET\u003c/span\u003e \u003cspan class=\"err\"\u003eFramework\u003c/span\u003e \u003cspan class=\"err\"\u003e4.7.2\u003c/span\u003e \u003cspan class=\"err\"\u003e(CLR\u003c/span\u003e \u003cspan class=\"err\"\u003e4.0.30319.42000),\u003c/span\u003e \u003cspan class=\"err\"\u003e32bit\u003c/span\u003e \u003cspan class=\"err\"\u003eLegacyJIT-v4.7.3260.0\u003c/span\u003e\n  \u003cspan class=\"err\"\u003eDefaultJob\u003c/span\u003e \u003cspan class=\"err\"\u003e:\u003c/span\u003e \u003cspan class=\"err\"\u003e.NET\u003c/span\u003e \u003cspan class=\"err\"\u003eFramework\u003c/span\u003e \u003cspan class=\"err\"\u003e4.7.2\u003c/span\u003e \u003cspan class=\"err\"\u003e(CLR\u003c/span\u003e \u003cspan class=\"err\"\u003e4.0.30319.42000),\u003c/span\u003e \u003cspan class=\"err\"\u003e32bit\u003c/span\u003e \u003cspan class=\"err\"\u003eLegacyJIT-v4.7.3260.0\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eTests\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003enum\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e100\u003c/span\u003e\u003cspan class=\"n\"\u003e_000_000\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003eTests\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"nf\"\u003eListTest1\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n        \u003cspan class=\"nf\"\u003eListTest2\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eBenchmark\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eListTest1\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e//特に何もしない。\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003ea\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eList\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;();\u003c/span\u003e\n        \u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"n\"\u003enum\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e++)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"n\"\u003ea\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAdd\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eBenchmark\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eListTest2\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e// コンストラクタの引数であらかじめCapacityを設定できる。\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eb\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eList\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"n\"\u003enum\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"n\"\u003enum\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e++)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eb\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAdd\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003eMethod\u003c/th\u003e\n\u003cth style=\"text-align: right\"\u003eMean\u003c/th\u003e\n\u003cth style=\"text-align: right\"\u003eError\u003c/th\u003e\n\u003cth style=\"text-align: right\"\u003eStdDev\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003eListTest1\u003c/td\u003e\n\u003ctd style=\"text-align: right\"\u003e550.7 ms\u003c/td\u003e\n\u003ctd style=\"text-align: right\"\u003e4.740 ms\u003c/td\u003e\n\u003ctd style=\"text-align: right\"\u003e4.434 ms\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eListTest2\u003c/td\u003e\n\u003ctd style=\"text-align: right\"\u003e336.4 ms\u003c/td\u003e\n\u003ctd style=\"text-align: right\"\u003e1.259 ms\u003c/td\u003e\n\u003ctd style=\"text-align: right\"\u003e1.116 ms\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\n\u003cp\u003eリストに0から1億個数字を追加した時の差がこれくらいでした。\u003c/p\u003e\n\n\u003cp\u003eこれを大きいと見るか、小さいと見るかは人それぞれですが、個人的にはそんなに大きくないと思います。\u003c/p\u003e\n\n\u003cp\u003e1億もデータがあったらもっと遅い処理がどこかにあるはずなので、誤差レベルじゃないかと。\u003c/p\u003e\n\n\u003cp\u003eですが、シビアなパフォーマンスを求められる局面に出会ったら思い出してください。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"要素の削除ってどうなってるの\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%A6%81%E7%B4%A0%E3%81%AE%E5%89%8A%E9%99%A4%E3%81%A3%E3%81%A6%E3%81%A9%E3%81%86%E3%81%AA%E3%81%A3%E3%81%A6%E3%82%8B%E3%81%AE\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e要素の削除ってどうなってるの？\u003c/h2\u003e\n\n\u003cp\u003e要素削除用メソッド\u003ccode\u003eRemoveAt\u003c/code\u003eです。こいつの構成は2段階です。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eRemoveAt\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003eindex\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e// (1)\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e((\u003c/span\u003e\u003cspan class=\"kt\"\u003euint\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"n\"\u003eindex\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026gt;=\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003euint\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"n\"\u003e_size\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eThrowHelper\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eThrowArgumentOutOfRangeException\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e// (2)\u003c/span\u003e\n    \u003cspan class=\"n\"\u003e_size\u003c/span\u003e\u003cspan class=\"p\"\u003e--;\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eindex\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"n\"\u003e_size\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eArray\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eCopy\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003e_items\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eindex\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003e_items\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eindex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003e_size\u003c/span\u003e \u003cspan class=\"p\"\u003e-\u003c/span\u003e \u003cspan class=\"n\"\u003eindex\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e// (3)\u003c/span\u003e\n    \u003cspan class=\"n\"\u003e_items\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003e_size\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003edefault\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eT\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"n\"\u003e_version\u003c/span\u003e\u003cspan class=\"p\"\u003e++;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003estatic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eCopy\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eArray\u003c/span\u003e \u003cspan class=\"n\"\u003esourceArray\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003esourceIndex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eArray\u003c/span\u003e \u003cspan class=\"n\"\u003edestinationArray\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003edestinationIndex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003elength\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"nf\"\u003eCopy\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003esourceArray\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003esourceIndex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003edestinationArray\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003edestinationIndex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003elength\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003efalse\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003einternal\u003c/span\u003e \u003cspan class=\"k\"\u003estatic\u003c/span\u003e \u003cspan class=\"k\"\u003eextern\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eCopy\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eArray\u003c/span\u003e \u003cspan class=\"n\"\u003esourceArray\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003esourceIndex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eArray\u003c/span\u003e \u003cspan class=\"n\"\u003edestinationArray\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003edestinationIndex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003elength\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"n\"\u003ereliable\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eぱっと見て、分かりにくい処理です。\u003c/p\u003e\n\n\u003cp\u003e(1)から順に追っていきましょう。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"c1\"\u003e// (1)\u003c/span\u003e\n\u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e((\u003c/span\u003e\u003cspan class=\"kt\"\u003euint\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"n\"\u003eindex\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026gt;=\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003euint\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"n\"\u003e_size\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eThrowHelper\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eThrowArgumentOutOfRangeException\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eここは特に言うこともありません。\u003c/p\u003e\n\n\u003cp\u003eindexがsizeより大きい場合や0以下の場合、\u003ccode\u003eArgumentOutOfRangeException\u003c/code\u003eが発生します。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"c1\"\u003e// (2)\u003c/span\u003e\n\u003cspan class=\"n\"\u003e_size\u003c/span\u003e\u003cspan class=\"p\"\u003e--;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eindex\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"n\"\u003e_size\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eArray\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eCopy\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003e_items\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eindex\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003e_items\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eindex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003e_size\u003c/span\u003e \u003cspan class=\"p\"\u003e-\u003c/span\u003e \u003cspan class=\"n\"\u003eindex\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e\u003ccode\u003e_size--\u003c/code\u003eでListのサイズを1つ小さくします。\u003c/p\u003e\n\n\u003cp\u003e問題はその次です。\u003c/p\u003e\n\n\u003cp\u003eArray.Copyの中身はCopyですが、このCopyの中身は見ることができません。\u003c/p\u003e\n\n\u003cp\u003eこいつはC++で書かれてるDLLを参照しています。\u003c/p\u003e\n\n\u003cp\u003e仕方がないので、皆大好きMicrosoft公式リファレンスにて、Array.Copyの仕様を調べます。\u003c/p\u003e\n\n\u003cblockquote\u003e\n\u003cp\u003eCopy(Array, Int32, Array, Int32, Int32)\u003c/p\u003e\n\n\u003cp\u003eCopies a range of elements from an \u003ca href=\"https://docs.microsoft.com/en-us/dotnet/api/system.array?view=netframework-4.7.2\" rel=\"nofollow noopener\" target=\"_blank\"\u003eArray\u003c/a\u003e starting at the specified source index and pastes them to another \u003ca href=\"https://docs.microsoft.com/en-us/dotnet/api/system.array?view=netframework-4.7.2\" rel=\"nofollow noopener\" target=\"_blank\"\u003eArray\u003c/a\u003e starting at the specified destination index. The length and the indexes are specified as 32-bit integers.\u003c/p\u003e\n\n\u003cp\u003e指定されたコピー元インデックスから始まる配列から要素の範囲をコピーし、指定されたコピー先インデックスから始まる別の配列にそれらを貼り付けます。 長さとインデックスは32ビット整数として指定されます。\u003c/p\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"parameters\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#parameters\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eParameters\u003c/h4\u003e\n\n\u003cul\u003e\n\u003cli\u003esourceArray\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e\u003ca href=\"https://docs.microsoft.com/en-us/dotnet/api/system.array?view=netframework-4.7.2\" rel=\"nofollow noopener\" target=\"_blank\"\u003eArray\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eThe \u003ca href=\"https://docs.microsoft.com/en-us/dotnet/api/system.array?view=netframework-4.7.2\" rel=\"nofollow noopener\" target=\"_blank\"\u003eArray\u003c/a\u003e that contains the data to copy.\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003esourceIndex\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e\u003ca href=\"https://docs.microsoft.com/en-us/dotnet/api/system.int32?view=netframework-4.7.2\" rel=\"nofollow noopener\" target=\"_blank\"\u003eInt32\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eA 32-bit integer that represents the index in the \u003ccode\u003esourceArray\u003c/code\u003e at which copying begins.\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003edestinationArray\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e\u003ca href=\"https://docs.microsoft.com/en-us/dotnet/api/system.array?view=netframework-4.7.2\" rel=\"nofollow noopener\" target=\"_blank\"\u003eArray\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eThe \u003ca href=\"https://docs.microsoft.com/en-us/dotnet/api/system.array?view=netframework-4.7.2\" rel=\"nofollow noopener\" target=\"_blank\"\u003eArray\u003c/a\u003e that receives the data.\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003edestinationIndex\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e\u003ca href=\"https://docs.microsoft.com/en-us/dotnet/api/system.int32?view=netframework-4.7.2\" rel=\"nofollow noopener\" target=\"_blank\"\u003eInt32\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eA 32-bit integer that represents the index in the \u003ccode\u003edestinationArray\u003c/code\u003e at which storing begins.\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003elength\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e\u003ca href=\"https://docs.microsoft.com/en-us/dotnet/api/system.int32?view=netframework-4.7.2\" rel=\"nofollow noopener\" target=\"_blank\"\u003eInt32\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eA 32-bit integer that represents the number of elements to copy.\u003c/p\u003e\n\n\u003cp\u003eパラメーター\u003cbr\u003e\nsourceArray\u003cbr\u003e\nアレイ\u003cbr\u003e\nコピーするデータを含む配列。\u003c/p\u003e\n\n\u003cp\u003esourceIndex\u003cbr\u003e\nInt32\u003cbr\u003e\nコピーが開始されるsourceArray内のインデックスを表す32ビット整数。\u003c/p\u003e\n\n\u003cp\u003edestinationArray\u003cbr\u003e\nアレイ\u003cbr\u003e\nデータを受け取る配列。\u003c/p\u003e\n\n\u003cp\u003edestinationIndex\u003cbr\u003e\nInt32\u003cbr\u003e\n保存が始まるdestinationArray内のインデックスを表す32ビット整数。\u003c/p\u003e\n\n\u003cp\u003e長さ\u003cbr\u003e\nInt32\u003cbr\u003e\nコピーする要素の数を表す32ビット整数。\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003cp\u003e日本語部分がGoogle翻訳にぶん投げた結果です。\u003c/p\u003e\n\n\u003cp\u003eつまり\u003ccode\u003e_items\u003c/code\u003eの \u003ccode\u003eindex + 1\u003c/code\u003eインデックス目から\u003ccode\u003e_size - index\u003c/code\u003e個の要素を、\u003ccode\u003e_items\u003c/code\u003eの\u003ccode\u003eindex\u003c/code\u003eインデックス目を開始位置としてコピーする処理ってことですね。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"c1\"\u003e// (3)\u003c/span\u003e\n\u003cspan class=\"n\"\u003e_items\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003e_size\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003edefault\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eT\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"n\"\u003e_version\u003c/span\u003e\u003cspan class=\"p\"\u003e++;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eそして最後に、隙間をdefaultで埋めて終わりです。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"全く理解が追いつかないのだが\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%85%A8%E3%81%8F%E7%90%86%E8%A7%A3%E3%81%8C%E8%BF%BD%E3%81%84%E3%81%A4%E3%81%8B%E3%81%AA%E3%81%84%E3%81%AE%E3%81%A0%E3%81%8C\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e全く理解が追いつかないのだが？\u003c/h3\u003e\n\n\u003cp\u003e表を使って詳しく説明します。\u003c/p\u003e\n\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003e0\u003c/th\u003e\n\u003cth\u003e1\u003c/th\u003e\n\u003cth\u003e2\u003c/th\u003e\n\u003cth\u003e3\u003c/th\u003e\n\u003cth\u003e4\u003c/th\u003e\n\u003cth\u003e5\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003ea\u003c/td\u003e\n\u003ctd\u003eb\u003c/td\u003e\n\u003ctd\u003e\u003cstrong\u003ec\u003c/strong\u003e\u003c/td\u003e\n\u003ctd\u003ed\u003c/td\u003e\n\u003ctd\u003ee\u003c/td\u003e\n\u003ctd\u003ef\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\n\u003cp\u003eList＜string＞の中身だと思ってください。この時\u003ccode\u003e_size\u003c/code\u003eは6です。\u003c/p\u003e\n\n\u003cp\u003eこのListからcを消したいと思います。\u003c/p\u003e\n\n\u003cp\u003e\u003ccode\u003eRemoveAt(2)\u003c/code\u003eを実行します。\u003ccode\u003eindex\u003c/code\u003eは2です。\u003c/p\u003e\n\n\u003cp\u003e\u003ccode\u003eindex \u0026lt; _size\u003c/code\u003eなので(1)で例外は発生しません。\u003c/p\u003e\n\n\u003cp\u003e(2)の最初で\u003ccode\u003e_size\u003c/code\u003eが5になります。\u003c/p\u003e\n\n\u003cp\u003eよって、\u003c/p\u003e\n\n\u003cp\u003e\u003ccode\u003eindex+1\u003c/code\u003e =\u0026gt; 3\u003c/p\u003e\n\n\u003cp\u003e\u003ccode\u003e_size - index\u003c/code\u003e =\u0026gt; 3\u003c/p\u003e\n\n\u003cp\u003eとなるので、\u003ccode\u003e_items\u003c/code\u003eの3インデックス目から3個の要素を、\u003ccode\u003e_items\u003c/code\u003eの2インデックス目を開始位置としてコピーします。\u003c/p\u003e\n\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003e0\u003c/th\u003e\n\u003cth\u003e1\u003c/th\u003e\n\u003cth\u003e2\u003c/th\u003e\n\u003cth\u003e3\u003c/th\u003e\n\u003cth\u003e4\u003c/th\u003e\n\u003cth\u003e5\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003ea\u003c/td\u003e\n\u003ctd\u003eb\u003c/td\u003e\n\u003ctd\u003e\u003cstrong\u003e\u003cem\u003eｄ\u003c/em\u003e\u003c/strong\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cstrong\u003e\u003cem\u003ee\u003c/em\u003e\u003c/strong\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cstrong\u003e\u003cem\u003ef\u003c/em\u003e\u003c/strong\u003e\u003c/td\u003e\n\u003ctd\u003ef\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\n\u003cp\u003eこのままでは最後に不要なデータが残ってしまうので、一番最後をdefault(string)、空文字で埋めます。\u003c/p\u003e\n\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003e0\u003c/th\u003e\n\u003cth\u003e1\u003c/th\u003e\n\u003cth\u003e2\u003c/th\u003e\n\u003cth\u003e3\u003c/th\u003e\n\u003cth\u003e4\u003c/th\u003e\n\u003cth\u003e5\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003ea\u003c/td\u003e\n\u003ctd\u003eb\u003c/td\u003e\n\u003ctd\u003eｄ\u003c/td\u003e\n\u003ctd\u003ee\u003c/td\u003e\n\u003ctd\u003ef\u003c/td\u003e\n\u003ctd\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\n\u003cp\u003e無事に、cを消すことができました。\u003c/p\u003e\n\n\u003cp\u003eちなみに(2)で\u003ccode\u003eif (index \u0026lt; _size)\u003c/code\u003eと判定してます。\u003c/p\u003e\n\n\u003cp\u003eこれは\u003ccode\u003eindex\u003c/code\u003eと\u003ccode\u003e_size\u003c/code\u003eが同じ(=一番最後の要素を削除したい)場合、一番最後をdefault(T)で埋めるだけでいいからです。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"メモリ的な話\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%A1%E3%83%A2%E3%83%AA%E7%9A%84%E3%81%AA%E8%A9%B1\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eメモリ的な話\u003c/h3\u003e\n\n\u003cp\u003eここで1つ大事(かもしれない)事です。\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003e要素を削除した時、配列のサイズは変わらない\u003c/strong\u003eんです。\u003c/p\u003e\n\n\u003cp\u003eなので、大量の要素を削除した時、配列の後ろに\u003cstrong\u003e大量の空の部分\u003c/strong\u003eが出来上がります。\u003c/p\u003e\n\n\u003cp\u003e中身は空でもメモリは消費するので、気をつけてください。\u003c/p\u003e\n\n\u003cp\u003e今どきそれほどシビアなメモリ管理が必要なことはあまり無いとは思いますが。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"例外ってどうなってるの\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E4%BE%8B%E5%A4%96%E3%81%A3%E3%81%A6%E3%81%A9%E3%81%86%E3%81%AA%E3%81%A3%E3%81%A6%E3%82%8B%E3%81%AE\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e例外ってどうなってるの？\u003c/h2\u003e\n\n\u003col\u003e\n\u003cli\u003e\u003ccode\u003eSystem.ArgumentOutOfRangeException\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eSystem.ArgumentNullException\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eSystem.InvalidOperationException\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eSystem.ArgumentException\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eSystem.OutOfMemoryException\u003c/code\u003e\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003cp\u003eListクラス内で発生する可能性のある例外たちです。\u003c/p\u003e\n\n\u003cp\u003e出現頻度は、1 \u0026gt;= 2 \u0026gt; 3 \u0026gt;\u0026gt;\u0026gt;\u0026gt; 4 \u0026gt;\u0026gt;\u0026gt;\u0026gt; 5です。\u003cstrong\u003e(当社調べ)\u003c/strong\u003e\u003c/p\u003e\n\n\u003cp\u003eここでは出現頻度の低い4,5は割愛します。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"1argumentoutofrangeexception\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#1argumentoutofrangeexception\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e1.ArgumentOutOfRangeException\u003c/h3\u003e\n\n\u003cp\u003e要素の取得時や削除時に、\u003ccode\u003e_size\u003c/code\u003eより大きな値や0未満の値を設定すると発生します。\u003c/p\u003e\n\n\u003cp\u003eよく初心者が「要素が6なんだから最後は6番目やん、\u003ccode\u003elist[6]\u003c/code\u003eっと」と言って踏み抜くやつです。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"2argumentnullexception\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#2argumentnullexception\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e2.ArgumentNullException\u003c/h3\u003e\n\n\u003cp\u003e引数にnullを設定して一部のメソッドを呼び出すと、発生します。\u003c/p\u003e\n\n\u003cp\u003e「いちいち\u003ccode\u003eAdd\u003c/code\u003eなんてやってられんわ、\u003ccode\u003eAddRange\u003c/code\u003e使ったろ」と言ったときに、引数を初期化し忘れて踏むことがあります。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"3invalidoperationexception\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#3invalidoperationexception\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e3.InvalidOperationException\u003c/h3\u003e\n\n\u003cp\u003e上2つはそのままですが、こいつは少しややこしいです。\u003c/p\u003e\n\n\u003cp\u003e直訳すると「\u003cstrong\u003e無効な操作\u003c/strong\u003eによる例外」です。\u003cstrong\u003e無効な操作\u003c/strong\u003eってなんやねん。\u003c/p\u003e\n\n\u003cp\u003e良く見るパターンはこんな感じのやつです。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003elistStr\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eList\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;()\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"s\"\u003e\"aaa\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\"abc\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\"bbc\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\"aba\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\"cbc\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\"bcc\"\u003c/span\u003e \u003cspan class=\"p\"\u003e};\u003c/span\u003e\n\u003cspan class=\"k\"\u003eforeach\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eitem\u003c/span\u003e \u003cspan class=\"k\"\u003ein\u003c/span\u003e \u003cspan class=\"n\"\u003elistStr\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(!\u003c/span\u003e\u003cspan class=\"n\"\u003eitem\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eContains\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"a\"\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003elistStr\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eRemove\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eitem\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e\u003ccode\u003eforeach\u003c/code\u003eの中でListに手を加えてしまったパターンです。\u003c/p\u003e\n\n\u003cp\u003e”コレクションが変更されました。列挙操作は実行されない可能性があります。”と言われてしまいます。\u003c/p\u003e\n\n\u003cp\u003e列挙操作、つまり1つ1つ数え上げている途中で変えられてしまうと、どこまで処理を行ったか分からなくなってしまいます。\u003c/p\u003e\n\n\u003cp\u003eもしこれを許可してしまった場合、\u003c/p\u003e\n\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003e0\u003c/th\u003e\n\u003cth\u003e1\u003c/th\u003e\n\u003cth\u003e2\u003c/th\u003e\n\u003cth\u003e3\u003c/th\u003e\n\u003cth\u003e4\u003c/th\u003e\n\u003cth\u003e5\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003eaaa\u003c/td\u003e\n\u003ctd\u003eabc\u003c/td\u003e\n\u003ctd\u003ebbc\u003c/td\u003e\n\u003ctd\u003eaba\u003c/td\u003e\n\u003ctd\u003ecbc\u003c/td\u003e\n\u003ctd\u003ebcc\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e未\u003c/td\u003e\n\u003ctd\u003e未\u003c/td\u003e\n\u003ctd\u003e未\u003c/td\u003e\n\u003ctd\u003e未\u003c/td\u003e\n\u003ctd\u003e未\u003c/td\u003e\n\u003ctd\u003e未\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003e0\u003c/th\u003e\n\u003cth\u003e1\u003c/th\u003e\n\u003cth\u003e2\u003c/th\u003e\n\u003cth\u003e3\u003c/th\u003e\n\u003cth\u003e4\u003c/th\u003e\n\u003cth\u003e5\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003eaaa\u003c/td\u003e\n\u003ctd\u003eabc\u003c/td\u003e\n\u003ctd\u003ebbc\u003c/td\u003e\n\u003ctd\u003eaba\u003c/td\u003e\n\u003ctd\u003ecbc\u003c/td\u003e\n\u003ctd\u003ebcc\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e済→残\u003c/td\u003e\n\u003ctd\u003e未\u003c/td\u003e\n\u003ctd\u003e未\u003c/td\u003e\n\u003ctd\u003e未\u003c/td\u003e\n\u003ctd\u003e未\u003c/td\u003e\n\u003ctd\u003e未\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003e0\u003c/th\u003e\n\u003cth\u003e1\u003c/th\u003e\n\u003cth\u003e2\u003c/th\u003e\n\u003cth\u003e3\u003c/th\u003e\n\u003cth\u003e4\u003c/th\u003e\n\u003cth\u003e5\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003eaaa\u003c/td\u003e\n\u003ctd\u003eabc\u003c/td\u003e\n\u003ctd\u003ebbc\u003c/td\u003e\n\u003ctd\u003eaba\u003c/td\u003e\n\u003ctd\u003ecbc\u003c/td\u003e\n\u003ctd\u003ebcc\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e済\u003c/td\u003e\n\u003ctd\u003e済→残\u003c/td\u003e\n\u003ctd\u003e未\u003c/td\u003e\n\u003ctd\u003e未\u003c/td\u003e\n\u003ctd\u003e未\u003c/td\u003e\n\u003ctd\u003e未\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003e0\u003c/th\u003e\n\u003cth\u003e1\u003c/th\u003e\n\u003cth\u003e2\u003c/th\u003e\n\u003cth\u003e3\u003c/th\u003e\n\u003cth\u003e4\u003c/th\u003e\n\u003cth\u003e5\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003eaaa\u003c/td\u003e\n\u003ctd\u003ebbc\u003c/td\u003e\n\u003ctd\u003ebbc\u003c/td\u003e\n\u003ctd\u003eaba\u003c/td\u003e\n\u003ctd\u003ecbc\u003c/td\u003e\n\u003ctd\u003ebcc\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e済\u003c/td\u003e\n\u003ctd\u003e済\u003c/td\u003e\n\u003ctd\u003e済→削\u003c/td\u003e\n\u003ctd\u003e未\u003c/td\u003e\n\u003ctd\u003e未\u003c/td\u003e\n\u003ctd\u003e未\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003e0\u003c/th\u003e\n\u003cth\u003e1\u003c/th\u003e\n\u003cth\u003e2\u003c/th\u003e\n\u003cth\u003e3\u003c/th\u003e\n\u003cth\u003e4\u003c/th\u003e\n\u003cth\u003e5\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003eaaa\u003c/td\u003e\n\u003ctd\u003ebbc\u003c/td\u003e\n\u003ctd\u003eaba\u003c/td\u003e\n\u003ctd\u003ecbc\u003c/td\u003e\n\u003ctd\u003ebcc\u003c/td\u003e\n\u003ctd\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e済\u003c/td\u003e\n\u003ctd\u003e済\u003c/td\u003e\n\u003ctd\u003e未\u003c/td\u003e\n\u003ctd\u003e済→削\u003c/td\u003e\n\u003ctd\u003e未\u003c/td\u003e\n\u003ctd\u003e未\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003e0\u003c/th\u003e\n\u003cth\u003e1\u003c/th\u003e\n\u003cth\u003e2\u003c/th\u003e\n\u003cth\u003e3\u003c/th\u003e\n\u003cth\u003e4\u003c/th\u003e\n\u003cth\u003e5\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003eaaa\u003c/td\u003e\n\u003ctd\u003ebbc\u003c/td\u003e\n\u003ctd\u003eaba\u003c/td\u003e\n\u003ctd\u003ebcc\u003c/td\u003e\n\u003ctd\u003e\u003c/td\u003e\n\u003ctd\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e済\u003c/td\u003e\n\u003ctd\u003e済\u003c/td\u003e\n\u003ctd\u003e未\u003c/td\u003e\n\u003ctd\u003e未\u003c/td\u003e\n\u003ctd\u003e済→完\u003c/td\u003e\n\u003ctd\u003e未\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\n\u003cp\u003eこのように確認されない部分が出てしまいます。\u003c/p\u003e\n\n\u003cp\u003eこれでは困るので、\u003ccode\u003eforeach\u003c/code\u003eの中では要素の変更ができないようになっています。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"コレクションの変更ってどうなってるの\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%B3%E3%83%AC%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%AE%E5%A4%89%E6%9B%B4%E3%81%A3%E3%81%A6%E3%81%A9%E3%81%86%E3%81%AA%E3%81%A3%E3%81%A6%E3%82%8B%E3%81%AE\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eコレクションの変更ってどうなってるの？\u003c/h2\u003e\n\n\u003cp\u003eInvalidOperationExceptionの説明の中に、”コレクションが変更されました。列挙～”とありました。\u003c/p\u003e\n\n\u003cp\u003eコレクションの変更をどうやって管理してるのかもついでに解説します。\u003c/p\u003e\n\n\u003cp\u003eとはいえ、実は答えの半分は既に出ていたりします。\u003c/p\u003e\n\n\u003cp\u003e要素の取得・追加・削除の解説内に\u003ccode\u003e_version++\u003c/code\u003eという処理がありました。\u003c/p\u003e\n\n\u003cp\u003eこいつを使っています。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eForEach\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eAction\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eT\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eaction\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eaction\u003c/span\u003e \u003cspan class=\"p\"\u003e==\u003c/span\u003e \u003cspan class=\"k\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eThrowHelper\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eThrowArgumentNullException\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eExceptionArgument\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ematch\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e//ここと\u003c/span\u003e\n    \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003eversion\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003e_version\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"n\"\u003e_size\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e++)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e//ここと\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eversion\u003c/span\u003e \u003cspan class=\"p\"\u003e!=\u003c/span\u003e \u003cspan class=\"n\"\u003e_version\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e \u003cspan class=\"n\"\u003eBinaryCompatibility\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eTargetsAtLeast_Desktop_V4_5\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ebreak\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"nf\"\u003eaction\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003e_items\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e]);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e//ここ\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eversion\u003c/span\u003e \u003cspan class=\"p\"\u003e!=\u003c/span\u003e \u003cspan class=\"n\"\u003e_version\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e \u003cspan class=\"n\"\u003eBinaryCompatibility\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eTargetsAtLeast_Desktop_V4_5\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eThrowHelper\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eThrowInvalidOperationException\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eExceptionResource\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eInvalidOperation_EnumFailedVersion\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e\u003ccode\u003eForEach\u003c/code\u003eメソッドです。一般的に広く使われている\u003ccode\u003eforeach\u003c/code\u003eとは別物になります。\u003c/p\u003e\n\n\u003cp\u003e色々と分からない箇所があるとは思いますが、コメントのすぐ下の行だけ見てください。\u003c/p\u003e\n\n\u003col\u003e\n\u003cli\u003e最初に現在の\u003ccode\u003e_version\u003c/code\u003eを取得し、\u003ccode\u003eversion\u003c/code\u003eとしておく。\u003c/li\u003e\n\u003cli\u003e\n\u003ccode\u003e_item\u003c/code\u003eに対して反復処理をかける際に、都度\u003ccode\u003e_version\u003c/code\u003eと\u003ccode\u003eversion\u003c/code\u003eを比較。\u003c/li\u003e\n\u003cli\u003e不一致だったら\u003ccode\u003efor\u003c/code\u003eから抜けて、例外を出力。\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003cp\u003eこれにより\u003ccode\u003eAdd\u003c/code\u003eや\u003ccode\u003eRemoveAt\u003c/code\u003e等が実行されると\u003ccode\u003e_version\u003c/code\u003eと\u003ccode\u003eversion\u003c/code\u003eにズレが生じる仕組みになっております。\u003c/p\u003e\n\n\u003cp\u003e\u003ccode\u003eforeach\u003c/code\u003eも似たようなことをやっています。(詳細を解説しようとすると長くなるので割愛)\u003c/p\u003e\n\n\u003cp\u003e2019/01/15 \u003ca href=\"https://qiita.com/NCT48/items/d8394d587e9fee969ca9\" id=\"reference-f0c3336c696cc0ad987c\"\u003eこの辺について書いて見ました。\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e「Enumerator構造体ってなに？」の辺りで触れています。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"おわりに\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%8A%E3%82%8F%E3%82%8A%E3%81%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eおわりに\u003c/h1\u003e\n\n\u003cp\u003eここまで大量に書いておいてなんですが、C#でプログラミングする上で、ここに書いてあることの\u003cstrong\u003e9割は不要\u003c/strong\u003eです。\u003c/p\u003e\n\n\u003cp\u003eプログラミング言語ってのは、「何か」を作るための\u003cstrong\u003e道具の1つ\u003c/strong\u003eです。\u003c/p\u003e\n\n\u003cp\u003e道具の仕組みを知らなくても、使い方さえ知っていればその「何か」は作れるわけです。\u003c/p\u003e\n\n\u003cp\u003eボールペンからインクが出る原理がわからなくても字は書けるし、どうやって電話が音を伝えているか知らなくても遠くの誰かとお話できるわけです。\u003c/p\u003e\n\n\u003cp\u003eちなみにこの考え方はオブジェクト指向でよく出てくる\u003cstrong\u003eカプセル化\u003c/strong\u003eと呼ばれるものです。\u003c/p\u003e\n\n\u003cp\u003e複雑なもの(配列の長さの管理等)は中に隠し、外に見えるのは簡単な操作(取得・追加・削除等)のみにすることで誰でも利用可能になっています。\u003c/p\u003e\n\n\u003cp\u003eもちろん知っておいて損することはありません。\u003c/p\u003e\n\n\u003cp\u003eシビアなメモリ管理やパフォーマンスを求められた場合に役立つ可能性はありますし、こうやって長々と記事を書いて暇を潰すことも出来ます。\u003c/p\u003e\n\n\u003cp\u003eただ費用対効果に見合っているかと言われると......疑問ですね。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"なぜこんな物を書いたのか\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%AA%E3%81%9C%E3%81%93%E3%82%93%E3%81%AA%E7%89%A9%E3%82%92%E6%9B%B8%E3%81%84%E3%81%9F%E3%81%AE%E3%81%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eなぜこんな物を書いたのか\u003c/h2\u003e\n\n\u003cp\u003eよくプログラミングの世界では「おまじない」とか「動いてるからよし」とか「そういうものです」とか言われることがあります。\u003c/p\u003e\n\n\u003cp\u003e自作の機能だとマズいですが、C#にはじめから用意されている機能だったらそれでいいと思います。\u003c/p\u003e\n\n\u003cp\u003eでも中には「いや、そんな事言われても納得できんぞい。」と考える変わり者がいてもいいでしょう。\u003c/p\u003e\n\n\u003cp\u003eそんな変わり者が僕以外にいるかどうかはわかりませんが、「いたら嬉しいなぁ」というのが動機です。\u003c/p\u003e\n\n\u003cblockquote\u003e\n\u003cp\u003e人は生まれながらに、知ることを欲する。　アリストテレス(古代ギリシア)\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003cp\u003e\u003cdel\u003eかっこつけてアリストテレスとか言ってますが、元ネタはトリビアの泉です。\u003c/del\u003e\u003c/p\u003e\n\n\u003cp\u003eもし次回以降があれば、今回割愛した\u003ccode\u003eIEnumerable\u0026lt;T\u0026gt;\u003c/code\u003eとか、\u003ccode\u003eFunc\u003c/code\u003eデリゲートとか、ラムダ式とか、LINQとかその変の話もしたいと思ってます。\u003c/p\u003e\n","createdAt":"2019-01-10T06:19:40Z","elapsedYearsFromLastModifiedAt":2,"encryptedId":"CqrG5j1PvOhqw8ce+JZKx1SD1LRHitm6--1N/hK+1w2A+R/yS7--CzoUdr6lR9+/urvLu0Oq0A==","isBanned":false,"isDeprecated":true,"isDestroyableByViewer":false,"isEditRequestReadableByViewer":true,"isEditRequestSendableByViewer":true,"isLikableByViewer":true,"isLikedByViewer":false,"isPublic":true,"isSlide":false,"isStockableByViewer":true,"isStockedByViewer":false,"isSubscribableByViewer":false,"isSubscribedByViewer":false,"isUpdatableByViewer":false,"isUpdated":true,"lastModifiedAt":"2019-05-06T23:51:02Z","likesCount":98,"linkUrl":"https://qiita.com/NCT48/items/5ca2df4e3dbd053cd9f7","organization":null,"originalId":761988,"stockedCount":65,"title":"List\u003cT\u003eについて本気出して調べてみた","toc":"\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB\"\u003eはじめに\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#listt%E3%81%A8%E3%81%AF\"\u003eList＜T＞とは\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AE%9A%E7%BE%A9%E3%81%AF%E3%81%A9%E3%81%93%E3%81%AB%E3%81%82%E3%82%8B%E3%81%AE\"\u003e定義はどこにあるの？\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#listt%E3%81%AE%E3%81%82%E3%82%8C%E3%82%84%E3%81%93%E3%82%8C%E3%82%84\"\u003eList＜T＞のあれやこれや\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%81%9D%E3%81%AE%E5%89%8D%E3%81%ABt%E3%81%A3%E3%81%A6%E3%81%AA%E3%81%AB\"\u003eその前に＜T＞ってなに？\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#list%E3%81%AE%E4%B8%AD%E8%BA%AB%E3%81%A3%E3%81%A6%E3%81%A9%E3%81%86%E3%81%AA%E3%81%A3%E3%81%A6%E3%82%8B%E3%81%AE\"\u003eListの中身ってどうなってるの？\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E9%85%8D%E5%88%97%E3%81%AA%E3%81%AE%E3%81%AB%E3%82%B5%E3%82%A4%E3%82%BA%E3%81%AE%E7%AE%A1%E7%90%86%E3%82%92%E3%81%97%E3%81%AA%E3%81%8F%E3%81%A6%E3%82%82%E3%81%84%E3%81%84%E3%81%AE\"\u003e配列なのにサイズの管理をしなくてもいいの？\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#count%E3%81%A3%E3%81%A6%E3%81%AE%E3%81%8C%E3%81%82%E3%81%A3%E3%81%9F%E6%B0%97%E3%81%8C%E3%81%99%E3%82%8B%E3%81%91%E3%81%A9\"\u003eCountってのがあった気がするけど？\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E8%A6%81%E7%B4%A0%E3%81%AE%E5%8F%96%E5%BE%97%E3%81%A3%E3%81%A6%E3%81%A9%E3%81%86%E3%81%AA%E3%81%A3%E3%81%A6%E3%82%8B%E3%81%AE\"\u003e要素の取得ってどうなってるの？\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E8%A6%81%E7%B4%A0%E3%81%AE%E8%BF%BD%E5%8A%A0%E3%81%A3%E3%81%A6%E3%81%A9%E3%81%86%E3%81%AA%E3%81%A3%E3%81%A6%E3%82%8B%E3%81%AE\"\u003e要素の追加ってどうなってるの？\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%91%E3%83%95%E3%82%A9%E3%83%BC%E3%83%9E%E3%83%B3%E3%82%B9%E6%B8%AC%E3%81%A3%E3%81%A6%E3%81%BF%E3%81%9F\"\u003eパフォーマンス測ってみた\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E8%A6%81%E7%B4%A0%E3%81%AE%E5%89%8A%E9%99%A4%E3%81%A3%E3%81%A6%E3%81%A9%E3%81%86%E3%81%AA%E3%81%A3%E3%81%A6%E3%82%8B%E3%81%AE\"\u003e要素の削除ってどうなってるの？\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%85%A8%E3%81%8F%E7%90%86%E8%A7%A3%E3%81%8C%E8%BF%BD%E3%81%84%E3%81%A4%E3%81%8B%E3%81%AA%E3%81%84%E3%81%AE%E3%81%A0%E3%81%8C\"\u003e全く理解が追いつかないのだが？\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%A1%E3%83%A2%E3%83%AA%E7%9A%84%E3%81%AA%E8%A9%B1\"\u003eメモリ的な話\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cli\u003e\n\u003ca href=\"#%E4%BE%8B%E5%A4%96%E3%81%A3%E3%81%A6%E3%81%A9%E3%81%86%E3%81%AA%E3%81%A3%E3%81%A6%E3%82%8B%E3%81%AE\"\u003e例外ってどうなってるの？\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#1argumentoutofrangeexception\"\u003e1.ArgumentOutOfRangeException\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#2argumentnullexception\"\u003e2.ArgumentNullException\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#3invalidoperationexception\"\u003e3.InvalidOperationException\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%B3%E3%83%AC%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%AE%E5%A4%89%E6%9B%B4%E3%81%A3%E3%81%A6%E3%81%A9%E3%81%86%E3%81%AA%E3%81%A3%E3%81%A6%E3%82%8B%E3%81%AE\"\u003eコレクションの変更ってどうなってるの？\u003c/a\u003e\n\u003c/li\u003e\n\n\n\u003cli\u003e\n\u003ca href=\"#%E3%81%8A%E3%82%8F%E3%82%8A%E3%81%AB\"\u003eおわりに\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%81%AA%E3%81%9C%E3%81%93%E3%82%93%E3%81%AA%E7%89%A9%E3%82%92%E6%9B%B8%E3%81%84%E3%81%9F%E3%81%AE%E3%81%8B\"\u003eなぜこんな物を書いたのか\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\n","totalPv":12674,"uuid":"5ca2df4e3dbd053cd9f7","banReason":null,"adventCalendarItem":null,"author":{"encryptedId":"kGV+uMtuHjehd8Ra20YqwLCpoyoh--DgnqI0EQ07Xz2+jk--u4Bb7b/o8tHPok0kAzOnxA==","originalId":311955,"description":"モチベが上がらないだけで生きてますよ","facebookUrl":null,"githubUrl":"https://github.com/NCT48","isBlockingViewer":false,"isFollowableByViewer":true,"isFollowedByViewer":false,"isTweetWebNotificationReceivable":true,"linkedinUrl":null,"name":"","profileImageUrl":"https://avatars0.githubusercontent.com/u/44828045?v=4","profileImageUrlW48":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Favatars0.githubusercontent.com%2Fu%2F44828045%3Fv%3D4?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=48\u0026s=ef1c426038e06b9d80bebb1425dd61f2","profileImageUrlW75":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Favatars0.githubusercontent.com%2Fu%2F44828045%3Fv%3D4?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=43d79fdd304f677acc9fb57f5123633e","urlName":"NCT48","websiteUrl":"","twitterUrl":null,"twitterUrlName":null,"revealedOrganizations":{"edges":[]}},"tags":[{"name":"C#","urlName":"csharp"}],"followingLikers":{"edges":[]},"comments":{"totalCount":7}},"comments":[],"client":null,"ads_event_emitter":null}}</script>
