More than 1 year has passed since last update.ここではC#とVB.NETでランダムな数値を生成する方法を紹介します。
C#／VB.NETは簡単に乱数を生成できます！乱数はよく使うので、覚えておくと便利です。IDE: Visual Studio 2015
OS : Windows 10※自分の環境ですC#／VB.NETで乱数を生成するにはRandomクラスを使用します。
まずはnew演算子でRandomオブジェクトを作成します。
オブジェクトの作成は変数宣言とほぼ同じです。はい、これだけで乱数を生成する準備は完了です！ね、簡単でしょ？
ただし、C#では以下のようにSystemが明示的にインポートされていないと使えないので注意しましょう。ですが、ソースを新規作成した時に大体は自動的に付加されるのであまり気にしなくてもよいでしょう。先ほど作成したRandomオブジェクトのNextメソッドを使用することでランダムな数値を得ることが出来ます。
RandomオブジェクトにはNextメソッドが3つ定義されていますが、その中でも個人的によく使うものを紹介します。よく使うメソッドなので是非覚えましょう。
これを呼び出すとminValueからmaxValueまでの範囲でランダムな整数値を取得できます。
ただし、maxValueは含まれないので注意しましょう。
つまり、minValue以上、maxValue未満のint型の整数値が返ることになります。
呼び出し方法の例は以下のようになります。0から50までの整数値をランダムに取得し、取得した整数値を表示してそれが25以上なら"A"、そうでなければ"B"と表示するコードです。実行結果は、実行する毎に変化します。Randomクラスという存在を知っていれば乱数は超簡単に生成できます！！ちなみに、ランダムな0以上1.0未満の実数値を取得したい場合はNextDoubleメソッドで取得できます。コンストラクタはオブジェクトを作成する時に呼ばれます。詳しいことは別の記事で載せる予定です。
Randomクラスのコンストラクタには引数無しのタイプと整数値を引数として渡すタイプの2つがあります。・Random()
・Random(int seed)以下のソースは下側のコンストラクタでRandomオブジェクトを作成しています。
これを実行するとランダムな数値は得られていますが、実行結果は何回やっても同じになります。ゲームのリプレイ機能とかで使えそうですね。以前、私がゲームを作ってた時に引っ掛かったので一応書いておきます。
Randomオブジェクトを作成するとき、場所に注意が必要です。
例えば、以下のようなソースがあったとします。以上のソースを実行すると結果はどうなるでしょうか？0から10までのランダムな値が10個出てくるだろう…………と、思っていた自分がいました。実際はそうではなく、同じ数値が連続で出力される現象が起こります。
そのせいで昔、どこがおかしいのか分からなくてずっと悩んでいた時がありました。対策方法としては、宣言文をループの外に出すというのが良いでしょう。
以下は上記のソースを修正したソースになります。ゲームのリプレイ機能とかで使えそうですね。以前、私がゲームを作ってた時に引っ掛かったので一応書いておきます。
Randomオブジェクトを作成するとき、場所に注意が必要です。
例えば、以下のようなソースがあったとします。このようにすれば、同じ数値が連続して出てくることは無くなります。低確率で連続することはあります。・C#／VBで乱数を生成したいときはRandomオブジェクトを作成して準備する
・実際に生成する時は、RandomオブジェクトのNextメソッドを呼び出す。Random クラス(Microsoft Docs)


