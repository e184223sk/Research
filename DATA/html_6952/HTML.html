<!DOCTYPE html><html><head><meta charset="utf-8" /><title>自然言語入力処理のMicrosoft LUIS(日本語版)を使ってChatBotサンプルを作ってみる - Qiita</title><meta content="width=device-width,initial-scale=1,shrink-to-fit=no,viewport-fit=cover" name="viewport" /><meta content="#55c500" name="theme-color" /><meta content="XWpkTG32-_C4joZoJ_UsmDUi-zaH-hcrjF6ZC_FoFbk" name="google-site-verification" /><meta content="telephone=no" name="format-detection" /><link rel="canonical" href="https://qiita.com/tomohiku/items/86d85dcfbd34864e7b5d" /><link href="/manifest.json" rel="manifest" /><link href="/opensearch.xml" rel="search" title="Qiita" type="application/opensearchdescription+xml" /><link as="script" href="https://www.googletagservices.com/tag/js/gpt.js" rel="preload" /><link href="https://securepubads.g.doubleclick.net" rel="preconnect" /><script async="" src="https://www.googletagservices.com/tag/js/gpt.js"></script><meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="2+xDWjy3Kud1JuaaqjLM8rkALLxgd9j3VhhcVf00Wr+VG6IgW+PRrrfNHWmvQY+CKAs8zEM9bcQSveJ4zE1ksA==" /><link rel="shortcut icon" type="image/x-icon" href="https://cdn.qiita.com/assets/favicons/public/production-c620d3e403342b1022967ba5e3db1aaa.ico" /><link rel="apple-touch-icon" type="image/png" href="https://cdn.qiita.com/assets/favicons/public/apple-touch-icon-ec5ba42a24ae923f16825592efdc356f.png" /><link rel="stylesheet" media="all" href="https://cdn.qiita.com/assets/public/article-2eaa7dbedc42a8ea65c722cda46d0ebb.min.css" /><script src="https://cdn.qiita.com/assets/public/v3-article-bundle-63de2d91fef827269d3f6b958db2335b.min.js" defer="defer"></script><meta name="twitter:card" content="summary_large_image"><meta content="@Qiita" name="twitter:site" /><meta property="og:type" content="article"><meta property="og:title" content="自然言語入力処理のMicrosoft LUIS(日本語版)を使ってChatBotサンプルを作ってみる - Qiita"><meta property="og:image" content="https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0&amp;w=1200&amp;mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND02SWVxNTRTMjZLaUE2S3FlNVlXbDVZcWI1WWVtNTVDRzQ0R3VUV2xqY205emIyWjBJRXhWU1ZNbzVwZWw1cHlzNktxZTU0bUlLZU9Da3VTOXYtT0JvLU9CcGtOb1lYUkNiM1RqZ3JYamc3UGpnNWZqZzZ2amdwTGt2WnpqZ2FQamdhYmpnYl9qZ29zJnR4dC1jb2xvcj0lMjMzMzMmdHh0LWZvbnQ9SGlyYWdpbm8lMjBTYW5zJTIwVzYmdHh0LXNpemU9NTQmdHh0LWNsaXA9ZWxsaXBzaXMmdHh0LWFsaWduPWNlbnRlciUyQ21pZGRsZSZzPTEzZjdjMDg0NjY4MGY1MmJjMjcyOTA2MjcxZWQzNTRi&amp;mark-align=center%2Cmiddle&amp;blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RSFJ2Ylc5b2FXdDEmdHh0LWNvbG9yPSUyMzMzMyZ0eHQtZm9udD1IaXJhZ2lubyUyMFNhbnMlMjBXNiZ0eHQtc2l6ZT00NSZ0eHQtYWxpZ249cmlnaHQlMkNib3R0b20mcz1mMjRjNTY3ZTg2YWZjMTVmMTY1YWM4NDQ3NDFhZTRhMQ&amp;blend-align=center%2Cmiddle&amp;blend-mode=normal&amp;s=37a9a0c46a938ae591d6425d280486f3"><meta property="og:description" content="
※重要 2019/04/15 追記
時が過ぎて、QnA Makerが成熟した製品に成長したため、ヘルプデスクなどでよく利用される1問1答シナリオ(FAQシナリオ)ではQnA Makerが最適なソリューションであると考えています。その..."><meta content="https://qiita.com/tomohiku/items/86d85dcfbd34864e7b5d" property="og:url" /><meta content="Qiita" property="og:site_name" /><meta content="564524038" property="fb:admins" /><meta content="Microsoft,C#,自然言語処理,機械学習,bot" name="keywords" /><script>!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window, document,'script',
'https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '668972150489891');
fbq('track', 'PageView');</script><style data-emotion-css="17jxvjw 11t2ec1 1dvr2p8 18lkoru 1g4cku8 1iupg5d ijvq0v 15cocm3 12rp90f 115f4t 1b8uj5v 79elbk 16hhh7b fcbn8c 1gj7nt 154zy0m yikrym 1jqivyb 1ode1bp le4d8r 1hbd3g7 1nzh4zz 38fzdi helsa7 8qb8m4 2imjyh he5w1s 70qvj9 3ojehk 100alwu 1dtnjt5 10ougpm 1ay9vb9 m19uds cgzq40 1wa99t2 1l3zk9f 4czcte 1yzj1fm 1uv1qiv 109dbrr 5jpx49 mnxgyc 1vlpknv fsjkhv 1b17vb0 7i7f4d"}>.css-17jxvjw{display:grid;display:-ms-grid;grid-template-columns:80px minmax(0,1fr) 300px;-ms-grid-columns:80px minmax(0,1fr) 300px;grid-template-rows:minmax(270px,auto) 1fr;-ms-grid-rows:minmax(270px,auto) 1fr;max-width:1280px;margin-right:auto;margin-left:auto;padding-top:24px;padding-right:24px;padding-left:24px;}@media (max-width:1200px){.css-17jxvjw{padding-bottom:0;padding-left:0;padding-right:0;}}@media (max-width:992px){.css-17jxvjw{grid-template-columns:80px 452px 300px;-ms-grid-columns:80px 452px 300px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}}@media (max-width:770px){.css-17jxvjw{display:block;}}@media (max-width:480px){.css-17jxvjw{padding-top:0;}}.css-11t2ec1{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;z-index:5;position:-webkit-sticky;position:sticky;top:calc(56px + 24px + 16px + 32px - 16px);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:16px;width:80px;}.css-11t2ec1:after{content:'';display:table;}.css-11t2ec1:before{content:'';display:table;}@media (max-width:770px){.css-11t2ec1{display:none;}}.css-1dvr2p8{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-18lkoru{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;background-color:#FFFFFF;}.css-1g4cku8{display:inline-block;vertical-align:middle;height:20px;width:20px;fill:#55C500;}.css-1iupg5d{color:#55C500;cursor:pointer;font-size:14px;font-weight:bold;}.css-ijvq0v{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-15cocm3{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#FFFFFF;border:2px solid #6E6F70;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:2px 0px 0px;width:40px;}.css-12rp90f{display:inline-block;vertical-align:bottom;height:17.77777777777778px;width:16px;fill:#6E6F70;}.css-115f4t{color:#6E6F70;font-size:14px;font-weight:bold;}.css-1b8uj5v{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;margin-bottom:16px;padding:0;}.css-79elbk{position:relative;}.css-16hhh7b{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;padding:0;}.css-fcbn8c{display:none;bottom:initial;left:initial;right:initial;top:initial;left:100%;top:calc(-8px - (14px * 1.8) - 16px - 4px);}.css-1gj7nt{color:rgba(0,0,0,0.6);font-size:14px;font-weight:bold;line-height:1.8;padding:8px 16px;}.css-154zy0m{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.87);cursor:pointer;font-size:16px;font-weight:normal;line-height:1.8;padding:4px 16px;}.css-154zy0m:hover{-webkit-text-decoration:none;text-decoration:none;background-color:#F2F2F2;}.css-yikrym{width:20px;}.css-1jqivyb{color:rgba(0,0,0,0.6);font-size:13px;}.css-1ode1bp{background-color:rgba(0,0,0,0.12);height:1px;width:100%;margin:8px 0;}.css-le4d8r{display:inline-block;vertical-align:middle;height:13px;width:13px;fill:rgba(0,0,0,0.6);}.css-1hbd3g7{height:250px;}.css-1nzh4zz{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:16px 32px;background-color:#FBE69E;color:rgba(0,0,0,0.87);line-height:1.5;font-weight:600;}@media (max-width:770px){.css-1nzh4zz{padding:16px;}}.css-38fzdi{color:#CA832A;margin-right:4px;}.css-helsa7{background-color:#FFFFFF;padding:32px;margin-bottom:24px;}@media (max-width:992px){.css-helsa7{margin:0 auto 40px;}}@media (max-width:480px){.css-helsa7{margin:0 0 40px;padding:32px 16px;}}.css-8qb8m4{margin-bottom:48px;}.css-2imjyh{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-he5w1s{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;width:100%;}@media (max-width:770px){.css-he5w1s{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}}.css-70qvj9{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.css-3ojehk{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;margin-right:4px;}.css-100alwu{display:inline-block;border-radius:50%;line-height:1;overflow:hidden;vertical-align:middle;}.css-1dtnjt5{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-10ougpm{color:rgba(0,0,0,0.87);font-size:14px;font-weight:600;line-height:1.8;margin-right:4px;text-wrap:break-word;word-break:break-all;}.css-1ay9vb9{margin-right:16px;}.css-m19uds{color:rgba(0,0,0,0.6);font-size:14px;line-height:1.8;}.css-cgzq40{color:rgba(0,0,0,0.87);font-size:32px;font-weight:bold;line-height:1.4;margin-top:8px;text-wrap:break-word;word-break:break-all;}.css-1wa99t2{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.6);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:8px;}.css-1l3zk9f{color:rgba(0,0,0,0.6);font-size:20px;margin-right:8px;}.css-4czcte{margin-right:4px;color:inherit;font-size:14px;line-height:1.8;}.css-4czcte:not(:last-child)::after{content:',';margin-right:4px;}.css-1yzj1fm{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:32px;}.css-1uv1qiv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-size:20px;height:32px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin-right:16px;outline:none;padding:0;width:32px;}.css-109dbrr{background-color:#F9F9F9;border-top:1px solid rgba(0,0,0,0.12);bottom:0;box-shadow:0px 1px 4px rgba(0,0,0,0.14);display:none;height:calc(env(safe-area-inset-bottom,0px) + 56px);-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding-bottom:env(safe-area-inset-bottom);position:-webkit-sticky;position:sticky;width:100%;z-index:2000;}@media (max-width:770px){.css-109dbrr{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}.css-5jpx49{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:space-evenly;-webkit-justify-content:space-evenly;-ms-flex-pack:space-evenly;justify-content:space-evenly;width:100%;}.css-mnxgyc{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1vlpknv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;margin-right:4px;background-color:#FFFFFF;}.css-fsjkhv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1b17vb0{color:#6E6F70;font-size:14px;font-weight:bold;margin-left:4px;}.css-7i7f4d{display:none;bottom:initial;left:initial;right:initial;top:initial;bottom:32px;right:0;}</style></head><body><div class="allWrapper"><div><div id="GlobalHeader-react-component-c9246132-1431-4a9c-b83e-e3d7f336d60b"><div class="st-Header"><div class="st-Header_container"><div class="st-Header_start"><a href="/" class="st-Header_logo"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 426.57 130"><circle cx="167.08" cy="21.4" r="12.28"></circle><path d="M250.81 29.66h23.48v18.9h-23.48z"></path><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z"></path><circle cx="216.33" cy="21.4" r="12.28"></circle></svg></a><div class="st-Header_communitySelector" tabindex="0"><span class="fa fa-caret-down"></span></div><div class="st-Header_dropdown"><div class="st-Header_dropdownHeading">Qiita Teams that are logged in</div><div class="st-Header_dropdownItemNote">You are not logged in to any team</div><hr class="st-Header_dropdownDivider st-Header_dropdownDivider-shrink"/><a href="https://teams-center.qiita.com/find_team" class="st-Header_dropdownItem"><span class="fa fa-fw fa-sign-in st-Header_dropdownItemIcon"></span><div>Log in to Qiita Team</div></a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Community</div><a href="/organizations" class="st-Header_dropdownItem">Organization</a><a href="/official-events/open" class="st-Header_dropdownItem">Event</a><a href="/advent-calendar" class="st-Header_dropdownItem">Advent Calendar</a><a href="https://qiitadon.com/" class="st-Header_dropdownItem" target="_blank">Qiitadon (β)</a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Service</div><a href="https://jobs.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Jobs</a><a href="https://zine.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Zine</a><a href="https://blog.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Blog</a></div><form class="st-Header_search" action="/search" method="get"><span class="fa fa-search st-Header_searchIcon"></span><input type="search" class="st-Header_searchInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form><form class="st-Header_searchModal" action="/search" method="get"><input type="text" class="st-Header_searchModalInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form></div><div class="st-Header_end"><div class="st-Header_searchButton"><span class="fa fa-search"></span></div><a class="st-Header_signupButton" href="/signup?redirect_to=%2Ftomohiku%2Fitems%2F86d85dcfbd34864e7b5d">Signup</a><a class="st-Header_loginLink" href="/login?redirect_to=%2Ftomohiku%2Fitems%2F86d85dcfbd34864e7b5d">Login</a></div><div class="st-Header_overlay"></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="GlobalHeader" data-dom-id="GlobalHeader-react-component-c9246132-1431-4a9c-b83e-e3d7f336d60b">{"unreadNotificationsCount":null,"realms":[{"humanName":"Qiita","isCurrentRealm":true,"isQiita":true,"isQiitaTeam":false,"loggedInUser":null,"teamId":null,"url":"https://qiita.com/"}],"teamFindUrl":"https://teams-center.qiita.com/find_team","isTeamOnlyUser":null,"currentUser":null}</script>
      
</div><div class="st-HeaderAlert st-HeaderAlert-warning"><div class="st-HeaderAlert_body"></div></div><script type="application/ld+json">{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"/","name":"Qiita"}},{"@type":"ListItem","position":2,"item":{"@id":"/tags/microsoft","name":"Microsoft"}}]}</script><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","datePublished":"2016-10-09T00:47:02.000+09:00","dateModified":"2019-04-15T21:35:31.000+09:00","headline":"自然言語入力処理のMicrosoft LUIS(日本語版)を使ってChatBotサンプルを作ってみる","image":"https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0\u0026w=1200\u0026mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND02SWVxNTRTMjZLaUE2S3FlNVlXbDVZcWI1WWVtNTVDRzQ0R3VUV2xqY205emIyWjBJRXhWU1ZNbzVwZWw1cHlzNktxZTU0bUlLZU9Da3VTOXYtT0JvLU9CcGtOb1lYUkNiM1RqZ3JYamc3UGpnNWZqZzZ2amdwTGt2WnpqZ2FQamdhYmpnYl9qZ29zJnR4dC1jb2xvcj0lMjMzMzMmdHh0LWZvbnQ9SGlyYWdpbm8lMjBTYW5zJTIwVzYmdHh0LXNpemU9NTQmdHh0LWNsaXA9ZWxsaXBzaXMmdHh0LWFsaWduPWNlbnRlciUyQ21pZGRsZSZzPTEzZjdjMDg0NjY4MGY1MmJjMjcyOTA2MjcxZWQzNTRi\u0026mark-align=center%2Cmiddle\u0026blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RSFJ2Ylc5b2FXdDEmdHh0LWNvbG9yPSUyMzMzMyZ0eHQtZm9udD1IaXJhZ2lubyUyMFNhbnMlMjBXNiZ0eHQtc2l6ZT00NSZ0eHQtYWxpZ249cmlnaHQlMkNib3R0b20mcz1mMjRjNTY3ZTg2YWZjMTVmMTY1YWM4NDQ3NDFhZTRhMQ\u0026blend-align=center%2Cmiddle\u0026blend-mode=normal\u0026s=37a9a0c46a938ae591d6425d280486f3","mainEntityOfPage":"https://qiita.com/tomohiku/items/86d85dcfbd34864e7b5d","author":{"@type":"Person","address":"Tokyo","email":null,"identifier":"tomohiku","name":"tomohiku","image":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F74428%2Fprofile-images%2F1557151708?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=3ec80ddc1883d723b7b69b57ec2ba89f","url":"https://qiita.com/tomohiku","description":".NET プラットフォームでのプログラミング、データ分析（R、Python、Azure ML、PowerBI）、IoT系、AzureのData Insight系や開発系を中心として活動してます。\r\n役に立つのはもちろん、使ってて楽しくなってくるアプリを作るのが好きです。","memberOf":[]},"publisher":{"@type":"Organization","name":"Qiita","logo":{"@type":"ImageObject","url":"//cdn.qiita.com/assets/public/qiita-logo-c39ded593afa388e2e1ba435b110554e.png"}}}</script><style type="text/css">.wb-CampaignLink {
  background-color: #333333;
  width: 100%;
}

.wb-CampaignLink_container {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  max-width: 1100px;
  margin: 0 auto;
  font-size: 13px;
  padding: 0.8em;
}
.wb-CampaignLink_container > a {
  color: #fff;
}

.wb-CampaignLink_container > a:hover {
  text-decoration: underline;
}</style><div class="wb-CampaignLink"><div class="wb-CampaignLink_container"><a target="_blank" id="header_text_message_1" href="https://increments.connpass.com/event/211948/">【9/9(木)開催】Qiitaの過去と未来についてお話しします！Qiita エンジニアフェスタ 2021 Online Meetup</a><a target="_blank" id="header_text_message_2" href="https://increments.connpass.com/event/211948/">詳しくはこちら</a></div><script>td.trackEvent(
  'front_events',
  {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"tomohiku","type":"items","id":"86d85dcfbd34864e7b5d"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Show","data":{"message":"【9/9(木)開催】Qiitaの過去と未来についてお話しします！Qiita エンジニアフェスタ 2021 Online Meetup","url":"https://increments.connpass.com/event/211948/","sub_message":"詳しくはこちら"}}
)</script><script>document.getElementById('header_text_message_1').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"tomohiku","type":"items","id":"86d85dcfbd34864e7b5d"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":2,"pos_id":"header_text_message_1","message":"【9/9(木)開催】Qiitaの過去と未来についてお話しします！Qiita エンジニアフェスタ 2021 Online Meetup","url":"https://increments.connpass.com/event/211948/","sub_message":"詳しくはこちら"}}
  )
})</script><script>document.getElementById('header_text_message_2').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"tomohiku","type":"items","id":"86d85dcfbd34864e7b5d"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":2,"pos_id":"header_text_message_2","message":"【9/9(木)開催】Qiitaの過去と未来についてお話しします！Qiita エンジニアフェスタ 2021 Online Meetup","url":"https://increments.connpass.com/event/211948/","sub_message":"詳しくはこちら"}}
  )
})</script></div><script type="application/json" id="js-react-on-rails-context">{"railsEnv":"production","inMailer":false,"i18nLocale":"en","i18nDefaultLocale":"en","href":"https://qiita.com/tomohiku/items/86d85dcfbd34864e7b5d","location":"/tomohiku/items/86d85dcfbd34864e7b5d","scheme":"https","host":"qiita.com","port":null,"pathname":"/tomohiku/items/86d85dcfbd34864e7b5d","search":null,"httpAcceptLanguage":null,"actionPath":"public/items#show","settings":{"analyticsTrackingId":"UA-24675221-12","assetsMap":{},"csrfToken":"3pecBnpeMhGzgcKs8rjC5qBS23ROMwjb7rAoP6cdH0+QYH18HQrJWHFqOV/3y4GWMVnLBG15veiqFZYSlmQhQA==","locale":"en"},"currentUser":null,"isLoggedIn":false,"recaptchaSiteKey":"6LfNkiQTAAAAAM3UGnSquBy2akTITGNMO_QDxMw6","serverSide":false}</script>
<div id="PersonalArticlePage-react-component-647f2981-14ba-4154-aa90-117669945d5e"><div class="p-items_wrapper"><div class=" css-17jxvjw"><div class="css-11t2ec1"><div class="css-1dvr2p8"><button class=" css-18lkoru"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/tomohiku/items/86d85dcfbd34864e7b5d/likers" class="css-1iupg5d">91</a></div><div class="css-ijvq0v"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-115f4t">103</span></div><div class="css-1b8uj5v"><span class="fa fa-twitter"></span></div><div class="css-1b8uj5v"><span class="fa fa-facebook"></span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-fcbn8c"><div class="css-1gj7nt">Improve article</div><a href="/drafts/86d85dcfbd34864e7b5d/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/tomohiku/items/86d85dcfbd34864e7b5d/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/tomohiku/items/86d85dcfbd34864e7b5d/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/tomohiku/items/86d85dcfbd34864e7b5d/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/tomohiku/items/86d85dcfbd34864e7b5d.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div><div class="p-items_options"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_toc"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_main"><div class="css-1nzh4zz"><span class="fa fa-fw fa-warning css-38fzdi"></span><p>More than 1 year has passed since last update.</p></div><div class="css-helsa7"><div class="css-8qb8m4"><div class="css-2imjyh"><div class="css-he5w1s"><div class="css-70qvj9"><div class="css-3ojehk"><a href="/tomohiku"><img class="css-100alwu eyfquo10" src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/74428/profile-images/1557151708" width="24" height="24" loading="lazy"/></a></div><div class="css-1dtnjt5"><a href="/tomohiku" class="css-10ougpm">@<!-- -->tomohiku</a><div class="css-1ay9vb9"><span><meta content="2016-10-08T15:47:02Z"/><time dateTime="2019-04-15T12:35:31Z" class="css-m19uds">updated at 2019-04-15</time></span></div></div></div></div></div><h1 class="css-cgzq40">自然言語入力処理のMicrosoft LUIS(日本語版)を使ってChatBotサンプルを作ってみる</h1><div class="css-1wa99t2"><span class="fa fa-tags mr-1of2 css-1l3zk9f" aria-hidden="true"></span><a href="/tags/microsoft" class="css-4czcte">Microsoft</a><a href="/tags/csharp" class="css-4czcte">C#</a><a href="/tags/%e8%87%aa%e7%84%b6%e8%a8%80%e8%aa%9e%e5%87%a6%e7%90%86" class="css-4czcte">自然言語処理</a><a href="/tags/%e6%a9%9f%e6%a2%b0%e5%ad%a6%e7%bf%92" class="css-4czcte">機械学習</a><a href="/tags/bot" class="css-4czcte">bot</a></div></div><section class="it-MdContent"><div id="personal-public-article-body"><div><blockquote>
<p><strong>※重要</strong> 2019/04/15 追記<br>
時が過ぎて、<a href="https://qnamaker.ai/" rel="nofollow noopener" target="_blank">QnA Maker</a>が成熟した製品に成長したため、ヘルプデスクなどでよく利用される1問1答シナリオ(FAQシナリオ)ではQnA Makerが最適なソリューションであると考えています。そのQnA Makerについて説明する投稿を以下にしています。<br>
2018年12月の投稿・・・<a href="https://qiita.com/tomohiku/items/c0ced418227136535e17" id="reference-ca8e6e1609fd27e25881">MicrosoftのFAQチャットボット技術を検証してみた〈QnA Makerでの実装〉</a></p>

<p><strong>※重要</strong> 2018/04/14 追記<br>
1年半前にこの投稿を書いた時はLUISはリリースされて間もなく、その後ヘルプデスクの質問対応を代替するチャットボットにも最適化されていくと予測していました。そのため、この投稿で扱っている例ではヘルプデスクに質問するようなシナリオで紹介しました。しかし、2018/4時点ではこのシナリオにはLUISは最適化されておらず、かわりに同じMicrosoft Cognitive Serviceに<a href="https://qnamaker.ai/" rel="nofollow noopener" target="_blank">QnA Maker</a>という製品が登場しています。<br>
しかし、QnA Makerもまだまだ未成熟であり、現状でもっとも現実的な答えは以下で投稿している<a href="https://www.microsoft.com/en-us/cognitive-toolkit/" rel="nofollow noopener" target="_blank">Microsoft Cognitive Toolkit</a>を利用する方法です。この投稿を参考にしてくださった皆様、誤解を生む投稿をしてしまい申し訳ありませんでした。</p>

<p>2018年4月の投稿・・・<a href="https://qiita.com/tomohiku/items/63dff5751326a9f59dea" id="reference-55d653bca439b03eb6a1">Microsoftの自然言語分類技術を本気で検証してみた</a></p>

<p>この投稿では「ヘルプデスクの質問対応を代替するシナリオ」のチャットボットの現況と実装方法をガイドしています。また「LUISが適さない理由」や「QnA Makerが未熟な点」についても記載しています。</p>
</blockquote>

<h1>
<span id="はじめに" class="fragment"></span><a href="#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB"><i class="fa fa-link"></i></a>はじめに</h1>

<p>Enterprise界隈でChatBotが少しずつブームになりつつあるなと感じるこの頃。<br>
FacebookのザッカバーグやMicrosoftのサティアなどITプラットフォームの巨人が、<br>
かなりの熱量で「会話による対話」を推しまくるので、<br>
「どうも直観的にピンとこないけど、多くの人にとってはすごくイイのかも！」と思っている人が多いのではないかと感じます。</p>

<p>実は僕もこう思ってました<br>
<strong>ChatBotって、まったくといってピンとこない！</strong><br>
何がピンってこないかって、何が便利なのかわからない。<br>
専用アプリの方がいいんじゃないの？<br>
なんで会話にする必要があるの？<br>
「人が古来よりもっともナチュラルなコミュニケーション手段としてきたのは会話だ。だから会話はより人にとって便利なUIなんだ」<br>
みたいな論理で説明されてますが、<br>
目的を限定して特化させたアプリの方が便利だろ！<br>
ってのが、僕の初めの印象です。</p>

<p><strong>とはいえ、使ってないくせにその良さの何がわかるんだ</strong>ってやつです<br>
中身を見ないで批判するなんて、いまいちなエンジニアがいうことだと思ってるので、<br>
とりあえずBotを作って、考えて、中身を見てみようと思います。</p>

<h1>
<span id="この試行の目的" class="fragment"></span><a href="#%E3%81%93%E3%81%AE%E8%A9%A6%E8%A1%8C%E3%81%AE%E7%9B%AE%E7%9A%84"><i class="fa fa-link"></i></a>この試行の目的</h1>

<p>1．ChatBotの一般的な実装パターンを学び、作り、そのアーキテクチャをまとめ、理解する<br>
2．業務のユースケースを設定し、それに合わせた実装にすることでユーザの利用感により近づけ、より深い気づきを得る<br>
　　ユースケースは真っ先にBot化しやすそうな<strong>「社内ヘルプデスク業務」</strong>に設定<br>
3．ChatBotをデモできるくらいのサンプルアプリを作ってみることで、その特性やメリットデメリットを考える時間を自分に作り、より深い考察を得る<br>
<del>4．作ることを楽しむ←正直、これが一番大きいかも。。。</del></p>

<p>※作ったサンプルソースは公開できるようにして、GitHubに置いています。<br>
　リンクは、利用するまでの手順を添えて、最後の方にかいています。</p>

<h1>
<span id="作ってみたchatbotアプリのイメージ" class="fragment"></span><a href="#%E4%BD%9C%E3%81%A3%E3%81%A6%E3%81%BF%E3%81%9Fchatbot%E3%82%A2%E3%83%97%E3%83%AA%E3%81%AE%E3%82%A4%E3%83%A1%E3%83%BC%E3%82%B8"><i class="fa fa-link"></i></a>作ってみたChatBotアプリのイメージ</h1>

<p>会話は、自由な会話でやりとりするパターンと、選択肢を選んでやりとりするパターンの2パターンの合わせ技で作ってみました。</p>

<p>●自由な会話でやりとりするパターン<br>
①「こんにちは」と話しかける<br>
<a href="https://camo.qiitausercontent.com/0c96ecf6569b35d49cc1b8f7ee9424e14e95f10d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f37343432382f32353533633435302d643463382d393664662d366665392d3638346535363932313931392e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F74428%2F2553c450-d4c8-96df-6fe9-684e56921919.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=dc8525afb8afe1bf96a9c9e6e26949b5" alt="image" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/74428/2553c450-d4c8-96df-6fe9-684e56921919.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F74428%2F2553c450-d4c8-96df-6fe9-684e56921919.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=630fb0c44b9fd05d37dfcf9bcc512302 1x" loading="lazy"></a></p>

<p>②「VPNが繋がらない」と打ってみる<br>
詳細ページが案内される。<br>
<a href="https://camo.qiitausercontent.com/50f21cbf19a45eff4f03f4aef38df54b022fc691/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f37343432382f65346465393663362d316337382d363630382d653035662d3361306232396137393863362e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F74428%2Fe4de96c6-1c78-6608-e05f-3a0b29a798c6.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=6d3114153fe4c7ac90472230f157d166" alt="image" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/74428/e4de96c6-1c78-6608-e05f-3a0b29a798c6.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F74428%2Fe4de96c6-1c78-6608-e05f-3a0b29a798c6.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=973122a6b7021f5d5b9486c50da89948 1x" loading="lazy"></a></p>

<p>③「Wifiが壊れた」と打ってみる<br>
<a href="https://camo.qiitausercontent.com/246e6ec7233386127e263d036498358e6393e402/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f37343432382f38666663326435322d313339342d346432372d336638302d3064343634313361366665372e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F74428%2F8ffc2d52-1394-4d27-3f80-0d46413a6fe7.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=772dd826b01397eaa4414badf63eb79e" alt="image" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/74428/8ffc2d52-1394-4d27-3f80-0d46413a6fe7.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F74428%2F8ffc2d52-1394-4d27-3f80-0d46413a6fe7.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=e6515dbdec9378421d5fefdc220ccda3 1x" loading="lazy"></a></p>

<p>●選択肢を選んでやりとりするパターン<br>
①「こんにちは」と話しかける<br>
<a href="https://camo.qiitausercontent.com/0c96ecf6569b35d49cc1b8f7ee9424e14e95f10d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f37343432382f32353533633435302d643463382d393664662d366665392d3638346535363932313931392e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F74428%2F2553c450-d4c8-96df-6fe9-684e56921919.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=dc8525afb8afe1bf96a9c9e6e26949b5" alt="image" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/74428/2553c450-d4c8-96df-6fe9-684e56921919.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F74428%2F2553c450-d4c8-96df-6fe9-684e56921919.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=630fb0c44b9fd05d37dfcf9bcc512302 1x" loading="lazy"></a></p>

<p>②「【インフラ】PC・ネットワーク関連」を選ぶ<br>
<a href="https://camo.qiitausercontent.com/6b0f7a1e2a76999fc01fab02fb2520a27ef0ae24/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f37343432382f34373839626266362d356438392d653062382d316236322d3032383137636330303937352e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F74428%2F4789bbf6-5d89-e0b8-1b62-02817cc00975.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=f3a488dd96de624921b90ddafcf4b544" alt="image" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/74428/4789bbf6-5d89-e0b8-1b62-02817cc00975.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F74428%2F4789bbf6-5d89-e0b8-1b62-02817cc00975.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=60535d891099648c544e1eecbc010c4f 1x" loading="lazy"></a></p>

<p>③「無線LAN(Wifi)・有線LAN関連」を選ぶ<br>
<a href="https://camo.qiitausercontent.com/4e46753071860e01bc28fea98a785da88c04c200/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f37343432382f62333936353963392d636231632d386264322d366436392d3034636665656636333030382e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F74428%2Fb39659c9-cb1c-8bd2-6d69-04cfeef63008.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=da23ea2ee5f3b4e2113f1ebb1cc5f908" alt="image" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/74428/b39659c9-cb1c-8bd2-6d69-04cfeef63008.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F74428%2Fb39659c9-cb1c-8bd2-6d69-04cfeef63008.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=70e8be2cdc8367a8f2e1e7972755a583 1x" loading="lazy"></a></p>

<p>④「こんにちは」のあとに「その他」を選んだ場合<br>
<a href="https://camo.qiitausercontent.com/e7c0398efcffbec49c0c95ad092c131805dcfe10/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f37343432382f38386539633933612d643365312d336365382d613065642d3733616434323135383631392e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F74428%2F88e9c93a-d3e1-3ce8-a0ed-73ad42158619.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=0bbe1153e2a0ff7bf3444c3c3601d4b8" alt="image" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/74428/88e9c93a-d3e1-3ce8-a0ed-73ad42158619.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F74428%2F88e9c93a-d3e1-3ce8-a0ed-73ad42158619.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=ef670ca7e9a7d11975b3ca2de454018f 1x" loading="lazy"></a></p>

<h1>
<span id="使うテクノロジー" class="fragment"></span><a href="#%E4%BD%BF%E3%81%86%E3%83%86%E3%82%AF%E3%83%8E%E3%83%AD%E3%82%B8%E3%83%BC"><i class="fa fa-link"></i></a>使うテクノロジー</h1>

<p>・Microsoft Cognitive Services ,Language Understanding Intelligent Service (LUIS) 日本語版<br>
・Microsoft Bot Framework<br>
・Skype (コンシューマー向けのやつ。）<br>
・Azure App Services（Freeのプラン）<br>
・Visual Studio 2015<br>
  ・CodeはC#</p>

<p>LUISですが、先週見ると密かに日本語版が使えるようになっていました。<br>
<del>Blogとかに記載ないのですが・・・。（日本語に対応したくらいでGlovalのBlogには書かねぇぜってことでしょうか）</del>　← 使えるようになってから2週間遅れくらいで、Update通知メールで書いてました。日本語対応については小さい字で、中国語対応については大きな字で書いてありました。時代を感じますね。</p>

<h1>
<span id="botって何が新しいんだろう" class="fragment"></span><a href="#bot%E3%81%A3%E3%81%A6%E4%BD%95%E3%81%8C%E6%96%B0%E3%81%97%E3%81%84%E3%82%93%E3%81%A0%E3%82%8D%E3%81%86"><i class="fa fa-link"></i></a>Botって何が新しいんだろう？</h1>

<p><strong>①一気にプライベートゾーンに飛び込める</strong><br>
サイトやモバイルアプリでは、まだアプリとユーザの距離が遠い。<br>
LineやFacebookメッセ、What's Appのような普段使いしているアプリに入りこむことで、プライベートゾーンに飛び込む。<br>
保険の営業がいままではカフェで商談してたのが、客の家のリビングで商談するようになった感じですね。これはエンジニアには理解しにくい違いかもですが、営業やマーケティングの人にとってはかなり嬉しいことだと思います。</p>

<p><strong>②UIがより簡単になる</strong><br>
ちょっとした入力作業や編集作業を、手軽なUIで行える。</p>

<p><strong>③単純なやりとりと大量に処理できる</strong><br>
Microsoftのりんなは、シャープのツイッターにインターンをした時、11時から18時で32,882ツイート、1秒平均1.3ツイートしたとのこと。シャープに人がやっていたツイートの数年分らしいです。<br>
この速さは、もはや人と比べられる速度じゃないですね。もし、ChatBotが人と同じくらい賢い回答ができるようになったら、この速さで捌いてくれることは大きなメリットですね。<br>
<a href="https://twitter.com/SHARP_JP/status/718002563254095872/photo/1" rel="nofollow noopener" target="_blank">この件に関する参考ツイート</a></p>

<h1>
<span id="利用シーン" class="fragment"></span><a href="#%E5%88%A9%E7%94%A8%E3%82%B7%E3%83%BC%E3%83%B3"><i class="fa fa-link"></i></a>利用シーン</h1>

<p>まず検討されやすいと考えられる利用シーン。</p>

<p>①電話での自動応対機能の置換え<br>
②Help Desk機能の一部置換え<br>
 ヘルプデスクが電話対応している問合せの中でも「数が多く」「回答が簡単」な問合せをボットにさせる<br>
③パーソナライズされた頻度が低い通知<br>
　ヤマト運輸のお届け通知のイメージ。実は、僕はこのアプリが大好きだし、素晴らしすぎると思っている。Lineでお届け日時の確認の通知が届き、その場で<strong>簡単</strong>に配達日時を変更できる。再配達も<strong>簡単</strong>にできる。利用者にとっても助かるし、運輸会社にとってコスト増の元凶となる不在配達数を削減できる。あと付け加えると、Botがまだ世に少ないタイミングででてきたパイオニア的なアプリなのにも関わらずこの便利さは、素晴らしすぎると思う。<br>
④簡易的な入力＆編集<br>
宅配便の再配達依頼をLineの画面で数回のボタンでできたり、会社の勤務管理をLineで簡単に入力できるなど、繰り返しの多い定例作業で、かつ小さな入力や変更では、効率の向上が大きい。</p>

<h1>
<span id="botの実装アーキテクチャ" class="fragment"></span><a href="#bot%E3%81%AE%E5%AE%9F%E8%A3%85%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3"><i class="fa fa-link"></i></a>Botの実装アーキテクチャ</h1>

<h2>
<span id="--botの機能分解図" class="fragment"></span><a href="#--bot%E3%81%AE%E6%A9%9F%E8%83%BD%E5%88%86%E8%A7%A3%E5%9B%B3"><i class="fa fa-link"></i></a>- Botの機能分解図</h2>

<p><a href="https://camo.qiitausercontent.com/24c3166b5e296124e2fc1766e797303eeb2aaecd/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f37343432382f30336538373930312d376265652d653365642d393833392d6137643664646533376533382e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F74428%2F03e87901-7bee-e3ed-9839-a7d6dde37e38.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=20dd46f6dce44e7e8568154bbe80fe26" alt="image" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/74428/03e87901-7bee-e3ed-9839-a7d6dde37e38.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F74428%2F03e87901-7bee-e3ed-9839-a7d6dde37e38.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=8fd10b7b4c718e9d2cdae4bf0c2ffea1 1x" loading="lazy"></a></p>

<ul>
<li>Bot Frameworkの各機能の役割</li>
</ul>

<p>１. Bot Connector<br>
Chat Botのメイン処理をするWebAPIと、会話アプリ（SkypeやFacebookメッセ、Slack,What's APPなどを紐づけてくれる機能）。同じMicrosoft製品のSkypeは、非常に簡単に連携できる。それ以外は、手順書を整備してくれているので、それどおり進めると連携させることができる。<br>
欠点は、LINEにまだ対応していないこと。LINEは現状、Bot Connectorを使わずにLINEとWebAPIを紐づける必要がある。</p>

<p>BotConnectorは以下のページでMyBotを作成することで、使えるようになる<br>
<a href="https://dev.botframework.com/bots" rel="nofollow noopener" target="_blank">Microsoft Bot Frameworkのページ</a></p>

<p>２. Bot Framework の Visual Studio Template<br>
Bot Frameworkで開発するためのVisual StudioのTemplateを、追加して利用する。<br>
このTemplateは、中身はASP.NET WebAPI テンプレートの改造版のようなイメージ。<br>
Bot ConnectorやBot State、LUISなどが使い始めやすくしてある。</p>

<p>３. Bot State<br>
ASP.NET系のアプリで使うセッションのような機能。ユーザデータをWebサーバ側で保持する機能。<br>
普通のSessionとは別物のBot Stateという機能として提供されている。</p>

<div class="code-frame" data-lang="c#">
<div class="code-lang"><span class="bold">sample.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="c1">//Stateの初期化</span>
<span class="n">StateClient</span> <span class="n">stateClient</span> <span class="p">=</span> <span class="n">activity</span><span class="p">.</span><span class="nf">GetStateClient</span><span class="p">();</span>

<span class="c1">//UserDataの値取り出し</span>
<span class="n">BotData</span> <span class="n">userData</span> <span class="p">=</span> <span class="k">await</span> <span class="n">stateClient</span><span class="p">.</span><span class="n">BotState</span><span class="p">.</span><span class="nf">GetUserDataAsync</span><span class="p">(</span><span class="n">activity</span><span class="p">.</span><span class="n">ChannelId</span><span class="p">,</span> <span class="n">activity</span><span class="p">.</span><span class="n">From</span><span class="p">.</span><span class="n">Id</span><span class="p">);</span>
<span class="kt">bool</span> <span class="n">SentGreeting</span> <span class="p">=</span> <span class="n">userData</span><span class="p">.</span><span class="n">GetProperty</span><span class="p">&lt;</span><span class="kt">bool</span><span class="p">&gt;(</span><span class="s">"Greeting"</span><span class="p">);</span>

<span class="c1">//UserDataの値セット</span>
<span class="n">userData</span><span class="p">.</span><span class="n">SetProperty</span><span class="p">&lt;</span><span class="n">boot</span><span class="p">&gt;(</span><span class="s">"Greeting"</span><span class="p">,</span> <span class="k">true</span><span class="p">);</span>
<span class="k">await</span> <span class="n">stateClient</span><span class="p">.</span><span class="n">BotState</span><span class="p">.</span><span class="nf">SetUserDataAsync</span><span class="p">(</span><span class="n">activity</span><span class="p">.</span><span class="n">ChannelId</span><span class="p">,</span> <span class="n">activity</span><span class="p">.</span><span class="n">From</span><span class="p">.</span><span class="n">Id</span><span class="p">,</span> <span class="n">userData</span><span class="p">);</span>

</code></pre></div>
</div>

<p>４. LUIS（Language Understanding Intelligent Service)</p>

<p>この機能こそが、会話のプラットフォームの肝になるもので、機会学習の進歩によりできるようになった新技術。「自然言語を機械が理解する」というミラクルを実現する部分になります。<br>
この機能の役割をざっくりいうと、自由な文章を渡すと呼び出すべき関数名と引数を教えてくれる機能です。<br>
例えば、「今日の天気は何ですか？」という自由文を渡すと、「Weather」という関数と紐づく文言と「2016/10/08」(今日)という引数となる文言を返してくれます。<br>
これを受け取ると、Weatherの関数の中で、「2016/10/08」の天気を調べ、「今日の天気は晴れです。」という文章を作って、ユーザ側に返却すればよいということになります。<br>
関数と紐づく文言が「Intent（意図）」、引数になる部分が「Entity」と呼ばれます。なんでこんなわかりにくい言い方するんですかね？IntentとEntityってすごく理解しにくい名前な気がするのは僕だけでしょうか。最初見たとき、なかなか理解できませんでした。</p>

<p>LUISは、単純にIF文の集合体ではなく、機械学習で文章の近さを確率として考慮してくれます。<br>
例えば、「今日の天気は何ですか？」「今日の天気は何でしょう？」「今日の天気は何？」など、同じ意味なのに、違う文言いわゆる言葉のゆらぎを、「95％、天気の話だね」とか「80％、天気の話だね」とか率を添えて、いい感じに教えてくれます。なのでアプリ側としては、80％以上だったら合致していると決めて、処理していきます。<br>
つまり、ちょっとくらい言い回しが変わっても、ちゃんとWeatherというIntentを返してくれます。<br>
賢いですね～。人の脳では当たり前にできることだから、Non ITの人からしたら、その凄さはわかってくれないかもですが。。。。</p>

<p>ただ、人材と一緒で賢い人は簡単には用意できず、それなりの苦労が必要になります。<br>
最初は、LUISは赤ちゃんで何も知りません。なので、スパルタ教育でもなんでもいいのですが、育てあげる必要があります。<br>
具体的な学習させ方を下のLUIS設定画面で説明します。<br>
この画面は「VPNが繋がらない」と文言に、「NotConnect」というIntentが紐づけられており、「vpn」の文言に「デバイス」というEntityが紐づけられていることを示しています。</p>

<p><a href="https://camo.qiitausercontent.com/75c53cff942750edbb1e4580cedfa4519280c972/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f37343432382f61363866303762612d313933302d613066302d323335312d3865663239626263623831392e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F74428%2Fa68f07ba-1930-a0f0-2351-8ef29bbcb819.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=795d8213ff78eca0843140b6115a5224" alt="image" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/74428/a68f07ba-1930-a0f0-2351-8ef29bbcb819.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F74428%2Fa68f07ba-1930-a0f0-2351-8ef29bbcb819.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=f0681f8ad702cf79ead51b30bc5a26c8 1x" loading="lazy"></a></p>

<p>この検索ボックスっぽい入力フィールドにひたすら例文を打ち込み、IntentとEntityの設定をしていくというのが教育方法になります。<br>
※もちろんCSVのようなフォーマットで一括登録は可能です。<br>
つまり「例文」「それに対応するIntent」「Entityとするワード」「対応づけるEntity」を、登録しまくらないと精度が上がらないということです。<br>
めんどくさいですね～。</p>

<p>日本語は未対応ですが、英語ではコルタナやBingで培われたプリセットがたくさん提供されています。つまり他所で育ててくれたLUISを使えます。しかし、どこまでそれが有用かは微妙ですね、天気の話とか、アラームセットとか、あまり自分が作るChat Botに入れる必要ないように感じるので。<br>
各業界の業務に対応したプリセットができてくるようになるとすごく有難いのですが・・・。まだ少し先な気がします。</p>

<p>５．Bot Builder SDK<br>
１～４で述べた各個別機能をまとめたものの総称。</p>

<p>６．Bot Directory<br>
作ったボットを公開するストアみたいなもの。購入機能はないみたいですが。</p>

<p><strong>●自由文と既定文を分類しているところの処理</strong></p>

<p>図の②で分類を行っていますが、ここは非常にシンプルな方法で行います。<br>
ソースを見てみます。</p>

<div class="code-frame" data-lang="c#">
<div class="code-lang"><span class="bold">sample.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="c1">//activity.Textがユーザから送られてきた文章</span>
<span class="k">if</span> <span class="p">(</span><span class="n">activity</span><span class="p">.</span><span class="n">Text</span> <span class="p">==</span> <span class="s">"Hello"</span> <span class="p">||</span> <span class="n">activity</span><span class="p">.</span><span class="n">Text</span> <span class="p">==</span> <span class="s">"こんにちは"</span><span class="p">)</span>
<span class="p">{</span> 
<span class="c1">/////処理</span>
<span class="p">}</span>
  <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">activity</span><span class="p">.</span><span class="n">Text</span> <span class="p">==</span> <span class="s">"電話で対応してほしい"</span><span class="p">)</span>
<span class="p">{</span>
<span class="c1">/////処理</span>
<span class="p">}</span><span class="k">else</span><span class="p">{</span>
  <span class="c1">//既定文にヒットしなかったらLUISを呼ぶ</span>
  <span class="k">await</span> <span class="nf">LUIS</span><span class="p">(</span><span class="n">activity</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
</div>

<p><strong>●LUISから返ってきたIntent＆EntityとC#の関数との紐づけ</strong></p>

<p>以下のコードのようにIntentをごとに関数を呼び分けています。Entityはresultの中から取り出します。</p>

<div class="code-frame" data-lang="c#">
<div class="code-lang"><span class="bold">sample.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="p">[</span><span class="nf">LuisIntent</span><span class="p">(</span><span class="s">""</span><span class="p">)]</span>
<span class="k">public</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">None</span><span class="p">(</span><span class="n">IDialogContext</span> <span class="n">context</span><span class="p">,</span> <span class="n">LuisResult</span> <span class="n">result</span><span class="p">)</span>
<span class="p">{</span>
  <span class="kt">string</span> <span class="n">message</span> <span class="p">=</span> <span class="s">$"ごめんなさい。勉強不足でわかりませんでした。"</span><span class="p">);</span>
  <span class="k">await</span> <span class="n">context</span><span class="p">.</span><span class="nf">PostAsync</span><span class="p">(</span><span class="n">message</span><span class="p">);</span>
  <span class="n">context</span><span class="p">.</span><span class="nf">Wait</span><span class="p">(</span><span class="n">MessageReceived</span><span class="p">);</span>
<span class="p">}</span>

<span class="p">[</span><span class="nf">LuisIntent</span><span class="p">(</span><span class="s">"Broken"</span><span class="p">)]</span>
<span class="p">[</span><span class="nf">LuisIntent</span><span class="p">(</span><span class="s">"NotConnect"</span><span class="p">)]</span>
<span class="k">public</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">Broken</span><span class="p">(</span><span class="n">IDialogContext</span> <span class="n">context</span><span class="p">,</span> <span class="n">LuisResult</span> <span class="n">result</span><span class="p">)</span>
<span class="p">{</span>
  <span class="kt">string</span> <span class="n">message</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="n">Entities</span><span class="p">.</span><span class="n">Count</span> <span class="p">==</span> <span class="m">0</span><span class="p">)</span>
  <span class="p">{</span>
   <span class="n">message</span> <span class="p">=</span> <span class="p">(</span><span class="s">$"何のトラブルですか？もう一度、言い換えて教えてもらえませんか？"</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span> 
   <span class="n">message</span> <span class="p">=</span> <span class="p">(</span><span class="s">$""</span> <span class="p">+</span> <span class="n">result</span><span class="p">.</span><span class="n">Entities</span><span class="p">[</span><span class="m">0</span><span class="p">].</span><span class="n">Entity</span> <span class="p">+</span> <span class="s">"のトラブルですね。\n\n"</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="k">await</span> <span class="n">context</span><span class="p">.</span><span class="nf">PostAsync</span><span class="p">(</span><span class="n">message</span><span class="p">);</span>
  <span class="n">context</span><span class="p">.</span><span class="nf">Wait</span><span class="p">(</span><span class="n">MessageReceived</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
</div>

<h1>
<span id="chat-botの会話設計について" class="fragment"></span><a href="#chat-bot%E3%81%AE%E4%BC%9A%E8%A9%B1%E8%A8%AD%E8%A8%88%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>Chat Botの会話設計について</h1>

<p>今回、ユーザに自由文で発言させるパターンと、ボタンを選択してもらって発言するパターンを考えましたが、後者の方だけでも多くの利用用途があるように感じています。<br>
また自由文を使うにしても、ある程度ボタンの選択肢で内容を絞ってから自由文を使わせるようにナビゲートした方が発言を限定することができ、LUISで育てる手間が大きく減ります。</p>

<p>こういったことを考慮しながら会話を設計していくかと思いますが、この設計手法がインターネットをいろいろ探しても見つからず、仕方なく自作で考えました。<br>
たぶん、まだよい設計手法とか設計フレームワークとかが世の中に出てきてないんだろうなと思います。<br>
私が設計をするために使ったツールは、マインドマップです。<br>
以下はマインドマップで書いた絵になります</p>

<p><a href="https://camo.qiitausercontent.com/3f3910b2d3213d935b648e09890e2787e3b5bbf7/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f37343432382f39303634643431302d336363622d626234392d326338622d3364313564383166306637362e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F74428%2F9064d410-3ccb-bb49-2c8b-3d15d81f0f76.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=afbcd4af3807a1fde92a126fdf4ad6d5" alt="image" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/74428/9064d410-3ccb-bb49-2c8b-3d15d81f0f76.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F74428%2F9064d410-3ccb-bb49-2c8b-3d15d81f0f76.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=ed7f3b50483599b16131b7a453824d2e 1x" loading="lazy"></a></p>

<p>いろいろ試したのですが、マインドマップが一番しっくりきました。<br>
こういうツリー構造を書いて、会話を設計し、関係者と議論していくのが良いかと考えてます。<br>
そして、このツリーをXMLなどにエクスポートして、アプリで読み込ませてそのまま実装するとかは比較的簡単にできそうなので、近々そういう製品もでてくるだろうな予想されます。</p>

<h1>
<span id="サンプルソース" class="fragment"></span><a href="#%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB%E3%82%BD%E3%83%BC%E3%82%B9"><i class="fa fa-link"></i></a>サンプルソース</h1>

<p>作ったアプリはGitHubに置いています。</p>

<p><qiita-embed-ogp src="https://github.com/tomohiku/LUISApp"></qiita-embed-ogp></p>

<p>●動かすために必要な設定<br>
１．ASP.NETアプリを公開するためのAzure App Serviceを用意 <br>
　※インターネット公開されればどんなWebサーバでもOK<br>
　※Azureサブスクリプションがあれば、Visual Studioで自動作成できる<br>
２．LUISでApplicationを作成。IDとKeyを取得する。<br>
　※Azureサブスクリプションが必要。AzureポータルからLUISサービスを使えるようにする。<br>
３．Microsoft Bot FrameworkのサイトでMy Botを作成。AppIDとPasswordを取得する。 <br>
　※Skypeとの連携は勝手にやってくれる<br>
４．GitHubから落としたアプリに次の設定をする<br>
　①Web.configにMy BotのAppIDとPasswordを設定<br>
　②HelpBot.csにLUISのIDとKeyを設定<br>
５．Skypeの連絡先に作ったBotをAdd。Microsoft Bot FrameworkのMy Botのサイトで作ったBotをAddするためのリンクがでてくる。</p>

<h1>
<span id="さいごに" class="fragment"></span><a href="#%E3%81%95%E3%81%84%E3%81%94%E3%81%AB"><i class="fa fa-link"></i></a>さいごに</h1>

<p>10月6日に行われたGoogleの新製品発表で、Google Homeが発表されました。<br>
それは、音声で話しかけるとAIが音声で回答してくれる画面のないデバイスです。例えば電気を消してとかも頼めるし、天気を教えてとも聞ける。<br>
これは精度が高まっていくと、いわゆるお手伝いさんや秘書のような人と同じような仕事を機械やってくれるということであると思います。</p>

<p>これを見ていて、Chat Botって音声会話に向かうための中間的な技術なんだなーって感じました。音声でなんでもできるようになったら、みんなスマフォから電話をするかのように、AIにいろいろ指示を出すようになるのかな。</p>

<p>「もしもし、あのさ、今日の19時からの8チャンネルの世にも奇妙な物語を録画しておいてくれる？」</p>

<p>とか家族に頼むように、AIに頼むような時代がもう近くにあるんだなーと。<br>
そんな時代が来るのはすごく楽しみだし、きっと今勉強しているChatBotの知識はその時に、もっと役に立つんだろうなーと、そのGoogleの発表会を見ながら思いました。</p>
</div></div></section><div class="css-1yzj1fm"><div class="css-1uv1qiv"><span class="fa fa-twitter"></span></div><div class="css-1uv1qiv"><span class="fa fa-facebook"></span></div></div><div class="apm-Content"><div class="apm-Content_title">Why not register and get more from Qiita?</div><ol class="apm-Content_list"><li>We will deliver articles that match you<div class="description">By following users and tags, you can catch up information on technical fields that you are interested in as a whole</div></li><li>you can read useful information later efficiently<div class="description">By &quot;stocking&quot; the articles you like, you can search right away</div></li><div><a class="apm-Content_help" href="https://help.qiita.com/ja/articles/qiita-login-user" target="_blank"><i class="fa fa-fw fa-arrow-circle-right"></i>What you can do with signing up</a></div></ol><a href="/signup?callback_action=login_or_signup&amp;redirect_to=%2Ftomohiku%2Fitems%2F86d85dcfbd34864e7b5d&amp;realm=qiita" class="apm-Content_button apm-Content_button-signup">Sign up</a><a href="/login?callback_action=login_or_signup&amp;redirect_to=%2Ftomohiku%2Fitems%2F86d85dcfbd34864e7b5d&amp;realm=qiita" class="apm-Content_button apm-Content_button-signin">Login</a></div></div><div class="css-helsa7"></div></div></div></div><div class="css-109dbrr"><div class="css-5jpx49"><div class="css-mnxgyc"><button class=" css-1vlpknv"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/tomohiku/items/86d85dcfbd34864e7b5d/likers" class="css-1iupg5d">91</a></div><div class="css-fsjkhv"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-1b17vb0">103</span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-7i7f4d"><div class="css-1gj7nt">Improve article</div><a href="/drafts/86d85dcfbd34864e7b5d/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/tomohiku/items/86d85dcfbd34864e7b5d/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/tomohiku/items/86d85dcfbd34864e7b5d/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/tomohiku/items/86d85dcfbd34864e7b5d/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/tomohiku/items/86d85dcfbd34864e7b5d.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="PersonalArticlePage" data-dom-id="PersonalArticlePage-react-component-647f2981-14ba-4154-aa90-117669945d5e">{"authorAnalyticsTrackingId":"UA-99975867-1","organizationAnalyticsTrackingId":null}</script>
      
<footer id="globalFooter" class="st-Footer"><div class="st-Footer_container"><div class="st-Footer_start"><div class="st-Footer_logo"><svg viewbox="0 0 426.57 130" xmlns="http://www.w3.org/2000/svg"><circle cx="167.08" cy="21.4" r="12.28" /><path d="M250.81 29.66h23.48v18.9h-23.48z" /><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z" /><circle cx="216.33" cy="21.4" r="12.28" /></svg></div><div class="st-Footer_catchcopy">How developers code is here.</div><div class="st-Footer_socials"><a class="fa fa-twitter" href="https://twitter.com/qiita"></a><a class="fa fa-facebook-square" href="https://www.facebook.com/qiita/"></a></div></div><div class="st-Footer_end"><div class="st-Footer_qiita"><div class="st-Footer_label">Qiita</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="/about">About</a><a href="/terms">Terms</a><a href="/privacy">Privacy</a><a target="_blank" href="http://help.qiita.com/ja/articles/qiita-community-guideline">Guideline</a><a target="_blank" href="https://help.qiita.com/ja/articles/others-brand-guideline">Design Guideline</a></div><div class="st-Footer_column"><a href="/release-notes">Release</a><a href="/api/v2/docs">API</a><a href="/feedback/new">ご意見</a><a href="https://help.qiita.com">Help</a><a target="_blank" href="https://qiita.com/ads?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Advertisement</a></div></div></div><div class="st-Footer_increments"><div class="st-Footer_label">Increments</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="https://increments.co.jp/company/">About</a><a href="https://increments.co.jp/jobs/">採用情報</a><a href="https://blog.qiita.com">Blog</a></div><div class="st-Footer_column"><a href="https://teams.qiita.com/">Qiita Team</a><a href="https://jobs.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Jobs</a><a href="https://zine.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Zine</a></div></div></div></div></div><div class="st-Footer_copyright">© 2011-2021 Increments Inc.</div></footer><div id="Snackbar-react-component-af9ee235-c3a1-42fa-a54c-b24ff2fb7762"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="Snackbar" data-dom-id="Snackbar-react-component-af9ee235-c3a1-42fa-a54c-b24ff2fb7762">{}</script>
      
<div id="LoginModal-react-component-75eceab1-cb50-43f1-b65e-2478a330939a"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="LoginModal" data-dom-id="LoginModal-react-component-75eceab1-cb50-43f1-b65e-2478a330939a">{}</script>
      
<div id="StockModal-react-component-f5e78089-1f4b-4687-aa86-9d282565a96d"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="StockModal" data-dom-id="StockModal-react-component-f5e78089-1f4b-4687-aa86-9d282565a96d">{}</script>
      
</div><div id="dataContainer" style="display: none;" data-config="{&quot;actionPath&quot;:&quot;public/items#show&quot;,&quot;settings&quot;:{&quot;analyticsTrackingId&quot;:&quot;UA-24675221-12&quot;,&quot;assetsMap&quot;:{},&quot;csrfToken&quot;:&quot;S+vp2I15FPiJXKP97mNrnU3kJGufLugjtTRg+rt/7qcFHAii6i3vsUu3WA7rECjt3O80G7xkXRDxkd7XigbQqA==&quot;,&quot;locale&quot;:&quot;en&quot;},&quot;currentUser&quot;:null}" /></body></html><script type="application/json" data-js-react-on-rails-store="AppStoreWithReactOnRails">{"snackbar":{"type":"","body":"","isActive":false},"article":{"article":{"body":"\u003cblockquote\u003e\n\u003cp\u003e\u003cstrong\u003e※重要\u003c/strong\u003e 2019/04/15 追記\u003cbr\u003e\n時が過ぎて、\u003ca href=\"https://qnamaker.ai/\" rel=\"nofollow noopener\" target=\"_blank\"\u003eQnA Maker\u003c/a\u003eが成熟した製品に成長したため、ヘルプデスクなどでよく利用される1問1答シナリオ(FAQシナリオ)ではQnA Makerが最適なソリューションであると考えています。そのQnA Makerについて説明する投稿を以下にしています。\u003cbr\u003e\n2018年12月の投稿・・・\u003ca href=\"https://qiita.com/tomohiku/items/c0ced418227136535e17\" id=\"reference-ca8e6e1609fd27e25881\"\u003eMicrosoftのFAQチャットボット技術を検証してみた〈QnA Makerでの実装〉\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003e※重要\u003c/strong\u003e 2018/04/14 追記\u003cbr\u003e\n1年半前にこの投稿を書いた時はLUISはリリースされて間もなく、その後ヘルプデスクの質問対応を代替するチャットボットにも最適化されていくと予測していました。そのため、この投稿で扱っている例ではヘルプデスクに質問するようなシナリオで紹介しました。しかし、2018/4時点ではこのシナリオにはLUISは最適化されておらず、かわりに同じMicrosoft Cognitive Serviceに\u003ca href=\"https://qnamaker.ai/\" rel=\"nofollow noopener\" target=\"_blank\"\u003eQnA Maker\u003c/a\u003eという製品が登場しています。\u003cbr\u003e\nしかし、QnA Makerもまだまだ未成熟であり、現状でもっとも現実的な答えは以下で投稿している\u003ca href=\"https://www.microsoft.com/en-us/cognitive-toolkit/\" rel=\"nofollow noopener\" target=\"_blank\"\u003eMicrosoft Cognitive Toolkit\u003c/a\u003eを利用する方法です。この投稿を参考にしてくださった皆様、誤解を生む投稿をしてしまい申し訳ありませんでした。\u003c/p\u003e\n\n\u003cp\u003e2018年4月の投稿・・・\u003ca href=\"https://qiita.com/tomohiku/items/63dff5751326a9f59dea\" id=\"reference-55d653bca439b03eb6a1\"\u003eMicrosoftの自然言語分類技術を本気で検証してみた\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eこの投稿では「ヘルプデスクの質問対応を代替するシナリオ」のチャットボットの現況と実装方法をガイドしています。また「LUISが適さない理由」や「QnA Makerが未熟な点」についても記載しています。\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"はじめに\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eはじめに\u003c/h1\u003e\n\n\u003cp\u003eEnterprise界隈でChatBotが少しずつブームになりつつあるなと感じるこの頃。\u003cbr\u003e\nFacebookのザッカバーグやMicrosoftのサティアなどITプラットフォームの巨人が、\u003cbr\u003e\nかなりの熱量で「会話による対話」を推しまくるので、\u003cbr\u003e\n「どうも直観的にピンとこないけど、多くの人にとってはすごくイイのかも！」と思っている人が多いのではないかと感じます。\u003c/p\u003e\n\n\u003cp\u003e実は僕もこう思ってました\u003cbr\u003e\n\u003cstrong\u003eChatBotって、まったくといってピンとこない！\u003c/strong\u003e\u003cbr\u003e\n何がピンってこないかって、何が便利なのかわからない。\u003cbr\u003e\n専用アプリの方がいいんじゃないの？\u003cbr\u003e\nなんで会話にする必要があるの？\u003cbr\u003e\n「人が古来よりもっともナチュラルなコミュニケーション手段としてきたのは会話だ。だから会話はより人にとって便利なUIなんだ」\u003cbr\u003e\nみたいな論理で説明されてますが、\u003cbr\u003e\n目的を限定して特化させたアプリの方が便利だろ！\u003cbr\u003e\nってのが、僕の初めの印象です。\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003eとはいえ、使ってないくせにその良さの何がわかるんだ\u003c/strong\u003eってやつです\u003cbr\u003e\n中身を見ないで批判するなんて、いまいちなエンジニアがいうことだと思ってるので、\u003cbr\u003e\nとりあえずBotを作って、考えて、中身を見てみようと思います。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"この試行の目的\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%93%E3%81%AE%E8%A9%A6%E8%A1%8C%E3%81%AE%E7%9B%AE%E7%9A%84\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eこの試行の目的\u003c/h1\u003e\n\n\u003cp\u003e1．ChatBotの一般的な実装パターンを学び、作り、そのアーキテクチャをまとめ、理解する\u003cbr\u003e\n2．業務のユースケースを設定し、それに合わせた実装にすることでユーザの利用感により近づけ、より深い気づきを得る\u003cbr\u003e\n　　ユースケースは真っ先にBot化しやすそうな\u003cstrong\u003e「社内ヘルプデスク業務」\u003c/strong\u003eに設定\u003cbr\u003e\n3．ChatBotをデモできるくらいのサンプルアプリを作ってみることで、その特性やメリットデメリットを考える時間を自分に作り、より深い考察を得る\u003cbr\u003e\n\u003cdel\u003e4．作ることを楽しむ←正直、これが一番大きいかも。。。\u003c/del\u003e\u003c/p\u003e\n\n\u003cp\u003e※作ったサンプルソースは公開できるようにして、GitHubに置いています。\u003cbr\u003e\n　リンクは、利用するまでの手順を添えて、最後の方にかいています。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"作ってみたchatbotアプリのイメージ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E4%BD%9C%E3%81%A3%E3%81%A6%E3%81%BF%E3%81%9Fchatbot%E3%82%A2%E3%83%97%E3%83%AA%E3%81%AE%E3%82%A4%E3%83%A1%E3%83%BC%E3%82%B8\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e作ってみたChatBotアプリのイメージ\u003c/h1\u003e\n\n\u003cp\u003e会話は、自由な会話でやりとりするパターンと、選択肢を選んでやりとりするパターンの2パターンの合わせ技で作ってみました。\u003c/p\u003e\n\n\u003cp\u003e●自由な会話でやりとりするパターン\u003cbr\u003e\n①「こんにちは」と話しかける\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/0c96ecf6569b35d49cc1b8f7ee9424e14e95f10d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f37343432382f32353533633435302d643463382d393664662d366665392d3638346535363932313931392e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F74428%2F2553c450-d4c8-96df-6fe9-684e56921919.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=dc8525afb8afe1bf96a9c9e6e26949b5\" alt=\"image\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/74428/2553c450-d4c8-96df-6fe9-684e56921919.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F74428%2F2553c450-d4c8-96df-6fe9-684e56921919.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=630fb0c44b9fd05d37dfcf9bcc512302 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e②「VPNが繋がらない」と打ってみる\u003cbr\u003e\n詳細ページが案内される。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/50f21cbf19a45eff4f03f4aef38df54b022fc691/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f37343432382f65346465393663362d316337382d363630382d653035662d3361306232396137393863362e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F74428%2Fe4de96c6-1c78-6608-e05f-3a0b29a798c6.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=6d3114153fe4c7ac90472230f157d166\" alt=\"image\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/74428/e4de96c6-1c78-6608-e05f-3a0b29a798c6.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F74428%2Fe4de96c6-1c78-6608-e05f-3a0b29a798c6.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=973122a6b7021f5d5b9486c50da89948 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e③「Wifiが壊れた」と打ってみる\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/246e6ec7233386127e263d036498358e6393e402/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f37343432382f38666663326435322d313339342d346432372d336638302d3064343634313361366665372e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F74428%2F8ffc2d52-1394-4d27-3f80-0d46413a6fe7.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=772dd826b01397eaa4414badf63eb79e\" alt=\"image\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/74428/8ffc2d52-1394-4d27-3f80-0d46413a6fe7.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F74428%2F8ffc2d52-1394-4d27-3f80-0d46413a6fe7.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=e6515dbdec9378421d5fefdc220ccda3 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e●選択肢を選んでやりとりするパターン\u003cbr\u003e\n①「こんにちは」と話しかける\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/0c96ecf6569b35d49cc1b8f7ee9424e14e95f10d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f37343432382f32353533633435302d643463382d393664662d366665392d3638346535363932313931392e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F74428%2F2553c450-d4c8-96df-6fe9-684e56921919.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=dc8525afb8afe1bf96a9c9e6e26949b5\" alt=\"image\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/74428/2553c450-d4c8-96df-6fe9-684e56921919.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F74428%2F2553c450-d4c8-96df-6fe9-684e56921919.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=630fb0c44b9fd05d37dfcf9bcc512302 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e②「【インフラ】PC・ネットワーク関連」を選ぶ\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/6b0f7a1e2a76999fc01fab02fb2520a27ef0ae24/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f37343432382f34373839626266362d356438392d653062382d316236322d3032383137636330303937352e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F74428%2F4789bbf6-5d89-e0b8-1b62-02817cc00975.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=f3a488dd96de624921b90ddafcf4b544\" alt=\"image\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/74428/4789bbf6-5d89-e0b8-1b62-02817cc00975.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F74428%2F4789bbf6-5d89-e0b8-1b62-02817cc00975.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=60535d891099648c544e1eecbc010c4f 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e③「無線LAN(Wifi)・有線LAN関連」を選ぶ\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/4e46753071860e01bc28fea98a785da88c04c200/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f37343432382f62333936353963392d636231632d386264322d366436392d3034636665656636333030382e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F74428%2Fb39659c9-cb1c-8bd2-6d69-04cfeef63008.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=da23ea2ee5f3b4e2113f1ebb1cc5f908\" alt=\"image\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/74428/b39659c9-cb1c-8bd2-6d69-04cfeef63008.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F74428%2Fb39659c9-cb1c-8bd2-6d69-04cfeef63008.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=70e8be2cdc8367a8f2e1e7972755a583 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e④「こんにちは」のあとに「その他」を選んだ場合\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/e7c0398efcffbec49c0c95ad092c131805dcfe10/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f37343432382f38386539633933612d643365312d336365382d613065642d3733616434323135383631392e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F74428%2F88e9c93a-d3e1-3ce8-a0ed-73ad42158619.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=0bbe1153e2a0ff7bf3444c3c3601d4b8\" alt=\"image\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/74428/88e9c93a-d3e1-3ce8-a0ed-73ad42158619.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F74428%2F88e9c93a-d3e1-3ce8-a0ed-73ad42158619.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=ef670ca7e9a7d11975b3ca2de454018f 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"使うテクノロジー\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E4%BD%BF%E3%81%86%E3%83%86%E3%82%AF%E3%83%8E%E3%83%AD%E3%82%B8%E3%83%BC\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e使うテクノロジー\u003c/h1\u003e\n\n\u003cp\u003e・Microsoft Cognitive Services ,Language Understanding Intelligent Service (LUIS) 日本語版\u003cbr\u003e\n・Microsoft Bot Framework\u003cbr\u003e\n・Skype (コンシューマー向けのやつ。）\u003cbr\u003e\n・Azure App Services（Freeのプラン）\u003cbr\u003e\n・Visual Studio 2015\u003cbr\u003e\n  ・CodeはC#\u003c/p\u003e\n\n\u003cp\u003eLUISですが、先週見ると密かに日本語版が使えるようになっていました。\u003cbr\u003e\n\u003cdel\u003eBlogとかに記載ないのですが・・・。（日本語に対応したくらいでGlovalのBlogには書かねぇぜってことでしょうか）\u003c/del\u003e　← 使えるようになってから2週間遅れくらいで、Update通知メールで書いてました。日本語対応については小さい字で、中国語対応については大きな字で書いてありました。時代を感じますね。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"botって何が新しいんだろう\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#bot%E3%81%A3%E3%81%A6%E4%BD%95%E3%81%8C%E6%96%B0%E3%81%97%E3%81%84%E3%82%93%E3%81%A0%E3%82%8D%E3%81%86\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eBotって何が新しいんだろう？\u003c/h1\u003e\n\n\u003cp\u003e\u003cstrong\u003e①一気にプライベートゾーンに飛び込める\u003c/strong\u003e\u003cbr\u003e\nサイトやモバイルアプリでは、まだアプリとユーザの距離が遠い。\u003cbr\u003e\nLineやFacebookメッセ、What's Appのような普段使いしているアプリに入りこむことで、プライベートゾーンに飛び込む。\u003cbr\u003e\n保険の営業がいままではカフェで商談してたのが、客の家のリビングで商談するようになった感じですね。これはエンジニアには理解しにくい違いかもですが、営業やマーケティングの人にとってはかなり嬉しいことだと思います。\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003e②UIがより簡単になる\u003c/strong\u003e\u003cbr\u003e\nちょっとした入力作業や編集作業を、手軽なUIで行える。\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003e③単純なやりとりと大量に処理できる\u003c/strong\u003e\u003cbr\u003e\nMicrosoftのりんなは、シャープのツイッターにインターンをした時、11時から18時で32,882ツイート、1秒平均1.3ツイートしたとのこと。シャープに人がやっていたツイートの数年分らしいです。\u003cbr\u003e\nこの速さは、もはや人と比べられる速度じゃないですね。もし、ChatBotが人と同じくらい賢い回答ができるようになったら、この速さで捌いてくれることは大きなメリットですね。\u003cbr\u003e\n\u003ca href=\"https://twitter.com/SHARP_JP/status/718002563254095872/photo/1\" rel=\"nofollow noopener\" target=\"_blank\"\u003eこの件に関する参考ツイート\u003c/a\u003e\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"利用シーン\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%88%A9%E7%94%A8%E3%82%B7%E3%83%BC%E3%83%B3\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e利用シーン\u003c/h1\u003e\n\n\u003cp\u003eまず検討されやすいと考えられる利用シーン。\u003c/p\u003e\n\n\u003cp\u003e①電話での自動応対機能の置換え\u003cbr\u003e\n②Help Desk機能の一部置換え\u003cbr\u003e\n ヘルプデスクが電話対応している問合せの中でも「数が多く」「回答が簡単」な問合せをボットにさせる\u003cbr\u003e\n③パーソナライズされた頻度が低い通知\u003cbr\u003e\n　ヤマト運輸のお届け通知のイメージ。実は、僕はこのアプリが大好きだし、素晴らしすぎると思っている。Lineでお届け日時の確認の通知が届き、その場で\u003cstrong\u003e簡単\u003c/strong\u003eに配達日時を変更できる。再配達も\u003cstrong\u003e簡単\u003c/strong\u003eにできる。利用者にとっても助かるし、運輸会社にとってコスト増の元凶となる不在配達数を削減できる。あと付け加えると、Botがまだ世に少ないタイミングででてきたパイオニア的なアプリなのにも関わらずこの便利さは、素晴らしすぎると思う。\u003cbr\u003e\n④簡易的な入力＆編集\u003cbr\u003e\n宅配便の再配達依頼をLineの画面で数回のボタンでできたり、会社の勤務管理をLineで簡単に入力できるなど、繰り返しの多い定例作業で、かつ小さな入力や変更では、効率の向上が大きい。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"botの実装アーキテクチャ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#bot%E3%81%AE%E5%AE%9F%E8%A3%85%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eBotの実装アーキテクチャ\u003c/h1\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"--botの機能分解図\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#--bot%E3%81%AE%E6%A9%9F%E8%83%BD%E5%88%86%E8%A7%A3%E5%9B%B3\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e- Botの機能分解図\u003c/h2\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/24c3166b5e296124e2fc1766e797303eeb2aaecd/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f37343432382f30336538373930312d376265652d653365642d393833392d6137643664646533376533382e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F74428%2F03e87901-7bee-e3ed-9839-a7d6dde37e38.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=20dd46f6dce44e7e8568154bbe80fe26\" alt=\"image\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/74428/03e87901-7bee-e3ed-9839-a7d6dde37e38.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F74428%2F03e87901-7bee-e3ed-9839-a7d6dde37e38.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=8fd10b7b4c718e9d2cdae4bf0c2ffea1 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eBot Frameworkの各機能の役割\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e１. Bot Connector\u003cbr\u003e\nChat Botのメイン処理をするWebAPIと、会話アプリ（SkypeやFacebookメッセ、Slack,What's APPなどを紐づけてくれる機能）。同じMicrosoft製品のSkypeは、非常に簡単に連携できる。それ以外は、手順書を整備してくれているので、それどおり進めると連携させることができる。\u003cbr\u003e\n欠点は、LINEにまだ対応していないこと。LINEは現状、Bot Connectorを使わずにLINEとWebAPIを紐づける必要がある。\u003c/p\u003e\n\n\u003cp\u003eBotConnectorは以下のページでMyBotを作成することで、使えるようになる\u003cbr\u003e\n\u003ca href=\"https://dev.botframework.com/bots\" rel=\"nofollow noopener\" target=\"_blank\"\u003eMicrosoft Bot Frameworkのページ\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e２. Bot Framework の Visual Studio Template\u003cbr\u003e\nBot Frameworkで開発するためのVisual StudioのTemplateを、追加して利用する。\u003cbr\u003e\nこのTemplateは、中身はASP.NET WebAPI テンプレートの改造版のようなイメージ。\u003cbr\u003e\nBot ConnectorやBot State、LUISなどが使い始めやすくしてある。\u003c/p\u003e\n\n\u003cp\u003e３. Bot State\u003cbr\u003e\nASP.NET系のアプリで使うセッションのような機能。ユーザデータをWebサーバ側で保持する機能。\u003cbr\u003e\n普通のSessionとは別物のBot Stateという機能として提供されている。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003esample.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"c1\"\u003e//Stateの初期化\u003c/span\u003e\n\u003cspan class=\"n\"\u003eStateClient\u003c/span\u003e \u003cspan class=\"n\"\u003estateClient\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eactivity\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eGetStateClient\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e//UserDataの値取り出し\u003c/span\u003e\n\u003cspan class=\"n\"\u003eBotData\u003c/span\u003e \u003cspan class=\"n\"\u003euserData\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003eawait\u003c/span\u003e \u003cspan class=\"n\"\u003estateClient\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eBotState\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eGetUserDataAsync\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eactivity\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eChannelId\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eactivity\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eFrom\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eId\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"n\"\u003eSentGreeting\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003euserData\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eGetProperty\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003ebool\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Greeting\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e//UserDataの値セット\u003c/span\u003e\n\u003cspan class=\"n\"\u003euserData\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eSetProperty\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eboot\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Greeting\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"k\"\u003eawait\u003c/span\u003e \u003cspan class=\"n\"\u003estateClient\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eBotState\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSetUserDataAsync\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eactivity\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eChannelId\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eactivity\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eFrom\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eId\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003euserData\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e４. LUIS（Language Understanding Intelligent Service)\u003c/p\u003e\n\n\u003cp\u003eこの機能こそが、会話のプラットフォームの肝になるもので、機会学習の進歩によりできるようになった新技術。「自然言語を機械が理解する」というミラクルを実現する部分になります。\u003cbr\u003e\nこの機能の役割をざっくりいうと、自由な文章を渡すと呼び出すべき関数名と引数を教えてくれる機能です。\u003cbr\u003e\n例えば、「今日の天気は何ですか？」という自由文を渡すと、「Weather」という関数と紐づく文言と「2016/10/08」(今日)という引数となる文言を返してくれます。\u003cbr\u003e\nこれを受け取ると、Weatherの関数の中で、「2016/10/08」の天気を調べ、「今日の天気は晴れです。」という文章を作って、ユーザ側に返却すればよいということになります。\u003cbr\u003e\n関数と紐づく文言が「Intent（意図）」、引数になる部分が「Entity」と呼ばれます。なんでこんなわかりにくい言い方するんですかね？IntentとEntityってすごく理解しにくい名前な気がするのは僕だけでしょうか。最初見たとき、なかなか理解できませんでした。\u003c/p\u003e\n\n\u003cp\u003eLUISは、単純にIF文の集合体ではなく、機械学習で文章の近さを確率として考慮してくれます。\u003cbr\u003e\n例えば、「今日の天気は何ですか？」「今日の天気は何でしょう？」「今日の天気は何？」など、同じ意味なのに、違う文言いわゆる言葉のゆらぎを、「95％、天気の話だね」とか「80％、天気の話だね」とか率を添えて、いい感じに教えてくれます。なのでアプリ側としては、80％以上だったら合致していると決めて、処理していきます。\u003cbr\u003e\nつまり、ちょっとくらい言い回しが変わっても、ちゃんとWeatherというIntentを返してくれます。\u003cbr\u003e\n賢いですね～。人の脳では当たり前にできることだから、Non ITの人からしたら、その凄さはわかってくれないかもですが。。。。\u003c/p\u003e\n\n\u003cp\u003eただ、人材と一緒で賢い人は簡単には用意できず、それなりの苦労が必要になります。\u003cbr\u003e\n最初は、LUISは赤ちゃんで何も知りません。なので、スパルタ教育でもなんでもいいのですが、育てあげる必要があります。\u003cbr\u003e\n具体的な学習させ方を下のLUIS設定画面で説明します。\u003cbr\u003e\nこの画面は「VPNが繋がらない」と文言に、「NotConnect」というIntentが紐づけられており、「vpn」の文言に「デバイス」というEntityが紐づけられていることを示しています。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/75c53cff942750edbb1e4580cedfa4519280c972/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f37343432382f61363866303762612d313933302d613066302d323335312d3865663239626263623831392e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F74428%2Fa68f07ba-1930-a0f0-2351-8ef29bbcb819.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=795d8213ff78eca0843140b6115a5224\" alt=\"image\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/74428/a68f07ba-1930-a0f0-2351-8ef29bbcb819.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F74428%2Fa68f07ba-1930-a0f0-2351-8ef29bbcb819.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=f0681f8ad702cf79ead51b30bc5a26c8 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eこの検索ボックスっぽい入力フィールドにひたすら例文を打ち込み、IntentとEntityの設定をしていくというのが教育方法になります。\u003cbr\u003e\n※もちろんCSVのようなフォーマットで一括登録は可能です。\u003cbr\u003e\nつまり「例文」「それに対応するIntent」「Entityとするワード」「対応づけるEntity」を、登録しまくらないと精度が上がらないということです。\u003cbr\u003e\nめんどくさいですね～。\u003c/p\u003e\n\n\u003cp\u003e日本語は未対応ですが、英語ではコルタナやBingで培われたプリセットがたくさん提供されています。つまり他所で育ててくれたLUISを使えます。しかし、どこまでそれが有用かは微妙ですね、天気の話とか、アラームセットとか、あまり自分が作るChat Botに入れる必要ないように感じるので。\u003cbr\u003e\n各業界の業務に対応したプリセットができてくるようになるとすごく有難いのですが・・・。まだ少し先な気がします。\u003c/p\u003e\n\n\u003cp\u003e５．Bot Builder SDK\u003cbr\u003e\n１～４で述べた各個別機能をまとめたものの総称。\u003c/p\u003e\n\n\u003cp\u003e６．Bot Directory\u003cbr\u003e\n作ったボットを公開するストアみたいなもの。購入機能はないみたいですが。\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003e●自由文と既定文を分類しているところの処理\u003c/strong\u003e\u003c/p\u003e\n\n\u003cp\u003e図の②で分類を行っていますが、ここは非常にシンプルな方法で行います。\u003cbr\u003e\nソースを見てみます。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003esample.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"c1\"\u003e//activity.Textがユーザから送られてきた文章\u003c/span\u003e\n\u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eactivity\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eText\u003c/span\u003e \u003cspan class=\"p\"\u003e==\u003c/span\u003e \u003cspan class=\"s\"\u003e\"Hello\"\u003c/span\u003e \u003cspan class=\"p\"\u003e||\u003c/span\u003e \u003cspan class=\"n\"\u003eactivity\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eText\u003c/span\u003e \u003cspan class=\"p\"\u003e==\u003c/span\u003e \u003cspan class=\"s\"\u003e\"こんにちは\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e \n\u003cspan class=\"c1\"\u003e/////処理\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eelse\u003c/span\u003e \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eactivity\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eText\u003c/span\u003e \u003cspan class=\"p\"\u003e==\u003c/span\u003e \u003cspan class=\"s\"\u003e\"電話で対応してほしい\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e/////処理\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"k\"\u003eelse\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"c1\"\u003e//既定文にヒットしなかったらLUISを呼ぶ\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eawait\u003c/span\u003e \u003cspan class=\"nf\"\u003eLUIS\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eactivity\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e\u003cstrong\u003e●LUISから返ってきたIntent＆EntityとC#の関数との紐づけ\u003c/strong\u003e\u003c/p\u003e\n\n\u003cp\u003e以下のコードのようにIntentをごとに関数を呼び分けています。Entityはresultの中から取り出します。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003esample.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nf\"\u003eLuisIntent\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)]\u003c/span\u003e\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003easync\u003c/span\u003e \u003cspan class=\"n\"\u003eTask\u003c/span\u003e \u003cspan class=\"nf\"\u003eNone\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eIDialogContext\u003c/span\u003e \u003cspan class=\"n\"\u003econtext\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eLuisResult\u003c/span\u003e \u003cspan class=\"n\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003emessage\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e$\"ごめんなさい。勉強不足でわかりませんでした。\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eawait\u003c/span\u003e \u003cspan class=\"n\"\u003econtext\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003ePostAsync\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003emessage\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n  \u003cspan class=\"n\"\u003econtext\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWait\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eMessageReceived\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nf\"\u003eLuisIntent\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Broken\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)]\u003c/span\u003e\n\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nf\"\u003eLuisIntent\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"NotConnect\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)]\u003c/span\u003e\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003easync\u003c/span\u003e \u003cspan class=\"n\"\u003eTask\u003c/span\u003e \u003cspan class=\"nf\"\u003eBroken\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eIDialogContext\u003c/span\u003e \u003cspan class=\"n\"\u003econtext\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eLuisResult\u003c/span\u003e \u003cspan class=\"n\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003emessage\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eEntities\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eCount\u003c/span\u003e \u003cspan class=\"p\"\u003e==\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n   \u003cspan class=\"n\"\u003emessage\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e$\"何のトラブルですか？もう一度、言い換えて教えてもらえませんか？\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e}\u003c/span\u003e \u003cspan class=\"k\"\u003eelse\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \n   \u003cspan class=\"n\"\u003emessage\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e$\"\"\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"n\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eEntities\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e].\u003c/span\u003e\u003cspan class=\"n\"\u003eEntity\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"s\"\u003e\"のトラブルですね。\\n\\n\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eawait\u003c/span\u003e \u003cspan class=\"n\"\u003econtext\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003ePostAsync\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003emessage\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n  \u003cspan class=\"n\"\u003econtext\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWait\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eMessageReceived\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"chat-botの会話設計について\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#chat-bot%E3%81%AE%E4%BC%9A%E8%A9%B1%E8%A8%AD%E8%A8%88%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eChat Botの会話設計について\u003c/h1\u003e\n\n\u003cp\u003e今回、ユーザに自由文で発言させるパターンと、ボタンを選択してもらって発言するパターンを考えましたが、後者の方だけでも多くの利用用途があるように感じています。\u003cbr\u003e\nまた自由文を使うにしても、ある程度ボタンの選択肢で内容を絞ってから自由文を使わせるようにナビゲートした方が発言を限定することができ、LUISで育てる手間が大きく減ります。\u003c/p\u003e\n\n\u003cp\u003eこういったことを考慮しながら会話を設計していくかと思いますが、この設計手法がインターネットをいろいろ探しても見つからず、仕方なく自作で考えました。\u003cbr\u003e\nたぶん、まだよい設計手法とか設計フレームワークとかが世の中に出てきてないんだろうなと思います。\u003cbr\u003e\n私が設計をするために使ったツールは、マインドマップです。\u003cbr\u003e\n以下はマインドマップで書いた絵になります\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/3f3910b2d3213d935b648e09890e2787e3b5bbf7/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f37343432382f39303634643431302d336363622d626234392d326338622d3364313564383166306637362e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F74428%2F9064d410-3ccb-bb49-2c8b-3d15d81f0f76.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=afbcd4af3807a1fde92a126fdf4ad6d5\" alt=\"image\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/74428/9064d410-3ccb-bb49-2c8b-3d15d81f0f76.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F74428%2F9064d410-3ccb-bb49-2c8b-3d15d81f0f76.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=ed7f3b50483599b16131b7a453824d2e 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eいろいろ試したのですが、マインドマップが一番しっくりきました。\u003cbr\u003e\nこういうツリー構造を書いて、会話を設計し、関係者と議論していくのが良いかと考えてます。\u003cbr\u003e\nそして、このツリーをXMLなどにエクスポートして、アプリで読み込ませてそのまま実装するとかは比較的簡単にできそうなので、近々そういう製品もでてくるだろうな予想されます。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"サンプルソース\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB%E3%82%BD%E3%83%BC%E3%82%B9\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eサンプルソース\u003c/h1\u003e\n\n\u003cp\u003e作ったアプリはGitHubに置いています。\u003c/p\u003e\n\n\u003cp\u003e\u003cqiita-embed-ogp src=\"https://github.com/tomohiku/LUISApp\"\u003e\u003c/qiita-embed-ogp\u003e\u003c/p\u003e\n\n\u003cp\u003e●動かすために必要な設定\u003cbr\u003e\n１．ASP.NETアプリを公開するためのAzure App Serviceを用意 \u003cbr\u003e\n　※インターネット公開されればどんなWebサーバでもOK\u003cbr\u003e\n　※Azureサブスクリプションがあれば、Visual Studioで自動作成できる\u003cbr\u003e\n２．LUISでApplicationを作成。IDとKeyを取得する。\u003cbr\u003e\n　※Azureサブスクリプションが必要。AzureポータルからLUISサービスを使えるようにする。\u003cbr\u003e\n３．Microsoft Bot FrameworkのサイトでMy Botを作成。AppIDとPasswordを取得する。 \u003cbr\u003e\n　※Skypeとの連携は勝手にやってくれる\u003cbr\u003e\n４．GitHubから落としたアプリに次の設定をする\u003cbr\u003e\n　①Web.configにMy BotのAppIDとPasswordを設定\u003cbr\u003e\n　②HelpBot.csにLUISのIDとKeyを設定\u003cbr\u003e\n５．Skypeの連絡先に作ったBotをAdd。Microsoft Bot FrameworkのMy Botのサイトで作ったBotをAddするためのリンクがでてくる。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"さいごに\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%95%E3%81%84%E3%81%94%E3%81%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eさいごに\u003c/h1\u003e\n\n\u003cp\u003e10月6日に行われたGoogleの新製品発表で、Google Homeが発表されました。\u003cbr\u003e\nそれは、音声で話しかけるとAIが音声で回答してくれる画面のないデバイスです。例えば電気を消してとかも頼めるし、天気を教えてとも聞ける。\u003cbr\u003e\nこれは精度が高まっていくと、いわゆるお手伝いさんや秘書のような人と同じような仕事を機械やってくれるということであると思います。\u003c/p\u003e\n\n\u003cp\u003eこれを見ていて、Chat Botって音声会話に向かうための中間的な技術なんだなーって感じました。音声でなんでもできるようになったら、みんなスマフォから電話をするかのように、AIにいろいろ指示を出すようになるのかな。\u003c/p\u003e\n\n\u003cp\u003e「もしもし、あのさ、今日の19時からの8チャンネルの世にも奇妙な物語を録画しておいてくれる？」\u003c/p\u003e\n\n\u003cp\u003eとか家族に頼むように、AIに頼むような時代がもう近くにあるんだなーと。\u003cbr\u003e\nそんな時代が来るのはすごく楽しみだし、きっと今勉強しているChatBotの知識はその時に、もっと役に立つんだろうなーと、そのGoogleの発表会を見ながら思いました。\u003c/p\u003e\n","createdAt":"2016-10-08T15:47:02Z","elapsedYearsFromLastModifiedAt":2,"encryptedId":"OFccIyjvLCxWUsz9b2XJ3VOoB7BY/2TK--crg8vF6y3vkDg+Ia--dskwuN+ujHWGrnCeoKWpoA==","isBanned":false,"isDeprecated":true,"isDestroyableByViewer":false,"isEditRequestReadableByViewer":true,"isEditRequestSendableByViewer":true,"isLikableByViewer":true,"isLikedByViewer":false,"isPublic":true,"isSlide":false,"isStockableByViewer":true,"isStockedByViewer":false,"isSubscribableByViewer":false,"isSubscribedByViewer":false,"isUpdatableByViewer":false,"isUpdated":true,"lastModifiedAt":"2019-04-15T12:35:31Z","likesCount":91,"linkUrl":"https://qiita.com/tomohiku/items/86d85dcfbd34864e7b5d","organization":null,"originalId":429067,"stockedCount":103,"title":"自然言語入力処理のMicrosoft LUIS(日本語版)を使ってChatBotサンプルを作ってみる","toc":"\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB\"\u003eはじめに\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%81%93%E3%81%AE%E8%A9%A6%E8%A1%8C%E3%81%AE%E7%9B%AE%E7%9A%84\"\u003eこの試行の目的\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E4%BD%9C%E3%81%A3%E3%81%A6%E3%81%BF%E3%81%9Fchatbot%E3%82%A2%E3%83%97%E3%83%AA%E3%81%AE%E3%82%A4%E3%83%A1%E3%83%BC%E3%82%B8\"\u003e作ってみたChatBotアプリのイメージ\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E4%BD%BF%E3%81%86%E3%83%86%E3%82%AF%E3%83%8E%E3%83%AD%E3%82%B8%E3%83%BC\"\u003e使うテクノロジー\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#bot%E3%81%A3%E3%81%A6%E4%BD%95%E3%81%8C%E6%96%B0%E3%81%97%E3%81%84%E3%82%93%E3%81%A0%E3%82%8D%E3%81%86\"\u003eBotって何が新しいんだろう？\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%88%A9%E7%94%A8%E3%82%B7%E3%83%BC%E3%83%B3\"\u003e利用シーン\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#bot%E3%81%AE%E5%AE%9F%E8%A3%85%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3\"\u003eBotの実装アーキテクチャ\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#--bot%E3%81%AE%E6%A9%9F%E8%83%BD%E5%88%86%E8%A7%A3%E5%9B%B3\"\u003e- Botの機能分解図\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#chat-bot%E3%81%AE%E4%BC%9A%E8%A9%B1%E8%A8%AD%E8%A8%88%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6\"\u003eChat Botの会話設計について\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB%E3%82%BD%E3%83%BC%E3%82%B9\"\u003eサンプルソース\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%81%95%E3%81%84%E3%81%94%E3%81%AB\"\u003eさいごに\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n","totalPv":22914,"uuid":"86d85dcfbd34864e7b5d","banReason":null,"adventCalendarItem":null,"author":{"encryptedId":"wX8a7nzn/1QXh0CY+9EdHEgu97o=--KmsO3VHOUbgZtRfw--19lrjult3i6ZGD/TY4CwUA==","originalId":74428,"description":".NET プラットフォームでのプログラミング、データ分析（R、Python、Azure ML、PowerBI）、IoT系、AzureのData Insight系や開発系を中心として活動してます。\r\n役に立つのはもちろん、使ってて楽しくなってくるアプリを作るのが好きです。","facebookUrl":null,"githubUrl":"https://github.com/tomohiku","isBlockingViewer":false,"isFollowableByViewer":true,"isFollowedByViewer":false,"isTweetWebNotificationReceivable":true,"linkedinUrl":null,"name":"Tomohiko","profileImageUrl":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/74428/profile-images/1557151708","profileImageUrlW48":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F74428%2Fprofile-images%2F1557151708?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=48\u0026s=c7496cbbda79f11683dc45519bbb00f4","profileImageUrlW75":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F74428%2Fprofile-images%2F1557151708?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=3ec80ddc1883d723b7b69b57ec2ba89f","urlName":"tomohiku","websiteUrl":"","twitterUrl":null,"twitterUrlName":null,"revealedOrganizations":{"edges":[]}},"tags":[{"name":"Microsoft","urlName":"microsoft"},{"name":"C#","urlName":"csharp"},{"name":"自然言語処理","urlName":"%e8%87%aa%e7%84%b6%e8%a8%80%e8%aa%9e%e5%87%a6%e7%90%86"},{"name":"機械学習","urlName":"%e6%a9%9f%e6%a2%b0%e5%ad%a6%e7%bf%92"},{"name":"bot","urlName":"bot"}],"followingLikers":{"edges":[]},"comments":{"totalCount":0}},"comments":[],"client":null,"ads_event_emitter":null}}</script>
