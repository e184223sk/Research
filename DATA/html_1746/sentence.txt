.NETで利用できるREPL処理系はいくつかありますが、Hanselmanのブログで紹介されていたdotnet replがちょっと気になったので触ってみました。
dotnet replは dotnet interactiveをバックエンドにしたREPL環境で現時点ではバージョンが0.1.11とだいぶ初期のプロジェクトなためできないことも多いですが、コンソールだけで完結できるものとしては手軽に試せて結果表示などわかりやすくて良さげだなーという印象でした。ターミナルで次のコマンドを実行するとグローバルにインストールされます。上記のコマンドを実行後dotnet replとターミナルに入力すれば、C#のREPL環境が立ち上がります。C#以外にF#のREPL環境も実行できるようですが試していません。

Nugetでパッケージを追加したい場合は、.NET Intaractiveの#rコマンドが使えます。
DynamoDB用の接続ライブラリをインストールする場合は、#r "nuget:AWSSDK.DynamoDBv2のように実行すればそのセッションが有効な間利用できます。
今回はこんな感じのテーブルを検索してみます。とりあえずドキュメントモデルでデータを出し入れするので、入れ物用のクラスを定義しておきます。


複数行にまたがる入力をする場合はShift+Enterで行を継続できます。ただ、コピー＆ペーストで張り付ける場合にうまいこと行継続してくれないので現在点では複数行入力がちょっと大変ですね。あと、行末にセミコロンの省略はできないので付け忘れるとエラーになります。コネクションを作った後にコンテキストを作成して、
データを追加した後に、検索してみました。

検索結果が表示されていますね。.NET Intaractiveをベースに作られているので、あらかじめ作成してあるノートブックを読み込んで実行することもできます。
たとえば、こんなノートブックを作っておきdotnet repl実行時に --notebook でファイルのパスを渡すと実行してくれます。
.NETのREPL環境もいろいろ出てきたけれど、.NET Intaractiveをバックエンドに使える.net replは触ってみると面白い。
まぁ、VSCodeで.NET Intractiveを触る方が簡単ではあるけれど。


