More than 3 years have passed since last update.以前、Qiitaの記事を巡回していたところ
プログラミング入門者からの卒業試験は『ブラックジャック』を開発すべし
という記事を拝見しました。ちょうど、以下の本2冊を読んだところでしたのでアウトプットしようと思い制作しました。コマンドラインインターフェースで遊べるものを作りました。
エースを 1 点または 11 点として扱うことにチャレンジしました。C# で書きました。トランプカードの数値、マーク、絵柄は一度決まったら変えられないように読み取り専用としました。デッキはカードのコレクションになります。
コレクションに対する操作は複雑になりがちですので、
デッキクラスを作成しカードのコレクションをラップしました。手札もカードのコレクションになります。
山札クラスと同様に手札クラスを作ってカードのコレクションをラップしました。プレイヤー（ディーラー）は手札と山札を持ち、処理のほとんどを委譲します。
手札と山札はコンストラクタを通じて外部から依存オブジェクトとして注入するようにしました。
山札はプレイヤーとディーラーで共有することになるので同一のインスタンスを注入します。
ShowTookCardメソッドはTakeメソッドのローカル関数にしたほうが良かったかもしれません。
プレイヤーとディーラーを同一のクラスとしましたが、いいネーミングが思いつきませんでした。ゲームの流れは手続き型になってしまいました。
入力受付のインターフェースを定義したり、うまくゲームループを抽象化できればもっとスマートになったかもしれません。簡単なアプリケーションですので、DI コンテナーは使わず、
べた書きで直接、依存オブジェクトを注入しました。
やり方は簡単で、依存するインスタンスを明示的に作成し、集約するクラスに渡すだけです。


