More than 1 year has passed since last update.サービス側の処理で RpcException をスローすることがありますが、クライアント側から呼び出したメソッドが終了しないケースを発見しました。一見何の問題もないように見えてしまうため、注意が必要です。gRPC のバージョンは 1.16.0 ですが、他のバージョンでも発生するかもしれません。RpcException のトレーラーに格納する内容をいったん ServerCallContext に格納し、ServerCallContext の ResponseTrailers プロパティ経由で RpcException に格納します。ちなみに ServerCallContext.ResponseTrailers を使わなければこの現象は発生しません。通常はこちらのように実装すると思います。メソッドの呼び出しが終わらず、ブロックされたままになります。


