<!DOCTYPE html><html><head><meta charset="utf-8" /><title>C#/JavaScriptで学ぶF#入門 - Qiita</title><meta content="width=device-width,initial-scale=1,shrink-to-fit=no,viewport-fit=cover" name="viewport" /><meta content="#55c500" name="theme-color" /><meta content="XWpkTG32-_C4joZoJ_UsmDUi-zaH-hcrjF6ZC_FoFbk" name="google-site-verification" /><meta content="telephone=no" name="format-detection" /><link rel="canonical" href="https://qiita.com/7shi/items/ff746903680ae8d0d7ce" /><link href="/manifest.json" rel="manifest" /><link href="/opensearch.xml" rel="search" title="Qiita" type="application/opensearchdescription+xml" /><link as="script" href="https://www.googletagservices.com/tag/js/gpt.js" rel="preload" /><link href="https://securepubads.g.doubleclick.net" rel="preconnect" /><script async="" src="https://www.googletagservices.com/tag/js/gpt.js"></script><meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="O+AmLKcxUYGcOx/14QjyrQ62qtzSVM1LbBAEzO3iGuTzl1nlD60rauu5n4JsNWglpLLSkSawklCwo6Odw3CNSA==" /><link rel="shortcut icon" type="image/x-icon" href="https://cdn.qiita.com/assets/favicons/public/production-c620d3e403342b1022967ba5e3db1aaa.ico" /><link rel="apple-touch-icon" type="image/png" href="https://cdn.qiita.com/assets/favicons/public/apple-touch-icon-ec5ba42a24ae923f16825592efdc356f.png" /><link rel="stylesheet" media="all" href="https://cdn.qiita.com/assets/public/article-2eaa7dbedc42a8ea65c722cda46d0ebb.min.css" /><script src="https://cdn.qiita.com/assets/public/v3-article-bundle-63de2d91fef827269d3f6b958db2335b.min.js" defer="defer"></script><meta name="twitter:card" content="summary_large_image"><meta content="@Qiita" name="twitter:site" /><meta content="@7shi" name="twitter:creator" /><meta property="og:type" content="article"><meta property="og:title" content="C#/JavaScriptで学ぶF#入門 - Qiita"><meta property="og:image" content="https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0&amp;w=1200&amp;mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND1ReU12U21GMllWTmpjbWx3ZE9PQnAtV3RwdU9CdGtZajVZV2w2WmFBJnR4dC1jb2xvcj0lMjMzMzMmdHh0LWZvbnQ9SGlyYWdpbm8lMjBTYW5zJTIwVzYmdHh0LXNpemU9NTQmdHh0LWNsaXA9ZWxsaXBzaXMmdHh0LWFsaWduPWNlbnRlciUyQ21pZGRsZSZzPTU1M2I5NzU3ZTRjNDk1ZDRiOWY2ZTc5ODc2YzViNTQ2&amp;mark-align=center%2Cmiddle&amp;blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RRGR6YUdrJnR4dC1jb2xvcj0lMjMzMzMmdHh0LWZvbnQ9SGlyYWdpbm8lMjBTYW5zJTIwVzYmdHh0LXNpemU9NDUmdHh0LWFsaWduPXJpZ2h0JTJDYm90dG9tJnM9MmE1NDhlMzQ4ZTU2NWY0OGUxNzg0NDM1ODE0YTNiNmM&amp;blend-align=center%2Cmiddle&amp;blend-mode=normal&amp;s=065fa74272fd0b0482f9894b2f7bce11"><meta property="og:description" content="C#やJavaScript（ES2015）と比較しながらF#の文法を説明します。手続型の延長線上で取っ掛かりをつかむことを目的とします。関数型については深追いしません。


とりあえず手続型的な発想でも構わないので、F#を使ってみます..."><meta content="https://qiita.com/7shi/items/ff746903680ae8d0d7ce" property="og:url" /><meta content="Qiita" property="og:site_name" /><meta content="564524038" property="fb:admins" /><meta content="JavaScript,F#,C#" name="keywords" /><script>!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window, document,'script',
'https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '668972150489891');
fbq('track', 'PageView');</script><style data-emotion-css="17jxvjw 11t2ec1 1dvr2p8 18lkoru 1g4cku8 1iupg5d ijvq0v 15cocm3 12rp90f 115f4t 1b8uj5v 79elbk 16hhh7b fcbn8c 1gj7nt 154zy0m yikrym 1jqivyb 1ode1bp le4d8r 1hbd3g7 1nzh4zz 38fzdi helsa7 8qb8m4 2imjyh he5w1s 70qvj9 3ojehk 100alwu 1dtnjt5 10ougpm 1ay9vb9 m19uds cgzq40 1wa99t2 1l3zk9f 4czcte 1yzj1fm 1uv1qiv 109dbrr 5jpx49 mnxgyc 1vlpknv fsjkhv 1b17vb0 7i7f4d"}>.css-17jxvjw{display:grid;display:-ms-grid;grid-template-columns:80px minmax(0,1fr) 300px;-ms-grid-columns:80px minmax(0,1fr) 300px;grid-template-rows:minmax(270px,auto) 1fr;-ms-grid-rows:minmax(270px,auto) 1fr;max-width:1280px;margin-right:auto;margin-left:auto;padding-top:24px;padding-right:24px;padding-left:24px;}@media (max-width:1200px){.css-17jxvjw{padding-bottom:0;padding-left:0;padding-right:0;}}@media (max-width:992px){.css-17jxvjw{grid-template-columns:80px 452px 300px;-ms-grid-columns:80px 452px 300px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}}@media (max-width:770px){.css-17jxvjw{display:block;}}@media (max-width:480px){.css-17jxvjw{padding-top:0;}}.css-11t2ec1{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;z-index:5;position:-webkit-sticky;position:sticky;top:calc(56px + 24px + 16px + 32px - 16px);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:16px;width:80px;}.css-11t2ec1:after{content:'';display:table;}.css-11t2ec1:before{content:'';display:table;}@media (max-width:770px){.css-11t2ec1{display:none;}}.css-1dvr2p8{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-18lkoru{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;background-color:#FFFFFF;}.css-1g4cku8{display:inline-block;vertical-align:middle;height:20px;width:20px;fill:#55C500;}.css-1iupg5d{color:#55C500;cursor:pointer;font-size:14px;font-weight:bold;}.css-ijvq0v{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-15cocm3{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#FFFFFF;border:2px solid #6E6F70;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:2px 0px 0px;width:40px;}.css-12rp90f{display:inline-block;vertical-align:bottom;height:17.77777777777778px;width:16px;fill:#6E6F70;}.css-115f4t{color:#6E6F70;font-size:14px;font-weight:bold;}.css-1b8uj5v{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;margin-bottom:16px;padding:0;}.css-79elbk{position:relative;}.css-16hhh7b{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;padding:0;}.css-fcbn8c{display:none;bottom:initial;left:initial;right:initial;top:initial;left:100%;top:calc(-8px - (14px * 1.8) - 16px - 4px);}.css-1gj7nt{color:rgba(0,0,0,0.6);font-size:14px;font-weight:bold;line-height:1.8;padding:8px 16px;}.css-154zy0m{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.87);cursor:pointer;font-size:16px;font-weight:normal;line-height:1.8;padding:4px 16px;}.css-154zy0m:hover{-webkit-text-decoration:none;text-decoration:none;background-color:#F2F2F2;}.css-yikrym{width:20px;}.css-1jqivyb{color:rgba(0,0,0,0.6);font-size:13px;}.css-1ode1bp{background-color:rgba(0,0,0,0.12);height:1px;width:100%;margin:8px 0;}.css-le4d8r{display:inline-block;vertical-align:middle;height:13px;width:13px;fill:rgba(0,0,0,0.6);}.css-1hbd3g7{height:250px;}.css-1nzh4zz{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:16px 32px;background-color:#FBE69E;color:rgba(0,0,0,0.87);line-height:1.5;font-weight:600;}@media (max-width:770px){.css-1nzh4zz{padding:16px;}}.css-38fzdi{color:#CA832A;margin-right:4px;}.css-helsa7{background-color:#FFFFFF;padding:32px;margin-bottom:24px;}@media (max-width:992px){.css-helsa7{margin:0 auto 40px;}}@media (max-width:480px){.css-helsa7{margin:0 0 40px;padding:32px 16px;}}.css-8qb8m4{margin-bottom:48px;}.css-2imjyh{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-he5w1s{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;width:100%;}@media (max-width:770px){.css-he5w1s{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}}.css-70qvj9{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.css-3ojehk{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;margin-right:4px;}.css-100alwu{display:inline-block;border-radius:50%;line-height:1;overflow:hidden;vertical-align:middle;}.css-1dtnjt5{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-10ougpm{color:rgba(0,0,0,0.87);font-size:14px;font-weight:600;line-height:1.8;margin-right:4px;text-wrap:break-word;word-break:break-all;}.css-1ay9vb9{margin-right:16px;}.css-m19uds{color:rgba(0,0,0,0.6);font-size:14px;line-height:1.8;}.css-cgzq40{color:rgba(0,0,0,0.87);font-size:32px;font-weight:bold;line-height:1.4;margin-top:8px;text-wrap:break-word;word-break:break-all;}.css-1wa99t2{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.6);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:8px;}.css-1l3zk9f{color:rgba(0,0,0,0.6);font-size:20px;margin-right:8px;}.css-4czcte{margin-right:4px;color:inherit;font-size:14px;line-height:1.8;}.css-4czcte:not(:last-child)::after{content:',';margin-right:4px;}.css-1yzj1fm{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:32px;}.css-1uv1qiv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-size:20px;height:32px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin-right:16px;outline:none;padding:0;width:32px;}.css-109dbrr{background-color:#F9F9F9;border-top:1px solid rgba(0,0,0,0.12);bottom:0;box-shadow:0px 1px 4px rgba(0,0,0,0.14);display:none;height:calc(env(safe-area-inset-bottom,0px) + 56px);-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding-bottom:env(safe-area-inset-bottom);position:-webkit-sticky;position:sticky;width:100%;z-index:2000;}@media (max-width:770px){.css-109dbrr{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}.css-5jpx49{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:space-evenly;-webkit-justify-content:space-evenly;-ms-flex-pack:space-evenly;justify-content:space-evenly;width:100%;}.css-mnxgyc{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1vlpknv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;margin-right:4px;background-color:#FFFFFF;}.css-fsjkhv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1b17vb0{color:#6E6F70;font-size:14px;font-weight:bold;margin-left:4px;}.css-7i7f4d{display:none;bottom:initial;left:initial;right:initial;top:initial;bottom:32px;right:0;}</style></head><body><div class="allWrapper"><div><div id="GlobalHeader-react-component-6e51b34f-cf79-4bb6-a3f8-de116ad3d057"><div class="st-Header"><div class="st-Header_container"><div class="st-Header_start"><a href="/" class="st-Header_logo"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 426.57 130"><circle cx="167.08" cy="21.4" r="12.28"></circle><path d="M250.81 29.66h23.48v18.9h-23.48z"></path><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z"></path><circle cx="216.33" cy="21.4" r="12.28"></circle></svg></a><div class="st-Header_communitySelector" tabindex="0"><span class="fa fa-caret-down"></span></div><div class="st-Header_dropdown"><div class="st-Header_dropdownHeading">Qiita Teams that are logged in</div><div class="st-Header_dropdownItemNote">You are not logged in to any team</div><hr class="st-Header_dropdownDivider st-Header_dropdownDivider-shrink"/><a href="https://teams-center.qiita.com/find_team" class="st-Header_dropdownItem"><span class="fa fa-fw fa-sign-in st-Header_dropdownItemIcon"></span><div>Log in to Qiita Team</div></a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Community</div><a href="/organizations" class="st-Header_dropdownItem">Organization</a><a href="/official-events/open" class="st-Header_dropdownItem">Event</a><a href="/advent-calendar" class="st-Header_dropdownItem">Advent Calendar</a><a href="https://qiitadon.com/" class="st-Header_dropdownItem" target="_blank">Qiitadon (β)</a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Service</div><a href="https://jobs.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Jobs</a><a href="https://zine.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Zine</a><a href="https://blog.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Blog</a></div><form class="st-Header_search" action="/search" method="get"><span class="fa fa-search st-Header_searchIcon"></span><input type="search" class="st-Header_searchInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form><form class="st-Header_searchModal" action="/search" method="get"><input type="text" class="st-Header_searchModalInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form></div><div class="st-Header_end"><div class="st-Header_searchButton"><span class="fa fa-search"></span></div><a class="st-Header_signupButton" href="/signup?redirect_to=%2F7shi%2Fitems%2Fff746903680ae8d0d7ce">Signup</a><a class="st-Header_loginLink" href="/login?redirect_to=%2F7shi%2Fitems%2Fff746903680ae8d0d7ce">Login</a></div><div class="st-Header_overlay"></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="GlobalHeader" data-dom-id="GlobalHeader-react-component-6e51b34f-cf79-4bb6-a3f8-de116ad3d057">{"unreadNotificationsCount":null,"realms":[{"humanName":"Qiita","isCurrentRealm":true,"isQiita":true,"isQiitaTeam":false,"loggedInUser":null,"teamId":null,"url":"https://qiita.com/"}],"teamFindUrl":"https://teams-center.qiita.com/find_team","isTeamOnlyUser":null,"currentUser":null}</script>
      
</div><div class="st-HeaderAlert st-HeaderAlert-warning"><div class="st-HeaderAlert_body"></div></div><script type="application/ld+json">{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"/","name":"Qiita"}},{"@type":"ListItem","position":2,"item":{"@id":"/tags/javascript","name":"JavaScript"}}]}</script><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","datePublished":"2017-01-04T22:30:42.000+09:00","dateModified":"2020-08-14T20:34:56.000+09:00","headline":"C#/JavaScriptで学ぶF#入門","image":"https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0\u0026w=1200\u0026mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND1ReU12U21GMllWTmpjbWx3ZE9PQnAtV3RwdU9CdGtZajVZV2w2WmFBJnR4dC1jb2xvcj0lMjMzMzMmdHh0LWZvbnQ9SGlyYWdpbm8lMjBTYW5zJTIwVzYmdHh0LXNpemU9NTQmdHh0LWNsaXA9ZWxsaXBzaXMmdHh0LWFsaWduPWNlbnRlciUyQ21pZGRsZSZzPTU1M2I5NzU3ZTRjNDk1ZDRiOWY2ZTc5ODc2YzViNTQ2\u0026mark-align=center%2Cmiddle\u0026blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RRGR6YUdrJnR4dC1jb2xvcj0lMjMzMzMmdHh0LWZvbnQ9SGlyYWdpbm8lMjBTYW5zJTIwVzYmdHh0LXNpemU9NDUmdHh0LWFsaWduPXJpZ2h0JTJDYm90dG9tJnM9MmE1NDhlMzQ4ZTU2NWY0OGUxNzg0NDM1ODE0YTNiNmM\u0026blend-align=center%2Cmiddle\u0026blend-mode=normal\u0026s=065fa74272fd0b0482f9894b2f7bce11","mainEntityOfPage":"https://qiita.com/7shi/items/ff746903680ae8d0d7ce","author":{"@type":"Person","address":null,"email":null,"identifier":"7shi","name":"7shi","image":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F32057%2Fprofile-images%2F1473685823?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=4c3ba9e38885eb4fc97bd058b57afbf9","url":"https://qiita.com/7shi","description":null,"memberOf":[]},"publisher":{"@type":"Organization","name":"Qiita","logo":{"@type":"ImageObject","url":"//cdn.qiita.com/assets/public/qiita-logo-c39ded593afa388e2e1ba435b110554e.png"}}}</script><style type="text/css">.wb-CampaignLink {
  background-color: #333333;
  width: 100%;
}

.wb-CampaignLink_container {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  max-width: 1100px;
  margin: 0 auto;
  font-size: 13px;
  padding: 0.8em;
}
.wb-CampaignLink_container > a {
  color: #fff;
}

.wb-CampaignLink_container > a:hover {
  text-decoration: underline;
}</style><div class="wb-CampaignLink"><div class="wb-CampaignLink_container"><a target="_blank" id="header_text_message_1" href="https://zine.qiita.com/interview/202107-hitachi-3/?utm_source=qiita&amp;utm_medium=header-banner">日立の研究者が、2年間ドイツ人工知能研究センターで学んだこと</a><a target="_blank" id="header_text_message_2" href="https://zine.qiita.com/interview/202107-hitachi-3/?utm_source=qiita&amp;utm_medium=header-banner">詳しくはこちら</a></div><script>td.trackEvent(
  'front_events',
  {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"7shi","type":"items","id":"ff746903680ae8d0d7ce"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Show","data":{"message":"日立の研究者が、2年間ドイツ人工知能研究センターで学んだこと","url":"https://zine.qiita.com/interview/202107-hitachi-3/?utm_source=qiita\u0026utm_medium=header-banner","sub_message":"詳しくはこちら"}}
)</script><script>document.getElementById('header_text_message_1').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"7shi","type":"items","id":"ff746903680ae8d0d7ce"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":0,"pos_id":"header_text_message_1","message":"日立の研究者が、2年間ドイツ人工知能研究センターで学んだこと","url":"https://zine.qiita.com/interview/202107-hitachi-3/?utm_source=qiita\u0026utm_medium=header-banner","sub_message":"詳しくはこちら"}}
  )
})</script><script>document.getElementById('header_text_message_2').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"7shi","type":"items","id":"ff746903680ae8d0d7ce"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":0,"pos_id":"header_text_message_2","message":"日立の研究者が、2年間ドイツ人工知能研究センターで学んだこと","url":"https://zine.qiita.com/interview/202107-hitachi-3/?utm_source=qiita\u0026utm_medium=header-banner","sub_message":"詳しくはこちら"}}
  )
})</script></div><script type="application/json" id="js-react-on-rails-context">{"railsEnv":"production","inMailer":false,"i18nLocale":"en","i18nDefaultLocale":"en","href":"https://qiita.com/7shi/items/ff746903680ae8d0d7ce","location":"/7shi/items/ff746903680ae8d0d7ce","scheme":"https","host":"qiita.com","port":null,"pathname":"/7shi/items/ff746903680ae8d0d7ce","search":null,"httpAcceptLanguage":null,"actionPath":"public/items#show","settings":{"analyticsTrackingId":"UA-24675221-12","assetsMap":{},"csrfToken":"Ry01GJVVfk+wIBKCsOWjpa1yb+VUq2anNEN822+4n1KPWkrRPckEpMeikvU92DktB3YXqKBPObzo8NuKQSoI/g==","locale":"en"},"currentUser":null,"isLoggedIn":false,"recaptchaSiteKey":"6LfNkiQTAAAAAM3UGnSquBy2akTITGNMO_QDxMw6","serverSide":false}</script>
<div id="PersonalArticlePage-react-component-fee88b86-bbe6-4683-868c-c86bda6c1c68"><div class="p-items_wrapper"><div class=" css-17jxvjw"><div class="css-11t2ec1"><div class="css-1dvr2p8"><button class=" css-18lkoru"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/7shi/items/ff746903680ae8d0d7ce/likers" class="css-1iupg5d">60</a></div><div class="css-ijvq0v"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-115f4t">57</span></div><div class="css-1b8uj5v"><span class="fa fa-twitter"></span></div><div class="css-1b8uj5v"><span class="fa fa-facebook"></span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-fcbn8c"><div class="css-1gj7nt">Improve article</div><a href="/drafts/ff746903680ae8d0d7ce/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/7shi/items/ff746903680ae8d0d7ce/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/7shi/items/ff746903680ae8d0d7ce/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/7shi/items/ff746903680ae8d0d7ce/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/7shi/items/ff746903680ae8d0d7ce.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div><div class="p-items_options"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_toc"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_main"><div class="css-1nzh4zz"><span class="fa fa-fw fa-warning css-38fzdi"></span><p>More than 1 year has passed since last update.</p></div><div class="css-helsa7"><div class="css-8qb8m4"><div class="css-2imjyh"><div class="css-he5w1s"><div class="css-70qvj9"><div class="css-3ojehk"><a href="/7shi"><img class="css-100alwu eyfquo10" src="https://qiita-image-store.s3.amazonaws.com/0/32057/profile-images/1473685823" width="24" height="24" loading="lazy"/></a></div><div class="css-1dtnjt5"><a href="/7shi" class="css-10ougpm">@<!-- -->7shi</a><div class="css-1ay9vb9"><span><meta content="2017-01-04T13:30:42Z"/><time dateTime="2020-08-14T11:34:56Z" class="css-m19uds">updated at 2020-08-14</time></span></div></div></div></div></div><h1 class="css-cgzq40">C#/JavaScriptで学ぶF#入門</h1><div class="css-1wa99t2"><span class="fa fa-tags mr-1of2 css-1l3zk9f" aria-hidden="true"></span><a href="/tags/javascript" class="css-4czcte">JavaScript</a><a href="/tags/fsharp" class="css-4czcte">F#</a><a href="/tags/csharp" class="css-4czcte">C#</a></div></div><section class="it-MdContent"><div id="personal-public-article-body"><div><p>C#やJavaScript（ES2015）と比較しながらF#の文法を説明します。手続型の延長線上で取っ掛かりをつかむことを目的とします。関数型については深追いしません。</p>

<ul>
<li>とりあえず手続型的な発想でも構わないので、F#を使ってみます。</li>
<li>関数型特有の概念の説明には重点を置きませんが、その導入になるようには意識します。</li>
<li>一気に関数型に飛ばないで、ベターC#として慣れていくような入り方を目指します。</li>
<li>関数型の理解を深めるのは慣れてからでも遅くないというスタンスです。</li>
</ul>

<p>この記事は以前開催していた<a href="https://connpass.com/series/361/" rel="nofollow noopener" target="_blank">F#入門</a>のテキストを改訂したものです。</p>

<p>この記事には姉妹編があります。</p>

<ul>
<li>
<a href="http://qiita.com/7shi/items/1d3750ba17f5a88b8405" id="reference-6a3cfa99698502105270">Haskellで学ぶF#入門</a> 2017.01.11</li>
</ul>

<p>F#を手っ取り早く試すために、私が常用している環境を紹介します。</p>

<ul>
<li>
<a href="http://qiita.com/7shi/items/5fc7d6477d96bbd7a71d" id="reference-68b89880edcfdf69cabe">F#開発環境の紹介</a> 2016.12.30</li>
</ul>

<h1>
<span id="fについて" class="fragment"></span><a href="#f%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>F#について</h1>

<p>F#の構文は見慣れないものだと思います。この記事ではC#/JavaScriptと比較しながら構文に慣れることに重点を置きます。</p>

<h2>
<span id="背景" class="fragment"></span><a href="#%E8%83%8C%E6%99%AF"><i class="fa fa-link"></i></a>背景</h2>

<p>F#が分かりにくいと感じる原因は、主に以下の2種類ではないでしょうか。</p>

<ol>
<li>構文の異質さ（C系言語などと比較して）</li>
<li>関数型の考え方</li>
</ol>

<p>今回は前者の壁に的を絞ります。両者は完全に分離しているわけではないため、後者の領域も多少は言及します。個人的にはF#は構文が簡潔で短く書けるのが良いと思っています。触り始めの頃は関数型のことはあまり意識しませんでした。</p>

<h2>
<span id="位置付け" class="fragment"></span><a href="#%E4%BD%8D%E7%BD%AE%E4%BB%98%E3%81%91"><i class="fa fa-link"></i></a>位置付け</h2>

<p>F#はC#と同様に.NET Frameworkで動く言語です。クラスを定義したり使ったりなど、基本的にはC#でできるのとほぼ同じことができます。</p>

<p>※ これは大雑把な説明で、細かい点で違いはあります（<code>protected</code>や入れ子にされた型など）。</p>

<p>それに対してJavaScriptは出自が異なりますが、C#よりもJavaScriptで説明した方が分かりやすいケースもあるため、説明に取り入れました。</p>

<h1>
<span id="ハローワールド" class="fragment"></span><a href="#%E3%83%8F%E3%83%AD%E3%83%BC%E3%83%AF%E3%83%BC%E3%83%AB%E3%83%89"><i class="fa fa-link"></i></a>ハローワールド</h1>

<p>※ 横幅の関係上、インデントはスペース2つとします。</p>

<blockquote><table>
<tr>
<th>C#</th>
<th>JavaScript</th>
<th>F#</th>
</tr>
<tr>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
using System;

class Program
{
  static void Main()
  {
    Console.WriteLine("hello");
  }
}
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
console.log("hello");
</code></pre></div></div></td>
<td>
<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
printfn "hello"
</code></pre></div></div>または<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
open System
Console.WriteLine "hello"
</code></pre></div></div>
</td>
</tr>
</table></blockquote>

<ul>
<li>C#はMainメソッドが必須で、クラスで包む必要があります。簡単のため以後の例では省略します。</li>
<li>JavaScriptとF#はクラスやMainで包む必要がありません。</li>
<li>F#はセミコロンが必要ありません。（JavaScriptも省略可能）</li>
<li>F#では引数を<code>()</code>で囲む必要がありません。（付けても動きます）</li>
<li>F#の<code>open</code>はC#の<code>using</code>に相当します。以後の例では省略します。</li>
</ul>

<h2>
<span id="printfprintfn" class="fragment"></span><a href="#printfprintfn"><i class="fa fa-link"></i></a>printf/printfn</h2>

<p>F#の<code>printf</code>/<code>printfn</code>は<code>open</code>も何もなくいきなり使える標準の出力用関数です。</p>

<div class="code-frame" data-lang="fsharp">
<div class="code-lang"><span class="bold">F#</span></div>
<div class="highlight"><pre class="with-code"><code><span class="n">printf</span> <span class="s2">"hello</span><span class="se">\n</span><span class="s2">"</span>
<span class="n">printfn</span> <span class="s2">"hello"</span>
</code></pre></div>
</div>

<p>関数名の接尾辞<code>n</code>は<code>"\n"</code>と同様に New line に由来して、改行を意味します。</p>

<p>複数の引数はコンマではなくスペースで区切ります。（詳細は次のセクションで解説します）</p>

<div class="code-frame" data-lang="fsharp">
<div class="code-lang"><span class="bold">F#</span></div>
<div class="highlight"><pre class="with-code"><code><span class="n">printfn</span> <span class="s2">"%d"</span> <span class="mi">1</span>
</code></pre></div>
</div>

<p><code>printf</code>はコンパイラがフォーマット文字列を認識して、引数の型をチェックします。</p>

<div class="code-frame" data-lang="fsharp">
<div class="code-lang"><span class="bold">F#</span></div>
<div class="highlight"><pre class="with-code"><code><span class="n">printfn</span> <span class="s2">"%d"</span> <span class="s2">"abc"</span>  <span class="c1">// エラー</span>
<span class="n">printfn</span> <span class="s2">"%s"</span> <span class="mi">0</span>      <span class="c1">// エラー</span>
</code></pre></div>
</div>

<h1>
<span id="複数の引数" class="fragment"></span><a href="#%E8%A4%87%E6%95%B0%E3%81%AE%E5%BC%95%E6%95%B0"><i class="fa fa-link"></i></a>複数の引数</h1>

<p>F#では複数の引数の扱い方が二系統あり、F#ネイティブの関数と.NETのメソッドとで異なります。</p>

<blockquote><table>
<tr>
<th>C#</th>
<th>JavaScript</th>
<th>F#</th>
</tr>
<tr>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
Console.WriteLine("{0} {1}”,
  1 + 1, Math.Sqrt(2));
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
console.log(1 + 1, Math.sqrt(2));
</code></pre></div></div></td>
<td>
<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
printfn "%d %f" (1 + 1) (sqrt 2.)
</code></pre></div></div>または<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
Console.WriteLine("{0} {1}",
  1 + 1, Math.Sqrt 2.)
</code></pre></div></div>
</td>
</tr>
</table></blockquote>

<p>※ F#の2.は2.0のことで、浮動小数点数であることを示します。（後述）</p>

<h2>
<span id="fネイティブの関数" class="fragment"></span><a href="#f%E3%83%8D%E3%82%A4%E3%83%86%E3%82%A3%E3%83%96%E3%81%AE%E9%96%A2%E6%95%B0"><i class="fa fa-link"></i></a>F#ネイティブの関数</h2>

<p>複数の引数はコンマではなくスペースで区切ります。</p>

<div class="code-frame" data-lang="fsharp">
<div class="code-lang"><span class="bold">F#</span></div>
<div class="highlight"><pre class="with-code"><code><span class="n">printfn</span> <span class="s2">"%d"</span> <span class="mi">1</span>
</code></pre></div>
</div>

<p>コンマを付けると警告されてうまく動きません。（後述のタプルとして扱われます）</p>

<div class="code-frame" data-lang="fsharp">
<div class="code-lang"><span class="bold">F#</span></div>
<div class="highlight"><pre class="with-code"><code><span class="n">printfn</span> <span class="s2">"%d"</span><span class="p">,</span> <span class="mi">1</span>  <span class="c1">// 警告され文字も出力されない</span>
</code></pre></div>
</div>

<p>括弧で囲む必要はありません。付けるとエラーになります。</p>

<div class="code-frame" data-lang="fsharp">
<div class="code-lang"><span class="bold">F#</span></div>
<div class="highlight"><pre class="with-code"><code><span class="n">printfn</span><span class="p">(</span><span class="s2">"%d"</span> <span class="mi">1</span><span class="p">)</span>   <span class="c1">// エラー</span>
<span class="n">printfn</span><span class="p">(</span><span class="s2">"%d"</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>  <span class="c1">// エラー</span>
</code></pre></div>
</div>

<p>引数で計算や関数呼び出しを行う場合、引数としてまとめるため括弧で囲む必要があります。</p>

<div class="code-frame" data-lang="fsharp">
<div class="code-lang"><span class="bold">F#（再掲）</span></div>
<div class="highlight"><pre class="with-code"><code><span class="n">printfn</span> <span class="s2">"%d %f"</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="p">(</span><span class="n">sqrt</span> <span class="mi">2</span><span class="o">.)</span>
</code></pre></div>
</div>

<h2>
<span id="netのメソッド" class="fragment"></span><a href="#net%E3%81%AE%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89"><i class="fa fa-link"></i></a>.NETのメソッド</h2>

<p>タプルと呼ばれる複数の値を組み合わせた型として扱われます。C#と同じスタイルで、引数はコンマで区切って括弧で囲みます。</p>

<div class="code-frame" data-lang="fsharp">
<div class="code-lang"><span class="bold">F#</span></div>
<div class="highlight"><pre class="with-code"><code><span class="nn">Console</span><span class="p">.</span><span class="nc">WriteLine</span><span class="p">(</span><span class="s2">"{0}"</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</code></pre></div>
</div>

<p>括弧を省略すると警告されてうまく動きません。</p>

<div class="code-frame" data-lang="fsharp">
<div class="code-lang"><span class="bold">F#</span></div>
<div class="highlight"><pre class="with-code"><code><span class="nn">Console</span><span class="p">.</span><span class="nc">WriteLine</span> <span class="s2">"{0}"</span><span class="p">,</span> <span class="mi">1</span>  <span class="c1">// 警告され実行時例外</span>
</code></pre></div>
</div>

<p>.NETのメソッドでも1引数の場合は括弧が省略可能です。</p>

<div class="code-frame" data-lang="fsharp">
<div class="code-lang"><span class="bold">F#</span></div>
<div class="highlight"><pre class="with-code"><code><span class="nn">Console</span><span class="p">.</span><span class="nc">WriteLine</span> <span class="s2">"hello"</span>
</code></pre></div>
</div>

<p>以後の例では、F#はネイティブの関数（<code>printfn</code>など）があれば、.NETのメソッド（<code>Console.WriteLine</code>など）よりも優先して使用します。</p>

<h2>
<span id="数値型のキャスト" class="fragment"></span><a href="#%E6%95%B0%E5%80%A4%E5%9E%8B%E3%81%AE%E3%82%AD%E3%83%A3%E3%82%B9%E3%83%88"><i class="fa fa-link"></i></a>数値型のキャスト</h2>

<p>F#では数値型を自動的にキャストしてくれないため<code>sqrt(2)</code>はエラーになります。<br>
C#/JavaScriptから見ると不親切ですが、型推論を優先するための言語設計です。</p>

<p>浮動小数点数型はC#とは型名が異なるため注意が必要です。</p>

<table>
<thead>
<tr>
<th>C#</th>
<th>F#</th>
</tr>
</thead>
<tbody>
<tr>
<td>float</td>
<td>float32</td>
</tr>
<tr>
<td>double</td>
<td>float</td>
</tr>
</tbody>
</table>

<p>倍精度が浮動小数点数の基本で、単精度がオプショナルという解釈だと思われます。</p>

<h2>
<span id="おまけ" class="fragment"></span><a href="#%E3%81%8A%E3%81%BE%E3%81%91"><i class="fa fa-link"></i></a>おまけ</h2>

<p>LISPを知っていれば、最上位の括弧が省略されていると考えればしっくり来るかもしれません。括弧で囲んでも動きます。</p>

<div class="code-frame" data-lang="fsharp">
<div class="code-lang"><span class="bold">F#</span></div>
<div class="highlight"><pre class="with-code"><code><span class="p">(</span><span class="n">printfn</span> <span class="s2">"%f"</span> <span class="p">(</span><span class="n">sqrt</span> <span class="mi">2</span><span class="o">.))</span>
</code></pre></div>
</div>

<h1>
<span id="変数" class="fragment"></span><a href="#%E5%A4%89%E6%95%B0"><i class="fa fa-link"></i></a>変数</h1>

<p>F#の変数はデフォルトで再代入できないという特徴があります。そのことについての説明は後に回して、まずは単純に変数を定義するケースを取り上げます。</p>

<p>変数は<code>let</code>で定義します。型推論されるため、C#の<code>var</code>に相当します。JavaScriptでは<code>var</code>は関数スコープとなるため、ES2015で追加されたブロックスコープの<code>let</code>に相当します。</p>

<blockquote><table>
<tr>
<th>C#</th>
<th>JavaScript</th>
<th>F#</th>
</tr>
<tr>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
var a = 1;
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
let a = 1;
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
let a = 1
</code></pre></div></div></td>
</tr>
</table></blockquote>

<p>型を明示的に指定する方法もあります。JavaScriptはasm.jsで型で示します。</p>

<blockquote><table>
<tr>
<th>C#</th>
<th>JavaScript</th>
<th>F#</th>
</tr>
<tr>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
int a = 1;
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
let a = 1 | 0;
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
let a: int = 1
</code></pre></div></div></td>
</tr>
</table></blockquote>

<p>F#では可能な限り型推論に任せるスタイルを推奨します。</p>

<h2>
<span id="束縛" class="fragment"></span><a href="#%E6%9D%9F%E7%B8%9B"><i class="fa fa-link"></i></a>束縛</h2>

<p>F#はデフォルトでは変数に入れた値は変更できません。変数と値の結び付きが強く、「代入」ではなく「束縛」と表現します。</p>

<blockquote><table>
<tr>
<th>C#</th>
<th>JavaScript</th>
<th>F#</th>
</tr>
<tr>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
const int a = 1;
Console.WriteLine(a);
a = 2;  // エラー
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
const a = 1;
console.log(a);
a = 2;  // エラー
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
let a = 1
printfn "%d" a
a = 2  // 警告（代入ではなく比較）
</code></pre></div></div></td>
</tr>
</table></blockquote>

<p>F#では<code>=</code>と<code>==</code>を書き分けずにどちらも<code>=</code>です。<code>let</code>以外の<code>=</code>は比較として扱われます。</p>

<p>F#で値が変更できるようにするには<code>mutable</code>を付けます。値の変更には<code>&lt;-</code>を使います。</p>

<blockquote><table>
<tr>
<th>C#</th>
<th>JavaScript</th>
<th>F#</th>
</tr>
<tr>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
int a = 1;
Console.WriteLine(a);
a = 2;
Console.WriteLine(a);
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
let a = 1;
console.log(a);
a = 2;
console.log(a);
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
let mutable a = 1
printfn "%d" a
a &lt;- 2
printfn "%d" a
</code></pre></div></div></td>
</tr>
</table></blockquote>

<p><code>mutable</code>を付けずに宣言した変数に再代入する方法はありません。</p>

<h2>
<span id="複数の変数定義" class="fragment"></span><a href="#%E8%A4%87%E6%95%B0%E3%81%AE%E5%A4%89%E6%95%B0%E5%AE%9A%E7%BE%A9"><i class="fa fa-link"></i></a>複数の変数定義</h2>

<p>複数の変数を一度に定義する書式を示します。</p>

<blockquote><table>
<tr>
<th>C#</th>
<th>JavaScript</th>
<th>F#</th>
</tr>
<tr>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
int x = 1, y = 2;
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
let x = 1, y = 2;
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
let x, y = 1, 2
</code></pre></div></div></td>
</tr>
</table></blockquote>

<p>※ C#では<code>var</code>を使うと複数の変数を一度に定義できません。</p>

<p>F#の書式は括弧で囲めば数学に近くなり、座標の表記に似たものだと理解できます。括弧の有無で意味は変わりません。</p>

<div class="code-frame" data-lang="fsharp">
<div class="code-lang"><span class="bold">F#</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">let</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="p">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</code></pre></div>
</div>

<h1>
<span id="f-interactive" class="fragment"></span><a href="#f-interactive"><i class="fa fa-link"></i></a>F# Interactive</h1>

<p>ちょっとした実験は対話的に実行した方が便利です。F# Interactive (fsi) と呼ばれるREPLがあります。</p>

<p>Windows では <code>fsi.exe</code> ですが、Mono 環境では <code>fsharpi</code> コマンドで呼び出します。</p>

<p>fsiではセミコロンを2つ付けると、評価されて値が表示されます。</p>

<div class="code-frame" data-lang="fsharp">
<div class="code-lang"><span class="bold">fsi</span></div>
<div class="highlight"><pre class="with-code"><code><span class="p">&gt;</span> <span class="k">let</span> <span class="n">a</span><span class="p">=</span><span class="mi">1</span><span class="p">;;</span>
<span class="k">val</span> <span class="n">a</span> <span class="p">:</span> <span class="kt">int</span> <span class="p">=</span> <span class="mi">1</span>
</code></pre></div>
</div>

<p>※ <code>val</code>は値（value）の意味です。</p>

<p>変数の値を見るには変数名だけでOKです。</p>

<div class="code-frame" data-lang="fsharp">
<div class="code-lang"><span class="bold">fsi</span></div>
<div class="highlight"><pre class="with-code"><code><span class="p">&gt;</span> <span class="n">a</span><span class="p">;;</span>
<span class="k">val</span> <span class="n">it</span> <span class="p">:</span> <span class="kt">int</span> <span class="p">=</span> <span class="mi">1</span>
</code></pre></div>
</div>

<p>itは直前に評価された値が束縛されている変数で「それ（it）」の意味です。</p>

<div class="code-frame" data-lang="fsharp">
<div class="code-lang"><span class="bold">fsi</span></div>
<div class="highlight"><pre class="with-code"><code><span class="p">&gt;</span> <span class="n">it</span><span class="p">;;</span>
<span class="k">val</span> <span class="n">it</span> <span class="p">:</span> <span class="kt">int</span> <span class="p">=</span> <span class="mi">1</span>
</code></pre></div>
</div>

<p><code>;;</code>を付け忘れると複数行入力として扱われます。次の行で付ければ評価されます。</p>

<div class="code-frame" data-lang="fsharp">
<div class="code-lang"><span class="bold">fsi</span></div>
<div class="highlight"><pre class="with-code"><code><span class="p">&gt;</span> <span class="n">a</span>
<span class="p">-</span> <span class="p">;;</span>
</code></pre></div>
</div>

<p>電卓としても使えます。</p>

<div class="code-frame" data-lang="fsharp">
<div class="code-lang"><span class="bold">fsi</span></div>
<div class="highlight"><pre class="with-code"><code><span class="p">&gt;</span> <span class="mi">1</span><span class="o">+</span><span class="mi">1</span><span class="p">;;</span>
<span class="k">val</span> <span class="n">it</span> <span class="p">:</span> <span class="kt">int</span> <span class="p">=</span> <span class="mi">2</span>
</code></pre></div>
</div>

<p><code>let</code>なしの<code>=</code>が比較になっているのを確認します。</p>

<div class="code-frame" data-lang="fsharp">
<div class="code-lang"><span class="bold">fsi</span></div>
<div class="highlight"><pre class="with-code"><code><span class="p">&gt;</span> <span class="n">a</span><span class="p">=</span><span class="mi">1</span><span class="p">;;</span>
<span class="k">val</span> <span class="n">it</span> <span class="p">:</span> <span class="kt">bool</span> <span class="p">=</span> <span class="bp">true</span>
<span class="p">&gt;</span> <span class="n">a</span><span class="p">=</span><span class="mi">2</span><span class="p">;;</span>
<span class="k">val</span> <span class="n">it</span> <span class="p">:</span> <span class="kt">bool</span> <span class="p">=</span> <span class="bp">false</span>
</code></pre></div>
</div>

<p>等しくないのを表すのは<code>&lt;&gt;</code>です。</p>

<div class="code-frame" data-lang="fsharp">
<div class="code-lang"><span class="bold">fsi</span></div>
<div class="highlight"><pre class="with-code"><code><span class="p">&gt;</span> <span class="n">a</span><span class="p">&lt;&gt;</span><span class="mi">1</span><span class="p">;;</span>
<span class="k">val</span> <span class="n">it</span> <span class="p">:</span> <span class="kt">bool</span> <span class="p">=</span> <span class="bp">false</span>
</code></pre></div>
</div>

<p>終了は<code>#q;;</code>と入力します。</p>

<div class="code-frame" data-lang="fsharp">
<div class="code-lang"><span class="bold">fsi</span></div>
<div class="highlight"><pre class="with-code"><code><span class="p">&gt;</span> <span class="p">#</span><span class="n">q</span><span class="p">;;</span>
</code></pre></div>
</div>

<h1>
<span id="条件式" class="fragment"></span><a href="#%E6%9D%A1%E4%BB%B6%E5%BC%8F"><i class="fa fa-link"></i></a>条件式</h1>

<p><code>if</code>は構文が少し違うだけで基本的に同じです。</p>

<blockquote><table>
<tr>
<th>C#</th>
<th>JavaScript</th>
<th>F#</th>
</tr>
<tr>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
if (a == 1)
  Console.WriteLine("1");
else
  Console.WriteLine("?");
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
if (a == 1)
  console.log("1");
else
  console.log("?");
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
if a = 1 then
  printfn "1"
else
  printfn "?"
</code></pre></div></div></td>
</tr>
</table></blockquote>

<h2>
<span id="ブロック" class="fragment"></span><a href="#%E3%83%96%E3%83%AD%E3%83%83%E3%82%AF"><i class="fa fa-link"></i></a>ブロック</h2>

<p>F#はインデントでブロックが構成されるので、C#のように複文での中括弧に相当するものはありません。</p>

<blockquote><table>
<tr>
<th>C#</th>
<th>JavaScript</th>
<th>F#</th>
</tr>
<tr>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
if (a == 1)
{
  Console.WriteLine("1");
  Console.WriteLine("!");
}
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
if (a == 1) {
  console.log("1");
  console.log("!");
}
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
if a = 1 then
  printfn "1"
  printfn "!"
</code></pre></div></div></td>
</tr>
</table></blockquote>

<h2>
<span id="三項演算子" class="fragment"></span><a href="#%E4%B8%89%E9%A0%85%E6%BC%94%E7%AE%97%E5%AD%90"><i class="fa fa-link"></i></a>三項演算子</h2>

<p>F#の<code>if</code>はそのまま三項演算子としても使えます。（<code>if</code>は文ではなく式のため）</p>

<blockquote><table>
<tr>
<th>C#</th>
<th>JavaScript</th>
<th>F#</th>
</tr>
<tr>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
var b = a == 1 ? 2 : 0;
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
let b = a == 1 ? 2 : 0;
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
let b = if a = 1 then 2 else 0
</code></pre></div></div></td>
</tr>
</table></blockquote>

<h2>
<span id="複合技" class="fragment"></span><a href="#%E8%A4%87%E5%90%88%E6%8A%80"><i class="fa fa-link"></i></a>複合技</h2>

<p>F#では最後に評価された値が返されるため、処理と代入を混ぜることができます。これは慣れると便利な技です。</p>

<blockquote><table>
<tr>
<th>C#</th>
<th>JavaScript</th>
<th>F#</th>
</tr>
<tr>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
int b;
if (a == 1)
{
  Console.WriteLine("1");
  b = 2;
}
else
{
  Console.WriteLine("?");
  b = 0;
}
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
let b;
if (a == 1) {
  console.log("1");
  b = 2;
} else {
  console.log("?");
  b = 0;
}
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
let b =
  if a = 1 then
    printfn "1"
    2
  else
    printfn "?"
    0
</code></pre></div></div></td>
</tr>
</table></blockquote>

<h2>
<span id="タプル" class="fragment"></span><a href="#%E3%82%BF%E3%83%97%E3%83%AB"><i class="fa fa-link"></i></a>タプル</h2>

<p>条件分岐の結果、複数の値を代入するような処理を一気に書けます。うまくハマるととても簡潔になります。</p>

<blockquote><table>
<tr>
<th>C#</th>
<th>JavaScript</th>
<th>F#</th>
</tr>
<tr>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
int x, y;
if (a == 1)
{
  x = 1;
  y = 2;
}
else
{
  x = 3;
  y = 4;
}
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
let x, y;
if (a == 1) {
  x = 1;
  y = 2;
} else {
  x = 3;
  y = 4;
}
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
let x, y = if a = 1 then 1, 2 else 3, 4
</code></pre></div></div></td>
</tr>
</table></blockquote>

<p>この構文が分かりにくければ、括弧を付けて考えると良いかもしれません。</p>

<div class="code-frame" data-lang="fsharp">
<div class="code-lang"><span class="bold">F#</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">let</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="p">=</span> <span class="k">if</span> <span class="n">a</span> <span class="p">=</span> <span class="mi">1</span> <span class="k">then</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="k">else</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
</code></pre></div>
</div>

<h1>
<span id="関数" class="fragment"></span><a href="#%E9%96%A2%E6%95%B0"><i class="fa fa-link"></i></a>関数</h1>

<p>説明の都合上、F#は冗長な構文から先に紹介します。</p>

<blockquote><table>
<tr>
<th>C#</th>
<th>JavaScript</th>
<th>F#</th>
</tr>
<tr>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
class Test
{
  static int inc(int x)
  {
    return x + 1;
  }
  static int add(int x, int y)
  {
    return x + y;
  }
  static void Main()
  {
    Console.WriteLine(inc(1));
    Console.WriteLine(add(1, 2));
  }
}
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
function inc(x) {
  return x + 1;
}
function add(x, y) {
  return x + y;
}
console.log(inc(1));
console.log(add(1, 2));
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
let inc = fun x -&gt; x + 1
let add = fun x y -&gt; x + y
printfn "%d" (inc 1)
printfn "%d" (add 1 2)
</code></pre></div></div></td>
</tr>
</table></blockquote>

<p>F#は変数の束縛と同じ構文で、関数が束縛されています。</p>

<div class="code-frame" data-lang="fsharp">
<div class="code-lang"><span class="bold">F#（対比）</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">let</span> <span class="n">inc</span> <span class="p">=</span> <span class="mi">0</span>
<span class="k">let</span> <span class="n">inc</span> <span class="p">=</span> <span class="k">fun</span> <span class="n">x</span> <span class="p">-&gt;</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span>
</code></pre></div>
</div>

<p>右辺の <code>fun x -&gt; x + 1</code> は左辺に束縛されて名前が付くことから、単体では名前が無く、無名関数などと呼ばれます。</p>

<h2>
<span id="ラムダ式" class="fragment"></span><a href="#%E3%83%A9%E3%83%A0%E3%83%80%E5%BC%8F"><i class="fa fa-link"></i></a>ラムダ式</h2>

<p>F#の書き方は、C#のラムダ式やJavaScriptのアロー関数式に相当します。</p>

<blockquote><table>
<tr>
<th>C#</th>
<th>JavaScript</th>
<th>F#</th>
</tr>
<tr>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
Func&lt;int, int&gt; inc = x =&gt; x + 1;
Func&lt;int, int, int&gt; add = (x, y) =&gt; x + y;
Console.WriteLine(inc(1));
Console.WriteLine(add(1, 2));
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
let inc = x =&gt; x + 1;
let add = (x, y) =&gt; x + y;
console.log(inc(1));
console.log(add(1, 2));
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
let inc = fun x -&gt; x + 1
let add = fun x y -&gt; x + y
printfn "%d" (inc 1)
printfn "%d" (add 1 2)
</code></pre></div></div></td>
</tr>
</table></blockquote>

<p>C#の<code>Func</code>は冗長ですが、型推論が効かないため省略できません。</p>

<div class="code-frame" data-lang="csharp">
<div class="code-lang"><span class="bold">C#</span></div>
<div class="highlight"><pre class="with-code"><code><span class="kt">var</span> <span class="n">inc</span> <span class="p">=</span> <span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="n">x</span> <span class="p">+</span> <span class="m">1</span><span class="p">;</span>  <span class="c1">// エラー</span>
</code></pre></div>
</div>

<p>ちなみにVB.NETでは匿名デリゲート型に型推論されます。</p>

<div class="code-frame" data-lang="vbnet">
<div class="code-lang"><span class="bold">VB.NET</span></div>
<div class="highlight"><pre class="with-code"><code>Dim inc = Function(x%) x + 1
</code></pre></div>
</div>

<p>※ C#では引数や戻り値の型が同じデリゲート間でもキャストできませんが、VB.NETではできることから、匿名デリゲート型に割り当てても問題がないという判断だと思われます。</p>

<h2>
<span id="糖衣構文" class="fragment"></span><a href="#%E7%B3%96%E8%A1%A3%E6%A7%8B%E6%96%87"><i class="fa fa-link"></i></a>糖衣構文</h2>

<p><code>fun</code>を省略して引数を左辺に記述できます。通常はこちらを使います。</p>

<blockquote><table>
<tr>
<th>F# (funあり)</th>
<th>F# (funなし)</th>
</tr>
<tr>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
let inc = fun x -&gt; x + 1
let add = fun x y -&gt; x + y
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
let inc x = x + 1
let add x y = x + y
</code></pre></div></div></td>
</tr>
</table></blockquote>

<p><code>fun</code>なしの方が便利です。最初に見せなかったのは、関数が値と同じように束縛されていることを示したかったためです。</p>

<h2>
<span id="fsi" class="fragment"></span><a href="#fsi"><i class="fa fa-link"></i></a>fsi</h2>

<p>F# Interactiveで色々な書き方を動作確認します。この手の簡単な確認にREPLは便利です。</p>

<blockquote><table>
<tr>
<th>F# Interactive</th>
<th>JavaScript (Node.js)</th>
</tr>
<tr>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
let inc = fun x -&gt; x + 1;;
inc 1;;
(inc 1);;
inc(1);;
(fun x -&gt; x + 1) 1;;
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
inc = x =&gt; x + 1
inc(1)
(x =&gt; x + 1)(1)
</code></pre></div></div></td>
</tr>
</table></blockquote>

<p>※ 最後の例は関数を束縛せずにインラインで使っています。<code>fun</code>を省略した構文では表現できません。</p>

<h2>
<span id="unit" class="fragment"></span><a href="#unit"><i class="fa fa-link"></i></a>unit</h2>

<p>C#での<code>void</code>に相当するのが<code>unit</code>です。値としては<code>()</code>と表現します。</p>

<blockquote><table>
<tr>
<th>C#</th>
<th>JavaScript</th>
<th>F#</th>
</tr>
<tr>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
void test1() {}
int test2() { return 1; }
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
function test1() {}
function test2() { return 1; }
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
let test1() = ()
let test2() = 1
</code></pre></div></div></td>
</tr>
</table></blockquote>

<p>ラムダ式などで書いてみます。</p>

<blockquote><table>
<tr>
<th>C#</th>
<th>JavaScript</th>
<th>F#</th>
</tr>
<tr>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
Action test1 = () =&gt; {};
Func&lt;int&gt; test2 = () =&gt; 1;
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
let test1 = () =&gt; {};
let test2 = () =&gt; 1;
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
let test1 = fun () -&gt; ()
let test2 = fun () -&gt; 1
</code></pre></div></div></td>
</tr>
</table></blockquote>

<p>変数（<code>test3</code>）と関数（<code>test4</code>）を比べてみます。</p>

<blockquote><table>
<tr>
<th>C#</th>
<th>JavaScript</th>
<th>F#</th>
</tr>
<tr>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
int test3 = 0;
Func&lt;int&gt; test4 = () =&gt; 0;
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
let test3 = 0;
let test4 = () =&gt; 0;
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
let test3 = 0
let test4() = 0
</code></pre></div></div></td>
</tr>
</table></blockquote>

<h2>
<span id="ignore" class="fragment"></span><a href="#ignore"><i class="fa fa-link"></i></a>ignore</h2>

<p>F#では関数の戻り値を捨てると警告されます。</p>

<blockquote><table>
<tr>
<th>C#</th>
<th>JavaScript</th>
<th>F#</th>
</tr>
<tr>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
Func&lt;int&gt; a = () =&gt; 1;
a();  // 警告なし
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
let a = () =&gt; 1;
a();  // 警告なし
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
let a() = 1
a()  // 警告
</code></pre></div></div></td>
</tr>
</table></blockquote>

<p>警告を抑えるため、<code>ignore</code>関数で明示的に無視します。C言語で<code>void</code>にキャストする流儀に似ています。</p>

<blockquote><table>
<tr>
<th>C言語</th>
<th>F#</th>
</tr>
<tr>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
int a() { return 1; }
void test() { (void)a(); }
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
let a() = 1
ignore(a())
</code></pre></div></div></td>
</tr>
</table></blockquote>

<p>※ gccには戻り値を無視したときに警告する <code>__attribute__((warn_unused_result))</code> があります。</p>

<h2>
<span id="パイプライン演算子" class="fragment"></span><a href="#%E3%83%91%E3%82%A4%E3%83%97%E3%83%A9%E3%82%A4%E3%83%B3%E6%BC%94%E7%AE%97%E5%AD%90"><i class="fa fa-link"></i></a>パイプライン演算子</h2>

<p>引数と関数を分離するパイプライン演算子というものがあります。ネストした引数の括弧を外してフラットに記述するのに使います。戻り値の警告を受けて<code>ignore</code>を追加するときに便利です。</p>

<blockquote><table>
<tr>
<th>F#</th>
<th>F# (右向き)</th>
<th>F# (左向き)</th>
</tr>
<tr>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
ignore(a())
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
a() |&gt; ignore
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
ignore &lt;| a()
</code></pre></div></div></td>
</tr>
</table></blockquote>

<p>右向きのパイプライン演算子は、シェルのパイプのような感覚で関数の多重呼び出しに使えます。左向きはHaskellの<code>$</code>に似ていますが、連続して使うと<code>$</code>とは意味が変わるため（後述）、連続させるときは<code>&lt;&lt;</code>演算子による関数合成と併用します。</p>

<blockquote><table>
<tr>
<th>F#</th>
<th>F# (右向き)</th>
<th>F# (左向き)</th>
</tr>
<tr>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
foo(bar(baz()))
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
() |&gt; baz |&gt; bar |&gt; foo
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
foo &lt;&lt; bar &lt;&lt; baz &lt;| ()
</code></pre></div></div></td>
</tr>
</table></blockquote>

<p><code>&lt;|</code>を連続して使用すると、複数の引数を個別に適用する意味となります。</p>

<div class="code-frame" data-lang="fsharp">
<div class="code-lang"><span class="bold">F#</span></div>
<div class="highlight"><pre class="with-code"><code><span class="n">printfn</span> <span class="s2">"%d,%s"</span> <span class="p">&lt;|</span> <span class="mi">5</span> <span class="p">&lt;|</span> <span class="s2">"abc"</span>
</code></pre></div>
</div>

<h2>
<span id="再帰関数" class="fragment"></span><a href="#%E5%86%8D%E5%B8%B0%E9%96%A2%E6%95%B0"><i class="fa fa-link"></i></a>再帰関数</h2>

<p>C#/JavaScriptでラムダ式を使わずに再帰で階乗を求めます。</p>

<blockquote><table>
<tr>
<th>C#</th>
<th>JavaScript</th>
</tr>
<tr>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
class Test
{
  static int frac(int x)
  {
    return x &lt; 1 ? 1 : x * frac(x - 1);
  }
  static void Main()
  {
    Console.WriteLine(frac(5));
  }
}
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
function frac(x) {
  return x &lt; 1 ? 1 : x * frac(x - 1);
}
console.log(frac(5));
</code></pre></div></div></td>
</tr>
</table></blockquote>

<p>これをラムダ式で書きます。C#では自分自身が参照できなくなるため、一度<code>null</code>で初期化するという小手先の技が必要となります。JavaScriptは参照が動的に処理されるため問題ありません。F#では自分自身を参照するために専用の<code>rec</code>キーワードが用意されています。</p>

<blockquote><table>
<tr>
<th>C#</th>
<th>JavaScript</th>
<th>F#</th>
</tr>
<tr>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
Func&lt;int, int&gt; frac = null;
frac = x =&gt;
  x &lt; 1 ? 1 : x * frac(x - 1);
Console.WriteLine(frac(5));
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
let frac = x =&gt;
  x &lt; 1 ? 1 : x * frac(x - 1);
console.log(frac(5));
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
let rec frac x =
  if x &lt; 1 then 1 else x * frac(x - 1)
printfn "%d" (frac 5)
</code></pre></div></div></td>
</tr>
</table></blockquote>

<p>※ デフォルトで再帰可能になっていないのは、同名の変数で覆い隠すシャドウイングを考慮した言語設計のようです。F#の元になったOCamlについての記事を紹介します。</p>

<ul>
<li>
<a href="https://twitter.com/camlspotter" rel="nofollow noopener" target="_blank">@camlspotter</a>: <a href="http://d.hatena.ne.jp/camlspotter/20110509/1304933919" rel="nofollow noopener" target="_blank">OCaml の let と let rec はなぜ別扱いになっているのか、決定版、もしくは OCaml 暦十何年だったか忘れたけど仕事で Haskell を一年使ってみた - Oh, you `re no (fun _ → more)</a> 2011.05.09</li>
</ul>

<h2>
<span id="前方参照" class="fragment"></span><a href="#%E5%89%8D%E6%96%B9%E5%8F%82%E7%85%A7"><i class="fa fa-link"></i></a>前方参照</h2>

<p>一般論として用語を解説します。</p>

<p>パーサは上から下にコードを読み進めます。進行方向に沿って下が「前方」と表現されます。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>     後方
1 aaaa↓
2 bbbb↓
3 cccc↓
     前方
</code></pre></div></div>

<p>前方で定義されている関数にアクセス（参照）することを「前方参照」と呼びます。下の例では<code>test()</code>が前方参照されています。</p>

<blockquote><table>
<tr>
<th>C#</th>
<th>JavaScript</th>
</tr>
<tr>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
class Test
{
  static void Main()
  {
    test();  // 前方参照
  }
  static void test()
  {
    Console.WriteLine("abc");
  }
}
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
test();  // 前方参照

function test() {
  console.log("abc");
}
</code></pre></div></div></td>
</tr>
</table></blockquote>

<p>※ 直感的には「上が前」のように感じられるので注意が必要です。C言語の前方宣言は呼び出し元から見て「前方にある宣言」ではなく、「前方参照を可能にするための宣言」という意味だと解釈できます。</p>

<p>F#は前方参照ができません。他の言語でもラムダ式だけで記述すると似たような状況になりますが、それと同じだと考えてください。</p>

<blockquote><table>
<tr>
<th>C#</th>
<th>JavaScript</th>
<th>F#</th>
</tr>
<tr>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
test();  // エラー
Action test = () =&gt;
  Console.WriteLine("abc");
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
test();  // エラー
let test = () =&gt;
  console.log("abc");
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
test()  // エラー
let test() = printfn "abc"
</code></pre></div></div></td>
</tr>
</table></blockquote>

<p>F#に前方宣言はありません。必ず後方（上）で定義する必要があります。</p>

<blockquote><table>
<tr>
<th>C#</th>
<th>JavaScript</th>
<th>F#</th>
</tr>
<tr>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
Action test = () =&gt;
  Console.WriteLine("abc");
test();  // OK
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
let test = () =&gt;
  console.log("abc");
test()  // OK
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
let test() = printfn "abc"
test()  // OK
</code></pre></div></div></td>
</tr>
</table></blockquote>

<p>これは強い制限のようにも感じられますが、コードを読んだり部分的に引用したりするときは、そこより上だけを見ておけば良いという利点があります。</p>

<h2>
<span id="相互再帰" class="fragment"></span><a href="#%E7%9B%B8%E4%BA%92%E5%86%8D%E5%B8%B0"><i class="fa fa-link"></i></a>相互再帰</h2>

<p>前方宣言はありませんが、相互に再帰する場合は特別な構文があります。</p>

<p>F#では<code>rec</code>と<code>and</code>を使います。C#ではラムダ式を使わなければ特に問題はなく、JavaScriptでは動的に参照されるためアロー関数式でも特に意識する必要はありません。</p>

<blockquote><table>
<tr>
<th>C#</th>
<th>JavaScript</th>
<th>F#</th>
</tr>
<tr>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
void test1() { test2(); }
void test2() { test1(); }
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
let test1 = () =&gt; test2();
let test2 = () =&gt; test1();
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
let rec test1() = test2()
and test2() = test1()
</code></pre></div></div></td>
</tr>
</table></blockquote>

<p>どうしても相互再帰が避けられないケースはありますが、その場合はクラスタとしてひとまとめに定義することが必要です。離して定義することはできません。</p>

<h2>
<span id="関数内関数" class="fragment"></span><a href="#%E9%96%A2%E6%95%B0%E5%86%85%E9%96%A2%E6%95%B0"><i class="fa fa-link"></i></a>関数内関数</h2>

<p>C#ではクラス直下のメソッドと、メソッド内のラムダ式の書式が大きく異なります。</p>

<p>※ C# 7ではローカル関数という機能が追加され、この制限が緩和されます。</p>

<p>F#やJavaScriptでは関数の中でも関数が定義できます。</p>

<blockquote><table>
<tr>
<th>C#</th>
<th>JavaScript</th>
<th>F#</th>
</tr>
<tr>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
class Test
{
  static int inc1(int x)
  {
    return x + 1;
  }
  static void test()
  {
    Func&lt;int, int&gt; inc2 = x =&gt; x + 1;
    Console.WriteLine(inc1(1));
    Console.WriteLine(inc2(1));
  }
  static void Main()
  {
    test();
  }
}
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
function inc1(x) {
  return x + 1;
}
function test() {
  function inc2(x) {
    return x + 1;
  }
  console.log(inc1(1));
  console.log(inc2(1));
}
test();
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
let inc1 x = x + 1
let test() =
  let inc2 x = x + 1
  printfn "%d" (inc1 1)
  printfn "%d" (inc2 1)
test()
</code></pre></div></div></td>
</tr>
</table></blockquote>

<h1>
<span id="カリー化" class="fragment"></span><a href="#%E3%82%AB%E3%83%AA%E3%83%BC%E5%8C%96"><i class="fa fa-link"></i></a>カリー化</h1>

<p>関数型で必ず話題になるカリー化を説明します。</p>

<p>※ とりあえずF#を使うだけなら必須というわけではありません。分かりにくければ飛ばしても構いません。</p>

<p>必要に応じて次の記事を参照すると良いでしょう。</p>

<ul>
<li>
<a href="http://qiita.com/7shi/items/a0143daac77a205e7962" id="reference-45504b7e82a512f098d8">カリー化と部分適用（JavaScriptとHaskell）</a> 2014.10.15</li>
</ul>

<h2>
<span id="糖衣構文-1" class="fragment"></span><a href="#%E7%B3%96%E8%A1%A3%E6%A7%8B%E6%96%87-1"><i class="fa fa-link"></i></a>糖衣構文</h2>

<p>以下の3種類はすべて同じ意味です。</p>

<ol>
<li><code>let add = fun x -&gt; fun y -&gt; x + y</code></li>
<li><code>let add = fun x y -&gt; x + y</code></li>
<li><code>let add x y = x + y</code></li>
</ol>

<p>2と3は1の糖衣構文です。1をC#/JavaScriptに翻訳して呼び出してみます。</p>

<blockquote><table>
<tr>
<th>C#</th>
<th>JavaScript</th>
<th>F#</th>
</tr>
<tr>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
Func&lt;int, Func&lt;int, int&gt;&gt; add =
    x =&gt; y =&gt; x + y;
Console.WriteLine(add(1)(2));
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
let add = x =&gt; y =&gt; x + y;
console.log(add(1)(2));
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
let add = fun x -&gt; fun y -&gt; x + y
printfn "%d" (add 1 2)
</code></pre></div></div></td>
</tr>
</table></blockquote>

<p>ラムダ式がネストしています。初見では分かりにくいですが、括弧を付けてみます。</p>

<blockquote><table>
<tr>
<th>C#</th>
<th>JavaScript</th>
<th>F#</th>
</tr>
<tr>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
Func&lt;int, Func&lt;int, int&gt;&gt; add =
    x =&gt; (y =&gt; x + y);
Console.WriteLine(add(1)(2));
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
let add = x =&gt; (y =&gt; x + y);
console.log(add(1)(2));
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
let add = fun x -&gt; (fun y -&gt; x + y)
printfn "%d" (add 1 2)
</code></pre></div></div></td>
</tr>
</table></blockquote>

<p>JavaScriptでは<code>function</code>で記述した方が分かりやすいかもしれません。</p>

<div class="code-frame" data-lang="js">
<div class="code-lang"><span class="bold">JavaScript</span></div>
<div class="highlight"><pre class="with-code"><code><span class="kd">let</span> <span class="nx">add</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">x</span> <span class="o">+</span> <span class="nx">y</span><span class="p">;</span>
  <span class="p">};</span>
<span class="p">};</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">add</span><span class="p">(</span><span class="mi">1</span><span class="p">)(</span><span class="mi">2</span><span class="p">));</span>
</code></pre></div>
</div>

<h2>
<span id="部分適用" class="fragment"></span><a href="#%E9%83%A8%E5%88%86%E9%81%A9%E7%94%A8"><i class="fa fa-link"></i></a>部分適用</h2>

<p>C#/JavaScriptでは引数を1つずつ渡していますが（<code>add(1)(2)</code>）、引数を片方だけ渡すこともできます。こうして得られた中間的な関数に残りの引数を渡すと最終的な結果が得られます。</p>

<blockquote><table>
<tr>
<th>C#</th>
<th>JavaScript</th>
<th>F#</th>
</tr>
<tr>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
var inc = add(1);
Console.WriteLine(inc(2));
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
let inc = add(1);
console.log(inc(2));
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
let inc = add 1
printfn "%d" (inc 2)
</code></pre></div></div></td>
</tr>
</table></blockquote>

<p>このように引数を途中まで渡して関数を得ることを部分適用と呼びます。部分適用できるように関数の中に関数を入れる形式をカリー化と呼びます。</p>

<p>※ 部分適用が誤ってカリー化と呼ばれることがあるので注意が必要です。</p>

<p>F#では冒頭で挙げた1～3のすべてがカリー化された関数で部分適用できます。カリー化されない関数を定義するには、引数をコンマで区切りタプルとします。引数をタプルで取る関数でもラムダ式でラップすれば擬似的に部分適用は可能です。</p>

<blockquote><table>
<tr>
<th>F# (カリー化)</th>
<th>F# (非カリー化)</th>
<th>C# (非カリー化)</th>
</tr>
<tr>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
let add x y = x + y
let inc = add 1
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
let add(x, y) = x + y
let inc = fun y -&gt; add(1, y)
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
Func&lt;int, int, int&gt; add = (x, y) =&gt; x + y;
Func&lt;int, int&gt; inc = y =&gt; add(1, y);
</code></pre></div></div></td>
</tr>
</table></blockquote>

<p>最初の方で.NETのメソッドの呼び方がネイティブ関数とは異なると述べましたが、引数がタプルとして扱われカリー化されていないためです。</p>

<h1>
<span id="配列" class="fragment"></span><a href="#%E9%85%8D%E5%88%97"><i class="fa fa-link"></i></a>配列</h1>

<p>C#ではサイズを指定して配列を作るとゼロで初期化されます。JavaScriptではTypedArrayで同様の処理が可能です。F#では専用の関数を使用します。</p>

<blockquote><table>
<tr>
<th>C#</th>
<th>JavaScript</th>
<th>F#</th>
</tr>
<tr>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
var a = new int[5];
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
let a = new Int32Array(5);
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
let a = Array.zeroCreate&lt;int&gt; 5
</code></pre></div></div></td>
</tr>
</table></blockquote>

<p>初期値を指定して配列を作成する方法を示します。F#では要素の区切りはセミコロンなのに注意が必要です（コンマ区切りはタプルを意味するため）。また、F#では配列アクセスで添字の前にドットが必要です。</p>

<blockquote><table>
<tr>
<th>C#</th>
<th>JavaScript</th>
<th>F#</th>
</tr>
<tr>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
var a = new[] {1, 2, 3, 4};
Console.WriteLine(a[2]);
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
var a = [1, 2, 3, 4];
console.log(a[2]);
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
let a = [|1; 2; 3; 4|]
printfn "%d" a.[2]
</code></pre></div></div></td>
</tr>
</table></blockquote>

<p>F#では配列をスライスできます。末尾の指定方法がJavaScriptとF#では異なるのに注意します。C#では言語サポートがないため地道にコピーします。</p>

<blockquote><table>
<tr>
<th>C#</th>
<th>JavaScript</th>
<th>F#</th>
</tr>
<tr>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
var b = new int[2];
Array.Copy(a, 2, b, 0, 2);
</code></pre></div></div></td>
<td>
<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
let b = a.slice(2, 4);
</code></pre></div></div>※ 4は末尾の添字+1</td>
<td>
<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
let b = a.[2..3]
</code></pre></div></div>※ 3は末尾の添字</td>
</tr>
</table></blockquote>

<p>JavaScriptとF#は文字列の切り出にもスライスが使用可能です。</p>

<blockquote><table>
<tr>
<th>C#</th>
<th>JavaScript</th>
<th>F#</th>
</tr>
<tr>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
"abcde".Substring(2, 2);
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
"abcde".slice(2, 4);
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
"abcde".[2..3]
</code></pre></div></div></td>
</tr>
</table></blockquote>

<h1>
<span id="ループ" class="fragment"></span><a href="#%E3%83%AB%E3%83%BC%E3%83%97"><i class="fa fa-link"></i></a>ループ</h1>

<p>F#には<code>while</code>と<code>for</code>はありますが、<code>continue</code>と<code>break</code>はありません。再帰で書き直す方法を覚えておくと潰しが効きます。考え方としてはループ変数を引数に見立てて、条件を満たせば再帰的に自分を呼び出します。</p>

<blockquote><table>
<tr>
<th>C#</th>
<th>JavaScript</th>
<th>F#</th>
</tr>
<tr>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
var r = new Random();
for (int i = 0; i &lt; 10; i++)
{
  var v = r.Next(10);
  Console.WriteLine(v);
  if (v &gt; 5) break;
}
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
for (let i = 0; i &lt; 10; i++) {
  let v = (Math.random() * 10) | 0;
  console.log(v);
  if (v &gt; 5) break;
}
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
let r = new Random()
let rec loop i =
  if i &lt; 10 then
    let v = r.Next(10)
    printfn "%d" v
    if not(v &gt; 5) then
      loop (i + 1)
loop 0
</code></pre></div></div></td>
</tr>
</table></blockquote>

<p>※ 再帰呼び出しは<code>continue</code>に相当して、明示的に<code>continue</code>を書かないとループから抜けてしまうと解釈できます。ただし<code>continue</code>と違って後続の処理が打ち切られるわけではないため、再帰呼び出しの後に処理が来ないように注意する必要があります。後に処理が来ない再帰を<strong>末尾再帰</strong>と呼びます。</p>

<p>再帰を使わずに<code>while</code>で無理やり実装することもできます。うまく書けないときはこの手で逃げることがあるかもしれません。</p>

<blockquote><table>
<tr>
<th>C#</th>
<th>JavaScript</th>
<th>F#</th>
</tr>
<tr>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
var r = new Random();
int i = 0, v = 0;
while (i &lt; 10 &amp;&amp; !(v &gt; 5))
{
  v = r.Next(10);
  Console.WriteLine(v);
  i++;
}
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
let i = 0, v = 0;
while (i &lt; 10 &amp;&amp; !(v &gt; 5)) {
  v = (Math.random() * 10) | 0;
  console.log(v);
  i++;
}
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
let r = new Random()
let mutable i, v = 0, 0
while i &lt; 10 &amp;&amp; not(v &gt; 5) do
  v &lt;- r.Next(10)
  printfn "%d" v
  i &lt;- i + 1
</code></pre></div></div></td>
</tr>
</table></blockquote>

<p>※ この記事では取り上げませんが、F#にはループの代用となる様々な関数が用意されており、本来そちらを使うことが推奨されます。しかしそういったものがうまく適用できないときは、最終手段としてここで説明したような方法でどうにかすることもあるでしょう。</p>

<h2>
<span id="複雑な例" class="fragment"></span><a href="#%E8%A4%87%E9%9B%91%E3%81%AA%E4%BE%8B"><i class="fa fa-link"></i></a>複雑な例</h2>

<p>標準入力から文字列を読み取り、先頭から連続する数字だけを抜き出して表示する例を示します。C#では代入した値をそのまま評価できますが、F#ではできないため工夫が必要です。JavaScriptはNode.jsで示します。</p>

<div class="code-frame" data-lang="csharp">
<div class="code-lang"><span class="bold">C#</span></div>
<div class="highlight"><pre class="with-code"><code><span class="kt">string</span> <span class="n">line</span><span class="p">;</span>
<span class="k">while</span> <span class="p">((</span><span class="n">line</span> <span class="p">=</span> <span class="n">Console</span><span class="p">.</span><span class="nf">ReadLine</span><span class="p">())</span> <span class="p">!=</span> <span class="k">null</span><span class="p">)</span>
<span class="p">{</span>
  <span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
  <span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">line</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
    <span class="k">if</span> <span class="p">(!</span><span class="n">Char</span><span class="p">.</span><span class="nf">IsNumber</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span> <span class="k">break</span><span class="p">;</span>
  <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">line</span><span class="p">.</span><span class="nf">Substring</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="n">i</span><span class="p">));</span>
<span class="p">}</span>
</code></pre></div>
</div>

<div class="code-frame" data-lang="js">
<div class="code-lang"><span class="bold">JavaScript(Node.js)</span></div>
<div class="highlight"><pre class="with-code"><code><span class="kd">let</span> <span class="nx">isDigit</span> <span class="o">=</span> <span class="nx">ch</span> <span class="o">=&gt;</span> <span class="dl">"</span><span class="s2">0</span><span class="dl">"</span> <span class="o">&lt;=</span> <span class="nx">ch</span> <span class="o">&amp;&amp;</span> <span class="nx">ch</span> <span class="o">&lt;=</span> <span class="dl">"</span><span class="s2">9</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">loop</span> <span class="o">=</span> <span class="kd">function</span><span class="o">*</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">line</span><span class="p">;</span>
  <span class="k">while</span> <span class="p">((</span><span class="nx">line</span> <span class="o">=</span> <span class="k">yield</span><span class="p">)</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">i</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">line</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">isDigit</span><span class="p">(</span><span class="nx">line</span><span class="p">[</span><span class="nx">i</span><span class="p">]))</span> <span class="k">break</span><span class="p">;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">line</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">i</span><span class="p">));</span>
  <span class="p">}</span>
<span class="p">}();</span>
<span class="nx">loop</span><span class="p">.</span><span class="nx">next</span><span class="p">();</span>

<span class="kd">let</span> <span class="nx">rl</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">readline</span><span class="dl">"</span><span class="p">).</span><span class="nx">createInterface</span><span class="p">(</span>
  <span class="nx">process</span><span class="p">.</span><span class="nx">stdin</span><span class="p">,</span> <span class="nx">process</span><span class="p">.</span><span class="nx">stdout</span><span class="p">,</span> <span class="kc">null</span><span class="p">);</span>
<span class="nx">rl</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">line</span><span class="dl">"</span><span class="p">,</span> <span class="nx">line</span> <span class="o">=&gt;</span> <span class="nx">loop</span><span class="p">.</span><span class="nx">next</span><span class="p">(</span><span class="nx">line</span><span class="p">));</span>
<span class="nx">rl</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">close</span><span class="dl">"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">loop</span><span class="p">.</span><span class="nx">next</span><span class="p">(</span><span class="kc">null</span><span class="p">));</span>
</code></pre></div>
</div>

<div class="code-frame" data-lang="fsharp">
<div class="code-lang"><span class="bold">F#</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">let</span> <span class="k">rec</span> <span class="n">loop</span><span class="bp">()</span> <span class="p">=</span>
  <span class="k">let</span> <span class="n">line</span> <span class="p">=</span> <span class="nn">Console</span><span class="p">.</span><span class="nc">ReadLine</span><span class="bp">()</span>
  <span class="k">if</span> <span class="n">line</span> <span class="p">&lt;&gt;</span> <span class="k">null</span> <span class="k">then</span>
    <span class="k">let</span> <span class="k">rec</span> <span class="n">loop2</span> <span class="n">i</span> <span class="p">=</span>
      <span class="k">if</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">line</span><span class="p">.</span><span class="nc">Length</span> <span class="p">&amp;&amp;</span> <span class="nn">Char</span><span class="p">.</span><span class="nc">IsNumber</span><span class="p">(</span><span class="n">line</span><span class="o">.[</span><span class="n">i</span><span class="o">])</span> <span class="k">then</span>
        <span class="n">loop2</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
      <span class="k">else</span>
        <span class="n">line</span><span class="o">.[</span><span class="mi">0</span> <span class="p">..</span> <span class="n">i</span> <span class="p">-</span> <span class="mi">1</span><span class="p">]</span>
    <span class="n">printfn</span> <span class="s2">"%s"</span> <span class="p">(</span><span class="n">loop2</span> <span class="mi">0</span><span class="p">)</span>
    <span class="n">loop</span><span class="bp">()</span>
<span class="n">loop</span><span class="bp">()</span>
</code></pre></div>
</div>

<p>※ Windowsで標準入力読み切り型プログラムを終了させるには [Ctrl]+[Z] [Enter] と操作しますが、Node.jsでは [Ctrl]+[D] です。</p>

<p>Node.jsでの標準入力の扱いは次の記事を参考にしました。</p>

<ul>
<li>
<a href="http://qiita.com/hiroqn@github/items/c927bc97780c34eda562" id="reference-738fb68b7690aa464f96">Node.jsの標準入力と</a> 2013.10.03</li>
</ul>

<h1>
<span id="参照" class="fragment"></span><a href="#%E5%8F%82%E7%85%A7"><i class="fa fa-link"></i></a>参照</h1>

<p>F#では<code>mutable</code>の親戚のような参照という型があります。参照は<code>ref</code>というキーワードを指定するとその場でインスタンスが作られます。</p>

<p>※ C#で引数を参照で渡すための<code>ref</code>とは別物です。</p>

<p>値へのアクセスはプロパティによる方法と演算子による方法があります。演算子の方がよく使われます。<code>!</code> は参照剥がし（デリファレンス）演算子で、C#の否定演算子とは無関係です。参照への代入は <code>:=</code> です。</p>

<blockquote><table>
<tr>
<th>C#</th>
<th>F# (mutable)</th>
<th>F# (参照・プロパティ)</th>
<th>F# (参照・演算子)</th>
</tr>
<tr>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
int a = 1;
Console.WriteLine(a);
a = 2;
Console.WriteLine(a);
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
let mutable a = 1
printfn "%d" a
a &lt;- 2
printfn "%d" a
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
let b = ref 1
printfn "%d" b.Value
b.Value &lt;- 2
printfn "%d" b.Value
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
let b = ref 1
printfn "%d" !b
b := 2
printfn "%d" !b
</code></pre></div></div></td>
</tr>
</table></blockquote>

<p>C#よりもC++で説明した方が分かりやすいかもしれません。比較の都合上、C++は参照ではなくポインタで示します。C#でもポインタは使えますが、1要素の配列で表現する方が簡単なのでその方法で示します。</p>

<blockquote><table>
<tr>
<th>C++</th>
<th>C#</th>
<th>JavaScript</th>
<th>F#</th>
</tr>
<tr>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
int *b = new int(1);
printf("%d\n", *b);
*b = 2;
printf("%d\n", *b);
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
int[] b = new[] {1};
Console.WriteLine(b[0]);
b[0] = 2;
Console.WriteLine(b[0]);
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
let b = [1];
console.log(b[0]);
b[0] = 2;
console.log(b[0]);
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
let b = ref 1
printfn "%d" !b
b := 2
printfn "%d" !b
</code></pre></div></div></td>
</tr>
</table></blockquote>

<p>※ C++でも <code>*b = 2;</code> は <code>b[0] = 2;</code> に書き換えられます。</p>

<h1>
<span id="クロージャ" class="fragment"></span><a href="#%E3%82%AF%E3%83%AD%E3%83%BC%E3%82%B8%E3%83%A3"><i class="fa fa-link"></i></a>クロージャ</h1>

<p>関数内関数から外のローカル変数にアクセスできます。これをレキシカルスコープと呼んで、変数への参照をキャプチャと表現します。キャプチャを伴った関数をクロージャと呼びます。</p>

<blockquote><table>
<tr>
<th>C#</th>
<th>JavaScript</th>
<th>F#</th>
</tr>
<tr>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
Action test1 = () =&gt; {
  var i = 0;
  Action test2 = () =&gt;
    Console.WriteLine(i);
  test2();
};
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
let test1 = () =&gt; {
  let i = 0;
  let test2 = () =&gt;
    console.log(i);
  test2();
};
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
let test1() =
  let i = 0
  let test2() =
    printfn "%d" i
  test2()
</code></pre></div></div></td>
</tr>
</table></blockquote>

<p>上の例ではC#やJavaScriptでは値が変更可能な変数をキャプチャしていますが、F#では<code>mutable</code>な変数はキャプチャできません。Javaでもラムダ式（匿名クラス）から<code>final</code>を指定した変数しか参照できないのと似ています。</p>

<p>※ Java 8では初期化以外で値を触らなければ事実上の<code>final</code>としてコンパイルが通ります。下のコードでは意図的に<code>i</code>の値を変更しています。</p>

<blockquote><table>
<tr>
<th>F#</th>
<th>Java 8</th>
</tr>
<tr>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
let test1() =
  let mutable i = 0
  let test2() =
    printfn "%d" i  // エラー
  i &lt;- 1
  test2()
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
void test1() {
  int i = 0;
  Runnable test2 = () -&gt;
    System.out.println(i);  // エラー
  i = 1;
  test2.run();
}
</code></pre></div></div></td>
</tr>
</table></blockquote>

<p>F#では参照で回避します。Javaでは<code>final</code>を付け、中身を変更可能にするため配列で包む回避策があります。</p>

<blockquote><table>
<tr>
<th>F#</th>
<th>Java 8</th>
</tr>
<tr>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
let test1() =
  let i = ref 0
  let test2() =
    printfn "%d" !i
  i := 1
  test2()
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
void test1() {
  final int i[] = {0};
  Runnable test2 = () -&gt;
    System.out.println(i[0]);
  i[0] = 1;
  test2.run();
}
</code></pre></div></div></td>
</tr>
</table></blockquote>

<h2>
<span id="理由" class="fragment"></span><a href="#%E7%90%86%E7%94%B1"><i class="fa fa-link"></i></a>理由</h2>

<p>ローカルの<code>mutable</code>変数はスタックに確保されるのに対し、参照の実体はヒープに確保されます。スタックに確保された変数はスコープアウト時に破棄されます。しかしクロージャにキャプチャされた変数の寿命はスコープに縛られないため、参照によりヒープに確保して解放はGCに任せることで、スコープアウト問題を回避しています。</p>

<p>C#ではキャプチャされる変数はコンパイラが自動的に扱い方を変えるためこの制限がありません。F#では敢えてエラーにしていると思われます。</p>

<h1>
<span id="クラス" class="fragment"></span><a href="#%E3%82%AF%E3%83%A9%E3%82%B9"><i class="fa fa-link"></i></a>クラス</h1>

<p>F#とC#で構文がかなり違いますが、<code>protected</code>や入れ子にされた型がない以外はほぼ同じことが表現できます。JavaScriptは色々な書き方ができますが、ここではF#との対比の都合上<code>class</code>を使わない古い書き方で示します。</p>

<blockquote><table>
<tr>
<th>C#</th>
<th>JavaScript</th>
<th>F#</th>
</tr>
<tr>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
class Num
{
  private int num = 0;
  public void Next()
  {
    Console.WriteLine(++num);
  }
}
class Test
{
  static void Main()
  {
    var n = new Num();
    for (int i = 0; i &lt; 5; i++)
      n.Next();
  }
}
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
function Num() {
  this.num = 0;
  this.Next = function() {
    console.log(++this.num);
  };
}
let n = new Num();
for (let i = 0; i &lt; 5; i++)
  n.Next();
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
type Num() =
  let mutable num = 0
  member this.Next() =
    num &lt;- num + 1
    printfn "%d" num
let n = Num()
for i = 0 to 4 do
  n.Next()
</code></pre></div></div></td>
</tr>
</table></blockquote>

<p>※ JavaScriptは<code>function</code>とアロー記法では<code>this</code>の扱いが異なります。メソッド内で<code>this</code>を使う場合は<code>function</code>を使用します。</p>

<p>F#でアクセス制御を省略したときのデフォルトは、<code>let</code>が<code>private</code>、<code>member</code>が<code>public</code>となります。<code>type</code>名の後の<code>()</code>はコンストラクタの引数を表しています。JavaScriptは関数の引数がそのままコンストラクタの引数として使われていて、F#と書き方が似ていることに注目してください。</p>

<p>F#ではインスタンス生成に<code>new</code>は不要です。<code>IDisposable</code>を実装したクラスでは<code>new</code>を付けないと警告されますが、それ以外では<code>new</code>を付けると警告されます。</p>

<p>※ <code>IDisposable</code>かどうか毎回調べると面倒なので、個人的にはデフォルトで省略して、警告されたら付けるという運用をしています。</p>

<h2>
<span id="コンストラクタ" class="fragment"></span><a href="#%E3%82%B3%E3%83%B3%E3%82%B9%E3%83%88%E3%83%A9%E3%82%AF%E3%82%BF"><i class="fa fa-link"></i></a>コンストラクタ</h2>

<p>コンストラクタで引数を処理する例を示します。JavaScriptで引数をそのままキャプチャしているのに注目してください（<code>this</code>を使用しないためアロー記法）。</p>

<blockquote><table>
<tr>
<th>C#</th>
<th>JavaScript</th>
<th>F#</th>
</tr>
<tr>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
class Num
{
  private int num = 0;
  public Num(int n)
  {
    num = n;
  }
  public void Next()
  {
    Console.WriteLine(++num);
  }
}
class Test
{
  static void Main()
  {
    var n = new Num(5);
    for (int i = 0; i &lt; 5; i++)
      n.Next();
  }
}
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
function Num(num) {
  this.Next = () =&gt;
    console.log(++num);
}
let n = new Num(5);
for (let i = 0; i &lt; 5; i++)
  n.Next();
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
type Num(n) =
  let mutable num = n
  member this.Next() =
    num &lt;- num + 1
    printfn "%d" num
let n = Num 5
for i = 0 to 4 do
    n.Next()
</code></pre></div></div></td>
</tr>
</table></blockquote>

<h2>
<span id="クロージャと比較" class="fragment"></span><a href="#%E3%82%AF%E3%83%AD%E3%83%BC%E3%82%B8%E3%83%A3%E3%81%A8%E6%AF%94%E8%BC%83"><i class="fa fa-link"></i></a>クロージャと比較</h2>

<p>クロージャをクラスの代わりに使って比較してみます。F#は一旦参照で受けるため冗長になっていますが、C#やJavaScriptはその必要がないため単純です。JavaScriptとF#はクラスの書き方とよく似ているのに注目してください。</p>

<blockquote><table>
<tr>
<th>C#</th>
<th>JavaScript</th>
<th>F#</th>
</tr>
<tr>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
Func&lt;int, Action&gt; Num = num =&gt;
  () =&gt; Console.WriteLine(++num);
var next = Num(5);
for (int i = 0; i &lt; 5; i++)
  next();
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
function Num(num) {
  return () =&gt;
    console.log(++num);
}
let next = Num(5);
for (let i = 0; i &lt; 5; i++)
  next();
</code></pre></div></div></td>
<td><div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
let Num(n) =
  let num = ref n
  fun () -&gt;
    num := !num + 1
    printfn "%d" !num
let next = Num 5
for i = 0 to 4 do
  next()
</code></pre></div></div></td>
</tr>
</table></blockquote>

<h1>
<span id="多態" class="fragment"></span><a href="#%E5%A4%9A%E6%85%8B"><i class="fa fa-link"></i></a>多態</h1>

<h2>
<span id="サブクラスによるオーバーライド" class="fragment"></span><a href="#%E3%82%B5%E3%83%96%E3%82%AF%E3%83%A9%E3%82%B9%E3%81%AB%E3%82%88%E3%82%8B%E3%82%AA%E3%83%BC%E3%83%90%E3%83%BC%E3%83%A9%E3%82%A4%E3%83%89"><i class="fa fa-link"></i></a>サブクラスによるオーバーライド</h2>

<p>数字と足し算のAST（抽象構文木）の例を示します。JavaScriptは継承ではなくダックタイピングで実装します。</p>

<div class="code-frame" data-lang="csharp">
<div class="code-lang"><span class="bold">C#</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">abstract</span> <span class="k">class</span> <span class="nc">Val</span>
<span class="p">{</span>
  <span class="k">public</span> <span class="k">abstract</span> <span class="kt">int</span> <span class="n">Value</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>
<span class="p">}</span>
<span class="k">class</span> <span class="nc">Num</span> <span class="p">:</span> <span class="n">Val</span>
<span class="p">{</span>
  <span class="k">private</span> <span class="kt">int</span> <span class="n">num</span><span class="p">;</span>
  <span class="k">public</span> <span class="nf">Num</span><span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">)</span> <span class="p">{</span> <span class="n">num</span> <span class="p">=</span> <span class="n">n</span><span class="p">;</span> <span class="p">}</span>
  <span class="k">public</span> <span class="k">override</span> <span class="kt">int</span> <span class="n">Value</span> <span class="p">{</span> <span class="k">get</span> <span class="p">{</span> <span class="k">return</span> <span class="n">num</span><span class="p">;</span> <span class="p">}</span> <span class="p">}</span>
<span class="p">}</span>
<span class="k">class</span> <span class="nc">Add</span> <span class="p">:</span> <span class="n">Val</span>
<span class="p">{</span>
  <span class="k">private</span> <span class="n">Val</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">;</span>
  <span class="k">public</span> <span class="nf">Add</span><span class="p">(</span><span class="n">Val</span> <span class="n">a</span><span class="p">,</span> <span class="n">Val</span> <span class="n">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="n">a</span> <span class="p">=</span> <span class="n">a</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="n">b</span> <span class="p">=</span> <span class="n">b</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">public</span> <span class="k">override</span> <span class="kt">int</span> <span class="n">Value</span>
  <span class="p">{</span>
    <span class="k">get</span> <span class="p">{</span> <span class="k">return</span> <span class="n">a</span><span class="p">.</span><span class="n">Value</span> <span class="p">+</span> <span class="n">b</span><span class="p">.</span><span class="n">Value</span><span class="p">;</span> <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="k">class</span> <span class="nc">Test</span>
<span class="p">{</span>
  <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">()</span> <span class="p">{</span>
    <span class="kt">var</span> <span class="n">expr</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Add</span><span class="p">(</span><span class="k">new</span> <span class="nf">Num</span><span class="p">(</span><span class="m">2</span><span class="p">),</span> <span class="k">new</span> <span class="nf">Num</span><span class="p">(</span><span class="m">3</span><span class="p">));</span>
    <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">expr</span><span class="p">.</span><span class="n">Value</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<div class="code-frame" data-lang="js">
<div class="code-lang"><span class="bold">JavaScript</span></div>
<div class="highlight"><pre class="with-code"><code><span class="kd">function</span> <span class="nx">Num</span><span class="p">(</span><span class="nx">num</span><span class="p">)</span> <span class="p">{</span>
  <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Value</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">get</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">num</span>
  <span class="p">});</span>
<span class="p">}</span>
<span class="kd">function</span> <span class="nx">Add</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
  <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Value</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">get</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">a</span><span class="p">.</span><span class="nx">Value</span> <span class="o">+</span> <span class="nx">b</span><span class="p">.</span><span class="nx">Value</span>
  <span class="p">});</span>
<span class="p">}</span>
<span class="kd">let</span> <span class="nx">expr</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Add</span><span class="p">(</span><span class="k">new</span> <span class="nx">Num</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="k">new</span> <span class="nx">Num</span><span class="p">(</span><span class="mi">3</span><span class="p">));</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">expr</span><span class="p">.</span><span class="nx">Value</span><span class="p">);</span>
</code></pre></div>
</div>

<div class="code-frame" data-lang="fsharp">
<div class="code-lang"><span class="bold">F#</span></div>
<div class="highlight"><pre class="with-code"><code><span class="p">[&lt;</span><span class="nc">AbstractClass</span><span class="p">&gt;]</span>
<span class="k">type</span> <span class="nc">Val</span><span class="bp">()</span> <span class="p">=</span>
  <span class="k">abstract</span> <span class="nc">Value</span><span class="p">:</span> <span class="kt">int</span>
<span class="k">type</span> <span class="nc">Num</span><span class="p">(</span><span class="n">num</span><span class="p">)</span> <span class="p">=</span>
  <span class="k">inherit</span> <span class="nc">Val</span><span class="bp">()</span>
  <span class="k">override</span> <span class="n">this</span><span class="p">.</span><span class="nc">Value</span> <span class="p">=</span> <span class="n">num</span>
<span class="k">type</span> <span class="nc">Add</span><span class="p">(</span><span class="n">a</span><span class="p">:</span> <span class="nc">Val</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="nc">Val</span><span class="p">)</span> <span class="p">=</span>
  <span class="k">inherit</span> <span class="nc">Val</span><span class="bp">()</span>
  <span class="k">override</span> <span class="n">this</span><span class="p">.</span><span class="nc">Value</span> <span class="p">=</span> <span class="n">a</span><span class="p">.</span><span class="nc">Value</span> <span class="o">+</span> <span class="n">b</span><span class="p">.</span><span class="nc">Value</span>
<span class="k">let</span> <span class="n">expr</span> <span class="p">=</span> <span class="nc">Add</span><span class="p">(</span><span class="nc">Num</span> <span class="mi">2</span><span class="p">,</span> <span class="nc">Num</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">printfn</span> <span class="s2">"%d"</span> <span class="n">expr</span><span class="p">.</span><span class="nc">Value</span>
</code></pre></div>
</div>

<h2>
<span id="判別共用体" class="fragment"></span><a href="#%E5%88%A4%E5%88%A5%E5%85%B1%E7%94%A8%E4%BD%93"><i class="fa fa-link"></i></a>判別共用体</h2>

<p>F#には多態を簡潔に表現する判別共用体というものがあります。クラスごとの評価関数を個別にオーバーライドするのではなく、一箇所にまとめて書くスタイルです。</p>

<div class="code-frame" data-lang="fsharp">
<div class="code-lang"><span class="bold">F#</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">type</span> <span class="nc">Val</span> <span class="p">=</span>
<span class="p">|</span> <span class="nc">Num</span> <span class="k">of</span> <span class="kt">int</span>
<span class="p">|</span> <span class="nc">Add</span> <span class="k">of</span> <span class="nc">Val</span> <span class="p">*</span> <span class="nc">Val</span>

<span class="k">let</span> <span class="k">rec</span> <span class="n">eval</span> <span class="p">=</span> <span class="k">function</span>
<span class="p">|</span> <span class="nc">Num</span><span class="p">(</span><span class="n">num</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="n">num</span>
<span class="p">|</span> <span class="nc">Add</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="n">eval</span> <span class="n">a</span> <span class="o">+</span> <span class="n">eval</span> <span class="n">b</span>

<span class="k">let</span> <span class="n">expr</span> <span class="p">=</span> <span class="nc">Add</span><span class="p">(</span><span class="nc">Num</span> <span class="mi">2</span><span class="p">,</span> <span class="nc">Num</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">printfn</span> <span class="s2">"%d"</span> <span class="p">(</span><span class="n">eval</span> <span class="n">expr</span><span class="p">)</span>
</code></pre></div>
</div>

<p>判別共用体がうまくハマるパターンではものすごく簡潔になります。</p>

<p>JavaScriptで雰囲気を真似た例を示します。C#では冗長になるため省略します。</p>

<div class="code-frame" data-lang="js">
<div class="code-lang"><span class="bold">JavaScript</span></div>
<div class="highlight"><pre class="with-code"><code><span class="kd">function</span> <span class="nx">Num</span><span class="p">(</span><span class="nx">num</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">num</span> <span class="o">=</span> <span class="nx">num</span><span class="p">;</span>
<span class="p">}</span>
<span class="kd">function</span> <span class="nx">Add</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">a</span> <span class="o">=</span> <span class="nx">a</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">b</span> <span class="o">=</span> <span class="nx">b</span><span class="p">;</span>
<span class="p">}</span>
<span class="kd">function</span> <span class="nb">eval</span><span class="p">(</span><span class="nx">v</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">v</span> <span class="k">instanceof</span> <span class="nx">Num</span><span class="p">)</span>
    <span class="k">return</span> <span class="nx">v</span><span class="p">.</span><span class="nx">num</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">v</span> <span class="k">instanceof</span> <span class="nx">Add</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">eval</span><span class="p">(</span><span class="nx">v</span><span class="p">.</span><span class="nx">a</span><span class="p">)</span> <span class="o">+</span> <span class="nb">eval</span><span class="p">(</span><span class="nx">v</span><span class="p">.</span><span class="nx">b</span><span class="p">);</span>
<span class="p">}</span>
<span class="kd">let</span> <span class="nx">expr</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Add</span><span class="p">(</span><span class="k">new</span> <span class="nx">Num</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="k">new</span> <span class="nx">Num</span><span class="p">(</span><span class="mi">3</span><span class="p">));</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">eval</span><span class="p">(</span><span class="nx">expr</span><span class="p">));</span>
</code></pre></div>
</div>

<h1>
<span id="資料" class="fragment"></span><a href="#%E8%B3%87%E6%96%99"><i class="fa fa-link"></i></a>資料</h1>

<p>今回と同じような視点の記事を紹介します。</p>

<p>この記事の元になった記事です。C#的なオブジェクト指向構文を中心にまとめています。</p>

<ul>
<li>
<a href="http://d.hatena.ne.jp/n7shi/20090722" rel="nofollow noopener" target="_blank">C#プログラマのためのF#入門</a> 2009.07.22</li>
</ul>

<p>限定された範囲内でC#をF#に変換するトランスレータです。JavaScriptで実装されているため、ブラウザ上で動きます。</p>

<ul>
<li>
<a href="http://7shi.bitbucket.org/cs2fs/" rel="nofollow noopener" target="_blank">C# to F# translator</a> 2015.08.01</li>
</ul>

<p>C#とF#との対比記事です。引用されているF# Tutorialはプロジェクト作成のときに選択できます。</p>

<ul>
<li>
<a href="https://twitter.com/neuecc" rel="nofollow noopener" target="_blank">@neuecc</a>: <a href="http://neue.cc/2009/11/09_214.html" rel="nofollow noopener" target="_blank">F# TutorialをC#と比較しながらでF#を学ぶ</a> 2009.11.09</li>
</ul>
</div></div></section><div class="css-1yzj1fm"><div class="css-1uv1qiv"><span class="fa fa-twitter"></span></div><div class="css-1uv1qiv"><span class="fa fa-facebook"></span></div></div><div class="apm-Content"><div class="apm-Content_title">Why not register and get more from Qiita?</div><ol class="apm-Content_list"><li>We will deliver articles that match you<div class="description">By following users and tags, you can catch up information on technical fields that you are interested in as a whole</div></li><li>you can read useful information later efficiently<div class="description">By &quot;stocking&quot; the articles you like, you can search right away</div></li><div><a class="apm-Content_help" href="https://help.qiita.com/ja/articles/qiita-login-user" target="_blank"><i class="fa fa-fw fa-arrow-circle-right"></i>What you can do with signing up</a></div></ol><a href="/signup?callback_action=login_or_signup&amp;redirect_to=%2F7shi%2Fitems%2Fff746903680ae8d0d7ce&amp;realm=qiita" class="apm-Content_button apm-Content_button-signup">Sign up</a><a href="/login?callback_action=login_or_signup&amp;redirect_to=%2F7shi%2Fitems%2Fff746903680ae8d0d7ce&amp;realm=qiita" class="apm-Content_button apm-Content_button-signin">Login</a></div></div><div class="css-helsa7"></div></div></div></div><div class="css-109dbrr"><div class="css-5jpx49"><div class="css-mnxgyc"><button class=" css-1vlpknv"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/7shi/items/ff746903680ae8d0d7ce/likers" class="css-1iupg5d">60</a></div><div class="css-fsjkhv"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-1b17vb0">57</span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-7i7f4d"><div class="css-1gj7nt">Improve article</div><a href="/drafts/ff746903680ae8d0d7ce/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/7shi/items/ff746903680ae8d0d7ce/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/7shi/items/ff746903680ae8d0d7ce/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/7shi/items/ff746903680ae8d0d7ce/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/7shi/items/ff746903680ae8d0d7ce.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="PersonalArticlePage" data-dom-id="PersonalArticlePage-react-component-fee88b86-bbe6-4683-868c-c86bda6c1c68">{"authorAnalyticsTrackingId":null,"organizationAnalyticsTrackingId":null}</script>
      
<footer id="globalFooter" class="st-Footer"><div class="st-Footer_container"><div class="st-Footer_start"><div class="st-Footer_logo"><svg viewbox="0 0 426.57 130" xmlns="http://www.w3.org/2000/svg"><circle cx="167.08" cy="21.4" r="12.28" /><path d="M250.81 29.66h23.48v18.9h-23.48z" /><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z" /><circle cx="216.33" cy="21.4" r="12.28" /></svg></div><div class="st-Footer_catchcopy">How developers code is here.</div><div class="st-Footer_socials"><a class="fa fa-twitter" href="https://twitter.com/qiita"></a><a class="fa fa-facebook-square" href="https://www.facebook.com/qiita/"></a></div></div><div class="st-Footer_end"><div class="st-Footer_qiita"><div class="st-Footer_label">Qiita</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="/about">About</a><a href="/terms">Terms</a><a href="/privacy">Privacy</a><a target="_blank" href="http://help.qiita.com/ja/articles/qiita-community-guideline">Guideline</a><a target="_blank" href="https://help.qiita.com/ja/articles/others-brand-guideline">Design Guideline</a></div><div class="st-Footer_column"><a href="/release-notes">Release</a><a href="/api/v2/docs">API</a><a href="/feedback/new">ご意見</a><a href="https://help.qiita.com">Help</a><a target="_blank" href="https://qiita.com/ads?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Advertisement</a></div></div></div><div class="st-Footer_increments"><div class="st-Footer_label">Increments</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="https://increments.co.jp/company/">About</a><a href="https://increments.co.jp/jobs/">採用情報</a><a href="https://blog.qiita.com">Blog</a></div><div class="st-Footer_column"><a href="https://teams.qiita.com/">Qiita Team</a><a href="https://jobs.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Jobs</a><a href="https://zine.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Zine</a></div></div></div></div></div><div class="st-Footer_copyright">© 2011-2021 Increments Inc.</div></footer><div id="Snackbar-react-component-c4dd87e9-3800-4201-9474-2f2222f1d655"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="Snackbar" data-dom-id="Snackbar-react-component-c4dd87e9-3800-4201-9474-2f2222f1d655">{}</script>
      
<div id="LoginModal-react-component-2a240ec0-d951-4433-96c8-77a894632c58"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="LoginModal" data-dom-id="LoginModal-react-component-2a240ec0-d951-4433-96c8-77a894632c58">{}</script>
      
<div id="StockModal-react-component-fb402a83-e35e-4efc-a3ed-0976543da0bc"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="StockModal" data-dom-id="StockModal-react-component-fb402a83-e35e-4efc-a3ed-0976543da0bc">{}</script>
      
</div><div id="dataContainer" style="display: none;" data-config="{&quot;actionPath&quot;:&quot;public/items#show&quot;,&quot;settings&quot;:{&quot;analyticsTrackingId&quot;:&quot;UA-24675221-12&quot;,&quot;assetsMap&quot;:{},&quot;csrfToken&quot;:&quot;KSLVNfbKq/pnDJZNVynJjNExNIPTQFTElgN8vC1V5+jhVar8XlbRERCOFjraFFMEezVMziekC99KsNvtA8dwRA==&quot;,&quot;locale&quot;:&quot;en&quot;},&quot;currentUser&quot;:null}" /></body></html><script type="application/json" data-js-react-on-rails-store="AppStoreWithReactOnRails">{"snackbar":{"type":"","body":"","isActive":false},"article":{"article":{"body":"\u003cp\u003eC#やJavaScript（ES2015）と比較しながらF#の文法を説明します。手続型の延長線上で取っ掛かりをつかむことを目的とします。関数型については深追いしません。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eとりあえず手続型的な発想でも構わないので、F#を使ってみます。\u003c/li\u003e\n\u003cli\u003e関数型特有の概念の説明には重点を置きませんが、その導入になるようには意識します。\u003c/li\u003e\n\u003cli\u003e一気に関数型に飛ばないで、ベターC#として慣れていくような入り方を目指します。\u003c/li\u003e\n\u003cli\u003e関数型の理解を深めるのは慣れてからでも遅くないというスタンスです。\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eこの記事は以前開催していた\u003ca href=\"https://connpass.com/series/361/\" rel=\"nofollow noopener\" target=\"_blank\"\u003eF#入門\u003c/a\u003eのテキストを改訂したものです。\u003c/p\u003e\n\n\u003cp\u003eこの記事には姉妹編があります。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"http://qiita.com/7shi/items/1d3750ba17f5a88b8405\" id=\"reference-6a3cfa99698502105270\"\u003eHaskellで学ぶF#入門\u003c/a\u003e 2017.01.11\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eF#を手っ取り早く試すために、私が常用している環境を紹介します。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"http://qiita.com/7shi/items/5fc7d6477d96bbd7a71d\" id=\"reference-68b89880edcfdf69cabe\"\u003eF#開発環境の紹介\u003c/a\u003e 2016.12.30\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"fについて\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#f%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eF#について\u003c/h1\u003e\n\n\u003cp\u003eF#の構文は見慣れないものだと思います。この記事ではC#/JavaScriptと比較しながら構文に慣れることに重点を置きます。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"背景\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%83%8C%E6%99%AF\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e背景\u003c/h2\u003e\n\n\u003cp\u003eF#が分かりにくいと感じる原因は、主に以下の2種類ではないでしょうか。\u003c/p\u003e\n\n\u003col\u003e\n\u003cli\u003e構文の異質さ（C系言語などと比較して）\u003c/li\u003e\n\u003cli\u003e関数型の考え方\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003cp\u003e今回は前者の壁に的を絞ります。両者は完全に分離しているわけではないため、後者の領域も多少は言及します。個人的にはF#は構文が簡潔で短く書けるのが良いと思っています。触り始めの頃は関数型のことはあまり意識しませんでした。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"位置付け\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E4%BD%8D%E7%BD%AE%E4%BB%98%E3%81%91\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e位置付け\u003c/h2\u003e\n\n\u003cp\u003eF#はC#と同様に.NET Frameworkで動く言語です。クラスを定義したり使ったりなど、基本的にはC#でできるのとほぼ同じことができます。\u003c/p\u003e\n\n\u003cp\u003e※ これは大雑把な説明で、細かい点で違いはあります（\u003ccode\u003eprotected\u003c/code\u003eや入れ子にされた型など）。\u003c/p\u003e\n\n\u003cp\u003eそれに対してJavaScriptは出自が異なりますが、C#よりもJavaScriptで説明した方が分かりやすいケースもあるため、説明に取り入れました。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"ハローワールド\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%8F%E3%83%AD%E3%83%BC%E3%83%AF%E3%83%BC%E3%83%AB%E3%83%89\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eハローワールド\u003c/h1\u003e\n\n\u003cp\u003e※ 横幅の関係上、インデントはスペース2つとします。\u003c/p\u003e\n\n\u003cblockquote\u003e\u003ctable\u003e\n\u003ctr\u003e\n\u003cth\u003eC#\u003c/th\u003e\n\u003cth\u003eJavaScript\u003c/th\u003e\n\u003cth\u003eF#\u003c/th\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nusing System;\n\nclass Program\n{\n  static void Main()\n  {\n    Console.WriteLine(\"hello\");\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nconsole.log(\"hello\");\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nprintfn \"hello\"\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003eまたは\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nopen System\nConsole.WriteLine \"hello\"\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/table\u003e\u003c/blockquote\u003e\n\n\u003cul\u003e\n\u003cli\u003eC#はMainメソッドが必須で、クラスで包む必要があります。簡単のため以後の例では省略します。\u003c/li\u003e\n\u003cli\u003eJavaScriptとF#はクラスやMainで包む必要がありません。\u003c/li\u003e\n\u003cli\u003eF#はセミコロンが必要ありません。（JavaScriptも省略可能）\u003c/li\u003e\n\u003cli\u003eF#では引数を\u003ccode\u003e()\u003c/code\u003eで囲む必要がありません。（付けても動きます）\u003c/li\u003e\n\u003cli\u003eF#の\u003ccode\u003eopen\u003c/code\u003eはC#の\u003ccode\u003eusing\u003c/code\u003eに相当します。以後の例では省略します。\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"printfprintfn\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#printfprintfn\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eprintf/printfn\u003c/h2\u003e\n\n\u003cp\u003eF#の\u003ccode\u003eprintf\u003c/code\u003e/\u003ccode\u003eprintfn\u003c/code\u003eは\u003ccode\u003eopen\u003c/code\u003eも何もなくいきなり使える標準の出力用関数です。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"fsharp\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eF#\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"n\"\u003eprintf\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"hello\u003c/span\u003e\u003cspan class=\"se\"\u003e\\n\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"\u003c/span\u003e\n\u003cspan class=\"n\"\u003eprintfn\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"hello\"\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e関数名の接尾辞\u003ccode\u003en\u003c/code\u003eは\u003ccode\u003e\"\\n\"\u003c/code\u003eと同様に New line に由来して、改行を意味します。\u003c/p\u003e\n\n\u003cp\u003e複数の引数はコンマではなくスペースで区切ります。（詳細は次のセクションで解説します）\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"fsharp\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eF#\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"n\"\u003eprintfn\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"%d\"\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e\u003ccode\u003eprintf\u003c/code\u003eはコンパイラがフォーマット文字列を認識して、引数の型をチェックします。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"fsharp\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eF#\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"n\"\u003eprintfn\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"%d\"\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"abc\"\u003c/span\u003e  \u003cspan class=\"c1\"\u003e// エラー\u003c/span\u003e\n\u003cspan class=\"n\"\u003eprintfn\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"%s\"\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e      \u003cspan class=\"c1\"\u003e// エラー\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"複数の引数\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%A4%87%E6%95%B0%E3%81%AE%E5%BC%95%E6%95%B0\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e複数の引数\u003c/h1\u003e\n\n\u003cp\u003eF#では複数の引数の扱い方が二系統あり、F#ネイティブの関数と.NETのメソッドとで異なります。\u003c/p\u003e\n\n\u003cblockquote\u003e\u003ctable\u003e\n\u003ctr\u003e\n\u003cth\u003eC#\u003c/th\u003e\n\u003cth\u003eJavaScript\u003c/th\u003e\n\u003cth\u003eF#\u003c/th\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nConsole.WriteLine(\"{0} {1}”,\n  1 + 1, Math.Sqrt(2));\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nconsole.log(1 + 1, Math.sqrt(2));\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nprintfn \"%d %f\" (1 + 1) (sqrt 2.)\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003eまたは\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nConsole.WriteLine(\"{0} {1}\",\n  1 + 1, Math.Sqrt 2.)\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/table\u003e\u003c/blockquote\u003e\n\n\u003cp\u003e※ F#の2.は2.0のことで、浮動小数点数であることを示します。（後述）\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"fネイティブの関数\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#f%E3%83%8D%E3%82%A4%E3%83%86%E3%82%A3%E3%83%96%E3%81%AE%E9%96%A2%E6%95%B0\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eF#ネイティブの関数\u003c/h2\u003e\n\n\u003cp\u003e複数の引数はコンマではなくスペースで区切ります。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"fsharp\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eF#\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"n\"\u003eprintfn\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"%d\"\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003eコンマを付けると警告されてうまく動きません。（後述のタプルとして扱われます）\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"fsharp\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eF#\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"n\"\u003eprintfn\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"%d\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e  \u003cspan class=\"c1\"\u003e// 警告され文字も出力されない\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e括弧で囲む必要はありません。付けるとエラーになります。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"fsharp\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eF#\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"n\"\u003eprintfn\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"%d\"\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e   \u003cspan class=\"c1\"\u003e// エラー\u003c/span\u003e\n\u003cspan class=\"n\"\u003eprintfn\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"%d\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e  \u003cspan class=\"c1\"\u003e// エラー\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e引数で計算や関数呼び出しを行う場合、引数としてまとめるため括弧で囲む必要があります。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"fsharp\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eF#（再掲）\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"n\"\u003eprintfn\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"%d %f\"\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003esqrt\u003c/span\u003e \u003cspan class=\"mi\"\u003e2\u003c/span\u003e\u003cspan class=\"o\"\u003e.)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"netのメソッド\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#net%E3%81%AE%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e.NETのメソッド\u003c/h2\u003e\n\n\u003cp\u003eタプルと呼ばれる複数の値を組み合わせた型として扱われます。C#と同じスタイルで、引数はコンマで区切って括弧で囲みます。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"fsharp\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eF#\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"nn\"\u003eConsole\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nc\"\u003eWriteLine\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"{0}\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e括弧を省略すると警告されてうまく動きません。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"fsharp\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eF#\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"nn\"\u003eConsole\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nc\"\u003eWriteLine\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"{0}\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e  \u003cspan class=\"c1\"\u003e// 警告され実行時例外\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e.NETのメソッドでも1引数の場合は括弧が省略可能です。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"fsharp\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eF#\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"nn\"\u003eConsole\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nc\"\u003eWriteLine\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"hello\"\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e以後の例では、F#はネイティブの関数（\u003ccode\u003eprintfn\u003c/code\u003eなど）があれば、.NETのメソッド（\u003ccode\u003eConsole.WriteLine\u003c/code\u003eなど）よりも優先して使用します。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"数値型のキャスト\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%95%B0%E5%80%A4%E5%9E%8B%E3%81%AE%E3%82%AD%E3%83%A3%E3%82%B9%E3%83%88\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e数値型のキャスト\u003c/h2\u003e\n\n\u003cp\u003eF#では数値型を自動的にキャストしてくれないため\u003ccode\u003esqrt(2)\u003c/code\u003eはエラーになります。\u003cbr\u003e\nC#/JavaScriptから見ると不親切ですが、型推論を優先するための言語設計です。\u003c/p\u003e\n\n\u003cp\u003e浮動小数点数型はC#とは型名が異なるため注意が必要です。\u003c/p\u003e\n\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003eC#\u003c/th\u003e\n\u003cth\u003eF#\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003efloat\u003c/td\u003e\n\u003ctd\u003efloat32\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003edouble\u003c/td\u003e\n\u003ctd\u003efloat\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\n\u003cp\u003e倍精度が浮動小数点数の基本で、単精度がオプショナルという解釈だと思われます。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"おまけ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%8A%E3%81%BE%E3%81%91\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eおまけ\u003c/h2\u003e\n\n\u003cp\u003eLISPを知っていれば、最上位の括弧が省略されていると考えればしっくり来るかもしれません。括弧で囲んでも動きます。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"fsharp\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eF#\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eprintfn\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"%f\"\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003esqrt\u003c/span\u003e \u003cspan class=\"mi\"\u003e2\u003c/span\u003e\u003cspan class=\"o\"\u003e.))\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"変数\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%A4%89%E6%95%B0\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e変数\u003c/h1\u003e\n\n\u003cp\u003eF#の変数はデフォルトで再代入できないという特徴があります。そのことについての説明は後に回して、まずは単純に変数を定義するケースを取り上げます。\u003c/p\u003e\n\n\u003cp\u003e変数は\u003ccode\u003elet\u003c/code\u003eで定義します。型推論されるため、C#の\u003ccode\u003evar\u003c/code\u003eに相当します。JavaScriptでは\u003ccode\u003evar\u003c/code\u003eは関数スコープとなるため、ES2015で追加されたブロックスコープの\u003ccode\u003elet\u003c/code\u003eに相当します。\u003c/p\u003e\n\n\u003cblockquote\u003e\u003ctable\u003e\n\u003ctr\u003e\n\u003cth\u003eC#\u003c/th\u003e\n\u003cth\u003eJavaScript\u003c/th\u003e\n\u003cth\u003eF#\u003c/th\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nvar a = 1;\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nlet a = 1;\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nlet a = 1\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/table\u003e\u003c/blockquote\u003e\n\n\u003cp\u003e型を明示的に指定する方法もあります。JavaScriptはasm.jsで型で示します。\u003c/p\u003e\n\n\u003cblockquote\u003e\u003ctable\u003e\n\u003ctr\u003e\n\u003cth\u003eC#\u003c/th\u003e\n\u003cth\u003eJavaScript\u003c/th\u003e\n\u003cth\u003eF#\u003c/th\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nint a = 1;\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nlet a = 1 | 0;\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nlet a: int = 1\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/table\u003e\u003c/blockquote\u003e\n\n\u003cp\u003eF#では可能な限り型推論に任せるスタイルを推奨します。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"束縛\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%9D%9F%E7%B8%9B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e束縛\u003c/h2\u003e\n\n\u003cp\u003eF#はデフォルトでは変数に入れた値は変更できません。変数と値の結び付きが強く、「代入」ではなく「束縛」と表現します。\u003c/p\u003e\n\n\u003cblockquote\u003e\u003ctable\u003e\n\u003ctr\u003e\n\u003cth\u003eC#\u003c/th\u003e\n\u003cth\u003eJavaScript\u003c/th\u003e\n\u003cth\u003eF#\u003c/th\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nconst int a = 1;\nConsole.WriteLine(a);\na = 2;  // エラー\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nconst a = 1;\nconsole.log(a);\na = 2;  // エラー\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nlet a = 1\nprintfn \"%d\" a\na = 2  // 警告（代入ではなく比較）\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/table\u003e\u003c/blockquote\u003e\n\n\u003cp\u003eF#では\u003ccode\u003e=\u003c/code\u003eと\u003ccode\u003e==\u003c/code\u003eを書き分けずにどちらも\u003ccode\u003e=\u003c/code\u003eです。\u003ccode\u003elet\u003c/code\u003e以外の\u003ccode\u003e=\u003c/code\u003eは比較として扱われます。\u003c/p\u003e\n\n\u003cp\u003eF#で値が変更できるようにするには\u003ccode\u003emutable\u003c/code\u003eを付けます。値の変更には\u003ccode\u003e\u0026lt;-\u003c/code\u003eを使います。\u003c/p\u003e\n\n\u003cblockquote\u003e\u003ctable\u003e\n\u003ctr\u003e\n\u003cth\u003eC#\u003c/th\u003e\n\u003cth\u003eJavaScript\u003c/th\u003e\n\u003cth\u003eF#\u003c/th\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nint a = 1;\nConsole.WriteLine(a);\na = 2;\nConsole.WriteLine(a);\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nlet a = 1;\nconsole.log(a);\na = 2;\nconsole.log(a);\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nlet mutable a = 1\nprintfn \"%d\" a\na \u0026lt;- 2\nprintfn \"%d\" a\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/table\u003e\u003c/blockquote\u003e\n\n\u003cp\u003e\u003ccode\u003emutable\u003c/code\u003eを付けずに宣言した変数に再代入する方法はありません。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"複数の変数定義\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%A4%87%E6%95%B0%E3%81%AE%E5%A4%89%E6%95%B0%E5%AE%9A%E7%BE%A9\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e複数の変数定義\u003c/h2\u003e\n\n\u003cp\u003e複数の変数を一度に定義する書式を示します。\u003c/p\u003e\n\n\u003cblockquote\u003e\u003ctable\u003e\n\u003ctr\u003e\n\u003cth\u003eC#\u003c/th\u003e\n\u003cth\u003eJavaScript\u003c/th\u003e\n\u003cth\u003eF#\u003c/th\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nint x = 1, y = 2;\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nlet x = 1, y = 2;\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nlet x, y = 1, 2\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/table\u003e\u003c/blockquote\u003e\n\n\u003cp\u003e※ C#では\u003ccode\u003evar\u003c/code\u003eを使うと複数の変数を一度に定義できません。\u003c/p\u003e\n\n\u003cp\u003eF#の書式は括弧で囲めば数学に近くなり、座標の表記に似たものだと理解できます。括弧の有無で意味は変わりません。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"fsharp\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eF#\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003elet\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"f-interactive\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#f-interactive\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eF# Interactive\u003c/h1\u003e\n\n\u003cp\u003eちょっとした実験は対話的に実行した方が便利です。F# Interactive (fsi) と呼ばれるREPLがあります。\u003c/p\u003e\n\n\u003cp\u003eWindows では \u003ccode\u003efsi.exe\u003c/code\u003e ですが、Mono 環境では \u003ccode\u003efsharpi\u003c/code\u003e コマンドで呼び出します。\u003c/p\u003e\n\n\u003cp\u003efsiではセミコロンを2つ付けると、評価されて値が表示されます。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"fsharp\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003efsi\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"k\"\u003elet\u003c/span\u003e \u003cspan class=\"n\"\u003ea\u003c/span\u003e\u003cspan class=\"p\"\u003e=\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e;;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eval\u003c/span\u003e \u003cspan class=\"n\"\u003ea\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e※ \u003ccode\u003eval\u003c/code\u003eは値（value）の意味です。\u003c/p\u003e\n\n\u003cp\u003e変数の値を見るには変数名だけでOKです。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"fsharp\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003efsi\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ea\u003c/span\u003e\u003cspan class=\"p\"\u003e;;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eval\u003c/span\u003e \u003cspan class=\"n\"\u003eit\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003eitは直前に評価された値が束縛されている変数で「それ（it）」の意味です。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"fsharp\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003efsi\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eit\u003c/span\u003e\u003cspan class=\"p\"\u003e;;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eval\u003c/span\u003e \u003cspan class=\"n\"\u003eit\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e\u003ccode\u003e;;\u003c/code\u003eを付け忘れると複数行入力として扱われます。次の行で付ければ評価されます。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"fsharp\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003efsi\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ea\u003c/span\u003e\n\u003cspan class=\"p\"\u003e-\u003c/span\u003e \u003cspan class=\"p\"\u003e;;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e電卓としても使えます。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"fsharp\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003efsi\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"o\"\u003e+\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e;;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eval\u003c/span\u003e \u003cspan class=\"n\"\u003eit\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e2\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e\u003ccode\u003elet\u003c/code\u003eなしの\u003ccode\u003e=\u003c/code\u003eが比較になっているのを確認します。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"fsharp\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003efsi\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ea\u003c/span\u003e\u003cspan class=\"p\"\u003e=\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e;;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eval\u003c/span\u003e \u003cspan class=\"n\"\u003eit\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"bp\"\u003etrue\u003c/span\u003e\n\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ea\u003c/span\u003e\u003cspan class=\"p\"\u003e=\u003c/span\u003e\u003cspan class=\"mi\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e;;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eval\u003c/span\u003e \u003cspan class=\"n\"\u003eit\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"bp\"\u003efalse\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e等しくないのを表すのは\u003ccode\u003e\u0026lt;\u0026gt;\u003c/code\u003eです。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"fsharp\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003efsi\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ea\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u0026gt;\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e;;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eval\u003c/span\u003e \u003cspan class=\"n\"\u003eit\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"bp\"\u003efalse\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e終了は\u003ccode\u003e#q;;\u003c/code\u003eと入力します。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"fsharp\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003efsi\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e#\u003c/span\u003e\u003cspan class=\"n\"\u003eq\u003c/span\u003e\u003cspan class=\"p\"\u003e;;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"条件式\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%9D%A1%E4%BB%B6%E5%BC%8F\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e条件式\u003c/h1\u003e\n\n\u003cp\u003e\u003ccode\u003eif\u003c/code\u003eは構文が少し違うだけで基本的に同じです。\u003c/p\u003e\n\n\u003cblockquote\u003e\u003ctable\u003e\n\u003ctr\u003e\n\u003cth\u003eC#\u003c/th\u003e\n\u003cth\u003eJavaScript\u003c/th\u003e\n\u003cth\u003eF#\u003c/th\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nif (a == 1)\n  Console.WriteLine(\"1\");\nelse\n  Console.WriteLine(\"?\");\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nif (a == 1)\n  console.log(\"1\");\nelse\n  console.log(\"?\");\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nif a = 1 then\n  printfn \"1\"\nelse\n  printfn \"?\"\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/table\u003e\u003c/blockquote\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"ブロック\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%96%E3%83%AD%E3%83%83%E3%82%AF\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eブロック\u003c/h2\u003e\n\n\u003cp\u003eF#はインデントでブロックが構成されるので、C#のように複文での中括弧に相当するものはありません。\u003c/p\u003e\n\n\u003cblockquote\u003e\u003ctable\u003e\n\u003ctr\u003e\n\u003cth\u003eC#\u003c/th\u003e\n\u003cth\u003eJavaScript\u003c/th\u003e\n\u003cth\u003eF#\u003c/th\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nif (a == 1)\n{\n  Console.WriteLine(\"1\");\n  Console.WriteLine(\"!\");\n}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nif (a == 1) {\n  console.log(\"1\");\n  console.log(\"!\");\n}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nif a = 1 then\n  printfn \"1\"\n  printfn \"!\"\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/table\u003e\u003c/blockquote\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"三項演算子\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E4%B8%89%E9%A0%85%E6%BC%94%E7%AE%97%E5%AD%90\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e三項演算子\u003c/h2\u003e\n\n\u003cp\u003eF#の\u003ccode\u003eif\u003c/code\u003eはそのまま三項演算子としても使えます。（\u003ccode\u003eif\u003c/code\u003eは文ではなく式のため）\u003c/p\u003e\n\n\u003cblockquote\u003e\u003ctable\u003e\n\u003ctr\u003e\n\u003cth\u003eC#\u003c/th\u003e\n\u003cth\u003eJavaScript\u003c/th\u003e\n\u003cth\u003eF#\u003c/th\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nvar b = a == 1 ? 2 : 0;\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nlet b = a == 1 ? 2 : 0;\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nlet b = if a = 1 then 2 else 0\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/table\u003e\u003c/blockquote\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"複合技\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%A4%87%E5%90%88%E6%8A%80\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e複合技\u003c/h2\u003e\n\n\u003cp\u003eF#では最後に評価された値が返されるため、処理と代入を混ぜることができます。これは慣れると便利な技です。\u003c/p\u003e\n\n\u003cblockquote\u003e\u003ctable\u003e\n\u003ctr\u003e\n\u003cth\u003eC#\u003c/th\u003e\n\u003cth\u003eJavaScript\u003c/th\u003e\n\u003cth\u003eF#\u003c/th\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nint b;\nif (a == 1)\n{\n  Console.WriteLine(\"1\");\n  b = 2;\n}\nelse\n{\n  Console.WriteLine(\"?\");\n  b = 0;\n}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nlet b;\nif (a == 1) {\n  console.log(\"1\");\n  b = 2;\n} else {\n  console.log(\"?\");\n  b = 0;\n}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nlet b =\n  if a = 1 then\n    printfn \"1\"\n    2\n  else\n    printfn \"?\"\n    0\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/table\u003e\u003c/blockquote\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"タプル\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%BF%E3%83%97%E3%83%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eタプル\u003c/h2\u003e\n\n\u003cp\u003e条件分岐の結果、複数の値を代入するような処理を一気に書けます。うまくハマるととても簡潔になります。\u003c/p\u003e\n\n\u003cblockquote\u003e\u003ctable\u003e\n\u003ctr\u003e\n\u003cth\u003eC#\u003c/th\u003e\n\u003cth\u003eJavaScript\u003c/th\u003e\n\u003cth\u003eF#\u003c/th\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nint x, y;\nif (a == 1)\n{\n  x = 1;\n  y = 2;\n}\nelse\n{\n  x = 3;\n  y = 4;\n}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nlet x, y;\nif (a == 1) {\n  x = 1;\n  y = 2;\n} else {\n  x = 3;\n  y = 4;\n}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nlet x, y = if a = 1 then 1, 2 else 3, 4\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/table\u003e\u003c/blockquote\u003e\n\n\u003cp\u003eこの構文が分かりにくければ、括弧を付けて考えると良いかもしれません。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"fsharp\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eF#\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003elet\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"n\"\u003ea\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e \u003cspan class=\"k\"\u003ethen\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"k\"\u003eelse\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e4\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"関数\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E9%96%A2%E6%95%B0\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e関数\u003c/h1\u003e\n\n\u003cp\u003e説明の都合上、F#は冗長な構文から先に紹介します。\u003c/p\u003e\n\n\u003cblockquote\u003e\u003ctable\u003e\n\u003ctr\u003e\n\u003cth\u003eC#\u003c/th\u003e\n\u003cth\u003eJavaScript\u003c/th\u003e\n\u003cth\u003eF#\u003c/th\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nclass Test\n{\n  static int inc(int x)\n  {\n    return x + 1;\n  }\n  static int add(int x, int y)\n  {\n    return x + y;\n  }\n  static void Main()\n  {\n    Console.WriteLine(inc(1));\n    Console.WriteLine(add(1, 2));\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nfunction inc(x) {\n  return x + 1;\n}\nfunction add(x, y) {\n  return x + y;\n}\nconsole.log(inc(1));\nconsole.log(add(1, 2));\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nlet inc = fun x -\u0026gt; x + 1\nlet add = fun x y -\u0026gt; x + y\nprintfn \"%d\" (inc 1)\nprintfn \"%d\" (add 1 2)\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/table\u003e\u003c/blockquote\u003e\n\n\u003cp\u003eF#は変数の束縛と同じ構文で、関数が束縛されています。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"fsharp\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eF#（対比）\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003elet\u003c/span\u003e \u003cspan class=\"n\"\u003einc\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\n\u003cspan class=\"k\"\u003elet\u003c/span\u003e \u003cspan class=\"n\"\u003einc\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003efun\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"p\"\u003e-\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e右辺の \u003ccode\u003efun x -\u0026gt; x + 1\u003c/code\u003e は左辺に束縛されて名前が付くことから、単体では名前が無く、無名関数などと呼ばれます。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"ラムダ式\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%A9%E3%83%A0%E3%83%80%E5%BC%8F\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eラムダ式\u003c/h2\u003e\n\n\u003cp\u003eF#の書き方は、C#のラムダ式やJavaScriptのアロー関数式に相当します。\u003c/p\u003e\n\n\u003cblockquote\u003e\u003ctable\u003e\n\u003ctr\u003e\n\u003cth\u003eC#\u003c/th\u003e\n\u003cth\u003eJavaScript\u003c/th\u003e\n\u003cth\u003eF#\u003c/th\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nFunc\u0026lt;int, int\u0026gt; inc = x =\u0026gt; x + 1;\nFunc\u0026lt;int, int, int\u0026gt; add = (x, y) =\u0026gt; x + y;\nConsole.WriteLine(inc(1));\nConsole.WriteLine(add(1, 2));\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nlet inc = x =\u0026gt; x + 1;\nlet add = (x, y) =\u0026gt; x + y;\nconsole.log(inc(1));\nconsole.log(add(1, 2));\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nlet inc = fun x -\u0026gt; x + 1\nlet add = fun x y -\u0026gt; x + y\nprintfn \"%d\" (inc 1)\nprintfn \"%d\" (add 1 2)\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/table\u003e\u003c/blockquote\u003e\n\n\u003cp\u003eC#の\u003ccode\u003eFunc\u003c/code\u003eは冗長ですが、型推論が効かないため省略できません。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eC#\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003einc\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e  \u003cspan class=\"c1\"\u003e// エラー\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003eちなみにVB.NETでは匿名デリゲート型に型推論されます。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"vbnet\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eVB.NET\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eDim inc = Function(x%) x + 1\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e※ C#では引数や戻り値の型が同じデリゲート間でもキャストできませんが、VB.NETではできることから、匿名デリゲート型に割り当てても問題がないという判断だと思われます。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"糖衣構文\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E7%B3%96%E8%A1%A3%E6%A7%8B%E6%96%87\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e糖衣構文\u003c/h2\u003e\n\n\u003cp\u003e\u003ccode\u003efun\u003c/code\u003eを省略して引数を左辺に記述できます。通常はこちらを使います。\u003c/p\u003e\n\n\u003cblockquote\u003e\u003ctable\u003e\n\u003ctr\u003e\n\u003cth\u003eF# (funあり)\u003c/th\u003e\n\u003cth\u003eF# (funなし)\u003c/th\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nlet inc = fun x -\u0026gt; x + 1\nlet add = fun x y -\u0026gt; x + y\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nlet inc x = x + 1\nlet add x y = x + y\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/table\u003e\u003c/blockquote\u003e\n\n\u003cp\u003e\u003ccode\u003efun\u003c/code\u003eなしの方が便利です。最初に見せなかったのは、関数が値と同じように束縛されていることを示したかったためです。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"fsi\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#fsi\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003efsi\u003c/h2\u003e\n\n\u003cp\u003eF# Interactiveで色々な書き方を動作確認します。この手の簡単な確認にREPLは便利です。\u003c/p\u003e\n\n\u003cblockquote\u003e\u003ctable\u003e\n\u003ctr\u003e\n\u003cth\u003eF# Interactive\u003c/th\u003e\n\u003cth\u003eJavaScript (Node.js)\u003c/th\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nlet inc = fun x -\u0026gt; x + 1;;\ninc 1;;\n(inc 1);;\ninc(1);;\n(fun x -\u0026gt; x + 1) 1;;\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\ninc = x =\u0026gt; x + 1\ninc(1)\n(x =\u0026gt; x + 1)(1)\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/table\u003e\u003c/blockquote\u003e\n\n\u003cp\u003e※ 最後の例は関数を束縛せずにインラインで使っています。\u003ccode\u003efun\u003c/code\u003eを省略した構文では表現できません。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"unit\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#unit\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eunit\u003c/h2\u003e\n\n\u003cp\u003eC#での\u003ccode\u003evoid\u003c/code\u003eに相当するのが\u003ccode\u003eunit\u003c/code\u003eです。値としては\u003ccode\u003e()\u003c/code\u003eと表現します。\u003c/p\u003e\n\n\u003cblockquote\u003e\u003ctable\u003e\n\u003ctr\u003e\n\u003cth\u003eC#\u003c/th\u003e\n\u003cth\u003eJavaScript\u003c/th\u003e\n\u003cth\u003eF#\u003c/th\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nvoid test1() {}\nint test2() { return 1; }\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nfunction test1() {}\nfunction test2() { return 1; }\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nlet test1() = ()\nlet test2() = 1\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/table\u003e\u003c/blockquote\u003e\n\n\u003cp\u003eラムダ式などで書いてみます。\u003c/p\u003e\n\n\u003cblockquote\u003e\u003ctable\u003e\n\u003ctr\u003e\n\u003cth\u003eC#\u003c/th\u003e\n\u003cth\u003eJavaScript\u003c/th\u003e\n\u003cth\u003eF#\u003c/th\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nAction test1 = () =\u0026gt; {};\nFunc\u0026lt;int\u0026gt; test2 = () =\u0026gt; 1;\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nlet test1 = () =\u0026gt; {};\nlet test2 = () =\u0026gt; 1;\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nlet test1 = fun () -\u0026gt; ()\nlet test2 = fun () -\u0026gt; 1\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/table\u003e\u003c/blockquote\u003e\n\n\u003cp\u003e変数（\u003ccode\u003etest3\u003c/code\u003e）と関数（\u003ccode\u003etest4\u003c/code\u003e）を比べてみます。\u003c/p\u003e\n\n\u003cblockquote\u003e\u003ctable\u003e\n\u003ctr\u003e\n\u003cth\u003eC#\u003c/th\u003e\n\u003cth\u003eJavaScript\u003c/th\u003e\n\u003cth\u003eF#\u003c/th\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nint test3 = 0;\nFunc\u0026lt;int\u0026gt; test4 = () =\u0026gt; 0;\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nlet test3 = 0;\nlet test4 = () =\u0026gt; 0;\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nlet test3 = 0\nlet test4() = 0\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/table\u003e\u003c/blockquote\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"ignore\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#ignore\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eignore\u003c/h2\u003e\n\n\u003cp\u003eF#では関数の戻り値を捨てると警告されます。\u003c/p\u003e\n\n\u003cblockquote\u003e\u003ctable\u003e\n\u003ctr\u003e\n\u003cth\u003eC#\u003c/th\u003e\n\u003cth\u003eJavaScript\u003c/th\u003e\n\u003cth\u003eF#\u003c/th\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nFunc\u0026lt;int\u0026gt; a = () =\u0026gt; 1;\na();  // 警告なし\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nlet a = () =\u0026gt; 1;\na();  // 警告なし\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nlet a() = 1\na()  // 警告\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/table\u003e\u003c/blockquote\u003e\n\n\u003cp\u003e警告を抑えるため、\u003ccode\u003eignore\u003c/code\u003e関数で明示的に無視します。C言語で\u003ccode\u003evoid\u003c/code\u003eにキャストする流儀に似ています。\u003c/p\u003e\n\n\u003cblockquote\u003e\u003ctable\u003e\n\u003ctr\u003e\n\u003cth\u003eC言語\u003c/th\u003e\n\u003cth\u003eF#\u003c/th\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nint a() { return 1; }\nvoid test() { (void)a(); }\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nlet a() = 1\nignore(a())\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/table\u003e\u003c/blockquote\u003e\n\n\u003cp\u003e※ gccには戻り値を無視したときに警告する \u003ccode\u003e__attribute__((warn_unused_result))\u003c/code\u003e があります。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"パイプライン演算子\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%91%E3%82%A4%E3%83%97%E3%83%A9%E3%82%A4%E3%83%B3%E6%BC%94%E7%AE%97%E5%AD%90\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eパイプライン演算子\u003c/h2\u003e\n\n\u003cp\u003e引数と関数を分離するパイプライン演算子というものがあります。ネストした引数の括弧を外してフラットに記述するのに使います。戻り値の警告を受けて\u003ccode\u003eignore\u003c/code\u003eを追加するときに便利です。\u003c/p\u003e\n\n\u003cblockquote\u003e\u003ctable\u003e\n\u003ctr\u003e\n\u003cth\u003eF#\u003c/th\u003e\n\u003cth\u003eF# (右向き)\u003c/th\u003e\n\u003cth\u003eF# (左向き)\u003c/th\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nignore(a())\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\na() |\u0026gt; ignore\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nignore \u0026lt;| a()\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/table\u003e\u003c/blockquote\u003e\n\n\u003cp\u003e右向きのパイプライン演算子は、シェルのパイプのような感覚で関数の多重呼び出しに使えます。左向きはHaskellの\u003ccode\u003e$\u003c/code\u003eに似ていますが、連続して使うと\u003ccode\u003e$\u003c/code\u003eとは意味が変わるため（後述）、連続させるときは\u003ccode\u003e\u0026lt;\u0026lt;\u003c/code\u003e演算子による関数合成と併用します。\u003c/p\u003e\n\n\u003cblockquote\u003e\u003ctable\u003e\n\u003ctr\u003e\n\u003cth\u003eF#\u003c/th\u003e\n\u003cth\u003eF# (右向き)\u003c/th\u003e\n\u003cth\u003eF# (左向き)\u003c/th\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nfoo(bar(baz()))\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\n() |\u0026gt; baz |\u0026gt; bar |\u0026gt; foo\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nfoo \u0026lt;\u0026lt; bar \u0026lt;\u0026lt; baz \u0026lt;| ()\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/table\u003e\u003c/blockquote\u003e\n\n\u003cp\u003e\u003ccode\u003e\u0026lt;|\u003c/code\u003eを連続して使用すると、複数の引数を個別に適用する意味となります。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"fsharp\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eF#\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"n\"\u003eprintfn\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"%d,%s\"\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026lt;|\u003c/span\u003e \u003cspan class=\"mi\"\u003e5\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026lt;|\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"abc\"\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"再帰関数\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%86%8D%E5%B8%B0%E9%96%A2%E6%95%B0\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e再帰関数\u003c/h2\u003e\n\n\u003cp\u003eC#/JavaScriptでラムダ式を使わずに再帰で階乗を求めます。\u003c/p\u003e\n\n\u003cblockquote\u003e\u003ctable\u003e\n\u003ctr\u003e\n\u003cth\u003eC#\u003c/th\u003e\n\u003cth\u003eJavaScript\u003c/th\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nclass Test\n{\n  static int frac(int x)\n  {\n    return x \u0026lt; 1 ? 1 : x * frac(x - 1);\n  }\n  static void Main()\n  {\n    Console.WriteLine(frac(5));\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nfunction frac(x) {\n  return x \u0026lt; 1 ? 1 : x * frac(x - 1);\n}\nconsole.log(frac(5));\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/table\u003e\u003c/blockquote\u003e\n\n\u003cp\u003eこれをラムダ式で書きます。C#では自分自身が参照できなくなるため、一度\u003ccode\u003enull\u003c/code\u003eで初期化するという小手先の技が必要となります。JavaScriptは参照が動的に処理されるため問題ありません。F#では自分自身を参照するために専用の\u003ccode\u003erec\u003c/code\u003eキーワードが用意されています。\u003c/p\u003e\n\n\u003cblockquote\u003e\u003ctable\u003e\n\u003ctr\u003e\n\u003cth\u003eC#\u003c/th\u003e\n\u003cth\u003eJavaScript\u003c/th\u003e\n\u003cth\u003eF#\u003c/th\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nFunc\u0026lt;int, int\u0026gt; frac = null;\nfrac = x =\u0026gt;\n  x \u0026lt; 1 ? 1 : x * frac(x - 1);\nConsole.WriteLine(frac(5));\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nlet frac = x =\u0026gt;\n  x \u0026lt; 1 ? 1 : x * frac(x - 1);\nconsole.log(frac(5));\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nlet rec frac x =\n  if x \u0026lt; 1 then 1 else x * frac(x - 1)\nprintfn \"%d\" (frac 5)\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/table\u003e\u003c/blockquote\u003e\n\n\u003cp\u003e※ デフォルトで再帰可能になっていないのは、同名の変数で覆い隠すシャドウイングを考慮した言語設計のようです。F#の元になったOCamlについての記事を紹介します。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"https://twitter.com/camlspotter\" rel=\"nofollow noopener\" target=\"_blank\"\u003e@camlspotter\u003c/a\u003e: \u003ca href=\"http://d.hatena.ne.jp/camlspotter/20110509/1304933919\" rel=\"nofollow noopener\" target=\"_blank\"\u003eOCaml の let と let rec はなぜ別扱いになっているのか、決定版、もしくは OCaml 暦十何年だったか忘れたけど仕事で Haskell を一年使ってみた - Oh, you `re no (fun _ → more)\u003c/a\u003e 2011.05.09\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"前方参照\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%89%8D%E6%96%B9%E5%8F%82%E7%85%A7\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e前方参照\u003c/h2\u003e\n\n\u003cp\u003e一般論として用語を解説します。\u003c/p\u003e\n\n\u003cp\u003eパーサは上から下にコードを読み進めます。進行方向に沿って下が「前方」と表現されます。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e     後方\n1 aaaa↓\n2 bbbb↓\n3 cccc↓\n     前方\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e前方で定義されている関数にアクセス（参照）することを「前方参照」と呼びます。下の例では\u003ccode\u003etest()\u003c/code\u003eが前方参照されています。\u003c/p\u003e\n\n\u003cblockquote\u003e\u003ctable\u003e\n\u003ctr\u003e\n\u003cth\u003eC#\u003c/th\u003e\n\u003cth\u003eJavaScript\u003c/th\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nclass Test\n{\n  static void Main()\n  {\n    test();  // 前方参照\n  }\n  static void test()\n  {\n    Console.WriteLine(\"abc\");\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\ntest();  // 前方参照\n\nfunction test() {\n  console.log(\"abc\");\n}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/table\u003e\u003c/blockquote\u003e\n\n\u003cp\u003e※ 直感的には「上が前」のように感じられるので注意が必要です。C言語の前方宣言は呼び出し元から見て「前方にある宣言」ではなく、「前方参照を可能にするための宣言」という意味だと解釈できます。\u003c/p\u003e\n\n\u003cp\u003eF#は前方参照ができません。他の言語でもラムダ式だけで記述すると似たような状況になりますが、それと同じだと考えてください。\u003c/p\u003e\n\n\u003cblockquote\u003e\u003ctable\u003e\n\u003ctr\u003e\n\u003cth\u003eC#\u003c/th\u003e\n\u003cth\u003eJavaScript\u003c/th\u003e\n\u003cth\u003eF#\u003c/th\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\ntest();  // エラー\nAction test = () =\u0026gt;\n  Console.WriteLine(\"abc\");\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\ntest();  // エラー\nlet test = () =\u0026gt;\n  console.log(\"abc\");\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\ntest()  // エラー\nlet test() = printfn \"abc\"\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/table\u003e\u003c/blockquote\u003e\n\n\u003cp\u003eF#に前方宣言はありません。必ず後方（上）で定義する必要があります。\u003c/p\u003e\n\n\u003cblockquote\u003e\u003ctable\u003e\n\u003ctr\u003e\n\u003cth\u003eC#\u003c/th\u003e\n\u003cth\u003eJavaScript\u003c/th\u003e\n\u003cth\u003eF#\u003c/th\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nAction test = () =\u0026gt;\n  Console.WriteLine(\"abc\");\ntest();  // OK\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nlet test = () =\u0026gt;\n  console.log(\"abc\");\ntest()  // OK\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nlet test() = printfn \"abc\"\ntest()  // OK\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/table\u003e\u003c/blockquote\u003e\n\n\u003cp\u003eこれは強い制限のようにも感じられますが、コードを読んだり部分的に引用したりするときは、そこより上だけを見ておけば良いという利点があります。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"相互再帰\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E7%9B%B8%E4%BA%92%E5%86%8D%E5%B8%B0\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e相互再帰\u003c/h2\u003e\n\n\u003cp\u003e前方宣言はありませんが、相互に再帰する場合は特別な構文があります。\u003c/p\u003e\n\n\u003cp\u003eF#では\u003ccode\u003erec\u003c/code\u003eと\u003ccode\u003eand\u003c/code\u003eを使います。C#ではラムダ式を使わなければ特に問題はなく、JavaScriptでは動的に参照されるためアロー関数式でも特に意識する必要はありません。\u003c/p\u003e\n\n\u003cblockquote\u003e\u003ctable\u003e\n\u003ctr\u003e\n\u003cth\u003eC#\u003c/th\u003e\n\u003cth\u003eJavaScript\u003c/th\u003e\n\u003cth\u003eF#\u003c/th\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nvoid test1() { test2(); }\nvoid test2() { test1(); }\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nlet test1 = () =\u0026gt; test2();\nlet test2 = () =\u0026gt; test1();\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nlet rec test1() = test2()\nand test2() = test1()\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/table\u003e\u003c/blockquote\u003e\n\n\u003cp\u003eどうしても相互再帰が避けられないケースはありますが、その場合はクラスタとしてひとまとめに定義することが必要です。離して定義することはできません。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"関数内関数\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E9%96%A2%E6%95%B0%E5%86%85%E9%96%A2%E6%95%B0\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e関数内関数\u003c/h2\u003e\n\n\u003cp\u003eC#ではクラス直下のメソッドと、メソッド内のラムダ式の書式が大きく異なります。\u003c/p\u003e\n\n\u003cp\u003e※ C# 7ではローカル関数という機能が追加され、この制限が緩和されます。\u003c/p\u003e\n\n\u003cp\u003eF#やJavaScriptでは関数の中でも関数が定義できます。\u003c/p\u003e\n\n\u003cblockquote\u003e\u003ctable\u003e\n\u003ctr\u003e\n\u003cth\u003eC#\u003c/th\u003e\n\u003cth\u003eJavaScript\u003c/th\u003e\n\u003cth\u003eF#\u003c/th\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nclass Test\n{\n  static int inc1(int x)\n  {\n    return x + 1;\n  }\n  static void test()\n  {\n    Func\u0026lt;int, int\u0026gt; inc2 = x =\u0026gt; x + 1;\n    Console.WriteLine(inc1(1));\n    Console.WriteLine(inc2(1));\n  }\n  static void Main()\n  {\n    test();\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nfunction inc1(x) {\n  return x + 1;\n}\nfunction test() {\n  function inc2(x) {\n    return x + 1;\n  }\n  console.log(inc1(1));\n  console.log(inc2(1));\n}\ntest();\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nlet inc1 x = x + 1\nlet test() =\n  let inc2 x = x + 1\n  printfn \"%d\" (inc1 1)\n  printfn \"%d\" (inc2 1)\ntest()\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/table\u003e\u003c/blockquote\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"カリー化\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%AB%E3%83%AA%E3%83%BC%E5%8C%96\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eカリー化\u003c/h1\u003e\n\n\u003cp\u003e関数型で必ず話題になるカリー化を説明します。\u003c/p\u003e\n\n\u003cp\u003e※ とりあえずF#を使うだけなら必須というわけではありません。分かりにくければ飛ばしても構いません。\u003c/p\u003e\n\n\u003cp\u003e必要に応じて次の記事を参照すると良いでしょう。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"http://qiita.com/7shi/items/a0143daac77a205e7962\" id=\"reference-45504b7e82a512f098d8\"\u003eカリー化と部分適用（JavaScriptとHaskell）\u003c/a\u003e 2014.10.15\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"糖衣構文-1\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E7%B3%96%E8%A1%A3%E6%A7%8B%E6%96%87-1\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e糖衣構文\u003c/h2\u003e\n\n\u003cp\u003e以下の3種類はすべて同じ意味です。\u003c/p\u003e\n\n\u003col\u003e\n\u003cli\u003e\u003ccode\u003elet add = fun x -\u0026gt; fun y -\u0026gt; x + y\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003elet add = fun x y -\u0026gt; x + y\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003elet add x y = x + y\u003c/code\u003e\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003cp\u003e2と3は1の糖衣構文です。1をC#/JavaScriptに翻訳して呼び出してみます。\u003c/p\u003e\n\n\u003cblockquote\u003e\u003ctable\u003e\n\u003ctr\u003e\n\u003cth\u003eC#\u003c/th\u003e\n\u003cth\u003eJavaScript\u003c/th\u003e\n\u003cth\u003eF#\u003c/th\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nFunc\u0026lt;int, Func\u0026lt;int, int\u0026gt;\u0026gt; add =\n    x =\u0026gt; y =\u0026gt; x + y;\nConsole.WriteLine(add(1)(2));\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nlet add = x =\u0026gt; y =\u0026gt; x + y;\nconsole.log(add(1)(2));\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nlet add = fun x -\u0026gt; fun y -\u0026gt; x + y\nprintfn \"%d\" (add 1 2)\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/table\u003e\u003c/blockquote\u003e\n\n\u003cp\u003eラムダ式がネストしています。初見では分かりにくいですが、括弧を付けてみます。\u003c/p\u003e\n\n\u003cblockquote\u003e\u003ctable\u003e\n\u003ctr\u003e\n\u003cth\u003eC#\u003c/th\u003e\n\u003cth\u003eJavaScript\u003c/th\u003e\n\u003cth\u003eF#\u003c/th\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nFunc\u0026lt;int, Func\u0026lt;int, int\u0026gt;\u0026gt; add =\n    x =\u0026gt; (y =\u0026gt; x + y);\nConsole.WriteLine(add(1)(2));\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nlet add = x =\u0026gt; (y =\u0026gt; x + y);\nconsole.log(add(1)(2));\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nlet add = fun x -\u0026gt; (fun y -\u0026gt; x + y)\nprintfn \"%d\" (add 1 2)\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/table\u003e\u003c/blockquote\u003e\n\n\u003cp\u003eJavaScriptでは\u003ccode\u003efunction\u003c/code\u003eで記述した方が分かりやすいかもしれません。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"js\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eJavaScript\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"kd\"\u003elet\u003c/span\u003e \u003cspan class=\"nx\"\u003eadd\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"kd\"\u003efunction\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"kd\"\u003efunction\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"nx\"\u003ex\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"nx\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e};\u003c/span\u003e\n\u003cspan class=\"p\"\u003e};\u003c/span\u003e\n\u003cspan class=\"nx\"\u003econsole\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003elog\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eadd\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e)(\u003c/span\u003e\u003cspan class=\"mi\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"部分適用\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E9%83%A8%E5%88%86%E9%81%A9%E7%94%A8\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e部分適用\u003c/h2\u003e\n\n\u003cp\u003eC#/JavaScriptでは引数を1つずつ渡していますが（\u003ccode\u003eadd(1)(2)\u003c/code\u003e）、引数を片方だけ渡すこともできます。こうして得られた中間的な関数に残りの引数を渡すと最終的な結果が得られます。\u003c/p\u003e\n\n\u003cblockquote\u003e\u003ctable\u003e\n\u003ctr\u003e\n\u003cth\u003eC#\u003c/th\u003e\n\u003cth\u003eJavaScript\u003c/th\u003e\n\u003cth\u003eF#\u003c/th\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nvar inc = add(1);\nConsole.WriteLine(inc(2));\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nlet inc = add(1);\nconsole.log(inc(2));\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nlet inc = add 1\nprintfn \"%d\" (inc 2)\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/table\u003e\u003c/blockquote\u003e\n\n\u003cp\u003eこのように引数を途中まで渡して関数を得ることを部分適用と呼びます。部分適用できるように関数の中に関数を入れる形式をカリー化と呼びます。\u003c/p\u003e\n\n\u003cp\u003e※ 部分適用が誤ってカリー化と呼ばれることがあるので注意が必要です。\u003c/p\u003e\n\n\u003cp\u003eF#では冒頭で挙げた1～3のすべてがカリー化された関数で部分適用できます。カリー化されない関数を定義するには、引数をコンマで区切りタプルとします。引数をタプルで取る関数でもラムダ式でラップすれば擬似的に部分適用は可能です。\u003c/p\u003e\n\n\u003cblockquote\u003e\u003ctable\u003e\n\u003ctr\u003e\n\u003cth\u003eF# (カリー化)\u003c/th\u003e\n\u003cth\u003eF# (非カリー化)\u003c/th\u003e\n\u003cth\u003eC# (非カリー化)\u003c/th\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nlet add x y = x + y\nlet inc = add 1\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nlet add(x, y) = x + y\nlet inc = fun y -\u0026gt; add(1, y)\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nFunc\u0026lt;int, int, int\u0026gt; add = (x, y) =\u0026gt; x + y;\nFunc\u0026lt;int, int\u0026gt; inc = y =\u0026gt; add(1, y);\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/table\u003e\u003c/blockquote\u003e\n\n\u003cp\u003e最初の方で.NETのメソッドの呼び方がネイティブ関数とは異なると述べましたが、引数がタプルとして扱われカリー化されていないためです。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"配列\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E9%85%8D%E5%88%97\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e配列\u003c/h1\u003e\n\n\u003cp\u003eC#ではサイズを指定して配列を作るとゼロで初期化されます。JavaScriptではTypedArrayで同様の処理が可能です。F#では専用の関数を使用します。\u003c/p\u003e\n\n\u003cblockquote\u003e\u003ctable\u003e\n\u003ctr\u003e\n\u003cth\u003eC#\u003c/th\u003e\n\u003cth\u003eJavaScript\u003c/th\u003e\n\u003cth\u003eF#\u003c/th\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nvar a = new int[5];\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nlet a = new Int32Array(5);\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nlet a = Array.zeroCreate\u0026lt;int\u0026gt; 5\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/table\u003e\u003c/blockquote\u003e\n\n\u003cp\u003e初期値を指定して配列を作成する方法を示します。F#では要素の区切りはセミコロンなのに注意が必要です（コンマ区切りはタプルを意味するため）。また、F#では配列アクセスで添字の前にドットが必要です。\u003c/p\u003e\n\n\u003cblockquote\u003e\u003ctable\u003e\n\u003ctr\u003e\n\u003cth\u003eC#\u003c/th\u003e\n\u003cth\u003eJavaScript\u003c/th\u003e\n\u003cth\u003eF#\u003c/th\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nvar a = new[] {1, 2, 3, 4};\nConsole.WriteLine(a[2]);\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nvar a = [1, 2, 3, 4];\nconsole.log(a[2]);\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nlet a = [|1; 2; 3; 4|]\nprintfn \"%d\" a.[2]\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/table\u003e\u003c/blockquote\u003e\n\n\u003cp\u003eF#では配列をスライスできます。末尾の指定方法がJavaScriptとF#では異なるのに注意します。C#では言語サポートがないため地道にコピーします。\u003c/p\u003e\n\n\u003cblockquote\u003e\u003ctable\u003e\n\u003ctr\u003e\n\u003cth\u003eC#\u003c/th\u003e\n\u003cth\u003eJavaScript\u003c/th\u003e\n\u003cth\u003eF#\u003c/th\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nvar b = new int[2];\nArray.Copy(a, 2, b, 0, 2);\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nlet b = a.slice(2, 4);\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e※ 4は末尾の添字+1\u003c/td\u003e\n\u003ctd\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nlet b = a.[2..3]\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e※ 3は末尾の添字\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/table\u003e\u003c/blockquote\u003e\n\n\u003cp\u003eJavaScriptとF#は文字列の切り出にもスライスが使用可能です。\u003c/p\u003e\n\n\u003cblockquote\u003e\u003ctable\u003e\n\u003ctr\u003e\n\u003cth\u003eC#\u003c/th\u003e\n\u003cth\u003eJavaScript\u003c/th\u003e\n\u003cth\u003eF#\u003c/th\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\n\"abcde\".Substring(2, 2);\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\n\"abcde\".slice(2, 4);\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\n\"abcde\".[2..3]\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/table\u003e\u003c/blockquote\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"ループ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%AB%E3%83%BC%E3%83%97\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eループ\u003c/h1\u003e\n\n\u003cp\u003eF#には\u003ccode\u003ewhile\u003c/code\u003eと\u003ccode\u003efor\u003c/code\u003eはありますが、\u003ccode\u003econtinue\u003c/code\u003eと\u003ccode\u003ebreak\u003c/code\u003eはありません。再帰で書き直す方法を覚えておくと潰しが効きます。考え方としてはループ変数を引数に見立てて、条件を満たせば再帰的に自分を呼び出します。\u003c/p\u003e\n\n\u003cblockquote\u003e\u003ctable\u003e\n\u003ctr\u003e\n\u003cth\u003eC#\u003c/th\u003e\n\u003cth\u003eJavaScript\u003c/th\u003e\n\u003cth\u003eF#\u003c/th\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nvar r = new Random();\nfor (int i = 0; i \u0026lt; 10; i++)\n{\n  var v = r.Next(10);\n  Console.WriteLine(v);\n  if (v \u0026gt; 5) break;\n}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nfor (let i = 0; i \u0026lt; 10; i++) {\n  let v = (Math.random() * 10) | 0;\n  console.log(v);\n  if (v \u0026gt; 5) break;\n}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nlet r = new Random()\nlet rec loop i =\n  if i \u0026lt; 10 then\n    let v = r.Next(10)\n    printfn \"%d\" v\n    if not(v \u0026gt; 5) then\n      loop (i + 1)\nloop 0\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/table\u003e\u003c/blockquote\u003e\n\n\u003cp\u003e※ 再帰呼び出しは\u003ccode\u003econtinue\u003c/code\u003eに相当して、明示的に\u003ccode\u003econtinue\u003c/code\u003eを書かないとループから抜けてしまうと解釈できます。ただし\u003ccode\u003econtinue\u003c/code\u003eと違って後続の処理が打ち切られるわけではないため、再帰呼び出しの後に処理が来ないように注意する必要があります。後に処理が来ない再帰を\u003cstrong\u003e末尾再帰\u003c/strong\u003eと呼びます。\u003c/p\u003e\n\n\u003cp\u003e再帰を使わずに\u003ccode\u003ewhile\u003c/code\u003eで無理やり実装することもできます。うまく書けないときはこの手で逃げることがあるかもしれません。\u003c/p\u003e\n\n\u003cblockquote\u003e\u003ctable\u003e\n\u003ctr\u003e\n\u003cth\u003eC#\u003c/th\u003e\n\u003cth\u003eJavaScript\u003c/th\u003e\n\u003cth\u003eF#\u003c/th\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nvar r = new Random();\nint i = 0, v = 0;\nwhile (i \u0026lt; 10 \u0026amp;\u0026amp; !(v \u0026gt; 5))\n{\n  v = r.Next(10);\n  Console.WriteLine(v);\n  i++;\n}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nlet i = 0, v = 0;\nwhile (i \u0026lt; 10 \u0026amp;\u0026amp; !(v \u0026gt; 5)) {\n  v = (Math.random() * 10) | 0;\n  console.log(v);\n  i++;\n}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nlet r = new Random()\nlet mutable i, v = 0, 0\nwhile i \u0026lt; 10 \u0026amp;\u0026amp; not(v \u0026gt; 5) do\n  v \u0026lt;- r.Next(10)\n  printfn \"%d\" v\n  i \u0026lt;- i + 1\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/table\u003e\u003c/blockquote\u003e\n\n\u003cp\u003e※ この記事では取り上げませんが、F#にはループの代用となる様々な関数が用意されており、本来そちらを使うことが推奨されます。しかしそういったものがうまく適用できないときは、最終手段としてここで説明したような方法でどうにかすることもあるでしょう。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"複雑な例\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%A4%87%E9%9B%91%E3%81%AA%E4%BE%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e複雑な例\u003c/h2\u003e\n\n\u003cp\u003e標準入力から文字列を読み取り、先頭から連続する数字だけを抜き出して表示する例を示します。C#では代入した値をそのまま評価できますが、F#ではできないため工夫が必要です。JavaScriptはNode.jsで示します。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eC#\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003eline\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003ewhile\u003c/span\u003e \u003cspan class=\"p\"\u003e((\u003c/span\u003e\u003cspan class=\"n\"\u003eline\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eConsole\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eReadLine\u003c/span\u003e\u003cspan class=\"p\"\u003e())\u003c/span\u003e \u003cspan class=\"p\"\u003e!=\u003c/span\u003e \u003cspan class=\"k\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ei\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"n\"\u003eline\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eLength\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e++)\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(!\u003c/span\u003e\u003cspan class=\"n\"\u003eChar\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eIsNumber\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eline\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e]))\u003c/span\u003e \u003cspan class=\"k\"\u003ebreak\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"n\"\u003eConsole\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWriteLine\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eline\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSubstring\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"js\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eJavaScript(Node.js)\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"kd\"\u003elet\u003c/span\u003e \u003cspan class=\"nx\"\u003eisDigit\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003ech\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003e0\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;=\u003c/span\u003e \u003cspan class=\"nx\"\u003ech\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e \u003cspan class=\"nx\"\u003ech\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;=\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003e9\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"kd\"\u003elet\u003c/span\u003e \u003cspan class=\"nx\"\u003eloop\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"kd\"\u003efunction\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"kd\"\u003elet\u003c/span\u003e \u003cspan class=\"nx\"\u003eline\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"k\"\u003ewhile\u003c/span\u003e \u003cspan class=\"p\"\u003e((\u003c/span\u003e\u003cspan class=\"nx\"\u003eline\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003eyield\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e!=\u003c/span\u003e \u003cspan class=\"kc\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"kd\"\u003elet\u003c/span\u003e \u003cspan class=\"nx\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003ei\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"nx\"\u003ei\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"nx\"\u003eline\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003elength\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"nx\"\u003ei\u003c/span\u003e\u003cspan class=\"o\"\u003e++\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n      \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"o\"\u003e!\u003c/span\u003e\u003cspan class=\"nx\"\u003eisDigit\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eline\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nx\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e]))\u003c/span\u003e \u003cspan class=\"k\"\u003ebreak\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"nx\"\u003econsole\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003elog\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eline\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eslice\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}();\u003c/span\u003e\n\u003cspan class=\"nx\"\u003eloop\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003enext\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n\u003cspan class=\"kd\"\u003elet\u003c/span\u003e \u003cspan class=\"nx\"\u003erl\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003erequire\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003ereadline\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nx\"\u003ecreateInterface\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003eprocess\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003estdin\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eprocess\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003estdout\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kc\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"nx\"\u003erl\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eon\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003eline\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eline\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"nx\"\u003eloop\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003enext\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eline\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n\u003cspan class=\"nx\"\u003erl\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eon\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003eclose\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"nx\"\u003eloop\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003enext\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kc\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"fsharp\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eF#\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003elet\u003c/span\u003e \u003cspan class=\"k\"\u003erec\u003c/span\u003e \u003cspan class=\"n\"\u003eloop\u003c/span\u003e\u003cspan class=\"bp\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e\n  \u003cspan class=\"k\"\u003elet\u003c/span\u003e \u003cspan class=\"n\"\u003eline\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nn\"\u003eConsole\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nc\"\u003eReadLine\u003c/span\u003e\u003cspan class=\"bp\"\u003e()\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"n\"\u003eline\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026lt;\u0026gt;\u003c/span\u003e \u003cspan class=\"k\"\u003enull\u003c/span\u003e \u003cspan class=\"k\"\u003ethen\u003c/span\u003e\n    \u003cspan class=\"k\"\u003elet\u003c/span\u003e \u003cspan class=\"k\"\u003erec\u003c/span\u003e \u003cspan class=\"n\"\u003eloop2\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e\n      \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"n\"\u003eline\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nc\"\u003eLength\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e \u003cspan class=\"nn\"\u003eChar\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nc\"\u003eIsNumber\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eline\u003c/span\u003e\u003cspan class=\"o\"\u003e.[\u003c/span\u003e\u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"o\"\u003e])\u003c/span\u003e \u003cspan class=\"k\"\u003ethen\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eloop2\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ei\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n      \u003cspan class=\"k\"\u003eelse\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eline\u003c/span\u003e\u003cspan class=\"o\"\u003e.[\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e \u003cspan class=\"p\"\u003e..\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e \u003cspan class=\"p\"\u003e-\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eprintfn\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"%s\"\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eloop2\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eloop\u003c/span\u003e\u003cspan class=\"bp\"\u003e()\u003c/span\u003e\n\u003cspan class=\"n\"\u003eloop\u003c/span\u003e\u003cspan class=\"bp\"\u003e()\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e※ Windowsで標準入力読み切り型プログラムを終了させるには [Ctrl]+[Z] [Enter] と操作しますが、Node.jsでは [Ctrl]+[D] です。\u003c/p\u003e\n\n\u003cp\u003eNode.jsでの標準入力の扱いは次の記事を参考にしました。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"http://qiita.com/hiroqn@github/items/c927bc97780c34eda562\" id=\"reference-738fb68b7690aa464f96\"\u003eNode.jsの標準入力と\u003c/a\u003e 2013.10.03\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"参照\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%8F%82%E7%85%A7\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e参照\u003c/h1\u003e\n\n\u003cp\u003eF#では\u003ccode\u003emutable\u003c/code\u003eの親戚のような参照という型があります。参照は\u003ccode\u003eref\u003c/code\u003eというキーワードを指定するとその場でインスタンスが作られます。\u003c/p\u003e\n\n\u003cp\u003e※ C#で引数を参照で渡すための\u003ccode\u003eref\u003c/code\u003eとは別物です。\u003c/p\u003e\n\n\u003cp\u003e値へのアクセスはプロパティによる方法と演算子による方法があります。演算子の方がよく使われます。\u003ccode\u003e!\u003c/code\u003e は参照剥がし（デリファレンス）演算子で、C#の否定演算子とは無関係です。参照への代入は \u003ccode\u003e:=\u003c/code\u003e です。\u003c/p\u003e\n\n\u003cblockquote\u003e\u003ctable\u003e\n\u003ctr\u003e\n\u003cth\u003eC#\u003c/th\u003e\n\u003cth\u003eF# (mutable)\u003c/th\u003e\n\u003cth\u003eF# (参照・プロパティ)\u003c/th\u003e\n\u003cth\u003eF# (参照・演算子)\u003c/th\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nint a = 1;\nConsole.WriteLine(a);\na = 2;\nConsole.WriteLine(a);\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nlet mutable a = 1\nprintfn \"%d\" a\na \u0026lt;- 2\nprintfn \"%d\" a\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nlet b = ref 1\nprintfn \"%d\" b.Value\nb.Value \u0026lt;- 2\nprintfn \"%d\" b.Value\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nlet b = ref 1\nprintfn \"%d\" !b\nb := 2\nprintfn \"%d\" !b\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/table\u003e\u003c/blockquote\u003e\n\n\u003cp\u003eC#よりもC++で説明した方が分かりやすいかもしれません。比較の都合上、C++は参照ではなくポインタで示します。C#でもポインタは使えますが、1要素の配列で表現する方が簡単なのでその方法で示します。\u003c/p\u003e\n\n\u003cblockquote\u003e\u003ctable\u003e\n\u003ctr\u003e\n\u003cth\u003eC++\u003c/th\u003e\n\u003cth\u003eC#\u003c/th\u003e\n\u003cth\u003eJavaScript\u003c/th\u003e\n\u003cth\u003eF#\u003c/th\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nint *b = new int(1);\nprintf(\"%d\\n\", *b);\n*b = 2;\nprintf(\"%d\\n\", *b);\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nint[] b = new[] {1};\nConsole.WriteLine(b[0]);\nb[0] = 2;\nConsole.WriteLine(b[0]);\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nlet b = [1];\nconsole.log(b[0]);\nb[0] = 2;\nconsole.log(b[0]);\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nlet b = ref 1\nprintfn \"%d\" !b\nb := 2\nprintfn \"%d\" !b\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/table\u003e\u003c/blockquote\u003e\n\n\u003cp\u003e※ C++でも \u003ccode\u003e*b = 2;\u003c/code\u003e は \u003ccode\u003eb[0] = 2;\u003c/code\u003e に書き換えられます。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"クロージャ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%AF%E3%83%AD%E3%83%BC%E3%82%B8%E3%83%A3\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eクロージャ\u003c/h1\u003e\n\n\u003cp\u003e関数内関数から外のローカル変数にアクセスできます。これをレキシカルスコープと呼んで、変数への参照をキャプチャと表現します。キャプチャを伴った関数をクロージャと呼びます。\u003c/p\u003e\n\n\u003cblockquote\u003e\u003ctable\u003e\n\u003ctr\u003e\n\u003cth\u003eC#\u003c/th\u003e\n\u003cth\u003eJavaScript\u003c/th\u003e\n\u003cth\u003eF#\u003c/th\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nAction test1 = () =\u0026gt; {\n  var i = 0;\n  Action test2 = () =\u0026gt;\n    Console.WriteLine(i);\n  test2();\n};\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nlet test1 = () =\u0026gt; {\n  let i = 0;\n  let test2 = () =\u0026gt;\n    console.log(i);\n  test2();\n};\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nlet test1() =\n  let i = 0\n  let test2() =\n    printfn \"%d\" i\n  test2()\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/table\u003e\u003c/blockquote\u003e\n\n\u003cp\u003e上の例ではC#やJavaScriptでは値が変更可能な変数をキャプチャしていますが、F#では\u003ccode\u003emutable\u003c/code\u003eな変数はキャプチャできません。Javaでもラムダ式（匿名クラス）から\u003ccode\u003efinal\u003c/code\u003eを指定した変数しか参照できないのと似ています。\u003c/p\u003e\n\n\u003cp\u003e※ Java 8では初期化以外で値を触らなければ事実上の\u003ccode\u003efinal\u003c/code\u003eとしてコンパイルが通ります。下のコードでは意図的に\u003ccode\u003ei\u003c/code\u003eの値を変更しています。\u003c/p\u003e\n\n\u003cblockquote\u003e\u003ctable\u003e\n\u003ctr\u003e\n\u003cth\u003eF#\u003c/th\u003e\n\u003cth\u003eJava 8\u003c/th\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nlet test1() =\n  let mutable i = 0\n  let test2() =\n    printfn \"%d\" i  // エラー\n  i \u0026lt;- 1\n  test2()\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nvoid test1() {\n  int i = 0;\n  Runnable test2 = () -\u0026gt;\n    System.out.println(i);  // エラー\n  i = 1;\n  test2.run();\n}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/table\u003e\u003c/blockquote\u003e\n\n\u003cp\u003eF#では参照で回避します。Javaでは\u003ccode\u003efinal\u003c/code\u003eを付け、中身を変更可能にするため配列で包む回避策があります。\u003c/p\u003e\n\n\u003cblockquote\u003e\u003ctable\u003e\n\u003ctr\u003e\n\u003cth\u003eF#\u003c/th\u003e\n\u003cth\u003eJava 8\u003c/th\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nlet test1() =\n  let i = ref 0\n  let test2() =\n    printfn \"%d\" !i\n  i := 1\n  test2()\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nvoid test1() {\n  final int i[] = {0};\n  Runnable test2 = () -\u0026gt;\n    System.out.println(i[0]);\n  i[0] = 1;\n  test2.run();\n}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/table\u003e\u003c/blockquote\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"理由\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E7%90%86%E7%94%B1\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e理由\u003c/h2\u003e\n\n\u003cp\u003eローカルの\u003ccode\u003emutable\u003c/code\u003e変数はスタックに確保されるのに対し、参照の実体はヒープに確保されます。スタックに確保された変数はスコープアウト時に破棄されます。しかしクロージャにキャプチャされた変数の寿命はスコープに縛られないため、参照によりヒープに確保して解放はGCに任せることで、スコープアウト問題を回避しています。\u003c/p\u003e\n\n\u003cp\u003eC#ではキャプチャされる変数はコンパイラが自動的に扱い方を変えるためこの制限がありません。F#では敢えてエラーにしていると思われます。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"クラス\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%AF%E3%83%A9%E3%82%B9\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eクラス\u003c/h1\u003e\n\n\u003cp\u003eF#とC#で構文がかなり違いますが、\u003ccode\u003eprotected\u003c/code\u003eや入れ子にされた型がない以外はほぼ同じことが表現できます。JavaScriptは色々な書き方ができますが、ここではF#との対比の都合上\u003ccode\u003eclass\u003c/code\u003eを使わない古い書き方で示します。\u003c/p\u003e\n\n\u003cblockquote\u003e\u003ctable\u003e\n\u003ctr\u003e\n\u003cth\u003eC#\u003c/th\u003e\n\u003cth\u003eJavaScript\u003c/th\u003e\n\u003cth\u003eF#\u003c/th\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nclass Num\n{\n  private int num = 0;\n  public void Next()\n  {\n    Console.WriteLine(++num);\n  }\n}\nclass Test\n{\n  static void Main()\n  {\n    var n = new Num();\n    for (int i = 0; i \u0026lt; 5; i++)\n      n.Next();\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nfunction Num() {\n  this.num = 0;\n  this.Next = function() {\n    console.log(++this.num);\n  };\n}\nlet n = new Num();\nfor (let i = 0; i \u0026lt; 5; i++)\n  n.Next();\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\ntype Num() =\n  let mutable num = 0\n  member this.Next() =\n    num \u0026lt;- num + 1\n    printfn \"%d\" num\nlet n = Num()\nfor i = 0 to 4 do\n  n.Next()\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/table\u003e\u003c/blockquote\u003e\n\n\u003cp\u003e※ JavaScriptは\u003ccode\u003efunction\u003c/code\u003eとアロー記法では\u003ccode\u003ethis\u003c/code\u003eの扱いが異なります。メソッド内で\u003ccode\u003ethis\u003c/code\u003eを使う場合は\u003ccode\u003efunction\u003c/code\u003eを使用します。\u003c/p\u003e\n\n\u003cp\u003eF#でアクセス制御を省略したときのデフォルトは、\u003ccode\u003elet\u003c/code\u003eが\u003ccode\u003eprivate\u003c/code\u003e、\u003ccode\u003emember\u003c/code\u003eが\u003ccode\u003epublic\u003c/code\u003eとなります。\u003ccode\u003etype\u003c/code\u003e名の後の\u003ccode\u003e()\u003c/code\u003eはコンストラクタの引数を表しています。JavaScriptは関数の引数がそのままコンストラクタの引数として使われていて、F#と書き方が似ていることに注目してください。\u003c/p\u003e\n\n\u003cp\u003eF#ではインスタンス生成に\u003ccode\u003enew\u003c/code\u003eは不要です。\u003ccode\u003eIDisposable\u003c/code\u003eを実装したクラスでは\u003ccode\u003enew\u003c/code\u003eを付けないと警告されますが、それ以外では\u003ccode\u003enew\u003c/code\u003eを付けると警告されます。\u003c/p\u003e\n\n\u003cp\u003e※ \u003ccode\u003eIDisposable\u003c/code\u003eかどうか毎回調べると面倒なので、個人的にはデフォルトで省略して、警告されたら付けるという運用をしています。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"コンストラクタ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%B3%E3%83%B3%E3%82%B9%E3%83%88%E3%83%A9%E3%82%AF%E3%82%BF\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eコンストラクタ\u003c/h2\u003e\n\n\u003cp\u003eコンストラクタで引数を処理する例を示します。JavaScriptで引数をそのままキャプチャしているのに注目してください（\u003ccode\u003ethis\u003c/code\u003eを使用しないためアロー記法）。\u003c/p\u003e\n\n\u003cblockquote\u003e\u003ctable\u003e\n\u003ctr\u003e\n\u003cth\u003eC#\u003c/th\u003e\n\u003cth\u003eJavaScript\u003c/th\u003e\n\u003cth\u003eF#\u003c/th\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nclass Num\n{\n  private int num = 0;\n  public Num(int n)\n  {\n    num = n;\n  }\n  public void Next()\n  {\n    Console.WriteLine(++num);\n  }\n}\nclass Test\n{\n  static void Main()\n  {\n    var n = new Num(5);\n    for (int i = 0; i \u0026lt; 5; i++)\n      n.Next();\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nfunction Num(num) {\n  this.Next = () =\u0026gt;\n    console.log(++num);\n}\nlet n = new Num(5);\nfor (let i = 0; i \u0026lt; 5; i++)\n  n.Next();\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\ntype Num(n) =\n  let mutable num = n\n  member this.Next() =\n    num \u0026lt;- num + 1\n    printfn \"%d\" num\nlet n = Num 5\nfor i = 0 to 4 do\n    n.Next()\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/table\u003e\u003c/blockquote\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"クロージャと比較\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%AF%E3%83%AD%E3%83%BC%E3%82%B8%E3%83%A3%E3%81%A8%E6%AF%94%E8%BC%83\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eクロージャと比較\u003c/h2\u003e\n\n\u003cp\u003eクロージャをクラスの代わりに使って比較してみます。F#は一旦参照で受けるため冗長になっていますが、C#やJavaScriptはその必要がないため単純です。JavaScriptとF#はクラスの書き方とよく似ているのに注目してください。\u003c/p\u003e\n\n\u003cblockquote\u003e\u003ctable\u003e\n\u003ctr\u003e\n\u003cth\u003eC#\u003c/th\u003e\n\u003cth\u003eJavaScript\u003c/th\u003e\n\u003cth\u003eF#\u003c/th\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nFunc\u0026lt;int, Action\u0026gt; Num = num =\u0026gt;\n  () =\u0026gt; Console.WriteLine(++num);\nvar next = Num(5);\nfor (int i = 0; i \u0026lt; 5; i++)\n  next();\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nfunction Num(num) {\n  return () =\u0026gt;\n    console.log(++num);\n}\nlet next = Num(5);\nfor (let i = 0; i \u0026lt; 5; i++)\n  next();\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003ctd\u003e\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\nlet Num(n) =\n  let num = ref n\n  fun () -\u0026gt;\n    num := !num + 1\n    printfn \"%d\" !num\nlet next = Num 5\nfor i = 0 to 4 do\n  next()\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/table\u003e\u003c/blockquote\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"多態\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%A4%9A%E6%85%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e多態\u003c/h1\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"サブクラスによるオーバーライド\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%B5%E3%83%96%E3%82%AF%E3%83%A9%E3%82%B9%E3%81%AB%E3%82%88%E3%82%8B%E3%82%AA%E3%83%BC%E3%83%90%E3%83%BC%E3%83%A9%E3%82%A4%E3%83%89\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eサブクラスによるオーバーライド\u003c/h2\u003e\n\n\u003cp\u003e数字と足し算のAST（抽象構文木）の例を示します。JavaScriptは継承ではなくダックタイピングで実装します。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eC#\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eabstract\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eVal\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eabstract\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003eValue\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eNum\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eVal\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003enum\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003eNum\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003en\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"n\"\u003enum\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003en\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eoverride\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003eValue\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003enum\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eAdd\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eVal\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003eVal\u003c/span\u003e \u003cspan class=\"n\"\u003ea\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eb\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003eAdd\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eVal\u003c/span\u003e \u003cspan class=\"n\"\u003ea\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eVal\u003c/span\u003e \u003cspan class=\"n\"\u003eb\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ea\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ea\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eb\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eb\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eoverride\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003eValue\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eget\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003ea\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eValue\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"n\"\u003eb\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eValue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eTest\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"k\"\u003estatic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eMain\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eexpr\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eAdd\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eNum\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eNum\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eConsole\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWriteLine\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eexpr\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eValue\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"js\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eJavaScript\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"kd\"\u003efunction\u003c/span\u003e \u003cspan class=\"nx\"\u003eNum\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003enum\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"nb\"\u003eObject\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003edefineProperty\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003eValue\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"na\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"nx\"\u003enum\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e});\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"kd\"\u003efunction\u003c/span\u003e \u003cspan class=\"nx\"\u003eAdd\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003ea\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eb\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"nb\"\u003eObject\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003edefineProperty\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003eValue\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"na\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"nx\"\u003ea\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eValue\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"nx\"\u003eb\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eValue\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e});\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"kd\"\u003elet\u003c/span\u003e \u003cspan class=\"nx\"\u003eexpr\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nx\"\u003eAdd\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nx\"\u003eNum\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nx\"\u003eNum\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n\u003cspan class=\"nx\"\u003econsole\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003elog\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eexpr\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eValue\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"fsharp\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eF#\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"p\"\u003e[\u0026lt;\u003c/span\u003e\u003cspan class=\"nc\"\u003eAbstractClass\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;]\u003c/span\u003e\n\u003cspan class=\"k\"\u003etype\u003c/span\u003e \u003cspan class=\"nc\"\u003eVal\u003c/span\u003e\u003cspan class=\"bp\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eabstract\u003c/span\u003e \u003cspan class=\"nc\"\u003eValue\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e\n\u003cspan class=\"k\"\u003etype\u003c/span\u003e \u003cspan class=\"nc\"\u003eNum\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003enum\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e\n  \u003cspan class=\"k\"\u003einherit\u003c/span\u003e \u003cspan class=\"nc\"\u003eVal\u003c/span\u003e\u003cspan class=\"bp\"\u003e()\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eoverride\u003c/span\u003e \u003cspan class=\"n\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nc\"\u003eValue\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003enum\u003c/span\u003e\n\u003cspan class=\"k\"\u003etype\u003c/span\u003e \u003cspan class=\"nc\"\u003eAdd\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ea\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nc\"\u003eVal\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eb\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nc\"\u003eVal\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e\n  \u003cspan class=\"k\"\u003einherit\u003c/span\u003e \u003cspan class=\"nc\"\u003eVal\u003c/span\u003e\u003cspan class=\"bp\"\u003e()\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eoverride\u003c/span\u003e \u003cspan class=\"n\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nc\"\u003eValue\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ea\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nc\"\u003eValue\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"n\"\u003eb\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nc\"\u003eValue\u003c/span\u003e\n\u003cspan class=\"k\"\u003elet\u003c/span\u003e \u003cspan class=\"n\"\u003eexpr\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nc\"\u003eAdd\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nc\"\u003eNum\u003c/span\u003e \u003cspan class=\"mi\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nc\"\u003eNum\u003c/span\u003e \u003cspan class=\"mi\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"n\"\u003eprintfn\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"%d\"\u003c/span\u003e \u003cspan class=\"n\"\u003eexpr\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nc\"\u003eValue\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"判別共用体\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%88%A4%E5%88%A5%E5%85%B1%E7%94%A8%E4%BD%93\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e判別共用体\u003c/h2\u003e\n\n\u003cp\u003eF#には多態を簡潔に表現する判別共用体というものがあります。クラスごとの評価関数を個別にオーバーライドするのではなく、一箇所にまとめて書くスタイルです。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"fsharp\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eF#\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003etype\u003c/span\u003e \u003cspan class=\"nc\"\u003eVal\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e\n\u003cspan class=\"p\"\u003e|\u003c/span\u003e \u003cspan class=\"nc\"\u003eNum\u003c/span\u003e \u003cspan class=\"k\"\u003eof\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e\n\u003cspan class=\"p\"\u003e|\u003c/span\u003e \u003cspan class=\"nc\"\u003eAdd\u003c/span\u003e \u003cspan class=\"k\"\u003eof\u003c/span\u003e \u003cspan class=\"nc\"\u003eVal\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"nc\"\u003eVal\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003elet\u003c/span\u003e \u003cspan class=\"k\"\u003erec\u003c/span\u003e \u003cspan class=\"n\"\u003eeval\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003efunction\u003c/span\u003e\n\u003cspan class=\"p\"\u003e|\u003c/span\u003e \u003cspan class=\"nc\"\u003eNum\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003enum\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e-\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003enum\u003c/span\u003e\n\u003cspan class=\"p\"\u003e|\u003c/span\u003e \u003cspan class=\"nc\"\u003eAdd\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ea\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eb\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e-\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eeval\u003c/span\u003e \u003cspan class=\"n\"\u003ea\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"n\"\u003eeval\u003c/span\u003e \u003cspan class=\"n\"\u003eb\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003elet\u003c/span\u003e \u003cspan class=\"n\"\u003eexpr\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nc\"\u003eAdd\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nc\"\u003eNum\u003c/span\u003e \u003cspan class=\"mi\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nc\"\u003eNum\u003c/span\u003e \u003cspan class=\"mi\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"n\"\u003eprintfn\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"%d\"\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eeval\u003c/span\u003e \u003cspan class=\"n\"\u003eexpr\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e判別共用体がうまくハマるパターンではものすごく簡潔になります。\u003c/p\u003e\n\n\u003cp\u003eJavaScriptで雰囲気を真似た例を示します。C#では冗長になるため省略します。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"js\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eJavaScript\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"kd\"\u003efunction\u003c/span\u003e \u003cspan class=\"nx\"\u003eNum\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003enum\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003enum\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003enum\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"kd\"\u003efunction\u003c/span\u003e \u003cspan class=\"nx\"\u003eAdd\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003ea\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eb\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003ea\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003ea\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eb\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003eb\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"kd\"\u003efunction\u003c/span\u003e \u003cspan class=\"nb\"\u003eeval\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003ev\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003ev\u003c/span\u003e \u003cspan class=\"k\"\u003einstanceof\u003c/span\u003e \u003cspan class=\"nx\"\u003eNum\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"nx\"\u003ev\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003enum\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003ev\u003c/span\u003e \u003cspan class=\"k\"\u003einstanceof\u003c/span\u003e \u003cspan class=\"nx\"\u003eAdd\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"nb\"\u003eeval\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003ev\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003ea\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"nb\"\u003eeval\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003ev\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eb\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"kd\"\u003elet\u003c/span\u003e \u003cspan class=\"nx\"\u003eexpr\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nx\"\u003eAdd\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nx\"\u003eNum\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nx\"\u003eNum\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n\u003cspan class=\"nx\"\u003econsole\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003elog\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nb\"\u003eeval\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eexpr\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"資料\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%B3%87%E6%96%99\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e資料\u003c/h1\u003e\n\n\u003cp\u003e今回と同じような視点の記事を紹介します。\u003c/p\u003e\n\n\u003cp\u003eこの記事の元になった記事です。C#的なオブジェクト指向構文を中心にまとめています。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"http://d.hatena.ne.jp/n7shi/20090722\" rel=\"nofollow noopener\" target=\"_blank\"\u003eC#プログラマのためのF#入門\u003c/a\u003e 2009.07.22\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e限定された範囲内でC#をF#に変換するトランスレータです。JavaScriptで実装されているため、ブラウザ上で動きます。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"http://7shi.bitbucket.org/cs2fs/\" rel=\"nofollow noopener\" target=\"_blank\"\u003eC# to F# translator\u003c/a\u003e 2015.08.01\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eC#とF#との対比記事です。引用されているF# Tutorialはプロジェクト作成のときに選択できます。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"https://twitter.com/neuecc\" rel=\"nofollow noopener\" target=\"_blank\"\u003e@neuecc\u003c/a\u003e: \u003ca href=\"http://neue.cc/2009/11/09_214.html\" rel=\"nofollow noopener\" target=\"_blank\"\u003eF# TutorialをC#と比較しながらでF#を学ぶ\u003c/a\u003e 2009.11.09\u003c/li\u003e\n\u003c/ul\u003e\n","createdAt":"2017-01-04T13:30:42Z","elapsedYearsFromLastModifiedAt":1,"encryptedId":"WXzBuOZpJlFc3W2w0jcotTSFsKJ20MTn--X37UoVcTVo5q90i0--txFRu1mScWY9ozgVBER1zA==","isBanned":false,"isDeprecated":true,"isDestroyableByViewer":false,"isEditRequestReadableByViewer":true,"isEditRequestSendableByViewer":true,"isLikableByViewer":true,"isLikedByViewer":false,"isPublic":true,"isSlide":false,"isStockableByViewer":true,"isStockedByViewer":false,"isSubscribableByViewer":false,"isSubscribedByViewer":false,"isUpdatableByViewer":false,"isUpdated":true,"lastModifiedAt":"2020-08-14T11:34:56Z","likesCount":60,"linkUrl":"https://qiita.com/7shi/items/ff746903680ae8d0d7ce","organization":null,"originalId":457631,"stockedCount":57,"title":"C#/JavaScriptで学ぶF#入門","toc":"\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#f%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6\"\u003eF#について\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E8%83%8C%E6%99%AF\"\u003e背景\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E4%BD%8D%E7%BD%AE%E4%BB%98%E3%81%91\"\u003e位置付け\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%8F%E3%83%AD%E3%83%BC%E3%83%AF%E3%83%BC%E3%83%AB%E3%83%89\"\u003eハローワールド\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#printfprintfn\"\u003eprintf/printfn\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E8%A4%87%E6%95%B0%E3%81%AE%E5%BC%95%E6%95%B0\"\u003e複数の引数\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#f%E3%83%8D%E3%82%A4%E3%83%86%E3%82%A3%E3%83%96%E3%81%AE%E9%96%A2%E6%95%B0\"\u003eF#ネイティブの関数\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#net%E3%81%AE%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89\"\u003e.NETのメソッド\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E6%95%B0%E5%80%A4%E5%9E%8B%E3%81%AE%E3%82%AD%E3%83%A3%E3%82%B9%E3%83%88\"\u003e数値型のキャスト\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%81%8A%E3%81%BE%E3%81%91\"\u003eおまけ\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%A4%89%E6%95%B0\"\u003e変数\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E6%9D%9F%E7%B8%9B\"\u003e束縛\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E8%A4%87%E6%95%B0%E3%81%AE%E5%A4%89%E6%95%B0%E5%AE%9A%E7%BE%A9\"\u003e複数の変数定義\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#f-interactive\"\u003eF# Interactive\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E6%9D%A1%E4%BB%B6%E5%BC%8F\"\u003e条件式\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%96%E3%83%AD%E3%83%83%E3%82%AF\"\u003eブロック\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E4%B8%89%E9%A0%85%E6%BC%94%E7%AE%97%E5%AD%90\"\u003e三項演算子\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E8%A4%87%E5%90%88%E6%8A%80\"\u003e複合技\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%BF%E3%83%97%E3%83%AB\"\u003eタプル\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E9%96%A2%E6%95%B0\"\u003e関数\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%A9%E3%83%A0%E3%83%80%E5%BC%8F\"\u003eラムダ式\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E7%B3%96%E8%A1%A3%E6%A7%8B%E6%96%87\"\u003e糖衣構文\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#fsi\"\u003efsi\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#unit\"\u003eunit\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#ignore\"\u003eignore\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%91%E3%82%A4%E3%83%97%E3%83%A9%E3%82%A4%E3%83%B3%E6%BC%94%E7%AE%97%E5%AD%90\"\u003eパイプライン演算子\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%86%8D%E5%B8%B0%E9%96%A2%E6%95%B0\"\u003e再帰関数\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%89%8D%E6%96%B9%E5%8F%82%E7%85%A7\"\u003e前方参照\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E7%9B%B8%E4%BA%92%E5%86%8D%E5%B8%B0\"\u003e相互再帰\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E9%96%A2%E6%95%B0%E5%86%85%E9%96%A2%E6%95%B0\"\u003e関数内関数\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%AB%E3%83%AA%E3%83%BC%E5%8C%96\"\u003eカリー化\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E7%B3%96%E8%A1%A3%E6%A7%8B%E6%96%87-1\"\u003e糖衣構文\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E9%83%A8%E5%88%86%E9%81%A9%E7%94%A8\"\u003e部分適用\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E9%85%8D%E5%88%97\"\u003e配列\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%AB%E3%83%BC%E3%83%97\"\u003eループ\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E8%A4%87%E9%9B%91%E3%81%AA%E4%BE%8B\"\u003e複雑な例\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%8F%82%E7%85%A7\"\u003e参照\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%AF%E3%83%AD%E3%83%BC%E3%82%B8%E3%83%A3\"\u003eクロージャ\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E7%90%86%E7%94%B1\"\u003e理由\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%AF%E3%83%A9%E3%82%B9\"\u003eクラス\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%B3%E3%83%B3%E3%82%B9%E3%83%88%E3%83%A9%E3%82%AF%E3%82%BF\"\u003eコンストラクタ\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%AF%E3%83%AD%E3%83%BC%E3%82%B8%E3%83%A3%E3%81%A8%E6%AF%94%E8%BC%83\"\u003eクロージャと比較\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%A4%9A%E6%85%8B\"\u003e多態\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%B5%E3%83%96%E3%82%AF%E3%83%A9%E3%82%B9%E3%81%AB%E3%82%88%E3%82%8B%E3%82%AA%E3%83%BC%E3%83%90%E3%83%BC%E3%83%A9%E3%82%A4%E3%83%89\"\u003eサブクラスによるオーバーライド\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%88%A4%E5%88%A5%E5%85%B1%E7%94%A8%E4%BD%93\"\u003e判別共用体\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E8%B3%87%E6%96%99\"\u003e資料\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n","totalPv":19284,"uuid":"ff746903680ae8d0d7ce","banReason":null,"adventCalendarItem":null,"author":{"encryptedId":"fVT3M01sLCqTMKeTcSOevns+0DI=--/N9IClRoN38YSTbO--DiD8kVyFeiO7pxeemWEqDg==","originalId":32057,"description":"","facebookUrl":null,"githubUrl":null,"isBlockingViewer":false,"isFollowableByViewer":true,"isFollowedByViewer":false,"isTweetWebNotificationReceivable":true,"linkedinUrl":null,"name":"","profileImageUrl":"https://qiita-image-store.s3.amazonaws.com/0/32057/profile-images/1473685823","profileImageUrlW48":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F32057%2Fprofile-images%2F1473685823?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=48\u0026s=050373db111a10c8f77047dc7223ca42","profileImageUrlW75":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F32057%2Fprofile-images%2F1473685823?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=4c3ba9e38885eb4fc97bd058b57afbf9","urlName":"7shi","websiteUrl":null,"twitterUrl":"https://twitter.com/7shi","twitterUrlName":"7shi","revealedOrganizations":{"edges":[]}},"tags":[{"name":"JavaScript","urlName":"javascript"},{"name":"F#","urlName":"fsharp"},{"name":"C#","urlName":"csharp"}],"followingLikers":{"edges":[]},"comments":{"totalCount":0}},"comments":[],"client":null,"ads_event_emitter":null}}</script>
