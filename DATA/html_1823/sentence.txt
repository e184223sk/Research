More than 1 year has passed since last update.2020/03/04
デッドロックする可能性があったので一部修正しました。2020/03/11
WordPressの記事一覧取得が10記事までしか取得できなかったので、すべての記事を取得するように修正しました。WPService.csQiitaに投稿した記事のリンクを楽にWordPressに送りたい #1
Qiitaに投稿した記事のリンクを楽にWordPressに送りたい #2
Qiitaに投稿した記事のリンクを楽にWordPressに送りたい #4IDE：VisualStudio2019
アプリケーション：コンソールアプリ
フレームワーク：.NET Core 3.1前回の続きです。前回、記事の追加／更新は実現できましたが、タグが反映できていなかったので、連携できるようチャレンジしてみます。
tagsは名称ではなく、タグのidを指定する必要があるため、Qiita側とWordPress側で名前が同じもののidを求めて設定する必要があります。
また、同じものがない場合は新規追加して発行されたidを用います。その前に
前回、記事の作成順がばらばらだったのですが、リクエスト時のJSONのdateにQiitaの記事作成日時を設定することでうまくいきました。JSON作成部分①WordPressタグ一覧取得
↓
②Qiita記事をループしながら、対象のタグが①に存在する場合は、そのidを用いて記事を更新／追加する
↓
③対象のタグが①に存在しない場合は、WordPressのタグ追加リクエストを行い、①に追加したタグの情報を追加するAPI説明
https://ja.wp-api.org/reference/tags/ネット上で情報を探すと、どうやら全ていっぺんにタグを取得することは不可能とのこと。(PHP側ではやりようがあるとのこと)
上記リンクにあるように　{何}ページ目の{何件}取得するかを指定する必要がある模様
特に指定しなかった場合は、1ページ目の10010件が取得されるすべてのページのタグを取得したいので、再起処理を行う※2020/03/11 GetGetArticleListも修正してますWPService.csJSON作成部分タグ取得 OR 追加メソッドWPService.InsertTagメソッドわかりやすいようにすべて削除しておきます。タグも空にします。
実行後
記事一覧
タグ一覧
以下GitHubから取得できます。
TestProject次回は本アプリをWebサービスに置き換えたいと思います。


