More than 3 years have passed since last update.Azure Custom Vision Serviceは誰でも画像認識のモデルが作成できるお手軽なツールになります。DeepLearningの世界で転移学習にしても自分で実行するのはかなり手間ですが、少ないデータで手間なく画像認識を行うことができるのは大きなメリットではないでしょうか？
作成したモデルに関してはこちらの記事を参照くださいCusotom Vision Serviceで作成したモデルをExportします。肺炎患者のレントゲン写真であり、ウイルス性、細菌性の肺炎の判定を行います。Compactモデルで作成しなければExportできないのでCompactモデルを選択して一度学習させます。Exportをクリックするとダウンロドする形式が選べるので、ONNXを選びダウンロードします。Netronでモデルを見ることができます。
normal.onnxとして保存しています。AzureのサンプルにCustom Visionで出力されたONNXモデルを使用するものがあります。
Windows10のビルド1803にまずアップデートする必要があります。その上で、Visual Studio 2017をインストールし、対応するSDKを導入します。こちらを参考にしてください
normal.onnxをVisual StudioのAssetに追加します。その場合、非常に長いクラス名のラッパーコードが生成されますが、使わないので削除します。上記でサンプルを同期できます。
修正箇所は多くなく、２か所の修正で動作させることができます
MainPage.xaml.csを編集します。それから、CustomVisionはラベル名がONNXモデルに組み込まれているので、ラベルの数を変えるだけになります。以上で修正できました。というかほとんど何もしていない状態です。
上記をビルドして実行すると以下のようになります。恐らくこれが一番簡単な方法ではないかと考えています。


