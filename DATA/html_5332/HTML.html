<!DOCTYPE html><html><head><meta charset="utf-8" /><title>ユニティちゃん2Dで2Dキャラクターの動きの仕組みを理解する - Qiita</title><meta content="width=device-width,initial-scale=1,shrink-to-fit=no,viewport-fit=cover" name="viewport" /><meta content="#55c500" name="theme-color" /><meta content="XWpkTG32-_C4joZoJ_UsmDUi-zaH-hcrjF6ZC_FoFbk" name="google-site-verification" /><meta content="telephone=no" name="format-detection" /><link rel="canonical" href="https://qiita.com/okk_archives/items/61a23ebda1d6cab2d08c" /><link href="/manifest.json" rel="manifest" /><link href="/opensearch.xml" rel="search" title="Qiita" type="application/opensearchdescription+xml" /><link as="script" href="https://www.googletagservices.com/tag/js/gpt.js" rel="preload" /><link href="https://securepubads.g.doubleclick.net" rel="preconnect" /><script async="" src="https://www.googletagservices.com/tag/js/gpt.js"></script><meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="J/pWFOdXrk44kj7zdBzKZCO5IL0g/KRGVOR9DuUT+ps67Xh2pMrUdAE6wf435mkaBqTd/g1/rRlrhP+A+Grrww==" /><link rel="shortcut icon" type="image/x-icon" href="https://cdn.qiita.com/assets/favicons/public/production-c620d3e403342b1022967ba5e3db1aaa.ico" /><link rel="apple-touch-icon" type="image/png" href="https://cdn.qiita.com/assets/favicons/public/apple-touch-icon-ec5ba42a24ae923f16825592efdc356f.png" /><link rel="stylesheet" media="all" href="https://cdn.qiita.com/assets/public/article-2eaa7dbedc42a8ea65c722cda46d0ebb.min.css" /><script src="https://cdn.qiita.com/assets/public/v3-article-bundle-63de2d91fef827269d3f6b958db2335b.min.js" defer="defer"></script><meta name="twitter:card" content="summary_large_image"><meta content="@Qiita" name="twitter:site" /><meta property="og:type" content="article"><meta property="og:title" content="ユニティちゃん2Dで2Dキャラクターの動きの仕組みを理解する - Qiita"><meta property="og:image" content="https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0&amp;w=1200&amp;mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND00NE9tNDRPTDQ0T0c0NEtqNDRHaDQ0S0Q0NEtUTWtUamdhY3lST09DcmVPRG8tT0RxZU9Dci1PQ3YtT0R2T09CcnVXTGxlT0JqZU9CcnVTN2xlZTFoT09Cdi1PQ2t1ZVFodWluby1PQm1lT0NpdyZ0eHQtY29sb3I9JTIzMzMzJnR4dC1mb250PUhpcmFnaW5vJTIwU2FucyUyMFc2JnR4dC1zaXplPTU0JnR4dC1jbGlwPWVsbGlwc2lzJnR4dC1hbGlnbj1jZW50ZXIlMkNtaWRkbGUmcz05YzE2NWU0YjEwNTE5ZDdlM2Q4MjlmMGEwYTAzNzczZA&amp;mark-align=center%2Cmiddle&amp;blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RRzlyYTE5aGNtTm9hWFpsY3cmdHh0LWNvbG9yPSUyMzMzMyZ0eHQtZm9udD1IaXJhZ2lubyUyMFNhbnMlMjBXNiZ0eHQtc2l6ZT00NSZ0eHQtYWxpZ249cmlnaHQlMkNib3R0b20mcz1jYjQ3NmUxODE5NzUxY2NjNzA2NDc3MDYzZGQyMmQzNQ&amp;blend-align=center%2Cmiddle&amp;blend-mode=normal&amp;s=6f52a56a358ef3cd3fdb5e12d6fddc46"><meta property="og:description" content="

TL; DR

はじめて2Dゲームを作るにあたって、ユニティちゃん2Dの仕組みを理解することがとても参考になったので、
本記事はユニティちゃん2Dを触りつつ、改変を加えることでどういう動きになるのかを試しながら、2Dキャラの動きを..."><meta content="https://qiita.com/okk_archives/items/61a23ebda1d6cab2d08c" property="og:url" /><meta content="Qiita" property="og:site_name" /><meta content="564524038" property="fb:admins" /><meta content="C#,Unity,Unity2D,ユニティちゃん" name="keywords" /><script>!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window, document,'script',
'https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '668972150489891');
fbq('track', 'PageView');</script><style data-emotion-css="17jxvjw 11t2ec1 1dvr2p8 18lkoru 1g4cku8 1iupg5d ijvq0v 15cocm3 12rp90f 115f4t 1b8uj5v 79elbk 16hhh7b fcbn8c 1gj7nt 154zy0m yikrym 1jqivyb 1ode1bp le4d8r 1hbd3g7 1nzh4zz 38fzdi helsa7 8qb8m4 2imjyh he5w1s 70qvj9 3ojehk 100alwu 1dtnjt5 10ougpm 1ay9vb9 m19uds cgzq40 1wa99t2 1l3zk9f 4czcte 1yzj1fm 1uv1qiv 109dbrr 5jpx49 mnxgyc 1vlpknv fsjkhv 1b17vb0 7i7f4d"}>.css-17jxvjw{display:grid;display:-ms-grid;grid-template-columns:80px minmax(0,1fr) 300px;-ms-grid-columns:80px minmax(0,1fr) 300px;grid-template-rows:minmax(270px,auto) 1fr;-ms-grid-rows:minmax(270px,auto) 1fr;max-width:1280px;margin-right:auto;margin-left:auto;padding-top:24px;padding-right:24px;padding-left:24px;}@media (max-width:1200px){.css-17jxvjw{padding-bottom:0;padding-left:0;padding-right:0;}}@media (max-width:992px){.css-17jxvjw{grid-template-columns:80px 452px 300px;-ms-grid-columns:80px 452px 300px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}}@media (max-width:770px){.css-17jxvjw{display:block;}}@media (max-width:480px){.css-17jxvjw{padding-top:0;}}.css-11t2ec1{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;z-index:5;position:-webkit-sticky;position:sticky;top:calc(56px + 24px + 16px + 32px - 16px);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:16px;width:80px;}.css-11t2ec1:after{content:'';display:table;}.css-11t2ec1:before{content:'';display:table;}@media (max-width:770px){.css-11t2ec1{display:none;}}.css-1dvr2p8{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-18lkoru{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;background-color:#FFFFFF;}.css-1g4cku8{display:inline-block;vertical-align:middle;height:20px;width:20px;fill:#55C500;}.css-1iupg5d{color:#55C500;cursor:pointer;font-size:14px;font-weight:bold;}.css-ijvq0v{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-15cocm3{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#FFFFFF;border:2px solid #6E6F70;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:2px 0px 0px;width:40px;}.css-12rp90f{display:inline-block;vertical-align:bottom;height:17.77777777777778px;width:16px;fill:#6E6F70;}.css-115f4t{color:#6E6F70;font-size:14px;font-weight:bold;}.css-1b8uj5v{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;margin-bottom:16px;padding:0;}.css-79elbk{position:relative;}.css-16hhh7b{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;padding:0;}.css-fcbn8c{display:none;bottom:initial;left:initial;right:initial;top:initial;left:100%;top:calc(-8px - (14px * 1.8) - 16px - 4px);}.css-1gj7nt{color:rgba(0,0,0,0.6);font-size:14px;font-weight:bold;line-height:1.8;padding:8px 16px;}.css-154zy0m{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.87);cursor:pointer;font-size:16px;font-weight:normal;line-height:1.8;padding:4px 16px;}.css-154zy0m:hover{-webkit-text-decoration:none;text-decoration:none;background-color:#F2F2F2;}.css-yikrym{width:20px;}.css-1jqivyb{color:rgba(0,0,0,0.6);font-size:13px;}.css-1ode1bp{background-color:rgba(0,0,0,0.12);height:1px;width:100%;margin:8px 0;}.css-le4d8r{display:inline-block;vertical-align:middle;height:13px;width:13px;fill:rgba(0,0,0,0.6);}.css-1hbd3g7{height:250px;}.css-1nzh4zz{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:16px 32px;background-color:#FBE69E;color:rgba(0,0,0,0.87);line-height:1.5;font-weight:600;}@media (max-width:770px){.css-1nzh4zz{padding:16px;}}.css-38fzdi{color:#CA832A;margin-right:4px;}.css-helsa7{background-color:#FFFFFF;padding:32px;margin-bottom:24px;}@media (max-width:992px){.css-helsa7{margin:0 auto 40px;}}@media (max-width:480px){.css-helsa7{margin:0 0 40px;padding:32px 16px;}}.css-8qb8m4{margin-bottom:48px;}.css-2imjyh{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-he5w1s{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;width:100%;}@media (max-width:770px){.css-he5w1s{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}}.css-70qvj9{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.css-3ojehk{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;margin-right:4px;}.css-100alwu{display:inline-block;border-radius:50%;line-height:1;overflow:hidden;vertical-align:middle;}.css-1dtnjt5{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-10ougpm{color:rgba(0,0,0,0.87);font-size:14px;font-weight:600;line-height:1.8;margin-right:4px;text-wrap:break-word;word-break:break-all;}.css-1ay9vb9{margin-right:16px;}.css-m19uds{color:rgba(0,0,0,0.6);font-size:14px;line-height:1.8;}.css-cgzq40{color:rgba(0,0,0,0.87);font-size:32px;font-weight:bold;line-height:1.4;margin-top:8px;text-wrap:break-word;word-break:break-all;}.css-1wa99t2{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.6);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:8px;}.css-1l3zk9f{color:rgba(0,0,0,0.6);font-size:20px;margin-right:8px;}.css-4czcte{margin-right:4px;color:inherit;font-size:14px;line-height:1.8;}.css-4czcte:not(:last-child)::after{content:',';margin-right:4px;}.css-1yzj1fm{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:32px;}.css-1uv1qiv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-size:20px;height:32px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin-right:16px;outline:none;padding:0;width:32px;}.css-109dbrr{background-color:#F9F9F9;border-top:1px solid rgba(0,0,0,0.12);bottom:0;box-shadow:0px 1px 4px rgba(0,0,0,0.14);display:none;height:calc(env(safe-area-inset-bottom,0px) + 56px);-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding-bottom:env(safe-area-inset-bottom);position:-webkit-sticky;position:sticky;width:100%;z-index:2000;}@media (max-width:770px){.css-109dbrr{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}.css-5jpx49{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:space-evenly;-webkit-justify-content:space-evenly;-ms-flex-pack:space-evenly;justify-content:space-evenly;width:100%;}.css-mnxgyc{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1vlpknv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;margin-right:4px;background-color:#FFFFFF;}.css-fsjkhv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1b17vb0{color:#6E6F70;font-size:14px;font-weight:bold;margin-left:4px;}.css-7i7f4d{display:none;bottom:initial;left:initial;right:initial;top:initial;bottom:32px;right:0;}</style></head><body><div class="allWrapper"><div><div id="GlobalHeader-react-component-265a0600-f1c3-4c8c-98bf-18fc14465d5d"><div class="st-Header"><div class="st-Header_container"><div class="st-Header_start"><a href="/" class="st-Header_logo"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 426.57 130"><circle cx="167.08" cy="21.4" r="12.28"></circle><path d="M250.81 29.66h23.48v18.9h-23.48z"></path><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z"></path><circle cx="216.33" cy="21.4" r="12.28"></circle></svg></a><div class="st-Header_communitySelector" tabindex="0"><span class="fa fa-caret-down"></span></div><div class="st-Header_dropdown"><div class="st-Header_dropdownHeading">Qiita Teams that are logged in</div><div class="st-Header_dropdownItemNote">You are not logged in to any team</div><hr class="st-Header_dropdownDivider st-Header_dropdownDivider-shrink"/><a href="https://teams-center.qiita.com/find_team" class="st-Header_dropdownItem"><span class="fa fa-fw fa-sign-in st-Header_dropdownItemIcon"></span><div>Log in to Qiita Team</div></a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Community</div><a href="/organizations" class="st-Header_dropdownItem">Organization</a><a href="/official-events/open" class="st-Header_dropdownItem">Event</a><a href="/advent-calendar" class="st-Header_dropdownItem">Advent Calendar</a><a href="https://qiitadon.com/" class="st-Header_dropdownItem" target="_blank">Qiitadon (β)</a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Service</div><a href="https://jobs.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Jobs</a><a href="https://zine.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Zine</a><a href="https://blog.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Blog</a></div><form class="st-Header_search" action="/search" method="get"><span class="fa fa-search st-Header_searchIcon"></span><input type="search" class="st-Header_searchInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form><form class="st-Header_searchModal" action="/search" method="get"><input type="text" class="st-Header_searchModalInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form></div><div class="st-Header_end"><div class="st-Header_searchButton"><span class="fa fa-search"></span></div><a class="st-Header_signupButton" href="/signup?redirect_to=%2Fokk_archives%2Fitems%2F61a23ebda1d6cab2d08c">Signup</a><a class="st-Header_loginLink" href="/login?redirect_to=%2Fokk_archives%2Fitems%2F61a23ebda1d6cab2d08c">Login</a></div><div class="st-Header_overlay"></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="GlobalHeader" data-dom-id="GlobalHeader-react-component-265a0600-f1c3-4c8c-98bf-18fc14465d5d">{"unreadNotificationsCount":null,"realms":[{"humanName":"Qiita","isCurrentRealm":true,"isQiita":true,"isQiitaTeam":false,"loggedInUser":null,"teamId":null,"url":"https://qiita.com/"}],"teamFindUrl":"https://teams-center.qiita.com/find_team","isTeamOnlyUser":null,"currentUser":null}</script>
      
</div><div class="st-HeaderAlert st-HeaderAlert-warning"><div class="st-HeaderAlert_body"></div></div><script type="application/ld+json">{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"/","name":"Qiita"}},{"@type":"ListItem","position":2,"item":{"@id":"/tags/csharp","name":"C#"}}]}</script><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","datePublished":"2018-03-29T00:03:25.000+09:00","dateModified":"2018-03-29T00:18:10.000+09:00","headline":"ユニティちゃん2Dで2Dキャラクターの動きの仕組みを理解する","image":"https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0\u0026w=1200\u0026mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND00NE9tNDRPTDQ0T0c0NEtqNDRHaDQ0S0Q0NEtUTWtUamdhY3lST09DcmVPRG8tT0RxZU9Dci1PQ3YtT0R2T09CcnVXTGxlT0JqZU9CcnVTN2xlZTFoT09Cdi1PQ2t1ZVFodWluby1PQm1lT0NpdyZ0eHQtY29sb3I9JTIzMzMzJnR4dC1mb250PUhpcmFnaW5vJTIwU2FucyUyMFc2JnR4dC1zaXplPTU0JnR4dC1jbGlwPWVsbGlwc2lzJnR4dC1hbGlnbj1jZW50ZXIlMkNtaWRkbGUmcz05YzE2NWU0YjEwNTE5ZDdlM2Q4MjlmMGEwYTAzNzczZA\u0026mark-align=center%2Cmiddle\u0026blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RRzlyYTE5aGNtTm9hWFpsY3cmdHh0LWNvbG9yPSUyMzMzMyZ0eHQtZm9udD1IaXJhZ2lubyUyMFNhbnMlMjBXNiZ0eHQtc2l6ZT00NSZ0eHQtYWxpZ249cmlnaHQlMkNib3R0b20mcz1jYjQ3NmUxODE5NzUxY2NjNzA2NDc3MDYzZGQyMmQzNQ\u0026blend-align=center%2Cmiddle\u0026blend-mode=normal\u0026s=6f52a56a358ef3cd3fdb5e12d6fddc46","mainEntityOfPage":"https://qiita.com/okk_archives/items/61a23ebda1d6cab2d08c","author":{"@type":"Person","address":"Japan","email":null,"identifier":"okk_archives","name":"okk_archives","image":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fs3-ap-northeast-1.amazonaws.com%2Fqiita-image-store%2F0%2F97286%2F35fc18308318a66e79cf6ca2fa5e84594db357e5%2Fx_large.png%3F1618881795?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=e52626bb6d12b0fe0e445e74aafff98c","url":"https://qiita.com/okk_archives","description":"Unity Engineer (2016 - now),\r\nScala Engineer (2016 - 2019), \r\niOS Engineer (2014 - 2016)","memberOf":[]},"publisher":{"@type":"Organization","name":"Qiita","logo":{"@type":"ImageObject","url":"//cdn.qiita.com/assets/public/qiita-logo-c39ded593afa388e2e1ba435b110554e.png"}}}</script><style type="text/css">.wb-CampaignLink {
  background-color: #333333;
  width: 100%;
}

.wb-CampaignLink_container {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  max-width: 1100px;
  margin: 0 auto;
  font-size: 13px;
  padding: 0.8em;
}
.wb-CampaignLink_container > a {
  color: #fff;
}

.wb-CampaignLink_container > a:hover {
  text-decoration: underline;
}</style><div class="wb-CampaignLink"><div class="wb-CampaignLink_container"><a target="_blank" id="header_text_message_1" href="https://increments.connpass.com/event/211948/">Qiita創業者海野氏登壇！Qiita エンジニアフェスタ 2021 Online Meetupを9/9(木)に開催</a><a target="_blank" id="header_text_message_2" href="https://increments.connpass.com/event/211948/">詳しくはこちら</a></div><script>td.trackEvent(
  'front_events',
  {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"okk_archives","type":"items","id":"61a23ebda1d6cab2d08c"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Show","data":{"message":"Qiita創業者海野氏登壇！Qiita エンジニアフェスタ 2021 Online Meetupを9/9(木)に開催","url":"https://increments.connpass.com/event/211948/","sub_message":"詳しくはこちら"}}
)</script><script>document.getElementById('header_text_message_1').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"okk_archives","type":"items","id":"61a23ebda1d6cab2d08c"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":1,"pos_id":"header_text_message_1","message":"Qiita創業者海野氏登壇！Qiita エンジニアフェスタ 2021 Online Meetupを9/9(木)に開催","url":"https://increments.connpass.com/event/211948/","sub_message":"詳しくはこちら"}}
  )
})</script><script>document.getElementById('header_text_message_2').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"okk_archives","type":"items","id":"61a23ebda1d6cab2d08c"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":1,"pos_id":"header_text_message_2","message":"Qiita創業者海野氏登壇！Qiita エンジニアフェスタ 2021 Online Meetupを9/9(木)に開催","url":"https://increments.connpass.com/event/211948/","sub_message":"詳しくはこちら"}}
  )
})</script></div><script type="application/json" id="js-react-on-rails-context">{"railsEnv":"production","inMailer":false,"i18nLocale":"en","i18nDefaultLocale":"en","href":"https://qiita.com/okk_archives/items/61a23ebda1d6cab2d08c","location":"/okk_archives/items/61a23ebda1d6cab2d08c","scheme":"https","host":"qiita.com","port":null,"pathname":"/okk_archives/items/61a23ebda1d6cab2d08c","search":null,"httpAcceptLanguage":null,"actionPath":"public/items#show","settings":{"analyticsTrackingId":"UA-24675221-12","assetsMap":{},"csrfToken":"wEon8VB6efbFH/VJmFlAALNVYl5My7LOgdB9ZWg2T6HdXQmTE+cDzPy3CkTbo+N+lkifHWFIu5G+sP/rdU9e+Q==","locale":"en"},"currentUser":null,"isLoggedIn":false,"recaptchaSiteKey":"6LfNkiQTAAAAAM3UGnSquBy2akTITGNMO_QDxMw6","serverSide":false}</script>
<div id="PersonalArticlePage-react-component-2079ecd5-35c2-449f-800c-cde629a98868"><div class="p-items_wrapper"><div class=" css-17jxvjw"><div class="css-11t2ec1"><div class="css-1dvr2p8"><button class=" css-18lkoru"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/okk_archives/items/61a23ebda1d6cab2d08c/likers" class="css-1iupg5d">67</a></div><div class="css-ijvq0v"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-115f4t">69</span></div><div class="css-1b8uj5v"><span class="fa fa-twitter"></span></div><div class="css-1b8uj5v"><span class="fa fa-facebook"></span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-fcbn8c"><div class="css-1gj7nt">Improve article</div><a href="/drafts/61a23ebda1d6cab2d08c/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/okk_archives/items/61a23ebda1d6cab2d08c/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/okk_archives/items/61a23ebda1d6cab2d08c/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/okk_archives/items/61a23ebda1d6cab2d08c/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/okk_archives/items/61a23ebda1d6cab2d08c.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div><div class="p-items_options"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_toc"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_main"><div class="css-1nzh4zz"><span class="fa fa-fw fa-warning css-38fzdi"></span><p>More than 3 years have passed since last update.</p></div><div class="css-helsa7"><div class="css-8qb8m4"><div class="css-2imjyh"><div class="css-he5w1s"><div class="css-70qvj9"><div class="css-3ojehk"><a href="/okk_archives"><img class="css-100alwu eyfquo10" src="https://s3-ap-northeast-1.amazonaws.com/qiita-image-store/0/97286/35fc18308318a66e79cf6ca2fa5e84594db357e5/x_large.png?1618881795" width="24" height="24" loading="lazy"/></a></div><div class="css-1dtnjt5"><a href="/okk_archives" class="css-10ougpm">@<!-- -->okk_archives</a><div class="css-1ay9vb9"><span><meta content="2018-03-28T15:03:25Z"/><time dateTime="2018-03-28T15:18:10Z" class="css-m19uds">updated at 2018-03-28</time></span></div></div></div></div></div><h1 class="css-cgzq40">ユニティちゃん2Dで2Dキャラクターの動きの仕組みを理解する</h1><div class="css-1wa99t2"><span class="fa fa-tags mr-1of2 css-1l3zk9f" aria-hidden="true"></span><a href="/tags/csharp" class="css-4czcte">C#</a><a href="/tags/unity" class="css-4czcte">Unity</a><a href="/tags/unity2d" class="css-4czcte">Unity2D</a><a href="/tags/%e3%83%a6%e3%83%8b%e3%83%86%e3%82%a3%e3%81%a1%e3%82%83%e3%82%93" class="css-4czcte">ユニティちゃん</a></div></div><section class="it-MdContent"><div id="personal-public-article-body"><div>
<h1>
<span id="tl-dr" class="fragment"></span><a href="#tl-dr"><i class="fa fa-link"></i></a>TL; DR</h1>

<p>はじめて2Dゲームを作るにあたって、ユニティちゃん2Dの仕組みを理解することがとても参考になったので、<br>
本記事はユニティちゃん2Dを触りつつ、改変を加えることでどういう動きになるのかを試しながら、2Dキャラの動きを理解していこう、という趣旨になります。</p>

<h1>
<span id="ユニティちゃん2d" class="fragment"></span><a href="#%E3%83%A6%E3%83%8B%E3%83%86%E3%82%A3%E3%81%A1%E3%82%83%E3%82%932d"><i class="fa fa-link"></i></a>ユニティちゃん2D</h1>

<p><a href="https://camo.qiitausercontent.com/cbe72c5d141d45a24e4e8b3abdece8fbd6cb9aa7/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f39373238362f66626234616264662d333839632d356365382d336538352d3231383732663165623234622e706e67" target="_blank" rel="nofollow noopener"><img width="957" alt="スクリーンショット 2018-02-06 22.25.21.png" src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F97286%2Ffbb4abdf-389c-5ce8-3e85-21872f1eb24b.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=33a8b596c65534a8ca6dbd3db8696078" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/97286/fbb4abdf-389c-5ce8-3e85-21872f1eb24b.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F97286%2Ffbb4abdf-389c-5ce8-3e85-21872f1eb24b.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=dede4e459df568a0744de78e279795f9 1x" loading="lazy"></a></p>

<p>ユニティちゃん2Dは、みなさんご存知オープンソース系アイドル「ユニティちゃん(Unity-Chan)」の2Dゲームのサンプルプロジェクトです。<br>
2014年6月に最新版のv1.1が公開されて以降更新はありませんが、2Dキャラの移動だけでなく、敵キャラクターの存在や破壊できるブロック、取得できるコインなど、2Dゲームの要素として基本的なものが揃っている大変いい教材だと思います。<br>
<a href="http://unity-chan.com/download/releaseNote.php?id=UnityChan2D" class="autolink" rel="nofollow noopener" target="_blank">http://unity-chan.com/download/releaseNote.php?id=UnityChan2D</a></p>

<h1>
<span id="導入手順" class="fragment"></span><a href="#%E5%B0%8E%E5%85%A5%E6%89%8B%E9%A0%86"><i class="fa fa-link"></i></a>導入手順</h1>

<p>導入手順については詳細は省きますが、簡単に以下のような流れでできます。<br>
1. ユニティちゃん2DのDLページ(上記URL)から、「<code>UnityChan2D.unitypackage</code>」をダウンロードする<br>
2. Unityから空の2Dプロジェクトを開き、DLした<code>unitypackage</code>を読み込む<br>
3. Titleのシーンを開き、実行して起動できれば完了<br>
※なお、確認時は5.5.4p3を使用しています</p>

<h1>
<span id="とりあえず動かしてみる" class="fragment"></span><a href="#%E3%81%A8%E3%82%8A%E3%81%82%E3%81%88%E3%81%9A%E5%8B%95%E3%81%8B%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B"><i class="fa fa-link"></i></a>とりあえず動かしてみる</h1>

<p>「左右キー」や「スペースキー」を押すことで、ユニティちゃんが左右に動いたり、ジャンプしたりします。<br>
<a href="https://camo.qiitausercontent.com/fe579a6a0eea88f2995851cc8092d6172bde24d5/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f39373238362f33363232386336632d386439612d376561622d633036312d3764343935356432613661632e706e67" target="_blank" rel="nofollow noopener"><img width="721" alt="スクリーンショット 2018-02-06 22.33.53.png" src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F97286%2F36228c6c-8d9a-7eab-c061-7d4955d2a6ac.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=4b0c800411601948fd444f9d037314a9" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/97286/36228c6c-8d9a-7eab-c061-7d4955d2a6ac.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F97286%2F36228c6c-8d9a-7eab-c061-7d4955d2a6ac.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=f8c0ea39fc4959d26da03a007e2e776d 1x" loading="lazy"></a></p>

<h1>
<span id="どうやって動いているのか" class="fragment"></span><a href="#%E3%81%A9%E3%81%86%E3%82%84%E3%81%A3%E3%81%A6%E5%8B%95%E3%81%84%E3%81%A6%E3%81%84%E3%82%8B%E3%81%AE%E3%81%8B"><i class="fa fa-link"></i></a>どうやって動いているのか</h1>

<p>なぜ左右キーを押すと左右に動き、スペースキーを押すとジャンプするのかを見ていこうと思います。<br>
<code>Inspector</code>のユニティちゃんを見てみると、<code>UnityChan2DController.cs</code>が<code>AddComponent</code>されています。<br>
ユニティちゃんの制御はこのコントローラーによって行われているようですので、中身を見てみると、下記のような処理があります。</p>

<div class="code-frame" data-lang="c#"><div class="highlight"><pre class="with-code"><code><span class="k">void</span> <span class="nf">Update</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">m_state</span> <span class="p">!=</span> <span class="n">State</span><span class="p">.</span><span class="n">Damaged</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="kt">float</span> <span class="n">x</span> <span class="p">=</span> <span class="n">Input</span><span class="p">.</span><span class="nf">GetAxis</span><span class="p">(</span><span class="s">"Horizontal"</span><span class="p">);</span>
            <span class="kt">bool</span> <span class="n">jump</span> <span class="p">=</span> <span class="n">Input</span><span class="p">.</span><span class="nf">GetButtonDown</span><span class="p">(</span><span class="s">"Jump"</span><span class="p">);</span>
            <span class="nf">Move</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">jump</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
</code></pre></div></div>

<p>どうやら<code>Update()</code>の中で常に呼ばれているこの<code>Move()</code>というメソッドがユニティちゃんを動かしているような気がしますね。<br>
では、より細かく内容を見ていきます。</p>

<h2>
<span id="なぜ横キーを押すと横に動くのか" class="fragment"></span><a href="#%E3%81%AA%E3%81%9C%E6%A8%AA%E3%82%AD%E3%83%BC%E3%82%92%E6%8A%BC%E3%81%99%E3%81%A8%E6%A8%AA%E3%81%AB%E5%8B%95%E3%81%8F%E3%81%AE%E3%81%8B"><i class="fa fa-link"></i></a>なぜ横キーを押すと横に動くのか？</h2>

<p>なぜユニティちゃんは右キーを押すと右に、左キーを押すと左に動くのでしょうか。<br>
これは、<code>Move()</code>に引数として渡されている<code>x</code>によって決まっています。</p>

<div class="code-frame" data-lang="c#"><div class="highlight"><pre class="with-code"><code><span class="kt">float</span> <span class="n">x</span> <span class="p">=</span> <span class="n">Input</span><span class="p">.</span><span class="nf">GetAxis</span><span class="p">(</span><span class="s">"Horizontal"</span><span class="p">);</span>
</code></pre></div></div>

<p>ここの<code>Input.GetAxis</code>は、キーボードやジョイスティックの入力によって、-1から1の間で値を返すメソッドです。そして、引数の<code>String</code>によって、下記のように使い分けられます。<br>
- <code>Horizontal</code> -&gt; 左右の入力を対象とする<br>
- <code>Vertical</code> -&gt; 上下の入力を対象とする<br>
要するにここは、「何も押してなければ0、左右キーが押されれば、-1〜1の間の値を返す」という処理のようです。</p>

<p>例えばここを以下のように書き換えます</p>

<div class="code-frame" data-lang="c#"><div class="highlight"><pre class="with-code"><code><span class="kt">float</span> <span class="n">x</span> <span class="p">=</span> <span class="n">Input</span><span class="p">.</span><span class="nf">GetAxis</span><span class="p">(</span><span class="s">"Vertical"</span><span class="p">);</span>
</code></pre></div></div>

<p>これでゲームを実行すると、ユニティちゃんは<strong>左右キーを押しても反応せず、上キーを押すと右に、下キーを押すと左に</strong>動きます(<code>Horizontal</code>の"右"と同様に、<code>Vertical</code>の"上"が「正」の値を取るためです)</p>

<p>というわけで、(<code>Horizontal</code>なら)<code>x</code>には左右キーを押すことで-1〜1の値を取ることがわかりました。<br>
おそらくこの<code>x</code>が<code>Move()</code>の中でユニティちゃんを左右に動かしているのでしょう。</p>

<h2>
<span id="なぜ徐々に加速するのか" class="fragment"></span><a href="#%E3%81%AA%E3%81%9C%E5%BE%90%E3%80%85%E3%81%AB%E5%8A%A0%E9%80%9F%E3%81%99%E3%82%8B%E3%81%AE%E3%81%8B"><i class="fa fa-link"></i></a>なぜ徐々に加速するのか？</h2>

<p>ユニティちゃんはキーを押すと、緩やかに加速して最高速度に達すると一定の速度になっていることがわかります。<br>
これも、<code>Input.GetAxis()</code>の仕様によるものです。<br>
試しに<code>Debug.Log</code>を差し込み、キーの「右」を押し込んでみます。<br>
すると、<code>x</code>の値は0から徐々に1になっていくことがわかります。</p>

<p><a href="https://camo.qiitausercontent.com/25b6dc974864c8d79446c306e655972035a153d2/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f39373238362f33633664326263642d366533312d326138662d353961622d3030356264643362666132612e706e67" target="_blank" rel="nofollow noopener"><img width="882" alt="スクリーンショット 2018-02-07 19.12.31.png" src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F97286%2F3c6d2bcd-6e31-2a8f-59ab-005bdd3bfa2a.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=0aee5ff0898c533383e02ab3e8dbaff8" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/97286/3c6d2bcd-6e31-2a8f-59ab-005bdd3bfa2a.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F97286%2F3c6d2bcd-6e31-2a8f-59ab-005bdd3bfa2a.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=1400d72b5961aba4eb7258ff72f2dc3a 1x" loading="lazy"></a></p>

<p>また、離すと、<code>x</code>は徐々に0に近づいていきます。<br>
ジョイスティックなどの場合は傾きの度合いを考慮して値を取得できるのですが、キーボードの場合はこのように、押し続けることで徐々に値が上昇するという特性があります。<br>
その結果、ユニティちゃんは横キーを入れることで一瞬で最速点に到達になるわけではなく、徐々に速度が上がり最高速度に到達するようです。</p>

<p>では、実際に決定した<code>x</code>がどう使われているのか、<code>Move()</code>関数の中を見て行こうと思います。</p>

<div class="code-frame" data-lang="c#"><div class="highlight"><pre class="with-code"><code><span class="k">void</span> <span class="nf">Move</span><span class="p">(</span><span class="kt">float</span> <span class="n">move</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">jump</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">Mathf</span><span class="p">.</span><span class="nf">Abs</span><span class="p">(</span><span class="n">move</span><span class="p">)</span> <span class="p">&gt;</span> <span class="m">0</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">Quaternion</span> <span class="n">rot</span> <span class="p">=</span> <span class="n">transform</span><span class="p">.</span><span class="n">rotation</span><span class="p">;</span>
            <span class="n">transform</span><span class="p">.</span><span class="n">rotation</span> <span class="p">=</span> <span class="n">Quaternion</span><span class="p">.</span><span class="nf">Euler</span><span class="p">(</span><span class="n">rot</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">Mathf</span><span class="p">.</span><span class="nf">Sign</span><span class="p">(</span><span class="n">move</span><span class="p">)</span> <span class="p">==</span> <span class="m">1</span> <span class="p">?</span> <span class="m">0</span> <span class="p">:</span> <span class="m">180</span><span class="p">,</span> <span class="n">rot</span><span class="p">.</span><span class="n">z</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="p">...</span>
    <span class="p">}</span>
</code></pre></div></div>

<p>まずはじめにここの処理を見て行こうと思います。<br>
<code>Mathf.Abs()</code>は絶対値を取るので、この<code>if</code>は<code>move</code>が0以外、要するに何かしらのキーが押されていたら<code>true</code>になるようです。<br>
<code>Mathf.Sign()</code>は引数が0と正の値の場合は1、負の値の場合は-1を返します。<br>
<code>if</code>の中の処理は、自身の<code>Quaternion</code>(回転情報)を取得して、y軸に関してのみ、正の値であれば0、負の値であれば180としています。<br>
要するにここは、入力されたキーにより、ユニティちゃんの「右向き」か「左向き」かを制御している部分だということがわかりました。</p>

<p>次に下記の処理</p>

<div class="code-frame" data-lang="c#"><div class="highlight"><pre class="with-code"><code>
<span class="k">void</span> <span class="nf">Move</span><span class="p">(</span><span class="kt">float</span> <span class="n">move</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">jump</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="p">...</span>

        <span class="n">m_rigidbody2D</span><span class="p">.</span><span class="n">velocity</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Vector2</span><span class="p">(</span><span class="n">move</span> <span class="p">*</span> <span class="n">maxSpeed</span><span class="p">,</span> <span class="n">m_rigidbody2D</span><span class="p">.</span><span class="n">velocity</span><span class="p">.</span><span class="n">y</span><span class="p">);</span>

        <span class="n">m_animator</span><span class="p">.</span><span class="nf">SetFloat</span><span class="p">(</span><span class="s">"Horizontal"</span><span class="p">,</span> <span class="n">move</span><span class="p">);</span>

        <span class="p">...</span>
    <span class="p">}</span>
</code></pre></div></div>

<p><code>m_rigidbody2D</code>という変数の<code>velocity</code>に新しい<code>Vector2</code>を入れています。<br>
まずこの<code>m_rigidbody2D</code>ですが、これはクラスの最初に定義されていて、ユニティちゃん自身の<code>GameObject</code>の<code>Component</code>の<code>Rigidbody2D</code>をさしています。<br>
<code>Rigidbody2D</code>は簡単に言うとUnity標準搭載の物理エンジンで、重力や加速度や衝突などを制御するコンポーネントです。<br>
ユニティちゃんにはこの<code>Rigidbody2D</code>が<code>AddComponent</code>されています。</p>

<p>で、問題はその<code>Rigidbody2D.velocity</code>に値を代入している点です。<br>
<code>Rigidbody2D.velocity</code>は「速度」のことで、型は<code>Vector2</code>です。<br>
要するにここはx軸とy軸に対しての速度情報を更新している処理になります。</p>

<p>y軸に対しては、自身の<code>velocity</code>のy値を入れているので、つまり「変更なし」ということになります。<br>
一方、x軸は<code>move * maxSpeed</code>(クラスの上のほうで<code>10f</code>と宣言されています)を入れています。<br>
<code>move</code> は <code>Input.GetAxis("Vertical")</code>によって得られた<code>float</code>値でしたよね。<br>
つまり、ここは、入力された<code>-10〜10</code>の値が代入されています。</p>

<p>横キーを押したことでユニティちゃんが横に動くのは、まさにここで速度情報である<code>velocity</code>に値が代入されているから、というわけですね。</p>

<h2>
<span id="なぜスペースキーを押すとジャンプするのか" class="fragment"></span><a href="#%E3%81%AA%E3%81%9C%E3%82%B9%E3%83%9A%E3%83%BC%E3%82%B9%E3%82%AD%E3%83%BC%E3%82%92%E6%8A%BC%E3%81%99%E3%81%A8%E3%82%B8%E3%83%A3%E3%83%B3%E3%83%97%E3%81%99%E3%82%8B%E3%81%AE%E3%81%8B"><i class="fa fa-link"></i></a>なぜスペースキーを押すとジャンプするのか？</h2>

<p>続いて、スペースキーを押すとなぜユニティちゃんがジャンプをするのかを見ていこうと思います。<br>
まずは<code>move()</code>に入る前の<code>Update()</code>内の処理から</p>

<div class="code-frame" data-lang="c#"><div class="highlight"><pre class="with-code"><code><span class="kt">bool</span> <span class="n">jump</span> <span class="p">=</span> <span class="n">Input</span><span class="p">.</span><span class="nf">GetButtonDown</span><span class="p">(</span><span class="s">"Jump"</span><span class="p">);</span>
</code></pre></div></div>

<p>なるほど、<code>Jump</code>を押したら<code>jump</code>が<code>true</code>になるんですね(？)</p>

<p>イメージだと、ここは「スペースキーを押すと」、<code>jump</code>が<code>true</code>になる、といった処理にしそうですが、この<code>Input.GetButtonDown</code>の引数には、<code>Jump</code>という<code>string</code>が渡されています。<br>
つまり、どこかでこの<code>Jump</code>というのは「スペースキー」のことである、ということが設定されている、ということになります。</p>

<p>その場所は、下記を開くと設定されています。<br>
<code>Edit &gt; Project Setting &gt; Input</code><br>
<a href="https://camo.qiitausercontent.com/b11683328e91d15ff16fd1c1407563fb55466d84/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f39373238362f35316631363136332d666139302d373665392d326437652d3932616161646562323531332e706e67" target="_blank" rel="nofollow noopener"><img width="422" alt="スクリーンショット 2018-03-27 23.05.54.png" src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F97286%2F51f16163-fa90-76e9-2d7e-92aaadeb2513.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=ee0799211b5bffdcf26e8a66870ab935" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/97286/51f16163-fa90-76e9-2d7e-92aaadeb2513.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F97286%2F51f16163-fa90-76e9-2d7e-92aaadeb2513.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=a87bde256f786a2e199c010595788c67 1x" loading="lazy"></a></p>

<p>上記を開くと、<code>Inspector</code>に<code>Axes</code>という項目が表示され、この中に先ほどの<code>Jump</code>という記述があり、その中の<code>Positive Button</code>というキーに対して、<code>space</code>と設定されていることがわかります。<br>
これは<code>Input Manager</code>と呼ばれるもので、キーやJoystickの入力による各種設定が入っています。</p>

<p><a href="https://camo.qiitausercontent.com/a3242141c02cc4080e32e55a8a09c0ab8d08cdda/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f39373238362f37356234643739642d333239382d653939372d626563652d3431666331366532366262622e706e67" target="_blank" rel="nofollow noopener"><img width="311" alt="スクリーンショット 2018-03-27 22.55.37.png" src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F97286%2F75b4d79d-3298-e997-bece-41fc16e26bbb.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=f3d804880ca940c70a0f365063ec3048" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/97286/75b4d79d-3298-e997-bece-41fc16e26bbb.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F97286%2F75b4d79d-3298-e997-bece-41fc16e26bbb.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=5fd4495b0d9e0e2151e6c1c80f3579a1 1x" loading="lazy"></a></p>

<p>ここで<code>space</code>という文言を、例えば<code>w</code>としてみると、ユニティちゃんはスペースキーを押してもジャンプしなくなり、代わりに<code>w</code>キーを押すことでジャンプすることがわかります。<br>
このように、キーバインドはこの<code>Input Manager</code>で管理されている、ということですね。<br>
<code>Positive Button</code>以外の各種細かな設定は別途Unityの<code>Documentation</code>の<code>Input Manager</code>を見られるといいと思います。</p>

<p>では、実際にこのスペースキーを押すと<code>true</code>になる<code>jump</code>は<code>move()</code>内でどのように使われているのかを見ていきます。</p>

<div class="code-frame" data-lang="c#"><div class="highlight"><pre class="with-code"><code><span class="k">void</span> <span class="nf">Move</span><span class="p">(</span><span class="kt">float</span> <span class="n">move</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">jump</span><span class="p">)</span>
<span class="p">{</span>
        <span class="p">...</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">jump</span> <span class="p">&amp;&amp;</span> <span class="n">m_isGround</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">m_animator</span><span class="p">.</span><span class="nf">SetTrigger</span><span class="p">(</span><span class="s">"Jump"</span><span class="p">);</span>
        <span class="nf">SendMessage</span><span class="p">(</span><span class="s">"Jump"</span><span class="p">,</span> <span class="n">SendMessageOptions</span><span class="p">.</span><span class="n">DontRequireReceiver</span><span class="p">);</span>
        <span class="n">m_rigidbody2D</span><span class="p">.</span><span class="nf">AddForce</span><span class="p">(</span><span class="n">Vector2</span><span class="p">.</span><span class="n">up</span> <span class="p">*</span> <span class="n">jumpPower</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>まず、<code>if (jump &amp;&amp; m_isGround)</code>ですが、この中の<code>m_isGround</code>は、名前からしておそらく「地面に立っているかどうか」を判定している<code>bool</code>だと思われますが、実際にどこでどう設定されているかというと、<br>
<code>MonoBehaviour.FixedUpdate()</code>にて</p>

<div class="code-frame" data-lang="c#"><div class="highlight"><pre class="with-code"><code><span class="k">void</span> <span class="nf">FixedUpdate</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">Vector2</span> <span class="n">pos</span> <span class="p">=</span> <span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">;</span>
    <span class="n">Vector2</span> <span class="n">groundCheck</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Vector2</span><span class="p">(</span><span class="n">pos</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">pos</span><span class="p">.</span><span class="n">y</span> <span class="p">-</span> <span class="p">(</span><span class="n">m_centerY</span> <span class="p">*</span> <span class="n">transform</span><span class="p">.</span><span class="n">localScale</span><span class="p">.</span><span class="n">y</span><span class="p">));</span>
    <span class="n">Vector2</span> <span class="n">groundArea</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Vector2</span><span class="p">(</span><span class="n">m_boxcollier2D</span><span class="p">.</span><span class="n">size</span><span class="p">.</span><span class="n">x</span> <span class="p">*</span> <span class="m">0.49f</span><span class="p">,</span> <span class="m">0.05f</span><span class="p">);</span>
    <span class="n">m_isGround</span> <span class="p">=</span> <span class="n">Physics2D</span><span class="p">.</span><span class="nf">OverlapArea</span><span class="p">(</span><span class="n">groundCheck</span> <span class="p">+</span> <span class="n">groundArea</span><span class="p">,</span> <span class="n">groundCheck</span> <span class="p">-</span> <span class="n">groundArea</span><span class="p">,</span> <span class="n">whatIsGround</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>といった記述があります。<br>
<code>Physics2D.OverlapArea</code>とは、第一引数<code>Vector2</code>と第二引数<code>Vector2</code>によって作られた四角の領域が、コライダーと衝突しているかを返します。<br>
<code>pos</code>はユニティちゃんの<code>position</code>、<br>
<code>groundCheck</code>はユニティちゃんのちょっと下(<code>m_centerY</code>は<code>1.5f</code>)、<br>
つまりこの<code>Physics2D.OverlapArea</code>は、<br>
<strong>ユニティちゃんのちょっと下にある横長い四角形</strong>というわけですね。</p>

<p><a href="https://camo.qiitausercontent.com/522f85ecd2ddf295467ed5e769c48c7aaa57b44d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f39373238362f66306661343266362d393632362d363738612d616134302d6561626661323831396563302e706e67" target="_blank" rel="nofollow noopener"><img width="427" alt="スクリーンショット 2018-03-28 0.43.06.png" src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F97286%2Ff0fa42f6-9626-678a-aa40-eabfa2819ec0.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=3c89c1fa1eec6c5e720b6a52c40d131a" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/97286/f0fa42f6-9626-678a-aa40-eabfa2819ec0.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F97286%2Ff0fa42f6-9626-678a-aa40-eabfa2819ec0.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=7a55d44c7b4a39151563931751763ef7 1x" loading="lazy"></a></p>

<p>そして、この<code>Physics2D.OverlapArea</code>が、第三引数の<code>whatIsGround</code>に限定したレイヤーのコライダーに重なっているかどうか？が、<code>m_isGround</code>というわけです。<br>
このように、ユニティちゃんの足元に<code>OverlapArea</code>を用意しておき、これが地面に接していれば、結果的にユニティちゃんが「地面に立っている」と判断しているわけですね。</p>

<p>さて、ようやくこれで<br>
<code>if (jump &amp;&amp; m_isGround)</code><br>
の中に入る条件がわかりました。<br>
つまり、「地面に接している状態でかつジャンプがtrueになった瞬間」というわけです。</p>

<p>では、肝心のその中の処理ですが</p>

<div class="code-frame" data-lang="c#"><div class="highlight"><pre class="with-code"><code><span class="n">m_rigidbody2D</span><span class="p">.</span><span class="nf">AddForce</span><span class="p">(</span><span class="n">Vector2</span><span class="p">.</span><span class="n">up</span> <span class="p">*</span> <span class="n">jumpPower</span><span class="p">);</span>
</code></pre></div></div>

<p>ユニティちゃんがジャンプする処理は、まさにここになります。<br>
ここでまた新しく、<code>Rigidbody2D.AddForce</code>というものが登場しました。<br>
これはその名の通り、<code>Rigidbody2D</code>に「<code>Vector2</code>の力を加える」メソッドです。</p>

<p><code>Vector2.up</code>とは、<code>Vector2(0f, 1f)</code>と同義なため、つまりこの処理は<br>
y軸方向に、固定の<code>jumpPower</code>(<code>1000f</code>と定義されています)分、力を加える、という意味ですね。</p>

<p>これにより、ユニティちゃんは<code>1000f</code>のパワーをy軸の正の方向に受けることで、上に飛び上がり、<br>
そして<code>Rigidbody2D</code>の物理演算により、落下する、といった原理になります。</p>

<h2>
<span id="velocityとaddforce" class="fragment"></span><a href="#velocity%E3%81%A8addforce"><i class="fa fa-link"></i></a>velocityとAddForce</h2>

<p>最後に、今回ユニティちゃんが移動するにあたって左右の移動には<code>Rigidbody2D.velocity</code>を、ジャンプには<code>Rigidbody2D.AddForce</code>が使われていました。<br>
ここでふと思うのが、</p>

<ul>
<li>左右移動に<code>Rigidbody2D.AddForce</code>を使ってもいいのでは？</li>
<li>ジャンプに<code>Rigidbody2D.velocity</code>を使ってもいいのでは？</li>
</ul>

<p>という点です。<br>
そもそもこの２つはどういった違いがあって、どのように使い分けるべきなのか？について触れていきたいと思います。</p>

<h3>
<span id="velocityとaddforceの違い" class="fragment"></span><a href="#velocity%E3%81%A8addforce%E3%81%AE%E9%81%95%E3%81%84"><i class="fa fa-link"></i></a>velocityとAddForceの違い</h3>

<p><code>velocity</code>は<strong>速度情報のプロパティ</strong>であり、<code>AddForce</code>は<strong>指定のベクトルに対し力を加えるメソッド</strong>です。<br>
つまり、そもそも<code>velocity</code>は重力、摩擦など物理演算によって算出される情報にあたります。そのため、<code>velocity</code>を直接書き換えるということは、<strong>物理演算を無視して速度そのものを直書きする行為</strong>となるわけです。<br>
<code>AddForce</code>に<code>100f</code>の力を加えると、物理演算が考慮されますが、<code>velocity</code>に<code>100f</code>を加えると、突然速度<code>100f</code>になる、というわけです。</p>

<p>この違いは、下記のようにコードを書き換えるとわかりやすいです。</p>

<div class="code-frame" data-lang="c#"><div class="highlight"><pre class="with-code"><code><span class="c1">//m_rigidbody2D.AddForce(Vector2.up * jumpPower);</span>
<span class="n">m_rigidbody2D</span><span class="p">.</span><span class="n">velocity</span> <span class="p">=</span> <span class="n">Vector2</span><span class="p">.</span><span class="n">up</span> <span class="p">*</span> <span class="n">jumpPower</span><span class="p">;</span>
</code></pre></div></div>

<p>ユニティちゃんのジャンプで、「y軸方向に<code>1000f</code>の力を与える」という既存の処理を、「y軸方向を<code>1000f</code>の速度にする」という処理に書き換えてます。</p>

<p>この状態でユニティちゃんがジャンプをするとどうなるかというと、<strong>消えます</strong>。正しくはy軸の正の方向にとんでもない速度で吹っ飛んでいきます。重さなどが考慮されずに突然<code>1000f</code>の速度になるからですね。<br>
ちなみに、velocityに<code>1000f</code>ではなく<code>20f</code>くらいにすると、だいたい<code>AddForce</code>に<code>1000f</code>を入れるのと同じくらいになります。</p>

<p>さて、ではなぜユニティちゃんは横移動の際に<code>velocity</code>を使っているのか？横移動も<code>AddForce</code>を使った方が良いのでは？と思うわけですが、これについては下記のような理由があるかと思われます（あくまで憶測です）</p>

<p>まず、試しに下記のようにコードを書き換えてみます。</p>

<div class="code-frame" data-lang="c#"><div class="highlight"><pre class="with-code"><code><span class="c1">//m_rigidbody2D.velocity = new Vector2(move * maxSpeed, m_rigidbody2D.velocity.y);</span>
<span class="n">m_rigidbody2D</span><span class="p">.</span><span class="nf">AddForce</span><span class="p">(</span><span class="k">new</span> <span class="nf">Vector2</span><span class="p">(</span><span class="n">move</span> <span class="p">*</span> <span class="n">maxSpeed</span><span class="p">,</span> <span class="n">m_rigidbody2D</span><span class="p">.</span><span class="n">velocity</span><span class="p">.</span><span class="n">y</span><span class="p">));</span>
</code></pre></div></div>

<p>ジャンプの時と同様、同じ値を<code>velocity</code>直書きではなく、<code>AddForce</code>の引数に渡すパターンです。<br>
これで実行して横キーを少し押しっぱなしにしてみると、ユニティちゃんは入力されたキーの方向に力が加わるので動き始めるわけですが、キーを離しても止まらず、すーーーっと滑り続けます。</p>

<p>この理由は、ユニティちゃんの<code>Rigidbody2D</code>の<code>Linear Drag</code>(位置移動の減衰値)が0に設定されているためです(滑る床などで使えそうなプロパティですね)。<br>
では試しに、この<code>Linear Drag</code>を2に変更してみます。<br>
すると、ユニティちゃんはキーを話すことで徐々に減速して止まるようになるわけですが、今度は最高速度が下がったように感じます。<br>
それもそうで、この<code>Linear Drag</code>はキーを押し続けているときももちろん有効ですので、移動中も常に減衰が入っているわけですね。<br>
しかも、妙にキーの入力に対して加速度が遅くもっさりしています。</p>

<p>と、こんな感じで、横移動に関しては変に物理演算が入ることが、かえって妙なもっさり感や違和感を出してしまう場合もあるようです。<br>
もちろん、もっと<code>AddForce</code>で加える力を大きくしたり、<code>Input.GetAxis("Horizontal");</code>で得た値をそのまま使わず<code>Mathf.Sign</code>などにかけてより急に力を加えるようにする、などのチューニングにより、自然さを出すことができるかと思いますが、それならもう<code>velocity</code>に直接速度を書き込むほうが簡単なようにも感じます。</p>

<p>もっと横を押したらスッと動き出して、止まるときもスッと止まって欲しい。<br>
そんなスッキリした操作感に、<code>velocity</code>を直接書き換えることで対応しているのではないかと思います。</p>

<h1>
<span id="おわりに" class="fragment"></span><a href="#%E3%81%8A%E3%82%8F%E3%82%8A%E3%81%AB"><i class="fa fa-link"></i></a>おわりに</h1>

<p>というわけで、ユニティちゃん2Dを使って、2Dキャラクターの動きの基本に当たる「横移動とジャンプ」を学んで見ました。いろいろと応用ができそうなものや、まだ触ってないプロパティなども多数あったので、それをうまく使って、楽しく2Dゲームを作れればと思います。</p>

<h1>
<span id="ライセンス" class="fragment"></span><a href="#%E3%83%A9%E3%82%A4%E3%82%BB%E3%83%B3%E3%82%B9"><i class="fa fa-link"></i></a>ライセンス</h1>

<p>本記事に登場したキャラクター(ユニティちゃん)、ゲーム画面、ソースコード等は<a href="http://unity-chan.com/contents/license_jp/" rel="nofollow noopener" target="_blank">ユニティちゃんライセンス</a>で提供されています。</p>

<p><a href="https://camo.qiitausercontent.com/c1b7aadbedba10efd5ed033992b2b3a940164a36/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f39373238362f61343334656363342d343935612d373964652d653465612d3137666666366334666230652e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F97286%2Fa434ecc4-495a-79de-e4ea-17fff6c4fb0e.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=041df999ec2e5d72c410a5cb111398d7" alt="imageLicenseLogo.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/97286/a434ecc4-495a-79de-e4ea-17fff6c4fb0e.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F97286%2Fa434ecc4-495a-79de-e4ea-17fff6c4fb0e.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=4181665d63827555ea42d88a3dc5fa66 1x" loading="lazy"></a></p>
</div></div></section><div class="css-1yzj1fm"><div class="css-1uv1qiv"><span class="fa fa-twitter"></span></div><div class="css-1uv1qiv"><span class="fa fa-facebook"></span></div></div><div class="apm-Content"><div class="apm-Content_title">Why not register and get more from Qiita?</div><ol class="apm-Content_list"><li>We will deliver articles that match you<div class="description">By following users and tags, you can catch up information on technical fields that you are interested in as a whole</div></li><li>you can read useful information later efficiently<div class="description">By &quot;stocking&quot; the articles you like, you can search right away</div></li><div><a class="apm-Content_help" href="https://help.qiita.com/ja/articles/qiita-login-user" target="_blank"><i class="fa fa-fw fa-arrow-circle-right"></i>What you can do with signing up</a></div></ol><a href="/signup?callback_action=login_or_signup&amp;redirect_to=%2Fokk_archives%2Fitems%2F61a23ebda1d6cab2d08c&amp;realm=qiita" class="apm-Content_button apm-Content_button-signup">Sign up</a><a href="/login?callback_action=login_or_signup&amp;redirect_to=%2Fokk_archives%2Fitems%2F61a23ebda1d6cab2d08c&amp;realm=qiita" class="apm-Content_button apm-Content_button-signin">Login</a></div></div><div class="css-helsa7"></div></div></div></div><div class="css-109dbrr"><div class="css-5jpx49"><div class="css-mnxgyc"><button class=" css-1vlpknv"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/okk_archives/items/61a23ebda1d6cab2d08c/likers" class="css-1iupg5d">67</a></div><div class="css-fsjkhv"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-1b17vb0">69</span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-7i7f4d"><div class="css-1gj7nt">Improve article</div><a href="/drafts/61a23ebda1d6cab2d08c/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/okk_archives/items/61a23ebda1d6cab2d08c/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/okk_archives/items/61a23ebda1d6cab2d08c/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/okk_archives/items/61a23ebda1d6cab2d08c/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/okk_archives/items/61a23ebda1d6cab2d08c.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="PersonalArticlePage" data-dom-id="PersonalArticlePage-react-component-2079ecd5-35c2-449f-800c-cde629a98868">{"authorAnalyticsTrackingId":null,"organizationAnalyticsTrackingId":null}</script>
      
<footer id="globalFooter" class="st-Footer"><div class="st-Footer_container"><div class="st-Footer_start"><div class="st-Footer_logo"><svg viewbox="0 0 426.57 130" xmlns="http://www.w3.org/2000/svg"><circle cx="167.08" cy="21.4" r="12.28" /><path d="M250.81 29.66h23.48v18.9h-23.48z" /><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z" /><circle cx="216.33" cy="21.4" r="12.28" /></svg></div><div class="st-Footer_catchcopy">How developers code is here.</div><div class="st-Footer_socials"><a class="fa fa-twitter" href="https://twitter.com/qiita"></a><a class="fa fa-facebook-square" href="https://www.facebook.com/qiita/"></a></div></div><div class="st-Footer_end"><div class="st-Footer_qiita"><div class="st-Footer_label">Qiita</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="/about">About</a><a href="/terms">Terms</a><a href="/privacy">Privacy</a><a target="_blank" href="http://help.qiita.com/ja/articles/qiita-community-guideline">Guideline</a><a target="_blank" href="https://help.qiita.com/ja/articles/others-brand-guideline">Design Guideline</a></div><div class="st-Footer_column"><a href="/release-notes">Release</a><a href="/api/v2/docs">API</a><a href="/feedback/new">ご意見</a><a href="https://help.qiita.com">Help</a><a target="_blank" href="https://qiita.com/ads?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Advertisement</a></div></div></div><div class="st-Footer_increments"><div class="st-Footer_label">Increments</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="https://increments.co.jp/company/">About</a><a href="https://increments.co.jp/jobs/">採用情報</a><a href="https://blog.qiita.com">Blog</a></div><div class="st-Footer_column"><a href="https://teams.qiita.com/">Qiita Team</a><a href="https://jobs.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Jobs</a><a href="https://zine.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Zine</a></div></div></div></div></div><div class="st-Footer_copyright">© 2011-2021 Increments Inc.</div></footer><div id="Snackbar-react-component-b61081db-e8ed-43b9-89b2-e00a2a28d665"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="Snackbar" data-dom-id="Snackbar-react-component-b61081db-e8ed-43b9-89b2-e00a2a28d665">{}</script>
      
<div id="LoginModal-react-component-81115450-a396-408a-be81-52a439a32b5d"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="LoginModal" data-dom-id="LoginModal-react-component-81115450-a396-408a-be81-52a439a32b5d">{}</script>
      
<div id="StockModal-react-component-2b4e02f5-c92e-477b-8a41-15001b8a35f2"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="StockModal" data-dom-id="StockModal-react-component-2b4e02f5-c92e-477b-8a41-15001b8a35f2">{}</script>
      
</div><div id="dataContainer" style="display: none;" data-config="{&quot;actionPath&quot;:&quot;public/items#show&quot;,&quot;settings&quot;:{&quot;analyticsTrackingId&quot;:&quot;UA-24675221-12&quot;,&quot;assetsMap&quot;:{},&quot;csrfToken&quot;:&quot;3bgSIkeZ0x5hFq/rqhFPZ0U4z0L47PZoZPfRc4qkp8nArzxABASpJFi+UObp6+wZYCUyAdVv/zdbl1P9l922kQ==&quot;,&quot;locale&quot;:&quot;en&quot;},&quot;currentUser&quot;:null}" /></body></html><script type="application/json" data-js-react-on-rails-store="AppStoreWithReactOnRails">{"snackbar":{"type":"","body":"","isActive":false},"article":{"article":{"body":"\n\u003ch1\u003e\n\u003cspan id=\"tl-dr\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#tl-dr\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eTL; DR\u003c/h1\u003e\n\n\u003cp\u003eはじめて2Dゲームを作るにあたって、ユニティちゃん2Dの仕組みを理解することがとても参考になったので、\u003cbr\u003e\n本記事はユニティちゃん2Dを触りつつ、改変を加えることでどういう動きになるのかを試しながら、2Dキャラの動きを理解していこう、という趣旨になります。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"ユニティちゃん2d\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%A6%E3%83%8B%E3%83%86%E3%82%A3%E3%81%A1%E3%82%83%E3%82%932d\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eユニティちゃん2D\u003c/h1\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/cbe72c5d141d45a24e4e8b3abdece8fbd6cb9aa7/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f39373238362f66626234616264662d333839632d356365382d336538352d3231383732663165623234622e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg width=\"957\" alt=\"スクリーンショット 2018-02-06 22.25.21.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F97286%2Ffbb4abdf-389c-5ce8-3e85-21872f1eb24b.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=33a8b596c65534a8ca6dbd3db8696078\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/97286/fbb4abdf-389c-5ce8-3e85-21872f1eb24b.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F97286%2Ffbb4abdf-389c-5ce8-3e85-21872f1eb24b.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=dede4e459df568a0744de78e279795f9 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eユニティちゃん2Dは、みなさんご存知オープンソース系アイドル「ユニティちゃん(Unity-Chan)」の2Dゲームのサンプルプロジェクトです。\u003cbr\u003e\n2014年6月に最新版のv1.1が公開されて以降更新はありませんが、2Dキャラの移動だけでなく、敵キャラクターの存在や破壊できるブロック、取得できるコインなど、2Dゲームの要素として基本的なものが揃っている大変いい教材だと思います。\u003cbr\u003e\n\u003ca href=\"http://unity-chan.com/download/releaseNote.php?id=UnityChan2D\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://unity-chan.com/download/releaseNote.php?id=UnityChan2D\u003c/a\u003e\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"導入手順\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%B0%8E%E5%85%A5%E6%89%8B%E9%A0%86\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e導入手順\u003c/h1\u003e\n\n\u003cp\u003e導入手順については詳細は省きますが、簡単に以下のような流れでできます。\u003cbr\u003e\n1. ユニティちゃん2DのDLページ(上記URL)から、「\u003ccode\u003eUnityChan2D.unitypackage\u003c/code\u003e」をダウンロードする\u003cbr\u003e\n2. Unityから空の2Dプロジェクトを開き、DLした\u003ccode\u003eunitypackage\u003c/code\u003eを読み込む\u003cbr\u003e\n3. Titleのシーンを開き、実行して起動できれば完了\u003cbr\u003e\n※なお、確認時は5.5.4p3を使用しています\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"とりあえず動かしてみる\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%A8%E3%82%8A%E3%81%82%E3%81%88%E3%81%9A%E5%8B%95%E3%81%8B%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eとりあえず動かしてみる\u003c/h1\u003e\n\n\u003cp\u003e「左右キー」や「スペースキー」を押すことで、ユニティちゃんが左右に動いたり、ジャンプしたりします。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/fe579a6a0eea88f2995851cc8092d6172bde24d5/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f39373238362f33363232386336632d386439612d376561622d633036312d3764343935356432613661632e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg width=\"721\" alt=\"スクリーンショット 2018-02-06 22.33.53.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F97286%2F36228c6c-8d9a-7eab-c061-7d4955d2a6ac.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=4b0c800411601948fd444f9d037314a9\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/97286/36228c6c-8d9a-7eab-c061-7d4955d2a6ac.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F97286%2F36228c6c-8d9a-7eab-c061-7d4955d2a6ac.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=f8c0ea39fc4959d26da03a007e2e776d 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"どうやって動いているのか\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%A9%E3%81%86%E3%82%84%E3%81%A3%E3%81%A6%E5%8B%95%E3%81%84%E3%81%A6%E3%81%84%E3%82%8B%E3%81%AE%E3%81%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eどうやって動いているのか\u003c/h1\u003e\n\n\u003cp\u003eなぜ左右キーを押すと左右に動き、スペースキーを押すとジャンプするのかを見ていこうと思います。\u003cbr\u003e\n\u003ccode\u003eInspector\u003c/code\u003eのユニティちゃんを見てみると、\u003ccode\u003eUnityChan2DController.cs\u003c/code\u003eが\u003ccode\u003eAddComponent\u003c/code\u003eされています。\u003cbr\u003e\nユニティちゃんの制御はこのコントローラーによって行われているようですので、中身を見てみると、下記のような処理があります。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eUpdate\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003em_state\u003c/span\u003e \u003cspan class=\"p\"\u003e!=\u003c/span\u003e \u003cspan class=\"n\"\u003eState\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eDamaged\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"kt\"\u003efloat\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eInput\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eGetAxis\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Horizontal\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n            \u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"n\"\u003ejump\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eInput\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eGetButtonDown\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Jump\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n            \u003cspan class=\"nf\"\u003eMove\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ejump\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eどうやら\u003ccode\u003eUpdate()\u003c/code\u003eの中で常に呼ばれているこの\u003ccode\u003eMove()\u003c/code\u003eというメソッドがユニティちゃんを動かしているような気がしますね。\u003cbr\u003e\nでは、より細かく内容を見ていきます。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"なぜ横キーを押すと横に動くのか\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%AA%E3%81%9C%E6%A8%AA%E3%82%AD%E3%83%BC%E3%82%92%E6%8A%BC%E3%81%99%E3%81%A8%E6%A8%AA%E3%81%AB%E5%8B%95%E3%81%8F%E3%81%AE%E3%81%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eなぜ横キーを押すと横に動くのか？\u003c/h2\u003e\n\n\u003cp\u003eなぜユニティちゃんは右キーを押すと右に、左キーを押すと左に動くのでしょうか。\u003cbr\u003e\nこれは、\u003ccode\u003eMove()\u003c/code\u003eに引数として渡されている\u003ccode\u003ex\u003c/code\u003eによって決まっています。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"kt\"\u003efloat\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eInput\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eGetAxis\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Horizontal\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eここの\u003ccode\u003eInput.GetAxis\u003c/code\u003eは、キーボードやジョイスティックの入力によって、-1から1の間で値を返すメソッドです。そして、引数の\u003ccode\u003eString\u003c/code\u003eによって、下記のように使い分けられます。\u003cbr\u003e\n- \u003ccode\u003eHorizontal\u003c/code\u003e -\u0026gt; 左右の入力を対象とする\u003cbr\u003e\n- \u003ccode\u003eVertical\u003c/code\u003e -\u0026gt; 上下の入力を対象とする\u003cbr\u003e\n要するにここは、「何も押してなければ0、左右キーが押されれば、-1〜1の間の値を返す」という処理のようです。\u003c/p\u003e\n\n\u003cp\u003e例えばここを以下のように書き換えます\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"kt\"\u003efloat\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eInput\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eGetAxis\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Vertical\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eこれでゲームを実行すると、ユニティちゃんは\u003cstrong\u003e左右キーを押しても反応せず、上キーを押すと右に、下キーを押すと左に\u003c/strong\u003e動きます(\u003ccode\u003eHorizontal\u003c/code\u003eの\"右\"と同様に、\u003ccode\u003eVertical\u003c/code\u003eの\"上\"が「正」の値を取るためです)\u003c/p\u003e\n\n\u003cp\u003eというわけで、(\u003ccode\u003eHorizontal\u003c/code\u003eなら)\u003ccode\u003ex\u003c/code\u003eには左右キーを押すことで-1〜1の値を取ることがわかりました。\u003cbr\u003e\nおそらくこの\u003ccode\u003ex\u003c/code\u003eが\u003ccode\u003eMove()\u003c/code\u003eの中でユニティちゃんを左右に動かしているのでしょう。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"なぜ徐々に加速するのか\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%AA%E3%81%9C%E5%BE%90%E3%80%85%E3%81%AB%E5%8A%A0%E9%80%9F%E3%81%99%E3%82%8B%E3%81%AE%E3%81%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eなぜ徐々に加速するのか？\u003c/h2\u003e\n\n\u003cp\u003eユニティちゃんはキーを押すと、緩やかに加速して最高速度に達すると一定の速度になっていることがわかります。\u003cbr\u003e\nこれも、\u003ccode\u003eInput.GetAxis()\u003c/code\u003eの仕様によるものです。\u003cbr\u003e\n試しに\u003ccode\u003eDebug.Log\u003c/code\u003eを差し込み、キーの「右」を押し込んでみます。\u003cbr\u003e\nすると、\u003ccode\u003ex\u003c/code\u003eの値は0から徐々に1になっていくことがわかります。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/25b6dc974864c8d79446c306e655972035a153d2/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f39373238362f33633664326263642d366533312d326138662d353961622d3030356264643362666132612e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg width=\"882\" alt=\"スクリーンショット 2018-02-07 19.12.31.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F97286%2F3c6d2bcd-6e31-2a8f-59ab-005bdd3bfa2a.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=0aee5ff0898c533383e02ab3e8dbaff8\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/97286/3c6d2bcd-6e31-2a8f-59ab-005bdd3bfa2a.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F97286%2F3c6d2bcd-6e31-2a8f-59ab-005bdd3bfa2a.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=1400d72b5961aba4eb7258ff72f2dc3a 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eまた、離すと、\u003ccode\u003ex\u003c/code\u003eは徐々に0に近づいていきます。\u003cbr\u003e\nジョイスティックなどの場合は傾きの度合いを考慮して値を取得できるのですが、キーボードの場合はこのように、押し続けることで徐々に値が上昇するという特性があります。\u003cbr\u003e\nその結果、ユニティちゃんは横キーを入れることで一瞬で最速点に到達になるわけではなく、徐々に速度が上がり最高速度に到達するようです。\u003c/p\u003e\n\n\u003cp\u003eでは、実際に決定した\u003ccode\u003ex\u003c/code\u003eがどう使われているのか、\u003ccode\u003eMove()\u003c/code\u003e関数の中を見て行こうと思います。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eMove\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003efloat\u003c/span\u003e \u003cspan class=\"n\"\u003emove\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"n\"\u003ejump\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eMathf\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAbs\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003emove\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eQuaternion\u003c/span\u003e \u003cspan class=\"n\"\u003erot\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003etransform\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003erotation\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"n\"\u003etransform\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003erotation\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eQuaternion\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eEuler\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003erot\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eMathf\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSign\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003emove\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e==\u003c/span\u003e \u003cspan class=\"m\"\u003e1\u003c/span\u003e \u003cspan class=\"p\"\u003e?\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"m\"\u003e180\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003erot\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ez\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"p\"\u003e...\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eまずはじめにここの処理を見て行こうと思います。\u003cbr\u003e\n\u003ccode\u003eMathf.Abs()\u003c/code\u003eは絶対値を取るので、この\u003ccode\u003eif\u003c/code\u003eは\u003ccode\u003emove\u003c/code\u003eが0以外、要するに何かしらのキーが押されていたら\u003ccode\u003etrue\u003c/code\u003eになるようです。\u003cbr\u003e\n\u003ccode\u003eMathf.Sign()\u003c/code\u003eは引数が0と正の値の場合は1、負の値の場合は-1を返します。\u003cbr\u003e\n\u003ccode\u003eif\u003c/code\u003eの中の処理は、自身の\u003ccode\u003eQuaternion\u003c/code\u003e(回転情報)を取得して、y軸に関してのみ、正の値であれば0、負の値であれば180としています。\u003cbr\u003e\n要するにここは、入力されたキーにより、ユニティちゃんの「右向き」か「左向き」かを制御している部分だということがわかりました。\u003c/p\u003e\n\n\u003cp\u003e次に下記の処理\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\n\u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eMove\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003efloat\u003c/span\u003e \u003cspan class=\"n\"\u003emove\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"n\"\u003ejump\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e...\u003c/span\u003e\n\n        \u003cspan class=\"n\"\u003em_rigidbody2D\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003evelocity\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eVector2\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003emove\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003emaxSpeed\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003em_rigidbody2D\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003evelocity\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n        \u003cspan class=\"n\"\u003em_animator\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSetFloat\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Horizontal\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003emove\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n        \u003cspan class=\"p\"\u003e...\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e\u003ccode\u003em_rigidbody2D\u003c/code\u003eという変数の\u003ccode\u003evelocity\u003c/code\u003eに新しい\u003ccode\u003eVector2\u003c/code\u003eを入れています。\u003cbr\u003e\nまずこの\u003ccode\u003em_rigidbody2D\u003c/code\u003eですが、これはクラスの最初に定義されていて、ユニティちゃん自身の\u003ccode\u003eGameObject\u003c/code\u003eの\u003ccode\u003eComponent\u003c/code\u003eの\u003ccode\u003eRigidbody2D\u003c/code\u003eをさしています。\u003cbr\u003e\n\u003ccode\u003eRigidbody2D\u003c/code\u003eは簡単に言うとUnity標準搭載の物理エンジンで、重力や加速度や衝突などを制御するコンポーネントです。\u003cbr\u003e\nユニティちゃんにはこの\u003ccode\u003eRigidbody2D\u003c/code\u003eが\u003ccode\u003eAddComponent\u003c/code\u003eされています。\u003c/p\u003e\n\n\u003cp\u003eで、問題はその\u003ccode\u003eRigidbody2D.velocity\u003c/code\u003eに値を代入している点です。\u003cbr\u003e\n\u003ccode\u003eRigidbody2D.velocity\u003c/code\u003eは「速度」のことで、型は\u003ccode\u003eVector2\u003c/code\u003eです。\u003cbr\u003e\n要するにここはx軸とy軸に対しての速度情報を更新している処理になります。\u003c/p\u003e\n\n\u003cp\u003ey軸に対しては、自身の\u003ccode\u003evelocity\u003c/code\u003eのy値を入れているので、つまり「変更なし」ということになります。\u003cbr\u003e\n一方、x軸は\u003ccode\u003emove * maxSpeed\u003c/code\u003e(クラスの上のほうで\u003ccode\u003e10f\u003c/code\u003eと宣言されています)を入れています。\u003cbr\u003e\n\u003ccode\u003emove\u003c/code\u003e は \u003ccode\u003eInput.GetAxis(\"Vertical\")\u003c/code\u003eによって得られた\u003ccode\u003efloat\u003c/code\u003e値でしたよね。\u003cbr\u003e\nつまり、ここは、入力された\u003ccode\u003e-10〜10\u003c/code\u003eの値が代入されています。\u003c/p\u003e\n\n\u003cp\u003e横キーを押したことでユニティちゃんが横に動くのは、まさにここで速度情報である\u003ccode\u003evelocity\u003c/code\u003eに値が代入されているから、というわけですね。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"なぜスペースキーを押すとジャンプするのか\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%AA%E3%81%9C%E3%82%B9%E3%83%9A%E3%83%BC%E3%82%B9%E3%82%AD%E3%83%BC%E3%82%92%E6%8A%BC%E3%81%99%E3%81%A8%E3%82%B8%E3%83%A3%E3%83%B3%E3%83%97%E3%81%99%E3%82%8B%E3%81%AE%E3%81%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eなぜスペースキーを押すとジャンプするのか？\u003c/h2\u003e\n\n\u003cp\u003e続いて、スペースキーを押すとなぜユニティちゃんがジャンプをするのかを見ていこうと思います。\u003cbr\u003e\nまずは\u003ccode\u003emove()\u003c/code\u003eに入る前の\u003ccode\u003eUpdate()\u003c/code\u003e内の処理から\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"n\"\u003ejump\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eInput\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eGetButtonDown\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Jump\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eなるほど、\u003ccode\u003eJump\u003c/code\u003eを押したら\u003ccode\u003ejump\u003c/code\u003eが\u003ccode\u003etrue\u003c/code\u003eになるんですね(？)\u003c/p\u003e\n\n\u003cp\u003eイメージだと、ここは「スペースキーを押すと」、\u003ccode\u003ejump\u003c/code\u003eが\u003ccode\u003etrue\u003c/code\u003eになる、といった処理にしそうですが、この\u003ccode\u003eInput.GetButtonDown\u003c/code\u003eの引数には、\u003ccode\u003eJump\u003c/code\u003eという\u003ccode\u003estring\u003c/code\u003eが渡されています。\u003cbr\u003e\nつまり、どこかでこの\u003ccode\u003eJump\u003c/code\u003eというのは「スペースキー」のことである、ということが設定されている、ということになります。\u003c/p\u003e\n\n\u003cp\u003eその場所は、下記を開くと設定されています。\u003cbr\u003e\n\u003ccode\u003eEdit \u0026gt; Project Setting \u0026gt; Input\u003c/code\u003e\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/b11683328e91d15ff16fd1c1407563fb55466d84/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f39373238362f35316631363136332d666139302d373665392d326437652d3932616161646562323531332e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg width=\"422\" alt=\"スクリーンショット 2018-03-27 23.05.54.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F97286%2F51f16163-fa90-76e9-2d7e-92aaadeb2513.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=ee0799211b5bffdcf26e8a66870ab935\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/97286/51f16163-fa90-76e9-2d7e-92aaadeb2513.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F97286%2F51f16163-fa90-76e9-2d7e-92aaadeb2513.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=a87bde256f786a2e199c010595788c67 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e上記を開くと、\u003ccode\u003eInspector\u003c/code\u003eに\u003ccode\u003eAxes\u003c/code\u003eという項目が表示され、この中に先ほどの\u003ccode\u003eJump\u003c/code\u003eという記述があり、その中の\u003ccode\u003ePositive Button\u003c/code\u003eというキーに対して、\u003ccode\u003espace\u003c/code\u003eと設定されていることがわかります。\u003cbr\u003e\nこれは\u003ccode\u003eInput Manager\u003c/code\u003eと呼ばれるもので、キーやJoystickの入力による各種設定が入っています。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/a3242141c02cc4080e32e55a8a09c0ab8d08cdda/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f39373238362f37356234643739642d333239382d653939372d626563652d3431666331366532366262622e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg width=\"311\" alt=\"スクリーンショット 2018-03-27 22.55.37.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F97286%2F75b4d79d-3298-e997-bece-41fc16e26bbb.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=f3d804880ca940c70a0f365063ec3048\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/97286/75b4d79d-3298-e997-bece-41fc16e26bbb.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F97286%2F75b4d79d-3298-e997-bece-41fc16e26bbb.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=5fd4495b0d9e0e2151e6c1c80f3579a1 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eここで\u003ccode\u003espace\u003c/code\u003eという文言を、例えば\u003ccode\u003ew\u003c/code\u003eとしてみると、ユニティちゃんはスペースキーを押してもジャンプしなくなり、代わりに\u003ccode\u003ew\u003c/code\u003eキーを押すことでジャンプすることがわかります。\u003cbr\u003e\nこのように、キーバインドはこの\u003ccode\u003eInput Manager\u003c/code\u003eで管理されている、ということですね。\u003cbr\u003e\n\u003ccode\u003ePositive Button\u003c/code\u003e以外の各種細かな設定は別途Unityの\u003ccode\u003eDocumentation\u003c/code\u003eの\u003ccode\u003eInput Manager\u003c/code\u003eを見られるといいと思います。\u003c/p\u003e\n\n\u003cp\u003eでは、実際にこのスペースキーを押すと\u003ccode\u003etrue\u003c/code\u003eになる\u003ccode\u003ejump\u003c/code\u003eは\u003ccode\u003emove()\u003c/code\u003e内でどのように使われているのかを見ていきます。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eMove\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003efloat\u003c/span\u003e \u003cspan class=\"n\"\u003emove\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"n\"\u003ejump\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e...\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ejump\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e \u003cspan class=\"n\"\u003em_isGround\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003em_animator\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSetTrigger\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Jump\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"nf\"\u003eSendMessage\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Jump\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eSendMessageOptions\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eDontRequireReceiver\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"n\"\u003em_rigidbody2D\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAddForce\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eVector2\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eup\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003ejumpPower\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eまず、\u003ccode\u003eif (jump \u0026amp;\u0026amp; m_isGround)\u003c/code\u003eですが、この中の\u003ccode\u003em_isGround\u003c/code\u003eは、名前からしておそらく「地面に立っているかどうか」を判定している\u003ccode\u003ebool\u003c/code\u003eだと思われますが、実際にどこでどう設定されているかというと、\u003cbr\u003e\n\u003ccode\u003eMonoBehaviour.FixedUpdate()\u003c/code\u003eにて\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eFixedUpdate\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eVector2\u003c/span\u003e \u003cspan class=\"n\"\u003epos\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003etransform\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eposition\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eVector2\u003c/span\u003e \u003cspan class=\"n\"\u003egroundCheck\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eVector2\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003epos\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003epos\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ey\u003c/span\u003e \u003cspan class=\"p\"\u003e-\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003em_centerY\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003etransform\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003elocalScale\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eVector2\u003c/span\u003e \u003cspan class=\"n\"\u003egroundArea\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eVector2\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003em_boxcollier2D\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003esize\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"m\"\u003e0.49f\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"m\"\u003e0.05f\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"n\"\u003em_isGround\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ePhysics2D\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eOverlapArea\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003egroundCheck\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"n\"\u003egroundArea\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003egroundCheck\u003c/span\u003e \u003cspan class=\"p\"\u003e-\u003c/span\u003e \u003cspan class=\"n\"\u003egroundArea\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ewhatIsGround\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eといった記述があります。\u003cbr\u003e\n\u003ccode\u003ePhysics2D.OverlapArea\u003c/code\u003eとは、第一引数\u003ccode\u003eVector2\u003c/code\u003eと第二引数\u003ccode\u003eVector2\u003c/code\u003eによって作られた四角の領域が、コライダーと衝突しているかを返します。\u003cbr\u003e\n\u003ccode\u003epos\u003c/code\u003eはユニティちゃんの\u003ccode\u003eposition\u003c/code\u003e、\u003cbr\u003e\n\u003ccode\u003egroundCheck\u003c/code\u003eはユニティちゃんのちょっと下(\u003ccode\u003em_centerY\u003c/code\u003eは\u003ccode\u003e1.5f\u003c/code\u003e)、\u003cbr\u003e\nつまりこの\u003ccode\u003ePhysics2D.OverlapArea\u003c/code\u003eは、\u003cbr\u003e\n\u003cstrong\u003eユニティちゃんのちょっと下にある横長い四角形\u003c/strong\u003eというわけですね。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/522f85ecd2ddf295467ed5e769c48c7aaa57b44d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f39373238362f66306661343266362d393632362d363738612d616134302d6561626661323831396563302e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg width=\"427\" alt=\"スクリーンショット 2018-03-28 0.43.06.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F97286%2Ff0fa42f6-9626-678a-aa40-eabfa2819ec0.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=3c89c1fa1eec6c5e720b6a52c40d131a\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/97286/f0fa42f6-9626-678a-aa40-eabfa2819ec0.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F97286%2Ff0fa42f6-9626-678a-aa40-eabfa2819ec0.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=7a55d44c7b4a39151563931751763ef7 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eそして、この\u003ccode\u003ePhysics2D.OverlapArea\u003c/code\u003eが、第三引数の\u003ccode\u003ewhatIsGround\u003c/code\u003eに限定したレイヤーのコライダーに重なっているかどうか？が、\u003ccode\u003em_isGround\u003c/code\u003eというわけです。\u003cbr\u003e\nこのように、ユニティちゃんの足元に\u003ccode\u003eOverlapArea\u003c/code\u003eを用意しておき、これが地面に接していれば、結果的にユニティちゃんが「地面に立っている」と判断しているわけですね。\u003c/p\u003e\n\n\u003cp\u003eさて、ようやくこれで\u003cbr\u003e\n\u003ccode\u003eif (jump \u0026amp;\u0026amp; m_isGround)\u003c/code\u003e\u003cbr\u003e\nの中に入る条件がわかりました。\u003cbr\u003e\nつまり、「地面に接している状態でかつジャンプがtrueになった瞬間」というわけです。\u003c/p\u003e\n\n\u003cp\u003eでは、肝心のその中の処理ですが\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"n\"\u003em_rigidbody2D\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAddForce\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eVector2\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eup\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003ejumpPower\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eユニティちゃんがジャンプする処理は、まさにここになります。\u003cbr\u003e\nここでまた新しく、\u003ccode\u003eRigidbody2D.AddForce\u003c/code\u003eというものが登場しました。\u003cbr\u003e\nこれはその名の通り、\u003ccode\u003eRigidbody2D\u003c/code\u003eに「\u003ccode\u003eVector2\u003c/code\u003eの力を加える」メソッドです。\u003c/p\u003e\n\n\u003cp\u003e\u003ccode\u003eVector2.up\u003c/code\u003eとは、\u003ccode\u003eVector2(0f, 1f)\u003c/code\u003eと同義なため、つまりこの処理は\u003cbr\u003e\ny軸方向に、固定の\u003ccode\u003ejumpPower\u003c/code\u003e(\u003ccode\u003e1000f\u003c/code\u003eと定義されています)分、力を加える、という意味ですね。\u003c/p\u003e\n\n\u003cp\u003eこれにより、ユニティちゃんは\u003ccode\u003e1000f\u003c/code\u003eのパワーをy軸の正の方向に受けることで、上に飛び上がり、\u003cbr\u003e\nそして\u003ccode\u003eRigidbody2D\u003c/code\u003eの物理演算により、落下する、といった原理になります。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"velocityとaddforce\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#velocity%E3%81%A8addforce\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003evelocityとAddForce\u003c/h2\u003e\n\n\u003cp\u003e最後に、今回ユニティちゃんが移動するにあたって左右の移動には\u003ccode\u003eRigidbody2D.velocity\u003c/code\u003eを、ジャンプには\u003ccode\u003eRigidbody2D.AddForce\u003c/code\u003eが使われていました。\u003cbr\u003e\nここでふと思うのが、\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e左右移動に\u003ccode\u003eRigidbody2D.AddForce\u003c/code\u003eを使ってもいいのでは？\u003c/li\u003e\n\u003cli\u003eジャンプに\u003ccode\u003eRigidbody2D.velocity\u003c/code\u003eを使ってもいいのでは？\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eという点です。\u003cbr\u003e\nそもそもこの２つはどういった違いがあって、どのように使い分けるべきなのか？について触れていきたいと思います。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"velocityとaddforceの違い\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#velocity%E3%81%A8addforce%E3%81%AE%E9%81%95%E3%81%84\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003evelocityとAddForceの違い\u003c/h3\u003e\n\n\u003cp\u003e\u003ccode\u003evelocity\u003c/code\u003eは\u003cstrong\u003e速度情報のプロパティ\u003c/strong\u003eであり、\u003ccode\u003eAddForce\u003c/code\u003eは\u003cstrong\u003e指定のベクトルに対し力を加えるメソッド\u003c/strong\u003eです。\u003cbr\u003e\nつまり、そもそも\u003ccode\u003evelocity\u003c/code\u003eは重力、摩擦など物理演算によって算出される情報にあたります。そのため、\u003ccode\u003evelocity\u003c/code\u003eを直接書き換えるということは、\u003cstrong\u003e物理演算を無視して速度そのものを直書きする行為\u003c/strong\u003eとなるわけです。\u003cbr\u003e\n\u003ccode\u003eAddForce\u003c/code\u003eに\u003ccode\u003e100f\u003c/code\u003eの力を加えると、物理演算が考慮されますが、\u003ccode\u003evelocity\u003c/code\u003eに\u003ccode\u003e100f\u003c/code\u003eを加えると、突然速度\u003ccode\u003e100f\u003c/code\u003eになる、というわけです。\u003c/p\u003e\n\n\u003cp\u003eこの違いは、下記のようにコードを書き換えるとわかりやすいです。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"c1\"\u003e//m_rigidbody2D.AddForce(Vector2.up * jumpPower);\u003c/span\u003e\n\u003cspan class=\"n\"\u003em_rigidbody2D\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003evelocity\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eVector2\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eup\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003ejumpPower\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eユニティちゃんのジャンプで、「y軸方向に\u003ccode\u003e1000f\u003c/code\u003eの力を与える」という既存の処理を、「y軸方向を\u003ccode\u003e1000f\u003c/code\u003eの速度にする」という処理に書き換えてます。\u003c/p\u003e\n\n\u003cp\u003eこの状態でユニティちゃんがジャンプをするとどうなるかというと、\u003cstrong\u003e消えます\u003c/strong\u003e。正しくはy軸の正の方向にとんでもない速度で吹っ飛んでいきます。重さなどが考慮されずに突然\u003ccode\u003e1000f\u003c/code\u003eの速度になるからですね。\u003cbr\u003e\nちなみに、velocityに\u003ccode\u003e1000f\u003c/code\u003eではなく\u003ccode\u003e20f\u003c/code\u003eくらいにすると、だいたい\u003ccode\u003eAddForce\u003c/code\u003eに\u003ccode\u003e1000f\u003c/code\u003eを入れるのと同じくらいになります。\u003c/p\u003e\n\n\u003cp\u003eさて、ではなぜユニティちゃんは横移動の際に\u003ccode\u003evelocity\u003c/code\u003eを使っているのか？横移動も\u003ccode\u003eAddForce\u003c/code\u003eを使った方が良いのでは？と思うわけですが、これについては下記のような理由があるかと思われます（あくまで憶測です）\u003c/p\u003e\n\n\u003cp\u003eまず、試しに下記のようにコードを書き換えてみます。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"c1\"\u003e//m_rigidbody2D.velocity = new Vector2(move * maxSpeed, m_rigidbody2D.velocity.y);\u003c/span\u003e\n\u003cspan class=\"n\"\u003em_rigidbody2D\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAddForce\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eVector2\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003emove\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003emaxSpeed\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003em_rigidbody2D\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003evelocity\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eジャンプの時と同様、同じ値を\u003ccode\u003evelocity\u003c/code\u003e直書きではなく、\u003ccode\u003eAddForce\u003c/code\u003eの引数に渡すパターンです。\u003cbr\u003e\nこれで実行して横キーを少し押しっぱなしにしてみると、ユニティちゃんは入力されたキーの方向に力が加わるので動き始めるわけですが、キーを離しても止まらず、すーーーっと滑り続けます。\u003c/p\u003e\n\n\u003cp\u003eこの理由は、ユニティちゃんの\u003ccode\u003eRigidbody2D\u003c/code\u003eの\u003ccode\u003eLinear Drag\u003c/code\u003e(位置移動の減衰値)が0に設定されているためです(滑る床などで使えそうなプロパティですね)。\u003cbr\u003e\nでは試しに、この\u003ccode\u003eLinear Drag\u003c/code\u003eを2に変更してみます。\u003cbr\u003e\nすると、ユニティちゃんはキーを話すことで徐々に減速して止まるようになるわけですが、今度は最高速度が下がったように感じます。\u003cbr\u003e\nそれもそうで、この\u003ccode\u003eLinear Drag\u003c/code\u003eはキーを押し続けているときももちろん有効ですので、移動中も常に減衰が入っているわけですね。\u003cbr\u003e\nしかも、妙にキーの入力に対して加速度が遅くもっさりしています。\u003c/p\u003e\n\n\u003cp\u003eと、こんな感じで、横移動に関しては変に物理演算が入ることが、かえって妙なもっさり感や違和感を出してしまう場合もあるようです。\u003cbr\u003e\nもちろん、もっと\u003ccode\u003eAddForce\u003c/code\u003eで加える力を大きくしたり、\u003ccode\u003eInput.GetAxis(\"Horizontal\");\u003c/code\u003eで得た値をそのまま使わず\u003ccode\u003eMathf.Sign\u003c/code\u003eなどにかけてより急に力を加えるようにする、などのチューニングにより、自然さを出すことができるかと思いますが、それならもう\u003ccode\u003evelocity\u003c/code\u003eに直接速度を書き込むほうが簡単なようにも感じます。\u003c/p\u003e\n\n\u003cp\u003eもっと横を押したらスッと動き出して、止まるときもスッと止まって欲しい。\u003cbr\u003e\nそんなスッキリした操作感に、\u003ccode\u003evelocity\u003c/code\u003eを直接書き換えることで対応しているのではないかと思います。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"おわりに\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%8A%E3%82%8F%E3%82%8A%E3%81%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eおわりに\u003c/h1\u003e\n\n\u003cp\u003eというわけで、ユニティちゃん2Dを使って、2Dキャラクターの動きの基本に当たる「横移動とジャンプ」を学んで見ました。いろいろと応用ができそうなものや、まだ触ってないプロパティなども多数あったので、それをうまく使って、楽しく2Dゲームを作れればと思います。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"ライセンス\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%A9%E3%82%A4%E3%82%BB%E3%83%B3%E3%82%B9\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eライセンス\u003c/h1\u003e\n\n\u003cp\u003e本記事に登場したキャラクター(ユニティちゃん)、ゲーム画面、ソースコード等は\u003ca href=\"http://unity-chan.com/contents/license_jp/\" rel=\"nofollow noopener\" target=\"_blank\"\u003eユニティちゃんライセンス\u003c/a\u003eで提供されています。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/c1b7aadbedba10efd5ed033992b2b3a940164a36/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f39373238362f61343334656363342d343935612d373964652d653465612d3137666666366334666230652e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F97286%2Fa434ecc4-495a-79de-e4ea-17fff6c4fb0e.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=041df999ec2e5d72c410a5cb111398d7\" alt=\"imageLicenseLogo.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/97286/a434ecc4-495a-79de-e4ea-17fff6c4fb0e.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F97286%2Fa434ecc4-495a-79de-e4ea-17fff6c4fb0e.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=4181665d63827555ea42d88a3dc5fa66 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n","createdAt":"2018-03-28T15:03:25Z","elapsedYearsFromLastModifiedAt":3,"encryptedId":"CL4b/hKuLmqBTvEY1oyydZe0TsvWlKR+--RkyBdIcwkYVOBXUy--78k5QDmvayE3e/4t9hF0Ag==","isBanned":false,"isDeprecated":true,"isDestroyableByViewer":false,"isEditRequestReadableByViewer":true,"isEditRequestSendableByViewer":true,"isLikableByViewer":true,"isLikedByViewer":false,"isPublic":true,"isSlide":false,"isStockableByViewer":true,"isStockedByViewer":false,"isSubscribableByViewer":false,"isSubscribedByViewer":false,"isUpdatableByViewer":false,"isUpdated":true,"lastModifiedAt":"2018-03-28T15:18:10Z","likesCount":67,"linkUrl":"https://qiita.com/okk_archives/items/61a23ebda1d6cab2d08c","organization":null,"originalId":624134,"stockedCount":69,"title":"ユニティちゃん2Dで2Dキャラクターの動きの仕組みを理解する","toc":"\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#tl-dr\"\u003eTL; DR\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%A6%E3%83%8B%E3%83%86%E3%82%A3%E3%81%A1%E3%82%83%E3%82%932d\"\u003eユニティちゃん2D\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%B0%8E%E5%85%A5%E6%89%8B%E9%A0%86\"\u003e導入手順\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%81%A8%E3%82%8A%E3%81%82%E3%81%88%E3%81%9A%E5%8B%95%E3%81%8B%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B\"\u003eとりあえず動かしてみる\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%81%A9%E3%81%86%E3%82%84%E3%81%A3%E3%81%A6%E5%8B%95%E3%81%84%E3%81%A6%E3%81%84%E3%82%8B%E3%81%AE%E3%81%8B\"\u003eどうやって動いているのか\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%81%AA%E3%81%9C%E6%A8%AA%E3%82%AD%E3%83%BC%E3%82%92%E6%8A%BC%E3%81%99%E3%81%A8%E6%A8%AA%E3%81%AB%E5%8B%95%E3%81%8F%E3%81%AE%E3%81%8B\"\u003eなぜ横キーを押すと横に動くのか？\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%81%AA%E3%81%9C%E5%BE%90%E3%80%85%E3%81%AB%E5%8A%A0%E9%80%9F%E3%81%99%E3%82%8B%E3%81%AE%E3%81%8B\"\u003eなぜ徐々に加速するのか？\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%81%AA%E3%81%9C%E3%82%B9%E3%83%9A%E3%83%BC%E3%82%B9%E3%82%AD%E3%83%BC%E3%82%92%E6%8A%BC%E3%81%99%E3%81%A8%E3%82%B8%E3%83%A3%E3%83%B3%E3%83%97%E3%81%99%E3%82%8B%E3%81%AE%E3%81%8B\"\u003eなぜスペースキーを押すとジャンプするのか？\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#velocity%E3%81%A8addforce\"\u003evelocityとAddForce\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#velocity%E3%81%A8addforce%E3%81%AE%E9%81%95%E3%81%84\"\u003evelocityとAddForceの違い\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%81%8A%E3%82%8F%E3%82%8A%E3%81%AB\"\u003eおわりに\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%A9%E3%82%A4%E3%82%BB%E3%83%B3%E3%82%B9\"\u003eライセンス\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n","totalPv":13908,"uuid":"61a23ebda1d6cab2d08c","banReason":null,"adventCalendarItem":null,"author":{"encryptedId":"qpN67LmGmjw6+mXJF9YoGmZLD8Q=--bC0NEHgo7Z/6Y1mi--gf2Tj5uvTwdGv9POR5kXIw==","originalId":97286,"description":"Unity Engineer (2016 - now),\r\nScala Engineer (2016 - 2019), \r\niOS Engineer (2014 - 2016)","facebookUrl":null,"githubUrl":null,"isBlockingViewer":false,"isFollowableByViewer":true,"isFollowedByViewer":false,"isTweetWebNotificationReceivable":true,"linkedinUrl":null,"name":"","profileImageUrl":"https://s3-ap-northeast-1.amazonaws.com/qiita-image-store/0/97286/35fc18308318a66e79cf6ca2fa5e84594db357e5/x_large.png?1618881795","profileImageUrlW48":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fs3-ap-northeast-1.amazonaws.com%2Fqiita-image-store%2F0%2F97286%2F35fc18308318a66e79cf6ca2fa5e84594db357e5%2Fx_large.png%3F1618881795?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=48\u0026s=58b54989b8bca9fab86112b6f8a610fb","profileImageUrlW75":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fs3-ap-northeast-1.amazonaws.com%2Fqiita-image-store%2F0%2F97286%2F35fc18308318a66e79cf6ca2fa5e84594db357e5%2Fx_large.png%3F1618881795?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=e52626bb6d12b0fe0e445e74aafff98c","urlName":"okk_archives","websiteUrl":"","twitterUrl":null,"twitterUrlName":null,"revealedOrganizations":{"edges":[]}},"tags":[{"name":"C#","urlName":"csharp"},{"name":"Unity","urlName":"unity"},{"name":"Unity2D","urlName":"unity2d"},{"name":"ユニティちゃん","urlName":"%e3%83%a6%e3%83%8b%e3%83%86%e3%82%a3%e3%81%a1%e3%82%83%e3%82%93"}],"followingLikers":{"edges":[]},"comments":{"totalCount":0}},"comments":[],"client":null,"ads_event_emitter":null}}</script>
