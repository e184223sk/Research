More than 3 years have passed since last update.「barの端に合わせてInstantiate」ですが、一見簡単に見えますよね。しかし、canvas内に正確な位置に生成するのって実は一工夫いるんです。

今回紹介するにあたって、私が作ったゲームの画面で解説致します。
上の画面の下部にbarがありますよね。ここではplayerのエネルギー残量を表しています。浮いている泡を取ることで増加、魚にぶつかることで減少するようになっており、その増減を、ぶつかった瞬間からパッとbarの右端に表示するような仕組みになっています。
こんな感じですね。
これはエネルギーがほとんど残っていないときです。

これはエネルギーが９０くらいある時です。
きちんと残量に合わせて表示される位置が変わっているのがお分かりでしょうか。では、泡にぶつかったときに＋5が表示されるようにしましょう。
やることとしては、
　１．表示する画像をつくる
　２．energyをシングルトンにする
　３．barを作って長さにenergyを反映させる
　４．+5の表示　（ここがポイント！）
　５．泡に付けるスクリプトを書く
こんな感じですね。
さっそく実装に入ります。イラレとかで表示したい画像を作ってCanvasにImageを作り、Prefabかしておきましょう。
ここでは、まずenergyをシングルトンにして管理することにしています。
(次のステージでもenergyが引き継がれるようにしたいですよね！)
こんな感じです。このスクリプトはEmptyGameObjectを作ってくっつけておきましょう。では、次にbarをEnergyBarという名前で作り(作り方は省略)、InspectorのWhole　Numbersのチェックをはずしておきます。
そしてHpControllerというスクリプトを作って一番上のEnergyBarにくつっけておきます。
このスクリプトがenergyの値の管理と、値が変更されたときにbarの長さを変更する指示を出してくれます。では、次に、泡にぶつかったとき、得点をどのように変更していきたいかを、同じスクリプトに書き加えていていきます。
ここで、barの右端の丸ぽちのedgepointというImageをつくって、energypoint という名前のテキストに、常に点数を表示させるようにしておくと便利です(edgepointはこの後使うので必ず用意！)
これをEnergyBarの最下層に入れておきましょう

そして、edgepointをbarの右端に表示するよう設定しておくのがポイント。
最後に、泡につけるスクリプトを書きましょう。
もちろん、泡にColliderをつけておくことは忘れずに！ここでは、泡にぶつかったとき、HpController.csを探し出して、対応する関数を実行するように指示を飛ばします。いかがですか。できましたでしょうか。
今回は、barの端にしましたが、Canvasの子として設定し、座標を入れてあげれば、自由な位置にInstantiateすることができますよ！


