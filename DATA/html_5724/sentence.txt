More than 3 years have passed since last update.ファイルを読み込み、そのファイルに記載されているキーに紐付く値を更新するとします。※引数からもらったキーに紐づく値のみを変更し、変更していないキーや値も含めファイルを上書きしています。これは普通に書けるのですが、多重処理になったときに、参照と更新のタイミングによりあるキーに対する更新が無かったことになってしまう場合があります。やりたいのは
①ファイルに対して他プロセスからの読み取り不可のロックをかける
②ファイル内容を読み取る
③引数にて渡されたキーに紐づく値を変更し、ファイルに対して更新をかける
④①でかけたロックを外すFileStreamで①はできて、読み取りも出来たのですが、ファイル更新をしようとstreamWriterにstreamを渡した瞬間に例外が発生します。メッセージは「ストリームが出力できませんでした」※うる覚えです
が出力されています。FileSptreamは
Open
ReadWrite
Noneで指定しております。あまり調べてもピッタリの事象がなくて困っています。そもそもの方針がセンスないのでしょうか。皆様のお力をお貸しください。↓書き込めない事象は解決しました。
が、上書き処理ではなく追記になってしまうため困っております。。。


