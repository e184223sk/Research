みなさんあけましてお願いします。今年もよろしくお願いします。
さて、今回はC#/DXライブラリでLuaを呼び出して使おうと思います。今回はLuaのライブラリとして、NLuaを使います。あとVS2019をつかっています。
導入方法は、NuGetで、NLuaと検索していただくと出てくるはずです。

一番上の奴ですね。NLuaを使用するには、using NLuaを先頭に記述してください。
C#/NLuaでのLuaの使用は以下の通りです。
今回はオブジェクト指向らしく(?)main関数から始めます。これで、C#側からの準備はできました。
次に、Lua側を準備しましょう。といっても普通に書くだけです。ですが、これではDxLibの関数をなにも使えません。なので、Luaに追加しましょう。まぁこいつがなかなか面倒くさくて、C#側で関数を一つずつ登録しなきゃならんのです。いい方法があったら教えてほしいです。と、こんな感じでいちいち書かんといかんのです・・・。めんどくさいこと極まりない。我慢してください。
これをまとめてLuaに追加しましょう。
Lua.csを次のように変更して下さい。これで、LuaからDxLibの関数を使えるようになりました。では実行してみましょう

十字キーを押すと円が移動するのが確認できたかと思います。
あとは関数を追加したりして頑張ってください。調べてもあまり出てこなかったので、困ってる人がいたら何かの助けになれば幸いです。指摘、改善点などコメント待ってます。


