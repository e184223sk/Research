More than 1 year has passed since last update.こんな感じのやつです。

wiki物理的に移動可能なマス目が一つだけ用意されていて、ブロックを移動させることで
イラストを完成させたり、数字を並べ替えたり、道をつないだりするゲームです。文字通り一週間でMade With Unityなゲームを完成させようというデスマーチです。
愉快な企画です。今回、私も初参加しました。
毎回テーマが設定されて、そのテーマに沿った(こじつけでも可)ゲームを作成します。
今回のテーマは「つながる」でした。入れ替えパズルの上をUnityちゃんに歩いてもらってゴールを目指すというものを作りました。【IQ150】完成当初の入れ替えロジックは複雑に考えすぎてとんでもない遠回りな実装方法を取り入れてました。
今回作ったゲームもぐちゃぐちゃな実装のまま放置しているのでプレイする度に何かしらバグります。もっとシンプルにできないかと思って考えてみました。最終的に思いついた(というか上司からヒントもらった)のは
透明なブロックを動かして衝突した色付きブロックと入れ替えるという方法です。

上のとてもわかり易い図の通りです。透明なブロックの移動範囲(今回は移動できる回数にしました)を3×3で定めて、
そのエリア内を移動させます。以下、コードです。左の矢印キーを押した場合を例に見ていきます。saveThisObjPosition = this.gameObject.transform.position;
で移動前の位置を保存してからポジションを変更しています。衝突したら、その移動前のポジションを
衝突したゲームオブジェクトに代入しています。
other.transform.position = saveThisObjPosition;できました。
ただこれだと同時入力(同一フレーム内で2ボタンの入力を受け取る)が可能？なのか
めちゃくちゃ早く動かすとバグります。
どうやらUnityにはキーボード入力の受付を一時的に止めるみたいな機能はないっぽいです。
なのでInputManagerみたいなのを自分で作って同時入力できないようにする必要があります。もう少し調べて見つかったらまた記事まとめます。
追記こんな感じでいけました！
教えてくださった方ありがとうございます！同時押し禁止についてはこちら


