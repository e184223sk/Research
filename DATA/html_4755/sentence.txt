More than 3 years have passed since last update.突然ですが皆さんは好きなクラスはありますか？私はList&lt;T&gt;が好きです。
そっけない名前のくせにしっかりタイプセーフな所が魅力です。
そんなList&lt;T&gt;をC言語でも使えるようにしたいという気持ちが溢れ出しそうになったので、C言語でList&lt;T&gt;っぽいものを実装してみました。といっても、List&lt;T&gt;の全てのメソッドを実装するのはしんどいです。
しんどいので今回はIList&lt;T&gt;で定義されているインターフェースだけ実装しました。ソースコードは下記を参照ください。
https://github.com/nendo-code/CSList
CSList.hがIList&lt;T&gt;を実装したものになります。CSList.hを使って下記のコードをC言語で実装してみます。C#版コードC言語版コードあまり違和感無くC言語でもList&lt;T&gt;っぽい実装ができているかと思います。
IList&lt;T&gt;で定義している程度のメソッドは実装されていますので、詳しく使い方を知りたい方はexample.cを参考にしてみてください。
組み込みなどPC以外の環境で使う場合はCSList_conf.hで環境に合わせた設定に書き換えて使って下さい。今回作ったCSListはC言語でジェネリックを実現するためにマクロを多用して実装しているのですが、黒魔術感が半端なく、デバッグがやや面倒でした。
が、頑張ったおかげでいちおうタイプセーフ（型の指定が違うとコンパイラがワーニングを吐くよ）なリストが出来たので満足しました。


