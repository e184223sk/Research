More than 1 year has passed since last update.本記事は「Adaptive Code」で得た知見から掘り下げて記事にしたものとなります。記事の対象者は以下の知識を持っていることが前提となります。動的に型付が行われる言語ではよく、この「ダックタイピング」が行われます。ダックタイピングの名前はダックテストに由来します。「もしもそれがアヒルのように歩き、アヒルのように鳴くのなら、それはアヒルである。」つまり、同名のメソッドやプロパティを持つオブジェクトに関しては、等しく扱えることを提案するものです（実際に後述するコードを見た方が直感的にわかりやすいかもしれません）。C#ではこれをdynamicで実現することができます。インターフェイスを作成しなくても問題ありません。単純に同名及び引数が合っているかどうかを見ています。C# 4.0で追加された機能です。このdynamicの使い方に戸惑う方が身近に居たので今回紹介も兼ねて記事にしてみた次第です。元々C# 3.0 以前では、 静的型付けしか行えませんでした。そのため、オブジェクトが持つプロパティ名やメソッド名をコンパイル時に知っておく必要がありました。このdynamicキーワードを使用することで、CLRの静的な型付けからDLR(Dynamic Language Runtime)の動的型付けに切り替えることが可能となります。以下のコードで登場するpetというプロパティが存在するかどうかは実行時に調べられます。


