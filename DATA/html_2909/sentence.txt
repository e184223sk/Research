More than 1 year has passed since last update.Transformやアニメーションで動かしている（Rigidbody不使用の）オブジェクトで角速度を取得したい。
Transform.rotationの変化を追って推定することくらいなら難しくないんじゃないかと甘く見ていたのですが、結構苦戦してしまいました。「rotationがどれくらい変わったかを刻々と求めればいいはず」ということで、とりあえずクォータニオンの引き算っぽいことをすればいいんだろうとは思ったのですが…。
肝心の計算方法がすぐに分からず、色々試す羽目に。速度の推定もついでに入れて、GitHubにアップロードしました。
unity-kinematic-estimator先に結論から。試しにこれをRigidbody付きのオブジェクトに付けてみて、
適当なトルクを加えたときのRigidbody.angularVelocityと比較してみます。
多少の誤差はありますが、angularDrag（というか角加速度）を考慮していないのでこんなものでしょうか。
（一応、angularDragが小さいほど誤差が小さくなりました。）以下は蛇足的情報です。スルーで構いません。最初私は考えました。
そもそもオイラー角の引き算じゃダメなの？
要はこういうことですよね。ダメでした。
これについてはオイラー角の差分を見たとして、それはオイラー角変化量とでもいうべきものであり、角速度ベクトルとは別のものである、という自己解釈で納得しました。浅学ゆえ正しく理解できているか不安ですが、今のところこれで欲しい結果を得ることができているので共有します。
間違いや誤解があるようでしたらご指摘頂けますと幸いです。


