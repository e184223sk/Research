<!DOCTYPE html><html><head><meta charset="utf-8" /><title>Xamarin.Forms でガワネイティブアプリを作るときのテンプレートプロジェクトを作る２ - Qiita</title><meta content="width=device-width,initial-scale=1,shrink-to-fit=no,viewport-fit=cover" name="viewport" /><meta content="#55c500" name="theme-color" /><meta content="XWpkTG32-_C4joZoJ_UsmDUi-zaH-hcrjF6ZC_FoFbk" name="google-site-verification" /><meta content="telephone=no" name="format-detection" /><link rel="canonical" href="https://qiita.com/amay077/items/32833031c955ad2ddc77" /><link href="/manifest.json" rel="manifest" /><link href="/opensearch.xml" rel="search" title="Qiita" type="application/opensearchdescription+xml" /><link as="script" href="https://www.googletagservices.com/tag/js/gpt.js" rel="preload" /><link href="https://securepubads.g.doubleclick.net" rel="preconnect" /><script async="" src="https://www.googletagservices.com/tag/js/gpt.js"></script><meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="Ey1KjTTqg5vm6Fiq7H7cqa9jzMxOTNQv0CuFAJ3/ebLcokjh34kregkekOLnRUiUyVjsVb4U5uSVCQv7XguCcg==" /><link rel="shortcut icon" type="image/x-icon" href="https://cdn.qiita.com/assets/favicons/public/production-c620d3e403342b1022967ba5e3db1aaa.ico" /><link rel="apple-touch-icon" type="image/png" href="https://cdn.qiita.com/assets/favicons/public/apple-touch-icon-ec5ba42a24ae923f16825592efdc356f.png" /><link rel="stylesheet" media="all" href="https://cdn.qiita.com/assets/public/article-2eaa7dbedc42a8ea65c722cda46d0ebb.min.css" /><script src="https://cdn.qiita.com/assets/public/v3-article-bundle-63de2d91fef827269d3f6b958db2335b.min.js" defer="defer"></script><meta name="twitter:card" content="summary_large_image"><meta content="@Qiita" name="twitter:site" /><meta content="@amay077" name="twitter:creator" /><meta property="og:type" content="article"><meta property="og:title" content="Xamarin.Forms でガワネイティブアプリを作るときのテンプレートプロジェクトを作る２ - Qiita"><meta property="og:image" content="https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0&amp;w=1200&amp;mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND1XR0Z0WVhKcGJpNUdiM0p0Y3lEamdhZmpncXpqZzZfamc0M2pncVRqZzRiamdxUGpnNWJqZ3FMamc1ZmpnNnJqZ3BMa3Zaempnb3ZqZ2FqamdZM2pnYTdqZzRiamc3UGpnNWZqZzZ6amc3empnNGpqZzVmamc2M2pncmpqZ3FmamdxX2pnNGpqZ3BMa3Zaempnb3Z2dkpJJnR4dC1jb2xvcj0lMjMzMzMmdHh0LWZvbnQ9SGlyYWdpbm8lMjBTYW5zJTIwVzYmdHh0LXNpemU9NTQmdHh0LWNsaXA9ZWxsaXBzaXMmdHh0LWFsaWduPWNlbnRlciUyQ21pZGRsZSZzPTJhM2EzNWI5MGZjYzA0N2Y5NWRjMDc2MzU0ZWRhMzZj&amp;mark-align=center%2Cmiddle&amp;blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RR0Z0WVhrd056YyZ0eHQtY29sb3I9JTIzMzMzJnR4dC1mb250PUhpcmFnaW5vJTIwU2FucyUyMFc2JnR4dC1zaXplPTQ1JnR4dC1hbGlnbj1yaWdodCUyQ2JvdHRvbSZzPTllNWNlMjkwZmY4ZjhhYTEyMjUwZGI5NmM0NzBkOTBk&amp;blend-align=center%2Cmiddle&amp;blend-mode=normal&amp;s=20820f5d20821561f89a2dd8b1e1d71f"><meta property="og:description" content="Advent Calendar 最終日が空いていたので、また リクエストもあった ので埋めましょう（Xamarin のカレンダーが半分Webネタで良いのか？は置いといて）。

というわけで、


Xamarin.Forms でガワネイ..."><meta content="https://qiita.com/amay077/items/32833031c955ad2ddc77" property="og:url" /><meta content="Qiita" property="og:site_name" /><meta content="564524038" property="fb:admins" /><meta content="C#,Xamarin,Xamarin.Forms" name="keywords" /><script>!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window, document,'script',
'https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '668972150489891');
fbq('track', 'PageView');</script><style data-emotion-css="17jxvjw 11t2ec1 1dvr2p8 18lkoru 1g4cku8 1iupg5d ijvq0v 15cocm3 12rp90f 115f4t 1b8uj5v 79elbk 16hhh7b fcbn8c 1gj7nt 154zy0m yikrym 1jqivyb 1ode1bp le4d8r 1hbd3g7 1nzh4zz 38fzdi helsa7 8qb8m4 2imjyh he5w1s 70qvj9 3ojehk 100alwu 1dtnjt5 10ougpm 1ay9vb9 m19uds cgzq40 1wa99t2 1l3zk9f 4czcte 1yzj1fm 1uv1qiv 109dbrr 5jpx49 mnxgyc 1vlpknv fsjkhv 1b17vb0 7i7f4d"}>.css-17jxvjw{display:grid;display:-ms-grid;grid-template-columns:80px minmax(0,1fr) 300px;-ms-grid-columns:80px minmax(0,1fr) 300px;grid-template-rows:minmax(270px,auto) 1fr;-ms-grid-rows:minmax(270px,auto) 1fr;max-width:1280px;margin-right:auto;margin-left:auto;padding-top:24px;padding-right:24px;padding-left:24px;}@media (max-width:1200px){.css-17jxvjw{padding-bottom:0;padding-left:0;padding-right:0;}}@media (max-width:992px){.css-17jxvjw{grid-template-columns:80px 452px 300px;-ms-grid-columns:80px 452px 300px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}}@media (max-width:770px){.css-17jxvjw{display:block;}}@media (max-width:480px){.css-17jxvjw{padding-top:0;}}.css-11t2ec1{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;z-index:5;position:-webkit-sticky;position:sticky;top:calc(56px + 24px + 16px + 32px - 16px);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:16px;width:80px;}.css-11t2ec1:after{content:'';display:table;}.css-11t2ec1:before{content:'';display:table;}@media (max-width:770px){.css-11t2ec1{display:none;}}.css-1dvr2p8{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-18lkoru{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;background-color:#FFFFFF;}.css-1g4cku8{display:inline-block;vertical-align:middle;height:20px;width:20px;fill:#55C500;}.css-1iupg5d{color:#55C500;cursor:pointer;font-size:14px;font-weight:bold;}.css-ijvq0v{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-15cocm3{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#FFFFFF;border:2px solid #6E6F70;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:2px 0px 0px;width:40px;}.css-12rp90f{display:inline-block;vertical-align:bottom;height:17.77777777777778px;width:16px;fill:#6E6F70;}.css-115f4t{color:#6E6F70;font-size:14px;font-weight:bold;}.css-1b8uj5v{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;margin-bottom:16px;padding:0;}.css-79elbk{position:relative;}.css-16hhh7b{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;padding:0;}.css-fcbn8c{display:none;bottom:initial;left:initial;right:initial;top:initial;left:100%;top:calc(-8px - (14px * 1.8) - 16px - 4px);}.css-1gj7nt{color:rgba(0,0,0,0.6);font-size:14px;font-weight:bold;line-height:1.8;padding:8px 16px;}.css-154zy0m{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.87);cursor:pointer;font-size:16px;font-weight:normal;line-height:1.8;padding:4px 16px;}.css-154zy0m:hover{-webkit-text-decoration:none;text-decoration:none;background-color:#F2F2F2;}.css-yikrym{width:20px;}.css-1jqivyb{color:rgba(0,0,0,0.6);font-size:13px;}.css-1ode1bp{background-color:rgba(0,0,0,0.12);height:1px;width:100%;margin:8px 0;}.css-le4d8r{display:inline-block;vertical-align:middle;height:13px;width:13px;fill:rgba(0,0,0,0.6);}.css-1hbd3g7{height:250px;}.css-1nzh4zz{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:16px 32px;background-color:#FBE69E;color:rgba(0,0,0,0.87);line-height:1.5;font-weight:600;}@media (max-width:770px){.css-1nzh4zz{padding:16px;}}.css-38fzdi{color:#CA832A;margin-right:4px;}.css-helsa7{background-color:#FFFFFF;padding:32px;margin-bottom:24px;}@media (max-width:992px){.css-helsa7{margin:0 auto 40px;}}@media (max-width:480px){.css-helsa7{margin:0 0 40px;padding:32px 16px;}}.css-8qb8m4{margin-bottom:48px;}.css-2imjyh{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-he5w1s{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;width:100%;}@media (max-width:770px){.css-he5w1s{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}}.css-70qvj9{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.css-3ojehk{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;margin-right:4px;}.css-100alwu{display:inline-block;border-radius:50%;line-height:1;overflow:hidden;vertical-align:middle;}.css-1dtnjt5{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-10ougpm{color:rgba(0,0,0,0.87);font-size:14px;font-weight:600;line-height:1.8;margin-right:4px;text-wrap:break-word;word-break:break-all;}.css-1ay9vb9{margin-right:16px;}.css-m19uds{color:rgba(0,0,0,0.6);font-size:14px;line-height:1.8;}.css-cgzq40{color:rgba(0,0,0,0.87);font-size:32px;font-weight:bold;line-height:1.4;margin-top:8px;text-wrap:break-word;word-break:break-all;}.css-1wa99t2{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.6);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:8px;}.css-1l3zk9f{color:rgba(0,0,0,0.6);font-size:20px;margin-right:8px;}.css-4czcte{margin-right:4px;color:inherit;font-size:14px;line-height:1.8;}.css-4czcte:not(:last-child)::after{content:',';margin-right:4px;}.css-1yzj1fm{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:32px;}.css-1uv1qiv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-size:20px;height:32px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin-right:16px;outline:none;padding:0;width:32px;}.css-109dbrr{background-color:#F9F9F9;border-top:1px solid rgba(0,0,0,0.12);bottom:0;box-shadow:0px 1px 4px rgba(0,0,0,0.14);display:none;height:calc(env(safe-area-inset-bottom,0px) + 56px);-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding-bottom:env(safe-area-inset-bottom);position:-webkit-sticky;position:sticky;width:100%;z-index:2000;}@media (max-width:770px){.css-109dbrr{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}.css-5jpx49{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:space-evenly;-webkit-justify-content:space-evenly;-ms-flex-pack:space-evenly;justify-content:space-evenly;width:100%;}.css-mnxgyc{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1vlpknv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;margin-right:4px;background-color:#FFFFFF;}.css-fsjkhv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1b17vb0{color:#6E6F70;font-size:14px;font-weight:bold;margin-left:4px;}.css-7i7f4d{display:none;bottom:initial;left:initial;right:initial;top:initial;bottom:32px;right:0;}</style></head><body><div class="allWrapper"><div><div id="GlobalHeader-react-component-12d2261a-3a66-4cbe-8e3e-9f1b1b9aa9cb"><div class="st-Header"><div class="st-Header_container"><div class="st-Header_start"><a href="/" class="st-Header_logo"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 426.57 130"><circle cx="167.08" cy="21.4" r="12.28"></circle><path d="M250.81 29.66h23.48v18.9h-23.48z"></path><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z"></path><circle cx="216.33" cy="21.4" r="12.28"></circle></svg></a><div class="st-Header_communitySelector" tabindex="0"><span class="fa fa-caret-down"></span></div><div class="st-Header_dropdown"><div class="st-Header_dropdownHeading">Qiita Teams that are logged in</div><div class="st-Header_dropdownItemNote">You are not logged in to any team</div><hr class="st-Header_dropdownDivider st-Header_dropdownDivider-shrink"/><a href="https://teams-center.qiita.com/find_team" class="st-Header_dropdownItem"><span class="fa fa-fw fa-sign-in st-Header_dropdownItemIcon"></span><div>Log in to Qiita Team</div></a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Community</div><a href="/organizations" class="st-Header_dropdownItem">Organization</a><a href="/official-events/open" class="st-Header_dropdownItem">Event</a><a href="/advent-calendar" class="st-Header_dropdownItem">Advent Calendar</a><a href="https://qiitadon.com/" class="st-Header_dropdownItem" target="_blank">Qiitadon (β)</a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Service</div><a href="https://jobs.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Jobs</a><a href="https://zine.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Zine</a><a href="https://blog.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Blog</a></div><form class="st-Header_search" action="/search" method="get"><span class="fa fa-search st-Header_searchIcon"></span><input type="search" class="st-Header_searchInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form><form class="st-Header_searchModal" action="/search" method="get"><input type="text" class="st-Header_searchModalInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form></div><div class="st-Header_end"><div class="st-Header_searchButton"><span class="fa fa-search"></span></div><a class="st-Header_signupButton" href="/signup?redirect_to=%2Famay077%2Fitems%2F32833031c955ad2ddc77">Signup</a><a class="st-Header_loginLink" href="/login?redirect_to=%2Famay077%2Fitems%2F32833031c955ad2ddc77">Login</a></div><div class="st-Header_overlay"></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="GlobalHeader" data-dom-id="GlobalHeader-react-component-12d2261a-3a66-4cbe-8e3e-9f1b1b9aa9cb">{"unreadNotificationsCount":null,"realms":[{"humanName":"Qiita","isCurrentRealm":true,"isQiita":true,"isQiitaTeam":false,"loggedInUser":null,"teamId":null,"url":"https://qiita.com/"}],"teamFindUrl":"https://teams-center.qiita.com/find_team","isTeamOnlyUser":null,"currentUser":null}</script>
      
</div><div class="st-HeaderAlert st-HeaderAlert-warning"><div class="st-HeaderAlert_body"></div></div><script type="application/ld+json">{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"/","name":"Qiita"}},{"@type":"ListItem","position":2,"item":{"@id":"/tags/csharp","name":"C#"}}]}</script><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","datePublished":"2019-12-25T02:21:49.000+09:00","dateModified":"2019-12-25T02:30:36.000+09:00","headline":"Xamarin.Forms でガワネイティブアプリを作るときのテンプレートプロジェクトを作る２","image":"https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0\u0026w=1200\u0026mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND1XR0Z0WVhKcGJpNUdiM0p0Y3lEamdhZmpncXpqZzZfamc0M2pncVRqZzRiamdxUGpnNWJqZ3FMamc1ZmpnNnJqZ3BMa3Zaempnb3ZqZ2FqamdZM2pnYTdqZzRiamc3UGpnNWZqZzZ6amc3empnNGpqZzVmamc2M2pncmpqZ3FmamdxX2pnNGpqZ3BMa3Zaempnb3Z2dkpJJnR4dC1jb2xvcj0lMjMzMzMmdHh0LWZvbnQ9SGlyYWdpbm8lMjBTYW5zJTIwVzYmdHh0LXNpemU9NTQmdHh0LWNsaXA9ZWxsaXBzaXMmdHh0LWFsaWduPWNlbnRlciUyQ21pZGRsZSZzPTJhM2EzNWI5MGZjYzA0N2Y5NWRjMDc2MzU0ZWRhMzZj\u0026mark-align=center%2Cmiddle\u0026blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RR0Z0WVhrd056YyZ0eHQtY29sb3I9JTIzMzMzJnR4dC1mb250PUhpcmFnaW5vJTIwU2FucyUyMFc2JnR4dC1zaXplPTQ1JnR4dC1hbGlnbj1yaWdodCUyQ2JvdHRvbSZzPTllNWNlMjkwZmY4ZjhhYTEyMjUwZGI5NmM0NzBkOTBk\u0026blend-align=center%2Cmiddle\u0026blend-mode=normal\u0026s=20820f5d20821561f89a2dd8b1e1d71f","mainEntityOfPage":"https://qiita.com/amay077/items/32833031c955ad2ddc77","author":{"@type":"Person","address":"のんほいパーク","email":null,"identifier":"amay077","name":"amay077","image":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F8227%2Fprofile-images%2F1473680950?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=c45897bd988ad06c0759e18a4161f0ce","url":"https://qiita.com/amay077","description":"ランチの時は呼ぶといい！","memberOf":[]},"publisher":{"@type":"Organization","name":"Qiita","logo":{"@type":"ImageObject","url":"//cdn.qiita.com/assets/public/qiita-logo-c39ded593afa388e2e1ba435b110554e.png"}}}</script><style type="text/css">.wb-CampaignLink {
  background-color: #333333;
  width: 100%;
}

.wb-CampaignLink_container {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  max-width: 1100px;
  margin: 0 auto;
  font-size: 13px;
  padding: 0.8em;
}
.wb-CampaignLink_container > a {
  color: #fff;
}

.wb-CampaignLink_container > a:hover {
  text-decoration: underline;
}</style><div class="wb-CampaignLink"><div class="wb-CampaignLink_container"><a target="_blank" id="header_text_message_1" href="https://zine.qiita.com/interview/202106-uzabase-3/">バリューフィットを大切にするユーザベースの「The 7 Values」とは？</a><a target="_blank" id="header_text_message_2" href="https://zine.qiita.com/interview/202106-uzabase-3/">詳しくはこちら</a></div><script>td.trackEvent(
  'front_events',
  {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"amay077","type":"items","id":"32833031c955ad2ddc77"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Show","data":{"message":"バリューフィットを大切にするユーザベースの「The 7 Values」とは？","url":"https://zine.qiita.com/interview/202106-uzabase-3/","sub_message":"詳しくはこちら"}}
)</script><script>document.getElementById('header_text_message_1').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"amay077","type":"items","id":"32833031c955ad2ddc77"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":2,"pos_id":"header_text_message_1","message":"バリューフィットを大切にするユーザベースの「The 7 Values」とは？","url":"https://zine.qiita.com/interview/202106-uzabase-3/","sub_message":"詳しくはこちら"}}
  )
})</script><script>document.getElementById('header_text_message_2').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"amay077","type":"items","id":"32833031c955ad2ddc77"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":2,"pos_id":"header_text_message_2","message":"バリューフィットを大切にするユーザベースの「The 7 Values」とは？","url":"https://zine.qiita.com/interview/202106-uzabase-3/","sub_message":"詳しくはこちら"}}
  )
})</script></div><script type="application/json" id="js-react-on-rails-context">{"railsEnv":"production","inMailer":false,"i18nLocale":"en","i18nDefaultLocale":"en","href":"https://qiita.com/amay077/items/32833031c955ad2ddc77","location":"/amay077/items/32833031c955ad2ddc77","scheme":"https","host":"qiita.com","port":null,"pathname":"/amay077/items/32833031c955ad2ddc77","search":null,"httpAcceptLanguage":null,"actionPath":"public/items#show","settings":{"analyticsTrackingId":"UA-24675221-12","assetsMap":{},"csrfToken":"SuyVP0yEhR2ZtlraMz3EvP1j7CzuUSYGq5Xtuf5tirmFY5dTp+ct/HZAkpI4BlCBm1jMtR4JFM3ut2NCPZlxeQ==","locale":"en"},"currentUser":null,"isLoggedIn":false,"recaptchaSiteKey":"6LfNkiQTAAAAAM3UGnSquBy2akTITGNMO_QDxMw6","serverSide":false}</script>
<div id="PersonalArticlePage-react-component-69e7393c-a340-48cb-9dab-0e083badec85"><div class="p-items_wrapper"><div class=" css-17jxvjw"><div class="css-11t2ec1"><div class="css-1dvr2p8"><button class=" css-18lkoru"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/amay077/items/32833031c955ad2ddc77/likers" class="css-1iupg5d">9</a></div><div class="css-ijvq0v"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-115f4t">4</span></div><div class="css-1b8uj5v"><span class="fa fa-twitter"></span></div><div class="css-1b8uj5v"><span class="fa fa-facebook"></span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-fcbn8c"><div class="css-1gj7nt">Improve article</div><a href="/drafts/32833031c955ad2ddc77/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/amay077/items/32833031c955ad2ddc77/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/amay077/items/32833031c955ad2ddc77/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/amay077/items/32833031c955ad2ddc77/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/amay077/items/32833031c955ad2ddc77.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div><div class="p-items_options"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_toc"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_main"><div class="css-1nzh4zz"><span class="fa fa-fw fa-warning css-38fzdi"></span><p>More than 1 year has passed since last update.</p></div><div class="css-helsa7"><div class="css-8qb8m4"><div class="it-AdcalRibbon"><span><a href="/advent-calendar/2019/xamarin" class="it-AdcalRibbon_title">Xamarin<!-- --> Advent Calendar<!-- --> <!-- -->2019</a>Day 25</span></div><div class="css-2imjyh"><div class="css-he5w1s"><div class="css-70qvj9"><div class="css-3ojehk"><a href="/amay077"><img class="css-100alwu eyfquo10" src="https://qiita-image-store.s3.amazonaws.com/0/8227/profile-images/1473680950" width="24" height="24" loading="lazy"/></a></div><div class="css-1dtnjt5"><a href="/amay077" class="css-10ougpm">@<!-- -->amay077</a><div class="css-1ay9vb9"><span><meta content="2019-12-24T17:21:49Z"/><time dateTime="2019-12-24T17:30:36Z" class="css-m19uds">updated at 2019-12-24</time></span></div></div></div></div></div><h1 class="css-cgzq40">Xamarin.Forms でガワネイティブアプリを作るときのテンプレートプロジェクトを作る２</h1><div class="css-1wa99t2"><span class="fa fa-tags mr-1of2 css-1l3zk9f" aria-hidden="true"></span><a href="/tags/csharp" class="css-4czcte">C#</a><a href="/tags/xamarin" class="css-4czcte">Xamarin</a><a href="/tags/xamarin.forms" class="css-4czcte">Xamarin.Forms</a></div></div><section class="it-MdContent"><div id="personal-public-article-body"><div><p>Advent Calendar 最終日が空いていたので、また <a href="https://twitter.com/ytabuchi/status/1206422081694388224" rel="nofollow noopener" target="_blank">リクエストもあった</a> ので埋めましょう（Xamarin のカレンダーが半分Webネタで良いのか？は置いといて）。</p>

<p>というわけで、</p>

<ul>
<li><a href="https://qiita.com/amay077/items/60dc567f0a7bca3ccd31" id="reference-55701986fb33e7f49999">Xamarin.Forms でガワネイティブアプリを作るときのテンプレートプロジェクトを作る１ - Qiita</a></li>
</ul>

<p>の続きです。</p>

<h2>
<span id="目次" class="fragment"></span><a href="#%E7%9B%AE%E6%AC%A1"><i class="fa fa-link"></i></a>目次</h2>

<ol>
<li>【<a href="https://qiita.com/amay077/items/60dc567f0a7bca3ccd31">第1回</a>】日本語入力時の画面高さの調整</li>
<li>【第1回】ステータスバー、あるいは SafeArea(ノッチ部)の色</li>
<li><strong>【今回】スプラッシュスクリーンおよび初回読み込み時の対応</strong></li>
<li><strong>【今回】アプリに必要な権限の許可を要求する</strong></li>
<li>【次回以降予定】アプリ情報の Web 側への引き渡し</li>
<li>【次回以降予定】<code>&lt;input type="xxx"&gt;</code> への対応</li>
<li>【次回以降予定】Back ボタンハンドリングの Web 側への移譲</li>
</ol>

<h2>
<span id="3-スプラッシュスクリーンおよび初回読み込み時の対応" class="fragment"></span><a href="#3-%E3%82%B9%E3%83%97%E3%83%A9%E3%83%83%E3%82%B7%E3%83%A5%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%81%8A%E3%82%88%E3%81%B3%E5%88%9D%E5%9B%9E%E8%AA%AD%E3%81%BF%E8%BE%BC%E3%81%BF%E6%99%82%E3%81%AE%E5%AF%BE%E5%BF%9C"><i class="fa fa-link"></i></a>3. スプラッシュスクリーンおよび初回読み込み時の対応</h2>

<p>実体がWebアプリであるため、起動してからアプリが使用可能になるまでに時間がかかるのは、ガワネイティブの弱点の一つです。<br>
これはなんとかごまかしてユーザーに不快感を与えないようにしたいです。</p>

<p>ガワネイティブの起動にかかるプロセスは大きくわけて２つです。</p>

<ol>
<li>ネイティブアプリとしての起動から最初の画面が表示されるまで</li>
<li>最初の画面が表示されてから Web ページの読み込みが完了するまで</li>
</ol>

<p>1 は通常のアプリでも必要なプロセス、2 はガワネイティブ特有の要件です。</p>

<p>まずは 1 を対応します。</p>

<h3>
<span id="android-の場合" class="fragment"></span><a href="#android-%E3%81%AE%E5%A0%B4%E5%90%88"><i class="fa fa-link"></i></a>Android の場合</h3>

<ul>
<li><a href="https://docs.microsoft.com/en-us/xamarin/android/user-interface/splash-screen" rel="nofollow noopener" target="_blank">Splash Screen - Xamarin | Microsoft Docs</a></li>
</ul>

<p>こちらを参考にします。</p>

<p>Android 側プロジェクトの <code>Resources/drawable/splash.xml</code> を追加して、次のように記述します。</p>

<p><strong>splash.axml</strong></p>

<div class="code-frame" data-lang="xml"><div class="highlight"><pre class="with-code"><code><span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt">&lt;layer-list</span>
    <span class="na">xmlns:android=</span><span class="s">"http://schemas.android.com/apk/res/android"</span>
    <span class="na">android:opacity=</span><span class="s">"opaque"</span>
    <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
    <span class="na">android:layout_height=</span><span class="s">"match_parent"</span><span class="nt">&gt;</span>

    <span class="nt">&lt;item</span>
        <span class="na">android:drawable=</span><span class="s">"@color/colorPrimaryDark"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/layer-list&gt;</span>
</code></pre></div></div>

<p>次に、<code>Resources/values/colors.xml</code> の <code>colorPrimaryDark</code> の色を Web アプリのテーマ色に合わせます。<br>
この例では <code>#66BB6A<span class="inline-code-color" style="background-color: #66BB6A;"></span></code> とします。</p>

<div class="code-frame" data-lang="xml"><div class="highlight"><pre class="with-code"><code><span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt">&lt;resources&gt;</span>
    <span class="nt">&lt;color</span> <span class="na">name=</span><span class="s">"launcher_background"</span><span class="nt">&gt;</span>#FFFFFF<span class="nt">&lt;/color&gt;</span>
    <span class="nt">&lt;color</span> <span class="na">name=</span><span class="s">"colorPrimary"</span><span class="nt">&gt;</span>#3F51B5<span class="nt">&lt;/color&gt;</span>
    <span class="nt">&lt;color</span> <span class="na">name=</span><span class="s">"colorPrimaryDark"</span><span class="nt">&gt;</span>#66BB6A<span class="nt">&lt;/color&gt;</span>
    <span class="nt">&lt;color</span> <span class="na">name=</span><span class="s">"colorAccent"</span><span class="nt">&gt;</span>#FF4081<span class="nt">&lt;/color&gt;</span>
<span class="nt">&lt;/resources&gt;</span>
</code></pre></div></div>

<p>前述のリンクでは、スプラッシュスクリーン用の Theme と Activity を作るよう書かれていますが、ガワネイティブの場合少しサボることができます。<br>
<code>Resources/values/styles.xml</code> を開き、<code>MainTheme.Base</code> に <code>android:windowBackground</code> を追加します。</p>

<p><strong>styles.xml</strong></p>

<div class="code-frame" data-lang="xml"><div class="highlight"><pre class="with-code"><code><span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt">&lt;resources&gt;</span>
    <span class="nt">&lt;style</span> <span class="na">name=</span><span class="s">"MainTheme"</span> <span class="na">parent=</span><span class="s">"MainTheme.Base"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;/style&gt;</span>
    <span class="c">&lt;!-- Base theme applied no matter what API --&gt;</span>
    <span class="nt">&lt;style</span> <span class="na">name=</span><span class="s">"MainTheme.Base"</span> <span class="na">parent=</span><span class="s">"Theme.AppCompat.Light.DarkActionBar"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"android:windowBackground"</span><span class="nt">&gt;</span>@drawable/splash<span class="nt">&lt;/item&gt;</span>
        <span class="c">&lt;!--If you are using revision 22.1 please use just windowNoTitle. Without android:--&gt;</span>
        <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"windowNoTitle"</span><span class="nt">&gt;</span>true<span class="nt">&lt;/item&gt;</span>
        <span class="c">&lt;!--We will be using the toolbar so no need to show ActionBar--&gt;</span>
        <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"windowActionBar"</span><span class="nt">&gt;</span>false<span class="nt">&lt;/item&gt;</span>
        <span class="c">&lt;!-- Set theme colors from https://aka.ms/material-colors --&gt;</span>
        <span class="c">&lt;!-- colorPrimary is used for the default action bar background --&gt;</span>
        <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"colorPrimary"</span><span class="nt">&gt;</span>#2196F3<span class="nt">&lt;/item&gt;</span>
        <span class="c">&lt;!-- colorPrimaryDark is used for the status bar --&gt;</span>
        <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"colorPrimaryDark"</span><span class="nt">&gt;</span>#66BB6A<span class="nt">&lt;/item&gt;</span>
        <span class="c">&lt;!-- colorAccent is used as the default value for colorControlActivated
         which is used to tint widgets --&gt;</span>
        <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"colorAccent"</span><span class="nt">&gt;</span>#FF4081<span class="nt">&lt;/item&gt;</span>
        <span class="c">&lt;!-- You can also set colorControlNormal, colorControlActivated
         colorControlHighlight and colorSwitchThumbNormal. --&gt;</span>
        <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"windowActionModeOverlay"</span><span class="nt">&gt;</span>true<span class="nt">&lt;/item&gt;</span>
        <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"android:datePickerDialogTheme"</span><span class="nt">&gt;</span>@style/AppCompatDialogStyle<span class="nt">&lt;/item&gt;</span>
    <span class="nt">&lt;/style&gt;</span>
    <span class="nt">&lt;style</span> <span class="na">name=</span><span class="s">"AppCompatDialogStyle"</span> <span class="na">parent=</span><span class="s">"Theme.AppCompat.Light.Dialog"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"colorAccent"</span><span class="nt">&gt;</span>#FF4081<span class="nt">&lt;/item&gt;</span>
    <span class="nt">&lt;/style&gt;</span>
<span class="nt">&lt;/resources&gt;</span>
</code></pre></div></div>

<p>これでアプリ起動時に緑のスプラッシュスクリーンが表示されるようになります。</p>

<h3>
<span id="ios-の場合" class="fragment"></span><a href="#ios-%E3%81%AE%E5%A0%B4%E5%90%88"><i class="fa fa-link"></i></a>iOS の場合</h3>

<p>iOS プロジェクトには、最初から <code>LaunchScreen.storyboard</code> がスプラッシュスクリーンとして使用されるよう設定されていますが、色が青になっているので、これを変更します。</p>

<p><code>Resources/LaunchScreen.storyboard</code> を開いて、<code>Background</code> の色を <code>#66BB6A<span class="inline-code-color" style="background-color: #66BB6A;"></span></code> に変更しました。</p>

<p><a href="https://camo.qiitausercontent.com/a67db35ce2b892fc9d110e0ff2aa15cfc51a422e/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f383232372f37666339303138612d646462642d656235312d373134342d6164356461666565393535342e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F8227%2F7fc9018a-ddbd-eb51-7144-ad5dafee9554.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=cc6c20b83e9beb0dad525fbd1f642585" alt="image.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/8227/7fc9018a-ddbd-eb51-7144-ad5dafee9554.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F8227%2F7fc9018a-ddbd-eb51-7144-ad5dafee9554.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=74d4024361edeacb30a49f329a6a5ed2 1x" loading="lazy"></a></p>

<p>次に 「2. 最初の画面が表示されてから Web ページの読み込みが完了するまで」の対応です。<br>
こちらはベタに、 <strong>WebView の読み込みが完了するまで、WebView を隠しておく</strong> ことにします。<br>
これは Xamarin.Forms の共通プロジェクトで対応できます。</p>

<p><code>MainPage.xaml</code> を次のように修正します。</p>

<p><strong>MainPage.xaml</strong></p>

<div class="code-frame" data-lang="xml"><div class="highlight"><pre class="with-code"><code><span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt">&lt;ContentPage</span>
    <span class="na">xmlns=</span><span class="s">"http://xamarin.com/schemas/2014/forms"</span>
    <span class="na">xmlns:x=</span><span class="s">"http://schemas.microsoft.com/winfx/2009/xaml"</span>
    <span class="na">xmlns:d=</span><span class="s">"http://xamarin.com/schemas/2014/forms/design"</span>
    <span class="na">xmlns:mc=</span><span class="s">"http://schemas.openxmlformats.org/markup-compatibility/2006"</span>
    <span class="na">mc:Ignorable=</span><span class="s">"d"</span>
    <span class="na">xmlns:local=</span><span class="s">"clr-namespace:GawaNativeGettingStarted;assembly=GawaNativeGettingStarted"</span>
    <span class="na">xmlns:effect=</span><span class="s">"clr-namespace:GawaNativeGettingStarted"</span>
    <span class="na">x:Class=</span><span class="s">"GawaNativeGettingStarted.MainPage"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;StackLayout</span>
        <span class="na">Orientation=</span><span class="s">"Vertical"</span>
        <span class="na">VerticalOptions=</span><span class="s">"FillAndExpand"</span>
        <span class="na">BackgroundColor=</span><span class="s">"#66BB6A"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;StackLayout.Effects&gt;</span>
            <span class="nt">&lt;effect:SafeAreaPaddingEffect</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/StackLayout.Effects&gt;</span>
        <span class="nt">&lt;WebView</span>
            <span class="na">x:Name=</span><span class="s">"webView"</span>
            <span class="na">IsVisible=</span><span class="s">"false"</span>
            <span class="na">HorizontalOptions=</span><span class="s">"FillAndExpand"</span>
            <span class="na">VerticalOptions=</span><span class="s">"FillAndExpand"</span>
            <span class="na">Source=</span><span class="s">"https://8440f155.ngrok.io"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;FlexLayout</span>
            <span class="na">x:Name=</span><span class="s">"progressView"</span>
            <span class="na">Direction=</span><span class="s">"Column"</span>
            <span class="na">JustifyContent=</span><span class="s">"Center"</span>
            <span class="na">VerticalOptions=</span><span class="s">"FillAndExpand"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;ActivityIndicator</span>
                <span class="na">IsRunning=</span><span class="s">"True"</span>
                <span class="na">Color=</span><span class="s">"White"</span>
                <span class="na">VerticalOptions=</span><span class="s">"Center"</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;Label</span>
                <span class="na">FontSize=</span><span class="s">"Large"</span>
                <span class="na">TextColor=</span><span class="s">"White"</span>
                <span class="na">HorizontalTextAlignment=</span><span class="s">"Center"</span>
                <span class="na">Text=</span><span class="s">"Launching..."</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/FlexLayout&gt;</span>
    <span class="nt">&lt;/StackLayout&gt;</span>
<span class="nt">&lt;/ContentPage&gt;</span>
</code></pre></div></div>

<p>そしてコードビハインドの <code>MainPage.xaml.cs</code> に次のように記述します。</p>

<p><strong>MainPage.xaml.cs</strong></p>

<div class="code-frame" data-lang="csharp"><div class="highlight"><pre class="with-code"><code><span class="c1">// 略</span>
<span class="k">public</span> <span class="k">partial</span> <span class="k">class</span> <span class="nc">MainPage</span> <span class="p">:</span> <span class="n">ContentPage</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="nf">MainPage</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nf">InitializeComponent</span><span class="p">();</span>
        <span class="n">webView</span><span class="p">.</span><span class="n">Navigated</span> <span class="p">+=</span> <span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span> <span class="p">=&gt;</span>
        <span class="p">{</span>
            <span class="n">progressView</span><span class="p">.</span><span class="n">IsVisible</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
            <span class="n">webView</span><span class="p">.</span><span class="n">IsVisible</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
        <span class="p">};</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>WebView の読み込みが完了すると <code>Navigated</code> イベントが発生するので、それが発生するまでは、WebView は非表示、代わりにプログレス的な View を表示しておきます。<br>
Web アプリ側が真に SPA(Single Page Application) であるなら、<code>Navigated</code> イベントは一度しか発生しないはずですね。</p>

<p>ここまでの成果を実行すると、次のような見た目になります。</p>

<p><a href="https://camo.qiitausercontent.com/c786cd4310ae1bd67951b4dfd0ade4773bd5f8a0/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f383232372f32366461393337372d313164642d626661312d326138622d3139383035393062633737372e676966" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F8227%2F26da9377-11dd-bfa1-2a8b-1980590bc777.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=e8cd5bb1fdd1152bb98614985aaff4ad" alt="Untitled7.gif" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/8227/26da9377-11dd-bfa1-2a8b-1980590bc777.gif" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F8227%2F26da9377-11dd-bfa1-2a8b-1980590bc777.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=64ff9e5bac4657b952ae9a5f8817a026 1x" loading="lazy"></a></p>

<p>（Xamarin.Forms アプリとしての起動遅っそ。そして iOS シミュレータ早っや！）</p>

<h2>
<span id="4-アプリに必要な権限の許可を要求する" class="fragment"></span><a href="#4-%E3%82%A2%E3%83%97%E3%83%AA%E3%81%AB%E5%BF%85%E8%A6%81%E3%81%AA%E6%A8%A9%E9%99%90%E3%81%AE%E8%A8%B1%E5%8F%AF%E3%82%92%E8%A6%81%E6%B1%82%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>4. アプリに必要な権限の許可を要求する</h2>

<p>例えば Web アプリ側の JavaScript で Geolocation API を使用する場合も、ガワの方でその許可を得ておく必要があります(Chrome などのブラウザアプリが実装していることをやらなければならない)。</p>

<p>さて、Xamarin.Forms アプリとして作成したプロジェクトには <a href="https://docs.microsoft.com/en-us/xamarin/essentials/" rel="nofollow noopener" target="_blank">Xamarin Essentials</a> が標準で組み込まれており、それらの機能を使う際には、必要な権限の許可が Xamarin Essentials から要求されるようです。</p>

<p>しかし、JavaScript 側で呼び出された機能に必要な許可要求は、自力で行う必要があります <sup id="fnref1"><a href="#fn1" title="Xamarin Essentials の GitHub で master ブランチの Permissions.cs を見ると、 Permissions クラスが public になっているので、今後のバージョンアップで、権限機能が個別に使用できるようになるのかも知れません。">1</a></sup>。<br>
そのために、</p>

<ul>
<li><a href="https://github.com/jamesmontemagno/PermissionsPlugin" rel="nofollow noopener" target="_blank">jamesmontemagno/PermissionsPlugin: Check and Request Permissions Plugin for Xamarin and Windows</a></li>
</ul>

<p>を使用します。</p>

<p>バージョンが Stable で最新の 3.0.0.12、この nuget パッケージを共通、Android、iOS のすべてのプロジェクトにそれぞれ追加します。</p>

<p>Android プロジェクトには、 <a href="https://github.com/jamesmontemagno/PermissionsPlugin#setup" rel="nofollow noopener" target="_blank">Setup</a> に書かれているように、 <code>MainActivity.cs</code> に数行のコードを足す必要があります。</p>

<p><strong>MainActivity.cs</strong></p>

<div class="code-frame" data-lang="csharp"><div class="highlight"><pre class="with-code"><code><span class="err">＜省略＞</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">MainActivity</span> <span class="p">:</span> <span class="k">global</span><span class="p">::</span><span class="n">Xamarin</span><span class="p">.</span><span class="n">Forms</span><span class="p">.</span><span class="n">Platform</span><span class="p">.</span><span class="n">Android</span><span class="p">.</span><span class="n">FormsAppCompatActivity</span>
<span class="p">{</span>
    <span class="k">protected</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">OnCreate</span><span class="p">(</span><span class="n">Bundle</span> <span class="n">savedInstanceState</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="err">＜省略＞</span>

        <span class="n">Xamarin</span><span class="p">.</span><span class="n">Forms</span><span class="p">.</span><span class="n">Application</span><span class="p">.</span><span class="n">Current</span><span class="p">.</span><span class="n">On</span><span class="p">&lt;</span><span class="n">Xamarin</span><span class="p">.</span><span class="n">Forms</span><span class="p">.</span><span class="n">PlatformConfiguration</span><span class="p">.</span><span class="n">Android</span><span class="p">&gt;()</span>
            <span class="p">.</span><span class="nf">UseWindowSoftInputModeAdjust</span><span class="p">(</span><span class="n">WindowSoftInputModeAdjust</span><span class="p">.</span><span class="n">Resize</span><span class="p">);</span>

        <span class="c1">// ココ！</span>
        <span class="n">Plugin</span><span class="p">.</span><span class="n">CurrentActivity</span><span class="p">.</span><span class="n">CrossCurrentActivity</span><span class="p">.</span><span class="n">Current</span><span class="p">.</span><span class="nf">Init</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="n">savedInstanceState</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">OnRequestPermissionsResult</span><span class="p">(</span><span class="kt">int</span> <span class="n">requestCode</span><span class="p">,</span> <span class="kt">string</span><span class="p">[]</span> <span class="n">permissions</span><span class="p">,</span> <span class="p">[</span><span class="n">GeneratedEnum</span><span class="p">]</span> <span class="n">Android</span><span class="p">.</span><span class="n">Content</span><span class="p">.</span><span class="n">PM</span><span class="p">.</span><span class="n">Permission</span><span class="p">[]</span> <span class="n">grantResults</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// ココ！</span>
        <span class="n">PermissionsImplementation</span><span class="p">.</span><span class="n">Current</span><span class="p">.</span><span class="nf">OnRequestPermissionsResult</span><span class="p">(</span><span class="n">requestCode</span><span class="p">,</span> <span class="n">permissions</span><span class="p">,</span> <span class="n">grantResults</span><span class="p">);</span>
        <span class="n">Xamarin</span><span class="p">.</span><span class="n">Essentials</span><span class="p">.</span><span class="n">Platform</span><span class="p">.</span><span class="nf">OnRequestPermissionsResult</span><span class="p">(</span><span class="n">requestCode</span><span class="p">,</span> <span class="n">permissions</span><span class="p">,</span> <span class="n">grantResults</span><span class="p">);</span>

        <span class="k">base</span><span class="p">.</span><span class="nf">OnRequestPermissionsResult</span><span class="p">(</span><span class="n">requestCode</span><span class="p">,</span> <span class="n">permissions</span><span class="p">,</span> <span class="n">grantResults</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>iOS の方はここでは特にする事はありません。</p>

<p>準備が整ったところで、実際に必要な権限の許可を求める処理を書いてみます。</p>

<p>例として</p>

<ul>
<li>位置情報の取得</li>
<li>カメラの使用</li>
</ul>

<p>の権限を求めてみます。</p>

<h3>
<span id="androidios-プロジェクトの設定" class="fragment"></span><a href="#androidios-%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E8%A8%AD%E5%AE%9A"><i class="fa fa-link"></i></a>Android/iOS プロジェクトの設定</h3>

<p><strong>位置情報の取得</strong></p>

<p><a href="https://docs.microsoft.com/en-us/xamarin/essentials/geolocation?tabs=android" rel="nofollow noopener" target="_blank">Xamarin.Essentials: Geolocation</a> に書かれているように、</p>

<p>Android プロジェクトでは、 <code>AssemblyInfo.cs</code> と <code>AndroidManifest.xml</code> に数行ずつ追加します。<br>
iOS プロジェクト側は、<code>Info.plist</code> を編集します。</p>

<p><strong>カメラの使用</strong></p>

<p>Android 側は、<code>AndroidManifest.xml</code> に、</p>

<div class="code-frame" data-lang="xml"><div class="highlight"><pre class="with-code"><code><span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">"android.permission.CAMERA"</span> <span class="nt">/&gt;</span>
</code></pre></div></div>

<p>を追加します。</p>

<p>iOS プロジェクトは、<code>Info.plist</code> を開き、新しいエントリ「Privacy - Camera Usage Description」を追加し、Value に適当な説明文を入力します。</p>

<p>その他の権限に必要な設定は、</p>

<p>Android は、</p>

<ul>
<li><a href="https://developer.android.com/guide/topics/security/permissions.html#normal-dangerous" rel="nofollow noopener" target="_blank">システム パーミッション / Android Developers</a></li>
</ul>

<p>iOS では、</p>

<ul>
<li><a href="https://docs.microsoft.com/en-us/xamarin/ios/app-fundamentals/security-privacy?tabs=windows" rel="nofollow noopener" target="_blank">iOS Security and Privacy Features - Xamarin | Microsoft Docs</a></li>
</ul>

<p>が詳しいです。</p>

<h3>
<span id="共通プロジェクトでの記述" class="fragment"></span><a href="#%E5%85%B1%E9%80%9A%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%A7%E3%81%AE%E8%A8%98%E8%BF%B0"><i class="fa fa-link"></i></a>共通プロジェクトでの記述</h3>

<p>では、いよいよ、許可を求めるコードを書いていきます。</p>

<p>共通プロジェクトの <code>MainPage.xaml.cs</code> に次のように記述します。</p>

<p><strong>MainPage.xaml.cs</strong></p>

<div class="code-frame" data-lang="csharp"><div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="k">partial</span> <span class="k">class</span> <span class="nc">MainPage</span> <span class="p">:</span> <span class="n">ContentPage</span>
<span class="p">{</span>
    <span class="err">＜省略＞</span>

    <span class="k">async</span> <span class="k">protected</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">OnAppearing</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">base</span><span class="p">.</span><span class="nf">OnAppearing</span><span class="p">();</span>

        <span class="c1">// 許可を求める権限群</span>
        <span class="kt">var</span> <span class="n">permissions</span> <span class="p">=</span> <span class="k">new</span> <span class="p">[]</span>
        <span class="p">{</span>
            <span class="n">Permission</span><span class="p">.</span><span class="n">Location</span><span class="p">,</span>
            <span class="n">Permission</span><span class="p">.</span><span class="n">Camera</span><span class="p">,</span>
        <span class="p">};</span>

        <span class="c1">// 許可を得ていない権限群</span>
        <span class="kt">var</span> <span class="n">notPermitteds</span> <span class="p">=</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">Permission</span><span class="p">&gt;();</span>
        <span class="k">foreach</span> <span class="p">(</span><span class="kt">var</span> <span class="n">perm</span> <span class="k">in</span> <span class="n">permissions</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="kt">var</span> <span class="n">status</span> <span class="p">=</span> <span class="k">await</span> <span class="n">CrossPermissions</span><span class="p">.</span><span class="n">Current</span><span class="p">.</span><span class="nf">CheckPermissionStatusAsync</span><span class="p">(</span><span class="n">perm</span><span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">status</span> <span class="p">!=</span> <span class="n">PermissionStatus</span><span class="p">.</span><span class="n">Granted</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">notPermitteds</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">perm</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="c1">// 許可を求めるダイアログボックスを出す</span>
        <span class="kt">var</span> <span class="n">statusMap</span> <span class="p">=</span> <span class="k">await</span> <span class="n">CrossPermissions</span><span class="p">.</span><span class="n">Current</span><span class="p">.</span><span class="nf">RequestPermissionsAsync</span><span class="p">(</span><span class="n">notPermitteds</span><span class="p">.</span><span class="nf">ToArray</span><span class="p">());</span>
        <span class="kt">var</span> <span class="n">permitted</span> <span class="p">=</span> <span class="n">statusMap</span><span class="p">.</span><span class="n">Values</span><span class="p">.</span><span class="nf">All</span><span class="p">(</span><span class="n">x</span> <span class="p">=&gt;</span> <span class="n">x</span> <span class="p">==</span> <span class="n">PermissionStatus</span><span class="p">.</span><span class="n">Granted</span><span class="p">);</span>

        <span class="k">if</span> <span class="p">(!</span><span class="n">permitted</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">await</span> <span class="nf">DisplayAlert</span><span class="p">(</span><span class="s">"許可求む"</span><span class="p">,</span> <span class="s">"すべての権限が許可されていないので、一部の機能が使用できないかもしれません。"</span><span class="p">,</span> <span class="s">"閉じる"</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="c1">// 許可されたら Web アプリ起動</span>
        <span class="n">webView</span><span class="p">.</span><span class="n">Source</span> <span class="p">=</span> <span class="s">"https://5ce07f72.ngrok.io"</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>これは、アプリの起動時に、必要な権限群 <code>permissions</code> について、</p>

<ol>
<li>
<code>CheckPermissionStatusAsync</code> で許可が得られているかを取得</li>
<li>許可が得られていない権限群について <code>RequestPermissionsAsync</code> で許可を求めるダイアログボックスを表示</li>
<li>ユーザーが許可しなかったら、注意喚起するアラートを表示</li>
<li>WebView に URL を設定し、Webアプリを起動</li>
</ol>

<p>という流れです。</p>

<p>このコードを動かすと、次の図のようになります。</p>

<p><a href="https://camo.qiitausercontent.com/6701943fec9b73923e89d39343ff40c26256045a/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f383232372f61643063333233342d626433312d666639642d666266622d3639643263313565356235652e676966" target="_blank" rel="nofollow noopener"><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/8227/ad0c3234-bd31-ff9d-fbfb-69d2c15e5b5e.gif" alt="Untitled7.gif" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/8227/ad0c3234-bd31-ff9d-fbfb-69d2c15e5b5e.gif" loading="lazy"></a></p>

<p>ハマりポイントとしては、iOS で <code>pinfo.list</code> へ追加し忘れると <code>RequestPermissionsAsync</code> を呼んだ瞬間にアプリが落ちる、があります。</p>

<p>権限の取得は最小限、且つユーザーに納得感の強いタイミングで行うべきなので、起動時にまとめて行うのは、あまりお行儀の良いアプリとは言えません。</p>

<p>次回以降で解説する内容は、ネイティブアプリの情報を Webアプリ に引き渡す方法や、Webアプリのアクションをネイティブ側に処理させる方法などです。<br>
これらを駆使して、必要なタイミングで必要な許可を求めるコードを書くこともできます。</p>

<p>2020年も「Xamarin.Forms＋ガワネイティブ」推しでゆくべく、この連載は続けていきたいと思います。<br>
では 2020年 にお会いしましょう。</p>

<div class="footnotes">
<hr>
<ol>

<li id="fn1">
<p>Xamarin Essentials の GitHub で master ブランチの <a href="https://github.com/xamarin/Essentials/blob/b1f8dcb39d12d16ede41061ae9899c2ba5f26cfe/Xamarin.Essentials/Permissions/Permissions.netstandard.cs" rel="nofollow noopener" target="_blank"><code>Permissions.cs</code></a> を見ると、 <code>Permissions</code> クラスが <code>public</code> になっているので、今後のバージョンアップで、権限機能が個別に使用できるようになるのかも知れません。 <a href="#fnref1">↩</a></p>
</li>

</ol>
</div>
</div></div></section><div class="css-1yzj1fm"><div class="css-1uv1qiv"><span class="fa fa-twitter"></span></div><div class="css-1uv1qiv"><span class="fa fa-facebook"></span></div></div><div class="apm-Content"><div class="apm-Content_title">Why not register and get more from Qiita?</div><ol class="apm-Content_list"><li>We will deliver articles that match you<div class="description">By following users and tags, you can catch up information on technical fields that you are interested in as a whole</div></li><li>you can read useful information later efficiently<div class="description">By &quot;stocking&quot; the articles you like, you can search right away</div></li><div><a class="apm-Content_help" href="https://help.qiita.com/ja/articles/qiita-login-user" target="_blank"><i class="fa fa-fw fa-arrow-circle-right"></i>What you can do with signing up</a></div></ol><a href="/signup?callback_action=login_or_signup&amp;redirect_to=%2Famay077%2Fitems%2F32833031c955ad2ddc77&amp;realm=qiita" class="apm-Content_button apm-Content_button-signup">Sign up</a><a href="/login?callback_action=login_or_signup&amp;redirect_to=%2Famay077%2Fitems%2F32833031c955ad2ddc77&amp;realm=qiita" class="apm-Content_button apm-Content_button-signin">Login</a></div></div><div class="css-helsa7"></div></div></div></div><div class="css-109dbrr"><div class="css-5jpx49"><div class="css-mnxgyc"><button class=" css-1vlpknv"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/amay077/items/32833031c955ad2ddc77/likers" class="css-1iupg5d">9</a></div><div class="css-fsjkhv"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-1b17vb0">4</span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-7i7f4d"><div class="css-1gj7nt">Improve article</div><a href="/drafts/32833031c955ad2ddc77/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/amay077/items/32833031c955ad2ddc77/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/amay077/items/32833031c955ad2ddc77/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/amay077/items/32833031c955ad2ddc77/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/amay077/items/32833031c955ad2ddc77.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="PersonalArticlePage" data-dom-id="PersonalArticlePage-react-component-69e7393c-a340-48cb-9dab-0e083badec85">{"authorAnalyticsTrackingId":"UA-224332-8","organizationAnalyticsTrackingId":null}</script>
      
<footer id="globalFooter" class="st-Footer"><div class="st-Footer_container"><div class="st-Footer_start"><div class="st-Footer_logo"><svg viewbox="0 0 426.57 130" xmlns="http://www.w3.org/2000/svg"><circle cx="167.08" cy="21.4" r="12.28" /><path d="M250.81 29.66h23.48v18.9h-23.48z" /><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z" /><circle cx="216.33" cy="21.4" r="12.28" /></svg></div><div class="st-Footer_catchcopy">How developers code is here.</div><div class="st-Footer_socials"><a class="fa fa-twitter" href="https://twitter.com/qiita"></a><a class="fa fa-facebook-square" href="https://www.facebook.com/qiita/"></a></div></div><div class="st-Footer_end"><div class="st-Footer_qiita"><div class="st-Footer_label">Qiita</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="/about">About</a><a href="/terms">Terms</a><a href="/privacy">Privacy</a><a target="_blank" href="http://help.qiita.com/ja/articles/qiita-community-guideline">Guideline</a><a target="_blank" href="https://help.qiita.com/ja/articles/others-brand-guideline">Design Guideline</a></div><div class="st-Footer_column"><a href="/release-notes">Release</a><a href="/api/v2/docs">API</a><a href="/feedback/new">ご意見</a><a href="https://help.qiita.com">Help</a><a target="_blank" href="https://qiita.com/ads?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Advertisement</a></div></div></div><div class="st-Footer_increments"><div class="st-Footer_label">Increments</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="https://increments.co.jp/company/">About</a><a href="https://increments.co.jp/jobs/">採用情報</a><a href="https://blog.qiita.com">Blog</a></div><div class="st-Footer_column"><a href="https://teams.qiita.com/">Qiita Team</a><a href="https://jobs.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Jobs</a><a href="https://zine.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Zine</a></div></div></div></div></div><div class="st-Footer_copyright">© 2011-2021 Increments Inc.</div></footer><div id="Snackbar-react-component-55fb5ee5-400b-4717-bb53-b61167fcd946"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="Snackbar" data-dom-id="Snackbar-react-component-55fb5ee5-400b-4717-bb53-b61167fcd946">{}</script>
      
<div id="LoginModal-react-component-b51e245c-afbf-4e0f-8cf4-bf714926c419"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="LoginModal" data-dom-id="LoginModal-react-component-b51e245c-afbf-4e0f-8cf4-bf714926c419">{}</script>
      
<div id="StockModal-react-component-a1056345-9f3d-4a4f-a920-4c94cafe2c96"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="StockModal" data-dom-id="StockModal-react-component-a1056345-9f3d-4a4f-a920-4c94cafe2c96">{}</script>
      
</div><div id="dataContainer" style="display: none;" data-config="{&quot;actionPath&quot;:&quot;public/items#show&quot;,&quot;settings&quot;:{&quot;analyticsTrackingId&quot;:&quot;UA-24675221-12&quot;,&quot;assetsMap&quot;:{},&quot;csrfToken&quot;:&quot;SgSlTuDeXMcTu2nrDX0vxI/oSpaLjSzTajJflia1p5yFi6ciC730JvxNoaMGRrv56dNqD3vVHhgvENFt5UFcXA==&quot;,&quot;locale&quot;:&quot;en&quot;},&quot;currentUser&quot;:null}" /></body></html><script type="application/json" data-js-react-on-rails-store="AppStoreWithReactOnRails">{"snackbar":{"type":"","body":"","isActive":false},"article":{"article":{"body":"\u003cp\u003eAdvent Calendar 最終日が空いていたので、また \u003ca href=\"https://twitter.com/ytabuchi/status/1206422081694388224\" rel=\"nofollow noopener\" target=\"_blank\"\u003eリクエストもあった\u003c/a\u003e ので埋めましょう（Xamarin のカレンダーが半分Webネタで良いのか？は置いといて）。\u003c/p\u003e\n\n\u003cp\u003eというわけで、\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://qiita.com/amay077/items/60dc567f0a7bca3ccd31\" id=\"reference-55701986fb33e7f49999\"\u003eXamarin.Forms でガワネイティブアプリを作るときのテンプレートプロジェクトを作る１ - Qiita\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eの続きです。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"目次\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E7%9B%AE%E6%AC%A1\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e目次\u003c/h2\u003e\n\n\u003col\u003e\n\u003cli\u003e【\u003ca href=\"https://qiita.com/amay077/items/60dc567f0a7bca3ccd31\"\u003e第1回\u003c/a\u003e】日本語入力時の画面高さの調整\u003c/li\u003e\n\u003cli\u003e【第1回】ステータスバー、あるいは SafeArea(ノッチ部)の色\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e【今回】スプラッシュスクリーンおよび初回読み込み時の対応\u003c/strong\u003e\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e【今回】アプリに必要な権限の許可を要求する\u003c/strong\u003e\u003c/li\u003e\n\u003cli\u003e【次回以降予定】アプリ情報の Web 側への引き渡し\u003c/li\u003e\n\u003cli\u003e【次回以降予定】\u003ccode\u003e\u0026lt;input type=\"xxx\"\u0026gt;\u003c/code\u003e への対応\u003c/li\u003e\n\u003cli\u003e【次回以降予定】Back ボタンハンドリングの Web 側への移譲\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"3-スプラッシュスクリーンおよび初回読み込み時の対応\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#3-%E3%82%B9%E3%83%97%E3%83%A9%E3%83%83%E3%82%B7%E3%83%A5%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%81%8A%E3%82%88%E3%81%B3%E5%88%9D%E5%9B%9E%E8%AA%AD%E3%81%BF%E8%BE%BC%E3%81%BF%E6%99%82%E3%81%AE%E5%AF%BE%E5%BF%9C\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e3. スプラッシュスクリーンおよび初回読み込み時の対応\u003c/h2\u003e\n\n\u003cp\u003e実体がWebアプリであるため、起動してからアプリが使用可能になるまでに時間がかかるのは、ガワネイティブの弱点の一つです。\u003cbr\u003e\nこれはなんとかごまかしてユーザーに不快感を与えないようにしたいです。\u003c/p\u003e\n\n\u003cp\u003eガワネイティブの起動にかかるプロセスは大きくわけて２つです。\u003c/p\u003e\n\n\u003col\u003e\n\u003cli\u003eネイティブアプリとしての起動から最初の画面が表示されるまで\u003c/li\u003e\n\u003cli\u003e最初の画面が表示されてから Web ページの読み込みが完了するまで\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003cp\u003e1 は通常のアプリでも必要なプロセス、2 はガワネイティブ特有の要件です。\u003c/p\u003e\n\n\u003cp\u003eまずは 1 を対応します。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"android-の場合\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#android-%E3%81%AE%E5%A0%B4%E5%90%88\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eAndroid の場合\u003c/h3\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://docs.microsoft.com/en-us/xamarin/android/user-interface/splash-screen\" rel=\"nofollow noopener\" target=\"_blank\"\u003eSplash Screen - Xamarin | Microsoft Docs\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eこちらを参考にします。\u003c/p\u003e\n\n\u003cp\u003eAndroid 側プロジェクトの \u003ccode\u003eResources/drawable/splash.xml\u003c/code\u003e を追加して、次のように記述します。\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003esplash.axml\u003c/strong\u003e\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"xml\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"cp\"\u003e\u0026lt;?xml version=\"1.0\" encoding=\"utf-8\"?\u0026gt;\u003c/span\u003e\n\u003cspan class=\"nt\"\u003e\u0026lt;layer-list\u003c/span\u003e\n    \u003cspan class=\"na\"\u003exmlns:android=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"http://schemas.android.com/apk/res/android\"\u003c/span\u003e\n    \u003cspan class=\"na\"\u003eandroid:opacity=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"opaque\"\u003c/span\u003e\n    \u003cspan class=\"na\"\u003eandroid:layout_width=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"match_parent\"\u003c/span\u003e\n    \u003cspan class=\"na\"\u003eandroid:layout_height=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"match_parent\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e\n\n    \u003cspan class=\"nt\"\u003e\u0026lt;item\u003c/span\u003e\n        \u003cspan class=\"na\"\u003eandroid:drawable=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"@color/colorPrimaryDark\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n\u003cspan class=\"nt\"\u003e\u0026lt;/layer-list\u0026gt;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e次に、\u003ccode\u003eResources/values/colors.xml\u003c/code\u003e の \u003ccode\u003ecolorPrimaryDark\u003c/code\u003e の色を Web アプリのテーマ色に合わせます。\u003cbr\u003e\nこの例では \u003ccode\u003e#66BB6A\u003cspan class=\"inline-code-color\" style=\"background-color: #66BB6A;\"\u003e\u003c/span\u003e\u003c/code\u003e とします。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"xml\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"cp\"\u003e\u0026lt;?xml version=\"1.0\" encoding=\"utf-8\"?\u0026gt;\u003c/span\u003e\n\u003cspan class=\"nt\"\u003e\u0026lt;resources\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;color\u003c/span\u003e \u003cspan class=\"na\"\u003ename=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"launcher_background\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e#FFFFFF\u003cspan class=\"nt\"\u003e\u0026lt;/color\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;color\u003c/span\u003e \u003cspan class=\"na\"\u003ename=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"colorPrimary\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e#3F51B5\u003cspan class=\"nt\"\u003e\u0026lt;/color\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;color\u003c/span\u003e \u003cspan class=\"na\"\u003ename=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"colorPrimaryDark\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e#66BB6A\u003cspan class=\"nt\"\u003e\u0026lt;/color\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;color\u003c/span\u003e \u003cspan class=\"na\"\u003ename=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"colorAccent\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e#FF4081\u003cspan class=\"nt\"\u003e\u0026lt;/color\u0026gt;\u003c/span\u003e\n\u003cspan class=\"nt\"\u003e\u0026lt;/resources\u0026gt;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e前述のリンクでは、スプラッシュスクリーン用の Theme と Activity を作るよう書かれていますが、ガワネイティブの場合少しサボることができます。\u003cbr\u003e\n\u003ccode\u003eResources/values/styles.xml\u003c/code\u003e を開き、\u003ccode\u003eMainTheme.Base\u003c/code\u003e に \u003ccode\u003eandroid:windowBackground\u003c/code\u003e を追加します。\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003estyles.xml\u003c/strong\u003e\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"xml\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"cp\"\u003e\u0026lt;?xml version=\"1.0\" encoding=\"utf-8\"?\u0026gt;\u003c/span\u003e\n\u003cspan class=\"nt\"\u003e\u0026lt;resources\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;style\u003c/span\u003e \u003cspan class=\"na\"\u003ename=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"MainTheme\"\u003c/span\u003e \u003cspan class=\"na\"\u003eparent=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"MainTheme.Base\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;/style\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"c\"\u003e\u0026lt;!-- Base theme applied no matter what API --\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;style\u003c/span\u003e \u003cspan class=\"na\"\u003ename=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"MainTheme.Base\"\u003c/span\u003e \u003cspan class=\"na\"\u003eparent=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Theme.AppCompat.Light.DarkActionBar\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"nt\"\u003e\u0026lt;item\u003c/span\u003e \u003cspan class=\"na\"\u003ename=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"android:windowBackground\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e@drawable/splash\u003cspan class=\"nt\"\u003e\u0026lt;/item\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"c\"\u003e\u0026lt;!--If you are using revision 22.1 please use just windowNoTitle. Without android:--\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"nt\"\u003e\u0026lt;item\u003c/span\u003e \u003cspan class=\"na\"\u003ename=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"windowNoTitle\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003etrue\u003cspan class=\"nt\"\u003e\u0026lt;/item\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"c\"\u003e\u0026lt;!--We will be using the toolbar so no need to show ActionBar--\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"nt\"\u003e\u0026lt;item\u003c/span\u003e \u003cspan class=\"na\"\u003ename=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"windowActionBar\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003efalse\u003cspan class=\"nt\"\u003e\u0026lt;/item\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"c\"\u003e\u0026lt;!-- Set theme colors from https://aka.ms/material-colors --\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"c\"\u003e\u0026lt;!-- colorPrimary is used for the default action bar background --\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"nt\"\u003e\u0026lt;item\u003c/span\u003e \u003cspan class=\"na\"\u003ename=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"colorPrimary\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e#2196F3\u003cspan class=\"nt\"\u003e\u0026lt;/item\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"c\"\u003e\u0026lt;!-- colorPrimaryDark is used for the status bar --\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"nt\"\u003e\u0026lt;item\u003c/span\u003e \u003cspan class=\"na\"\u003ename=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"colorPrimaryDark\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e#66BB6A\u003cspan class=\"nt\"\u003e\u0026lt;/item\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"c\"\u003e\u0026lt;!-- colorAccent is used as the default value for colorControlActivated\n         which is used to tint widgets --\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"nt\"\u003e\u0026lt;item\u003c/span\u003e \u003cspan class=\"na\"\u003ename=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"colorAccent\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e#FF4081\u003cspan class=\"nt\"\u003e\u0026lt;/item\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"c\"\u003e\u0026lt;!-- You can also set colorControlNormal, colorControlActivated\n         colorControlHighlight and colorSwitchThumbNormal. --\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"nt\"\u003e\u0026lt;item\u003c/span\u003e \u003cspan class=\"na\"\u003ename=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"windowActionModeOverlay\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003etrue\u003cspan class=\"nt\"\u003e\u0026lt;/item\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"nt\"\u003e\u0026lt;item\u003c/span\u003e \u003cspan class=\"na\"\u003ename=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"android:datePickerDialogTheme\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e@style/AppCompatDialogStyle\u003cspan class=\"nt\"\u003e\u0026lt;/item\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;/style\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;style\u003c/span\u003e \u003cspan class=\"na\"\u003ename=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"AppCompatDialogStyle\"\u003c/span\u003e \u003cspan class=\"na\"\u003eparent=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Theme.AppCompat.Light.Dialog\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"nt\"\u003e\u0026lt;item\u003c/span\u003e \u003cspan class=\"na\"\u003ename=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"colorAccent\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e#FF4081\u003cspan class=\"nt\"\u003e\u0026lt;/item\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;/style\u0026gt;\u003c/span\u003e\n\u003cspan class=\"nt\"\u003e\u0026lt;/resources\u0026gt;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eこれでアプリ起動時に緑のスプラッシュスクリーンが表示されるようになります。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"ios-の場合\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#ios-%E3%81%AE%E5%A0%B4%E5%90%88\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eiOS の場合\u003c/h3\u003e\n\n\u003cp\u003eiOS プロジェクトには、最初から \u003ccode\u003eLaunchScreen.storyboard\u003c/code\u003e がスプラッシュスクリーンとして使用されるよう設定されていますが、色が青になっているので、これを変更します。\u003c/p\u003e\n\n\u003cp\u003e\u003ccode\u003eResources/LaunchScreen.storyboard\u003c/code\u003e を開いて、\u003ccode\u003eBackground\u003c/code\u003e の色を \u003ccode\u003e#66BB6A\u003cspan class=\"inline-code-color\" style=\"background-color: #66BB6A;\"\u003e\u003c/span\u003e\u003c/code\u003e に変更しました。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/a67db35ce2b892fc9d110e0ff2aa15cfc51a422e/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f383232372f37666339303138612d646462642d656235312d373134342d6164356461666565393535342e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F8227%2F7fc9018a-ddbd-eb51-7144-ad5dafee9554.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=cc6c20b83e9beb0dad525fbd1f642585\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/8227/7fc9018a-ddbd-eb51-7144-ad5dafee9554.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F8227%2F7fc9018a-ddbd-eb51-7144-ad5dafee9554.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=74d4024361edeacb30a49f329a6a5ed2 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e次に 「2. 最初の画面が表示されてから Web ページの読み込みが完了するまで」の対応です。\u003cbr\u003e\nこちらはベタに、 \u003cstrong\u003eWebView の読み込みが完了するまで、WebView を隠しておく\u003c/strong\u003e ことにします。\u003cbr\u003e\nこれは Xamarin.Forms の共通プロジェクトで対応できます。\u003c/p\u003e\n\n\u003cp\u003e\u003ccode\u003eMainPage.xaml\u003c/code\u003e を次のように修正します。\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003eMainPage.xaml\u003c/strong\u003e\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"xml\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"cp\"\u003e\u0026lt;?xml version=\"1.0\" encoding=\"utf-8\"?\u0026gt;\u003c/span\u003e\n\u003cspan class=\"nt\"\u003e\u0026lt;ContentPage\u003c/span\u003e\n    \u003cspan class=\"na\"\u003exmlns=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"http://xamarin.com/schemas/2014/forms\"\u003c/span\u003e\n    \u003cspan class=\"na\"\u003exmlns:x=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"http://schemas.microsoft.com/winfx/2009/xaml\"\u003c/span\u003e\n    \u003cspan class=\"na\"\u003exmlns:d=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"http://xamarin.com/schemas/2014/forms/design\"\u003c/span\u003e\n    \u003cspan class=\"na\"\u003exmlns:mc=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"http://schemas.openxmlformats.org/markup-compatibility/2006\"\u003c/span\u003e\n    \u003cspan class=\"na\"\u003emc:Ignorable=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"d\"\u003c/span\u003e\n    \u003cspan class=\"na\"\u003exmlns:local=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"clr-namespace:GawaNativeGettingStarted;assembly=GawaNativeGettingStarted\"\u003c/span\u003e\n    \u003cspan class=\"na\"\u003exmlns:effect=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"clr-namespace:GawaNativeGettingStarted\"\u003c/span\u003e\n    \u003cspan class=\"na\"\u003ex:Class=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"GawaNativeGettingStarted.MainPage\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;StackLayout\u003c/span\u003e\n        \u003cspan class=\"na\"\u003eOrientation=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Vertical\"\u003c/span\u003e\n        \u003cspan class=\"na\"\u003eVerticalOptions=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"FillAndExpand\"\u003c/span\u003e\n        \u003cspan class=\"na\"\u003eBackgroundColor=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"#66BB6A\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"nt\"\u003e\u0026lt;StackLayout.Effects\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"nt\"\u003e\u0026lt;effect:SafeAreaPaddingEffect\u003c/span\u003e \u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"nt\"\u003e\u0026lt;/StackLayout.Effects\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"nt\"\u003e\u0026lt;WebView\u003c/span\u003e\n            \u003cspan class=\"na\"\u003ex:Name=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"webView\"\u003c/span\u003e\n            \u003cspan class=\"na\"\u003eIsVisible=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"false\"\u003c/span\u003e\n            \u003cspan class=\"na\"\u003eHorizontalOptions=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"FillAndExpand\"\u003c/span\u003e\n            \u003cspan class=\"na\"\u003eVerticalOptions=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"FillAndExpand\"\u003c/span\u003e\n            \u003cspan class=\"na\"\u003eSource=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"https://8440f155.ngrok.io\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"nt\"\u003e\u0026lt;FlexLayout\u003c/span\u003e\n            \u003cspan class=\"na\"\u003ex:Name=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"progressView\"\u003c/span\u003e\n            \u003cspan class=\"na\"\u003eDirection=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Column\"\u003c/span\u003e\n            \u003cspan class=\"na\"\u003eJustifyContent=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Center\"\u003c/span\u003e\n            \u003cspan class=\"na\"\u003eVerticalOptions=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"FillAndExpand\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"nt\"\u003e\u0026lt;ActivityIndicator\u003c/span\u003e\n                \u003cspan class=\"na\"\u003eIsRunning=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"True\"\u003c/span\u003e\n                \u003cspan class=\"na\"\u003eColor=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"White\"\u003c/span\u003e\n                \u003cspan class=\"na\"\u003eVerticalOptions=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Center\"\u003c/span\u003e \u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"nt\"\u003e\u0026lt;Label\u003c/span\u003e\n                \u003cspan class=\"na\"\u003eFontSize=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Large\"\u003c/span\u003e\n                \u003cspan class=\"na\"\u003eTextColor=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"White\"\u003c/span\u003e\n                \u003cspan class=\"na\"\u003eHorizontalTextAlignment=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Center\"\u003c/span\u003e\n                \u003cspan class=\"na\"\u003eText=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Launching...\"\u003c/span\u003e \u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"nt\"\u003e\u0026lt;/FlexLayout\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;/StackLayout\u0026gt;\u003c/span\u003e\n\u003cspan class=\"nt\"\u003e\u0026lt;/ContentPage\u0026gt;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eそしてコードビハインドの \u003ccode\u003eMainPage.xaml.cs\u003c/code\u003e に次のように記述します。\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003eMainPage.xaml.cs\u003c/strong\u003e\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"c1\"\u003e// 略\u003c/span\u003e\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003epartial\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eMainPage\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eContentPage\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003eMainPage\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"nf\"\u003eInitializeComponent\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n        \u003cspan class=\"n\"\u003ewebView\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eNavigated\u003c/span\u003e \u003cspan class=\"p\"\u003e+=\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003es\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ee\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eprogressView\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eIsVisible\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003efalse\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"n\"\u003ewebView\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eIsVisible\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e};\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eWebView の読み込みが完了すると \u003ccode\u003eNavigated\u003c/code\u003e イベントが発生するので、それが発生するまでは、WebView は非表示、代わりにプログレス的な View を表示しておきます。\u003cbr\u003e\nWeb アプリ側が真に SPA(Single Page Application) であるなら、\u003ccode\u003eNavigated\u003c/code\u003e イベントは一度しか発生しないはずですね。\u003c/p\u003e\n\n\u003cp\u003eここまでの成果を実行すると、次のような見た目になります。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/c786cd4310ae1bd67951b4dfd0ade4773bd5f8a0/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f383232372f32366461393337372d313164642d626661312d326138622d3139383035393062633737372e676966\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F8227%2F26da9377-11dd-bfa1-2a8b-1980590bc777.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=e8cd5bb1fdd1152bb98614985aaff4ad\" alt=\"Untitled7.gif\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/8227/26da9377-11dd-bfa1-2a8b-1980590bc777.gif\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F8227%2F26da9377-11dd-bfa1-2a8b-1980590bc777.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=64ff9e5bac4657b952ae9a5f8817a026 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e（Xamarin.Forms アプリとしての起動遅っそ。そして iOS シミュレータ早っや！）\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"4-アプリに必要な権限の許可を要求する\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#4-%E3%82%A2%E3%83%97%E3%83%AA%E3%81%AB%E5%BF%85%E8%A6%81%E3%81%AA%E6%A8%A9%E9%99%90%E3%81%AE%E8%A8%B1%E5%8F%AF%E3%82%92%E8%A6%81%E6%B1%82%E3%81%99%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e4. アプリに必要な権限の許可を要求する\u003c/h2\u003e\n\n\u003cp\u003e例えば Web アプリ側の JavaScript で Geolocation API を使用する場合も、ガワの方でその許可を得ておく必要があります(Chrome などのブラウザアプリが実装していることをやらなければならない)。\u003c/p\u003e\n\n\u003cp\u003eさて、Xamarin.Forms アプリとして作成したプロジェクトには \u003ca href=\"https://docs.microsoft.com/en-us/xamarin/essentials/\" rel=\"nofollow noopener\" target=\"_blank\"\u003eXamarin Essentials\u003c/a\u003e が標準で組み込まれており、それらの機能を使う際には、必要な権限の許可が Xamarin Essentials から要求されるようです。\u003c/p\u003e\n\n\u003cp\u003eしかし、JavaScript 側で呼び出された機能に必要な許可要求は、自力で行う必要があります \u003csup id=\"fnref1\"\u003e\u003ca href=\"#fn1\" title=\"Xamarin Essentials の GitHub で master ブランチの Permissions.cs を見ると、 Permissions クラスが public になっているので、今後のバージョンアップで、権限機能が個別に使用できるようになるのかも知れません。\"\u003e1\u003c/a\u003e\u003c/sup\u003e。\u003cbr\u003e\nそのために、\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/jamesmontemagno/PermissionsPlugin\" rel=\"nofollow noopener\" target=\"_blank\"\u003ejamesmontemagno/PermissionsPlugin: Check and Request Permissions Plugin for Xamarin and Windows\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eを使用します。\u003c/p\u003e\n\n\u003cp\u003eバージョンが Stable で最新の 3.0.0.12、この nuget パッケージを共通、Android、iOS のすべてのプロジェクトにそれぞれ追加します。\u003c/p\u003e\n\n\u003cp\u003eAndroid プロジェクトには、 \u003ca href=\"https://github.com/jamesmontemagno/PermissionsPlugin#setup\" rel=\"nofollow noopener\" target=\"_blank\"\u003eSetup\u003c/a\u003e に書かれているように、 \u003ccode\u003eMainActivity.cs\u003c/code\u003e に数行のコードを足す必要があります。\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003eMainActivity.cs\u003c/strong\u003e\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"err\"\u003e＜省略＞\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eMainActivity\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"k\"\u003eglobal\u003c/span\u003e\u003cspan class=\"p\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eXamarin\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eForms\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ePlatform\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eAndroid\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eFormsAppCompatActivity\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eprotected\u003c/span\u003e \u003cspan class=\"k\"\u003eoverride\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eOnCreate\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eBundle\u003c/span\u003e \u003cspan class=\"n\"\u003esavedInstanceState\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"err\"\u003e＜省略＞\u003c/span\u003e\n\n        \u003cspan class=\"n\"\u003eXamarin\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eForms\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eApplication\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eCurrent\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eOn\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eXamarin\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eForms\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ePlatformConfiguration\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eAndroid\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;()\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eUseWindowSoftInputModeAdjust\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eWindowSoftInputModeAdjust\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eResize\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n        \u003cspan class=\"c1\"\u003e// ココ！\u003c/span\u003e\n        \u003cspan class=\"n\"\u003ePlugin\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eCurrentActivity\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eCrossCurrentActivity\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eCurrent\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eInit\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003esavedInstanceState\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eoverride\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eOnRequestPermissionsResult\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003erequestCode\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e[]\u003c/span\u003e \u003cspan class=\"n\"\u003epermissions\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eGeneratedEnum\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"n\"\u003eAndroid\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eContent\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ePM\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ePermission\u003c/span\u003e\u003cspan class=\"p\"\u003e[]\u003c/span\u003e \u003cspan class=\"n\"\u003egrantResults\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e// ココ！\u003c/span\u003e\n        \u003cspan class=\"n\"\u003ePermissionsImplementation\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eCurrent\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eOnRequestPermissionsResult\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003erequestCode\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003epermissions\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003egrantResults\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eXamarin\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eEssentials\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ePlatform\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eOnRequestPermissionsResult\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003erequestCode\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003epermissions\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003egrantResults\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003ebase\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eOnRequestPermissionsResult\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003erequestCode\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003epermissions\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003egrantResults\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eiOS の方はここでは特にする事はありません。\u003c/p\u003e\n\n\u003cp\u003e準備が整ったところで、実際に必要な権限の許可を求める処理を書いてみます。\u003c/p\u003e\n\n\u003cp\u003e例として\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e位置情報の取得\u003c/li\u003e\n\u003cli\u003eカメラの使用\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eの権限を求めてみます。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"androidios-プロジェクトの設定\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#androidios-%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E8%A8%AD%E5%AE%9A\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eAndroid/iOS プロジェクトの設定\u003c/h3\u003e\n\n\u003cp\u003e\u003cstrong\u003e位置情報の取得\u003c/strong\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://docs.microsoft.com/en-us/xamarin/essentials/geolocation?tabs=android\" rel=\"nofollow noopener\" target=\"_blank\"\u003eXamarin.Essentials: Geolocation\u003c/a\u003e に書かれているように、\u003c/p\u003e\n\n\u003cp\u003eAndroid プロジェクトでは、 \u003ccode\u003eAssemblyInfo.cs\u003c/code\u003e と \u003ccode\u003eAndroidManifest.xml\u003c/code\u003e に数行ずつ追加します。\u003cbr\u003e\niOS プロジェクト側は、\u003ccode\u003eInfo.plist\u003c/code\u003e を編集します。\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003eカメラの使用\u003c/strong\u003e\u003c/p\u003e\n\n\u003cp\u003eAndroid 側は、\u003ccode\u003eAndroidManifest.xml\u003c/code\u003e に、\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"xml\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"nt\"\u003e\u0026lt;uses-permission\u003c/span\u003e \u003cspan class=\"na\"\u003eandroid:name=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"android.permission.CAMERA\"\u003c/span\u003e \u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eを追加します。\u003c/p\u003e\n\n\u003cp\u003eiOS プロジェクトは、\u003ccode\u003eInfo.plist\u003c/code\u003e を開き、新しいエントリ「Privacy - Camera Usage Description」を追加し、Value に適当な説明文を入力します。\u003c/p\u003e\n\n\u003cp\u003eその他の権限に必要な設定は、\u003c/p\u003e\n\n\u003cp\u003eAndroid は、\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://developer.android.com/guide/topics/security/permissions.html#normal-dangerous\" rel=\"nofollow noopener\" target=\"_blank\"\u003eシステム パーミッション / Android Developers\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eiOS では、\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://docs.microsoft.com/en-us/xamarin/ios/app-fundamentals/security-privacy?tabs=windows\" rel=\"nofollow noopener\" target=\"_blank\"\u003eiOS Security and Privacy Features - Xamarin | Microsoft Docs\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eが詳しいです。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"共通プロジェクトでの記述\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%85%B1%E9%80%9A%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%A7%E3%81%AE%E8%A8%98%E8%BF%B0\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e共通プロジェクトでの記述\u003c/h3\u003e\n\n\u003cp\u003eでは、いよいよ、許可を求めるコードを書いていきます。\u003c/p\u003e\n\n\u003cp\u003e共通プロジェクトの \u003ccode\u003eMainPage.xaml.cs\u003c/code\u003e に次のように記述します。\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003eMainPage.xaml.cs\u003c/strong\u003e\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003epartial\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eMainPage\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eContentPage\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"err\"\u003e＜省略＞\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003easync\u003c/span\u003e \u003cspan class=\"k\"\u003eprotected\u003c/span\u003e \u003cspan class=\"k\"\u003eoverride\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eOnAppearing\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ebase\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eOnAppearing\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n        \u003cspan class=\"c1\"\u003e// 許可を求める権限群\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003epermissions\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"p\"\u003e[]\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"n\"\u003ePermission\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eLocation\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"n\"\u003ePermission\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eCamera\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e};\u003c/span\u003e\n\n        \u003cspan class=\"c1\"\u003e// 許可を得ていない権限群\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003enotPermitteds\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eList\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003ePermission\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;();\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eforeach\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eperm\u003c/span\u003e \u003cspan class=\"k\"\u003ein\u003c/span\u003e \u003cspan class=\"n\"\u003epermissions\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003estatus\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003eawait\u003c/span\u003e \u003cspan class=\"n\"\u003eCrossPermissions\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eCurrent\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eCheckPermissionStatusAsync\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eperm\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003estatus\u003c/span\u003e \u003cspan class=\"p\"\u003e!=\u003c/span\u003e \u003cspan class=\"n\"\u003ePermissionStatus\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eGranted\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"n\"\u003enotPermitteds\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAdd\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eperm\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"c1\"\u003e// 許可を求めるダイアログボックスを出す\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003estatusMap\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003eawait\u003c/span\u003e \u003cspan class=\"n\"\u003eCrossPermissions\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eCurrent\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eRequestPermissionsAsync\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003enotPermitteds\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eToArray\u003c/span\u003e\u003cspan class=\"p\"\u003e());\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003epermitted\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003estatusMap\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eValues\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAll\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"p\"\u003e==\u003c/span\u003e \u003cspan class=\"n\"\u003ePermissionStatus\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eGranted\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(!\u003c/span\u003e\u003cspan class=\"n\"\u003epermitted\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eawait\u003c/span\u003e \u003cspan class=\"nf\"\u003eDisplayAlert\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"許可求む\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\"すべての権限が許可されていないので、一部の機能が使用できないかもしれません。\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\"閉じる\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"c1\"\u003e// 許可されたら Web アプリ起動\u003c/span\u003e\n        \u003cspan class=\"n\"\u003ewebView\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eSource\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"https://5ce07f72.ngrok.io\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eこれは、アプリの起動時に、必要な権限群 \u003ccode\u003epermissions\u003c/code\u003e について、\u003c/p\u003e\n\n\u003col\u003e\n\u003cli\u003e\n\u003ccode\u003eCheckPermissionStatusAsync\u003c/code\u003e で許可が得られているかを取得\u003c/li\u003e\n\u003cli\u003e許可が得られていない権限群について \u003ccode\u003eRequestPermissionsAsync\u003c/code\u003e で許可を求めるダイアログボックスを表示\u003c/li\u003e\n\u003cli\u003eユーザーが許可しなかったら、注意喚起するアラートを表示\u003c/li\u003e\n\u003cli\u003eWebView に URL を設定し、Webアプリを起動\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003cp\u003eという流れです。\u003c/p\u003e\n\n\u003cp\u003eこのコードを動かすと、次の図のようになります。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/6701943fec9b73923e89d39343ff40c26256045a/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f383232372f61643063333233342d626433312d666639642d666266622d3639643263313565356235652e676966\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/8227/ad0c3234-bd31-ff9d-fbfb-69d2c15e5b5e.gif\" alt=\"Untitled7.gif\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/8227/ad0c3234-bd31-ff9d-fbfb-69d2c15e5b5e.gif\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eハマりポイントとしては、iOS で \u003ccode\u003epinfo.list\u003c/code\u003e へ追加し忘れると \u003ccode\u003eRequestPermissionsAsync\u003c/code\u003e を呼んだ瞬間にアプリが落ちる、があります。\u003c/p\u003e\n\n\u003cp\u003e権限の取得は最小限、且つユーザーに納得感の強いタイミングで行うべきなので、起動時にまとめて行うのは、あまりお行儀の良いアプリとは言えません。\u003c/p\u003e\n\n\u003cp\u003e次回以降で解説する内容は、ネイティブアプリの情報を Webアプリ に引き渡す方法や、Webアプリのアクションをネイティブ側に処理させる方法などです。\u003cbr\u003e\nこれらを駆使して、必要なタイミングで必要な許可を求めるコードを書くこともできます。\u003c/p\u003e\n\n\u003cp\u003e2020年も「Xamarin.Forms＋ガワネイティブ」推しでゆくべく、この連載は続けていきたいと思います。\u003cbr\u003e\nでは 2020年 にお会いしましょう。\u003c/p\u003e\n\n\u003cdiv class=\"footnotes\"\u003e\n\u003chr\u003e\n\u003col\u003e\n\n\u003cli id=\"fn1\"\u003e\n\u003cp\u003eXamarin Essentials の GitHub で master ブランチの \u003ca href=\"https://github.com/xamarin/Essentials/blob/b1f8dcb39d12d16ede41061ae9899c2ba5f26cfe/Xamarin.Essentials/Permissions/Permissions.netstandard.cs\" rel=\"nofollow noopener\" target=\"_blank\"\u003e\u003ccode\u003ePermissions.cs\u003c/code\u003e\u003c/a\u003e を見ると、 \u003ccode\u003ePermissions\u003c/code\u003e クラスが \u003ccode\u003epublic\u003c/code\u003e になっているので、今後のバージョンアップで、権限機能が個別に使用できるようになるのかも知れません。 \u003ca href=\"#fnref1\"\u003e↩\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\n\u003c/ol\u003e\n\u003c/div\u003e\n","createdAt":"2019-12-24T17:21:49Z","elapsedYearsFromLastModifiedAt":1,"encryptedId":"lFzbYwRc84IK/sNWbLE8cpe3Ubrawj/bHw==--uHhHMfwgnPSgOf+9--cnO7TZD6ep64xD9h0TL7WA==","isBanned":false,"isDeprecated":true,"isDestroyableByViewer":false,"isEditRequestReadableByViewer":true,"isEditRequestSendableByViewer":true,"isLikableByViewer":true,"isLikedByViewer":false,"isPublic":true,"isSlide":false,"isStockableByViewer":true,"isStockedByViewer":false,"isSubscribableByViewer":false,"isSubscribedByViewer":false,"isUpdatableByViewer":false,"isUpdated":true,"lastModifiedAt":"2019-12-24T17:30:36Z","likesCount":9,"linkUrl":"https://qiita.com/amay077/items/32833031c955ad2ddc77","organization":null,"originalId":1122210,"stockedCount":4,"title":"Xamarin.Forms でガワネイティブアプリを作るときのテンプレートプロジェクトを作る２","toc":"\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E7%9B%AE%E6%AC%A1\"\u003e目次\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#3-%E3%82%B9%E3%83%97%E3%83%A9%E3%83%83%E3%82%B7%E3%83%A5%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%81%8A%E3%82%88%E3%81%B3%E5%88%9D%E5%9B%9E%E8%AA%AD%E3%81%BF%E8%BE%BC%E3%81%BF%E6%99%82%E3%81%AE%E5%AF%BE%E5%BF%9C\"\u003e3. スプラッシュスクリーンおよび初回読み込み時の対応\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#android-%E3%81%AE%E5%A0%B4%E5%90%88\"\u003eAndroid の場合\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#ios-%E3%81%AE%E5%A0%B4%E5%90%88\"\u003eiOS の場合\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#4-%E3%82%A2%E3%83%97%E3%83%AA%E3%81%AB%E5%BF%85%E8%A6%81%E3%81%AA%E6%A8%A9%E9%99%90%E3%81%AE%E8%A8%B1%E5%8F%AF%E3%82%92%E8%A6%81%E6%B1%82%E3%81%99%E3%82%8B\"\u003e4. アプリに必要な権限の許可を要求する\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#androidios-%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E8%A8%AD%E5%AE%9A\"\u003eAndroid/iOS プロジェクトの設定\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%85%B1%E9%80%9A%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%A7%E3%81%AE%E8%A8%98%E8%BF%B0\"\u003e共通プロジェクトでの記述\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n","totalPv":2223,"uuid":"32833031c955ad2ddc77","banReason":null,"adventCalendarItem":{"day":25,"calendar":{"name":"Xamarin","urlName":"xamarin","year":2019,"organization":null}},"author":{"encryptedId":"UxoaTitAXbzbb2iHKG2U5beqLA==--a7kxApS4oSXe4t61--W6FdVw65UmAMlRnvn7VJOQ==","originalId":8227,"description":"ランチの時は呼ぶといい！","facebookUrl":null,"githubUrl":"https://github.com/amay077","isBlockingViewer":false,"isFollowableByViewer":true,"isFollowedByViewer":false,"isTweetWebNotificationReceivable":true,"linkedinUrl":null,"name":"amay077","profileImageUrl":"https://qiita-image-store.s3.amazonaws.com/0/8227/profile-images/1473680950","profileImageUrlW48":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F8227%2Fprofile-images%2F1473680950?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=48\u0026s=5f8a635ba49a4d77663138fe55619558","profileImageUrlW75":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F8227%2Fprofile-images%2F1473680950?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=c45897bd988ad06c0759e18a4161f0ce","urlName":"amay077","websiteUrl":"https://blog.amay077.net/","twitterUrl":"https://twitter.com/amay077","twitterUrlName":"amay077","revealedOrganizations":{"edges":[]}},"tags":[{"name":"C#","urlName":"csharp"},{"name":"Xamarin","urlName":"xamarin"},{"name":"Xamarin.Forms","urlName":"xamarin.forms"}],"followingLikers":{"edges":[]},"comments":{"totalCount":0}},"comments":[],"client":null,"ads_event_emitter":null}}</script>
