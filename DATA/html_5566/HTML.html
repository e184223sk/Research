<!DOCTYPE html><html><head><meta charset="utf-8" /><title>（Unity）3通りで制限時間を実装！ - Qiita</title><meta content="width=device-width,initial-scale=1,shrink-to-fit=no,viewport-fit=cover" name="viewport" /><meta content="#55c500" name="theme-color" /><meta content="XWpkTG32-_C4joZoJ_UsmDUi-zaH-hcrjF6ZC_FoFbk" name="google-site-verification" /><meta content="telephone=no" name="format-detection" /><link rel="canonical" href="https://qiita.com/nemuiO/items/a84063060fb210d2996a" /><link href="/manifest.json" rel="manifest" /><link href="/opensearch.xml" rel="search" title="Qiita" type="application/opensearchdescription+xml" /><link as="script" href="https://www.googletagservices.com/tag/js/gpt.js" rel="preload" /><link href="https://securepubads.g.doubleclick.net" rel="preconnect" /><script async="" src="https://www.googletagservices.com/tag/js/gpt.js"></script><meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="HFEyFRXLEye8oVCWbMoDU7xdjnAtracmhEViRsc0WOKkz4IMq0na+zxyiQOx+ePn46jLnIRmgVQXQMju5Garyw==" /><link rel="shortcut icon" type="image/x-icon" href="https://cdn.qiita.com/assets/favicons/public/production-c620d3e403342b1022967ba5e3db1aaa.ico" /><link rel="apple-touch-icon" type="image/png" href="https://cdn.qiita.com/assets/favicons/public/apple-touch-icon-ec5ba42a24ae923f16825592efdc356f.png" /><link rel="stylesheet" media="all" href="https://cdn.qiita.com/assets/public/article-2eaa7dbedc42a8ea65c722cda46d0ebb.min.css" /><script src="https://cdn.qiita.com/assets/public/v3-article-bundle-63de2d91fef827269d3f6b958db2335b.min.js" defer="defer"></script><meta name="twitter:card" content="summary_large_image"><meta content="@Qiita" name="twitter:site" /><meta property="og:type" content="article"><meta property="og:title" content="（Unity）3通りで制限時間を実装！ - Qiita"><meta property="og:image" content="https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0&amp;w=1200&amp;mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND03N3lJVlc1cGRIbnZ2SWt6NllDYTQ0S0s0NEduNVlpMjZabVE1cG1DNlphVDQ0S1M1YTZmNktPRjc3eUImdHh0LWNvbG9yPSUyMzMzMyZ0eHQtZm9udD1IaXJhZ2lubyUyMFNhbnMlMjBXNiZ0eHQtc2l6ZT01NCZ0eHQtY2xpcD1lbGxpcHNpcyZ0eHQtYWxpZ249Y2VudGVyJTJDbWlkZGxlJnM9Yjk3OWQ1YjRkMTkzMjM0MGU5ZjM3NjAwZTkwM2I0OGY&amp;mark-align=center%2Cmiddle&amp;blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RRzVsYlhWcFR3JnR4dC1jb2xvcj0lMjMzMzMmdHh0LWZvbnQ9SGlyYWdpbm8lMjBTYW5zJTIwVzYmdHh0LXNpemU9NDUmdHh0LWFsaWduPXJpZ2h0JTJDYm90dG9tJnM9ZjFmNTg4YTk1NWExNTNmNTM5MzBiNWI5Nzk5NTA1ZDg&amp;blend-align=center%2Cmiddle&amp;blend-mode=normal&amp;s=6a34c3c24527d3f1242b5ccbba4f0342"><meta property="og:description" content="

はじめに

UnityでC#を使っている大学生です。スクリプトを書いていて躓いたことを備忘録として残します。
同じ疑問をお持ちになった方、是非お役立てください。

今回は制限時間の実装についてです。
ゲーム制作をしていると何かと制..."><meta content="https://qiita.com/nemuiO/items/a84063060fb210d2996a" property="og:url" /><meta content="Qiita" property="og:site_name" /><meta content="564524038" property="fb:admins" /><meta content="C#,Unity3D,Unity,Unity2D" name="keywords" /><script>!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window, document,'script',
'https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '668972150489891');
fbq('track', 'PageView');</script><style data-emotion-css="17jxvjw 11t2ec1 1dvr2p8 18lkoru 1g4cku8 1iupg5d ijvq0v 15cocm3 12rp90f 115f4t 1b8uj5v 79elbk 16hhh7b fcbn8c 1gj7nt 154zy0m yikrym 1jqivyb 1ode1bp le4d8r 1hbd3g7 helsa7 8qb8m4 2imjyh he5w1s 70qvj9 3ojehk 100alwu 1dtnjt5 10ougpm 1ay9vb9 m19uds cgzq40 1wa99t2 1l3zk9f 4czcte 1yzj1fm 1uv1qiv 109dbrr 5jpx49 mnxgyc 1vlpknv fsjkhv 1b17vb0 7i7f4d"}>.css-17jxvjw{display:grid;display:-ms-grid;grid-template-columns:80px minmax(0,1fr) 300px;-ms-grid-columns:80px minmax(0,1fr) 300px;grid-template-rows:minmax(270px,auto) 1fr;-ms-grid-rows:minmax(270px,auto) 1fr;max-width:1280px;margin-right:auto;margin-left:auto;padding-top:24px;padding-right:24px;padding-left:24px;}@media (max-width:1200px){.css-17jxvjw{padding-bottom:0;padding-left:0;padding-right:0;}}@media (max-width:992px){.css-17jxvjw{grid-template-columns:80px 452px 300px;-ms-grid-columns:80px 452px 300px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}}@media (max-width:770px){.css-17jxvjw{display:block;}}@media (max-width:480px){.css-17jxvjw{padding-top:0;}}.css-11t2ec1{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;z-index:5;position:-webkit-sticky;position:sticky;top:calc(56px + 24px + 16px + 32px - 16px);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:16px;width:80px;}.css-11t2ec1:after{content:'';display:table;}.css-11t2ec1:before{content:'';display:table;}@media (max-width:770px){.css-11t2ec1{display:none;}}.css-1dvr2p8{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-18lkoru{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;background-color:#FFFFFF;}.css-1g4cku8{display:inline-block;vertical-align:middle;height:20px;width:20px;fill:#55C500;}.css-1iupg5d{color:#55C500;cursor:pointer;font-size:14px;font-weight:bold;}.css-ijvq0v{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-15cocm3{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#FFFFFF;border:2px solid #6E6F70;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:2px 0px 0px;width:40px;}.css-12rp90f{display:inline-block;vertical-align:bottom;height:17.77777777777778px;width:16px;fill:#6E6F70;}.css-115f4t{color:#6E6F70;font-size:14px;font-weight:bold;}.css-1b8uj5v{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;margin-bottom:16px;padding:0;}.css-79elbk{position:relative;}.css-16hhh7b{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;padding:0;}.css-fcbn8c{display:none;bottom:initial;left:initial;right:initial;top:initial;left:100%;top:calc(-8px - (14px * 1.8) - 16px - 4px);}.css-1gj7nt{color:rgba(0,0,0,0.6);font-size:14px;font-weight:bold;line-height:1.8;padding:8px 16px;}.css-154zy0m{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.87);cursor:pointer;font-size:16px;font-weight:normal;line-height:1.8;padding:4px 16px;}.css-154zy0m:hover{-webkit-text-decoration:none;text-decoration:none;background-color:#F2F2F2;}.css-yikrym{width:20px;}.css-1jqivyb{color:rgba(0,0,0,0.6);font-size:13px;}.css-1ode1bp{background-color:rgba(0,0,0,0.12);height:1px;width:100%;margin:8px 0;}.css-le4d8r{display:inline-block;vertical-align:middle;height:13px;width:13px;fill:rgba(0,0,0,0.6);}.css-1hbd3g7{height:250px;}.css-helsa7{background-color:#FFFFFF;padding:32px;margin-bottom:24px;}@media (max-width:992px){.css-helsa7{margin:0 auto 40px;}}@media (max-width:480px){.css-helsa7{margin:0 0 40px;padding:32px 16px;}}.css-8qb8m4{margin-bottom:48px;}.css-2imjyh{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-he5w1s{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;width:100%;}@media (max-width:770px){.css-he5w1s{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}}.css-70qvj9{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.css-3ojehk{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;margin-right:4px;}.css-100alwu{display:inline-block;border-radius:50%;line-height:1;overflow:hidden;vertical-align:middle;}.css-1dtnjt5{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-10ougpm{color:rgba(0,0,0,0.87);font-size:14px;font-weight:600;line-height:1.8;margin-right:4px;text-wrap:break-word;word-break:break-all;}.css-1ay9vb9{margin-right:16px;}.css-m19uds{color:rgba(0,0,0,0.6);font-size:14px;line-height:1.8;}.css-cgzq40{color:rgba(0,0,0,0.87);font-size:32px;font-weight:bold;line-height:1.4;margin-top:8px;text-wrap:break-word;word-break:break-all;}.css-1wa99t2{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.6);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:8px;}.css-1l3zk9f{color:rgba(0,0,0,0.6);font-size:20px;margin-right:8px;}.css-4czcte{margin-right:4px;color:inherit;font-size:14px;line-height:1.8;}.css-4czcte:not(:last-child)::after{content:',';margin-right:4px;}.css-1yzj1fm{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:32px;}.css-1uv1qiv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-size:20px;height:32px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin-right:16px;outline:none;padding:0;width:32px;}.css-109dbrr{background-color:#F9F9F9;border-top:1px solid rgba(0,0,0,0.12);bottom:0;box-shadow:0px 1px 4px rgba(0,0,0,0.14);display:none;height:calc(env(safe-area-inset-bottom,0px) + 56px);-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding-bottom:env(safe-area-inset-bottom);position:-webkit-sticky;position:sticky;width:100%;z-index:2000;}@media (max-width:770px){.css-109dbrr{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}.css-5jpx49{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:space-evenly;-webkit-justify-content:space-evenly;-ms-flex-pack:space-evenly;justify-content:space-evenly;width:100%;}.css-mnxgyc{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1vlpknv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;margin-right:4px;background-color:#FFFFFF;}.css-fsjkhv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1b17vb0{color:#6E6F70;font-size:14px;font-weight:bold;margin-left:4px;}.css-7i7f4d{display:none;bottom:initial;left:initial;right:initial;top:initial;bottom:32px;right:0;}</style></head><body><div class="allWrapper"><div><div id="GlobalHeader-react-component-2449436a-d4ee-4880-8caf-6599f8ff7149"><div class="st-Header"><div class="st-Header_container"><div class="st-Header_start"><a href="/" class="st-Header_logo"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 426.57 130"><circle cx="167.08" cy="21.4" r="12.28"></circle><path d="M250.81 29.66h23.48v18.9h-23.48z"></path><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z"></path><circle cx="216.33" cy="21.4" r="12.28"></circle></svg></a><div class="st-Header_communitySelector" tabindex="0"><span class="fa fa-caret-down"></span></div><div class="st-Header_dropdown"><div class="st-Header_dropdownHeading">Qiita Teams that are logged in</div><div class="st-Header_dropdownItemNote">You are not logged in to any team</div><hr class="st-Header_dropdownDivider st-Header_dropdownDivider-shrink"/><a href="https://teams-center.qiita.com/find_team" class="st-Header_dropdownItem"><span class="fa fa-fw fa-sign-in st-Header_dropdownItemIcon"></span><div>Log in to Qiita Team</div></a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Community</div><a href="/organizations" class="st-Header_dropdownItem">Organization</a><a href="/official-events/open" class="st-Header_dropdownItem">Event</a><a href="/advent-calendar" class="st-Header_dropdownItem">Advent Calendar</a><a href="https://qiitadon.com/" class="st-Header_dropdownItem" target="_blank">Qiitadon (β)</a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Service</div><a href="https://jobs.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Jobs</a><a href="https://zine.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Zine</a><a href="https://blog.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Blog</a></div><form class="st-Header_search" action="/search" method="get"><span class="fa fa-search st-Header_searchIcon"></span><input type="search" class="st-Header_searchInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form><form class="st-Header_searchModal" action="/search" method="get"><input type="text" class="st-Header_searchModalInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form></div><div class="st-Header_end"><div class="st-Header_searchButton"><span class="fa fa-search"></span></div><a class="st-Header_signupButton" href="/signup?redirect_to=%2FnemuiO%2Fitems%2Fa84063060fb210d2996a">Signup</a><a class="st-Header_loginLink" href="/login?redirect_to=%2FnemuiO%2Fitems%2Fa84063060fb210d2996a">Login</a></div><div class="st-Header_overlay"></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="GlobalHeader" data-dom-id="GlobalHeader-react-component-2449436a-d4ee-4880-8caf-6599f8ff7149">{"unreadNotificationsCount":null,"realms":[{"humanName":"Qiita","isCurrentRealm":true,"isQiita":true,"isQiitaTeam":false,"loggedInUser":null,"teamId":null,"url":"https://qiita.com/"}],"teamFindUrl":"https://teams-center.qiita.com/find_team","isTeamOnlyUser":null,"currentUser":null}</script>
      
</div><div class="st-HeaderAlert st-HeaderAlert-warning"><div class="st-HeaderAlert_body"></div></div><script type="application/ld+json">{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"/","name":"Qiita"}},{"@type":"ListItem","position":2,"item":{"@id":"/tags/csharp","name":"C#"}}]}</script><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","datePublished":"2021-08-08T21:36:48.000+09:00","dateModified":"2021-08-10T16:12:34.000+09:00","headline":"（Unity）3通りで制限時間を実装！","image":"https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0\u0026w=1200\u0026mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND03N3lJVlc1cGRIbnZ2SWt6NllDYTQ0S0s0NEduNVlpMjZabVE1cG1DNlphVDQ0S1M1YTZmNktPRjc3eUImdHh0LWNvbG9yPSUyMzMzMyZ0eHQtZm9udD1IaXJhZ2lubyUyMFNhbnMlMjBXNiZ0eHQtc2l6ZT01NCZ0eHQtY2xpcD1lbGxpcHNpcyZ0eHQtYWxpZ249Y2VudGVyJTJDbWlkZGxlJnM9Yjk3OWQ1YjRkMTkzMjM0MGU5ZjM3NjAwZTkwM2I0OGY\u0026mark-align=center%2Cmiddle\u0026blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RRzVsYlhWcFR3JnR4dC1jb2xvcj0lMjMzMzMmdHh0LWZvbnQ9SGlyYWdpbm8lMjBTYW5zJTIwVzYmdHh0LXNpemU9NDUmdHh0LWFsaWduPXJpZ2h0JTJDYm90dG9tJnM9ZjFmNTg4YTk1NWExNTNmNTM5MzBiNWI5Nzk5NTA1ZDg\u0026blend-align=center%2Cmiddle\u0026blend-mode=normal\u0026s=6a34c3c24527d3f1242b5ccbba4f0342","mainEntityOfPage":"https://qiita.com/nemuiO/items/a84063060fb210d2996a","author":{"@type":"Person","address":"","email":null,"identifier":"nemuiO","name":"nemuiO","image":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Flh3.googleusercontent.com%2Fa-%2FAOh14GgYU2hH2HYv2xIWElxgbBiOM-fuNTDcEAuUBn1G%3Ds50?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=338126b22cef84c7e9d470a10ac88950","url":"https://qiita.com/nemuiO","description":"勉強中の身です","memberOf":[]},"publisher":{"@type":"Organization","name":"Qiita","logo":{"@type":"ImageObject","url":"//cdn.qiita.com/assets/public/qiita-logo-c39ded593afa388e2e1ba435b110554e.png"}}}</script><style type="text/css">.wb-CampaignLink {
  background-color: #333333;
  width: 100%;
}

.wb-CampaignLink_container {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  max-width: 1100px;
  margin: 0 auto;
  font-size: 13px;
  padding: 0.8em;
}
.wb-CampaignLink_container > a {
  color: #fff;
}

.wb-CampaignLink_container > a:hover {
  text-decoration: underline;
}</style><div class="wb-CampaignLink"><div class="wb-CampaignLink_container"><a target="_blank" id="header_text_message_1" href="https://increments.connpass.com/event/211948/">【9/9(木)開催】Qiitaの過去と未来についてお話しします！Qiita エンジニアフェスタ 2021 Online Meetup</a><a target="_blank" id="header_text_message_2" href="https://increments.connpass.com/event/211948/">詳しくはこちら</a></div><script>td.trackEvent(
  'front_events',
  {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"nemuiO","type":"items","id":"a84063060fb210d2996a"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Show","data":{"message":"【9/9(木)開催】Qiitaの過去と未来についてお話しします！Qiita エンジニアフェスタ 2021 Online Meetup","url":"https://increments.connpass.com/event/211948/","sub_message":"詳しくはこちら"}}
)</script><script>document.getElementById('header_text_message_1').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"nemuiO","type":"items","id":"a84063060fb210d2996a"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":2,"pos_id":"header_text_message_1","message":"【9/9(木)開催】Qiitaの過去と未来についてお話しします！Qiita エンジニアフェスタ 2021 Online Meetup","url":"https://increments.connpass.com/event/211948/","sub_message":"詳しくはこちら"}}
  )
})</script><script>document.getElementById('header_text_message_2').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"nemuiO","type":"items","id":"a84063060fb210d2996a"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":2,"pos_id":"header_text_message_2","message":"【9/9(木)開催】Qiitaの過去と未来についてお話しします！Qiita エンジニアフェスタ 2021 Online Meetup","url":"https://increments.connpass.com/event/211948/","sub_message":"詳しくはこちら"}}
  )
})</script></div><script type="application/json" id="js-react-on-rails-context">{"railsEnv":"production","inMailer":false,"i18nLocale":"en","i18nDefaultLocale":"en","href":"https://qiita.com/nemuiO/items/a84063060fb210d2996a","location":"/nemuiO/items/a84063060fb210d2996a","scheme":"https","host":"qiita.com","port":null,"pathname":"/nemuiO/items/a84063060fb210d2996a","search":null,"httpAcceptLanguage":null,"actionPath":"public/items#show","settings":{"analyticsTrackingId":"UA-24675221-12","assetsMap":{},"csrfToken":"E8zZ1uKbn/JxeKcnNxem5cG5MnZjuNeeipO0Nf1jrRGrUmnPXBlWLvGrfrLqJEZRnkx3mspz8ewZlh6d3jFeOA==","locale":"en"},"currentUser":null,"isLoggedIn":false,"recaptchaSiteKey":"6LfNkiQTAAAAAM3UGnSquBy2akTITGNMO_QDxMw6","serverSide":false}</script>
<div id="PersonalArticlePage-react-component-f1f8f202-194e-454f-a815-6baffa17e06d"><div class="p-items_wrapper"><div class=" css-17jxvjw"><div class="css-11t2ec1"><div class="css-1dvr2p8"><button class=" css-18lkoru"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/nemuiO/items/a84063060fb210d2996a/likers" class="css-1iupg5d">1</a></div><div class="css-ijvq0v"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-115f4t">1</span></div><div class="css-1b8uj5v"><span class="fa fa-twitter"></span></div><div class="css-1b8uj5v"><span class="fa fa-facebook"></span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-fcbn8c"><div class="css-1gj7nt">Improve article</div><a href="/drafts/a84063060fb210d2996a/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/nemuiO/items/a84063060fb210d2996a/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/nemuiO/items/a84063060fb210d2996a/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/nemuiO/items/a84063060fb210d2996a/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/nemuiO/items/a84063060fb210d2996a.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div><div class="p-items_options"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_toc"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_main"><div class="css-helsa7"><div class="css-8qb8m4"><div class="css-2imjyh"><div class="css-he5w1s"><div class="css-70qvj9"><div class="css-3ojehk"><a href="/nemuiO"><img class="css-100alwu eyfquo10" src="https://lh3.googleusercontent.com/a-/AOh14GgYU2hH2HYv2xIWElxgbBiOM-fuNTDcEAuUBn1G=s50" width="24" height="24" loading="lazy"/></a></div><div class="css-1dtnjt5"><a href="/nemuiO" class="css-10ougpm">@<!-- -->nemuiO</a><div class="css-1ay9vb9"><span><meta content="2021-08-08T12:36:48Z"/><time dateTime="2021-08-10T07:12:34Z" class="css-m19uds">updated at 2021-08-10</time></span></div></div></div></div></div><h1 class="css-cgzq40">（Unity）3通りで制限時間を実装！</h1><div class="css-1wa99t2"><span class="fa fa-tags mr-1of2 css-1l3zk9f" aria-hidden="true"></span><a href="/tags/csharp" class="css-4czcte">C#</a><a href="/tags/unity3d" class="css-4czcte">Unity3D</a><a href="/tags/unity" class="css-4czcte">Unity</a><a href="/tags/unity2d" class="css-4czcte">Unity2D</a></div></div><section class="it-MdContent"><div id="personal-public-article-body"><div>
<h1>
<span id="はじめに" class="fragment"></span><a href="#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB"><i class="fa fa-link"></i></a>はじめに</h1>

<p>UnityでC#を使っている大学生です。スクリプトを書いていて躓いたことを備忘録として残します。<br>
同じ疑問をお持ちになった方、是非お役立てください。</p>

<p>今回は<strong>制限時間の実装</strong>についてです。<br>
ゲーム制作をしていると何かと制限時間をつけたいと思う機会は多いのではないでしょうか。</p>

<p><code>Time.deltaTimeを使う方法</code><br>
<code>コルーチンを用いる方法</code><br>
<code>TimeSpan構造体とDateTime構造体を使う方法</code><br>
の以上3通りについて触れていきます。</p>

<p><code>欲しい部分だけを表示する方法</code><br>
も後半に載せておきます。</p>

<p>※ただしこの記事はあくまで"必要最低限の知識"と"方法"に重きを置いています。ご注意ください。</p>

<h1>
<span id="事前準備" class="fragment"></span><a href="#%E4%BA%8B%E5%89%8D%E6%BA%96%E5%82%99"><i class="fa fa-link"></i></a>事前準備</h1>

<p>まずはUnity側の下準備としてCreate Emptyより空のオブジェクトを作成します。<br>
ここにAddComponentから新たなC#スクリプトをアタッチします。（名前は何でも大丈夫です。ここではTimerScriptとします。）</p>

<p>カウントダウン表示用にCanvas配下にUI→TextからTextも作成しておきましょう。（ここではtimerTextとします。）</p>

<h1>
<span id="timedeltatimeを使う方法" class="fragment"></span><a href="#timedeltatime%E3%82%92%E4%BD%BF%E3%81%86%E6%96%B9%E6%B3%95"><i class="fa fa-link"></i></a>Time.deltaTimeを使う方法</h1>

<p>これを使うのが一番シンプルです。個人的に気に入っています。</p>

<p>おおまかな流れとしては<br>
<code>【1】制限時間を決める<br>
 【2】制限時間からTime.deltaTimeを引く<br>
 【3】float型を文字列に変換して表示<br>
 【4】カウントが0以下になった時の処理</code><br>
になります。</p>

<h2>
<span id="timedeltatimeについて簡易" class="fragment"></span><a href="#timedeltatime%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E6%98%93"><i class="fa fa-link"></i></a>Time.deltaTimeについて（簡易）</h2>

<p><strong>Time.deltaTimeは各フレームにかかった時間</strong>を表します。<br>
ゲームはフレームの連続でできているので、各フレームにかかる時間を足し合わせると経過時間と等しくなります。<br>
それを逆に利用して、すでに決められた時間（固定の値）から各フレームにかかった時間（増加していく）を引いていき、カウントダウンとして使います。</p>

<p>ちなみに足し合わせればカウントアップとしても使えます。優秀！</p>

<div class="code-frame" data-lang="c#"><div class="highlight"><pre><code><span class="c1">// 制限時間をセット</span>
<span class="kt">float</span> <span class="n">timer</span> <span class="p">=</span> <span class="m">10f</span><span class="p">;</span>
<span class="c1">// Update()の中などに何度も呼ばれるメソッドの中に記述し、Time.deltaTimeを引きつづける</span>
<span class="n">timer</span> <span class="p">-=</span> <span class="n">Time</span><span class="p">.</span><span class="n">deltaTime</span><span class="p">;</span>

<span class="c1">// (参考)</span>

<span class="c1">// 初期化</span>
<span class="kt">float</span> <span class="n">timer</span> <span class="p">=</span> <span class="m">0f</span><span class="p">;</span>
<span class="c1">// カウントアップ</span>
<span class="n">timer</span> <span class="p">+=</span> <span class="n">Time</span><span class="p">.</span><span class="n">deltaTime</span><span class="p">;</span>
</code></pre></div></div>

<h2>
<span id="使用例" class="fragment"></span><a href="#%E4%BD%BF%E7%94%A8%E4%BE%8B"><i class="fa fa-link"></i></a>使用例</h2>

<p>では書き方がわかったところで使用例を見てみましょう。<br>
この例は<strong>10秒から減っていくタイプの制限時間（タイマー）</strong>になります。</p>

<div class="code-frame" data-lang="c#"><div class="highlight"><pre><code><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UnityEngine.UI</span><span class="p">;</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">TimerScript</span> <span class="p">:</span> <span class="n">MonoBehaviour</span>
<span class="p">{</span>
        <span class="k">public</span> <span class="kt">float</span> <span class="n">limiTime</span> <span class="p">=</span> <span class="m">10f</span><span class="p">;</span>
        <span class="k">public</span> <span class="n">Text</span> <span class="n">timerText</span><span class="p">;</span>

        <span class="k">void</span> <span class="nf">Update</span><span class="p">(){</span>
            <span class="c1">// 制限時間との差を取得しつづける</span>
            <span class="n">limitTime</span> <span class="p">-=</span> <span class="n">Time</span><span class="p">.</span><span class="n">deltaTime</span><span class="p">;</span>
            <span class="c1">// 文字列に変換して表示</span>
            <span class="n">timerText</span><span class="p">.</span><span class="n">text</span> <span class="p">=</span> <span class="n">limitTime</span><span class="p">.</span><span class="nf">ToString</span><span class="p">();</span>

            <span class="c1">// もし制限時間が0になったら</span>
            <span class="k">if</span><span class="p">(</span><span class="n">limitTime</span><span class="p">==</span><span class="m">0</span><span class="p">){</span>
                <span class="c1">// Finishと表示</span>
                <span class="n">timerText</span><span class="p">.</span><span class="n">text</span> <span class="p">=</span> <span class="s">"Finish"</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p><strong>【1】制限時間を決める</strong></p>

<p>決められた秒数から経過時間を引いていく仕組みなので、まずは制限時間を決めましょう。<br>
Unity側からでも操作可能なようにpublicにしています。</p>

<p><strong>【2】制限時間からTime.deltaTimeを引く</strong></p>

<p>制限時間が決まったら、さっそくTime.deltaTimeを引いていきます。<br>
引き続けてもらう必要があるのでUpdate関数などの中に記述するとよいでしょう。</p>

<p><strong>【3】float型を文字列に変換して表示</strong></p>

<p>カウントダウンの仕組み自体はできたので、今度はそれを表示していきます。</p>

<p>timerTextのtextに制限時間を表示したいのですが、いかんせんlimitTimeはfloat型で文字列ではないのでそのままでは表示できません。解決策としてToString()を使ってあげると簡単に文字列に変換できます。</p>

<p><strong>【4】カウントが0以下になった時の処理</strong></p>

<p>完成しているようにみえて致命的な欠陥が残っています。今のままだとカウントダウンはマイナスの値もとってしまいます。</p>

<p>そこで、if文を使ってカウントが0以下になったときは常にFisishと表示されるように指定します。<br>
float型なので==0で条件式が書けます。地味に助かるところです。<br>
（timerText.text="0"とかけば0が表示されるようになるので柔軟に変えてください。数字はダブルクオーテーションで囲って文字列扱いにすると簡潔に書けます。）<br>
これで表示がマイナスの値になることはなくなりました。</p>

<h1>
<span id="コルーチンを用いる方法" class="fragment"></span><a href="#%E3%82%B3%E3%83%AB%E3%83%BC%E3%83%81%E3%83%B3%E3%82%92%E7%94%A8%E3%81%84%E3%82%8B%E6%96%B9%E6%B3%95"><i class="fa fa-link"></i></a>コルーチンを用いる方法</h1>

<p>これは感覚的に分かりやすい印象があります。気のせいかもしれません。</p>

<p>おおまかな流れとしては<br>
<code>【1】制限時間を決める<br>
【2】コルーチンを利用して1秒に1回カウントを引く<br>
【3】カウントが0以下になった時の処理</code><br>
になります。</p>

<h2>
<span id="コルーチンについて簡易" class="fragment"></span><a href="#%E3%82%B3%E3%83%AB%E3%83%BC%E3%83%81%E3%83%B3%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E6%98%93"><i class="fa fa-link"></i></a>コルーチンについて（簡易）</h2>

<blockquote>
<p><strong>コルーチン</strong><br>
コルーチンとは、実行を停止して Unity へ制御を戻し、その次のフレームで停止したところから続行することができる関数です。</p>
</blockquote>

<p>Unityにはコルーチンという機能が存在します。<br>
処理を中断し、任意のタイミングで中断したところから処理を再開してくれるありがたい機能です。</p>

<div class="code-frame" data-lang="c#"><div class="highlight"><pre><code><span class="k">void</span> <span class="nf">Start</span><span class="p">(){</span>
    <span class="nf">StartCoroutine</span><span class="p">(</span><span class="s">"コルーチン関数名"</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">//処理1と処理2の間で任意の秒数待つ</span>
<span class="n">IEnmerator</span> <span class="err">コルーチン関数名</span><span class="p">(){</span>
    <span class="c1">// 処理1</span>
    <span class="k">yield</span> <span class="k">return</span> <span class="k">new</span> <span class="nf">WaitforSeconds</span><span class="p">(</span><span class="err">止めたい秒数</span><span class="p">);</span>
    <span class="c1">// 処理2</span>
<span class="p">}</span>
</code></pre></div></div>

<p>コルーチン関数の前には<strong>IEnmerator</strong>をつけます。<br>
<strong>yield return new WaitforSeconds()</strong>も関数内に必ず記述します。<br>
呼び出すときは<strong>StartCoroutine</strong>を使います。<br>
※これらは同じスクリプト内に書きましょう。ややこしくなります...。</p>

<h2>
<span id="使用例-1" class="fragment"></span><a href="#%E4%BD%BF%E7%94%A8%E4%BE%8B-1"><i class="fa fa-link"></i></a>使用例</h2>

<p>実際に使用しているケースを眺めてみましょう。<br>
<strong>10秒からカウントが減っていくタイプの制限時間（タイマー）</strong>です。</p>

<div class="code-frame" data-lang="c#"><div class="highlight"><pre><code><span class="k">using</span> <span class="nn">UnityEngine.</span>
<span class="k">using</span> <span class="nn">UnityEngine.UI</span><span class="p">;</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">GameManager</span> <span class="p">:</span> <span class="n">MonoBehaviour</span>
<span class="p">{</span>
    <span class="c1">// 制限時間</span>
    <span class="k">public</span> <span class="kt">int</span> <span class="n">TIME_LIMIT</span> <span class="p">=</span> <span class="m">10</span><span class="p">;</span>

    <span class="k">void</span> <span class="nf">Start</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// コルーチンを呼ぶ</span>
        <span class="nf">StartCoroutine</span><span class="p">(</span><span class="s">"Timer"</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="n">IEnumerator</span> <span class="nf">Timer</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// 変数へ初期値を代入</span>
        <span class="kt">int</span> <span class="n">count</span> <span class="p">=</span> <span class="n">TIME_LIMIT</span><span class="p">;</span>

        <span class="c1">// カウントが0より大きい時ループ</span>
        <span class="k">while</span> <span class="p">(</span><span class="n">count</span> <span class="p">&gt;</span> <span class="m">0</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="c1">// テキストの更新</span>
            <span class="n">timerText</span><span class="p">.</span><span class="n">text</span> <span class="p">=</span> <span class="n">count</span><span class="p">.</span><span class="nf">ToString</span><span class="p">();</span>
            <span class="c1">// 1秒待機</span>
            <span class="k">yield</span> <span class="k">return</span> <span class="k">new</span> <span class="nf">WaitForSeconds</span><span class="p">(</span><span class="m">1.0f</span><span class="p">);</span>
            <span class="c1">// カウントを1減らす</span>
            <span class="n">count</span><span class="p">--;</span>
        <span class="p">}</span>

        <span class="c1">// テキストの表示</span>
        <span class="n">timerText</span><span class="p">.</span><span class="n">text</span> <span class="p">=</span> <span class="s">"Finish"</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p><strong>【1】制限時間を決める</strong></p>

<p>決められた秒数から1ずつ引いていく仕組みなので、まずは制限時間を決めましょう。<br>
Unity側からでも操作可能なようにpublicにしています。</p>

<p><strong>【2】コルーチンを利用して1秒に1回カウントを引く</strong></p>

<p>while文の中で1秒ごとに1ずつカウントが減るようにします。まさにカウントダウンそのものです。<br>
Start関数が呼ばれたとき（ゲーム再生開始時点）から実行が始まります。</p>

<p><strong>【3】カウントが0以下になった時の処理</strong></p>

<p>カウントが0になるとwhile文の条件式を満たさなくなるのでループを抜けます。<br>
特に何も書いていない場合テキストは1のまま停止してしまいます。ループを抜けてしまったためテキストが更新されないからです。<br>
よってFinishと表示されるようにします。（先ほどと同様timerText.text="0"でもかまいません）</p>

<h1>
<span id="timespan構造体とdatetime構造体を使う方法" class="fragment"></span><a href="#timespan%E6%A7%8B%E9%80%A0%E4%BD%93%E3%81%A8datetime%E6%A7%8B%E9%80%A0%E4%BD%93%E3%82%92%E4%BD%BF%E3%81%86%E6%96%B9%E6%B3%95"><i class="fa fa-link"></i></a>TimeSpan構造体とDateTime構造体を使う方法</h1>

<p>おおまかな流れとしては<br>
<code>【1】DateTime型同士を引き算して得られた時間差をTimeSpan型で取得<br>
【2】TimeSpan型を文字列に変換してUnityのTextに表示<br>
【3】カウントが0以下になった時の処理</code><br>
になります。</p>

<h2>
<span id="timespanとdatetimeについて簡易" class="fragment"></span><a href="#timespan%E3%81%A8datetime%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E6%98%93"><i class="fa fa-link"></i></a>TimeSpanとDateTimeについて（簡易）</h2>

<p>TimeSpanは時間間隔を表し、DateTimeは日付や時刻として表現される瞬間を返します。<br>
注意事項は<code>DateTime型同士を引き算しても得られる値はDateTime型ではない！</code>という点です。</p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre><code><span class="c1">// これはダメ</span>

<span class="n">DateTime</span> <span class="n">time</span> <span class="p">=</span> <span class="n">DateTime</span><span class="p">.</span><span class="n">Now</span><span class="p">.</span><span class="nf">AddSeconds</span><span class="p">(</span><span class="m">3</span><span class="p">)</span> <span class="p">-</span> <span class="n">DateTime</span><span class="p">.</span><span class="n">Now</span><span class="p">;</span>
</code></pre></div></div>

<div class="code-frame" data-lang="c#"><div class="highlight"><pre><code><span class="c1">// これはOK</span>

<span class="c1">// DateTime.Now.AddSeconds(3)で現在時刻より3秒後 , DateTime.Nowで現在時刻を得られます</span>
<span class="n">TimeSpan</span> <span class="n">timeSpan</span> <span class="p">=</span> <span class="n">DateTime</span><span class="p">.</span><span class="n">Now</span><span class="p">.</span><span class="nf">AddSeconds</span><span class="p">(</span><span class="m">3</span><span class="p">)</span> <span class="p">-</span> <span class="n">DateTime</span><span class="p">.</span><span class="n">Now</span><span class="p">;</span>
</code></pre></div></div>

<blockquote>
<p><strong>DateTime.Now</strong><br>
コンピューター上の現在の日時を現地時刻で表した DateTime オブジェクトを取得します。</p>

<p><strong>DateTime.AddSeconds(double)</strong><br>
指定された秒数を加算した新しい DateTime を返します。</p>
</blockquote>

<h2>
<span id="使用例-2" class="fragment"></span><a href="#%E4%BD%BF%E7%94%A8%E4%BE%8B-2"><i class="fa fa-link"></i></a>使用例</h2>

<p>実際に使用しているケースを眺めてみましょう。<br>
この例は<strong>3秒から減っていくタイプの制限時間（タイマー）</strong>になります。</p>

<div class="code-frame" data-lang="c#"><div class="highlight"><pre><code><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UnityEngine.UI</span><span class="p">;</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">TimerScript</span> <span class="p">:</span> <span class="n">MonoBehaviour</span>
<span class="p">{</span>
        <span class="k">private</span> <span class="n">DateTime</span> <span class="n">limiTime</span><span class="p">;</span>
        <span class="n">TimeSpan</span> <span class="n">timeSpan</span><span class="p">;</span>
        <span class="k">public</span> <span class="n">Text</span> <span class="n">timerText</span><span class="p">;</span>

        <span class="k">void</span> <span class="nf">Start</span><span class="p">(){</span>
            <span class="c1">// 現在時刻から3秒後をセット</span>
            <span class="n">limitTime</span> <span class="p">=</span> <span class="n">DateTime</span><span class="p">.</span><span class="n">Now</span><span class="p">.</span><span class="nf">AddSeconds</span><span class="p">(</span><span class="m">3</span><span class="p">);</span>
        <span class="p">}</span>
<span class="err">　　　　</span>
        <span class="k">void</span> <span class="nf">Update</span><span class="p">(){</span>
            <span class="c1">// 現在時刻との差を取得しつづける</span>
            <span class="n">timeSpan</span> <span class="p">=</span> <span class="n">LimitTime</span> <span class="p">-</span> <span class="n">DateTime</span><span class="p">.</span><span class="n">Now</span><span class="p">;</span>
            <span class="c1">// 文字列に変換して表示</span>
            <span class="n">timerText</span><span class="p">.</span><span class="n">text</span> <span class="p">=</span> <span class="n">timeSpan</span><span class="p">.</span><span class="nf">ToString</span><span class="p">();</span>

            <span class="c1">// もし現在時刻がStart時点でセットした3秒後の時刻を過ぎたら</span>
            <span class="k">if</span><span class="p">(</span><span class="n">limitTime</span><span class="p">&lt;=</span><span class="n">DateTime</span><span class="p">.</span><span class="n">Now</span><span class="p">){</span>
                <span class="c1">// Finishと表示</span>
                <span class="n">timerText</span><span class="p">.</span><span class="n">text</span> <span class="p">=</span> <span class="s">"Finish"</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p><strong>【1】DateTime型同士を引き算して得られた時間差をTimeSpan型で取得</strong></p>

<p>TimerScriptを開き、Start()の中で現在時刻から3秒後をセットします。<br>
（5秒後、10秒後などに変えると容易に制限時間を変更することができます。Startはゲーム再生開始時にただ1回しか処理が行われないので、limitTimeはStartが実行されたときの時刻の3秒後に固定されます。）</p>

<p>そしてUpdate()で、limitTimeから常に現在時刻を引き続けます。<br>
現在時刻は刻一刻と変化する（増えていく）のに対してlimitTimeは固定されているので、引くことで秒単位で差を得ることができ、実質カウントダウンをしていることになります。<br>
先に述べた通り、<strong><code>時刻同士の引き算で得られた値はTimeSpan型</code></strong>なので、timeSpanでこの差を受け取ってあげます。</p>

<p><strong>【2】TimeSpan型を文字列に変換してUnityのTextに表示</strong></p>

<p>カウントダウンの仕組み自体はできたので、今度はそれを表示していきます。</p>

<p>timerTextのtextに制限時間を表示したいのですが、いかんせんtimeSpanは文字列ではないのでそのままでは表示できません。解決策としてToString()を使ってあげると簡単に文字列に変換できます。</p>

<p><strong>【3】カウントが0以下になった時の処理</strong></p>

<p>一見完成しているように思えますが、今のままだとタイマーはマイナスの値もとってしまいます。</p>

<p>そこでif文を使って3秒後を過ぎたらずっとFinishと表示するように制御します。<br>
（Finishでなくてもかまいません。timerText.text="0"とすれば0で固定することも可能です。）<br>
これで表示がマイナスになることはなくなりました。</p>

<h1>
<span id="欲しい部分だけを表示する方法" class="fragment"></span><a href="#%E6%AC%B2%E3%81%97%E3%81%84%E9%83%A8%E5%88%86%E3%81%A0%E3%81%91%E3%82%92%E8%A1%A8%E7%A4%BA%E3%81%99%E3%82%8B%E6%96%B9%E6%B3%95"><i class="fa fa-link"></i></a>欲しい部分だけを表示する方法</h1>

<p>以上3通りの方法でカウントダウンの仕組みはだいたい完成しました。</p>

<p>ただここで少し問題があり、何も表示について指定しないとhh : mm : ss（hh時間mm分ss秒）がすべて表示されてしまったり意図した表示になっていないことがあります。<br>
数秒間のカウントダウンがしたいと思った時、この使っていない部分省きたいですよね。</p>

<p>そんなときには<strong>書式指定子</strong>というものが存在します。</p>

<div class="code-frame" data-lang="c#"><div class="highlight"><pre><code><span class="c1">// デフォルト（例:00.00.04のような表示）</span>
<span class="n">timerText</span><span class="p">.</span><span class="n">text</span> <span class="p">=</span> <span class="n">timeSpan</span><span class="p">.</span><span class="nf">ToString</span><span class="p">();</span>

<span class="c1">// s秒（例:4のような表示）</span>
<span class="n">timerText</span><span class="p">.</span><span class="n">text</span> <span class="p">=</span> <span class="n">timeSpan</span><span class="p">.</span><span class="nf">ToString</span><span class="p">(</span><span class="s">"s"</span><span class="p">);</span>

<span class="c1">// ss秒mmミリ秒（例:04.37のような表示）</span>
<span class="n">timerText</span><span class="p">.</span><span class="n">text</span> <span class="p">=</span> <span class="n">timeSpan</span><span class="p">.</span><span class="nf">ToString</span><span class="p">(</span><span class="s">"ss':'ff"</span><span class="p">);</span>

<span class="c1">// ss秒mmmミリ秒（例:04.375のような表示）</span>
<span class="n">timerText</span><span class="p">.</span><span class="n">text</span> <span class="p">=</span> <span class="n">timeSpan</span><span class="p">.</span><span class="nf">ToString</span><span class="p">(</span><span class="s">"ss':'fff"</span><span class="p">);</span>

<span class="c1">// DateTimeだと「:」など文字でないものをシングルクォーテーションで囲まなくてよい</span>
<span class="c1">// ss秒mmミリ秒（例:04.37のような表示）</span>
<span class="n">timerText</span><span class="p">.</span><span class="n">text</span> <span class="p">=</span> <span class="n">dateTime</span><span class="p">.</span><span class="nf">ToString</span><span class="p">(</span><span class="s">"ss:ff"</span><span class="p">);</span>
</code></pre></div></div>

<p>"s"なら1桁の時に10の位を0埋めしません、"ss"だと0埋めされます。</p>

<p>急に出てきたfはミリ秒、小数点以下の秒数を表示したいときに用います。<br>
"f"なら小数点以下1桁、"ff"なら2桁、"fff"なら3桁になります。個数に比例していきます。</p>

<p>（他の書式指定子についてはMicrosoft公式ドキュメント）<br>
[<a href="https://docs.microsoft.com/ja-jp/dotnet/standard/base-types/custom-date-and-time-format-strings" class="autolink" rel="nofollow noopener" target="_blank">https://docs.microsoft.com/ja-jp/dotnet/standard/base-types/custom-date-and-time-format-strings</a>]</p>

<p>単独でなくても"ss':'f"など秒とミリ秒を同時に表示することもできます。<br>
ただしここで1つ注意があります。<br>
<strong>DateTimeなどは、("ss:ff")と一息に書いてよい</strong><br>
<strong>TimeSpanの時は、("ss':'ff")と、文字以外のものはシングルクォーテーションで囲む必要がある</strong></p>

<p>これで完璧に制限時間を操れるようになりました！！</p>

<h1>
<span id="おわりに" class="fragment"></span><a href="#%E3%81%8A%E3%82%8F%E3%82%8A%E3%81%AB"><i class="fa fa-link"></i></a>おわりに</h1>

<p>三種類まとめてみました。私自身最初に躓いたのが制限時間でした。<br>
各々使いやすいものを使って実装してください。<br>
長くなってしまいましたがお読みいただきありがとうございました。</p>

<p>参考記事<br>
[<a href="https://docs.unity3d.com/ja/2019.4/ScriptReference/index.html" class="autolink" rel="nofollow noopener" target="_blank">https://docs.unity3d.com/ja/2019.4/ScriptReference/index.html</a>]</p>
</div></div></section><div class="css-1yzj1fm"><div class="css-1uv1qiv"><span class="fa fa-twitter"></span></div><div class="css-1uv1qiv"><span class="fa fa-facebook"></span></div></div><div class="apm-Content"><div class="apm-Content_title">Why not register and get more from Qiita?</div><ol class="apm-Content_list"><li>We will deliver articles that match you<div class="description">By following users and tags, you can catch up information on technical fields that you are interested in as a whole</div></li><li>you can read useful information later efficiently<div class="description">By &quot;stocking&quot; the articles you like, you can search right away</div></li><div><a class="apm-Content_help" href="https://help.qiita.com/ja/articles/qiita-login-user" target="_blank"><i class="fa fa-fw fa-arrow-circle-right"></i>What you can do with signing up</a></div></ol><a href="/signup?callback_action=login_or_signup&amp;redirect_to=%2FnemuiO%2Fitems%2Fa84063060fb210d2996a&amp;realm=qiita" class="apm-Content_button apm-Content_button-signup">Sign up</a><a href="/login?callback_action=login_or_signup&amp;redirect_to=%2FnemuiO%2Fitems%2Fa84063060fb210d2996a&amp;realm=qiita" class="apm-Content_button apm-Content_button-signin">Login</a></div></div><div class="css-helsa7"></div></div></div></div><div class="css-109dbrr"><div class="css-5jpx49"><div class="css-mnxgyc"><button class=" css-1vlpknv"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/nemuiO/items/a84063060fb210d2996a/likers" class="css-1iupg5d">1</a></div><div class="css-fsjkhv"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-1b17vb0">1</span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-7i7f4d"><div class="css-1gj7nt">Improve article</div><a href="/drafts/a84063060fb210d2996a/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/nemuiO/items/a84063060fb210d2996a/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/nemuiO/items/a84063060fb210d2996a/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/nemuiO/items/a84063060fb210d2996a/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/nemuiO/items/a84063060fb210d2996a.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="PersonalArticlePage" data-dom-id="PersonalArticlePage-react-component-f1f8f202-194e-454f-a815-6baffa17e06d">{"authorAnalyticsTrackingId":null,"organizationAnalyticsTrackingId":null}</script>
      
<footer id="globalFooter" class="st-Footer"><div class="st-Footer_container"><div class="st-Footer_start"><div class="st-Footer_logo"><svg viewbox="0 0 426.57 130" xmlns="http://www.w3.org/2000/svg"><circle cx="167.08" cy="21.4" r="12.28" /><path d="M250.81 29.66h23.48v18.9h-23.48z" /><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z" /><circle cx="216.33" cy="21.4" r="12.28" /></svg></div><div class="st-Footer_catchcopy">How developers code is here.</div><div class="st-Footer_socials"><a class="fa fa-twitter" href="https://twitter.com/qiita"></a><a class="fa fa-facebook-square" href="https://www.facebook.com/qiita/"></a></div></div><div class="st-Footer_end"><div class="st-Footer_qiita"><div class="st-Footer_label">Qiita</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="/about">About</a><a href="/terms">Terms</a><a href="/privacy">Privacy</a><a target="_blank" href="http://help.qiita.com/ja/articles/qiita-community-guideline">Guideline</a><a target="_blank" href="https://help.qiita.com/ja/articles/others-brand-guideline">Design Guideline</a></div><div class="st-Footer_column"><a href="/release-notes">Release</a><a href="/api/v2/docs">API</a><a href="/feedback/new">ご意見</a><a href="https://help.qiita.com">Help</a><a target="_blank" href="https://qiita.com/ads?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Advertisement</a></div></div></div><div class="st-Footer_increments"><div class="st-Footer_label">Increments</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="https://increments.co.jp/company/">About</a><a href="https://increments.co.jp/jobs/">採用情報</a><a href="https://blog.qiita.com">Blog</a></div><div class="st-Footer_column"><a href="https://teams.qiita.com/">Qiita Team</a><a href="https://jobs.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Jobs</a><a href="https://zine.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Zine</a></div></div></div></div></div><div class="st-Footer_copyright">© 2011-2021 Increments Inc.</div></footer><div id="Snackbar-react-component-fc5964d3-8ae1-4688-ae7e-ae53bb970550"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="Snackbar" data-dom-id="Snackbar-react-component-fc5964d3-8ae1-4688-ae7e-ae53bb970550">{}</script>
      
<div id="LoginModal-react-component-9b33ff79-b737-448f-8cf4-32bb518e04ae"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="LoginModal" data-dom-id="LoginModal-react-component-9b33ff79-b737-448f-8cf4-32bb518e04ae">{}</script>
      
<div id="StockModal-react-component-5184ff29-f462-4977-ae0c-5998cad48ebe"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="StockModal" data-dom-id="StockModal-react-component-5184ff29-f462-4977-ae0c-5998cad48ebe">{}</script>
      
</div><div id="dataContainer" style="display: none;" data-config="{&quot;actionPath&quot;:&quot;public/items#show&quot;,&quot;settings&quot;:{&quot;analyticsTrackingId&quot;:&quot;UA-24675221-12&quot;,&quot;assetsMap&quot;:{},&quot;csrfToken&quot;:&quot;fm7jbqp7yHUpPvx5Hrv9998ZqsjCJdOY5UonfkF39X3G8FN3FPkBqantJezDiB1DgOzvJGvu9ep2T43WYiUGVA==&quot;,&quot;locale&quot;:&quot;en&quot;},&quot;currentUser&quot;:null}" /></body></html><script type="application/json" data-js-react-on-rails-store="AppStoreWithReactOnRails">{"snackbar":{"type":"","body":"","isActive":false},"article":{"article":{"body":"\n\u003ch1\u003e\n\u003cspan id=\"はじめに\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eはじめに\u003c/h1\u003e\n\n\u003cp\u003eUnityでC#を使っている大学生です。スクリプトを書いていて躓いたことを備忘録として残します。\u003cbr\u003e\n同じ疑問をお持ちになった方、是非お役立てください。\u003c/p\u003e\n\n\u003cp\u003e今回は\u003cstrong\u003e制限時間の実装\u003c/strong\u003eについてです。\u003cbr\u003e\nゲーム制作をしていると何かと制限時間をつけたいと思う機会は多いのではないでしょうか。\u003c/p\u003e\n\n\u003cp\u003e\u003ccode\u003eTime.deltaTimeを使う方法\u003c/code\u003e\u003cbr\u003e\n\u003ccode\u003eコルーチンを用いる方法\u003c/code\u003e\u003cbr\u003e\n\u003ccode\u003eTimeSpan構造体とDateTime構造体を使う方法\u003c/code\u003e\u003cbr\u003e\nの以上3通りについて触れていきます。\u003c/p\u003e\n\n\u003cp\u003e\u003ccode\u003e欲しい部分だけを表示する方法\u003c/code\u003e\u003cbr\u003e\nも後半に載せておきます。\u003c/p\u003e\n\n\u003cp\u003e※ただしこの記事はあくまで\"必要最低限の知識\"と\"方法\"に重きを置いています。ご注意ください。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"事前準備\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E4%BA%8B%E5%89%8D%E6%BA%96%E5%82%99\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e事前準備\u003c/h1\u003e\n\n\u003cp\u003eまずはUnity側の下準備としてCreate Emptyより空のオブジェクトを作成します。\u003cbr\u003e\nここにAddComponentから新たなC#スクリプトをアタッチします。（名前は何でも大丈夫です。ここではTimerScriptとします。）\u003c/p\u003e\n\n\u003cp\u003eカウントダウン表示用にCanvas配下にUI→TextからTextも作成しておきましょう。（ここではtimerTextとします。）\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"timedeltatimeを使う方法\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#timedeltatime%E3%82%92%E4%BD%BF%E3%81%86%E6%96%B9%E6%B3%95\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eTime.deltaTimeを使う方法\u003c/h1\u003e\n\n\u003cp\u003eこれを使うのが一番シンプルです。個人的に気に入っています。\u003c/p\u003e\n\n\u003cp\u003eおおまかな流れとしては\u003cbr\u003e\n\u003ccode\u003e【1】制限時間を決める\u003cbr\u003e\n 【2】制限時間からTime.deltaTimeを引く\u003cbr\u003e\n 【3】float型を文字列に変換して表示\u003cbr\u003e\n 【4】カウントが0以下になった時の処理\u003c/code\u003e\u003cbr\u003e\nになります。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"timedeltatimeについて簡易\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#timedeltatime%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E6%98%93\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eTime.deltaTimeについて（簡易）\u003c/h2\u003e\n\n\u003cp\u003e\u003cstrong\u003eTime.deltaTimeは各フレームにかかった時間\u003c/strong\u003eを表します。\u003cbr\u003e\nゲームはフレームの連続でできているので、各フレームにかかる時間を足し合わせると経過時間と等しくなります。\u003cbr\u003e\nそれを逆に利用して、すでに決められた時間（固定の値）から各フレームにかかった時間（増加していく）を引いていき、カウントダウンとして使います。\u003c/p\u003e\n\n\u003cp\u003eちなみに足し合わせればカウントアップとしても使えます。優秀！\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"c1\"\u003e// 制限時間をセット\u003c/span\u003e\n\u003cspan class=\"kt\"\u003efloat\u003c/span\u003e \u003cspan class=\"n\"\u003etimer\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e10f\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e// Update()の中などに何度も呼ばれるメソッドの中に記述し、Time.deltaTimeを引きつづける\u003c/span\u003e\n\u003cspan class=\"n\"\u003etimer\u003c/span\u003e \u003cspan class=\"p\"\u003e-=\u003c/span\u003e \u003cspan class=\"n\"\u003eTime\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003edeltaTime\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// (参考)\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// 初期化\u003c/span\u003e\n\u003cspan class=\"kt\"\u003efloat\u003c/span\u003e \u003cspan class=\"n\"\u003etimer\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e0f\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e// カウントアップ\u003c/span\u003e\n\u003cspan class=\"n\"\u003etimer\u003c/span\u003e \u003cspan class=\"p\"\u003e+=\u003c/span\u003e \u003cspan class=\"n\"\u003eTime\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003edeltaTime\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"使用例\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E4%BD%BF%E7%94%A8%E4%BE%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e使用例\u003c/h2\u003e\n\n\u003cp\u003eでは書き方がわかったところで使用例を見てみましょう。\u003cbr\u003e\nこの例は\u003cstrong\u003e10秒から減っていくタイプの制限時間（タイマー）\u003c/strong\u003eになります。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eUnityEngine.UI\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eTimerScript\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eMonoBehaviour\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003efloat\u003c/span\u003e \u003cspan class=\"n\"\u003elimiTime\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e10f\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eText\u003c/span\u003e \u003cspan class=\"n\"\u003etimerText\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eUpdate\u003c/span\u003e\u003cspan class=\"p\"\u003e(){\u003c/span\u003e\n            \u003cspan class=\"c1\"\u003e// 制限時間との差を取得しつづける\u003c/span\u003e\n            \u003cspan class=\"n\"\u003elimitTime\u003c/span\u003e \u003cspan class=\"p\"\u003e-=\u003c/span\u003e \u003cspan class=\"n\"\u003eTime\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003edeltaTime\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"c1\"\u003e// 文字列に変換して表示\u003c/span\u003e\n            \u003cspan class=\"n\"\u003etimerText\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003etext\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003elimitTime\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eToString\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n            \u003cspan class=\"c1\"\u003e// もし制限時間が0になったら\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eif\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003elimitTime\u003c/span\u003e\u003cspan class=\"p\"\u003e==\u003c/span\u003e\u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e){\u003c/span\u003e\n                \u003cspan class=\"c1\"\u003e// Finishと表示\u003c/span\u003e\n                \u003cspan class=\"n\"\u003etimerText\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003etext\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"Finish\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e\u003cstrong\u003e【1】制限時間を決める\u003c/strong\u003e\u003c/p\u003e\n\n\u003cp\u003e決められた秒数から経過時間を引いていく仕組みなので、まずは制限時間を決めましょう。\u003cbr\u003e\nUnity側からでも操作可能なようにpublicにしています。\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003e【2】制限時間からTime.deltaTimeを引く\u003c/strong\u003e\u003c/p\u003e\n\n\u003cp\u003e制限時間が決まったら、さっそくTime.deltaTimeを引いていきます。\u003cbr\u003e\n引き続けてもらう必要があるのでUpdate関数などの中に記述するとよいでしょう。\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003e【3】float型を文字列に変換して表示\u003c/strong\u003e\u003c/p\u003e\n\n\u003cp\u003eカウントダウンの仕組み自体はできたので、今度はそれを表示していきます。\u003c/p\u003e\n\n\u003cp\u003etimerTextのtextに制限時間を表示したいのですが、いかんせんlimitTimeはfloat型で文字列ではないのでそのままでは表示できません。解決策としてToString()を使ってあげると簡単に文字列に変換できます。\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003e【4】カウントが0以下になった時の処理\u003c/strong\u003e\u003c/p\u003e\n\n\u003cp\u003e完成しているようにみえて致命的な欠陥が残っています。今のままだとカウントダウンはマイナスの値もとってしまいます。\u003c/p\u003e\n\n\u003cp\u003eそこで、if文を使ってカウントが0以下になったときは常にFisishと表示されるように指定します。\u003cbr\u003e\nfloat型なので==0で条件式が書けます。地味に助かるところです。\u003cbr\u003e\n（timerText.text=\"0\"とかけば0が表示されるようになるので柔軟に変えてください。数字はダブルクオーテーションで囲って文字列扱いにすると簡潔に書けます。）\u003cbr\u003e\nこれで表示がマイナスの値になることはなくなりました。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"コルーチンを用いる方法\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%B3%E3%83%AB%E3%83%BC%E3%83%81%E3%83%B3%E3%82%92%E7%94%A8%E3%81%84%E3%82%8B%E6%96%B9%E6%B3%95\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eコルーチンを用いる方法\u003c/h1\u003e\n\n\u003cp\u003eこれは感覚的に分かりやすい印象があります。気のせいかもしれません。\u003c/p\u003e\n\n\u003cp\u003eおおまかな流れとしては\u003cbr\u003e\n\u003ccode\u003e【1】制限時間を決める\u003cbr\u003e\n【2】コルーチンを利用して1秒に1回カウントを引く\u003cbr\u003e\n【3】カウントが0以下になった時の処理\u003c/code\u003e\u003cbr\u003e\nになります。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"コルーチンについて簡易\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%B3%E3%83%AB%E3%83%BC%E3%83%81%E3%83%B3%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E6%98%93\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eコルーチンについて（簡易）\u003c/h2\u003e\n\n\u003cblockquote\u003e\n\u003cp\u003e\u003cstrong\u003eコルーチン\u003c/strong\u003e\u003cbr\u003e\nコルーチンとは、実行を停止して Unity へ制御を戻し、その次のフレームで停止したところから続行することができる関数です。\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003cp\u003eUnityにはコルーチンという機能が存在します。\u003cbr\u003e\n処理を中断し、任意のタイミングで中断したところから処理を再開してくれるありがたい機能です。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eStart\u003c/span\u003e\u003cspan class=\"p\"\u003e(){\u003c/span\u003e\n    \u003cspan class=\"nf\"\u003eStartCoroutine\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"コルーチン関数名\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e//処理1と処理2の間で任意の秒数待つ\u003c/span\u003e\n\u003cspan class=\"n\"\u003eIEnmerator\u003c/span\u003e \u003cspan class=\"err\"\u003eコルーチン関数名\u003c/span\u003e\u003cspan class=\"p\"\u003e(){\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e// 処理1\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eyield\u003c/span\u003e \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eWaitforSeconds\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"err\"\u003e止めたい秒数\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e// 処理2\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eコルーチン関数の前には\u003cstrong\u003eIEnmerator\u003c/strong\u003eをつけます。\u003cbr\u003e\n\u003cstrong\u003eyield return new WaitforSeconds()\u003c/strong\u003eも関数内に必ず記述します。\u003cbr\u003e\n呼び出すときは\u003cstrong\u003eStartCoroutine\u003c/strong\u003eを使います。\u003cbr\u003e\n※これらは同じスクリプト内に書きましょう。ややこしくなります...。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"使用例-1\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E4%BD%BF%E7%94%A8%E4%BE%8B-1\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e使用例\u003c/h2\u003e\n\n\u003cp\u003e実際に使用しているケースを眺めてみましょう。\u003cbr\u003e\n\u003cstrong\u003e10秒からカウントが減っていくタイプの制限時間（タイマー）\u003c/strong\u003eです。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eUnityEngine.\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eUnityEngine.UI\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eGameManager\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eMonoBehaviour\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e// 制限時間\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003eTIME_LIMIT\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e10\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eStart\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e// コルーチンを呼ぶ\u003c/span\u003e\n        \u003cspan class=\"nf\"\u003eStartCoroutine\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Timer\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"n\"\u003eIEnumerator\u003c/span\u003e \u003cspan class=\"nf\"\u003eTimer\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e// 変数へ初期値を代入\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003ecount\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eTIME_LIMIT\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n        \u003cspan class=\"c1\"\u003e// カウントが0より大きい時ループ\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ewhile\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ecount\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"c1\"\u003e// テキストの更新\u003c/span\u003e\n            \u003cspan class=\"n\"\u003etimerText\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003etext\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ecount\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eToString\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n            \u003cspan class=\"c1\"\u003e// 1秒待機\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eyield\u003c/span\u003e \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eWaitForSeconds\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e1.0f\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n            \u003cspan class=\"c1\"\u003e// カウントを1減らす\u003c/span\u003e\n            \u003cspan class=\"n\"\u003ecount\u003c/span\u003e\u003cspan class=\"p\"\u003e--;\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"c1\"\u003e// テキストの表示\u003c/span\u003e\n        \u003cspan class=\"n\"\u003etimerText\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003etext\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"Finish\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e\u003cstrong\u003e【1】制限時間を決める\u003c/strong\u003e\u003c/p\u003e\n\n\u003cp\u003e決められた秒数から1ずつ引いていく仕組みなので、まずは制限時間を決めましょう。\u003cbr\u003e\nUnity側からでも操作可能なようにpublicにしています。\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003e【2】コルーチンを利用して1秒に1回カウントを引く\u003c/strong\u003e\u003c/p\u003e\n\n\u003cp\u003ewhile文の中で1秒ごとに1ずつカウントが減るようにします。まさにカウントダウンそのものです。\u003cbr\u003e\nStart関数が呼ばれたとき（ゲーム再生開始時点）から実行が始まります。\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003e【3】カウントが0以下になった時の処理\u003c/strong\u003e\u003c/p\u003e\n\n\u003cp\u003eカウントが0になるとwhile文の条件式を満たさなくなるのでループを抜けます。\u003cbr\u003e\n特に何も書いていない場合テキストは1のまま停止してしまいます。ループを抜けてしまったためテキストが更新されないからです。\u003cbr\u003e\nよってFinishと表示されるようにします。（先ほどと同様timerText.text=\"0\"でもかまいません）\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"timespan構造体とdatetime構造体を使う方法\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#timespan%E6%A7%8B%E9%80%A0%E4%BD%93%E3%81%A8datetime%E6%A7%8B%E9%80%A0%E4%BD%93%E3%82%92%E4%BD%BF%E3%81%86%E6%96%B9%E6%B3%95\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eTimeSpan構造体とDateTime構造体を使う方法\u003c/h1\u003e\n\n\u003cp\u003eおおまかな流れとしては\u003cbr\u003e\n\u003ccode\u003e【1】DateTime型同士を引き算して得られた時間差をTimeSpan型で取得\u003cbr\u003e\n【2】TimeSpan型を文字列に変換してUnityのTextに表示\u003cbr\u003e\n【3】カウントが0以下になった時の処理\u003c/code\u003e\u003cbr\u003e\nになります。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"timespanとdatetimeについて簡易\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#timespan%E3%81%A8datetime%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E6%98%93\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eTimeSpanとDateTimeについて（簡易）\u003c/h2\u003e\n\n\u003cp\u003eTimeSpanは時間間隔を表し、DateTimeは日付や時刻として表現される瞬間を返します。\u003cbr\u003e\n注意事項は\u003ccode\u003eDateTime型同士を引き算しても得られる値はDateTime型ではない！\u003c/code\u003eという点です。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"c1\"\u003e// これはダメ\u003c/span\u003e\n\n\u003cspan class=\"n\"\u003eDateTime\u003c/span\u003e \u003cspan class=\"n\"\u003etime\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eDateTime\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eNow\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAddSeconds\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e-\u003c/span\u003e \u003cspan class=\"n\"\u003eDateTime\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eNow\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"c1\"\u003e// これはOK\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// DateTime.Now.AddSeconds(3)で現在時刻より3秒後 , DateTime.Nowで現在時刻を得られます\u003c/span\u003e\n\u003cspan class=\"n\"\u003eTimeSpan\u003c/span\u003e \u003cspan class=\"n\"\u003etimeSpan\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eDateTime\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eNow\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAddSeconds\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e-\u003c/span\u003e \u003cspan class=\"n\"\u003eDateTime\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eNow\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cblockquote\u003e\n\u003cp\u003e\u003cstrong\u003eDateTime.Now\u003c/strong\u003e\u003cbr\u003e\nコンピューター上の現在の日時を現地時刻で表した DateTime オブジェクトを取得します。\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003eDateTime.AddSeconds(double)\u003c/strong\u003e\u003cbr\u003e\n指定された秒数を加算した新しい DateTime を返します。\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"使用例-2\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E4%BD%BF%E7%94%A8%E4%BE%8B-2\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e使用例\u003c/h2\u003e\n\n\u003cp\u003e実際に使用しているケースを眺めてみましょう。\u003cbr\u003e\nこの例は\u003cstrong\u003e3秒から減っていくタイプの制限時間（タイマー）\u003c/strong\u003eになります。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eUnityEngine.UI\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eTimerScript\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eMonoBehaviour\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003eDateTime\u003c/span\u003e \u003cspan class=\"n\"\u003elimiTime\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eTimeSpan\u003c/span\u003e \u003cspan class=\"n\"\u003etimeSpan\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eText\u003c/span\u003e \u003cspan class=\"n\"\u003etimerText\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eStart\u003c/span\u003e\u003cspan class=\"p\"\u003e(){\u003c/span\u003e\n            \u003cspan class=\"c1\"\u003e// 現在時刻から3秒後をセット\u003c/span\u003e\n            \u003cspan class=\"n\"\u003elimitTime\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eDateTime\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eNow\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAddSeconds\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"err\"\u003e　　　　\u003c/span\u003e\n        \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eUpdate\u003c/span\u003e\u003cspan class=\"p\"\u003e(){\u003c/span\u003e\n            \u003cspan class=\"c1\"\u003e// 現在時刻との差を取得しつづける\u003c/span\u003e\n            \u003cspan class=\"n\"\u003etimeSpan\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eLimitTime\u003c/span\u003e \u003cspan class=\"p\"\u003e-\u003c/span\u003e \u003cspan class=\"n\"\u003eDateTime\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eNow\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"c1\"\u003e// 文字列に変換して表示\u003c/span\u003e\n            \u003cspan class=\"n\"\u003etimerText\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003etext\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003etimeSpan\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eToString\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n            \u003cspan class=\"c1\"\u003e// もし現在時刻がStart時点でセットした3秒後の時刻を過ぎたら\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eif\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003elimitTime\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;=\u003c/span\u003e\u003cspan class=\"n\"\u003eDateTime\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eNow\u003c/span\u003e\u003cspan class=\"p\"\u003e){\u003c/span\u003e\n                \u003cspan class=\"c1\"\u003e// Finishと表示\u003c/span\u003e\n                \u003cspan class=\"n\"\u003etimerText\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003etext\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"Finish\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e\u003cstrong\u003e【1】DateTime型同士を引き算して得られた時間差をTimeSpan型で取得\u003c/strong\u003e\u003c/p\u003e\n\n\u003cp\u003eTimerScriptを開き、Start()の中で現在時刻から3秒後をセットします。\u003cbr\u003e\n（5秒後、10秒後などに変えると容易に制限時間を変更することができます。Startはゲーム再生開始時にただ1回しか処理が行われないので、limitTimeはStartが実行されたときの時刻の3秒後に固定されます。）\u003c/p\u003e\n\n\u003cp\u003eそしてUpdate()で、limitTimeから常に現在時刻を引き続けます。\u003cbr\u003e\n現在時刻は刻一刻と変化する（増えていく）のに対してlimitTimeは固定されているので、引くことで秒単位で差を得ることができ、実質カウントダウンをしていることになります。\u003cbr\u003e\n先に述べた通り、\u003cstrong\u003e\u003ccode\u003e時刻同士の引き算で得られた値はTimeSpan型\u003c/code\u003e\u003c/strong\u003eなので、timeSpanでこの差を受け取ってあげます。\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003e【2】TimeSpan型を文字列に変換してUnityのTextに表示\u003c/strong\u003e\u003c/p\u003e\n\n\u003cp\u003eカウントダウンの仕組み自体はできたので、今度はそれを表示していきます。\u003c/p\u003e\n\n\u003cp\u003etimerTextのtextに制限時間を表示したいのですが、いかんせんtimeSpanは文字列ではないのでそのままでは表示できません。解決策としてToString()を使ってあげると簡単に文字列に変換できます。\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003e【3】カウントが0以下になった時の処理\u003c/strong\u003e\u003c/p\u003e\n\n\u003cp\u003e一見完成しているように思えますが、今のままだとタイマーはマイナスの値もとってしまいます。\u003c/p\u003e\n\n\u003cp\u003eそこでif文を使って3秒後を過ぎたらずっとFinishと表示するように制御します。\u003cbr\u003e\n（Finishでなくてもかまいません。timerText.text=\"0\"とすれば0で固定することも可能です。）\u003cbr\u003e\nこれで表示がマイナスになることはなくなりました。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"欲しい部分だけを表示する方法\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%AC%B2%E3%81%97%E3%81%84%E9%83%A8%E5%88%86%E3%81%A0%E3%81%91%E3%82%92%E8%A1%A8%E7%A4%BA%E3%81%99%E3%82%8B%E6%96%B9%E6%B3%95\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e欲しい部分だけを表示する方法\u003c/h1\u003e\n\n\u003cp\u003e以上3通りの方法でカウントダウンの仕組みはだいたい完成しました。\u003c/p\u003e\n\n\u003cp\u003eただここで少し問題があり、何も表示について指定しないとhh : mm : ss（hh時間mm分ss秒）がすべて表示されてしまったり意図した表示になっていないことがあります。\u003cbr\u003e\n数秒間のカウントダウンがしたいと思った時、この使っていない部分省きたいですよね。\u003c/p\u003e\n\n\u003cp\u003eそんなときには\u003cstrong\u003e書式指定子\u003c/strong\u003eというものが存在します。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"c1\"\u003e// デフォルト（例:00.00.04のような表示）\u003c/span\u003e\n\u003cspan class=\"n\"\u003etimerText\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003etext\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003etimeSpan\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eToString\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// s秒（例:4のような表示）\u003c/span\u003e\n\u003cspan class=\"n\"\u003etimerText\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003etext\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003etimeSpan\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eToString\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"s\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// ss秒mmミリ秒（例:04.37のような表示）\u003c/span\u003e\n\u003cspan class=\"n\"\u003etimerText\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003etext\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003etimeSpan\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eToString\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"ss':'ff\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// ss秒mmmミリ秒（例:04.375のような表示）\u003c/span\u003e\n\u003cspan class=\"n\"\u003etimerText\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003etext\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003etimeSpan\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eToString\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"ss':'fff\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// DateTimeだと「:」など文字でないものをシングルクォーテーションで囲まなくてよい\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e// ss秒mmミリ秒（例:04.37のような表示）\u003c/span\u003e\n\u003cspan class=\"n\"\u003etimerText\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003etext\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003edateTime\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eToString\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"ss:ff\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e\"s\"なら1桁の時に10の位を0埋めしません、\"ss\"だと0埋めされます。\u003c/p\u003e\n\n\u003cp\u003e急に出てきたfはミリ秒、小数点以下の秒数を表示したいときに用います。\u003cbr\u003e\n\"f\"なら小数点以下1桁、\"ff\"なら2桁、\"fff\"なら3桁になります。個数に比例していきます。\u003c/p\u003e\n\n\u003cp\u003e（他の書式指定子についてはMicrosoft公式ドキュメント）\u003cbr\u003e\n[\u003ca href=\"https://docs.microsoft.com/ja-jp/dotnet/standard/base-types/custom-date-and-time-format-strings\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://docs.microsoft.com/ja-jp/dotnet/standard/base-types/custom-date-and-time-format-strings\u003c/a\u003e]\u003c/p\u003e\n\n\u003cp\u003e単独でなくても\"ss':'f\"など秒とミリ秒を同時に表示することもできます。\u003cbr\u003e\nただしここで1つ注意があります。\u003cbr\u003e\n\u003cstrong\u003eDateTimeなどは、(\"ss:ff\")と一息に書いてよい\u003c/strong\u003e\u003cbr\u003e\n\u003cstrong\u003eTimeSpanの時は、(\"ss':'ff\")と、文字以外のものはシングルクォーテーションで囲む必要がある\u003c/strong\u003e\u003c/p\u003e\n\n\u003cp\u003eこれで完璧に制限時間を操れるようになりました！！\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"おわりに\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%8A%E3%82%8F%E3%82%8A%E3%81%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eおわりに\u003c/h1\u003e\n\n\u003cp\u003e三種類まとめてみました。私自身最初に躓いたのが制限時間でした。\u003cbr\u003e\n各々使いやすいものを使って実装してください。\u003cbr\u003e\n長くなってしまいましたがお読みいただきありがとうございました。\u003c/p\u003e\n\n\u003cp\u003e参考記事\u003cbr\u003e\n[\u003ca href=\"https://docs.unity3d.com/ja/2019.4/ScriptReference/index.html\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://docs.unity3d.com/ja/2019.4/ScriptReference/index.html\u003c/a\u003e]\u003c/p\u003e\n","createdAt":"2021-08-08T12:36:48Z","elapsedYearsFromLastModifiedAt":0,"encryptedId":"jeSaWEFdbwjVe2P8aaw4q+a4ze0YDaOnKg==--Y9ZLsa2HeU2Xa4oQ--OzzSO8uDveXFoOa05QPDdA==","isBanned":false,"isDeprecated":false,"isDestroyableByViewer":false,"isEditRequestReadableByViewer":true,"isEditRequestSendableByViewer":true,"isLikableByViewer":true,"isLikedByViewer":false,"isPublic":true,"isSlide":false,"isStockableByViewer":true,"isStockedByViewer":false,"isSubscribableByViewer":false,"isSubscribedByViewer":false,"isUpdatableByViewer":false,"isUpdated":true,"lastModifiedAt":"2021-08-10T07:12:34Z","likesCount":1,"linkUrl":"https://qiita.com/nemuiO/items/a84063060fb210d2996a","organization":null,"originalId":1470524,"stockedCount":1,"title":"（Unity）3通りで制限時間を実装！","toc":"\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB\"\u003eはじめに\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E4%BA%8B%E5%89%8D%E6%BA%96%E5%82%99\"\u003e事前準備\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#timedeltatime%E3%82%92%E4%BD%BF%E3%81%86%E6%96%B9%E6%B3%95\"\u003eTime.deltaTimeを使う方法\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#timedeltatime%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E6%98%93\"\u003eTime.deltaTimeについて（簡易）\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E4%BD%BF%E7%94%A8%E4%BE%8B\"\u003e使用例\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%B3%E3%83%AB%E3%83%BC%E3%83%81%E3%83%B3%E3%82%92%E7%94%A8%E3%81%84%E3%82%8B%E6%96%B9%E6%B3%95\"\u003eコルーチンを用いる方法\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%B3%E3%83%AB%E3%83%BC%E3%83%81%E3%83%B3%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E6%98%93\"\u003eコルーチンについて（簡易）\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E4%BD%BF%E7%94%A8%E4%BE%8B-1\"\u003e使用例\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#timespan%E6%A7%8B%E9%80%A0%E4%BD%93%E3%81%A8datetime%E6%A7%8B%E9%80%A0%E4%BD%93%E3%82%92%E4%BD%BF%E3%81%86%E6%96%B9%E6%B3%95\"\u003eTimeSpan構造体とDateTime構造体を使う方法\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#timespan%E3%81%A8datetime%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E6%98%93\"\u003eTimeSpanとDateTimeについて（簡易）\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E4%BD%BF%E7%94%A8%E4%BE%8B-2\"\u003e使用例\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E6%AC%B2%E3%81%97%E3%81%84%E9%83%A8%E5%88%86%E3%81%A0%E3%81%91%E3%82%92%E8%A1%A8%E7%A4%BA%E3%81%99%E3%82%8B%E6%96%B9%E6%B3%95\"\u003e欲しい部分だけを表示する方法\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%81%8A%E3%82%8F%E3%82%8A%E3%81%AB\"\u003eおわりに\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n","totalPv":703,"uuid":"a84063060fb210d2996a","banReason":null,"adventCalendarItem":null,"author":{"encryptedId":"YrTAR0GA3lH78+gFCIt6EMVy/0bQxw==--rbtUn30LOA/WTPNj--lgQS2jynmfLJnXOmbRQaUw==","originalId":1810314,"description":"勉強中の身です","facebookUrl":null,"githubUrl":null,"isBlockingViewer":false,"isFollowableByViewer":true,"isFollowedByViewer":false,"isTweetWebNotificationReceivable":true,"linkedinUrl":null,"name":"＊ ねむ","profileImageUrl":"https://lh3.googleusercontent.com/a-/AOh14GgYU2hH2HYv2xIWElxgbBiOM-fuNTDcEAuUBn1G=s50","profileImageUrlW48":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Flh3.googleusercontent.com%2Fa-%2FAOh14GgYU2hH2HYv2xIWElxgbBiOM-fuNTDcEAuUBn1G%3Ds50?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=48\u0026s=183f4cf4d5d78b980a6d5ffc5aba97ca","profileImageUrlW75":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Flh3.googleusercontent.com%2Fa-%2FAOh14GgYU2hH2HYv2xIWElxgbBiOM-fuNTDcEAuUBn1G%3Ds50?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=338126b22cef84c7e9d470a10ac88950","urlName":"nemuiO","websiteUrl":"","twitterUrl":null,"twitterUrlName":null,"revealedOrganizations":{"edges":[]}},"tags":[{"name":"C#","urlName":"csharp"},{"name":"Unity3D","urlName":"unity3d"},{"name":"Unity","urlName":"unity"},{"name":"Unity2D","urlName":"unity2d"}],"followingLikers":{"edges":[]},"comments":{"totalCount":0}},"comments":[],"client":null,"ads_event_emitter":null}}</script>
