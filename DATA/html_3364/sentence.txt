C#のお勉強としてufcppさんの未確認飛行Cを読んでいたらSpan構造体というものがあることを知ったので実際に使ってみました。以下、ufcppさんの記事がとても分かりやすかったので引用させていただきます。Span構造体(System名前空間)は、span (区間、範囲)という名前通り、連続してデータが並んでいるもの(配列など)の一定範囲を読み書きするために使う型です。本当はもっと深くSpan&lt;T&gt;構造体の内容を知りたいのですが、ポインタやunsafeなど、ちょっと今の自分ではまだまだ分からない内容も多かったのでその部分は後程学習してしっかり身についてから書いていこうかなと思います。今回は引用させていただいた記事内において、文字列をSubStringではなくSpan&lt;T&gt;で参照した方が高速であることと配列の一部分を参照する際にArraySegmentよりもSpan&lt;T&gt;で参照した方が高速であることを試してみます。
個人的にはこの2つについてはどちらもSubStringやArraySegmentを利用していたのでこれだけでも「おおー！！より効率的な処理になるんだ！いいじゃん！！！」と結構ワクワクしました（笑）（もちろんSubStringとSpan&lt;T&gt;のほうはコピーと直接参照の違いなので時と場に応じて使う必要がありますが...）以下は100文字の文字列の4文字目から85文字分抜き出して変数に格納する時間をそれぞれ計っています（100万回ループ）。
タイムを計るコードは以下の記事を参考にさせていただきました！ありがとうございました！！なるほど。確かにコピーしていない分Spanのほうが速いみたいです。以下は配列の3要素目から15要素取得して変数に格納する時間をそれぞれ計っています（100万回ループ）。おお～。こちらは誤差かな？と思って何度か試してみましたが、やはりSpan&lt;T&gt;のほうがスピードが速かったです。まだまだSpan&lt;T&gt;の良さの一部分しか知れていませんが、これだけでも個人的には視野が広がりました。
よりメリットを知れるようにC#自体の知識をより深めないとですね...(;´∀｀)
まずはポインタとunsafeとかとか勉強しないと...


