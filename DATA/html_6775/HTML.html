<!DOCTYPE html><html><head><meta charset="utf-8" /><title>UIのシステムをUniRxで構築する - Qiita</title><meta content="width=device-width,initial-scale=1,shrink-to-fit=no,viewport-fit=cover" name="viewport" /><meta content="#55c500" name="theme-color" /><meta content="XWpkTG32-_C4joZoJ_UsmDUi-zaH-hcrjF6ZC_FoFbk" name="google-site-verification" /><meta content="telephone=no" name="format-detection" /><link rel="canonical" href="https://qiita.com/dsgarage/items/621bd3b31b78f33703eb" /><link href="/manifest.json" rel="manifest" /><link href="/opensearch.xml" rel="search" title="Qiita" type="application/opensearchdescription+xml" /><link as="script" href="https://www.googletagservices.com/tag/js/gpt.js" rel="preload" /><link href="https://securepubads.g.doubleclick.net" rel="preconnect" /><script async="" src="https://www.googletagservices.com/tag/js/gpt.js"></script><meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="W/CWQZOCQncTXjqMGNH+wzz9ykciN4VKflQQvX24SlTsVnFeWY7R5QvwQrCYvgU6eJ4HmqD0NXMcYBOA/bajxw==" /><link rel="shortcut icon" type="image/x-icon" href="https://cdn.qiita.com/assets/favicons/public/production-c620d3e403342b1022967ba5e3db1aaa.ico" /><link rel="apple-touch-icon" type="image/png" href="https://cdn.qiita.com/assets/favicons/public/apple-touch-icon-ec5ba42a24ae923f16825592efdc356f.png" /><link rel="stylesheet" media="all" href="https://cdn.qiita.com/assets/public/article-2eaa7dbedc42a8ea65c722cda46d0ebb.min.css" /><script src="https://cdn.qiita.com/assets/public/v3-article-bundle-63de2d91fef827269d3f6b958db2335b.min.js" defer="defer"></script><meta name="twitter:card" content="summary_large_image"><meta content="@Qiita" name="twitter:site" /><meta content="@dsgarage" name="twitter:creator" /><meta property="og:type" content="article"><meta property="og:title" content="UIのシステムをUniRxで構築する - Qiita"><meta property="og:image" content="https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0&amp;w=1200&amp;mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND1WVW5qZ2E3amdyZmpncm5qZzRiamc2RGpncEpWYm1sU2VPT0JwLWFuaS1ldmllT0JtZU9DaXcmdHh0LWNvbG9yPSUyMzMzMyZ0eHQtZm9udD1IaXJhZ2lubyUyMFNhbnMlMjBXNiZ0eHQtc2l6ZT01NCZ0eHQtY2xpcD1lbGxpcHNpcyZ0eHQtYWxpZ249Y2VudGVyJTJDbWlkZGxlJnM9N2ZmMzNmZTk3NGNjYWQxZDgwMTc3YjhjOWIwYWE0Yzk&amp;mark-align=center%2Cmiddle&amp;blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RR1J6WjJGeVlXZGwmdHh0LWNvbG9yPSUyMzMzMyZ0eHQtZm9udD1IaXJhZ2lubyUyMFNhbnMlMjBXNiZ0eHQtc2l6ZT00NSZ0eHQtYWxpZ249cmlnaHQlMkNib3R0b20mcz0zODVmNjljNmJhOWYwY2Y4ZDJmYjk3YmEyMTI4YmZhZg&amp;blend-align=center%2Cmiddle&amp;blend-mode=normal&amp;s=aef67668031437d207345687a03903c8"><meta property="og:description" content="理想のUIシステムとして、値が変わったことに追従してアイコンが変わる、色が変わるなどの振る舞いがとても便利で、一度実装してしうことで運用コストも下げられるシステムが理想でしょう。
そんな機能を持ったUIシステムを、UniRxを用いて実..."><meta content="https://qiita.com/dsgarage/items/621bd3b31b78f33703eb" property="og:url" /><meta content="Qiita" property="og:site_name" /><meta content="564524038" property="fb:admins" /><meta content="C#,Unity,UniRx" name="keywords" /><script>!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window, document,'script',
'https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '668972150489891');
fbq('track', 'PageView');</script><style data-emotion-css="17jxvjw 11t2ec1 1dvr2p8 18lkoru 1g4cku8 1iupg5d ijvq0v 15cocm3 12rp90f 115f4t 1b8uj5v 79elbk 16hhh7b fcbn8c 1gj7nt 154zy0m yikrym 1jqivyb 1ode1bp le4d8r 1hbd3g7 1nzh4zz 38fzdi helsa7 8qb8m4 2imjyh he5w1s 70qvj9 3ojehk 100alwu 1dtnjt5 10ougpm 1ay9vb9 m19uds cgzq40 1wa99t2 1l3zk9f 4czcte 1yzj1fm 1uv1qiv 109dbrr 5jpx49 mnxgyc 1vlpknv fsjkhv 1b17vb0 7i7f4d"}>.css-17jxvjw{display:grid;display:-ms-grid;grid-template-columns:80px minmax(0,1fr) 300px;-ms-grid-columns:80px minmax(0,1fr) 300px;grid-template-rows:minmax(270px,auto) 1fr;-ms-grid-rows:minmax(270px,auto) 1fr;max-width:1280px;margin-right:auto;margin-left:auto;padding-top:24px;padding-right:24px;padding-left:24px;}@media (max-width:1200px){.css-17jxvjw{padding-bottom:0;padding-left:0;padding-right:0;}}@media (max-width:992px){.css-17jxvjw{grid-template-columns:80px 452px 300px;-ms-grid-columns:80px 452px 300px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}}@media (max-width:770px){.css-17jxvjw{display:block;}}@media (max-width:480px){.css-17jxvjw{padding-top:0;}}.css-11t2ec1{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;z-index:5;position:-webkit-sticky;position:sticky;top:calc(56px + 24px + 16px + 32px - 16px);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:16px;width:80px;}.css-11t2ec1:after{content:'';display:table;}.css-11t2ec1:before{content:'';display:table;}@media (max-width:770px){.css-11t2ec1{display:none;}}.css-1dvr2p8{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-18lkoru{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;background-color:#FFFFFF;}.css-1g4cku8{display:inline-block;vertical-align:middle;height:20px;width:20px;fill:#55C500;}.css-1iupg5d{color:#55C500;cursor:pointer;font-size:14px;font-weight:bold;}.css-ijvq0v{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-15cocm3{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#FFFFFF;border:2px solid #6E6F70;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:2px 0px 0px;width:40px;}.css-12rp90f{display:inline-block;vertical-align:bottom;height:17.77777777777778px;width:16px;fill:#6E6F70;}.css-115f4t{color:#6E6F70;font-size:14px;font-weight:bold;}.css-1b8uj5v{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;margin-bottom:16px;padding:0;}.css-79elbk{position:relative;}.css-16hhh7b{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;padding:0;}.css-fcbn8c{display:none;bottom:initial;left:initial;right:initial;top:initial;left:100%;top:calc(-8px - (14px * 1.8) - 16px - 4px);}.css-1gj7nt{color:rgba(0,0,0,0.6);font-size:14px;font-weight:bold;line-height:1.8;padding:8px 16px;}.css-154zy0m{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.87);cursor:pointer;font-size:16px;font-weight:normal;line-height:1.8;padding:4px 16px;}.css-154zy0m:hover{-webkit-text-decoration:none;text-decoration:none;background-color:#F2F2F2;}.css-yikrym{width:20px;}.css-1jqivyb{color:rgba(0,0,0,0.6);font-size:13px;}.css-1ode1bp{background-color:rgba(0,0,0,0.12);height:1px;width:100%;margin:8px 0;}.css-le4d8r{display:inline-block;vertical-align:middle;height:13px;width:13px;fill:rgba(0,0,0,0.6);}.css-1hbd3g7{height:250px;}.css-1nzh4zz{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:16px 32px;background-color:#FBE69E;color:rgba(0,0,0,0.87);line-height:1.5;font-weight:600;}@media (max-width:770px){.css-1nzh4zz{padding:16px;}}.css-38fzdi{color:#CA832A;margin-right:4px;}.css-helsa7{background-color:#FFFFFF;padding:32px;margin-bottom:24px;}@media (max-width:992px){.css-helsa7{margin:0 auto 40px;}}@media (max-width:480px){.css-helsa7{margin:0 0 40px;padding:32px 16px;}}.css-8qb8m4{margin-bottom:48px;}.css-2imjyh{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-he5w1s{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;width:100%;}@media (max-width:770px){.css-he5w1s{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}}.css-70qvj9{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.css-3ojehk{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;margin-right:4px;}.css-100alwu{display:inline-block;border-radius:50%;line-height:1;overflow:hidden;vertical-align:middle;}.css-1dtnjt5{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-10ougpm{color:rgba(0,0,0,0.87);font-size:14px;font-weight:600;line-height:1.8;margin-right:4px;text-wrap:break-word;word-break:break-all;}.css-1ay9vb9{margin-right:16px;}.css-m19uds{color:rgba(0,0,0,0.6);font-size:14px;line-height:1.8;}.css-cgzq40{color:rgba(0,0,0,0.87);font-size:32px;font-weight:bold;line-height:1.4;margin-top:8px;text-wrap:break-word;word-break:break-all;}.css-1wa99t2{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.6);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:8px;}.css-1l3zk9f{color:rgba(0,0,0,0.6);font-size:20px;margin-right:8px;}.css-4czcte{margin-right:4px;color:inherit;font-size:14px;line-height:1.8;}.css-4czcte:not(:last-child)::after{content:',';margin-right:4px;}.css-1yzj1fm{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:32px;}.css-1uv1qiv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-size:20px;height:32px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin-right:16px;outline:none;padding:0;width:32px;}.css-109dbrr{background-color:#F9F9F9;border-top:1px solid rgba(0,0,0,0.12);bottom:0;box-shadow:0px 1px 4px rgba(0,0,0,0.14);display:none;height:calc(env(safe-area-inset-bottom,0px) + 56px);-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding-bottom:env(safe-area-inset-bottom);position:-webkit-sticky;position:sticky;width:100%;z-index:2000;}@media (max-width:770px){.css-109dbrr{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}.css-5jpx49{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:space-evenly;-webkit-justify-content:space-evenly;-ms-flex-pack:space-evenly;justify-content:space-evenly;width:100%;}.css-mnxgyc{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1vlpknv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;margin-right:4px;background-color:#FFFFFF;}.css-fsjkhv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1b17vb0{color:#6E6F70;font-size:14px;font-weight:bold;margin-left:4px;}.css-7i7f4d{display:none;bottom:initial;left:initial;right:initial;top:initial;bottom:32px;right:0;}</style></head><body><div class="allWrapper"><div><div id="GlobalHeader-react-component-9d87bb8d-92c3-4869-be62-f1298b7777ec"><div class="st-Header"><div class="st-Header_container"><div class="st-Header_start"><a href="/" class="st-Header_logo"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 426.57 130"><circle cx="167.08" cy="21.4" r="12.28"></circle><path d="M250.81 29.66h23.48v18.9h-23.48z"></path><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z"></path><circle cx="216.33" cy="21.4" r="12.28"></circle></svg></a><div class="st-Header_communitySelector" tabindex="0"><span class="fa fa-caret-down"></span></div><div class="st-Header_dropdown"><div class="st-Header_dropdownHeading">Qiita Teams that are logged in</div><div class="st-Header_dropdownItemNote">You are not logged in to any team</div><hr class="st-Header_dropdownDivider st-Header_dropdownDivider-shrink"/><a href="https://teams-center.qiita.com/find_team" class="st-Header_dropdownItem"><span class="fa fa-fw fa-sign-in st-Header_dropdownItemIcon"></span><div>Log in to Qiita Team</div></a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Community</div><a href="/organizations" class="st-Header_dropdownItem">Organization</a><a href="/official-events/open" class="st-Header_dropdownItem">Event</a><a href="/advent-calendar" class="st-Header_dropdownItem">Advent Calendar</a><a href="https://qiitadon.com/" class="st-Header_dropdownItem" target="_blank">Qiitadon (β)</a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Service</div><a href="https://jobs.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Jobs</a><a href="https://zine.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Zine</a><a href="https://blog.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Blog</a></div><form class="st-Header_search" action="/search" method="get"><span class="fa fa-search st-Header_searchIcon"></span><input type="search" class="st-Header_searchInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form><form class="st-Header_searchModal" action="/search" method="get"><input type="text" class="st-Header_searchModalInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form></div><div class="st-Header_end"><div class="st-Header_searchButton"><span class="fa fa-search"></span></div><a class="st-Header_signupButton" href="/signup?redirect_to=%2Fdsgarage%2Fitems%2F621bd3b31b78f33703eb">Signup</a><a class="st-Header_loginLink" href="/login?redirect_to=%2Fdsgarage%2Fitems%2F621bd3b31b78f33703eb">Login</a></div><div class="st-Header_overlay"></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="GlobalHeader" data-dom-id="GlobalHeader-react-component-9d87bb8d-92c3-4869-be62-f1298b7777ec">{"unreadNotificationsCount":null,"realms":[{"humanName":"Qiita","isCurrentRealm":true,"isQiita":true,"isQiitaTeam":false,"loggedInUser":null,"teamId":null,"url":"https://qiita.com/"}],"teamFindUrl":"https://teams-center.qiita.com/find_team","isTeamOnlyUser":null,"currentUser":null}</script>
      
</div><div class="st-HeaderAlert st-HeaderAlert-warning"><div class="st-HeaderAlert_body"></div></div><script type="application/ld+json">{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"/","name":"Qiita"}},{"@type":"ListItem","position":2,"item":{"@id":"/tags/csharp","name":"C#"}}]}</script><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","datePublished":"2016-12-15T10:48:51.000+09:00","dateModified":"2017-09-29T00:05:44.000+09:00","headline":"UIのシステムをUniRxで構築する","image":"https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0\u0026w=1200\u0026mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND1WVW5qZ2E3amdyZmpncm5qZzRiamc2RGpncEpWYm1sU2VPT0JwLWFuaS1ldmllT0JtZU9DaXcmdHh0LWNvbG9yPSUyMzMzMyZ0eHQtZm9udD1IaXJhZ2lubyUyMFNhbnMlMjBXNiZ0eHQtc2l6ZT01NCZ0eHQtY2xpcD1lbGxpcHNpcyZ0eHQtYWxpZ249Y2VudGVyJTJDbWlkZGxlJnM9N2ZmMzNmZTk3NGNjYWQxZDgwMTc3YjhjOWIwYWE0Yzk\u0026mark-align=center%2Cmiddle\u0026blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RR1J6WjJGeVlXZGwmdHh0LWNvbG9yPSUyMzMzMyZ0eHQtZm9udD1IaXJhZ2lubyUyMFNhbnMlMjBXNiZ0eHQtc2l6ZT00NSZ0eHQtYWxpZ249cmlnaHQlMkNib3R0b20mcz0zODVmNjljNmJhOWYwY2Y4ZDJmYjk3YmEyMTI4YmZhZg\u0026blend-align=center%2Cmiddle\u0026blend-mode=normal\u0026s=aef67668031437d207345687a03903c8","mainEntityOfPage":"https://qiita.com/dsgarage/items/621bd3b31b78f33703eb","author":{"@type":"Person","address":"神奈川県","email":null,"identifier":"dsgarage","name":"dsgarage","image":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F50702%2Fprofile-images%2F1473692194?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=60dba3cd54774f612c53805b5444a544","url":"https://qiita.com/dsgarage","description":"UnityとArduinoをこよなく愛するドラマーです。\r\n","memberOf":[{"@type":"Organization","address":"オンライン@Slack","legalName":"Unityゲーム開発者ギルド","image":"https://s3-ap-northeast-1.amazonaws.com/qiita-organization-image/5e3ba3bb442371003e6b5d4618ef627b9b478357/original.jpg?1570216541","logo":"https://s3-ap-northeast-1.amazonaws.com/qiita-organization-image/f7eb993765ddcdb2c5e6890556c43ea3de8fbfb7/original.jpg?1570215690","identifier":"unity-game-dev-guild","description":"趣味・仕事問わずUnityでゲームを作っている開発者のみで構成されるオンラインコミュニティです。Unityでゲームを開発・運用するにあたって必要なあらゆる知見を共有することを目的とします。"}]},"publisher":{"@type":"Organization","name":"Qiita","logo":{"@type":"ImageObject","url":"//cdn.qiita.com/assets/public/qiita-logo-c39ded593afa388e2e1ba435b110554e.png"}}}</script><style type="text/css">.wb-CampaignLink {
  background-color: #333333;
  width: 100%;
}

.wb-CampaignLink_container {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  max-width: 1100px;
  margin: 0 auto;
  font-size: 13px;
  padding: 0.8em;
}
.wb-CampaignLink_container > a {
  color: #fff;
}

.wb-CampaignLink_container > a:hover {
  text-decoration: underline;
}</style><div class="wb-CampaignLink"><div class="wb-CampaignLink_container"><a target="_blank" id="header_text_message_1" href="https://zine.qiita.com/interview/202107-hitachi-3/?utm_source=qiita&amp;utm_medium=header-banner">日立の研究者が、2年間ドイツ人工知能研究センターで学んだこと</a><a target="_blank" id="header_text_message_2" href="https://zine.qiita.com/interview/202107-hitachi-3/?utm_source=qiita&amp;utm_medium=header-banner">詳しくはこちら</a></div><script>td.trackEvent(
  'front_events',
  {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"dsgarage","type":"items","id":"621bd3b31b78f33703eb"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Show","data":{"message":"日立の研究者が、2年間ドイツ人工知能研究センターで学んだこと","url":"https://zine.qiita.com/interview/202107-hitachi-3/?utm_source=qiita\u0026utm_medium=header-banner","sub_message":"詳しくはこちら"}}
)</script><script>document.getElementById('header_text_message_1').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"dsgarage","type":"items","id":"621bd3b31b78f33703eb"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":0,"pos_id":"header_text_message_1","message":"日立の研究者が、2年間ドイツ人工知能研究センターで学んだこと","url":"https://zine.qiita.com/interview/202107-hitachi-3/?utm_source=qiita\u0026utm_medium=header-banner","sub_message":"詳しくはこちら"}}
  )
})</script><script>document.getElementById('header_text_message_2').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"dsgarage","type":"items","id":"621bd3b31b78f33703eb"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":0,"pos_id":"header_text_message_2","message":"日立の研究者が、2年間ドイツ人工知能研究センターで学んだこと","url":"https://zine.qiita.com/interview/202107-hitachi-3/?utm_source=qiita\u0026utm_medium=header-banner","sub_message":"詳しくはこちら"}}
  )
})</script></div><script type="application/json" id="js-react-on-rails-context">{"railsEnv":"production","inMailer":false,"i18nLocale":"en","i18nDefaultLocale":"en","href":"https://qiita.com/dsgarage/items/621bd3b31b78f33703eb","location":"/dsgarage/items/621bd3b31b78f33703eb","scheme":"https","host":"qiita.com","port":null,"pathname":"/dsgarage/items/621bd3b31b78f33703eb","search":null,"httpAcceptLanguage":null,"actionPath":"public/items#show","settings":{"analyticsTrackingId":"UA-24675221-12","assetsMap":{},"csrfToken":"HGoWkhq8OLkaPhs6VOViKYppayO07AYj92/jHKJmthyrzPGN0LCrKwKQYwbUipnQzgqm/jYvthqVW+AhImhfjw==","locale":"en"},"currentUser":null,"isLoggedIn":false,"recaptchaSiteKey":"6LfNkiQTAAAAAM3UGnSquBy2akTITGNMO_QDxMw6","serverSide":false}</script>
<div id="PersonalArticlePage-react-component-27780432-df18-4c46-8d68-66fbcc587572"><div class="p-items_wrapper"><div class=" css-17jxvjw"><div class="css-11t2ec1"><div class="css-1dvr2p8"><button class=" css-18lkoru"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/dsgarage/items/621bd3b31b78f33703eb/likers" class="css-1iupg5d">58</a></div><div class="css-ijvq0v"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-115f4t">45</span></div><div class="css-1b8uj5v"><span class="fa fa-twitter"></span></div><div class="css-1b8uj5v"><span class="fa fa-facebook"></span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-fcbn8c"><div class="css-1gj7nt">Improve article</div><a href="/drafts/621bd3b31b78f33703eb/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/dsgarage/items/621bd3b31b78f33703eb/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/dsgarage/items/621bd3b31b78f33703eb/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/dsgarage/items/621bd3b31b78f33703eb/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/dsgarage/items/621bd3b31b78f33703eb.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div><div class="p-items_options"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_toc"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_main"><div class="css-1nzh4zz"><span class="fa fa-fw fa-warning css-38fzdi"></span><p>More than 3 years have passed since last update.</p></div><div class="css-helsa7"><div class="css-8qb8m4"><div class="css-2imjyh"><div class="css-he5w1s"><div class="css-70qvj9"><div class="css-3ojehk"><a href="/dsgarage"><img class="css-100alwu eyfquo10" src="https://qiita-image-store.s3.amazonaws.com/0/50702/profile-images/1473692194" width="24" height="24" loading="lazy"/></a></div><div class="css-1dtnjt5"><a href="/dsgarage" class="css-10ougpm">@<!-- -->dsgarage</a><div class="css-1ay9vb9"><span><meta content="2016-12-15T01:48:51Z"/><time dateTime="2017-09-28T15:05:44Z" class="css-m19uds">updated at 2017-09-28</time></span></div></div></div></div></div><h1 class="css-cgzq40">UIのシステムをUniRxで構築する</h1><div class="css-1wa99t2"><span class="fa fa-tags mr-1of2 css-1l3zk9f" aria-hidden="true"></span><a href="/tags/csharp" class="css-4czcte">C#</a><a href="/tags/unity" class="css-4czcte">Unity</a><a href="/tags/unirx" class="css-4czcte">UniRx</a></div></div><section class="it-MdContent"><div id="personal-public-article-body"><div><p>理想のUIシステムとして、値が変わったことに追従してアイコンが変わる、色が変わるなどの振る舞いがとても便利で、一度実装してしうことで運用コストも下げられるシステムが理想でしょう。<br>
そんな機能を持ったUIシステムを、UniRxを用いて実装できたらと思います。</p>

<p>UniRxの解説を挟みたいところですが、長くなるので簡単な説明だけさせていただきます。</p>

<h3>
<span id="unirxとは" class="fragment"></span><a href="#unirx%E3%81%A8%E3%81%AF"><i class="fa fa-link"></i></a>UniRxとは？</h3>

<p>UniRxとは、neueccさんが作成されている、Unityに最適化された、Reactive Extensionsのライブラリです。<br>
AssetStore、GitHubなどで配布されています。</p>

<p>入門編としては、こちらのとりスープさんの記事が分かりやすくてオススメです。<br>
<a href="http://qiita.com/toRisouP/items/2f1643e344c741dd94f8" class="autolink" id="reference-d1072a5d7f382d8955e5">http://qiita.com/toRisouP/items/2f1643e344c741dd94f8</a></p>

<p>今回、このUniRxの利点である、変化があった時の通知を用いて、UIの管理を任せたいと思います。</p>

<h2>
<span id="reactiveproperty" class="fragment"></span><a href="#reactiveproperty"><i class="fa fa-link"></i></a>ReactiveProperty</h2>

<p>UniRxには、標準で <code>IntReactiveProperty</code>、<code>BoolReactiveProperty</code>、<code>Vector2ReactiveProperty</code>などが用意されており、それぞれ値に変化があると<code>OnNext()</code>が発行されます。</p>

<p>これはとても便利な機能で、例えば値を渡した時に、同じ値であればスルー、違う値であればOnNext()が発生するというとても勝手の良いものになります。</p>

<p>今回は、OnNext()が発生したら、画像がenumのメンバーに応じて差し代わるような仕組みを作ってみたいと思います。</p>

<p><a href="https://camo.qiitausercontent.com/091f06781409723aeaab6caf3e4a0583619c62d3/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f35303730322f38316435323130652d383438642d363966622d616164642d6535373466643939376465352e676966" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F50702%2F81d5210e-848d-69fb-aadd-e574fd997de5.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=2e3c1bcc82acc0a169140255ee6e1d4d" alt="ReactibeProperty.gif" title="ReactibeProperty.gif" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/50702/81d5210e-848d-69fb-aadd-e574fd997de5.gif" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F50702%2F81d5210e-848d-69fb-aadd-e574fd997de5.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=bb4366709f6f889034908da9bd0e296a 1x" loading="lazy"></a></p>

<p>このemunがReactivePropertyとなっており、メンバーが変化すると合わせて画像も変化するようになっています。</p>

<p>合わせて、enumを用いた便利機能も採用していますので、そちらも合わせてお役立ていただけたらと思います。</p>

<p>本来であれば「値の変化」だけでも判断するためのコード数はそれなりのものになります。それが、変数の定義方法を変えるだけで軽量化できるのであれば、使わない手はないでしょう。</p>

<p>enumをReactivePropertyとして使用する方法は別途説明しますが、まずは基本的なコードをここで紹介したいと思います。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>    BoolReactiveProperty bool = new BoolReactiveProperty(false);

    void start(){
        bool.Subscribe(Debug("Bool:" + bool.Value));
    }

    public void SetBool(bool setbool){
        bool.Value = setbool;
    }

</code></pre></div></div>

<p>と言った具合になります。</p>

<p>基本的に値を渡す時は<code>.Value</code>に値を渡す必要があります。<br>
これはよくハマる部分です。</p>

<p>渡した値に相違があった場合、OnNext()を発行してくれます。<br>
この場合だと、trueの値が入っていて、falseが渡されるとOnNextが発行されます。</p>

<h2>
<span id="カスタムreactivepropertyを作成する" class="fragment"></span><a href="#%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%A0reactiveproperty%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>カスタムReactivePropertyを作成する</h2>

<p>それではカスタムReactivePropertyを作成しましょう。<br>
今回は、自身で定義した<code>enum</code>で使いたいと思います。</p>

<p>まず、使用するenumを定義します。<br>
いきなりではありますが、このenumの値はのちにロードするリソースのファイル名と同じになるようにします。<br>
Unityでは、リソースをロードするときにstring型で指定します。<br>
その時のタイポを防ぐ、予防のためにenumを文字列に変更して使用するためです。</p>

<p>それでは<code>TabIconReactivePropertyクラス</code>を作成しましょう。</p>

<p>ここでは特別設定することが設定するenumを指定して、ReactivePropertyを継承する事ぐらいになります。<br>
あとはコンストラクタで引数と自身を継承するための設定を行いましょう。<br>
<code>base</code>を継承しているコンストラクタは、引数を使用してインスタンスする場合用です。</p>

<div class="code-frame" data-lang="c#">
<div class="code-lang"><span class="bold">TabIconReactiveProperty.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">using</span> <span class="nn">System.Collections</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UniRx</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UnityEngine</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">MVRP.UI</span>
<span class="p">{</span>

<span class="k">public</span> <span class="k">enum</span> <span class="n">TabIcon</span>
<span class="p">{</span>
    <span class="n">Blue</span><span class="p">,</span>
    <span class="n">Green</span><span class="p">,</span>
    <span class="n">Red</span><span class="p">,</span>
    <span class="n">Yellow</span>
<span class="p">}</span>


    <span class="p">[</span><span class="n">System</span><span class="p">.</span><span class="n">Serializable</span><span class="p">]</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">TabIconReactiveProperty</span> <span class="p">:</span> <span class="n">ReactiveProperty</span><span class="p">&lt;</span><span class="n">TabIcon</span><span class="p">&gt;</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="nf">TabIconReactiveProperty</span> <span class="p">(){}</span>
        <span class="k">public</span> <span class="nf">TabIconReactiveProperty</span> <span class="p">(</span><span class="n">TabIcon</span> <span class="n">initialValue</span><span class="p">)</span> <span class="p">:</span> <span class="k">base</span> <span class="p">(</span><span class="n">initialValue</span><span class="p">)</span> <span class="p">{}</span>
    <span class="p">}</span>
<span class="p">}</span>


</code></pre></div>
</div>

<h2>
<span id="カスタムreactivepropertyをインスペクターで目視できるように" class="fragment"></span><a href="#%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%A0reactiveproperty%E3%82%92%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%9A%E3%82%AF%E3%82%BF%E3%83%BC%E3%81%A7%E7%9B%AE%E8%A6%96%E3%81%A7%E3%81%8D%E3%82%8B%E3%82%88%E3%81%86%E3%81%AB"><i class="fa fa-link"></i></a>カスタムReactivePropertyをインスペクターで目視できるように</h2>

<p>カスタムReactivePropertyを使用する際の注意点として、ジェネリック型のクラスはインスペクタで表示できないのがUnityの仕組みとなっています。<br>
そこで、以下のクラスをEditorフォルダに設置し、カスタムReactivePropertyを使用した際に <code>[SerializeField]</code>の属性を付けてあげましょう。</p>

<p>このクラスは一つ用意して、カスタムReactivePropertyを増やした都度クラスに属性を増やしていく運用をしていきましょう。</p>

<div class="code-frame" data-lang="c#">
<div class="code-lang"><span class="bold">ExtendInspectorDisplayDrawer.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">using</span> <span class="nn">System.Collections</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UniRx</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UnityEngine</span><span class="p">;</span>


<span class="k">namespace</span> <span class="nn">MVRP.UI</span>
<span class="p">{</span>
    <span class="p">[</span><span class="n">UnityEditor</span><span class="p">.</span><span class="nf">CustomPropertyDrawer</span><span class="p">(</span><span class="k">typeof</span><span class="p">(</span><span class="n">TabIconReactiveProperty</span><span class="p">))]</span>
    <span class="c1">/// ここに随時追加</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">ExtendInspectorDisplayDrawer</span> <span class="p">:</span> <span class="n">InspectorDisplayDrawer</span>
    <span class="p">{</span>
    <span class="p">}</span>
<span class="p">}</span>


</code></pre></div>
</div>

<h2>
<span id="管理をenumで一元化する" class="fragment"></span><a href="#%E7%AE%A1%E7%90%86%E3%82%92enum%E3%81%A7%E4%B8%80%E5%85%83%E5%8C%96%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>管理をenumで一元化する</h2>

<p>ここで、今回のカスタムReactivePropertyを運用するにあたって、enumの便利な使い方、効率の良い実装に向けた機能の紹介をします。</p>

<p>Unityで <code>string</code>を引数として使用するAPIの運用に関して、タイポミスなどを防ぐための予防策として、enumを使うことを推奨します。<br>
項目としてある程度決まった仕様(ゲーム内での属性、攻撃の種類など)をenumの構造体として運用することで、正しく設定されていないものに関してエラーを返す仕組みが働くよう実装が可能になります。</p>

<p>Enum.GetNames<br>
<a href="https://msdn.microsoft.com/ja-jp/library/system.enum.getnames(v=vs.110).aspx" class="autolink" rel="nofollow noopener" target="_blank">https://msdn.microsoft.com/ja-jp/library/system.enum.getnames(v=vs.110).aspx</a><br>
→構造体の名前を取得します</p>

<p>Enum.ToObject<br>
<a href="https://msdn.microsoft.com/ja-jp/library/system.enum.toobject(v=vs.110).aspx" class="autolink" rel="nofollow noopener" target="_blank">https://msdn.microsoft.com/ja-jp/library/system.enum.toobject(v=vs.110).aspx</a><br>
→整数からメンバー値を取得します</p>

<p>文字列としてメンバーを取り出すのであれば、<code>enum.nanika.ToString()</code>、構造体のメンバー数を取得するなら <code>Enum.GetNames (typeof(enum)).Length</code>、整数でメンバーを呼び出したいなら<code>Enum.ToObject (typeof(enum), i)</code>が有用です。</p>

<p>文字列や、マジックナンバーで実装が進んでしまうと、変更があった際の対応、タイポのチェックなどが運用フェーズになってしまうと追いつかないため、ある程度ルールで縛るといった実装が効果的になる場合があります。</p>

<h2>
<span id="presenterの実装" class="fragment"></span><a href="#presenter%E3%81%AE%E5%AE%9F%E8%A3%85"><i class="fa fa-link"></i></a>Presenterの実装</h2>

<p>さて、いよいよPresenterの実装になります。<br>
今回は、巷で人気が出てきたMV(R)Pという設計をイメージした仕様で実装を進めたいと思います。<br>
本来はこの<code>Presenter</code>と呼ばれるクラス(MV(R)PのP)は、軽い実装で作られるもので、ViewとModelをしっかりと作りこむのが基本となっています。<br>
細かい説明は省きますが、今後発展的な実装を見越してPresenterとしてクラスを定義したいと思います。</p>

<p>まずは必要なUIパーツ(View)の紐付けと、リソースのロード。<br>
次にReactiveProperty(Model)の設定と、外部から今の値を確認できる変数を設定してあげましょう。</p>

<p>今回実装するクラスは、タブのアイコンをenumのメンバーから変更しようと言った試みです。<br>
参照先のImageクラス(View)とリソースをキャッシュするためのTexture2D変数を準備します。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>    [SerializeField] Image icomImage;
    Dictionary&lt;TabIcon, Texture2D&gt; iconSprite = new Dictionary&lt;TabIcon, Texture2D&gt;();
</code></pre></div></div>

<p>Dictionatyクラスを使用して、enumのメンバーをKeyに割り当てたいと思います。<br>
enumのKeyに対してTexturをキャッシュします。</p>

<p>次に、ReactivePropertyの宣言と、外部から読み取れる読み取り専用のReactivePropertyを準備します。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>    [SerializeField] TabIconReactiveProperty iconSpriteStatus = new TabIconReactiveProperty (TabIcon.Red);
    public IReadOnlyReactiveProperty&lt;TabIcon&gt; IconSpriteStatus { get { return iconSpriteStatus; } }
</code></pre></div></div>

<p>IReadOnlyReactivePropertyはとても便利なもので、ここの参照からSubscribeさせることが可能となります。<br>
中のenumのメンバーを確認したい場合は、<code>IconSpriteStatus.Value</code>にて確認が可能です。</p>

<p>さて、ここからStartのイベント(メソッド)から、必要な準備と、ストリームの設定を行いたいと思います。<br>
まずは、差し替えるための画像をキャッシュしましょう。</p>

<p>enumに設定されているメンバーの数分画像をロードし、Texture2Dの変数にキャッシュします。<br>
一点メンバー名の設定のコツとして、ファイル名をenumのメンバー名にするとロード時のテキストデータに変換して使えます。<br>
ここではフォルダのパスを直接書いてしまっていますが、本来の実装方法として望ましくないことを付け加えておきます。<br>
この話の文脈からすると、フォルダのパスもenumとして定義するべきだからです。</p>

<p>呼び出し方法としては、まずメンバー数を取得し、ループの回数として設定します。<br>
そこから初期化したint値を用いて<code>Enum.ToObject</code>からenumのメンバーを設定します。<br>
その設定したメンバー値を使って、<code>Dectionary</code>変数に、KeyとTexture2DをAddします。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>for (int i = 0; i &lt; Enum.GetNames (typeof(TabIcon)).Length; i++) {
                TabIcon iconFileName = (TabIcon)Enum.ToObject (typeof(TabIcon), i);
                iconSprite.Add (iconFileName, (Texture2D)Resources.Load ("Textures/UI/" + iconFileName.ToString ()));
            }
</code></pre></div></div>

<p>画像のキャッシュが完了したら、いよいよReactivePropertyを用いたストリームを設定します。<br>
ここでは特に難しいオペーレーターを使用せず、値が変わったらSubscribeするだけの単純な設定にしたいと思います。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>this.iconSpriteStatus.Subscribe (
                x =&gt; icomImage.sprite 
                    = Sprite.Create(
                    iconSprite[x], 
                    new Rect(0, 0, iconSprite[x].width,
                    iconSprite[x].height), 
                    Vector2.zero
                )
            );
</code></pre></div></div>

<p>カスタムReactivePropertyで、enumのメンバーが変更されたら、その値を用いてキャッシュされているTexture2Dをロードします。<br>
今回は、Imageクラスに<code>Sprite</code>をロードしなくてはなりません。<br>
しかしキャッシュされているのはTexture2Dになりますので、コンバートの作業が必要になります。<br>
そこで、SpriteクラスのCreateメソッドを用いて、Texture2Dの素材からSpriteを生成し、渡してあげましょう。</p>

<p>以上で基本的な実装は終了です。<br>
最後に、enumのメンバーを切り替えるためのメソッドを準備したいと思います。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>    public void SetTabButtonIcon(TabIcon iconName){
        iconSpriteStatus.Value = iconName;
    }
</code></pre></div></div>

<p>重ねて注意すべき点ですが、ReactivePropertyに値を渡す際には、必ず<code>Value</code>に渡してあげましょう。</p>

<p>以上で全てのソースコードになります。<br>
それでは、namespaceの設定も含めた、全てのソースコードになります。</p>

<div class="code-frame" data-lang="c#">
<div class="code-lang"><span class="bold">TabButtonPresemter.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UniRx</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UnityEngine</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UnityEngine.UI</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">MVRP.UI</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">TabButtonPresenter</span> <span class="p">:</span> <span class="n">MonoBehaviour</span>
    <span class="p">{</span>
        <span class="p">[</span><span class="n">SerializeField</span><span class="p">]</span> <span class="n">Image</span> <span class="n">icomImage</span><span class="p">;</span>
        <span class="n">Dictionary</span><span class="p">&lt;</span><span class="n">TabIcon</span><span class="p">,</span> <span class="n">Texture2D</span><span class="p">&gt;</span> <span class="n">iconSprite</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Dictionary</span><span class="p">&lt;</span><span class="n">TabIcon</span><span class="p">,</span> <span class="n">Texture2D</span><span class="p">&gt;();</span>

        <span class="p">[</span><span class="n">SerializeField</span><span class="p">]</span> <span class="n">TabIconReactiveProperty</span> <span class="n">iconSpriteStatus</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">TabIconReactiveProperty</span> <span class="p">(</span><span class="n">TabIcon</span><span class="p">.</span><span class="n">Red</span><span class="p">);</span>
        <span class="k">public</span> <span class="n">IReadOnlyReactiveProperty</span><span class="p">&lt;</span><span class="n">TabIcon</span><span class="p">&gt;</span> <span class="n">IconSpriteStatus</span> <span class="p">{</span> <span class="k">get</span> <span class="p">{</span> <span class="k">return</span> <span class="n">iconSpriteStatus</span><span class="p">;</span> <span class="p">}</span> <span class="p">}</span>
        <span class="k">void</span> <span class="nf">Start</span> <span class="p">()</span>
        <span class="p">{</span>
            <span class="n">icomImage</span> <span class="p">=</span> <span class="n">gameObject</span><span class="p">.</span><span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">Image</span><span class="p">&gt;();</span>
            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">Enum</span><span class="p">.</span><span class="nf">GetNames</span> <span class="p">(</span><span class="k">typeof</span><span class="p">(</span><span class="n">TabIcon</span><span class="p">)).</span><span class="n">Length</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span> <span class="p">{</span>
                <span class="n">TabIcon</span> <span class="n">iconFileName</span> <span class="p">=</span> <span class="p">(</span><span class="n">TabIcon</span><span class="p">)</span><span class="n">Enum</span><span class="p">.</span><span class="nf">ToObject</span> <span class="p">(</span><span class="k">typeof</span><span class="p">(</span><span class="n">TabIcon</span><span class="p">),</span> <span class="n">i</span><span class="p">);</span>
                <span class="n">iconSprite</span><span class="p">.</span><span class="nf">Add</span> <span class="p">(</span><span class="n">iconFileName</span><span class="p">,</span> <span class="p">(</span><span class="n">Texture2D</span><span class="p">)</span><span class="n">Resources</span><span class="p">.</span><span class="nf">Load</span> <span class="p">(</span><span class="s">"Textures/UI/"</span> <span class="p">+</span> <span class="n">iconFileName</span><span class="p">.</span><span class="nf">ToString</span> <span class="p">()));</span>
            <span class="p">}</span>

            <span class="k">this</span><span class="p">.</span><span class="n">iconSpriteStatus</span><span class="p">.</span><span class="nf">Subscribe</span> <span class="p">(</span>
                <span class="n">x</span> <span class="p">=&gt;</span> <span class="n">icomImage</span><span class="p">.</span><span class="n">sprite</span> <span class="p">=</span> <span class="n">Sprite</span><span class="p">.</span><span class="nf">Create</span><span class="p">(</span><span class="n">iconSprite</span><span class="p">[</span><span class="n">x</span><span class="p">],</span> <span class="k">new</span> <span class="nf">Rect</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="n">iconSprite</span><span class="p">[</span><span class="n">x</span><span class="p">].</span><span class="n">width</span><span class="p">,</span> <span class="n">iconSprite</span><span class="p">[</span><span class="n">x</span><span class="p">].</span><span class="n">height</span><span class="p">),</span> <span class="n">Vector2</span><span class="p">.</span><span class="n">zero</span><span class="p">)</span>
            <span class="p">);</span>
        <span class="p">}</span>

        <span class="k">public</span> <span class="k">void</span> <span class="nf">SetTabButtonIcon</span><span class="p">(</span><span class="n">TabIcon</span> <span class="n">iconName</span><span class="p">){</span>
            <span class="n">iconSpriteStatus</span><span class="p">.</span><span class="n">Value</span> <span class="p">=</span> <span class="n">iconName</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>


</code></pre></div>
</div>

<p>出来上がったクラスを、差し替え対象のImageObjectにAddして、再生ボタンを押してみましょう。<br>
インスペクターからenumのメンバーを変更することができるので動作確認をし、問題がないようであれば<code>SetTabButtonIcon(TabIcon iconName)</code>から変更してみましょう。<br>
正常に動作しなかった場合は、まず<code>IconImage</code>が<code>None</code>になっていない事を確認しましょう。</p>

<p><a href="https://camo.qiitausercontent.com/e36812089ac07765f6816b368a25c64e3e64ad18/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f35303730322f64386332383835612d316261372d336434662d633664342d3436373435333539313237302e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F50702%2Fd8c2885a-1ba7-3d4f-c6d4-467453591270.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=6bf45fae745129e3a184e26ab55acd5c" alt="Unity_5_5_0f3__64bit__-_Untitled_-_UniRx_-_iPhone__iPod_Touch_and_iPad__OpenGL_4_1_.png" title="Unity_5_5_0f3__64bit__-_Untitled_-_UniRx_-_iPhone__iPod_Touch_and_iPad__OpenGL_4_1_.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/50702/d8c2885a-1ba7-3d4f-c6d4-467453591270.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F50702%2Fd8c2885a-1ba7-3d4f-c6d4-467453591270.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=045588e38fc95354f61e1f08093324b5 1x" loading="lazy"></a></p>

<p>以上です。<br>
ありがとうございました。</p>
</div></div></section><div class="css-1yzj1fm"><div class="css-1uv1qiv"><span class="fa fa-twitter"></span></div><div class="css-1uv1qiv"><span class="fa fa-facebook"></span></div></div><div class="apm-Content"><div class="apm-Content_title">Why not register and get more from Qiita?</div><ol class="apm-Content_list"><li>We will deliver articles that match you<div class="description">By following users and tags, you can catch up information on technical fields that you are interested in as a whole</div></li><li>you can read useful information later efficiently<div class="description">By &quot;stocking&quot; the articles you like, you can search right away</div></li><div><a class="apm-Content_help" href="https://help.qiita.com/ja/articles/qiita-login-user" target="_blank"><i class="fa fa-fw fa-arrow-circle-right"></i>What you can do with signing up</a></div></ol><a href="/signup?callback_action=login_or_signup&amp;redirect_to=%2Fdsgarage%2Fitems%2F621bd3b31b78f33703eb&amp;realm=qiita" class="apm-Content_button apm-Content_button-signup">Sign up</a><a href="/login?callback_action=login_or_signup&amp;redirect_to=%2Fdsgarage%2Fitems%2F621bd3b31b78f33703eb&amp;realm=qiita" class="apm-Content_button apm-Content_button-signin">Login</a></div></div><div class="css-helsa7"></div></div></div></div><div class="css-109dbrr"><div class="css-5jpx49"><div class="css-mnxgyc"><button class=" css-1vlpknv"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/dsgarage/items/621bd3b31b78f33703eb/likers" class="css-1iupg5d">58</a></div><div class="css-fsjkhv"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-1b17vb0">45</span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-7i7f4d"><div class="css-1gj7nt">Improve article</div><a href="/drafts/621bd3b31b78f33703eb/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/dsgarage/items/621bd3b31b78f33703eb/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/dsgarage/items/621bd3b31b78f33703eb/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/dsgarage/items/621bd3b31b78f33703eb/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/dsgarage/items/621bd3b31b78f33703eb.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="PersonalArticlePage" data-dom-id="PersonalArticlePage-react-component-27780432-df18-4c46-8d68-66fbcc587572">{"authorAnalyticsTrackingId":"UA-60145682-1","organizationAnalyticsTrackingId":null}</script>
      
<footer id="globalFooter" class="st-Footer"><div class="st-Footer_container"><div class="st-Footer_start"><div class="st-Footer_logo"><svg viewbox="0 0 426.57 130" xmlns="http://www.w3.org/2000/svg"><circle cx="167.08" cy="21.4" r="12.28" /><path d="M250.81 29.66h23.48v18.9h-23.48z" /><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z" /><circle cx="216.33" cy="21.4" r="12.28" /></svg></div><div class="st-Footer_catchcopy">How developers code is here.</div><div class="st-Footer_socials"><a class="fa fa-twitter" href="https://twitter.com/qiita"></a><a class="fa fa-facebook-square" href="https://www.facebook.com/qiita/"></a></div></div><div class="st-Footer_end"><div class="st-Footer_qiita"><div class="st-Footer_label">Qiita</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="/about">About</a><a href="/terms">Terms</a><a href="/privacy">Privacy</a><a target="_blank" href="http://help.qiita.com/ja/articles/qiita-community-guideline">Guideline</a><a target="_blank" href="https://help.qiita.com/ja/articles/others-brand-guideline">Design Guideline</a></div><div class="st-Footer_column"><a href="/release-notes">Release</a><a href="/api/v2/docs">API</a><a href="/feedback/new">ご意見</a><a href="https://help.qiita.com">Help</a><a target="_blank" href="https://qiita.com/ads?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Advertisement</a></div></div></div><div class="st-Footer_increments"><div class="st-Footer_label">Increments</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="https://increments.co.jp/company/">About</a><a href="https://increments.co.jp/jobs/">採用情報</a><a href="https://blog.qiita.com">Blog</a></div><div class="st-Footer_column"><a href="https://teams.qiita.com/">Qiita Team</a><a href="https://jobs.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Jobs</a><a href="https://zine.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Zine</a></div></div></div></div></div><div class="st-Footer_copyright">© 2011-2021 Increments Inc.</div></footer><div id="Snackbar-react-component-5038d12f-b57a-472d-89da-2830f58876ca"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="Snackbar" data-dom-id="Snackbar-react-component-5038d12f-b57a-472d-89da-2830f58876ca">{}</script>
      
<div id="LoginModal-react-component-c29428cc-bb69-41d3-bd59-18ba2ee0db08"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="LoginModal" data-dom-id="LoginModal-react-component-c29428cc-bb69-41d3-bd59-18ba2ee0db08">{}</script>
      
<div id="StockModal-react-component-7eb8ea46-61ac-4bf8-817f-b55646c20e5a"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="StockModal" data-dom-id="StockModal-react-component-7eb8ea46-61ac-4bf8-817f-b55646c20e5a">{}</script>
      
</div><div id="dataContainer" style="display: none;" data-config="{&quot;actionPath&quot;:&quot;public/items#show&quot;,&quot;settings&quot;:{&quot;analyticsTrackingId&quot;:&quot;UA-24675221-12&quot;,&quot;assetsMap&quot;:{},&quot;csrfToken&quot;:&quot;O8iPOIGaXZtT5DGRi4cy9KJUdlYLpS1Egbth80Y/dVmMbmgnS5bOCUtKSa0L6MkN5je7i4lmnX3jj2LOxjGcyg==&quot;,&quot;locale&quot;:&quot;en&quot;},&quot;currentUser&quot;:null}" /></body></html><script type="application/json" data-js-react-on-rails-store="AppStoreWithReactOnRails">{"snackbar":{"type":"","body":"","isActive":false},"article":{"article":{"body":"\u003cp\u003e理想のUIシステムとして、値が変わったことに追従してアイコンが変わる、色が変わるなどの振る舞いがとても便利で、一度実装してしうことで運用コストも下げられるシステムが理想でしょう。\u003cbr\u003e\nそんな機能を持ったUIシステムを、UniRxを用いて実装できたらと思います。\u003c/p\u003e\n\n\u003cp\u003eUniRxの解説を挟みたいところですが、長くなるので簡単な説明だけさせていただきます。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"unirxとは\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#unirx%E3%81%A8%E3%81%AF\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eUniRxとは？\u003c/h3\u003e\n\n\u003cp\u003eUniRxとは、neueccさんが作成されている、Unityに最適化された、Reactive Extensionsのライブラリです。\u003cbr\u003e\nAssetStore、GitHubなどで配布されています。\u003c/p\u003e\n\n\u003cp\u003e入門編としては、こちらのとりスープさんの記事が分かりやすくてオススメです。\u003cbr\u003e\n\u003ca href=\"http://qiita.com/toRisouP/items/2f1643e344c741dd94f8\" class=\"autolink\" id=\"reference-d1072a5d7f382d8955e5\"\u003ehttp://qiita.com/toRisouP/items/2f1643e344c741dd94f8\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e今回、このUniRxの利点である、変化があった時の通知を用いて、UIの管理を任せたいと思います。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"reactiveproperty\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#reactiveproperty\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eReactiveProperty\u003c/h2\u003e\n\n\u003cp\u003eUniRxには、標準で \u003ccode\u003eIntReactiveProperty\u003c/code\u003e、\u003ccode\u003eBoolReactiveProperty\u003c/code\u003e、\u003ccode\u003eVector2ReactiveProperty\u003c/code\u003eなどが用意されており、それぞれ値に変化があると\u003ccode\u003eOnNext()\u003c/code\u003eが発行されます。\u003c/p\u003e\n\n\u003cp\u003eこれはとても便利な機能で、例えば値を渡した時に、同じ値であればスルー、違う値であればOnNext()が発生するというとても勝手の良いものになります。\u003c/p\u003e\n\n\u003cp\u003e今回は、OnNext()が発生したら、画像がenumのメンバーに応じて差し代わるような仕組みを作ってみたいと思います。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/091f06781409723aeaab6caf3e4a0583619c62d3/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f35303730322f38316435323130652d383438642d363966622d616164642d6535373466643939376465352e676966\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F50702%2F81d5210e-848d-69fb-aadd-e574fd997de5.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=2e3c1bcc82acc0a169140255ee6e1d4d\" alt=\"ReactibeProperty.gif\" title=\"ReactibeProperty.gif\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/50702/81d5210e-848d-69fb-aadd-e574fd997de5.gif\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F50702%2F81d5210e-848d-69fb-aadd-e574fd997de5.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=bb4366709f6f889034908da9bd0e296a 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eこのemunがReactivePropertyとなっており、メンバーが変化すると合わせて画像も変化するようになっています。\u003c/p\u003e\n\n\u003cp\u003e合わせて、enumを用いた便利機能も採用していますので、そちらも合わせてお役立ていただけたらと思います。\u003c/p\u003e\n\n\u003cp\u003e本来であれば「値の変化」だけでも判断するためのコード数はそれなりのものになります。それが、変数の定義方法を変えるだけで軽量化できるのであれば、使わない手はないでしょう。\u003c/p\u003e\n\n\u003cp\u003eenumをReactivePropertyとして使用する方法は別途説明しますが、まずは基本的なコードをここで紹介したいと思います。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e    BoolReactiveProperty bool = new BoolReactiveProperty(false);\n\n    void start(){\n        bool.Subscribe(Debug(\"Bool:\" + bool.Value));\n    }\n\n    public void SetBool(bool setbool){\n        bool.Value = setbool;\n    }\n\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eと言った具合になります。\u003c/p\u003e\n\n\u003cp\u003e基本的に値を渡す時は\u003ccode\u003e.Value\u003c/code\u003eに値を渡す必要があります。\u003cbr\u003e\nこれはよくハマる部分です。\u003c/p\u003e\n\n\u003cp\u003e渡した値に相違があった場合、OnNext()を発行してくれます。\u003cbr\u003e\nこの場合だと、trueの値が入っていて、falseが渡されるとOnNextが発行されます。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"カスタムreactivepropertyを作成する\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%A0reactiveproperty%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eカスタムReactivePropertyを作成する\u003c/h2\u003e\n\n\u003cp\u003eそれではカスタムReactivePropertyを作成しましょう。\u003cbr\u003e\n今回は、自身で定義した\u003ccode\u003eenum\u003c/code\u003eで使いたいと思います。\u003c/p\u003e\n\n\u003cp\u003eまず、使用するenumを定義します。\u003cbr\u003e\nいきなりではありますが、このenumの値はのちにロードするリソースのファイル名と同じになるようにします。\u003cbr\u003e\nUnityでは、リソースをロードするときにstring型で指定します。\u003cbr\u003e\nその時のタイポを防ぐ、予防のためにenumを文字列に変更して使用するためです。\u003c/p\u003e\n\n\u003cp\u003eそれでは\u003ccode\u003eTabIconReactivePropertyクラス\u003c/code\u003eを作成しましょう。\u003c/p\u003e\n\n\u003cp\u003eここでは特別設定することが設定するenumを指定して、ReactivePropertyを継承する事ぐらいになります。\u003cbr\u003e\nあとはコンストラクタで引数と自身を継承するための設定を行いましょう。\u003cbr\u003e\n\u003ccode\u003ebase\u003c/code\u003eを継承しているコンストラクタは、引数を使用してインスタンスする場合用です。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eTabIconReactiveProperty.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem.Collections\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem.Collections.Generic\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eUniRx\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eUnityEngine\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003enamespace\u003c/span\u003e \u003cspan class=\"nn\"\u003eMVRP.UI\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eenum\u003c/span\u003e \u003cspan class=\"n\"\u003eTabIcon\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eBlue\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eGreen\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eRed\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eYellow\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\n    \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eSystem\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eSerializable\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eTabIconReactiveProperty\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eReactiveProperty\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eTabIcon\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003eTabIconReactiveProperty\u003c/span\u003e \u003cspan class=\"p\"\u003e(){}\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003eTabIconReactiveProperty\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eTabIcon\u003c/span\u003e \u003cspan class=\"n\"\u003einitialValue\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"k\"\u003ebase\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003einitialValue\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"カスタムreactivepropertyをインスペクターで目視できるように\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%A0reactiveproperty%E3%82%92%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%9A%E3%82%AF%E3%82%BF%E3%83%BC%E3%81%A7%E7%9B%AE%E8%A6%96%E3%81%A7%E3%81%8D%E3%82%8B%E3%82%88%E3%81%86%E3%81%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eカスタムReactivePropertyをインスペクターで目視できるように\u003c/h2\u003e\n\n\u003cp\u003eカスタムReactivePropertyを使用する際の注意点として、ジェネリック型のクラスはインスペクタで表示できないのがUnityの仕組みとなっています。\u003cbr\u003e\nそこで、以下のクラスをEditorフォルダに設置し、カスタムReactivePropertyを使用した際に \u003ccode\u003e[SerializeField]\u003c/code\u003eの属性を付けてあげましょう。\u003c/p\u003e\n\n\u003cp\u003eこのクラスは一つ用意して、カスタムReactivePropertyを増やした都度クラスに属性を増やしていく運用をしていきましょう。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eExtendInspectorDisplayDrawer.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem.Collections\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem.Collections.Generic\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eUniRx\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eUnityEngine\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\n\u003cspan class=\"k\"\u003enamespace\u003c/span\u003e \u003cspan class=\"nn\"\u003eMVRP.UI\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eUnityEditor\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eCustomPropertyDrawer\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003etypeof\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eTabIconReactiveProperty\u003c/span\u003e\u003cspan class=\"p\"\u003e))]\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e/// ここに随時追加\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eExtendInspectorDisplayDrawer\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eInspectorDisplayDrawer\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"管理をenumで一元化する\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E7%AE%A1%E7%90%86%E3%82%92enum%E3%81%A7%E4%B8%80%E5%85%83%E5%8C%96%E3%81%99%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e管理をenumで一元化する\u003c/h2\u003e\n\n\u003cp\u003eここで、今回のカスタムReactivePropertyを運用するにあたって、enumの便利な使い方、効率の良い実装に向けた機能の紹介をします。\u003c/p\u003e\n\n\u003cp\u003eUnityで \u003ccode\u003estring\u003c/code\u003eを引数として使用するAPIの運用に関して、タイポミスなどを防ぐための予防策として、enumを使うことを推奨します。\u003cbr\u003e\n項目としてある程度決まった仕様(ゲーム内での属性、攻撃の種類など)をenumの構造体として運用することで、正しく設定されていないものに関してエラーを返す仕組みが働くよう実装が可能になります。\u003c/p\u003e\n\n\u003cp\u003eEnum.GetNames\u003cbr\u003e\n\u003ca href=\"https://msdn.microsoft.com/ja-jp/library/system.enum.getnames(v=vs.110).aspx\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://msdn.microsoft.com/ja-jp/library/system.enum.getnames(v=vs.110).aspx\u003c/a\u003e\u003cbr\u003e\n→構造体の名前を取得します\u003c/p\u003e\n\n\u003cp\u003eEnum.ToObject\u003cbr\u003e\n\u003ca href=\"https://msdn.microsoft.com/ja-jp/library/system.enum.toobject(v=vs.110).aspx\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://msdn.microsoft.com/ja-jp/library/system.enum.toobject(v=vs.110).aspx\u003c/a\u003e\u003cbr\u003e\n→整数からメンバー値を取得します\u003c/p\u003e\n\n\u003cp\u003e文字列としてメンバーを取り出すのであれば、\u003ccode\u003eenum.nanika.ToString()\u003c/code\u003e、構造体のメンバー数を取得するなら \u003ccode\u003eEnum.GetNames (typeof(enum)).Length\u003c/code\u003e、整数でメンバーを呼び出したいなら\u003ccode\u003eEnum.ToObject (typeof(enum), i)\u003c/code\u003eが有用です。\u003c/p\u003e\n\n\u003cp\u003e文字列や、マジックナンバーで実装が進んでしまうと、変更があった際の対応、タイポのチェックなどが運用フェーズになってしまうと追いつかないため、ある程度ルールで縛るといった実装が効果的になる場合があります。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"presenterの実装\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#presenter%E3%81%AE%E5%AE%9F%E8%A3%85\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003ePresenterの実装\u003c/h2\u003e\n\n\u003cp\u003eさて、いよいよPresenterの実装になります。\u003cbr\u003e\n今回は、巷で人気が出てきたMV(R)Pという設計をイメージした仕様で実装を進めたいと思います。\u003cbr\u003e\n本来はこの\u003ccode\u003ePresenter\u003c/code\u003eと呼ばれるクラス(MV(R)PのP)は、軽い実装で作られるもので、ViewとModelをしっかりと作りこむのが基本となっています。\u003cbr\u003e\n細かい説明は省きますが、今後発展的な実装を見越してPresenterとしてクラスを定義したいと思います。\u003c/p\u003e\n\n\u003cp\u003eまずは必要なUIパーツ(View)の紐付けと、リソースのロード。\u003cbr\u003e\n次にReactiveProperty(Model)の設定と、外部から今の値を確認できる変数を設定してあげましょう。\u003c/p\u003e\n\n\u003cp\u003e今回実装するクラスは、タブのアイコンをenumのメンバーから変更しようと言った試みです。\u003cbr\u003e\n参照先のImageクラス(View)とリソースをキャッシュするためのTexture2D変数を準備します。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e    [SerializeField] Image icomImage;\n    Dictionary\u0026lt;TabIcon, Texture2D\u0026gt; iconSprite = new Dictionary\u0026lt;TabIcon, Texture2D\u0026gt;();\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eDictionatyクラスを使用して、enumのメンバーをKeyに割り当てたいと思います。\u003cbr\u003e\nenumのKeyに対してTexturをキャッシュします。\u003c/p\u003e\n\n\u003cp\u003e次に、ReactivePropertyの宣言と、外部から読み取れる読み取り専用のReactivePropertyを準備します。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e    [SerializeField] TabIconReactiveProperty iconSpriteStatus = new TabIconReactiveProperty (TabIcon.Red);\n    public IReadOnlyReactiveProperty\u0026lt;TabIcon\u0026gt; IconSpriteStatus { get { return iconSpriteStatus; } }\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eIReadOnlyReactivePropertyはとても便利なもので、ここの参照からSubscribeさせることが可能となります。\u003cbr\u003e\n中のenumのメンバーを確認したい場合は、\u003ccode\u003eIconSpriteStatus.Value\u003c/code\u003eにて確認が可能です。\u003c/p\u003e\n\n\u003cp\u003eさて、ここからStartのイベント(メソッド)から、必要な準備と、ストリームの設定を行いたいと思います。\u003cbr\u003e\nまずは、差し替えるための画像をキャッシュしましょう。\u003c/p\u003e\n\n\u003cp\u003eenumに設定されているメンバーの数分画像をロードし、Texture2Dの変数にキャッシュします。\u003cbr\u003e\n一点メンバー名の設定のコツとして、ファイル名をenumのメンバー名にするとロード時のテキストデータに変換して使えます。\u003cbr\u003e\nここではフォルダのパスを直接書いてしまっていますが、本来の実装方法として望ましくないことを付け加えておきます。\u003cbr\u003e\nこの話の文脈からすると、フォルダのパスもenumとして定義するべきだからです。\u003c/p\u003e\n\n\u003cp\u003e呼び出し方法としては、まずメンバー数を取得し、ループの回数として設定します。\u003cbr\u003e\nそこから初期化したint値を用いて\u003ccode\u003eEnum.ToObject\u003c/code\u003eからenumのメンバーを設定します。\u003cbr\u003e\nその設定したメンバー値を使って、\u003ccode\u003eDectionary\u003c/code\u003e変数に、KeyとTexture2DをAddします。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003efor (int i = 0; i \u0026lt; Enum.GetNames (typeof(TabIcon)).Length; i++) {\n                TabIcon iconFileName = (TabIcon)Enum.ToObject (typeof(TabIcon), i);\n                iconSprite.Add (iconFileName, (Texture2D)Resources.Load (\"Textures/UI/\" + iconFileName.ToString ()));\n            }\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e画像のキャッシュが完了したら、いよいよReactivePropertyを用いたストリームを設定します。\u003cbr\u003e\nここでは特に難しいオペーレーターを使用せず、値が変わったらSubscribeするだけの単純な設定にしたいと思います。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003ethis.iconSpriteStatus.Subscribe (\n                x =\u0026gt; icomImage.sprite \n                    = Sprite.Create(\n                    iconSprite[x], \n                    new Rect(0, 0, iconSprite[x].width,\n                    iconSprite[x].height), \n                    Vector2.zero\n                )\n            );\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eカスタムReactivePropertyで、enumのメンバーが変更されたら、その値を用いてキャッシュされているTexture2Dをロードします。\u003cbr\u003e\n今回は、Imageクラスに\u003ccode\u003eSprite\u003c/code\u003eをロードしなくてはなりません。\u003cbr\u003e\nしかしキャッシュされているのはTexture2Dになりますので、コンバートの作業が必要になります。\u003cbr\u003e\nそこで、SpriteクラスのCreateメソッドを用いて、Texture2Dの素材からSpriteを生成し、渡してあげましょう。\u003c/p\u003e\n\n\u003cp\u003e以上で基本的な実装は終了です。\u003cbr\u003e\n最後に、enumのメンバーを切り替えるためのメソッドを準備したいと思います。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e    public void SetTabButtonIcon(TabIcon iconName){\n        iconSpriteStatus.Value = iconName;\n    }\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e重ねて注意すべき点ですが、ReactivePropertyに値を渡す際には、必ず\u003ccode\u003eValue\u003c/code\u003eに渡してあげましょう。\u003c/p\u003e\n\n\u003cp\u003e以上で全てのソースコードになります。\u003cbr\u003e\nそれでは、namespaceの設定も含めた、全てのソースコードになります。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eTabButtonPresemter.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem.Collections\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem.Collections.Generic\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eUniRx\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eUnityEngine\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eUnityEngine.UI\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003enamespace\u003c/span\u003e \u003cspan class=\"nn\"\u003eMVRP.UI\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eTabButtonPresenter\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eMonoBehaviour\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eSerializeField\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"n\"\u003eImage\u003c/span\u003e \u003cspan class=\"n\"\u003eicomImage\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eDictionary\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eTabIcon\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eTexture2D\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eiconSprite\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eDictionary\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eTabIcon\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eTexture2D\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;();\u003c/span\u003e\n\n        \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eSerializeField\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"n\"\u003eTabIconReactiveProperty\u003c/span\u003e \u003cspan class=\"n\"\u003eiconSpriteStatus\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eTabIconReactiveProperty\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eTabIcon\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eRed\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eIReadOnlyReactiveProperty\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eTabIcon\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eIconSpriteStatus\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003eiconSpriteStatus\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eStart\u003c/span\u003e \u003cspan class=\"p\"\u003e()\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eicomImage\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003egameObject\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eGetComponent\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eImage\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;();\u003c/span\u003e\n            \u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"n\"\u003eEnum\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eGetNames\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003etypeof\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eTabIcon\u003c/span\u003e\u003cspan class=\"p\"\u003e)).\u003c/span\u003e\u003cspan class=\"n\"\u003eLength\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e++)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"n\"\u003eTabIcon\u003c/span\u003e \u003cspan class=\"n\"\u003eiconFileName\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eTabIcon\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"n\"\u003eEnum\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eToObject\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003etypeof\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eTabIcon\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n                \u003cspan class=\"n\"\u003eiconSprite\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAdd\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eiconFileName\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eTexture2D\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"n\"\u003eResources\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eLoad\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Textures/UI/\"\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"n\"\u003eiconFileName\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eToString\u003c/span\u003e \u003cspan class=\"p\"\u003e()));\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n            \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eiconSpriteStatus\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSubscribe\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\n                \u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eicomImage\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003esprite\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eSprite\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eCreate\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eiconSprite\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e],\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eRect\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eiconSprite\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e].\u003c/span\u003e\u003cspan class=\"n\"\u003ewidth\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eiconSprite\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e].\u003c/span\u003e\u003cspan class=\"n\"\u003eheight\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"n\"\u003eVector2\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ezero\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eSetTabButtonIcon\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eTabIcon\u003c/span\u003e \u003cspan class=\"n\"\u003eiconName\u003c/span\u003e\u003cspan class=\"p\"\u003e){\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eiconSpriteStatus\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eValue\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eiconName\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e出来上がったクラスを、差し替え対象のImageObjectにAddして、再生ボタンを押してみましょう。\u003cbr\u003e\nインスペクターからenumのメンバーを変更することができるので動作確認をし、問題がないようであれば\u003ccode\u003eSetTabButtonIcon(TabIcon iconName)\u003c/code\u003eから変更してみましょう。\u003cbr\u003e\n正常に動作しなかった場合は、まず\u003ccode\u003eIconImage\u003c/code\u003eが\u003ccode\u003eNone\u003c/code\u003eになっていない事を確認しましょう。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/e36812089ac07765f6816b368a25c64e3e64ad18/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f35303730322f64386332383835612d316261372d336434662d633664342d3436373435333539313237302e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F50702%2Fd8c2885a-1ba7-3d4f-c6d4-467453591270.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=6bf45fae745129e3a184e26ab55acd5c\" alt=\"Unity_5_5_0f3__64bit__-_Untitled_-_UniRx_-_iPhone__iPod_Touch_and_iPad__OpenGL_4_1_.png\" title=\"Unity_5_5_0f3__64bit__-_Untitled_-_UniRx_-_iPhone__iPod_Touch_and_iPad__OpenGL_4_1_.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/50702/d8c2885a-1ba7-3d4f-c6d4-467453591270.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F50702%2Fd8c2885a-1ba7-3d4f-c6d4-467453591270.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=045588e38fc95354f61e1f08093324b5 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e以上です。\u003cbr\u003e\nありがとうございました。\u003c/p\u003e\n","createdAt":"2016-12-15T01:48:51Z","elapsedYearsFromLastModifiedAt":3,"encryptedId":"UowKwrnV+QXbdChKeKhj3wbOO8oLjBrr--X3S5WkvgkF3Va6DV--KLi7twj2OntCTMyPSNRsHg==","isBanned":false,"isDeprecated":true,"isDestroyableByViewer":false,"isEditRequestReadableByViewer":true,"isEditRequestSendableByViewer":true,"isLikableByViewer":true,"isLikedByViewer":false,"isPublic":true,"isSlide":false,"isStockableByViewer":true,"isStockedByViewer":false,"isSubscribableByViewer":false,"isSubscribedByViewer":false,"isUpdatableByViewer":false,"isUpdated":true,"lastModifiedAt":"2017-09-28T15:05:44Z","likesCount":58,"linkUrl":"https://qiita.com/dsgarage/items/621bd3b31b78f33703eb","organization":null,"originalId":450080,"stockedCount":45,"title":"UIのシステムをUniRxで構築する","toc":"\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#unirx%E3%81%A8%E3%81%AF\"\u003eUniRxとは？\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#reactiveproperty\"\u003eReactiveProperty\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%A0reactiveproperty%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B\"\u003eカスタムReactivePropertyを作成する\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%A0reactiveproperty%E3%82%92%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%9A%E3%82%AF%E3%82%BF%E3%83%BC%E3%81%A7%E7%9B%AE%E8%A6%96%E3%81%A7%E3%81%8D%E3%82%8B%E3%82%88%E3%81%86%E3%81%AB\"\u003eカスタムReactivePropertyをインスペクターで目視できるように\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E7%AE%A1%E7%90%86%E3%82%92enum%E3%81%A7%E4%B8%80%E5%85%83%E5%8C%96%E3%81%99%E3%82%8B\"\u003e管理をenumで一元化する\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#presenter%E3%81%AE%E5%AE%9F%E8%A3%85\"\u003ePresenterの実装\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n","totalPv":18200,"uuid":"621bd3b31b78f33703eb","banReason":null,"adventCalendarItem":null,"author":{"encryptedId":"7kuIiGmr6urfv8SoINDQ+rcwMgw=--L42+ABsNAmmKjFvx--xV2m2d2MPbpGZ+dhXmuO4g==","originalId":50702,"description":"UnityとArduinoをこよなく愛するドラマーです。\r\n","facebookUrl":"https://facebook.com/dsgaragejp","githubUrl":"https://github.com/dsgarage","isBlockingViewer":false,"isFollowableByViewer":true,"isFollowedByViewer":false,"isTweetWebNotificationReceivable":true,"linkedinUrl":null,"name":"Tsukada Daisuke","profileImageUrl":"https://qiita-image-store.s3.amazonaws.com/0/50702/profile-images/1473692194","profileImageUrlW48":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F50702%2Fprofile-images%2F1473692194?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=48\u0026s=b92ab4d1e87e7db80f882ff6c0dee8de","profileImageUrlW75":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F50702%2Fprofile-images%2F1473692194?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=60dba3cd54774f612c53805b5444a544","urlName":"dsgarage","websiteUrl":"","twitterUrl":"https://twitter.com/dsgarage","twitterUrlName":"dsgarage","revealedOrganizations":{"edges":[{"node":{"encryptedId":"EI/W3Fro8b/o9U0z7/Ay2YEAhTXfum3EKAw=--j3YBDUGuYMsLOe6Z--dpmu1v5vzUuMOu8gExjTYw==","isBetaReleaseEnabled":false,"isFollowableByViewer":false,"isFollowedByViewer":false,"name":"Unityゲーム開発者ギルド","logoUrl":"https://s3-ap-northeast-1.amazonaws.com/qiita-organization-image/f7eb993765ddcdb2c5e6890556c43ea3de8fbfb7/original.jpg?1570215690","urlName":"unity-game-dev-guild","description":"趣味・仕事問わずUnityでゲームを作っている開発者のみで構成されるオンラインコミュニティです。Unityでゲームを開発・運用するにあたって必要なあらゆる知見を共有することを目的とします。","url":"https://unity-game-dev-guild.github.io/"}}]}},"tags":[{"name":"C#","urlName":"csharp"},{"name":"Unity","urlName":"unity"},{"name":"UniRx","urlName":"unirx"}],"followingLikers":{"edges":[]},"comments":{"totalCount":0}},"comments":[],"client":null,"ads_event_emitter":null}}</script>
