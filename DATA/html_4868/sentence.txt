More than 3 years have passed since last update.Interactive Extensions(Ix)のBufferというメソッドが便利なので紹介します。利用するにはnugetでSystem.Interactiveのインストールが必要です。環境シーケンスを決められた数ずつ分割したい場合に利用します。・出力結果第一引数の値ずつにグループ化された複数のシーケンスを返します。例1では4個ずつに区切られた3つのリストが返却されます。第一引数 &gt; 第二引数・出力結果第二引数がある場合も第一引数の値ごとにグループ化が行われます。ただしグループ化開始位置が第二引数の値だけ逐次進みます。例2ではグループ1に1始まりの5つのデータ、グループ2に3始まりの5つのデータが入ります。第一引数 &lt; 第二引数・出力結果例2と同様、第二引数の値だけグループ化開始位置が逐次進みます。例2では重複してグループ化されている要素がありましたが、例3では選択されない要素が発生します。例2で、ある要素が複数のグループに割り当てられる場合も列挙は要素ごとに一回しか行われない。引数が2つある場合で両者が同じ値なら引数1つのときと処理内容は変わらない。という要件がきたときに1ページあたりの情報をどのように選択するか考えます。要件を読み解くと「顧客と支払い方法」をキーにしたグループ化が必要となるので、まずGroupByを行います。つぎに最大行数20でのグループ化も必要なのでBufferを呼び出し、20行ごとでのグループ化を行います。そうするとグループ化が2回行われたシーケンスが得られます。このままでは階層が深いため扱いやすい形にするため最後にSelectManyを行いシーケンスを1段階フラットなものにします。このように実務で使う場合はGroupBy ToLookup SelectManyといったグループを扱う他のメソッドと組み合わせることで力を発揮します。


