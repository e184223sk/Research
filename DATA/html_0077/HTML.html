<!DOCTYPE html><html><head><meta charset="utf-8" /><title>[C#]例外処理の利用方針があやふやだったので、勉強しなおした - Qiita</title><meta content="width=device-width,initial-scale=1,shrink-to-fit=no,viewport-fit=cover" name="viewport" /><meta content="#55c500" name="theme-color" /><meta content="XWpkTG32-_C4joZoJ_UsmDUi-zaH-hcrjF6ZC_FoFbk" name="google-site-verification" /><meta content="telephone=no" name="format-detection" /><link rel="canonical" href="https://qiita.com/Kosei-Yoshida/items/8f6aa12d8eab878265a7" /><link href="/manifest.json" rel="manifest" /><link href="/opensearch.xml" rel="search" title="Qiita" type="application/opensearchdescription+xml" /><link as="script" href="https://www.googletagservices.com/tag/js/gpt.js" rel="preload" /><link href="https://securepubads.g.doubleclick.net" rel="preconnect" /><script async="" src="https://www.googletagservices.com/tag/js/gpt.js"></script><meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="eoLZayPo2Xjn7p+84zJ3mIW7pLmF7JBeEYkPpeiAsC9/1EbcCqNvLCcJHTQ4YPxkO3G8Pb8LWjpXW0JFXn/AqQ==" /><link rel="shortcut icon" type="image/x-icon" href="https://cdn.qiita.com/assets/favicons/public/production-c620d3e403342b1022967ba5e3db1aaa.ico" /><link rel="apple-touch-icon" type="image/png" href="https://cdn.qiita.com/assets/favicons/public/apple-touch-icon-ec5ba42a24ae923f16825592efdc356f.png" /><link rel="stylesheet" media="all" href="https://cdn.qiita.com/assets/public/article-2eaa7dbedc42a8ea65c722cda46d0ebb.min.css" /><script src="https://cdn.qiita.com/assets/public/v3-article-bundle-63de2d91fef827269d3f6b958db2335b.min.js" defer="defer"></script><meta name="twitter:card" content="summary_large_image"><meta content="@Qiita" name="twitter:site" /><meta content="@H9mqVsEISnSFEEY" name="twitter:creator" /><meta property="og:type" content="article"><meta property="og:title" content="[C#]例外処理の利用方針があやふやだったので、勉強しなおした - Qiita"><meta property="og:image" content="https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0&amp;w=1200&amp;mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND1XME1qWGVTLWktV2tsdVdIcHVlUWh1T0JydVdJcWVlVXFPYVd1ZW1IbmVPQmpPT0JndU9DaE9PQnRlT0NoT09Cb09PQm8tT0JuLU9CcnVPQnAtT0FnZVdMaWVXOHQtT0JsLU9CcXVPQml1T0JsLU9CbncmdHh0LWNvbG9yPSUyMzMzMyZ0eHQtZm9udD1IaXJhZ2lubyUyMFNhbnMlMjBXNiZ0eHQtc2l6ZT01NCZ0eHQtY2xpcD1lbGxpcHNpcyZ0eHQtYWxpZ249Y2VudGVyJTJDbWlkZGxlJnM9ZDVkYTg2ZjNmOGI2OTg1YzgzZDM0NDc3ZTRjY2NhZjM&amp;mark-align=center%2Cmiddle&amp;blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RRXR2YzJWcExWbHZjMmhwWkdFJnR4dC1jb2xvcj0lMjMzMzMmdHh0LWZvbnQ9SGlyYWdpbm8lMjBTYW5zJTIwVzYmdHh0LXNpemU9NDUmdHh0LWFsaWduPXJpZ2h0JTJDYm90dG9tJnM9ZWFkYzlhNzg2MzhlNWY0ODkxZWE1OGYzOWNjM2M4ODY&amp;blend-align=center%2Cmiddle&amp;blend-mode=normal&amp;s=4f113351de8b9de7fef2d07670f067f9"><meta property="og:description" content="

はじめに

自分は業務でC#を書いているのですが、今までかなりあやふやな知識で例外処理を使っていました。そこで、一度学びなおし、現時点での自分の中での「例外処理の利用方針」を固めておこうと思いました。

学びなおすために色々調べた..."><meta content="https://qiita.com/Kosei-Yoshida/items/8f6aa12d8eab878265a7" property="og:url" /><meta content="Qiita" property="og:site_name" /><meta content="564524038" property="fb:admins" /><meta content="C#,例外処理" name="keywords" /><script>!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window, document,'script',
'https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '668972150489891');
fbq('track', 'PageView');</script><style data-emotion-css="17jxvjw 11t2ec1 1dvr2p8 18lkoru 1g4cku8 1iupg5d ijvq0v 15cocm3 12rp90f 115f4t 1b8uj5v 79elbk 16hhh7b fcbn8c 1gj7nt 154zy0m yikrym 1jqivyb 1ode1bp le4d8r 1hbd3g7 helsa7 8qb8m4 2imjyh he5w1s 70qvj9 3ojehk 100alwu 1dtnjt5 10ougpm 1ay9vb9 m19uds cgzq40 1wa99t2 1l3zk9f 4czcte 1yzj1fm 1uv1qiv 109dbrr 5jpx49 mnxgyc 1vlpknv fsjkhv 1b17vb0 7i7f4d"}>.css-17jxvjw{display:grid;display:-ms-grid;grid-template-columns:80px minmax(0,1fr) 300px;-ms-grid-columns:80px minmax(0,1fr) 300px;grid-template-rows:minmax(270px,auto) 1fr;-ms-grid-rows:minmax(270px,auto) 1fr;max-width:1280px;margin-right:auto;margin-left:auto;padding-top:24px;padding-right:24px;padding-left:24px;}@media (max-width:1200px){.css-17jxvjw{padding-bottom:0;padding-left:0;padding-right:0;}}@media (max-width:992px){.css-17jxvjw{grid-template-columns:80px 452px 300px;-ms-grid-columns:80px 452px 300px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}}@media (max-width:770px){.css-17jxvjw{display:block;}}@media (max-width:480px){.css-17jxvjw{padding-top:0;}}.css-11t2ec1{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;z-index:5;position:-webkit-sticky;position:sticky;top:calc(56px + 24px + 16px + 32px - 16px);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:16px;width:80px;}.css-11t2ec1:after{content:'';display:table;}.css-11t2ec1:before{content:'';display:table;}@media (max-width:770px){.css-11t2ec1{display:none;}}.css-1dvr2p8{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-18lkoru{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;background-color:#FFFFFF;}.css-1g4cku8{display:inline-block;vertical-align:middle;height:20px;width:20px;fill:#55C500;}.css-1iupg5d{color:#55C500;cursor:pointer;font-size:14px;font-weight:bold;}.css-ijvq0v{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-15cocm3{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#FFFFFF;border:2px solid #6E6F70;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:2px 0px 0px;width:40px;}.css-12rp90f{display:inline-block;vertical-align:bottom;height:17.77777777777778px;width:16px;fill:#6E6F70;}.css-115f4t{color:#6E6F70;font-size:14px;font-weight:bold;}.css-1b8uj5v{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;margin-bottom:16px;padding:0;}.css-79elbk{position:relative;}.css-16hhh7b{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;padding:0;}.css-fcbn8c{display:none;bottom:initial;left:initial;right:initial;top:initial;left:100%;top:calc(-8px - (14px * 1.8) - 16px - 4px);}.css-1gj7nt{color:rgba(0,0,0,0.6);font-size:14px;font-weight:bold;line-height:1.8;padding:8px 16px;}.css-154zy0m{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.87);cursor:pointer;font-size:16px;font-weight:normal;line-height:1.8;padding:4px 16px;}.css-154zy0m:hover{-webkit-text-decoration:none;text-decoration:none;background-color:#F2F2F2;}.css-yikrym{width:20px;}.css-1jqivyb{color:rgba(0,0,0,0.6);font-size:13px;}.css-1ode1bp{background-color:rgba(0,0,0,0.12);height:1px;width:100%;margin:8px 0;}.css-le4d8r{display:inline-block;vertical-align:middle;height:13px;width:13px;fill:rgba(0,0,0,0.6);}.css-1hbd3g7{height:250px;}.css-helsa7{background-color:#FFFFFF;padding:32px;margin-bottom:24px;}@media (max-width:992px){.css-helsa7{margin:0 auto 40px;}}@media (max-width:480px){.css-helsa7{margin:0 0 40px;padding:32px 16px;}}.css-8qb8m4{margin-bottom:48px;}.css-2imjyh{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-he5w1s{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;width:100%;}@media (max-width:770px){.css-he5w1s{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}}.css-70qvj9{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.css-3ojehk{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;margin-right:4px;}.css-100alwu{display:inline-block;border-radius:50%;line-height:1;overflow:hidden;vertical-align:middle;}.css-1dtnjt5{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-10ougpm{color:rgba(0,0,0,0.87);font-size:14px;font-weight:600;line-height:1.8;margin-right:4px;text-wrap:break-word;word-break:break-all;}.css-1ay9vb9{margin-right:16px;}.css-m19uds{color:rgba(0,0,0,0.6);font-size:14px;line-height:1.8;}.css-cgzq40{color:rgba(0,0,0,0.87);font-size:32px;font-weight:bold;line-height:1.4;margin-top:8px;text-wrap:break-word;word-break:break-all;}.css-1wa99t2{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.6);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:8px;}.css-1l3zk9f{color:rgba(0,0,0,0.6);font-size:20px;margin-right:8px;}.css-4czcte{margin-right:4px;color:inherit;font-size:14px;line-height:1.8;}.css-4czcte:not(:last-child)::after{content:',';margin-right:4px;}.css-1yzj1fm{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:32px;}.css-1uv1qiv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-size:20px;height:32px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin-right:16px;outline:none;padding:0;width:32px;}.css-109dbrr{background-color:#F9F9F9;border-top:1px solid rgba(0,0,0,0.12);bottom:0;box-shadow:0px 1px 4px rgba(0,0,0,0.14);display:none;height:calc(env(safe-area-inset-bottom,0px) + 56px);-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding-bottom:env(safe-area-inset-bottom);position:-webkit-sticky;position:sticky;width:100%;z-index:2000;}@media (max-width:770px){.css-109dbrr{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}.css-5jpx49{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:space-evenly;-webkit-justify-content:space-evenly;-ms-flex-pack:space-evenly;justify-content:space-evenly;width:100%;}.css-mnxgyc{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1vlpknv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;margin-right:4px;background-color:#FFFFFF;}.css-fsjkhv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1b17vb0{color:#6E6F70;font-size:14px;font-weight:bold;margin-left:4px;}.css-7i7f4d{display:none;bottom:initial;left:initial;right:initial;top:initial;bottom:32px;right:0;}</style></head><body><div class="allWrapper"><div><div id="GlobalHeader-react-component-2a10788c-f8e3-4db0-861a-6974982f3031"><div class="st-Header"><div class="st-Header_container"><div class="st-Header_start"><a href="/" class="st-Header_logo"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 426.57 130"><circle cx="167.08" cy="21.4" r="12.28"></circle><path d="M250.81 29.66h23.48v18.9h-23.48z"></path><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z"></path><circle cx="216.33" cy="21.4" r="12.28"></circle></svg></a><div class="st-Header_communitySelector" tabindex="0"><span class="fa fa-caret-down"></span></div><div class="st-Header_dropdown"><div class="st-Header_dropdownHeading">Qiita Teams that are logged in</div><div class="st-Header_dropdownItemNote">You are not logged in to any team</div><hr class="st-Header_dropdownDivider st-Header_dropdownDivider-shrink"/><a href="https://teams-center.qiita.com/find_team" class="st-Header_dropdownItem"><span class="fa fa-fw fa-sign-in st-Header_dropdownItemIcon"></span><div>Log in to Qiita Team</div></a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Community</div><a href="/organizations" class="st-Header_dropdownItem">Organization</a><a href="/official-events/open" class="st-Header_dropdownItem">Event</a><a href="/advent-calendar" class="st-Header_dropdownItem">Advent Calendar</a><a href="https://qiitadon.com/" class="st-Header_dropdownItem" target="_blank">Qiitadon (β)</a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Service</div><a href="https://jobs.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Jobs</a><a href="https://zine.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Zine</a><a href="https://blog.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Blog</a></div><form class="st-Header_search" action="/search" method="get"><span class="fa fa-search st-Header_searchIcon"></span><input type="search" class="st-Header_searchInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form><form class="st-Header_searchModal" action="/search" method="get"><input type="text" class="st-Header_searchModalInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form></div><div class="st-Header_end"><div class="st-Header_searchButton"><span class="fa fa-search"></span></div><a class="st-Header_signupButton" href="/signup?redirect_to=%2FKosei-Yoshida%2Fitems%2F8f6aa12d8eab878265a7">Signup</a><a class="st-Header_loginLink" href="/login?redirect_to=%2FKosei-Yoshida%2Fitems%2F8f6aa12d8eab878265a7">Login</a></div><div class="st-Header_overlay"></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="GlobalHeader" data-dom-id="GlobalHeader-react-component-2a10788c-f8e3-4db0-861a-6974982f3031">{"unreadNotificationsCount":null,"realms":[{"humanName":"Qiita","isCurrentRealm":true,"isQiita":true,"isQiitaTeam":false,"loggedInUser":null,"teamId":null,"url":"https://qiita.com/"}],"teamFindUrl":"https://teams-center.qiita.com/find_team","isTeamOnlyUser":null,"currentUser":null}</script>
      
</div><div class="st-HeaderAlert st-HeaderAlert-warning"><div class="st-HeaderAlert_body"></div></div><script type="application/ld+json">{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"/","name":"Qiita"}},{"@type":"ListItem","position":2,"item":{"@id":"/tags/csharp","name":"C#"}}]}</script><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","datePublished":"2021-01-22T11:21:43.000+09:00","dateModified":"2021-07-30T11:25:23.000+09:00","headline":"[C#]例外処理の利用方針があやふやだったので、勉強しなおした","image":"https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0\u0026w=1200\u0026mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND1XME1qWGVTLWktV2tsdVdIcHVlUWh1T0JydVdJcWVlVXFPYVd1ZW1IbmVPQmpPT0JndU9DaE9PQnRlT0NoT09Cb09PQm8tT0JuLU9CcnVPQnAtT0FnZVdMaWVXOHQtT0JsLU9CcXVPQml1T0JsLU9CbncmdHh0LWNvbG9yPSUyMzMzMyZ0eHQtZm9udD1IaXJhZ2lubyUyMFNhbnMlMjBXNiZ0eHQtc2l6ZT01NCZ0eHQtY2xpcD1lbGxpcHNpcyZ0eHQtYWxpZ249Y2VudGVyJTJDbWlkZGxlJnM9ZDVkYTg2ZjNmOGI2OTg1YzgzZDM0NDc3ZTRjY2NhZjM\u0026mark-align=center%2Cmiddle\u0026blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RRXR2YzJWcExWbHZjMmhwWkdFJnR4dC1jb2xvcj0lMjMzMzMmdHh0LWZvbnQ9SGlyYWdpbm8lMjBTYW5zJTIwVzYmdHh0LXNpemU9NDUmdHh0LWFsaWduPXJpZ2h0JTJDYm90dG9tJnM9ZWFkYzlhNzg2MzhlNWY0ODkxZWE1OGYzOWNjM2M4ODY\u0026blend-align=center%2Cmiddle\u0026blend-mode=normal\u0026s=4f113351de8b9de7fef2d07670f067f9","mainEntityOfPage":"https://qiita.com/Kosei-Yoshida/items/8f6aa12d8eab878265a7","author":{"@type":"Person","address":"東京","email":"koseiasengineer@gmail.com","identifier":"Kosei-Yoshida","name":"Kosei-Yoshida","image":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fs3-ap-northeast-1.amazonaws.com%2Fqiita-image-store%2F0%2F206591%2Fec95458225498b3b38288ee72ca33adcecf2fa3c%2Fx_large.png%3F1591664178?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=7f3c7a8d6eddffdfe19d431f7817743a","url":"https://qiita.com/Kosei-Yoshida","description":"","memberOf":[{"@type":"Organization","address":"東京都 品川区 西五反田 7-22-17 TOCビル 9階 1号室","legalName":"株式会社Synamon","image":"https://s3-ap-northeast-1.amazonaws.com/qiita-organization-image/61602936865dc500beef696ce467a66b8671dcef/original.jpg?1591883373","logo":"https://s3-ap-northeast-1.amazonaws.com/qiita-organization-image/788a109cb689ab1b5028a547f7bf94e63c84be6b/original.jpg?1593083579","identifier":"synamon","description":"Synamonは「XRが当たり前の世界をつくる」ことをミッションに、未来づくりに挑戦しているXRスタートアップです。\r\n市場をつくっていくためには、日常で使われる仕組みを生みだしていくことが重要です。\r\nそのため、toB領域をメインに、未来への取り組みや事業づくりにチャレンジしている企業様への支援や、XR活用のユースケースづくり、継続的に使われるための仕組みづくりに取り組んでいます。"}]},"publisher":{"@type":"Organization","name":"Qiita","logo":{"@type":"ImageObject","url":"//cdn.qiita.com/assets/public/qiita-logo-c39ded593afa388e2e1ba435b110554e.png"}}}</script><style type="text/css">.wb-CampaignLink {
  background-color: #333333;
  width: 100%;
}

.wb-CampaignLink_container {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  max-width: 1100px;
  margin: 0 auto;
  font-size: 13px;
  padding: 0.8em;
}
.wb-CampaignLink_container > a {
  color: #fff;
}

.wb-CampaignLink_container > a:hover {
  text-decoration: underline;
}</style><div class="wb-CampaignLink"><div class="wb-CampaignLink_container"><a target="_blank" id="header_text_message_1" href="https://zine.qiita.com/interview/202105-uzabase-2/?utm_source=qiita&amp;utm_medium=header-banner">常にメンバーが開発しやすい環境を作るNewsPicksの組織作りとは</a><a target="_blank" id="header_text_message_2" href="https://zine.qiita.com/interview/202105-uzabase-2/?utm_source=qiita&amp;utm_medium=header-banner">詳しくはこちら</a></div><script>td.trackEvent(
  'front_events',
  {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"Kosei-Yoshida","type":"items","id":"8f6aa12d8eab878265a7"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Show","data":{"message":"常にメンバーが開発しやすい環境を作るNewsPicksの組織作りとは","url":"https://zine.qiita.com/interview/202105-uzabase-2/?utm_source=qiita\u0026utm_medium=header-banner","sub_message":"詳しくはこちら"}}
)</script><script>document.getElementById('header_text_message_1').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"Kosei-Yoshida","type":"items","id":"8f6aa12d8eab878265a7"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":2,"pos_id":"header_text_message_1","message":"常にメンバーが開発しやすい環境を作るNewsPicksの組織作りとは","url":"https://zine.qiita.com/interview/202105-uzabase-2/?utm_source=qiita\u0026utm_medium=header-banner","sub_message":"詳しくはこちら"}}
  )
})</script><script>document.getElementById('header_text_message_2').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"Kosei-Yoshida","type":"items","id":"8f6aa12d8eab878265a7"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":2,"pos_id":"header_text_message_2","message":"常にメンバーが開発しやすい環境を作るNewsPicksの組織作りとは","url":"https://zine.qiita.com/interview/202105-uzabase-2/?utm_source=qiita\u0026utm_medium=header-banner","sub_message":"詳しくはこちら"}}
  )
})</script></div><script type="application/json" id="js-react-on-rails-context">{"railsEnv":"production","inMailer":false,"i18nLocale":"en","i18nDefaultLocale":"en","href":"https://qiita.com/Kosei-Yoshida/items/8f6aa12d8eab878265a7","location":"/Kosei-Yoshida/items/8f6aa12d8eab878265a7","scheme":"https","host":"qiita.com","port":null,"pathname":"/Kosei-Yoshida/items/8f6aa12d8eab878265a7","search":null,"httpAcceptLanguage":null,"actionPath":"public/items#show","settings":{"analyticsTrackingId":"UA-24675221-12","assetsMap":{},"csrfToken":"JJGElIjNziQnfmX0FF2ydG1LQv2ziUXTiB+/xsensEohxxsjoYZ4cOeZ53zPDzmI04FaeYluj7fOzfImcVjAzA==","locale":"en"},"currentUser":null,"isLoggedIn":false,"recaptchaSiteKey":"6LfNkiQTAAAAAM3UGnSquBy2akTITGNMO_QDxMw6","serverSide":false}</script>
<div id="PersonalArticlePage-react-component-73d360a9-10e7-4916-be19-49a4d936ceed"><div class="p-items_wrapper"><div class=" css-17jxvjw"><div class="css-11t2ec1"><div class="css-1dvr2p8"><button class=" css-18lkoru"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/Kosei-Yoshida/items/8f6aa12d8eab878265a7/likers" class="css-1iupg5d">7</a></div><div class="css-ijvq0v"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-115f4t">11</span></div><div class="css-1b8uj5v"><span class="fa fa-twitter"></span></div><div class="css-1b8uj5v"><span class="fa fa-facebook"></span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-fcbn8c"><div class="css-1gj7nt">Improve article</div><a href="/drafts/8f6aa12d8eab878265a7/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/Kosei-Yoshida/items/8f6aa12d8eab878265a7/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/Kosei-Yoshida/items/8f6aa12d8eab878265a7/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/Kosei-Yoshida/items/8f6aa12d8eab878265a7/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/Kosei-Yoshida/items/8f6aa12d8eab878265a7.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div><div class="p-items_options"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_toc"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_main"><div class="css-helsa7"><div class="css-8qb8m4"><div class="css-2imjyh"><div class="css-he5w1s"><div class="css-70qvj9"><div class="css-3ojehk"><a href="/Kosei-Yoshida"><img class="css-100alwu eyfquo10" src="https://s3-ap-northeast-1.amazonaws.com/qiita-image-store/0/206591/ec95458225498b3b38288ee72ca33adcecf2fa3c/x_large.png?1591664178" width="24" height="24" loading="lazy"/></a></div><div class="css-1dtnjt5"><a href="/Kosei-Yoshida" class="css-10ougpm">@<!-- -->Kosei-Yoshida</a><div class="css-1ay9vb9"><span><meta content="2021-01-22T02:21:43Z"/><time dateTime="2021-07-30T02:25:23Z" class="css-m19uds">updated at 2021-07-30</time></span></div></div></div></div></div><h1 class="css-cgzq40">[C#]例外処理の利用方針があやふやだったので、勉強しなおした</h1><div class="css-1wa99t2"><span class="fa fa-tags mr-1of2 css-1l3zk9f" aria-hidden="true"></span><a href="/tags/csharp" class="css-4czcte">C#</a><a href="/tags/%e4%be%8b%e5%a4%96%e5%87%a6%e7%90%86" class="css-4czcte">例外処理</a></div></div><section class="it-MdContent"><div id="personal-public-article-body"><div>
<h1>
<span id="はじめに" class="fragment"></span><a href="#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB"><i class="fa fa-link"></i></a>はじめに</h1>

<p>自分は業務でC#を書いているのですが、今までかなりあやふやな知識で例外処理を使っていました。そこで、一度学びなおし、現時点での<strong>自分の中での「例外処理の利用方針」を固めておこうと思いました。</strong></p>

<p>学びなおすために色々調べた結論としては、<strong>自分の知りたかった例外処理の利用方針は<a href="https://ufcpp.net/study/csharp/misc_exception.html" rel="nofollow noopener" target="_blank">「++C++;」の「[雑記]例外の使い方」のページ</a>にとてもわかりやすくまとまっていました。</strong></p>

<p>ただ上のページを読んだうえで自分の言葉でもまとめておきたかったので、上のページを大幅に参考にさせてもらいつつ、自分なりの解釈やコード例などを付け加えてまとめたのがこの記事となります。</p>

<ul>
<li>この記事は個人の考えをまとめたものです。</li>
<li>この記事の内容はC#のバージョンについて特に意識していませんが、一部のコード例は古いバージョンのC#では使えない構文や機能を使っている可能性があります。</li>
</ul>

<h1>
<span id="cで提案されている例外処理の利用方針" class="fragment"></span><a href="#c%E3%81%A7%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%81%A6%E3%81%84%E3%82%8B%E4%BE%8B%E5%A4%96%E5%87%A6%E7%90%86%E3%81%AE%E5%88%A9%E7%94%A8%E6%96%B9%E9%87%9D"><i class="fa fa-link"></i></a>++C++;で提案されている例外処理の利用方針</h1>

<p>「<a href="https://ufcpp.net/study/csharp/misc_exception.html" rel="nofollow noopener" target="_blank">++C++;</a>」では大体以下のような方針での例外処理の利用が提案されていました。（自分の選択で抜粋 + 解釈を加えさせてもらってるので、原文そのままの引用になっていません。ちゃんと見たい方は<a href="https://ufcpp.net/study/csharp/misc_exception.html" rel="nofollow noopener" target="_blank">元ページ</a>を参照ください。）</p>

<p><strong>例外処理利用の基本ルール</strong></p>

<ul>
<li>「メソッドの定める結果を達成できないなら例外を投げる」</li>
<li>例外は3パターンあり、それぞれに対して次のような対策方針をとる</li>
</ul>

<p><strong>例外3パターンとその対策方針</strong></p>

<table>
<thead>
<tr>
<th>例外のパターン</th>
<th>具体例</th>
<th>対処法</th>
</tr>
</thead>
<tbody>
<tr>
<td>①利用法上の例外（利用者側が正しい使い方をしていれば回避できる例外）</td>
<td>・nullを渡して欲しくないメソッドの引数がnull になってる。(Sytem.ArgumentNullException)<br>・初期化がきちんと行わる前にクラスの操作が行われた。（System.InvalidOperationException）</td>
<td>・catchしない。発生しなくなるまでテストとデバッグを行う（※）<br>・できれば事前にチェックが行える仕組みをつくる</td>
</tr>
<tr>
<td>②発生は避けれないが復帰可能な例外</td>
<td>・System.IO.File.ReadAllText (File.Exsits()で事前確認していても、その後の実行までにファイルが消される可能性がある)<br>
</td>
<td>・対処可能ならcatchする。<br>・対処不可能（あるいは上位層に対処を任せた方が良い場合）なら、基本catchしない（※）</td>
</tr>
<tr>
<td>③対処のしようがない致命的な例外</td>
<td>・.NET Framework自体のエラー<br>・その他プログラムが実行不可能なもの</td>
<td>・catchしない（プログラムを停止させてよい）（※）</td>
</tr>
</tbody>
</table>

<p>（※）「catchしない」というのはcatchして握りつぶしたり、処理の方向を捻じ曲げたりしないという意味。一度catchし、処理途中のもののロールバックやログ出力を行った後、再throwするのは有り。</p>

<p>一言で方針をまとめるなら、「throwは遠慮なくして良いがcatchをするかどうかは状況をしっかり見て決めよう」、といったところでしょうか。</p>

<h1>
<span id="各パターンの詳細" class="fragment"></span><a href="#%E5%90%84%E3%83%91%E3%82%BF%E3%83%BC%E3%83%B3%E3%81%AE%E8%A9%B3%E7%B4%B0"><i class="fa fa-link"></i></a>各パターンの詳細</h1>

<p>上で見た例外処理3パターンについて、それぞれポイントや具体例などを見ていきます。</p>

<h2>
<span id="パターン利用法上の例外" class="fragment"></span><a href="#%E3%83%91%E3%82%BF%E3%83%BC%E3%83%B3%E5%88%A9%E7%94%A8%E6%B3%95%E4%B8%8A%E3%81%AE%E4%BE%8B%E5%A4%96"><i class="fa fa-link"></i></a>パターン①利用法上の例外</h2>

<p>利用者側が正しい使い方をしていれば回避できる例外です。<br>
<strong>このパターンのポイントは、「catchしない」ことです。</strong></p>

<p>コード例を示します。</p>

<div class="code-frame" data-lang="c#"><div class="highlight"><pre><code><span class="k">void</span> <span class="nf">Main</span><span class="p">()</span>
<span class="p">{</span>
    <span class="kt">string</span> <span class="n">name</span> <span class="p">=</span> <span class="k">null</span><span class="p">;</span>
    <span class="c1">// 引数にnullを渡さないことは、メソッド利用側で意識して避けられるのでcatchしない！　</span>
    <span class="nf">SayHelloTo</span><span class="p">(</span><span class="n">name</span><span class="p">);</span>
<span class="p">}</span>


<span class="k">void</span> <span class="nf">SayHelloTo</span><span class="p">(</span><span class="kt">string</span> <span class="n">name</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// nullを渡してほしくない引数にnullが入っている。（このままではメソッド定める結果を達成できない）</span>
    <span class="k">if</span><span class="p">(</span><span class="n">name</span> <span class="k">is</span> <span class="k">null</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">ArgumentNullException</span><span class="p">(</span><span class="s">$"</span><span class="p">{</span><span class="k">nameof</span><span class="p">(</span><span class="n">name</span><span class="p">)}</span><span class="s"> is null"</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">$"Hello, </span><span class="p">{</span><span class="n">name</span><span class="p">}</span><span class="s">"</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>上の例で、メソッド"SayHelloTo()"では、nullを渡して欲しくない引数"name"にnullが入っていた場合に例外をthrowしています。しかしメソッド利用側でcatchはしていません。<br>
<strong>catchを書いてないとなんとなくアプリケーションが止まりそうで怖い感じがしますが、ビビッてcatchを書いてはいけません。</strong>不正なパターンが起きなくなるまで、しっかりテストを行います。</p>

<p>さらに、このパターンに限らずですが、<strong>呼び出される側のメソッド（SayHelloTo()）は特に呼び出す側の事を意識する必要はありません。メソッドの処理を正常に行うための前提条件が整っていないなら遠慮なく例外を投げてよい</strong>です。<br>
（ただし、頻繁に例外が起きることが予想される場合は、処理コストが高くなるのを避けるため、後述するTry-Parseパターンの実装が好ましいです。）</p>

<p>また、どうしても変数"name"にnullが入る可能性を排除できない場合もcatchは書きません。以下のように、事前チェックをして回避します。</p>

<div class="code-frame" data-lang="c#"><div class="highlight"><pre><code><span class="k">void</span> <span class="nf">Main</span><span class="p">()</span>
<span class="p">{</span>
   <span class="kt">string</span> <span class="n">name</span> <span class="p">=</span> <span class="k">null</span><span class="p">;</span>
   <span class="c1">// 引数にnullを渡さないことは、メソッド利用側で意識して避けられるのでcatchしない！　</span>
   <span class="c1">// nullチェックはメソッド利用側でできることなので、チェックする。</span>
    <span class="k">if</span><span class="p">(!(</span><span class="n">name</span> <span class="k">is</span> <span class="k">null</span><span class="p">))</span>
    <span class="p">{</span>
        <span class="nf">SayHelloTo</span><span class="p">(</span><span class="n">name</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">$"Cannot execute </span><span class="p">{</span><span class="k">nameof</span><span class="p">(</span><span class="n">SayHelloTo</span><span class="p">)}</span><span class="s">. Because the </span><span class="p">{</span><span class="k">nameof</span><span class="p">(</span><span class="n">name</span><span class="p">)}</span><span class="s"> is null)"</span><span class="p">;</span>
    <span class="p">}</span>   
<span class="p">}</span>

<span class="k">void</span> <span class="nf">SayHelloTo</span><span class="p">(</span><span class="kt">string</span> <span class="n">name</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">//（実装省略）</span>
<span class="p">}</span>
</code></pre></div></div>

<p>この際、例外を出さないための事前チェック（上のコード例でいう、!(name is null)）がメソッド利用側では難しい場合があります。その場合は、後述のTester-Doerパターンのように、事前チェックをするためのメソッドを用意します。</p>

<h4>
<span id="パターン利用法上の例外のまとめ" class="fragment"></span><a href="#%E3%83%91%E3%82%BF%E3%83%BC%E3%83%B3%E5%88%A9%E7%94%A8%E6%B3%95%E4%B8%8A%E3%81%AE%E4%BE%8B%E5%A4%96%E3%81%AE%E3%81%BE%E3%81%A8%E3%82%81"><i class="fa fa-link"></i></a>パターン①利用法上の例外のまとめ</h4>

<ul>
<li>メソッドの処理が上手く実行できない場合は、遠慮なくthrowする。</li>
<li>ビビッてcatchを書くのではなく、デバッグ・テストを例外がでなくなるまで行う。</li>
</ul>

<h3>
<span id="パターン発生は避けれないが復帰可能な例外" class="fragment"></span><a href="#%E3%83%91%E3%82%BF%E3%83%BC%E3%83%B3%E7%99%BA%E7%94%9F%E3%81%AF%E9%81%BF%E3%81%91%E3%82%8C%E3%81%AA%E3%81%84%E3%81%8C%E5%BE%A9%E5%B8%B0%E5%8F%AF%E8%83%BD%E3%81%AA%E4%BE%8B%E5%A4%96"><i class="fa fa-link"></i></a>パターン②発生は避けれないが復帰可能な例外</h3>

<p>例えば簡単なRequestを送るメソッドを考えてみます。</p>

<div class="code-frame" data-lang="c#"><div class="highlight"><pre><code><span class="k">async</span> <span class="n">Task</span> <span class="nf">Main</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">Uri</span> <span class="n">uri</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Uri</span><span class="p">(</span><span class="s">$"http://hogehoge/api/message"</span><span class="p">);</span>
    <span class="kt">var</span> <span class="n">msg</span> <span class="p">=</span> <span class="k">await</span> <span class="nf">GetMessageAsync</span><span class="p">(</span><span class="n">uri</span><span class="p">);</span>
    <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">msg</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">private</span> <span class="k">static</span> <span class="n">HttpClient</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">HttpClient</span><span class="p">();</span>

<span class="k">async</span> <span class="n">Task</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span> <span class="nf">GetMessageAsync</span><span class="p">(</span><span class="n">Uri</span> <span class="n">uri</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">uri</span> <span class="k">is</span> <span class="k">null</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">ArgumentNullException</span><span class="p">(</span><span class="s">$"</span><span class="p">{</span><span class="k">nameof</span><span class="p">(</span><span class="n">uri</span><span class="p">)}</span><span class="s"> is null."</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="c1">// HttpRequestExceptionがthrowされる可能性がある。</span>
    <span class="k">return</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="nf">GetStringAsync</span><span class="p">(</span><span class="n">uri</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>上の例では、"client.GetStringAsync()"でHttpRequestExceptionがthrowされる可能性がありますが、多くの場合これは呼び出す側で事前に予期して避けづらい例外です。</p>

<p>しかしこのエラーは、単にリクエストに失敗したことを表示すれば問題ないので、復帰できるものです。<br>
以下のように復帰しましょう。</p>

<div class="code-frame" data-lang="c#"><div class="highlight"><pre><code><span class="k">async</span> <span class="n">Task</span> <span class="nf">Main</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">Uri</span> <span class="n">uri</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Uri</span><span class="p">(</span><span class="s">$"http://hogehoge/api/message"</span><span class="p">);</span>

    <span class="k">try</span>
    <span class="p">{</span>
        <span class="kt">var</span> <span class="n">msg</span> <span class="p">=</span> <span class="k">await</span> <span class="nf">GetMessageAsync</span><span class="p">(</span><span class="n">uri</span><span class="p">);</span>
        <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">msg</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="c1">// 基本的に具体的な例外クラスをcatchする。catch (Exception ex)とは書かない。</span>
    <span class="k">catch</span> <span class="p">(</span><span class="n">HttpRequestException</span> <span class="n">ex</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">$"Failed to get message. Error message : </span><span class="p">{</span><span class="n">ex</span><span class="p">.</span><span class="n">Message</span><span class="p">}</span><span class="s">"</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">private</span> <span class="k">static</span> <span class="n">HttpClient</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">HttpClient</span><span class="p">();</span>

<span class="k">async</span> <span class="n">Task</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span> <span class="nf">GetMessageAsync</span><span class="p">(</span><span class="n">Uri</span> <span class="n">uri</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">uri</span> <span class="k">is</span> <span class="k">null</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">ArgumentNullException</span><span class="p">(</span><span class="s">$"</span><span class="p">{</span><span class="k">nameof</span><span class="p">(</span><span class="n">uri</span><span class="p">)}</span><span class="s"> is null."</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="c1">// HttpRequestExceptionがthrowされる可能性がある。</span>
    <span class="k">return</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="nf">GetStringAsync</span><span class="p">(</span><span class="n">uri</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>特に難しいところはないですね。HttpRequestExceptionを指定でcatchし、それに対する復帰処理（上の例だと失敗メッセージの表示）を行うだけです。</p>

<p>一つポイントとしては、<strong>基本的に具体的な例外の種類（Exception派生クラス）を指定してあげる</strong>ことです。<br>
なぜなら、"catch (Exception ex)"とのように派生元のExceptionクラスを丸ごとcatchしてしまうと、メソッド内でどんなエラーが起きたかがわからず、きちんと復帰できているとは言えないからです。<br>
（ただし、catch句内でExceptionを再throwする、別の種類の例外に変換する（元のExceptionはinnerExceptionにする）といった場合は、派生元のExceptionクラスを丸ごとcatchしてもOKです。）</p>

<p>また、このパターンの悩みどころは、どこで復帰処理を書くかが選べるところです。<br>
上の例では、"Main()"の中でcatchを使い復帰処理を書きましたが、以下のように"GetMessageAsync()"の中で復帰処理を書くこともできます。</p>

<div class="code-frame" data-lang="c#"><div class="highlight"><pre><code><span class="k">async</span> <span class="n">Task</span> <span class="nf">Main</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">Uri</span> <span class="n">uri</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Uri</span><span class="p">(</span><span class="s">$"http://hogehoge/api/message"</span><span class="p">);</span>
    <span class="kt">var</span> <span class="n">msg</span> <span class="p">=</span> <span class="k">await</span> <span class="nf">GetMessageAsync</span><span class="p">(</span><span class="n">uri</span><span class="p">);</span>
    <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">msg</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">private</span> <span class="k">static</span> <span class="n">HttpClient</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">HttpClient</span><span class="p">();</span>

<span class="k">async</span> <span class="n">Task</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span> <span class="nf">GetMessageAsync</span><span class="p">(</span><span class="n">Uri</span> <span class="n">uri</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">uri</span> <span class="k">is</span> <span class="k">null</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">ArgumentNullException</span><span class="p">(</span><span class="s">$"</span><span class="p">{</span><span class="k">nameof</span><span class="p">(</span><span class="n">uri</span><span class="p">)}</span><span class="s"> is null."</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">try</span>
    <span class="p">{</span>
        <span class="c1">// HttpRequestExceptionがthrowされる可能性がある。</span>
        <span class="k">return</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="nf">GetStringAsync</span><span class="p">(</span><span class="n">uri</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">catch</span> <span class="p">(</span><span class="n">HttpRequestException</span> <span class="n">ex</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// このやり方だと、関数呼び出し側で、処理が失敗したかの判断がしづらいので、</span>
        <span class="c1">// 関数自体をTry-Parseパターンにした方がよい。</span>
        <span class="k">return</span> <span class="s">$"Failed to get message. Error message : </span><span class="p">{</span><span class="n">ex</span><span class="p">.</span><span class="n">Message</span><span class="p">}</span><span class="s">"</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>上の例では、"GetMessageAsync()"の中で、catchを使い復帰処理を書いています。</p>

<p>このように、<strong>このパターン②における復帰処理は、コード中のどの部分でcatchをするかある程度選べてしまいます。メソッドの責務（行いたい処理は何か）を明確にし、適切な呼び出し箇所でcatch,復帰処理を行いましょう。</strong></p>

<p>ちなみに今回の例だと、"Main()"側でcatchを書く方が良いかなと個人的には思います。<br>
なぜなら、上の例で、復帰処理として"Failed ~"という文字列を返していますが、これではメソッド呼び出し側から見て処理が成功したかどうか判別しづらいからです。、<br>
（もし、"GetMessageAsync()"側で復帰処理を行いたい場合は、後述のTry-Parseパターンをつかうなどして処理の成功or失敗をメソッド呼び出し側にわかりやすくする工夫をした方が良いでしょう。）</p>

<h4>
<span id="パターンに発生は避けれないが復帰可能な例外" class="fragment"></span><a href="#%E3%83%91%E3%82%BF%E3%83%BC%E3%83%B3%E3%81%AB%E7%99%BA%E7%94%9F%E3%81%AF%E9%81%BF%E3%81%91%E3%82%8C%E3%81%AA%E3%81%84%E3%81%8C%E5%BE%A9%E5%B8%B0%E5%8F%AF%E8%83%BD%E3%81%AA%E4%BE%8B%E5%A4%96"><i class="fa fa-link"></i></a>パターン②に発生は避けれないが復帰可能な例外</h4>

<ul>
<li>きちんと復帰できる場合はcatchして復帰してやる。</li>
<li>具体的なException派生クラスをcatchすることを意識する。</li>
<li>どこで復帰処理を行うのかが悩みどころ。メソッドの責務を明確にして判断する。</li>
</ul>

<h3>
<span id="パターン対処のしようがない致命的な例外" class="fragment"></span><a href="#%E3%83%91%E3%82%BF%E3%83%BC%E3%83%B3%E5%AF%BE%E5%87%A6%E3%81%AE%E3%81%97%E3%82%88%E3%81%86%E3%81%8C%E3%81%AA%E3%81%84%E8%87%B4%E5%91%BD%E7%9A%84%E3%81%AA%E4%BE%8B%E5%A4%96"><i class="fa fa-link"></i></a>パターン③対処のしようがない致命的な例外</h3>

<p>このパターンは特に意識して対処する必要ないと思います。<br>
自分はあまり良い例が思い浮かばないのですが、<a href="https://ufcpp.net/study/csharp/misc_exception.html" rel="nofollow noopener" target="_blank">++C++;-例外の使い方</a>では.NET Framework自体のエラーが例としてあげられていました。</p>

<h1>
<span id="その他の雑多な話" class="fragment"></span><a href="#%E3%81%9D%E3%81%AE%E4%BB%96%E3%81%AE%E9%9B%91%E5%A4%9A%E3%81%AA%E8%A9%B1"><i class="fa fa-link"></i></a>その他の雑多な話</h1>

<p>ここまでで基本的な方針は書きました。</p>

<p>ただ実践では理論通り書けない部分も多く、方針があったとしても例外処理の書き方に迷う部分もあると思います。</p>

<p>そこでここからは、例外処理に関連して使うテクニックや、理想通りいかない現実的なコードの話などを、つらつらと書きます。（あまり書く項目に一貫性はないです。）</p>

<p>自分の経験・上の方針をもとに自分が昔書いたコードを修正してみて気づいたこと・C#の有名OSSである<a href="https://www.newtonsoft.com/json" rel="nofollow noopener" target="_blank">Json.NET</a>のコードを観察して気づいたこと、の3つを内容のベースとして書いています。</p>

<h3>
<span id="tester-doerパターン" class="fragment"></span><a href="#tester-doer%E3%83%91%E3%82%BF%E3%83%BC%E3%83%B3"><i class="fa fa-link"></i></a>Tester-Doerパターン</h3>

<p>パターン①で利用法上の例外（≒業務エラー）はcatchせず、メソッド呼び出し側でエラーパターンの事前チェックをすると書きました。しかし、そもそも例外は基本的には発生しない方が望ましいです。<br>
なので、事前チェック用のメソッドを用意してやるのも一つの手です。そのような実装の仕方をTester-Doerパターンと言います。（Tester=事前チェック用メソッド、Doer=実行したいメソッド）</p>

<div class="code-frame" data-lang="c#"><div class="highlight"><pre><code><span class="k">void</span> <span class="nf">Main</span><span class="p">()</span>
<span class="p">{</span>
    <span class="kt">string</span> <span class="n">name</span> <span class="p">=</span> <span class="s">"Taro"</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nf">CanExcecuteMethodSayHelloTo</span><span class="p">(</span><span class="n">name</span><span class="p">))</span>
    <span class="p">{</span>
        <span class="nf">SayHelloTo</span><span class="p">(</span><span class="n">name</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Tester</span>
<span class="kt">bool</span> <span class="nf">CanExcecuteMethodSayHelloTo</span><span class="p">(</span><span class="kt">string</span> <span class="n">name</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="p">!(</span><span class="n">name</span> <span class="k">is</span> <span class="k">null</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// Doer</span>
<span class="k">void</span> <span class="nf">SayHelloTo</span><span class="p">(</span><span class="kt">string</span> <span class="n">name</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">name</span> <span class="k">is</span> <span class="k">null</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">ArgumentNullException</span><span class="p">(</span><span class="s">$"</span><span class="p">{</span><span class="k">nameof</span><span class="p">(</span><span class="n">name</span><span class="p">)}</span><span class="s"> is null"</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">$"Hello, </span><span class="p">{</span><span class="n">name</span><span class="p">}</span><span class="s">"</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>この例のnullチェックぐらい簡単な確認ならTesterを用意するまでもないですが。</p>

<p>.NETのクラスでも、このTester-Doerパターンは見られますね。  </p>

<ul>
<li>System.Collection.Generics.ICollectionのIsReadOnly</li>
<li>System.IO.StreamのCanRead, CanWrite</li>
</ul>

<h3>
<span id="try-parseパターン" class="fragment"></span><a href="#try-parse%E3%83%91%E3%82%BF%E3%83%BC%E3%83%B3"><i class="fa fa-link"></i></a>Try-Parseパターン</h3>

<p>この記事のはじめの方に「メソッドの定める結果を達成できないなら例外を投げる」と書きました。<br>
しかし例外は重い処理なので、それなりの発生頻度が予想される場合には使いたくありません。その場合は、Try-Parseパターンが使えます。</p>

<p>Try-Parseパターンは、メソッドとしては例外をthrowせず、boolで結果を返す方法です。</p>

<div class="code-frame" data-lang="c#"><div class="highlight"><pre><code><span class="k">void</span> <span class="nf">Main</span><span class="p">()</span>
<span class="p">{</span>
    <span class="kt">string</span> <span class="n">path</span> <span class="p">=</span> <span class="s">@"filepath"</span><span class="p">;</span>

    <span class="c1">// 戻り値としてはboolが返ってくるので、結果はout引数で受け取る。</span>
    <span class="kt">var</span> <span class="n">succeeded</span> <span class="p">=</span> <span class="nf">TryGetFileData</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="k">out</span> <span class="kt">var</span> <span class="n">data</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">succeeded</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">$"Suceeded to get data from </span><span class="p">{</span><span class="n">path</span><span class="p">}</span><span class="s">"</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kt">bool</span> <span class="nf">TryGetFileData</span><span class="p">(</span><span class="kt">string</span> <span class="n">path</span><span class="p">,</span> <span class="k">out</span> <span class="kt">byte</span><span class="p">[]</span> <span class="n">fileBytes</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">try</span>
    <span class="p">{</span>
        <span class="n">fileBytes</span> <span class="p">=</span> <span class="n">File</span><span class="p">.</span><span class="nf">ReadAllBytes</span><span class="p">(</span><span class="n">path</span><span class="p">);</span>
        <span class="k">return</span> <span class="k">true</span><span class="p">;</span>

    <span class="p">}</span>
    <span class="k">catch</span> <span class="p">(</span><span class="n">IOException</span> <span class="n">ex</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">$"Failed to get file data. Error : </span><span class="p">{</span><span class="n">ex</span><span class="p">.</span><span class="n">Message</span><span class="p">}</span><span class="s"> "</span><span class="p">);</span>
        <span class="c1">// throwはせず、戻り値でfalseを返し処理の失敗を知らせる。</span>
        <span class="n">fileBytes</span> <span class="p">=</span> <span class="k">null</span><span class="p">;</span>
        <span class="k">return</span> <span class="k">false</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>"TryGetFileData()"メソッドでは、処理が成功したかどうかを、例外を投げて知らせる代わりに、戻り値のboolで知らせています。<br>
また、本来なら戻り値として受け取っていた結果はout引数として受け渡します。（処理失敗時は、null or 適当な失敗を表す値を代入。）</p>

<p>上述したように、Try-Parseパターンには、例外を投げるのと比較して、処理失敗時のコストが低いというメリットがあります。ただし、Try-Parseパターンには、メソッド呼び出し側に例外処理を強制できないというデメリットもあります。それを理解した上で、例外を投げるのか、Try-Parseパターンを使うかどうか判断しましょう。</p>

<p><strong>Try-Parseパターンにはメリット・デメリットがある。場合によって例外を投げるのと使い分けるとよい。</strong></p>

<ul>
<li>Try-Parseパターンのメリット：処理失敗時のコストが例外を投げるより低い</li>
<li>Try-Parseパターンのデメリット：メソッド呼び出し側に例外処理を強制できない</li>
</ul>

<p>Try-Parseパターンは、.NETのクラスだと、以下でも使われていますね。<br>
このパターンの場合は、Try~という名前のメソッドにするのが慣習ですね。</p>

<ul>
<li>System.Int32のTryparseメソッド</li>
</ul>

<h4>
<span id="非同期メソッドの場合" class="fragment"></span><a href="#%E9%9D%9E%E5%90%8C%E6%9C%9F%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E3%81%AE%E5%A0%B4%E5%90%88"><i class="fa fa-link"></i></a>非同期メソッドの場合</h4>

<p>非同期メソッドの場合、out引数が使えません。<br>
その場合は、タプルで結果を返すなどして工夫しましょう。</p>

<div class="code-frame" data-lang="c#"><div class="highlight"><pre><code><span class="k">async</span> <span class="n">Task</span><span class="p">&lt;(</span><span class="kt">bool</span><span class="p">,</span> <span class="kt">string</span><span class="p">)&gt;</span> <span class="nf">TryGetMessageAsync</span><span class="p">(</span><span class="n">Uri</span> <span class="n">uri</span><span class="p">)</span> <span class="p">{</span> <span class="c1">//(省略）}</span>
</code></pre></div></div>

<h3>
<span id="全例外クラス継承元のexceptionクラスをcatchする場合" class="fragment"></span><a href="#%E5%85%A8%E4%BE%8B%E5%A4%96%E3%82%AF%E3%83%A9%E3%82%B9%E7%B6%99%E6%89%BF%E5%85%83%E3%81%AEexception%E3%82%AF%E3%83%A9%E3%82%B9%E3%82%92catch%E3%81%99%E3%82%8B%E5%A0%B4%E5%90%88"><i class="fa fa-link"></i></a>全例外クラス継承元のExceptionクラスをcatchする場合</h3>

<p>catch句では、対象となるException派生クラスを指定できる一方で、以下のように全ての例外クラスの継承元となるExceptionクラスも指定できてしまいます。（強制的に全ての例外をcatchすることができてしまう。）<br>
これは場合によっては、適切な処理が行われず例外の発生が見えにくくなり、不具合の原因特定を難しくすることにつながってしまいます。</p>

<div class="code-frame" data-lang="c#"><div class="highlight"><pre><code><span class="k">void</span> <span class="nf">CatchAllException</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">try</span>
    <span class="p">{</span>
        <span class="c1">// 何かしらのエラーが起きるメソッド。</span>
        <span class="nf">RaiseError</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="c1">// 全ての例外をcatchする。</span>
    <span class="c1">// 復帰処理などを行う必要がある例外が発生した場合、後から原因が特定しにくいバグとなり得る。</span>
    <span class="k">catch</span> <span class="p">(</span><span class="n">Exception</span> <span class="n">ex</span><span class="p">)</span>  
    <span class="p">{</span>
        <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">$"Error : </span><span class="p">{</span><span class="n">ex</span><span class="p">.</span><span class="n">Message</span><span class="p">}</span><span class="s">"</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>なので方針としては、<strong>派生大元のExceptionは基本的にそのままcatchしない。catchする場合は特定の場合のみ</strong>とします。<br>
では、catchしてよいのはどのような場合かを見ていきます。</p>

<p><strong>派生大元のExceptionクラスをcatchしてよいとき</strong></p>

<ol>
<li>再度throwするとき。（catchの目的はログ出力のためなど。再throwの仕方に注意） </li>
<li>別の例外に変換するとき。</li>
<li>独自のエラーハンドリングをし、exceptionは再throwしないとき。（きちんとエラーハンドリングがされることが条件）</li>
</ol>

<p>それぞれコード例を見てみます。</p>

<div class="code-frame" data-lang="c#"><div class="highlight"><pre><code><span class="c1">// ログを出力のためにcatchし、再throwする。</span>
<span class="k">void</span> <span class="nf">Rethrow</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">try</span>
    <span class="p">{</span>
        <span class="nf">RaiseError</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="k">catch</span> <span class="p">(</span><span class="n">Exception</span> <span class="n">ex</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">$"Failed to </span><span class="p">{</span><span class="k">nameof</span><span class="p">(</span><span class="n">Rethrow</span><span class="p">)}</span><span class="s">. : </span><span class="p">{</span><span class="n">ex</span><span class="p">.</span><span class="n">Message</span><span class="p">}</span><span class="s">"</span><span class="p">);</span>
        <span class="c1">// throw exとは書いてはいけない。StackTraceが消えるため。</span>
        <span class="k">throw</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// 別の例外に変換する</span>
<span class="k">void</span> <span class="nf">Convert</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">try</span>
    <span class="p">{</span>
        <span class="nf">RaiseError</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="k">catch</span> <span class="p">(</span><span class="n">Exception</span> <span class="n">ex</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// catchしたExceptionはInnerExceptionにする。</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">OriginalException</span><span class="p">(</span><span class="s">$"Original exception occurred"</span><span class="p">,</span> <span class="n">ex</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// 独自のエラーハンドリングをする。</span>
<span class="k">void</span> <span class="nf">ErrorHandleSelf</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">try</span>
    <span class="p">{</span>
        <span class="nf">RaiseError</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="k">catch</span> <span class="p">(</span><span class="n">Exception</span> <span class="n">ex</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// HandleErrorメソッドできちんと処理が行われることが前提。極力使わない。</span>
        <span class="nf">HandleError</span><span class="p">(</span><span class="n">ex</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h4>
<span id="1-再度throwするとき" class="fragment"></span><a href="#1-%E5%86%8D%E5%BA%A6throw%E3%81%99%E3%82%8B%E3%81%A8%E3%81%8D"><i class="fa fa-link"></i></a>1 再度throwするとき。</h4>

<p>ログ出力などの任意の処理を行った後、再度throwします。このとき、"throw ex"と書くとStackTraceが消えてしまうため、"throw"とだけ書きます。</p>

<h4>
<span id="2-別の例外に変換するとき" class="fragment"></span><a href="#2-%E5%88%A5%E3%81%AE%E4%BE%8B%E5%A4%96%E3%81%AB%E5%A4%89%E6%8F%9B%E3%81%99%E3%82%8B%E3%81%A8%E3%81%8D"><i class="fa fa-link"></i></a>2 別の例外に変換するとき。</h4>

<p>そもそもExceptionをそのままcatchすることは例外が握りつぶされてしまうことが一番の問題なので、別の例外に変換するのはOKです。ただし、変換前の例外情報も貴重なため、InnerExceptionとして残しておきます。<br>
このパターン使われるのは以下の場合が多いかなと思います。</p>

<ul>
<li>より適切な種類の例外に置き換えれるとき（より具体的な例外の方が不具合の原因を特定しやすい）</li>
<li>ライブラリ的に扱われるレイヤーで、そのライブラリから出される例外を統一したいとき</li>
</ul>

<h4>
<span id="3-独自のエラーハンドリングをしexceptionは再throwしないとき" class="fragment"></span><a href="#3-%E7%8B%AC%E8%87%AA%E3%81%AE%E3%82%A8%E3%83%A9%E3%83%BC%E3%83%8F%E3%83%B3%E3%83%89%E3%83%AA%E3%83%B3%E3%82%B0%E3%82%92%E3%81%97exception%E3%81%AF%E5%86%8Dthrow%E3%81%97%E3%81%AA%E3%81%84%E3%81%A8%E3%81%8D"><i class="fa fa-link"></i></a>3. 独自のエラーハンドリングをし、exceptionは再throwしないとき。</h4>

<p>多くの場合は全ての例外をカバーすることは難しいため、このやり方は推奨ではないです。<br>
ただし、開発プロジェクト内でエラーハンドリングのやり方が統一されている場合などには使われることがあるかもしれません。</p>

<h3>
<span id="独自の例外クラスについて" class="fragment"></span><a href="#%E7%8B%AC%E8%87%AA%E3%81%AE%E4%BE%8B%E5%A4%96%E3%82%AF%E3%83%A9%E3%82%B9%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>独自の例外クラスについて</h3>

<p>C#では、Exceptionクラスを継承することによって、独自の例外クラスを作成できます。</p>

<div class="code-frame" data-lang="c#"><div class="highlight"><pre><code><span class="k">class</span> <span class="nc">OriginalException</span> <span class="p">:</span> <span class="n">Exception</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="nf">OriginalException</span><span class="p">()</span> <span class="p">{</span> <span class="cm">/*(実装省略）*/</span> <span class="p">}</span>
    <span class="k">public</span> <span class="nf">OriginalException</span><span class="p">(</span><span class="kt">string</span><span class="p">?</span> <span class="n">paramName</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/*(実装省略）*/</span> <span class="p">}</span>
    <span class="k">public</span> <span class="nf">OriginalException</span><span class="p">(</span><span class="kt">string</span><span class="p">?</span> <span class="n">message</span><span class="p">,</span> <span class="n">Exception</span><span class="p">?</span> <span class="n">innerException</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/*(実装省略）*/</span> <span class="p">}</span>
    <span class="k">public</span> <span class="nf">OriginalException</span><span class="p">(</span><span class="kt">string</span><span class="p">?</span> <span class="n">paramName</span><span class="p">,</span> <span class="kt">string</span><span class="p">?</span> <span class="n">message</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/*(実装省略）*/</span> <span class="p">}</span>
    <span class="k">protected</span> <span class="nf">OriginalException</span><span class="p">(</span><span class="n">SerializationInfo</span> <span class="n">info</span><span class="p">,</span> <span class="n">StreamingContext</span> <span class="n">context</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/*(実装省略）*/</span> <span class="p">}</span>
<span class="p">}</span>  
</code></pre></div></div>

<p>独自例外クラスを作成するべきタイミングについては、<a href="https://docs.microsoft.com/ja-jp/dotnet/standard/exceptions/how-to-create-user-defined-exceptions" rel="nofollow noopener" target="_blank">Microsoftの公式ドキュメント-ユーザー定義の例外を作成する方法</a>に書いているものそのままです。</p>

<blockquote>
<p>.NET では、基底クラス Exception から最終的に派生した例外クラスの階層構造を提供します。 ただし、定義済みの例外のいずれも要件を満たさない場合は、Exception クラスから派生することによって、独自の例外クラスを作成できます。</p>
</blockquote>

<p>つまり、<strong>独自の例外クラスは、積極的につくるものではなく、.NET標準で用意されてる例外クラスに該当するものがない場合のみ作成する</strong>と覚えておけば大丈夫です。<br>
その他、独自例外を定義した方が、明らかに利用者側の復帰処理などに役立つ場合、あるいは一塊のコード内（ライブラリなど）で一貫した例外を使用したい場合などは独自例外をつくることを検討しましょう。</p>

<p>ちなみにですが、C#でJsonを簡単に取り扱えるライブラリ<a href="https://www.newtonsoft.com/json" rel="nofollow noopener" target="_blank">Json.NET</a>では、"JsonException"という独自例外クラスが定義されており、ライブラリ利用側には"JsonException"（実際にはいくつかあるその派生クラス）が渡されるようになっています。独自例外クラスの使われ方について実際のコードが見たいかたは、参照してみると良いと思います。（<a href="https://github.com/JamesNK/Newtonsoft.Json/blob/master/Src/Newtonsoft.Json/JsonException.cs" rel="nofollow noopener" target="_blank">JsonExceptionクラス</a>)</p>

<p>また、独自例外作る際は、作法として定義しておくべきメソッドがいくつかあります。<a href="https://docs.microsoft.com/ja-jp/dotnet/api/system.exception?view=net-5.0#implementing-custom-exceptions" rel="nofollow noopener" target="_blank">ドキュメント</a>を参考にして定義しましょう。</p>

<h3>
<span id="xmlドキュメントコメント" class="fragment"></span><a href="#xml%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%82%B3%E3%83%A1%E3%83%B3%E3%83%88"><i class="fa fa-link"></i></a>XMLドキュメントコメント</h3>

<p>C#では、メソッドやクラスなどに対してXML形式でドキュメントコメントを書けます。<br>
メソッドのコメントでは、発生する可能性のある例外を示すためのタグ"&lt;exception&gt;"が用意されています。<br>
メソッド利用側の実装の助けになるので積極的に書きましょう。</p>

<div class="code-frame" data-lang="c#"><div class="highlight"><pre><code><span class="c1">/// &lt;summary&gt;</span>
<span class="c1">/// Show &lt;paramref name="arg"/&gt; on standard output.</span>
<span class="c1">/// &lt;/summary&gt;</span>
<span class="c1">/// &lt;exception cref="ArgumentException"&gt;Throw if &lt;paramref name="arg"/&gt; is null or whitespace.&lt;/exception&gt;</span>
<span class="k">void</span> <span class="nf">Print</span><span class="p">(</span><span class="kt">string</span> <span class="n">arg</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="kt">string</span><span class="p">.</span><span class="nf">IsNullOrWhiteSpace</span><span class="p">(</span><span class="n">arg</span><span class="p">))</span>
    <span class="p">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">ArgumentException</span><span class="p">(</span><span class="s">$"</span><span class="p">{</span><span class="k">nameof</span><span class="p">(</span><span class="n">arg</span><span class="p">)}</span><span class="s"> is null or whitespace. Please substitute proper value."</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">$"Output : </span><span class="p">{</span><span class="n">arg</span><span class="p">}</span><span class="s">"</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<h3>
<span id="メソッド固有のルールではなく例外処理を使う理由" class="fragment"></span><a href="#%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E5%9B%BA%E6%9C%89%E3%81%AE%E3%83%AB%E3%83%BC%E3%83%AB%E3%81%A7%E3%81%AF%E3%81%AA%E3%81%8F%E4%BE%8B%E5%A4%96%E5%87%A6%E7%90%86%E3%82%92%E4%BD%BF%E3%81%86%E7%90%86%E7%94%B1"><i class="fa fa-link"></i></a>メソッド固有のルールではなく、例外処理を使う理由</h3>

<p>Try-Parseパターンのように、例外処理構文を使わなくてもメソッド処理の成功・失敗を伝える方法はあります。<br>
ただしその場合には、メソッド固有のルール（例えばTry-Parseパターンでは、成功・失敗を戻り値とするいうルール）を決めていることによるデメリットがあります。<br>
この点についても、<a href="https://ufcpp.net/study/csharp/misc_exception.html" rel="nofollow noopener" target="_blank">++C++;-例外の使い方</a>で簡潔にまとめられているので引用させていだきます。（原文では、文書で書かれているものを私の言葉で少し書き直し、表形式にしています。）</p>

<table>
<thead>
<tr>
<th>メソッド固有のルールを使うデメリット</th>
<th>例外処理を使うメリット</th>
</tr>
</thead>
<tbody>
<tr>
<td>例外の検出が面倒。<br>（呼び出すメソッド固有のルールを知っておく必要がある。）</td>
<td>throw, try-catch文に処理の仕方が統一されている。</td>
</tr>
<tr>
<td>正常動作部と例外処理部の区別が分かりにくい。</td>
<td>正常動作部と例外処理部の区別が分かりやすい。<br>try の中には動作が正常な時の処理が、 catch の中には例外発生時の対処のみが書かれる。</td>
</tr>
<tr>
<td>メソッド利用者に例外処理を行うことを強制出来ない。</td>
<td>メソッド利用側に例外処理させることを強制できる。<br>（例外発生時に処理が行われないと、アプリが終了する。）</td>
</tr>
<tr>
<td>メソッドを呼び出すたびに例外処理用のコードを書く必要がある。</td>
<td>例外処理部（catch 節）や、正常・例外問わず必ず実行する必要がある部分（finaly 節）が一か所にまとまる。</td>
</tr>
</tbody>
</table>

<p>このように、例外処理構文を使うことにより、メソッド固有のルールによるデメリットを大きくカバーすることができます。<br>
なので実装の際は、<strong>まずは例外処理構文を使うことを検討、何か特別な理由があるならメソッド固有のルールを使う</strong>という方針でよいでしょう。</p>

<h3>
<span id="業務エラーには例外処理を使ってはいけない" class="fragment"></span><a href="#%E6%A5%AD%E5%8B%99%E3%82%A8%E3%83%A9%E3%83%BC%E3%81%AB%E3%81%AF%E4%BE%8B%E5%A4%96%E5%87%A6%E7%90%86%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E3%81%AF%E3%81%84%E3%81%91%E3%81%AA%E3%81%84"><i class="fa fa-link"></i></a>業務エラーには例外処理を使ってはいけない？</h3>

<p>例外処理の利用方針パターン①で、利用法上の例外について説明しました。<br>
ただ例外の利用方法について調べていると、「業務エラー（≒利用方上の例外）には例外処理を用いてはいけない」という記述をよく見かけます。</p>

<p><strong>個人的には「業務エラーでもthrowはしてよい、ただしcatchはしない」という方針で良いと思います。</strong><br>
というのも、前節で書いた、throwを使わない場合に発生する「メソッド呼び出し側に例外処理を強制できない」といデメリットを避けるためです。</p>

<h4>
<span id="ossではどうなってるか" class="fragment"></span><a href="#oss%E3%81%A7%E3%81%AF%E3%81%A9%E3%81%86%E3%81%AA%E3%81%A3%E3%81%A6%E3%82%8B%E3%81%8B"><i class="fa fa-link"></i></a>OSSではどうなってるか</h4>

<p><a href="https://www.newtonsoft.com/json" rel="nofollow noopener" target="_blank">Json.NET</a>ではどのように例外処理が使われているか軽く調べてみました。<br>
以下は、<a href="https://github.com/JamesNK/Newtonsoft.Json/tree/master/Src/Newtonsoft.Json" rel="nofollow noopener" target="_blank">ソリューション内のNewtonsoft.Jsonプロジェクト</a>で使われいてる、throw, catchの大体の数になります。（grepでコード内のコメントも拾ってしまっているので、正確な数ではないです。）</p>

<div class="code-frame" data-lang="bash"><div class="highlight"><pre><code>:~/Json.NET/Src/Newtonsoft.Json<span class="nv">$ </span><span class="nb">grep</span> <span class="nt">-r</span> <span class="nt">-n</span> <span class="s2">"throw new"</span> | <span class="nb">wc</span> <span class="nt">-l</span>    371
:~/Json.NET/Src/Newtonsoft.Json<span class="nv">$ </span><span class="nb">grep</span> <span class="nt">-r</span> <span class="nt">-n</span> <span class="s2">"catch"</span> | <span class="nb">wc</span> <span class="nt">-l</span>　　　51
</code></pre></div></div>

<p>見てわかるように、新しい例外をthrowしている数に対してcatchしている数が少ないです。<br>
実際のコードを見てみても、概ね「業務エラーでもthrowはしてよい、ただしcatchはしない」という方針で書かれているのかなぁという印象を受けました。</p>

<h1>
<span id="おわりに" class="fragment"></span><a href="#%E3%81%8A%E3%82%8F%E3%82%8A%E3%81%AB"><i class="fa fa-link"></i></a>おわりに</h1>

<p>例外処理を利用方針について、自分の勉強用に調べた内容をまとめました。<br>
同じようなことを知りたがっている人のお役に立てれば幸いです。</p>

<p>もし内容の間違いや改善点などあれば、ご指摘いただけると嬉しいです。</p>
</div></div></section><div class="css-1yzj1fm"><div class="css-1uv1qiv"><span class="fa fa-twitter"></span></div><div class="css-1uv1qiv"><span class="fa fa-facebook"></span></div></div><div class="apm-Content"><div class="apm-Content_title">Why not register and get more from Qiita?</div><ol class="apm-Content_list"><li>We will deliver articles that match you<div class="description">By following users and tags, you can catch up information on technical fields that you are interested in as a whole</div></li><li>you can read useful information later efficiently<div class="description">By &quot;stocking&quot; the articles you like, you can search right away</div></li><div><a class="apm-Content_help" href="https://help.qiita.com/ja/articles/qiita-login-user" target="_blank"><i class="fa fa-fw fa-arrow-circle-right"></i>What you can do with signing up</a></div></ol><a href="/signup?callback_action=login_or_signup&amp;redirect_to=%2FKosei-Yoshida%2Fitems%2F8f6aa12d8eab878265a7&amp;realm=qiita" class="apm-Content_button apm-Content_button-signup">Sign up</a><a href="/login?callback_action=login_or_signup&amp;redirect_to=%2FKosei-Yoshida%2Fitems%2F8f6aa12d8eab878265a7&amp;realm=qiita" class="apm-Content_button apm-Content_button-signin">Login</a></div></div><div class="css-helsa7"></div></div></div></div><div class="css-109dbrr"><div class="css-5jpx49"><div class="css-mnxgyc"><button class=" css-1vlpknv"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/Kosei-Yoshida/items/8f6aa12d8eab878265a7/likers" class="css-1iupg5d">7</a></div><div class="css-fsjkhv"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-1b17vb0">11</span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-7i7f4d"><div class="css-1gj7nt">Improve article</div><a href="/drafts/8f6aa12d8eab878265a7/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/Kosei-Yoshida/items/8f6aa12d8eab878265a7/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/Kosei-Yoshida/items/8f6aa12d8eab878265a7/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/Kosei-Yoshida/items/8f6aa12d8eab878265a7/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/Kosei-Yoshida/items/8f6aa12d8eab878265a7.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="PersonalArticlePage" data-dom-id="PersonalArticlePage-react-component-73d360a9-10e7-4916-be19-49a4d936ceed">{"authorAnalyticsTrackingId":null,"organizationAnalyticsTrackingId":null}</script>
      
<footer id="globalFooter" class="st-Footer"><div class="st-Footer_container"><div class="st-Footer_start"><div class="st-Footer_logo"><svg viewbox="0 0 426.57 130" xmlns="http://www.w3.org/2000/svg"><circle cx="167.08" cy="21.4" r="12.28" /><path d="M250.81 29.66h23.48v18.9h-23.48z" /><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z" /><circle cx="216.33" cy="21.4" r="12.28" /></svg></div><div class="st-Footer_catchcopy">How developers code is here.</div><div class="st-Footer_socials"><a class="fa fa-twitter" href="https://twitter.com/qiita"></a><a class="fa fa-facebook-square" href="https://www.facebook.com/qiita/"></a></div></div><div class="st-Footer_end"><div class="st-Footer_qiita"><div class="st-Footer_label">Qiita</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="/about">About</a><a href="/terms">Terms</a><a href="/privacy">Privacy</a><a target="_blank" href="http://help.qiita.com/ja/articles/qiita-community-guideline">Guideline</a><a target="_blank" href="https://help.qiita.com/ja/articles/others-brand-guideline">Design Guideline</a></div><div class="st-Footer_column"><a href="/release-notes">Release</a><a href="/api/v2/docs">API</a><a href="/feedback/new">ご意見</a><a href="https://help.qiita.com">Help</a><a target="_blank" href="https://qiita.com/ads?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Advertisement</a></div></div></div><div class="st-Footer_increments"><div class="st-Footer_label">Increments</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="https://increments.co.jp/company/">About</a><a href="https://increments.co.jp/jobs/">採用情報</a><a href="https://blog.qiita.com">Blog</a></div><div class="st-Footer_column"><a href="https://teams.qiita.com/">Qiita Team</a><a href="https://jobs.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Jobs</a><a href="https://zine.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Zine</a></div></div></div></div></div><div class="st-Footer_copyright">© 2011-2021 Increments Inc.</div></footer><div id="Snackbar-react-component-5894418d-c020-4ebc-96f1-1565977141ab"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="Snackbar" data-dom-id="Snackbar-react-component-5894418d-c020-4ebc-96f1-1565977141ab">{}</script>
      
<div id="LoginModal-react-component-89a65c49-419c-49c8-807a-559e7fe11061"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="LoginModal" data-dom-id="LoginModal-react-component-89a65c49-419c-49c8-807a-559e7fe11061">{}</script>
      
<div id="StockModal-react-component-e2c9db9e-a9bb-4509-bfac-98f69a96cb2c"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="StockModal" data-dom-id="StockModal-react-component-e2c9db9e-a9bb-4509-bfac-98f69a96cb2c">{}</script>
      
</div><div id="dataContainer" style="display: none;" data-config="{&quot;actionPath&quot;:&quot;public/items#show&quot;,&quot;settings&quot;:{&quot;analyticsTrackingId&quot;:&quot;UA-24675221-12&quot;,&quot;assetsMap&quot;:{},&quot;csrfToken&quot;:&quot;cX8VQ34s36Ukq2DEJIIOJSI2JIUlaLXk5uh+h0DFlRx0KYr0V2dp8eRM4kz/0IXZnPw8AR+Pf4CgOjNn9jrlmg==&quot;,&quot;locale&quot;:&quot;en&quot;},&quot;currentUser&quot;:null}" /></body></html><script type="application/json" data-js-react-on-rails-store="AppStoreWithReactOnRails">{"snackbar":{"type":"","body":"","isActive":false},"article":{"article":{"body":"\n\u003ch1\u003e\n\u003cspan id=\"はじめに\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eはじめに\u003c/h1\u003e\n\n\u003cp\u003e自分は業務でC#を書いているのですが、今までかなりあやふやな知識で例外処理を使っていました。そこで、一度学びなおし、現時点での\u003cstrong\u003e自分の中での「例外処理の利用方針」を固めておこうと思いました。\u003c/strong\u003e\u003c/p\u003e\n\n\u003cp\u003e学びなおすために色々調べた結論としては、\u003cstrong\u003e自分の知りたかった例外処理の利用方針は\u003ca href=\"https://ufcpp.net/study/csharp/misc_exception.html\" rel=\"nofollow noopener\" target=\"_blank\"\u003e「++C++;」の「[雑記]例外の使い方」のページ\u003c/a\u003eにとてもわかりやすくまとまっていました。\u003c/strong\u003e\u003c/p\u003e\n\n\u003cp\u003eただ上のページを読んだうえで自分の言葉でもまとめておきたかったので、上のページを大幅に参考にさせてもらいつつ、自分なりの解釈やコード例などを付け加えてまとめたのがこの記事となります。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eこの記事は個人の考えをまとめたものです。\u003c/li\u003e\n\u003cli\u003eこの記事の内容はC#のバージョンについて特に意識していませんが、一部のコード例は古いバージョンのC#では使えない構文や機能を使っている可能性があります。\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"cで提案されている例外処理の利用方針\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#c%E3%81%A7%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%81%A6%E3%81%84%E3%82%8B%E4%BE%8B%E5%A4%96%E5%87%A6%E7%90%86%E3%81%AE%E5%88%A9%E7%94%A8%E6%96%B9%E9%87%9D\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e++C++;で提案されている例外処理の利用方針\u003c/h1\u003e\n\n\u003cp\u003e「\u003ca href=\"https://ufcpp.net/study/csharp/misc_exception.html\" rel=\"nofollow noopener\" target=\"_blank\"\u003e++C++;\u003c/a\u003e」では大体以下のような方針での例外処理の利用が提案されていました。（自分の選択で抜粋 + 解釈を加えさせてもらってるので、原文そのままの引用になっていません。ちゃんと見たい方は\u003ca href=\"https://ufcpp.net/study/csharp/misc_exception.html\" rel=\"nofollow noopener\" target=\"_blank\"\u003e元ページ\u003c/a\u003eを参照ください。）\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003e例外処理利用の基本ルール\u003c/strong\u003e\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e「メソッドの定める結果を達成できないなら例外を投げる」\u003c/li\u003e\n\u003cli\u003e例外は3パターンあり、それぞれに対して次のような対策方針をとる\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e\u003cstrong\u003e例外3パターンとその対策方針\u003c/strong\u003e\u003c/p\u003e\n\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003e例外のパターン\u003c/th\u003e\n\u003cth\u003e具体例\u003c/th\u003e\n\u003cth\u003e対処法\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003e①利用法上の例外（利用者側が正しい使い方をしていれば回避できる例外）\u003c/td\u003e\n\u003ctd\u003e・nullを渡して欲しくないメソッドの引数がnull になってる。(Sytem.ArgumentNullException)\u003cbr\u003e・初期化がきちんと行わる前にクラスの操作が行われた。（System.InvalidOperationException）\u003c/td\u003e\n\u003ctd\u003e・catchしない。発生しなくなるまでテストとデバッグを行う（※）\u003cbr\u003e・できれば事前にチェックが行える仕組みをつくる\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e②発生は避けれないが復帰可能な例外\u003c/td\u003e\n\u003ctd\u003e・System.IO.File.ReadAllText (File.Exsits()で事前確認していても、その後の実行までにファイルが消される可能性がある)\u003cbr\u003e\n\u003c/td\u003e\n\u003ctd\u003e・対処可能ならcatchする。\u003cbr\u003e・対処不可能（あるいは上位層に対処を任せた方が良い場合）なら、基本catchしない（※）\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e③対処のしようがない致命的な例外\u003c/td\u003e\n\u003ctd\u003e・.NET Framework自体のエラー\u003cbr\u003e・その他プログラムが実行不可能なもの\u003c/td\u003e\n\u003ctd\u003e・catchしない（プログラムを停止させてよい）（※）\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\n\u003cp\u003e（※）「catchしない」というのはcatchして握りつぶしたり、処理の方向を捻じ曲げたりしないという意味。一度catchし、処理途中のもののロールバックやログ出力を行った後、再throwするのは有り。\u003c/p\u003e\n\n\u003cp\u003e一言で方針をまとめるなら、「throwは遠慮なくして良いがcatchをするかどうかは状況をしっかり見て決めよう」、といったところでしょうか。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"各パターンの詳細\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%90%84%E3%83%91%E3%82%BF%E3%83%BC%E3%83%B3%E3%81%AE%E8%A9%B3%E7%B4%B0\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e各パターンの詳細\u003c/h1\u003e\n\n\u003cp\u003e上で見た例外処理3パターンについて、それぞれポイントや具体例などを見ていきます。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"パターン利用法上の例外\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%91%E3%82%BF%E3%83%BC%E3%83%B3%E5%88%A9%E7%94%A8%E6%B3%95%E4%B8%8A%E3%81%AE%E4%BE%8B%E5%A4%96\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eパターン①利用法上の例外\u003c/h2\u003e\n\n\u003cp\u003e利用者側が正しい使い方をしていれば回避できる例外です。\u003cbr\u003e\n\u003cstrong\u003eこのパターンのポイントは、「catchしない」ことです。\u003c/strong\u003e\u003c/p\u003e\n\n\u003cp\u003eコード例を示します。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eMain\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003ename\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e// 引数にnullを渡さないことは、メソッド利用側で意識して避けられるのでcatchしない！　\u003c/span\u003e\n    \u003cspan class=\"nf\"\u003eSayHelloTo\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\n\u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eSayHelloTo\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e// nullを渡してほしくない引数にnullが入っている。（このままではメソッド定める結果を達成できない）\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eif\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ename\u003c/span\u003e \u003cspan class=\"k\"\u003eis\u003c/span\u003e \u003cspan class=\"k\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ethrow\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eArgumentNullException\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e$\"\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"k\"\u003enameof\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e)}\u003c/span\u003e\u003cspan class=\"s\"\u003e is null\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"n\"\u003eConsole\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWriteLine\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e$\"Hello, \u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e上の例で、メソッド\"SayHelloTo()\"では、nullを渡して欲しくない引数\"name\"にnullが入っていた場合に例外をthrowしています。しかしメソッド利用側でcatchはしていません。\u003cbr\u003e\n\u003cstrong\u003ecatchを書いてないとなんとなくアプリケーションが止まりそうで怖い感じがしますが、ビビッてcatchを書いてはいけません。\u003c/strong\u003e不正なパターンが起きなくなるまで、しっかりテストを行います。\u003c/p\u003e\n\n\u003cp\u003eさらに、このパターンに限らずですが、\u003cstrong\u003e呼び出される側のメソッド（SayHelloTo()）は特に呼び出す側の事を意識する必要はありません。メソッドの処理を正常に行うための前提条件が整っていないなら遠慮なく例外を投げてよい\u003c/strong\u003eです。\u003cbr\u003e\n（ただし、頻繁に例外が起きることが予想される場合は、処理コストが高くなるのを避けるため、後述するTry-Parseパターンの実装が好ましいです。）\u003c/p\u003e\n\n\u003cp\u003eまた、どうしても変数\"name\"にnullが入る可能性を排除できない場合もcatchは書きません。以下のように、事前チェックをして回避します。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eMain\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n   \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003ename\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n   \u003cspan class=\"c1\"\u003e// 引数にnullを渡さないことは、メソッド利用側で意識して避けられるのでcatchしない！　\u003c/span\u003e\n   \u003cspan class=\"c1\"\u003e// nullチェックはメソッド利用側でできることなので、チェックする。\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eif\u003c/span\u003e\u003cspan class=\"p\"\u003e(!(\u003c/span\u003e\u003cspan class=\"n\"\u003ename\u003c/span\u003e \u003cspan class=\"k\"\u003eis\u003c/span\u003e \u003cspan class=\"k\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"nf\"\u003eSayHelloTo\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eelse\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eConsole\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWriteLine\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e$\"Cannot execute \u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"k\"\u003enameof\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eSayHelloTo\u003c/span\u003e\u003cspan class=\"p\"\u003e)}\u003c/span\u003e\u003cspan class=\"s\"\u003e. Because the \u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"k\"\u003enameof\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e)}\u003c/span\u003e\u003cspan class=\"s\"\u003e is null)\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e   \n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eSayHelloTo\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e//（実装省略）\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eこの際、例外を出さないための事前チェック（上のコード例でいう、!(name is null)）がメソッド利用側では難しい場合があります。その場合は、後述のTester-Doerパターンのように、事前チェックをするためのメソッドを用意します。\u003c/p\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"パターン利用法上の例外のまとめ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%91%E3%82%BF%E3%83%BC%E3%83%B3%E5%88%A9%E7%94%A8%E6%B3%95%E4%B8%8A%E3%81%AE%E4%BE%8B%E5%A4%96%E3%81%AE%E3%81%BE%E3%81%A8%E3%82%81\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eパターン①利用法上の例外のまとめ\u003c/h4\u003e\n\n\u003cul\u003e\n\u003cli\u003eメソッドの処理が上手く実行できない場合は、遠慮なくthrowする。\u003c/li\u003e\n\u003cli\u003eビビッてcatchを書くのではなく、デバッグ・テストを例外がでなくなるまで行う。\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"パターン発生は避けれないが復帰可能な例外\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%91%E3%82%BF%E3%83%BC%E3%83%B3%E7%99%BA%E7%94%9F%E3%81%AF%E9%81%BF%E3%81%91%E3%82%8C%E3%81%AA%E3%81%84%E3%81%8C%E5%BE%A9%E5%B8%B0%E5%8F%AF%E8%83%BD%E3%81%AA%E4%BE%8B%E5%A4%96\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eパターン②発生は避けれないが復帰可能な例外\u003c/h3\u003e\n\n\u003cp\u003e例えば簡単なRequestを送るメソッドを考えてみます。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003easync\u003c/span\u003e \u003cspan class=\"n\"\u003eTask\u003c/span\u003e \u003cspan class=\"nf\"\u003eMain\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eUri\u003c/span\u003e \u003cspan class=\"n\"\u003euri\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eUri\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e$\"http://hogehoge/api/message\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003emsg\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003eawait\u003c/span\u003e \u003cspan class=\"nf\"\u003eGetMessageAsync\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003euri\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eConsole\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWriteLine\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003emsg\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003estatic\u003c/span\u003e \u003cspan class=\"n\"\u003eHttpClient\u003c/span\u003e \u003cspan class=\"n\"\u003eclient\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eHttpClient\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003easync\u003c/span\u003e \u003cspan class=\"n\"\u003eTask\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"nf\"\u003eGetMessageAsync\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eUri\u003c/span\u003e \u003cspan class=\"n\"\u003euri\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003euri\u003c/span\u003e \u003cspan class=\"k\"\u003eis\u003c/span\u003e \u003cspan class=\"k\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ethrow\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eArgumentNullException\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e$\"\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"k\"\u003enameof\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003euri\u003c/span\u003e\u003cspan class=\"p\"\u003e)}\u003c/span\u003e\u003cspan class=\"s\"\u003e is null.\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e// HttpRequestExceptionがthrowされる可能性がある。\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003eawait\u003c/span\u003e \u003cspan class=\"n\"\u003eclient\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eGetStringAsync\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003euri\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e上の例では、\"client.GetStringAsync()\"でHttpRequestExceptionがthrowされる可能性がありますが、多くの場合これは呼び出す側で事前に予期して避けづらい例外です。\u003c/p\u003e\n\n\u003cp\u003eしかしこのエラーは、単にリクエストに失敗したことを表示すれば問題ないので、復帰できるものです。\u003cbr\u003e\n以下のように復帰しましょう。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003easync\u003c/span\u003e \u003cspan class=\"n\"\u003eTask\u003c/span\u003e \u003cspan class=\"nf\"\u003eMain\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eUri\u003c/span\u003e \u003cspan class=\"n\"\u003euri\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eUri\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e$\"http://hogehoge/api/message\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003etry\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003emsg\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003eawait\u003c/span\u003e \u003cspan class=\"nf\"\u003eGetMessageAsync\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003euri\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eConsole\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWriteLine\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003emsg\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e// 基本的に具体的な例外クラスをcatchする。catch (Exception ex)とは書かない。\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ecatch\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eHttpRequestException\u003c/span\u003e \u003cspan class=\"n\"\u003eex\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eConsole\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWriteLine\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e$\"Failed to get message. Error message : \u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003eex\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eMessage\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003estatic\u003c/span\u003e \u003cspan class=\"n\"\u003eHttpClient\u003c/span\u003e \u003cspan class=\"n\"\u003eclient\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eHttpClient\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003easync\u003c/span\u003e \u003cspan class=\"n\"\u003eTask\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"nf\"\u003eGetMessageAsync\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eUri\u003c/span\u003e \u003cspan class=\"n\"\u003euri\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003euri\u003c/span\u003e \u003cspan class=\"k\"\u003eis\u003c/span\u003e \u003cspan class=\"k\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ethrow\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eArgumentNullException\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e$\"\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"k\"\u003enameof\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003euri\u003c/span\u003e\u003cspan class=\"p\"\u003e)}\u003c/span\u003e\u003cspan class=\"s\"\u003e is null.\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e// HttpRequestExceptionがthrowされる可能性がある。\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003eawait\u003c/span\u003e \u003cspan class=\"n\"\u003eclient\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eGetStringAsync\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003euri\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e特に難しいところはないですね。HttpRequestExceptionを指定でcatchし、それに対する復帰処理（上の例だと失敗メッセージの表示）を行うだけです。\u003c/p\u003e\n\n\u003cp\u003e一つポイントとしては、\u003cstrong\u003e基本的に具体的な例外の種類（Exception派生クラス）を指定してあげる\u003c/strong\u003eことです。\u003cbr\u003e\nなぜなら、\"catch (Exception ex)\"とのように派生元のExceptionクラスを丸ごとcatchしてしまうと、メソッド内でどんなエラーが起きたかがわからず、きちんと復帰できているとは言えないからです。\u003cbr\u003e\n（ただし、catch句内でExceptionを再throwする、別の種類の例外に変換する（元のExceptionはinnerExceptionにする）といった場合は、派生元のExceptionクラスを丸ごとcatchしてもOKです。）\u003c/p\u003e\n\n\u003cp\u003eまた、このパターンの悩みどころは、どこで復帰処理を書くかが選べるところです。\u003cbr\u003e\n上の例では、\"Main()\"の中でcatchを使い復帰処理を書きましたが、以下のように\"GetMessageAsync()\"の中で復帰処理を書くこともできます。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003easync\u003c/span\u003e \u003cspan class=\"n\"\u003eTask\u003c/span\u003e \u003cspan class=\"nf\"\u003eMain\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eUri\u003c/span\u003e \u003cspan class=\"n\"\u003euri\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eUri\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e$\"http://hogehoge/api/message\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003emsg\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003eawait\u003c/span\u003e \u003cspan class=\"nf\"\u003eGetMessageAsync\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003euri\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eConsole\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWriteLine\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003emsg\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003estatic\u003c/span\u003e \u003cspan class=\"n\"\u003eHttpClient\u003c/span\u003e \u003cspan class=\"n\"\u003eclient\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eHttpClient\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003easync\u003c/span\u003e \u003cspan class=\"n\"\u003eTask\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"nf\"\u003eGetMessageAsync\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eUri\u003c/span\u003e \u003cspan class=\"n\"\u003euri\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003euri\u003c/span\u003e \u003cspan class=\"k\"\u003eis\u003c/span\u003e \u003cspan class=\"k\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ethrow\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eArgumentNullException\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e$\"\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"k\"\u003enameof\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003euri\u003c/span\u003e\u003cspan class=\"p\"\u003e)}\u003c/span\u003e\u003cspan class=\"s\"\u003e is null.\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003etry\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e// HttpRequestExceptionがthrowされる可能性がある。\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003eawait\u003c/span\u003e \u003cspan class=\"n\"\u003eclient\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eGetStringAsync\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003euri\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ecatch\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eHttpRequestException\u003c/span\u003e \u003cspan class=\"n\"\u003eex\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e// このやり方だと、関数呼び出し側で、処理が失敗したかの判断がしづらいので、\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e// 関数自体をTry-Parseパターンにした方がよい。\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"s\"\u003e$\"Failed to get message. Error message : \u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003eex\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eMessage\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e上の例では、\"GetMessageAsync()\"の中で、catchを使い復帰処理を書いています。\u003c/p\u003e\n\n\u003cp\u003eこのように、\u003cstrong\u003eこのパターン②における復帰処理は、コード中のどの部分でcatchをするかある程度選べてしまいます。メソッドの責務（行いたい処理は何か）を明確にし、適切な呼び出し箇所でcatch,復帰処理を行いましょう。\u003c/strong\u003e\u003c/p\u003e\n\n\u003cp\u003eちなみに今回の例だと、\"Main()\"側でcatchを書く方が良いかなと個人的には思います。\u003cbr\u003e\nなぜなら、上の例で、復帰処理として\"Failed ~\"という文字列を返していますが、これではメソッド呼び出し側から見て処理が成功したかどうか判別しづらいからです。、\u003cbr\u003e\n（もし、\"GetMessageAsync()\"側で復帰処理を行いたい場合は、後述のTry-Parseパターンをつかうなどして処理の成功or失敗をメソッド呼び出し側にわかりやすくする工夫をした方が良いでしょう。）\u003c/p\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"パターンに発生は避けれないが復帰可能な例外\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%91%E3%82%BF%E3%83%BC%E3%83%B3%E3%81%AB%E7%99%BA%E7%94%9F%E3%81%AF%E9%81%BF%E3%81%91%E3%82%8C%E3%81%AA%E3%81%84%E3%81%8C%E5%BE%A9%E5%B8%B0%E5%8F%AF%E8%83%BD%E3%81%AA%E4%BE%8B%E5%A4%96\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eパターン②に発生は避けれないが復帰可能な例外\u003c/h4\u003e\n\n\u003cul\u003e\n\u003cli\u003eきちんと復帰できる場合はcatchして復帰してやる。\u003c/li\u003e\n\u003cli\u003e具体的なException派生クラスをcatchすることを意識する。\u003c/li\u003e\n\u003cli\u003eどこで復帰処理を行うのかが悩みどころ。メソッドの責務を明確にして判断する。\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"パターン対処のしようがない致命的な例外\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%91%E3%82%BF%E3%83%BC%E3%83%B3%E5%AF%BE%E5%87%A6%E3%81%AE%E3%81%97%E3%82%88%E3%81%86%E3%81%8C%E3%81%AA%E3%81%84%E8%87%B4%E5%91%BD%E7%9A%84%E3%81%AA%E4%BE%8B%E5%A4%96\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eパターン③対処のしようがない致命的な例外\u003c/h3\u003e\n\n\u003cp\u003eこのパターンは特に意識して対処する必要ないと思います。\u003cbr\u003e\n自分はあまり良い例が思い浮かばないのですが、\u003ca href=\"https://ufcpp.net/study/csharp/misc_exception.html\" rel=\"nofollow noopener\" target=\"_blank\"\u003e++C++;-例外の使い方\u003c/a\u003eでは.NET Framework自体のエラーが例としてあげられていました。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"その他の雑多な話\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%9D%E3%81%AE%E4%BB%96%E3%81%AE%E9%9B%91%E5%A4%9A%E3%81%AA%E8%A9%B1\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eその他の雑多な話\u003c/h1\u003e\n\n\u003cp\u003eここまでで基本的な方針は書きました。\u003c/p\u003e\n\n\u003cp\u003eただ実践では理論通り書けない部分も多く、方針があったとしても例外処理の書き方に迷う部分もあると思います。\u003c/p\u003e\n\n\u003cp\u003eそこでここからは、例外処理に関連して使うテクニックや、理想通りいかない現実的なコードの話などを、つらつらと書きます。（あまり書く項目に一貫性はないです。）\u003c/p\u003e\n\n\u003cp\u003e自分の経験・上の方針をもとに自分が昔書いたコードを修正してみて気づいたこと・C#の有名OSSである\u003ca href=\"https://www.newtonsoft.com/json\" rel=\"nofollow noopener\" target=\"_blank\"\u003eJson.NET\u003c/a\u003eのコードを観察して気づいたこと、の3つを内容のベースとして書いています。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"tester-doerパターン\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#tester-doer%E3%83%91%E3%82%BF%E3%83%BC%E3%83%B3\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eTester-Doerパターン\u003c/h3\u003e\n\n\u003cp\u003eパターン①で利用法上の例外（≒業務エラー）はcatchせず、メソッド呼び出し側でエラーパターンの事前チェックをすると書きました。しかし、そもそも例外は基本的には発生しない方が望ましいです。\u003cbr\u003e\nなので、事前チェック用のメソッドを用意してやるのも一つの手です。そのような実装の仕方をTester-Doerパターンと言います。（Tester=事前チェック用メソッド、Doer=実行したいメソッド）\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eMain\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003ename\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"Taro\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nf\"\u003eCanExcecuteMethodSayHelloTo\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"nf\"\u003eSayHelloTo\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// Tester\u003c/span\u003e\n\u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"nf\"\u003eCanExcecuteMethodSayHelloTo\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"p\"\u003e!(\u003c/span\u003e\u003cspan class=\"n\"\u003ename\u003c/span\u003e \u003cspan class=\"k\"\u003eis\u003c/span\u003e \u003cspan class=\"k\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// Doer\u003c/span\u003e\n\u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eSayHelloTo\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ename\u003c/span\u003e \u003cspan class=\"k\"\u003eis\u003c/span\u003e \u003cspan class=\"k\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ethrow\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eArgumentNullException\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e$\"\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"k\"\u003enameof\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e)}\u003c/span\u003e\u003cspan class=\"s\"\u003e is null\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"n\"\u003eConsole\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWriteLine\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e$\"Hello, \u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eこの例のnullチェックぐらい簡単な確認ならTesterを用意するまでもないですが。\u003c/p\u003e\n\n\u003cp\u003e.NETのクラスでも、このTester-Doerパターンは見られますね。  \u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eSystem.Collection.Generics.ICollectionのIsReadOnly\u003c/li\u003e\n\u003cli\u003eSystem.IO.StreamのCanRead, CanWrite\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"try-parseパターン\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#try-parse%E3%83%91%E3%82%BF%E3%83%BC%E3%83%B3\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eTry-Parseパターン\u003c/h3\u003e\n\n\u003cp\u003eこの記事のはじめの方に「メソッドの定める結果を達成できないなら例外を投げる」と書きました。\u003cbr\u003e\nしかし例外は重い処理なので、それなりの発生頻度が予想される場合には使いたくありません。その場合は、Try-Parseパターンが使えます。\u003c/p\u003e\n\n\u003cp\u003eTry-Parseパターンは、メソッドとしては例外をthrowせず、boolで結果を返す方法です。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eMain\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003epath\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e@\"filepath\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e// 戻り値としてはboolが返ってくるので、結果はout引数で受け取る。\u003c/span\u003e\n    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003esucceeded\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nf\"\u003eTryGetFileData\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003eout\u003c/span\u003e \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003esucceeded\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eConsole\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWriteLine\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e$\"Suceeded to get data from \u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"nf\"\u003eTryGetFileData\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003eout\u003c/span\u003e \u003cspan class=\"kt\"\u003ebyte\u003c/span\u003e\u003cspan class=\"p\"\u003e[]\u003c/span\u003e \u003cspan class=\"n\"\u003efileBytes\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003etry\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003efileBytes\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eFile\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eReadAllBytes\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ecatch\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eIOException\u003c/span\u003e \u003cspan class=\"n\"\u003eex\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eConsole\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWriteLine\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e$\"Failed to get file data. Error : \u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003eex\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eMessage\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e \"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e// throwはせず、戻り値でfalseを返し処理の失敗を知らせる。\u003c/span\u003e\n        \u003cspan class=\"n\"\u003efileBytes\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003efalse\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e\"TryGetFileData()\"メソッドでは、処理が成功したかどうかを、例外を投げて知らせる代わりに、戻り値のboolで知らせています。\u003cbr\u003e\nまた、本来なら戻り値として受け取っていた結果はout引数として受け渡します。（処理失敗時は、null or 適当な失敗を表す値を代入。）\u003c/p\u003e\n\n\u003cp\u003e上述したように、Try-Parseパターンには、例外を投げるのと比較して、処理失敗時のコストが低いというメリットがあります。ただし、Try-Parseパターンには、メソッド呼び出し側に例外処理を強制できないというデメリットもあります。それを理解した上で、例外を投げるのか、Try-Parseパターンを使うかどうか判断しましょう。\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003eTry-Parseパターンにはメリット・デメリットがある。場合によって例外を投げるのと使い分けるとよい。\u003c/strong\u003e\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eTry-Parseパターンのメリット：処理失敗時のコストが例外を投げるより低い\u003c/li\u003e\n\u003cli\u003eTry-Parseパターンのデメリット：メソッド呼び出し側に例外処理を強制できない\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eTry-Parseパターンは、.NETのクラスだと、以下でも使われていますね。\u003cbr\u003e\nこのパターンの場合は、Try~という名前のメソッドにするのが慣習ですね。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eSystem.Int32のTryparseメソッド\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"非同期メソッドの場合\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E9%9D%9E%E5%90%8C%E6%9C%9F%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E3%81%AE%E5%A0%B4%E5%90%88\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e非同期メソッドの場合\u003c/h4\u003e\n\n\u003cp\u003e非同期メソッドの場合、out引数が使えません。\u003cbr\u003e\nその場合は、タプルで結果を返すなどして工夫しましょう。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003easync\u003c/span\u003e \u003cspan class=\"n\"\u003eTask\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;(\u003c/span\u003e\u003cspan class=\"kt\"\u003ebool\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u0026gt;\u003c/span\u003e \u003cspan class=\"nf\"\u003eTryGetMessageAsync\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eUri\u003c/span\u003e \u003cspan class=\"n\"\u003euri\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"c1\"\u003e//(省略）}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"全例外クラス継承元のexceptionクラスをcatchする場合\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%85%A8%E4%BE%8B%E5%A4%96%E3%82%AF%E3%83%A9%E3%82%B9%E7%B6%99%E6%89%BF%E5%85%83%E3%81%AEexception%E3%82%AF%E3%83%A9%E3%82%B9%E3%82%92catch%E3%81%99%E3%82%8B%E5%A0%B4%E5%90%88\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e全例外クラス継承元のExceptionクラスをcatchする場合\u003c/h3\u003e\n\n\u003cp\u003ecatch句では、対象となるException派生クラスを指定できる一方で、以下のように全ての例外クラスの継承元となるExceptionクラスも指定できてしまいます。（強制的に全ての例外をcatchすることができてしまう。）\u003cbr\u003e\nこれは場合によっては、適切な処理が行われず例外の発生が見えにくくなり、不具合の原因特定を難しくすることにつながってしまいます。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eCatchAllException\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003etry\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e// 何かしらのエラーが起きるメソッド。\u003c/span\u003e\n        \u003cspan class=\"nf\"\u003eRaiseError\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e// 全ての例外をcatchする。\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e// 復帰処理などを行う必要がある例外が発生した場合、後から原因が特定しにくいバグとなり得る。\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ecatch\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eException\u003c/span\u003e \u003cspan class=\"n\"\u003eex\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e  \n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eConsole\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWriteLine\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e$\"Error : \u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003eex\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eMessage\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eなので方針としては、\u003cstrong\u003e派生大元のExceptionは基本的にそのままcatchしない。catchする場合は特定の場合のみ\u003c/strong\u003eとします。\u003cbr\u003e\nでは、catchしてよいのはどのような場合かを見ていきます。\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003e派生大元のExceptionクラスをcatchしてよいとき\u003c/strong\u003e\u003c/p\u003e\n\n\u003col\u003e\n\u003cli\u003e再度throwするとき。（catchの目的はログ出力のためなど。再throwの仕方に注意） \u003c/li\u003e\n\u003cli\u003e別の例外に変換するとき。\u003c/li\u003e\n\u003cli\u003e独自のエラーハンドリングをし、exceptionは再throwしないとき。（きちんとエラーハンドリングがされることが条件）\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003cp\u003eそれぞれコード例を見てみます。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"c1\"\u003e// ログを出力のためにcatchし、再throwする。\u003c/span\u003e\n\u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eRethrow\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003etry\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"nf\"\u003eRaiseError\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ecatch\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eException\u003c/span\u003e \u003cspan class=\"n\"\u003eex\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eConsole\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWriteLine\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e$\"Failed to \u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"k\"\u003enameof\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eRethrow\u003c/span\u003e\u003cspan class=\"p\"\u003e)}\u003c/span\u003e\u003cspan class=\"s\"\u003e. : \u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003eex\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eMessage\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e// throw exとは書いてはいけない。StackTraceが消えるため。\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ethrow\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// 別の例外に変換する\u003c/span\u003e\n\u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eConvert\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003etry\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"nf\"\u003eRaiseError\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ecatch\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eException\u003c/span\u003e \u003cspan class=\"n\"\u003eex\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e// catchしたExceptionはInnerExceptionにする。\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ethrow\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eOriginalException\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e$\"Original exception occurred\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eex\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// 独自のエラーハンドリングをする。\u003c/span\u003e\n\u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eErrorHandleSelf\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003etry\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"nf\"\u003eRaiseError\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ecatch\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eException\u003c/span\u003e \u003cspan class=\"n\"\u003eex\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e// HandleErrorメソッドできちんと処理が行われることが前提。極力使わない。\u003c/span\u003e\n        \u003cspan class=\"nf\"\u003eHandleError\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eex\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"1-再度throwするとき\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#1-%E5%86%8D%E5%BA%A6throw%E3%81%99%E3%82%8B%E3%81%A8%E3%81%8D\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e1 再度throwするとき。\u003c/h4\u003e\n\n\u003cp\u003eログ出力などの任意の処理を行った後、再度throwします。このとき、\"throw ex\"と書くとStackTraceが消えてしまうため、\"throw\"とだけ書きます。\u003c/p\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"2-別の例外に変換するとき\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#2-%E5%88%A5%E3%81%AE%E4%BE%8B%E5%A4%96%E3%81%AB%E5%A4%89%E6%8F%9B%E3%81%99%E3%82%8B%E3%81%A8%E3%81%8D\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e2 別の例外に変換するとき。\u003c/h4\u003e\n\n\u003cp\u003eそもそもExceptionをそのままcatchすることは例外が握りつぶされてしまうことが一番の問題なので、別の例外に変換するのはOKです。ただし、変換前の例外情報も貴重なため、InnerExceptionとして残しておきます。\u003cbr\u003e\nこのパターン使われるのは以下の場合が多いかなと思います。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eより適切な種類の例外に置き換えれるとき（より具体的な例外の方が不具合の原因を特定しやすい）\u003c/li\u003e\n\u003cli\u003eライブラリ的に扱われるレイヤーで、そのライブラリから出される例外を統一したいとき\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"3-独自のエラーハンドリングをしexceptionは再throwしないとき\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#3-%E7%8B%AC%E8%87%AA%E3%81%AE%E3%82%A8%E3%83%A9%E3%83%BC%E3%83%8F%E3%83%B3%E3%83%89%E3%83%AA%E3%83%B3%E3%82%B0%E3%82%92%E3%81%97exception%E3%81%AF%E5%86%8Dthrow%E3%81%97%E3%81%AA%E3%81%84%E3%81%A8%E3%81%8D\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e3. 独自のエラーハンドリングをし、exceptionは再throwしないとき。\u003c/h4\u003e\n\n\u003cp\u003e多くの場合は全ての例外をカバーすることは難しいため、このやり方は推奨ではないです。\u003cbr\u003e\nただし、開発プロジェクト内でエラーハンドリングのやり方が統一されている場合などには使われることがあるかもしれません。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"独自の例外クラスについて\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E7%8B%AC%E8%87%AA%E3%81%AE%E4%BE%8B%E5%A4%96%E3%82%AF%E3%83%A9%E3%82%B9%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e独自の例外クラスについて\u003c/h3\u003e\n\n\u003cp\u003eC#では、Exceptionクラスを継承することによって、独自の例外クラスを作成できます。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eOriginalException\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eException\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003eOriginalException\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"cm\"\u003e/*(実装省略）*/\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003eOriginalException\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e?\u003c/span\u003e \u003cspan class=\"n\"\u003eparamName\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"cm\"\u003e/*(実装省略）*/\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003eOriginalException\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e?\u003c/span\u003e \u003cspan class=\"n\"\u003emessage\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eException\u003c/span\u003e\u003cspan class=\"p\"\u003e?\u003c/span\u003e \u003cspan class=\"n\"\u003einnerException\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"cm\"\u003e/*(実装省略）*/\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003eOriginalException\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e?\u003c/span\u003e \u003cspan class=\"n\"\u003eparamName\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e?\u003c/span\u003e \u003cspan class=\"n\"\u003emessage\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"cm\"\u003e/*(実装省略）*/\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eprotected\u003c/span\u003e \u003cspan class=\"nf\"\u003eOriginalException\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eSerializationInfo\u003c/span\u003e \u003cspan class=\"n\"\u003einfo\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eStreamingContext\u003c/span\u003e \u003cspan class=\"n\"\u003econtext\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"cm\"\u003e/*(実装省略）*/\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e  \n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e独自例外クラスを作成するべきタイミングについては、\u003ca href=\"https://docs.microsoft.com/ja-jp/dotnet/standard/exceptions/how-to-create-user-defined-exceptions\" rel=\"nofollow noopener\" target=\"_blank\"\u003eMicrosoftの公式ドキュメント-ユーザー定義の例外を作成する方法\u003c/a\u003eに書いているものそのままです。\u003c/p\u003e\n\n\u003cblockquote\u003e\n\u003cp\u003e.NET では、基底クラス Exception から最終的に派生した例外クラスの階層構造を提供します。 ただし、定義済みの例外のいずれも要件を満たさない場合は、Exception クラスから派生することによって、独自の例外クラスを作成できます。\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003cp\u003eつまり、\u003cstrong\u003e独自の例外クラスは、積極的につくるものではなく、.NET標準で用意されてる例外クラスに該当するものがない場合のみ作成する\u003c/strong\u003eと覚えておけば大丈夫です。\u003cbr\u003e\nその他、独自例外を定義した方が、明らかに利用者側の復帰処理などに役立つ場合、あるいは一塊のコード内（ライブラリなど）で一貫した例外を使用したい場合などは独自例外をつくることを検討しましょう。\u003c/p\u003e\n\n\u003cp\u003eちなみにですが、C#でJsonを簡単に取り扱えるライブラリ\u003ca href=\"https://www.newtonsoft.com/json\" rel=\"nofollow noopener\" target=\"_blank\"\u003eJson.NET\u003c/a\u003eでは、\"JsonException\"という独自例外クラスが定義されており、ライブラリ利用側には\"JsonException\"（実際にはいくつかあるその派生クラス）が渡されるようになっています。独自例外クラスの使われ方について実際のコードが見たいかたは、参照してみると良いと思います。（\u003ca href=\"https://github.com/JamesNK/Newtonsoft.Json/blob/master/Src/Newtonsoft.Json/JsonException.cs\" rel=\"nofollow noopener\" target=\"_blank\"\u003eJsonExceptionクラス\u003c/a\u003e)\u003c/p\u003e\n\n\u003cp\u003eまた、独自例外作る際は、作法として定義しておくべきメソッドがいくつかあります。\u003ca href=\"https://docs.microsoft.com/ja-jp/dotnet/api/system.exception?view=net-5.0#implementing-custom-exceptions\" rel=\"nofollow noopener\" target=\"_blank\"\u003eドキュメント\u003c/a\u003eを参考にして定義しましょう。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"xmlドキュメントコメント\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#xml%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%82%B3%E3%83%A1%E3%83%B3%E3%83%88\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eXMLドキュメントコメント\u003c/h3\u003e\n\n\u003cp\u003eC#では、メソッドやクラスなどに対してXML形式でドキュメントコメントを書けます。\u003cbr\u003e\nメソッドのコメントでは、発生する可能性のある例外を示すためのタグ\"\u0026lt;exception\u0026gt;\"が用意されています。\u003cbr\u003e\nメソッド利用側の実装の助けになるので積極的に書きましょう。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"c1\"\u003e/// \u0026lt;summary\u0026gt;\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e/// Show \u0026lt;paramref name=\"arg\"/\u0026gt; on standard output.\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e/// \u0026lt;/summary\u0026gt;\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e/// \u0026lt;exception cref=\"ArgumentException\"\u0026gt;Throw if \u0026lt;paramref name=\"arg\"/\u0026gt; is null or whitespace.\u0026lt;/exception\u0026gt;\u003c/span\u003e\n\u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003ePrint\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003earg\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eIsNullOrWhiteSpace\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003earg\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ethrow\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eArgumentException\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e$\"\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"k\"\u003enameof\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003earg\u003c/span\u003e\u003cspan class=\"p\"\u003e)}\u003c/span\u003e\u003cspan class=\"s\"\u003e is null or whitespace. Please substitute proper value.\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"n\"\u003eConsole\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWriteLine\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e$\"Output : \u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003earg\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"メソッド固有のルールではなく例外処理を使う理由\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E5%9B%BA%E6%9C%89%E3%81%AE%E3%83%AB%E3%83%BC%E3%83%AB%E3%81%A7%E3%81%AF%E3%81%AA%E3%81%8F%E4%BE%8B%E5%A4%96%E5%87%A6%E7%90%86%E3%82%92%E4%BD%BF%E3%81%86%E7%90%86%E7%94%B1\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eメソッド固有のルールではなく、例外処理を使う理由\u003c/h3\u003e\n\n\u003cp\u003eTry-Parseパターンのように、例外処理構文を使わなくてもメソッド処理の成功・失敗を伝える方法はあります。\u003cbr\u003e\nただしその場合には、メソッド固有のルール（例えばTry-Parseパターンでは、成功・失敗を戻り値とするいうルール）を決めていることによるデメリットがあります。\u003cbr\u003e\nこの点についても、\u003ca href=\"https://ufcpp.net/study/csharp/misc_exception.html\" rel=\"nofollow noopener\" target=\"_blank\"\u003e++C++;-例外の使い方\u003c/a\u003eで簡潔にまとめられているので引用させていだきます。（原文では、文書で書かれているものを私の言葉で少し書き直し、表形式にしています。）\u003c/p\u003e\n\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003eメソッド固有のルールを使うデメリット\u003c/th\u003e\n\u003cth\u003e例外処理を使うメリット\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003e例外の検出が面倒。\u003cbr\u003e（呼び出すメソッド固有のルールを知っておく必要がある。）\u003c/td\u003e\n\u003ctd\u003ethrow, try-catch文に処理の仕方が統一されている。\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e正常動作部と例外処理部の区別が分かりにくい。\u003c/td\u003e\n\u003ctd\u003e正常動作部と例外処理部の区別が分かりやすい。\u003cbr\u003etry の中には動作が正常な時の処理が、 catch の中には例外発生時の対処のみが書かれる。\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eメソッド利用者に例外処理を行うことを強制出来ない。\u003c/td\u003e\n\u003ctd\u003eメソッド利用側に例外処理させることを強制できる。\u003cbr\u003e（例外発生時に処理が行われないと、アプリが終了する。）\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eメソッドを呼び出すたびに例外処理用のコードを書く必要がある。\u003c/td\u003e\n\u003ctd\u003e例外処理部（catch 節）や、正常・例外問わず必ず実行する必要がある部分（finaly 節）が一か所にまとまる。\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\n\u003cp\u003eこのように、例外処理構文を使うことにより、メソッド固有のルールによるデメリットを大きくカバーすることができます。\u003cbr\u003e\nなので実装の際は、\u003cstrong\u003eまずは例外処理構文を使うことを検討、何か特別な理由があるならメソッド固有のルールを使う\u003c/strong\u003eという方針でよいでしょう。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"業務エラーには例外処理を使ってはいけない\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%A5%AD%E5%8B%99%E3%82%A8%E3%83%A9%E3%83%BC%E3%81%AB%E3%81%AF%E4%BE%8B%E5%A4%96%E5%87%A6%E7%90%86%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E3%81%AF%E3%81%84%E3%81%91%E3%81%AA%E3%81%84\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e業務エラーには例外処理を使ってはいけない？\u003c/h3\u003e\n\n\u003cp\u003e例外処理の利用方針パターン①で、利用法上の例外について説明しました。\u003cbr\u003e\nただ例外の利用方法について調べていると、「業務エラー（≒利用方上の例外）には例外処理を用いてはいけない」という記述をよく見かけます。\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003e個人的には「業務エラーでもthrowはしてよい、ただしcatchはしない」という方針で良いと思います。\u003c/strong\u003e\u003cbr\u003e\nというのも、前節で書いた、throwを使わない場合に発生する「メソッド呼び出し側に例外処理を強制できない」といデメリットを避けるためです。\u003c/p\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"ossではどうなってるか\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#oss%E3%81%A7%E3%81%AF%E3%81%A9%E3%81%86%E3%81%AA%E3%81%A3%E3%81%A6%E3%82%8B%E3%81%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eOSSではどうなってるか\u003c/h4\u003e\n\n\u003cp\u003e\u003ca href=\"https://www.newtonsoft.com/json\" rel=\"nofollow noopener\" target=\"_blank\"\u003eJson.NET\u003c/a\u003eではどのように例外処理が使われているか軽く調べてみました。\u003cbr\u003e\n以下は、\u003ca href=\"https://github.com/JamesNK/Newtonsoft.Json/tree/master/Src/Newtonsoft.Json\" rel=\"nofollow noopener\" target=\"_blank\"\u003eソリューション内のNewtonsoft.Jsonプロジェクト\u003c/a\u003eで使われいてる、throw, catchの大体の数になります。（grepでコード内のコメントも拾ってしまっているので、正確な数ではないです。）\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"bash\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e:~/Json.NET/Src/Newtonsoft.Json\u003cspan class=\"nv\"\u003e$ \u003c/span\u003e\u003cspan class=\"nb\"\u003egrep\u003c/span\u003e \u003cspan class=\"nt\"\u003e-r\u003c/span\u003e \u003cspan class=\"nt\"\u003e-n\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"throw new\"\u003c/span\u003e | \u003cspan class=\"nb\"\u003ewc\u003c/span\u003e \u003cspan class=\"nt\"\u003e-l\u003c/span\u003e    371\n:~/Json.NET/Src/Newtonsoft.Json\u003cspan class=\"nv\"\u003e$ \u003c/span\u003e\u003cspan class=\"nb\"\u003egrep\u003c/span\u003e \u003cspan class=\"nt\"\u003e-r\u003c/span\u003e \u003cspan class=\"nt\"\u003e-n\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"catch\"\u003c/span\u003e | \u003cspan class=\"nb\"\u003ewc\u003c/span\u003e \u003cspan class=\"nt\"\u003e-l\u003c/span\u003e　　　51\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e見てわかるように、新しい例外をthrowしている数に対してcatchしている数が少ないです。\u003cbr\u003e\n実際のコードを見てみても、概ね「業務エラーでもthrowはしてよい、ただしcatchはしない」という方針で書かれているのかなぁという印象を受けました。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"おわりに\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%8A%E3%82%8F%E3%82%8A%E3%81%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eおわりに\u003c/h1\u003e\n\n\u003cp\u003e例外処理を利用方針について、自分の勉強用に調べた内容をまとめました。\u003cbr\u003e\n同じようなことを知りたがっている人のお役に立てれば幸いです。\u003c/p\u003e\n\n\u003cp\u003eもし内容の間違いや改善点などあれば、ご指摘いただけると嬉しいです。\u003c/p\u003e\n","createdAt":"2021-01-22T02:21:43Z","elapsedYearsFromLastModifiedAt":0,"encryptedId":"ymfi5CVaslkL1tAHtmtq157+0QbojKAaAw==--jYqPltu8lADHFMvK--ftpX23fVZRIuI0P9r7JLXA==","isBanned":false,"isDeprecated":false,"isDestroyableByViewer":false,"isEditRequestReadableByViewer":true,"isEditRequestSendableByViewer":true,"isLikableByViewer":true,"isLikedByViewer":false,"isPublic":true,"isSlide":false,"isStockableByViewer":true,"isStockedByViewer":false,"isSubscribableByViewer":false,"isSubscribedByViewer":false,"isUpdatableByViewer":false,"isUpdated":true,"lastModifiedAt":"2021-07-30T02:25:23Z","likesCount":7,"linkUrl":"https://qiita.com/Kosei-Yoshida/items/8f6aa12d8eab878265a7","organization":null,"originalId":1380927,"stockedCount":11,"title":"[C#]例外処理の利用方針があやふやだったので、勉強しなおした","toc":"\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB\"\u003eはじめに\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#c%E3%81%A7%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%81%A6%E3%81%84%E3%82%8B%E4%BE%8B%E5%A4%96%E5%87%A6%E7%90%86%E3%81%AE%E5%88%A9%E7%94%A8%E6%96%B9%E9%87%9D\"\u003e++C++;で提案されている例外処理の利用方針\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%90%84%E3%83%91%E3%82%BF%E3%83%BC%E3%83%B3%E3%81%AE%E8%A9%B3%E7%B4%B0\"\u003e各パターンの詳細\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%91%E3%82%BF%E3%83%BC%E3%83%B3%E5%88%A9%E7%94%A8%E6%B3%95%E4%B8%8A%E3%81%AE%E4%BE%8B%E5%A4%96\"\u003eパターン①利用法上の例外\u003c/a\u003e\n\u003cul\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%91%E3%82%BF%E3%83%BC%E3%83%B3%E5%88%A9%E7%94%A8%E6%B3%95%E4%B8%8A%E3%81%AE%E4%BE%8B%E5%A4%96%E3%81%AE%E3%81%BE%E3%81%A8%E3%82%81\"\u003eパターン①利用法上の例外のまとめ\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%91%E3%82%BF%E3%83%BC%E3%83%B3%E7%99%BA%E7%94%9F%E3%81%AF%E9%81%BF%E3%81%91%E3%82%8C%E3%81%AA%E3%81%84%E3%81%8C%E5%BE%A9%E5%B8%B0%E5%8F%AF%E8%83%BD%E3%81%AA%E4%BE%8B%E5%A4%96\"\u003eパターン②発生は避けれないが復帰可能な例外\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%91%E3%82%BF%E3%83%BC%E3%83%B3%E3%81%AB%E7%99%BA%E7%94%9F%E3%81%AF%E9%81%BF%E3%81%91%E3%82%8C%E3%81%AA%E3%81%84%E3%81%8C%E5%BE%A9%E5%B8%B0%E5%8F%AF%E8%83%BD%E3%81%AA%E4%BE%8B%E5%A4%96\"\u003eパターン②に発生は避けれないが復帰可能な例外\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%91%E3%82%BF%E3%83%BC%E3%83%B3%E5%AF%BE%E5%87%A6%E3%81%AE%E3%81%97%E3%82%88%E3%81%86%E3%81%8C%E3%81%AA%E3%81%84%E8%87%B4%E5%91%BD%E7%9A%84%E3%81%AA%E4%BE%8B%E5%A4%96\"\u003eパターン③対処のしようがない致命的な例外\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cli\u003e\n\u003ca href=\"#%E3%81%9D%E3%81%AE%E4%BB%96%E3%81%AE%E9%9B%91%E5%A4%9A%E3%81%AA%E8%A9%B1\"\u003eその他の雑多な話\u003c/a\u003e\n\u003cul\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#tester-doer%E3%83%91%E3%82%BF%E3%83%BC%E3%83%B3\"\u003eTester-Doerパターン\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#try-parse%E3%83%91%E3%82%BF%E3%83%BC%E3%83%B3\"\u003eTry-Parseパターン\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E9%9D%9E%E5%90%8C%E6%9C%9F%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E3%81%AE%E5%A0%B4%E5%90%88\"\u003e非同期メソッドの場合\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%85%A8%E4%BE%8B%E5%A4%96%E3%82%AF%E3%83%A9%E3%82%B9%E7%B6%99%E6%89%BF%E5%85%83%E3%81%AEexception%E3%82%AF%E3%83%A9%E3%82%B9%E3%82%92catch%E3%81%99%E3%82%8B%E5%A0%B4%E5%90%88\"\u003e全例外クラス継承元のExceptionクラスをcatchする場合\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#1-%E5%86%8D%E5%BA%A6throw%E3%81%99%E3%82%8B%E3%81%A8%E3%81%8D\"\u003e1 再度throwするとき。\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#2-%E5%88%A5%E3%81%AE%E4%BE%8B%E5%A4%96%E3%81%AB%E5%A4%89%E6%8F%9B%E3%81%99%E3%82%8B%E3%81%A8%E3%81%8D\"\u003e2 別の例外に変換するとき。\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#3-%E7%8B%AC%E8%87%AA%E3%81%AE%E3%82%A8%E3%83%A9%E3%83%BC%E3%83%8F%E3%83%B3%E3%83%89%E3%83%AA%E3%83%B3%E3%82%B0%E3%82%92%E3%81%97exception%E3%81%AF%E5%86%8Dthrow%E3%81%97%E3%81%AA%E3%81%84%E3%81%A8%E3%81%8D\"\u003e3. 独自のエラーハンドリングをし、exceptionは再throwしないとき。\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E7%8B%AC%E8%87%AA%E3%81%AE%E4%BE%8B%E5%A4%96%E3%82%AF%E3%83%A9%E3%82%B9%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6\"\u003e独自の例外クラスについて\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#xml%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%82%B3%E3%83%A1%E3%83%B3%E3%83%88\"\u003eXMLドキュメントコメント\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E5%9B%BA%E6%9C%89%E3%81%AE%E3%83%AB%E3%83%BC%E3%83%AB%E3%81%A7%E3%81%AF%E3%81%AA%E3%81%8F%E4%BE%8B%E5%A4%96%E5%87%A6%E7%90%86%E3%82%92%E4%BD%BF%E3%81%86%E7%90%86%E7%94%B1\"\u003eメソッド固有のルールではなく、例外処理を使う理由\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E6%A5%AD%E5%8B%99%E3%82%A8%E3%83%A9%E3%83%BC%E3%81%AB%E3%81%AF%E4%BE%8B%E5%A4%96%E5%87%A6%E7%90%86%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E3%81%AF%E3%81%84%E3%81%91%E3%81%AA%E3%81%84\"\u003e業務エラーには例外処理を使ってはいけない？\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#oss%E3%81%A7%E3%81%AF%E3%81%A9%E3%81%86%E3%81%AA%E3%81%A3%E3%81%A6%E3%82%8B%E3%81%8B\"\u003eOSSではどうなってるか\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\n\n\u003cli\u003e\n\u003ca href=\"#%E3%81%8A%E3%82%8F%E3%82%8A%E3%81%AB\"\u003eおわりに\u003c/a\u003e\n\u003c/li\u003e\n\n","totalPv":1544,"uuid":"8f6aa12d8eab878265a7","banReason":null,"adventCalendarItem":null,"author":{"encryptedId":"jsrPu+NMXjhccWSzrw1/6ul04uz2--/nqCfioOpR9J3uyG--444otQGnzBY5O1ElisPhEA==","originalId":206591,"description":"","facebookUrl":null,"githubUrl":"https://github.com/KoseiYoshida","isBlockingViewer":false,"isFollowableByViewer":true,"isFollowedByViewer":false,"isTweetWebNotificationReceivable":true,"linkedinUrl":null,"name":"Kosei Yoshida","profileImageUrl":"https://s3-ap-northeast-1.amazonaws.com/qiita-image-store/0/206591/ec95458225498b3b38288ee72ca33adcecf2fa3c/x_large.png?1591664178","profileImageUrlW48":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fs3-ap-northeast-1.amazonaws.com%2Fqiita-image-store%2F0%2F206591%2Fec95458225498b3b38288ee72ca33adcecf2fa3c%2Fx_large.png%3F1591664178?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=48\u0026s=86877b9b4cd2763a0a490e4872252538","profileImageUrlW75":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fs3-ap-northeast-1.amazonaws.com%2Fqiita-image-store%2F0%2F206591%2Fec95458225498b3b38288ee72ca33adcecf2fa3c%2Fx_large.png%3F1591664178?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=7f3c7a8d6eddffdfe19d431f7817743a","urlName":"Kosei-Yoshida","websiteUrl":"","twitterUrl":"https://twitter.com/H9mqVsEISnSFEEY","twitterUrlName":"H9mqVsEISnSFEEY","revealedOrganizations":{"edges":[{"node":{"encryptedId":"DNaEBXKdz/r9MaicXAQthXKPO2XIjGHUIoPE--SpAeDsCtKzALdclb--7NNh3uch0cT7CJJKveH6Fw==","isBetaReleaseEnabled":false,"isFollowableByViewer":false,"isFollowedByViewer":false,"name":"株式会社Synamon","logoUrl":"https://s3-ap-northeast-1.amazonaws.com/qiita-organization-image/788a109cb689ab1b5028a547f7bf94e63c84be6b/original.jpg?1593083579","urlName":"synamon","description":"Synamonは「XRが当たり前の世界をつくる」ことをミッションに、未来づくりに挑戦しているXRスタートアップです。\r\n市場をつくっていくためには、日常で使われる仕組みを生みだしていくことが重要です。\r\nそのため、toB領域をメインに、未来への取り組みや事業づくりにチャレンジしている企業様への支援や、XR活用のユースケースづくり、継続的に使われるための仕組みづくりに取り組んでいます。","url":"https://synamon.jp/"}}]}},"tags":[{"name":"C#","urlName":"csharp"},{"name":"例外処理","urlName":"%e4%be%8b%e5%a4%96%e5%87%a6%e7%90%86"}],"followingLikers":{"edges":[]},"comments":{"totalCount":2}},"comments":[],"client":null,"ads_event_emitter":null}}</script>
