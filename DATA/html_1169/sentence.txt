More than 1 year has passed since last update.Unityで、FindしたやつからGetComponentするという処理は、プログラムの設計によってシングルトンでやってないやつだとよくやります。それの便利版です。説明要らない方は最後へジャンプ。この時、それぞれでnullの可能性があるので、その場合にはエラーを吐いた方がうるさいゲームデザイナーの相手をしなくていい親切に何がおかしいか判った方が効率が好いので、以下のコードになります。折角なので、適当なclassで何処でも使えるようにジェネリック化したstaticのメソッドにしましょう。まあまあ良い感じですね！ここまではありがちです。上のままでも問題ないんですけど、色々なところから呼び出されるのでエラーを見ても呼び出し元が判らないと修正に困るという問題があります。
うるさいゲームデザイナーの相手をしなくていい親切に何がおかしいか判った方が効率が好いので、ここで呼び出し元が判るようにします。それには以下の仕組みを使います。アセンブラの知識がある方はご存知の通り、メソッドの呼び出し毎に戻りアドレスがpushされてstackに格納されて積まれます。そこを辿れば、どこから呼び出されているのか判るわけです。
参考：StackFrame クラス
https://docs.microsoft.com/ja-jp/dotnet/api/system.diagnostics.stackframe?view=netcore-3.1C#のリフレクションを利用すると、呼び出し元の名前が取得できます。
参考：MemberInfo.ReflectedType プロパティ
https://docs.microsoft.com/ja-jp/dotnet/api/system.reflection.memberinfo.reflectedtype?view=netcore-3.1上記を組み合わせてエラーのためのメソッドをFindとGetComponentで共有化した完成例がこちらです。
https://gist.github.com/JunShimura/866cfe8736e4b40f35bf50113748cdd0こうすると、このようなエラーになります。
うるさいゲームデザイナーの相手をしなくていい親切に何がおかしいか判った方が効率が好いですね！


