More than 1 year has passed since last update.職場においてC#を利用して自社サービスを実装しているのですが、
IEnumerableではまったことをちょっとまとめておきたいと思います。下記は起こった事象を簡単にしたものとなります。下記の例は、IEnumerableに入ったユーザ情報の名前が大文字になることを期待したものとなります。出力結果なぜか最初の値のままでした・・・そうなんです。参照が違っておりました。
Enumerable.RepeatとかEnumerable.Selectとかが遅延評価のIEnumerableを返すので、foreachやToListで評価された際に初期化されてしまいます。ToList()することで再度評価されても同じ参照が返るので無事、大文字にできました。修正パターン１だと、２ループしてしまうのは性能上問題があると思いますので、下記の方法を考えました。初期化の後にSelect()に修正して、無事、大文字に置換することができました！


