<!DOCTYPE html><html><head><meta charset="utf-8" /><title>Entity Component System を作って学ぶ - Qiita</title><meta content="width=device-width,initial-scale=1,shrink-to-fit=no,viewport-fit=cover" name="viewport" /><meta content="#55c500" name="theme-color" /><meta content="XWpkTG32-_C4joZoJ_UsmDUi-zaH-hcrjF6ZC_FoFbk" name="google-site-verification" /><meta content="telephone=no" name="format-detection" /><link rel="canonical" href="https://qiita.com/GREAT__SHARK/items/6d9c5adc6822ab0e8513" /><link href="/manifest.json" rel="manifest" /><link href="/opensearch.xml" rel="search" title="Qiita" type="application/opensearchdescription+xml" /><link as="script" href="https://www.googletagservices.com/tag/js/gpt.js" rel="preload" /><link href="https://securepubads.g.doubleclick.net" rel="preconnect" /><script async="" src="https://www.googletagservices.com/tag/js/gpt.js"></script><meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="/EDfRnsaFJ8mH70xCHRlEE2482gB7+J0ZoMpOgboq7g/gd9gXro1SCTK8O2+stQcuyqRa+rvkUL1awunPANrAQ==" /><link rel="shortcut icon" type="image/x-icon" href="https://cdn.qiita.com/assets/favicons/public/production-c620d3e403342b1022967ba5e3db1aaa.ico" /><link rel="apple-touch-icon" type="image/png" href="https://cdn.qiita.com/assets/favicons/public/apple-touch-icon-ec5ba42a24ae923f16825592efdc356f.png" /><link rel="stylesheet" media="all" href="https://cdn.qiita.com/assets/public/article-2eaa7dbedc42a8ea65c722cda46d0ebb.min.css" /><script src="https://cdn.qiita.com/assets/public/v3-article-bundle-63de2d91fef827269d3f6b958db2335b.min.js" defer="defer"></script><meta name="twitter:card" content="summary_large_image"><meta content="@Qiita" name="twitter:site" /><meta property="og:type" content="article"><meta property="og:title" content="Entity Component System を作って学ぶ - Qiita"><meta property="og:image" content="https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0&amp;w=1200&amp;mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND1SVzUwYVhSNUlFTnZiWEJ2Ym1WdWRDQlRlWE4wWlcwZzQ0S1M1TDJjNDRHajQ0R201YTJtNDRHMiZ0eHQtY29sb3I9JTIzMzMzJnR4dC1mb250PUhpcmFnaW5vJTIwU2FucyUyMFc2JnR4dC1zaXplPTU0JnR4dC1jbGlwPWVsbGlwc2lzJnR4dC1hbGlnbj1jZW50ZXIlMkNtaWRkbGUmcz1lODg3YmI1ZmU2MjBlNGJmNzkwYjVlY2RjZmEzYzNjOQ&amp;mark-align=center%2Cmiddle&amp;blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RRWRTUlVGVVgxOVRTRUZTU3cmdHh0LWNvbG9yPSUyMzMzMyZ0eHQtZm9udD1IaXJhZ2lubyUyMFNhbnMlMjBXNiZ0eHQtc2l6ZT00NSZ0eHQtYWxpZ249cmlnaHQlMkNib3R0b20mcz1lOGQ2M2FkNjA0OTNiMWJjMmJmOGI0ZDhmZjMyNGMyZg&amp;blend-align=center%2Cmiddle&amp;blend-mode=normal&amp;s=c4b8bf11fe04f60e7a99060301d964b1"><meta property="og:description" content="この記事はUnity #2 Advent Calender 2018 21日目の記事です。

先にECSを紹介された方がいたが、多忙につき取り上げられず。申し訳ないです。


そもそもECSとは？

Entity Component ..."><meta content="https://qiita.com/GREAT__SHARK/items/6d9c5adc6822ab0e8513" property="og:url" /><meta content="Qiita" property="og:site_name" /><meta content="564524038" property="fb:admins" /><meta content="C#,Unity,EntityComponentSystem" name="keywords" /><script>!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window, document,'script',
'https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '668972150489891');
fbq('track', 'PageView');</script><style data-emotion-css="17jxvjw 11t2ec1 1dvr2p8 18lkoru 1g4cku8 1iupg5d ijvq0v 15cocm3 12rp90f 115f4t 1b8uj5v 79elbk 16hhh7b fcbn8c 1gj7nt 154zy0m yikrym 1jqivyb 1ode1bp le4d8r 1hbd3g7 1nzh4zz 38fzdi helsa7 8qb8m4 2imjyh he5w1s 70qvj9 3ojehk 100alwu 1dtnjt5 10ougpm 1ay9vb9 m19uds cgzq40 1wa99t2 1l3zk9f 4czcte 1yzj1fm 1uv1qiv 109dbrr 5jpx49 mnxgyc 1vlpknv fsjkhv 1b17vb0 7i7f4d"}>.css-17jxvjw{display:grid;display:-ms-grid;grid-template-columns:80px minmax(0,1fr) 300px;-ms-grid-columns:80px minmax(0,1fr) 300px;grid-template-rows:minmax(270px,auto) 1fr;-ms-grid-rows:minmax(270px,auto) 1fr;max-width:1280px;margin-right:auto;margin-left:auto;padding-top:24px;padding-right:24px;padding-left:24px;}@media (max-width:1200px){.css-17jxvjw{padding-bottom:0;padding-left:0;padding-right:0;}}@media (max-width:992px){.css-17jxvjw{grid-template-columns:80px 452px 300px;-ms-grid-columns:80px 452px 300px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}}@media (max-width:770px){.css-17jxvjw{display:block;}}@media (max-width:480px){.css-17jxvjw{padding-top:0;}}.css-11t2ec1{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;z-index:5;position:-webkit-sticky;position:sticky;top:calc(56px + 24px + 16px + 32px - 16px);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:16px;width:80px;}.css-11t2ec1:after{content:'';display:table;}.css-11t2ec1:before{content:'';display:table;}@media (max-width:770px){.css-11t2ec1{display:none;}}.css-1dvr2p8{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-18lkoru{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;background-color:#FFFFFF;}.css-1g4cku8{display:inline-block;vertical-align:middle;height:20px;width:20px;fill:#55C500;}.css-1iupg5d{color:#55C500;cursor:pointer;font-size:14px;font-weight:bold;}.css-ijvq0v{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-15cocm3{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#FFFFFF;border:2px solid #6E6F70;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:2px 0px 0px;width:40px;}.css-12rp90f{display:inline-block;vertical-align:bottom;height:17.77777777777778px;width:16px;fill:#6E6F70;}.css-115f4t{color:#6E6F70;font-size:14px;font-weight:bold;}.css-1b8uj5v{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;margin-bottom:16px;padding:0;}.css-79elbk{position:relative;}.css-16hhh7b{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;padding:0;}.css-fcbn8c{display:none;bottom:initial;left:initial;right:initial;top:initial;left:100%;top:calc(-8px - (14px * 1.8) - 16px - 4px);}.css-1gj7nt{color:rgba(0,0,0,0.6);font-size:14px;font-weight:bold;line-height:1.8;padding:8px 16px;}.css-154zy0m{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.87);cursor:pointer;font-size:16px;font-weight:normal;line-height:1.8;padding:4px 16px;}.css-154zy0m:hover{-webkit-text-decoration:none;text-decoration:none;background-color:#F2F2F2;}.css-yikrym{width:20px;}.css-1jqivyb{color:rgba(0,0,0,0.6);font-size:13px;}.css-1ode1bp{background-color:rgba(0,0,0,0.12);height:1px;width:100%;margin:8px 0;}.css-le4d8r{display:inline-block;vertical-align:middle;height:13px;width:13px;fill:rgba(0,0,0,0.6);}.css-1hbd3g7{height:250px;}.css-1nzh4zz{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:16px 32px;background-color:#FBE69E;color:rgba(0,0,0,0.87);line-height:1.5;font-weight:600;}@media (max-width:770px){.css-1nzh4zz{padding:16px;}}.css-38fzdi{color:#CA832A;margin-right:4px;}.css-helsa7{background-color:#FFFFFF;padding:32px;margin-bottom:24px;}@media (max-width:992px){.css-helsa7{margin:0 auto 40px;}}@media (max-width:480px){.css-helsa7{margin:0 0 40px;padding:32px 16px;}}.css-8qb8m4{margin-bottom:48px;}.css-2imjyh{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-he5w1s{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;width:100%;}@media (max-width:770px){.css-he5w1s{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}}.css-70qvj9{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.css-3ojehk{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;margin-right:4px;}.css-100alwu{display:inline-block;border-radius:50%;line-height:1;overflow:hidden;vertical-align:middle;}.css-1dtnjt5{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-10ougpm{color:rgba(0,0,0,0.87);font-size:14px;font-weight:600;line-height:1.8;margin-right:4px;text-wrap:break-word;word-break:break-all;}.css-1ay9vb9{margin-right:16px;}.css-m19uds{color:rgba(0,0,0,0.6);font-size:14px;line-height:1.8;}.css-cgzq40{color:rgba(0,0,0,0.87);font-size:32px;font-weight:bold;line-height:1.4;margin-top:8px;text-wrap:break-word;word-break:break-all;}.css-1wa99t2{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.6);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:8px;}.css-1l3zk9f{color:rgba(0,0,0,0.6);font-size:20px;margin-right:8px;}.css-4czcte{margin-right:4px;color:inherit;font-size:14px;line-height:1.8;}.css-4czcte:not(:last-child)::after{content:',';margin-right:4px;}.css-1yzj1fm{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:32px;}.css-1uv1qiv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-size:20px;height:32px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin-right:16px;outline:none;padding:0;width:32px;}.css-109dbrr{background-color:#F9F9F9;border-top:1px solid rgba(0,0,0,0.12);bottom:0;box-shadow:0px 1px 4px rgba(0,0,0,0.14);display:none;height:calc(env(safe-area-inset-bottom,0px) + 56px);-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding-bottom:env(safe-area-inset-bottom);position:-webkit-sticky;position:sticky;width:100%;z-index:2000;}@media (max-width:770px){.css-109dbrr{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}.css-5jpx49{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:space-evenly;-webkit-justify-content:space-evenly;-ms-flex-pack:space-evenly;justify-content:space-evenly;width:100%;}.css-mnxgyc{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1vlpknv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;margin-right:4px;background-color:#FFFFFF;}.css-fsjkhv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1b17vb0{color:#6E6F70;font-size:14px;font-weight:bold;margin-left:4px;}.css-7i7f4d{display:none;bottom:initial;left:initial;right:initial;top:initial;bottom:32px;right:0;}</style></head><body><div class="allWrapper"><div><div id="GlobalHeader-react-component-1a71bac9-b37b-47f1-8edc-1da27b3f7ba0"><div class="st-Header"><div class="st-Header_container"><div class="st-Header_start"><a href="/" class="st-Header_logo"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 426.57 130"><circle cx="167.08" cy="21.4" r="12.28"></circle><path d="M250.81 29.66h23.48v18.9h-23.48z"></path><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z"></path><circle cx="216.33" cy="21.4" r="12.28"></circle></svg></a><div class="st-Header_communitySelector" tabindex="0"><span class="fa fa-caret-down"></span></div><div class="st-Header_dropdown"><div class="st-Header_dropdownHeading">Qiita Teams that are logged in</div><div class="st-Header_dropdownItemNote">You are not logged in to any team</div><hr class="st-Header_dropdownDivider st-Header_dropdownDivider-shrink"/><a href="https://teams-center.qiita.com/find_team" class="st-Header_dropdownItem"><span class="fa fa-fw fa-sign-in st-Header_dropdownItemIcon"></span><div>Log in to Qiita Team</div></a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Community</div><a href="/organizations" class="st-Header_dropdownItem">Organization</a><a href="/official-events/open" class="st-Header_dropdownItem">Event</a><a href="/advent-calendar" class="st-Header_dropdownItem">Advent Calendar</a><a href="https://qiitadon.com/" class="st-Header_dropdownItem" target="_blank">Qiitadon (β)</a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Service</div><a href="https://jobs.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Jobs</a><a href="https://zine.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Zine</a><a href="https://blog.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Blog</a></div><form class="st-Header_search" action="/search" method="get"><span class="fa fa-search st-Header_searchIcon"></span><input type="search" class="st-Header_searchInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form><form class="st-Header_searchModal" action="/search" method="get"><input type="text" class="st-Header_searchModalInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form></div><div class="st-Header_end"><div class="st-Header_searchButton"><span class="fa fa-search"></span></div><a class="st-Header_signupButton" href="/signup?redirect_to=%2FGREAT__SHARK%2Fitems%2F6d9c5adc6822ab0e8513">Signup</a><a class="st-Header_loginLink" href="/login?redirect_to=%2FGREAT__SHARK%2Fitems%2F6d9c5adc6822ab0e8513">Login</a></div><div class="st-Header_overlay"></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="GlobalHeader" data-dom-id="GlobalHeader-react-component-1a71bac9-b37b-47f1-8edc-1da27b3f7ba0">{"unreadNotificationsCount":null,"realms":[{"humanName":"Qiita","isCurrentRealm":true,"isQiita":true,"isQiitaTeam":false,"loggedInUser":null,"teamId":null,"url":"https://qiita.com/"}],"teamFindUrl":"https://teams-center.qiita.com/find_team","isTeamOnlyUser":null,"currentUser":null}</script>
      
</div><div class="st-HeaderAlert st-HeaderAlert-warning"><div class="st-HeaderAlert_body"></div></div><script type="application/ld+json">{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"/","name":"Qiita"}},{"@type":"ListItem","position":2,"item":{"@id":"/tags/csharp","name":"C#"}}]}</script><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","datePublished":"2018-12-21T02:37:36.000+09:00","dateModified":"2019-05-29T02:00:20.000+09:00","headline":"Entity Component System を作って学ぶ","image":"https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0\u0026w=1200\u0026mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND1SVzUwYVhSNUlFTnZiWEJ2Ym1WdWRDQlRlWE4wWlcwZzQ0S1M1TDJjNDRHajQ0R201YTJtNDRHMiZ0eHQtY29sb3I9JTIzMzMzJnR4dC1mb250PUhpcmFnaW5vJTIwU2FucyUyMFc2JnR4dC1zaXplPTU0JnR4dC1jbGlwPWVsbGlwc2lzJnR4dC1hbGlnbj1jZW50ZXIlMkNtaWRkbGUmcz1lODg3YmI1ZmU2MjBlNGJmNzkwYjVlY2RjZmEzYzNjOQ\u0026mark-align=center%2Cmiddle\u0026blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RRWRTUlVGVVgxOVRTRUZTU3cmdHh0LWNvbG9yPSUyMzMzMyZ0eHQtZm9udD1IaXJhZ2lubyUyMFNhbnMlMjBXNiZ0eHQtc2l6ZT00NSZ0eHQtYWxpZ249cmlnaHQlMkNib3R0b20mcz1lOGQ2M2FkNjA0OTNiMWJjMmJmOGI0ZDhmZjMyNGMyZg\u0026blend-align=center%2Cmiddle\u0026blend-mode=normal\u0026s=c4b8bf11fe04f60e7a99060301d964b1","mainEntityOfPage":"https://qiita.com/GREAT__SHARK/items/6d9c5adc6822ab0e8513","author":{"@type":"Person","address":"Tokyo","email":null,"identifier":"GREAT__SHARK","name":"GREAT__SHARK","image":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F256717%2Fprofile-images%2F1531913570?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=d8104a04ecfe222eeb7bf6a5cb796703","url":"https://qiita.com/GREAT__SHARK","description":"日々の開発のちょっとしたメモとして記事を書いてます。","memberOf":[]},"publisher":{"@type":"Organization","name":"Qiita","logo":{"@type":"ImageObject","url":"//cdn.qiita.com/assets/public/qiita-logo-c39ded593afa388e2e1ba435b110554e.png"}}}</script><style type="text/css">.wb-CampaignLink {
  background-color: #333333;
  width: 100%;
}

.wb-CampaignLink_container {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  max-width: 1100px;
  margin: 0 auto;
  font-size: 13px;
  padding: 0.8em;
}
.wb-CampaignLink_container > a {
  color: #fff;
}

.wb-CampaignLink_container > a:hover {
  text-decoration: underline;
}</style><div class="wb-CampaignLink"><div class="wb-CampaignLink_container"><a target="_blank" id="header_text_message_1" href="https://increments.connpass.com/event/211948/">Qiita創業者海野氏登壇！Qiita エンジニアフェスタ 2021 Online Meetupを9/9(木)に開催</a><a target="_blank" id="header_text_message_2" href="https://increments.connpass.com/event/211948/">詳しくはこちら</a></div><script>td.trackEvent(
  'front_events',
  {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"GREAT__SHARK","type":"items","id":"6d9c5adc6822ab0e8513"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Show","data":{"message":"Qiita創業者海野氏登壇！Qiita エンジニアフェスタ 2021 Online Meetupを9/9(木)に開催","url":"https://increments.connpass.com/event/211948/","sub_message":"詳しくはこちら"}}
)</script><script>document.getElementById('header_text_message_1').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"GREAT__SHARK","type":"items","id":"6d9c5adc6822ab0e8513"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":1,"pos_id":"header_text_message_1","message":"Qiita創業者海野氏登壇！Qiita エンジニアフェスタ 2021 Online Meetupを9/9(木)に開催","url":"https://increments.connpass.com/event/211948/","sub_message":"詳しくはこちら"}}
  )
})</script><script>document.getElementById('header_text_message_2').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"GREAT__SHARK","type":"items","id":"6d9c5adc6822ab0e8513"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":1,"pos_id":"header_text_message_2","message":"Qiita創業者海野氏登壇！Qiita エンジニアフェスタ 2021 Online Meetupを9/9(木)に開催","url":"https://increments.connpass.com/event/211948/","sub_message":"詳しくはこちら"}}
  )
})</script></div><script type="application/json" id="js-react-on-rails-context">{"railsEnv":"production","inMailer":false,"i18nLocale":"en","i18nDefaultLocale":"en","href":"https://qiita.com/GREAT__SHARK/items/6d9c5adc6822ab0e8513","location":"/GREAT__SHARK/items/6d9c5adc6822ab0e8513","scheme":"https","host":"qiita.com","port":null,"pathname":"/GREAT__SHARK/items/6d9c5adc6822ab0e8513","search":null,"httpAcceptLanguage":null,"actionPath":"public/items#show","settings":{"analyticsTrackingId":"UA-24675221-12","assetsMap":{},"csrfToken":"QLhH2lVXblaKn4TezqDXmkRnUW2KQGHfFSTFiCTnaTeDeUf8cPdPgYhKyQJ4ZmaWsvUzbmFAEumGzOcVHgypjg==","locale":"en"},"currentUser":null,"isLoggedIn":false,"recaptchaSiteKey":"6LfNkiQTAAAAAM3UGnSquBy2akTITGNMO_QDxMw6","serverSide":false}</script>
<div id="PersonalArticlePage-react-component-d52c6c8c-9580-4254-9dcd-11e2448b74f4"><div class="p-items_wrapper"><div class=" css-17jxvjw"><div class="css-11t2ec1"><div class="css-1dvr2p8"><button class=" css-18lkoru"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/GREAT__SHARK/items/6d9c5adc6822ab0e8513/likers" class="css-1iupg5d">28</a></div><div class="css-ijvq0v"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-115f4t">25</span></div><div class="css-1b8uj5v"><span class="fa fa-twitter"></span></div><div class="css-1b8uj5v"><span class="fa fa-facebook"></span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-fcbn8c"><div class="css-1gj7nt">Improve article</div><a href="/drafts/6d9c5adc6822ab0e8513/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/GREAT__SHARK/items/6d9c5adc6822ab0e8513/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/GREAT__SHARK/items/6d9c5adc6822ab0e8513/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/GREAT__SHARK/items/6d9c5adc6822ab0e8513/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/GREAT__SHARK/items/6d9c5adc6822ab0e8513.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div><div class="p-items_options"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_toc"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_main"><div class="css-1nzh4zz"><span class="fa fa-fw fa-warning css-38fzdi"></span><p>More than 1 year has passed since last update.</p></div><div class="css-helsa7"><div class="css-8qb8m4"><div class="it-AdcalRibbon"><span><a href="/advent-calendar/2018/unity2" class="it-AdcalRibbon_title">Unity #2<!-- --> Advent Calendar<!-- --> <!-- -->2018</a>Day 21</span></div><div class="css-2imjyh"><div class="css-he5w1s"><div class="css-70qvj9"><div class="css-3ojehk"><a href="/GREAT__SHARK"><img class="css-100alwu eyfquo10" src="https://qiita-image-store.s3.amazonaws.com/0/256717/profile-images/1531913570" width="24" height="24" loading="lazy"/></a></div><div class="css-1dtnjt5"><a href="/GREAT__SHARK" class="css-10ougpm">@<!-- -->GREAT__SHARK</a><div class="css-1ay9vb9"><span><meta content="2018-12-20T17:37:36Z"/><time dateTime="2019-05-28T17:00:20Z" class="css-m19uds">updated at 2019-05-28</time></span></div></div></div></div></div><h1 class="css-cgzq40">Entity Component System を作って学ぶ</h1><div class="css-1wa99t2"><span class="fa fa-tags mr-1of2 css-1l3zk9f" aria-hidden="true"></span><a href="/tags/csharp" class="css-4czcte">C#</a><a href="/tags/unity" class="css-4czcte">Unity</a><a href="/tags/entitycomponentsystem" class="css-4czcte">EntityComponentSystem</a></div></div><section class="it-MdContent"><div id="personal-public-article-body"><div><p>この記事は<a href="https://qiita.com/advent-calendar/2018/unity2">Unity #2 Advent Calender 2018</a> 21日目の記事です。</p>

<p>先にECSを紹介された方がいたが、多忙につき取り上げられず。申し訳ないです。</p>

<h1>
<span id="そもそもecsとは" class="fragment"></span><a href="#%E3%81%9D%E3%82%82%E3%81%9D%E3%82%82ecs%E3%81%A8%E3%81%AF"><i class="fa fa-link"></i></a>そもそもECSとは？</h1>

<p>Entity Component Systemの略です。</p>

<p>引用：<a href="https://github.com/Unity-Technologies/EntityComponentSystemSamples" rel="nofollow noopener" target="_blank">Unity-Technologies/EntityComponentSystemSamples</a></p>

<blockquote>
<p>Offers a better approach to game design that allows you to concentrate on the actual problems you are solving: the data and behavior that make up your game. It leverages the C# Job System and Burst Compiler enabling you to take full advantage of today's multicore processors. By moving from object-oriented to data-oriented design it will be easier for you to reuse the code and easier for others to understand and work on it</p>

<p>The Entity Component System ships as an experimental package in 2018.1 and later, and we’ll continue to develop and release new versions of the package in the 2018.x cycle. It is important to stress that the Entity Component System is not production ready</p>
</blockquote>

<p><strong>意訳</strong></p>

<ul>
<li>C#JobSystem と　BurstCompilerを使って、今日のメモリ並列処理技術をフル活用できますよ。</li>
<li>オブジェクト志向から移行することで、コードが使い回し安くなります。どう動いているかが他人に理解しやすくなります。</li>
<li>ECSはUnity2018.1以降から試験的にリリースされています。まだ製品版じゃありませんよ。</li>
</ul>

<p>→ GameObjectの上位互換になりうる新しい技術ということかな？<br>
<a href="">BurstCompiler</a>と組み合わせれば飛躍的にパフォーマンスが向上するようです。</p>

<p>他記事にも沢山説明があるので、より詳しく知りたい方は以下を読んでみるといいかも。<br>
<a href="http://tsubakit1.hateblo.jp/entry/2018/03/25/180203" rel="nofollow noopener" target="_blank">【Unity】Unity 2018のEntity Component System（通称ECS）について（１）</a></p>

<blockquote>
<p>まずECSとは何か？ECSは 何か凄い機能 というよりは、コンポーネント志向に変わる新しいアーキテクチャパターンです。<br>
要するに、(目標としては)GameObject / Componentを差し替えるモノです。</p>

<p>ECSはGameObject / MonoBehaviourと較べて、膨大なオブジェクトを処理しやすい設計になっています。ECSはUnityのコンポーネント志向と用語的には似ており、ECSはUnity的な視点から言えば「コンパクトな GameObject &amp; Monobehaviourのようなモノ」とも言えなくはないです。</p>
</blockquote>

<p>今後エンジニアとして生きていくなら、絶対勉強しておかないとダメ！といった記事も目に入り、今回はこのネタを選びました。<br>
と言っても、他の記事を読んでもふんわりとしか分からず、初級者向けに、何かに例えながら紹介させてもらいます。</p>

<h1>
<span id="ecs用語" class="fragment"></span><a href="#ecs%E7%94%A8%E8%AA%9E"><i class="fa fa-link"></i></a>ECS用語</h1>

<ol>
<li>Entity

<ul>
<li>「ComponentSystemが動作する為に要求するComponentData各種(Group)」を持つデータの単位</li>
<li>インスタンスに該当。速いGameObjectのようなもの。</li>
</ul>
</li>
<li>ComponentData

<ul>
<li>処理(ComponentSystem)で使われるデータ</li>
<li>MonoBehaviorで言うところの<strong>データ部分</strong>
</li>
</ul>
</li>
<li>ComponentSystem

<ul>
<li>Groupのデータが揃っている際に動作する処理の内容</li>
<li>MonoBehavior で言うところの<strong>振る舞い部分</strong>
</li>
</ul>
</li>
<li>Group

<ul>
<li>処理(ComponentSystem)を動作させるために必要となるデータ(ComponentData)各種の定義</li>
<li>必要なComponentDataはこれとこれです的な事を決めている。要求リスト</li>
</ul>
</li>
</ol>

<h1>
<span id="導入" class="fragment"></span><a href="#%E5%B0%8E%E5%85%A5"><i class="fa fa-link"></i></a>導入</h1>

<p><a href="https://camo.qiitausercontent.com/cbff1b197dec6a0937713657933d6945a311dbf5/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3235363731372f32346536373861352d616361352d383332352d343730372d3538653333613733383465382e706e67" target="_blank" rel="nofollow noopener"><img width="333" alt="スクリーンショット 2018-12-02 16.07.44.png" src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F256717%2F24e678a5-aca5-8325-4707-58e33a7384e8.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=f59ff3245f67934f51be71de7fcef9e9" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/256717/24e678a5-aca5-8325-4707-58e33a7384e8.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F256717%2F24e678a5-aca5-8325-4707-58e33a7384e8.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=3b14ebf727cf2522ac878dec1de02cdc 1x" loading="lazy"></a></p>

<ul>
<li>
<strong>PlayerSettings</strong>から、<strong>Scripting Runtime Version</strong>を<strong>.NET 4.x</strong>にします。</li>
<li>
<strong>PlayerSettings</strong>から、<strong>unsafeコード</strong>を許可する</li>
<li>
<strong>Package Manager</strong>から<strong>Entities</strong>をインストールします。</li>
</ul>

<h1>
<span id="公式ecsサンプルを見てみた" class="fragment"></span><a href="#%E5%85%AC%E5%BC%8Fecs%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB%E3%82%92%E8%A6%8B%E3%81%A6%E3%81%BF%E3%81%9F"><i class="fa fa-link"></i></a>公式ECSサンプルを見てみた</h1>

<p><a href="https://github.com/Unity-Technologies/EntityComponentSystemSamples" rel="nofollow noopener" target="_blank">Unity-Technologies/EntityComponentSystemSamples</a></p>

<p>を<strong>git clone</strong>。動作環境は<strong>Unity2018.2.3f1</strong></p>

<p>　サンプルの中には<strong>PureECS</strong>（現行のGameObjectやComponentを使用しないECSのみでの実装）、<strong>HybridECS</strong>（現行のComponent等とECSを組み合わせたハイブリットと呼ばれる実装）と色々なものがありました。</p>

<h2>
<span id="試しにboidexampleを再生してみた" class="fragment"></span><a href="#%E8%A9%A6%E3%81%97%E3%81%ABboidexample%E3%82%92%E5%86%8D%E7%94%9F%E3%81%97%E3%81%A6%E3%81%BF%E3%81%9F"><i class="fa fa-link"></i></a>試しにBoidExampleを再生してみた。</h2>

<p><a href="https://camo.qiitausercontent.com/cfc0ddd7efb617ace3d888ec46becd35cb0add20/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3235363731372f62383762323161392d323164652d313065622d353566642d6532336161303964656539622e706e67" target="_blank" rel="nofollow noopener"><img width="324" alt="スクリーンショット 2018-11-17 17.13.22.png" src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F256717%2Fb87b21a9-21de-10eb-55fd-e23aa09dee9b.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=597e23fac8ef678d0388189579681ccc" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/256717/b87b21a9-21de-10eb-55fd-e23aa09dee9b.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F256717%2Fb87b21a9-21de-10eb-55fd-e23aa09dee9b.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=9cf77e2bea0b382217232f9c2ad7c486 1x" loading="lazy"></a><a href="https://camo.qiitausercontent.com/a23592b0996da7c505cb3652e0cf00ab353d43af/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3235363731372f63386537373330652d323266342d666433382d663534372d3434356164326437393930662e706e67" target="_blank" rel="nofollow noopener"><img width="325" alt="スクリーンショット 2018-11-17 17.13.13.png" src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F256717%2Fc8e7730e-22f4-fd38-f547-445ad2d7990f.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=df312c8f858137dfa49e38a881f134e8" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/256717/c8e7730e-22f4-fd38-f547-445ad2d7990f.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F256717%2Fc8e7730e-22f4-fd38-f547-445ad2d7990f.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=8d9f01a2d7a630625d17d77c586667e6 1x" loading="lazy"></a></p>

<p>魚の大群が現れました。すごい...(語彙力)</p>

<p><a href="https://camo.qiitausercontent.com/26f0e4e5936cc0696251bca156ad004e1c90f216/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3235363731372f62323061616137372d383235392d386139322d656565372d6230656536323939366333312e706e67" target="_blank" rel="nofollow noopener"><img width="284" alt="スクリーンショット 2018-11-17 17.57.58.png" src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F256717%2Fb20aaa77-8259-8a92-eee7-b0ee62996c31.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=f28d8d0abb9e103d9414a08699a016c2" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/256717/b20aaa77-8259-8a92-eee7-b0ee62996c31.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F256717%2Fb20aaa77-8259-8a92-eee7-b0ee62996c31.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=ad01a06bf421e54c0b39217dece43abe 1x" loading="lazy"></a></p>

<p>ヒエラルキーは上記のように組まれてます。この中で、<strong>BoidFishSpawner</strong>と<strong>生成する魚(prefab)</strong>にECSが実装されていました。<br>
<strong>BoidFishSpawner</strong>には、魚を生成するためのComponentDataが、<strong>生成する魚(prefab)</strong>にはその魚を制御するComponentDataがアタッチされています。</p>

<h2>
<span id="componentdata-の中身を見てみる" class="fragment"></span><a href="#componentdata-%E3%81%AE%E4%B8%AD%E8%BA%AB%E3%82%92%E8%A6%8B%E3%81%A6%E3%81%BF%E3%82%8B"><i class="fa fa-link"></i></a>ComponentData の中身を見てみる</h2>

<p>魚の挙動は複雑だったので、魚を生成する方のComponentDataだけ紹介します。</p>

<p>Boidコンポーネントデータには、<strong>魚群の生成範囲</strong>、<strong>魚の数</strong>、<strong>魚プレハブ</strong>を持たせています。<br>
これらをComponentSystemに渡し、生成するという事ですね。</p>

<div class="code-frame" data-lang="c#">
<div class="code-lang"><span class="bold">Boid.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Unity.Entities</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UnityEngine</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">Samples.Common</span>
<span class="p">{</span>
    <span class="p">[</span><span class="n">Serializable</span><span class="p">]</span>
    <span class="k">public</span> <span class="k">struct</span> <span class="nc">SpawnRandomInSphere</span> <span class="p">:</span> <span class="n">ISharedComponentData</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="n">GameObject</span> <span class="n">prefab</span><span class="p">;</span>
        <span class="k">public</span> <span class="kt">float</span> <span class="n">radius</span><span class="p">;</span> <span class="c1">//魚群の生成範囲</span>
        <span class="k">public</span> <span class="kt">int</span> <span class="n">count</span><span class="p">;</span>     <span class="c1">//魚の数</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">class</span> <span class="nc">SpawnRandomInSphereComponent</span> <span class="p">:</span> <span class="n">SharedComponentDataWrapper</span><span class="p">&lt;</span><span class="n">SpawnRandomInSphere</span><span class="p">&gt;</span> <span class="p">{</span> <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<p><strong>Positionコンポーネントデータ</strong>は、 float3 Value を持つのみですね。<br>
座標など、生成位置以外にも使える<strong>汎用的なComponentDataは、使いまわして使用</strong>してます。</p>

<p>例えばここでは、生成位置以外にも、移動する座標（魚の挙動）にもPositionコンポーネントデータが使われていました。</p>

<div class="code-frame" data-lang="c#">
<div class="code-lang"><span class="bold">Position.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Unity.Entities</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Unity.Mathematics</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">Unity.Transforms</span>
<span class="p">{</span>
    <span class="c1">/// &lt;summary&gt;</span>
    <span class="c1">/// If Attached, in local space (relative to parent)</span>
    <span class="c1">/// If not Attached, in world space.</span>
    <span class="c1">/// &lt;/summary&gt;</span>
    <span class="p">[</span><span class="n">Serializable</span><span class="p">]</span>
    <span class="k">public</span> <span class="k">struct</span> <span class="nc">Position</span> <span class="p">:</span> <span class="n">IComponentData</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="n">float3</span> <span class="n">Value</span><span class="p">;</span> <span class="c1">//生成位置情報</span>
    <span class="p">}</span>

    <span class="p">[</span><span class="n">UnityEngine</span><span class="p">.</span><span class="n">DisallowMultipleComponent</span><span class="p">]</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">PositionComponent</span> <span class="p">:</span> <span class="n">ComponentDataWrapper</span><span class="p">&lt;</span><span class="n">Position</span><span class="p">&gt;</span> <span class="p">{</span> <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<h2>
<span id="componentsystem-の中身を見てみる" class="fragment"></span><a href="#componentsystem-%E3%81%AE%E4%B8%AD%E8%BA%AB%E3%82%92%E8%A6%8B%E3%81%A6%E3%81%BF%E3%82%8B"><i class="fa fa-link"></i></a>ComponentSystem の中身を見てみる</h2>

<p>上述の<strong>ComponentData</strong>(SpawnRandomInSphereComponent)は<strong>ComponentSystem</strong>(SpawnRandomInSphereSystem)にて使われています。</p>

<p>どうやらこの中で、ComponentSystemの他、<strong>Groupの定義</strong>もしているようです。</p>

<div class="code-frame" data-lang="c#">
<div class="code-lang"><span class="bold">SpawnRandomInSphereSystem.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Unity.Collections</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Unity.Entities</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Unity.Mathematics</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Unity.Transforms</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">Samples.Common</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">SpawnRandomInSphereSystem</span> <span class="p">:</span> <span class="n">ComponentSystem</span>
    <span class="p">{</span>
        <span class="k">struct</span> <span class="nc">SpawnRandomInSphereInstance</span>
        <span class="p">{</span>
            <span class="k">public</span> <span class="kt">int</span> <span class="n">spawnerIndex</span><span class="p">;</span>
            <span class="k">public</span> <span class="n">Entity</span> <span class="n">sourceEntity</span><span class="p">;</span>
            <span class="k">public</span> <span class="n">float3</span> <span class="n">position</span><span class="p">;</span>
<span class="cp">#pragma warning disable 649
</span>            <span class="k">public</span> <span class="kt">float</span> <span class="n">radius</span><span class="p">;</span>
<span class="cp">#pragma warning restore 649
</span>        <span class="p">}</span>

        <span class="n">ComponentGroup</span> <span class="n">m_MainGroup</span><span class="p">;</span>

        <span class="c1">// ここで要求するComponentDataを決めています。</span>
        <span class="k">protected</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">OnCreateManager</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="n">m_MainGroup</span> <span class="p">=</span> <span class="nf">GetComponentGroup</span><span class="p">(</span><span class="k">typeof</span><span class="p">(</span><span class="n">SpawnRandomInSphere</span><span class="p">),</span> <span class="k">typeof</span><span class="p">(</span><span class="n">Position</span><span class="p">));</span>
        <span class="p">}</span>

        <span class="k">protected</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">OnUpdate</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="kt">var</span> <span class="n">uniqueTypes</span> <span class="p">=</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">SpawnRandomInSphere</span><span class="p">&gt;(</span><span class="m">10</span><span class="p">);</span>

            <span class="n">EntityManager</span><span class="p">.</span><span class="nf">GetAllUniqueSharedComponentData</span><span class="p">(</span><span class="n">uniqueTypes</span><span class="p">);</span>

            <span class="kt">int</span> <span class="n">spawnInstanceCount</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span>
            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">sharedIndex</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">sharedIndex</span> <span class="p">!=</span> <span class="n">uniqueTypes</span><span class="p">.</span><span class="n">Count</span><span class="p">;</span> <span class="n">sharedIndex</span><span class="p">++)</span>
            <span class="p">{</span>
                <span class="kt">var</span> <span class="n">spawner</span> <span class="p">=</span> <span class="n">uniqueTypes</span><span class="p">[</span><span class="n">sharedIndex</span><span class="p">];</span>
                <span class="n">m_MainGroup</span><span class="p">.</span><span class="nf">SetFilter</span><span class="p">(</span><span class="n">spawner</span><span class="p">);</span>
                <span class="kt">var</span> <span class="n">entities</span> <span class="p">=</span> <span class="n">m_MainGroup</span><span class="p">.</span><span class="nf">GetEntityArray</span><span class="p">();</span>
                <span class="n">spawnInstanceCount</span> <span class="p">+=</span> <span class="n">entities</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">spawnInstanceCount</span> <span class="p">==</span> <span class="m">0</span><span class="p">)</span>
                <span class="k">return</span><span class="p">;</span>

            <span class="kt">var</span> <span class="n">spawnInstances</span> <span class="p">=</span> <span class="k">new</span> <span class="n">NativeArray</span><span class="p">&lt;</span><span class="n">SpawnRandomInSphereInstance</span><span class="p">&gt;(</span><span class="n">spawnInstanceCount</span><span class="p">,</span> <span class="n">Allocator</span><span class="p">.</span><span class="n">Temp</span><span class="p">);</span>
            <span class="p">{</span>
                <span class="kt">int</span> <span class="n">spawnIndex</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span>
                <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">sharedIndex</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">sharedIndex</span> <span class="p">!=</span> <span class="n">uniqueTypes</span><span class="p">.</span><span class="n">Count</span><span class="p">;</span> <span class="n">sharedIndex</span><span class="p">++)</span>
                <span class="p">{</span>
                    <span class="kt">var</span> <span class="n">spawner</span> <span class="p">=</span> <span class="n">uniqueTypes</span><span class="p">[</span><span class="n">sharedIndex</span><span class="p">];</span>
                    <span class="n">m_MainGroup</span><span class="p">.</span><span class="nf">SetFilter</span><span class="p">(</span><span class="n">spawner</span><span class="p">);</span>
                    <span class="kt">var</span> <span class="n">entities</span> <span class="p">=</span> <span class="n">m_MainGroup</span><span class="p">.</span><span class="nf">GetEntityArray</span><span class="p">();</span>
                    <span class="kt">var</span> <span class="n">positions</span> <span class="p">=</span> <span class="n">m_MainGroup</span><span class="p">.</span><span class="n">GetComponentDataArray</span><span class="p">&lt;</span><span class="n">Position</span><span class="p">&gt;();</span>

                    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">entityIndex</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">entityIndex</span> <span class="p">&lt;</span> <span class="n">entities</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span> <span class="n">entityIndex</span><span class="p">++)</span>
                    <span class="p">{</span>
                        <span class="kt">var</span> <span class="n">spawnInstance</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">SpawnRandomInSphereInstance</span><span class="p">();</span>

                        <span class="n">spawnInstance</span><span class="p">.</span><span class="n">sourceEntity</span> <span class="p">=</span> <span class="n">entities</span><span class="p">[</span><span class="n">entityIndex</span><span class="p">];</span>
                        <span class="n">spawnInstance</span><span class="p">.</span><span class="n">spawnerIndex</span> <span class="p">=</span> <span class="n">sharedIndex</span><span class="p">;</span>
                        <span class="n">spawnInstance</span><span class="p">.</span><span class="n">position</span> <span class="p">=</span> <span class="n">positions</span><span class="p">[</span><span class="n">entityIndex</span><span class="p">].</span><span class="n">Value</span><span class="p">;</span>

                        <span class="n">spawnInstances</span><span class="p">[</span><span class="n">spawnIndex</span><span class="p">]</span> <span class="p">=</span> <span class="n">spawnInstance</span><span class="p">;</span>
                        <span class="n">spawnIndex</span><span class="p">++;</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">spawnIndex</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">spawnIndex</span> <span class="p">&lt;</span> <span class="n">spawnInstances</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span> <span class="n">spawnIndex</span><span class="p">++)</span>
            <span class="p">{</span>
                <span class="kt">int</span> <span class="n">spawnerIndex</span> <span class="p">=</span> <span class="n">spawnInstances</span><span class="p">[</span><span class="n">spawnIndex</span><span class="p">].</span><span class="n">spawnerIndex</span><span class="p">;</span>
                <span class="kt">var</span> <span class="n">spawner</span> <span class="p">=</span> <span class="n">uniqueTypes</span><span class="p">[</span><span class="n">spawnerIndex</span><span class="p">];</span>
                <span class="kt">int</span> <span class="n">count</span> <span class="p">=</span> <span class="n">spawner</span><span class="p">.</span><span class="n">count</span><span class="p">;</span>
                <span class="kt">var</span> <span class="n">entities</span> <span class="p">=</span> <span class="k">new</span> <span class="n">NativeArray</span><span class="p">&lt;</span><span class="n">Entity</span><span class="p">&gt;(</span><span class="n">count</span><span class="p">,</span><span class="n">Allocator</span><span class="p">.</span><span class="n">Temp</span><span class="p">);</span>
                <span class="kt">var</span> <span class="n">prefab</span> <span class="p">=</span> <span class="n">spawner</span><span class="p">.</span><span class="n">prefab</span><span class="p">;</span>
                <span class="kt">float</span> <span class="n">radius</span> <span class="p">=</span> <span class="n">spawner</span><span class="p">.</span><span class="n">radius</span><span class="p">;</span>
                <span class="kt">var</span> <span class="n">spawnPositions</span> <span class="p">=</span> <span class="k">new</span> <span class="n">NativeArray</span><span class="p">&lt;</span><span class="n">float3</span><span class="p">&gt;(</span><span class="n">count</span><span class="p">,</span> <span class="n">Allocator</span><span class="p">.</span><span class="n">Temp</span><span class="p">);</span>
                <span class="n">float3</span> <span class="n">center</span> <span class="p">=</span> <span class="n">spawnInstances</span><span class="p">[</span><span class="n">spawnIndex</span><span class="p">].</span><span class="n">position</span><span class="p">;</span>
                <span class="kt">var</span> <span class="n">sourceEntity</span> <span class="p">=</span> <span class="n">spawnInstances</span><span class="p">[</span><span class="n">spawnIndex</span><span class="p">].</span><span class="n">sourceEntity</span><span class="p">;</span>

                <span class="c1">// 魚の生成位置</span>
                <span class="n">GeneratePoints</span><span class="p">.</span><span class="nf">RandomPointsInSphere</span><span class="p">(</span><span class="n">center</span><span class="p">,</span><span class="n">radius</span><span class="p">,</span><span class="k">ref</span> <span class="n">spawnPositions</span><span class="p">);</span>

                <span class="c1">// 魚の生成</span>
                <span class="n">EntityManager</span><span class="p">.</span><span class="nf">Instantiate</span><span class="p">(</span><span class="n">prefab</span><span class="p">,</span> <span class="n">entities</span><span class="p">);</span>

                <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">count</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
                <span class="p">{</span>
                    <span class="kt">var</span> <span class="n">position</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Position</span>
                    <span class="p">{</span>
                        <span class="n">Value</span> <span class="p">=</span> <span class="n">spawnPositions</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                    <span class="p">};</span>
                    <span class="n">EntityManager</span><span class="p">.</span><span class="nf">SetComponentData</span><span class="p">(</span><span class="n">entities</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">position</span><span class="p">);</span>
                <span class="p">}</span>

                <span class="n">EntityManager</span><span class="p">.</span><span class="n">RemoveComponent</span><span class="p">&lt;</span><span class="n">SpawnRandomInSphere</span><span class="p">&gt;(</span><span class="n">sourceEntity</span><span class="p">);</span>

                <span class="n">spawnPositions</span><span class="p">.</span><span class="nf">Dispose</span><span class="p">();</span> <span class="c1">// NativeArrayは必ず破棄処理が必要</span>
                <span class="n">entities</span><span class="p">.</span><span class="nf">Dispose</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="n">spawnInstances</span><span class="p">.</span><span class="nf">Dispose</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<h1>
<span id="自作サンプル作ってみた" class="fragment"></span><a href="#%E8%87%AA%E4%BD%9C%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB%E4%BD%9C%E3%81%A3%E3%81%A6%E3%81%BF%E3%81%9F"><i class="fa fa-link"></i></a>自作サンプル作ってみた</h1>

<p>公式サンプルを眺めてみたが、なんとなくしか分からない。やはり習うより慣れろだろうということで、簡単なサンプル作ってみようと思います。</p>

<p>決められた長方形の範囲内にCubeを生成するものを作ります。</p>

<p>動作環境につきましては、公式と同じです。(Unity2018.2.3f1)</p>

<h2>
<span id="まずcomponentdataを用意する" class="fragment"></span><a href="#%E3%81%BE%E3%81%9Acomponentdata%E3%82%92%E7%94%A8%E6%84%8F%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>まずComponentDataを用意する</h2>

<p>まずは<strong>生成するためには、生成する物（Prefab）、生成数、生成範囲、生成場所が必要</strong>なので、以下の２つのComponentDataをSpawnerにアタッチします。</p>

<p><a href="https://camo.qiitausercontent.com/9da844bd45fb10fe71c34aa82f6284e42692b752/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3235363731372f35343332333337342d333837622d353862362d343438622d3365666463333062323331302e706e67" target="_blank" rel="nofollow noopener"><img width="557" alt="スクリーンショット 2018-12-02 16.51.53.png" src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F256717%2F54323374-387b-58b6-448b-3efdc30b2310.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=597597f3f27c11cf968662d086a44283" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/256717/54323374-387b-58b6-448b-3efdc30b2310.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F256717%2F54323374-387b-58b6-448b-3efdc30b2310.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=fdf704a81afac8220c52808c8b40dbda 1x" loading="lazy"></a></p>

<div class="code-frame" data-lang="c#">
<div class="code-lang"><span class="bold">CubeComponent.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">using</span> <span class="nn">UnityEngine</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Unity.Entities</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">Samples.Common</span>
<span class="p">{</span>
    <span class="p">[</span><span class="n">Serializable</span><span class="p">]</span>
    <span class="k">public</span> <span class="k">struct</span> <span class="nc">Cube</span> <span class="p">:</span> <span class="n">ISharedComponentData</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="n">GameObject</span> <span class="n">prefab</span><span class="p">;</span> <span class="c1">// プレハブを持たす</span>
        <span class="k">public</span> <span class="kt">float</span> <span class="n">halfWidth</span><span class="p">;</span> <span class="c1">// 生成する範囲の半径</span>
        <span class="k">public</span> <span class="kt">bool</span> <span class="n">spawnLocal</span><span class="p">;</span>
        <span class="k">public</span> <span class="kt">int</span> <span class="n">count</span><span class="p">;</span> <span class="c1">// 生成数</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">class</span> <span class="nc">CubeComponent</span> <span class="p">:</span> <span class="n">SharedComponentDataWrapper</span><span class="p">&lt;</span><span class="n">Cube</span><span class="p">&gt;</span> <span class="p">{</span> <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<p>Positionコンポーネントデータについては、先ほど使った魚の生成位置と同じのを使い回します。</p>

<div class="code-frame" data-lang="c#">
<div class="code-lang"><span class="bold">Position.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Unity.Entities</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Unity.Mathematics</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">Unity.Transforms</span>
<span class="p">{</span>
    <span class="p">[</span><span class="n">Serializable</span><span class="p">]</span>
    <span class="k">public</span> <span class="k">struct</span> <span class="nc">Position</span> <span class="p">:</span> <span class="n">IComponentData</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="n">float3</span> <span class="n">Value</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<h2>
<span id="componentsystemを作成する" class="fragment"></span><a href="#componentsystem%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>ComponentSystemを作成する。</h2>

<p>データを元にどのような挙動をす流のか決める<strong>CompoonentSystem</strong>を作成します。</p>

<div class="code-frame" data-lang="c#">
<div class="code-lang"><span class="bold">CubeSystem.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">using</span> <span class="nn">Unity.Entities</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Unity.Transforms</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Unity.Mathematics</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Unity.Collections</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">Samples.Common</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">CubeSystem</span> <span class="p">:</span> <span class="n">ComponentSystem</span>
    <span class="p">{</span>
        <span class="c1">// 要求リスト一覧</span>
        <span class="k">struct</span> <span class="nc">Group</span>
        <span class="p">{</span>
            <span class="p">[</span><span class="n">ReadOnly</span><span class="p">]</span>
            <span class="k">public</span> <span class="n">SharedComponentDataArray</span><span class="p">&lt;</span><span class="n">Cube</span><span class="p">&gt;</span> <span class="n">Spawner</span><span class="p">;</span>
            <span class="k">public</span> <span class="n">ComponentDataArray</span><span class="p">&lt;</span><span class="n">Position</span><span class="p">&gt;</span> <span class="n">Position</span><span class="p">;</span>
            <span class="k">public</span> <span class="n">EntityArray</span> <span class="n">Entity</span><span class="p">;</span>
            <span class="k">public</span> <span class="k">readonly</span> <span class="kt">int</span> <span class="n">Length</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="p">[</span><span class="n">Inject</span><span class="p">]</span>
        <span class="n">Group</span> <span class="n">m_Group</span><span class="p">;</span>

        <span class="k">protected</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">OnUpdate</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="k">while</span> <span class="p">(</span><span class="n">m_Group</span><span class="p">.</span><span class="n">Length</span> <span class="p">!=</span> <span class="m">0</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="kt">var</span> <span class="n">spawner</span> <span class="p">=</span> <span class="n">m_Group</span><span class="p">.</span><span class="n">Spawner</span><span class="p">[</span><span class="m">0</span><span class="p">];</span>
                <span class="kt">var</span> <span class="n">sourceEntity</span> <span class="p">=</span> <span class="n">m_Group</span><span class="p">.</span><span class="n">Entity</span><span class="p">[</span><span class="m">0</span><span class="p">];</span>
                <span class="kt">var</span> <span class="n">center</span> <span class="p">=</span> <span class="n">m_Group</span><span class="p">.</span><span class="n">Position</span><span class="p">[</span><span class="m">0</span><span class="p">].</span><span class="n">Value</span><span class="p">;</span>

                <span class="kt">var</span> <span class="n">entities</span> <span class="p">=</span> <span class="k">new</span> <span class="n">NativeArray</span><span class="p">&lt;</span><span class="n">Entity</span><span class="p">&gt;(</span><span class="n">spawner</span><span class="p">.</span><span class="n">count</span><span class="p">,</span> <span class="n">Allocator</span><span class="p">.</span><span class="n">Temp</span><span class="p">);</span>
                <span class="n">EntityManager</span><span class="p">.</span><span class="nf">Instantiate</span><span class="p">(</span><span class="n">spawner</span><span class="p">.</span><span class="n">prefab</span><span class="p">,</span> <span class="n">entities</span><span class="p">);</span>

                <span class="kt">var</span> <span class="n">positions</span> <span class="p">=</span> <span class="k">new</span> <span class="n">NativeArray</span><span class="p">&lt;</span><span class="n">float3</span><span class="p">&gt;(</span><span class="n">spawner</span><span class="p">.</span><span class="n">count</span><span class="p">,</span> <span class="n">Allocator</span><span class="p">.</span><span class="n">Temp</span><span class="p">);</span>

                <span class="k">if</span> <span class="p">(</span><span class="n">spawner</span><span class="p">.</span><span class="n">spawnLocal</span><span class="p">)</span>
                <span class="p">{</span>
                    <span class="n">GeneratePoints</span><span class="p">.</span><span class="nf">RandomPointsInSquare</span><span class="p">(</span><span class="k">new</span> <span class="nf">float3</span><span class="p">(),</span> <span class="n">spawner</span><span class="p">.</span><span class="n">halfWidth</span><span class="p">,</span> <span class="k">ref</span> <span class="n">positions</span><span class="p">);</span>
                    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">spawner</span><span class="p">.</span><span class="n">count</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
                    <span class="p">{</span>
                        <span class="kt">var</span> <span class="n">position</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Position</span>
                        <span class="p">{</span>
                            <span class="n">Value</span> <span class="p">=</span> <span class="n">positions</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                        <span class="p">};</span>
                        <span class="n">EntityManager</span><span class="p">.</span><span class="nf">SetComponentData</span><span class="p">(</span><span class="n">entities</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">position</span><span class="p">);</span>

                        <span class="c1">// Spawn Attach</span>
                        <span class="kt">var</span> <span class="n">attach</span> <span class="p">=</span> <span class="n">EntityManager</span><span class="p">.</span><span class="nf">CreateEntity</span><span class="p">();</span>
                        <span class="n">EntityManager</span><span class="p">.</span><span class="nf">AddComponentData</span><span class="p">(</span><span class="n">attach</span><span class="p">,</span> <span class="k">new</span> <span class="n">Attach</span>
                        <span class="p">{</span>
                            <span class="n">Parent</span> <span class="p">=</span> <span class="n">sourceEntity</span><span class="p">,</span>
                            <span class="n">Child</span> <span class="p">=</span> <span class="n">entities</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                        <span class="p">});</span>
                    <span class="p">}</span>
                <span class="p">}</span>
                <span class="k">else</span>
                <span class="p">{</span>
                    <span class="n">GeneratePoints</span><span class="p">.</span><span class="nf">RandomPointsInSquare</span><span class="p">(</span><span class="n">center</span><span class="p">,</span> <span class="n">spawner</span><span class="p">.</span><span class="n">halfWidth</span><span class="p">,</span> <span class="k">ref</span> <span class="n">positions</span><span class="p">);</span>
                    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">spawner</span><span class="p">.</span><span class="n">count</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
                    <span class="p">{</span>
                        <span class="kt">var</span> <span class="n">position</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Position</span>
                        <span class="p">{</span>
                            <span class="n">Value</span> <span class="p">=</span> <span class="n">positions</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                        <span class="p">};</span>
                        <span class="n">EntityManager</span><span class="p">.</span><span class="nf">SetComponentData</span><span class="p">(</span><span class="n">entities</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">position</span><span class="p">);</span>
                    <span class="p">}</span>
                <span class="p">}</span>

                <span class="n">entities</span><span class="p">.</span><span class="nf">Dispose</span><span class="p">();</span>
                <span class="n">positions</span><span class="p">.</span><span class="nf">Dispose</span><span class="p">();</span>

                <span class="n">EntityManager</span><span class="p">.</span><span class="n">RemoveComponent</span><span class="p">&lt;</span><span class="n">Cube</span><span class="p">&gt;(</span><span class="n">sourceEntity</span><span class="p">);</span>

                <span class="c1">// Instantiate &amp; AddComponent &amp; RemoveComponent calls invalidate the injected groups,</span>
                <span class="c1">// so before we get to the next spawner we have to reinject them  </span>
                <span class="nf">UpdateInjectedComponentGroups</span><span class="p">();</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<p>100x100の正方形内に、50,000個のCubeがビッシリ生成されました！<br>
MonoBehaviorだったらこの時点で激重なのでは...？<br>
<a href="https://camo.qiitausercontent.com/4b1921188f4b57a8219d5f1fd5de67223f01f952/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3235363731372f66343066653636652d343431652d643266372d656639642d3735623630623662666433612e706e67" target="_blank" rel="nofollow noopener"><img width="922" alt="スクリーンショット 2018-11-25 15.01.53.png" src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F256717%2Ff40fe66e-441e-d2f7-ef9d-75b60b6bfd3a.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=b350f60eab79e9bfadb95d708d307686" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/256717/f40fe66e-441e-d2f7-ef9d-75b60b6bfd3a.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F256717%2Ff40fe66e-441e-d2f7-ef9d-75b60b6bfd3a.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=8b58fc19a8ce59e0dffbbcb6143d2dbb 1x" loading="lazy"></a></p>

<h2>
<span id="さらに振る舞いを追加してみる" class="fragment"></span><a href="#%E3%81%95%E3%82%89%E3%81%AB%E6%8C%AF%E3%82%8B%E8%88%9E%E3%81%84%E3%82%92%E8%BF%BD%E5%8A%A0%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B"><i class="fa fa-link"></i></a>さらに振る舞いを追加してみる</h2>

<p>これでは公式サンプルのままで寂しいので、もう少し手を加えます。<br>
生成した Cube Prefab に<strong>波のような挙動を追加してみます。</strong></p>

<p>Cubeの挙動なので、<strong>Prefabに持たせるコンポーネントデータが必要</strong>です。<br>
今回は従来からある<strong>PositionComponent</strong>(コンポーネントデータ)を使い回し、アタッチします。<br>
また、<strong>UpDownコンポーネントデータを用意</strong>します。</p>

<div class="code-frame" data-lang="c#">
<div class="code-lang"><span class="bold">UpDownComponent.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">using</span> <span class="nn">Unity.Entities</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">Samples.Common</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">struct</span> <span class="nc">UpDown</span> <span class="p">:</span> <span class="n">ISharedComponentData</span><span class="p">{</span> <span class="p">}</span>

    <span class="k">public</span> <span class="k">class</span> <span class="nc">UpDownComponent</span> <span class="p">:</span> <span class="n">SharedComponentDataWrapper</span><span class="p">&lt;</span><span class="n">UpDown</span><span class="p">&gt;{}</span>

<span class="p">}</span>
</code></pre></div>
</div>

<p><a href="https://camo.qiitausercontent.com/f188c5b2c6df6e01359a950ab0bb9a6779274f2e/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3235363731372f31343636643033362d616665622d363665352d343364642d6365643737316634653035312e706e67" target="_blank" rel="nofollow noopener"><img width="293" alt="スクリーンショット 2018-12-02 15.52.48.png" src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F256717%2F1466d036-afeb-66e5-43dd-ced771f4e051.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=125429a3b801a45f8b1df32ec601202a" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/256717/1466d036-afeb-66e5-43dd-ced771f4e051.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F256717%2F1466d036-afeb-66e5-43dd-ced771f4e051.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=7a9f7b644f02d9ad1b39e3a304f7cfeb 1x" loading="lazy"></a></p>

<p>さて、<strong>ComponentData</strong>を用意し、<strong>Prefab</strong>へアタッチしたら、今度は<strong>ComponentSystem</strong>を作成します。</p>

<div class="code-frame" data-lang="c#">
<div class="code-lang"><span class="bold">UpDownSystem.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">using</span> <span class="nn">Unity.Collections</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Unity.Entities</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Unity.Jobs</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Unity.Burst</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Unity.Mathematics</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Unity.Transforms</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UnityEngine</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">Samples.Common</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">UpDownSystem</span> <span class="p">:</span> <span class="n">JobComponentSystem</span>
    <span class="p">{</span>
        <span class="cm">/* IJobParallelForインターフェースを使うと、
         * 複数のスレッドに分散させて配列要素を並列で実行することができます。*/</span>

        <span class="p">[</span><span class="n">BurstCompile</span><span class="p">]</span>
        <span class="k">struct</span> <span class="nc">MoveUpdown</span> <span class="p">:</span> <span class="n">IJobParallelFor</span> 
        <span class="p">{</span>
            <span class="c1">// CubeにPositionComponentがアタッチされているか確認しましょう</span>
            <span class="k">public</span> <span class="n">ComponentDataArray</span><span class="p">&lt;</span><span class="n">Position</span><span class="p">&gt;</span> <span class="n">positions</span><span class="p">;</span> 
            <span class="k">public</span> <span class="kt">float</span> <span class="n">time</span><span class="p">;</span>

            <span class="c1">/// &lt;summary&gt;</span>
            <span class="c1">/// ジョブの処理内容</span>
            <span class="c1">/// &lt;/summary&gt;</span>
            <span class="k">public</span> <span class="k">void</span> <span class="nf">Execute</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">positions</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Position</span>
                <span class="p">{</span>
                    <span class="n">Value</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">float3</span><span class="p">(</span><span class="n">positions</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">Value</span><span class="p">.</span><span class="n">x</span><span class="p">,</span>
                                       <span class="n">Mathf</span><span class="p">.</span><span class="nf">Sin</span><span class="p">(</span><span class="n">time</span><span class="p">+(</span><span class="n">positions</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">Value</span><span class="p">.</span><span class="n">x</span> <span class="p">+</span> <span class="n">positions</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">Value</span><span class="p">.</span><span class="n">z</span><span class="p">)),</span>
                                      <span class="n">positions</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">Value</span><span class="p">.</span><span class="n">z</span><span class="p">)</span>
                <span class="p">};</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="n">ComponentGroup</span> <span class="n">m_MoveUpDownGroup</span><span class="p">;</span>

        <span class="cm">/* 要求リストを作成。
         * ここではUpDownコンポーネントデータと
         * Positionコンポーネントデータを要求するという事 */</span>
        <span class="k">protected</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">OnCreateManager</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="n">m_MoveUpDownGroup</span> <span class="p">=</span> <span class="nf">GetComponentGroup</span><span class="p">(</span>
                <span class="n">ComponentType</span><span class="p">.</span><span class="nf">ReadOnly</span><span class="p">(</span><span class="k">typeof</span><span class="p">(</span><span class="n">UpDown</span><span class="p">)),</span>
                <span class="k">typeof</span><span class="p">(</span><span class="n">Position</span><span class="p">));</span>
        <span class="p">}</span>

        <span class="c1">// ジョブを実行する。</span>
        <span class="k">protected</span> <span class="k">override</span> <span class="n">JobHandle</span> <span class="nf">OnUpdate</span><span class="p">(</span><span class="n">JobHandle</span> <span class="n">inputDeps</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="kt">var</span> <span class="n">moveUpDownJob</span> <span class="p">=</span> <span class="k">new</span> <span class="n">MoveUpdown</span>
            <span class="p">{</span>
                <span class="n">positions</span> <span class="p">=</span> <span class="n">m_MoveUpDownGroup</span><span class="p">.</span><span class="n">GetComponentDataArray</span><span class="p">&lt;</span><span class="n">Position</span><span class="p">&gt;(),</span>
                <span class="n">time</span> <span class="p">=</span> <span class="n">Time</span><span class="p">.</span><span class="n">realtimeSinceStartup</span>
            <span class="p">};</span>

            <span class="c1">// Scheduleメソッドの第2引数にはバッチ数を指定します。</span>
            <span class="kt">var</span> <span class="n">moveUpDownJobHandle</span> <span class="p">=</span> <span class="n">moveUpDownJob</span><span class="p">.</span><span class="nf">Schedule</span><span class="p">(</span><span class="n">m_MoveUpDownGroup</span><span class="p">.</span><span class="nf">CalculateLength</span><span class="p">(),</span>
                                                             <span class="m">64</span><span class="p">,</span>
                                                             <span class="n">inputDeps</span><span class="p">);</span>
            <span class="k">return</span> <span class="n">moveUpDownJobHandle</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<p>こんな感じで再生できました！</p>

<p><a href="https://camo.qiitausercontent.com/f8eb34f216da4a2243436eeff51e6746c05dbc85/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3235363731372f34356166666461652d356464612d343263632d306430392d6164323539376337373632382e676966" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F256717%2F45affdae-5dda-42cc-0d09-ad2597c77628.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=ec057c9d013d85e8a9ce333b466d1d45" alt="gif_animation_001.gif" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/256717/45affdae-5dda-42cc-0d09-ad2597c77628.gif" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F256717%2F45affdae-5dda-42cc-0d09-ad2597c77628.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=513aad1aa94a843066b2752d4239173f 1x" loading="lazy"></a></p>

<p>...従来のGameObjectとMonoBehaviorなら激重間違いなし</p>

<h1>
<span id="まとめ感想" class="fragment"></span><a href="#%E3%81%BE%E3%81%A8%E3%82%81%E6%84%9F%E6%83%B3"><i class="fa fa-link"></i></a>まとめ・感想</h1>

<p><strong>ECSは下記のように使えば動くと分かった</strong><br>
</p><ul>
<li>動かしたいものに<strong>ComponentDataをアタッチ</strong>する<br>→ComponentDataの記述方法は、例えばScriptableObjectにキャラクターのパラメーターを持たすイメージに近いかも！</li>
<li> ComponentDataは同じものであれば<strong>使い回す</strong>
</li>
<li> <strong>ComponentSystem</strong>にて必要なComponentDataを決め、ジョブを実行する。</li>
</ul>

<p>ブログ等の説明を読んで分からなかったのですが、実際手を動かしてみると案外シンプルだなと思いました。<br>
他、Unity JobSystemとBurst Compilerについて、今後勉強しなくてはと思いました。</p>

<p>私は常日頃３Dシューティングゲームを作りたいと考えていて、弾丸や敵のスポーンにECSを活用してみる予定です。</p>

<p>明日は<a href="https://qiita.com/advent-calendar/2018/unity2">Unity #2 Advent Calender 2018</a> 22日目、投稿者は<a href="http://chroske.hatenablog.com/" rel="nofollow noopener" target="_blank">chroskeさん</a>です！</p>

<h1>
<span id="参考" class="fragment"></span><a href="#%E5%8F%82%E8%80%83"><i class="fa fa-link"></i></a>参考</h1>

<ul>
<li><a href="https://qiita.com/orange_lily1127/items/77310e31e64485280377" id="reference-829a7432f2c02057cc6e">UnityのECS(Entity Component System)で雪の結晶を降らせる</a></li>
<li><a href="https://github.com/Unity-Technologies/EntityComponentSystemSamples" rel="nofollow noopener" target="_blank">Unity-Technologies/EntityComponentSystemSamples</a></li>
<li><a href="http://tsubakit1.hateblo.jp/entry/2018/03/25/180203" rel="nofollow noopener" target="_blank">【Unity】Unity 2018のEntity Component System（通称ECS）について（１）</a></li>
<li><a href="http://tsubakit1.hateblo.jp/entry/2018/04/02/233106" rel="nofollow noopener" target="_blank">【Unity】Unity 2018のEntity Component System（通称ECS）について（２）</a></li>
<li><a href="https://qiita.com/mao_/items/4951c4bf0c82de98b5d6" id="reference-5148480c8053d50114c6">【Unity】ECS + JobSystemで10万個のドカベンロゴをアニメーションさせてみた</a></li>
<li><a href="https://www.slideshare.net/UnityTechnologiesJapan/unite-tokyo-2018-training-daycjobsystem-ecscpu-entity-component-system-1" rel="nofollow noopener" target="_blank">【Unite Tokyo 2018 Training Day】C#JobSystem &amp; ECSでCPUを極限まで使い倒そう ~Entity Component System 編~</a></li>
<li><a href="https://qiita.com/simplestar/items/17b0886be0170f79aa2e" id="reference-97810abfef459e826c59">Unity:はじめてのECS</a></li>
<li><a href="https://www.shibuya24.info/entry/jobsystem2" rel="nofollow noopener" target="_blank">IJobParallelForで並列処理させるジョブを作ってみる</a></li>
<li><a href="https://www.shibuya24.info/entry/jobsystem1" rel="nofollow noopener" target="_blank">Unity JobSystemをとりあえずやってみる序</a></li>
</ul>
</div></div></section><div class="css-1yzj1fm"><div class="css-1uv1qiv"><span class="fa fa-twitter"></span></div><div class="css-1uv1qiv"><span class="fa fa-facebook"></span></div></div><div class="apm-Content"><div class="apm-Content_title">Why not register and get more from Qiita?</div><ol class="apm-Content_list"><li>We will deliver articles that match you<div class="description">By following users and tags, you can catch up information on technical fields that you are interested in as a whole</div></li><li>you can read useful information later efficiently<div class="description">By &quot;stocking&quot; the articles you like, you can search right away</div></li><div><a class="apm-Content_help" href="https://help.qiita.com/ja/articles/qiita-login-user" target="_blank"><i class="fa fa-fw fa-arrow-circle-right"></i>What you can do with signing up</a></div></ol><a href="/signup?callback_action=login_or_signup&amp;redirect_to=%2FGREAT__SHARK%2Fitems%2F6d9c5adc6822ab0e8513&amp;realm=qiita" class="apm-Content_button apm-Content_button-signup">Sign up</a><a href="/login?callback_action=login_or_signup&amp;redirect_to=%2FGREAT__SHARK%2Fitems%2F6d9c5adc6822ab0e8513&amp;realm=qiita" class="apm-Content_button apm-Content_button-signin">Login</a></div></div><div class="css-helsa7"></div></div></div></div><div class="css-109dbrr"><div class="css-5jpx49"><div class="css-mnxgyc"><button class=" css-1vlpknv"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/GREAT__SHARK/items/6d9c5adc6822ab0e8513/likers" class="css-1iupg5d">28</a></div><div class="css-fsjkhv"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-1b17vb0">25</span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-7i7f4d"><div class="css-1gj7nt">Improve article</div><a href="/drafts/6d9c5adc6822ab0e8513/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/GREAT__SHARK/items/6d9c5adc6822ab0e8513/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/GREAT__SHARK/items/6d9c5adc6822ab0e8513/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/GREAT__SHARK/items/6d9c5adc6822ab0e8513/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/GREAT__SHARK/items/6d9c5adc6822ab0e8513.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="PersonalArticlePage" data-dom-id="PersonalArticlePage-react-component-d52c6c8c-9580-4254-9dcd-11e2448b74f4">{"authorAnalyticsTrackingId":null,"organizationAnalyticsTrackingId":null}</script>
      
<footer id="globalFooter" class="st-Footer"><div class="st-Footer_container"><div class="st-Footer_start"><div class="st-Footer_logo"><svg viewbox="0 0 426.57 130" xmlns="http://www.w3.org/2000/svg"><circle cx="167.08" cy="21.4" r="12.28" /><path d="M250.81 29.66h23.48v18.9h-23.48z" /><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z" /><circle cx="216.33" cy="21.4" r="12.28" /></svg></div><div class="st-Footer_catchcopy">How developers code is here.</div><div class="st-Footer_socials"><a class="fa fa-twitter" href="https://twitter.com/qiita"></a><a class="fa fa-facebook-square" href="https://www.facebook.com/qiita/"></a></div></div><div class="st-Footer_end"><div class="st-Footer_qiita"><div class="st-Footer_label">Qiita</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="/about">About</a><a href="/terms">Terms</a><a href="/privacy">Privacy</a><a target="_blank" href="http://help.qiita.com/ja/articles/qiita-community-guideline">Guideline</a><a target="_blank" href="https://help.qiita.com/ja/articles/others-brand-guideline">Design Guideline</a></div><div class="st-Footer_column"><a href="/release-notes">Release</a><a href="/api/v2/docs">API</a><a href="/feedback/new">ご意見</a><a href="https://help.qiita.com">Help</a><a target="_blank" href="https://qiita.com/ads?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Advertisement</a></div></div></div><div class="st-Footer_increments"><div class="st-Footer_label">Increments</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="https://increments.co.jp/company/">About</a><a href="https://increments.co.jp/jobs/">採用情報</a><a href="https://blog.qiita.com">Blog</a></div><div class="st-Footer_column"><a href="https://teams.qiita.com/">Qiita Team</a><a href="https://jobs.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Jobs</a><a href="https://zine.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Zine</a></div></div></div></div></div><div class="st-Footer_copyright">© 2011-2021 Increments Inc.</div></footer><div id="Snackbar-react-component-041cf797-15eb-468e-9384-a21a1c63b211"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="Snackbar" data-dom-id="Snackbar-react-component-041cf797-15eb-468e-9384-a21a1c63b211">{}</script>
      
<div id="LoginModal-react-component-e36ebe2d-97f1-4ded-a2f9-99b2771c6d1b"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="LoginModal" data-dom-id="LoginModal-react-component-e36ebe2d-97f1-4ded-a2f9-99b2771c6d1b">{}</script>
      
<div id="StockModal-react-component-1d3ab025-89a4-402c-afca-bedd6d4ae986"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="StockModal" data-dom-id="StockModal-react-component-1d3ab025-89a4-402c-afca-bedd6d4ae986">{}</script>
      
</div><div id="dataContainer" style="display: none;" data-config="{&quot;actionPath&quot;:&quot;public/items#show&quot;,&quot;settings&quot;:{&quot;analyticsTrackingId&quot;:&quot;UA-24675221-12&quot;,&quot;assetsMap&quot;:{},&quot;csrfToken&quot;:&quot;UMFsXuI0uOVPL62tjiPqpv1BDsvSn3jgCf881jy8YXGTAGx4x5SZMk364HE45VuqC9NsyDmfC9aaFx5LBlehyA==&quot;,&quot;locale&quot;:&quot;en&quot;},&quot;currentUser&quot;:null}" /></body></html><script type="application/json" data-js-react-on-rails-store="AppStoreWithReactOnRails">{"snackbar":{"type":"","body":"","isActive":false},"article":{"article":{"body":"\u003cp\u003eこの記事は\u003ca href=\"https://qiita.com/advent-calendar/2018/unity2\"\u003eUnity #2 Advent Calender 2018\u003c/a\u003e 21日目の記事です。\u003c/p\u003e\n\n\u003cp\u003e先にECSを紹介された方がいたが、多忙につき取り上げられず。申し訳ないです。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"そもそもecsとは\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%9D%E3%82%82%E3%81%9D%E3%82%82ecs%E3%81%A8%E3%81%AF\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eそもそもECSとは？\u003c/h1\u003e\n\n\u003cp\u003eEntity Component Systemの略です。\u003c/p\u003e\n\n\u003cp\u003e引用：\u003ca href=\"https://github.com/Unity-Technologies/EntityComponentSystemSamples\" rel=\"nofollow noopener\" target=\"_blank\"\u003eUnity-Technologies/EntityComponentSystemSamples\u003c/a\u003e\u003c/p\u003e\n\n\u003cblockquote\u003e\n\u003cp\u003eOffers a better approach to game design that allows you to concentrate on the actual problems you are solving: the data and behavior that make up your game. It leverages the C# Job System and Burst Compiler enabling you to take full advantage of today's multicore processors. By moving from object-oriented to data-oriented design it will be easier for you to reuse the code and easier for others to understand and work on it\u003c/p\u003e\n\n\u003cp\u003eThe Entity Component System ships as an experimental package in 2018.1 and later, and we’ll continue to develop and release new versions of the package in the 2018.x cycle. It is important to stress that the Entity Component System is not production ready\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003cp\u003e\u003cstrong\u003e意訳\u003c/strong\u003e\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eC#JobSystem と　BurstCompilerを使って、今日のメモリ並列処理技術をフル活用できますよ。\u003c/li\u003e\n\u003cli\u003eオブジェクト志向から移行することで、コードが使い回し安くなります。どう動いているかが他人に理解しやすくなります。\u003c/li\u003e\n\u003cli\u003eECSはUnity2018.1以降から試験的にリリースされています。まだ製品版じゃありませんよ。\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e→ GameObjectの上位互換になりうる新しい技術ということかな？\u003cbr\u003e\n\u003ca href=\"\"\u003eBurstCompiler\u003c/a\u003eと組み合わせれば飛躍的にパフォーマンスが向上するようです。\u003c/p\u003e\n\n\u003cp\u003e他記事にも沢山説明があるので、より詳しく知りたい方は以下を読んでみるといいかも。\u003cbr\u003e\n\u003ca href=\"http://tsubakit1.hateblo.jp/entry/2018/03/25/180203\" rel=\"nofollow noopener\" target=\"_blank\"\u003e【Unity】Unity 2018のEntity Component System（通称ECS）について（１）\u003c/a\u003e\u003c/p\u003e\n\n\u003cblockquote\u003e\n\u003cp\u003eまずECSとは何か？ECSは 何か凄い機能 というよりは、コンポーネント志向に変わる新しいアーキテクチャパターンです。\u003cbr\u003e\n要するに、(目標としては)GameObject / Componentを差し替えるモノです。\u003c/p\u003e\n\n\u003cp\u003eECSはGameObject / MonoBehaviourと較べて、膨大なオブジェクトを処理しやすい設計になっています。ECSはUnityのコンポーネント志向と用語的には似ており、ECSはUnity的な視点から言えば「コンパクトな GameObject \u0026amp; Monobehaviourのようなモノ」とも言えなくはないです。\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003cp\u003e今後エンジニアとして生きていくなら、絶対勉強しておかないとダメ！といった記事も目に入り、今回はこのネタを選びました。\u003cbr\u003e\nと言っても、他の記事を読んでもふんわりとしか分からず、初級者向けに、何かに例えながら紹介させてもらいます。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"ecs用語\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#ecs%E7%94%A8%E8%AA%9E\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eECS用語\u003c/h1\u003e\n\n\u003col\u003e\n\u003cli\u003eEntity\n\n\u003cul\u003e\n\u003cli\u003e「ComponentSystemが動作する為に要求するComponentData各種(Group)」を持つデータの単位\u003c/li\u003e\n\u003cli\u003eインスタンスに該当。速いGameObjectのようなもの。\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eComponentData\n\n\u003cul\u003e\n\u003cli\u003e処理(ComponentSystem)で使われるデータ\u003c/li\u003e\n\u003cli\u003eMonoBehaviorで言うところの\u003cstrong\u003eデータ部分\u003c/strong\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eComponentSystem\n\n\u003cul\u003e\n\u003cli\u003eGroupのデータが揃っている際に動作する処理の内容\u003c/li\u003e\n\u003cli\u003eMonoBehavior で言うところの\u003cstrong\u003e振る舞い部分\u003c/strong\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eGroup\n\n\u003cul\u003e\n\u003cli\u003e処理(ComponentSystem)を動作させるために必要となるデータ(ComponentData)各種の定義\u003c/li\u003e\n\u003cli\u003e必要なComponentDataはこれとこれです的な事を決めている。要求リスト\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"導入\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%B0%8E%E5%85%A5\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e導入\u003c/h1\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/cbff1b197dec6a0937713657933d6945a311dbf5/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3235363731372f32346536373861352d616361352d383332352d343730372d3538653333613733383465382e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg width=\"333\" alt=\"スクリーンショット 2018-12-02 16.07.44.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F256717%2F24e678a5-aca5-8325-4707-58e33a7384e8.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=f59ff3245f67934f51be71de7fcef9e9\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/256717/24e678a5-aca5-8325-4707-58e33a7384e8.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F256717%2F24e678a5-aca5-8325-4707-58e33a7384e8.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=3b14ebf727cf2522ac878dec1de02cdc 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\n\u003cstrong\u003ePlayerSettings\u003c/strong\u003eから、\u003cstrong\u003eScripting Runtime Version\u003c/strong\u003eを\u003cstrong\u003e.NET 4.x\u003c/strong\u003eにします。\u003c/li\u003e\n\u003cli\u003e\n\u003cstrong\u003ePlayerSettings\u003c/strong\u003eから、\u003cstrong\u003eunsafeコード\u003c/strong\u003eを許可する\u003c/li\u003e\n\u003cli\u003e\n\u003cstrong\u003ePackage Manager\u003c/strong\u003eから\u003cstrong\u003eEntities\u003c/strong\u003eをインストールします。\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"公式ecsサンプルを見てみた\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%85%AC%E5%BC%8Fecs%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB%E3%82%92%E8%A6%8B%E3%81%A6%E3%81%BF%E3%81%9F\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e公式ECSサンプルを見てみた\u003c/h1\u003e\n\n\u003cp\u003e\u003ca href=\"https://github.com/Unity-Technologies/EntityComponentSystemSamples\" rel=\"nofollow noopener\" target=\"_blank\"\u003eUnity-Technologies/EntityComponentSystemSamples\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eを\u003cstrong\u003egit clone\u003c/strong\u003e。動作環境は\u003cstrong\u003eUnity2018.2.3f1\u003c/strong\u003e\u003c/p\u003e\n\n\u003cp\u003e　サンプルの中には\u003cstrong\u003ePureECS\u003c/strong\u003e（現行のGameObjectやComponentを使用しないECSのみでの実装）、\u003cstrong\u003eHybridECS\u003c/strong\u003e（現行のComponent等とECSを組み合わせたハイブリットと呼ばれる実装）と色々なものがありました。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"試しにboidexampleを再生してみた\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%A9%A6%E3%81%97%E3%81%ABboidexample%E3%82%92%E5%86%8D%E7%94%9F%E3%81%97%E3%81%A6%E3%81%BF%E3%81%9F\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e試しにBoidExampleを再生してみた。\u003c/h2\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/cfc0ddd7efb617ace3d888ec46becd35cb0add20/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3235363731372f62383762323161392d323164652d313065622d353566642d6532336161303964656539622e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg width=\"324\" alt=\"スクリーンショット 2018-11-17 17.13.22.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F256717%2Fb87b21a9-21de-10eb-55fd-e23aa09dee9b.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=597e23fac8ef678d0388189579681ccc\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/256717/b87b21a9-21de-10eb-55fd-e23aa09dee9b.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F256717%2Fb87b21a9-21de-10eb-55fd-e23aa09dee9b.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=9cf77e2bea0b382217232f9c2ad7c486 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003ca href=\"https://camo.qiitausercontent.com/a23592b0996da7c505cb3652e0cf00ab353d43af/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3235363731372f63386537373330652d323266342d666433382d663534372d3434356164326437393930662e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg width=\"325\" alt=\"スクリーンショット 2018-11-17 17.13.13.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F256717%2Fc8e7730e-22f4-fd38-f547-445ad2d7990f.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=df312c8f858137dfa49e38a881f134e8\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/256717/c8e7730e-22f4-fd38-f547-445ad2d7990f.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F256717%2Fc8e7730e-22f4-fd38-f547-445ad2d7990f.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=8d9f01a2d7a630625d17d77c586667e6 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e魚の大群が現れました。すごい...(語彙力)\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/26f0e4e5936cc0696251bca156ad004e1c90f216/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3235363731372f62323061616137372d383235392d386139322d656565372d6230656536323939366333312e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg width=\"284\" alt=\"スクリーンショット 2018-11-17 17.57.58.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F256717%2Fb20aaa77-8259-8a92-eee7-b0ee62996c31.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=f28d8d0abb9e103d9414a08699a016c2\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/256717/b20aaa77-8259-8a92-eee7-b0ee62996c31.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F256717%2Fb20aaa77-8259-8a92-eee7-b0ee62996c31.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=ad01a06bf421e54c0b39217dece43abe 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eヒエラルキーは上記のように組まれてます。この中で、\u003cstrong\u003eBoidFishSpawner\u003c/strong\u003eと\u003cstrong\u003e生成する魚(prefab)\u003c/strong\u003eにECSが実装されていました。\u003cbr\u003e\n\u003cstrong\u003eBoidFishSpawner\u003c/strong\u003eには、魚を生成するためのComponentDataが、\u003cstrong\u003e生成する魚(prefab)\u003c/strong\u003eにはその魚を制御するComponentDataがアタッチされています。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"componentdata-の中身を見てみる\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#componentdata-%E3%81%AE%E4%B8%AD%E8%BA%AB%E3%82%92%E8%A6%8B%E3%81%A6%E3%81%BF%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eComponentData の中身を見てみる\u003c/h2\u003e\n\n\u003cp\u003e魚の挙動は複雑だったので、魚を生成する方のComponentDataだけ紹介します。\u003c/p\u003e\n\n\u003cp\u003eBoidコンポーネントデータには、\u003cstrong\u003e魚群の生成範囲\u003c/strong\u003e、\u003cstrong\u003e魚の数\u003c/strong\u003e、\u003cstrong\u003e魚プレハブ\u003c/strong\u003eを持たせています。\u003cbr\u003e\nこれらをComponentSystemに渡し、生成するという事ですね。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eBoid.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eUnity.Entities\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eUnityEngine\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003enamespace\u003c/span\u003e \u003cspan class=\"nn\"\u003eSamples.Common\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eSerializable\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003estruct\u003c/span\u003e \u003cspan class=\"nc\"\u003eSpawnRandomInSphere\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eISharedComponentData\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eGameObject\u003c/span\u003e \u003cspan class=\"n\"\u003eprefab\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003efloat\u003c/span\u003e \u003cspan class=\"n\"\u003eradius\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"c1\"\u003e//魚群の生成範囲\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003ecount\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e     \u003cspan class=\"c1\"\u003e//魚の数\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eSpawnRandomInSphereComponent\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eSharedComponentDataWrapper\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eSpawnRandomInSphere\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e\u003cstrong\u003ePositionコンポーネントデータ\u003c/strong\u003eは、 float3 Value を持つのみですね。\u003cbr\u003e\n座標など、生成位置以外にも使える\u003cstrong\u003e汎用的なComponentDataは、使いまわして使用\u003c/strong\u003eしてます。\u003c/p\u003e\n\n\u003cp\u003e例えばここでは、生成位置以外にも、移動する座標（魚の挙動）にもPositionコンポーネントデータが使われていました。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003ePosition.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eUnity.Entities\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eUnity.Mathematics\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003enamespace\u003c/span\u003e \u003cspan class=\"nn\"\u003eUnity.Transforms\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e/// \u0026lt;summary\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e/// If Attached, in local space (relative to parent)\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e/// If not Attached, in world space.\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e/// \u0026lt;/summary\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eSerializable\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003estruct\u003c/span\u003e \u003cspan class=\"nc\"\u003ePosition\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eIComponentData\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003efloat3\u003c/span\u003e \u003cspan class=\"n\"\u003eValue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"c1\"\u003e//生成位置情報\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eUnityEngine\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eDisallowMultipleComponent\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003ePositionComponent\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eComponentDataWrapper\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003ePosition\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"componentsystem-の中身を見てみる\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#componentsystem-%E3%81%AE%E4%B8%AD%E8%BA%AB%E3%82%92%E8%A6%8B%E3%81%A6%E3%81%BF%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eComponentSystem の中身を見てみる\u003c/h2\u003e\n\n\u003cp\u003e上述の\u003cstrong\u003eComponentData\u003c/strong\u003e(SpawnRandomInSphereComponent)は\u003cstrong\u003eComponentSystem\u003c/strong\u003e(SpawnRandomInSphereSystem)にて使われています。\u003c/p\u003e\n\n\u003cp\u003eどうやらこの中で、ComponentSystemの他、\u003cstrong\u003eGroupの定義\u003c/strong\u003eもしているようです。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eSpawnRandomInSphereSystem.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem.Collections.Generic\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eUnity.Collections\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eUnity.Entities\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eUnity.Mathematics\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eUnity.Transforms\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003enamespace\u003c/span\u003e \u003cspan class=\"nn\"\u003eSamples.Common\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eSpawnRandomInSphereSystem\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eComponentSystem\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003estruct\u003c/span\u003e \u003cspan class=\"nc\"\u003eSpawnRandomInSphereInstance\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003espawnerIndex\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eEntity\u003c/span\u003e \u003cspan class=\"n\"\u003esourceEntity\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003efloat3\u003c/span\u003e \u003cspan class=\"n\"\u003eposition\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"cp\"\u003e#pragma warning disable 649\n\u003c/span\u003e            \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003efloat\u003c/span\u003e \u003cspan class=\"n\"\u003eradius\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"cp\"\u003e#pragma warning restore 649\n\u003c/span\u003e        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"n\"\u003eComponentGroup\u003c/span\u003e \u003cspan class=\"n\"\u003em_MainGroup\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n        \u003cspan class=\"c1\"\u003e// ここで要求するComponentDataを決めています。\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eprotected\u003c/span\u003e \u003cspan class=\"k\"\u003eoverride\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eOnCreateManager\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"n\"\u003em_MainGroup\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nf\"\u003eGetComponentGroup\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003etypeof\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eSpawnRandomInSphere\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"k\"\u003etypeof\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ePosition\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003eprotected\u003c/span\u003e \u003cspan class=\"k\"\u003eoverride\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eOnUpdate\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003euniqueTypes\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eList\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eSpawnRandomInSphere\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"m\"\u003e10\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n            \u003cspan class=\"n\"\u003eEntityManager\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eGetAllUniqueSharedComponentData\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003euniqueTypes\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n            \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003espawnInstanceCount\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003esharedIndex\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"n\"\u003esharedIndex\u003c/span\u003e \u003cspan class=\"p\"\u003e!=\u003c/span\u003e \u003cspan class=\"n\"\u003euniqueTypes\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eCount\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"n\"\u003esharedIndex\u003c/span\u003e\u003cspan class=\"p\"\u003e++)\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003espawner\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003euniqueTypes\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003esharedIndex\u003c/span\u003e\u003cspan class=\"p\"\u003e];\u003c/span\u003e\n                \u003cspan class=\"n\"\u003em_MainGroup\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSetFilter\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003espawner\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n                \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eentities\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003em_MainGroup\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eGetEntityArray\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n                \u003cspan class=\"n\"\u003espawnInstanceCount\u003c/span\u003e \u003cspan class=\"p\"\u003e+=\u003c/span\u003e \u003cspan class=\"n\"\u003eentities\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eLength\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n            \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003espawnInstanceCount\u003c/span\u003e \u003cspan class=\"p\"\u003e==\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n                \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n            \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003espawnInstances\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eNativeArray\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eSpawnRandomInSphereInstance\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"n\"\u003espawnInstanceCount\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eAllocator\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eTemp\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003espawnIndex\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n                \u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003esharedIndex\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"n\"\u003esharedIndex\u003c/span\u003e \u003cspan class=\"p\"\u003e!=\u003c/span\u003e \u003cspan class=\"n\"\u003euniqueTypes\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eCount\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"n\"\u003esharedIndex\u003c/span\u003e\u003cspan class=\"p\"\u003e++)\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003espawner\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003euniqueTypes\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003esharedIndex\u003c/span\u003e\u003cspan class=\"p\"\u003e];\u003c/span\u003e\n                    \u003cspan class=\"n\"\u003em_MainGroup\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSetFilter\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003espawner\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n                    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eentities\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003em_MainGroup\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eGetEntityArray\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n                    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003epositions\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003em_MainGroup\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eGetComponentDataArray\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003ePosition\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;();\u003c/span\u003e\n\n                    \u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003eentityIndex\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"n\"\u003eentityIndex\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"n\"\u003eentities\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eLength\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"n\"\u003eentityIndex\u003c/span\u003e\u003cspan class=\"p\"\u003e++)\u003c/span\u003e\n                    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003espawnInstance\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eSpawnRandomInSphereInstance\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n                        \u003cspan class=\"n\"\u003espawnInstance\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003esourceEntity\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eentities\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eentityIndex\u003c/span\u003e\u003cspan class=\"p\"\u003e];\u003c/span\u003e\n                        \u003cspan class=\"n\"\u003espawnInstance\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003espawnerIndex\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003esharedIndex\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n                        \u003cspan class=\"n\"\u003espawnInstance\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eposition\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003epositions\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eentityIndex\u003c/span\u003e\u003cspan class=\"p\"\u003e].\u003c/span\u003e\u003cspan class=\"n\"\u003eValue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n                        \u003cspan class=\"n\"\u003espawnInstances\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003espawnIndex\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003espawnInstance\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n                        \u003cspan class=\"n\"\u003espawnIndex\u003c/span\u003e\u003cspan class=\"p\"\u003e++;\u003c/span\u003e\n                    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n            \u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003espawnIndex\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"n\"\u003espawnIndex\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"n\"\u003espawnInstances\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eLength\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"n\"\u003espawnIndex\u003c/span\u003e\u003cspan class=\"p\"\u003e++)\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003espawnerIndex\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003espawnInstances\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003espawnIndex\u003c/span\u003e\u003cspan class=\"p\"\u003e].\u003c/span\u003e\u003cspan class=\"n\"\u003espawnerIndex\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n                \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003espawner\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003euniqueTypes\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003espawnerIndex\u003c/span\u003e\u003cspan class=\"p\"\u003e];\u003c/span\u003e\n                \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003ecount\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003espawner\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ecount\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n                \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eentities\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eNativeArray\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eEntity\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"n\"\u003ecount\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003eAllocator\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eTemp\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n                \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eprefab\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003espawner\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eprefab\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n                \u003cspan class=\"kt\"\u003efloat\u003c/span\u003e \u003cspan class=\"n\"\u003eradius\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003espawner\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eradius\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n                \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003espawnPositions\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eNativeArray\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003efloat3\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"n\"\u003ecount\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eAllocator\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eTemp\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n                \u003cspan class=\"n\"\u003efloat3\u003c/span\u003e \u003cspan class=\"n\"\u003ecenter\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003espawnInstances\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003espawnIndex\u003c/span\u003e\u003cspan class=\"p\"\u003e].\u003c/span\u003e\u003cspan class=\"n\"\u003eposition\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n                \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003esourceEntity\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003espawnInstances\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003espawnIndex\u003c/span\u003e\u003cspan class=\"p\"\u003e].\u003c/span\u003e\u003cspan class=\"n\"\u003esourceEntity\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n                \u003cspan class=\"c1\"\u003e// 魚の生成位置\u003c/span\u003e\n                \u003cspan class=\"n\"\u003eGeneratePoints\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eRandomPointsInSphere\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ecenter\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003eradius\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"k\"\u003eref\u003c/span\u003e \u003cspan class=\"n\"\u003espawnPositions\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n                \u003cspan class=\"c1\"\u003e// 魚の生成\u003c/span\u003e\n                \u003cspan class=\"n\"\u003eEntityManager\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eInstantiate\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eprefab\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eentities\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n                \u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"n\"\u003ecount\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e++)\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eposition\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003ePosition\u003c/span\u003e\n                    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                        \u003cspan class=\"n\"\u003eValue\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003espawnPositions\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n                    \u003cspan class=\"p\"\u003e};\u003c/span\u003e\n                    \u003cspan class=\"n\"\u003eEntityManager\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSetComponentData\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eentities\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e],\u003c/span\u003e\u003cspan class=\"n\"\u003eposition\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n                \u003cspan class=\"n\"\u003eEntityManager\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eRemoveComponent\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eSpawnRandomInSphere\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"n\"\u003esourceEntity\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n                \u003cspan class=\"n\"\u003espawnPositions\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eDispose\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e \u003cspan class=\"c1\"\u003e// NativeArrayは必ず破棄処理が必要\u003c/span\u003e\n                \u003cspan class=\"n\"\u003eentities\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eDispose\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n            \u003cspan class=\"n\"\u003espawnInstances\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eDispose\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"自作サンプル作ってみた\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%87%AA%E4%BD%9C%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB%E4%BD%9C%E3%81%A3%E3%81%A6%E3%81%BF%E3%81%9F\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e自作サンプル作ってみた\u003c/h1\u003e\n\n\u003cp\u003e公式サンプルを眺めてみたが、なんとなくしか分からない。やはり習うより慣れろだろうということで、簡単なサンプル作ってみようと思います。\u003c/p\u003e\n\n\u003cp\u003e決められた長方形の範囲内にCubeを生成するものを作ります。\u003c/p\u003e\n\n\u003cp\u003e動作環境につきましては、公式と同じです。(Unity2018.2.3f1)\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"まずcomponentdataを用意する\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%BE%E3%81%9Acomponentdata%E3%82%92%E7%94%A8%E6%84%8F%E3%81%99%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eまずComponentDataを用意する\u003c/h2\u003e\n\n\u003cp\u003eまずは\u003cstrong\u003e生成するためには、生成する物（Prefab）、生成数、生成範囲、生成場所が必要\u003c/strong\u003eなので、以下の２つのComponentDataをSpawnerにアタッチします。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/9da844bd45fb10fe71c34aa82f6284e42692b752/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3235363731372f35343332333337342d333837622d353862362d343438622d3365666463333062323331302e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg width=\"557\" alt=\"スクリーンショット 2018-12-02 16.51.53.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F256717%2F54323374-387b-58b6-448b-3efdc30b2310.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=597597f3f27c11cf968662d086a44283\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/256717/54323374-387b-58b6-448b-3efdc30b2310.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F256717%2F54323374-387b-58b6-448b-3efdc30b2310.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=fdf704a81afac8220c52808c8b40dbda 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eCubeComponent.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eUnityEngine\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eUnity.Entities\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003enamespace\u003c/span\u003e \u003cspan class=\"nn\"\u003eSamples.Common\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eSerializable\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003estruct\u003c/span\u003e \u003cspan class=\"nc\"\u003eCube\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eISharedComponentData\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eGameObject\u003c/span\u003e \u003cspan class=\"n\"\u003eprefab\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"c1\"\u003e// プレハブを持たす\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003efloat\u003c/span\u003e \u003cspan class=\"n\"\u003ehalfWidth\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"c1\"\u003e// 生成する範囲の半径\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"n\"\u003espawnLocal\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003ecount\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"c1\"\u003e// 生成数\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eCubeComponent\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eSharedComponentDataWrapper\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eCube\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003ePositionコンポーネントデータについては、先ほど使った魚の生成位置と同じのを使い回します。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003ePosition.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eUnity.Entities\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eUnity.Mathematics\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003enamespace\u003c/span\u003e \u003cspan class=\"nn\"\u003eUnity.Transforms\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eSerializable\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003estruct\u003c/span\u003e \u003cspan class=\"nc\"\u003ePosition\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eIComponentData\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003efloat3\u003c/span\u003e \u003cspan class=\"n\"\u003eValue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"componentsystemを作成する\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#componentsystem%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eComponentSystemを作成する。\u003c/h2\u003e\n\n\u003cp\u003eデータを元にどのような挙動をす流のか決める\u003cstrong\u003eCompoonentSystem\u003c/strong\u003eを作成します。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eCubeSystem.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eUnity.Entities\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eUnity.Transforms\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eUnity.Mathematics\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eUnity.Collections\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003enamespace\u003c/span\u003e \u003cspan class=\"nn\"\u003eSamples.Common\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eCubeSystem\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eComponentSystem\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e// 要求リスト一覧\u003c/span\u003e\n        \u003cspan class=\"k\"\u003estruct\u003c/span\u003e \u003cspan class=\"nc\"\u003eGroup\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eReadOnly\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n            \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eSharedComponentDataArray\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eCube\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eSpawner\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eComponentDataArray\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003ePosition\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ePosition\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eEntityArray\u003c/span\u003e \u003cspan class=\"n\"\u003eEntity\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003ereadonly\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003eLength\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eInject\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eGroup\u003c/span\u003e \u003cspan class=\"n\"\u003em_Group\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003eprotected\u003c/span\u003e \u003cspan class=\"k\"\u003eoverride\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eOnUpdate\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ewhile\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003em_Group\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eLength\u003c/span\u003e \u003cspan class=\"p\"\u003e!=\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003espawner\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003em_Group\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eSpawner\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e];\u003c/span\u003e\n                \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003esourceEntity\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003em_Group\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eEntity\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e];\u003c/span\u003e\n                \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003ecenter\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003em_Group\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ePosition\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e].\u003c/span\u003e\u003cspan class=\"n\"\u003eValue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n                \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eentities\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eNativeArray\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eEntity\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"n\"\u003espawner\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ecount\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eAllocator\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eTemp\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n                \u003cspan class=\"n\"\u003eEntityManager\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eInstantiate\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003espawner\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eprefab\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eentities\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n                \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003epositions\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eNativeArray\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003efloat3\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"n\"\u003espawner\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ecount\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eAllocator\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eTemp\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n                \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003espawner\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003espawnLocal\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                    \u003cspan class=\"n\"\u003eGeneratePoints\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eRandomPointsInSquare\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003efloat3\u003c/span\u003e\u003cspan class=\"p\"\u003e(),\u003c/span\u003e \u003cspan class=\"n\"\u003espawner\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ehalfWidth\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003eref\u003c/span\u003e \u003cspan class=\"n\"\u003epositions\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n                    \u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"n\"\u003espawner\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ecount\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e++)\u003c/span\u003e\n                    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eposition\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003ePosition\u003c/span\u003e\n                        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                            \u003cspan class=\"n\"\u003eValue\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003epositions\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n                        \u003cspan class=\"p\"\u003e};\u003c/span\u003e\n                        \u003cspan class=\"n\"\u003eEntityManager\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSetComponentData\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eentities\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e],\u003c/span\u003e \u003cspan class=\"n\"\u003eposition\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n                        \u003cspan class=\"c1\"\u003e// Spawn Attach\u003c/span\u003e\n                        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eattach\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eEntityManager\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eCreateEntity\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n                        \u003cspan class=\"n\"\u003eEntityManager\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAddComponentData\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eattach\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eAttach\u003c/span\u003e\n                        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                            \u003cspan class=\"n\"\u003eParent\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003esourceEntity\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                            \u003cspan class=\"n\"\u003eChild\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eentities\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n                        \u003cspan class=\"p\"\u003e});\u003c/span\u003e\n                    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n                \u003cspan class=\"k\"\u003eelse\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                    \u003cspan class=\"n\"\u003eGeneratePoints\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eRandomPointsInSquare\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ecenter\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003espawner\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ehalfWidth\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003eref\u003c/span\u003e \u003cspan class=\"n\"\u003epositions\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n                    \u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"n\"\u003espawner\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ecount\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e++)\u003c/span\u003e\n                    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eposition\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003ePosition\u003c/span\u003e\n                        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                            \u003cspan class=\"n\"\u003eValue\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003epositions\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n                        \u003cspan class=\"p\"\u003e};\u003c/span\u003e\n                        \u003cspan class=\"n\"\u003eEntityManager\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSetComponentData\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eentities\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e],\u003c/span\u003e \u003cspan class=\"n\"\u003eposition\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n                    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n                \u003cspan class=\"n\"\u003eentities\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eDispose\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n                \u003cspan class=\"n\"\u003epositions\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eDispose\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n                \u003cspan class=\"n\"\u003eEntityManager\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eRemoveComponent\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eCube\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"n\"\u003esourceEntity\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n                \u003cspan class=\"c1\"\u003e// Instantiate \u0026amp; AddComponent \u0026amp; RemoveComponent calls invalidate the injected groups,\u003c/span\u003e\n                \u003cspan class=\"c1\"\u003e// so before we get to the next spawner we have to reinject them  \u003c/span\u003e\n                \u003cspan class=\"nf\"\u003eUpdateInjectedComponentGroups\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e100x100の正方形内に、50,000個のCubeがビッシリ生成されました！\u003cbr\u003e\nMonoBehaviorだったらこの時点で激重なのでは...？\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/4b1921188f4b57a8219d5f1fd5de67223f01f952/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3235363731372f66343066653636652d343431652d643266372d656639642d3735623630623662666433612e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg width=\"922\" alt=\"スクリーンショット 2018-11-25 15.01.53.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F256717%2Ff40fe66e-441e-d2f7-ef9d-75b60b6bfd3a.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=b350f60eab79e9bfadb95d708d307686\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/256717/f40fe66e-441e-d2f7-ef9d-75b60b6bfd3a.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F256717%2Ff40fe66e-441e-d2f7-ef9d-75b60b6bfd3a.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=8b58fc19a8ce59e0dffbbcb6143d2dbb 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"さらに振る舞いを追加してみる\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%95%E3%82%89%E3%81%AB%E6%8C%AF%E3%82%8B%E8%88%9E%E3%81%84%E3%82%92%E8%BF%BD%E5%8A%A0%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eさらに振る舞いを追加してみる\u003c/h2\u003e\n\n\u003cp\u003eこれでは公式サンプルのままで寂しいので、もう少し手を加えます。\u003cbr\u003e\n生成した Cube Prefab に\u003cstrong\u003e波のような挙動を追加してみます。\u003c/strong\u003e\u003c/p\u003e\n\n\u003cp\u003eCubeの挙動なので、\u003cstrong\u003ePrefabに持たせるコンポーネントデータが必要\u003c/strong\u003eです。\u003cbr\u003e\n今回は従来からある\u003cstrong\u003ePositionComponent\u003c/strong\u003e(コンポーネントデータ)を使い回し、アタッチします。\u003cbr\u003e\nまた、\u003cstrong\u003eUpDownコンポーネントデータを用意\u003c/strong\u003eします。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eUpDownComponent.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eUnity.Entities\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003enamespace\u003c/span\u003e \u003cspan class=\"nn\"\u003eSamples.Common\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003estruct\u003c/span\u003e \u003cspan class=\"nc\"\u003eUpDown\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eISharedComponentData\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eUpDownComponent\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eSharedComponentDataWrapper\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eUpDown\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;{}\u003c/span\u003e\n\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/f188c5b2c6df6e01359a950ab0bb9a6779274f2e/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3235363731372f31343636643033362d616665622d363665352d343364642d6365643737316634653035312e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg width=\"293\" alt=\"スクリーンショット 2018-12-02 15.52.48.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F256717%2F1466d036-afeb-66e5-43dd-ced771f4e051.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=125429a3b801a45f8b1df32ec601202a\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/256717/1466d036-afeb-66e5-43dd-ced771f4e051.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F256717%2F1466d036-afeb-66e5-43dd-ced771f4e051.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=7a9f7b644f02d9ad1b39e3a304f7cfeb 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eさて、\u003cstrong\u003eComponentData\u003c/strong\u003eを用意し、\u003cstrong\u003ePrefab\u003c/strong\u003eへアタッチしたら、今度は\u003cstrong\u003eComponentSystem\u003c/strong\u003eを作成します。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eUpDownSystem.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eUnity.Collections\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eUnity.Entities\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eUnity.Jobs\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eUnity.Burst\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eUnity.Mathematics\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eUnity.Transforms\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eUnityEngine\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003enamespace\u003c/span\u003e \u003cspan class=\"nn\"\u003eSamples.Common\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eUpDownSystem\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eJobComponentSystem\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"cm\"\u003e/* IJobParallelForインターフェースを使うと、\n         * 複数のスレッドに分散させて配列要素を並列で実行することができます。*/\u003c/span\u003e\n\n        \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eBurstCompile\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n        \u003cspan class=\"k\"\u003estruct\u003c/span\u003e \u003cspan class=\"nc\"\u003eMoveUpdown\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eIJobParallelFor\u003c/span\u003e \n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"c1\"\u003e// CubeにPositionComponentがアタッチされているか確認しましょう\u003c/span\u003e\n            \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eComponentDataArray\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003ePosition\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003epositions\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \n            \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003efloat\u003c/span\u003e \u003cspan class=\"n\"\u003etime\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n            \u003cspan class=\"c1\"\u003e/// \u0026lt;summary\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"c1\"\u003e/// ジョブの処理内容\u003c/span\u003e\n            \u003cspan class=\"c1\"\u003e/// \u0026lt;/summary\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eExecute\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"n\"\u003epositions\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003ePosition\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                    \u003cspan class=\"n\"\u003eValue\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003efloat3\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003epositions\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e].\u003c/span\u003e\u003cspan class=\"n\"\u003eValue\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                                       \u003cspan class=\"n\"\u003eMathf\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSin\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003etime\u003c/span\u003e\u003cspan class=\"p\"\u003e+(\u003c/span\u003e\u003cspan class=\"n\"\u003epositions\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e].\u003c/span\u003e\u003cspan class=\"n\"\u003eValue\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"n\"\u003epositions\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e].\u003c/span\u003e\u003cspan class=\"n\"\u003eValue\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ez\u003c/span\u003e\u003cspan class=\"p\"\u003e)),\u003c/span\u003e\n                                      \u003cspan class=\"n\"\u003epositions\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e].\u003c/span\u003e\u003cspan class=\"n\"\u003eValue\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ez\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e};\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"n\"\u003eComponentGroup\u003c/span\u003e \u003cspan class=\"n\"\u003em_MoveUpDownGroup\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n        \u003cspan class=\"cm\"\u003e/* 要求リストを作成。\n         * ここではUpDownコンポーネントデータと\n         * Positionコンポーネントデータを要求するという事 */\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eprotected\u003c/span\u003e \u003cspan class=\"k\"\u003eoverride\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eOnCreateManager\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"n\"\u003em_MoveUpDownGroup\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nf\"\u003eGetComponentGroup\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n                \u003cspan class=\"n\"\u003eComponentType\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eReadOnly\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003etypeof\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eUpDown\u003c/span\u003e\u003cspan class=\"p\"\u003e)),\u003c/span\u003e\n                \u003cspan class=\"k\"\u003etypeof\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ePosition\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"c1\"\u003e// ジョブを実行する。\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eprotected\u003c/span\u003e \u003cspan class=\"k\"\u003eoverride\u003c/span\u003e \u003cspan class=\"n\"\u003eJobHandle\u003c/span\u003e \u003cspan class=\"nf\"\u003eOnUpdate\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eJobHandle\u003c/span\u003e \u003cspan class=\"n\"\u003einputDeps\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003emoveUpDownJob\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eMoveUpdown\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"n\"\u003epositions\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003em_MoveUpDownGroup\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eGetComponentDataArray\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003ePosition\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(),\u003c/span\u003e\n                \u003cspan class=\"n\"\u003etime\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eTime\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003erealtimeSinceStartup\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e};\u003c/span\u003e\n\n            \u003cspan class=\"c1\"\u003e// Scheduleメソッドの第2引数にはバッチ数を指定します。\u003c/span\u003e\n            \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003emoveUpDownJobHandle\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003emoveUpDownJob\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSchedule\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003em_MoveUpDownGroup\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eCalculateLength\u003c/span\u003e\u003cspan class=\"p\"\u003e(),\u003c/span\u003e\n                                                             \u003cspan class=\"m\"\u003e64\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                                                             \u003cspan class=\"n\"\u003einputDeps\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003emoveUpDownJobHandle\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003eこんな感じで再生できました！\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/f8eb34f216da4a2243436eeff51e6746c05dbc85/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3235363731372f34356166666461652d356464612d343263632d306430392d6164323539376337373632382e676966\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F256717%2F45affdae-5dda-42cc-0d09-ad2597c77628.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=ec057c9d013d85e8a9ce333b466d1d45\" alt=\"gif_animation_001.gif\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/256717/45affdae-5dda-42cc-0d09-ad2597c77628.gif\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F256717%2F45affdae-5dda-42cc-0d09-ad2597c77628.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=513aad1aa94a843066b2752d4239173f 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e...従来のGameObjectとMonoBehaviorなら激重間違いなし\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"まとめ感想\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%BE%E3%81%A8%E3%82%81%E6%84%9F%E6%83%B3\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eまとめ・感想\u003c/h1\u003e\n\n\u003cp\u003e\u003cstrong\u003eECSは下記のように使えば動くと分かった\u003c/strong\u003e\u003cbr\u003e\n\u003c/p\u003e\u003cul\u003e\n\u003cli\u003e動かしたいものに\u003cstrong\u003eComponentDataをアタッチ\u003c/strong\u003eする\u003cbr\u003e→ComponentDataの記述方法は、例えばScriptableObjectにキャラクターのパラメーターを持たすイメージに近いかも！\u003c/li\u003e\n\u003cli\u003e ComponentDataは同じものであれば\u003cstrong\u003e使い回す\u003c/strong\u003e\n\u003c/li\u003e\n\u003cli\u003e \u003cstrong\u003eComponentSystem\u003c/strong\u003eにて必要なComponentDataを決め、ジョブを実行する。\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eブログ等の説明を読んで分からなかったのですが、実際手を動かしてみると案外シンプルだなと思いました。\u003cbr\u003e\n他、Unity JobSystemとBurst Compilerについて、今後勉強しなくてはと思いました。\u003c/p\u003e\n\n\u003cp\u003e私は常日頃３Dシューティングゲームを作りたいと考えていて、弾丸や敵のスポーンにECSを活用してみる予定です。\u003c/p\u003e\n\n\u003cp\u003e明日は\u003ca href=\"https://qiita.com/advent-calendar/2018/unity2\"\u003eUnity #2 Advent Calender 2018\u003c/a\u003e 22日目、投稿者は\u003ca href=\"http://chroske.hatenablog.com/\" rel=\"nofollow noopener\" target=\"_blank\"\u003echroskeさん\u003c/a\u003eです！\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"参考\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%8F%82%E8%80%83\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e参考\u003c/h1\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://qiita.com/orange_lily1127/items/77310e31e64485280377\" id=\"reference-829a7432f2c02057cc6e\"\u003eUnityのECS(Entity Component System)で雪の結晶を降らせる\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/Unity-Technologies/EntityComponentSystemSamples\" rel=\"nofollow noopener\" target=\"_blank\"\u003eUnity-Technologies/EntityComponentSystemSamples\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"http://tsubakit1.hateblo.jp/entry/2018/03/25/180203\" rel=\"nofollow noopener\" target=\"_blank\"\u003e【Unity】Unity 2018のEntity Component System（通称ECS）について（１）\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"http://tsubakit1.hateblo.jp/entry/2018/04/02/233106\" rel=\"nofollow noopener\" target=\"_blank\"\u003e【Unity】Unity 2018のEntity Component System（通称ECS）について（２）\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://qiita.com/mao_/items/4951c4bf0c82de98b5d6\" id=\"reference-5148480c8053d50114c6\"\u003e【Unity】ECS + JobSystemで10万個のドカベンロゴをアニメーションさせてみた\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://www.slideshare.net/UnityTechnologiesJapan/unite-tokyo-2018-training-daycjobsystem-ecscpu-entity-component-system-1\" rel=\"nofollow noopener\" target=\"_blank\"\u003e【Unite Tokyo 2018 Training Day】C#JobSystem \u0026amp; ECSでCPUを極限まで使い倒そう ~Entity Component System 編~\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://qiita.com/simplestar/items/17b0886be0170f79aa2e\" id=\"reference-97810abfef459e826c59\"\u003eUnity:はじめてのECS\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://www.shibuya24.info/entry/jobsystem2\" rel=\"nofollow noopener\" target=\"_blank\"\u003eIJobParallelForで並列処理させるジョブを作ってみる\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://www.shibuya24.info/entry/jobsystem1\" rel=\"nofollow noopener\" target=\"_blank\"\u003eUnity JobSystemをとりあえずやってみる序\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n","createdAt":"2018-12-20T17:37:36Z","elapsedYearsFromLastModifiedAt":2,"encryptedId":"AIIMsguzky3TUCyC4TISbly3jUPbcqbD--43o0h3Y7draoSFvY--5quTW+mVqXVfKzDVJjgRmQ==","isBanned":false,"isDeprecated":true,"isDestroyableByViewer":false,"isEditRequestReadableByViewer":true,"isEditRequestSendableByViewer":true,"isLikableByViewer":true,"isLikedByViewer":false,"isPublic":true,"isSlide":false,"isStockableByViewer":true,"isStockedByViewer":false,"isSubscribableByViewer":false,"isSubscribedByViewer":false,"isUpdatableByViewer":false,"isUpdated":true,"lastModifiedAt":"2019-05-28T17:00:20Z","likesCount":28,"linkUrl":"https://qiita.com/GREAT__SHARK/items/6d9c5adc6822ab0e8513","organization":null,"originalId":746199,"stockedCount":25,"title":"Entity Component System を作って学ぶ","toc":"\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%81%9D%E3%82%82%E3%81%9D%E3%82%82ecs%E3%81%A8%E3%81%AF\"\u003eそもそもECSとは？\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#ecs%E7%94%A8%E8%AA%9E\"\u003eECS用語\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%B0%8E%E5%85%A5\"\u003e導入\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%85%AC%E5%BC%8Fecs%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB%E3%82%92%E8%A6%8B%E3%81%A6%E3%81%BF%E3%81%9F\"\u003e公式ECSサンプルを見てみた\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E8%A9%A6%E3%81%97%E3%81%ABboidexample%E3%82%92%E5%86%8D%E7%94%9F%E3%81%97%E3%81%A6%E3%81%BF%E3%81%9F\"\u003e試しにBoidExampleを再生してみた。\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#componentdata-%E3%81%AE%E4%B8%AD%E8%BA%AB%E3%82%92%E8%A6%8B%E3%81%A6%E3%81%BF%E3%82%8B\"\u003eComponentData の中身を見てみる\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#componentsystem-%E3%81%AE%E4%B8%AD%E8%BA%AB%E3%82%92%E8%A6%8B%E3%81%A6%E3%81%BF%E3%82%8B\"\u003eComponentSystem の中身を見てみる\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E8%87%AA%E4%BD%9C%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB%E4%BD%9C%E3%81%A3%E3%81%A6%E3%81%BF%E3%81%9F\"\u003e自作サンプル作ってみた\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%81%BE%E3%81%9Acomponentdata%E3%82%92%E7%94%A8%E6%84%8F%E3%81%99%E3%82%8B\"\u003eまずComponentDataを用意する\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#componentsystem%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B\"\u003eComponentSystemを作成する。\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%81%95%E3%82%89%E3%81%AB%E6%8C%AF%E3%82%8B%E8%88%9E%E3%81%84%E3%82%92%E8%BF%BD%E5%8A%A0%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B\"\u003eさらに振る舞いを追加してみる\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%81%BE%E3%81%A8%E3%82%81%E6%84%9F%E6%83%B3\"\u003eまとめ・感想\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%8F%82%E8%80%83\"\u003e参考\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n","totalPv":6007,"uuid":"6d9c5adc6822ab0e8513","banReason":null,"adventCalendarItem":{"day":21,"calendar":{"name":"Unity #2","urlName":"unity2","year":2018,"organization":null}},"author":{"encryptedId":"9kkBGGTnYitU58mQPYTbxaWajrms--+MFye6iciucs46nd--BNVVbsPkD9zpB47j6Z1xOQ==","originalId":256717,"description":"日々の開発のちょっとしたメモとして記事を書いてます。","facebookUrl":null,"githubUrl":"https://github.com/TakeshiSaito","isBlockingViewer":false,"isFollowableByViewer":true,"isFollowedByViewer":false,"isTweetWebNotificationReceivable":false,"linkedinUrl":null,"name":"","profileImageUrl":"https://qiita-image-store.s3.amazonaws.com/0/256717/profile-images/1531913570","profileImageUrlW48":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F256717%2Fprofile-images%2F1531913570?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=48\u0026s=d9f39ec4b27a51579c90fddaa415827c","profileImageUrlW75":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F256717%2Fprofile-images%2F1531913570?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=d8104a04ecfe222eeb7bf6a5cb796703","urlName":"GREAT__SHARK","websiteUrl":"","twitterUrl":null,"twitterUrlName":null,"revealedOrganizations":{"edges":[]}},"tags":[{"name":"C#","urlName":"csharp"},{"name":"Unity","urlName":"unity"},{"name":"EntityComponentSystem","urlName":"entitycomponentsystem"}],"followingLikers":{"edges":[]},"comments":{"totalCount":0}},"comments":[],"client":null,"ads_event_emitter":null}}</script>
