<!DOCTYPE html><html><head><meta charset="utf-8" /><title>【UniRx】IObservableのHotとColdを完全に理解する - Qiita</title><meta content="width=device-width,initial-scale=1,shrink-to-fit=no,viewport-fit=cover" name="viewport" /><meta content="#55c500" name="theme-color" /><meta content="XWpkTG32-_C4joZoJ_UsmDUi-zaH-hcrjF6ZC_FoFbk" name="google-site-verification" /><meta content="telephone=no" name="format-detection" /><link rel="canonical" href="https://qiita.com/yutorisan/items/844eaeab392abf03ce80" /><link href="/manifest.json" rel="manifest" /><link href="/opensearch.xml" rel="search" title="Qiita" type="application/opensearchdescription+xml" /><link as="script" href="https://www.googletagservices.com/tag/js/gpt.js" rel="preload" /><link href="https://securepubads.g.doubleclick.net" rel="preconnect" /><script async="" src="https://www.googletagservices.com/tag/js/gpt.js"></script><meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="lBtPZwrkYWWREZiFRi9B0pLGf/hZOKMaqT1m40goCJ3dz8eWpE24FQYtsUviQu0bgdmRUNWIHe7pUFjgPbZhZQ==" /><link rel="shortcut icon" type="image/x-icon" href="https://cdn.qiita.com/assets/favicons/public/production-c620d3e403342b1022967ba5e3db1aaa.ico" /><link rel="apple-touch-icon" type="image/png" href="https://cdn.qiita.com/assets/favicons/public/apple-touch-icon-ec5ba42a24ae923f16825592efdc356f.png" /><link rel="stylesheet" media="all" href="https://cdn.qiita.com/assets/public/article-2eaa7dbedc42a8ea65c722cda46d0ebb.min.css" /><script src="https://cdn.qiita.com/assets/public/v3-article-bundle-63de2d91fef827269d3f6b958db2335b.min.js" defer="defer"></script><meta name="twitter:card" content="summary_large_image"><meta content="@Qiita" name="twitter:site" /><meta content="@yutorisan19" name="twitter:creator" /><meta property="og:type" content="article"><meta property="og:title" content="【UniRx】IObservableのHotとColdを完全に理解する - Qiita"><meta property="og:image" content="https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0&amp;w=1200&amp;mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND00NENRVlc1cFVuampnSkZKVDJKelpYSjJZV0pzWmVPQnJraHZkT09CcUVOdmJHVGpncExscm96bGhhampnYXZua0lib3A2UGpnWm5qZ29zJnR4dC1jb2xvcj0lMjMzMzMmdHh0LWZvbnQ9SGlyYWdpbm8lMjBTYW5zJTIwVzYmdHh0LXNpemU9NTQmdHh0LWNsaXA9ZWxsaXBzaXMmdHh0LWFsaWduPWNlbnRlciUyQ21pZGRsZSZzPTU3NjEzNjFjNmI1NjYwYTEwYjQwMGVhYjk3ZmUxZTk1&amp;mark-align=center%2Cmiddle&amp;blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RSGwxZEc5eWFYTmhiZyZ0eHQtY29sb3I9JTIzMzMzJnR4dC1mb250PUhpcmFnaW5vJTIwU2FucyUyMFc2JnR4dC1zaXplPTQ1JnR4dC1hbGlnbj1yaWdodCUyQ2JvdHRvbSZzPTgxODZjNmQyOWMyMjMwNjA0NDYxZjBhZTI0ODQ3YzI4&amp;blend-align=center%2Cmiddle&amp;blend-mode=normal&amp;s=8f5d0cef2527f135b8ee24b7911c01a1"><meta property="og:description" content="

はじめに

RxにつきもののHot Coldについて解説します。

HotColdについてはすでに様々な記事で解説がなされているとは思いますが、直感的には理解ができても、本質的な部分については理解できないことがありました。
先日、..."><meta content="https://qiita.com/yutorisan/items/844eaeab392abf03ce80" property="og:url" /><meta content="Qiita" property="og:site_name" /><meta content="564524038" property="fb:admins" /><meta content="C#,Unity,ReactiveExtensions,UniRx" name="keywords" /><script>!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window, document,'script',
'https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '668972150489891');
fbq('track', 'PageView');</script><style data-emotion-css="17jxvjw 11t2ec1 1dvr2p8 18lkoru 1g4cku8 1iupg5d ijvq0v 15cocm3 12rp90f 115f4t 1b8uj5v 79elbk 16hhh7b fcbn8c 1gj7nt 154zy0m yikrym 1jqivyb 1ode1bp le4d8r 1hbd3g7 helsa7 8qb8m4 2imjyh he5w1s 70qvj9 3ojehk 100alwu 1dtnjt5 10ougpm 1ay9vb9 m19uds cgzq40 1wa99t2 1l3zk9f 4czcte 1yzj1fm 1uv1qiv 109dbrr 5jpx49 mnxgyc 1vlpknv fsjkhv 1b17vb0 7i7f4d"}>.css-17jxvjw{display:grid;display:-ms-grid;grid-template-columns:80px minmax(0,1fr) 300px;-ms-grid-columns:80px minmax(0,1fr) 300px;grid-template-rows:minmax(270px,auto) 1fr;-ms-grid-rows:minmax(270px,auto) 1fr;max-width:1280px;margin-right:auto;margin-left:auto;padding-top:24px;padding-right:24px;padding-left:24px;}@media (max-width:1200px){.css-17jxvjw{padding-bottom:0;padding-left:0;padding-right:0;}}@media (max-width:992px){.css-17jxvjw{grid-template-columns:80px 452px 300px;-ms-grid-columns:80px 452px 300px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}}@media (max-width:770px){.css-17jxvjw{display:block;}}@media (max-width:480px){.css-17jxvjw{padding-top:0;}}.css-11t2ec1{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;z-index:5;position:-webkit-sticky;position:sticky;top:calc(56px + 24px + 16px + 32px - 16px);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:16px;width:80px;}.css-11t2ec1:after{content:'';display:table;}.css-11t2ec1:before{content:'';display:table;}@media (max-width:770px){.css-11t2ec1{display:none;}}.css-1dvr2p8{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-18lkoru{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;background-color:#FFFFFF;}.css-1g4cku8{display:inline-block;vertical-align:middle;height:20px;width:20px;fill:#55C500;}.css-1iupg5d{color:#55C500;cursor:pointer;font-size:14px;font-weight:bold;}.css-ijvq0v{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-15cocm3{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#FFFFFF;border:2px solid #6E6F70;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:2px 0px 0px;width:40px;}.css-12rp90f{display:inline-block;vertical-align:bottom;height:17.77777777777778px;width:16px;fill:#6E6F70;}.css-115f4t{color:#6E6F70;font-size:14px;font-weight:bold;}.css-1b8uj5v{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;margin-bottom:16px;padding:0;}.css-79elbk{position:relative;}.css-16hhh7b{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;padding:0;}.css-fcbn8c{display:none;bottom:initial;left:initial;right:initial;top:initial;left:100%;top:calc(-8px - (14px * 1.8) - 16px - 4px);}.css-1gj7nt{color:rgba(0,0,0,0.6);font-size:14px;font-weight:bold;line-height:1.8;padding:8px 16px;}.css-154zy0m{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.87);cursor:pointer;font-size:16px;font-weight:normal;line-height:1.8;padding:4px 16px;}.css-154zy0m:hover{-webkit-text-decoration:none;text-decoration:none;background-color:#F2F2F2;}.css-yikrym{width:20px;}.css-1jqivyb{color:rgba(0,0,0,0.6);font-size:13px;}.css-1ode1bp{background-color:rgba(0,0,0,0.12);height:1px;width:100%;margin:8px 0;}.css-le4d8r{display:inline-block;vertical-align:middle;height:13px;width:13px;fill:rgba(0,0,0,0.6);}.css-1hbd3g7{height:250px;}.css-helsa7{background-color:#FFFFFF;padding:32px;margin-bottom:24px;}@media (max-width:992px){.css-helsa7{margin:0 auto 40px;}}@media (max-width:480px){.css-helsa7{margin:0 0 40px;padding:32px 16px;}}.css-8qb8m4{margin-bottom:48px;}.css-2imjyh{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-he5w1s{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;width:100%;}@media (max-width:770px){.css-he5w1s{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}}.css-70qvj9{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.css-3ojehk{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;margin-right:4px;}.css-100alwu{display:inline-block;border-radius:50%;line-height:1;overflow:hidden;vertical-align:middle;}.css-1dtnjt5{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-10ougpm{color:rgba(0,0,0,0.87);font-size:14px;font-weight:600;line-height:1.8;margin-right:4px;text-wrap:break-word;word-break:break-all;}.css-1ay9vb9{margin-right:16px;}.css-m19uds{color:rgba(0,0,0,0.6);font-size:14px;line-height:1.8;}.css-cgzq40{color:rgba(0,0,0,0.87);font-size:32px;font-weight:bold;line-height:1.4;margin-top:8px;text-wrap:break-word;word-break:break-all;}.css-1wa99t2{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.6);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:8px;}.css-1l3zk9f{color:rgba(0,0,0,0.6);font-size:20px;margin-right:8px;}.css-4czcte{margin-right:4px;color:inherit;font-size:14px;line-height:1.8;}.css-4czcte:not(:last-child)::after{content:',';margin-right:4px;}.css-1yzj1fm{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:32px;}.css-1uv1qiv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-size:20px;height:32px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin-right:16px;outline:none;padding:0;width:32px;}.css-109dbrr{background-color:#F9F9F9;border-top:1px solid rgba(0,0,0,0.12);bottom:0;box-shadow:0px 1px 4px rgba(0,0,0,0.14);display:none;height:calc(env(safe-area-inset-bottom,0px) + 56px);-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding-bottom:env(safe-area-inset-bottom);position:-webkit-sticky;position:sticky;width:100%;z-index:2000;}@media (max-width:770px){.css-109dbrr{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}.css-5jpx49{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:space-evenly;-webkit-justify-content:space-evenly;-ms-flex-pack:space-evenly;justify-content:space-evenly;width:100%;}.css-mnxgyc{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1vlpknv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;margin-right:4px;background-color:#FFFFFF;}.css-fsjkhv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1b17vb0{color:#6E6F70;font-size:14px;font-weight:bold;margin-left:4px;}.css-7i7f4d{display:none;bottom:initial;left:initial;right:initial;top:initial;bottom:32px;right:0;}</style></head><body><div class="allWrapper"><div><div id="GlobalHeader-react-component-38a0e0a1-1806-4072-9509-993a0f6feb7a"><div class="st-Header"><div class="st-Header_container"><div class="st-Header_start"><a href="/" class="st-Header_logo"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 426.57 130"><circle cx="167.08" cy="21.4" r="12.28"></circle><path d="M250.81 29.66h23.48v18.9h-23.48z"></path><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z"></path><circle cx="216.33" cy="21.4" r="12.28"></circle></svg></a><div class="st-Header_communitySelector" tabindex="0"><span class="fa fa-caret-down"></span></div><div class="st-Header_dropdown"><div class="st-Header_dropdownHeading">Qiita Teams that are logged in</div><div class="st-Header_dropdownItemNote">You are not logged in to any team</div><hr class="st-Header_dropdownDivider st-Header_dropdownDivider-shrink"/><a href="https://teams-center.qiita.com/find_team" class="st-Header_dropdownItem"><span class="fa fa-fw fa-sign-in st-Header_dropdownItemIcon"></span><div>Log in to Qiita Team</div></a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Community</div><a href="/organizations" class="st-Header_dropdownItem">Organization</a><a href="/official-events/open" class="st-Header_dropdownItem">Event</a><a href="/advent-calendar" class="st-Header_dropdownItem">Advent Calendar</a><a href="https://qiitadon.com/" class="st-Header_dropdownItem" target="_blank">Qiitadon (β)</a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Service</div><a href="https://jobs.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Jobs</a><a href="https://zine.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Zine</a><a href="https://blog.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Blog</a></div><form class="st-Header_search" action="/search" method="get"><span class="fa fa-search st-Header_searchIcon"></span><input type="search" class="st-Header_searchInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form><form class="st-Header_searchModal" action="/search" method="get"><input type="text" class="st-Header_searchModalInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form></div><div class="st-Header_end"><div class="st-Header_searchButton"><span class="fa fa-search"></span></div><a class="st-Header_signupButton" href="/signup?redirect_to=%2Fyutorisan%2Fitems%2F844eaeab392abf03ce80">Signup</a><a class="st-Header_loginLink" href="/login?redirect_to=%2Fyutorisan%2Fitems%2F844eaeab392abf03ce80">Login</a></div><div class="st-Header_overlay"></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="GlobalHeader" data-dom-id="GlobalHeader-react-component-38a0e0a1-1806-4072-9509-993a0f6feb7a">{"unreadNotificationsCount":null,"realms":[{"humanName":"Qiita","isCurrentRealm":true,"isQiita":true,"isQiitaTeam":false,"loggedInUser":null,"teamId":null,"url":"https://qiita.com/"}],"teamFindUrl":"https://teams-center.qiita.com/find_team","isTeamOnlyUser":null,"currentUser":null}</script>
      
</div><div class="st-HeaderAlert st-HeaderAlert-warning"><div class="st-HeaderAlert_body"></div></div><script type="application/ld+json">{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"/","name":"Qiita"}},{"@type":"ListItem","position":2,"item":{"@id":"/tags/csharp","name":"C#"}}]}</script><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","datePublished":"2021-03-24T20:29:10.000+09:00","dateModified":"2021-04-02T02:48:53.000+09:00","headline":"【UniRx】IObservableのHotとColdを完全に理解する","image":"https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0\u0026w=1200\u0026mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND00NENRVlc1cFVuampnSkZKVDJKelpYSjJZV0pzWmVPQnJraHZkT09CcUVOdmJHVGpncExscm96bGhhampnYXZua0lib3A2UGpnWm5qZ29zJnR4dC1jb2xvcj0lMjMzMzMmdHh0LWZvbnQ9SGlyYWdpbm8lMjBTYW5zJTIwVzYmdHh0LXNpemU9NTQmdHh0LWNsaXA9ZWxsaXBzaXMmdHh0LWFsaWduPWNlbnRlciUyQ21pZGRsZSZzPTU3NjEzNjFjNmI1NjYwYTEwYjQwMGVhYjk3ZmUxZTk1\u0026mark-align=center%2Cmiddle\u0026blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RSGwxZEc5eWFYTmhiZyZ0eHQtY29sb3I9JTIzMzMzJnR4dC1mb250PUhpcmFnaW5vJTIwU2FucyUyMFc2JnR4dC1zaXplPTQ1JnR4dC1hbGlnbj1yaWdodCUyQ2JvdHRvbSZzPTgxODZjNmQyOWMyMjMwNjA0NDYxZjBhZTI0ODQ3YzI4\u0026blend-align=center%2Cmiddle\u0026blend-mode=normal\u0026s=8f5d0cef2527f135b8ee24b7911c01a1","mainEntityOfPage":"https://qiita.com/yutorisan/items/844eaeab392abf03ce80","author":{"@type":"Person","address":"","email":null,"identifier":"yutorisan","name":"yutorisan","image":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fpbs.twimg.com%2Fprofile_images%2F1274400166120812544%2FDAWcpHec_bigger.jpg?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=754be610f489085be0fdfc48de5585a9","url":"https://qiita.com/yutorisan","description":"C#が好きです","memberOf":[{"@type":"Organization","address":"オンライン@Slack","legalName":"Unityゲーム開発者ギルド","image":"https://s3-ap-northeast-1.amazonaws.com/qiita-organization-image/5e3ba3bb442371003e6b5d4618ef627b9b478357/original.jpg?1570216541","logo":"https://s3-ap-northeast-1.amazonaws.com/qiita-organization-image/f7eb993765ddcdb2c5e6890556c43ea3de8fbfb7/original.jpg?1570215690","identifier":"unity-game-dev-guild","description":"趣味・仕事問わずUnityでゲームを作っている開発者のみで構成されるオンラインコミュニティです。Unityでゲームを開発・運用するにあたって必要なあらゆる知見を共有することを目的とします。"}]},"publisher":{"@type":"Organization","name":"Qiita","logo":{"@type":"ImageObject","url":"//cdn.qiita.com/assets/public/qiita-logo-c39ded593afa388e2e1ba435b110554e.png"}}}</script><style type="text/css">.wb-CampaignLink {
  background-color: #333333;
  width: 100%;
}

.wb-CampaignLink_container {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  max-width: 1100px;
  margin: 0 auto;
  font-size: 13px;
  padding: 0.8em;
}
.wb-CampaignLink_container > a {
  color: #fff;
}

.wb-CampaignLink_container > a:hover {
  text-decoration: underline;
}</style><div class="wb-CampaignLink"><div class="wb-CampaignLink_container"><a target="_blank" id="header_text_message_1" href="https://increments.connpass.com/event/211948/">Qiita創業者海野氏登壇！Qiita エンジニアフェスタ 2021 Online Meetupを9/9(木)に開催</a><a target="_blank" id="header_text_message_2" href="https://increments.connpass.com/event/211948/">詳しくはこちら</a></div><script>td.trackEvent(
  'front_events',
  {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"yutorisan","type":"items","id":"844eaeab392abf03ce80"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Show","data":{"message":"Qiita創業者海野氏登壇！Qiita エンジニアフェスタ 2021 Online Meetupを9/9(木)に開催","url":"https://increments.connpass.com/event/211948/","sub_message":"詳しくはこちら"}}
)</script><script>document.getElementById('header_text_message_1').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"yutorisan","type":"items","id":"844eaeab392abf03ce80"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":1,"pos_id":"header_text_message_1","message":"Qiita創業者海野氏登壇！Qiita エンジニアフェスタ 2021 Online Meetupを9/9(木)に開催","url":"https://increments.connpass.com/event/211948/","sub_message":"詳しくはこちら"}}
  )
})</script><script>document.getElementById('header_text_message_2').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"yutorisan","type":"items","id":"844eaeab392abf03ce80"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":1,"pos_id":"header_text_message_2","message":"Qiita創業者海野氏登壇！Qiita エンジニアフェスタ 2021 Online Meetupを9/9(木)に開催","url":"https://increments.connpass.com/event/211948/","sub_message":"詳しくはこちら"}}
  )
})</script></div><script type="application/json" id="js-react-on-rails-context">{"railsEnv":"production","inMailer":false,"i18nLocale":"en","i18nDefaultLocale":"en","href":"https://qiita.com/yutorisan/items/844eaeab392abf03ce80","location":"/yutorisan/items/844eaeab392abf03ce80","scheme":"https","host":"qiita.com","port":null,"pathname":"/yutorisan/items/844eaeab392abf03ce80","search":null,"httpAcceptLanguage":null,"actionPath":"public/items#show","settings":{"analyticsTrackingId":"UA-24675221-12","assetsMap":{},"csrfToken":"z+SrPYXZoRLlJtIcIzsMYINb5x9A67PUEELTK/7anpuGMCPMK3B4YnIa+9KHVqCpkEQJt8xbDSBQL+0oi0T3Yw==","locale":"en"},"currentUser":null,"isLoggedIn":false,"recaptchaSiteKey":"6LfNkiQTAAAAAM3UGnSquBy2akTITGNMO_QDxMw6","serverSide":false}</script>
<div id="PersonalArticlePage-react-component-a4e5fa1a-4867-432a-9319-973548363b83"><div class="p-items_wrapper"><div class=" css-17jxvjw"><div class="css-11t2ec1"><div class="css-1dvr2p8"><button class=" css-18lkoru"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/yutorisan/items/844eaeab392abf03ce80/likers" class="css-1iupg5d">11</a></div><div class="css-ijvq0v"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-115f4t">6</span></div><div class="css-1b8uj5v"><span class="fa fa-twitter"></span></div><div class="css-1b8uj5v"><span class="fa fa-facebook"></span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-fcbn8c"><div class="css-1gj7nt">Improve article</div><a href="/drafts/844eaeab392abf03ce80/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/yutorisan/items/844eaeab392abf03ce80/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/yutorisan/items/844eaeab392abf03ce80/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/yutorisan/items/844eaeab392abf03ce80/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/yutorisan/items/844eaeab392abf03ce80.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div><div class="p-items_options"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_toc"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_main"><div class="css-helsa7"><div class="css-8qb8m4"><div class="css-2imjyh"><div class="css-he5w1s"><div class="css-70qvj9"><div class="css-3ojehk"><a href="/yutorisan"><img class="css-100alwu eyfquo10" src="https://pbs.twimg.com/profile_images/1274400166120812544/DAWcpHec_bigger.jpg" width="24" height="24" loading="lazy"/></a></div><div class="css-1dtnjt5"><a href="/yutorisan" class="css-10ougpm">@<!-- -->yutorisan</a><div class="css-1ay9vb9"><span><meta content="2021-03-24T11:29:10Z"/><time dateTime="2021-04-01T17:48:53Z" class="css-m19uds">updated at 2021-04-01</time></span></div></div></div></div></div><h1 class="css-cgzq40">【UniRx】IObservableのHotとColdを完全に理解する</h1><div class="css-1wa99t2"><span class="fa fa-tags mr-1of2 css-1l3zk9f" aria-hidden="true"></span><a href="/tags/csharp" class="css-4czcte">C#</a><a href="/tags/unity" class="css-4czcte">Unity</a><a href="/tags/reactiveextensions" class="css-4czcte">ReactiveExtensions</a><a href="/tags/unirx" class="css-4czcte">UniRx</a></div></div><section class="it-MdContent"><div id="personal-public-article-body"><div>
<h1>
<span id="はじめに" class="fragment"></span><a href="#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB"><i class="fa fa-link"></i></a>はじめに</h1>

<p>RxにつきもののHot Coldについて解説します。</p>

<p>HotColdについてはすでに様々な記事で解説がなされているとは思いますが、直感的には理解ができても、本質的な部分については理解できないことがありました。<br>
先日、ようやく納得がいくまで本質部分を理解できましたので、記事にしてまとめます。<br>
一応、他の記事とは違った視点での説明になっていると思います。</p>

<p>ちなみに、Hot変換については別記事で書いていますのでこちらを参照ください。ただし、本記事の知識が前提となっています。</p>

<p><qiita-embed-ogp src="https://qiita.com/yutorisan/items/68bd68bbffe3c4f3ba32"></qiita-embed-ogp></p>

<h2>
<span id="その前にsubjecttクラスについて" class="fragment"></span><a href="#%E3%81%9D%E3%81%AE%E5%89%8D%E3%81%ABsubjectt%E3%82%AF%E3%83%A9%E3%82%B9%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>その前に<code>Subject&lt;T&gt;</code>クラスについて</h2>

<p>Hot-Coldと<code>Subject&lt;T&gt;</code>クラスには深い関係があります。<br>
そのため、Hot-Coldの説明の前に<code>Subject&lt;T&gt;</code>クラスについてもう一度復習します。</p>

<p>御存知の通り、<code>Subject&lt;T&gt;</code>クラスは<code>IObserver&lt;T&gt;</code>インターフェイスと<code>IObservable&lt;T&gt;</code>インターフェイスを両方実装したクラスです。<br>
したがって、<code>IObserver</code>としても<code>IObservable</code>としても振る舞うことができるという特徴があります。</p>

<h3>
<span id="複数の購読者を管理する機能を持つ" class="fragment"></span><a href="#%E8%A4%87%E6%95%B0%E3%81%AE%E8%B3%BC%E8%AA%AD%E8%80%85%E3%82%92%E7%AE%A1%E7%90%86%E3%81%99%E3%82%8B%E6%A9%9F%E8%83%BD%E3%82%92%E6%8C%81%E3%81%A4"><i class="fa fa-link"></i></a>複数の購読者を管理する機能を持つ</h3>

<p>ここで重要なのは、<code>Subject</code>クラスは、<strong><code>Subscribe</code>してきた購読者（つまり<code>IObserver</code>）を内部にリストとして保持する</strong>ということです。</p>

<p>購読者が<code>Subject</code>クラスの<code>Subscribe</code>メソッドを呼び出すと、<code>Subject</code>クラスが内部に持つ<code>IObserver</code>のコレクション（購読者リスト）に、引数で渡された<code>IObserver</code>を追加します。</p>

<p><a href="https://camo.qiitausercontent.com/b7d4db72e8c4249d8aa82764b411a4f5ac333bbc/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3639373833302f34383264303135352d306630652d623164652d376165322d3864613139333063366235632e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F697830%2F482d0155-0f0e-b1de-7ae2-8da1930c6b5c.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=b895140fae53f10ebea4c3f0341f54bf" alt="Subjectの役割_Subscribe.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/697830/482d0155-0f0e-b1de-7ae2-8da1930c6b5c.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F697830%2F482d0155-0f0e-b1de-7ae2-8da1930c6b5c.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=da7f3043263222a24149a89afbe362f3 1x" loading="lazy"></a></p>

<p>そして、<code>Subject</code>クラスの<code>OnNext</code>や<code>OnError</code>、<code>OnCompleted</code>が呼ばれたときに、保持している購読者リストにあるすべての購読者に対して、同様の通知を発行します。</p>

<p><a href="https://camo.qiitausercontent.com/a52d9520bea34775f3e802aeb593df14c5a70457/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3639373833302f33616131343639622d666536322d393064342d393762372d3338613834366263326466372e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F697830%2F3aa1469b-fe62-90d4-97b7-38a846bc2df7.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=e1c4642b96cf607a863dc9b7f566b858" alt="Subjectの役割_OnNext.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/697830/3aa1469b-fe62-90d4-97b7-38a846bc2df7.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F697830%2F3aa1469b-fe62-90d4-97b7-38a846bc2df7.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=060653ffea1a44347bcae617fdf3d10f 1x" loading="lazy"></a></p>

<p>つまり、<code>Subject</code>クラスとは、<strong>1つのObservableシーケンスを複数の購読先に分配する、マルチキャストするという役割を持っているクラス</strong>なのです。</p>

<p>まとめると、<code>Subject</code>クラスの特徴は次のとおりとなります。</p>

<ul>
<li><strong>複数の購読者を管理する機能を有する</strong></li>
<li><strong>1つのObservableシーケンスをすべての購読先にマルチキャストする</strong></li>
</ul>

<p>このことを踏まえた上で、Hot Coldの説明をします。</p>

<h1>
<span id="hotとcold" class="fragment"></span><a href="#hot%E3%81%A8cold"><i class="fa fa-link"></i></a>HotとCold</h1>

<h2>
<span id="hot-observableとは" class="fragment"></span><a href="#hot-observable%E3%81%A8%E3%81%AF"><i class="fa fa-link"></i></a>Hot Observableとは</h2>

<p><strong>Hotな<code>IObservable</code></strong>とは、<strong>購読者を複数持つことができる<code>IObservable</code></strong>のことを指します。<br>
そして、Hotな<code>IObservable</code>は「<strong>1つのObservableシーケンスを、すべての購読者に対してマルチキャストする</strong>」という特徴があります。</p>

<p>「複数の購読者を持つ」「1つのObservableシーケンスを複数の購読先にマルチキャストする」と言えばもう<strong><code>Subject</code>クラス</strong>しかありませんね。</p>

<h3>
<span id="hot-observableはsubject" class="fragment"></span><a href="#hot-observable%E3%81%AFsubject"><i class="fa fa-link"></i></a>Hot Observableは「Subject」</h3>

<p>実は、<strong>Hot Observableとは、<code>Subject</code>クラスそのものを指します</strong>。文字で説明されても意味がわからないと思うので、次のコードを見てください。</p>

<div class="code-frame" data-lang="csharp"><div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">HotObservableProvider</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="n">Subject</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;</span> <span class="n">subject</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Subject</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;();</span>

    <span class="k">public</span> <span class="k">void</span> <span class="nf">Fire</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">subject</span><span class="p">.</span><span class="nf">OnNext</span><span class="p">(</span><span class="m">1</span><span class="p">);</span>
        <span class="n">subject</span><span class="p">.</span><span class="nf">OnNext</span><span class="p">(</span><span class="m">2</span><span class="p">);</span>
        <span class="n">subject</span><span class="p">.</span><span class="nf">OnNext</span><span class="p">(</span><span class="m">3</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="c1">//「HotObservable」から取得できるIObservableはSubjectクラスそのものを指す</span>
    <span class="k">public</span> <span class="n">IObservable</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;</span> <span class="n">HotObservable</span> <span class="p">=&gt;</span> <span class="n">subject</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">public</span> <span class="k">class</span> <span class="nc">User</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="nf">User</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">HotObservableProvider</span> <span class="n">provider</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">HotObservableProvider</span><span class="p">();</span>
        <span class="n">provider</span><span class="p">.</span><span class="n">HotObservable</span> <span class="c1">//このIObservable&lt;int&gt;はSubjectクラスそのものを指すのでHot</span>
                <span class="p">.</span><span class="nf">Subscribe</span><span class="p">(</span><span class="n">n</span> <span class="p">=&gt;</span> <span class="p">{</span> <span class="cm">/*何らかの処理*/</span> <span class="p">});</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>この<code>HotObservableProvider</code>クラスが提供する<code>HotObservable</code>プロパティから取得できる<code>IObservable&lt;int&gt;</code>インターフェイスは、<strong>その実体がまさに<code>Subject&lt;int&gt;</code>クラスそのものを指しています</strong>。<br>
このように、実体が<code>Subject</code>クラスそのものを指す<code>IObservable</code>は、Hotであると考えることができます。</p>

<p>また、実体が<code>Subject</code>そのものではなくとも、<strong><code>Subscribe</code>したときに実質的に<code>Subject</code>を<code>Subscribe</code>したのと同じような効果があるような<code>IObservable</code></strong>も、Hotと見做すことができます。これについても具体例を用意しました。</p>

<div class="code-frame" data-lang="csharp"><div class="highlight"><pre class="with-code"><code><span class="c1">//IObservableの実体はSubjectクラスではない</span>
<span class="k">public</span> <span class="k">class</span> <span class="nc">HotObservable</span> <span class="p">:</span> <span class="n">IObservable</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="n">Subject</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;</span> <span class="n">subject</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Subject</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;();</span>

    <span class="k">public</span> <span class="k">void</span> <span class="nf">Fire</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">subject</span><span class="p">.</span><span class="nf">OnNext</span><span class="p">(</span><span class="m">1</span><span class="p">);</span>
        <span class="n">subject</span><span class="p">.</span><span class="nf">OnNext</span><span class="p">(</span><span class="m">2</span><span class="p">);</span>
        <span class="n">subject</span><span class="p">.</span><span class="nf">OnNext</span><span class="p">(</span><span class="m">3</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="c1">//Subscribeしたとき、SubjectクラスをSubscribeするのと同じ効果がなる</span>
    <span class="k">public</span> <span class="n">IDisposable</span> <span class="nf">Subscribe</span><span class="p">(</span><span class="n">IObserver</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;</span> <span class="n">observer</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="n">subject</span><span class="p">.</span><span class="nf">Subscribe</span><span class="p">(</span><span class="n">observer</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="k">public</span> <span class="k">class</span> <span class="nc">User</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="nf">User</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">IObservable</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;</span> <span class="n">observable</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">HotObservable</span><span class="p">();</span>
        <span class="c1">//「observable」の実体はSubjectではないが、</span>
        <span class="c1">// Subscribeすると実質SubjectをSubscribeしてるのと同じ</span>
        <span class="n">observable</span><span class="p">.</span><span class="nf">Subscribe</span><span class="p">(</span><span class="n">n</span> <span class="p">=&gt;</span> <span class="p">{</span> <span class="cm">/*何らかの処理*/</span> <span class="p">});</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>先ほどの例と違って、<code>HotObservable</code>クラス自体が<code>IObservable</code>となっています。<code>User</code>が<code>HotObservable</code>クラスを<code>IObservable</code>として使用するとき、当然この<code>IObservable</code>の実体は<code>HotObservable</code>であり<code>Subject</code>ではありません。しかしながら、<code>HotObservable</code>クラスは、<strong><code>Subscribe</code>すると内部に持つ<code>Subject</code>を<code>Subscribe</code>するのと同じ効果となるように実装されています</strong>。したがって、この場合もHot Observableであると見做すことができます。</p>

<p>まとめると、Hot Observableは、<strong>購読先が<code>Subject</code>であるような<code>IObservable</code></strong>とも言えると思います。</p>

<h2>
<span id="cold-observableとは" class="fragment"></span><a href="#cold-observable%E3%81%A8%E3%81%AF"><i class="fa fa-link"></i></a>Cold Observableとは</h2>

<p>対して<strong>Coldな<code>IObservable</code></strong>とは、<strong>購読者を1つしか持つことができない<code>IObservable</code></strong>のことを指します。</p>

<p>Coldな<code>IObservable</code>は購読者を1つしか持てないので、1つの購読者に対して常に専属の<code>IObservable</code>が存在するということになります。Hotな<code>IObservable</code>は<strong><code>Observable:Observer = 1:多</code></strong>であったのに対して、Coldな<code>IObservable</code>は<strong><code>Observable:Observer = 1:1</code></strong>となることが特徴です。</p>

<p>なぜCold Observableが「購読者を1つしか持てない」のかというと、<strong><code>Subject</code>クラスを利用していないから</strong>です。<code>Subject</code>クラスを利用していないので、複数の購読者を管理することができず、ただ1つの購読者に対して専属のObservableが必要になってしまいます。<br>
1つのObservableシーケンスを共有しない（つまり購読者が1つだけ）ならばColdのままで問題ないのですが、共有したい（つまり購読者が複数存在する）場合はHot変換が必要になる場合がある、というのはこのためです。</p>

<p>ちなみに、Rxのオペレータやファクトリメソッドから出てくる<code>IObservable</code>は、そのほとんどが<code>Subject</code>を使っていません。そのため、普通にRxを使っている分には、ほとんどがColdな<code>IObservable</code>になります。</p>

<h2>
<span id="まとめると" class="fragment"></span><a href="#%E3%81%BE%E3%81%A8%E3%82%81%E3%82%8B%E3%81%A8"><i class="fa fa-link"></i></a>まとめると…</h2>

<ul>
<li>
<strong>Hot Observable</strong>

<ul>
<li>購読先が<code>Subject</code>であるような<code>IObservable</code>
</li>
<li>複数の購読者を管理可能</li>
<li><code>Observable:Observer = 1:多</code></li>
</ul>
</li>
<li>
<strong>Cold Observable</strong>

<ul>
<li>購読先が<code>Subject</code>ではないような<code>IObservable</code>
</li>
<li>ただ1つの購読者しか管理できない</li>
<li><code>Observable:Observer = 1:1</code></li>
</ul>
</li>
</ul>

<h1>
<span id="observableソースのお話" class="fragment"></span><a href="#observable%E3%82%BD%E3%83%BC%E3%82%B9%E3%81%AE%E3%81%8A%E8%A9%B1"><i class="fa fa-link"></i></a>Observableソースのお話</h1>

<p>これで終わりではなく、大事な<strong>Observableソース</strong>についてのお話があります。</p>

<p>Observableソースとは、<strong>Observableシーケンスに流れてくる値の「発生源」</strong>です。<br>
そしてこのObservableソースにも<strong>Hot</strong>と<strong>Cold</strong>が存在し、この違いを認識していないと思わぬバグの原因となりますので、Rxを使う上では必ず理解する必要がある知識です。</p>

<h2>
<span id="observableソースの例" class="fragment"></span><a href="#observable%E3%82%BD%E3%83%BC%E3%82%B9%E3%81%AE%E4%BE%8B"><i class="fa fa-link"></i></a>Observableソースの例</h2>

<p>ObservableソースはObservableシーケンスに流れてくる値の発生源などと言われてもいまいちピンとこないと思いますので、例を紹介します。</p>

<h3>
<span id="subjecttがobservableソース" class="fragment"></span><a href="#subjectt%E3%81%8Cobservable%E3%82%BD%E3%83%BC%E3%82%B9"><i class="fa fa-link"></i></a><code>Subject&lt;T&gt;</code>がObservableソース</h3>

<p><code>Subject&lt;T&gt;</code>クラスがObservableソースとなる例です。</p>

<div class="code-frame" data-lang="csharp"><div class="highlight"><pre class="with-code"><code>
<span class="n">Subject</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;</span> <span class="n">subject</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Subject</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;();</span>

<span class="n">subject</span><span class="p">.</span><span class="nf">Subscribe</span><span class="p">(</span><span class="n">n</span> <span class="p">=&gt;</span> <span class="p">{</span> <span class="cm">/*何らかの処理*/</span> <span class="p">});</span>

<span class="c1">//ここでSubjectにOnNextすることによってObservableシーケンスに値が乗る</span>
<span class="c1">//→SubjectがObservableソース</span>
<span class="n">subject</span><span class="p">.</span><span class="nf">OnNext</span><span class="p">(</span><span class="m">1</span><span class="p">);</span>
<span class="n">subject</span><span class="p">.</span><span class="nf">OnNext</span><span class="p">(</span><span class="m">2</span><span class="p">);</span>
<span class="n">subject</span><span class="p">.</span><span class="nf">OnNext</span><span class="p">(</span><span class="m">3</span><span class="p">);</span>
</code></pre></div></div>

<p><code>Subject</code>に対して直接値を<code>OnNext</code>によって送出しています。この場合、Observableシーケンスを流れる値の発生源はこの<code>OnNext</code>にあるので、Observableソースは<code>Subject</code>であることが言えます。</p>

<h3>
<span id="ファクトリメソッドがobservableソース" class="fragment"></span><a href="#%E3%83%95%E3%82%A1%E3%82%AF%E3%83%88%E3%83%AA%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E3%81%8Cobservable%E3%82%BD%E3%83%BC%E3%82%B9"><i class="fa fa-link"></i></a>ファクトリメソッドがObservableソース</h3>

<p>続いて、ファクトリメソッドがObservableソースとなる例です。</p>

<div class="code-frame" data-lang="csharp"><div class="highlight"><pre class="with-code"><code><span class="c1">//ファクトリメソッドから値が送出されている</span>
<span class="c1">//→ファクトリメソッドがObservableソース</span>
<span class="n">Observable</span><span class="p">.</span><span class="nf">Range</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">10</span><span class="p">)</span>
          <span class="p">.</span><span class="nf">Subscribe</span><span class="p">(</span><span class="n">n</span> <span class="p">=&gt;</span> <span class="p">{</span> <span class="cm">/*何らかの処理*/</span> <span class="p">});</span>
</code></pre></div></div>

<p>この場合、<code>Observable.Range</code>からObservableシーケンスの値が送出されていることは言うまでもなく、Observableソースはこのファクトリメソッドということが分かります。</p>

<h2>
<span id="observableソースのhotとcold" class="fragment"></span><a href="#observable%E3%82%BD%E3%83%BC%E3%82%B9%E3%81%AEhot%E3%81%A8cold"><i class="fa fa-link"></i></a>ObservableソースのHotとCold</h2>

<p>ObservableソースにもHotとColdがあると書きました。<br>
察しが良い方は勘付くかもしれませんが、上の例で紹介した<strong><code>Subject&lt;T&gt;</code>がObservableソースのものがHot</strong>で、<strong>ファクトリメソッドがObservableソースのものはCold</strong>です。理由は、<code>Subject&lt;T&gt;</code>は複数の購読者を管理できるのでHot、ファクトリメソッドは<code>Subject&lt;T&gt;</code>を使っていない<sup id="fnref1"><a href="#fn1" title="一部例外もあるようです。詳しくは@acple@githubさんのこちらの記事を参照ください。">1</a></sup>ので複数の購読者を管理できずCold、ただそれだけです。</p>

<p>では、ObservableソースのHotとColdが違うとどう影響してくるのかを説明します。</p>

<h3>
<span id="hotなobservableソース" class="fragment"></span><a href="#hot%E3%81%AAobservable%E3%82%BD%E3%83%BC%E3%82%B9"><i class="fa fa-link"></i></a>HotなObservableソース</h3>

<p>HotなObservableソースとは、<strong><code>Subject&lt;T&gt;</code>が発生源となるObservableソース</strong>のことを指します。</p>

<p>HotなObservableソースには次のような特徴があります。</p>

<ul>
<li>何度<code>Subscribe</code>しても同一のObservableシーケンス</li>
<li>シーケンスの途中から<code>Subscribe</code>した人には途中からしか流れてこない</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/8dbb36de886264411817b56e5b9b4ef226becc21/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3639373833302f34373137653561362d356532622d643462662d626232322d6664613630396533306166352e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F697830%2F4717e5a6-5e2b-d4bf-bb22-fda609e30af5.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=e67aefee4827d511ac9211965dad47df" alt="Hot Observableソース.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/697830/4717e5a6-5e2b-d4bf-bb22-fda609e30af5.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F697830%2F4717e5a6-5e2b-d4bf-bb22-fda609e30af5.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=3192b43fcda62fcc54501c5ebdf93b80 1x" loading="lazy"></a></p>

<p>これはまぁ、想像通りというか、詳しい説明はいらないと思います。<br>
ところが、次のColdなObservableソースの場合、注意が必要です。</p>

<h3>
<span id="coldなobservableソース" class="fragment"></span><a href="#cold%E3%81%AAobservable%E3%82%BD%E3%83%BC%E3%82%B9"><i class="fa fa-link"></i></a>ColdなObservableソース</h3>

<p>ColdなObservableソースとは、HotではないすべてのObservableソースを指します。<br>
Rxに用意されているファクトリメソッドから作られる<code>IObservable</code>は、そのほとんどが内部で<code>Subject&lt;T&gt;</code>を使用していないため、ColdなObservableソースとして動作します。</p>

<p>ColdなObservableソースには次のような特徴があります。</p>

<ul>
<li><strong><code>Subscribe</code>するたびに新しいObservableシーケンス</strong></li>
<li>
<strong>購読者一人ひとりに対して専用のObservableシーケンス</strong>なので、<strong>途中からという概念が存在しない</strong>
</li>
</ul>

<p>HotなObservableソースと決定的に違う点は、下図にように「<strong><code>Subscribe</code>するたびに新しいObservableシーケンスが生成される</strong>」という点です。</p>

<p><a href="https://camo.qiitausercontent.com/59d60a6e13aacd16a8e5dcc550461ad64216a08d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3639373833302f66306330366534382d613033312d333764352d616135342d3936663264646263663337652e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F697830%2Ff0c06e48-a031-37d5-aa54-96f2ddbcf37e.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=21822ca97dac523010df51a14a2c7d14" alt="Cold Observableソース.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/697830/f0c06e48-a031-37d5-aa54-96f2ddbcf37e.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F697830%2Ff0c06e48-a031-37d5-aa54-96f2ddbcf37e.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=b4e78831d2419e5cc0896f9b5dbd3cfe 1x" loading="lazy"></a></p>

<p>Hotの場合と違って、ColdなObservableソースは<code>Subscribe</code>するたびに、新しくObservableシーケンスが生成されています。一体なぜこのような動作になるのでしょうか？</p>

<p>答えは、「<strong>内部に<code>Subject</code>を使っていないから</strong>」となります。<code>Subject</code>を使わないということは、購読者に対して「<strong>直接</strong>」値を発行することを意味します。ちょっと何を言っているのかわからないと思うので、コードで説明します。ここでは、<code>Observable.Range</code>ファクトリメソッドの動作を簡易的に実装した独自の<code>MyObservable.MyRange</code>ファクトリメソッドを作成してみました。</p>

<div class="code-frame" data-lang="csharp"><div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="k">static</span> <span class="k">class</span> <span class="nc">MyObservable</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">static</span> <span class="n">IObservable</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;</span> <span class="nf">MyRange</span><span class="p">(</span><span class="kt">int</span> <span class="n">start</span><span class="p">,</span> <span class="kt">int</span> <span class="n">end</span><span class="p">)</span> <span class="p">=&gt;</span>
        <span class="k">new</span> <span class="nf">MyRange</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">);</span>
<span class="p">}</span>
<span class="k">class</span> <span class="nc">MyRange</span> <span class="p">:</span> <span class="n">IObservable</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="kt">int</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">;</span>
    <span class="k">public</span> <span class="nf">MyRange</span><span class="p">(</span><span class="kt">int</span> <span class="n">start</span><span class="p">,</span> <span class="kt">int</span> <span class="n">end</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="n">start</span> <span class="p">=</span> <span class="n">start</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="n">end</span> <span class="p">=</span> <span class="n">end</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="n">IDisposable</span> <span class="nf">Subscribe</span><span class="p">(</span><span class="n">IObserver</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;</span> <span class="n">observer</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">//Subscribeしてくれた人に直接値を送出する</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="n">start</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;=</span> <span class="n">end</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
        <span class="p">{</span>
            <span class="n">observer</span><span class="p">.</span><span class="nf">OnNext</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="n">observer</span><span class="p">.</span><span class="nf">OnCompleted</span><span class="p">();</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">Subscription</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="k">class</span> <span class="nc">Subscription</span> <span class="p">:</span> <span class="n">IDisposable</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="k">void</span> <span class="nf">Dispose</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="c1">//SubscribeしたらすぐOnCompletedになるので何もしない</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p><code>Subject</code>を使わずに値を発行するには、<code>Subscribe</code>の引数に渡された<code>IObserver</code>（購読者）に対して<strong>直接<code>OnNext</code>するしかない</strong>のです。必然的に、このObservableシーケンスは、<strong>購読してきた<code>IObserver</code>専用</strong>となってしまうのです。したがって、複数回<code>Subscribe</code>されれば、その分新しくObservableシーケンスを生成せざるを得なくなります。これが、上記の図の説明となります。</p>

<p>そして当然、このような仕様を理解していないと、想定とはまったく異なる動作をしてしまう危険性があります。例えば、以下のように1つの<code>Observable.Interval</code>を時間差で複数回<code>Subscribe</code>した場合。</p>

<div class="code-frame" data-lang="csharp"><div class="highlight"><pre class="with-code"><code><span class="c1">//0.1秒ごとに0,1,2,…とインクリメントする値を発行するColdなObservableソース</span>
<span class="n">IObservable</span><span class="p">&lt;</span><span class="kt">long</span><span class="p">&gt;</span> <span class="n">observableTimer</span> <span class="p">=</span> <span class="n">Observable</span><span class="p">.</span><span class="nf">Interval</span><span class="p">(</span><span class="n">TimeSpan</span><span class="p">.</span><span class="nf">FromSeconds</span><span class="p">(</span><span class="m">0.1</span><span class="p">));</span>

<span class="n">observableTimer</span><span class="p">.</span><span class="nf">Subscribe</span><span class="p">(</span><span class="n">n</span> <span class="p">=&gt;</span> <span class="n">Debug</span><span class="p">.</span><span class="nf">Log</span><span class="p">(</span><span class="n">n</span><span class="p">));</span>
<span class="k">await</span> <span class="n">Task</span><span class="p">.</span><span class="nf">Delay</span><span class="p">(</span><span class="m">1000</span><span class="p">);</span> <span class="c1">//1秒差でColdなObservableソースを2回購読</span>
<span class="n">observableTimer</span><span class="p">.</span><span class="nf">Subscribe</span><span class="p">(</span><span class="n">n</span> <span class="p">=&gt;</span> <span class="n">Debug</span><span class="p">.</span><span class="nf">Log</span><span class="p">(</span><span class="n">n</span><span class="p">));</span>
</code></pre></div></div>

<p>「同じ変数<code>observableTimer</code>を2回<code>Subscribe</code>してるんだから、Observableシーケンスは同じで、2個めの<code>Subscribe</code>には10,11,12,…って値が来るんでしょ」と思っていたら、<strong>大間違い</strong>です。<br>
<code>Observable.Interval</code>はColdなObservableソースなので、<code>Subscribe</code>するたびに新しく専用のObservableシーケンスが生成されるので、両方とも0,1,2,…と値が発行されます。<br>
もし、前者のような動作をしてほしい場合はHot変換という作業が必要になります。</p>

<p>このように、ObservableソースのHot-Coldを意識することは非常に重要で、これらの違いを理解しないままRxを使い込むと、バグの原因となりますので十分に注意が必要です。</p>

<h2>
<span id="まとめると-1" class="fragment"></span><a href="#%E3%81%BE%E3%81%A8%E3%82%81%E3%82%8B%E3%81%A8-1"><i class="fa fa-link"></i></a>まとめると…</h2>

<ul>
<li>
<code>Subject</code>から発生するObservableソースはHot</li>
<li>ファクトリメソッドを始めとした、<code>Subject</code>以外から発生するObservableソースはCold</li>
<li>ColdなObservableソースは、<code>Subscribe</code>するたびに新しく専用のObservableシーケンスが生成される</li>
<li>想定する動作に合わせて適切にHot変換が必要</li>
</ul>

<h1>
<span id="さいごに" class="fragment"></span><a href="#%E3%81%95%E3%81%84%E3%81%94%E3%81%AB"><i class="fa fa-link"></i></a>さいごに</h1>

<p>この記事では、<code>IObservable</code>のHot-ColdとObservableソースのHot-Coldを分けて記述しましたが、本質的には（おそらく）同じで、<code>Subject</code>を使っているか、使っていないか、それだけの違いになります。<br>
ただその小さな違いが、大きな違い（バグ）を生み出す原因になるので、十分に注意してRxを使うことが必要です。</p>

<p>ご意見ご指摘等ありましたら是非コメント宜しくお願いします！</p>

<p>[2021/4/2追記]<br>
Hot変換の記事を書きましたので、ぜひこちらも参照ください！</p>

<p><qiita-embed-ogp src="https://qiita.com/yutorisan/items/68bd68bbffe3c4f3ba32"></qiita-embed-ogp></p>

<h1>
<span id="参考記事" class="fragment"></span><a href="#%E5%8F%82%E8%80%83%E8%A8%98%E4%BA%8B"><i class="fa fa-link"></i></a>参考記事</h1>

<p><qiita-embed-ogp src="https://qiita.com/toRisouP/items/f6088963037bfda658d3"></qiita-embed-ogp></p>

<p><qiita-embed-ogp src="https://qiita.com/acple@github/items/8d3a4d3414fa59adff70"></qiita-embed-ogp></p>

<div class="footnotes">
<hr>
<ol>

<li id="fn1">
<p>一部例外もあるようです。詳しくは<a href="/acple@github" class="user-mention js-hovercard" title="acple@github" data-hovercard-target-type="user" data-hovercard-target-name="acple@github">@acple@github</a>さんの<a href="https://qiita.com/acple@github/items/8d3a4d3414fa59adff70">こちらの記事</a>を参照ください。 <a href="#fnref1">↩</a></p>
</li>

</ol>
</div>
</div></div></section><div class="css-1yzj1fm"><div class="css-1uv1qiv"><span class="fa fa-twitter"></span></div><div class="css-1uv1qiv"><span class="fa fa-facebook"></span></div></div><div class="apm-Content"><div class="apm-Content_title">Why not register and get more from Qiita?</div><ol class="apm-Content_list"><li>We will deliver articles that match you<div class="description">By following users and tags, you can catch up information on technical fields that you are interested in as a whole</div></li><li>you can read useful information later efficiently<div class="description">By &quot;stocking&quot; the articles you like, you can search right away</div></li><div><a class="apm-Content_help" href="https://help.qiita.com/ja/articles/qiita-login-user" target="_blank"><i class="fa fa-fw fa-arrow-circle-right"></i>What you can do with signing up</a></div></ol><a href="/signup?callback_action=login_or_signup&amp;redirect_to=%2Fyutorisan%2Fitems%2F844eaeab392abf03ce80&amp;realm=qiita" class="apm-Content_button apm-Content_button-signup">Sign up</a><a href="/login?callback_action=login_or_signup&amp;redirect_to=%2Fyutorisan%2Fitems%2F844eaeab392abf03ce80&amp;realm=qiita" class="apm-Content_button apm-Content_button-signin">Login</a></div></div><div class="css-helsa7"></div></div></div></div><div class="css-109dbrr"><div class="css-5jpx49"><div class="css-mnxgyc"><button class=" css-1vlpknv"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/yutorisan/items/844eaeab392abf03ce80/likers" class="css-1iupg5d">11</a></div><div class="css-fsjkhv"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-1b17vb0">6</span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-7i7f4d"><div class="css-1gj7nt">Improve article</div><a href="/drafts/844eaeab392abf03ce80/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/yutorisan/items/844eaeab392abf03ce80/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/yutorisan/items/844eaeab392abf03ce80/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/yutorisan/items/844eaeab392abf03ce80/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/yutorisan/items/844eaeab392abf03ce80.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="PersonalArticlePage" data-dom-id="PersonalArticlePage-react-component-a4e5fa1a-4867-432a-9319-973548363b83">{"authorAnalyticsTrackingId":"UA-135447292-3","organizationAnalyticsTrackingId":null}</script>
      
<footer id="globalFooter" class="st-Footer"><div class="st-Footer_container"><div class="st-Footer_start"><div class="st-Footer_logo"><svg viewbox="0 0 426.57 130" xmlns="http://www.w3.org/2000/svg"><circle cx="167.08" cy="21.4" r="12.28" /><path d="M250.81 29.66h23.48v18.9h-23.48z" /><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z" /><circle cx="216.33" cy="21.4" r="12.28" /></svg></div><div class="st-Footer_catchcopy">How developers code is here.</div><div class="st-Footer_socials"><a class="fa fa-twitter" href="https://twitter.com/qiita"></a><a class="fa fa-facebook-square" href="https://www.facebook.com/qiita/"></a></div></div><div class="st-Footer_end"><div class="st-Footer_qiita"><div class="st-Footer_label">Qiita</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="/about">About</a><a href="/terms">Terms</a><a href="/privacy">Privacy</a><a target="_blank" href="http://help.qiita.com/ja/articles/qiita-community-guideline">Guideline</a><a target="_blank" href="https://help.qiita.com/ja/articles/others-brand-guideline">Design Guideline</a></div><div class="st-Footer_column"><a href="/release-notes">Release</a><a href="/api/v2/docs">API</a><a href="/feedback/new">ご意見</a><a href="https://help.qiita.com">Help</a><a target="_blank" href="https://qiita.com/ads?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Advertisement</a></div></div></div><div class="st-Footer_increments"><div class="st-Footer_label">Increments</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="https://increments.co.jp/company/">About</a><a href="https://increments.co.jp/jobs/">採用情報</a><a href="https://blog.qiita.com">Blog</a></div><div class="st-Footer_column"><a href="https://teams.qiita.com/">Qiita Team</a><a href="https://jobs.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Jobs</a><a href="https://zine.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Zine</a></div></div></div></div></div><div class="st-Footer_copyright">© 2011-2021 Increments Inc.</div></footer><div id="Snackbar-react-component-ebd48cbb-5c2e-4af1-827a-4df8c694a8ab"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="Snackbar" data-dom-id="Snackbar-react-component-ebd48cbb-5c2e-4af1-827a-4df8c694a8ab">{}</script>
      
<div id="LoginModal-react-component-26527db0-d6e9-4f76-8cd2-2f25719917ec"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="LoginModal" data-dom-id="LoginModal-react-component-26527db0-d6e9-4f76-8cd2-2f25719917ec">{}</script>
      
<div id="StockModal-react-component-cd1c1893-354e-4377-8bbd-e4eaad7a740f"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="StockModal" data-dom-id="StockModal-react-component-cd1c1893-354e-4377-8bbd-e4eaad7a740f">{}</script>
      
</div><div id="dataContainer" style="display: none;" data-config="{&quot;actionPath&quot;:&quot;public/items#show&quot;,&quot;settings&quot;:{&quot;analyticsTrackingId&quot;:&quot;UA-24675221-12&quot;,&quot;assetsMap&quot;:{},&quot;csrfToken&quot;:&quot;FkbWjaZwz92Yul1aMshL3Mo4XVdCN/soMqiUCaYPs3Zfkl58CNkWrQ+GdJSWpecV2Sez/86HRdxyxaoK05Hajg==&quot;,&quot;locale&quot;:&quot;en&quot;},&quot;currentUser&quot;:null}" /></body></html><script type="application/json" data-js-react-on-rails-store="AppStoreWithReactOnRails">{"snackbar":{"type":"","body":"","isActive":false},"article":{"article":{"body":"\n\u003ch1\u003e\n\u003cspan id=\"はじめに\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eはじめに\u003c/h1\u003e\n\n\u003cp\u003eRxにつきもののHot Coldについて解説します。\u003c/p\u003e\n\n\u003cp\u003eHotColdについてはすでに様々な記事で解説がなされているとは思いますが、直感的には理解ができても、本質的な部分については理解できないことがありました。\u003cbr\u003e\n先日、ようやく納得がいくまで本質部分を理解できましたので、記事にしてまとめます。\u003cbr\u003e\n一応、他の記事とは違った視点での説明になっていると思います。\u003c/p\u003e\n\n\u003cp\u003eちなみに、Hot変換については別記事で書いていますのでこちらを参照ください。ただし、本記事の知識が前提となっています。\u003c/p\u003e\n\n\u003cp\u003e\u003cqiita-embed-ogp src=\"https://qiita.com/yutorisan/items/68bd68bbffe3c4f3ba32\"\u003e\u003c/qiita-embed-ogp\u003e\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"その前にsubjecttクラスについて\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%9D%E3%81%AE%E5%89%8D%E3%81%ABsubjectt%E3%82%AF%E3%83%A9%E3%82%B9%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eその前に\u003ccode\u003eSubject\u0026lt;T\u0026gt;\u003c/code\u003eクラスについて\u003c/h2\u003e\n\n\u003cp\u003eHot-Coldと\u003ccode\u003eSubject\u0026lt;T\u0026gt;\u003c/code\u003eクラスには深い関係があります。\u003cbr\u003e\nそのため、Hot-Coldの説明の前に\u003ccode\u003eSubject\u0026lt;T\u0026gt;\u003c/code\u003eクラスについてもう一度復習します。\u003c/p\u003e\n\n\u003cp\u003e御存知の通り、\u003ccode\u003eSubject\u0026lt;T\u0026gt;\u003c/code\u003eクラスは\u003ccode\u003eIObserver\u0026lt;T\u0026gt;\u003c/code\u003eインターフェイスと\u003ccode\u003eIObservable\u0026lt;T\u0026gt;\u003c/code\u003eインターフェイスを両方実装したクラスです。\u003cbr\u003e\nしたがって、\u003ccode\u003eIObserver\u003c/code\u003eとしても\u003ccode\u003eIObservable\u003c/code\u003eとしても振る舞うことができるという特徴があります。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"複数の購読者を管理する機能を持つ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%A4%87%E6%95%B0%E3%81%AE%E8%B3%BC%E8%AA%AD%E8%80%85%E3%82%92%E7%AE%A1%E7%90%86%E3%81%99%E3%82%8B%E6%A9%9F%E8%83%BD%E3%82%92%E6%8C%81%E3%81%A4\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e複数の購読者を管理する機能を持つ\u003c/h3\u003e\n\n\u003cp\u003eここで重要なのは、\u003ccode\u003eSubject\u003c/code\u003eクラスは、\u003cstrong\u003e\u003ccode\u003eSubscribe\u003c/code\u003eしてきた購読者（つまり\u003ccode\u003eIObserver\u003c/code\u003e）を内部にリストとして保持する\u003c/strong\u003eということです。\u003c/p\u003e\n\n\u003cp\u003e購読者が\u003ccode\u003eSubject\u003c/code\u003eクラスの\u003ccode\u003eSubscribe\u003c/code\u003eメソッドを呼び出すと、\u003ccode\u003eSubject\u003c/code\u003eクラスが内部に持つ\u003ccode\u003eIObserver\u003c/code\u003eのコレクション（購読者リスト）に、引数で渡された\u003ccode\u003eIObserver\u003c/code\u003eを追加します。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/b7d4db72e8c4249d8aa82764b411a4f5ac333bbc/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3639373833302f34383264303135352d306630652d623164652d376165322d3864613139333063366235632e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F697830%2F482d0155-0f0e-b1de-7ae2-8da1930c6b5c.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=b895140fae53f10ebea4c3f0341f54bf\" alt=\"Subjectの役割_Subscribe.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/697830/482d0155-0f0e-b1de-7ae2-8da1930c6b5c.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F697830%2F482d0155-0f0e-b1de-7ae2-8da1930c6b5c.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=da7f3043263222a24149a89afbe362f3 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eそして、\u003ccode\u003eSubject\u003c/code\u003eクラスの\u003ccode\u003eOnNext\u003c/code\u003eや\u003ccode\u003eOnError\u003c/code\u003e、\u003ccode\u003eOnCompleted\u003c/code\u003eが呼ばれたときに、保持している購読者リストにあるすべての購読者に対して、同様の通知を発行します。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/a52d9520bea34775f3e802aeb593df14c5a70457/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3639373833302f33616131343639622d666536322d393064342d393762372d3338613834366263326466372e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F697830%2F3aa1469b-fe62-90d4-97b7-38a846bc2df7.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=e1c4642b96cf607a863dc9b7f566b858\" alt=\"Subjectの役割_OnNext.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/697830/3aa1469b-fe62-90d4-97b7-38a846bc2df7.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F697830%2F3aa1469b-fe62-90d4-97b7-38a846bc2df7.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=060653ffea1a44347bcae617fdf3d10f 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eつまり、\u003ccode\u003eSubject\u003c/code\u003eクラスとは、\u003cstrong\u003e1つのObservableシーケンスを複数の購読先に分配する、マルチキャストするという役割を持っているクラス\u003c/strong\u003eなのです。\u003c/p\u003e\n\n\u003cp\u003eまとめると、\u003ccode\u003eSubject\u003c/code\u003eクラスの特徴は次のとおりとなります。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e複数の購読者を管理する機能を有する\u003c/strong\u003e\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003e1つのObservableシーケンスをすべての購読先にマルチキャストする\u003c/strong\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eこのことを踏まえた上で、Hot Coldの説明をします。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"hotとcold\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#hot%E3%81%A8cold\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eHotとCold\u003c/h1\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"hot-observableとは\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#hot-observable%E3%81%A8%E3%81%AF\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eHot Observableとは\u003c/h2\u003e\n\n\u003cp\u003e\u003cstrong\u003eHotな\u003ccode\u003eIObservable\u003c/code\u003e\u003c/strong\u003eとは、\u003cstrong\u003e購読者を複数持つことができる\u003ccode\u003eIObservable\u003c/code\u003e\u003c/strong\u003eのことを指します。\u003cbr\u003e\nそして、Hotな\u003ccode\u003eIObservable\u003c/code\u003eは「\u003cstrong\u003e1つのObservableシーケンスを、すべての購読者に対してマルチキャストする\u003c/strong\u003e」という特徴があります。\u003c/p\u003e\n\n\u003cp\u003e「複数の購読者を持つ」「1つのObservableシーケンスを複数の購読先にマルチキャストする」と言えばもう\u003cstrong\u003e\u003ccode\u003eSubject\u003c/code\u003eクラス\u003c/strong\u003eしかありませんね。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"hot-observableはsubject\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#hot-observable%E3%81%AFsubject\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eHot Observableは「Subject」\u003c/h3\u003e\n\n\u003cp\u003e実は、\u003cstrong\u003eHot Observableとは、\u003ccode\u003eSubject\u003c/code\u003eクラスそのものを指します\u003c/strong\u003e。文字で説明されても意味がわからないと思うので、次のコードを見てください。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eHotObservableProvider\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003eSubject\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003esubject\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eSubject\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;();\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eFire\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003esubject\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eOnNext\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"n\"\u003esubject\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eOnNext\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"n\"\u003esubject\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eOnNext\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e//「HotObservable」から取得できるIObservableはSubjectクラスそのものを指す\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eIObservable\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eHotObservable\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003esubject\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eUser\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003eUser\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eHotObservableProvider\u003c/span\u003e \u003cspan class=\"n\"\u003eprovider\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eHotObservableProvider\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eprovider\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eHotObservable\u003c/span\u003e \u003cspan class=\"c1\"\u003e//このIObservable\u0026lt;int\u0026gt;はSubjectクラスそのものを指すのでHot\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSubscribe\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003en\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"cm\"\u003e/*何らかの処理*/\u003c/span\u003e \u003cspan class=\"p\"\u003e});\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eこの\u003ccode\u003eHotObservableProvider\u003c/code\u003eクラスが提供する\u003ccode\u003eHotObservable\u003c/code\u003eプロパティから取得できる\u003ccode\u003eIObservable\u0026lt;int\u0026gt;\u003c/code\u003eインターフェイスは、\u003cstrong\u003eその実体がまさに\u003ccode\u003eSubject\u0026lt;int\u0026gt;\u003c/code\u003eクラスそのものを指しています\u003c/strong\u003e。\u003cbr\u003e\nこのように、実体が\u003ccode\u003eSubject\u003c/code\u003eクラスそのものを指す\u003ccode\u003eIObservable\u003c/code\u003eは、Hotであると考えることができます。\u003c/p\u003e\n\n\u003cp\u003eまた、実体が\u003ccode\u003eSubject\u003c/code\u003eそのものではなくとも、\u003cstrong\u003e\u003ccode\u003eSubscribe\u003c/code\u003eしたときに実質的に\u003ccode\u003eSubject\u003c/code\u003eを\u003ccode\u003eSubscribe\u003c/code\u003eしたのと同じような効果があるような\u003ccode\u003eIObservable\u003c/code\u003e\u003c/strong\u003eも、Hotと見做すことができます。これについても具体例を用意しました。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"c1\"\u003e//IObservableの実体はSubjectクラスではない\u003c/span\u003e\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eHotObservable\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eIObservable\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003eSubject\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003esubject\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eSubject\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;();\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eFire\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003esubject\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eOnNext\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"n\"\u003esubject\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eOnNext\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"n\"\u003esubject\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eOnNext\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e//Subscribeしたとき、SubjectクラスをSubscribeするのと同じ効果がなる\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eIDisposable\u003c/span\u003e \u003cspan class=\"nf\"\u003eSubscribe\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eIObserver\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eobserver\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003esubject\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSubscribe\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eobserver\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eUser\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003eUser\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eIObservable\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eobservable\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eHotObservable\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e//「observable」の実体はSubjectではないが、\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e// Subscribeすると実質SubjectをSubscribeしてるのと同じ\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eobservable\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSubscribe\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003en\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"cm\"\u003e/*何らかの処理*/\u003c/span\u003e \u003cspan class=\"p\"\u003e});\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e先ほどの例と違って、\u003ccode\u003eHotObservable\u003c/code\u003eクラス自体が\u003ccode\u003eIObservable\u003c/code\u003eとなっています。\u003ccode\u003eUser\u003c/code\u003eが\u003ccode\u003eHotObservable\u003c/code\u003eクラスを\u003ccode\u003eIObservable\u003c/code\u003eとして使用するとき、当然この\u003ccode\u003eIObservable\u003c/code\u003eの実体は\u003ccode\u003eHotObservable\u003c/code\u003eであり\u003ccode\u003eSubject\u003c/code\u003eではありません。しかしながら、\u003ccode\u003eHotObservable\u003c/code\u003eクラスは、\u003cstrong\u003e\u003ccode\u003eSubscribe\u003c/code\u003eすると内部に持つ\u003ccode\u003eSubject\u003c/code\u003eを\u003ccode\u003eSubscribe\u003c/code\u003eするのと同じ効果となるように実装されています\u003c/strong\u003e。したがって、この場合もHot Observableであると見做すことができます。\u003c/p\u003e\n\n\u003cp\u003eまとめると、Hot Observableは、\u003cstrong\u003e購読先が\u003ccode\u003eSubject\u003c/code\u003eであるような\u003ccode\u003eIObservable\u003c/code\u003e\u003c/strong\u003eとも言えると思います。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"cold-observableとは\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#cold-observable%E3%81%A8%E3%81%AF\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eCold Observableとは\u003c/h2\u003e\n\n\u003cp\u003e対して\u003cstrong\u003eColdな\u003ccode\u003eIObservable\u003c/code\u003e\u003c/strong\u003eとは、\u003cstrong\u003e購読者を1つしか持つことができない\u003ccode\u003eIObservable\u003c/code\u003e\u003c/strong\u003eのことを指します。\u003c/p\u003e\n\n\u003cp\u003eColdな\u003ccode\u003eIObservable\u003c/code\u003eは購読者を1つしか持てないので、1つの購読者に対して常に専属の\u003ccode\u003eIObservable\u003c/code\u003eが存在するということになります。Hotな\u003ccode\u003eIObservable\u003c/code\u003eは\u003cstrong\u003e\u003ccode\u003eObservable:Observer = 1:多\u003c/code\u003e\u003c/strong\u003eであったのに対して、Coldな\u003ccode\u003eIObservable\u003c/code\u003eは\u003cstrong\u003e\u003ccode\u003eObservable:Observer = 1:1\u003c/code\u003e\u003c/strong\u003eとなることが特徴です。\u003c/p\u003e\n\n\u003cp\u003eなぜCold Observableが「購読者を1つしか持てない」のかというと、\u003cstrong\u003e\u003ccode\u003eSubject\u003c/code\u003eクラスを利用していないから\u003c/strong\u003eです。\u003ccode\u003eSubject\u003c/code\u003eクラスを利用していないので、複数の購読者を管理することができず、ただ1つの購読者に対して専属のObservableが必要になってしまいます。\u003cbr\u003e\n1つのObservableシーケンスを共有しない（つまり購読者が1つだけ）ならばColdのままで問題ないのですが、共有したい（つまり購読者が複数存在する）場合はHot変換が必要になる場合がある、というのはこのためです。\u003c/p\u003e\n\n\u003cp\u003eちなみに、Rxのオペレータやファクトリメソッドから出てくる\u003ccode\u003eIObservable\u003c/code\u003eは、そのほとんどが\u003ccode\u003eSubject\u003c/code\u003eを使っていません。そのため、普通にRxを使っている分には、ほとんどがColdな\u003ccode\u003eIObservable\u003c/code\u003eになります。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"まとめると\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%BE%E3%81%A8%E3%82%81%E3%82%8B%E3%81%A8\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eまとめると…\u003c/h2\u003e\n\n\u003cul\u003e\n\u003cli\u003e\n\u003cstrong\u003eHot Observable\u003c/strong\u003e\n\n\u003cul\u003e\n\u003cli\u003e購読先が\u003ccode\u003eSubject\u003c/code\u003eであるような\u003ccode\u003eIObservable\u003c/code\u003e\n\u003c/li\u003e\n\u003cli\u003e複数の購読者を管理可能\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eObservable:Observer = 1:多\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cstrong\u003eCold Observable\u003c/strong\u003e\n\n\u003cul\u003e\n\u003cli\u003e購読先が\u003ccode\u003eSubject\u003c/code\u003eではないような\u003ccode\u003eIObservable\u003c/code\u003e\n\u003c/li\u003e\n\u003cli\u003eただ1つの購読者しか管理できない\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eObservable:Observer = 1:1\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"observableソースのお話\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#observable%E3%82%BD%E3%83%BC%E3%82%B9%E3%81%AE%E3%81%8A%E8%A9%B1\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eObservableソースのお話\u003c/h1\u003e\n\n\u003cp\u003eこれで終わりではなく、大事な\u003cstrong\u003eObservableソース\u003c/strong\u003eについてのお話があります。\u003c/p\u003e\n\n\u003cp\u003eObservableソースとは、\u003cstrong\u003eObservableシーケンスに流れてくる値の「発生源」\u003c/strong\u003eです。\u003cbr\u003e\nそしてこのObservableソースにも\u003cstrong\u003eHot\u003c/strong\u003eと\u003cstrong\u003eCold\u003c/strong\u003eが存在し、この違いを認識していないと思わぬバグの原因となりますので、Rxを使う上では必ず理解する必要がある知識です。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"observableソースの例\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#observable%E3%82%BD%E3%83%BC%E3%82%B9%E3%81%AE%E4%BE%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eObservableソースの例\u003c/h2\u003e\n\n\u003cp\u003eObservableソースはObservableシーケンスに流れてくる値の発生源などと言われてもいまいちピンとこないと思いますので、例を紹介します。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"subjecttがobservableソース\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#subjectt%E3%81%8Cobservable%E3%82%BD%E3%83%BC%E3%82%B9\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003ccode\u003eSubject\u0026lt;T\u0026gt;\u003c/code\u003eがObservableソース\u003c/h3\u003e\n\n\u003cp\u003e\u003ccode\u003eSubject\u0026lt;T\u0026gt;\u003c/code\u003eクラスがObservableソースとなる例です。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\n\u003cspan class=\"n\"\u003eSubject\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003esubject\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eSubject\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;();\u003c/span\u003e\n\n\u003cspan class=\"n\"\u003esubject\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSubscribe\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003en\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"cm\"\u003e/*何らかの処理*/\u003c/span\u003e \u003cspan class=\"p\"\u003e});\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e//ここでSubjectにOnNextすることによってObservableシーケンスに値が乗る\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e//→SubjectがObservableソース\u003c/span\u003e\n\u003cspan class=\"n\"\u003esubject\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eOnNext\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"n\"\u003esubject\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eOnNext\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"n\"\u003esubject\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eOnNext\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e\u003ccode\u003eSubject\u003c/code\u003eに対して直接値を\u003ccode\u003eOnNext\u003c/code\u003eによって送出しています。この場合、Observableシーケンスを流れる値の発生源はこの\u003ccode\u003eOnNext\u003c/code\u003eにあるので、Observableソースは\u003ccode\u003eSubject\u003c/code\u003eであることが言えます。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"ファクトリメソッドがobservableソース\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%95%E3%82%A1%E3%82%AF%E3%83%88%E3%83%AA%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E3%81%8Cobservable%E3%82%BD%E3%83%BC%E3%82%B9\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eファクトリメソッドがObservableソース\u003c/h3\u003e\n\n\u003cp\u003e続いて、ファクトリメソッドがObservableソースとなる例です。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"c1\"\u003e//ファクトリメソッドから値が送出されている\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e//→ファクトリメソッドがObservableソース\u003c/span\u003e\n\u003cspan class=\"n\"\u003eObservable\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eRange\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"m\"\u003e10\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n          \u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSubscribe\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003en\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"cm\"\u003e/*何らかの処理*/\u003c/span\u003e \u003cspan class=\"p\"\u003e});\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eこの場合、\u003ccode\u003eObservable.Range\u003c/code\u003eからObservableシーケンスの値が送出されていることは言うまでもなく、Observableソースはこのファクトリメソッドということが分かります。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"observableソースのhotとcold\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#observable%E3%82%BD%E3%83%BC%E3%82%B9%E3%81%AEhot%E3%81%A8cold\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eObservableソースのHotとCold\u003c/h2\u003e\n\n\u003cp\u003eObservableソースにもHotとColdがあると書きました。\u003cbr\u003e\n察しが良い方は勘付くかもしれませんが、上の例で紹介した\u003cstrong\u003e\u003ccode\u003eSubject\u0026lt;T\u0026gt;\u003c/code\u003eがObservableソースのものがHot\u003c/strong\u003eで、\u003cstrong\u003eファクトリメソッドがObservableソースのものはCold\u003c/strong\u003eです。理由は、\u003ccode\u003eSubject\u0026lt;T\u0026gt;\u003c/code\u003eは複数の購読者を管理できるのでHot、ファクトリメソッドは\u003ccode\u003eSubject\u0026lt;T\u0026gt;\u003c/code\u003eを使っていない\u003csup id=\"fnref1\"\u003e\u003ca href=\"#fn1\" title=\"一部例外もあるようです。詳しくは@acple@githubさんのこちらの記事を参照ください。\"\u003e1\u003c/a\u003e\u003c/sup\u003eので複数の購読者を管理できずCold、ただそれだけです。\u003c/p\u003e\n\n\u003cp\u003eでは、ObservableソースのHotとColdが違うとどう影響してくるのかを説明します。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"hotなobservableソース\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#hot%E3%81%AAobservable%E3%82%BD%E3%83%BC%E3%82%B9\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eHotなObservableソース\u003c/h3\u003e\n\n\u003cp\u003eHotなObservableソースとは、\u003cstrong\u003e\u003ccode\u003eSubject\u0026lt;T\u0026gt;\u003c/code\u003eが発生源となるObservableソース\u003c/strong\u003eのことを指します。\u003c/p\u003e\n\n\u003cp\u003eHotなObservableソースには次のような特徴があります。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e何度\u003ccode\u003eSubscribe\u003c/code\u003eしても同一のObservableシーケンス\u003c/li\u003e\n\u003cli\u003eシーケンスの途中から\u003ccode\u003eSubscribe\u003c/code\u003eした人には途中からしか流れてこない\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/8dbb36de886264411817b56e5b9b4ef226becc21/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3639373833302f34373137653561362d356532622d643462662d626232322d6664613630396533306166352e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F697830%2F4717e5a6-5e2b-d4bf-bb22-fda609e30af5.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=e67aefee4827d511ac9211965dad47df\" alt=\"Hot Observableソース.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/697830/4717e5a6-5e2b-d4bf-bb22-fda609e30af5.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F697830%2F4717e5a6-5e2b-d4bf-bb22-fda609e30af5.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=3192b43fcda62fcc54501c5ebdf93b80 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eこれはまぁ、想像通りというか、詳しい説明はいらないと思います。\u003cbr\u003e\nところが、次のColdなObservableソースの場合、注意が必要です。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"coldなobservableソース\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#cold%E3%81%AAobservable%E3%82%BD%E3%83%BC%E3%82%B9\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eColdなObservableソース\u003c/h3\u003e\n\n\u003cp\u003eColdなObservableソースとは、HotではないすべてのObservableソースを指します。\u003cbr\u003e\nRxに用意されているファクトリメソッドから作られる\u003ccode\u003eIObservable\u003c/code\u003eは、そのほとんどが内部で\u003ccode\u003eSubject\u0026lt;T\u0026gt;\u003c/code\u003eを使用していないため、ColdなObservableソースとして動作します。\u003c/p\u003e\n\n\u003cp\u003eColdなObservableソースには次のような特徴があります。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e\u003ccode\u003eSubscribe\u003c/code\u003eするたびに新しいObservableシーケンス\u003c/strong\u003e\u003c/li\u003e\n\u003cli\u003e\n\u003cstrong\u003e購読者一人ひとりに対して専用のObservableシーケンス\u003c/strong\u003eなので、\u003cstrong\u003e途中からという概念が存在しない\u003c/strong\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eHotなObservableソースと決定的に違う点は、下図にように「\u003cstrong\u003e\u003ccode\u003eSubscribe\u003c/code\u003eするたびに新しいObservableシーケンスが生成される\u003c/strong\u003e」という点です。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/59d60a6e13aacd16a8e5dcc550461ad64216a08d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3639373833302f66306330366534382d613033312d333764352d616135342d3936663264646263663337652e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F697830%2Ff0c06e48-a031-37d5-aa54-96f2ddbcf37e.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=21822ca97dac523010df51a14a2c7d14\" alt=\"Cold Observableソース.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/697830/f0c06e48-a031-37d5-aa54-96f2ddbcf37e.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F697830%2Ff0c06e48-a031-37d5-aa54-96f2ddbcf37e.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=b4e78831d2419e5cc0896f9b5dbd3cfe 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eHotの場合と違って、ColdなObservableソースは\u003ccode\u003eSubscribe\u003c/code\u003eするたびに、新しくObservableシーケンスが生成されています。一体なぜこのような動作になるのでしょうか？\u003c/p\u003e\n\n\u003cp\u003e答えは、「\u003cstrong\u003e内部に\u003ccode\u003eSubject\u003c/code\u003eを使っていないから\u003c/strong\u003e」となります。\u003ccode\u003eSubject\u003c/code\u003eを使わないということは、購読者に対して「\u003cstrong\u003e直接\u003c/strong\u003e」値を発行することを意味します。ちょっと何を言っているのかわからないと思うので、コードで説明します。ここでは、\u003ccode\u003eObservable.Range\u003c/code\u003eファクトリメソッドの動作を簡易的に実装した独自の\u003ccode\u003eMyObservable.MyRange\u003c/code\u003eファクトリメソッドを作成してみました。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003estatic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eMyObservable\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003estatic\u003c/span\u003e \u003cspan class=\"n\"\u003eIObservable\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"nf\"\u003eMyRange\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003estart\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003eend\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eMyRange\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003estart\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eend\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eMyRange\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eIObservable\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003estart\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eend\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003eMyRange\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003estart\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003eend\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003estart\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003estart\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eend\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eend\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eIDisposable\u003c/span\u003e \u003cspan class=\"nf\"\u003eSubscribe\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eIObserver\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eobserver\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e//Subscribeしてくれた人に直接値を送出する\u003c/span\u003e\n        \u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003estart\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026lt;=\u003c/span\u003e \u003cspan class=\"n\"\u003eend\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e++)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eobserver\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eOnNext\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eobserver\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eOnCompleted\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eSubscription\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eSubscription\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eIDisposable\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eDispose\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"c1\"\u003e//SubscribeしたらすぐOnCompletedになるので何もしない\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e\u003ccode\u003eSubject\u003c/code\u003eを使わずに値を発行するには、\u003ccode\u003eSubscribe\u003c/code\u003eの引数に渡された\u003ccode\u003eIObserver\u003c/code\u003e（購読者）に対して\u003cstrong\u003e直接\u003ccode\u003eOnNext\u003c/code\u003eするしかない\u003c/strong\u003eのです。必然的に、このObservableシーケンスは、\u003cstrong\u003e購読してきた\u003ccode\u003eIObserver\u003c/code\u003e専用\u003c/strong\u003eとなってしまうのです。したがって、複数回\u003ccode\u003eSubscribe\u003c/code\u003eされれば、その分新しくObservableシーケンスを生成せざるを得なくなります。これが、上記の図の説明となります。\u003c/p\u003e\n\n\u003cp\u003eそして当然、このような仕様を理解していないと、想定とはまったく異なる動作をしてしまう危険性があります。例えば、以下のように1つの\u003ccode\u003eObservable.Interval\u003c/code\u003eを時間差で複数回\u003ccode\u003eSubscribe\u003c/code\u003eした場合。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"c1\"\u003e//0.1秒ごとに0,1,2,…とインクリメントする値を発行するColdなObservableソース\u003c/span\u003e\n\u003cspan class=\"n\"\u003eIObservable\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003elong\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eobservableTimer\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eObservable\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eInterval\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eTimeSpan\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eFromSeconds\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e0.1\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n\n\u003cspan class=\"n\"\u003eobservableTimer\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSubscribe\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003en\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eDebug\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eLog\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003en\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n\u003cspan class=\"k\"\u003eawait\u003c/span\u003e \u003cspan class=\"n\"\u003eTask\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eDelay\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e1000\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e \u003cspan class=\"c1\"\u003e//1秒差でColdなObservableソースを2回購読\u003c/span\u003e\n\u003cspan class=\"n\"\u003eobservableTimer\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSubscribe\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003en\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eDebug\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eLog\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003en\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e「同じ変数\u003ccode\u003eobservableTimer\u003c/code\u003eを2回\u003ccode\u003eSubscribe\u003c/code\u003eしてるんだから、Observableシーケンスは同じで、2個めの\u003ccode\u003eSubscribe\u003c/code\u003eには10,11,12,…って値が来るんでしょ」と思っていたら、\u003cstrong\u003e大間違い\u003c/strong\u003eです。\u003cbr\u003e\n\u003ccode\u003eObservable.Interval\u003c/code\u003eはColdなObservableソースなので、\u003ccode\u003eSubscribe\u003c/code\u003eするたびに新しく専用のObservableシーケンスが生成されるので、両方とも0,1,2,…と値が発行されます。\u003cbr\u003e\nもし、前者のような動作をしてほしい場合はHot変換という作業が必要になります。\u003c/p\u003e\n\n\u003cp\u003eこのように、ObservableソースのHot-Coldを意識することは非常に重要で、これらの違いを理解しないままRxを使い込むと、バグの原因となりますので十分に注意が必要です。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"まとめると-1\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%BE%E3%81%A8%E3%82%81%E3%82%8B%E3%81%A8-1\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eまとめると…\u003c/h2\u003e\n\n\u003cul\u003e\n\u003cli\u003e\n\u003ccode\u003eSubject\u003c/code\u003eから発生するObservableソースはHot\u003c/li\u003e\n\u003cli\u003eファクトリメソッドを始めとした、\u003ccode\u003eSubject\u003c/code\u003e以外から発生するObservableソースはCold\u003c/li\u003e\n\u003cli\u003eColdなObservableソースは、\u003ccode\u003eSubscribe\u003c/code\u003eするたびに新しく専用のObservableシーケンスが生成される\u003c/li\u003e\n\u003cli\u003e想定する動作に合わせて適切にHot変換が必要\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"さいごに\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%95%E3%81%84%E3%81%94%E3%81%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eさいごに\u003c/h1\u003e\n\n\u003cp\u003eこの記事では、\u003ccode\u003eIObservable\u003c/code\u003eのHot-ColdとObservableソースのHot-Coldを分けて記述しましたが、本質的には（おそらく）同じで、\u003ccode\u003eSubject\u003c/code\u003eを使っているか、使っていないか、それだけの違いになります。\u003cbr\u003e\nただその小さな違いが、大きな違い（バグ）を生み出す原因になるので、十分に注意してRxを使うことが必要です。\u003c/p\u003e\n\n\u003cp\u003eご意見ご指摘等ありましたら是非コメント宜しくお願いします！\u003c/p\u003e\n\n\u003cp\u003e[2021/4/2追記]\u003cbr\u003e\nHot変換の記事を書きましたので、ぜひこちらも参照ください！\u003c/p\u003e\n\n\u003cp\u003e\u003cqiita-embed-ogp src=\"https://qiita.com/yutorisan/items/68bd68bbffe3c4f3ba32\"\u003e\u003c/qiita-embed-ogp\u003e\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"参考記事\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%8F%82%E8%80%83%E8%A8%98%E4%BA%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e参考記事\u003c/h1\u003e\n\n\u003cp\u003e\u003cqiita-embed-ogp src=\"https://qiita.com/toRisouP/items/f6088963037bfda658d3\"\u003e\u003c/qiita-embed-ogp\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003cqiita-embed-ogp src=\"https://qiita.com/acple@github/items/8d3a4d3414fa59adff70\"\u003e\u003c/qiita-embed-ogp\u003e\u003c/p\u003e\n\n\u003cdiv class=\"footnotes\"\u003e\n\u003chr\u003e\n\u003col\u003e\n\n\u003cli id=\"fn1\"\u003e\n\u003cp\u003e一部例外もあるようです。詳しくは\u003ca href=\"/acple@github\" class=\"user-mention js-hovercard\" title=\"acple@github\" data-hovercard-target-type=\"user\" data-hovercard-target-name=\"acple@github\"\u003e@acple@github\u003c/a\u003eさんの\u003ca href=\"https://qiita.com/acple@github/items/8d3a4d3414fa59adff70\"\u003eこちらの記事\u003c/a\u003eを参照ください。 \u003ca href=\"#fnref1\"\u003e↩\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\n\u003c/ol\u003e\n\u003c/div\u003e\n","createdAt":"2021-03-24T11:29:10Z","elapsedYearsFromLastModifiedAt":0,"encryptedId":"Euf3uO2zbA2FyPjCrvesSPkZ6xtJBwYTsw==--f0vI9bzy1Zm2D1Pn--eYCsY+JJLyP1MEM8aNTywQ==","isBanned":false,"isDeprecated":false,"isDestroyableByViewer":false,"isEditRequestReadableByViewer":true,"isEditRequestSendableByViewer":true,"isLikableByViewer":true,"isLikedByViewer":false,"isPublic":true,"isSlide":false,"isStockableByViewer":true,"isStockedByViewer":false,"isSubscribableByViewer":false,"isSubscribedByViewer":false,"isUpdatableByViewer":false,"isUpdated":true,"lastModifiedAt":"2021-04-01T17:48:53Z","likesCount":11,"linkUrl":"https://qiita.com/yutorisan/items/844eaeab392abf03ce80","organization":null,"originalId":1411164,"stockedCount":6,"title":"【UniRx】IObservableのHotとColdを完全に理解する","toc":"\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB\"\u003eはじめに\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%81%9D%E3%81%AE%E5%89%8D%E3%81%ABsubjectt%E3%82%AF%E3%83%A9%E3%82%B9%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6\"\u003eその前にSubject\u0026lt;T\u0026gt;クラスについて\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E8%A4%87%E6%95%B0%E3%81%AE%E8%B3%BC%E8%AA%AD%E8%80%85%E3%82%92%E7%AE%A1%E7%90%86%E3%81%99%E3%82%8B%E6%A9%9F%E8%83%BD%E3%82%92%E6%8C%81%E3%81%A4\"\u003e複数の購読者を管理する機能を持つ\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#hot%E3%81%A8cold\"\u003eHotとCold\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#hot-observable%E3%81%A8%E3%81%AF\"\u003eHot Observableとは\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#hot-observable%E3%81%AFsubject\"\u003eHot Observableは「Subject」\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#cold-observable%E3%81%A8%E3%81%AF\"\u003eCold Observableとは\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%81%BE%E3%81%A8%E3%82%81%E3%82%8B%E3%81%A8\"\u003eまとめると…\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#observable%E3%82%BD%E3%83%BC%E3%82%B9%E3%81%AE%E3%81%8A%E8%A9%B1\"\u003eObservableソースのお話\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#observable%E3%82%BD%E3%83%BC%E3%82%B9%E3%81%AE%E4%BE%8B\"\u003eObservableソースの例\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#subjectt%E3%81%8Cobservable%E3%82%BD%E3%83%BC%E3%82%B9\"\u003eSubject\u0026lt;T\u0026gt;がObservableソース\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%95%E3%82%A1%E3%82%AF%E3%83%88%E3%83%AA%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E3%81%8Cobservable%E3%82%BD%E3%83%BC%E3%82%B9\"\u003eファクトリメソッドがObservableソース\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#observable%E3%82%BD%E3%83%BC%E3%82%B9%E3%81%AEhot%E3%81%A8cold\"\u003eObservableソースのHotとCold\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#hot%E3%81%AAobservable%E3%82%BD%E3%83%BC%E3%82%B9\"\u003eHotなObservableソース\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#cold%E3%81%AAobservable%E3%82%BD%E3%83%BC%E3%82%B9\"\u003eColdなObservableソース\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%81%BE%E3%81%A8%E3%82%81%E3%82%8B%E3%81%A8-1\"\u003eまとめると…\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%81%95%E3%81%84%E3%81%94%E3%81%AB\"\u003eさいごに\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%8F%82%E8%80%83%E8%A8%98%E4%BA%8B\"\u003e参考記事\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n","totalPv":2624,"uuid":"844eaeab392abf03ce80","banReason":null,"adventCalendarItem":null,"author":{"encryptedId":"2uvd2GJ7zcG2uqbhNY8W7qOqkLUv--Mo28NggWTWoXUfxi--afgd5eDs834co3ymRs4ewQ==","originalId":697830,"description":"C#が好きです","facebookUrl":null,"githubUrl":"https://github.com/yutorisan","isBlockingViewer":false,"isFollowableByViewer":true,"isFollowedByViewer":false,"isTweetWebNotificationReceivable":true,"linkedinUrl":null,"name":"","profileImageUrl":"https://pbs.twimg.com/profile_images/1274400166120812544/DAWcpHec_bigger.jpg","profileImageUrlW48":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fpbs.twimg.com%2Fprofile_images%2F1274400166120812544%2FDAWcpHec_bigger.jpg?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=48\u0026s=b517115d0e848c54aa4fe1fc93bfa0ff","profileImageUrlW75":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fpbs.twimg.com%2Fprofile_images%2F1274400166120812544%2FDAWcpHec_bigger.jpg?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=754be610f489085be0fdfc48de5585a9","urlName":"yutorisan","websiteUrl":"","twitterUrl":"https://twitter.com/yutorisan19","twitterUrlName":"yutorisan19","revealedOrganizations":{"edges":[{"node":{"encryptedId":"vcLcl2gF87B6GW6FjFDj/s9cRCekn5Yz9Qk=--QCO0kdTdUskv3XpY--SBDNaVmzsagysFhMf0+uPQ==","isBetaReleaseEnabled":false,"isFollowableByViewer":false,"isFollowedByViewer":false,"name":"Unityゲーム開発者ギルド","logoUrl":"https://s3-ap-northeast-1.amazonaws.com/qiita-organization-image/f7eb993765ddcdb2c5e6890556c43ea3de8fbfb7/original.jpg?1570215690","urlName":"unity-game-dev-guild","description":"趣味・仕事問わずUnityでゲームを作っている開発者のみで構成されるオンラインコミュニティです。Unityでゲームを開発・運用するにあたって必要なあらゆる知見を共有することを目的とします。","url":"https://unity-game-dev-guild.github.io/"}}]}},"tags":[{"name":"C#","urlName":"csharp"},{"name":"Unity","urlName":"unity"},{"name":"ReactiveExtensions","urlName":"reactiveextensions"},{"name":"UniRx","urlName":"unirx"}],"followingLikers":{"edges":[]},"comments":{"totalCount":0}},"comments":[],"client":null,"ads_event_emitter":null}}</script>
