More than 5 years have passed since last update.@Temarin_PITA さんの 何でもメソッドチェーンしたい を読んだらチェーンしたくなった。普段、メッセージボックスを表示してユーザーが押下したボタンに応じて処理をするときみたいな感じで書きます。 if 文で結果に応じて処理を分岐させるあれです。今回は MessageBox.Show() した結果を if 文の条件分岐を使わないでチェーンして処理できるようにします。MessageBox と似た感じで扱えるように実装しました。なので sealed class にして派生クラスの作成ができないようにしています。あと、コンストラクタをprivate にして、直接 new してインスタンス化できないようにしています。インスタンスを取得するときは Create() メソッドを呼びます。 今回は Create() を二つ用意しています。Create() したら OK() や Cancel() などでボタンに処理を割り当てて、最後に Show() メソッドを呼ぶとメッセージボックスが表示されます。まずは普通に部分適用の場合あと、async/await したり問題点は MessageBoxButton で選択されている内容に関わらず、すべてのボタンに処理を割り当てられちゃうとこでしょうか。気になる場合は MessageBoxButton のタイプごとに作成が必要ですね。


