<!DOCTYPE html><html><head><meta charset="utf-8" /><title>LINE の Bot 開発 超入門（前編） ゼロから応答ができるまで C# 編 - Qiita</title><meta content="width=device-width,initial-scale=1,shrink-to-fit=no,viewport-fit=cover" name="viewport" /><meta content="#55c500" name="theme-color" /><meta content="XWpkTG32-_C4joZoJ_UsmDUi-zaH-hcrjF6ZC_FoFbk" name="google-site-verification" /><meta content="telephone=no" name="format-detection" /><link rel="canonical" href="https://qiita.com/kenakamu/items/e0b194a82e4141b30c95" /><link href="/manifest.json" rel="manifest" /><link href="/opensearch.xml" rel="search" title="Qiita" type="application/opensearchdescription+xml" /><link as="script" href="https://www.googletagservices.com/tag/js/gpt.js" rel="preload" /><link href="https://securepubads.g.doubleclick.net" rel="preconnect" /><script async="" src="https://www.googletagservices.com/tag/js/gpt.js"></script><meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="8BIiorqZan7a7aWBp8S4H4HeZORXuZaow7N/5K6ZpoiZ03ix2j6vNjoIZGEW83aCB0APAN3SzjTp7BEnHbOWdQ==" /><link rel="shortcut icon" type="image/x-icon" href="https://cdn.qiita.com/assets/favicons/public/production-c620d3e403342b1022967ba5e3db1aaa.ico" /><link rel="apple-touch-icon" type="image/png" href="https://cdn.qiita.com/assets/favicons/public/apple-touch-icon-ec5ba42a24ae923f16825592efdc356f.png" /><link rel="stylesheet" media="all" href="https://cdn.qiita.com/assets/public/article-2eaa7dbedc42a8ea65c722cda46d0ebb.min.css" /><script src="https://cdn.qiita.com/assets/public/v3-article-bundle-63de2d91fef827269d3f6b958db2335b.min.js" defer="defer"></script><meta name="twitter:card" content="summary_large_image"><meta content="@Qiita" name="twitter:site" /><meta content="@kenakamu108" name="twitter:creator" /><meta property="og:type" content="article"><meta property="og:title" content="LINE の Bot 開発 超入門（前編） ゼロから応答ができるまで C# 編 - Qiita"><meta property="og:image" content="https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0&amp;w=1200&amp;mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND1URWxPUlNEamdhNGdRbTkwSU9tV2ktZVp1aURvdG9YbGhhWHBsb0R2dklqbGlZM250Nmp2dklrZzQ0Szg0NE90NDRHTDQ0S0o1Yi1jNTYyVTQ0R000NEduNDRHTjQ0S0w0NEctNDRHbklFTWpJT2UzcUEmdHh0LWNvbG9yPSUyMzMzMyZ0eHQtZm9udD1IaXJhZ2lubyUyMFNhbnMlMjBXNiZ0eHQtc2l6ZT01NCZ0eHQtY2xpcD1lbGxpcHNpcyZ0eHQtYWxpZ249Y2VudGVyJTJDbWlkZGxlJnM9NzE4MTM4MmEzMjNjYWY4NGY1NTA3ZGNjOTAwMzMyMGM&amp;mark-align=center%2Cmiddle&amp;blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RR3RsYm1GcllXMTEmdHh0LWNvbG9yPSUyMzMzMyZ0eHQtZm9udD1IaXJhZ2lubyUyMFNhbnMlMjBXNiZ0eHQtc2l6ZT00NSZ0eHQtYWxpZ249cmlnaHQlMkNib3R0b20mcz01OGYxNmIxNjQwMGM4NzkwNWFlMWZlNWE3MTFiYjdmMA&amp;blend-align=center%2Cmiddle&amp;blend-mode=normal&amp;s=e989939fc389561521d4d83246e10430"><meta property="og:description" content="LINE の Bot 開発 超入門（前編） ゼロから応答ができるまで C# 編
※Node.js 編はこちら


概要

この記事では LINE で動作する Bot を開発する方法をチュートリアル形式で記載しています。カバーする内容は..."><meta content="https://qiita.com/kenakamu/items/e0b194a82e4141b30c95" property="og:url" /><meta content="Qiita" property="og:site_name" /><meta content="564524038" property="fb:admins" /><meta content="C#,Line,bot,linebot,LINEmessagingAPI" name="keywords" /><script>!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window, document,'script',
'https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '668972150489891');
fbq('track', 'PageView');</script><style data-emotion-css="17jxvjw 11t2ec1 1dvr2p8 18lkoru 1g4cku8 1iupg5d ijvq0v 15cocm3 12rp90f 115f4t 1b8uj5v 79elbk 16hhh7b fcbn8c 1gj7nt 154zy0m yikrym 1jqivyb 1ode1bp le4d8r 1hbd3g7 1nzh4zz 38fzdi helsa7 8qb8m4 2imjyh he5w1s 70qvj9 3ojehk 100alwu 1dtnjt5 10ougpm 1ay9vb9 m19uds ne2zqn k008qs 1lbjcyg cgzq40 1wa99t2 1l3zk9f 4czcte 1yzj1fm 1uv1qiv 109dbrr 5jpx49 mnxgyc 1vlpknv fsjkhv 1b17vb0 7i7f4d"}>.css-17jxvjw{display:grid;display:-ms-grid;grid-template-columns:80px minmax(0,1fr) 300px;-ms-grid-columns:80px minmax(0,1fr) 300px;grid-template-rows:minmax(270px,auto) 1fr;-ms-grid-rows:minmax(270px,auto) 1fr;max-width:1280px;margin-right:auto;margin-left:auto;padding-top:24px;padding-right:24px;padding-left:24px;}@media (max-width:1200px){.css-17jxvjw{padding-bottom:0;padding-left:0;padding-right:0;}}@media (max-width:992px){.css-17jxvjw{grid-template-columns:80px 452px 300px;-ms-grid-columns:80px 452px 300px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}}@media (max-width:770px){.css-17jxvjw{display:block;}}@media (max-width:480px){.css-17jxvjw{padding-top:0;}}.css-11t2ec1{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;z-index:5;position:-webkit-sticky;position:sticky;top:calc(56px + 24px + 16px + 32px - 16px);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:16px;width:80px;}.css-11t2ec1:after{content:'';display:table;}.css-11t2ec1:before{content:'';display:table;}@media (max-width:770px){.css-11t2ec1{display:none;}}.css-1dvr2p8{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-18lkoru{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;background-color:#FFFFFF;}.css-1g4cku8{display:inline-block;vertical-align:middle;height:20px;width:20px;fill:#55C500;}.css-1iupg5d{color:#55C500;cursor:pointer;font-size:14px;font-weight:bold;}.css-ijvq0v{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-15cocm3{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#FFFFFF;border:2px solid #6E6F70;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:2px 0px 0px;width:40px;}.css-12rp90f{display:inline-block;vertical-align:bottom;height:17.77777777777778px;width:16px;fill:#6E6F70;}.css-115f4t{color:#6E6F70;font-size:14px;font-weight:bold;}.css-1b8uj5v{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;margin-bottom:16px;padding:0;}.css-79elbk{position:relative;}.css-16hhh7b{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;padding:0;}.css-fcbn8c{display:none;bottom:initial;left:initial;right:initial;top:initial;left:100%;top:calc(-8px - (14px * 1.8) - 16px - 4px);}.css-1gj7nt{color:rgba(0,0,0,0.6);font-size:14px;font-weight:bold;line-height:1.8;padding:8px 16px;}.css-154zy0m{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.87);cursor:pointer;font-size:16px;font-weight:normal;line-height:1.8;padding:4px 16px;}.css-154zy0m:hover{-webkit-text-decoration:none;text-decoration:none;background-color:#F2F2F2;}.css-yikrym{width:20px;}.css-1jqivyb{color:rgba(0,0,0,0.6);font-size:13px;}.css-1ode1bp{background-color:rgba(0,0,0,0.12);height:1px;width:100%;margin:8px 0;}.css-le4d8r{display:inline-block;vertical-align:middle;height:13px;width:13px;fill:rgba(0,0,0,0.6);}.css-1hbd3g7{height:250px;}.css-1nzh4zz{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:16px 32px;background-color:#FBE69E;color:rgba(0,0,0,0.87);line-height:1.5;font-weight:600;}@media (max-width:770px){.css-1nzh4zz{padding:16px;}}.css-38fzdi{color:#CA832A;margin-right:4px;}.css-helsa7{background-color:#FFFFFF;padding:32px;margin-bottom:24px;}@media (max-width:992px){.css-helsa7{margin:0 auto 40px;}}@media (max-width:480px){.css-helsa7{margin:0 0 40px;padding:32px 16px;}}.css-8qb8m4{margin-bottom:48px;}.css-2imjyh{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-he5w1s{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;width:100%;}@media (max-width:770px){.css-he5w1s{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}}.css-70qvj9{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.css-3ojehk{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;margin-right:4px;}.css-100alwu{display:inline-block;border-radius:50%;line-height:1;overflow:hidden;vertical-align:middle;}.css-1dtnjt5{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-10ougpm{color:rgba(0,0,0,0.87);font-size:14px;font-weight:600;line-height:1.8;margin-right:4px;text-wrap:break-word;word-break:break-all;}.css-1ay9vb9{margin-right:16px;}.css-m19uds{color:rgba(0,0,0,0.6);font-size:14px;line-height:1.8;}@media (max-width:770px){.css-ne2zqn{margin-top:4px;}}.css-k008qs{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}.css-1lbjcyg{box-shadow:0 0 0 1px rgba(0,0,0,0.12) inset;color:rgba(0,0,0,0.6);font-size:14px;font-weight:bold;line-height:180%;padding:0px 4px;}.css-cgzq40{color:rgba(0,0,0,0.87);font-size:32px;font-weight:bold;line-height:1.4;margin-top:8px;text-wrap:break-word;word-break:break-all;}.css-1wa99t2{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.6);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:8px;}.css-1l3zk9f{color:rgba(0,0,0,0.6);font-size:20px;margin-right:8px;}.css-4czcte{margin-right:4px;color:inherit;font-size:14px;line-height:1.8;}.css-4czcte:not(:last-child)::after{content:',';margin-right:4px;}.css-1yzj1fm{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:32px;}.css-1uv1qiv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-size:20px;height:32px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin-right:16px;outline:none;padding:0;width:32px;}.css-109dbrr{background-color:#F9F9F9;border-top:1px solid rgba(0,0,0,0.12);bottom:0;box-shadow:0px 1px 4px rgba(0,0,0,0.14);display:none;height:calc(env(safe-area-inset-bottom,0px) + 56px);-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding-bottom:env(safe-area-inset-bottom);position:-webkit-sticky;position:sticky;width:100%;z-index:2000;}@media (max-width:770px){.css-109dbrr{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}.css-5jpx49{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:space-evenly;-webkit-justify-content:space-evenly;-ms-flex-pack:space-evenly;justify-content:space-evenly;width:100%;}.css-mnxgyc{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1vlpknv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;margin-right:4px;background-color:#FFFFFF;}.css-fsjkhv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1b17vb0{color:#6E6F70;font-size:14px;font-weight:bold;margin-left:4px;}.css-7i7f4d{display:none;bottom:initial;left:initial;right:initial;top:initial;bottom:32px;right:0;}</style></head><body><div class="allWrapper"><div><div id="GlobalHeader-react-component-dfa450db-70c9-419b-9a29-8f1645389c52"><div class="st-Header"><div class="st-Header_container"><div class="st-Header_start"><a href="/" class="st-Header_logo"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 426.57 130"><circle cx="167.08" cy="21.4" r="12.28"></circle><path d="M250.81 29.66h23.48v18.9h-23.48z"></path><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z"></path><circle cx="216.33" cy="21.4" r="12.28"></circle></svg></a><div class="st-Header_communitySelector" tabindex="0"><span class="fa fa-caret-down"></span></div><div class="st-Header_dropdown"><div class="st-Header_dropdownHeading">Qiita Teams that are logged in</div><div class="st-Header_dropdownItemNote">You are not logged in to any team</div><hr class="st-Header_dropdownDivider st-Header_dropdownDivider-shrink"/><a href="https://teams-center.qiita.com/find_team" class="st-Header_dropdownItem"><span class="fa fa-fw fa-sign-in st-Header_dropdownItemIcon"></span><div>Log in to Qiita Team</div></a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Community</div><a href="/organizations" class="st-Header_dropdownItem">Organization</a><a href="/official-events/open" class="st-Header_dropdownItem">Event</a><a href="/advent-calendar" class="st-Header_dropdownItem">Advent Calendar</a><a href="https://qiitadon.com/" class="st-Header_dropdownItem" target="_blank">Qiitadon (β)</a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Service</div><a href="https://jobs.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Jobs</a><a href="https://zine.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Zine</a><a href="https://blog.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Blog</a></div><form class="st-Header_search" action="/search" method="get"><span class="fa fa-search st-Header_searchIcon"></span><input type="search" class="st-Header_searchInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form><form class="st-Header_searchModal" action="/search" method="get"><input type="text" class="st-Header_searchModalInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form></div><div class="st-Header_end"><div class="st-Header_searchButton"><span class="fa fa-search"></span></div><a class="st-Header_signupButton" href="/signup?redirect_to=%2Fkenakamu%2Fitems%2Fe0b194a82e4141b30c95">Signup</a><a class="st-Header_loginLink" href="/login?redirect_to=%2Fkenakamu%2Fitems%2Fe0b194a82e4141b30c95">Login</a></div><div class="st-Header_overlay"></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="GlobalHeader" data-dom-id="GlobalHeader-react-component-dfa450db-70c9-419b-9a29-8f1645389c52">{"unreadNotificationsCount":null,"realms":[{"humanName":"Qiita","isCurrentRealm":true,"isQiita":true,"isQiitaTeam":false,"loggedInUser":null,"teamId":null,"url":"https://qiita.com/"}],"teamFindUrl":"https://teams-center.qiita.com/find_team","isTeamOnlyUser":null,"currentUser":null}</script>
      
</div><div class="st-HeaderAlert st-HeaderAlert-warning"><div class="st-HeaderAlert_body"></div></div><script type="application/ld+json">{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"/","name":"Qiita"}},{"@type":"ListItem","position":2,"item":{"@id":"/tags/csharp","name":"C#"}}]}</script><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","datePublished":"2018-01-21T03:09:27.000+09:00","dateModified":"2018-02-23T20:03:08.000+09:00","headline":"LINE の Bot 開発 超入門（前編） ゼロから応答ができるまで C# 編","image":"https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0\u0026w=1200\u0026mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND1URWxPUlNEamdhNGdRbTkwSU9tV2ktZVp1aURvdG9YbGhhWHBsb0R2dklqbGlZM250Nmp2dklrZzQ0Szg0NE90NDRHTDQ0S0o1Yi1jNTYyVTQ0R000NEduNDRHTjQ0S0w0NEctNDRHbklFTWpJT2UzcUEmdHh0LWNvbG9yPSUyMzMzMyZ0eHQtZm9udD1IaXJhZ2lubyUyMFNhbnMlMjBXNiZ0eHQtc2l6ZT01NCZ0eHQtY2xpcD1lbGxpcHNpcyZ0eHQtYWxpZ249Y2VudGVyJTJDbWlkZGxlJnM9NzE4MTM4MmEzMjNjYWY4NGY1NTA3ZGNjOTAwMzMyMGM\u0026mark-align=center%2Cmiddle\u0026blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RR3RsYm1GcllXMTEmdHh0LWNvbG9yPSUyMzMzMyZ0eHQtZm9udD1IaXJhZ2lubyUyMFNhbnMlMjBXNiZ0eHQtc2l6ZT00NSZ0eHQtYWxpZ249cmlnaHQlMkNib3R0b20mcz01OGYxNmIxNjQwMGM4NzkwNWFlMWZlNWE3MTFiYjdmMA\u0026blend-align=center%2Cmiddle\u0026blend-mode=normal\u0026s=e989939fc389561521d4d83246e10430","mainEntityOfPage":"https://qiita.com/kenakamu/items/e0b194a82e4141b30c95","author":{"@type":"Person","address":"","email":null,"identifier":"kenakamu","name":"kenakamu","image":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Favatars2.githubusercontent.com%2Fu%2F9940668%3Fv%3D4?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=ba853bb83e6142e6ea6854e823ed9241","url":"https://qiita.com/kenakamu","description":"","memberOf":[{"@type":"Organization","address":"東京都港区港南 2-16-3 品川グランドセントラルタワー","legalName":"Microsoft","image":"https://s3-ap-northeast-1.amazonaws.com/qiita-organization-image/ea6419590e16b14d294eb89ade7dde2c63263c36/original.jpg?1583721865","logo":"https://s3-ap-northeast-1.amazonaws.com/qiita-organization-image/bae6d3a0828c019ff259cdb47a8988c98636389f/original.jpg?1583721865","identifier":"microsoft","description":"マイクロソフトのメンバーがMicrosoft Azureをはじめとする最新技術情報をお届けします。Twitterアカウント（@msdevjp）やYouTubeチャンネル「クラウドデベロッパーちゃんねる」も運用中です。"}]},"publisher":{"@type":"Organization","name":"Qiita","logo":{"@type":"ImageObject","url":"//cdn.qiita.com/assets/public/qiita-logo-c39ded593afa388e2e1ba435b110554e.png"}}}</script><style type="text/css">.wb-CampaignLink {
  background-color: #333333;
  width: 100%;
}

.wb-CampaignLink_container {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  max-width: 1100px;
  margin: 0 auto;
  font-size: 13px;
  padding: 0.8em;
}
.wb-CampaignLink_container > a {
  color: #fff;
}

.wb-CampaignLink_container > a:hover {
  text-decoration: underline;
}</style><div class="wb-CampaignLink"><div class="wb-CampaignLink_container"><a target="_blank" id="header_text_message_1" href="https://zine.qiita.com/interview/202105-uzabase/?utm_source=qiita&amp;utm_medium=header-banner">自己組織化されたユーザベースSaaS Product Teamが面白い理由</a><a target="_blank" id="header_text_message_2" href="https://zine.qiita.com/interview/202105-uzabase/?utm_source=qiita&amp;utm_medium=header-banner">詳しくはこちら</a></div><script>td.trackEvent(
  'front_events',
  {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"kenakamu","type":"items","id":"e0b194a82e4141b30c95"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Show","data":{"message":"自己組織化されたユーザベースSaaS Product Teamが面白い理由","url":"https://zine.qiita.com/interview/202105-uzabase/?utm_source=qiita\u0026utm_medium=header-banner","sub_message":"詳しくはこちら"}}
)</script><script>document.getElementById('header_text_message_1').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"kenakamu","type":"items","id":"e0b194a82e4141b30c95"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":0,"pos_id":"header_text_message_1","message":"自己組織化されたユーザベースSaaS Product Teamが面白い理由","url":"https://zine.qiita.com/interview/202105-uzabase/?utm_source=qiita\u0026utm_medium=header-banner","sub_message":"詳しくはこちら"}}
  )
})</script><script>document.getElementById('header_text_message_2').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"kenakamu","type":"items","id":"e0b194a82e4141b30c95"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":0,"pos_id":"header_text_message_2","message":"自己組織化されたユーザベースSaaS Product Teamが面白い理由","url":"https://zine.qiita.com/interview/202105-uzabase/?utm_source=qiita\u0026utm_medium=header-banner","sub_message":"詳しくはこちら"}}
  )
})</script></div><script type="application/json" id="js-react-on-rails-context">{"railsEnv":"production","inMailer":false,"i18nLocale":"en","i18nDefaultLocale":"en","href":"https://qiita.com/kenakamu/items/e0b194a82e4141b30c95","location":"/kenakamu/items/e0b194a82e4141b30c95","scheme":"https","host":"qiita.com","port":null,"pathname":"/kenakamu/items/e0b194a82e4141b30c95","search":null,"httpAcceptLanguage":null,"actionPath":"public/items#show","settings":{"analyticsTrackingId":"UA-24675221-12","assetsMap":{},"csrfToken":"JyrISMcHQQfOqdgCahX+uhG3SEAml74zX4O9W4nle9lO65Jbp6CETy5MGeLbIjAnlykjpKz85q913NOYOs9LJA==","locale":"en"},"currentUser":null,"isLoggedIn":false,"recaptchaSiteKey":"6LfNkiQTAAAAAM3UGnSquBy2akTITGNMO_QDxMw6","serverSide":false}</script>
<div id="PersonalArticlePage-react-component-609c0846-4036-498e-8eb8-92ed3572ee23"><div class="p-items_wrapper"><div class=" css-17jxvjw"><div class="css-11t2ec1"><div class="css-1dvr2p8"><button class=" css-18lkoru"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/kenakamu/items/e0b194a82e4141b30c95/likers" class="css-1iupg5d">57</a></div><div class="css-ijvq0v"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-115f4t">62</span></div><div class="css-1b8uj5v"><span class="fa fa-twitter"></span></div><div class="css-1b8uj5v"><span class="fa fa-facebook"></span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-fcbn8c"><div class="css-1gj7nt">Improve article</div><a href="/drafts/e0b194a82e4141b30c95/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/kenakamu/items/e0b194a82e4141b30c95/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/kenakamu/items/e0b194a82e4141b30c95/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/kenakamu/items/e0b194a82e4141b30c95/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/kenakamu/items/e0b194a82e4141b30c95.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div><div class="p-items_options"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_toc"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_main"><div class="css-1nzh4zz"><span class="fa fa-fw fa-warning css-38fzdi"></span><p>More than 3 years have passed since last update.</p></div><div class="css-helsa7"><div class="css-8qb8m4"><div class="css-2imjyh"><div class="css-he5w1s"><div class="css-70qvj9"><div class="css-3ojehk"><a href="/kenakamu"><img class="css-100alwu eyfquo10" src="https://avatars2.githubusercontent.com/u/9940668?v=4" width="24" height="24" loading="lazy"/></a></div><div class="css-1dtnjt5"><a href="/kenakamu" class="css-10ougpm">@<!-- -->kenakamu</a><a href="/organizations/microsoft" class="css-10ougpm">(<!-- -->Microsoft<!-- -->)</a><div class="css-1ay9vb9"><span><meta content="2018-01-20T18:09:27Z"/><time dateTime="2018-02-23T11:03:08Z" class="css-m19uds">updated at 2018-02-23</time></span></div></div></div><div class="css-ne2zqn"><div class="css-k008qs"><div class="css-1lbjcyg">Organization</div></div></div></div></div><h1 class="css-cgzq40">LINE の Bot 開発 超入門（前編） ゼロから応答ができるまで C# 編</h1><div class="css-1wa99t2"><span class="fa fa-tags mr-1of2 css-1l3zk9f" aria-hidden="true"></span><a href="/tags/csharp" class="css-4czcte">C#</a><a href="/tags/line" class="css-4czcte">Line</a><a href="/tags/bot" class="css-4czcte">bot</a><a href="/tags/linebot" class="css-4czcte">linebot</a><a href="/tags/linemessagingapi" class="css-4czcte">LINEmessagingAPI</a></div></div><section class="it-MdContent"><div id="personal-public-article-body"><div><p>LINE の Bot 開発 超入門（前編） ゼロから応答ができるまで C# 編<br>
※Node.js 編は<a href="https://qiita.com/nkjm/items/38808bbc97d6927837cd" id="reference-b01c3436b68eba1224ef">こちら</a></p>

<h1>
<span id="概要" class="fragment"></span><a href="#%E6%A6%82%E8%A6%81"><i class="fa fa-link"></i></a>概要</h1>

<p>この記事では LINE で動作する Bot を開発する方法をチュートリアル形式で記載しています。カバーする内容は、「寿司の出前を受付する Bot」を開発するというもので、LINE 側での必要な設定、Bot 本体の開発とクラウド環境へのデプロイ、そして自然言語解析を組み込んでユーザーの意図を特定する機能など Bot に共通して求められる基本的な動作を含みます。今回の Bot 本体は C# と ASP.NET Core で作っていきます。</p>

<h1>
<span id="必要なスキルと環境" class="fragment"></span><a href="#%E5%BF%85%E8%A6%81%E3%81%AA%E3%82%B9%E3%82%AD%E3%83%AB%E3%81%A8%E7%92%B0%E5%A2%83"><i class="fa fa-link"></i></a>必要なスキルと環境</h1>

<ul>
<li>C# と ASP.NET Core の基本的な知識</li>
<li>
<a href="https://code.visualstudio.com/" rel="nofollow noopener" target="_blank">Visual Studio Code</a> の基本的な操作方法</li>
<li>dotnet core SDK <a href="https://www.microsoft.com/net/learn/get-started/windows" rel="nofollow noopener" target="_blank">Windows</a>/<a href="https://www.microsoft.com/net/learn/get-started/linuxredhat" rel="nofollow noopener" target="_blank">Linux</a>/<a href="https://www.microsoft.com/net/learn/get-started/macos" rel="nofollow noopener" target="_blank">Mac</a>
</li>
<li><a href="https://azure.microsoft.com/ja-jp/free/" rel="nofollow noopener" target="_blank">Azure サブスクリプション</a></li>
<li>
<a href="https://docs.microsoft.com/en-us/cli/azure/install-azure-cli?view=azure-cli-latest" rel="nofollow noopener" target="_blank">Azure CLI</a> </li>
<li>
<a href="https://nodejs.org/ja/download/" rel="nofollow noopener" target="_blank">Node.js</a>: ソリューションテンプレートとシミュレーター用</li>
<li><a href="https://git-scm.com/download" rel="nofollow noopener" target="_blank">git</a></li>
</ul>

<h1>
<span id="開発の流れ" class="fragment"></span><a href="#%E9%96%8B%E7%99%BA%E3%81%AE%E6%B5%81%E3%82%8C"><i class="fa fa-link"></i></a>開発の流れ</h1>

<ul>
<li>まず最初に LINE Bot のアカウントを作成します。この作業は LINE Developers コンソールという Web サイトで「Channel」を作成するという作業になります。 <em>＊以後 Bot のアカウントのことを Channel と呼びます。</em>
</li>
<li>次に Bot 本体のプログラムを開発し、クラウド上の実行環境へデプロイします。これで Bot 自体は稼働している状態になります。</li>
<li>そして Bot の Channel の設定で Webhook を設定し、Bot に送信されたメッセージなどを含むイベントが Bot のインスタンスに転送されるようにします。</li>
<li>残りの開発はシミュレーターを利用したローカル環境で行います。</li>
<li>最後に完成した Bot 本体のプログラムをクラウドにデプロイします。</li>
</ul>

<h1>
<span id="手順" class="fragment"></span><a href="#%E6%89%8B%E9%A0%86"><i class="fa fa-link"></i></a>手順</h1>

<h2>
<span id="channel-を作成する" class="fragment"></span><a href="#channel-%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>Channel を作成する</h2>

<p>1. <a href="https://developers.line.me/ja/" rel="nofollow noopener" target="_blank">LINE Developer コンソール</a>にアクセスし、ログインボタンをクリックして自身の LINE アカウントでログインします。<br>
<a href="https://camo.qiitausercontent.com/2774f1688682b2f0a53e7f5a734d767e904a22d8/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f32363037392f38363966373264642d643438352d643865622d656336632d3038666336643630613433382e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F26079%2F869f72dd-d485-d8eb-ec6c-08fc6d60a438.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=eb9decdaea3235e853989913a8af1acc" alt="login.png" title="login.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/26079/869f72dd-d485-d8eb-ec6c-08fc6d60a438.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F26079%2F869f72dd-d485-d8eb-ec6c-08fc6d60a438.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=5d07401da0bed7938a32e4fd43659ef4 1x" loading="lazy"></a></p>

<p>2. はじめてログインしたときには開発者登録を求められますので必要事項を入力してください。<br>
<a href="https://camo.qiitausercontent.com/68d65fb1c134d74067ab322311a808bf5ac73712/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f32363037392f62373866366361662d373330322d633537332d383636322d3835383962353862393463362e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F26079%2Fb78f6caf-7302-c573-8662-8589b58b94c6.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=19dfe4367ff9314fc14ba1683dd7b7ea" alt="first login.png" title="first login.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/26079/b78f6caf-7302-c573-8662-8589b58b94c6.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F26079%2Fb78f6caf-7302-c573-8662-8589b58b94c6.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=9ad84bde74205bde602952946eeed5b6 1x" loading="lazy"></a></p>

<p>3. 「はじめる」をクリックして次のスクリーンに移ります。<br>
<a href="https://camo.qiitausercontent.com/a46e1ff3ad5de093e2f8e9bd0c7f0438387e2959/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f32363037392f61316437626235652d373763362d326539332d666338652d3235656666353064313336632e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F26079%2Fa1d7bb5e-77c6-2e93-fc8e-25eff50d136c.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=d1e440470bcebf983d4896fcf6358878" alt="get_started.png" title="get_started.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/26079/a1d7bb5e-77c6-2e93-fc8e-25eff50d136c.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F26079%2Fa1d7bb5e-77c6-2e93-fc8e-25eff50d136c.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=ab67bd11a70b6900c4e3ea8300cc4bb0 1x" loading="lazy"></a></p>

<p>4. 次にプロバイダーを作成します。プロバイダーとはこれから作成する Bot の提供元として表示される情報です。<br>
<a href="https://camo.qiitausercontent.com/cc6951ac41cd0ef019f33a26c88648420723e1ed/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f32363037392f61366133616166642d353532632d386261312d663463302d3037383333343934333734312e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F26079%2Fa6a3aafd-552c-8ba1-f4c0-078334943741.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=f5c8e21f384dbe229ff487c2e0d022a3" alt="welcome_to_console.png" title="welcome_to_console.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/26079/a6a3aafd-552c-8ba1-f4c0-078334943741.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F26079%2Fa6a3aafd-552c-8ba1-f4c0-078334943741.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=6294d338c0ba533ea69290e2addf7057 1x" loading="lazy"></a></p>

<p>5. 必要情報を入力して進んでください。<br>
<a href="https://camo.qiitausercontent.com/32eb14cda48991722f060b0322ae224effb61700/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f32363037392f31376330336239642d393534632d316331632d646638372d3966313438326461633931342e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F26079%2F17c03b9d-954c-1c1c-df87-9f1482dac914.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=c2ab0e0e11a134266a89959cb5b28aaf" alt="new provider.png" title="new provider.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/26079/17c03b9d-954c-1c1c-df87-9f1482dac914.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F26079%2F17c03b9d-954c-1c1c-df87-9f1482dac914.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=78438e90218c3500c8983b11cd9e575a 1x" loading="lazy"></a></p>

<p>6. 次に Channel を作成します。Channel には LINE ログインと Messaging API の 2 つが存在します。今回作成するのは Bot なので Messaging API を選択してください。<br>
<a href="https://camo.qiitausercontent.com/2a51962fc3499e2bb4035b403126ee70b3be8370/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f32363037392f35303462633763372d306466372d666539322d353961352d3533313663613838363165632e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F26079%2F504bc7c7-0df7-fe92-59a5-5316ca8861ec.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=cd24ef9761a8a171292c8a83f7ba73dd" alt="new_provider_created.png" title="new_provider_created.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/26079/504bc7c7-0df7-fe92-59a5-5316ca8861ec.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F26079%2F504bc7c7-0df7-fe92-59a5-5316ca8861ec.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=5a607186ca2f76c8b797c0f5b7eac282 1x" loading="lazy"></a></p>

<p>7. こちらの画面で必要情報を入力していきます。<br>
<a href="https://camo.qiitausercontent.com/b90e6391601cbe9b660e6c714828312770cb2a4f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f32363037392f33333865303330612d303664622d653464382d326131642d3232643937336534623464352e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F26079%2F338e030a-06db-e4d8-2a1d-22d973e4b4d5.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=57d533dbdb42baa496634295d60bb4cf" alt="new channel.png" title="new channel.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/26079/338e030a-06db-e4d8-2a1d-22d973e4b4d5.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F26079%2F338e030a-06db-e4d8-2a1d-22d973e4b4d5.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=2a6b0dc2e67d731641cb54f5f44f5706 1x" loading="lazy"></a><br>
    - アプリ名: <strong>任意のアプリ名</strong><br>
    - アプリ説明: <strong>任意のアプリ説明</strong><br>
    - プラン: <strong>Developer Trial</strong><br>
    - 大業種: <strong>飲食店・レストラン</strong><br>
    - 小業種: <strong>すし</strong><br>
    - メールアドレス: <strong>ご自身のメールアドレス</strong></p>

<p>8. これで Channel が作成されますが、まだもう少し設定が必要です。「設定が完了していません」をクリックします。<br>
<a href="https://camo.qiitausercontent.com/1d15309af3314d05d04a093bc9740ab0180592a5/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f32363037392f38303638336562642d643635302d643534342d663763392d6466303966633930333239392e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F26079%2F80683ebd-d650-d544-f7c9-df09fc903299.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=51117496c4167acdf3cd72223654c469" alt="configure_channel.png" title="configure_channel.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/26079/80683ebd-d650-d544-f7c9-df09fc903299.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F26079%2F80683ebd-d650-d544-f7c9-df09fc903299.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=65e005fe2a25cc2755ea7a9b25dca64c 1x" loading="lazy"></a></p>

<p>9. メッセージ送受信設定のセクションにあるアクセストークンの「再発行」ボタンをクリックします。<br>
<a href="https://camo.qiitausercontent.com/383a839bc51fc99321f4b02ecd92939061c534f1/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f32363037392f62383438363033642d653766322d613565332d363036612d3231346261373034323063392e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F26079%2Fb848603d-e7f2-a5e3-606a-214ba70420c9.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=2c6dedeb8b9fa6ba146eaec559dad659" alt="issue_channel_access_token.png" title="issue_channel_access_token.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/26079/b848603d-e7f2-a5e3-606a-214ba70420c9.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F26079%2Fb848603d-e7f2-a5e3-606a-214ba70420c9.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=1164f9b82b8741cc5161da3fac2cf6e0 1x" loading="lazy"></a></p>

<p>10. 失効までの時間を 0 時間にしてそのまま再発行をクリックします。0 時間にすることでトークンが失効しません。<br>
<a href="https://camo.qiitausercontent.com/c84426863e48f32c679d82eb8f7936b6cdb005a5/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f32363037392f61313931666235302d346261312d383265352d343264372d6636393061366165613637652e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F26079%2Fa191fb50-4ba1-82e5-42d7-f690a6aea67e.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=c5ea7489f4a7c3ed57a84a81bd6c075a" alt="reissue.png" title="reissue.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/26079/a191fb50-4ba1-82e5-42d7-f690a6aea67e.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F26079%2Fa191fb50-4ba1-82e5-42d7-f690a6aea67e.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=9e338df87cbdad61a068b4ab3f8aaf24 1x" loading="lazy"></a></p>

<p>11. これでアクセストークンが発行されます。このトークンは Messaging API の呼び出し時に認証情報として必要になります。あと残りの項目を下記の通り設定します。</p>

<p><strong>メッセージ送受信設定</strong></p>

<ul>
<li>Webhook 送信: <strong>利用する</strong>
</li>
</ul>

<p><strong>LINE@ 機能の利用</strong></p>

<ul>
<li>自動応答メッセージ: <strong>利用しない</strong>
</li>
<li>友達追加時あいさつ: <strong>利用しない</strong>
</li>
</ul>

<p>これで Channel の設定は<strong>ほぼ</strong>完了です。Bot 本体をクラウドにデプロイしてからWebhook URL の設定を後ほどおこないます。<br>
また、Bot 本体の開発で Channel Secret とアクセストークンが必要になりますのでこのページは開いたまま、次のステッップへ進みます。</p>

<h2>
<span id="ソリューションテンプレートとシミュレーターのダウンロード" class="fragment"></span><a href="#%E3%82%BD%E3%83%AA%E3%83%A5%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%83%86%E3%83%B3%E3%83%97%E3%83%AC%E3%83%BC%E3%83%88%E3%81%A8%E3%82%B7%E3%83%9F%E3%83%A5%E3%83%AC%E3%83%BC%E3%82%BF%E3%83%BC%E3%81%AE%E3%83%80%E3%82%A6%E3%83%B3%E3%83%AD%E3%83%BC%E3%83%89"><i class="fa fa-link"></i></a>ソリューションテンプレートとシミュレーターのダウンロード</h2>

<p>yeoman を使ったソリューションテンプレートと LINE Bot シミュレーターを npm に公開してます。以下の手順で必要な npm パッケージを取得します。</p>

<p>Windows の場合</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>npm install -g yo
npm install -g generator-line-bot
npm install -g line-simulator
</code></pre></div></div>

<p>Mac の場合</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>sudo npm install -g yo
sudo npm install -g generator-line-bot
sudo npm install -g line-simulator
</code></pre></div></div>

<h2>
<span id="azure-環境の準備" class="fragment"></span><a href="#azure-%E7%92%B0%E5%A2%83%E3%81%AE%E6%BA%96%E5%82%99"><i class="fa fa-link"></i></a>Azure 環境の準備</h2>

<p>Azure ポータルを使い慣れている場合はポータルからの操作でもいいですが、今回は Azure CLI を使って見ます。</p>

<p>1. まだインストールしていない場合は、<a href="https://docs.microsoft.com/en-us/cli/azure/install-azure-cli?view=azure-cli-latest" rel="nofollow noopener" target="_blank">Azure CLI</a> をインストールします。</p>

<p>2. 以下のコマンドでログインを実行します。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>az login
</code></pre></div></div>

<p>3. 画面の指示に順ってログインを完了します。</p>

<p>4. ログイン完了後、複数の Azure サブスクリプションがある場合は、以下のコマンドで使うサブスクリプションをセットします。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>az account list
az account set -s 'subscription id'
az account show
</code></pre></div></div>

<p>5. まず以下のコマンドでリソースグループを linebotsample の名前、地域を東日本で作成します。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>az group create -n linebotsample -l japaneast
</code></pre></div></div>

<p>6. 次にストレージアカウントを作成します。名前はグローバルで一意になるようにしてください。以下では linebotstorage の名前作成しています。このストレージにはボットのステータスを保存します。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>az storage account create -n linebotstorage -g linebotsample --sku Standard_LRS
</code></pre></div></div>

<p>7. 作成したストレージに接続するための接続文字列を取得します。結果を保存しておいてください。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>az storage account show-connection-string -n linebotstorage -g linebotsample
</code></pre></div></div>

<p>8. 次に開発したボットのデプロイ先となる WebApps を作成します。WebApp 作成時には、まずサービスプランを作成し、WebApp を作成します。また名前は一意になるようにしてください。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>az appservice plan create -n linebotappplan -g linebotsample --sku F1
az webapp create -n kenakamulinebot -g linebotsample -p linebotappplan
</code></pre></div></div>

<p>9. その後 git デプロイの指定をします。戻り値がデプロイ先となるので保存しておいてください。ユーザー名とパスワードは適宜変更します。パスワードはデブロイ時に必要です。尚、このユーザーはサブスクリプション内のアプリで共通となるので、これまでに設定したことがある場合は、1 つ目のコマンドはスキップしてください。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>az webapp deployment user set --user-name kenakamu --password Pa$$w0rd
az webapp deployment source config-local-git -n kenakamulinebot -g linebotsample
</code></pre></div></div>

<h2>
<span id="bot本体c-のプログラムを開発する" class="fragment"></span><a href="#bot%E6%9C%AC%E4%BD%93c-%E3%81%AE%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%A0%E3%82%92%E9%96%8B%E7%99%BA%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>Bot本体（C# のプログラム）を開発する</h2>

<p>準備が整ったところで、ボットを開発していきます。</p>

<p>1. コマンドプロンプトやターミナルでデスクトップ等任意の場所に移動します。</p>

<p>2. 以下のコマンドで C# WebAPI 用のテンプレートを展開します。実行時に LINE ボットのチャネルシークレット、チャネルトークン、また Azure ストレージアカウントの接続文字列を聞かれるので、それぞれ入力します。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>yo line-bot sushibot --csharp --webapi
</code></pre></div></div>

<p>3. 作成されたフォルダに移動します。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>cd sushibot
</code></pre></div></div>

<h2>
<span id="bot本体を-azure-webapp-に展開する" class="fragment"></span><a href="#bot%E6%9C%AC%E4%BD%93%E3%82%92-azure-webapp-%E3%81%AB%E5%B1%95%E9%96%8B%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>Bot本体を Azure WebApp に展開する</h2>

<p>1. 今回は git で展開するため、まずレポジトリを初期化します。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>git init
</code></pre></div></div>

<p>2. 次に発行先を設定します。アドレスは WebApp 作成時に取得したものを使います。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>git remote add origin https://kenakamu@kenakamulinebot.scm.azurewebsites.net/kenakamulinebot.git
</code></pre></div></div>

<p>3. Visual Studio Code を開きます。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>code . --locale=ja
</code></pre></div></div>

<p>4. 新規ファイルより、ルートに .gitignoreファイルを作成し、git の管理対象外にしたいファイルを一行一ファイルで列挙します。</p>

<div class="code-frame" data-lang="text">
<div class="code-lang"><span class="bold">.gitignore</span></div>
<div class="highlight"><pre class="with-code"><code>.vscode
bin
debug
</code></pre></div>
</div>

<p>5. ターミナルまたはコマンドプロンプトに戻り、以下コマンドでコミットを行います。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>git add .
git commit -m "初回コミット"
</code></pre></div></div>

<p>6. 以下のコマンドでデプロイします。パスワードを聞かれるので、設定したものを入力します。初回は少し時間がかかります。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>git push -u origin master
</code></pre></div></div>

<h2>
<span id="webhookを設定する" class="fragment"></span><a href="#webhook%E3%82%92%E8%A8%AD%E5%AE%9A%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>Webhookを設定する</h2>

<p>Webhook は LINE で Bot に関連するイベントが発生した場合に、そのイベントを Bot インスタンスに通知してもらうためのアクセスポイント（URL）です。</p>

<p>この URL は開発者が指定することができ、その URL に対して LINE から POST リクエストが送信されることになります。今回は下記の URLを Webhook として設定します。</p>

<p>https://自分のwebapp名.azurewebsites.net/api/linebot</p>

<p>LINE Developers コンソールでWebhook URLを下記の通り設定します。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>https://自分のwebapp名.azurewebsites.net/api/linebot
</code></pre></div></div>

<p>ここで Bot を友達に追加しておきましょう。スマホで LINE を起動し、LINE Developers コンソールのチャネルにある QR コードをスキャンして追加します。iOS 版の場合は下記のような手順になります。</p>

<p><a href="https://camo.qiitausercontent.com/b1ebaa62417d0de98892649a65d3e457506c485e/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f32363037392f32623064336337662d653965632d653437662d616464342d6531666662306533393639322e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F26079%2F2b0d3c7f-e9ec-e47f-add4-e1ffb0e39692.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=75fc5ffdcbad3de13878839b0e5310b0" alt="IMG_0027.png" title="IMG_0027.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/26079/2b0d3c7f-e9ec-e47f-add4-e1ffb0e39692.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F26079%2F2b0d3c7f-e9ec-e47f-add4-e1ffb0e39692.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=57e2ac2748a15d53fd07fba644d924f8 1x" loading="lazy"></a> <a href="https://camo.qiitausercontent.com/3e2c07d5f41774d7da39a9c942c12e83f2d6cb46/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f32363037392f30343938343465662d373237312d323531662d653931612d3161393866613666303962382e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F26079%2F049844ef-7271-251f-e91a-1a98fa6f09b8.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=b65276888446a8464ae201362e251c15" alt="IMG_0028.png" title="IMG_0028.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/26079/049844ef-7271-251f-e91a-1a98fa6f09b8.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F26079%2F049844ef-7271-251f-e91a-1a98fa6f09b8.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=2bd278657f1f520b764b4640c53cd730 1x" loading="lazy"></a></p>

<p>任意のメッセージを送ってみてください。返信があれば無事に繋がっています。</p>

<h2>
<span id="kudu" class="fragment"></span><a href="#kudu"><i class="fa fa-link"></i></a>Kudu</h2>

<p>デプロイ済みのサーバー情報は、Kudu というツールで確認ができます。</p>

<p>1. デプロイ先 git アドレスのホスト URL にブラウザでアクセスします。トップページに環境の概要があります。<br>
例) <a href="https://kenakamulinebot.scm.azurewebsites.net" class="autolink" rel="nofollow noopener" target="_blank">https://kenakamulinebot.scm.azurewebsites.net</a></p>

<p>2. 上部メニューより Debug console をクリックし、CMD または PowerShell を選択します。 </p>

<p>3. site -&gt; wwwroot 内に展開済みファイルが確認できます。また LogFiles 配下にはさまざまなログがあります。詳しく紹介しているので</p>

<p>Kudu については<a href="https://buchizo.wordpress.com/2013/12/22/windows-azure-web-sites%E3%81%AE%E9%AD%85%E5%8A%9B%E3%82%92120%E5%BC%95%E3%81%8D%E5%87%BA%E3%81%99/" rel="nofollow noopener" target="_blank">こちらのブログ</a> で詳細が紹介されているので是非ご覧ください。</p>

<h2>
<span id="メッセージの返信" class="fragment"></span><a href="#%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%81%AE%E8%BF%94%E4%BF%A1"><i class="fa fa-link"></i></a>メッセージの返信</h2>

<p>それでは、ユーザーが Bot に「こんにちは」とテキストメッセージを送ってきたら「これはこれは」と返信するようにしてみます。</p>

<p>1. Visual Studio Code で LineBotApp.cs を開きます。このテンプレートは様々なサンプルを含んでいるため、いかのコードと差し替えてシンプルにします。ユーザーから送られてきたテキストは HandleTextAsync メソッドで返信を作って返しています。</p>

<div class="code-frame" data-lang="c#">
<div class="code-lang"><span class="bold">LineBotApp.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">using</span> <span class="nn">Line.Messaging</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Line.Messaging.Webhooks</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.IO</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Linq</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Threading.Tasks</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">sushibot.CloudStorage</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">sushibot.Models</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">sushibot</span>
<span class="p">{</span>
    <span class="k">internal</span> <span class="k">class</span> <span class="nc">LineBotApp</span> <span class="p">:</span> <span class="n">WebhookApplication</span>
    <span class="p">{</span>
        <span class="k">private</span> <span class="n">LineMessagingClient</span> <span class="n">messagingClient</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>
        <span class="k">private</span> <span class="n">TableStorage</span><span class="p">&lt;</span><span class="n">EventSourceState</span><span class="p">&gt;</span> <span class="n">sourceState</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>
        <span class="k">private</span> <span class="n">BlobStorage</span> <span class="n">blobStorage</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>

        <span class="k">public</span> <span class="nf">LineBotApp</span><span class="p">(</span><span class="n">LineMessagingClient</span> <span class="n">lineMessagingClient</span><span class="p">,</span> <span class="n">TableStorage</span><span class="p">&lt;</span><span class="n">EventSourceState</span><span class="p">&gt;</span> <span class="n">tableStorage</span><span class="p">,</span> <span class="n">BlobStorage</span> <span class="n">blobStorage</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="n">messagingClient</span> <span class="p">=</span> <span class="n">lineMessagingClient</span><span class="p">;</span>
            <span class="k">this</span><span class="p">.</span><span class="n">sourceState</span> <span class="p">=</span> <span class="n">tableStorage</span><span class="p">;</span>
            <span class="k">this</span><span class="p">.</span><span class="n">blobStorage</span> <span class="p">=</span> <span class="n">blobStorage</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">protected</span> <span class="k">override</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">OnMessageAsync</span><span class="p">(</span><span class="n">MessageEvent</span> <span class="n">ev</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">switch</span> <span class="p">(</span><span class="n">ev</span><span class="p">.</span><span class="n">Message</span><span class="p">.</span><span class="n">Type</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">case</span> <span class="n">EventMessageType</span><span class="p">.</span><span class="n">Text</span><span class="p">:</span>
                    <span class="k">await</span> <span class="nf">HandleTextAsync</span><span class="p">(</span><span class="n">ev</span><span class="p">.</span><span class="n">ReplyToken</span><span class="p">,</span> <span class="p">((</span><span class="n">TextEventMessage</span><span class="p">)</span><span class="n">ev</span><span class="p">.</span><span class="n">Message</span><span class="p">).</span><span class="n">Text</span><span class="p">,</span> <span class="n">ev</span><span class="p">.</span><span class="n">Source</span><span class="p">.</span><span class="n">UserId</span><span class="p">);</span>
                    <span class="k">break</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">private</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">HandleTextAsync</span><span class="p">(</span><span class="kt">string</span> <span class="n">replyToken</span><span class="p">,</span> <span class="kt">string</span> <span class="n">userMessage</span><span class="p">,</span> <span class="kt">string</span> <span class="n">userId</span><span class="p">)</span>
        <span class="p">{</span>  
            <span class="kt">var</span> <span class="n">replyMessage</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">TextMessage</span><span class="p">(</span><span class="s">$"You said: </span><span class="p">{</span><span class="n">userMessage</span><span class="p">}</span><span class="s">"</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span><span class="n">userMessage</span> <span class="p">==</span> <span class="s">"こんにちは"</span><span class="p">){</span>
               <span class="n">replyMessage</span><span class="p">.</span><span class="n">Text</span> <span class="p">=</span> <span class="s">"これはこれは"</span><span class="p">;</span> 
            <span class="p">}</span>

            <span class="k">await</span> <span class="n">messagingClient</span><span class="p">.</span><span class="nf">ReplyMessageAsync</span><span class="p">(</span><span class="n">replyToken</span><span class="p">,</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">ISendMessage</span><span class="p">&gt;</span> <span class="p">{</span> <span class="n">replyMessage</span> <span class="p">});</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<p>2. 再度以下のコマンドでデプロイします。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>git commit -am update
git push
</code></pre></div></div>

<p>3. 再度ボットに話しかけます。うまくいけば「こんにちは」に対して、「これはこれは」と返しますが、他の言葉はおうむ返しをするだけです。</p>

<h1>
<span id="シミュレーターを使ったデバッグ" class="fragment"></span><a href="#%E3%82%B7%E3%83%9F%E3%83%A5%E3%83%AC%E3%83%BC%E3%82%BF%E3%83%BC%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%9F%E3%83%87%E3%83%90%E3%83%83%E3%82%B0"><i class="fa fa-link"></i></a>シミュレーターを使ったデバッグ</h1>

<p>デプロイ済みの環境をデバッグするのは多少の困難を伴うため、以下にシミュレーターを使ってデバッグできるよう設定します。</p>

<p>1. Controllers フォルダにある、LineBotController.cs を開き、コンストラクターを以下の変更します。</p>

<div class="code-frame" data-lang="c#">
<div class="code-lang"><span class="bold">LineBotController.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="nf">LineBotController</span><span class="p">(</span><span class="n">IOptions</span><span class="p">&lt;</span><span class="n">AppSettings</span><span class="p">&gt;</span> <span class="n">options</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">appsettings</span> <span class="p">=</span> <span class="n">options</span><span class="p">.</span><span class="n">Value</span><span class="p">;</span>
    <span class="err">#</span><span class="k">if</span> <span class="n">DEBUG</span>
    <span class="n">lineMessagingClient</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">LineMessagingClient</span><span class="p">(</span><span class="n">appsettings</span><span class="p">.</span><span class="n">LineSettings</span><span class="p">.</span><span class="n">ChannelAccessToken</span><span class="p">,</span>
        <span class="s">"http://localhost:8080"</span><span class="p">);</span>
    <span class="err">#</span><span class="k">else</span>
    <span class="n">lineMessagingClient</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">LineMessagingClient</span><span class="p">(</span><span class="n">appsettings</span><span class="p">.</span><span class="n">LineSettings</span><span class="p">.</span><span class="n">ChannelAccessToken</span><span class="p">);</span>
    <span class="err">#</span><span class="n">endif</span>
<span class="p">}</span>
</code></pre></div>
</div>

<p>2. F5 を押下して、デバッグを開始します。ブラウザが開くのでアドレスを確認します。アプリケーションは /api/bot に対する HttpRequest のみハンドルするため F5 押下で表示されるブラウザはエラーになりますが、無視してください。※既定で localhost:5000</p>

<p>3. LineBotApp.cs 39 行目にブレークポイントをおきます。<br><a href="https://camo.qiitausercontent.com/f7cc1431820234150e6072e0cc9a732f3098da1d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3231343131362f36653536363262332d366437372d373364332d613435392d3263623433643838666533382e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F214116%2F6e5662b3-6d77-73d3-a459-2cb43d88fe38.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=a027bf5989654cfb659124088f00f4f4" alt="Screen Shot 2018-01-20 at 12.58.27 AM.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/214116/6e5662b3-6d77-73d3-a459-2cb43d88fe38.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F214116%2F6e5662b3-6d77-73d3-a459-2cb43d88fe38.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=471b44af45039e6e49104fc0f67cd182 1x" loading="lazy"></a></p>

<p>4. 新しくコマンドプロンプトやターミナルを開き、以下のコマンドでシミュレーターを起動します。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>line-simulator
</code></pre></div></div>

<p>5. ブラウザを開いて、<a href="http://localhost:8080" class="autolink" rel="nofollow noopener" target="_blank">http://localhost:8080</a> に接続します。</p>

<p>6. はじめに接続画面が出ます。それぞれ値を入れて CONNECT をクリックします。<br>
    - UserId は LINE Developers コンソールのチャネル一番下に表示されている値を使います。<br>
    - Bot API Server Address <a href="http://localhost:5000/api/linebot" class="autolink" rel="nofollow noopener" target="_blank">http://localhost:5000/api/linebot</a> ※アドレスは上記手順で確認したもの。<br>
<br><br>
<a href="https://camo.qiitausercontent.com/bf9022ec6db7d6cdaec7550753f226419fd9da84/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3231343131362f37666437303238352d363132312d333433372d383938312d3461316338346134313031662e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F214116%2F7fd70285-6121-3437-8981-4a1c84a4101f.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=2c04522635b34544b43841c7d9037111" alt="Screen Shot 2018-01-20 at 12.49.33 AM.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/214116/7fd70285-6121-3437-8981-4a1c84a4101f.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F214116%2F7fd70285-6121-3437-8981-4a1c84a4101f.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=cffbe7bcd61625d155b8946e7c05058b 1x" loading="lazy"></a></p>

<p>7. チャットバーより「こんにちは」と入力します。ブレークポイントがヒットすることを確認します。<br><a href="https://camo.qiitausercontent.com/d0564a02208d1c3ebc6faecd4487eb218d185283/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3231343131362f32633766353062302d303964332d326430392d353764392d6363343431353338333961342e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F214116%2F2c7f50b0-09d3-2d09-57d9-cc44153839a4.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=cbaa69fd579c73d35122e4a1772ef59e" alt="Screen Shot 2018-01-20 at 12.59.46 AM.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/214116/2c7f50b0-09d3-2d09-57d9-cc44153839a4.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F214116%2F2c7f50b0-09d3-2d09-57d9-cc44153839a4.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=f2d15abd1c00294a2bba1e6420aed107 1x" loading="lazy"></a></p>

<p>8. F5 を押下してシミュレーターを確認します。<br><a href="https://camo.qiitausercontent.com/9dec093c46db866afbb92a0bba70e783493cfb3e/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3231343131362f36383934643838652d356266352d636537652d663932392d6335393361376363396135392e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F214116%2F6894d88e-5bf5-ce7e-f929-c593a7cc9a59.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=f47010b9dfa25954f3d4daf9e196a62a" alt="Screen Shot 2018-01-20 at 1.00.52 AM.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/214116/6894d88e-5bf5-ce7e-f929-c593a7cc9a59.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F214116%2F6894d88e-5bf5-ce7e-f929-c593a7cc9a59.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=25f5a133bb9826bbad24dcec7ea3cc2e 1x" loading="lazy"></a></p>

<h1>
<span id="次のステップ" class="fragment"></span><a href="#%E6%AC%A1%E3%81%AE%E3%82%B9%E3%83%86%E3%83%83%E3%83%97"><i class="fa fa-link"></i></a>次のステップ</h1>

<p><a href="https://qiita.com/kenakamu/items/ac4922a2061f4f8f02d9" id="reference-7038763dfbe674e9d20b">（後編）メッセージの意図と文脈を意識した会話を実現する</a></p>
</div></div></section><div class="css-1yzj1fm"><div class="css-1uv1qiv"><span class="fa fa-twitter"></span></div><div class="css-1uv1qiv"><span class="fa fa-facebook"></span></div></div><div class="apm-Content"><div class="apm-Content_title">Why not register and get more from Qiita?</div><ol class="apm-Content_list"><li>We will deliver articles that match you<div class="description">By following users and tags, you can catch up information on technical fields that you are interested in as a whole</div></li><li>you can read useful information later efficiently<div class="description">By &quot;stocking&quot; the articles you like, you can search right away</div></li><div><a class="apm-Content_help" href="https://help.qiita.com/ja/articles/qiita-login-user" target="_blank"><i class="fa fa-fw fa-arrow-circle-right"></i>What you can do with signing up</a></div></ol><a href="/signup?callback_action=login_or_signup&amp;redirect_to=%2Fkenakamu%2Fitems%2Fe0b194a82e4141b30c95&amp;realm=qiita" class="apm-Content_button apm-Content_button-signup">Sign up</a><a href="/login?callback_action=login_or_signup&amp;redirect_to=%2Fkenakamu%2Fitems%2Fe0b194a82e4141b30c95&amp;realm=qiita" class="apm-Content_button apm-Content_button-signin">Login</a></div></div><div class="css-helsa7"></div></div></div></div><div class="css-109dbrr"><div class="css-5jpx49"><div class="css-mnxgyc"><button class=" css-1vlpknv"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/kenakamu/items/e0b194a82e4141b30c95/likers" class="css-1iupg5d">57</a></div><div class="css-fsjkhv"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-1b17vb0">62</span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-7i7f4d"><div class="css-1gj7nt">Improve article</div><a href="/drafts/e0b194a82e4141b30c95/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/kenakamu/items/e0b194a82e4141b30c95/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/kenakamu/items/e0b194a82e4141b30c95/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/kenakamu/items/e0b194a82e4141b30c95/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/kenakamu/items/e0b194a82e4141b30c95.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="PersonalArticlePage" data-dom-id="PersonalArticlePage-react-component-609c0846-4036-498e-8eb8-92ed3572ee23">{"authorAnalyticsTrackingId":null,"organizationAnalyticsTrackingId":null}</script>
      
<footer id="globalFooter" class="st-Footer"><div class="st-Footer_container"><div class="st-Footer_start"><div class="st-Footer_logo"><svg viewbox="0 0 426.57 130" xmlns="http://www.w3.org/2000/svg"><circle cx="167.08" cy="21.4" r="12.28" /><path d="M250.81 29.66h23.48v18.9h-23.48z" /><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z" /><circle cx="216.33" cy="21.4" r="12.28" /></svg></div><div class="st-Footer_catchcopy">How developers code is here.</div><div class="st-Footer_socials"><a class="fa fa-twitter" href="https://twitter.com/qiita"></a><a class="fa fa-facebook-square" href="https://www.facebook.com/qiita/"></a></div></div><div class="st-Footer_end"><div class="st-Footer_qiita"><div class="st-Footer_label">Qiita</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="/about">About</a><a href="/terms">Terms</a><a href="/privacy">Privacy</a><a target="_blank" href="http://help.qiita.com/ja/articles/qiita-community-guideline">Guideline</a><a target="_blank" href="https://help.qiita.com/ja/articles/others-brand-guideline">Design Guideline</a></div><div class="st-Footer_column"><a href="/release-notes">Release</a><a href="/api/v2/docs">API</a><a href="/feedback/new">ご意見</a><a href="https://help.qiita.com">Help</a><a target="_blank" href="https://qiita.com/ads?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Advertisement</a></div></div></div><div class="st-Footer_increments"><div class="st-Footer_label">Increments</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="https://increments.co.jp/company/">About</a><a href="https://increments.co.jp/jobs/">採用情報</a><a href="https://blog.qiita.com">Blog</a></div><div class="st-Footer_column"><a href="https://teams.qiita.com/">Qiita Team</a><a href="https://jobs.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Jobs</a><a href="https://zine.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Zine</a></div></div></div></div></div><div class="st-Footer_copyright">© 2011-2021 Increments Inc.</div></footer><div id="Snackbar-react-component-4e0fae0d-973d-4b38-9af9-8f815cbde5d8"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="Snackbar" data-dom-id="Snackbar-react-component-4e0fae0d-973d-4b38-9af9-8f815cbde5d8">{}</script>
      
<div id="LoginModal-react-component-204f14f7-2afb-4421-bdc1-b3af746f236f"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="LoginModal" data-dom-id="LoginModal-react-component-204f14f7-2afb-4421-bdc1-b3af746f236f">{}</script>
      
<div id="StockModal-react-component-75584f4b-99d3-4c5b-9d53-eb876ae6807c"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="StockModal" data-dom-id="StockModal-react-component-75584f4b-99d3-4c5b-9d53-eb876ae6807c">{}</script>
      
</div><div id="dataContainer" style="display: none;" data-config="{&quot;actionPath&quot;:&quot;public/items#show&quot;,&quot;settings&quot;:{&quot;analyticsTrackingId&quot;:&quot;UA-24675221-12&quot;,&quot;assetsMap&quot;:{},&quot;csrfToken&quot;:&quot;hQkd+/U+GwdtBkxIR+QJupAXfBt4/b1yMDbFP8BoSk/syEfolZneT43jjaj208cnFokX//KW5e4aaav8c0J6sg==&quot;,&quot;locale&quot;:&quot;en&quot;},&quot;currentUser&quot;:null}" /></body></html><script type="application/json" data-js-react-on-rails-store="AppStoreWithReactOnRails">{"snackbar":{"type":"","body":"","isActive":false},"article":{"article":{"body":"\u003cp\u003eLINE の Bot 開発 超入門（前編） ゼロから応答ができるまで C# 編\u003cbr\u003e\n※Node.js 編は\u003ca href=\"https://qiita.com/nkjm/items/38808bbc97d6927837cd\" id=\"reference-b01c3436b68eba1224ef\"\u003eこちら\u003c/a\u003e\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"概要\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%A6%82%E8%A6%81\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e概要\u003c/h1\u003e\n\n\u003cp\u003eこの記事では LINE で動作する Bot を開発する方法をチュートリアル形式で記載しています。カバーする内容は、「寿司の出前を受付する Bot」を開発するというもので、LINE 側での必要な設定、Bot 本体の開発とクラウド環境へのデプロイ、そして自然言語解析を組み込んでユーザーの意図を特定する機能など Bot に共通して求められる基本的な動作を含みます。今回の Bot 本体は C# と ASP.NET Core で作っていきます。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"必要なスキルと環境\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%BF%85%E8%A6%81%E3%81%AA%E3%82%B9%E3%82%AD%E3%83%AB%E3%81%A8%E7%92%B0%E5%A2%83\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e必要なスキルと環境\u003c/h1\u003e\n\n\u003cul\u003e\n\u003cli\u003eC# と ASP.NET Core の基本的な知識\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"https://code.visualstudio.com/\" rel=\"nofollow noopener\" target=\"_blank\"\u003eVisual Studio Code\u003c/a\u003e の基本的な操作方法\u003c/li\u003e\n\u003cli\u003edotnet core SDK \u003ca href=\"https://www.microsoft.com/net/learn/get-started/windows\" rel=\"nofollow noopener\" target=\"_blank\"\u003eWindows\u003c/a\u003e/\u003ca href=\"https://www.microsoft.com/net/learn/get-started/linuxredhat\" rel=\"nofollow noopener\" target=\"_blank\"\u003eLinux\u003c/a\u003e/\u003ca href=\"https://www.microsoft.com/net/learn/get-started/macos\" rel=\"nofollow noopener\" target=\"_blank\"\u003eMac\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://azure.microsoft.com/ja-jp/free/\" rel=\"nofollow noopener\" target=\"_blank\"\u003eAzure サブスクリプション\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"https://docs.microsoft.com/en-us/cli/azure/install-azure-cli?view=azure-cli-latest\" rel=\"nofollow noopener\" target=\"_blank\"\u003eAzure CLI\u003c/a\u003e \u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"https://nodejs.org/ja/download/\" rel=\"nofollow noopener\" target=\"_blank\"\u003eNode.js\u003c/a\u003e: ソリューションテンプレートとシミュレーター用\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://git-scm.com/download\" rel=\"nofollow noopener\" target=\"_blank\"\u003egit\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"開発の流れ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E9%96%8B%E7%99%BA%E3%81%AE%E6%B5%81%E3%82%8C\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e開発の流れ\u003c/h1\u003e\n\n\u003cul\u003e\n\u003cli\u003eまず最初に LINE Bot のアカウントを作成します。この作業は LINE Developers コンソールという Web サイトで「Channel」を作成するという作業になります。 \u003cem\u003e＊以後 Bot のアカウントのことを Channel と呼びます。\u003c/em\u003e\n\u003c/li\u003e\n\u003cli\u003e次に Bot 本体のプログラムを開発し、クラウド上の実行環境へデプロイします。これで Bot 自体は稼働している状態になります。\u003c/li\u003e\n\u003cli\u003eそして Bot の Channel の設定で Webhook を設定し、Bot に送信されたメッセージなどを含むイベントが Bot のインスタンスに転送されるようにします。\u003c/li\u003e\n\u003cli\u003e残りの開発はシミュレーターを利用したローカル環境で行います。\u003c/li\u003e\n\u003cli\u003e最後に完成した Bot 本体のプログラムをクラウドにデプロイします。\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"手順\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%89%8B%E9%A0%86\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e手順\u003c/h1\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"channel-を作成する\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#channel-%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eChannel を作成する\u003c/h2\u003e\n\n\u003cp\u003e1. \u003ca href=\"https://developers.line.me/ja/\" rel=\"nofollow noopener\" target=\"_blank\"\u003eLINE Developer コンソール\u003c/a\u003eにアクセスし、ログインボタンをクリックして自身の LINE アカウントでログインします。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/2774f1688682b2f0a53e7f5a734d767e904a22d8/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f32363037392f38363966373264642d643438352d643865622d656336632d3038666336643630613433382e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F26079%2F869f72dd-d485-d8eb-ec6c-08fc6d60a438.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=eb9decdaea3235e853989913a8af1acc\" alt=\"login.png\" title=\"login.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/26079/869f72dd-d485-d8eb-ec6c-08fc6d60a438.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F26079%2F869f72dd-d485-d8eb-ec6c-08fc6d60a438.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=5d07401da0bed7938a32e4fd43659ef4 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e2. はじめてログインしたときには開発者登録を求められますので必要事項を入力してください。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/68d65fb1c134d74067ab322311a808bf5ac73712/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f32363037392f62373866366361662d373330322d633537332d383636322d3835383962353862393463362e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F26079%2Fb78f6caf-7302-c573-8662-8589b58b94c6.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=19dfe4367ff9314fc14ba1683dd7b7ea\" alt=\"first login.png\" title=\"first login.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/26079/b78f6caf-7302-c573-8662-8589b58b94c6.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F26079%2Fb78f6caf-7302-c573-8662-8589b58b94c6.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=9ad84bde74205bde602952946eeed5b6 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e3. 「はじめる」をクリックして次のスクリーンに移ります。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/a46e1ff3ad5de093e2f8e9bd0c7f0438387e2959/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f32363037392f61316437626235652d373763362d326539332d666338652d3235656666353064313336632e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F26079%2Fa1d7bb5e-77c6-2e93-fc8e-25eff50d136c.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=d1e440470bcebf983d4896fcf6358878\" alt=\"get_started.png\" title=\"get_started.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/26079/a1d7bb5e-77c6-2e93-fc8e-25eff50d136c.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F26079%2Fa1d7bb5e-77c6-2e93-fc8e-25eff50d136c.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=ab67bd11a70b6900c4e3ea8300cc4bb0 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e4. 次にプロバイダーを作成します。プロバイダーとはこれから作成する Bot の提供元として表示される情報です。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/cc6951ac41cd0ef019f33a26c88648420723e1ed/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f32363037392f61366133616166642d353532632d386261312d663463302d3037383333343934333734312e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F26079%2Fa6a3aafd-552c-8ba1-f4c0-078334943741.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=f5c8e21f384dbe229ff487c2e0d022a3\" alt=\"welcome_to_console.png\" title=\"welcome_to_console.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/26079/a6a3aafd-552c-8ba1-f4c0-078334943741.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F26079%2Fa6a3aafd-552c-8ba1-f4c0-078334943741.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=6294d338c0ba533ea69290e2addf7057 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e5. 必要情報を入力して進んでください。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/32eb14cda48991722f060b0322ae224effb61700/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f32363037392f31376330336239642d393534632d316331632d646638372d3966313438326461633931342e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F26079%2F17c03b9d-954c-1c1c-df87-9f1482dac914.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=c2ab0e0e11a134266a89959cb5b28aaf\" alt=\"new provider.png\" title=\"new provider.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/26079/17c03b9d-954c-1c1c-df87-9f1482dac914.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F26079%2F17c03b9d-954c-1c1c-df87-9f1482dac914.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=78438e90218c3500c8983b11cd9e575a 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e6. 次に Channel を作成します。Channel には LINE ログインと Messaging API の 2 つが存在します。今回作成するのは Bot なので Messaging API を選択してください。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/2a51962fc3499e2bb4035b403126ee70b3be8370/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f32363037392f35303462633763372d306466372d666539322d353961352d3533313663613838363165632e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F26079%2F504bc7c7-0df7-fe92-59a5-5316ca8861ec.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=cd24ef9761a8a171292c8a83f7ba73dd\" alt=\"new_provider_created.png\" title=\"new_provider_created.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/26079/504bc7c7-0df7-fe92-59a5-5316ca8861ec.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F26079%2F504bc7c7-0df7-fe92-59a5-5316ca8861ec.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=5a607186ca2f76c8b797c0f5b7eac282 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e7. こちらの画面で必要情報を入力していきます。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/b90e6391601cbe9b660e6c714828312770cb2a4f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f32363037392f33333865303330612d303664622d653464382d326131642d3232643937336534623464352e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F26079%2F338e030a-06db-e4d8-2a1d-22d973e4b4d5.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=57d533dbdb42baa496634295d60bb4cf\" alt=\"new channel.png\" title=\"new channel.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/26079/338e030a-06db-e4d8-2a1d-22d973e4b4d5.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F26079%2F338e030a-06db-e4d8-2a1d-22d973e4b4d5.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=2a6b0dc2e67d731641cb54f5f44f5706 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003cbr\u003e\n    - アプリ名: \u003cstrong\u003e任意のアプリ名\u003c/strong\u003e\u003cbr\u003e\n    - アプリ説明: \u003cstrong\u003e任意のアプリ説明\u003c/strong\u003e\u003cbr\u003e\n    - プラン: \u003cstrong\u003eDeveloper Trial\u003c/strong\u003e\u003cbr\u003e\n    - 大業種: \u003cstrong\u003e飲食店・レストラン\u003c/strong\u003e\u003cbr\u003e\n    - 小業種: \u003cstrong\u003eすし\u003c/strong\u003e\u003cbr\u003e\n    - メールアドレス: \u003cstrong\u003eご自身のメールアドレス\u003c/strong\u003e\u003c/p\u003e\n\n\u003cp\u003e8. これで Channel が作成されますが、まだもう少し設定が必要です。「設定が完了していません」をクリックします。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/1d15309af3314d05d04a093bc9740ab0180592a5/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f32363037392f38303638336562642d643635302d643534342d663763392d6466303966633930333239392e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F26079%2F80683ebd-d650-d544-f7c9-df09fc903299.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=51117496c4167acdf3cd72223654c469\" alt=\"configure_channel.png\" title=\"configure_channel.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/26079/80683ebd-d650-d544-f7c9-df09fc903299.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F26079%2F80683ebd-d650-d544-f7c9-df09fc903299.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=65e005fe2a25cc2755ea7a9b25dca64c 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e9. メッセージ送受信設定のセクションにあるアクセストークンの「再発行」ボタンをクリックします。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/383a839bc51fc99321f4b02ecd92939061c534f1/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f32363037392f62383438363033642d653766322d613565332d363036612d3231346261373034323063392e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F26079%2Fb848603d-e7f2-a5e3-606a-214ba70420c9.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=2c6dedeb8b9fa6ba146eaec559dad659\" alt=\"issue_channel_access_token.png\" title=\"issue_channel_access_token.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/26079/b848603d-e7f2-a5e3-606a-214ba70420c9.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F26079%2Fb848603d-e7f2-a5e3-606a-214ba70420c9.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=1164f9b82b8741cc5161da3fac2cf6e0 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e10. 失効までの時間を 0 時間にしてそのまま再発行をクリックします。0 時間にすることでトークンが失効しません。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/c84426863e48f32c679d82eb8f7936b6cdb005a5/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f32363037392f61313931666235302d346261312d383265352d343264372d6636393061366165613637652e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F26079%2Fa191fb50-4ba1-82e5-42d7-f690a6aea67e.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=c5ea7489f4a7c3ed57a84a81bd6c075a\" alt=\"reissue.png\" title=\"reissue.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/26079/a191fb50-4ba1-82e5-42d7-f690a6aea67e.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F26079%2Fa191fb50-4ba1-82e5-42d7-f690a6aea67e.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=9e338df87cbdad61a068b4ab3f8aaf24 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e11. これでアクセストークンが発行されます。このトークンは Messaging API の呼び出し時に認証情報として必要になります。あと残りの項目を下記の通り設定します。\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003eメッセージ送受信設定\u003c/strong\u003e\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eWebhook 送信: \u003cstrong\u003e利用する\u003c/strong\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e\u003cstrong\u003eLINE@ 機能の利用\u003c/strong\u003e\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e自動応答メッセージ: \u003cstrong\u003e利用しない\u003c/strong\u003e\n\u003c/li\u003e\n\u003cli\u003e友達追加時あいさつ: \u003cstrong\u003e利用しない\u003c/strong\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eこれで Channel の設定は\u003cstrong\u003eほぼ\u003c/strong\u003e完了です。Bot 本体をクラウドにデプロイしてからWebhook URL の設定を後ほどおこないます。\u003cbr\u003e\nまた、Bot 本体の開発で Channel Secret とアクセストークンが必要になりますのでこのページは開いたまま、次のステッップへ進みます。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"ソリューションテンプレートとシミュレーターのダウンロード\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%BD%E3%83%AA%E3%83%A5%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%83%86%E3%83%B3%E3%83%97%E3%83%AC%E3%83%BC%E3%83%88%E3%81%A8%E3%82%B7%E3%83%9F%E3%83%A5%E3%83%AC%E3%83%BC%E3%82%BF%E3%83%BC%E3%81%AE%E3%83%80%E3%82%A6%E3%83%B3%E3%83%AD%E3%83%BC%E3%83%89\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eソリューションテンプレートとシミュレーターのダウンロード\u003c/h2\u003e\n\n\u003cp\u003eyeoman を使ったソリューションテンプレートと LINE Bot シミュレーターを npm に公開してます。以下の手順で必要な npm パッケージを取得します。\u003c/p\u003e\n\n\u003cp\u003eWindows の場合\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003enpm install -g yo\nnpm install -g generator-line-bot\nnpm install -g line-simulator\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eMac の場合\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003esudo npm install -g yo\nsudo npm install -g generator-line-bot\nsudo npm install -g line-simulator\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"azure-環境の準備\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#azure-%E7%92%B0%E5%A2%83%E3%81%AE%E6%BA%96%E5%82%99\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eAzure 環境の準備\u003c/h2\u003e\n\n\u003cp\u003eAzure ポータルを使い慣れている場合はポータルからの操作でもいいですが、今回は Azure CLI を使って見ます。\u003c/p\u003e\n\n\u003cp\u003e1. まだインストールしていない場合は、\u003ca href=\"https://docs.microsoft.com/en-us/cli/azure/install-azure-cli?view=azure-cli-latest\" rel=\"nofollow noopener\" target=\"_blank\"\u003eAzure CLI\u003c/a\u003e をインストールします。\u003c/p\u003e\n\n\u003cp\u003e2. 以下のコマンドでログインを実行します。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eaz login\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e3. 画面の指示に順ってログインを完了します。\u003c/p\u003e\n\n\u003cp\u003e4. ログイン完了後、複数の Azure サブスクリプションがある場合は、以下のコマンドで使うサブスクリプションをセットします。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eaz account list\naz account set -s 'subscription id'\naz account show\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e5. まず以下のコマンドでリソースグループを linebotsample の名前、地域を東日本で作成します。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eaz group create -n linebotsample -l japaneast\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e6. 次にストレージアカウントを作成します。名前はグローバルで一意になるようにしてください。以下では linebotstorage の名前作成しています。このストレージにはボットのステータスを保存します。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eaz storage account create -n linebotstorage -g linebotsample --sku Standard_LRS\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e7. 作成したストレージに接続するための接続文字列を取得します。結果を保存しておいてください。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eaz storage account show-connection-string -n linebotstorage -g linebotsample\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e8. 次に開発したボットのデプロイ先となる WebApps を作成します。WebApp 作成時には、まずサービスプランを作成し、WebApp を作成します。また名前は一意になるようにしてください。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eaz appservice plan create -n linebotappplan -g linebotsample --sku F1\naz webapp create -n kenakamulinebot -g linebotsample -p linebotappplan\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e9. その後 git デプロイの指定をします。戻り値がデプロイ先となるので保存しておいてください。ユーザー名とパスワードは適宜変更します。パスワードはデブロイ時に必要です。尚、このユーザーはサブスクリプション内のアプリで共通となるので、これまでに設定したことがある場合は、1 つ目のコマンドはスキップしてください。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eaz webapp deployment user set --user-name kenakamu --password Pa$$w0rd\naz webapp deployment source config-local-git -n kenakamulinebot -g linebotsample\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"bot本体c-のプログラムを開発する\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#bot%E6%9C%AC%E4%BD%93c-%E3%81%AE%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%A0%E3%82%92%E9%96%8B%E7%99%BA%E3%81%99%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eBot本体（C# のプログラム）を開発する\u003c/h2\u003e\n\n\u003cp\u003e準備が整ったところで、ボットを開発していきます。\u003c/p\u003e\n\n\u003cp\u003e1. コマンドプロンプトやターミナルでデスクトップ等任意の場所に移動します。\u003c/p\u003e\n\n\u003cp\u003e2. 以下のコマンドで C# WebAPI 用のテンプレートを展開します。実行時に LINE ボットのチャネルシークレット、チャネルトークン、また Azure ストレージアカウントの接続文字列を聞かれるので、それぞれ入力します。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eyo line-bot sushibot --csharp --webapi\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e3. 作成されたフォルダに移動します。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003ecd sushibot\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"bot本体を-azure-webapp-に展開する\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#bot%E6%9C%AC%E4%BD%93%E3%82%92-azure-webapp-%E3%81%AB%E5%B1%95%E9%96%8B%E3%81%99%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eBot本体を Azure WebApp に展開する\u003c/h2\u003e\n\n\u003cp\u003e1. 今回は git で展開するため、まずレポジトリを初期化します。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003egit init\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e2. 次に発行先を設定します。アドレスは WebApp 作成時に取得したものを使います。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003egit remote add origin https://kenakamu@kenakamulinebot.scm.azurewebsites.net/kenakamulinebot.git\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e3. Visual Studio Code を開きます。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003ecode . --locale=ja\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e4. 新規ファイルより、ルートに .gitignoreファイルを作成し、git の管理対象外にしたいファイルを一行一ファイルで列挙します。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003e.gitignore\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e.vscode\nbin\ndebug\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e5. ターミナルまたはコマンドプロンプトに戻り、以下コマンドでコミットを行います。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003egit add .\ngit commit -m \"初回コミット\"\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e6. 以下のコマンドでデプロイします。パスワードを聞かれるので、設定したものを入力します。初回は少し時間がかかります。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003egit push -u origin master\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"webhookを設定する\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#webhook%E3%82%92%E8%A8%AD%E5%AE%9A%E3%81%99%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eWebhookを設定する\u003c/h2\u003e\n\n\u003cp\u003eWebhook は LINE で Bot に関連するイベントが発生した場合に、そのイベントを Bot インスタンスに通知してもらうためのアクセスポイント（URL）です。\u003c/p\u003e\n\n\u003cp\u003eこの URL は開発者が指定することができ、その URL に対して LINE から POST リクエストが送信されることになります。今回は下記の URLを Webhook として設定します。\u003c/p\u003e\n\n\u003cp\u003ehttps://自分のwebapp名.azurewebsites.net/api/linebot\u003c/p\u003e\n\n\u003cp\u003eLINE Developers コンソールでWebhook URLを下記の通り設定します。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003ehttps://自分のwebapp名.azurewebsites.net/api/linebot\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eここで Bot を友達に追加しておきましょう。スマホで LINE を起動し、LINE Developers コンソールのチャネルにある QR コードをスキャンして追加します。iOS 版の場合は下記のような手順になります。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/b1ebaa62417d0de98892649a65d3e457506c485e/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f32363037392f32623064336337662d653965632d653437662d616464342d6531666662306533393639322e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F26079%2F2b0d3c7f-e9ec-e47f-add4-e1ffb0e39692.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=75fc5ffdcbad3de13878839b0e5310b0\" alt=\"IMG_0027.png\" title=\"IMG_0027.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/26079/2b0d3c7f-e9ec-e47f-add4-e1ffb0e39692.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F26079%2F2b0d3c7f-e9ec-e47f-add4-e1ffb0e39692.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=57e2ac2748a15d53fd07fba644d924f8 1x\" loading=\"lazy\"\u003e\u003c/a\u003e \u003ca href=\"https://camo.qiitausercontent.com/3e2c07d5f41774d7da39a9c942c12e83f2d6cb46/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f32363037392f30343938343465662d373237312d323531662d653931612d3161393866613666303962382e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F26079%2F049844ef-7271-251f-e91a-1a98fa6f09b8.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=b65276888446a8464ae201362e251c15\" alt=\"IMG_0028.png\" title=\"IMG_0028.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/26079/049844ef-7271-251f-e91a-1a98fa6f09b8.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F26079%2F049844ef-7271-251f-e91a-1a98fa6f09b8.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=2bd278657f1f520b764b4640c53cd730 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e任意のメッセージを送ってみてください。返信があれば無事に繋がっています。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"kudu\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#kudu\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eKudu\u003c/h2\u003e\n\n\u003cp\u003eデプロイ済みのサーバー情報は、Kudu というツールで確認ができます。\u003c/p\u003e\n\n\u003cp\u003e1. デプロイ先 git アドレスのホスト URL にブラウザでアクセスします。トップページに環境の概要があります。\u003cbr\u003e\n例) \u003ca href=\"https://kenakamulinebot.scm.azurewebsites.net\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://kenakamulinebot.scm.azurewebsites.net\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e2. 上部メニューより Debug console をクリックし、CMD または PowerShell を選択します。 \u003c/p\u003e\n\n\u003cp\u003e3. site -\u0026gt; wwwroot 内に展開済みファイルが確認できます。また LogFiles 配下にはさまざまなログがあります。詳しく紹介しているので\u003c/p\u003e\n\n\u003cp\u003eKudu については\u003ca href=\"https://buchizo.wordpress.com/2013/12/22/windows-azure-web-sites%E3%81%AE%E9%AD%85%E5%8A%9B%E3%82%92120%E5%BC%95%E3%81%8D%E5%87%BA%E3%81%99/\" rel=\"nofollow noopener\" target=\"_blank\"\u003eこちらのブログ\u003c/a\u003e で詳細が紹介されているので是非ご覧ください。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"メッセージの返信\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%81%AE%E8%BF%94%E4%BF%A1\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eメッセージの返信\u003c/h2\u003e\n\n\u003cp\u003eそれでは、ユーザーが Bot に「こんにちは」とテキストメッセージを送ってきたら「これはこれは」と返信するようにしてみます。\u003c/p\u003e\n\n\u003cp\u003e1. Visual Studio Code で LineBotApp.cs を開きます。このテンプレートは様々なサンプルを含んでいるため、いかのコードと差し替えてシンプルにします。ユーザーから送られてきたテキストは HandleTextAsync メソッドで返信を作って返しています。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eLineBotApp.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eLine.Messaging\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eLine.Messaging.Webhooks\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem.Collections.Generic\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem.IO\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem.Linq\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem.Threading.Tasks\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003esushibot.CloudStorage\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003esushibot.Models\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003enamespace\u003c/span\u003e \u003cspan class=\"nn\"\u003esushibot\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003einternal\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eLineBotApp\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eWebhookApplication\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003eLineMessagingClient\u003c/span\u003e \u003cspan class=\"n\"\u003emessagingClient\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003eTableStorage\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eEventSourceState\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003esourceState\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003eBlobStorage\u003c/span\u003e \u003cspan class=\"n\"\u003eblobStorage\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003eLineBotApp\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eLineMessagingClient\u003c/span\u003e \u003cspan class=\"n\"\u003elineMessagingClient\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eTableStorage\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eEventSourceState\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003etableStorage\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eBlobStorage\u003c/span\u003e \u003cspan class=\"n\"\u003eblobStorage\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003emessagingClient\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003elineMessagingClient\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003esourceState\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003etableStorage\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eblobStorage\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eblobStorage\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003eprotected\u003c/span\u003e \u003cspan class=\"k\"\u003eoverride\u003c/span\u003e \u003cspan class=\"k\"\u003easync\u003c/span\u003e \u003cspan class=\"n\"\u003eTask\u003c/span\u003e \u003cspan class=\"nf\"\u003eOnMessageAsync\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eMessageEvent\u003c/span\u003e \u003cspan class=\"n\"\u003eev\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eswitch\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eev\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eMessage\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eType\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"k\"\u003ecase\u003c/span\u003e \u003cspan class=\"n\"\u003eEventMessageType\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eText\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n                    \u003cspan class=\"k\"\u003eawait\u003c/span\u003e \u003cspan class=\"nf\"\u003eHandleTextAsync\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eev\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eReplyToken\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e((\u003c/span\u003e\u003cspan class=\"n\"\u003eTextEventMessage\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"n\"\u003eev\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eMessage\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"n\"\u003eText\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eev\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eSource\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eUserId\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n                    \u003cspan class=\"k\"\u003ebreak\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003easync\u003c/span\u003e \u003cspan class=\"n\"\u003eTask\u003c/span\u003e \u003cspan class=\"nf\"\u003eHandleTextAsync\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003ereplyToken\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003euserMessage\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003euserId\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e  \n            \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003ereplyMessage\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eTextMessage\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e$\"You said: \u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003euserMessage\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eif\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003euserMessage\u003c/span\u003e \u003cspan class=\"p\"\u003e==\u003c/span\u003e \u003cspan class=\"s\"\u003e\"こんにちは\"\u003c/span\u003e\u003cspan class=\"p\"\u003e){\u003c/span\u003e\n               \u003cspan class=\"n\"\u003ereplyMessage\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eText\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"これはこれは\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \n            \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n            \u003cspan class=\"k\"\u003eawait\u003c/span\u003e \u003cspan class=\"n\"\u003emessagingClient\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eReplyMessageAsync\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ereplyToken\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eList\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eISendMessage\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"n\"\u003ereplyMessage\u003c/span\u003e \u003cspan class=\"p\"\u003e});\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e2. 再度以下のコマンドでデプロイします。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003egit commit -am update\ngit push\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e3. 再度ボットに話しかけます。うまくいけば「こんにちは」に対して、「これはこれは」と返しますが、他の言葉はおうむ返しをするだけです。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"シミュレーターを使ったデバッグ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%B7%E3%83%9F%E3%83%A5%E3%83%AC%E3%83%BC%E3%82%BF%E3%83%BC%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%9F%E3%83%87%E3%83%90%E3%83%83%E3%82%B0\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eシミュレーターを使ったデバッグ\u003c/h1\u003e\n\n\u003cp\u003eデプロイ済みの環境をデバッグするのは多少の困難を伴うため、以下にシミュレーターを使ってデバッグできるよう設定します。\u003c/p\u003e\n\n\u003cp\u003e1. Controllers フォルダにある、LineBotController.cs を開き、コンストラクターを以下の変更します。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eLineBotController.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003eLineBotController\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eIOptions\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eAppSettings\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eoptions\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eappsettings\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eoptions\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eValue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"err\"\u003e#\u003c/span\u003e\u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"n\"\u003eDEBUG\u003c/span\u003e\n    \u003cspan class=\"n\"\u003elineMessagingClient\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eLineMessagingClient\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eappsettings\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eLineSettings\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eChannelAccessToken\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"s\"\u003e\"http://localhost:8080\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"err\"\u003e#\u003c/span\u003e\u003cspan class=\"k\"\u003eelse\u003c/span\u003e\n    \u003cspan class=\"n\"\u003elineMessagingClient\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eLineMessagingClient\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eappsettings\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eLineSettings\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eChannelAccessToken\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"err\"\u003e#\u003c/span\u003e\u003cspan class=\"n\"\u003eendif\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e2. F5 を押下して、デバッグを開始します。ブラウザが開くのでアドレスを確認します。アプリケーションは /api/bot に対する HttpRequest のみハンドルするため F5 押下で表示されるブラウザはエラーになりますが、無視してください。※既定で localhost:5000\u003c/p\u003e\n\n\u003cp\u003e3. LineBotApp.cs 39 行目にブレークポイントをおきます。\u003cbr\u003e\u003ca href=\"https://camo.qiitausercontent.com/f7cc1431820234150e6072e0cc9a732f3098da1d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3231343131362f36653536363262332d366437372d373364332d613435392d3263623433643838666533382e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F214116%2F6e5662b3-6d77-73d3-a459-2cb43d88fe38.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=a027bf5989654cfb659124088f00f4f4\" alt=\"Screen Shot 2018-01-20 at 12.58.27 AM.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/214116/6e5662b3-6d77-73d3-a459-2cb43d88fe38.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F214116%2F6e5662b3-6d77-73d3-a459-2cb43d88fe38.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=471b44af45039e6e49104fc0f67cd182 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e4. 新しくコマンドプロンプトやターミナルを開き、以下のコマンドでシミュレーターを起動します。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eline-simulator\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e5. ブラウザを開いて、\u003ca href=\"http://localhost:8080\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://localhost:8080\u003c/a\u003e に接続します。\u003c/p\u003e\n\n\u003cp\u003e6. はじめに接続画面が出ます。それぞれ値を入れて CONNECT をクリックします。\u003cbr\u003e\n    - UserId は LINE Developers コンソールのチャネル一番下に表示されている値を使います。\u003cbr\u003e\n    - Bot API Server Address \u003ca href=\"http://localhost:5000/api/linebot\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://localhost:5000/api/linebot\u003c/a\u003e ※アドレスは上記手順で確認したもの。\u003cbr\u003e\n\u003cbr\u003e\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/bf9022ec6db7d6cdaec7550753f226419fd9da84/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3231343131362f37666437303238352d363132312d333433372d383938312d3461316338346134313031662e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F214116%2F7fd70285-6121-3437-8981-4a1c84a4101f.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=2c04522635b34544b43841c7d9037111\" alt=\"Screen Shot 2018-01-20 at 12.49.33 AM.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/214116/7fd70285-6121-3437-8981-4a1c84a4101f.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F214116%2F7fd70285-6121-3437-8981-4a1c84a4101f.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=cffbe7bcd61625d155b8946e7c05058b 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e7. チャットバーより「こんにちは」と入力します。ブレークポイントがヒットすることを確認します。\u003cbr\u003e\u003ca href=\"https://camo.qiitausercontent.com/d0564a02208d1c3ebc6faecd4487eb218d185283/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3231343131362f32633766353062302d303964332d326430392d353764392d6363343431353338333961342e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F214116%2F2c7f50b0-09d3-2d09-57d9-cc44153839a4.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=cbaa69fd579c73d35122e4a1772ef59e\" alt=\"Screen Shot 2018-01-20 at 12.59.46 AM.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/214116/2c7f50b0-09d3-2d09-57d9-cc44153839a4.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F214116%2F2c7f50b0-09d3-2d09-57d9-cc44153839a4.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=f2d15abd1c00294a2bba1e6420aed107 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e8. F5 を押下してシミュレーターを確認します。\u003cbr\u003e\u003ca href=\"https://camo.qiitausercontent.com/9dec093c46db866afbb92a0bba70e783493cfb3e/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3231343131362f36383934643838652d356266352d636537652d663932392d6335393361376363396135392e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F214116%2F6894d88e-5bf5-ce7e-f929-c593a7cc9a59.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=f47010b9dfa25954f3d4daf9e196a62a\" alt=\"Screen Shot 2018-01-20 at 1.00.52 AM.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/214116/6894d88e-5bf5-ce7e-f929-c593a7cc9a59.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F214116%2F6894d88e-5bf5-ce7e-f929-c593a7cc9a59.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=25f5a133bb9826bbad24dcec7ea3cc2e 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"次のステップ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%AC%A1%E3%81%AE%E3%82%B9%E3%83%86%E3%83%83%E3%83%97\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e次のステップ\u003c/h1\u003e\n\n\u003cp\u003e\u003ca href=\"https://qiita.com/kenakamu/items/ac4922a2061f4f8f02d9\" id=\"reference-7038763dfbe674e9d20b\"\u003e（後編）メッセージの意図と文脈を意識した会話を実現する\u003c/a\u003e\u003c/p\u003e\n","createdAt":"2018-01-20T18:09:27Z","elapsedYearsFromLastModifiedAt":3,"encryptedId":"2Xe8iLL2xp0ShzzehWQHpxVBKoExf74F--IQ4D1QJRT7IqY9pN--9lPSP+T1xY9WENDD1Gc5yQ==","isBanned":false,"isDeprecated":true,"isDestroyableByViewer":false,"isEditRequestReadableByViewer":true,"isEditRequestSendableByViewer":true,"isLikableByViewer":true,"isLikedByViewer":false,"isPublic":true,"isSlide":false,"isStockableByViewer":true,"isStockedByViewer":false,"isSubscribableByViewer":false,"isSubscribedByViewer":false,"isUpdatableByViewer":false,"isUpdated":true,"lastModifiedAt":"2018-02-23T11:03:08Z","likesCount":57,"linkUrl":"https://qiita.com/kenakamu/items/e0b194a82e4141b30c95","organization":{"description":"マイクロソフトのメンバーがMicrosoft Azureをはじめとする最新技術情報をお届けします。Twitterアカウント（@msdevjp）やYouTubeチャンネル「クラウドデベロッパーちゃんねる」も運用中です。","encryptedId":"ZRGU5krNLPX3q/XTwpycq/RRQH1RtUm2TaV8--tCI8XRS3JafUk8sk--YHclLmsnOO26GN8Bg8MHwg==","isBetaReleaseEnabled":true,"isFollowableByViewer":true,"isFollowedByViewer":false,"logoUrl":"https://s3-ap-northeast-1.amazonaws.com/qiita-organization-image/bae6d3a0828c019ff259cdb47a8988c98636389f/original.jpg?1583721865","name":"Microsoft","url":"https://azure.microsoft.com/ja-jp/developer/","urlName":"microsoft"},"originalId":601773,"stockedCount":62,"title":"LINE の Bot 開発 超入門（前編） ゼロから応答ができるまで C# 編","toc":"\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E6%A6%82%E8%A6%81\"\u003e概要\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%BF%85%E8%A6%81%E3%81%AA%E3%82%B9%E3%82%AD%E3%83%AB%E3%81%A8%E7%92%B0%E5%A2%83\"\u003e必要なスキルと環境\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E9%96%8B%E7%99%BA%E3%81%AE%E6%B5%81%E3%82%8C\"\u003e開発の流れ\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E6%89%8B%E9%A0%86\"\u003e手順\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#channel-%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B\"\u003eChannel を作成する\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%BD%E3%83%AA%E3%83%A5%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%83%86%E3%83%B3%E3%83%97%E3%83%AC%E3%83%BC%E3%83%88%E3%81%A8%E3%82%B7%E3%83%9F%E3%83%A5%E3%83%AC%E3%83%BC%E3%82%BF%E3%83%BC%E3%81%AE%E3%83%80%E3%82%A6%E3%83%B3%E3%83%AD%E3%83%BC%E3%83%89\"\u003eソリューションテンプレートとシミュレーターのダウンロード\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#azure-%E7%92%B0%E5%A2%83%E3%81%AE%E6%BA%96%E5%82%99\"\u003eAzure 環境の準備\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#bot%E6%9C%AC%E4%BD%93c-%E3%81%AE%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%A0%E3%82%92%E9%96%8B%E7%99%BA%E3%81%99%E3%82%8B\"\u003eBot本体（C# のプログラム）を開発する\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#bot%E6%9C%AC%E4%BD%93%E3%82%92-azure-webapp-%E3%81%AB%E5%B1%95%E9%96%8B%E3%81%99%E3%82%8B\"\u003eBot本体を Azure WebApp に展開する\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#webhook%E3%82%92%E8%A8%AD%E5%AE%9A%E3%81%99%E3%82%8B\"\u003eWebhookを設定する\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#kudu\"\u003eKudu\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%81%AE%E8%BF%94%E4%BF%A1\"\u003eメッセージの返信\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%B7%E3%83%9F%E3%83%A5%E3%83%AC%E3%83%BC%E3%82%BF%E3%83%BC%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%9F%E3%83%87%E3%83%90%E3%83%83%E3%82%B0\"\u003eシミュレーターを使ったデバッグ\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E6%AC%A1%E3%81%AE%E3%82%B9%E3%83%86%E3%83%83%E3%83%97\"\u003e次のステップ\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n","totalPv":21213,"uuid":"e0b194a82e4141b30c95","banReason":null,"adventCalendarItem":null,"author":{"encryptedId":"Y4qMhCM+lUmT9idYtteRo58LJK2V--9N97ds+b/Qu0/DaO--lcBE8SJ9LT/NnE8POBYryw==","originalId":214116,"description":"","facebookUrl":"https://facebook.com/kenichiro.nakamura.5249","githubUrl":"https://github.com/kenakamu","isBlockingViewer":false,"isFollowableByViewer":true,"isFollowedByViewer":false,"isTweetWebNotificationReceivable":true,"linkedinUrl":"https://www.linkedin.com/in/kenakamu108","name":"","profileImageUrl":"https://avatars2.githubusercontent.com/u/9940668?v=4","profileImageUrlW48":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Favatars2.githubusercontent.com%2Fu%2F9940668%3Fv%3D4?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=48\u0026s=e3f74068d6caf1adeace5f24c9eba966","profileImageUrlW75":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Favatars2.githubusercontent.com%2Fu%2F9940668%3Fv%3D4?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=ba853bb83e6142e6ea6854e823ed9241","urlName":"kenakamu","websiteUrl":"http://github.com/kenakamu","twitterUrl":"https://twitter.com/kenakamu108","twitterUrlName":"kenakamu108","revealedOrganizations":{"edges":[{"node":{"encryptedId":"b9vSIrYoIl1M54TOZOmMhxuML46/mRyBfpzT--66apUt3l5nNTFzXn--23uCB7J4h2Bzt5m6z5DD7g==","isBetaReleaseEnabled":true,"isFollowableByViewer":true,"isFollowedByViewer":false,"name":"Microsoft","logoUrl":"https://s3-ap-northeast-1.amazonaws.com/qiita-organization-image/bae6d3a0828c019ff259cdb47a8988c98636389f/original.jpg?1583721865","urlName":"microsoft","description":"マイクロソフトのメンバーがMicrosoft Azureをはじめとする最新技術情報をお届けします。Twitterアカウント（@msdevjp）やYouTubeチャンネル「クラウドデベロッパーちゃんねる」も運用中です。","url":"https://azure.microsoft.com/ja-jp/developer/"}}]}},"tags":[{"name":"C#","urlName":"csharp"},{"name":"Line","urlName":"line"},{"name":"bot","urlName":"bot"},{"name":"linebot","urlName":"linebot"},{"name":"LINEmessagingAPI","urlName":"linemessagingapi"}],"followingLikers":{"edges":[]},"comments":{"totalCount":11}},"comments":[],"client":null,"ads_event_emitter":null}}</script>
