
using System;
using System.Collections.Generic;
using System.Text;
using System.Linq;

namespace HyperQueenApp {
    class Solver {

        public IEnumerable&lt;Board&gt; Solve(Board board) {
            return SolveInner(board, 1);
        }

        // y行よりも下に置く駒を求める － 鏡像、回転を除くことは考慮していない
        private IEnumerable&lt;Board&gt; SolveInner(Board board, int y) {
            if (y &gt; board.YSize) {
                yield return new Board(board);
                yield break;
            }
            foreach (int pos in board.Horizontal(1, y)) {
                if (board.CanPut(pos)) {
                    board.Put(pos);
                    foreach (var b in SolveInner(board, y + 1))
                        yield return b;
                    board.Clear(pos);
                }
            }
        }
    }
}

