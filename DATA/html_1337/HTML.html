<!DOCTYPE html><html><head><meta charset="utf-8" /><title>【VRChat】 Udon開発する上での注意点【Unity】 - Qiita</title><meta content="width=device-width,initial-scale=1,shrink-to-fit=no,viewport-fit=cover" name="viewport" /><meta content="#55c500" name="theme-color" /><meta content="XWpkTG32-_C4joZoJ_UsmDUi-zaH-hcrjF6ZC_FoFbk" name="google-site-verification" /><meta content="telephone=no" name="format-detection" /><link rel="canonical" href="https://qiita.com/toRisouP/items/16bd06aa303a1bb1a747" /><link href="/manifest.json" rel="manifest" /><link href="/opensearch.xml" rel="search" title="Qiita" type="application/opensearchdescription+xml" /><link as="script" href="https://www.googletagservices.com/tag/js/gpt.js" rel="preload" /><link href="https://securepubads.g.doubleclick.net" rel="preconnect" /><script async="" src="https://www.googletagservices.com/tag/js/gpt.js"></script><meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="3+3ACkF4mW9Pge3kxUQaW8yPEXsol1m1M/XZvbeXo5Fpm9ItGgUaSMlUVXtAK6BOxlLS/5zKVg9A0mhchPuKcw==" /><link rel="shortcut icon" type="image/x-icon" href="https://cdn.qiita.com/assets/favicons/public/production-c620d3e403342b1022967ba5e3db1aaa.ico" /><link rel="apple-touch-icon" type="image/png" href="https://cdn.qiita.com/assets/favicons/public/apple-touch-icon-ec5ba42a24ae923f16825592efdc356f.png" /><link rel="stylesheet" media="all" href="https://cdn.qiita.com/assets/public/article-2eaa7dbedc42a8ea65c722cda46d0ebb.min.css" /><script src="https://cdn.qiita.com/assets/public/v3-article-bundle-63de2d91fef827269d3f6b958db2335b.min.js" defer="defer"></script><meta name="twitter:card" content="summary_large_image"><meta content="@Qiita" name="twitter:site" /><meta content="@toRisouP" name="twitter:creator" /><meta property="og:type" content="article"><meta property="og:title" content="【VRChat】 Udon開発する上での注意点【Unity】 - Qiita"><meta property="og:image" content="https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0&amp;w=1200&amp;mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND00NENRVmxKRGFHRjA0NENSSUZWa2IyN3Bsb3ZubWJyamdabmpnb3ZrdUlyamdhZmpnYTdtczZqbWhJX25ncm5qZ0pCVmJtbDBlZU9Ba1EmdHh0LWNvbG9yPSUyMzMzMyZ0eHQtZm9udD1IaXJhZ2lubyUyMFNhbnMlMjBXNiZ0eHQtc2l6ZT01NCZ0eHQtY2xpcD1lbGxpcHNpcyZ0eHQtYWxpZ249Y2VudGVyJTJDbWlkZGxlJnM9ZGYxOGQ1MmI3MTBhODE4YmY3ZDNhNzlhZTQwYWVhNjE&amp;mark-align=center%2Cmiddle&amp;blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RSFJ2VW1semIzVlEmdHh0LWNvbG9yPSUyMzMzMyZ0eHQtZm9udD1IaXJhZ2lubyUyMFNhbnMlMjBXNiZ0eHQtc2l6ZT00NSZ0eHQtYWxpZ249cmlnaHQlMkNib3R0b20mcz1jNzExYWUyZTRiN2FhZjdjNTk3N2QyMGUwMTBlZjA2ZA&amp;blend-align=center%2Cmiddle&amp;blend-mode=normal&amp;s=97d94ced277eb129d15cc68d6fb09b5b"><meta property="og:description" content="

はじめに

この記事はVRChatにおけるUdonおよびUdonSharp(U#)を使った際の備忘録です。
これからUdonを使い始める人のために書き連ねておきます。

この記事は2020/5/26現在のVRChatを前提に書いて..."><meta content="https://qiita.com/toRisouP/items/16bd06aa303a1bb1a747" property="og:url" /><meta content="Qiita" property="og:site_name" /><meta content="564524038" property="fb:admins" /><meta content="C#,Unity,VRChat,Udon,UdonSharp" name="keywords" /><script>!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window, document,'script',
'https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '668972150489891');
fbq('track', 'PageView');</script><style data-emotion-css="17jxvjw 11t2ec1 1dvr2p8 18lkoru 1g4cku8 1iupg5d ijvq0v 15cocm3 12rp90f 115f4t 1b8uj5v 79elbk 16hhh7b fcbn8c 1gj7nt 154zy0m yikrym 1jqivyb 1ode1bp le4d8r 1hbd3g7 1nzh4zz 38fzdi helsa7 8qb8m4 2imjyh he5w1s 70qvj9 3ojehk 100alwu 1dtnjt5 10ougpm 1ay9vb9 m19uds cgzq40 1wa99t2 1l3zk9f 4czcte 1yzj1fm 1uv1qiv 109dbrr 5jpx49 mnxgyc 1vlpknv fsjkhv 1b17vb0 7i7f4d"}>.css-17jxvjw{display:grid;display:-ms-grid;grid-template-columns:80px minmax(0,1fr) 300px;-ms-grid-columns:80px minmax(0,1fr) 300px;grid-template-rows:minmax(270px,auto) 1fr;-ms-grid-rows:minmax(270px,auto) 1fr;max-width:1280px;margin-right:auto;margin-left:auto;padding-top:24px;padding-right:24px;padding-left:24px;}@media (max-width:1200px){.css-17jxvjw{padding-bottom:0;padding-left:0;padding-right:0;}}@media (max-width:992px){.css-17jxvjw{grid-template-columns:80px 452px 300px;-ms-grid-columns:80px 452px 300px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}}@media (max-width:770px){.css-17jxvjw{display:block;}}@media (max-width:480px){.css-17jxvjw{padding-top:0;}}.css-11t2ec1{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;z-index:5;position:-webkit-sticky;position:sticky;top:calc(56px + 24px + 16px + 32px - 16px);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:16px;width:80px;}.css-11t2ec1:after{content:'';display:table;}.css-11t2ec1:before{content:'';display:table;}@media (max-width:770px){.css-11t2ec1{display:none;}}.css-1dvr2p8{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-18lkoru{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;background-color:#FFFFFF;}.css-1g4cku8{display:inline-block;vertical-align:middle;height:20px;width:20px;fill:#55C500;}.css-1iupg5d{color:#55C500;cursor:pointer;font-size:14px;font-weight:bold;}.css-ijvq0v{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-15cocm3{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#FFFFFF;border:2px solid #6E6F70;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:2px 0px 0px;width:40px;}.css-12rp90f{display:inline-block;vertical-align:bottom;height:17.77777777777778px;width:16px;fill:#6E6F70;}.css-115f4t{color:#6E6F70;font-size:14px;font-weight:bold;}.css-1b8uj5v{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;margin-bottom:16px;padding:0;}.css-79elbk{position:relative;}.css-16hhh7b{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;padding:0;}.css-fcbn8c{display:none;bottom:initial;left:initial;right:initial;top:initial;left:100%;top:calc(-8px - (14px * 1.8) - 16px - 4px);}.css-1gj7nt{color:rgba(0,0,0,0.6);font-size:14px;font-weight:bold;line-height:1.8;padding:8px 16px;}.css-154zy0m{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.87);cursor:pointer;font-size:16px;font-weight:normal;line-height:1.8;padding:4px 16px;}.css-154zy0m:hover{-webkit-text-decoration:none;text-decoration:none;background-color:#F2F2F2;}.css-yikrym{width:20px;}.css-1jqivyb{color:rgba(0,0,0,0.6);font-size:13px;}.css-1ode1bp{background-color:rgba(0,0,0,0.12);height:1px;width:100%;margin:8px 0;}.css-le4d8r{display:inline-block;vertical-align:middle;height:13px;width:13px;fill:rgba(0,0,0,0.6);}.css-1hbd3g7{height:250px;}.css-1nzh4zz{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:16px 32px;background-color:#FBE69E;color:rgba(0,0,0,0.87);line-height:1.5;font-weight:600;}@media (max-width:770px){.css-1nzh4zz{padding:16px;}}.css-38fzdi{color:#CA832A;margin-right:4px;}.css-helsa7{background-color:#FFFFFF;padding:32px;margin-bottom:24px;}@media (max-width:992px){.css-helsa7{margin:0 auto 40px;}}@media (max-width:480px){.css-helsa7{margin:0 0 40px;padding:32px 16px;}}.css-8qb8m4{margin-bottom:48px;}.css-2imjyh{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-he5w1s{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;width:100%;}@media (max-width:770px){.css-he5w1s{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}}.css-70qvj9{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.css-3ojehk{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;margin-right:4px;}.css-100alwu{display:inline-block;border-radius:50%;line-height:1;overflow:hidden;vertical-align:middle;}.css-1dtnjt5{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-10ougpm{color:rgba(0,0,0,0.87);font-size:14px;font-weight:600;line-height:1.8;margin-right:4px;text-wrap:break-word;word-break:break-all;}.css-1ay9vb9{margin-right:16px;}.css-m19uds{color:rgba(0,0,0,0.6);font-size:14px;line-height:1.8;}.css-cgzq40{color:rgba(0,0,0,0.87);font-size:32px;font-weight:bold;line-height:1.4;margin-top:8px;text-wrap:break-word;word-break:break-all;}.css-1wa99t2{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.6);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:8px;}.css-1l3zk9f{color:rgba(0,0,0,0.6);font-size:20px;margin-right:8px;}.css-4czcte{margin-right:4px;color:inherit;font-size:14px;line-height:1.8;}.css-4czcte:not(:last-child)::after{content:',';margin-right:4px;}.css-1yzj1fm{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:32px;}.css-1uv1qiv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-size:20px;height:32px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin-right:16px;outline:none;padding:0;width:32px;}.css-109dbrr{background-color:#F9F9F9;border-top:1px solid rgba(0,0,0,0.12);bottom:0;box-shadow:0px 1px 4px rgba(0,0,0,0.14);display:none;height:calc(env(safe-area-inset-bottom,0px) + 56px);-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding-bottom:env(safe-area-inset-bottom);position:-webkit-sticky;position:sticky;width:100%;z-index:2000;}@media (max-width:770px){.css-109dbrr{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}.css-5jpx49{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:space-evenly;-webkit-justify-content:space-evenly;-ms-flex-pack:space-evenly;justify-content:space-evenly;width:100%;}.css-mnxgyc{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1vlpknv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;margin-right:4px;background-color:#FFFFFF;}.css-fsjkhv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1b17vb0{color:#6E6F70;font-size:14px;font-weight:bold;margin-left:4px;}.css-7i7f4d{display:none;bottom:initial;left:initial;right:initial;top:initial;bottom:32px;right:0;}</style></head><body><div class="allWrapper"><div><div id="GlobalHeader-react-component-3e3a6e38-01cc-47fd-a08a-acf4aa029855"><div class="st-Header"><div class="st-Header_container"><div class="st-Header_start"><a href="/" class="st-Header_logo"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 426.57 130"><circle cx="167.08" cy="21.4" r="12.28"></circle><path d="M250.81 29.66h23.48v18.9h-23.48z"></path><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z"></path><circle cx="216.33" cy="21.4" r="12.28"></circle></svg></a><div class="st-Header_communitySelector" tabindex="0"><span class="fa fa-caret-down"></span></div><div class="st-Header_dropdown"><div class="st-Header_dropdownHeading">Qiita Teams that are logged in</div><div class="st-Header_dropdownItemNote">You are not logged in to any team</div><hr class="st-Header_dropdownDivider st-Header_dropdownDivider-shrink"/><a href="https://teams-center.qiita.com/find_team" class="st-Header_dropdownItem"><span class="fa fa-fw fa-sign-in st-Header_dropdownItemIcon"></span><div>Log in to Qiita Team</div></a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Community</div><a href="/organizations" class="st-Header_dropdownItem">Organization</a><a href="/official-events/open" class="st-Header_dropdownItem">Event</a><a href="/advent-calendar" class="st-Header_dropdownItem">Advent Calendar</a><a href="https://qiitadon.com/" class="st-Header_dropdownItem" target="_blank">Qiitadon (β)</a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Service</div><a href="https://jobs.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Jobs</a><a href="https://zine.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Zine</a><a href="https://blog.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Blog</a></div><form class="st-Header_search" action="/search" method="get"><span class="fa fa-search st-Header_searchIcon"></span><input type="search" class="st-Header_searchInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form><form class="st-Header_searchModal" action="/search" method="get"><input type="text" class="st-Header_searchModalInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form></div><div class="st-Header_end"><div class="st-Header_searchButton"><span class="fa fa-search"></span></div><a class="st-Header_signupButton" href="/signup?redirect_to=%2FtoRisouP%2Fitems%2F16bd06aa303a1bb1a747">Signup</a><a class="st-Header_loginLink" href="/login?redirect_to=%2FtoRisouP%2Fitems%2F16bd06aa303a1bb1a747">Login</a></div><div class="st-Header_overlay"></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="GlobalHeader" data-dom-id="GlobalHeader-react-component-3e3a6e38-01cc-47fd-a08a-acf4aa029855">{"unreadNotificationsCount":null,"realms":[{"humanName":"Qiita","isCurrentRealm":true,"isQiita":true,"isQiitaTeam":false,"loggedInUser":null,"teamId":null,"url":"https://qiita.com/"}],"teamFindUrl":"https://teams-center.qiita.com/find_team","isTeamOnlyUser":null,"currentUser":null}</script>
      
</div><div class="st-HeaderAlert st-HeaderAlert-warning"><div class="st-HeaderAlert_body"></div></div><script type="application/ld+json">{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"/","name":"Qiita"}},{"@type":"ListItem","position":2,"item":{"@id":"/tags/csharp","name":"C#"}}]}</script><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","datePublished":"2020-05-26T03:21:48.000+09:00","dateModified":"2020-07-14T16:52:07.000+09:00","headline":"【VRChat】 Udon開発する上での注意点【Unity】","image":"https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0\u0026w=1200\u0026mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND00NENRVmxKRGFHRjA0NENSSUZWa2IyN3Bsb3ZubWJyamdabmpnb3ZrdUlyamdhZmpnYTdtczZqbWhJX25ncm5qZ0pCVmJtbDBlZU9Ba1EmdHh0LWNvbG9yPSUyMzMzMyZ0eHQtZm9udD1IaXJhZ2lubyUyMFNhbnMlMjBXNiZ0eHQtc2l6ZT01NCZ0eHQtY2xpcD1lbGxpcHNpcyZ0eHQtYWxpZ249Y2VudGVyJTJDbWlkZGxlJnM9ZGYxOGQ1MmI3MTBhODE4YmY3ZDNhNzlhZTQwYWVhNjE\u0026mark-align=center%2Cmiddle\u0026blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RSFJ2VW1semIzVlEmdHh0LWNvbG9yPSUyMzMzMyZ0eHQtZm9udD1IaXJhZ2lubyUyMFNhbnMlMjBXNiZ0eHQtc2l6ZT00NSZ0eHQtYWxpZ249cmlnaHQlMkNib3R0b20mcz1jNzExYWUyZTRiN2FhZjdjNTk3N2QyMGUwMTBlZjA2ZA\u0026blend-align=center%2Cmiddle\u0026blend-mode=normal\u0026s=97d94ced277eb129d15cc68d6fb09b5b","mainEntityOfPage":"https://qiita.com/toRisouP/items/16bd06aa303a1bb1a747","author":{"@type":"Person","address":"","email":null,"identifier":"toRisouP","name":"toRisouP","image":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F47146%2Fprofile-images%2F1473690888?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=61879b88c08bddf8018304cc1ace2fc4","url":"https://qiita.com/toRisouP","description":"","memberOf":[{"@type":"Organization","address":"〒060-0031 北海道札幌市中央区北一条東四丁目1番地1　サッポロファクトリー1条館","legalName":"株式会社 バーチャルキャスト","image":"https://s3-ap-northeast-1.amazonaws.com/qiita-organization-image/3c14012520e7982527749362e5a0fd9efd6cc0c2/original.jpg?1545792523","logo":"https://s3-ap-northeast-1.amazonaws.com/qiita-organization-image/bf42a888e9366aa2d817bd985e231c12c6d80826/original.jpg?1545792589","identifier":"virtualcast","description":"VRシステム(バーチャルキャスト)の開発、運営、企画"}]},"publisher":{"@type":"Organization","name":"Qiita","logo":{"@type":"ImageObject","url":"//cdn.qiita.com/assets/public/qiita-logo-c39ded593afa388e2e1ba435b110554e.png"}}}</script><style type="text/css">.wb-CampaignLink {
  background-color: #333333;
  width: 100%;
}

.wb-CampaignLink_container {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  max-width: 1100px;
  margin: 0 auto;
  font-size: 13px;
  padding: 0.8em;
}
.wb-CampaignLink_container > a {
  color: #fff;
}

.wb-CampaignLink_container > a:hover {
  text-decoration: underline;
}</style><div class="wb-CampaignLink"><div class="wb-CampaignLink_container"><a target="_blank" id="header_text_message_1" href="https://increments.connpass.com/event/211948/">Qiita創業者海野氏登壇！Qiita エンジニアフェスタ 2021 Online Meetupを9/9(木)に開催</a><a target="_blank" id="header_text_message_2" href="https://increments.connpass.com/event/211948/">詳しくはこちら</a></div><script>td.trackEvent(
  'front_events',
  {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"toRisouP","type":"items","id":"16bd06aa303a1bb1a747"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Show","data":{"message":"Qiita創業者海野氏登壇！Qiita エンジニアフェスタ 2021 Online Meetupを9/9(木)に開催","url":"https://increments.connpass.com/event/211948/","sub_message":"詳しくはこちら"}}
)</script><script>document.getElementById('header_text_message_1').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"toRisouP","type":"items","id":"16bd06aa303a1bb1a747"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":1,"pos_id":"header_text_message_1","message":"Qiita創業者海野氏登壇！Qiita エンジニアフェスタ 2021 Online Meetupを9/9(木)に開催","url":"https://increments.connpass.com/event/211948/","sub_message":"詳しくはこちら"}}
  )
})</script><script>document.getElementById('header_text_message_2').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"toRisouP","type":"items","id":"16bd06aa303a1bb1a747"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":1,"pos_id":"header_text_message_2","message":"Qiita創業者海野氏登壇！Qiita エンジニアフェスタ 2021 Online Meetupを9/9(木)に開催","url":"https://increments.connpass.com/event/211948/","sub_message":"詳しくはこちら"}}
  )
})</script></div><script type="application/json" id="js-react-on-rails-context">{"railsEnv":"production","inMailer":false,"i18nLocale":"en","i18nDefaultLocale":"en","href":"https://qiita.com/toRisouP/items/16bd06aa303a1bb1a747","location":"/toRisouP/items/16bd06aa303a1bb1a747","scheme":"https","host":"qiita.com","port":null,"pathname":"/toRisouP/items/16bd06aa303a1bb1a747","search":null,"httpAcceptLanguage":null,"actionPath":"public/items#show","settings":{"analyticsTrackingId":"UA-24675221-12","assetsMap":{},"csrfToken":"uOrhD7qWyLgxI8XACPhU1HsjsXkq24AaHhzAItBC7IYOnPMo4etLn7f2fV+Nl+7Bcf5y/Z6Gj6BtO3HD4y7FZA==","locale":"en"},"currentUser":null,"isLoggedIn":false,"recaptchaSiteKey":"6LfNkiQTAAAAAM3UGnSquBy2akTITGNMO_QDxMw6","serverSide":false}</script>
<div id="PersonalArticlePage-react-component-6dfa7e19-f6a2-4e60-aef4-54348947c3bd"><div class="p-items_wrapper"><div class=" css-17jxvjw"><div class="css-11t2ec1"><div class="css-1dvr2p8"><button class=" css-18lkoru"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/toRisouP/items/16bd06aa303a1bb1a747/likers" class="css-1iupg5d">67</a></div><div class="css-ijvq0v"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-115f4t">49</span></div><div class="css-1b8uj5v"><span class="fa fa-twitter"></span></div><div class="css-1b8uj5v"><span class="fa fa-facebook"></span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-fcbn8c"><div class="css-1gj7nt">Improve article</div><a href="/drafts/16bd06aa303a1bb1a747/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/toRisouP/items/16bd06aa303a1bb1a747/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/toRisouP/items/16bd06aa303a1bb1a747/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/toRisouP/items/16bd06aa303a1bb1a747/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/toRisouP/items/16bd06aa303a1bb1a747.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div><div class="p-items_options"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_toc"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_main"><div class="css-1nzh4zz"><span class="fa fa-fw fa-warning css-38fzdi"></span><p>More than 1 year has passed since last update.</p></div><div class="css-helsa7"><div class="css-8qb8m4"><div class="css-2imjyh"><div class="css-he5w1s"><div class="css-70qvj9"><div class="css-3ojehk"><a href="/toRisouP"><img class="css-100alwu eyfquo10" src="https://qiita-image-store.s3.amazonaws.com/0/47146/profile-images/1473690888" width="24" height="24" loading="lazy"/></a></div><div class="css-1dtnjt5"><a href="/toRisouP" class="css-10ougpm">@<!-- -->toRisouP</a><div class="css-1ay9vb9"><span><meta content="2020-05-25T18:21:48Z"/><time dateTime="2020-07-14T07:52:07Z" class="css-m19uds">updated at 2020-07-14</time></span></div></div></div></div></div><h1 class="css-cgzq40">【VRChat】 Udon開発する上での注意点【Unity】</h1><div class="css-1wa99t2"><span class="fa fa-tags mr-1of2 css-1l3zk9f" aria-hidden="true"></span><a href="/tags/csharp" class="css-4czcte">C#</a><a href="/tags/unity" class="css-4czcte">Unity</a><a href="/tags/vrchat" class="css-4czcte">VRChat</a><a href="/tags/udon" class="css-4czcte">Udon</a><a href="/tags/udonsharp" class="css-4czcte">UdonSharp</a></div></div><section class="it-MdContent"><div id="personal-public-article-body"><div>
<h1>
<span id="はじめに" class="fragment"></span><a href="#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB"><i class="fa fa-link"></i></a>はじめに</h1>

<p>この記事は<code>VRChat</code>における<code>Udon</code>および<code>UdonSharp</code>(<code>U#</code>)を使った際の備忘録です。<br>
これから<code>Udon</code>を使い始める人のために書き連ねておきます。</p>

<p><strong>この記事は2020/5/26現在のVRChatを前提に書いています。</strong></p>

<h1>
<span id="udonとパフォーマンスチューニング" class="fragment"></span><a href="#udon%E3%81%A8%E3%83%91%E3%83%95%E3%82%A9%E3%83%BC%E3%83%9E%E3%83%B3%E3%82%B9%E3%83%81%E3%83%A5%E3%83%BC%E3%83%8B%E3%83%B3%E3%82%B0"><i class="fa fa-link"></i></a>Udonとパフォーマンスチューニング</h1>

<p><code>Udon</code>は実質、UnityのAPIをラップして呼び出しているだけにすぎません。<br>
そのため<strong>Unityでプログラミングをするときと同じ様にパフォーマンスにもこだわる必要があります。</strong></p>

<h2>
<span id="プロファイラを見よう" class="fragment"></span><a href="#%E3%83%97%E3%83%AD%E3%83%95%E3%82%A1%E3%82%A4%E3%83%A9%E3%82%92%E8%A6%8B%E3%82%88%E3%81%86"><i class="fa fa-link"></i></a>プロファイラを見よう</h2>

<p>Unityには標準で<code>Profiler</code>という機能が備わっています。<br>
1フレーム単位でどのような処理が実行され、それにどれくらいの時間がかかっているかをチェックすることができます。</p>

<p><a href="https://camo.qiitausercontent.com/cd3305e9722ec15f29a012fd05f0cca67f96317d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f34373134362f33633164633163352d366138322d633338372d663339652d6662396431646639346637302e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F47146%2F3c1dc1c5-6a82-c387-f39e-fb9d1df94f70.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=65ccfed31649dd2434adf6d553a8ec7d" alt="OpenProfiler.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/47146/3c1dc1c5-6a82-c387-f39e-fb9d1df94f70.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F47146%2F3c1dc1c5-6a82-c387-f39e-fb9d1df94f70.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=5b091309a98eb601e65adefd20c27b29 1x" loading="lazy"></a></p>

<p><a href="https://camo.qiitausercontent.com/ad1d42c880333548187b8bf71957bd43adb50b4b/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f34373134362f37663437323165362d343834642d386666382d373434362d3136353435653333626337632e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F47146%2F7f4721e6-484d-8ff8-7446-16545e33bc7c.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=d66eb4e740b689b7962331a32f0c5bc0" alt="Profiler.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/47146/7f4721e6-484d-8ff8-7446-16545e33bc7c.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F47146%2F7f4721e6-484d-8ff8-7446-16545e33bc7c.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=47718858f1443d0ba4efe77e867c56de 1x" loading="lazy"></a></p>

<p>詳しい使い方はこちらを参考にしてください。</p>

<ul>
<li><a href="https://docs.unity3d.com/ja/2018.4/Manual/ProfilerWindow.html" rel="nofollow noopener" target="_blank">Profiler ウィンドウ</a></li>
<li><a href="http://tsubakit1.hateblo.jp/entry/2016/05/09/073000" rel="nofollow noopener" target="_blank">【Unity】CPUプロファイラでパフォーマンスを改善する 前編</a></li>
<li><a href="http://tsubakit1.hateblo.jp/entry/2016/06/20/222612" rel="nofollow noopener" target="_blank">【Unity】CPUプロファイラでパフォーマンスを改善する 後編</a></li>
<li><a href="https://youtu.be/rvnsU8oCMcI" rel="nofollow noopener" target="_blank">【Unite 2017 Tokyo】最適化をする前に覚えておきたい技術</a></li>
</ul>

<p>なお、<strong>プロファイラで動作を監視すること自体がかなりの負荷となります。</strong><br>
プロファイラを使っている間はfpsがガタ落ちしますが、しょうがないと割り切ってください。<br>
（普通のUnity開発なら回避策があるのですが、<code>VRChat</code>だと仕様上どうしようもできないです）</p>

<h3>
<span id="raw-hierarchyで調査" class="fragment"></span><a href="#raw-hierarchy%E3%81%A7%E8%AA%BF%E6%9F%BB"><i class="fa fa-link"></i></a>Raw Hierarchyで調査</h3>

<p>プロファイラの表示を<code>Raw Hierarchy</code>に切り替えて時間がかかっている順にソートすると何がボトルネックか調査することができます。<br>
とくにこのモードだと<code>Udon VM</code>の中身の実行順も見ることが出来ます。</p>

<p><a href="https://camo.qiitausercontent.com/e113191d1327877f7725e7369ed72adff7a8f330/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f34373134362f65313934666365332d356533662d613264322d616361662d3835613534306534643734352e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F47146%2Fe194fce3-5e3f-a2d2-acaf-85a540e4d745.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=f839f0b2c24eb4fe4fc93c2314f6e795" alt="Profiler2.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/47146/e194fce3-5e3f-a2d2-acaf-85a540e4d745.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F47146%2Fe194fce3-5e3f-a2d2-acaf-85a540e4d745.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=29540e1364ef1a8123f3780521738355 1x" loading="lazy"></a></p>

<p><code>Udon</code>の仕様上、どのスクリプトであるか名前はわからないのですが、メソッド呼び出しの様子からどのスクリプトかあたりをつけることはできます。</p>

<h2>
<span id="gcアロケートを避けよう" class="fragment"></span><a href="#gc%E3%82%A2%E3%83%AD%E3%82%B1%E3%83%BC%E3%83%88%E3%82%92%E9%81%BF%E3%81%91%E3%82%88%E3%81%86"><i class="fa fa-link"></i></a>GCアロケートを避けよう</h2>

<p>とくに負荷の原因となりやすいものは<code>GC Alloc</code>と表示されているものです。<br>
これはUnity上で、プログラムを実行するために必要なメモリを確保する動作を表しています。<br>
（<code>GCアロケート</code>と呼ぶ）</p>

<p>そしてこの確保したメモリですが、解放される瞬間に<code>VRChat</code>が一瞬フリーズしてしまいます。<br>
（<code>GC</code>（ガベージコレクタ）が実行される、と呼びます）</p>

<p><code>GC</code>が実行される頻度は少ないほどfpsに与える影響は小さくなります。<br>
逆に高頻度で<code>GC</code>が実行されると、体感できるレベル（ひどいと数十fps）で影響がでてきます。<br>
そのため<code>GC</code>の実行をさける、つまり<code>GC Alloc</code>の頻度を下げる工夫が必要となります。</p>

<h3>
<span id="プリミティブ型以外はボックス化される" class="fragment"></span><a href="#%E3%83%97%E3%83%AA%E3%83%9F%E3%83%86%E3%82%A3%E3%83%96%E5%9E%8B%E4%BB%A5%E5%A4%96%E3%81%AF%E3%83%9C%E3%83%83%E3%82%AF%E3%82%B9%E5%8C%96%E3%81%95%E3%82%8C%E3%82%8B"><i class="fa fa-link"></i></a>プリミティブ型以外はボックス化される</h3>

<p>C#には<a href="https://docs.microsoft.com/ja-jp/dotnet/csharp/language-reference/builtin-types/built-in-types" rel="nofollow noopener" target="_blank">プリミティブ型（組み込み型）</a>というものがあります。たとば<code>int</code>や<code>float</code>など。<br>
これらはC#に最初から定義されている型であり、基本的にGCを気にせずノーコストで利用することができます。</p>

<p>そしてUdonですが、<strong>プリミティブ型以外の型を触るとボックス化されてGCアロケートが起きます</strong>。<br>
たとえ<code>Vector3</code>や<code>Quaternion</code>といった<strong>構造体であってもGCアロケートします。</strong></p>

<p>このあたりは回避不可能なので、仕様と割り切って付き合っていくしか無いとは思います。</p>

<h3>
<span id="stringは避けよう" class="fragment"></span><a href="#string%E3%81%AF%E9%81%BF%E3%81%91%E3%82%88%E3%81%86"><i class="fa fa-link"></i></a><code>string</code>は避けよう</h3>

<p><code>C#</code>の仕様上、<code>string</code>（文字列）は定義するだけでかなりの<code>GC Alloc</code>を引き起こします。<br>
そのため<code>Update()</code>で毎フレーム文字列を生成するなどしていると、パフォーマンスにかなりの悪影響を及ぼします。</p>

<p>極力<code>string</code>は使わない、使うにしても必要なタイミングで必要なだけ生成する工夫が必要です。</p>

<h3>
<span id="uは別コンポーネントのメソッド呼び出しがコスト" class="fragment"></span><a href="#u%E3%81%AF%E5%88%A5%E3%82%B3%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%8D%E3%83%B3%E3%83%88%E3%81%AE%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E5%91%BC%E3%81%B3%E5%87%BA%E3%81%97%E3%81%8C%E3%82%B3%E3%82%B9%E3%83%88"><i class="fa fa-link"></i></a><code>U#</code>は別コンポーネントのメソッド呼び出しがコスト</h3>

<p>非常に便利な<code>UdonSharp</code>ですが、見えないところでコストがかかります。<br>
それは<code>UdonSharpBehaviour</code>から別の<code>UdonSharpBehaviour</code>なオブジェクトのメソッドを呼びだす時です。</p>

<p>たとえば、次のような<code>U#</code>スクリプトがあったとして。</p>

<div class="code-frame" data-lang="cs">
<div class="code-lang"><span class="bold">Runner</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">using</span> <span class="nn">UdonSharp</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UnityEngine</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">DebugTest</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">Runner</span> <span class="p">:</span> <span class="n">UdonSharpBehaviour</span>
    <span class="p">{</span>
        <span class="k">private</span> <span class="n">Rigidbody</span> <span class="n">_rigidbody</span><span class="p">;</span>

        <span class="k">void</span> <span class="nf">Start</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="n">_rigidbody</span> <span class="p">=</span> <span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">Rigidbody</span><span class="p">&gt;();</span>
        <span class="p">}</span>

        <span class="k">public</span> <span class="n">Vector3</span> <span class="nf">GetCurrentVelocity</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="n">_rigidbody</span><span class="p">.</span><span class="n">velocity</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<div class="code-frame" data-lang="cs">
<div class="code-lang"><span class="bold">Observer</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">using</span> <span class="nn">UdonSharp</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UnityEngine</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">DebugTest</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">Observer</span> <span class="p">:</span> <span class="n">UdonSharpBehaviour</span>
    <span class="p">{</span>
        <span class="p">[</span><span class="n">SerializeField</span><span class="p">]</span> <span class="k">private</span> <span class="n">Runner</span> <span class="n">_runner</span><span class="p">;</span>

        <span class="k">private</span> <span class="k">void</span> <span class="nf">Update</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="c1">// 取得するだけで何も使わない</span>
            <span class="kt">var</span> <span class="n">velocity</span> <span class="p">=</span> <span class="n">_runner</span><span class="p">.</span><span class="nf">GetCurrentVelocity</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<p>これの<code>Observer.cs</code>側を<code>Udon Assembly</code>にトランスパイルした結果をみるとこうなっています。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>_update:

    PUSH, __0_const_intnl_SystemUInt32

    # {

    # var velocity = _runner.GetCurrentVelocity();
    PUSH, _runner
    PUSH, __0_const_intnl_SystemString
    EXTERN, "VRCUdonCommonInterfacesIUdonEventReceiver.__SendCustomEvent__SystemString__SystemVoid"
    PUSH, _runner
    PUSH, __1_const_intnl_SystemString
    PUSH, __0_intnl_SystemObject
    EXTERN, "VRCUdonCommonInterfacesIUdonEventReceiver.__GetProgramVariable__SystemString__SystemObject"
    PUSH, __0_intnl_SystemObject
    PUSH, __0_intnl_UnityEngineVector3
    COPY
    PUSH, __0_intnl_UnityEngineVector3
    PUSH, __0_velocity_Vector3
    COPY
    PUSH, __0_intnl_returnTarget_UInt32 #Function epilogue
    COPY
    JUMP_INDIRECT, __0_intnl_returnTarget_UInt32
</code></pre></div></div>

<p>注目して欲しいところは、他の<code>UdonSharpBehaviour</code>へのメソッド呼び出しが<code>SendCustomEvent</code>と<code>GetProgramVariable</code>に変換されているところです。<br>
（メソッドに引数を渡すと<code>SetProgramVariable</code>も追加される）</p>

<p>そしてこの<code>SendCustomEvent</code>と<code>GetProgramVariable</code>ですが、<strong>なぜか<code>GC Alloc</code>します</strong>。</p>

<p><a href="https://camo.qiitausercontent.com/114142f74af42606458bc9d29712c127a3746f7c/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f34373134362f35636230666536362d646139612d633330302d333332342d3065326538396231376532662e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F47146%2F5cb0fe66-da9a-c300-3324-0e2e89b17e2f.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=35135f6872a166fb01c0604b097996cd" alt="GCAlloc.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/47146/5cb0fe66-da9a-c300-3324-0e2e89b17e2f.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F47146%2F5cb0fe66-da9a-c300-3324-0e2e89b17e2f.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=5931d949dcb97e6fef8b3d4fed9f75ac 1x" loading="lazy"></a><br>
（Udon内部実装の問題なのでおそらく回避不可）</p>

<p>ということで、<code>U#</code>を用いた場合、気軽にメソッド呼び出しを実行するとそれだけで<code>GC Alloc</code>が発生します。<br>
普通のUnity開発ではノーコストな操作が、<code>U#</code>ではコストがかかる点はかなり罠な気がします。</p>

<h2>
<span id="ontriggerstay大暴走" class="fragment"></span><a href="#ontriggerstay%E5%A4%A7%E6%9A%B4%E8%B5%B0"><i class="fa fa-link"></i></a>OnTriggerStay大暴走</h2>

<p><code>UdonBehaviour</code>には<code>OnTriggerStay</code>が定義されています。<br>
そのため<strong>「<code>VRC_Pickup</code> + <code>UdonBehaviour</code>なオブジェクト」を一箇所に大量にまとめて配置すると<code>OnTriggerStay</code>が暴走します。</strong></p>

<p><a href="https://camo.qiitausercontent.com/93fc97f66df7b2c3aa113e657714ebdf11c5d17e/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f34373134362f61343136313634362d386332332d313233612d333837392d6230373933626162366231642e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F47146%2Fa4161646-8c23-123a-3879-b0793bab6b1d.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=baa4949e5d2f96c6a01af3b82e818c45" alt="OnTriggerStay.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/47146/a4161646-8c23-123a-3879-b0793bab6b1d.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F47146%2Fa4161646-8c23-123a-3879-b0793bab6b1d.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=49cd836e01ad5f3754c4d7062d05d467 1x" loading="lazy"></a><br>
（50個ほど重ねて配置した例）</p>

<p>数個程度なら問題ないですが、数十個レベルで一箇所にまとめると<code>fps</code>がガタ落ちするレベルで影響がでてきます。<br>
アイテムを一箇所にまとめておいて擬似的な「無限湧き」を作るようなことはやめておきましょう。</p>

<h1>
<span id="udon-synced-variables役に立たない問題" class="fragment"></span><a href="#udon-synced-variables%E5%BD%B9%E3%81%AB%E7%AB%8B%E3%81%9F%E3%81%AA%E3%81%84%E5%95%8F%E9%A1%8C"><i class="fa fa-link"></i></a>Udon Synced Variables役に立たない問題</h1>

<p>結論からいうと<code>Udon Synced Variables</code>はパフォーマンスのために <strong>「使わない」</strong> が正解です。</p>

<p><code>Udon</code>には<code>Udon Synced Variables</code>という機能があります。<br>
こちらは指定したプリミティブな変数をネットワークをまたいで同期する機能です。<br>
（<code>U#</code>でいうところの<code>[UdonSynced]</code>）</p>

<p>ですがこの<code>Udon Synced Variables</code>、挙動が結構ヤバイです。</p>

<ul>
<li>
<code>Owner</code>は<strong>常時</strong>パラメータを相手に送信し続ける</li>
<li>転送量が増えると<strong>パケットロスして不着となる</strong>
</li>
<li>スループットがかなり低い</li>
</ul>

<p>同期するオブジェクト、変数の数が増えると<code>Death Run Detected: dropped N events</code>というエラーが大量に出てきます。<br>
これが発生してしまうと、変数同期の成功率が極端に下がってしまいます。</p>

<p><a href="https://camo.qiitausercontent.com/785a4a5674ae45ff6721a63ec721a5f476868fe9/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f34373134362f62633862656462302d366339662d636635622d373662622d3639376630343566313533382e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F47146%2Fbc8bedb0-6c9f-cf5b-76bb-697f045f1538.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=9f4d81ff35c3d01c745f3657449b743d" alt="image.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/47146/bc8bedb0-6c9f-cf5b-76bb-697f045f1538.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F47146%2Fbc8bedb0-6c9f-cf5b-76bb-697f045f1538.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=203ab6ca25c31fcc7046b424b4a79c4e 1x" loading="lazy"></a><br>
(大量にパケロスしている様子)</p>

<p>そのため、<code>Udon Synced Variables</code>で大量のデータを同期することはまったくオススメできません。</p>

<p>たとえば、オブジェクトの位置と姿勢（<code>Vector3</code> + <code>Quaternion</code>）を<code>Udon Synced Variables</code>で同期するのは止めたほうがいいでしょう。<br>
私が試した場合では<strong>オブジェクト数が20個を超えたあたりからパケロスが発生しました。</strong><br>
さらに<code>VRChat</code>の通信にかなりの負荷をかけるためか、<code>Player</code>の挙動までもが不安定になりました。</p>

<p>ちなみに、この仕様ではほぼ使い物にならないので<a href="https://vrchat.canny.io/vrchat-udon-closed-alpha-feedback/p/adjusting-the-transmission-frequency-of-udon-synced-variables" rel="nofollow noopener" target="_blank">フィードバック報告済み</a>ではあります。</p>

<h4>
<span id="補足-udon-synced-variablesについての公式フォーラムでの報告" class="fragment"></span><a href="#%E8%A3%9C%E8%B6%B3-udon-synced-variables%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E3%81%AE%E5%85%AC%E5%BC%8F%E3%83%95%E3%82%A9%E3%83%BC%E3%83%A9%E3%83%A0%E3%81%A7%E3%81%AE%E5%A0%B1%E5%91%8A"><i class="fa fa-link"></i></a>補足: Udon Synced Variablesについての公式フォーラムでの報告</h4>

<p><code>VRChat</code>のフォーラムの<a href="https://ask.vrchat.com/t/how-to-sync-with-udon/449/6" rel="nofollow noopener" target="_blank">こちらの投稿</a>では次のように報告されています。</p>

<ul>
<li>2つの<code>Udon Synced Variables</code>な文字列をもつ<code>Udon Behaviour</code>をシーンにいくつか配置</li>
<li>8個置いた程度ではパケロスはほぼゼロ</li>
<li>16個置くとパケロスが発生する</li>
</ul>

<p>とのことなので、<code>Udon Synced Variables</code>を使う場合はオブジェクト数が少ない場合のみにした方が無難でしょう。</p>

<h3>
<span id="文字列にエンコードして同期するは高コスト" class="fragment"></span><a href="#%E6%96%87%E5%AD%97%E5%88%97%E3%81%AB%E3%82%A8%E3%83%B3%E3%82%B3%E3%83%BC%E3%83%89%E3%81%97%E3%81%A6%E5%90%8C%E6%9C%9F%E3%81%99%E3%82%8B%E3%81%AF%E9%AB%98%E3%82%B3%E3%82%B9%E3%83%88"><i class="fa fa-link"></i></a>文字列にエンコードして同期する、は高コスト</h3>

<p>また、とある場所で「オブジェクトの状態を<code>string</code>にエンコードして<code>Udon Synced Variables</code>で同期する」という手法が提案されていました。</p>

<p><code>Udon Synced Variables</code>で配列が同期できないのを回避するために編み出された手法ですが、こちらかなりコストが高いです。</p>

<ul>
<li>大量の<code>string</code>を生成することによる<code>GC Alloc</code>
</li>
<li>長い文字列を常時伝送するネットワークへの負荷</li>
</ul>

<p>そのため本当にどうしようもないときの最終手段としとっておいて、常用はしないほうが無難でしょう。<br>
（とはいえどこれしか方法が無いならば使わざるを得ないのが<code>Udon</code>のツライところなのですが…。）</p>

<h1>
<span id="位置同期" class="fragment"></span><a href="#%E4%BD%8D%E7%BD%AE%E5%90%8C%E6%9C%9F"><i class="fa fa-link"></i></a>位置同期</h1>

<p>オブジェクトの位置を同期する方法ですが、次の2とおり（実質1とおり）があります。</p>

<ul>
<li>A: <code>Udon Synced Variables</code>で位置姿勢を送る</li>
<li>B: <code>Udon Behaviour</code>の<code>Synchronize Position</code>を使う</li>
</ul>

<p>Aのパターンは前述の問題があるのでオススメできません。<br>
ということで実質的にBの「<code>Synchronize Position</code>」一択になります。</p>

<p>この<code>Synchronize Position</code>はちゃんと差分同期してくれるため、大量にオブジェクトがあってもネットワークへの負荷は小さいです。</p>

<p><a href="https://camo.qiitausercontent.com/265ced0446e05c1026a492f3390ec6a1f7ceac58/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f34373134362f32396261366261382d336461382d353264622d643161302d6330633238393963626538652e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F47146%2F29ba6ba8-3da8-52db-d1a0-c0c2899cbe8e.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=72952c35ad25b0b61c43fd09d31741e9" alt="Synced.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/47146/29ba6ba8-3da8-52db-d1a0-c0c2899cbe8e.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F47146%2F29ba6ba8-3da8-52db-d1a0-c0c2899cbe8e.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=a687b4668970524f18430f9143d4badd 1x" loading="lazy"></a></p>

<h2>
<span id="synchronize-positionの同期ズレ問題" class="fragment"></span><a href="#synchronize-position%E3%81%AE%E5%90%8C%E6%9C%9F%E3%82%BA%E3%83%AC%E5%95%8F%E9%A1%8C"><i class="fa fa-link"></i></a>Synchronize Positionの同期ズレ問題</h2>

<p><code>Synchronize Position</code>は差分同期してくれるためネットワーク負荷は小さいのですが、<strong>大量にオブジェクトがある場合、後からワールドに参加した人には正しく位置と姿勢が同期されない場合</strong>があります。<br>
こちらはワールドにいるプレイヤー数とオブジェクト数によりますが、「5人以上かつ20個くらいオブジェクトを動かした」あたりから発生してきます。</p>

<p>原因はハッキリとはしていないのですが、どうも次の複数の問題が絡んでいるっぽいです。</p>

<ul>
<li><a href="https://vrchat.canny.io/vrchat-udon-closed-alpha-bugs/p/owner-information-is-not-correctly-synced-to-new-players-when-there-are-many-udo" rel="nofollow noopener" target="_blank">オブジェクトの<code>Owner</code>が新規参加した人に正しく同期されず、<code>Master</code>が<code>Owner</code>にみえる問題</a></li>
<li>
<code>Owner</code>がオブジェクトの位置同期が完了しない問題</li>
</ul>

<p>前者についてはバグ報告済みですが、後者についてはいまいち挙動がつかめていないため報告していません。</p>

<h3>
<span id="synchronize-positionの同期ズレ対策" class="fragment"></span><a href="#synchronize-position%E3%81%AE%E5%90%8C%E6%9C%9F%E3%82%BA%E3%83%AC%E5%AF%BE%E7%AD%96"><i class="fa fa-link"></i></a>Synchronize Positionの同期ズレ対策</h3>

<p>対処療法として、次の対策をいれましょう。<br>
実際にモノレールワールドで実施している対策がこれです。</p>

<ul>
<li>
<p><strong>触れていないPickupオブジェクトはすべてMasterが所有権をもつ</strong></p>

<ul>
<li>オブジェクトを持っている間は持っている人に<code>Owner</code>を渡す</li>
<li>手を離したら<code>Master</code>に所有権を返すようにする</li>
<li>若干安定するが、それでもまだ同期ズレは起きる</li>
</ul>
</li>
<li>
<p><strong>強制的に位置を同期する仕組みをいれる</strong></p>

<ol>
<li>
<code>Master</code>側で同期対象のオブジェクトをすべて少しだけ位置と姿勢をズラす</li>
<li>数秒後に元の位置姿勢に戻す</li>
</ol>
</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/52aee864699f095f51effc328310442cfb9b56d8/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f34373134362f39343965356636622d333661342d303563392d326331342d6165323534613765343265312e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F47146%2F949e5f6b-36a4-05c9-2c14-ae254a7e42e1.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=62708e29dc4182016619f02bf644ab27" alt="image.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/47146/949e5f6b-36a4-05c9-2c14-ae254a7e42e1.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F47146%2F949e5f6b-36a4-05c9-2c14-ae254a7e42e1.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=4de5d543aefd4d6e04628eb782317592 1x" loading="lazy"></a><br>
（同期ズレの発生をゼロにはできないので、同期ズレが起きる前提で対策した方が早い）</p>

<p>かなりツラミがある仕組みですが、現状これくらいしか大量のオブジェクトを安定して同期する方法がありません。</p>

<h1>
<span id="まとめ" class="fragment"></span><a href="#%E3%81%BE%E3%81%A8%E3%82%81"><i class="fa fa-link"></i></a>まとめ</h1>

<p><code>Udon</code>つらいし、<code>UdonSharp</code>も結構ツライです。<br>
それなりのUnity開発経験と、Unityでパフォーマンスチューニングをできるスキルが求められますね。</p>
</div></div></section><div class="css-1yzj1fm"><div class="css-1uv1qiv"><span class="fa fa-twitter"></span></div><div class="css-1uv1qiv"><span class="fa fa-facebook"></span></div></div><div class="apm-Content"><div class="apm-Content_title">Why not register and get more from Qiita?</div><ol class="apm-Content_list"><li>We will deliver articles that match you<div class="description">By following users and tags, you can catch up information on technical fields that you are interested in as a whole</div></li><li>you can read useful information later efficiently<div class="description">By &quot;stocking&quot; the articles you like, you can search right away</div></li><div><a class="apm-Content_help" href="https://help.qiita.com/ja/articles/qiita-login-user" target="_blank"><i class="fa fa-fw fa-arrow-circle-right"></i>What you can do with signing up</a></div></ol><a href="/signup?callback_action=login_or_signup&amp;redirect_to=%2FtoRisouP%2Fitems%2F16bd06aa303a1bb1a747&amp;realm=qiita" class="apm-Content_button apm-Content_button-signup">Sign up</a><a href="/login?callback_action=login_or_signup&amp;redirect_to=%2FtoRisouP%2Fitems%2F16bd06aa303a1bb1a747&amp;realm=qiita" class="apm-Content_button apm-Content_button-signin">Login</a></div></div><div class="css-helsa7"></div></div></div></div><div class="css-109dbrr"><div class="css-5jpx49"><div class="css-mnxgyc"><button class=" css-1vlpknv"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/toRisouP/items/16bd06aa303a1bb1a747/likers" class="css-1iupg5d">67</a></div><div class="css-fsjkhv"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-1b17vb0">49</span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-7i7f4d"><div class="css-1gj7nt">Improve article</div><a href="/drafts/16bd06aa303a1bb1a747/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/toRisouP/items/16bd06aa303a1bb1a747/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/toRisouP/items/16bd06aa303a1bb1a747/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/toRisouP/items/16bd06aa303a1bb1a747/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/toRisouP/items/16bd06aa303a1bb1a747.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="PersonalArticlePage" data-dom-id="PersonalArticlePage-react-component-6dfa7e19-f6a2-4e60-aef4-54348947c3bd">{"authorAnalyticsTrackingId":"UA-160669273-1","organizationAnalyticsTrackingId":null}</script>
      
<footer id="globalFooter" class="st-Footer"><div class="st-Footer_container"><div class="st-Footer_start"><div class="st-Footer_logo"><svg viewbox="0 0 426.57 130" xmlns="http://www.w3.org/2000/svg"><circle cx="167.08" cy="21.4" r="12.28" /><path d="M250.81 29.66h23.48v18.9h-23.48z" /><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z" /><circle cx="216.33" cy="21.4" r="12.28" /></svg></div><div class="st-Footer_catchcopy">How developers code is here.</div><div class="st-Footer_socials"><a class="fa fa-twitter" href="https://twitter.com/qiita"></a><a class="fa fa-facebook-square" href="https://www.facebook.com/qiita/"></a></div></div><div class="st-Footer_end"><div class="st-Footer_qiita"><div class="st-Footer_label">Qiita</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="/about">About</a><a href="/terms">Terms</a><a href="/privacy">Privacy</a><a target="_blank" href="http://help.qiita.com/ja/articles/qiita-community-guideline">Guideline</a><a target="_blank" href="https://help.qiita.com/ja/articles/others-brand-guideline">Design Guideline</a></div><div class="st-Footer_column"><a href="/release-notes">Release</a><a href="/api/v2/docs">API</a><a href="/feedback/new">ご意見</a><a href="https://help.qiita.com">Help</a><a target="_blank" href="https://qiita.com/ads?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Advertisement</a></div></div></div><div class="st-Footer_increments"><div class="st-Footer_label">Increments</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="https://increments.co.jp/company/">About</a><a href="https://increments.co.jp/jobs/">採用情報</a><a href="https://blog.qiita.com">Blog</a></div><div class="st-Footer_column"><a href="https://teams.qiita.com/">Qiita Team</a><a href="https://jobs.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Jobs</a><a href="https://zine.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Zine</a></div></div></div></div></div><div class="st-Footer_copyright">© 2011-2021 Increments Inc.</div></footer><div id="Snackbar-react-component-42ba4b49-2685-4977-b86a-8d68eea85409"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="Snackbar" data-dom-id="Snackbar-react-component-42ba4b49-2685-4977-b86a-8d68eea85409">{}</script>
      
<div id="LoginModal-react-component-eb5f31b2-beac-4dfd-b7f2-68e8c59af0a6"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="LoginModal" data-dom-id="LoginModal-react-component-eb5f31b2-beac-4dfd-b7f2-68e8c59af0a6">{}</script>
      
<div id="StockModal-react-component-14efb3ad-44ae-44ac-9cd0-e4079366ab61"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="StockModal" data-dom-id="StockModal-react-component-14efb3ad-44ae-44ac-9cd0-e4079366ab61">{}</script>
      
</div><div id="dataContainer" style="display: none;" data-config="{&quot;actionPath&quot;:&quot;public/items#show&quot;,&quot;settings&quot;:{&quot;analyticsTrackingId&quot;:&quot;UA-24675221-12&quot;,&quot;assetsMap&quot;:{},&quot;csrfToken&quot;:&quot;f0TgBf35vDqXfUlTyYHRFjOqvP1IMpCc1bTKN0nQMBTJMvIipoQ/HRGo8cxM7msDOXd/efxvnyamk3vWerwZ9g==&quot;,&quot;locale&quot;:&quot;en&quot;},&quot;currentUser&quot;:null}" /></body></html><script type="application/json" data-js-react-on-rails-store="AppStoreWithReactOnRails">{"snackbar":{"type":"","body":"","isActive":false},"article":{"article":{"body":"\n\u003ch1\u003e\n\u003cspan id=\"はじめに\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eはじめに\u003c/h1\u003e\n\n\u003cp\u003eこの記事は\u003ccode\u003eVRChat\u003c/code\u003eにおける\u003ccode\u003eUdon\u003c/code\u003eおよび\u003ccode\u003eUdonSharp\u003c/code\u003e(\u003ccode\u003eU#\u003c/code\u003e)を使った際の備忘録です。\u003cbr\u003e\nこれから\u003ccode\u003eUdon\u003c/code\u003eを使い始める人のために書き連ねておきます。\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003eこの記事は2020/5/26現在のVRChatを前提に書いています。\u003c/strong\u003e\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"udonとパフォーマンスチューニング\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#udon%E3%81%A8%E3%83%91%E3%83%95%E3%82%A9%E3%83%BC%E3%83%9E%E3%83%B3%E3%82%B9%E3%83%81%E3%83%A5%E3%83%BC%E3%83%8B%E3%83%B3%E3%82%B0\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eUdonとパフォーマンスチューニング\u003c/h1\u003e\n\n\u003cp\u003e\u003ccode\u003eUdon\u003c/code\u003eは実質、UnityのAPIをラップして呼び出しているだけにすぎません。\u003cbr\u003e\nそのため\u003cstrong\u003eUnityでプログラミングをするときと同じ様にパフォーマンスにもこだわる必要があります。\u003c/strong\u003e\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"プロファイラを見よう\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%97%E3%83%AD%E3%83%95%E3%82%A1%E3%82%A4%E3%83%A9%E3%82%92%E8%A6%8B%E3%82%88%E3%81%86\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eプロファイラを見よう\u003c/h2\u003e\n\n\u003cp\u003eUnityには標準で\u003ccode\u003eProfiler\u003c/code\u003eという機能が備わっています。\u003cbr\u003e\n1フレーム単位でどのような処理が実行され、それにどれくらいの時間がかかっているかをチェックすることができます。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/cd3305e9722ec15f29a012fd05f0cca67f96317d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f34373134362f33633164633163352d366138322d633338372d663339652d6662396431646639346637302e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F47146%2F3c1dc1c5-6a82-c387-f39e-fb9d1df94f70.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=65ccfed31649dd2434adf6d553a8ec7d\" alt=\"OpenProfiler.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/47146/3c1dc1c5-6a82-c387-f39e-fb9d1df94f70.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F47146%2F3c1dc1c5-6a82-c387-f39e-fb9d1df94f70.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=5b091309a98eb601e65adefd20c27b29 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/ad1d42c880333548187b8bf71957bd43adb50b4b/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f34373134362f37663437323165362d343834642d386666382d373434362d3136353435653333626337632e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F47146%2F7f4721e6-484d-8ff8-7446-16545e33bc7c.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=d66eb4e740b689b7962331a32f0c5bc0\" alt=\"Profiler.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/47146/7f4721e6-484d-8ff8-7446-16545e33bc7c.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F47146%2F7f4721e6-484d-8ff8-7446-16545e33bc7c.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=47718858f1443d0ba4efe77e867c56de 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e詳しい使い方はこちらを参考にしてください。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://docs.unity3d.com/ja/2018.4/Manual/ProfilerWindow.html\" rel=\"nofollow noopener\" target=\"_blank\"\u003eProfiler ウィンドウ\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"http://tsubakit1.hateblo.jp/entry/2016/05/09/073000\" rel=\"nofollow noopener\" target=\"_blank\"\u003e【Unity】CPUプロファイラでパフォーマンスを改善する 前編\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"http://tsubakit1.hateblo.jp/entry/2016/06/20/222612\" rel=\"nofollow noopener\" target=\"_blank\"\u003e【Unity】CPUプロファイラでパフォーマンスを改善する 後編\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://youtu.be/rvnsU8oCMcI\" rel=\"nofollow noopener\" target=\"_blank\"\u003e【Unite 2017 Tokyo】最適化をする前に覚えておきたい技術\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eなお、\u003cstrong\u003eプロファイラで動作を監視すること自体がかなりの負荷となります。\u003c/strong\u003e\u003cbr\u003e\nプロファイラを使っている間はfpsがガタ落ちしますが、しょうがないと割り切ってください。\u003cbr\u003e\n（普通のUnity開発なら回避策があるのですが、\u003ccode\u003eVRChat\u003c/code\u003eだと仕様上どうしようもできないです）\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"raw-hierarchyで調査\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#raw-hierarchy%E3%81%A7%E8%AA%BF%E6%9F%BB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eRaw Hierarchyで調査\u003c/h3\u003e\n\n\u003cp\u003eプロファイラの表示を\u003ccode\u003eRaw Hierarchy\u003c/code\u003eに切り替えて時間がかかっている順にソートすると何がボトルネックか調査することができます。\u003cbr\u003e\nとくにこのモードだと\u003ccode\u003eUdon VM\u003c/code\u003eの中身の実行順も見ることが出来ます。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/e113191d1327877f7725e7369ed72adff7a8f330/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f34373134362f65313934666365332d356533662d613264322d616361662d3835613534306534643734352e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F47146%2Fe194fce3-5e3f-a2d2-acaf-85a540e4d745.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=f839f0b2c24eb4fe4fc93c2314f6e795\" alt=\"Profiler2.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/47146/e194fce3-5e3f-a2d2-acaf-85a540e4d745.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F47146%2Fe194fce3-5e3f-a2d2-acaf-85a540e4d745.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=29540e1364ef1a8123f3780521738355 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003ccode\u003eUdon\u003c/code\u003eの仕様上、どのスクリプトであるか名前はわからないのですが、メソッド呼び出しの様子からどのスクリプトかあたりをつけることはできます。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"gcアロケートを避けよう\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#gc%E3%82%A2%E3%83%AD%E3%82%B1%E3%83%BC%E3%83%88%E3%82%92%E9%81%BF%E3%81%91%E3%82%88%E3%81%86\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eGCアロケートを避けよう\u003c/h2\u003e\n\n\u003cp\u003eとくに負荷の原因となりやすいものは\u003ccode\u003eGC Alloc\u003c/code\u003eと表示されているものです。\u003cbr\u003e\nこれはUnity上で、プログラムを実行するために必要なメモリを確保する動作を表しています。\u003cbr\u003e\n（\u003ccode\u003eGCアロケート\u003c/code\u003eと呼ぶ）\u003c/p\u003e\n\n\u003cp\u003eそしてこの確保したメモリですが、解放される瞬間に\u003ccode\u003eVRChat\u003c/code\u003eが一瞬フリーズしてしまいます。\u003cbr\u003e\n（\u003ccode\u003eGC\u003c/code\u003e（ガベージコレクタ）が実行される、と呼びます）\u003c/p\u003e\n\n\u003cp\u003e\u003ccode\u003eGC\u003c/code\u003eが実行される頻度は少ないほどfpsに与える影響は小さくなります。\u003cbr\u003e\n逆に高頻度で\u003ccode\u003eGC\u003c/code\u003eが実行されると、体感できるレベル（ひどいと数十fps）で影響がでてきます。\u003cbr\u003e\nそのため\u003ccode\u003eGC\u003c/code\u003eの実行をさける、つまり\u003ccode\u003eGC Alloc\u003c/code\u003eの頻度を下げる工夫が必要となります。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"プリミティブ型以外はボックス化される\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%97%E3%83%AA%E3%83%9F%E3%83%86%E3%82%A3%E3%83%96%E5%9E%8B%E4%BB%A5%E5%A4%96%E3%81%AF%E3%83%9C%E3%83%83%E3%82%AF%E3%82%B9%E5%8C%96%E3%81%95%E3%82%8C%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eプリミティブ型以外はボックス化される\u003c/h3\u003e\n\n\u003cp\u003eC#には\u003ca href=\"https://docs.microsoft.com/ja-jp/dotnet/csharp/language-reference/builtin-types/built-in-types\" rel=\"nofollow noopener\" target=\"_blank\"\u003eプリミティブ型（組み込み型）\u003c/a\u003eというものがあります。たとば\u003ccode\u003eint\u003c/code\u003eや\u003ccode\u003efloat\u003c/code\u003eなど。\u003cbr\u003e\nこれらはC#に最初から定義されている型であり、基本的にGCを気にせずノーコストで利用することができます。\u003c/p\u003e\n\n\u003cp\u003eそしてUdonですが、\u003cstrong\u003eプリミティブ型以外の型を触るとボックス化されてGCアロケートが起きます\u003c/strong\u003e。\u003cbr\u003e\nたとえ\u003ccode\u003eVector3\u003c/code\u003eや\u003ccode\u003eQuaternion\u003c/code\u003eといった\u003cstrong\u003e構造体であってもGCアロケートします。\u003c/strong\u003e\u003c/p\u003e\n\n\u003cp\u003eこのあたりは回避不可能なので、仕様と割り切って付き合っていくしか無いとは思います。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"stringは避けよう\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#string%E3%81%AF%E9%81%BF%E3%81%91%E3%82%88%E3%81%86\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003ccode\u003estring\u003c/code\u003eは避けよう\u003c/h3\u003e\n\n\u003cp\u003e\u003ccode\u003eC#\u003c/code\u003eの仕様上、\u003ccode\u003estring\u003c/code\u003e（文字列）は定義するだけでかなりの\u003ccode\u003eGC Alloc\u003c/code\u003eを引き起こします。\u003cbr\u003e\nそのため\u003ccode\u003eUpdate()\u003c/code\u003eで毎フレーム文字列を生成するなどしていると、パフォーマンスにかなりの悪影響を及ぼします。\u003c/p\u003e\n\n\u003cp\u003e極力\u003ccode\u003estring\u003c/code\u003eは使わない、使うにしても必要なタイミングで必要なだけ生成する工夫が必要です。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"uは別コンポーネントのメソッド呼び出しがコスト\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#u%E3%81%AF%E5%88%A5%E3%82%B3%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%8D%E3%83%B3%E3%83%88%E3%81%AE%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E5%91%BC%E3%81%B3%E5%87%BA%E3%81%97%E3%81%8C%E3%82%B3%E3%82%B9%E3%83%88\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003ccode\u003eU#\u003c/code\u003eは別コンポーネントのメソッド呼び出しがコスト\u003c/h3\u003e\n\n\u003cp\u003e非常に便利な\u003ccode\u003eUdonSharp\u003c/code\u003eですが、見えないところでコストがかかります。\u003cbr\u003e\nそれは\u003ccode\u003eUdonSharpBehaviour\u003c/code\u003eから別の\u003ccode\u003eUdonSharpBehaviour\u003c/code\u003eなオブジェクトのメソッドを呼びだす時です。\u003c/p\u003e\n\n\u003cp\u003eたとえば、次のような\u003ccode\u003eU#\u003c/code\u003eスクリプトがあったとして。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"cs\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eRunner\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eUdonSharp\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eUnityEngine\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003enamespace\u003c/span\u003e \u003cspan class=\"nn\"\u003eDebugTest\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eRunner\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eUdonSharpBehaviour\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003eRigidbody\u003c/span\u003e \u003cspan class=\"n\"\u003e_rigidbody\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eStart\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"n\"\u003e_rigidbody\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eGetComponent\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eRigidbody\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;();\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eVector3\u003c/span\u003e \u003cspan class=\"nf\"\u003eGetCurrentVelocity\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003e_rigidbody\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003evelocity\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"cs\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eObserver\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eUdonSharp\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eUnityEngine\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003enamespace\u003c/span\u003e \u003cspan class=\"nn\"\u003eDebugTest\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eObserver\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eUdonSharpBehaviour\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eSerializeField\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003eRunner\u003c/span\u003e \u003cspan class=\"n\"\u003e_runner\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eUpdate\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"c1\"\u003e// 取得するだけで何も使わない\u003c/span\u003e\n            \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003evelocity\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003e_runner\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eGetCurrentVelocity\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003eこれの\u003ccode\u003eObserver.cs\u003c/code\u003e側を\u003ccode\u003eUdon Assembly\u003c/code\u003eにトランスパイルした結果をみるとこうなっています。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e_update:\n\n    PUSH, __0_const_intnl_SystemUInt32\n\n    # {\n\n    # var velocity = _runner.GetCurrentVelocity();\n    PUSH, _runner\n    PUSH, __0_const_intnl_SystemString\n    EXTERN, \"VRCUdonCommonInterfacesIUdonEventReceiver.__SendCustomEvent__SystemString__SystemVoid\"\n    PUSH, _runner\n    PUSH, __1_const_intnl_SystemString\n    PUSH, __0_intnl_SystemObject\n    EXTERN, \"VRCUdonCommonInterfacesIUdonEventReceiver.__GetProgramVariable__SystemString__SystemObject\"\n    PUSH, __0_intnl_SystemObject\n    PUSH, __0_intnl_UnityEngineVector3\n    COPY\n    PUSH, __0_intnl_UnityEngineVector3\n    PUSH, __0_velocity_Vector3\n    COPY\n    PUSH, __0_intnl_returnTarget_UInt32 #Function epilogue\n    COPY\n    JUMP_INDIRECT, __0_intnl_returnTarget_UInt32\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e注目して欲しいところは、他の\u003ccode\u003eUdonSharpBehaviour\u003c/code\u003eへのメソッド呼び出しが\u003ccode\u003eSendCustomEvent\u003c/code\u003eと\u003ccode\u003eGetProgramVariable\u003c/code\u003eに変換されているところです。\u003cbr\u003e\n（メソッドに引数を渡すと\u003ccode\u003eSetProgramVariable\u003c/code\u003eも追加される）\u003c/p\u003e\n\n\u003cp\u003eそしてこの\u003ccode\u003eSendCustomEvent\u003c/code\u003eと\u003ccode\u003eGetProgramVariable\u003c/code\u003eですが、\u003cstrong\u003eなぜか\u003ccode\u003eGC Alloc\u003c/code\u003eします\u003c/strong\u003e。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/114142f74af42606458bc9d29712c127a3746f7c/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f34373134362f35636230666536362d646139612d633330302d333332342d3065326538396231376532662e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F47146%2F5cb0fe66-da9a-c300-3324-0e2e89b17e2f.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=35135f6872a166fb01c0604b097996cd\" alt=\"GCAlloc.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/47146/5cb0fe66-da9a-c300-3324-0e2e89b17e2f.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F47146%2F5cb0fe66-da9a-c300-3324-0e2e89b17e2f.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=5931d949dcb97e6fef8b3d4fed9f75ac 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003cbr\u003e\n（Udon内部実装の問題なのでおそらく回避不可）\u003c/p\u003e\n\n\u003cp\u003eということで、\u003ccode\u003eU#\u003c/code\u003eを用いた場合、気軽にメソッド呼び出しを実行するとそれだけで\u003ccode\u003eGC Alloc\u003c/code\u003eが発生します。\u003cbr\u003e\n普通のUnity開発ではノーコストな操作が、\u003ccode\u003eU#\u003c/code\u003eではコストがかかる点はかなり罠な気がします。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"ontriggerstay大暴走\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#ontriggerstay%E5%A4%A7%E6%9A%B4%E8%B5%B0\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eOnTriggerStay大暴走\u003c/h2\u003e\n\n\u003cp\u003e\u003ccode\u003eUdonBehaviour\u003c/code\u003eには\u003ccode\u003eOnTriggerStay\u003c/code\u003eが定義されています。\u003cbr\u003e\nそのため\u003cstrong\u003e「\u003ccode\u003eVRC_Pickup\u003c/code\u003e + \u003ccode\u003eUdonBehaviour\u003c/code\u003eなオブジェクト」を一箇所に大量にまとめて配置すると\u003ccode\u003eOnTriggerStay\u003c/code\u003eが暴走します。\u003c/strong\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/93fc97f66df7b2c3aa113e657714ebdf11c5d17e/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f34373134362f61343136313634362d386332332d313233612d333837392d6230373933626162366231642e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F47146%2Fa4161646-8c23-123a-3879-b0793bab6b1d.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=baa4949e5d2f96c6a01af3b82e818c45\" alt=\"OnTriggerStay.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/47146/a4161646-8c23-123a-3879-b0793bab6b1d.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F47146%2Fa4161646-8c23-123a-3879-b0793bab6b1d.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=49cd836e01ad5f3754c4d7062d05d467 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003cbr\u003e\n（50個ほど重ねて配置した例）\u003c/p\u003e\n\n\u003cp\u003e数個程度なら問題ないですが、数十個レベルで一箇所にまとめると\u003ccode\u003efps\u003c/code\u003eがガタ落ちするレベルで影響がでてきます。\u003cbr\u003e\nアイテムを一箇所にまとめておいて擬似的な「無限湧き」を作るようなことはやめておきましょう。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"udon-synced-variables役に立たない問題\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#udon-synced-variables%E5%BD%B9%E3%81%AB%E7%AB%8B%E3%81%9F%E3%81%AA%E3%81%84%E5%95%8F%E9%A1%8C\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eUdon Synced Variables役に立たない問題\u003c/h1\u003e\n\n\u003cp\u003e結論からいうと\u003ccode\u003eUdon Synced Variables\u003c/code\u003eはパフォーマンスのために \u003cstrong\u003e「使わない」\u003c/strong\u003e が正解です。\u003c/p\u003e\n\n\u003cp\u003e\u003ccode\u003eUdon\u003c/code\u003eには\u003ccode\u003eUdon Synced Variables\u003c/code\u003eという機能があります。\u003cbr\u003e\nこちらは指定したプリミティブな変数をネットワークをまたいで同期する機能です。\u003cbr\u003e\n（\u003ccode\u003eU#\u003c/code\u003eでいうところの\u003ccode\u003e[UdonSynced]\u003c/code\u003e）\u003c/p\u003e\n\n\u003cp\u003eですがこの\u003ccode\u003eUdon Synced Variables\u003c/code\u003e、挙動が結構ヤバイです。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\n\u003ccode\u003eOwner\u003c/code\u003eは\u003cstrong\u003e常時\u003c/strong\u003eパラメータを相手に送信し続ける\u003c/li\u003e\n\u003cli\u003e転送量が増えると\u003cstrong\u003eパケットロスして不着となる\u003c/strong\u003e\n\u003c/li\u003e\n\u003cli\u003eスループットがかなり低い\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e同期するオブジェクト、変数の数が増えると\u003ccode\u003eDeath Run Detected: dropped N events\u003c/code\u003eというエラーが大量に出てきます。\u003cbr\u003e\nこれが発生してしまうと、変数同期の成功率が極端に下がってしまいます。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/785a4a5674ae45ff6721a63ec721a5f476868fe9/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f34373134362f62633862656462302d366339662d636635622d373662622d3639376630343566313533382e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F47146%2Fbc8bedb0-6c9f-cf5b-76bb-697f045f1538.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=9f4d81ff35c3d01c745f3657449b743d\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/47146/bc8bedb0-6c9f-cf5b-76bb-697f045f1538.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F47146%2Fbc8bedb0-6c9f-cf5b-76bb-697f045f1538.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=203ab6ca25c31fcc7046b424b4a79c4e 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003cbr\u003e\n(大量にパケロスしている様子)\u003c/p\u003e\n\n\u003cp\u003eそのため、\u003ccode\u003eUdon Synced Variables\u003c/code\u003eで大量のデータを同期することはまったくオススメできません。\u003c/p\u003e\n\n\u003cp\u003eたとえば、オブジェクトの位置と姿勢（\u003ccode\u003eVector3\u003c/code\u003e + \u003ccode\u003eQuaternion\u003c/code\u003e）を\u003ccode\u003eUdon Synced Variables\u003c/code\u003eで同期するのは止めたほうがいいでしょう。\u003cbr\u003e\n私が試した場合では\u003cstrong\u003eオブジェクト数が20個を超えたあたりからパケロスが発生しました。\u003c/strong\u003e\u003cbr\u003e\nさらに\u003ccode\u003eVRChat\u003c/code\u003eの通信にかなりの負荷をかけるためか、\u003ccode\u003ePlayer\u003c/code\u003eの挙動までもが不安定になりました。\u003c/p\u003e\n\n\u003cp\u003eちなみに、この仕様ではほぼ使い物にならないので\u003ca href=\"https://vrchat.canny.io/vrchat-udon-closed-alpha-feedback/p/adjusting-the-transmission-frequency-of-udon-synced-variables\" rel=\"nofollow noopener\" target=\"_blank\"\u003eフィードバック報告済み\u003c/a\u003eではあります。\u003c/p\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"補足-udon-synced-variablesについての公式フォーラムでの報告\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%A3%9C%E8%B6%B3-udon-synced-variables%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E3%81%AE%E5%85%AC%E5%BC%8F%E3%83%95%E3%82%A9%E3%83%BC%E3%83%A9%E3%83%A0%E3%81%A7%E3%81%AE%E5%A0%B1%E5%91%8A\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e補足: Udon Synced Variablesについての公式フォーラムでの報告\u003c/h4\u003e\n\n\u003cp\u003e\u003ccode\u003eVRChat\u003c/code\u003eのフォーラムの\u003ca href=\"https://ask.vrchat.com/t/how-to-sync-with-udon/449/6\" rel=\"nofollow noopener\" target=\"_blank\"\u003eこちらの投稿\u003c/a\u003eでは次のように報告されています。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e2つの\u003ccode\u003eUdon Synced Variables\u003c/code\u003eな文字列をもつ\u003ccode\u003eUdon Behaviour\u003c/code\u003eをシーンにいくつか配置\u003c/li\u003e\n\u003cli\u003e8個置いた程度ではパケロスはほぼゼロ\u003c/li\u003e\n\u003cli\u003e16個置くとパケロスが発生する\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eとのことなので、\u003ccode\u003eUdon Synced Variables\u003c/code\u003eを使う場合はオブジェクト数が少ない場合のみにした方が無難でしょう。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"文字列にエンコードして同期するは高コスト\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%96%87%E5%AD%97%E5%88%97%E3%81%AB%E3%82%A8%E3%83%B3%E3%82%B3%E3%83%BC%E3%83%89%E3%81%97%E3%81%A6%E5%90%8C%E6%9C%9F%E3%81%99%E3%82%8B%E3%81%AF%E9%AB%98%E3%82%B3%E3%82%B9%E3%83%88\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e文字列にエンコードして同期する、は高コスト\u003c/h3\u003e\n\n\u003cp\u003eまた、とある場所で「オブジェクトの状態を\u003ccode\u003estring\u003c/code\u003eにエンコードして\u003ccode\u003eUdon Synced Variables\u003c/code\u003eで同期する」という手法が提案されていました。\u003c/p\u003e\n\n\u003cp\u003e\u003ccode\u003eUdon Synced Variables\u003c/code\u003eで配列が同期できないのを回避するために編み出された手法ですが、こちらかなりコストが高いです。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e大量の\u003ccode\u003estring\u003c/code\u003eを生成することによる\u003ccode\u003eGC Alloc\u003c/code\u003e\n\u003c/li\u003e\n\u003cli\u003e長い文字列を常時伝送するネットワークへの負荷\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eそのため本当にどうしようもないときの最終手段としとっておいて、常用はしないほうが無難でしょう。\u003cbr\u003e\n（とはいえどこれしか方法が無いならば使わざるを得ないのが\u003ccode\u003eUdon\u003c/code\u003eのツライところなのですが…。）\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"位置同期\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E4%BD%8D%E7%BD%AE%E5%90%8C%E6%9C%9F\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e位置同期\u003c/h1\u003e\n\n\u003cp\u003eオブジェクトの位置を同期する方法ですが、次の2とおり（実質1とおり）があります。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eA: \u003ccode\u003eUdon Synced Variables\u003c/code\u003eで位置姿勢を送る\u003c/li\u003e\n\u003cli\u003eB: \u003ccode\u003eUdon Behaviour\u003c/code\u003eの\u003ccode\u003eSynchronize Position\u003c/code\u003eを使う\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eAのパターンは前述の問題があるのでオススメできません。\u003cbr\u003e\nということで実質的にBの「\u003ccode\u003eSynchronize Position\u003c/code\u003e」一択になります。\u003c/p\u003e\n\n\u003cp\u003eこの\u003ccode\u003eSynchronize Position\u003c/code\u003eはちゃんと差分同期してくれるため、大量にオブジェクトがあってもネットワークへの負荷は小さいです。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/265ced0446e05c1026a492f3390ec6a1f7ceac58/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f34373134362f32396261366261382d336461382d353264622d643161302d6330633238393963626538652e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F47146%2F29ba6ba8-3da8-52db-d1a0-c0c2899cbe8e.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=72952c35ad25b0b61c43fd09d31741e9\" alt=\"Synced.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/47146/29ba6ba8-3da8-52db-d1a0-c0c2899cbe8e.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F47146%2F29ba6ba8-3da8-52db-d1a0-c0c2899cbe8e.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=a687b4668970524f18430f9143d4badd 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"synchronize-positionの同期ズレ問題\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#synchronize-position%E3%81%AE%E5%90%8C%E6%9C%9F%E3%82%BA%E3%83%AC%E5%95%8F%E9%A1%8C\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eSynchronize Positionの同期ズレ問題\u003c/h2\u003e\n\n\u003cp\u003e\u003ccode\u003eSynchronize Position\u003c/code\u003eは差分同期してくれるためネットワーク負荷は小さいのですが、\u003cstrong\u003e大量にオブジェクトがある場合、後からワールドに参加した人には正しく位置と姿勢が同期されない場合\u003c/strong\u003eがあります。\u003cbr\u003e\nこちらはワールドにいるプレイヤー数とオブジェクト数によりますが、「5人以上かつ20個くらいオブジェクトを動かした」あたりから発生してきます。\u003c/p\u003e\n\n\u003cp\u003e原因はハッキリとはしていないのですが、どうも次の複数の問題が絡んでいるっぽいです。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://vrchat.canny.io/vrchat-udon-closed-alpha-bugs/p/owner-information-is-not-correctly-synced-to-new-players-when-there-are-many-udo\" rel=\"nofollow noopener\" target=\"_blank\"\u003eオブジェクトの\u003ccode\u003eOwner\u003c/code\u003eが新規参加した人に正しく同期されず、\u003ccode\u003eMaster\u003c/code\u003eが\u003ccode\u003eOwner\u003c/code\u003eにみえる問題\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\n\u003ccode\u003eOwner\u003c/code\u003eがオブジェクトの位置同期が完了しない問題\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e前者についてはバグ報告済みですが、後者についてはいまいち挙動がつかめていないため報告していません。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"synchronize-positionの同期ズレ対策\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#synchronize-position%E3%81%AE%E5%90%8C%E6%9C%9F%E3%82%BA%E3%83%AC%E5%AF%BE%E7%AD%96\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eSynchronize Positionの同期ズレ対策\u003c/h3\u003e\n\n\u003cp\u003e対処療法として、次の対策をいれましょう。\u003cbr\u003e\n実際にモノレールワールドで実施している対策がこれです。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003e触れていないPickupオブジェクトはすべてMasterが所有権をもつ\u003c/strong\u003e\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eオブジェクトを持っている間は持っている人に\u003ccode\u003eOwner\u003c/code\u003eを渡す\u003c/li\u003e\n\u003cli\u003e手を離したら\u003ccode\u003eMaster\u003c/code\u003eに所有権を返すようにする\u003c/li\u003e\n\u003cli\u003e若干安定するが、それでもまだ同期ズレは起きる\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003e強制的に位置を同期する仕組みをいれる\u003c/strong\u003e\u003c/p\u003e\n\n\u003col\u003e\n\u003cli\u003e\n\u003ccode\u003eMaster\u003c/code\u003e側で同期対象のオブジェクトをすべて少しだけ位置と姿勢をズラす\u003c/li\u003e\n\u003cli\u003e数秒後に元の位置姿勢に戻す\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/52aee864699f095f51effc328310442cfb9b56d8/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f34373134362f39343965356636622d333661342d303563392d326331342d6165323534613765343265312e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F47146%2F949e5f6b-36a4-05c9-2c14-ae254a7e42e1.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=62708e29dc4182016619f02bf644ab27\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/47146/949e5f6b-36a4-05c9-2c14-ae254a7e42e1.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F47146%2F949e5f6b-36a4-05c9-2c14-ae254a7e42e1.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=4de5d543aefd4d6e04628eb782317592 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003cbr\u003e\n（同期ズレの発生をゼロにはできないので、同期ズレが起きる前提で対策した方が早い）\u003c/p\u003e\n\n\u003cp\u003eかなりツラミがある仕組みですが、現状これくらいしか大量のオブジェクトを安定して同期する方法がありません。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"まとめ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%BE%E3%81%A8%E3%82%81\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eまとめ\u003c/h1\u003e\n\n\u003cp\u003e\u003ccode\u003eUdon\u003c/code\u003eつらいし、\u003ccode\u003eUdonSharp\u003c/code\u003eも結構ツライです。\u003cbr\u003e\nそれなりのUnity開発経験と、Unityでパフォーマンスチューニングをできるスキルが求められますね。\u003c/p\u003e\n","createdAt":"2020-05-25T18:21:48Z","elapsedYearsFromLastModifiedAt":1,"encryptedId":"eMMy3aBfhqyP83q/dWbHenmdwNn/QEI+CQ==--N9YZP+F6F9FUyyEl--Z6WB/DYyTma9kSC36AB2CA==","isBanned":false,"isDeprecated":true,"isDestroyableByViewer":false,"isEditRequestReadableByViewer":true,"isEditRequestSendableByViewer":true,"isLikableByViewer":true,"isLikedByViewer":false,"isPublic":true,"isSlide":false,"isStockableByViewer":true,"isStockedByViewer":false,"isSubscribableByViewer":false,"isSubscribedByViewer":false,"isUpdatableByViewer":false,"isUpdated":true,"lastModifiedAt":"2020-07-14T07:52:07Z","likesCount":67,"linkUrl":"https://qiita.com/toRisouP/items/16bd06aa303a1bb1a747","organization":null,"originalId":1230652,"stockedCount":49,"title":"【VRChat】 Udon開発する上での注意点【Unity】","toc":"\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB\"\u003eはじめに\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#udon%E3%81%A8%E3%83%91%E3%83%95%E3%82%A9%E3%83%BC%E3%83%9E%E3%83%B3%E3%82%B9%E3%83%81%E3%83%A5%E3%83%BC%E3%83%8B%E3%83%B3%E3%82%B0\"\u003eUdonとパフォーマンスチューニング\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%97%E3%83%AD%E3%83%95%E3%82%A1%E3%82%A4%E3%83%A9%E3%82%92%E8%A6%8B%E3%82%88%E3%81%86\"\u003eプロファイラを見よう\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#raw-hierarchy%E3%81%A7%E8%AA%BF%E6%9F%BB\"\u003eRaw Hierarchyで調査\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#gc%E3%82%A2%E3%83%AD%E3%82%B1%E3%83%BC%E3%83%88%E3%82%92%E9%81%BF%E3%81%91%E3%82%88%E3%81%86\"\u003eGCアロケートを避けよう\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%97%E3%83%AA%E3%83%9F%E3%83%86%E3%82%A3%E3%83%96%E5%9E%8B%E4%BB%A5%E5%A4%96%E3%81%AF%E3%83%9C%E3%83%83%E3%82%AF%E3%82%B9%E5%8C%96%E3%81%95%E3%82%8C%E3%82%8B\"\u003eプリミティブ型以外はボックス化される\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#string%E3%81%AF%E9%81%BF%E3%81%91%E3%82%88%E3%81%86\"\u003estringは避けよう\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#u%E3%81%AF%E5%88%A5%E3%82%B3%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%8D%E3%83%B3%E3%83%88%E3%81%AE%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E5%91%BC%E3%81%B3%E5%87%BA%E3%81%97%E3%81%8C%E3%82%B3%E3%82%B9%E3%83%88\"\u003eU#は別コンポーネントのメソッド呼び出しがコスト\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#ontriggerstay%E5%A4%A7%E6%9A%B4%E8%B5%B0\"\u003eOnTriggerStay大暴走\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#udon-synced-variables%E5%BD%B9%E3%81%AB%E7%AB%8B%E3%81%9F%E3%81%AA%E3%81%84%E5%95%8F%E9%A1%8C\"\u003eUdon Synced Variables役に立たない問題\u003c/a\u003e\n\u003cul\u003e\n\u003cul\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E8%A3%9C%E8%B6%B3-udon-synced-variables%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E3%81%AE%E5%85%AC%E5%BC%8F%E3%83%95%E3%82%A9%E3%83%BC%E3%83%A9%E3%83%A0%E3%81%A7%E3%81%AE%E5%A0%B1%E5%91%8A\"\u003e補足: Udon Synced Variablesについての公式フォーラムでの報告\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/ul\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E6%96%87%E5%AD%97%E5%88%97%E3%81%AB%E3%82%A8%E3%83%B3%E3%82%B3%E3%83%BC%E3%83%89%E3%81%97%E3%81%A6%E5%90%8C%E6%9C%9F%E3%81%99%E3%82%8B%E3%81%AF%E9%AB%98%E3%82%B3%E3%82%B9%E3%83%88\"\u003e文字列にエンコードして同期する、は高コスト\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\n\n\n\u003cli\u003e\n\u003ca href=\"#%E4%BD%8D%E7%BD%AE%E5%90%8C%E6%9C%9F\"\u003e位置同期\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#synchronize-position%E3%81%AE%E5%90%8C%E6%9C%9F%E3%82%BA%E3%83%AC%E5%95%8F%E9%A1%8C\"\u003eSynchronize Positionの同期ズレ問題\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#synchronize-position%E3%81%AE%E5%90%8C%E6%9C%9F%E3%82%BA%E3%83%AC%E5%AF%BE%E7%AD%96\"\u003eSynchronize Positionの同期ズレ対策\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%81%BE%E3%81%A8%E3%82%81\"\u003eまとめ\u003c/a\u003e\n\u003c/li\u003e\n\n","totalPv":15561,"uuid":"16bd06aa303a1bb1a747","banReason":null,"adventCalendarItem":null,"author":{"encryptedId":"shJGGixKPi+UWGy7sn+ekv2ZEbI=--dqnig25cQRU0zwOq--conlHZw3ZydGhw0NYZ+RTg==","originalId":47146,"description":"","facebookUrl":null,"githubUrl":"https://github.com/TORISOUP","isBlockingViewer":false,"isFollowableByViewer":true,"isFollowedByViewer":false,"isTweetWebNotificationReceivable":true,"linkedinUrl":null,"name":"","profileImageUrl":"https://qiita-image-store.s3.amazonaws.com/0/47146/profile-images/1473690888","profileImageUrlW48":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F47146%2Fprofile-images%2F1473690888?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=48\u0026s=0ce887e592c3b3ae697bfb53041d5b46","profileImageUrlW75":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F47146%2Fprofile-images%2F1473690888?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=61879b88c08bddf8018304cc1ace2fc4","urlName":"toRisouP","websiteUrl":"","twitterUrl":"https://twitter.com/toRisouP","twitterUrlName":"toRisouP","revealedOrganizations":{"edges":[{"node":{"encryptedId":"poDY0I8EHzshvNIekScEN1FAqrwUTUG9ORw=--OYmXs8pI6tyU90k+--OJ/fziAYY3+2DFhJKoZNzg==","isBetaReleaseEnabled":false,"isFollowableByViewer":false,"isFollowedByViewer":false,"name":"株式会社 バーチャルキャスト","logoUrl":"https://s3-ap-northeast-1.amazonaws.com/qiita-organization-image/bf42a888e9366aa2d817bd985e231c12c6d80826/original.jpg?1545792589","urlName":"virtualcast","description":"VRシステム(バーチャルキャスト)の開発、運営、企画","url":"https://virtualcast.jp/"}}]}},"tags":[{"name":"C#","urlName":"csharp"},{"name":"Unity","urlName":"unity"},{"name":"VRChat","urlName":"vrchat"},{"name":"Udon","urlName":"udon"},{"name":"UdonSharp","urlName":"udonsharp"}],"followingLikers":{"edges":[]},"comments":{"totalCount":0}},"comments":[],"client":null,"ads_event_emitter":null}}</script>
