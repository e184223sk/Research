C#9.0から拡張メソッドでのGetEnumeratorでforeachが使えるようになりました。
これを使ってC++の様なイケてる列挙をしてみます。結論からサクッと
ここでC#9.0のトップレベルステートメントを使っています。四種類の区間に、逆順にも対応でなかなかイケてるのではないでしょうか。負数の列挙には対応していません。これはIndexが負数に対応していない（というよりも符号で先頭または末尾からのインデックスであるかを表している）ためです。RangeのタプルにGetEnumerator()を生やしておくと多重ループが平坦にできてさらにイケてるかもしれません。
アロケーションをしないように実装するのは少し骨が折れますが皆さんもこの機能の面白い使い方をご存じでしたらコメント等に残してくだされば幸いです。
それでは、最後までご覧いただきありがとうございました。


