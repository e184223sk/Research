More than 3 years have passed since last update.先日、九州北部で記録的な大豪雨が発生して多くの死者や行方不明者が発生し、土砂災害や道路損壊も相次ぎました。その大豪雨を機に自分の住んでいる地域の避難所を調べると『内閣官房　国民保護ポータルサイト』というところにPDF化されたデータしかありませんでした（Yahoo!さん、ゼンリンデータコムさん、1st Mediaさん等は独自でデータを持っているみたいです）□Yahoo!避難所マップ
・https://crisis.yahoo.co.jp/shelter/map/
□ゼンリンデータコム
・http://www.zenrin-datacom.net/business/lifeline/
□全国避難所ガイド
・http://www.hinanjyo.jp/■内閣官房　国民保護ポータルサイト
http://www.kokuminhogo.go.jp/■都道府県別 避難所一覧PDF
避難所を探している人って、おそらくとても急いでいるためPDF化されていると、閲覧までに時間がかかったり色々と面倒臭いことが多いため、データベース化して公開しようと試みました。内閣官房　国民保護ポータルサイトのHPからPDFをローカルのフォルダにダウンロードしました。そのPDFを『command + A』のショートカットで全コピー。そのコピーはテキストに貼り付けると、全て改行されます(エディタによって異なるみたいです...)
このCSVを『Oita.csv』という名前で保存します。この作業を47都道府県で行います。そしてこのCSVをカンマ区切りで『①項番②施設名③市町村名④住所』に書き換え、上書き保存を行うプログラムを実行させます。プログラム実行後のCSVファイル
カンマ区切りのCSVをDBへ格納します。
DBへは本番環境からphpでDBにアクセスしてINSERTを行います。■MySQLのカラム
データ量が多いためPDFのデータ化からDB格納まで自動化しないと、データの更新等ができないので、まだまだ課題があります。
とりあえずデータ化までは成功したので、後編にグーグルマップ化をしたいと思います。


