More than 3 years have passed since last update.1行ずつ与えられるデータ（ファイルとか、標準入力とか）が重なって2次元配列みたいなデータを列で分割して、楽に変換したい。例えば、こんなデータがあったとします。これを列（1列目だと、1,2,3, ... , 10 のように）ごとに取得したい。forなら簡単に取得ができるこんな感じでこれを実行すると、こんな感じになる
1列目だけでいいのなら、このサンプルコードでもいいのだけど、複数行対応したいときにはネストをしないといけなくなる。
例えばこんな感じ冗長な部分もあると思いますが、素直に書いたら大体こんな感じになると思います。意外と長くなってしまいます。次はLinqで書いてみたいと思います。こちらの方がやはり少ない行数で書けるということで、いいですね。慣れるまでは大変ですが。一応この2行で、列で取得することが可能です。
実際に取得するとこんな感じです。これで、2次元配列とかも簡単に列で取得することができますね！このままで終わるのもあれなので、一応解説をしておきます。まず、LinqSample.csの1行目はコメントにも書いてある通り、1行をまずカンマで分割し、そのあと分割後の要素が｛空、Null、string.Empty｝ではない要素のみ取得し、その要素にインデックスを付与しています。
1つだけ実行するとこんな感じ

ここでの、iの値がそのまま列のインデックスとなります。2つ目は、全部を列挙できるような状態に直してからインデックスでグループを作っていきます。全部列挙（SelectMany(x =&gt; x)）後の状態
ToLookupでグループ化した状態は先ほど見せた画像と同じです。
いかがだったでしょうか？
次があれば、自分が便利だと思った、C#の標準メソッドなどを紹介したいです。
それではよいC#ライフを！


