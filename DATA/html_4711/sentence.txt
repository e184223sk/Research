More than 3 years have passed since last update.MVVMでつまずくポイントとしてよく挙げられるのが、ダイアログ表示です。
単純にダイアログを表示して、OKを押されたら閉じる、という内容を以前に書きました。
WPFでいけてるダイアログを出す方法 - Qiita
今回はダイアログが閉じられるのを待って結果を受け取る方法を
Material Design In XAML ToolkitとReactivePropertyを使用して説明したいと思います。
なお今回の内容は現時点（2018/08/26）で最新のReactiveProperty 5.2.0が必要です。ダイアログはMaterial Design In XAML ToolkitのDialogHostを使用して表示します。
DialogHostのDialogContentプロパティにダイアログのViewを設定します。
ダイアログのDataContextには対応するダイアログVMを設定します。DialogHostのIsOpenプロパティの変更でダイアログの表示／非表示を切り替えます。
そしてそのIsOpenプロパティをダイアログVMのIsOpen(ReactiveProperty)にBindします。MainWindowVMからダイアログを開始する際は、そのBindされたIsOpenにtrueを設定します。
そしてすぐにIsOpenの変更（＝ダイアログの終了）を待機します。ダイアログを閉じる際は
ダイアログVM内でIsOpenにfalseを設定します。
ダイアログの結果のわたし方は色々ありますが、今回はダイアログVM内のReactivePropertyとして表現しました。ダイアログが閉じられたあとはMainWindowVMでダイアログVMのダイアログ結果を参照します。今回のデモプログラムの実行結果です。
中央のボタンを押すと、ダイアログが表示されます。

ダイアログ内にはちょっと怖めの確認文とOKとCancelの2つのボタンがあります。
どちらを押してもダイアログは閉じられます。

OKとCancelのどちらを押したかでMainWindowの文字が変わります。
デモプログラムの全体コードです。VisualStudio2017
.NET Framework 4.7.1
C#7.1
ReactiveProperty 5.2.0
MaterialDesignThemes 2.4.1.1101


