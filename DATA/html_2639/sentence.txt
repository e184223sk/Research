Unityで検索機能付きアイテムリスト作った pic.twitter.com/6ZnfTiFiEuUnity 2019.4.1f1
Windows 10アイテムリストの子に以下のUIを設置する必要があります。デザインや配置は自由に決めてしまって大丈夫です。今回はサンプルとしてこのクラスを使用します。
名前とUse()関数が定義されていて使用するとDebug.Logに名前を表示します。今回のメインとなるクラスです。
一つ一つ解説していきます。表示するアイテムをこのリストに追加します。
最初は全アイテムをこのリストに入れます。
検索時は条件に合ったアイテムだけこのリストに入れます。アイテムを受け取る用の関数です。
最初にこの関数を呼び出す必要があります。リストや配列ではなくIEnumerableインターフェイスで受け取ることでコレクションを変更しないことを呼び出し側に明示しています。アイテムリストを表示する用の関数です。
Setitemsの後に呼び出されることを想定しています。保持しているアイテムを全部showItemsに追加した後、表示を更新しています。アイテムリストを閉じるときに使用する関数です。ページや検索欄を初期化した後アイテムリストを非表示にしています。次ページボタンから呼び出します。ページを一つ進めています。前ページボタンから呼び出します。ページを一つ戻しています。検索用InputFieldから呼び出します。処理の流れキーワードが含まれているかどうかの判定は半角/全角、カタカナ/ひらがな、大文字/小文字を無視して行っています。
その判定にCompareInfoクラスのIndexOfメソッドを使用しています。CompaleInfoアイテムボタンとページ付けとページ切り替え用のボタンの表示を更新しています。アイテムボタンを更新します。処理の流れページ切り替え用ボタンの表示/非表示を切り替えます。現在のページが1なら前ページを非表示
2ページ移行ならなら表示現在のページが最大ページより低いなら次ページを表示
そうでないなら非表示ページ付けを更新します。現在のページ/最大ページを表示
もし、表示すべきアイテムがないなら0/0を表示インスペクターからInputField&gt;OnValueChangedにItemListView.Search()を設定インスペクターからButton&gt;OnClickにItemListView.PervPage()を設定インスペクターからButton&gt;OnClickにItemListView.NextPage()を設定Test.csを適当なオブジェクトにアタッチ
※アクティブがオンである必要がありますゲームを実行してEscでアイテムリストが表示されます。
もう一度Escを押すと閉じます。


