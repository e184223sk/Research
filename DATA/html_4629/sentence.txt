More than 1 year has passed since last update.WinFormsのコントロールのClickとDoubleClickに別のアクションを割り当てたいことはわりとある。しかし、DoubleClickが発火するときは、最初のクリックでClickが発火するため、DoubleClickにはClickのアクションを前提とするアクションしか割り当てられない。そこで、DoubleClickのときはClickのアクションを実行しないように、最初のClickのアクションの実行をダブルクリックの間隔まで遅延させて、DoubleClickが発火したらClickのアクションを実行しない振る舞いを実装してみた。ここでは二つセマフォを使っていて、_clickSemaphoreはダブルクリック待ちの間に再入を防止する。_doubleClickSemaphoreはダブルクリック待ちと同時にダブルクリックが実行されたことの判別も行う。Microsoftに同じの趣旨のHow to: Distinguish Between Clicks and Double-Clicksという記事があったけど、まったく使えない内容だったのでカッとなって書いた。


