More than 3 years have passed since last update.ミニゲームを作ってUnityを学ぶ！[ひつじコレクション編]ひつじコレクションでのプレイヤーの目的はステージ内に出現するひつじさんに接触し、追従を開始したひつじさんを無事にゴールのエリアまで連れ帰ることです。このひつじさんのことを「追従する者」という意味でフォロワーと呼ぶことにし、今回はこのフォロワーがステージにポップアップするところまでを実装していきます。まずはじめに、今回使用する2つのアセットをストアからインポートします。Lovely Animals Pack
Particle Collection SKJ 2016_Free samples追記：
ひつじさんの含まれるアセット「Lovely Animals Pack」が少し前まで無料だったのですが、現在は有料になってしまったようです……
仕方ないのでこれからひつじコレクションを作ってみようとしている方は、本作で敵キャラクターとして登場させるスライムが含まれた下記アセットの中にウサギらしきクリーチャーのプレハブがありますので、そちらで代用してみてください。Level1 Monster Packひつじさん（もしくはウサギさん）をフォロワーとして利用できるよう準備していきます。FollowerAnimControllerをダブルクリックしてAnimatorウインドウを開き、Followerオブジェクトのアニメーションを設定していきます。続いて、Followerオブジェクトを制御するためのスクリプトを作成します。Stateプロパティと1つのメソッドだけを持つ最小限の構成です。
Popup()によってStateをPOPUP状態に変更し、自身をActiveにすることで画面に描画されるようになります。
フォロワーはこのPopup()が実行されるまで画面に描画されないようにするため、オブジェクト名の横にあるチェックを外してデフォルトでは描画されない状態にしておきます。フォロワーの準備ができましたので、次はフォロワーがポップアップするステージ内のポイントを作成していきます。上のように表示されるようになったらmagic_ring_03のオブジェクト名の横にあるチェックを外し、エフェクトを非アクティブな状態に変更しておきます。続いて、ポップアップポイントを制御するためのスクリプトを作成します。PopupPointは2つの判定を持ち、PopupFollower()を実行することでフォロワーをステージ内に出現させます。フォロワーとポップアップポイントに対応するため、StageConstructorとStageManagerにコードを追加します。LoadStage()にステージファイルに記述された@popupによってポップアップポイントを生成するためのコードを追加しました。
また、その下には実際にポップアップポイントをインスタンス化するメソッドとそれらの参照を取得するメソッドを実装しています。新しくPopupFollower()というコルーチンを実装し、ステージを生成した直後に開始しています。
これによってステージ内に出現しているフォロワーが4匹に満たない場合は5秒毎に1匹ずつフォロワーが出現します。プロジェクトを実行してフォロワーがポップアップされることと、プレイヤーがポップアップポイントおよびフォロワーをすり抜けできることを確認してください。次のページに進む
イントロダクションに戻る

この作品はユニティちゃんライセンス条項の元に提供されています


