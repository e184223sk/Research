<!DOCTYPE html><html><head><meta charset="utf-8" /><title>【.NET】OpenCVSharpとZXing.Netを使ったバーコード読み込み - Qiita</title><meta content="width=device-width,initial-scale=1,shrink-to-fit=no,viewport-fit=cover" name="viewport" /><meta content="#55c500" name="theme-color" /><meta content="XWpkTG32-_C4joZoJ_UsmDUi-zaH-hcrjF6ZC_FoFbk" name="google-site-verification" /><meta content="telephone=no" name="format-detection" /><link rel="canonical" href="https://qiita.com/yaju/items/57eddbbf3f01659f16e8" /><link href="/manifest.json" rel="manifest" /><link href="/opensearch.xml" rel="search" title="Qiita" type="application/opensearchdescription+xml" /><link as="script" href="https://www.googletagservices.com/tag/js/gpt.js" rel="preload" /><link href="https://securepubads.g.doubleclick.net" rel="preconnect" /><script async="" src="https://www.googletagservices.com/tag/js/gpt.js"></script><meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="OA1rYthpGHS97cxiOfQkTzT7utyr+4cnIKit9sBIvUc9nu/4824D80sGlP8M7hjY5KYJrQsb3bCyH82DmxyujQ==" /><link rel="shortcut icon" type="image/x-icon" href="https://cdn.qiita.com/assets/favicons/public/production-c620d3e403342b1022967ba5e3db1aaa.ico" /><link rel="apple-touch-icon" type="image/png" href="https://cdn.qiita.com/assets/favicons/public/apple-touch-icon-ec5ba42a24ae923f16825592efdc356f.png" /><link rel="stylesheet" media="all" href="https://cdn.qiita.com/assets/public/article-2eaa7dbedc42a8ea65c722cda46d0ebb.min.css" /><script src="https://cdn.qiita.com/assets/public/v3-article-bundle-63de2d91fef827269d3f6b958db2335b.min.js" defer="defer"></script><meta name="twitter:card" content="summary_large_image"><meta content="@Qiita" name="twitter:site" /><meta content="@yaju" name="twitter:creator" /><meta property="og:type" content="article"><meta property="og:title" content="【.NET】OpenCVSharpとZXing.Netを使ったバーコード読み込み - Qiita"><meta property="og:image" content="https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0&amp;w=1200&amp;mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND00NENRTGs1RlZPT0FrVTl3Wlc1RFZsTm9ZWEp3NDRHb1dsaHBibWN1VG1WMDQ0S1M1TDJfNDRHajQ0R2Y0NE9RNDRPODQ0S3o0NE84NDRPSjZLcXQ0NEdfNkw2ODQ0R18mdHh0LWNvbG9yPSUyMzMzMyZ0eHQtZm9udD1IaXJhZ2lubyUyMFNhbnMlMjBXNiZ0eHQtc2l6ZT01NCZ0eHQtY2xpcD1lbGxpcHNpcyZ0eHQtYWxpZ249Y2VudGVyJTJDbWlkZGxlJnM9MDZmODY5ZDYxZTJkYzNhOTE5ZjI5NzNhNDFkODM3MTQ&amp;mark-align=center%2Cmiddle&amp;blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RSGxoYW5VJnR4dC1jb2xvcj0lMjMzMzMmdHh0LWZvbnQ9SGlyYWdpbm8lMjBTYW5zJTIwVzYmdHh0LXNpemU9NDUmdHh0LWFsaWduPXJpZ2h0JTJDYm90dG9tJnM9Y2EyYzE1OTdmYTM5M2RhOTgyMzBiNjg4ZWRlNTZjN2U&amp;blend-align=center%2Cmiddle&amp;blend-mode=normal&amp;s=9026cb83c43e51362be48c80abae8af2"><meta property="og:description" content="

はじめに

これはOpenCV Advent Calendar 2017の13日目の記事となります。

本来はバーコード読み取り精度を高めた上で記事にする予定だったのですが、別の開発の遅れにより13日に間に合わなかったので、それは..."><meta content="https://qiita.com/yaju/items/57eddbbf3f01659f16e8" property="og:url" /><meta content="Qiita" property="og:site_name" /><meta content="564524038" property="fb:admins" /><meta content="C#,OpenCV,QRcode,ZXing,OpenCvSharp" name="keywords" /><script>!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window, document,'script',
'https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '668972150489891');
fbq('track', 'PageView');</script><style data-emotion-css="17jxvjw 11t2ec1 1dvr2p8 18lkoru 1g4cku8 1iupg5d ijvq0v 15cocm3 12rp90f 115f4t 1b8uj5v 79elbk 16hhh7b fcbn8c 1gj7nt 154zy0m yikrym 1jqivyb 1ode1bp le4d8r 1hbd3g7 1nzh4zz 38fzdi helsa7 8qb8m4 2imjyh he5w1s 70qvj9 3ojehk 100alwu 1dtnjt5 10ougpm 1ay9vb9 m19uds cgzq40 1wa99t2 1l3zk9f 4czcte 1yzj1fm 1uv1qiv 109dbrr 5jpx49 mnxgyc 1vlpknv fsjkhv 1b17vb0 7i7f4d"}>.css-17jxvjw{display:grid;display:-ms-grid;grid-template-columns:80px minmax(0,1fr) 300px;-ms-grid-columns:80px minmax(0,1fr) 300px;grid-template-rows:minmax(270px,auto) 1fr;-ms-grid-rows:minmax(270px,auto) 1fr;max-width:1280px;margin-right:auto;margin-left:auto;padding-top:24px;padding-right:24px;padding-left:24px;}@media (max-width:1200px){.css-17jxvjw{padding-bottom:0;padding-left:0;padding-right:0;}}@media (max-width:992px){.css-17jxvjw{grid-template-columns:80px 452px 300px;-ms-grid-columns:80px 452px 300px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}}@media (max-width:770px){.css-17jxvjw{display:block;}}@media (max-width:480px){.css-17jxvjw{padding-top:0;}}.css-11t2ec1{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;z-index:5;position:-webkit-sticky;position:sticky;top:calc(56px + 24px + 16px + 32px - 16px);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:16px;width:80px;}.css-11t2ec1:after{content:'';display:table;}.css-11t2ec1:before{content:'';display:table;}@media (max-width:770px){.css-11t2ec1{display:none;}}.css-1dvr2p8{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-18lkoru{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;background-color:#FFFFFF;}.css-1g4cku8{display:inline-block;vertical-align:middle;height:20px;width:20px;fill:#55C500;}.css-1iupg5d{color:#55C500;cursor:pointer;font-size:14px;font-weight:bold;}.css-ijvq0v{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-15cocm3{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#FFFFFF;border:2px solid #6E6F70;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:2px 0px 0px;width:40px;}.css-12rp90f{display:inline-block;vertical-align:bottom;height:17.77777777777778px;width:16px;fill:#6E6F70;}.css-115f4t{color:#6E6F70;font-size:14px;font-weight:bold;}.css-1b8uj5v{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;margin-bottom:16px;padding:0;}.css-79elbk{position:relative;}.css-16hhh7b{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;padding:0;}.css-fcbn8c{display:none;bottom:initial;left:initial;right:initial;top:initial;left:100%;top:calc(-8px - (14px * 1.8) - 16px - 4px);}.css-1gj7nt{color:rgba(0,0,0,0.6);font-size:14px;font-weight:bold;line-height:1.8;padding:8px 16px;}.css-154zy0m{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.87);cursor:pointer;font-size:16px;font-weight:normal;line-height:1.8;padding:4px 16px;}.css-154zy0m:hover{-webkit-text-decoration:none;text-decoration:none;background-color:#F2F2F2;}.css-yikrym{width:20px;}.css-1jqivyb{color:rgba(0,0,0,0.6);font-size:13px;}.css-1ode1bp{background-color:rgba(0,0,0,0.12);height:1px;width:100%;margin:8px 0;}.css-le4d8r{display:inline-block;vertical-align:middle;height:13px;width:13px;fill:rgba(0,0,0,0.6);}.css-1hbd3g7{height:250px;}.css-1nzh4zz{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:16px 32px;background-color:#FBE69E;color:rgba(0,0,0,0.87);line-height:1.5;font-weight:600;}@media (max-width:770px){.css-1nzh4zz{padding:16px;}}.css-38fzdi{color:#CA832A;margin-right:4px;}.css-helsa7{background-color:#FFFFFF;padding:32px;margin-bottom:24px;}@media (max-width:992px){.css-helsa7{margin:0 auto 40px;}}@media (max-width:480px){.css-helsa7{margin:0 0 40px;padding:32px 16px;}}.css-8qb8m4{margin-bottom:48px;}.css-2imjyh{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-he5w1s{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;width:100%;}@media (max-width:770px){.css-he5w1s{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}}.css-70qvj9{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.css-3ojehk{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;margin-right:4px;}.css-100alwu{display:inline-block;border-radius:50%;line-height:1;overflow:hidden;vertical-align:middle;}.css-1dtnjt5{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-10ougpm{color:rgba(0,0,0,0.87);font-size:14px;font-weight:600;line-height:1.8;margin-right:4px;text-wrap:break-word;word-break:break-all;}.css-1ay9vb9{margin-right:16px;}.css-m19uds{color:rgba(0,0,0,0.6);font-size:14px;line-height:1.8;}.css-cgzq40{color:rgba(0,0,0,0.87);font-size:32px;font-weight:bold;line-height:1.4;margin-top:8px;text-wrap:break-word;word-break:break-all;}.css-1wa99t2{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.6);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:8px;}.css-1l3zk9f{color:rgba(0,0,0,0.6);font-size:20px;margin-right:8px;}.css-4czcte{margin-right:4px;color:inherit;font-size:14px;line-height:1.8;}.css-4czcte:not(:last-child)::after{content:',';margin-right:4px;}.css-1yzj1fm{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:32px;}.css-1uv1qiv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-size:20px;height:32px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin-right:16px;outline:none;padding:0;width:32px;}.css-109dbrr{background-color:#F9F9F9;border-top:1px solid rgba(0,0,0,0.12);bottom:0;box-shadow:0px 1px 4px rgba(0,0,0,0.14);display:none;height:calc(env(safe-area-inset-bottom,0px) + 56px);-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding-bottom:env(safe-area-inset-bottom);position:-webkit-sticky;position:sticky;width:100%;z-index:2000;}@media (max-width:770px){.css-109dbrr{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}.css-5jpx49{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:space-evenly;-webkit-justify-content:space-evenly;-ms-flex-pack:space-evenly;justify-content:space-evenly;width:100%;}.css-mnxgyc{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1vlpknv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;margin-right:4px;background-color:#FFFFFF;}.css-fsjkhv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1b17vb0{color:#6E6F70;font-size:14px;font-weight:bold;margin-left:4px;}.css-7i7f4d{display:none;bottom:initial;left:initial;right:initial;top:initial;bottom:32px;right:0;}</style></head><body><div class="allWrapper"><div><div id="GlobalHeader-react-component-e9bddcce-5507-4783-b989-50eb8d0a6346"><div class="st-Header"><div class="st-Header_container"><div class="st-Header_start"><a href="/" class="st-Header_logo"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 426.57 130"><circle cx="167.08" cy="21.4" r="12.28"></circle><path d="M250.81 29.66h23.48v18.9h-23.48z"></path><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z"></path><circle cx="216.33" cy="21.4" r="12.28"></circle></svg></a><div class="st-Header_communitySelector" tabindex="0"><span class="fa fa-caret-down"></span></div><div class="st-Header_dropdown"><div class="st-Header_dropdownHeading">Qiita Teams that are logged in</div><div class="st-Header_dropdownItemNote">You are not logged in to any team</div><hr class="st-Header_dropdownDivider st-Header_dropdownDivider-shrink"/><a href="https://teams-center.qiita.com/find_team" class="st-Header_dropdownItem"><span class="fa fa-fw fa-sign-in st-Header_dropdownItemIcon"></span><div>Log in to Qiita Team</div></a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Community</div><a href="/organizations" class="st-Header_dropdownItem">Organization</a><a href="/official-events/open" class="st-Header_dropdownItem">Event</a><a href="/advent-calendar" class="st-Header_dropdownItem">Advent Calendar</a><a href="https://qiitadon.com/" class="st-Header_dropdownItem" target="_blank">Qiitadon (β)</a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Service</div><a href="https://jobs.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Jobs</a><a href="https://zine.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Zine</a><a href="https://blog.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Blog</a></div><form class="st-Header_search" action="/search" method="get"><span class="fa fa-search st-Header_searchIcon"></span><input type="search" class="st-Header_searchInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form><form class="st-Header_searchModal" action="/search" method="get"><input type="text" class="st-Header_searchModalInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form></div><div class="st-Header_end"><div class="st-Header_searchButton"><span class="fa fa-search"></span></div><a class="st-Header_signupButton" href="/signup?redirect_to=%2Fyaju%2Fitems%2F57eddbbf3f01659f16e8">Signup</a><a class="st-Header_loginLink" href="/login?redirect_to=%2Fyaju%2Fitems%2F57eddbbf3f01659f16e8">Login</a></div><div class="st-Header_overlay"></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="GlobalHeader" data-dom-id="GlobalHeader-react-component-e9bddcce-5507-4783-b989-50eb8d0a6346">{"unreadNotificationsCount":null,"realms":[{"humanName":"Qiita","isCurrentRealm":true,"isQiita":true,"isQiitaTeam":false,"loggedInUser":null,"teamId":null,"url":"https://qiita.com/"}],"teamFindUrl":"https://teams-center.qiita.com/find_team","isTeamOnlyUser":null,"currentUser":null}</script>
      
</div><div class="st-HeaderAlert st-HeaderAlert-warning"><div class="st-HeaderAlert_body"></div></div><script type="application/ld+json">{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"/","name":"Qiita"}},{"@type":"ListItem","position":2,"item":{"@id":"/tags/csharp","name":"C#"}}]}</script><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","datePublished":"2017-12-13T03:04:33.000+09:00","dateModified":"2018-07-18T03:02:21.000+09:00","headline":"【.NET】OpenCVSharpとZXing.Netを使ったバーコード読み込み","image":"https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0\u0026w=1200\u0026mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND00NENRTGs1RlZPT0FrVTl3Wlc1RFZsTm9ZWEp3NDRHb1dsaHBibWN1VG1WMDQ0S1M1TDJfNDRHajQ0R2Y0NE9RNDRPODQ0S3o0NE84NDRPSjZLcXQ0NEdfNkw2ODQ0R18mdHh0LWNvbG9yPSUyMzMzMyZ0eHQtZm9udD1IaXJhZ2lubyUyMFNhbnMlMjBXNiZ0eHQtc2l6ZT01NCZ0eHQtY2xpcD1lbGxpcHNpcyZ0eHQtYWxpZ249Y2VudGVyJTJDbWlkZGxlJnM9MDZmODY5ZDYxZTJkYzNhOTE5ZjI5NzNhNDFkODM3MTQ\u0026mark-align=center%2Cmiddle\u0026blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RSGxoYW5VJnR4dC1jb2xvcj0lMjMzMzMmdHh0LWZvbnQ9SGlyYWdpbm8lMjBTYW5zJTIwVzYmdHh0LXNpemU9NDUmdHh0LWFsaWduPXJpZ2h0JTJDYm90dG9tJnM9Y2EyYzE1OTdmYTM5M2RhOTgyMzBiNjg4ZWRlNTZjN2U\u0026blend-align=center%2Cmiddle\u0026blend-mode=normal\u0026s=9026cb83c43e51362be48c80abae8af2","mainEntityOfPage":"https://qiita.com/yaju/items/57eddbbf3f01659f16e8","author":{"@type":"Person","address":"Shizuoka,Japan","email":null,"identifier":"yaju","name":"yaju","image":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F14053%2Fprofile-images%2F1473683162?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=136b8707be81c2c47a1fbee1976f4e70","url":"https://qiita.com/yaju","description":"静岡県島田市在住ののシニアSE（元Microsoft MVP 2010-2012）がコンピューター、機械学習、Unity、数学について考える。","memberOf":[]},"publisher":{"@type":"Organization","name":"Qiita","logo":{"@type":"ImageObject","url":"//cdn.qiita.com/assets/public/qiita-logo-c39ded593afa388e2e1ba435b110554e.png"}}}</script><style type="text/css">.wb-CampaignLink {
  background-color: #333333;
  width: 100%;
}

.wb-CampaignLink_container {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  max-width: 1100px;
  margin: 0 auto;
  font-size: 13px;
  padding: 0.8em;
}
.wb-CampaignLink_container > a {
  color: #fff;
}

.wb-CampaignLink_container > a:hover {
  text-decoration: underline;
}</style><div class="wb-CampaignLink"><div class="wb-CampaignLink_container"><a target="_blank" id="header_text_message_1" href="https://increments.connpass.com/event/211948/">Qiita創業者海野氏登壇！Qiita エンジニアフェスタ 2021 Online Meetupを9/9(木)に開催</a><a target="_blank" id="header_text_message_2" href="https://increments.connpass.com/event/211948/">詳しくはこちら</a></div><script>td.trackEvent(
  'front_events',
  {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"yaju","type":"items","id":"57eddbbf3f01659f16e8"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Show","data":{"message":"Qiita創業者海野氏登壇！Qiita エンジニアフェスタ 2021 Online Meetupを9/9(木)に開催","url":"https://increments.connpass.com/event/211948/","sub_message":"詳しくはこちら"}}
)</script><script>document.getElementById('header_text_message_1').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"yaju","type":"items","id":"57eddbbf3f01659f16e8"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":1,"pos_id":"header_text_message_1","message":"Qiita創業者海野氏登壇！Qiita エンジニアフェスタ 2021 Online Meetupを9/9(木)に開催","url":"https://increments.connpass.com/event/211948/","sub_message":"詳しくはこちら"}}
  )
})</script><script>document.getElementById('header_text_message_2').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"yaju","type":"items","id":"57eddbbf3f01659f16e8"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":1,"pos_id":"header_text_message_2","message":"Qiita創業者海野氏登壇！Qiita エンジニアフェスタ 2021 Online Meetupを9/9(木)に開催","url":"https://increments.connpass.com/event/211948/","sub_message":"詳しくはこちら"}}
  )
})</script></div><script type="application/json" id="js-react-on-rails-context">{"railsEnv":"production","inMailer":false,"i18nLocale":"en","i18nDefaultLocale":"en","href":"https://qiita.com/yaju/items/57eddbbf3f01659f16e8","location":"/yaju/items/57eddbbf3f01659f16e8","scheme":"https","host":"qiita.com","port":null,"pathname":"/yaju/items/57eddbbf3f01659f16e8","search":null,"httpAcceptLanguage":null,"actionPath":"public/items#show","settings":{"analyticsTrackingId":"UA-24675221-12","assetsMap":{},"csrfToken":"g9UTyToqA88qLy55dHtHM4gUPaZNIhDBxCnEK0u8zDGGRpdTES0YSNzEduRBYXukWEmO1+3CSlZWnqReEOjf+w==","locale":"en"},"currentUser":null,"isLoggedIn":false,"recaptchaSiteKey":"6LfNkiQTAAAAAM3UGnSquBy2akTITGNMO_QDxMw6","serverSide":false}</script>
<div id="PersonalArticlePage-react-component-901ce6c4-d77e-4903-9013-a319dc54caae"><div class="p-items_wrapper"><div class=" css-17jxvjw"><div class="css-11t2ec1"><div class="css-1dvr2p8"><button class=" css-18lkoru"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/yaju/items/57eddbbf3f01659f16e8/likers" class="css-1iupg5d">22</a></div><div class="css-ijvq0v"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-115f4t">25</span></div><div class="css-1b8uj5v"><span class="fa fa-twitter"></span></div><div class="css-1b8uj5v"><span class="fa fa-facebook"></span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-fcbn8c"><div class="css-1gj7nt">Improve article</div><a href="/drafts/57eddbbf3f01659f16e8/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/yaju/items/57eddbbf3f01659f16e8/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/yaju/items/57eddbbf3f01659f16e8/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/yaju/items/57eddbbf3f01659f16e8/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/yaju/items/57eddbbf3f01659f16e8.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div><div class="p-items_options"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_toc"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_main"><div class="css-1nzh4zz"><span class="fa fa-fw fa-warning css-38fzdi"></span><p>More than 3 years have passed since last update.</p></div><div class="css-helsa7"><div class="css-8qb8m4"><div class="it-AdcalRibbon"><span><a href="/advent-calendar/2017/opencv" class="it-AdcalRibbon_title">OpenCV<!-- --> Advent Calendar<!-- --> <!-- -->2017</a>Day 13</span></div><div class="css-2imjyh"><div class="css-he5w1s"><div class="css-70qvj9"><div class="css-3ojehk"><a href="/yaju"><img class="css-100alwu eyfquo10" src="https://qiita-image-store.s3.amazonaws.com/0/14053/profile-images/1473683162" width="24" height="24" loading="lazy"/></a></div><div class="css-1dtnjt5"><a href="/yaju" class="css-10ougpm">@<!-- -->yaju</a><div class="css-1ay9vb9"><span><meta content="2017-12-12T18:04:33Z"/><time dateTime="2018-07-17T18:02:21Z" class="css-m19uds">updated at 2018-07-17</time></span></div></div></div></div></div><h1 class="css-cgzq40">【.NET】OpenCVSharpとZXing.Netを使ったバーコード読み込み</h1><div class="css-1wa99t2"><span class="fa fa-tags mr-1of2 css-1l3zk9f" aria-hidden="true"></span><a href="/tags/csharp" class="css-4czcte">C#</a><a href="/tags/opencv" class="css-4czcte">OpenCV</a><a href="/tags/qrcode" class="css-4czcte">QRcode</a><a href="/tags/zxing" class="css-4czcte">ZXing</a><a href="/tags/opencvsharp" class="css-4czcte">OpenCvSharp</a></div></div><section class="it-MdContent"><div id="personal-public-article-body"><div>
<h1>
<span id="はじめに" class="fragment"></span><a href="#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB"><i class="fa fa-link"></i></a>はじめに</h1>

<p>これは<a href="https://qiita.com/advent-calendar/2017/opencv">OpenCV Advent Calendar 2017</a>の13日目の記事となります。</p>

<p><strong>本来はバーコード読み取り精度を高めた上で記事にする予定だったのですが、別の開発の遅れにより13日に間に合わなかったので、それは後々とします。</strong><br>
【2017/12/23追記】14日以降に幾つか分かったことを追記しました。</p>

<p>お仕事でKEYENCEやDENSOなどの専用バーコードスキャナーを使っています。最近は、アスタリスク社のiPod Touchを使ったバーコードスキャナーの提案も受けます。</p>

<p>今回、マイクロソフト Surface Pro 4 の内蔵カメラを使って、バーコードを読めないかという依頼がありました。Surfaceなら持ち歩けるので、その場で読みたい。バーコードスキャナーを一緒に持ち歩きたくない。</p>

<h1>
<span id="qrコード" class="fragment"></span><a href="#qr%E3%82%B3%E3%83%BC%E3%83%89"><i class="fa fa-link"></i></a>QRコード</h1>

<p>QRコード（Quick Responce Code）は1994年にデンソーウェブの開発した、マトリックス型2次元コードの一種です。名前の通り、高速読取を目的に開発されました。</p>

<ul>
<li><a href="http://hrnabi.com/2017/12/12/15799/" rel="nofollow noopener" target="_blank">どうしてあの形なの？ QRコードに秘められた技術を「生みの親」に聞いた</a></li>
<li><a href="https://www.keyence.co.jp/ss/products/autoid/codereader/basic2d_qr.jsp" rel="nofollow noopener" target="_blank">QRコードとは</a></li>
<li><a href="http://www.ryusuke.net/archives/765" rel="nofollow noopener" target="_blank">QRコードの誤り訂正レベルの判別方法～アイカツスターズ！のQRコードを分析してみる</a></li>
</ul>

<h1>
<span id="開発環境" class="fragment"></span><a href="#%E9%96%8B%E7%99%BA%E7%92%B0%E5%A2%83"><i class="fa fa-link"></i></a>開発環境</h1>

<p>マイクロソフト Surface Pro 4 バックカメラ 800万画素</p>

<p>カメラ操作にOpenCVSharp 、バーコード読取りにZXing(ゼブラクロッシング)を使用します。<br>
NuGetから現在バージョンとして、OpenCVSharp v3.3.1.20171117 と ZXing.Net v0.16.2 をインストールしています。</p>

<h2>
<span id="クラス分け" class="fragment"></span><a href="#%E3%82%AF%E3%83%A9%E3%82%B9%E5%88%86%E3%81%91"><i class="fa fa-link"></i></a>クラス分け</h2>

<p>Cameraクラスを別途作成し、Windowsフォーム側と分離するようにしています。<br>
画像処理はMat型を受け渡ししています。バーコード解析処理もCameraクラスに内包しています。<br>
※ソースコードを一部掲載していますが、掲載用に編集しているのでそのままでは動きません。</p>

<h2>
<span id="デリゲート委譲" class="fragment"></span><a href="#%E3%83%87%E3%83%AA%E3%82%B2%E3%83%BC%E3%83%88%E5%A7%94%E8%AD%B2"><i class="fa fa-link"></i></a>デリゲート(委譲)</h2>

<p>CameraクラスからWindowsフォーム側にアクセスしたい場合、デリゲートを使っています。</p>

<div class="code-frame" data-lang="csharp"><div class="highlight"><pre class="with-code"><code><span class="c1">// 【Cameraクラス側】</span>
<span class="k">public</span> <span class="k">delegate</span> <span class="k">void</span> <span class="nf">DisplayProgress</span><span class="p">(</span><span class="n">Mat</span> <span class="n">img</span><span class="p">,</span> <span class="kt">int</span> <span class="n">threshold</span><span class="p">);</span>
<span class="c1">// デコード処理</span>
<span class="k">public</span> <span class="kt">string</span> <span class="nf">Decode</span><span class="p">(</span><span class="kt">int</span> <span class="n">min</span><span class="p">,</span> <span class="kt">int</span> <span class="n">max</span><span class="p">,</span> <span class="kt">int</span> <span class="k">add</span><span class="p">,</span> <span class="n">Mat</span> <span class="n">img</span><span class="p">,</span> <span class="kt">int</span> <span class="n">threshold</span><span class="p">,</span> <span class="n">DisplayProgress</span> <span class="n">callback</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// (中略)</span>
    <span class="c1">// フォーム側処理を呼ぶ</span>
    <span class="n">callback</span><span class="p">?.</span><span class="nf">Invoke</span><span class="p">(</span><span class="n">img2</span><span class="p">,</span> <span class="k">value</span><span class="p">);</span>
    <span class="c1">// (中略)</span>
<span class="p">}</span>

<span class="c1">// 【フォーム側処理】</span>
<span class="c1">// しきい値を中央に解析する</span>
<span class="kt">string</span> <span class="k">value</span> <span class="p">=</span> <span class="k">await</span> <span class="n">Task</span><span class="p">.</span><span class="nf">Run</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="n">_camera</span><span class="p">.</span><span class="nf">Decode</span><span class="p">(</span><span class="n">min</span><span class="p">,</span> <span class="n">max</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="n">img</span><span class="p">,</span> <span class="n">threshold</span><span class="p">,</span> <span class="n">AnalyzeDisplay</span><span class="p">));</span>

<span class="k">public</span> <span class="k">void</span> <span class="nf">AnalyzeDisplay</span><span class="p">(</span><span class="n">Mat</span> <span class="n">img</span><span class="p">,</span> <span class="kt">int</span> <span class="n">threshold</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nf">Invoke</span><span class="p">(</span><span class="k">new</span> <span class="nf">Action</span><span class="p">(()</span> <span class="p">=&gt;</span>
    <span class="p">{</span> 
        <span class="n">picCapture</span><span class="p">.</span><span class="n">ImageIpl</span> <span class="p">=</span> <span class="n">img</span><span class="p">;</span>
        <span class="n">txtThreshold</span><span class="p">.</span><span class="n">Text</span> <span class="p">=</span> <span class="n">threshold</span><span class="p">.</span><span class="nf">ToString</span><span class="p">();</span>
    <span class="p">}));</span>
<span class="p">}</span>
</code></pre></div></div>

<ul>
<li><a href="http://kan-kikuchi.hatenablog.com/entry/Delegate" rel="nofollow noopener" target="_blank">デリゲートとは【C#】</a></li>
<li><a href="http://eno0514.hatenadiary.jp/entry/20150820/1440012230" rel="nofollow noopener" target="_blank">C#のイベントとデリゲート(delegate)の違い</a></li>
</ul>

<h1>
<span id="カメラ画像の読取り" class="fragment"></span><a href="#%E3%82%AB%E3%83%A1%E3%83%A9%E7%94%BB%E5%83%8F%E3%81%AE%E8%AA%AD%E5%8F%96%E3%82%8A"><i class="fa fa-link"></i></a>カメラ画像の読取り</h1>

<p>カメラ画像の読取りには、BackgroundWorkerクラスを使用しています。キャプチャー画像はPictureBoxIplコントロール(picMain)をCenterImageにして中央にQRコードを表示するようにしています。</p>

<div class="code-frame" data-lang="csharp"><div class="highlight"><pre class="with-code"><code><span class="c1">// 【Cameraクラス側】</span>
<span class="n">VideoCapture</span> <span class="n">_cap</span> <span class="p">=</span> <span class="k">null</span><span class="p">;</span>

<span class="k">public</span> <span class="nf">Camera</span><span class="p">()</span>
<span class="p">{</span>
    <span class="c1">// カメラ有無 0:バックカメラ 1:フロントカメラ</span>
    <span class="n">_cap</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">VideoCapture</span><span class="p">(</span><span class="m">0</span><span class="p">)</span> <span class="p">{</span> <span class="n">AutoFocus</span> <span class="p">=</span> <span class="k">false</span> <span class="p">};</span>
    <span class="n">Enabled</span> <span class="p">=</span> <span class="n">_cap</span><span class="p">.</span><span class="nf">IsOpened</span><span class="p">();</span>
<span class="p">}</span>

<span class="c1">// 【フォーム側処理】</span>
<span class="kt">bool</span> <span class="n">_isRunning</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>

<span class="c1">// バッググラウンド処理</span>
<span class="k">private</span> <span class="k">void</span> <span class="nf">bgWorker_DoWork</span><span class="p">(</span><span class="kt">object</span> <span class="n">sender</span><span class="p">,</span> <span class="n">DoWorkEventArgs</span> <span class="n">e</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">BackgroundWorker</span> <span class="n">worker</span> <span class="p">=</span> <span class="p">(</span><span class="n">BackgroundWorker</span><span class="p">)</span><span class="n">sender</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(!</span><span class="n">_camera</span><span class="p">.</span><span class="n">Enabled</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>

    <span class="k">while</span> <span class="p">(</span><span class="n">_isRunning</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// bgWorker_ProgressChangedイベントで画像取得</span>
        <span class="n">Mat</span> <span class="n">dst</span> <span class="p">=</span> <span class="n">_camera</span><span class="p">.</span><span class="nf">Read</span><span class="p">();</span>
        <span class="n">worker</span><span class="p">.</span><span class="nf">ReportProgress</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="n">dst</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// バッググラウンド進行変更イベント処理</span>
<span class="k">private</span> <span class="k">void</span> <span class="nf">bgWorker_ProgressChanged</span><span class="p">(</span><span class="kt">object</span> <span class="n">sender</span><span class="p">,</span> <span class="n">ProgressChangedEventArgs</span> <span class="n">e</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// カメラ画像表示</span>
    <span class="n">picMain</span><span class="p">.</span><span class="n">ImageIpl</span> <span class="p">=</span> <span class="p">(</span><span class="n">Mat</span><span class="p">)</span><span class="n">e</span><span class="p">.</span><span class="n">UserState</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// キャプチャー開始処理</span>
<span class="k">private</span> <span class="k">void</span> <span class="nf">CaputureStart</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">_isRunning</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
    <span class="n">bgWorker</span><span class="p">.</span><span class="nf">RunWorkerAsync</span><span class="p">();</span>
    <span class="n">tmrCapture</span><span class="p">.</span><span class="n">Enabled</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// キャプチャー停止処理</span>
<span class="k">private</span> <span class="k">void</span> <span class="nf">CaputureStop</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">_isRunning</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
    <span class="n">bgWorker</span><span class="p">.</span><span class="nf">CancelAsync</span><span class="p">();</span>
    <span class="n">tmrCapture</span><span class="p">.</span><span class="n">Enabled</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h1>
<span id="ターゲット枠配置" class="fragment"></span><a href="#%E3%82%BF%E3%83%BC%E3%82%B2%E3%83%83%E3%83%88%E6%9E%A0%E9%85%8D%E7%BD%AE"><i class="fa fa-link"></i></a>ターゲット枠配置</h1>

<p>ユーザーがQRコードを中央の位置に合わせやすいように、赤色十字のターゲット枠を配置します。<br>
キャプチャー画像にターゲット枠を直接描画すると解析上おかしなことになるので、別のPictureBoxにターゲット枠イメージ(png)を用意して、BackColor = Color.Transparent にした上で子コントロール化することでターゲット枠を重ね合せています。<a href="http://dobon.net/vb/dotnet/control/labelonpicturebox.html" rel="nofollow noopener" target="_blank">PictureBox上のLabelの背景が透明にならない問題の解決法</a></p>

<div class="code-frame" data-lang="csharp"><div class="highlight"><pre class="with-code"><code><span class="c1">// ターゲットアイコン用(メイン用)</span>
<span class="n">picMain</span><span class="p">.</span><span class="n">Controls</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">picTargetMain</span><span class="p">);</span>
<span class="n">picTargetMain</span><span class="p">.</span><span class="n">Left</span> <span class="p">-=</span> <span class="n">picMain</span><span class="p">.</span><span class="n">Left</span><span class="p">;</span>
<span class="n">picTargetMain</span><span class="p">.</span><span class="n">Top</span> <span class="p">-=</span> <span class="n">picMain</span><span class="p">.</span><span class="n">Top</span><span class="p">;</span>
</code></pre></div></div>

<h1>
<span id="解析処理" class="fragment"></span><a href="#%E8%A7%A3%E6%9E%90%E5%87%A6%E7%90%86"><i class="fa fa-link"></i></a>解析処理</h1>

<p>タイマー(1000ms以内)を使って、ぶれ防止を兼ねてキャプチャー画像を一旦保存した上で、キャプチャー画像サイズが大きく、解析部分を減らすために中央に映っているある程度の範囲のみにトリミングしてから解析処理をしていきます。</p>

<div class="code-frame" data-lang="csharp"><div class="highlight"><pre class="with-code"><code><span class="c1">// キャプチャー画面</span>
<span class="k">const</span> <span class="kt">string</span> <span class="n">CAPTURE_PATH</span> <span class="p">=</span> <span class="s">"caputure.png"</span><span class="p">;</span>

<span class="c1">// タイマー処理</span>
<span class="k">private</span> <span class="k">void</span> <span class="nf">tmrCapture_Tick</span><span class="p">(</span><span class="kt">object</span> <span class="n">sender</span><span class="p">,</span> <span class="n">EventArgs</span> <span class="n">e</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">picMain</span><span class="p">.</span><span class="n">Image</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>

    <span class="c1">// 画面キャプチャー保存</span>
    <span class="n">picMain</span><span class="p">.</span><span class="n">ImageIpl</span><span class="p">.</span><span class="nf">SaveImage</span><span class="p">(</span><span class="n">CAPTURE_PATH</span><span class="p">);</span>

    <span class="c1">// 画像読込(中央あたりをトリミング)</span>
    <span class="n">Mat</span> <span class="n">src</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Mat</span><span class="p">(</span><span class="n">CAPTURE_PATH</span><span class="p">);</span>
    <span class="n">Rect</span> <span class="n">rc</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Rect</span><span class="p">((</span><span class="n">src</span><span class="p">.</span><span class="n">Width</span> <span class="p">-</span> <span class="n">picMain</span><span class="p">.</span><span class="n">Width</span><span class="p">)</span> <span class="p">/</span> <span class="m">2</span><span class="p">,</span>
                       <span class="p">(</span><span class="n">src</span><span class="p">.</span><span class="n">Height</span> <span class="p">-</span> <span class="n">picMain</span><span class="p">.</span><span class="n">Height</span><span class="p">)</span> <span class="p">/</span> <span class="m">2</span> <span class="p">-</span> <span class="n">Camera</span><span class="p">.</span><span class="n">IMAGE_MERGIN_SIZE</span><span class="p">,</span>
                       <span class="n">picMain</span><span class="p">.</span><span class="n">Width</span><span class="p">,</span>
                       <span class="n">picMain</span><span class="p">.</span><span class="n">Height</span> <span class="p">+</span> <span class="n">Camera</span><span class="p">.</span><span class="n">IMAGE_MERGIN_SIZE</span><span class="p">);</span>
    <span class="n">picCapture</span><span class="p">.</span><span class="n">ImageIpl</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Mat</span><span class="p">(</span><span class="k">new</span> <span class="nf">Mat</span><span class="p">(</span><span class="n">CAPTURE_PATH</span><span class="p">),</span> <span class="n">rc</span><span class="p">);</span>

    <span class="c1">// そのまま解析</span>
    <span class="n">Result</span> <span class="n">result</span> <span class="p">=</span> <span class="n">_camera</span><span class="p">.</span><span class="nf">Analyze</span><span class="p">(</span><span class="n">picCapture</span><span class="p">.</span><span class="n">ImageIpl</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">result</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>

    <span class="kt">string</span> <span class="n">decode</span> <span class="p">=</span> <span class="n">result</span><span class="p">.</span><span class="nf">ToString</span><span class="p">().</span><span class="nf">Trim</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">decode</span> <span class="p">!=</span> <span class="s">""</span> <span class="p">&amp;&amp;</span> <span class="n">decode</span> <span class="p">!=</span> <span class="s">"error"</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// 解析出来たなら入力値へ送信</span>
        <span class="nf">Send</span><span class="p">(</span><span class="n">decode</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="c1">// 解析可能性がある</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">decode</span> <span class="p">==</span> <span class="s">"error"</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// 自動解析処理</span>
        <span class="nf">AnalyzeAuto</span><span class="p">(</span><span class="n">picCapture</span><span class="p">.</span><span class="n">ImageIpl</span><span class="p">,</span> <span class="n">trbThreshold</span><span class="p">.</span><span class="n">Value</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h1>
<span id="読み取り精度を高めたい" class="fragment"></span><a href="#%E8%AA%AD%E3%81%BF%E5%8F%96%E3%82%8A%E7%B2%BE%E5%BA%A6%E3%82%92%E9%AB%98%E3%82%81%E3%81%9F%E3%81%84"><i class="fa fa-link"></i></a>読み取り精度を高めたい</h1>

<p>2cm以上のQRバーコードはなんなく読めたのですが、ユーザーから実際に使用するバーコードが送られてきたところ、ケーブルに付けられた8mmのQRコードでありました。それだとごくまれに読める程度で実用には程遠い状態です。<br>
しかし、専用バーコードスキャナーはレーザーなのでなんなく読めるのです。</p>

<p>ケーブルの紙は少し角度が付いていることもあり、8mmのQRコードを専用プリンタで印刷して平面状態にしたところ、少しは読めるようになったのですが、まだまだ実用には程遠い状態です。</p>

<p>試行錯誤が始まりました。</p>

<p>【2018/07/18追記】<br>
8mmのQRコードはソフトウェアでの対応は難しく(カメラのピントが合わせ難いやQRコードが丸まってると読み取りできない)、結局ハードウェアの小型QRコードリーダーUSB対応(例 <a href="https://www.e-welcom.com/products/h/scanner/cubeqr/index.html" rel="nofollow noopener" target="_blank">cubeQR</a>)で対応することになりました。</p>

<h2>
<span id="試行１-グレースケール化" class="fragment"></span><a href="#%E8%A9%A6%E8%A1%8C%EF%BC%91-%E3%82%B0%E3%83%AC%E3%83%BC%E3%82%B9%E3%82%B1%E3%83%BC%E3%83%AB%E5%8C%96"><i class="fa fa-link"></i></a>試行１ グレースケール化</h2>

<p>カメラ画像をグレースケール化します。気休めかも知れません。<br>
【2017/12/23追記】2値化する上でグレースケール化は必須です。</p>

<p><a href="http://schima.hatenablog.com/entry/20090621/1245595172" rel="nofollow noopener" target="_blank">OpenCvSharpを使う　その3 (グレースケールに変換)</a></p>

<div class="code-frame" data-lang="csharp"><div class="highlight"><pre class="with-code"><code><span class="c1">// カメラ画像の読込み</span>
<span class="k">public</span> <span class="n">Mat</span> <span class="nf">Read</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">Mat</span> <span class="n">result</span> <span class="p">=</span> <span class="k">null</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">_cap</span><span class="p">.</span><span class="nf">IsOpened</span><span class="p">())</span>
    <span class="p">{</span>
        <span class="n">Mat</span> <span class="n">frame</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Mat</span><span class="p">();</span>
        <span class="n">result</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Mat</span><span class="p">();</span>

        <span class="c1">// カメラ画像の読込み</span>
        <span class="n">_cap</span><span class="p">.</span><span class="nf">Read</span><span class="p">(</span><span class="n">frame</span><span class="p">);</span>
        <span class="c1">// グレースケール化</span>
        <span class="n">Cv2</span><span class="p">.</span><span class="nf">CvtColor</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="n">result</span><span class="p">,</span> <span class="n">ColorConversionCodes</span><span class="p">.</span><span class="n">BGRA2GRAY</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h2>
<span id="試行2-先鋭化と2値化" class="fragment"></span><a href="#%E8%A9%A6%E8%A1%8C2-%E5%85%88%E9%8B%AD%E5%8C%96%E3%81%A82%E5%80%A4%E5%8C%96"><i class="fa fa-link"></i></a>試行2 先鋭化と2値化</h2>

<p>先鋭化または2値化をやってみましたが、逆に読めなくなってしまいました。これは研究中です。</p>

<p>【2017/12/23追記】<br>
見た目では読めそうなQRコードを読めるようにするのに色々検討した結果、先鋭化は駄目でしたが2値化ではしきい値を調整すること読めるようになりました。<br>
<a href="https://bi.biopapyrus.jp/ia/opencv/threshold.html" rel="nofollow noopener" target="_blank">画像の閾値処理（2 値化）</a></p>

<p>しきい値をどうやって決めるのかですが、256段階にグレースケール化して使用されている白色が一番多い値(周辺の明るさ)を算出します。<br>
例えば算出値が209と明るめの場合、190～200の範囲で2値化して解析して読めるかを繰り返します。すると194でerrorの値となり、195で解析可能となりました。ちなみに196では解析不可でした。<br>
同様に算出値が90と暗めの場合、70～80の範囲で2値化すると、75で解析可能となりました。</p>

<p>手動(ボタンをクリックして解析)の場合には数秒は待ってもらえるので、2値化する範囲を広げてじっくり解析できます。自動(リアルタイム)では、2値化する範囲を狭めて解析します。その基準となるしきい値はトラックバーを用意してユーザー側である程度調整させるのと、手動で読めた際のしきい値を反映させます。<br>
ここらへんはどうするのか検討中です。</p>

<h2>
<span id="試行3-マクロレンズ" class="fragment"></span><a href="#%E8%A9%A6%E8%A1%8C3-%E3%83%9E%E3%82%AF%E3%83%AD%E3%83%AC%E3%83%B3%E3%82%BA"><i class="fa fa-link"></i></a>試行3 マクロレンズ</h2>

<p>ソフトが駄目ならハードでってことで、100均ショップにスマホ用カメラにクリップで付けるマクロレンズが売っていたので購入しました。</p>

<p>確かに付けることで少しは読めるようになるのですが、SurfaceとQRコードをかなり近づけることになるので、運用上あまりイケていない。あくまでソフト側で対応することにしました。</p>

<p>【2017/12/23追記】<br>
Surfaceは借り物だったので返してしまった。開発PCの内蔵カメラは性能が低いので、マクロレンズを使わないとボケてしまう。さすがにボケると滲んで2値化で調整しても読めないので今は必須です。</p>

<h2>
<span id="試行4-読み取り種類の限定化" class="fragment"></span><a href="#%E8%A9%A6%E8%A1%8C4-%E8%AA%AD%E3%81%BF%E5%8F%96%E3%82%8A%E7%A8%AE%E9%A1%9E%E3%81%AE%E9%99%90%E5%AE%9A%E5%8C%96"><i class="fa fa-link"></i></a>試行4 読み取り種類の限定化</h2>

<p>TryHarderオプションの有効化と読み取るバーコードの種類をBarcodeFormat.CODE_39, BarcodeFormat.QR_CODEの２種類にしました。</p>

<p><a href="http://d.sunnyone.org/2015/09/zxingnet.html" rel="nofollow noopener" target="_blank">ZXing(.Net)のバーコード認識率を上げる方法</a></p>

<div class="code-frame" data-lang="csharp"><div class="highlight"><pre class="with-code"><code><span class="c1">// 解析処理</span>
<span class="k">public</span> <span class="n">Result</span> <span class="nf">Analyze</span><span class="p">(</span><span class="n">Mat</span> <span class="n">img</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">BarcodeReader</span> <span class="n">reader</span> <span class="p">=</span> <span class="k">new</span> <span class="n">BarcodeReader</span>
    <span class="p">{</span>
        <span class="n">AutoRotate</span> <span class="p">=</span> <span class="k">true</span><span class="p">,</span>
        <span class="n">TryInverted</span> <span class="p">=</span> <span class="k">true</span><span class="p">,</span>
        <span class="c1">// Code-39とQRコードに限定</span>
        <span class="n">Options</span> <span class="p">=</span> <span class="k">new</span> <span class="n">ZXing</span><span class="p">.</span><span class="n">Common</span><span class="p">.</span><span class="n">DecodingOptions</span>
        <span class="p">{</span>
            <span class="n">TryHarder</span> <span class="p">=</span> <span class="k">true</span><span class="p">,</span>
            <span class="n">PossibleFormats</span> <span class="p">=</span> <span class="k">new</span><span class="p">[]</span> <span class="p">{</span> <span class="n">BarcodeFormat</span><span class="p">.</span><span class="n">QR_CODE</span> <span class="p">}.</span><span class="nf">ToList</span><span class="p">()</span>
        <span class="p">}</span>
    <span class="p">};</span>

    <span class="k">return</span> <span class="n">reader</span><span class="p">.</span><span class="nf">Decode</span><span class="p">(</span><span class="n">img</span><span class="p">.</span><span class="nf">ToBitmap</span><span class="p">());</span>
<span class="p">}</span>
</code></pre></div></div>

<h2>
<span id="試行5-射影変換" class="fragment"></span><a href="#%E8%A9%A6%E8%A1%8C5-%E5%B0%84%E5%BD%B1%E5%A4%89%E6%8F%9B"><i class="fa fa-link"></i></a>試行5 射影変換</h2>

<p>ZXingはファインダパタンなどの座標を取得後に文字列のデコードを開始します。しかし、このデコードに失敗した場合に例え座標が取れていてもResultオブジェクトは生成されません。これは非常に勿体無い。<br>
その為、QRコードの認識位置を取得するようにZXingライブラリを修正する。<br>
座標が取れてデコードが失敗する場合、QRコードの部分を抜き出して、射影変換後に再度デコードさせる。これで少しは良くなりました。</p>

<ul>
<li><a href="http://enlosph.hatenablog.com/entry/2015/09/14/193143" rel="nofollow noopener" target="_blank">急角度・急斜面に対応するQRデコーダ（ZXing編）</a></li>
<li><a href="http://sourcechord.hatenablog.com/entry/2017/02/20/233042" rel="nofollow noopener" target="_blank">OpenCvSharpで透視投影の補正</a></li>
</ul>

<p>【2017/12/23追記】<br>
2値化で読めるようになったので射影変換は止めました。ある程度、傾いていても誤り訂正で読んでくれたので、必要性に迫られたら再度検討します。</p>

<h3>
<span id="result情報" class="fragment"></span><a href="#result%E6%83%85%E5%A0%B1"><i class="fa fa-link"></i></a>Result情報</h3>

<ul>
<li>Result.Text : デコード結果の文字列</li>
<li>Result.Points[*] : 0-2はファインダパタン（L字で順に取得する．つまり[1]が折れた箇所），3以降は位置合わせパタン</li>
<li>ResultPoint では左下、左上、右上、右下(位置補正)の順に取得</li>
</ul>

<p>【2017/12/23追記】<br>
ResultPointは、左下→左上→右上の順の時と、右下→左下→右上の順の時がありました。<br>
ResultPointはファインダパタンの中央点となるので、端までの差を決めてあげればQRコード部分のみの画像が取得できます。※射影変換をやめたので今は使っていません。</p>

<div class="code-frame" data-lang="csharp"><div class="highlight"><pre class="with-code"><code><span class="c1">// ファインダパタンの中央点から端までの差</span>
<span class="k">public</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">IMAGE_MERGIN_SIZE</span> <span class="p">=</span> <span class="m">22</span><span class="p">;</span>

<span class="c1">/// &lt;summary&gt;</span>
<span class="c1">/// ポイント情報からQRコード部分のサイズを取得する</span>
<span class="c1">/// &lt;/summary&gt;</span>
<span class="c1">/// &lt;param name="result"&gt;ポイント情報&lt;/param&gt;</span>
<span class="c1">/// &lt;param name="width"&gt;最大幅&lt;/param&gt;</span>
<span class="c1">/// &lt;param name="height"&gt;最大高さ&lt;/param&gt;</span>
<span class="c1">/// &lt;returns&gt;QRコード部分のサイズ&lt;/returns&gt;</span>
<span class="k">public</span> <span class="n">Rect</span> <span class="nf">GetPoints</span><span class="p">(</span><span class="n">Result</span> <span class="n">result</span><span class="p">,</span> <span class="kt">int</span> <span class="n">width</span><span class="p">,</span> <span class="kt">int</span> <span class="n">height</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// ポイント情報からQRコード部分を切り取る</span>
    <span class="kt">int</span> <span class="n">stX</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">stY</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">w</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">h</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="n">ResultPoints</span><span class="p">[</span><span class="m">0</span><span class="p">].</span><span class="n">X</span> <span class="p">&lt;</span> <span class="n">result</span><span class="p">.</span><span class="n">ResultPoints</span><span class="p">[</span><span class="m">2</span><span class="p">].</span><span class="n">X</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// 左下→左上→右上</span>
        <span class="n">stX</span> <span class="p">=</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="nf">GetMinValue</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="n">ResultPoints</span><span class="p">[</span><span class="m">0</span><span class="p">].</span><span class="n">X</span><span class="p">,</span> <span class="n">result</span><span class="p">.</span><span class="n">ResultPoints</span><span class="p">[</span><span class="m">1</span><span class="p">].</span><span class="n">X</span><span class="p">)</span> <span class="p">-</span> <span class="n">IMAGE_MERGIN_SIZE</span><span class="p">;</span>
        <span class="n">stY</span> <span class="p">=</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="nf">GetMinValue</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="n">ResultPoints</span><span class="p">[</span><span class="m">1</span><span class="p">].</span><span class="n">Y</span><span class="p">,</span> <span class="n">result</span><span class="p">.</span><span class="n">ResultPoints</span><span class="p">[</span><span class="m">2</span><span class="p">].</span><span class="n">Y</span><span class="p">)</span> <span class="p">-</span> <span class="n">IMAGE_MERGIN_SIZE</span><span class="p">;</span>
        <span class="n">w</span> <span class="p">=</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">result</span><span class="p">.</span><span class="n">ResultPoints</span><span class="p">[</span><span class="m">2</span><span class="p">].</span><span class="n">X</span> <span class="p">+</span> <span class="n">IMAGE_MERGIN_SIZE</span> <span class="p">-</span> <span class="n">stX</span><span class="p">;</span>
        <span class="n">h</span> <span class="p">=</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">result</span><span class="p">.</span><span class="n">ResultPoints</span><span class="p">[</span><span class="m">0</span><span class="p">].</span><span class="n">Y</span> <span class="p">+</span> <span class="n">IMAGE_MERGIN_SIZE</span> <span class="p">-</span> <span class="n">stY</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="c1">// 右下→左下→右上</span>
        <span class="n">stX</span> <span class="p">=</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="nf">GetMinValue</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="n">ResultPoints</span><span class="p">[</span><span class="m">1</span><span class="p">].</span><span class="n">X</span><span class="p">,</span> <span class="n">result</span><span class="p">.</span><span class="n">ResultPoints</span><span class="p">[</span><span class="m">2</span><span class="p">].</span><span class="n">X</span><span class="p">)</span> <span class="p">-</span> <span class="n">IMAGE_MERGIN_SIZE</span><span class="p">;</span>
        <span class="n">stY</span> <span class="p">=</span> <span class="p">(</span><span class="kt">int</span><span class="p">)(</span><span class="n">result</span><span class="p">.</span><span class="n">ResultPoints</span><span class="p">[</span><span class="m">2</span><span class="p">].</span><span class="n">Y</span> <span class="p">-</span> <span class="n">IMAGE_MERGIN_SIZE</span><span class="p">);</span>
        <span class="n">w</span> <span class="p">=</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">result</span><span class="p">.</span><span class="n">ResultPoints</span><span class="p">[</span><span class="m">0</span><span class="p">].</span><span class="n">X</span> <span class="p">+</span> <span class="n">IMAGE_MERGIN_SIZE</span> <span class="p">-</span> <span class="n">stX</span><span class="p">;</span>
        <span class="n">h</span> <span class="p">=</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">result</span><span class="p">.</span><span class="n">ResultPoints</span><span class="p">[</span><span class="m">1</span><span class="p">].</span><span class="n">Y</span> <span class="p">+</span> <span class="n">IMAGE_MERGIN_SIZE</span> <span class="p">-</span> <span class="n">stY</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">stX</span> <span class="p">=</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="nf">GetMaxValue</span><span class="p">(</span><span class="n">stX</span><span class="p">,</span> <span class="m">0</span><span class="p">);</span>
    <span class="n">stY</span> <span class="p">=</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="nf">GetMaxValue</span><span class="p">(</span><span class="n">stY</span><span class="p">,</span> <span class="m">0</span><span class="p">);</span>
    <span class="n">w</span> <span class="p">=</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="nf">GetMinValue</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="n">width</span><span class="p">);</span>
    <span class="n">h</span> <span class="p">=</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="nf">GetMinValue</span><span class="p">(</span><span class="n">h</span><span class="p">,</span> <span class="n">height</span><span class="p">);</span>

    <span class="k">return</span> <span class="k">new</span> <span class="nf">Rect</span><span class="p">(</span><span class="n">stX</span><span class="p">,</span> <span class="n">stY</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// 引数の小さい値を取得する</span>
<span class="k">private</span> <span class="kt">float</span> <span class="nf">GetMinValue</span><span class="p">(</span><span class="kt">float</span> <span class="n">min1</span><span class="p">,</span> <span class="kt">float</span> <span class="n">min2</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">min1</span> <span class="p">&lt;=</span> <span class="n">min2</span> <span class="p">?</span> <span class="n">min1</span> <span class="p">:</span> <span class="n">min2</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// 引数の大きい値を取得する</span>
<span class="k">private</span> <span class="kt">float</span> <span class="nf">GetMaxValue</span><span class="p">(</span><span class="kt">float</span> <span class="n">max1</span><span class="p">,</span> <span class="kt">float</span> <span class="n">max2</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">min1</span> <span class="p">&gt;=</span> <span class="n">min2</span> <span class="p">?</span> <span class="n">max1</span> <span class="p">:</span> <span class="n">max2</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<h3>
<span id="opnecvのpointで取得位置の順番" class="fragment"></span><a href="#opnecv%E3%81%AEpoint%E3%81%A7%E5%8F%96%E5%BE%97%E4%BD%8D%E7%BD%AE%E3%81%AE%E9%A0%86%E7%95%AA"><i class="fa fa-link"></i></a>OpneCVのPointで取得位置の順番</h3>

<p>左上、左下、右下、右上の順</p>

<h1>
<span id="zxingnetのデバッグ" class="fragment"></span><a href="#zxingnet%E3%81%AE%E3%83%87%E3%83%90%E3%83%83%E3%82%B0"><i class="fa fa-link"></i></a>ZXing.Netのデバッグ</h1>

<p>読めるQRコードと読めないQRコードの画像を比較しても、見た目に違いがないのに読めない。<br>
その原因を探るにはZXing.Netのライブラリをデバッグしていけば何か分かるはず。</p>

<p>ソースコードをダウンロードします。<br>
<a href="https://github.com/micjahn/ZXing.Net" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/micjahn/ZXing.Net</a></p>

<p>今回のアプリケーションは.NET4.6を使用しているので、プロジェクトに.Net4.6用のzxing.net4.6.csprojを追加します。<br>
これで、Decodeメソッドでステップインしていけば、ZXing.Netに入っていけます。</p>

<h1>
<span id="最後に" class="fragment"></span><a href="#%E6%9C%80%E5%BE%8C%E3%81%AB"><i class="fa fa-link"></i></a>最後に</h1>

<p>14日あたりから、QRコード読み取りの研究に再度取り組むことになるので1週間後にまた記事を更新できると思います。</p>

<p>【2017/12/23追記】<br>
14日以降で分かった範囲を追記しました。</p>

<h1>
<span id="参照" class="fragment"></span><a href="#%E5%8F%82%E7%85%A7"><i class="fa fa-link"></i></a>参照</h1>

<h2>
<span id="opencvsharp" class="fragment"></span><a href="#opencvsharp"><i class="fa fa-link"></i></a>OpenCVSharp</h2>

<p>OpenCVSharp自体は、日本の方が開発している。</p>

<ul>
<li><a href="http://schima.hatenablog.com/entry/20090616/1245081217" rel="nofollow noopener" target="_blank">OpenCvSharpを使う　その1 (準備)</a></li>
<li><a href="https://shimat.github.io/opencvsharp_docs/html/d75eb659-6335-53f6-af7a-81814a21ab7f.htm" rel="nofollow noopener" target="_blank">OpenCVSharp APIリファレンス</a></li>
<li><a href="http://opencv.jp/reference_manual" rel="nofollow noopener" target="_blank">OpenCVリファレンス(日本語)</a></li>
</ul>

<h3>
<span id="導入と使い方" class="fragment"></span><a href="#%E5%B0%8E%E5%85%A5%E3%81%A8%E4%BD%BF%E3%81%84%E6%96%B9"><i class="fa fa-link"></i></a>導入と使い方</h3>

<ul>
<li><a href="http://schima.hatenablog.com/entry/2013/12/15/110513" rel="nofollow noopener" target="_blank">OpenCvSharpをつかう　その17(NuGetで導入)</a></li>
<li><a href="http://schima.hatenablog.com/entry/2015/08/17/203901" rel="nofollow noopener" target="_blank">OpenCvSharpをつかう　その23 (OpenCV 3.0対応)</a></li>
<li><a href="http://schima.hatenablog.com/entry/20090903/1251978952" rel="nofollow noopener" target="_blank">OpenCvSharpをつかう　その6 (PictureBoxIpl)</a></li>
<li><a href="http://sourcechord.hatenablog.com/entry/2016/08/11/121553" rel="nofollow noopener" target="_blank">OpenCvSharp3を使ってみた</a></li>
</ul>

<h3>
<span id="カメラ" class="fragment"></span><a href="#%E3%82%AB%E3%83%A1%E3%83%A9"><i class="fa fa-link"></i></a>カメラ</h3>

<ul>
<li><a href="C#%E3%81%A7%E7%94%BB%E5%83%8F%E5%87%A6%E7%90%86-WEB%E3%82%AB%E3%83%A1%E3%83%A9%E3%81%AE%E4%BD%BF%E7%94%A8">http://robot-factory.blogspot.jp/2013/10/c-web.html</a></li>
<li><a href="https://tocsworld.wordpress.com/2014/02/26/c%E3%81%AB%E3%82%88%E3%82%8Busb%E3%82%AB%E3%83%A1%E3%83%A9%E6%93%8D%E4%BD%9Cwpf%E7%B7%A8/" rel="nofollow noopener" target="_blank">C#によるUSBカメラ操作(WPF編)</a></li>
<li><a href="https://debuyan.wordpress.com/2016/05/22/opencvsharp3%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6web%E3%82%AB%E3%83%A1%E3%83%A9%E3%81%AE%E3%82%AD%E3%83%A3%E3%83%97%E3%83%81%E3%83%A3/" rel="nofollow noopener" target="_blank">OpenCVSharp3を使ってWebカメラのキャプチャ</a></li>
<li><a href="https://blogs.yahoo.co.jp/mikewanko2/13932243.html" rel="nofollow noopener" target="_blank">がんばるC# (OpenCV)</a></li>
</ul>

<h3>
<span id="mat型" class="fragment"></span><a href="#mat%E5%9E%8B"><i class="fa fa-link"></i></a>Mat型</h3>

<p>OpenCVの画像はMat型変数で表現されます。Matという名前は matrix で行列の略です。その為、行列なので(行、列)の順に指定されるため、一般の画像指定の(x, y)ではない。※x, yの順番が逆なことに注意!!</p>

<table>
<thead>
<tr>
<th style="text-align: left">定数</th>
<th style="text-align: left">内容</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left">CV_8UC1</td>
<td style="text-align: left">8ビット、符号なし、1チャンネルのデータ</td>
</tr>
<tr>
<td style="text-align: left">CV_8UC3</td>
<td style="text-align: left">8ビット、符号なし、3チャンネルのデータ</td>
</tr>
</tbody>
</table>

<p>※CV_8Uは0から255の整数<br>
※1画素はB, G, Rの順に格納されている。</p>

<ul>
<li><a href="http://www.wakayama-u.ac.jp/%7Echen/opencv/opencv2.html%7C" rel="nofollow noopener" target="_blank">２．画像の簡単操作</a></li>
<li><a href="http://gori-naru.blogspot.jp/2012/11/mat.html" rel="nofollow noopener" target="_blank">知っておきたいMatのゴリ知識</a></li>
</ul>

<h3>
<span id="画像アクセス" class="fragment"></span><a href="#%E7%94%BB%E5%83%8F%E3%82%A2%E3%82%AF%E3%82%BB%E3%82%B9"><i class="fa fa-link"></i></a>画像アクセス</h3>

<ul>
<li><a href="http://sourcechord.hatenablog.com/entry/2016/08/15/235654" rel="nofollow noopener" target="_blank">OpenCvSharp3入門</a></li>
<li><a href="http://www.84kure.com/blog/2014/07/13/c-%E3%83%93%E3%83%83%E3%83%88%E3%83%9E%E3%83%83%E3%83%97%E3%81%AB%E3%83%94%E3%82%AF%E3%82%BB%E3%83%AB%E5%8D%98%E4%BD%8D%E3%81%A7%E9%AB%98%E9%80%9F%E3%81%AB%E3%82%A2%E3%82%AF%E3%82%BB%E3%82%B9/" rel="nofollow noopener" target="_blank">[C#] ビットマップにピクセル単位で高速にアクセスするには (GetPixel/SetPixel vs BitmapData 速度比較)</a></li>
<li><a href="http://d.akiroom.com/2012-06/opencv-pixel-read-write-get-set/" rel="nofollow noopener" target="_blank">OpenCVでピクセルにアクセスする方法4つ</a></li>
</ul>

<h3>
<span id="matとbitmap相互変換" class="fragment"></span><a href="#mat%E3%81%A8bitmap%E7%9B%B8%E4%BA%92%E5%A4%89%E6%8F%9B"><i class="fa fa-link"></i></a>MATとBITMAP相互変換</h3>

<ul>
<li><a href="http://nc30mtd.oops.jp/blog/2015/01/opencvsharpiplimagebitmap.html" rel="nofollow noopener" target="_blank">OpenCvSharpでのIplImageとBitmapの相互変換</a></li>
<li><a href="http://micchysdiary.blogspot.jp/2011/10/bitmaptomat-mattobitmap-opencv-java-api.html" rel="nofollow noopener" target="_blank">BitmapToMat &amp; MatToBitmapを使う際の注意点 OpenCV Java API for Android</a></li>
</ul>

<h2>
<span id="zxingゼブラクロッシング" class="fragment"></span><a href="#zxing%E3%82%BC%E3%83%96%E3%83%A9%E3%82%AF%E3%83%AD%E3%83%83%E3%82%B7%E3%83%B3%E3%82%B0"><i class="fa fa-link"></i></a>ZXing(ゼブラクロッシング)</h2>

<p>ZXing(ゼブラクロッシング)はGoogle が開発して<a href="https://github.com/zxing/zxing" rel="nofollow noopener" target="_blank">公開</a>している、様々な一次元や二次元のバーコードの生成/操作ができるオープンソースライブラリです。</p>

<ul>
<li><a href="http://dsas.blog.klab.org/archives/52107940.html" rel="nofollow noopener" target="_blank">「ZXing QR コードスキャナー」の内部処理を追う</a></li>
<li><a href="http://d.sunnyone.org/2015/09/zxingnet.html" rel="nofollow noopener" target="_blank">ZXing(.Net)のバーコード認識率を上げる方法</a></li>
</ul>

<h2>
<span id="その他" class="fragment"></span><a href="#%E3%81%9D%E3%81%AE%E4%BB%96"><i class="fa fa-link"></i></a>その他</h2>

<ul>
<li><a href="http://hiroyky.hatenablog.com/entry/2017/02/23/005957" rel="nofollow noopener" target="_blank">HololensでQRコードリーダを作ってみた．</a></li>
<li><a href="http://www.dogodemo.net/redmine/projects/dogodemo/wiki/WEB%E3%82%AB%E3%83%A1%E3%83%A9%EF%BC%86_ZBar_%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%9F_%E3%82%AD%E3%83%A3%E3%83%97%E3%83%81%E3%83%A3%E3%83%BC%EF%BC%86%E8%87%AA%E5%8B%95%E3%82%B9%E3%82%AD%E3%83%A3%E3%83%B3_%E3%82%A2%E3%83%97%E3%83%AA" rel="nofollow noopener" target="_blank">WEBカメラ＆ ZBar を使った キャプチャー＆自動スキャン アプリ</a></li>
</ul>
</div></div></section><div class="css-1yzj1fm"><div class="css-1uv1qiv"><span class="fa fa-twitter"></span></div><div class="css-1uv1qiv"><span class="fa fa-facebook"></span></div></div><div class="apm-Content"><div class="apm-Content_title">Why not register and get more from Qiita?</div><ol class="apm-Content_list"><li>We will deliver articles that match you<div class="description">By following users and tags, you can catch up information on technical fields that you are interested in as a whole</div></li><li>you can read useful information later efficiently<div class="description">By &quot;stocking&quot; the articles you like, you can search right away</div></li><div><a class="apm-Content_help" href="https://help.qiita.com/ja/articles/qiita-login-user" target="_blank"><i class="fa fa-fw fa-arrow-circle-right"></i>What you can do with signing up</a></div></ol><a href="/signup?callback_action=login_or_signup&amp;redirect_to=%2Fyaju%2Fitems%2F57eddbbf3f01659f16e8&amp;realm=qiita" class="apm-Content_button apm-Content_button-signup">Sign up</a><a href="/login?callback_action=login_or_signup&amp;redirect_to=%2Fyaju%2Fitems%2F57eddbbf3f01659f16e8&amp;realm=qiita" class="apm-Content_button apm-Content_button-signin">Login</a></div></div><div class="css-helsa7"></div></div></div></div><div class="css-109dbrr"><div class="css-5jpx49"><div class="css-mnxgyc"><button class=" css-1vlpknv"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/yaju/items/57eddbbf3f01659f16e8/likers" class="css-1iupg5d">22</a></div><div class="css-fsjkhv"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-1b17vb0">25</span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-7i7f4d"><div class="css-1gj7nt">Improve article</div><a href="/drafts/57eddbbf3f01659f16e8/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/yaju/items/57eddbbf3f01659f16e8/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/yaju/items/57eddbbf3f01659f16e8/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/yaju/items/57eddbbf3f01659f16e8/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/yaju/items/57eddbbf3f01659f16e8.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="PersonalArticlePage" data-dom-id="PersonalArticlePage-react-component-901ce6c4-d77e-4903-9013-a319dc54caae">{"authorAnalyticsTrackingId":"UA-46720329-2","organizationAnalyticsTrackingId":null}</script>
      
<footer id="globalFooter" class="st-Footer"><div class="st-Footer_container"><div class="st-Footer_start"><div class="st-Footer_logo"><svg viewbox="0 0 426.57 130" xmlns="http://www.w3.org/2000/svg"><circle cx="167.08" cy="21.4" r="12.28" /><path d="M250.81 29.66h23.48v18.9h-23.48z" /><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z" /><circle cx="216.33" cy="21.4" r="12.28" /></svg></div><div class="st-Footer_catchcopy">How developers code is here.</div><div class="st-Footer_socials"><a class="fa fa-twitter" href="https://twitter.com/qiita"></a><a class="fa fa-facebook-square" href="https://www.facebook.com/qiita/"></a></div></div><div class="st-Footer_end"><div class="st-Footer_qiita"><div class="st-Footer_label">Qiita</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="/about">About</a><a href="/terms">Terms</a><a href="/privacy">Privacy</a><a target="_blank" href="http://help.qiita.com/ja/articles/qiita-community-guideline">Guideline</a><a target="_blank" href="https://help.qiita.com/ja/articles/others-brand-guideline">Design Guideline</a></div><div class="st-Footer_column"><a href="/release-notes">Release</a><a href="/api/v2/docs">API</a><a href="/feedback/new">ご意見</a><a href="https://help.qiita.com">Help</a><a target="_blank" href="https://qiita.com/ads?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Advertisement</a></div></div></div><div class="st-Footer_increments"><div class="st-Footer_label">Increments</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="https://increments.co.jp/company/">About</a><a href="https://increments.co.jp/jobs/">採用情報</a><a href="https://blog.qiita.com">Blog</a></div><div class="st-Footer_column"><a href="https://teams.qiita.com/">Qiita Team</a><a href="https://jobs.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Jobs</a><a href="https://zine.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Zine</a></div></div></div></div></div><div class="st-Footer_copyright">© 2011-2021 Increments Inc.</div></footer><div id="Snackbar-react-component-c2300038-523a-4a60-82a3-4a1379a90543"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="Snackbar" data-dom-id="Snackbar-react-component-c2300038-523a-4a60-82a3-4a1379a90543">{}</script>
      
<div id="LoginModal-react-component-6d5cd695-ca57-4e0f-9749-57f4994ba994"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="LoginModal" data-dom-id="LoginModal-react-component-6d5cd695-ca57-4e0f-9749-57f4994ba994">{}</script>
      
<div id="StockModal-react-component-1bed51f4-9906-42e7-8a65-7fc4bc7c4c29"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="StockModal" data-dom-id="StockModal-react-component-1bed51f4-9906-42e7-8a65-7fc4bc7c4c29">{}</script>
      
</div><div id="dataContainer" style="display: none;" data-config="{&quot;actionPath&quot;:&quot;public/items#show&quot;,&quot;settings&quot;:{&quot;analyticsTrackingId&quot;:&quot;UA-24675221-12&quot;,&quot;assetsMap&quot;:{},&quot;csrfToken&quot;:&quot;njRMDN6rlGRNge7R3pxBphaqD+z8x6EEWvkuMFv1HmWbp8iW9ayP47tqtkzrhn0xxve8nVwn+5PITk5FAKENrw==&quot;,&quot;locale&quot;:&quot;en&quot;},&quot;currentUser&quot;:null}" /></body></html><script type="application/json" data-js-react-on-rails-store="AppStoreWithReactOnRails">{"snackbar":{"type":"","body":"","isActive":false},"article":{"article":{"body":"\n\u003ch1\u003e\n\u003cspan id=\"はじめに\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eはじめに\u003c/h1\u003e\n\n\u003cp\u003eこれは\u003ca href=\"https://qiita.com/advent-calendar/2017/opencv\"\u003eOpenCV Advent Calendar 2017\u003c/a\u003eの13日目の記事となります。\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003e本来はバーコード読み取り精度を高めた上で記事にする予定だったのですが、別の開発の遅れにより13日に間に合わなかったので、それは後々とします。\u003c/strong\u003e\u003cbr\u003e\n【2017/12/23追記】14日以降に幾つか分かったことを追記しました。\u003c/p\u003e\n\n\u003cp\u003eお仕事でKEYENCEやDENSOなどの専用バーコードスキャナーを使っています。最近は、アスタリスク社のiPod Touchを使ったバーコードスキャナーの提案も受けます。\u003c/p\u003e\n\n\u003cp\u003e今回、マイクロソフト Surface Pro 4 の内蔵カメラを使って、バーコードを読めないかという依頼がありました。Surfaceなら持ち歩けるので、その場で読みたい。バーコードスキャナーを一緒に持ち歩きたくない。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"qrコード\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#qr%E3%82%B3%E3%83%BC%E3%83%89\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eQRコード\u003c/h1\u003e\n\n\u003cp\u003eQRコード（Quick Responce Code）は1994年にデンソーウェブの開発した、マトリックス型2次元コードの一種です。名前の通り、高速読取を目的に開発されました。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"http://hrnabi.com/2017/12/12/15799/\" rel=\"nofollow noopener\" target=\"_blank\"\u003eどうしてあの形なの？ QRコードに秘められた技術を「生みの親」に聞いた\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://www.keyence.co.jp/ss/products/autoid/codereader/basic2d_qr.jsp\" rel=\"nofollow noopener\" target=\"_blank\"\u003eQRコードとは\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"http://www.ryusuke.net/archives/765\" rel=\"nofollow noopener\" target=\"_blank\"\u003eQRコードの誤り訂正レベルの判別方法～アイカツスターズ！のQRコードを分析してみる\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"開発環境\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E9%96%8B%E7%99%BA%E7%92%B0%E5%A2%83\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e開発環境\u003c/h1\u003e\n\n\u003cp\u003eマイクロソフト Surface Pro 4 バックカメラ 800万画素\u003c/p\u003e\n\n\u003cp\u003eカメラ操作にOpenCVSharp 、バーコード読取りにZXing(ゼブラクロッシング)を使用します。\u003cbr\u003e\nNuGetから現在バージョンとして、OpenCVSharp v3.3.1.20171117 と ZXing.Net v0.16.2 をインストールしています。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"クラス分け\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%AF%E3%83%A9%E3%82%B9%E5%88%86%E3%81%91\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eクラス分け\u003c/h2\u003e\n\n\u003cp\u003eCameraクラスを別途作成し、Windowsフォーム側と分離するようにしています。\u003cbr\u003e\n画像処理はMat型を受け渡ししています。バーコード解析処理もCameraクラスに内包しています。\u003cbr\u003e\n※ソースコードを一部掲載していますが、掲載用に編集しているのでそのままでは動きません。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"デリゲート委譲\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%87%E3%83%AA%E3%82%B2%E3%83%BC%E3%83%88%E5%A7%94%E8%AD%B2\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eデリゲート(委譲)\u003c/h2\u003e\n\n\u003cp\u003eCameraクラスからWindowsフォーム側にアクセスしたい場合、デリゲートを使っています。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"c1\"\u003e// 【Cameraクラス側】\u003c/span\u003e\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003edelegate\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eDisplayProgress\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eMat\u003c/span\u003e \u003cspan class=\"n\"\u003eimg\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003ethreshold\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e// デコード処理\u003c/span\u003e\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"nf\"\u003eDecode\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003emin\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003emax\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"k\"\u003eadd\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eMat\u003c/span\u003e \u003cspan class=\"n\"\u003eimg\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003ethreshold\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eDisplayProgress\u003c/span\u003e \u003cspan class=\"n\"\u003ecallback\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e// (中略)\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e// フォーム側処理を呼ぶ\u003c/span\u003e\n    \u003cspan class=\"n\"\u003ecallback\u003c/span\u003e\u003cspan class=\"p\"\u003e?.\u003c/span\u003e\u003cspan class=\"nf\"\u003eInvoke\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eimg2\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003evalue\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e// (中略)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// 【フォーム側処理】\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e// しきい値を中央に解析する\u003c/span\u003e\n\u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"k\"\u003evalue\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003eawait\u003c/span\u003e \u003cspan class=\"n\"\u003eTask\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eRun\u003c/span\u003e\u003cspan class=\"p\"\u003e(()\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003e_camera\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eDecode\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003emin\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003emax\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eimg\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ethreshold\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eAnalyzeDisplay\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eAnalyzeDisplay\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eMat\u003c/span\u003e \u003cspan class=\"n\"\u003eimg\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003ethreshold\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eInvoke\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eAction\u003c/span\u003e\u003cspan class=\"p\"\u003e(()\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e \n        \u003cspan class=\"n\"\u003epicCapture\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eImageIpl\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eimg\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"n\"\u003etxtThreshold\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eText\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ethreshold\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eToString\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}));\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"http://kan-kikuchi.hatenablog.com/entry/Delegate\" rel=\"nofollow noopener\" target=\"_blank\"\u003eデリゲートとは【C#】\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"http://eno0514.hatenadiary.jp/entry/20150820/1440012230\" rel=\"nofollow noopener\" target=\"_blank\"\u003eC#のイベントとデリゲート(delegate)の違い\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"カメラ画像の読取り\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%AB%E3%83%A1%E3%83%A9%E7%94%BB%E5%83%8F%E3%81%AE%E8%AA%AD%E5%8F%96%E3%82%8A\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eカメラ画像の読取り\u003c/h1\u003e\n\n\u003cp\u003eカメラ画像の読取りには、BackgroundWorkerクラスを使用しています。キャプチャー画像はPictureBoxIplコントロール(picMain)をCenterImageにして中央にQRコードを表示するようにしています。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"c1\"\u003e// 【Cameraクラス側】\u003c/span\u003e\n\u003cspan class=\"n\"\u003eVideoCapture\u003c/span\u003e \u003cspan class=\"n\"\u003e_cap\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003eCamera\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e// カメラ有無 0:バックカメラ 1:フロントカメラ\u003c/span\u003e\n    \u003cspan class=\"n\"\u003e_cap\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eVideoCapture\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"n\"\u003eAutoFocus\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003efalse\u003c/span\u003e \u003cspan class=\"p\"\u003e};\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eEnabled\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003e_cap\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eIsOpened\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// 【フォーム側処理】\u003c/span\u003e\n\u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"n\"\u003e_isRunning\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003efalse\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// バッググラウンド処理\u003c/span\u003e\n\u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003ebgWorker_DoWork\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eobject\u003c/span\u003e \u003cspan class=\"n\"\u003esender\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eDoWorkEventArgs\u003c/span\u003e \u003cspan class=\"n\"\u003ee\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eBackgroundWorker\u003c/span\u003e \u003cspan class=\"n\"\u003eworker\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eBackgroundWorker\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"n\"\u003esender\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(!\u003c/span\u003e\u003cspan class=\"n\"\u003e_camera\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eEnabled\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003ewhile\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003e_isRunning\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e// bgWorker_ProgressChangedイベントで画像取得\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eMat\u003c/span\u003e \u003cspan class=\"n\"\u003edst\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003e_camera\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eRead\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eworker\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eReportProgress\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003edst\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// バッググラウンド進行変更イベント処理\u003c/span\u003e\n\u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003ebgWorker_ProgressChanged\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eobject\u003c/span\u003e \u003cspan class=\"n\"\u003esender\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eProgressChangedEventArgs\u003c/span\u003e \u003cspan class=\"n\"\u003ee\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e// カメラ画像表示\u003c/span\u003e\n    \u003cspan class=\"n\"\u003epicMain\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eImageIpl\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eMat\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"n\"\u003ee\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eUserState\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// キャプチャー開始処理\u003c/span\u003e\n\u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eCaputureStart\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"n\"\u003e_isRunning\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"n\"\u003ebgWorker\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eRunWorkerAsync\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n    \u003cspan class=\"n\"\u003etmrCapture\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eEnabled\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// キャプチャー停止処理\u003c/span\u003e\n\u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eCaputureStop\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"n\"\u003e_isRunning\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003efalse\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"n\"\u003ebgWorker\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eCancelAsync\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n    \u003cspan class=\"n\"\u003etmrCapture\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eEnabled\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003efalse\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"ターゲット枠配置\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%BF%E3%83%BC%E3%82%B2%E3%83%83%E3%83%88%E6%9E%A0%E9%85%8D%E7%BD%AE\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eターゲット枠配置\u003c/h1\u003e\n\n\u003cp\u003eユーザーがQRコードを中央の位置に合わせやすいように、赤色十字のターゲット枠を配置します。\u003cbr\u003e\nキャプチャー画像にターゲット枠を直接描画すると解析上おかしなことになるので、別のPictureBoxにターゲット枠イメージ(png)を用意して、BackColor = Color.Transparent にした上で子コントロール化することでターゲット枠を重ね合せています。\u003ca href=\"http://dobon.net/vb/dotnet/control/labelonpicturebox.html\" rel=\"nofollow noopener\" target=\"_blank\"\u003ePictureBox上のLabelの背景が透明にならない問題の解決法\u003c/a\u003e\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"c1\"\u003e// ターゲットアイコン用(メイン用)\u003c/span\u003e\n\u003cspan class=\"n\"\u003epicMain\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eControls\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAdd\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003epicTargetMain\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"n\"\u003epicTargetMain\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eLeft\u003c/span\u003e \u003cspan class=\"p\"\u003e-=\u003c/span\u003e \u003cspan class=\"n\"\u003epicMain\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eLeft\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"n\"\u003epicTargetMain\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eTop\u003c/span\u003e \u003cspan class=\"p\"\u003e-=\u003c/span\u003e \u003cspan class=\"n\"\u003epicMain\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eTop\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"解析処理\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%A7%A3%E6%9E%90%E5%87%A6%E7%90%86\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e解析処理\u003c/h1\u003e\n\n\u003cp\u003eタイマー(1000ms以内)を使って、ぶれ防止を兼ねてキャプチャー画像を一旦保存した上で、キャプチャー画像サイズが大きく、解析部分を減らすために中央に映っているある程度の範囲のみにトリミングしてから解析処理をしていきます。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"c1\"\u003e// キャプチャー画面\u003c/span\u003e\n\u003cspan class=\"k\"\u003econst\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003eCAPTURE_PATH\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"caputure.png\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// タイマー処理\u003c/span\u003e\n\u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003etmrCapture_Tick\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eobject\u003c/span\u003e \u003cspan class=\"n\"\u003esender\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eEventArgs\u003c/span\u003e \u003cspan class=\"n\"\u003ee\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003epicMain\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eImage\u003c/span\u003e \u003cspan class=\"p\"\u003e==\u003c/span\u003e \u003cspan class=\"k\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e// 画面キャプチャー保存\u003c/span\u003e\n    \u003cspan class=\"n\"\u003epicMain\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eImageIpl\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSaveImage\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eCAPTURE_PATH\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e// 画像読込(中央あたりをトリミング)\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eMat\u003c/span\u003e \u003cspan class=\"n\"\u003esrc\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eMat\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eCAPTURE_PATH\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eRect\u003c/span\u003e \u003cspan class=\"n\"\u003erc\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eRect\u003c/span\u003e\u003cspan class=\"p\"\u003e((\u003c/span\u003e\u003cspan class=\"n\"\u003esrc\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eWidth\u003c/span\u003e \u003cspan class=\"p\"\u003e-\u003c/span\u003e \u003cspan class=\"n\"\u003epicMain\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eWidth\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e/\u003c/span\u003e \u003cspan class=\"m\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                       \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003esrc\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eHeight\u003c/span\u003e \u003cspan class=\"p\"\u003e-\u003c/span\u003e \u003cspan class=\"n\"\u003epicMain\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eHeight\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e/\u003c/span\u003e \u003cspan class=\"m\"\u003e2\u003c/span\u003e \u003cspan class=\"p\"\u003e-\u003c/span\u003e \u003cspan class=\"n\"\u003eCamera\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eIMAGE_MERGIN_SIZE\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                       \u003cspan class=\"n\"\u003epicMain\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eWidth\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                       \u003cspan class=\"n\"\u003epicMain\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eHeight\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"n\"\u003eCamera\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eIMAGE_MERGIN_SIZE\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"n\"\u003epicCapture\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eImageIpl\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eMat\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eMat\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eCAPTURE_PATH\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"n\"\u003erc\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e// そのまま解析\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eResult\u003c/span\u003e \u003cspan class=\"n\"\u003eresult\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003e_camera\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAnalyze\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003epicCapture\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eImageIpl\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eresult\u003c/span\u003e \u003cspan class=\"p\"\u003e==\u003c/span\u003e \u003cspan class=\"k\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003edecode\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eToString\u003c/span\u003e\u003cspan class=\"p\"\u003e().\u003c/span\u003e\u003cspan class=\"nf\"\u003eTrim\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003edecode\u003c/span\u003e \u003cspan class=\"p\"\u003e!=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"\"\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e \u003cspan class=\"n\"\u003edecode\u003c/span\u003e \u003cspan class=\"p\"\u003e!=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"error\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e// 解析出来たなら入力値へ送信\u003c/span\u003e\n        \u003cspan class=\"nf\"\u003eSend\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003edecode\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e// 解析可能性がある\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003edecode\u003c/span\u003e \u003cspan class=\"p\"\u003e==\u003c/span\u003e \u003cspan class=\"s\"\u003e\"error\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e// 自動解析処理\u003c/span\u003e\n        \u003cspan class=\"nf\"\u003eAnalyzeAuto\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003epicCapture\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eImageIpl\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003etrbThreshold\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eValue\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"読み取り精度を高めたい\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%AA%AD%E3%81%BF%E5%8F%96%E3%82%8A%E7%B2%BE%E5%BA%A6%E3%82%92%E9%AB%98%E3%82%81%E3%81%9F%E3%81%84\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e読み取り精度を高めたい\u003c/h1\u003e\n\n\u003cp\u003e2cm以上のQRバーコードはなんなく読めたのですが、ユーザーから実際に使用するバーコードが送られてきたところ、ケーブルに付けられた8mmのQRコードでありました。それだとごくまれに読める程度で実用には程遠い状態です。\u003cbr\u003e\nしかし、専用バーコードスキャナーはレーザーなのでなんなく読めるのです。\u003c/p\u003e\n\n\u003cp\u003eケーブルの紙は少し角度が付いていることもあり、8mmのQRコードを専用プリンタで印刷して平面状態にしたところ、少しは読めるようになったのですが、まだまだ実用には程遠い状態です。\u003c/p\u003e\n\n\u003cp\u003e試行錯誤が始まりました。\u003c/p\u003e\n\n\u003cp\u003e【2018/07/18追記】\u003cbr\u003e\n8mmのQRコードはソフトウェアでの対応は難しく(カメラのピントが合わせ難いやQRコードが丸まってると読み取りできない)、結局ハードウェアの小型QRコードリーダーUSB対応(例 \u003ca href=\"https://www.e-welcom.com/products/h/scanner/cubeqr/index.html\" rel=\"nofollow noopener\" target=\"_blank\"\u003ecubeQR\u003c/a\u003e)で対応することになりました。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"試行１-グレースケール化\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%A9%A6%E8%A1%8C%EF%BC%91-%E3%82%B0%E3%83%AC%E3%83%BC%E3%82%B9%E3%82%B1%E3%83%BC%E3%83%AB%E5%8C%96\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e試行１ グレースケール化\u003c/h2\u003e\n\n\u003cp\u003eカメラ画像をグレースケール化します。気休めかも知れません。\u003cbr\u003e\n【2017/12/23追記】2値化する上でグレースケール化は必須です。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"http://schima.hatenablog.com/entry/20090621/1245595172\" rel=\"nofollow noopener\" target=\"_blank\"\u003eOpenCvSharpを使う　その3 (グレースケールに変換)\u003c/a\u003e\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"c1\"\u003e// カメラ画像の読込み\u003c/span\u003e\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eMat\u003c/span\u003e \u003cspan class=\"nf\"\u003eRead\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eMat\u003c/span\u003e \u003cspan class=\"n\"\u003eresult\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003e_cap\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eIsOpened\u003c/span\u003e\u003cspan class=\"p\"\u003e())\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eMat\u003c/span\u003e \u003cspan class=\"n\"\u003eframe\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eMat\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eresult\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eMat\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n        \u003cspan class=\"c1\"\u003e// カメラ画像の読込み\u003c/span\u003e\n        \u003cspan class=\"n\"\u003e_cap\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eRead\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eframe\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e// グレースケール化\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eCv2\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eCvtColor\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eframe\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eColorConversionCodes\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eBGRA2GRAY\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"試行2-先鋭化と2値化\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%A9%A6%E8%A1%8C2-%E5%85%88%E9%8B%AD%E5%8C%96%E3%81%A82%E5%80%A4%E5%8C%96\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e試行2 先鋭化と2値化\u003c/h2\u003e\n\n\u003cp\u003e先鋭化または2値化をやってみましたが、逆に読めなくなってしまいました。これは研究中です。\u003c/p\u003e\n\n\u003cp\u003e【2017/12/23追記】\u003cbr\u003e\n見た目では読めそうなQRコードを読めるようにするのに色々検討した結果、先鋭化は駄目でしたが2値化ではしきい値を調整すること読めるようになりました。\u003cbr\u003e\n\u003ca href=\"https://bi.biopapyrus.jp/ia/opencv/threshold.html\" rel=\"nofollow noopener\" target=\"_blank\"\u003e画像の閾値処理（2 値化）\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eしきい値をどうやって決めるのかですが、256段階にグレースケール化して使用されている白色が一番多い値(周辺の明るさ)を算出します。\u003cbr\u003e\n例えば算出値が209と明るめの場合、190～200の範囲で2値化して解析して読めるかを繰り返します。すると194でerrorの値となり、195で解析可能となりました。ちなみに196では解析不可でした。\u003cbr\u003e\n同様に算出値が90と暗めの場合、70～80の範囲で2値化すると、75で解析可能となりました。\u003c/p\u003e\n\n\u003cp\u003e手動(ボタンをクリックして解析)の場合には数秒は待ってもらえるので、2値化する範囲を広げてじっくり解析できます。自動(リアルタイム)では、2値化する範囲を狭めて解析します。その基準となるしきい値はトラックバーを用意してユーザー側である程度調整させるのと、手動で読めた際のしきい値を反映させます。\u003cbr\u003e\nここらへんはどうするのか検討中です。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"試行3-マクロレンズ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%A9%A6%E8%A1%8C3-%E3%83%9E%E3%82%AF%E3%83%AD%E3%83%AC%E3%83%B3%E3%82%BA\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e試行3 マクロレンズ\u003c/h2\u003e\n\n\u003cp\u003eソフトが駄目ならハードでってことで、100均ショップにスマホ用カメラにクリップで付けるマクロレンズが売っていたので購入しました。\u003c/p\u003e\n\n\u003cp\u003e確かに付けることで少しは読めるようになるのですが、SurfaceとQRコードをかなり近づけることになるので、運用上あまりイケていない。あくまでソフト側で対応することにしました。\u003c/p\u003e\n\n\u003cp\u003e【2017/12/23追記】\u003cbr\u003e\nSurfaceは借り物だったので返してしまった。開発PCの内蔵カメラは性能が低いので、マクロレンズを使わないとボケてしまう。さすがにボケると滲んで2値化で調整しても読めないので今は必須です。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"試行4-読み取り種類の限定化\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%A9%A6%E8%A1%8C4-%E8%AA%AD%E3%81%BF%E5%8F%96%E3%82%8A%E7%A8%AE%E9%A1%9E%E3%81%AE%E9%99%90%E5%AE%9A%E5%8C%96\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e試行4 読み取り種類の限定化\u003c/h2\u003e\n\n\u003cp\u003eTryHarderオプションの有効化と読み取るバーコードの種類をBarcodeFormat.CODE_39, BarcodeFormat.QR_CODEの２種類にしました。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"http://d.sunnyone.org/2015/09/zxingnet.html\" rel=\"nofollow noopener\" target=\"_blank\"\u003eZXing(.Net)のバーコード認識率を上げる方法\u003c/a\u003e\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"c1\"\u003e// 解析処理\u003c/span\u003e\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eResult\u003c/span\u003e \u003cspan class=\"nf\"\u003eAnalyze\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eMat\u003c/span\u003e \u003cspan class=\"n\"\u003eimg\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eBarcodeReader\u003c/span\u003e \u003cspan class=\"n\"\u003ereader\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eBarcodeReader\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eAutoRotate\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eTryInverted\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e// Code-39とQRコードに限定\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eOptions\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eZXing\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eCommon\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eDecodingOptions\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eTryHarder\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"n\"\u003ePossibleFormats\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e\u003cspan class=\"p\"\u003e[]\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"n\"\u003eBarcodeFormat\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eQR_CODE\u003c/span\u003e \u003cspan class=\"p\"\u003e}.\u003c/span\u003e\u003cspan class=\"nf\"\u003eToList\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e};\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003ereader\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eDecode\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eimg\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eToBitmap\u003c/span\u003e\u003cspan class=\"p\"\u003e());\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"試行5-射影変換\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%A9%A6%E8%A1%8C5-%E5%B0%84%E5%BD%B1%E5%A4%89%E6%8F%9B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e試行5 射影変換\u003c/h2\u003e\n\n\u003cp\u003eZXingはファインダパタンなどの座標を取得後に文字列のデコードを開始します。しかし、このデコードに失敗した場合に例え座標が取れていてもResultオブジェクトは生成されません。これは非常に勿体無い。\u003cbr\u003e\nその為、QRコードの認識位置を取得するようにZXingライブラリを修正する。\u003cbr\u003e\n座標が取れてデコードが失敗する場合、QRコードの部分を抜き出して、射影変換後に再度デコードさせる。これで少しは良くなりました。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"http://enlosph.hatenablog.com/entry/2015/09/14/193143\" rel=\"nofollow noopener\" target=\"_blank\"\u003e急角度・急斜面に対応するQRデコーダ（ZXing編）\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"http://sourcechord.hatenablog.com/entry/2017/02/20/233042\" rel=\"nofollow noopener\" target=\"_blank\"\u003eOpenCvSharpで透視投影の補正\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e【2017/12/23追記】\u003cbr\u003e\n2値化で読めるようになったので射影変換は止めました。ある程度、傾いていても誤り訂正で読んでくれたので、必要性に迫られたら再度検討します。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"result情報\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#result%E6%83%85%E5%A0%B1\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eResult情報\u003c/h3\u003e\n\n\u003cul\u003e\n\u003cli\u003eResult.Text : デコード結果の文字列\u003c/li\u003e\n\u003cli\u003eResult.Points[*] : 0-2はファインダパタン（L字で順に取得する．つまり[1]が折れた箇所），3以降は位置合わせパタン\u003c/li\u003e\n\u003cli\u003eResultPoint では左下、左上、右上、右下(位置補正)の順に取得\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e【2017/12/23追記】\u003cbr\u003e\nResultPointは、左下→左上→右上の順の時と、右下→左下→右上の順の時がありました。\u003cbr\u003e\nResultPointはファインダパタンの中央点となるので、端までの差を決めてあげればQRコード部分のみの画像が取得できます。※射影変換をやめたので今は使っていません。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"c1\"\u003e// ファインダパタンの中央点から端までの差\u003c/span\u003e\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003econst\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003eIMAGE_MERGIN_SIZE\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e22\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e/// \u0026lt;summary\u0026gt;\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e/// ポイント情報からQRコード部分のサイズを取得する\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e/// \u0026lt;/summary\u0026gt;\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e/// \u0026lt;param name=\"result\"\u0026gt;ポイント情報\u0026lt;/param\u0026gt;\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e/// \u0026lt;param name=\"width\"\u0026gt;最大幅\u0026lt;/param\u0026gt;\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e/// \u0026lt;param name=\"height\"\u0026gt;最大高さ\u0026lt;/param\u0026gt;\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e/// \u0026lt;returns\u0026gt;QRコード部分のサイズ\u0026lt;/returns\u0026gt;\u003c/span\u003e\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eRect\u003c/span\u003e \u003cspan class=\"nf\"\u003eGetPoints\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eResult\u003c/span\u003e \u003cspan class=\"n\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003ewidth\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003eheight\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e// ポイント情報からQRコード部分を切り取る\u003c/span\u003e\n    \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003estX\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003estY\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003ew\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003eh\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eResultPoints\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e].\u003c/span\u003e\u003cspan class=\"n\"\u003eX\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"n\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eResultPoints\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"m\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e].\u003c/span\u003e\u003cspan class=\"n\"\u003eX\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e// 左下→左上→右上\u003c/span\u003e\n        \u003cspan class=\"n\"\u003estX\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"nf\"\u003eGetMinValue\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eResultPoints\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e].\u003c/span\u003e\u003cspan class=\"n\"\u003eX\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eResultPoints\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e].\u003c/span\u003e\u003cspan class=\"n\"\u003eX\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e-\u003c/span\u003e \u003cspan class=\"n\"\u003eIMAGE_MERGIN_SIZE\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"n\"\u003estY\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"nf\"\u003eGetMinValue\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eResultPoints\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e].\u003c/span\u003e\u003cspan class=\"n\"\u003eY\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eResultPoints\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"m\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e].\u003c/span\u003e\u003cspan class=\"n\"\u003eY\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e-\u003c/span\u003e \u003cspan class=\"n\"\u003eIMAGE_MERGIN_SIZE\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"n\"\u003ew\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"n\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eResultPoints\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"m\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e].\u003c/span\u003e\u003cspan class=\"n\"\u003eX\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"n\"\u003eIMAGE_MERGIN_SIZE\u003c/span\u003e \u003cspan class=\"p\"\u003e-\u003c/span\u003e \u003cspan class=\"n\"\u003estX\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eh\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"n\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eResultPoints\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e].\u003c/span\u003e\u003cspan class=\"n\"\u003eY\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"n\"\u003eIMAGE_MERGIN_SIZE\u003c/span\u003e \u003cspan class=\"p\"\u003e-\u003c/span\u003e \u003cspan class=\"n\"\u003estY\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eelse\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e// 右下→左下→右上\u003c/span\u003e\n        \u003cspan class=\"n\"\u003estX\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"nf\"\u003eGetMinValue\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eResultPoints\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e].\u003c/span\u003e\u003cspan class=\"n\"\u003eX\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eResultPoints\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"m\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e].\u003c/span\u003e\u003cspan class=\"n\"\u003eX\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e-\u003c/span\u003e \u003cspan class=\"n\"\u003eIMAGE_MERGIN_SIZE\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"n\"\u003estY\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e)(\u003c/span\u003e\u003cspan class=\"n\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eResultPoints\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"m\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e].\u003c/span\u003e\u003cspan class=\"n\"\u003eY\u003c/span\u003e \u003cspan class=\"p\"\u003e-\u003c/span\u003e \u003cspan class=\"n\"\u003eIMAGE_MERGIN_SIZE\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"n\"\u003ew\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"n\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eResultPoints\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e].\u003c/span\u003e\u003cspan class=\"n\"\u003eX\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"n\"\u003eIMAGE_MERGIN_SIZE\u003c/span\u003e \u003cspan class=\"p\"\u003e-\u003c/span\u003e \u003cspan class=\"n\"\u003estX\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eh\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"n\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eResultPoints\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e].\u003c/span\u003e\u003cspan class=\"n\"\u003eY\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"n\"\u003eIMAGE_MERGIN_SIZE\u003c/span\u003e \u003cspan class=\"p\"\u003e-\u003c/span\u003e \u003cspan class=\"n\"\u003estY\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"n\"\u003estX\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"nf\"\u003eGetMaxValue\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003estX\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"n\"\u003estY\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"nf\"\u003eGetMaxValue\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003estY\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"n\"\u003ew\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"nf\"\u003eGetMinValue\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ew\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ewidth\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eh\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"nf\"\u003eGetMinValue\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eh\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eheight\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eRect\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003estX\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003estY\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ew\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eh\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// 引数の小さい値を取得する\u003c/span\u003e\n\u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"kt\"\u003efloat\u003c/span\u003e \u003cspan class=\"nf\"\u003eGetMinValue\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003efloat\u003c/span\u003e \u003cspan class=\"n\"\u003emin1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003efloat\u003c/span\u003e \u003cspan class=\"n\"\u003emin2\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003emin1\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026lt;=\u003c/span\u003e \u003cspan class=\"n\"\u003emin2\u003c/span\u003e \u003cspan class=\"p\"\u003e?\u003c/span\u003e \u003cspan class=\"n\"\u003emin1\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003emin2\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// 引数の大きい値を取得する\u003c/span\u003e\n\u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"kt\"\u003efloat\u003c/span\u003e \u003cspan class=\"nf\"\u003eGetMaxValue\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003efloat\u003c/span\u003e \u003cspan class=\"n\"\u003emax1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003efloat\u003c/span\u003e \u003cspan class=\"n\"\u003emax2\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003emin1\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026gt;=\u003c/span\u003e \u003cspan class=\"n\"\u003emin2\u003c/span\u003e \u003cspan class=\"p\"\u003e?\u003c/span\u003e \u003cspan class=\"n\"\u003emax1\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003emax2\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"opnecvのpointで取得位置の順番\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#opnecv%E3%81%AEpoint%E3%81%A7%E5%8F%96%E5%BE%97%E4%BD%8D%E7%BD%AE%E3%81%AE%E9%A0%86%E7%95%AA\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eOpneCVのPointで取得位置の順番\u003c/h3\u003e\n\n\u003cp\u003e左上、左下、右下、右上の順\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"zxingnetのデバッグ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#zxingnet%E3%81%AE%E3%83%87%E3%83%90%E3%83%83%E3%82%B0\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eZXing.Netのデバッグ\u003c/h1\u003e\n\n\u003cp\u003e読めるQRコードと読めないQRコードの画像を比較しても、見た目に違いがないのに読めない。\u003cbr\u003e\nその原因を探るにはZXing.Netのライブラリをデバッグしていけば何か分かるはず。\u003c/p\u003e\n\n\u003cp\u003eソースコードをダウンロードします。\u003cbr\u003e\n\u003ca href=\"https://github.com/micjahn/ZXing.Net\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://github.com/micjahn/ZXing.Net\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e今回のアプリケーションは.NET4.6を使用しているので、プロジェクトに.Net4.6用のzxing.net4.6.csprojを追加します。\u003cbr\u003e\nこれで、Decodeメソッドでステップインしていけば、ZXing.Netに入っていけます。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"最後に\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%9C%80%E5%BE%8C%E3%81%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e最後に\u003c/h1\u003e\n\n\u003cp\u003e14日あたりから、QRコード読み取りの研究に再度取り組むことになるので1週間後にまた記事を更新できると思います。\u003c/p\u003e\n\n\u003cp\u003e【2017/12/23追記】\u003cbr\u003e\n14日以降で分かった範囲を追記しました。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"参照\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%8F%82%E7%85%A7\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e参照\u003c/h1\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"opencvsharp\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#opencvsharp\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eOpenCVSharp\u003c/h2\u003e\n\n\u003cp\u003eOpenCVSharp自体は、日本の方が開発している。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"http://schima.hatenablog.com/entry/20090616/1245081217\" rel=\"nofollow noopener\" target=\"_blank\"\u003eOpenCvSharpを使う　その1 (準備)\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://shimat.github.io/opencvsharp_docs/html/d75eb659-6335-53f6-af7a-81814a21ab7f.htm\" rel=\"nofollow noopener\" target=\"_blank\"\u003eOpenCVSharp APIリファレンス\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"http://opencv.jp/reference_manual\" rel=\"nofollow noopener\" target=\"_blank\"\u003eOpenCVリファレンス(日本語)\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"導入と使い方\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%B0%8E%E5%85%A5%E3%81%A8%E4%BD%BF%E3%81%84%E6%96%B9\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e導入と使い方\u003c/h3\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"http://schima.hatenablog.com/entry/2013/12/15/110513\" rel=\"nofollow noopener\" target=\"_blank\"\u003eOpenCvSharpをつかう　その17(NuGetで導入)\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"http://schima.hatenablog.com/entry/2015/08/17/203901\" rel=\"nofollow noopener\" target=\"_blank\"\u003eOpenCvSharpをつかう　その23 (OpenCV 3.0対応)\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"http://schima.hatenablog.com/entry/20090903/1251978952\" rel=\"nofollow noopener\" target=\"_blank\"\u003eOpenCvSharpをつかう　その6 (PictureBoxIpl)\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"http://sourcechord.hatenablog.com/entry/2016/08/11/121553\" rel=\"nofollow noopener\" target=\"_blank\"\u003eOpenCvSharp3を使ってみた\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"カメラ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%AB%E3%83%A1%E3%83%A9\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eカメラ\u003c/h3\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"C#%E3%81%A7%E7%94%BB%E5%83%8F%E5%87%A6%E7%90%86-WEB%E3%82%AB%E3%83%A1%E3%83%A9%E3%81%AE%E4%BD%BF%E7%94%A8\"\u003ehttp://robot-factory.blogspot.jp/2013/10/c-web.html\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://tocsworld.wordpress.com/2014/02/26/c%E3%81%AB%E3%82%88%E3%82%8Busb%E3%82%AB%E3%83%A1%E3%83%A9%E6%93%8D%E4%BD%9Cwpf%E7%B7%A8/\" rel=\"nofollow noopener\" target=\"_blank\"\u003eC#によるUSBカメラ操作(WPF編)\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://debuyan.wordpress.com/2016/05/22/opencvsharp3%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6web%E3%82%AB%E3%83%A1%E3%83%A9%E3%81%AE%E3%82%AD%E3%83%A3%E3%83%97%E3%83%81%E3%83%A3/\" rel=\"nofollow noopener\" target=\"_blank\"\u003eOpenCVSharp3を使ってWebカメラのキャプチャ\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://blogs.yahoo.co.jp/mikewanko2/13932243.html\" rel=\"nofollow noopener\" target=\"_blank\"\u003eがんばるC# (OpenCV)\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"mat型\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#mat%E5%9E%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eMat型\u003c/h3\u003e\n\n\u003cp\u003eOpenCVの画像はMat型変数で表現されます。Matという名前は matrix で行列の略です。その為、行列なので(行、列)の順に指定されるため、一般の画像指定の(x, y)ではない。※x, yの順番が逆なことに注意!!\u003c/p\u003e\n\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth style=\"text-align: left\"\u003e定数\u003c/th\u003e\n\u003cth style=\"text-align: left\"\u003e内容\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd style=\"text-align: left\"\u003eCV_8UC1\u003c/td\u003e\n\u003ctd style=\"text-align: left\"\u003e8ビット、符号なし、1チャンネルのデータ\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd style=\"text-align: left\"\u003eCV_8UC3\u003c/td\u003e\n\u003ctd style=\"text-align: left\"\u003e8ビット、符号なし、3チャンネルのデータ\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\n\u003cp\u003e※CV_8Uは0から255の整数\u003cbr\u003e\n※1画素はB, G, Rの順に格納されている。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"http://www.wakayama-u.ac.jp/%7Echen/opencv/opencv2.html%7C\" rel=\"nofollow noopener\" target=\"_blank\"\u003e２．画像の簡単操作\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"http://gori-naru.blogspot.jp/2012/11/mat.html\" rel=\"nofollow noopener\" target=\"_blank\"\u003e知っておきたいMatのゴリ知識\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"画像アクセス\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E7%94%BB%E5%83%8F%E3%82%A2%E3%82%AF%E3%82%BB%E3%82%B9\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e画像アクセス\u003c/h3\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"http://sourcechord.hatenablog.com/entry/2016/08/15/235654\" rel=\"nofollow noopener\" target=\"_blank\"\u003eOpenCvSharp3入門\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"http://www.84kure.com/blog/2014/07/13/c-%E3%83%93%E3%83%83%E3%83%88%E3%83%9E%E3%83%83%E3%83%97%E3%81%AB%E3%83%94%E3%82%AF%E3%82%BB%E3%83%AB%E5%8D%98%E4%BD%8D%E3%81%A7%E9%AB%98%E9%80%9F%E3%81%AB%E3%82%A2%E3%82%AF%E3%82%BB%E3%82%B9/\" rel=\"nofollow noopener\" target=\"_blank\"\u003e[C#] ビットマップにピクセル単位で高速にアクセスするには (GetPixel/SetPixel vs BitmapData 速度比較)\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"http://d.akiroom.com/2012-06/opencv-pixel-read-write-get-set/\" rel=\"nofollow noopener\" target=\"_blank\"\u003eOpenCVでピクセルにアクセスする方法4つ\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"matとbitmap相互変換\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#mat%E3%81%A8bitmap%E7%9B%B8%E4%BA%92%E5%A4%89%E6%8F%9B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eMATとBITMAP相互変換\u003c/h3\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"http://nc30mtd.oops.jp/blog/2015/01/opencvsharpiplimagebitmap.html\" rel=\"nofollow noopener\" target=\"_blank\"\u003eOpenCvSharpでのIplImageとBitmapの相互変換\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"http://micchysdiary.blogspot.jp/2011/10/bitmaptomat-mattobitmap-opencv-java-api.html\" rel=\"nofollow noopener\" target=\"_blank\"\u003eBitmapToMat \u0026amp; MatToBitmapを使う際の注意点 OpenCV Java API for Android\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"zxingゼブラクロッシング\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#zxing%E3%82%BC%E3%83%96%E3%83%A9%E3%82%AF%E3%83%AD%E3%83%83%E3%82%B7%E3%83%B3%E3%82%B0\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eZXing(ゼブラクロッシング)\u003c/h2\u003e\n\n\u003cp\u003eZXing(ゼブラクロッシング)はGoogle が開発して\u003ca href=\"https://github.com/zxing/zxing\" rel=\"nofollow noopener\" target=\"_blank\"\u003e公開\u003c/a\u003eしている、様々な一次元や二次元のバーコードの生成/操作ができるオープンソースライブラリです。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"http://dsas.blog.klab.org/archives/52107940.html\" rel=\"nofollow noopener\" target=\"_blank\"\u003e「ZXing QR コードスキャナー」の内部処理を追う\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"http://d.sunnyone.org/2015/09/zxingnet.html\" rel=\"nofollow noopener\" target=\"_blank\"\u003eZXing(.Net)のバーコード認識率を上げる方法\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"その他\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%9D%E3%81%AE%E4%BB%96\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eその他\u003c/h2\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"http://hiroyky.hatenablog.com/entry/2017/02/23/005957\" rel=\"nofollow noopener\" target=\"_blank\"\u003eHololensでQRコードリーダを作ってみた．\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"http://www.dogodemo.net/redmine/projects/dogodemo/wiki/WEB%E3%82%AB%E3%83%A1%E3%83%A9%EF%BC%86_ZBar_%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%9F_%E3%82%AD%E3%83%A3%E3%83%97%E3%83%81%E3%83%A3%E3%83%BC%EF%BC%86%E8%87%AA%E5%8B%95%E3%82%B9%E3%82%AD%E3%83%A3%E3%83%B3_%E3%82%A2%E3%83%97%E3%83%AA\" rel=\"nofollow noopener\" target=\"_blank\"\u003eWEBカメラ＆ ZBar を使った キャプチャー＆自動スキャン アプリ\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n","createdAt":"2017-12-12T18:04:33Z","elapsedYearsFromLastModifiedAt":3,"encryptedId":"sPIkkBJHQrE+68TYIL+hMn+uTE0DR1gB--5OiWfXrJTaD/s08z--aWOvHqHTz33+xY3m1UdS2w==","isBanned":false,"isDeprecated":true,"isDestroyableByViewer":false,"isEditRequestReadableByViewer":true,"isEditRequestSendableByViewer":true,"isLikableByViewer":true,"isLikedByViewer":false,"isPublic":true,"isSlide":false,"isStockableByViewer":true,"isStockedByViewer":false,"isSubscribableByViewer":false,"isSubscribedByViewer":false,"isUpdatableByViewer":false,"isUpdated":true,"lastModifiedAt":"2018-07-17T18:02:21Z","likesCount":22,"linkUrl":"https://qiita.com/yaju/items/57eddbbf3f01659f16e8","organization":null,"originalId":587434,"stockedCount":25,"title":"【.NET】OpenCVSharpとZXing.Netを使ったバーコード読み込み","toc":"\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB\"\u003eはじめに\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#qr%E3%82%B3%E3%83%BC%E3%83%89\"\u003eQRコード\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E9%96%8B%E7%99%BA%E7%92%B0%E5%A2%83\"\u003e開発環境\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%AF%E3%83%A9%E3%82%B9%E5%88%86%E3%81%91\"\u003eクラス分け\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%87%E3%83%AA%E3%82%B2%E3%83%BC%E3%83%88%E5%A7%94%E8%AD%B2\"\u003eデリゲート(委譲)\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%AB%E3%83%A1%E3%83%A9%E7%94%BB%E5%83%8F%E3%81%AE%E8%AA%AD%E5%8F%96%E3%82%8A\"\u003eカメラ画像の読取り\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%BF%E3%83%BC%E3%82%B2%E3%83%83%E3%83%88%E6%9E%A0%E9%85%8D%E7%BD%AE\"\u003eターゲット枠配置\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E8%A7%A3%E6%9E%90%E5%87%A6%E7%90%86\"\u003e解析処理\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E8%AA%AD%E3%81%BF%E5%8F%96%E3%82%8A%E7%B2%BE%E5%BA%A6%E3%82%92%E9%AB%98%E3%82%81%E3%81%9F%E3%81%84\"\u003e読み取り精度を高めたい\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E8%A9%A6%E8%A1%8C%EF%BC%91-%E3%82%B0%E3%83%AC%E3%83%BC%E3%82%B9%E3%82%B1%E3%83%BC%E3%83%AB%E5%8C%96\"\u003e試行１ グレースケール化\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E8%A9%A6%E8%A1%8C2-%E5%85%88%E9%8B%AD%E5%8C%96%E3%81%A82%E5%80%A4%E5%8C%96\"\u003e試行2 先鋭化と2値化\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E8%A9%A6%E8%A1%8C3-%E3%83%9E%E3%82%AF%E3%83%AD%E3%83%AC%E3%83%B3%E3%82%BA\"\u003e試行3 マクロレンズ\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E8%A9%A6%E8%A1%8C4-%E8%AA%AD%E3%81%BF%E5%8F%96%E3%82%8A%E7%A8%AE%E9%A1%9E%E3%81%AE%E9%99%90%E5%AE%9A%E5%8C%96\"\u003e試行4 読み取り種類の限定化\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E8%A9%A6%E8%A1%8C5-%E5%B0%84%E5%BD%B1%E5%A4%89%E6%8F%9B\"\u003e試行5 射影変換\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#result%E6%83%85%E5%A0%B1\"\u003eResult情報\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#opnecv%E3%81%AEpoint%E3%81%A7%E5%8F%96%E5%BE%97%E4%BD%8D%E7%BD%AE%E3%81%AE%E9%A0%86%E7%95%AA\"\u003eOpneCVのPointで取得位置の順番\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#zxingnet%E3%81%AE%E3%83%87%E3%83%90%E3%83%83%E3%82%B0\"\u003eZXing.Netのデバッグ\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E6%9C%80%E5%BE%8C%E3%81%AB\"\u003e最後に\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%8F%82%E7%85%A7\"\u003e参照\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#opencvsharp\"\u003eOpenCVSharp\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%B0%8E%E5%85%A5%E3%81%A8%E4%BD%BF%E3%81%84%E6%96%B9\"\u003e導入と使い方\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%AB%E3%83%A1%E3%83%A9\"\u003eカメラ\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#mat%E5%9E%8B\"\u003eMat型\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E7%94%BB%E5%83%8F%E3%82%A2%E3%82%AF%E3%82%BB%E3%82%B9\"\u003e画像アクセス\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#mat%E3%81%A8bitmap%E7%9B%B8%E4%BA%92%E5%A4%89%E6%8F%9B\"\u003eMATとBITMAP相互変換\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#zxing%E3%82%BC%E3%83%96%E3%83%A9%E3%82%AF%E3%83%AD%E3%83%83%E3%82%B7%E3%83%B3%E3%82%B0\"\u003eZXing(ゼブラクロッシング)\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%81%9D%E3%81%AE%E4%BB%96\"\u003eその他\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n","totalPv":25543,"uuid":"57eddbbf3f01659f16e8","banReason":null,"adventCalendarItem":{"day":13,"calendar":{"name":"OpenCV","urlName":"opencv","year":2017,"organization":null}},"author":{"encryptedId":"Qid9D6i+Ow7lAZSK9pPEKT246XM=--ukyIBXkAN1hJlvpy--I0o+Lur4eKS6XbfhkDnUFg==","originalId":14053,"description":"静岡県島田市在住ののシニアSE（元Microsoft MVP 2010-2012）がコンピューター、機械学習、Unity、数学について考える。","facebookUrl":"https://facebook.com/yasuhito.hiraguchi","githubUrl":null,"isBlockingViewer":false,"isFollowableByViewer":true,"isFollowedByViewer":false,"isTweetWebNotificationReceivable":true,"linkedinUrl":null,"name":"やじゅ","profileImageUrl":"https://qiita-image-store.s3.amazonaws.com/0/14053/profile-images/1473683162","profileImageUrlW48":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F14053%2Fprofile-images%2F1473683162?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=48\u0026s=e8f332c4ab4195584754b9e28b9d6458","profileImageUrlW75":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F14053%2Fprofile-images%2F1473683162?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=136b8707be81c2c47a1fbee1976f4e70","urlName":"yaju","websiteUrl":"http://yaju3d.hatenablog.jp/","twitterUrl":"https://twitter.com/yaju","twitterUrlName":"yaju","revealedOrganizations":{"edges":[]}},"tags":[{"name":"C#","urlName":"csharp"},{"name":"OpenCV","urlName":"opencv"},{"name":"QRcode","urlName":"qrcode"},{"name":"ZXing","urlName":"zxing"},{"name":"OpenCvSharp","urlName":"opencvsharp"}],"followingLikers":{"edges":[]},"comments":{"totalCount":0}},"comments":[],"client":null,"ads_event_emitter":null}}</script>
