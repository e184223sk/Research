More than 1 year has passed since last update.前回ソースコードのフローチャートを作成するところまで書きました。
今回トレースするところまで実装します。
頻繁に使うことは無いと思われるので全自動化するのは最初から断念しています。
以下のような手順でトレースを行います。
以下のソースコードで試してみます。前回も書きましたが、これをトレースするにはトレース用のコードを埋め込みます。赤が通過個所、括弧内は回数を示します。
初期フローは非同期処理に対応していないので、トレースすることにより想定外のエッジ（「Unintended」と表記）が追加されることがあります。
このサンプルの場合、Task.Run()のラムダ式が実行される前にt.Wait()が実行されているみたいです。このような動きになるとは知りませんでした。
前回掲載したコード（FlowGraph.cs）にMain処理を統合し、トレース用ソースコードの変換処理を追加しています。
変更が無い部分（CreateGraphNode以降）は省略しています。
またSyntaxVisitorも同様に省略しています。（一部修正しています）Dotファイル出力部などFlowGraphとの重複が多いですが前回のコードの見直しは最小限としました。


