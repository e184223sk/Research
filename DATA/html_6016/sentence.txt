More than 3 years have passed since last update.WPFではWindows.Formと違い、DPIが変更されたことやウィンドウの移動、リサイズなどを知る方法がない。つまり自分でウィンドウプロシージャを書かないといけない。しかもウィンドウプロシージャに全部書きだすとそれどこのC言語？となるのでもちろんC#使いが所持する基本的人権の一つeventを使いたい。つまりevent実装コードも書く必要がある。ここでMVVMパターンにおけるViewにあたるWindowクラスを継承するpartialクラスにそんな処理をごちゃごちゃ書きたくない、でもWindowクラスの幾つかのイベントをホックしないといけない・・・これは別クラスに押し込めてViewはそのクラスを継承するべきでは、と思った。省略するとまずSystem.Windows名前空間にWindowクラスが多分こんな感じである。そしてウィンドウプロシージャやらイベントやらを実装したクラスを作ったさてこれを継承させよう。MainWindowクラスの中でSystem.Windows.Window内にあるものが一切使えない。なんでや？XAML側でもこのMainWindowクラスを自動生成している。だからこそpartialキーワードがMainWindowクラスに指定されているわけですね。で、XAML側の基底クラス指定とC#側の基底クラス指定が一致しないので何もできない状態になっていたんですね。xaml側の基底クラス指定を変えましょう。これをこうじゃ。ルートのtagがWindowになっていてこれこそがx:Class="prime_num_searcher_gui.MainWindow"で指定しているprime_num_searcher_gui.MainWindowクラスの基底クラスがWindowだと指定していたので、xmlns:local="clr-namespace:prime_num_searcher_gui"を指定した上でこれをlocal:MoreEventWindowに置き換えたんですね。原因をググってるときになんかxamlもいじらないととかいうサイトばかり見つけてんなわけね～だろ、こいつらみんな狂ってやがる・・・、とか本気で思ってましたが、メロンパンと黒糖蒸しパンと梨を食べて冷静になったあとでpartial指定されている意味を考えたらすんなり納得できました。WPFでFormの継承(Windowの継承 or 見た目の継承？） - かずきのBlog@hatenaに感謝を。yumetodoさんが凄いC#コードを書いていたので2度見しています。なんとコメントしたら良いものか……#要するに私の腕が足りてないhttps://t.co/msHH0ANBeEWinAPIと格闘している辺りが……どっちといった話ではなく、C#でそんなにWinAPI直叩きしないイメージがあるもので……ところでなんで私はXAML書きながらウィンドウプロシージャ書いてるんだ・・・？yumetodoさんの出題(？)である「DPIが動的に変化しても自ウィンドウのスクショを撮る方法」についていろいろ考えていますが、簡単ではありませんね……次のコードは「DPIが100％表示なら」正常に動くのですが pic.twitter.com/8y7Dgko0iUyumetodo/prime_num_searcher at feat/save_graph_image問題が起きていたのは b2679f4で、解決したのが231cb13です。


