<!DOCTYPE html><html><head><meta charset="utf-8" /><title>NLog を使って Xamarin.Forms からログ出力する方法 - Qiita</title><meta content="width=device-width,initial-scale=1,shrink-to-fit=no,viewport-fit=cover" name="viewport" /><meta content="#55c500" name="theme-color" /><meta content="XWpkTG32-_C4joZoJ_UsmDUi-zaH-hcrjF6ZC_FoFbk" name="google-site-verification" /><meta content="telephone=no" name="format-detection" /><link rel="canonical" href="https://qiita.com/tafuji/items/1a40866ea469d92c2d24" /><link href="/manifest.json" rel="manifest" /><link href="/opensearch.xml" rel="search" title="Qiita" type="application/opensearchdescription+xml" /><link as="script" href="https://www.googletagservices.com/tag/js/gpt.js" rel="preload" /><link href="https://securepubads.g.doubleclick.net" rel="preconnect" /><script async="" src="https://www.googletagservices.com/tag/js/gpt.js"></script><meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="iz9uNqae6W/higIYMRTmGzbUFKBx704+0bkeWnYyuGLJ9XyzPc6KAl172a1ugPJwfZLlu8HthVFDVxrXqm+gfw==" /><link rel="shortcut icon" type="image/x-icon" href="https://cdn.qiita.com/assets/favicons/public/production-c620d3e403342b1022967ba5e3db1aaa.ico" /><link rel="apple-touch-icon" type="image/png" href="https://cdn.qiita.com/assets/favicons/public/apple-touch-icon-ec5ba42a24ae923f16825592efdc356f.png" /><link rel="stylesheet" media="all" href="https://cdn.qiita.com/assets/public/article-2eaa7dbedc42a8ea65c722cda46d0ebb.min.css" /><script src="https://cdn.qiita.com/assets/public/v3-article-bundle-63de2d91fef827269d3f6b958db2335b.min.js" defer="defer"></script><meta name="twitter:card" content="summary_large_image"><meta content="@Qiita" name="twitter:site" /><meta content="@tafuji1223" name="twitter:creator" /><meta property="og:type" content="article"><meta property="og:title" content="NLog を使って Xamarin.Forms からログ出力する方法 - Qiita"><meta property="og:image" content="https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0&amp;w=1200&amp;mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND1Ua3h2WnlEamdwTGt2Yl9qZ2FQamdhWWdXR0Z0WVhKcGJpNUdiM0p0Y3lEamdZdmpnb25qZzYzamdyRGxoN3JsaXB2amdabmpnb3ZtbHJubXM1VSZ0eHQtY29sb3I9JTIzMzMzJnR4dC1mb250PUhpcmFnaW5vJTIwU2FucyUyMFc2JnR4dC1zaXplPTU0JnR4dC1jbGlwPWVsbGlwc2lzJnR4dC1hbGlnbj1jZW50ZXIlMkNtaWRkbGUmcz02M2RkNDE3ZTA4MjVlZmUyZWFiNDE5MjU4ODgyOWJjMQ&amp;mark-align=center%2Cmiddle&amp;blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RSFJoWm5WcWFRJnR4dC1jb2xvcj0lMjMzMzMmdHh0LWZvbnQ9SGlyYWdpbm8lMjBTYW5zJTIwVzYmdHh0LXNpemU9NDUmdHh0LWFsaWduPXJpZ2h0JTJDYm90dG9tJnM9NTdjMGRkY2EwYTQ5YjI3ZDVlNzdiNmYxZTk2YmY1Zjk&amp;blend-align=center%2Cmiddle&amp;blend-mode=normal&amp;s=7b3642fe082257320b61eb6e4a7b1c3c"><meta property="og:description" content="この記事は、Xamarin Advent Calendar 2016(その2) の23日目の記事です。




0. はじめに

Xamarin に限らずアプリのデバッグを効率的に行うためにはログ出力ライブラリの利用は必須だと思います..."><meta content="https://qiita.com/tafuji/items/1a40866ea469d92c2d24" property="og:url" /><meta content="Qiita" property="og:site_name" /><meta content="564524038" property="fb:admins" /><meta content="C#,Xamarin,Xamarin.Forms" name="keywords" /><script>!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window, document,'script',
'https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '668972150489891');
fbq('track', 'PageView');</script><style data-emotion-css="17jxvjw 11t2ec1 1dvr2p8 18lkoru 1g4cku8 1iupg5d ijvq0v 15cocm3 12rp90f 115f4t 1b8uj5v 79elbk 16hhh7b fcbn8c 1gj7nt 154zy0m yikrym 1jqivyb 1ode1bp le4d8r 1hbd3g7 1nzh4zz 38fzdi helsa7 8qb8m4 2imjyh he5w1s 70qvj9 3ojehk 100alwu 1dtnjt5 10ougpm 1ay9vb9 m19uds cgzq40 1wa99t2 1l3zk9f 4czcte 1yzj1fm 1uv1qiv 109dbrr 5jpx49 mnxgyc 1vlpknv fsjkhv 1b17vb0 7i7f4d"}>.css-17jxvjw{display:grid;display:-ms-grid;grid-template-columns:80px minmax(0,1fr) 300px;-ms-grid-columns:80px minmax(0,1fr) 300px;grid-template-rows:minmax(270px,auto) 1fr;-ms-grid-rows:minmax(270px,auto) 1fr;max-width:1280px;margin-right:auto;margin-left:auto;padding-top:24px;padding-right:24px;padding-left:24px;}@media (max-width:1200px){.css-17jxvjw{padding-bottom:0;padding-left:0;padding-right:0;}}@media (max-width:992px){.css-17jxvjw{grid-template-columns:80px 452px 300px;-ms-grid-columns:80px 452px 300px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}}@media (max-width:770px){.css-17jxvjw{display:block;}}@media (max-width:480px){.css-17jxvjw{padding-top:0;}}.css-11t2ec1{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;z-index:5;position:-webkit-sticky;position:sticky;top:calc(56px + 24px + 16px + 32px - 16px);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:16px;width:80px;}.css-11t2ec1:after{content:'';display:table;}.css-11t2ec1:before{content:'';display:table;}@media (max-width:770px){.css-11t2ec1{display:none;}}.css-1dvr2p8{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-18lkoru{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;background-color:#FFFFFF;}.css-1g4cku8{display:inline-block;vertical-align:middle;height:20px;width:20px;fill:#55C500;}.css-1iupg5d{color:#55C500;cursor:pointer;font-size:14px;font-weight:bold;}.css-ijvq0v{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-15cocm3{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#FFFFFF;border:2px solid #6E6F70;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:2px 0px 0px;width:40px;}.css-12rp90f{display:inline-block;vertical-align:bottom;height:17.77777777777778px;width:16px;fill:#6E6F70;}.css-115f4t{color:#6E6F70;font-size:14px;font-weight:bold;}.css-1b8uj5v{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;margin-bottom:16px;padding:0;}.css-79elbk{position:relative;}.css-16hhh7b{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;padding:0;}.css-fcbn8c{display:none;bottom:initial;left:initial;right:initial;top:initial;left:100%;top:calc(-8px - (14px * 1.8) - 16px - 4px);}.css-1gj7nt{color:rgba(0,0,0,0.6);font-size:14px;font-weight:bold;line-height:1.8;padding:8px 16px;}.css-154zy0m{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.87);cursor:pointer;font-size:16px;font-weight:normal;line-height:1.8;padding:4px 16px;}.css-154zy0m:hover{-webkit-text-decoration:none;text-decoration:none;background-color:#F2F2F2;}.css-yikrym{width:20px;}.css-1jqivyb{color:rgba(0,0,0,0.6);font-size:13px;}.css-1ode1bp{background-color:rgba(0,0,0,0.12);height:1px;width:100%;margin:8px 0;}.css-le4d8r{display:inline-block;vertical-align:middle;height:13px;width:13px;fill:rgba(0,0,0,0.6);}.css-1hbd3g7{height:250px;}.css-1nzh4zz{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:16px 32px;background-color:#FBE69E;color:rgba(0,0,0,0.87);line-height:1.5;font-weight:600;}@media (max-width:770px){.css-1nzh4zz{padding:16px;}}.css-38fzdi{color:#CA832A;margin-right:4px;}.css-helsa7{background-color:#FFFFFF;padding:32px;margin-bottom:24px;}@media (max-width:992px){.css-helsa7{margin:0 auto 40px;}}@media (max-width:480px){.css-helsa7{margin:0 0 40px;padding:32px 16px;}}.css-8qb8m4{margin-bottom:48px;}.css-2imjyh{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-he5w1s{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;width:100%;}@media (max-width:770px){.css-he5w1s{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}}.css-70qvj9{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.css-3ojehk{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;margin-right:4px;}.css-100alwu{display:inline-block;border-radius:50%;line-height:1;overflow:hidden;vertical-align:middle;}.css-1dtnjt5{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-10ougpm{color:rgba(0,0,0,0.87);font-size:14px;font-weight:600;line-height:1.8;margin-right:4px;text-wrap:break-word;word-break:break-all;}.css-1ay9vb9{margin-right:16px;}.css-m19uds{color:rgba(0,0,0,0.6);font-size:14px;line-height:1.8;}.css-cgzq40{color:rgba(0,0,0,0.87);font-size:32px;font-weight:bold;line-height:1.4;margin-top:8px;text-wrap:break-word;word-break:break-all;}.css-1wa99t2{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.6);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:8px;}.css-1l3zk9f{color:rgba(0,0,0,0.6);font-size:20px;margin-right:8px;}.css-4czcte{margin-right:4px;color:inherit;font-size:14px;line-height:1.8;}.css-4czcte:not(:last-child)::after{content:',';margin-right:4px;}.css-1yzj1fm{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:32px;}.css-1uv1qiv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-size:20px;height:32px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin-right:16px;outline:none;padding:0;width:32px;}.css-109dbrr{background-color:#F9F9F9;border-top:1px solid rgba(0,0,0,0.12);bottom:0;box-shadow:0px 1px 4px rgba(0,0,0,0.14);display:none;height:calc(env(safe-area-inset-bottom,0px) + 56px);-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding-bottom:env(safe-area-inset-bottom);position:-webkit-sticky;position:sticky;width:100%;z-index:2000;}@media (max-width:770px){.css-109dbrr{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}.css-5jpx49{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:space-evenly;-webkit-justify-content:space-evenly;-ms-flex-pack:space-evenly;justify-content:space-evenly;width:100%;}.css-mnxgyc{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1vlpknv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;margin-right:4px;background-color:#FFFFFF;}.css-fsjkhv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1b17vb0{color:#6E6F70;font-size:14px;font-weight:bold;margin-left:4px;}.css-7i7f4d{display:none;bottom:initial;left:initial;right:initial;top:initial;bottom:32px;right:0;}</style></head><body><div class="allWrapper"><div><div id="GlobalHeader-react-component-b515ba17-b0b6-43a9-9f34-730fbd19ade9"><div class="st-Header"><div class="st-Header_container"><div class="st-Header_start"><a href="/" class="st-Header_logo"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 426.57 130"><circle cx="167.08" cy="21.4" r="12.28"></circle><path d="M250.81 29.66h23.48v18.9h-23.48z"></path><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z"></path><circle cx="216.33" cy="21.4" r="12.28"></circle></svg></a><div class="st-Header_communitySelector" tabindex="0"><span class="fa fa-caret-down"></span></div><div class="st-Header_dropdown"><div class="st-Header_dropdownHeading">Qiita Teams that are logged in</div><div class="st-Header_dropdownItemNote">You are not logged in to any team</div><hr class="st-Header_dropdownDivider st-Header_dropdownDivider-shrink"/><a href="https://teams-center.qiita.com/find_team" class="st-Header_dropdownItem"><span class="fa fa-fw fa-sign-in st-Header_dropdownItemIcon"></span><div>Log in to Qiita Team</div></a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Community</div><a href="/organizations" class="st-Header_dropdownItem">Organization</a><a href="/official-events/open" class="st-Header_dropdownItem">Event</a><a href="/advent-calendar" class="st-Header_dropdownItem">Advent Calendar</a><a href="https://qiitadon.com/" class="st-Header_dropdownItem" target="_blank">Qiitadon (β)</a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Service</div><a href="https://jobs.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Jobs</a><a href="https://zine.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Zine</a><a href="https://blog.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Blog</a></div><form class="st-Header_search" action="/search" method="get"><span class="fa fa-search st-Header_searchIcon"></span><input type="search" class="st-Header_searchInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form><form class="st-Header_searchModal" action="/search" method="get"><input type="text" class="st-Header_searchModalInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form></div><div class="st-Header_end"><div class="st-Header_searchButton"><span class="fa fa-search"></span></div><a class="st-Header_signupButton" href="/signup?redirect_to=%2Ftafuji%2Fitems%2F1a40866ea469d92c2d24">Signup</a><a class="st-Header_loginLink" href="/login?redirect_to=%2Ftafuji%2Fitems%2F1a40866ea469d92c2d24">Login</a></div><div class="st-Header_overlay"></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="GlobalHeader" data-dom-id="GlobalHeader-react-component-b515ba17-b0b6-43a9-9f34-730fbd19ade9">{"unreadNotificationsCount":null,"realms":[{"humanName":"Qiita","isCurrentRealm":true,"isQiita":true,"isQiitaTeam":false,"loggedInUser":null,"teamId":null,"url":"https://qiita.com/"}],"teamFindUrl":"https://teams-center.qiita.com/find_team","isTeamOnlyUser":null,"currentUser":null}</script>
      
</div><div class="st-HeaderAlert st-HeaderAlert-warning"><div class="st-HeaderAlert_body"></div></div><script type="application/ld+json">{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"/","name":"Qiita"}},{"@type":"ListItem","position":2,"item":{"@id":"/tags/csharp","name":"C#"}}]}</script><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","datePublished":"2016-12-23T00:00:34.000+09:00","dateModified":"2018-09-13T10:14:15.000+09:00","headline":"NLog を使って Xamarin.Forms からログ出力する方法","image":"https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0\u0026w=1200\u0026mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND1Ua3h2WnlEamdwTGt2Yl9qZ2FQamdhWWdXR0Z0WVhKcGJpNUdiM0p0Y3lEamdZdmpnb25qZzYzamdyRGxoN3JsaXB2amdabmpnb3ZtbHJubXM1VSZ0eHQtY29sb3I9JTIzMzMzJnR4dC1mb250PUhpcmFnaW5vJTIwU2FucyUyMFc2JnR4dC1zaXplPTU0JnR4dC1jbGlwPWVsbGlwc2lzJnR4dC1hbGlnbj1jZW50ZXIlMkNtaWRkbGUmcz02M2RkNDE3ZTA4MjVlZmUyZWFiNDE5MjU4ODgyOWJjMQ\u0026mark-align=center%2Cmiddle\u0026blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RSFJoWm5WcWFRJnR4dC1jb2xvcj0lMjMzMzMmdHh0LWZvbnQ9SGlyYWdpbm8lMjBTYW5zJTIwVzYmdHh0LXNpemU9NDUmdHh0LWFsaWduPXJpZ2h0JTJDYm90dG9tJnM9NTdjMGRkY2EwYTQ5YjI3ZDVlNzdiNmYxZTk2YmY1Zjk\u0026blend-align=center%2Cmiddle\u0026blend-mode=normal\u0026s=7b3642fe082257320b61eb6e4a7b1c3c","mainEntityOfPage":"https://qiita.com/tafuji/items/1a40866ea469d92c2d24","author":{"@type":"Person","address":"Fukuoka, Japan","email":null,"identifier":"tafuji","name":"tafuji","image":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F145932%2Fprofile-images%2F1482106610?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=a949bbe8f5991f67eeedf5457921c265","url":"https://qiita.com/tafuji","description":"ネコ好きのエンジニア。\r\nここに投稿される内容は、あくまで個人の見解であり、所属する組織・団体の公式見解ではありません。","memberOf":[]},"publisher":{"@type":"Organization","name":"Qiita","logo":{"@type":"ImageObject","url":"//cdn.qiita.com/assets/public/qiita-logo-c39ded593afa388e2e1ba435b110554e.png"}}}</script><style type="text/css">.wb-CampaignLink {
  background-color: #333333;
  width: 100%;
}

.wb-CampaignLink_container {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  max-width: 1100px;
  margin: 0 auto;
  font-size: 13px;
  padding: 0.8em;
}
.wb-CampaignLink_container > a {
  color: #fff;
}

.wb-CampaignLink_container > a:hover {
  text-decoration: underline;
}</style><div class="wb-CampaignLink"><div class="wb-CampaignLink_container"><a target="_blank" id="header_text_message_1" href="https://zine.qiita.com/interview/202104-ga-technologies/?utm_source=qiita&amp;utm_medium=header-banner">「不動産取引をワンクリックで完結する」世界観へ。GA technologiesの取り組み</a><a target="_blank" id="header_text_message_2" href="https://zine.qiita.com/interview/202104-ga-technologies/?utm_source=qiita&amp;utm_medium=header-banner">詳しくはこちら</a></div><script>td.trackEvent(
  'front_events',
  {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"tafuji","type":"items","id":"1a40866ea469d92c2d24"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Show","data":{"message":"「不動産取引をワンクリックで完結する」世界観へ。GA technologiesの取り組み","url":"https://zine.qiita.com/interview/202104-ga-technologies/?utm_source=qiita\u0026utm_medium=header-banner","sub_message":"詳しくはこちら"}}
)</script><script>document.getElementById('header_text_message_1').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"tafuji","type":"items","id":"1a40866ea469d92c2d24"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":0,"pos_id":"header_text_message_1","message":"「不動産取引をワンクリックで完結する」世界観へ。GA technologiesの取り組み","url":"https://zine.qiita.com/interview/202104-ga-technologies/?utm_source=qiita\u0026utm_medium=header-banner","sub_message":"詳しくはこちら"}}
  )
})</script><script>document.getElementById('header_text_message_2').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"tafuji","type":"items","id":"1a40866ea469d92c2d24"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":0,"pos_id":"header_text_message_2","message":"「不動産取引をワンクリックで完結する」世界観へ。GA technologiesの取り組み","url":"https://zine.qiita.com/interview/202104-ga-technologies/?utm_source=qiita\u0026utm_medium=header-banner","sub_message":"詳しくはこちら"}}
  )
})</script></div><script type="application/json" id="js-react-on-rails-context">{"railsEnv":"production","inMailer":false,"i18nLocale":"en","i18nDefaultLocale":"en","href":"https://qiita.com/tafuji/items/1a40866ea469d92c2d24","location":"/tafuji/items/1a40866ea469d92c2d24","scheme":"https","host":"qiita.com","port":null,"pathname":"/tafuji/items/1a40866ea469d92c2d24","search":null,"httpAcceptLanguage":null,"actionPath":"public/items#show","settings":{"analyticsTrackingId":"UA-24675221-12","assetsMap":{},"csrfToken":"USjLG0pc77pHGDPbFMpJq6T2OCL0qTdYW102aDoKHPUT4tme0QyM1/vp6G5LXl3A77DJOUSr/DfJszLl5lcE6A==","locale":"en"},"currentUser":null,"isLoggedIn":false,"recaptchaSiteKey":"6LfNkiQTAAAAAM3UGnSquBy2akTITGNMO_QDxMw6","serverSide":false}</script>
<div id="PersonalArticlePage-react-component-a8fb70df-3892-4479-9d78-02947e06ca3f"><div class="p-items_wrapper"><div class=" css-17jxvjw"><div class="css-11t2ec1"><div class="css-1dvr2p8"><button class=" css-18lkoru"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/tafuji/items/1a40866ea469d92c2d24/likers" class="css-1iupg5d">18</a></div><div class="css-ijvq0v"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-115f4t">13</span></div><div class="css-1b8uj5v"><span class="fa fa-twitter"></span></div><div class="css-1b8uj5v"><span class="fa fa-facebook"></span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-fcbn8c"><div class="css-1gj7nt">Improve article</div><a href="/drafts/1a40866ea469d92c2d24/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/tafuji/items/1a40866ea469d92c2d24/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/tafuji/items/1a40866ea469d92c2d24/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/tafuji/items/1a40866ea469d92c2d24/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/tafuji/items/1a40866ea469d92c2d24.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div><div class="p-items_options"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_toc"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_main"><div class="css-1nzh4zz"><span class="fa fa-fw fa-warning css-38fzdi"></span><p>More than 1 year has passed since last update.</p></div><div class="css-helsa7"><div class="css-8qb8m4"><div class="it-AdcalRibbon"><span><a href="/advent-calendar/2016/xamarin2" class="it-AdcalRibbon_title">Xamarin(その2)<!-- --> Advent Calendar<!-- --> <!-- -->2016</a>Day 23</span></div><div class="css-2imjyh"><div class="css-he5w1s"><div class="css-70qvj9"><div class="css-3ojehk"><a href="/tafuji"><img class="css-100alwu eyfquo10" src="https://qiita-image-store.s3.amazonaws.com/0/145932/profile-images/1482106610" width="24" height="24" loading="lazy"/></a></div><div class="css-1dtnjt5"><a href="/tafuji" class="css-10ougpm">@<!-- -->tafuji</a><div class="css-1ay9vb9"><span><meta content="2016-12-22T15:00:34Z"/><time dateTime="2018-09-13T01:14:15Z" class="css-m19uds">updated at 2018-09-13</time></span></div></div></div></div></div><h1 class="css-cgzq40">NLog を使って Xamarin.Forms からログ出力する方法</h1><div class="css-1wa99t2"><span class="fa fa-tags mr-1of2 css-1l3zk9f" aria-hidden="true"></span><a href="/tags/csharp" class="css-4czcte">C#</a><a href="/tags/xamarin" class="css-4czcte">Xamarin</a><a href="/tags/xamarin.forms" class="css-4czcte">Xamarin.Forms</a></div></div><section class="it-MdContent"><div id="personal-public-article-body"><div><p>この記事は、<a href="http://qiita.com/advent-calendar/2016/xamarin2">Xamarin Advent Calendar 2016(その2)</a> の23日目の記事です。</p>

<hr>

<h1>
<span id="0-はじめに" class="fragment"></span><a href="#0-%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB"><i class="fa fa-link"></i></a>0. はじめに</h1>

<p>Xamarin に限らずアプリのデバッグを効率的に行うためにはログ出力ライブラリの利用は必須だと思います。<br>
<a href="https://msdn.microsoft.com/ja-jp/library/system.diagnostics.debug(v=vs.110).aspx" rel="nofollow noopener" target="_blank">System.Diagnostics.Debug</a> クラスも便利ですが、複雑なアプリケーションのデバッグになると、厳しい場合があります。<br>
本記事では、<a href="http://nlog-project.org/" rel="nofollow noopener" target="_blank">NLog</a> を使って Xamarin.Forms のアプリケーションからログを出力する方法について記載します。</p>

<p>NLog は以下のような機能をもつ非常に便利なライブラリです。</p>

<ul>
<li>構成ファイルで出力レベルの切り替えを行うことができる</li>
<li>ログ出力の日付時刻、プロセス ID などのログ解析時に必要な典型的な項目を自動的に出力することができる</li>
<li>ログファイルのフォーマットに CSV, JSON 形式など指定することができる</li>
<li>ログファイルのローリングができる</li>
</ul>

<p>NLog は、Xamarin.Android, Xamarin.iOS をサポートしていますが、Xamarin.Forms はサポートしていません。<br>
しかしながら、<a href="https://developer.xamarin.com/guides/xamarin-forms/dependency-service/introduction/" rel="nofollow noopener" target="_blank">DependencyService</a> や <a href="https://unity.codeplex.com/" rel="nofollow noopener" target="_blank">Unity</a> (DI コンテナ）等の機能を利用することで、Xamarin.Forms でも NLog の便利な機能を利用することが可能になります。</p>

<h1>
<span id="1-ログ出力までの手順" class="fragment"></span><a href="#1-%E3%83%AD%E3%82%B0%E5%87%BA%E5%8A%9B%E3%81%BE%E3%81%A7%E3%81%AE%E6%89%8B%E9%A0%86"><i class="fa fa-link"></i></a>1. ログ出力までの手順</h1>

<h2>
<span id="11-プロジェクトの作成" class="fragment"></span><a href="#11-%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E4%BD%9C%E6%88%90"><i class="fa fa-link"></i></a>1.1 プロジェクトの作成</h2>

<p>サンプルコードを GitHub に置いています。</p>

<ul>
<li><a href="https://github.com/tafuji/Xamarin-Forms-NLog-Sample" rel="nofollow noopener" target="_blank">Xamarin-Forms-NLog-Sample</a></li>
</ul>

<p>サンプルは Main.xaml にボタンを二つ配置して、ボタンを押すとファイルにログ出力する簡単なサンプルです。</p>

<p><a href="https://camo.qiitausercontent.com/df74f4c6ee5155524f733b90b5c09c79cb0a7824/68747470733a2f2f676973742e67697468756275736572636f6e74656e742e636f6d2f746166756a692f65363335323235656261353864663139326266633566323066663333333966662f7261772f363363396139626663626431303835376330326261663533336163396238393166333565333363352f4d61696e2e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fgist.githubusercontent.com%2Ftafuji%2Fe635225eba58df192bfc5f20ff3339ff%2Fraw%2F63c9a9bfcbd10857c02baf533ac9b891f35e33c5%2FMain.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=9e1f62be0fe7d0ba260aded5202fc6ae" alt="Main" data-canonical-src="https://gist.githubusercontent.com/tafuji/e635225eba58df192bfc5f20ff3339ff/raw/63c9a9bfcbd10857c02baf533ac9b891f35e33c5/Main.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fgist.githubusercontent.com%2Ftafuji%2Fe635225eba58df192bfc5f20ff3339ff%2Fraw%2F63c9a9bfcbd10857c02baf533ac9b891f35e33c5%2FMain.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=9811684372663994fdce468d730a9e31 1x" loading="lazy"></a></p>

<p>ソリューションの初期構造は以下の流れで作っています。</p>

<ol>
<li>Visual Stuido 2015 で[Blank App (Xamarin.Forms Portable)]テンプレートを選択し、ソリューション名を「NLogSample」指定してプロジェクトを作成</li>
<li>NLogSample.UWP、NLogSample.Windows、NLogSample.WinPhone プロジェクトは削除</li>
<li>ログ出力処理を実装する共有プロジェクト(NLogSample.Shared) を追加</li>
<li>NLogSample プロジェクトに Main.xaml を追加</li>
</ol>

<p><a href="https://camo.qiitausercontent.com/95ba2ee56bebd28f50b4871867be11f4681c917f/68747470733a2f2f676973742e67697468756275736572636f6e74656e742e636f6d2f746166756a692f65363335323235656261353864663139326266633566323066663333333966662f7261772f396266623366383836396231666535653234386430393138393763333064303030323337353665302f496e697469616c2d536f6c7574696f6e2e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fgist.githubusercontent.com%2Ftafuji%2Fe635225eba58df192bfc5f20ff3339ff%2Fraw%2F9bfb3f8869b1fe5e248d091897c30d00023756e0%2FInitial-Solution.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=de738afae10164287da1fd67e9ea27d8" alt="Initial Solution" data-canonical-src="https://gist.githubusercontent.com/tafuji/e635225eba58df192bfc5f20ff3339ff/raw/9bfb3f8869b1fe5e248d091897c30d00023756e0/Initial-Solution.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fgist.githubusercontent.com%2Ftafuji%2Fe635225eba58df192bfc5f20ff3339ff%2Fraw%2F9bfb3f8869b1fe5e248d091897c30d00023756e0%2FInitial-Solution.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=4acbb5d667ac7809c94cd94f052b0246 1x" loading="lazy"></a></p>

<h2>
<span id="12-nuget-パッケージのインストール" class="fragment"></span><a href="#12-nuget-%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB"><i class="fa fa-link"></i></a>1.2 NuGet パッケージのインストール</h2>

<p>NuGet で以下のパッケージをネイティブのプロジェクト（NLogSample.Droid, NLogSample.iOS）にインストールします。</p>

<ul>
<li>NLog

<ul>
<li>ライブラリ本体です</li>
</ul>
</li>
<li>NLog.Config

<ul>
<li>構成ファイルのテンプレートです</li>
</ul>
</li>
</ul>

<p>NLog.Config をインストールすると、以下の二つのファイルがプロジェクトに作成されますが、Android ネイティブのプロジェクトに配置されたファイルは移動が必要です。</p>

<ul>
<li>NLog.config</li>
<li>NLog.xsd</li>
</ul>

<table>
<thead>
<tr>
<th style="text-align: left">Platform</th>
<th style="text-align: left">NLog.config ファイルの配置場所</th>
<th style="text-align: left">注意事項</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left">Android</td>
<td style="text-align: left">Asset フォルダ直下に配置します</td>
<td style="text-align: left">ビルドアクションを AndroidAsset に設定してください</td>
</tr>
<tr>
<td style="text-align: left">iOS</td>
<td style="text-align: left">プロジェクト直下</td>
<td style="text-align: left">特にありません</td>
</tr>
</tbody>
</table>

<p><a href="https://camo.qiitausercontent.com/b6cdb3cea879b67406008afcc5bc5bf7d274f921/68747470733a2f2f676973742e67697468756275736572636f6e74656e742e636f6d2f746166756a692f65363335323235656261353864663139326266633566323066663333333966662f7261772f616433623330306564653531393634313333353532373137363038313435373337323430666536342f4e4c6f67436f6e66696746696c654275696c64416374696f6e53657474696e672e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fgist.githubusercontent.com%2Ftafuji%2Fe635225eba58df192bfc5f20ff3339ff%2Fraw%2Fad3b300ede51964133552717608145737240fe64%2FNLogConfigFileBuildActionSetting.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=c0e54f42770b076e8ebc6aacaced47c4" alt="AndroidAsset に設定" data-canonical-src="https://gist.githubusercontent.com/tafuji/e635225eba58df192bfc5f20ff3339ff/raw/ad3b300ede51964133552717608145737240fe64/NLogConfigFileBuildActionSetting.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fgist.githubusercontent.com%2Ftafuji%2Fe635225eba58df192bfc5f20ff3339ff%2Fraw%2Fad3b300ede51964133552717608145737240fe64%2FNLogConfigFileBuildActionSetting.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=8128f424492690b9503dbebf783ccf58 1x" loading="lazy"></a></p>

<h2>
<span id="13-ログ出力のためのインターフェースを作成" class="fragment"></span><a href="#13-%E3%83%AD%E3%82%B0%E5%87%BA%E5%8A%9B%E3%81%AE%E3%81%9F%E3%82%81%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%BF%E3%83%BC%E3%83%95%E3%82%A7%E3%83%BC%E3%82%B9%E3%82%92%E4%BD%9C%E6%88%90"><i class="fa fa-link"></i></a>1.3 ログ出力のためのインターフェースを作成</h2>

<p>NLog のログ出力インターフェース（<a href="https://github.com/NLog/NLog/blob/master/src/NLog/ILogger.cs" rel="nofollow noopener" target="_blank">ILogger</a>）の中からアプリケーションで利用するインターフェースを Xamarin.Forms のプロジェクトに定義します。</p>

<p><a href="https://camo.qiitausercontent.com/60fa60ddf4ec0072551c4700e0557eb5c965f0a3/68747470733a2f2f676973742e67697468756275736572636f6e74656e742e636f6d2f746166756a692f65363335323235656261353864663139326266633566323066663333333966662f7261772f326263646437626137383339316238333164633933323630653939333337303536306132616434392f494c6f6767696e67536572766963652e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fgist.githubusercontent.com%2Ftafuji%2Fe635225eba58df192bfc5f20ff3339ff%2Fraw%2F2bcdd7ba78391b831dc93260e993370560a2ad49%2FILoggingService.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=b3e2f0e0756544a3de9ad11cff5149d3" alt="ILoggingService" data-canonical-src="https://gist.githubusercontent.com/tafuji/e635225eba58df192bfc5f20ff3339ff/raw/2bcdd7ba78391b831dc93260e993370560a2ad49/ILoggingService.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fgist.githubusercontent.com%2Ftafuji%2Fe635225eba58df192bfc5f20ff3339ff%2Fraw%2F2bcdd7ba78391b831dc93260e993370560a2ad49%2FILoggingService.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=e7af72a2e211f498025bf97993b19f19 1x" loading="lazy"></a></p>

<p>今回は、NLog のメソッドからから以下のメソッドをインタフェースとして定義しました。<br>
インターフェースの各メソッドを、NLog の <a href="https://github.com/NLog/NLog/blob/master/src/NLog/ILogger.cs" rel="nofollow noopener" target="_blank">ILogger</a> のメソッドに1対1に対応させています。</p>

<div class="code-frame" data-lang="csharp">
<div class="code-lang"><span class="bold">ILoggingService.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="k">interface</span> <span class="nc">ILoggingService</span>
<span class="p">{</span>
    <span class="k">void</span> <span class="nf">Info</span><span class="p">(</span><span class="kt">string</span> <span class="n">message</span><span class="p">);</span>
    <span class="k">void</span> <span class="nf">Info</span><span class="p">(</span><span class="kt">string</span> <span class="n">format</span><span class="p">,</span> <span class="k">params</span> <span class="kt">object</span><span class="p">[]</span> <span class="n">args</span><span class="p">);</span>

    <span class="k">void</span> <span class="nf">Error</span><span class="p">(</span><span class="kt">string</span> <span class="n">message</span><span class="p">);</span>
    <span class="k">void</span> <span class="nf">Error</span><span class="p">(</span><span class="kt">string</span> <span class="n">format</span><span class="p">,</span> <span class="k">params</span> <span class="kt">object</span><span class="p">[]</span> <span class="n">args</span><span class="p">);</span>
    <span class="k">void</span> <span class="nf">Error</span><span class="p">(</span><span class="n">Exception</span> <span class="n">e</span><span class="p">,</span> <span class="kt">string</span> <span class="n">message</span><span class="p">);</span>
    <span class="k">void</span> <span class="nf">Error</span><span class="p">(</span><span class="n">Exception</span> <span class="n">e</span><span class="p">,</span> <span class="kt">string</span> <span class="n">format</span><span class="p">,</span> <span class="k">params</span> <span class="kt">object</span><span class="p">[]</span> <span class="n">args</span><span class="p">);</span>

    <span class="k">void</span> <span class="nf">Fatal</span><span class="p">(</span><span class="kt">string</span> <span class="n">message</span><span class="p">);</span>
    <span class="k">void</span> <span class="nf">Fatal</span><span class="p">(</span><span class="kt">string</span> <span class="n">format</span><span class="p">,</span> <span class="k">params</span> <span class="kt">object</span><span class="p">[]</span> <span class="n">args</span><span class="p">);</span>
    <span class="k">void</span> <span class="nf">Fatal</span><span class="p">(</span><span class="n">Exception</span> <span class="n">e</span><span class="p">,</span> <span class="kt">string</span> <span class="n">message</span><span class="p">);</span>
    <span class="k">void</span> <span class="nf">Fatal</span><span class="p">(</span><span class="n">Exception</span> <span class="n">e</span><span class="p">,</span> <span class="kt">string</span> <span class="n">format</span><span class="p">,</span> <span class="k">params</span> <span class="kt">object</span><span class="p">[]</span> <span class="n">args</span><span class="p">);</span>

    <span class="k">void</span> <span class="nf">Debug</span><span class="p">(</span><span class="kt">string</span> <span class="n">message</span><span class="p">);</span>
    <span class="k">void</span> <span class="nf">Debug</span><span class="p">(</span><span class="kt">string</span> <span class="n">format</span><span class="p">,</span> <span class="k">params</span> <span class="kt">object</span><span class="p">[]</span> <span class="n">args</span><span class="p">);</span>

    <span class="k">void</span> <span class="nf">Trace</span><span class="p">(</span><span class="kt">string</span> <span class="n">message</span><span class="p">);</span>
    <span class="k">void</span> <span class="nf">Trace</span><span class="p">(</span><span class="kt">string</span> <span class="n">format</span><span class="p">,</span> <span class="k">params</span> <span class="kt">object</span><span class="p">[]</span> <span class="n">args</span><span class="p">);</span>

    <span class="k">void</span> <span class="nf">Warn</span><span class="p">(</span><span class="kt">string</span> <span class="n">message</span><span class="p">);</span>
    <span class="k">void</span> <span class="nf">Warn</span><span class="p">(</span><span class="kt">string</span> <span class="n">format</span><span class="p">,</span> <span class="k">params</span> <span class="kt">object</span><span class="p">[]</span> <span class="n">args</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
</div>

<h2>
<span id="14-実装クラスの作成" class="fragment"></span><a href="#14-%E5%AE%9F%E8%A3%85%E3%82%AF%E3%83%A9%E3%82%B9%E3%81%AE%E4%BD%9C%E6%88%90"><i class="fa fa-link"></i></a>1.4 実装クラスの作成</h2>

<p>ログ出力処理は、Android、iOS でも同じなので、共有プロジェクト（NLogSample.Shared）を Android ネイティブ、iOS ネイティブの両方から参照します。</p>

<p><a href="https://camo.qiitausercontent.com/cdae6620c552cac16c84506ae0c0c90bdf018f47/68747470733a2f2f676973742e67697468756275736572636f6e74656e742e636f6d2f746166756a692f65363335323235656261353864663139326266633566323066663333333966662f7261772f396637636464643538653334343832383139323036346535646165653636646435383930306161322f50726f6a6563742d5374727563747572652e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fgist.githubusercontent.com%2Ftafuji%2Fe635225eba58df192bfc5f20ff3339ff%2Fraw%2F9f7cddd58e344828192064e5daee66dd58900aa2%2FProject-Structure.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=f40928a6f24d97e7a028f9442ce6ad4f" alt="プロジェクト構造" data-canonical-src="https://gist.githubusercontent.com/tafuji/e635225eba58df192bfc5f20ff3339ff/raw/9f7cddd58e344828192064e5daee66dd58900aa2/Project-Structure.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fgist.githubusercontent.com%2Ftafuji%2Fe635225eba58df192bfc5f20ff3339ff%2Fraw%2F9f7cddd58e344828192064e5daee66dd58900aa2%2FProject-Structure.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=17bb96fe16402439f590b2b668af0de2 1x" loading="lazy"></a></p>

<p>共有プロジェクトに、実装クラスを作成します。実装時のポインとは以下の点です。</p>

<ul>
<li>NLog.ILogger のインスタンスの取得

<ul>
<li>
<code>LogManager.GetCurrentClassLogger()</code> を利用してインスタンスを取得します</li>
</ul>
</li>
<li>Xamarin.Forms の ILoggingService のメソッドの処理内で、NLog を使ったログ出力処理を実装する</li>
</ul>

<p>コードの例を以下に示します。<br>
今回は、Xamarin.Forms の DependencyService 経由でインスタンス化されるようにしています。</p>

<div class="code-frame" data-lang="csharp">
<div class="code-lang"><span class="bold">LoggingServiceImplementation.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">NLogSample.Logging</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Xamarin.Forms</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">NLog</span><span class="p">;</span>

<span class="p">[</span><span class="n">assembly</span><span class="p">:</span> <span class="nf">Dependency</span><span class="p">(</span><span class="k">typeof</span><span class="p">(</span><span class="n">LoggingServiceImplementation</span><span class="p">))]</span>
<span class="k">namespace</span> <span class="nn">NLogSample.Logging</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">LoggingServiceImplementation</span> <span class="p">:</span> <span class="n">ILoggingService</span>
    <span class="p">{</span>
        <span class="k">private</span> <span class="n">ILogger</span> <span class="n">logger</span> <span class="p">=</span> <span class="n">LogManager</span><span class="p">.</span><span class="nf">GetCurrentClassLogger</span><span class="p">();</span>

        <span class="k">public</span> <span class="k">void</span> <span class="nf">Error</span><span class="p">(</span><span class="kt">string</span> <span class="n">message</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">logger</span><span class="p">.</span><span class="nf">Error</span><span class="p">(</span><span class="n">message</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="c1">// その他のメソッドは省略しています</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<h2>
<span id="15-ログ出力処理の実装" class="fragment"></span><a href="#15-%E3%83%AD%E3%82%B0%E5%87%BA%E5%8A%9B%E5%87%A6%E7%90%86%E3%81%AE%E5%AE%9F%E8%A3%85"><i class="fa fa-link"></i></a>1.5 ログ出力処理の実装</h2>

<p>ログを出力する処理を必要に応じて記述します。例を以下に示します。</p>

<div class="code-frame" data-lang="csharp">
<div class="code-lang"><span class="bold">Main.xaml.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="kt">var</span> <span class="n">logger</span> <span class="p">=</span> <span class="n">DependencyService</span><span class="p">.</span><span class="n">Get</span><span class="p">&lt;</span><span class="n">ILoggingService</span><span class="p">&gt;();</span>

<span class="n">logger</span><span class="p">.</span><span class="nf">Info</span><span class="p">(</span><span class="s">"Information レベルのログ出力"</span><span class="p">);</span>
<span class="n">logger</span><span class="p">.</span><span class="nf">Warn</span><span class="p">(</span><span class="s">"警告レベルのログ出力"</span><span class="p">);</span>
<span class="n">logger</span><span class="p">.</span><span class="nf">Debug</span><span class="p">(</span><span class="s">"デバッグレベルのログ出力"</span><span class="p">);</span>
<span class="n">logger</span><span class="p">.</span><span class="nf">Trace</span><span class="p">(</span><span class="s">"詳細レベルのログ出力"</span><span class="p">);</span>
</code></pre></div>
</div>

<h2>
<span id="16-構成ファイルの設定" class="fragment"></span><a href="#16-%E6%A7%8B%E6%88%90%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AE%E8%A8%AD%E5%AE%9A"><i class="fa fa-link"></i></a>1.6 構成ファイルの設定</h2>

<p>ログ出力に関する設定を構成ファイルで設定します。以下の二つのセクションの設定を行います</p>

<ul>
<li>
<code>&lt;targets&gt;</code> セクションに <code>&lt;target&gt;</code> 要素を追加して出力先のパス、出力項目の設定を行います</li>
<li>
<code>&lt;rules&gt;</code> セクションに <code>&lt;logger&gt;</code> 要素を追加して出力レベルなどの設定を行います</li>
</ul>

<p>先ずは、NLog.config のテンプレートに記載さている例を利用して、以下のように設定します。</p>

<p><code>&lt;target&gt;</code> セクション定義の例を示します。</p>

<div class="code-frame" data-lang="xml">
<div class="code-lang"><span class="bold">NLog.config</span></div>
<div class="highlight"><pre class="with-code"><code><span class="c">&lt;!-- Android での設定例 --&gt;</span>
<span class="nt">&lt;target</span> <span class="na">xsi:type=</span><span class="s">"File"</span> 
        <span class="na">name=</span><span class="s">"logfile"</span> 
        <span class="na">encoding=</span><span class="s">"shift_jis"</span>
        <span class="na">fileName=</span><span class="s">"/data/data/NLogSample.Droid/logs/nlog-sample.log"</span>
        <span class="na">layout=</span><span class="s">"${longdate},${uppercase:${level}},${message}"</span> <span class="nt">/&gt;</span>
</code></pre></div>
</div>

<table>
<thead>
<tr>
<th style="text-align: left">属性</th>
<th style="text-align: left">概要</th>
<th style="text-align: left">補足</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left">xsi:type</td>
<td style="text-align: left">出力方法の種類を指定します</td>
<td style="text-align: left"></td>
</tr>
<tr>
<td style="text-align: left">name</td>
<td style="text-align: left">
<code>rules</code> で指定する <code>logger</code> の出力先の名前</td>
<td style="text-align: left">
<code>logger</code> で指定する <code>writeTo</code> 属性の値を合わせてください</td>
</tr>
<tr>
<td style="text-align: left">encoding</td>
<td style="text-align: left">出力ファイルのエンコード</td>
<td style="text-align: left"></td>
</tr>
<tr>
<td style="text-align: left">fileName</td>
<td style="text-align: left">出力ファイルのパス</td>
<td style="text-align: left">後述の出力先の設定値を参考にしてください</td>
</tr>
<tr>
<td style="text-align: left">layout</td>
<td style="text-align: left">出力レイアウト</td>
<td style="text-align: left"></td>
</tr>
</tbody>
</table>

<p>各プラットフォームでログの出力先の設定値は以下を参考にしてください。</p>

<table>
<thead>
<tr>
<th style="text-align: left">Platform</th>
<th style="text-align: left">fileName 属性の設定値（例）</th>
<th style="text-align: left">説明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left">Android</td>
<td style="text-align: left">/data/data/NLogSample.Droid/logs/nlog-sample.log</td>
<td style="text-align: left">/data/data/[パッケージ名]/[ログファイル名]</td>
</tr>
<tr>
<td style="text-align: left">iOS</td>
<td style="text-align: left">${specialfolder:folder=MyDocuments}/../Library/nlog-sample.log</td>
<td style="text-align: left"></td>
</tr>
</tbody>
</table>

<p><code>logger</code> 要素の設定例を示します。</p>

<div class="code-frame" data-lang="xml">
<div class="code-lang"><span class="bold">NLog.config</span></div>
<div class="highlight"><pre class="with-code"><code>  <span class="nt">&lt;rules&gt;</span>
    <span class="nt">&lt;logger</span> <span class="na">name=</span><span class="s">"*"</span> <span class="na">minlevel=</span><span class="s">"Debug"</span> <span class="na">writeTo=</span><span class="s">"logfile"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/rules&gt;</span> 
</code></pre></div>
</div>

<table>
<thead>
<tr>
<th style="text-align: left">属性</th>
<th style="text-align: left">概要</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left">name</td>
<td style="text-align: left">logger の名前を指定します</td>
</tr>
<tr>
<td style="text-align: left">minlevel</td>
<td style="text-align: left">出力レベルの最低値を指定します</td>
</tr>
<tr>
<td style="text-align: left">writeTo</td>
<td style="text-align: left">出力先設定の名前を指定します</td>
</tr>
</tbody>
</table>

<h2>
<span id="17-動作確認" class="fragment"></span><a href="#17-%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D"><i class="fa fa-link"></i></a>1.7 動作確認</h2>

<p>Android の実機にサンプルをデプロイして確認した結果を以下に示します。<br>
logger の minlevel で Debug レベルを指定しているため、 Trace レベルのログが出力されていないことがわかります。</p>

<p><a href="https://camo.qiitausercontent.com/77ce1dda3ef047a142bcffda6fc9c4501e9605c7/68747470733a2f2f676973742e67697468756275736572636f6e74656e742e636f6d2f746166756a692f65363335323235656261353864663139326266633566323066663333333966662f7261772f343532336534366162396231323063666239353835613535633164323261633436383963363363612f526573756c742d416e64726f69642e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fgist.githubusercontent.com%2Ftafuji%2Fe635225eba58df192bfc5f20ff3339ff%2Fraw%2F4523e46ab9b120cfb9585a55c1d22ac4689c63ca%2FResult-Android.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=7615f81b0893376811b17e5dcb272f4a" alt="Android-Reuslt" data-canonical-src="https://gist.githubusercontent.com/tafuji/e635225eba58df192bfc5f20ff3339ff/raw/4523e46ab9b120cfb9585a55c1d22ac4689c63ca/Result-Android.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fgist.githubusercontent.com%2Ftafuji%2Fe635225eba58df192bfc5f20ff3339ff%2Fraw%2F4523e46ab9b120cfb9585a55c1d22ac4689c63ca%2FResult-Android.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=fa8e98223edb5768da6f645f2a8953e9 1x" loading="lazy"></a></p>

<h1>
<span id="2-ログ出力の調整" class="fragment"></span><a href="#2-%E3%83%AD%E3%82%B0%E5%87%BA%E5%8A%9B%E3%81%AE%E8%AA%BF%E6%95%B4"><i class="fa fa-link"></i></a>2. ログ出力の調整</h1>

<h2>
<span id="21-出力レベルの切り替え" class="fragment"></span><a href="#21-%E5%87%BA%E5%8A%9B%E3%83%AC%E3%83%99%E3%83%AB%E3%81%AE%E5%88%87%E3%82%8A%E6%9B%BF%E3%81%88"><i class="fa fa-link"></i></a>2.1 出力レベルの切り替え</h2>

<p>出力レベルは、<code>&lt;rules&gt;</code> セクションに定義した <code>&lt;logger&gt;</code> 要素の <code>minlevel</code> の値を変更することで切り替えることができます。<br>
出力レベルは、降順で以下の通りです。</p>

<ul>
<li>Fatal</li>
<li>Error</li>
<li>Warn</li>
<li>Info</li>
<li>Debug</li>
<li>Trace</li>
</ul>

<p><code>minlevel</code> の値を ”Info” に変更すると Debug, Trace レベルのログは出力されなくなります。また、"Off" にするとログ出力は行われなくなります。必要に応じて出力レベルを指定してください。</p>

<p><a href="https://camo.qiitausercontent.com/5fe60441808a0310c04bcb98d0080444b0594ae2/68747470733a2f2f676973742e67697468756275736572636f6e74656e742e636f6d2f746166756a692f65363335323235656261353864663139326266633566323066663333333966662f7261772f633338366166343232396265306135343036326430623562346165303733396330313165346534632f54726163654c6576656c2d526573756c742d416e64726f69642e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fgist.githubusercontent.com%2Ftafuji%2Fe635225eba58df192bfc5f20ff3339ff%2Fraw%2Fc386af4229be0a54062d0b5b4ae0739c011e4e4c%2FTraceLevel-Result-Android.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=dcf6211007b2ba8135dc9cf6719a628e" alt="minlevel-Info" data-canonical-src="https://gist.githubusercontent.com/tafuji/e635225eba58df192bfc5f20ff3339ff/raw/c386af4229be0a54062d0b5b4ae0739c011e4e4c/TraceLevel-Result-Android.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fgist.githubusercontent.com%2Ftafuji%2Fe635225eba58df192bfc5f20ff3339ff%2Fraw%2Fc386af4229be0a54062d0b5b4ae0739c011e4e4c%2FTraceLevel-Result-Android.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=fec4941d461328028090ed3b7fb22814 1x" loading="lazy"></a></p>

<h2>
<span id="22-出力項目のカスタマイズ" class="fragment"></span><a href="#22-%E5%87%BA%E5%8A%9B%E9%A0%85%E7%9B%AE%E3%81%AE%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%9E%E3%82%A4%E3%82%BA"><i class="fa fa-link"></i></a>2.2 出力項目のカスタマイズ</h2>

<p>ログ解析時に必要となる典型的な項目（プロセス ID など）を自動的に出力することができます。<br>
<code>&lt;target&gt;</code> セクションの <code>layout</code> 属性を削除して、子要素に <code>&lt;layout&gt;</code> タグを追加、子要素の <code>&lt;column&gt;</code> タグで出力項目を設定します。<br>
ここでは、CSV ファイルにログを出力するための設定値の例を示します。</p>

<div class="code-frame" data-lang="xml">
<div class="code-lang"><span class="bold">NLog.config</span></div>
<div class="highlight"><pre class="with-code"><code><span class="nt">&lt;target</span> <span class="na">name=</span><span class="s">"logfile"</span>
        <span class="na">xsi:type=</span><span class="s">"File"</span>
        <span class="na">fileName=</span><span class="s">"/data/data/NLogSample.Droid/logs/nlog-sample.csv"</span>
        <span class="na">encoding=</span><span class="s">"shift_jis"</span><span class="nt">&gt;</span>
       <span class="nt">&lt;layout</span> <span class="na">xsi:type=</span><span class="s">"CSVLayout"</span><span class="nt">&gt;</span>
         <span class="nt">&lt;quoting&gt;</span>All<span class="nt">&lt;/quoting&gt;</span>
         <span class="nt">&lt;withHeader&gt;</span>true<span class="nt">&lt;/withHeader&gt;</span>
         <span class="nt">&lt;delimiter&gt;</span>Comma<span class="nt">&lt;/delimiter&gt;</span>
         <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"time"</span> <span class="na">layout=</span><span class="s">"${longdate}"</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"logger"</span> <span class="na">layout=</span><span class="s">"${logger}"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"level"</span> <span class="na">layout=</span><span class="s">"${level}"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"machinename"</span> <span class="na">layout=</span><span class="s">"${machinename}"</span><span class="nt">/&gt;</span>
          <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"windows-identity"</span> <span class="na">layout=</span><span class="s">"${windows-identity}"</span><span class="nt">/&gt;</span>
          <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"appdomain"</span> <span class="na">layout=</span><span class="s">"${appdomain}"</span><span class="nt">/&gt;</span>
          <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"processid"</span> <span class="na">layout=</span><span class="s">"${processid}"</span><span class="nt">/&gt;</span>
          <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"processname"</span> <span class="na">layout=</span><span class="s">"${processname}"</span><span class="nt">/&gt;</span>
          <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"threadid"</span> <span class="na">layout=</span><span class="s">"${threadid}"</span><span class="nt">/&gt;</span>
          <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"message"</span> <span class="na">layout=</span><span class="s">"${message}"</span> <span class="nt">/&gt;</span>
          <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"stacktrace"</span> <span class="na">layout=</span><span class="s">"${exception:format=Type,Message,StackTrace,Data:maxInnerExceptionLevel=5}"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/layout&gt;</span>
<span class="nt">&lt;/target&gt;</span>
</code></pre></div>
</div>

<p>Android の実機に配置したサンプルで動作確認を行うと、以下のように出力されました。</p>

<p><a href="https://camo.qiitausercontent.com/343be1f882a4729d33f662eba91deb4acc4ee493/68747470733a2f2f676973742e67697468756275736572636f6e74656e742e636f6d2f746166756a692f65363335323235656261353864663139326266633566323066663333333966662f7261772f616239343036383962663662303834366332333937643031653737353233666661313063376362632f437573746f6d697a652d4c61796f75742e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fgist.githubusercontent.com%2Ftafuji%2Fe635225eba58df192bfc5f20ff3339ff%2Fraw%2Fab940689bf6b0846c2397d01e77523ffa10c7cbc%2FCustomize-Layout.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=eb72f6dc48c573e05f0e00c5aac88f19" alt="Customize-Layout" data-canonical-src="https://gist.githubusercontent.com/tafuji/e635225eba58df192bfc5f20ff3339ff/raw/ab940689bf6b0846c2397d01e77523ffa10c7cbc/Customize-Layout.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fgist.githubusercontent.com%2Ftafuji%2Fe635225eba58df192bfc5f20ff3339ff%2Fraw%2Fab940689bf6b0846c2397d01e77523ffa10c7cbc%2FCustomize-Layout.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=0f4ab3893df9135edfb5dc9c1148c983 1x" loading="lazy"></a></p>

<p>レイアウト、既定の出力項目の詳細については以下を参考にしてください。</p>

<ul>
<li><a href="https://github.com/nlog/nlog/wiki/Layouts" rel="nofollow noopener" target="_blank">Layouts</a></li>
<li><a href="https://github.com/nlog/nlog/wiki/Layout-Renderers" rel="nofollow noopener" target="_blank">Layout Renderers</a></li>
</ul>

<h2>
<span id="23-ログファイルの退避" class="fragment"></span><a href="#23-%E3%83%AD%E3%82%B0%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AE%E9%80%80%E9%81%BF"><i class="fa fa-link"></i></a>2.3 ログファイルの退避</h2>

<p>一つのファイルにログを出力し続けるとファイルサイズが肥大化してしまいますが、NLog では、適切なタイミングで、過去のログを別のファイルに退避することができます。ファイルローリングの設定は、<code>&lt;target&gt;</code> 要素の属性値で設定することができます。<br>
一定時間経過するとファイルを退避したい場合の設定項目を以下に示します。</p>

<table>
<thead>
<tr>
<th style="text-align: left">属性</th>
<th style="text-align: left">概要</th>
<th style="text-align: left">設定例</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left">archiveFileName</td>
<td style="text-align: left">退避先のファイル名の形式</td>
<td style="text-align: left">/data/data/NLogSample.Droid/logs/archives/nlog-sample-{#}.csv</td>
</tr>
<tr>
<td style="text-align: left">archiveNumbering</td>
<td style="text-align: left">退避の方法</td>
<td style="text-align: left">Date</td>
</tr>
<tr>
<td style="text-align: left">archiveEvery</td>
<td style="text-align: left">退避する時間間隔</td>
<td style="text-align: left">Day, Minute 等</td>
</tr>
<tr>
<td style="text-align: left">archiveDateFormat</td>
<td style="text-align: left">ファイル名に付与する日付のフォーマット</td>
<td style="text-align: left">yyyy-MM-dd-HH-mm</td>
</tr>
<tr>
<td style="text-align: left">maxArchiveFiles</td>
<td style="text-align: left">退避するファイル数の最大値</td>
<td style="text-align: left">５</td>
</tr>
</tbody>
</table>

<p>1分経過するとファイルの退避を行い、過去五世代まで archives ディレクトリに保存する場合は、以下のような設定になります。ファイル名には、[yyyy-MM-dd-HH-mm] の形式で日付時刻が付与されます。<br>
（動作確認用のサンプルのため、退避の時間間隔を1分としています。）</p>

<div class="code-frame" data-lang="xml">
<div class="code-lang"><span class="bold">NLog.config</span></div>
<div class="highlight"><pre class="with-code"><code><span class="nt">&lt;target</span> <span class="na">name=</span><span class="s">"logfile"</span>
        <span class="na">xsi:type=</span><span class="s">"File"</span>
        <span class="na">fileName=</span><span class="s">"/data/data/NLogSample.Droid/logs/nlog-sample.csv"</span>
        <span class="na">archiveFileName=</span><span class="s">"/data/data/NLogSample.Droid/logs/archives/nlog-sample-{#}.csv"</span>
        <span class="na">archiveEvery=</span><span class="s">"Minute"</span>
        <span class="na">archiveNumbering=</span><span class="s">"Date"</span>
        <span class="na">maxArchiveFiles=</span><span class="s">"5"</span>
        <span class="na">archiveDateFormat=</span><span class="s">"yyyy-MM-dd-HH-mm"</span>
        <span class="na">encoding=</span><span class="s">"shift_jis"</span><span class="nt">&gt;</span>
       <span class="nt">&lt;layout</span> <span class="na">xsi:type=</span><span class="s">"CSVLayout"</span><span class="nt">&gt;</span>
         <span class="nt">&lt;quoting&gt;</span>All<span class="nt">&lt;/quoting&gt;</span>
         <span class="nt">&lt;withHeader&gt;</span>true<span class="nt">&lt;/withHeader&gt;</span>
         <span class="nt">&lt;delimiter&gt;</span>Comma<span class="nt">&lt;/delimiter&gt;</span>
         <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"time"</span> <span class="na">layout=</span><span class="s">"${longdate}"</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"logger"</span> <span class="na">layout=</span><span class="s">"${logger}"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"level"</span> <span class="na">layout=</span><span class="s">"${level}"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"machinename"</span> <span class="na">layout=</span><span class="s">"${machinename}"</span><span class="nt">/&gt;</span>
          <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"windows-identity"</span> <span class="na">layout=</span><span class="s">"${windows-identity}"</span><span class="nt">/&gt;</span>
          <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"appdomain"</span> <span class="na">layout=</span><span class="s">"${appdomain}"</span><span class="nt">/&gt;</span>
          <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"processid"</span> <span class="na">layout=</span><span class="s">"${processid}"</span><span class="nt">/&gt;</span>
          <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"processname"</span> <span class="na">layout=</span><span class="s">"${processname}"</span><span class="nt">/&gt;</span>
          <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"threadid"</span> <span class="na">layout=</span><span class="s">"${threadid}"</span><span class="nt">/&gt;</span>
          <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"message"</span> <span class="na">layout=</span><span class="s">"${message}"</span> <span class="nt">/&gt;</span>
          <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">"stacktrace"</span> <span class="na">layout=</span><span class="s">"${exception:format=Type,Message,StackTrace,Data:maxInnerExceptionLevel=5}"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/layout&gt;</span>
<span class="nt">&lt;/target&gt;</span>

</code></pre></div>
</div>

<p>Android の実機でサンプルを動作させると、1分間隔でログファイルが退避されています。</p>

<p><a href="https://camo.qiitausercontent.com/c7df47e32fa58aa4e23943596425f7261c670740/68747470733a2f2f676973742e67697468756275736572636f6e74656e742e636f6d2f746166756a692f65363335323235656261353864663139326266633566323066663333333966662f7261772f326564386339613336363433336161393065373161363439373362306137393765366566633162642f526f6c6c696e672e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fgist.githubusercontent.com%2Ftafuji%2Fe635225eba58df192bfc5f20ff3339ff%2Fraw%2F2ed8c9a366433aa90e71a64973b0a797e6efc1bd%2FRolling.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=62a43582fb80f7dbca69f6d0f71ef12f" alt="Rolling" data-canonical-src="https://gist.githubusercontent.com/tafuji/e635225eba58df192bfc5f20ff3339ff/raw/2ed8c9a366433aa90e71a64973b0a797e6efc1bd/Rolling.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fgist.githubusercontent.com%2Ftafuji%2Fe635225eba58df192bfc5f20ff3339ff%2Fraw%2F2ed8c9a366433aa90e71a64973b0a797e6efc1bd%2FRolling.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=4c3d80b4dd5a5b4e1f478fdf1d5c10da 1x" loading="lazy"></a></p>

<p>保存数の最大値を超える場合は、一番古いログファイルが削除されていることがわかります。</p>

<p><a href="https://camo.qiitausercontent.com/909360078dbd8cbf975f70d8052a56e41fd470b9/68747470733a2f2f676973742e67697468756275736572636f6e74656e742e636f6d2f746166756a692f65363335323235656261353864663139326266633566323066663333333966662f7261772f326564386339613336363433336161393065373161363439373362306137393765366566633162642f526f6c6c696e672d526573756c742e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fgist.githubusercontent.com%2Ftafuji%2Fe635225eba58df192bfc5f20ff3339ff%2Fraw%2F2ed8c9a366433aa90e71a64973b0a797e6efc1bd%2FRolling-Result.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=6fdec008d8c132baba637eba42bfd174" alt="Rolling-Result" data-canonical-src="https://gist.githubusercontent.com/tafuji/e635225eba58df192bfc5f20ff3339ff/raw/2ed8c9a366433aa90e71a64973b0a797e6efc1bd/Rolling-Result.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fgist.githubusercontent.com%2Ftafuji%2Fe635225eba58df192bfc5f20ff3339ff%2Fraw%2F2ed8c9a366433aa90e71a64973b0a797e6efc1bd%2FRolling-Result.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=7bfa77799ae28cf680c79eb25bf72ecb 1x" loading="lazy"></a></p>

<p>ログファイル退避のその他の設定方法に関しては、以下を参照してください。</p>

<ul>
<li><a href="https://github.com/nlog/NLog/wiki/File-target#archival-options" rel="nofollow noopener" target="_blank">Archival Options</a></li>
</ul>

<h1>
<span id="3-まとめ" class="fragment"></span><a href="#3-%E3%81%BE%E3%81%A8%E3%82%81"><i class="fa fa-link"></i></a>3. まとめ</h1>

<p>手順のまとめを以下に箇条書きで記載します。</p>

<ul>
<li>Native プロジェクト(Android, iOS)に Nlog をインストールする</li>
<li>NLog で利用するログ出力処理のインターフェースを Xamarin.Forms プロジェクトに定義する</li>
<li>共有プロジェクトで、Xamarin.Forms で定義したインタフェースを実装する</li>
<li>Native プロジェクトで共有プロジェクトを参照する</li>
<li>Xamarin.Forms のプロジェクトでは、インタフェース経由でログ出力する

<ul>
<li>DependencyService, Unity (DI コンテナ) 等を利用する</li>
</ul>
</li>
<li>NLog の構成ファイル（NLog.config）の配置場所

<ul>
<li>Android は Asset フォルダ直下</li>
<li>iOS はプロジェクト直下で可</li>
</ul>
</li>
<li>お好みで構成ファイルの設定を行う</li>
<li>その他の詳細設定は本家のサイトを参考にする

<ul>
<li><a href="http://nlog-project.org/" rel="nofollow noopener" target="_blank">NLog</a></li>
<li>
<a href="https://github.com/NLog/NLog/wiki/Tutorial" rel="nofollow noopener" target="_blank">NLog Tutorial</a>

<ul>
<li>NLog 利用方法の全般的なトピックはここが参考になります</li>
</ul>
</li>
<li>
<a href="https://github.com/nlog/NLog/wiki/File-target" rel="nofollow noopener" target="_blank">File target</a>

<ul>
<li>ファイル出力に関する <code>&lt;target&gt;</code> の設定の詳細は、ここを参照してください</li>
</ul>
</li>
<li>
<a href="https://github.com/nlog/nlog/wiki/Layouts" rel="nofollow noopener" target="_blank">Layouts</a>

<ul>
<li>出力レイアウトに関する設定の詳細は、ここに記載されています</li>
</ul>
</li>
<li>
<a href="https://github.com/nlog/nlog/wiki/Layout-Renderers" rel="nofollow noopener" target="_blank">Layout Renderers</a>

<ul>
<li>出力項目のカスタマイズを行いたい場合はここを参照してください</li>
</ul>
</li>
<li>
<a href="https://github.com/nlog/NLog/wiki/File-target#archival-options" rel="nofollow noopener" target="_blank">Archival Options</a>

<ul>
<li>ファイルのローリング設定の詳細はここを参照してください</li>
</ul>
</li>
</ul>
</li>
</ul>

<h1>
<span id="さいごに" class="fragment"></span><a href="#%E3%81%95%E3%81%84%E3%81%94%E3%81%AB"><i class="fa fa-link"></i></a>さいごに</h1>

<p>この記事では、デバッグログを出力するために NLog の利用手順について記載しました。<br>
NLog 以外にも <a href="http://qiita.com/amay077">@amay077</a> さんの <a href="http://qiita.com/amay077/items/5df0cb5c37d0598ce90f" id="reference-2d8b6236da8609e7ab5b">「Xamarin.Forms をガチで使う時のプロジェクト構成(2016冬Ver)」</a> で紹介されている <a href="https://www.nuget.org/packages/MetroLog/" rel="nofollow noopener" target="_blank">MetroLog</a> というライブラリもあります。<br>
どちらのライブラリも System.Diagnostics.Debug クラスを利用するよりも作業効率が上がると思いますので、お好みで選択していただければと思います。</p>

<p>この記事が、NLog を利用される方に少しでも役立てば、非常にうれしく思います。</p>
</div></div></section><div class="css-1yzj1fm"><div class="css-1uv1qiv"><span class="fa fa-twitter"></span></div><div class="css-1uv1qiv"><span class="fa fa-facebook"></span></div></div><div class="apm-Content"><div class="apm-Content_title">Why not register and get more from Qiita?</div><ol class="apm-Content_list"><li>We will deliver articles that match you<div class="description">By following users and tags, you can catch up information on technical fields that you are interested in as a whole</div></li><li>you can read useful information later efficiently<div class="description">By &quot;stocking&quot; the articles you like, you can search right away</div></li><div><a class="apm-Content_help" href="https://help.qiita.com/ja/articles/qiita-login-user" target="_blank"><i class="fa fa-fw fa-arrow-circle-right"></i>What you can do with signing up</a></div></ol><a href="/signup?callback_action=login_or_signup&amp;redirect_to=%2Ftafuji%2Fitems%2F1a40866ea469d92c2d24&amp;realm=qiita" class="apm-Content_button apm-Content_button-signup">Sign up</a><a href="/login?callback_action=login_or_signup&amp;redirect_to=%2Ftafuji%2Fitems%2F1a40866ea469d92c2d24&amp;realm=qiita" class="apm-Content_button apm-Content_button-signin">Login</a></div></div><div class="css-helsa7"></div></div></div></div><div class="css-109dbrr"><div class="css-5jpx49"><div class="css-mnxgyc"><button class=" css-1vlpknv"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/tafuji/items/1a40866ea469d92c2d24/likers" class="css-1iupg5d">18</a></div><div class="css-fsjkhv"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-1b17vb0">13</span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-7i7f4d"><div class="css-1gj7nt">Improve article</div><a href="/drafts/1a40866ea469d92c2d24/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/tafuji/items/1a40866ea469d92c2d24/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/tafuji/items/1a40866ea469d92c2d24/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/tafuji/items/1a40866ea469d92c2d24/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/tafuji/items/1a40866ea469d92c2d24.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="PersonalArticlePage" data-dom-id="PersonalArticlePage-react-component-a8fb70df-3892-4479-9d78-02947e06ca3f">{"authorAnalyticsTrackingId":null,"organizationAnalyticsTrackingId":null}</script>
      
<footer id="globalFooter" class="st-Footer"><div class="st-Footer_container"><div class="st-Footer_start"><div class="st-Footer_logo"><svg viewbox="0 0 426.57 130" xmlns="http://www.w3.org/2000/svg"><circle cx="167.08" cy="21.4" r="12.28" /><path d="M250.81 29.66h23.48v18.9h-23.48z" /><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z" /><circle cx="216.33" cy="21.4" r="12.28" /></svg></div><div class="st-Footer_catchcopy">How developers code is here.</div><div class="st-Footer_socials"><a class="fa fa-twitter" href="https://twitter.com/qiita"></a><a class="fa fa-facebook-square" href="https://www.facebook.com/qiita/"></a></div></div><div class="st-Footer_end"><div class="st-Footer_qiita"><div class="st-Footer_label">Qiita</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="/about">About</a><a href="/terms">Terms</a><a href="/privacy">Privacy</a><a target="_blank" href="http://help.qiita.com/ja/articles/qiita-community-guideline">Guideline</a><a target="_blank" href="https://help.qiita.com/ja/articles/others-brand-guideline">Design Guideline</a></div><div class="st-Footer_column"><a href="/release-notes">Release</a><a href="/api/v2/docs">API</a><a href="/feedback/new">ご意見</a><a href="https://help.qiita.com">Help</a><a target="_blank" href="https://qiita.com/ads?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Advertisement</a></div></div></div><div class="st-Footer_increments"><div class="st-Footer_label">Increments</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="https://increments.co.jp/company/">About</a><a href="https://increments.co.jp/jobs/">採用情報</a><a href="https://blog.qiita.com">Blog</a></div><div class="st-Footer_column"><a href="https://teams.qiita.com/">Qiita Team</a><a href="https://jobs.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Jobs</a><a href="https://zine.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Zine</a></div></div></div></div></div><div class="st-Footer_copyright">© 2011-2021 Increments Inc.</div></footer><div id="Snackbar-react-component-cad86a0e-cad8-49be-b930-76e934348e70"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="Snackbar" data-dom-id="Snackbar-react-component-cad86a0e-cad8-49be-b930-76e934348e70">{}</script>
      
<div id="LoginModal-react-component-55f8c4a9-3bb4-406c-a567-39449c186578"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="LoginModal" data-dom-id="LoginModal-react-component-55f8c4a9-3bb4-406c-a567-39449c186578">{}</script>
      
<div id="StockModal-react-component-c3fd1747-d4f8-405e-a14f-09479e154962"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="StockModal" data-dom-id="StockModal-react-component-c3fd1747-d4f8-405e-a14f-09479e154962">{}</script>
      
</div><div id="dataContainer" style="display: none;" data-config="{&quot;actionPath&quot;:&quot;public/items#show&quot;,&quot;settings&quot;:{&quot;analyticsTrackingId&quot;:&quot;UA-24675221-12&quot;,&quot;assetsMap&quot;:{},&quot;csrfToken&quot;:&quot;/IpcR1RGOQSm88subU0htwf0Sgokc3KJX5s1WvE8hbO+QE7CzxZaaRoCEJsy2TXcTLK7EZRxuebNdTHXLWGdrg==&quot;,&quot;locale&quot;:&quot;en&quot;},&quot;currentUser&quot;:null}" /></body></html><script type="application/json" data-js-react-on-rails-store="AppStoreWithReactOnRails">{"snackbar":{"type":"","body":"","isActive":false},"article":{"article":{"body":"\u003cp\u003eこの記事は、\u003ca href=\"http://qiita.com/advent-calendar/2016/xamarin2\"\u003eXamarin Advent Calendar 2016(その2)\u003c/a\u003e の23日目の記事です。\u003c/p\u003e\n\n\u003chr\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"0-はじめに\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#0-%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e0. はじめに\u003c/h1\u003e\n\n\u003cp\u003eXamarin に限らずアプリのデバッグを効率的に行うためにはログ出力ライブラリの利用は必須だと思います。\u003cbr\u003e\n\u003ca href=\"https://msdn.microsoft.com/ja-jp/library/system.diagnostics.debug(v=vs.110).aspx\" rel=\"nofollow noopener\" target=\"_blank\"\u003eSystem.Diagnostics.Debug\u003c/a\u003e クラスも便利ですが、複雑なアプリケーションのデバッグになると、厳しい場合があります。\u003cbr\u003e\n本記事では、\u003ca href=\"http://nlog-project.org/\" rel=\"nofollow noopener\" target=\"_blank\"\u003eNLog\u003c/a\u003e を使って Xamarin.Forms のアプリケーションからログを出力する方法について記載します。\u003c/p\u003e\n\n\u003cp\u003eNLog は以下のような機能をもつ非常に便利なライブラリです。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e構成ファイルで出力レベルの切り替えを行うことができる\u003c/li\u003e\n\u003cli\u003eログ出力の日付時刻、プロセス ID などのログ解析時に必要な典型的な項目を自動的に出力することができる\u003c/li\u003e\n\u003cli\u003eログファイルのフォーマットに CSV, JSON 形式など指定することができる\u003c/li\u003e\n\u003cli\u003eログファイルのローリングができる\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eNLog は、Xamarin.Android, Xamarin.iOS をサポートしていますが、Xamarin.Forms はサポートしていません。\u003cbr\u003e\nしかしながら、\u003ca href=\"https://developer.xamarin.com/guides/xamarin-forms/dependency-service/introduction/\" rel=\"nofollow noopener\" target=\"_blank\"\u003eDependencyService\u003c/a\u003e や \u003ca href=\"https://unity.codeplex.com/\" rel=\"nofollow noopener\" target=\"_blank\"\u003eUnity\u003c/a\u003e (DI コンテナ）等の機能を利用することで、Xamarin.Forms でも NLog の便利な機能を利用することが可能になります。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"1-ログ出力までの手順\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#1-%E3%83%AD%E3%82%B0%E5%87%BA%E5%8A%9B%E3%81%BE%E3%81%A7%E3%81%AE%E6%89%8B%E9%A0%86\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e1. ログ出力までの手順\u003c/h1\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"11-プロジェクトの作成\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#11-%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E4%BD%9C%E6%88%90\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e1.1 プロジェクトの作成\u003c/h2\u003e\n\n\u003cp\u003eサンプルコードを GitHub に置いています。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/tafuji/Xamarin-Forms-NLog-Sample\" rel=\"nofollow noopener\" target=\"_blank\"\u003eXamarin-Forms-NLog-Sample\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eサンプルは Main.xaml にボタンを二つ配置して、ボタンを押すとファイルにログ出力する簡単なサンプルです。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/df74f4c6ee5155524f733b90b5c09c79cb0a7824/68747470733a2f2f676973742e67697468756275736572636f6e74656e742e636f6d2f746166756a692f65363335323235656261353864663139326266633566323066663333333966662f7261772f363363396139626663626431303835376330326261663533336163396238393166333565333363352f4d61696e2e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fgist.githubusercontent.com%2Ftafuji%2Fe635225eba58df192bfc5f20ff3339ff%2Fraw%2F63c9a9bfcbd10857c02baf533ac9b891f35e33c5%2FMain.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=9e1f62be0fe7d0ba260aded5202fc6ae\" alt=\"Main\" data-canonical-src=\"https://gist.githubusercontent.com/tafuji/e635225eba58df192bfc5f20ff3339ff/raw/63c9a9bfcbd10857c02baf533ac9b891f35e33c5/Main.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fgist.githubusercontent.com%2Ftafuji%2Fe635225eba58df192bfc5f20ff3339ff%2Fraw%2F63c9a9bfcbd10857c02baf533ac9b891f35e33c5%2FMain.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=9811684372663994fdce468d730a9e31 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eソリューションの初期構造は以下の流れで作っています。\u003c/p\u003e\n\n\u003col\u003e\n\u003cli\u003eVisual Stuido 2015 で[Blank App (Xamarin.Forms Portable)]テンプレートを選択し、ソリューション名を「NLogSample」指定してプロジェクトを作成\u003c/li\u003e\n\u003cli\u003eNLogSample.UWP、NLogSample.Windows、NLogSample.WinPhone プロジェクトは削除\u003c/li\u003e\n\u003cli\u003eログ出力処理を実装する共有プロジェクト(NLogSample.Shared) を追加\u003c/li\u003e\n\u003cli\u003eNLogSample プロジェクトに Main.xaml を追加\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/95ba2ee56bebd28f50b4871867be11f4681c917f/68747470733a2f2f676973742e67697468756275736572636f6e74656e742e636f6d2f746166756a692f65363335323235656261353864663139326266633566323066663333333966662f7261772f396266623366383836396231666535653234386430393138393763333064303030323337353665302f496e697469616c2d536f6c7574696f6e2e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fgist.githubusercontent.com%2Ftafuji%2Fe635225eba58df192bfc5f20ff3339ff%2Fraw%2F9bfb3f8869b1fe5e248d091897c30d00023756e0%2FInitial-Solution.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=de738afae10164287da1fd67e9ea27d8\" alt=\"Initial Solution\" data-canonical-src=\"https://gist.githubusercontent.com/tafuji/e635225eba58df192bfc5f20ff3339ff/raw/9bfb3f8869b1fe5e248d091897c30d00023756e0/Initial-Solution.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fgist.githubusercontent.com%2Ftafuji%2Fe635225eba58df192bfc5f20ff3339ff%2Fraw%2F9bfb3f8869b1fe5e248d091897c30d00023756e0%2FInitial-Solution.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=4acbb5d667ac7809c94cd94f052b0246 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"12-nuget-パッケージのインストール\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#12-nuget-%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e1.2 NuGet パッケージのインストール\u003c/h2\u003e\n\n\u003cp\u003eNuGet で以下のパッケージをネイティブのプロジェクト（NLogSample.Droid, NLogSample.iOS）にインストールします。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eNLog\n\n\u003cul\u003e\n\u003cli\u003eライブラリ本体です\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eNLog.Config\n\n\u003cul\u003e\n\u003cli\u003e構成ファイルのテンプレートです\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eNLog.Config をインストールすると、以下の二つのファイルがプロジェクトに作成されますが、Android ネイティブのプロジェクトに配置されたファイルは移動が必要です。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eNLog.config\u003c/li\u003e\n\u003cli\u003eNLog.xsd\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth style=\"text-align: left\"\u003ePlatform\u003c/th\u003e\n\u003cth style=\"text-align: left\"\u003eNLog.config ファイルの配置場所\u003c/th\u003e\n\u003cth style=\"text-align: left\"\u003e注意事項\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd style=\"text-align: left\"\u003eAndroid\u003c/td\u003e\n\u003ctd style=\"text-align: left\"\u003eAsset フォルダ直下に配置します\u003c/td\u003e\n\u003ctd style=\"text-align: left\"\u003eビルドアクションを AndroidAsset に設定してください\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd style=\"text-align: left\"\u003eiOS\u003c/td\u003e\n\u003ctd style=\"text-align: left\"\u003eプロジェクト直下\u003c/td\u003e\n\u003ctd style=\"text-align: left\"\u003e特にありません\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/b6cdb3cea879b67406008afcc5bc5bf7d274f921/68747470733a2f2f676973742e67697468756275736572636f6e74656e742e636f6d2f746166756a692f65363335323235656261353864663139326266633566323066663333333966662f7261772f616433623330306564653531393634313333353532373137363038313435373337323430666536342f4e4c6f67436f6e66696746696c654275696c64416374696f6e53657474696e672e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fgist.githubusercontent.com%2Ftafuji%2Fe635225eba58df192bfc5f20ff3339ff%2Fraw%2Fad3b300ede51964133552717608145737240fe64%2FNLogConfigFileBuildActionSetting.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=c0e54f42770b076e8ebc6aacaced47c4\" alt=\"AndroidAsset に設定\" data-canonical-src=\"https://gist.githubusercontent.com/tafuji/e635225eba58df192bfc5f20ff3339ff/raw/ad3b300ede51964133552717608145737240fe64/NLogConfigFileBuildActionSetting.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fgist.githubusercontent.com%2Ftafuji%2Fe635225eba58df192bfc5f20ff3339ff%2Fraw%2Fad3b300ede51964133552717608145737240fe64%2FNLogConfigFileBuildActionSetting.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=8128f424492690b9503dbebf783ccf58 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"13-ログ出力のためのインターフェースを作成\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#13-%E3%83%AD%E3%82%B0%E5%87%BA%E5%8A%9B%E3%81%AE%E3%81%9F%E3%82%81%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%BF%E3%83%BC%E3%83%95%E3%82%A7%E3%83%BC%E3%82%B9%E3%82%92%E4%BD%9C%E6%88%90\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e1.3 ログ出力のためのインターフェースを作成\u003c/h2\u003e\n\n\u003cp\u003eNLog のログ出力インターフェース（\u003ca href=\"https://github.com/NLog/NLog/blob/master/src/NLog/ILogger.cs\" rel=\"nofollow noopener\" target=\"_blank\"\u003eILogger\u003c/a\u003e）の中からアプリケーションで利用するインターフェースを Xamarin.Forms のプロジェクトに定義します。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/60fa60ddf4ec0072551c4700e0557eb5c965f0a3/68747470733a2f2f676973742e67697468756275736572636f6e74656e742e636f6d2f746166756a692f65363335323235656261353864663139326266633566323066663333333966662f7261772f326263646437626137383339316238333164633933323630653939333337303536306132616434392f494c6f6767696e67536572766963652e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fgist.githubusercontent.com%2Ftafuji%2Fe635225eba58df192bfc5f20ff3339ff%2Fraw%2F2bcdd7ba78391b831dc93260e993370560a2ad49%2FILoggingService.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=b3e2f0e0756544a3de9ad11cff5149d3\" alt=\"ILoggingService\" data-canonical-src=\"https://gist.githubusercontent.com/tafuji/e635225eba58df192bfc5f20ff3339ff/raw/2bcdd7ba78391b831dc93260e993370560a2ad49/ILoggingService.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fgist.githubusercontent.com%2Ftafuji%2Fe635225eba58df192bfc5f20ff3339ff%2Fraw%2F2bcdd7ba78391b831dc93260e993370560a2ad49%2FILoggingService.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=e7af72a2e211f498025bf97993b19f19 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e今回は、NLog のメソッドからから以下のメソッドをインタフェースとして定義しました。\u003cbr\u003e\nインターフェースの各メソッドを、NLog の \u003ca href=\"https://github.com/NLog/NLog/blob/master/src/NLog/ILogger.cs\" rel=\"nofollow noopener\" target=\"_blank\"\u003eILogger\u003c/a\u003e のメソッドに1対1に対応させています。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eILoggingService.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003einterface\u003c/span\u003e \u003cspan class=\"nc\"\u003eILoggingService\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eInfo\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003emessage\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eInfo\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003eformat\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003eparams\u003c/span\u003e \u003cspan class=\"kt\"\u003eobject\u003c/span\u003e\u003cspan class=\"p\"\u003e[]\u003c/span\u003e \u003cspan class=\"n\"\u003eargs\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eError\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003emessage\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eError\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003eformat\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003eparams\u003c/span\u003e \u003cspan class=\"kt\"\u003eobject\u003c/span\u003e\u003cspan class=\"p\"\u003e[]\u003c/span\u003e \u003cspan class=\"n\"\u003eargs\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eError\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eException\u003c/span\u003e \u003cspan class=\"n\"\u003ee\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003emessage\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eError\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eException\u003c/span\u003e \u003cspan class=\"n\"\u003ee\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003eformat\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003eparams\u003c/span\u003e \u003cspan class=\"kt\"\u003eobject\u003c/span\u003e\u003cspan class=\"p\"\u003e[]\u003c/span\u003e \u003cspan class=\"n\"\u003eargs\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eFatal\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003emessage\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eFatal\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003eformat\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003eparams\u003c/span\u003e \u003cspan class=\"kt\"\u003eobject\u003c/span\u003e\u003cspan class=\"p\"\u003e[]\u003c/span\u003e \u003cspan class=\"n\"\u003eargs\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eFatal\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eException\u003c/span\u003e \u003cspan class=\"n\"\u003ee\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003emessage\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eFatal\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eException\u003c/span\u003e \u003cspan class=\"n\"\u003ee\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003eformat\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003eparams\u003c/span\u003e \u003cspan class=\"kt\"\u003eobject\u003c/span\u003e\u003cspan class=\"p\"\u003e[]\u003c/span\u003e \u003cspan class=\"n\"\u003eargs\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eDebug\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003emessage\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eDebug\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003eformat\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003eparams\u003c/span\u003e \u003cspan class=\"kt\"\u003eobject\u003c/span\u003e\u003cspan class=\"p\"\u003e[]\u003c/span\u003e \u003cspan class=\"n\"\u003eargs\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eTrace\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003emessage\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eTrace\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003eformat\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003eparams\u003c/span\u003e \u003cspan class=\"kt\"\u003eobject\u003c/span\u003e\u003cspan class=\"p\"\u003e[]\u003c/span\u003e \u003cspan class=\"n\"\u003eargs\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eWarn\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003emessage\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eWarn\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003eformat\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003eparams\u003c/span\u003e \u003cspan class=\"kt\"\u003eobject\u003c/span\u003e\u003cspan class=\"p\"\u003e[]\u003c/span\u003e \u003cspan class=\"n\"\u003eargs\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"14-実装クラスの作成\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#14-%E5%AE%9F%E8%A3%85%E3%82%AF%E3%83%A9%E3%82%B9%E3%81%AE%E4%BD%9C%E6%88%90\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e1.4 実装クラスの作成\u003c/h2\u003e\n\n\u003cp\u003eログ出力処理は、Android、iOS でも同じなので、共有プロジェクト（NLogSample.Shared）を Android ネイティブ、iOS ネイティブの両方から参照します。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/cdae6620c552cac16c84506ae0c0c90bdf018f47/68747470733a2f2f676973742e67697468756275736572636f6e74656e742e636f6d2f746166756a692f65363335323235656261353864663139326266633566323066663333333966662f7261772f396637636464643538653334343832383139323036346535646165653636646435383930306161322f50726f6a6563742d5374727563747572652e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fgist.githubusercontent.com%2Ftafuji%2Fe635225eba58df192bfc5f20ff3339ff%2Fraw%2F9f7cddd58e344828192064e5daee66dd58900aa2%2FProject-Structure.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=f40928a6f24d97e7a028f9442ce6ad4f\" alt=\"プロジェクト構造\" data-canonical-src=\"https://gist.githubusercontent.com/tafuji/e635225eba58df192bfc5f20ff3339ff/raw/9f7cddd58e344828192064e5daee66dd58900aa2/Project-Structure.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fgist.githubusercontent.com%2Ftafuji%2Fe635225eba58df192bfc5f20ff3339ff%2Fraw%2F9f7cddd58e344828192064e5daee66dd58900aa2%2FProject-Structure.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=17bb96fe16402439f590b2b668af0de2 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e共有プロジェクトに、実装クラスを作成します。実装時のポインとは以下の点です。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eNLog.ILogger のインスタンスの取得\n\n\u003cul\u003e\n\u003cli\u003e\n\u003ccode\u003eLogManager.GetCurrentClassLogger()\u003c/code\u003e を利用してインスタンスを取得します\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eXamarin.Forms の ILoggingService のメソッドの処理内で、NLog を使ったログ出力処理を実装する\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eコードの例を以下に示します。\u003cbr\u003e\n今回は、Xamarin.Forms の DependencyService 経由でインスタンス化されるようにしています。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eLoggingServiceImplementation.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eNLogSample.Logging\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eXamarin.Forms\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eNLog\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eassembly\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nf\"\u003eDependency\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003etypeof\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eLoggingServiceImplementation\u003c/span\u003e\u003cspan class=\"p\"\u003e))]\u003c/span\u003e\n\u003cspan class=\"k\"\u003enamespace\u003c/span\u003e \u003cspan class=\"nn\"\u003eNLogSample.Logging\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eLoggingServiceImplementation\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eILoggingService\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003eILogger\u003c/span\u003e \u003cspan class=\"n\"\u003elogger\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eLogManager\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eGetCurrentClassLogger\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eError\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003emessage\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"n\"\u003elogger\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eError\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003emessage\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e// その他のメソッドは省略しています\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"15-ログ出力処理の実装\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#15-%E3%83%AD%E3%82%B0%E5%87%BA%E5%8A%9B%E5%87%A6%E7%90%86%E3%81%AE%E5%AE%9F%E8%A3%85\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e1.5 ログ出力処理の実装\u003c/h2\u003e\n\n\u003cp\u003eログを出力する処理を必要に応じて記述します。例を以下に示します。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eMain.xaml.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003elogger\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eDependencyService\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eGet\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eILoggingService\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;();\u003c/span\u003e\n\n\u003cspan class=\"n\"\u003elogger\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eInfo\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Information レベルのログ出力\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"n\"\u003elogger\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWarn\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"警告レベルのログ出力\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"n\"\u003elogger\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eDebug\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"デバッグレベルのログ出力\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"n\"\u003elogger\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eTrace\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"詳細レベルのログ出力\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"16-構成ファイルの設定\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#16-%E6%A7%8B%E6%88%90%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AE%E8%A8%AD%E5%AE%9A\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e1.6 構成ファイルの設定\u003c/h2\u003e\n\n\u003cp\u003eログ出力に関する設定を構成ファイルで設定します。以下の二つのセクションの設定を行います\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\n\u003ccode\u003e\u0026lt;targets\u0026gt;\u003c/code\u003e セクションに \u003ccode\u003e\u0026lt;target\u0026gt;\u003c/code\u003e 要素を追加して出力先のパス、出力項目の設定を行います\u003c/li\u003e\n\u003cli\u003e\n\u003ccode\u003e\u0026lt;rules\u0026gt;\u003c/code\u003e セクションに \u003ccode\u003e\u0026lt;logger\u0026gt;\u003c/code\u003e 要素を追加して出力レベルなどの設定を行います\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e先ずは、NLog.config のテンプレートに記載さている例を利用して、以下のように設定します。\u003c/p\u003e\n\n\u003cp\u003e\u003ccode\u003e\u0026lt;target\u0026gt;\u003c/code\u003e セクション定義の例を示します。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"xml\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eNLog.config\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"c\"\u003e\u0026lt;!-- Android での設定例 --\u0026gt;\u003c/span\u003e\n\u003cspan class=\"nt\"\u003e\u0026lt;target\u003c/span\u003e \u003cspan class=\"na\"\u003exsi:type=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"File\"\u003c/span\u003e \n        \u003cspan class=\"na\"\u003ename=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"logfile\"\u003c/span\u003e \n        \u003cspan class=\"na\"\u003eencoding=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"shift_jis\"\u003c/span\u003e\n        \u003cspan class=\"na\"\u003efileName=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"/data/data/NLogSample.Droid/logs/nlog-sample.log\"\u003c/span\u003e\n        \u003cspan class=\"na\"\u003elayout=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"${longdate},${uppercase:${level}},${message}\"\u003c/span\u003e \u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth style=\"text-align: left\"\u003e属性\u003c/th\u003e\n\u003cth style=\"text-align: left\"\u003e概要\u003c/th\u003e\n\u003cth style=\"text-align: left\"\u003e補足\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd style=\"text-align: left\"\u003exsi:type\u003c/td\u003e\n\u003ctd style=\"text-align: left\"\u003e出力方法の種類を指定します\u003c/td\u003e\n\u003ctd style=\"text-align: left\"\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd style=\"text-align: left\"\u003ename\u003c/td\u003e\n\u003ctd style=\"text-align: left\"\u003e\n\u003ccode\u003erules\u003c/code\u003e で指定する \u003ccode\u003elogger\u003c/code\u003e の出力先の名前\u003c/td\u003e\n\u003ctd style=\"text-align: left\"\u003e\n\u003ccode\u003elogger\u003c/code\u003e で指定する \u003ccode\u003ewriteTo\u003c/code\u003e 属性の値を合わせてください\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd style=\"text-align: left\"\u003eencoding\u003c/td\u003e\n\u003ctd style=\"text-align: left\"\u003e出力ファイルのエンコード\u003c/td\u003e\n\u003ctd style=\"text-align: left\"\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd style=\"text-align: left\"\u003efileName\u003c/td\u003e\n\u003ctd style=\"text-align: left\"\u003e出力ファイルのパス\u003c/td\u003e\n\u003ctd style=\"text-align: left\"\u003e後述の出力先の設定値を参考にしてください\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd style=\"text-align: left\"\u003elayout\u003c/td\u003e\n\u003ctd style=\"text-align: left\"\u003e出力レイアウト\u003c/td\u003e\n\u003ctd style=\"text-align: left\"\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\n\u003cp\u003e各プラットフォームでログの出力先の設定値は以下を参考にしてください。\u003c/p\u003e\n\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth style=\"text-align: left\"\u003ePlatform\u003c/th\u003e\n\u003cth style=\"text-align: left\"\u003efileName 属性の設定値（例）\u003c/th\u003e\n\u003cth style=\"text-align: left\"\u003e説明\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd style=\"text-align: left\"\u003eAndroid\u003c/td\u003e\n\u003ctd style=\"text-align: left\"\u003e/data/data/NLogSample.Droid/logs/nlog-sample.log\u003c/td\u003e\n\u003ctd style=\"text-align: left\"\u003e/data/data/[パッケージ名]/[ログファイル名]\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd style=\"text-align: left\"\u003eiOS\u003c/td\u003e\n\u003ctd style=\"text-align: left\"\u003e${specialfolder:folder=MyDocuments}/../Library/nlog-sample.log\u003c/td\u003e\n\u003ctd style=\"text-align: left\"\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\n\u003cp\u003e\u003ccode\u003elogger\u003c/code\u003e 要素の設定例を示します。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"xml\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eNLog.config\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e  \u003cspan class=\"nt\"\u003e\u0026lt;rules\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;logger\u003c/span\u003e \u003cspan class=\"na\"\u003ename=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"*\"\u003c/span\u003e \u003cspan class=\"na\"\u003eminlevel=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Debug\"\u003c/span\u003e \u003cspan class=\"na\"\u003ewriteTo=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"logfile\"\u003c/span\u003e \u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"nt\"\u003e\u0026lt;/rules\u0026gt;\u003c/span\u003e \n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth style=\"text-align: left\"\u003e属性\u003c/th\u003e\n\u003cth style=\"text-align: left\"\u003e概要\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd style=\"text-align: left\"\u003ename\u003c/td\u003e\n\u003ctd style=\"text-align: left\"\u003elogger の名前を指定します\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd style=\"text-align: left\"\u003eminlevel\u003c/td\u003e\n\u003ctd style=\"text-align: left\"\u003e出力レベルの最低値を指定します\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd style=\"text-align: left\"\u003ewriteTo\u003c/td\u003e\n\u003ctd style=\"text-align: left\"\u003e出力先設定の名前を指定します\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"17-動作確認\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#17-%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e1.7 動作確認\u003c/h2\u003e\n\n\u003cp\u003eAndroid の実機にサンプルをデプロイして確認した結果を以下に示します。\u003cbr\u003e\nlogger の minlevel で Debug レベルを指定しているため、 Trace レベルのログが出力されていないことがわかります。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/77ce1dda3ef047a142bcffda6fc9c4501e9605c7/68747470733a2f2f676973742e67697468756275736572636f6e74656e742e636f6d2f746166756a692f65363335323235656261353864663139326266633566323066663333333966662f7261772f343532336534366162396231323063666239353835613535633164323261633436383963363363612f526573756c742d416e64726f69642e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fgist.githubusercontent.com%2Ftafuji%2Fe635225eba58df192bfc5f20ff3339ff%2Fraw%2F4523e46ab9b120cfb9585a55c1d22ac4689c63ca%2FResult-Android.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=7615f81b0893376811b17e5dcb272f4a\" alt=\"Android-Reuslt\" data-canonical-src=\"https://gist.githubusercontent.com/tafuji/e635225eba58df192bfc5f20ff3339ff/raw/4523e46ab9b120cfb9585a55c1d22ac4689c63ca/Result-Android.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fgist.githubusercontent.com%2Ftafuji%2Fe635225eba58df192bfc5f20ff3339ff%2Fraw%2F4523e46ab9b120cfb9585a55c1d22ac4689c63ca%2FResult-Android.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=fa8e98223edb5768da6f645f2a8953e9 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"2-ログ出力の調整\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#2-%E3%83%AD%E3%82%B0%E5%87%BA%E5%8A%9B%E3%81%AE%E8%AA%BF%E6%95%B4\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e2. ログ出力の調整\u003c/h1\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"21-出力レベルの切り替え\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#21-%E5%87%BA%E5%8A%9B%E3%83%AC%E3%83%99%E3%83%AB%E3%81%AE%E5%88%87%E3%82%8A%E6%9B%BF%E3%81%88\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e2.1 出力レベルの切り替え\u003c/h2\u003e\n\n\u003cp\u003e出力レベルは、\u003ccode\u003e\u0026lt;rules\u0026gt;\u003c/code\u003e セクションに定義した \u003ccode\u003e\u0026lt;logger\u0026gt;\u003c/code\u003e 要素の \u003ccode\u003eminlevel\u003c/code\u003e の値を変更することで切り替えることができます。\u003cbr\u003e\n出力レベルは、降順で以下の通りです。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eFatal\u003c/li\u003e\n\u003cli\u003eError\u003c/li\u003e\n\u003cli\u003eWarn\u003c/li\u003e\n\u003cli\u003eInfo\u003c/li\u003e\n\u003cli\u003eDebug\u003c/li\u003e\n\u003cli\u003eTrace\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e\u003ccode\u003eminlevel\u003c/code\u003e の値を ”Info” に変更すると Debug, Trace レベルのログは出力されなくなります。また、\"Off\" にするとログ出力は行われなくなります。必要に応じて出力レベルを指定してください。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/5fe60441808a0310c04bcb98d0080444b0594ae2/68747470733a2f2f676973742e67697468756275736572636f6e74656e742e636f6d2f746166756a692f65363335323235656261353864663139326266633566323066663333333966662f7261772f633338366166343232396265306135343036326430623562346165303733396330313165346534632f54726163654c6576656c2d526573756c742d416e64726f69642e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fgist.githubusercontent.com%2Ftafuji%2Fe635225eba58df192bfc5f20ff3339ff%2Fraw%2Fc386af4229be0a54062d0b5b4ae0739c011e4e4c%2FTraceLevel-Result-Android.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=dcf6211007b2ba8135dc9cf6719a628e\" alt=\"minlevel-Info\" data-canonical-src=\"https://gist.githubusercontent.com/tafuji/e635225eba58df192bfc5f20ff3339ff/raw/c386af4229be0a54062d0b5b4ae0739c011e4e4c/TraceLevel-Result-Android.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fgist.githubusercontent.com%2Ftafuji%2Fe635225eba58df192bfc5f20ff3339ff%2Fraw%2Fc386af4229be0a54062d0b5b4ae0739c011e4e4c%2FTraceLevel-Result-Android.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=fec4941d461328028090ed3b7fb22814 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"22-出力項目のカスタマイズ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#22-%E5%87%BA%E5%8A%9B%E9%A0%85%E7%9B%AE%E3%81%AE%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%9E%E3%82%A4%E3%82%BA\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e2.2 出力項目のカスタマイズ\u003c/h2\u003e\n\n\u003cp\u003eログ解析時に必要となる典型的な項目（プロセス ID など）を自動的に出力することができます。\u003cbr\u003e\n\u003ccode\u003e\u0026lt;target\u0026gt;\u003c/code\u003e セクションの \u003ccode\u003elayout\u003c/code\u003e 属性を削除して、子要素に \u003ccode\u003e\u0026lt;layout\u0026gt;\u003c/code\u003e タグを追加、子要素の \u003ccode\u003e\u0026lt;column\u0026gt;\u003c/code\u003e タグで出力項目を設定します。\u003cbr\u003e\nここでは、CSV ファイルにログを出力するための設定値の例を示します。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"xml\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eNLog.config\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"nt\"\u003e\u0026lt;target\u003c/span\u003e \u003cspan class=\"na\"\u003ename=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"logfile\"\u003c/span\u003e\n        \u003cspan class=\"na\"\u003exsi:type=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"File\"\u003c/span\u003e\n        \u003cspan class=\"na\"\u003efileName=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"/data/data/NLogSample.Droid/logs/nlog-sample.csv\"\u003c/span\u003e\n        \u003cspan class=\"na\"\u003eencoding=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"shift_jis\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e\n       \u003cspan class=\"nt\"\u003e\u0026lt;layout\u003c/span\u003e \u003cspan class=\"na\"\u003exsi:type=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"CSVLayout\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e\n         \u003cspan class=\"nt\"\u003e\u0026lt;quoting\u0026gt;\u003c/span\u003eAll\u003cspan class=\"nt\"\u003e\u0026lt;/quoting\u0026gt;\u003c/span\u003e\n         \u003cspan class=\"nt\"\u003e\u0026lt;withHeader\u0026gt;\u003c/span\u003etrue\u003cspan class=\"nt\"\u003e\u0026lt;/withHeader\u0026gt;\u003c/span\u003e\n         \u003cspan class=\"nt\"\u003e\u0026lt;delimiter\u0026gt;\u003c/span\u003eComma\u003cspan class=\"nt\"\u003e\u0026lt;/delimiter\u0026gt;\u003c/span\u003e\n         \u003cspan class=\"nt\"\u003e\u0026lt;column\u003c/span\u003e \u003cspan class=\"na\"\u003ename=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"time\"\u003c/span\u003e \u003cspan class=\"na\"\u003elayout=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"${longdate}\"\u003c/span\u003e \u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n         \u003cspan class=\"nt\"\u003e\u0026lt;column\u003c/span\u003e \u003cspan class=\"na\"\u003ename=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"logger\"\u003c/span\u003e \u003cspan class=\"na\"\u003elayout=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"${logger}\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n         \u003cspan class=\"nt\"\u003e\u0026lt;column\u003c/span\u003e \u003cspan class=\"na\"\u003ename=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"level\"\u003c/span\u003e \u003cspan class=\"na\"\u003elayout=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"${level}\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n         \u003cspan class=\"nt\"\u003e\u0026lt;column\u003c/span\u003e \u003cspan class=\"na\"\u003ename=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"machinename\"\u003c/span\u003e \u003cspan class=\"na\"\u003elayout=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"${machinename}\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n          \u003cspan class=\"nt\"\u003e\u0026lt;column\u003c/span\u003e \u003cspan class=\"na\"\u003ename=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"windows-identity\"\u003c/span\u003e \u003cspan class=\"na\"\u003elayout=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"${windows-identity}\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n          \u003cspan class=\"nt\"\u003e\u0026lt;column\u003c/span\u003e \u003cspan class=\"na\"\u003ename=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"appdomain\"\u003c/span\u003e \u003cspan class=\"na\"\u003elayout=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"${appdomain}\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n          \u003cspan class=\"nt\"\u003e\u0026lt;column\u003c/span\u003e \u003cspan class=\"na\"\u003ename=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"processid\"\u003c/span\u003e \u003cspan class=\"na\"\u003elayout=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"${processid}\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n          \u003cspan class=\"nt\"\u003e\u0026lt;column\u003c/span\u003e \u003cspan class=\"na\"\u003ename=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"processname\"\u003c/span\u003e \u003cspan class=\"na\"\u003elayout=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"${processname}\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n          \u003cspan class=\"nt\"\u003e\u0026lt;column\u003c/span\u003e \u003cspan class=\"na\"\u003ename=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"threadid\"\u003c/span\u003e \u003cspan class=\"na\"\u003elayout=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"${threadid}\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n          \u003cspan class=\"nt\"\u003e\u0026lt;column\u003c/span\u003e \u003cspan class=\"na\"\u003ename=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"message\"\u003c/span\u003e \u003cspan class=\"na\"\u003elayout=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"${message}\"\u003c/span\u003e \u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n          \u003cspan class=\"nt\"\u003e\u0026lt;column\u003c/span\u003e \u003cspan class=\"na\"\u003ename=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"stacktrace\"\u003c/span\u003e \u003cspan class=\"na\"\u003elayout=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"${exception:format=Type,Message,StackTrace,Data:maxInnerExceptionLevel=5}\"\u003c/span\u003e \u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"nt\"\u003e\u0026lt;/layout\u0026gt;\u003c/span\u003e\n\u003cspan class=\"nt\"\u003e\u0026lt;/target\u0026gt;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003eAndroid の実機に配置したサンプルで動作確認を行うと、以下のように出力されました。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/343be1f882a4729d33f662eba91deb4acc4ee493/68747470733a2f2f676973742e67697468756275736572636f6e74656e742e636f6d2f746166756a692f65363335323235656261353864663139326266633566323066663333333966662f7261772f616239343036383962663662303834366332333937643031653737353233666661313063376362632f437573746f6d697a652d4c61796f75742e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fgist.githubusercontent.com%2Ftafuji%2Fe635225eba58df192bfc5f20ff3339ff%2Fraw%2Fab940689bf6b0846c2397d01e77523ffa10c7cbc%2FCustomize-Layout.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=eb72f6dc48c573e05f0e00c5aac88f19\" alt=\"Customize-Layout\" data-canonical-src=\"https://gist.githubusercontent.com/tafuji/e635225eba58df192bfc5f20ff3339ff/raw/ab940689bf6b0846c2397d01e77523ffa10c7cbc/Customize-Layout.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fgist.githubusercontent.com%2Ftafuji%2Fe635225eba58df192bfc5f20ff3339ff%2Fraw%2Fab940689bf6b0846c2397d01e77523ffa10c7cbc%2FCustomize-Layout.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=0f4ab3893df9135edfb5dc9c1148c983 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eレイアウト、既定の出力項目の詳細については以下を参考にしてください。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/nlog/nlog/wiki/Layouts\" rel=\"nofollow noopener\" target=\"_blank\"\u003eLayouts\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/nlog/nlog/wiki/Layout-Renderers\" rel=\"nofollow noopener\" target=\"_blank\"\u003eLayout Renderers\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"23-ログファイルの退避\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#23-%E3%83%AD%E3%82%B0%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AE%E9%80%80%E9%81%BF\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e2.3 ログファイルの退避\u003c/h2\u003e\n\n\u003cp\u003e一つのファイルにログを出力し続けるとファイルサイズが肥大化してしまいますが、NLog では、適切なタイミングで、過去のログを別のファイルに退避することができます。ファイルローリングの設定は、\u003ccode\u003e\u0026lt;target\u0026gt;\u003c/code\u003e 要素の属性値で設定することができます。\u003cbr\u003e\n一定時間経過するとファイルを退避したい場合の設定項目を以下に示します。\u003c/p\u003e\n\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth style=\"text-align: left\"\u003e属性\u003c/th\u003e\n\u003cth style=\"text-align: left\"\u003e概要\u003c/th\u003e\n\u003cth style=\"text-align: left\"\u003e設定例\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd style=\"text-align: left\"\u003earchiveFileName\u003c/td\u003e\n\u003ctd style=\"text-align: left\"\u003e退避先のファイル名の形式\u003c/td\u003e\n\u003ctd style=\"text-align: left\"\u003e/data/data/NLogSample.Droid/logs/archives/nlog-sample-{#}.csv\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd style=\"text-align: left\"\u003earchiveNumbering\u003c/td\u003e\n\u003ctd style=\"text-align: left\"\u003e退避の方法\u003c/td\u003e\n\u003ctd style=\"text-align: left\"\u003eDate\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd style=\"text-align: left\"\u003earchiveEvery\u003c/td\u003e\n\u003ctd style=\"text-align: left\"\u003e退避する時間間隔\u003c/td\u003e\n\u003ctd style=\"text-align: left\"\u003eDay, Minute 等\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd style=\"text-align: left\"\u003earchiveDateFormat\u003c/td\u003e\n\u003ctd style=\"text-align: left\"\u003eファイル名に付与する日付のフォーマット\u003c/td\u003e\n\u003ctd style=\"text-align: left\"\u003eyyyy-MM-dd-HH-mm\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd style=\"text-align: left\"\u003emaxArchiveFiles\u003c/td\u003e\n\u003ctd style=\"text-align: left\"\u003e退避するファイル数の最大値\u003c/td\u003e\n\u003ctd style=\"text-align: left\"\u003e５\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\n\u003cp\u003e1分経過するとファイルの退避を行い、過去五世代まで archives ディレクトリに保存する場合は、以下のような設定になります。ファイル名には、[yyyy-MM-dd-HH-mm] の形式で日付時刻が付与されます。\u003cbr\u003e\n（動作確認用のサンプルのため、退避の時間間隔を1分としています。）\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"xml\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eNLog.config\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"nt\"\u003e\u0026lt;target\u003c/span\u003e \u003cspan class=\"na\"\u003ename=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"logfile\"\u003c/span\u003e\n        \u003cspan class=\"na\"\u003exsi:type=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"File\"\u003c/span\u003e\n        \u003cspan class=\"na\"\u003efileName=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"/data/data/NLogSample.Droid/logs/nlog-sample.csv\"\u003c/span\u003e\n        \u003cspan class=\"na\"\u003earchiveFileName=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"/data/data/NLogSample.Droid/logs/archives/nlog-sample-{#}.csv\"\u003c/span\u003e\n        \u003cspan class=\"na\"\u003earchiveEvery=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Minute\"\u003c/span\u003e\n        \u003cspan class=\"na\"\u003earchiveNumbering=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Date\"\u003c/span\u003e\n        \u003cspan class=\"na\"\u003emaxArchiveFiles=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"5\"\u003c/span\u003e\n        \u003cspan class=\"na\"\u003earchiveDateFormat=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"yyyy-MM-dd-HH-mm\"\u003c/span\u003e\n        \u003cspan class=\"na\"\u003eencoding=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"shift_jis\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e\n       \u003cspan class=\"nt\"\u003e\u0026lt;layout\u003c/span\u003e \u003cspan class=\"na\"\u003exsi:type=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"CSVLayout\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e\n         \u003cspan class=\"nt\"\u003e\u0026lt;quoting\u0026gt;\u003c/span\u003eAll\u003cspan class=\"nt\"\u003e\u0026lt;/quoting\u0026gt;\u003c/span\u003e\n         \u003cspan class=\"nt\"\u003e\u0026lt;withHeader\u0026gt;\u003c/span\u003etrue\u003cspan class=\"nt\"\u003e\u0026lt;/withHeader\u0026gt;\u003c/span\u003e\n         \u003cspan class=\"nt\"\u003e\u0026lt;delimiter\u0026gt;\u003c/span\u003eComma\u003cspan class=\"nt\"\u003e\u0026lt;/delimiter\u0026gt;\u003c/span\u003e\n         \u003cspan class=\"nt\"\u003e\u0026lt;column\u003c/span\u003e \u003cspan class=\"na\"\u003ename=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"time\"\u003c/span\u003e \u003cspan class=\"na\"\u003elayout=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"${longdate}\"\u003c/span\u003e \u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n         \u003cspan class=\"nt\"\u003e\u0026lt;column\u003c/span\u003e \u003cspan class=\"na\"\u003ename=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"logger\"\u003c/span\u003e \u003cspan class=\"na\"\u003elayout=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"${logger}\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n         \u003cspan class=\"nt\"\u003e\u0026lt;column\u003c/span\u003e \u003cspan class=\"na\"\u003ename=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"level\"\u003c/span\u003e \u003cspan class=\"na\"\u003elayout=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"${level}\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n         \u003cspan class=\"nt\"\u003e\u0026lt;column\u003c/span\u003e \u003cspan class=\"na\"\u003ename=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"machinename\"\u003c/span\u003e \u003cspan class=\"na\"\u003elayout=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"${machinename}\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n          \u003cspan class=\"nt\"\u003e\u0026lt;column\u003c/span\u003e \u003cspan class=\"na\"\u003ename=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"windows-identity\"\u003c/span\u003e \u003cspan class=\"na\"\u003elayout=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"${windows-identity}\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n          \u003cspan class=\"nt\"\u003e\u0026lt;column\u003c/span\u003e \u003cspan class=\"na\"\u003ename=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"appdomain\"\u003c/span\u003e \u003cspan class=\"na\"\u003elayout=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"${appdomain}\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n          \u003cspan class=\"nt\"\u003e\u0026lt;column\u003c/span\u003e \u003cspan class=\"na\"\u003ename=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"processid\"\u003c/span\u003e \u003cspan class=\"na\"\u003elayout=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"${processid}\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n          \u003cspan class=\"nt\"\u003e\u0026lt;column\u003c/span\u003e \u003cspan class=\"na\"\u003ename=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"processname\"\u003c/span\u003e \u003cspan class=\"na\"\u003elayout=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"${processname}\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n          \u003cspan class=\"nt\"\u003e\u0026lt;column\u003c/span\u003e \u003cspan class=\"na\"\u003ename=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"threadid\"\u003c/span\u003e \u003cspan class=\"na\"\u003elayout=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"${threadid}\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n          \u003cspan class=\"nt\"\u003e\u0026lt;column\u003c/span\u003e \u003cspan class=\"na\"\u003ename=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"message\"\u003c/span\u003e \u003cspan class=\"na\"\u003elayout=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"${message}\"\u003c/span\u003e \u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n          \u003cspan class=\"nt\"\u003e\u0026lt;column\u003c/span\u003e \u003cspan class=\"na\"\u003ename=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"stacktrace\"\u003c/span\u003e \u003cspan class=\"na\"\u003elayout=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"${exception:format=Type,Message,StackTrace,Data:maxInnerExceptionLevel=5}\"\u003c/span\u003e \u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"nt\"\u003e\u0026lt;/layout\u0026gt;\u003c/span\u003e\n\u003cspan class=\"nt\"\u003e\u0026lt;/target\u0026gt;\u003c/span\u003e\n\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003eAndroid の実機でサンプルを動作させると、1分間隔でログファイルが退避されています。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/c7df47e32fa58aa4e23943596425f7261c670740/68747470733a2f2f676973742e67697468756275736572636f6e74656e742e636f6d2f746166756a692f65363335323235656261353864663139326266633566323066663333333966662f7261772f326564386339613336363433336161393065373161363439373362306137393765366566633162642f526f6c6c696e672e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fgist.githubusercontent.com%2Ftafuji%2Fe635225eba58df192bfc5f20ff3339ff%2Fraw%2F2ed8c9a366433aa90e71a64973b0a797e6efc1bd%2FRolling.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=62a43582fb80f7dbca69f6d0f71ef12f\" alt=\"Rolling\" data-canonical-src=\"https://gist.githubusercontent.com/tafuji/e635225eba58df192bfc5f20ff3339ff/raw/2ed8c9a366433aa90e71a64973b0a797e6efc1bd/Rolling.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fgist.githubusercontent.com%2Ftafuji%2Fe635225eba58df192bfc5f20ff3339ff%2Fraw%2F2ed8c9a366433aa90e71a64973b0a797e6efc1bd%2FRolling.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=4c3d80b4dd5a5b4e1f478fdf1d5c10da 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e保存数の最大値を超える場合は、一番古いログファイルが削除されていることがわかります。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/909360078dbd8cbf975f70d8052a56e41fd470b9/68747470733a2f2f676973742e67697468756275736572636f6e74656e742e636f6d2f746166756a692f65363335323235656261353864663139326266633566323066663333333966662f7261772f326564386339613336363433336161393065373161363439373362306137393765366566633162642f526f6c6c696e672d526573756c742e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fgist.githubusercontent.com%2Ftafuji%2Fe635225eba58df192bfc5f20ff3339ff%2Fraw%2F2ed8c9a366433aa90e71a64973b0a797e6efc1bd%2FRolling-Result.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=6fdec008d8c132baba637eba42bfd174\" alt=\"Rolling-Result\" data-canonical-src=\"https://gist.githubusercontent.com/tafuji/e635225eba58df192bfc5f20ff3339ff/raw/2ed8c9a366433aa90e71a64973b0a797e6efc1bd/Rolling-Result.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fgist.githubusercontent.com%2Ftafuji%2Fe635225eba58df192bfc5f20ff3339ff%2Fraw%2F2ed8c9a366433aa90e71a64973b0a797e6efc1bd%2FRolling-Result.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=7bfa77799ae28cf680c79eb25bf72ecb 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eログファイル退避のその他の設定方法に関しては、以下を参照してください。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/nlog/NLog/wiki/File-target#archival-options\" rel=\"nofollow noopener\" target=\"_blank\"\u003eArchival Options\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"3-まとめ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#3-%E3%81%BE%E3%81%A8%E3%82%81\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e3. まとめ\u003c/h1\u003e\n\n\u003cp\u003e手順のまとめを以下に箇条書きで記載します。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eNative プロジェクト(Android, iOS)に Nlog をインストールする\u003c/li\u003e\n\u003cli\u003eNLog で利用するログ出力処理のインターフェースを Xamarin.Forms プロジェクトに定義する\u003c/li\u003e\n\u003cli\u003e共有プロジェクトで、Xamarin.Forms で定義したインタフェースを実装する\u003c/li\u003e\n\u003cli\u003eNative プロジェクトで共有プロジェクトを参照する\u003c/li\u003e\n\u003cli\u003eXamarin.Forms のプロジェクトでは、インタフェース経由でログ出力する\n\n\u003cul\u003e\n\u003cli\u003eDependencyService, Unity (DI コンテナ) 等を利用する\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eNLog の構成ファイル（NLog.config）の配置場所\n\n\u003cul\u003e\n\u003cli\u003eAndroid は Asset フォルダ直下\u003c/li\u003e\n\u003cli\u003eiOS はプロジェクト直下で可\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eお好みで構成ファイルの設定を行う\u003c/li\u003e\n\u003cli\u003eその他の詳細設定は本家のサイトを参考にする\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"http://nlog-project.org/\" rel=\"nofollow noopener\" target=\"_blank\"\u003eNLog\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"https://github.com/NLog/NLog/wiki/Tutorial\" rel=\"nofollow noopener\" target=\"_blank\"\u003eNLog Tutorial\u003c/a\u003e\n\n\u003cul\u003e\n\u003cli\u003eNLog 利用方法の全般的なトピックはここが参考になります\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"https://github.com/nlog/NLog/wiki/File-target\" rel=\"nofollow noopener\" target=\"_blank\"\u003eFile target\u003c/a\u003e\n\n\u003cul\u003e\n\u003cli\u003eファイル出力に関する \u003ccode\u003e\u0026lt;target\u0026gt;\u003c/code\u003e の設定の詳細は、ここを参照してください\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"https://github.com/nlog/nlog/wiki/Layouts\" rel=\"nofollow noopener\" target=\"_blank\"\u003eLayouts\u003c/a\u003e\n\n\u003cul\u003e\n\u003cli\u003e出力レイアウトに関する設定の詳細は、ここに記載されています\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"https://github.com/nlog/nlog/wiki/Layout-Renderers\" rel=\"nofollow noopener\" target=\"_blank\"\u003eLayout Renderers\u003c/a\u003e\n\n\u003cul\u003e\n\u003cli\u003e出力項目のカスタマイズを行いたい場合はここを参照してください\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"https://github.com/nlog/NLog/wiki/File-target#archival-options\" rel=\"nofollow noopener\" target=\"_blank\"\u003eArchival Options\u003c/a\u003e\n\n\u003cul\u003e\n\u003cli\u003eファイルのローリング設定の詳細はここを参照してください\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"さいごに\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%95%E3%81%84%E3%81%94%E3%81%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eさいごに\u003c/h1\u003e\n\n\u003cp\u003eこの記事では、デバッグログを出力するために NLog の利用手順について記載しました。\u003cbr\u003e\nNLog 以外にも \u003ca href=\"http://qiita.com/amay077\"\u003e@amay077\u003c/a\u003e さんの \u003ca href=\"http://qiita.com/amay077/items/5df0cb5c37d0598ce90f\" id=\"reference-2d8b6236da8609e7ab5b\"\u003e「Xamarin.Forms をガチで使う時のプロジェクト構成(2016冬Ver)」\u003c/a\u003e で紹介されている \u003ca href=\"https://www.nuget.org/packages/MetroLog/\" rel=\"nofollow noopener\" target=\"_blank\"\u003eMetroLog\u003c/a\u003e というライブラリもあります。\u003cbr\u003e\nどちらのライブラリも System.Diagnostics.Debug クラスを利用するよりも作業効率が上がると思いますので、お好みで選択していただければと思います。\u003c/p\u003e\n\n\u003cp\u003eこの記事が、NLog を利用される方に少しでも役立てば、非常にうれしく思います。\u003c/p\u003e\n","createdAt":"2016-12-22T15:00:34Z","elapsedYearsFromLastModifiedAt":2,"encryptedId":"+q8gHHZZSq/3QYQ30sa144e29FGyySG8--Gc0k+e/pXDAF1lLA--HAQi2CaisYd7NdZBdQ8DcA==","isBanned":false,"isDeprecated":true,"isDestroyableByViewer":false,"isEditRequestReadableByViewer":true,"isEditRequestSendableByViewer":true,"isLikableByViewer":true,"isLikedByViewer":false,"isPublic":true,"isSlide":false,"isStockableByViewer":true,"isStockedByViewer":false,"isSubscribableByViewer":false,"isSubscribedByViewer":false,"isUpdatableByViewer":false,"isUpdated":true,"lastModifiedAt":"2018-09-13T01:14:15Z","likesCount":18,"linkUrl":"https://qiita.com/tafuji/items/1a40866ea469d92c2d24","organization":null,"originalId":453908,"stockedCount":13,"title":"NLog を使って Xamarin.Forms からログ出力する方法","toc":"\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#0-%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB\"\u003e0. はじめに\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#1-%E3%83%AD%E3%82%B0%E5%87%BA%E5%8A%9B%E3%81%BE%E3%81%A7%E3%81%AE%E6%89%8B%E9%A0%86\"\u003e1. ログ出力までの手順\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#11-%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E4%BD%9C%E6%88%90\"\u003e1.1 プロジェクトの作成\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#12-nuget-%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB\"\u003e1.2 NuGet パッケージのインストール\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#13-%E3%83%AD%E3%82%B0%E5%87%BA%E5%8A%9B%E3%81%AE%E3%81%9F%E3%82%81%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%BF%E3%83%BC%E3%83%95%E3%82%A7%E3%83%BC%E3%82%B9%E3%82%92%E4%BD%9C%E6%88%90\"\u003e1.3 ログ出力のためのインターフェースを作成\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#14-%E5%AE%9F%E8%A3%85%E3%82%AF%E3%83%A9%E3%82%B9%E3%81%AE%E4%BD%9C%E6%88%90\"\u003e1.4 実装クラスの作成\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#15-%E3%83%AD%E3%82%B0%E5%87%BA%E5%8A%9B%E5%87%A6%E7%90%86%E3%81%AE%E5%AE%9F%E8%A3%85\"\u003e1.5 ログ出力処理の実装\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#16-%E6%A7%8B%E6%88%90%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AE%E8%A8%AD%E5%AE%9A\"\u003e1.6 構成ファイルの設定\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#17-%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D\"\u003e1.7 動作確認\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#2-%E3%83%AD%E3%82%B0%E5%87%BA%E5%8A%9B%E3%81%AE%E8%AA%BF%E6%95%B4\"\u003e2. ログ出力の調整\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#21-%E5%87%BA%E5%8A%9B%E3%83%AC%E3%83%99%E3%83%AB%E3%81%AE%E5%88%87%E3%82%8A%E6%9B%BF%E3%81%88\"\u003e2.1 出力レベルの切り替え\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#22-%E5%87%BA%E5%8A%9B%E9%A0%85%E7%9B%AE%E3%81%AE%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%9E%E3%82%A4%E3%82%BA\"\u003e2.2 出力項目のカスタマイズ\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#23-%E3%83%AD%E3%82%B0%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AE%E9%80%80%E9%81%BF\"\u003e2.3 ログファイルの退避\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#3-%E3%81%BE%E3%81%A8%E3%82%81\"\u003e3. まとめ\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%81%95%E3%81%84%E3%81%94%E3%81%AB\"\u003eさいごに\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n","totalPv":9891,"uuid":"1a40866ea469d92c2d24","banReason":null,"adventCalendarItem":{"day":23,"calendar":{"name":"Xamarin(その2)","urlName":"xamarin2","year":2016,"organization":null}},"author":{"encryptedId":"tIiLsuPi6oiTvh8LJFxJAtiUusTN--yDcUXynaNLuzGhqr--WWbi5X/OxNOUAdUBbuJlUw==","originalId":145932,"description":"ネコ好きのエンジニア。\r\nここに投稿される内容は、あくまで個人の見解であり、所属する組織・団体の公式見解ではありません。","facebookUrl":null,"githubUrl":"https://github.com/tafuji","isBlockingViewer":false,"isFollowableByViewer":true,"isFollowedByViewer":false,"isTweetWebNotificationReceivable":true,"linkedinUrl":null,"name":"Takeshi Fujimoto","profileImageUrl":"https://qiita-image-store.s3.amazonaws.com/0/145932/profile-images/1482106610","profileImageUrlW48":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F145932%2Fprofile-images%2F1482106610?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=48\u0026s=4719059756494f57968dfae254aef357","profileImageUrlW75":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F145932%2Fprofile-images%2F1482106610?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=a949bbe8f5991f67eeedf5457921c265","urlName":"tafuji","websiteUrl":"","twitterUrl":"https://twitter.com/tafuji1223","twitterUrlName":"tafuji1223","revealedOrganizations":{"edges":[]}},"tags":[{"name":"C#","urlName":"csharp"},{"name":"Xamarin","urlName":"xamarin"},{"name":"Xamarin.Forms","urlName":"xamarin.forms"}],"followingLikers":{"edges":[]},"comments":{"totalCount":0}},"comments":[],"client":null,"ads_event_emitter":null}}</script>
