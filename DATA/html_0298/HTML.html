<!DOCTYPE html><html><head><meta charset="utf-8" /><title>【Unity】複雑な形のボタンの当たり判定をしっかり作れるようにする - Qiita</title><meta content="width=device-width,initial-scale=1,shrink-to-fit=no,viewport-fit=cover" name="viewport" /><meta content="#55c500" name="theme-color" /><meta content="XWpkTG32-_C4joZoJ_UsmDUi-zaH-hcrjF6ZC_FoFbk" name="google-site-verification" /><meta content="telephone=no" name="format-detection" /><link rel="canonical" href="https://qiita.com/MATU0055/items/2e1a306496d76bf8bfbe" /><link href="/manifest.json" rel="manifest" /><link href="/opensearch.xml" rel="search" title="Qiita" type="application/opensearchdescription+xml" /><link as="script" href="https://www.googletagservices.com/tag/js/gpt.js" rel="preload" /><link href="https://securepubads.g.doubleclick.net" rel="preconnect" /><script async="" src="https://www.googletagservices.com/tag/js/gpt.js"></script><meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="9iuNQmzeBcgR+WmY7563sul5mGA7er5ac8wldDgDYTHwNDbdwYIUxHn9A3TBHd5gPtzl3SGsnLtJL/4yn8pKCg==" /><link rel="shortcut icon" type="image/x-icon" href="https://cdn.qiita.com/assets/favicons/public/production-c620d3e403342b1022967ba5e3db1aaa.ico" /><link rel="apple-touch-icon" type="image/png" href="https://cdn.qiita.com/assets/favicons/public/apple-touch-icon-ec5ba42a24ae923f16825592efdc356f.png" /><link rel="stylesheet" media="all" href="https://cdn.qiita.com/assets/public/article-2eaa7dbedc42a8ea65c722cda46d0ebb.min.css" /><script src="https://cdn.qiita.com/assets/public/v3-article-bundle-63de2d91fef827269d3f6b958db2335b.min.js" defer="defer"></script><meta name="twitter:card" content="summary_large_image"><meta content="@Qiita" name="twitter:site" /><meta content="@MATU0055" name="twitter:creator" /><meta property="og:type" content="article"><meta property="og:title" content="【Unity】複雑な形のボタンの当たり判定をしっかり作れるようにする - Qiita"><meta property="og:image" content="https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0&amp;w=1200&amp;mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND00NENRVlc1cGRIbmpnSkhvcElmcG01SGpnYXJsdmFMamdhN2pnNXpqZ3Jfamc3UGpnYTdsdlpQamdaX2pnb3JsaUtUbHJwcmpncExqZ1pmamdhUGpnWXZqZ29ya3Zaempnb3pqZ292amdvampnWWJqZ2F2amdabmpnb3MmdHh0LWNvbG9yPSUyMzMzMyZ0eHQtZm9udD1IaXJhZ2lubyUyMFNhbnMlMjBXNiZ0eHQtc2l6ZT01NCZ0eHQtY2xpcD1lbGxpcHNpcyZ0eHQtYWxpZ249Y2VudGVyJTJDbWlkZGxlJnM9ZjQzZmRmYzU4YTA0NDQzNzRlYjQzOTgzNWY2YTczMzk&amp;mark-align=center%2Cmiddle&amp;blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RRTFCVkZVd01EVTEmdHh0LWNvbG9yPSUyMzMzMyZ0eHQtZm9udD1IaXJhZ2lubyUyMFNhbnMlMjBXNiZ0eHQtc2l6ZT00NSZ0eHQtYWxpZ249cmlnaHQlMkNib3R0b20mcz05OTU2YmIxNmQ4ZTllMTczNDNmNGFjYjliNWQyY2YwYQ&amp;blend-align=center%2Cmiddle&amp;blend-mode=normal&amp;s=0e5a2f3a907c04b08a689b6894d8e06c"><meta property="og:description" content="

初めに

本記事はLife Is Tech ! #2 Advent Calendar 2020 11日目の記事です！
ぜひ最後まで見ていってください！


導入

この記事を読んでいる皆さんはUnityで様々なゲームを作っていると..."><meta content="https://qiita.com/MATU0055/items/2e1a306496d76bf8bfbe" property="og:url" /><meta content="Qiita" property="og:site_name" /><meta content="564524038" property="fb:admins" /><meta content="C#,Unity,Unty" name="keywords" /><script>!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window, document,'script',
'https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '668972150489891');
fbq('track', 'PageView');</script><style data-emotion-css="17jxvjw 11t2ec1 1dvr2p8 18lkoru 1g4cku8 1iupg5d ijvq0v 15cocm3 12rp90f 115f4t 1b8uj5v 79elbk 16hhh7b fcbn8c 1gj7nt 154zy0m yikrym 1jqivyb 1ode1bp le4d8r 1hbd3g7 helsa7 8qb8m4 2imjyh he5w1s 70qvj9 3ojehk 100alwu 1dtnjt5 10ougpm 1ay9vb9 m19uds cgzq40 1wa99t2 1l3zk9f 4czcte 1yzj1fm 1uv1qiv 109dbrr 5jpx49 mnxgyc 1vlpknv fsjkhv 1b17vb0 7i7f4d"}>.css-17jxvjw{display:grid;display:-ms-grid;grid-template-columns:80px minmax(0,1fr) 300px;-ms-grid-columns:80px minmax(0,1fr) 300px;grid-template-rows:minmax(270px,auto) 1fr;-ms-grid-rows:minmax(270px,auto) 1fr;max-width:1280px;margin-right:auto;margin-left:auto;padding-top:24px;padding-right:24px;padding-left:24px;}@media (max-width:1200px){.css-17jxvjw{padding-bottom:0;padding-left:0;padding-right:0;}}@media (max-width:992px){.css-17jxvjw{grid-template-columns:80px 452px 300px;-ms-grid-columns:80px 452px 300px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}}@media (max-width:770px){.css-17jxvjw{display:block;}}@media (max-width:480px){.css-17jxvjw{padding-top:0;}}.css-11t2ec1{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;z-index:5;position:-webkit-sticky;position:sticky;top:calc(56px + 24px + 16px + 32px - 16px);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:16px;width:80px;}.css-11t2ec1:after{content:'';display:table;}.css-11t2ec1:before{content:'';display:table;}@media (max-width:770px){.css-11t2ec1{display:none;}}.css-1dvr2p8{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-18lkoru{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;background-color:#FFFFFF;}.css-1g4cku8{display:inline-block;vertical-align:middle;height:20px;width:20px;fill:#55C500;}.css-1iupg5d{color:#55C500;cursor:pointer;font-size:14px;font-weight:bold;}.css-ijvq0v{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-15cocm3{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#FFFFFF;border:2px solid #6E6F70;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:2px 0px 0px;width:40px;}.css-12rp90f{display:inline-block;vertical-align:bottom;height:17.77777777777778px;width:16px;fill:#6E6F70;}.css-115f4t{color:#6E6F70;font-size:14px;font-weight:bold;}.css-1b8uj5v{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;margin-bottom:16px;padding:0;}.css-79elbk{position:relative;}.css-16hhh7b{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;padding:0;}.css-fcbn8c{display:none;bottom:initial;left:initial;right:initial;top:initial;left:100%;top:calc(-8px - (14px * 1.8) - 16px - 4px);}.css-1gj7nt{color:rgba(0,0,0,0.6);font-size:14px;font-weight:bold;line-height:1.8;padding:8px 16px;}.css-154zy0m{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.87);cursor:pointer;font-size:16px;font-weight:normal;line-height:1.8;padding:4px 16px;}.css-154zy0m:hover{-webkit-text-decoration:none;text-decoration:none;background-color:#F2F2F2;}.css-yikrym{width:20px;}.css-1jqivyb{color:rgba(0,0,0,0.6);font-size:13px;}.css-1ode1bp{background-color:rgba(0,0,0,0.12);height:1px;width:100%;margin:8px 0;}.css-le4d8r{display:inline-block;vertical-align:middle;height:13px;width:13px;fill:rgba(0,0,0,0.6);}.css-1hbd3g7{height:250px;}.css-helsa7{background-color:#FFFFFF;padding:32px;margin-bottom:24px;}@media (max-width:992px){.css-helsa7{margin:0 auto 40px;}}@media (max-width:480px){.css-helsa7{margin:0 0 40px;padding:32px 16px;}}.css-8qb8m4{margin-bottom:48px;}.css-2imjyh{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-he5w1s{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;width:100%;}@media (max-width:770px){.css-he5w1s{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}}.css-70qvj9{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.css-3ojehk{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;margin-right:4px;}.css-100alwu{display:inline-block;border-radius:50%;line-height:1;overflow:hidden;vertical-align:middle;}.css-1dtnjt5{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-10ougpm{color:rgba(0,0,0,0.87);font-size:14px;font-weight:600;line-height:1.8;margin-right:4px;text-wrap:break-word;word-break:break-all;}.css-1ay9vb9{margin-right:16px;}.css-m19uds{color:rgba(0,0,0,0.6);font-size:14px;line-height:1.8;}.css-cgzq40{color:rgba(0,0,0,0.87);font-size:32px;font-weight:bold;line-height:1.4;margin-top:8px;text-wrap:break-word;word-break:break-all;}.css-1wa99t2{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.6);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:8px;}.css-1l3zk9f{color:rgba(0,0,0,0.6);font-size:20px;margin-right:8px;}.css-4czcte{margin-right:4px;color:inherit;font-size:14px;line-height:1.8;}.css-4czcte:not(:last-child)::after{content:',';margin-right:4px;}.css-1yzj1fm{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:32px;}.css-1uv1qiv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-size:20px;height:32px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin-right:16px;outline:none;padding:0;width:32px;}.css-109dbrr{background-color:#F9F9F9;border-top:1px solid rgba(0,0,0,0.12);bottom:0;box-shadow:0px 1px 4px rgba(0,0,0,0.14);display:none;height:calc(env(safe-area-inset-bottom,0px) + 56px);-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding-bottom:env(safe-area-inset-bottom);position:-webkit-sticky;position:sticky;width:100%;z-index:2000;}@media (max-width:770px){.css-109dbrr{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}.css-5jpx49{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:space-evenly;-webkit-justify-content:space-evenly;-ms-flex-pack:space-evenly;justify-content:space-evenly;width:100%;}.css-mnxgyc{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1vlpknv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;margin-right:4px;background-color:#FFFFFF;}.css-fsjkhv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1b17vb0{color:#6E6F70;font-size:14px;font-weight:bold;margin-left:4px;}.css-7i7f4d{display:none;bottom:initial;left:initial;right:initial;top:initial;bottom:32px;right:0;}</style></head><body><div class="allWrapper"><div><div id="GlobalHeader-react-component-1ebd7ab6-7fd0-473d-b3c8-7af9c5cc55ae"><div class="st-Header"><div class="st-Header_container"><div class="st-Header_start"><a href="/" class="st-Header_logo"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 426.57 130"><circle cx="167.08" cy="21.4" r="12.28"></circle><path d="M250.81 29.66h23.48v18.9h-23.48z"></path><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z"></path><circle cx="216.33" cy="21.4" r="12.28"></circle></svg></a><div class="st-Header_communitySelector" tabindex="0"><span class="fa fa-caret-down"></span></div><div class="st-Header_dropdown"><div class="st-Header_dropdownHeading">Qiita Teams that are logged in</div><div class="st-Header_dropdownItemNote">You are not logged in to any team</div><hr class="st-Header_dropdownDivider st-Header_dropdownDivider-shrink"/><a href="https://teams-center.qiita.com/find_team" class="st-Header_dropdownItem"><span class="fa fa-fw fa-sign-in st-Header_dropdownItemIcon"></span><div>Log in to Qiita Team</div></a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Community</div><a href="/organizations" class="st-Header_dropdownItem">Organization</a><a href="/official-events/open" class="st-Header_dropdownItem">Event</a><a href="/advent-calendar" class="st-Header_dropdownItem">Advent Calendar</a><a href="https://qiitadon.com/" class="st-Header_dropdownItem" target="_blank">Qiitadon (β)</a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Service</div><a href="https://jobs.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Jobs</a><a href="https://zine.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Zine</a><a href="https://blog.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Blog</a></div><form class="st-Header_search" action="/search" method="get"><span class="fa fa-search st-Header_searchIcon"></span><input type="search" class="st-Header_searchInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form><form class="st-Header_searchModal" action="/search" method="get"><input type="text" class="st-Header_searchModalInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form></div><div class="st-Header_end"><div class="st-Header_searchButton"><span class="fa fa-search"></span></div><a class="st-Header_signupButton" href="/signup?redirect_to=%2FMATU0055%2Fitems%2F2e1a306496d76bf8bfbe">Signup</a><a class="st-Header_loginLink" href="/login?redirect_to=%2FMATU0055%2Fitems%2F2e1a306496d76bf8bfbe">Login</a></div><div class="st-Header_overlay"></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="GlobalHeader" data-dom-id="GlobalHeader-react-component-1ebd7ab6-7fd0-473d-b3c8-7af9c5cc55ae">{"unreadNotificationsCount":null,"realms":[{"humanName":"Qiita","isCurrentRealm":true,"isQiita":true,"isQiitaTeam":false,"loggedInUser":null,"teamId":null,"url":"https://qiita.com/"}],"teamFindUrl":"https://teams-center.qiita.com/find_team","isTeamOnlyUser":null,"currentUser":null}</script>
      
</div><div class="st-HeaderAlert st-HeaderAlert-warning"><div class="st-HeaderAlert_body"></div></div><script type="application/ld+json">{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"/","name":"Qiita"}},{"@type":"ListItem","position":2,"item":{"@id":"/tags/csharp","name":"C#"}}]}</script><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","datePublished":"2020-12-11T16:12:30.000+09:00","dateModified":"2020-12-11T16:12:30.000+09:00","headline":"【Unity】複雑な形のボタンの当たり判定をしっかり作れるようにする","image":"https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0\u0026w=1200\u0026mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND00NENRVlc1cGRIbmpnSkhvcElmcG01SGpnYXJsdmFMamdhN2pnNXpqZ3Jfamc3UGpnYTdsdlpQamdaX2pnb3JsaUtUbHJwcmpncExqZ1pmamdhUGpnWXZqZ29ya3Zaempnb3pqZ292amdvampnWWJqZ2F2amdabmpnb3MmdHh0LWNvbG9yPSUyMzMzMyZ0eHQtZm9udD1IaXJhZ2lubyUyMFNhbnMlMjBXNiZ0eHQtc2l6ZT01NCZ0eHQtY2xpcD1lbGxpcHNpcyZ0eHQtYWxpZ249Y2VudGVyJTJDbWlkZGxlJnM9ZjQzZmRmYzU4YTA0NDQzNzRlYjQzOTgzNWY2YTczMzk\u0026mark-align=center%2Cmiddle\u0026blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RRTFCVkZVd01EVTEmdHh0LWNvbG9yPSUyMzMzMyZ0eHQtZm9udD1IaXJhZ2lubyUyMFNhbnMlMjBXNiZ0eHQtc2l6ZT00NSZ0eHQtYWxpZ249cmlnaHQlMkNib3R0b20mcz05OTU2YmIxNmQ4ZTllMTczNDNmNGFjYjliNWQyY2YwYQ\u0026blend-align=center%2Cmiddle\u0026blend-mode=normal\u0026s=0e5a2f3a907c04b08a689b6894d8e06c","mainEntityOfPage":"https://qiita.com/MATU0055/items/2e1a306496d76bf8bfbe","author":{"@type":"Person","address":null,"email":null,"identifier":"MATU0055","name":"MATU0055","image":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F255633%2Fprofile-images%2F1607689123?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=74ec79305a1dfcb94d03f792632f5042","url":"https://qiita.com/MATU0055","description":null,"memberOf":[]},"publisher":{"@type":"Organization","name":"Qiita","logo":{"@type":"ImageObject","url":"//cdn.qiita.com/assets/public/qiita-logo-c39ded593afa388e2e1ba435b110554e.png"}}}</script><style type="text/css">.wb-CampaignLink {
  background-color: #333333;
  width: 100%;
}

.wb-CampaignLink_container {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  max-width: 1100px;
  margin: 0 auto;
  font-size: 13px;
  padding: 0.8em;
}
.wb-CampaignLink_container > a {
  color: #fff;
}

.wb-CampaignLink_container > a:hover {
  text-decoration: underline;
}</style><div class="wb-CampaignLink"><div class="wb-CampaignLink_container"><a target="_blank" id="header_text_message_1" href="https://increments.connpass.com/event/211948/">「AirPods Pro」を抽選でプレゼント！Qiita エンジニアフェスタ 2021 Online Meetupを9/9(木)に開催</a><a target="_blank" id="header_text_message_2" href="https://increments.connpass.com/event/211948/">詳しくはこちら</a></div><script>td.trackEvent(
  'front_events',
  {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"MATU0055","type":"items","id":"2e1a306496d76bf8bfbe"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Show","data":{"message":"「AirPods Pro」を抽選でプレゼント！Qiita エンジニアフェスタ 2021 Online Meetupを9/9(木)に開催","url":"https://increments.connpass.com/event/211948/","sub_message":"詳しくはこちら"}}
)</script><script>document.getElementById('header_text_message_1').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"MATU0055","type":"items","id":"2e1a306496d76bf8bfbe"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":0,"pos_id":"header_text_message_1","message":"「AirPods Pro」を抽選でプレゼント！Qiita エンジニアフェスタ 2021 Online Meetupを9/9(木)に開催","url":"https://increments.connpass.com/event/211948/","sub_message":"詳しくはこちら"}}
  )
})</script><script>document.getElementById('header_text_message_2').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"MATU0055","type":"items","id":"2e1a306496d76bf8bfbe"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":0,"pos_id":"header_text_message_2","message":"「AirPods Pro」を抽選でプレゼント！Qiita エンジニアフェスタ 2021 Online Meetupを9/9(木)に開催","url":"https://increments.connpass.com/event/211948/","sub_message":"詳しくはこちら"}}
  )
})</script></div><script type="application/json" id="js-react-on-rails-context">{"railsEnv":"production","inMailer":false,"i18nLocale":"en","i18nDefaultLocale":"en","href":"https://qiita.com/MATU0055/items/2e1a306496d76bf8bfbe","location":"/MATU0055/items/2e1a306496d76bf8bfbe","scheme":"https","host":"qiita.com","port":null,"pathname":"/MATU0055/items/2e1a306496d76bf8bfbe","search":null,"httpAcceptLanguage":null,"actionPath":"public/items#show","settings":{"analyticsTrackingId":"UA-24675221-12","assetsMap":{},"csrfToken":"2JlqBOvsCobbE2PlwS7IY2YgnhMbcrpseExGQlwOiYfehtGbRrAbirMXCQnvraGxsYXjrgGkmI1Cr50E+8eivA==","locale":"en"},"currentUser":null,"isLoggedIn":false,"recaptchaSiteKey":"6LfNkiQTAAAAAM3UGnSquBy2akTITGNMO_QDxMw6","serverSide":false}</script>
<div id="PersonalArticlePage-react-component-2cab95ee-a582-4771-bcea-ebb51e7ca3b6"><div class="p-items_wrapper"><div class=" css-17jxvjw"><div class="css-11t2ec1"><div class="css-1dvr2p8"><button class=" css-18lkoru"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/MATU0055/items/2e1a306496d76bf8bfbe/likers" class="css-1iupg5d">7</a></div><div class="css-ijvq0v"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-115f4t">0</span></div><div class="css-1b8uj5v"><span class="fa fa-twitter"></span></div><div class="css-1b8uj5v"><span class="fa fa-facebook"></span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-fcbn8c"><div class="css-1gj7nt">Improve article</div><a href="/drafts/2e1a306496d76bf8bfbe/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/MATU0055/items/2e1a306496d76bf8bfbe/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/MATU0055/items/2e1a306496d76bf8bfbe/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/MATU0055/items/2e1a306496d76bf8bfbe/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/MATU0055/items/2e1a306496d76bf8bfbe.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div><div class="p-items_options"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_toc"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_main"><div class="css-helsa7"><div class="css-8qb8m4"><div class="it-AdcalRibbon"><span><a href="/advent-calendar/2020/life-is-tech-2" class="it-AdcalRibbon_title">Life is Tech ! #2<!-- --> Advent Calendar<!-- --> <!-- -->2020</a>Day 11</span></div><div class="css-2imjyh"><div class="css-he5w1s"><div class="css-70qvj9"><div class="css-3ojehk"><a href="/MATU0055"><img class="css-100alwu eyfquo10" src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/255633/profile-images/1607689123" width="24" height="24" loading="lazy"/></a></div><div class="css-1dtnjt5"><a href="/MATU0055" class="css-10ougpm">@<!-- -->MATU0055</a><div class="css-1ay9vb9"><time dateTime="2020-12-11T07:12:30Z" class="css-m19uds">posted at 2020-12-11</time></div></div></div></div></div><h1 class="css-cgzq40">【Unity】複雑な形のボタンの当たり判定をしっかり作れるようにする</h1><div class="css-1wa99t2"><span class="fa fa-tags mr-1of2 css-1l3zk9f" aria-hidden="true"></span><a href="/tags/csharp" class="css-4czcte">C#</a><a href="/tags/unity" class="css-4czcte">Unity</a><a href="/tags/unty" class="css-4czcte">Unty</a></div></div><section class="it-MdContent"><div id="personal-public-article-body"><div>
<h1>
<span id="初めに" class="fragment"></span><a href="#%E5%88%9D%E3%82%81%E3%81%AB"><i class="fa fa-link"></i></a>初めに</h1>

<p>本記事は<a href="https://qiita.com/advent-calendar/2020/life-is-tech-2">Life Is Tech ! #2 Advent Calendar 2020</a> 11日目の記事です！<br>
ぜひ最後まで見ていってください！</p>

<h2>
<span id="導入" class="fragment"></span><a href="#%E5%B0%8E%E5%85%A5"><i class="fa fa-link"></i></a>導入</h2>

<p>この記事を読んでいる皆さんはUnityで様々なゲームを作っていると思います。<br>
僕も同じようにとあるゲームを作っていたのですが、そんな時にとある問題に直面しました。</p>

<p>ゲームのUIを作っている時に星型のボタンを作ろうと思い、PhotoShopで星型の絵を用意しUnityに取り込んでボタンに設定しました。<br>
そしてUnityでボタン機能の設定を行っていたら、ボタンの当たり判定つまりマウスでクリックできる範囲が四角形でしか作れませんでした。<br>
小さいボタンであれば気にならないですが、今回僕が作ろうとしていたボタンは大きめだったのでこれは非常に問題でした。<br>
<a href="https://camo.qiitausercontent.com/bed8d4248f91c276df33f79f4aba9f8e995b9fd4/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3235353633332f30373737373936372d363831382d376262312d386562302d3638626135376237303838612e676966" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F255633%2F07777967-6818-7bb1-8eb0-68ba57b7088a.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=c9cb0a1de089fe4e1e5b6d8830ca5d57" alt="Videotogif-2.gif" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/255633/07777967-6818-7bb1-8eb0-68ba57b7088a.gif" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F255633%2F07777967-6818-7bb1-8eb0-68ba57b7088a.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=14d29df804bdde65f496bdec94bfedfe 1x" loading="lazy"></a><br>
<a href="https://camo.qiitausercontent.com/93f583c4ce62ff201421c37f58bd9b04afb468df/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3235353633332f65663464633433652d363164302d316434382d353238312d3462323231336437623637362e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F255633%2Fef4dc43e-61d0-1d48-5281-4b2213d7b676.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=75aa71f8a61cff91788b5136904ff900" alt="image.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/255633/ef4dc43e-61d0-1d48-5281-4b2213d7b676.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F255633%2Fef4dc43e-61d0-1d48-5281-4b2213d7b676.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=23b31695936cd7497d1fdf4bd969add8 1x" loading="lazy"></a></p>

<p>星のへこんでいる部分にもボタンのクリック判定ができてしまっている。<br>
これを何とかするのが今回の目標です。</p>

<h2>
<span id="この記事での最終目標" class="fragment"></span><a href="#%E3%81%93%E3%81%AE%E8%A8%98%E4%BA%8B%E3%81%A7%E3%81%AE%E6%9C%80%E7%B5%82%E7%9B%AE%E6%A8%99"><i class="fa fa-link"></i></a>この記事での最終目標</h2>

<p>上で書いた通り自分の好きな形のクリック判定のあるボタンを作ること</p>

<h2>
<span id="対象読者" class="fragment"></span><a href="#%E5%AF%BE%E8%B1%A1%E8%AA%AD%E8%80%85"><i class="fa fa-link"></i></a>対象読者</h2>

<ul>
<li>Unityに詳しくてC#のコードも割と読める人</li>
<li>おしゃれなボタンを作りたい人</li>
</ul>

<h1>
<span id="目次" class="fragment"></span><a href="#%E7%9B%AE%E6%AC%A1"><i class="fa fa-link"></i></a>目次</h1>

<p>この記事の目次は以下の通りになります<br>
１と２に関してはコードの難しい部分に触れるので、飛ばして３と４だけでも読んでいってくれると嬉しいです！</p>

<h3>
<span id="１unityのマウスポインターの処理部分のコード解説" class="fragment"></span><a href="#%EF%BC%91unity%E3%81%AE%E3%83%9E%E3%82%A6%E3%82%B9%E3%83%9D%E3%82%A4%E3%83%B3%E3%82%BF%E3%83%BC%E3%81%AE%E5%87%A6%E7%90%86%E9%83%A8%E5%88%86%E3%81%AE%E3%82%B3%E3%83%BC%E3%83%89%E8%A7%A3%E8%AA%AC"><i class="fa fa-link"></i></a>１．Unityのマウスポインターの処理部分のコード解説</h3>

<h3>
<span id="２今回作成したコードの解説" class="fragment"></span><a href="#%EF%BC%92%E4%BB%8A%E5%9B%9E%E4%BD%9C%E6%88%90%E3%81%97%E3%81%9F%E3%82%B3%E3%83%BC%E3%83%89%E3%81%AE%E8%A7%A3%E8%AA%AC"><i class="fa fa-link"></i></a>２．今回作成したコードの解説</h3>

<h3>
<span id="３今回作成したものの使い方" class="fragment"></span><a href="#%EF%BC%93%E4%BB%8A%E5%9B%9E%E4%BD%9C%E6%88%90%E3%81%97%E3%81%9F%E3%82%82%E3%81%AE%E3%81%AE%E4%BD%BF%E3%81%84%E6%96%B9"><i class="fa fa-link"></i></a>３．今回作成したものの使い方</h3>

<h3>
<span id="４実際に作ってみたボタン紹介" class="fragment"></span><a href="#%EF%BC%94%E5%AE%9F%E9%9A%9B%E3%81%AB%E4%BD%9C%E3%81%A3%E3%81%A6%E3%81%BF%E3%81%9F%E3%83%9C%E3%82%BF%E3%83%B3%E7%B4%B9%E4%BB%8B"><i class="fa fa-link"></i></a>４．実際に作ってみたボタン紹介</h3>

<h2>
<span id="１unityのマウスポインタの処理部分のコード解説" class="fragment"></span><a href="#%EF%BC%91unity%E3%81%AE%E3%83%9E%E3%82%A6%E3%82%B9%E3%83%9D%E3%82%A4%E3%83%B3%E3%82%BF%E3%81%AE%E5%87%A6%E7%90%86%E9%83%A8%E5%88%86%E3%81%AE%E3%82%B3%E3%83%BC%E3%83%89%E8%A7%A3%E8%AA%AC"><i class="fa fa-link"></i></a>１．Unityのマウスポインタ―の処理部分のコード解説</h2>

<p>この章ではUnityのソースコードを読みながらマウスでボタンをクリックしている時の処理を知り、どのようなコードを書けば独自のクリック判定を実装できるかを解説していきたいと思います。</p>

<p>結構難しめなので、コードに慣れていない人は飛ばしてください。(結構自己満足なところがある)</p>

<p>今回読まなければいけないコードは以下のファイルです。</p>

<ul>
<li>EventSystem.cs</li>
<li>BaseInputModule.cs</li>
<li>PointerInputModule.cs</li>
<li>StandaloneInputModule.cs</li>
<li>RaycasterManager.cs</li>
<li>BaseRaycaster.cs</li>
<li>GraphicRaycaster.cs</li>
<li>Image.cs</li>
<li>MaskableGraphic.cs</li>
<li>Graphic.cs</li>
<li>GraphicRegistry.cs</li>
</ul>

<p>多いですね、、、<br>
頑張っていきましょう！！</p>

<p>Unityのソースコードを読むには、例えばEventSystem.csが読みたければ画像のようにEventSystemの右上の三つポチからEdit Scriptを選択すれば開くことができます。<br>
<a href="https://camo.qiitausercontent.com/e408e0c60ca447a1aa1e11bc7b3be627e77609ff/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3235353633332f38666239376534312d383866342d303331372d636539632d3430383833663262633964632e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F255633%2F8fb97e41-88f4-0317-ce9c-40883f2bc9dc.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=c2b20c095f6eecc29a40fbc902385ac0" alt="スクリーンショット (266).png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/255633/8fb97e41-88f4-0317-ce9c-40883f2bc9dc.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F255633%2F8fb97e41-88f4-0317-ce9c-40883f2bc9dc.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=734ef165765e675c667ae9607cdb5759 1x" loading="lazy"></a><br>
僕はこの方法と普段使っているエディターであるRiderの機能でクラスやメソッドの定義元や使用先を検索してそのコードを開いてくれる機能を使って読んでいきました。</p>

<p>一応Windowsのエクスプローラーからたどることも可能で僕の場合EventSystem.csは、</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>C:\Program Files\Unity\Hub\Editor\2019.4.16f1\Editor\Data\Resources\PackageManager\BuiltInPackages\com.unity.ugui\Runtime\EventSystem\EventSystem.cs
</code></pre></div></div>

<p>にありました。</p>

<p>では早速読んでいくのですが、まずこれらのクラスの関係性をまとめたいと思います。<br>
<a href="https://camo.qiitausercontent.com/a8d648864c251a570dd661b2c60a113f5f579169/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3235353633332f34353435643937302d393032392d656235652d346263352d6338343638343236393237622e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F255633%2F4545d970-9029-eb5e-4bc5-c8468426927b.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=3e6ebac4d46a68231eff3d2c223ce230" alt="UI.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/255633/4545d970-9029-eb5e-4bc5-c8468426927b.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F255633%2F4545d970-9029-eb5e-4bc5-c8468426927b.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=df193d89e391c8ed3c4619daee1fcbbb 1x" loading="lazy"></a></p>

<p>では実際に見ていきましょう！</p>

<p>まず見るべきはEventSystem.csです。<br>
このスクリプトはUIのButtonなどをUnityで作ると自動でできるEventSystemというGameObjectにつけられています。そして、UnityのUI関連(マウスやキー入力)の管理をしています。<br>
<a href="https://camo.qiitausercontent.com/044c76457911c415152c6652a63f92dd34e0d04a/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3235353633332f63653239333335652d353836312d373864302d663230332d3535306634346464613065642e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F255633%2Fce29335e-5861-78d0-f203-550f44dda0ed.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=01d3da3554c6ee6a44ed0893f29fc481" alt="image.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/255633/ce29335e-5861-78d0-f203-550f44dda0ed.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F255633%2Fce29335e-5861-78d0-f203-550f44dda0ed.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=4fa28d2f2f6afdaece646fd9fc810928 1x" loading="lazy"></a></p>

<p><a href="https://camo.qiitausercontent.com/db972a8a0988f4ec295393d81bb980e8af08945f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3235353633332f37343162313236662d653962322d346133352d303664302d3432343832323564316136352e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F255633%2F741b126f-e9b2-4a35-06d0-4248225d1a65.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=cb3e317d08d2cc0f5bf6f607530b5bf3" alt="image.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/255633/741b126f-e9b2-4a35-06d0-4248225d1a65.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F255633%2F741b126f-e9b2-4a35-06d0-4248225d1a65.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=0e3afef621fc639096c103437d32b7ab 1x" loading="lazy"></a></p>

<p>340行目にあるUpdate関数の中の一番下</p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="n">m_CurrentInputModule</span><span class="p">.</span><span class="nf">Process</span><span class="p">();</span>
</code></pre></div></div>

<p>で毎週期のUIの処理をしています。<br>
なので次にこの中を見に行きましょう。</p>

<p>m_CurrentInputModuleはEventSystemクラスのメンバ変数でBaseInputModule型です。<br>
上の図で描いた通りBaseInputModuleの子クラスには各種入力処理に関連するものが存在し(例えばStandaloneInputModuleクラス)、毎週期のUpdateのそれぞれで現在処理すべき入力モジュール型のオブジェクトがm_CurrentInputModuleに入っています(親クラスの型に子クラスのオブジェクトは突っ込める)。</p>

<p>つまりここでのProcessは以下の画像のStandaloneInputModule.csで書かれているProcessメソッドが実行されています。<br>
<a href="https://camo.qiitausercontent.com/0f4d9bf64247b07577d457356e2c64472cdde16e/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3235353633332f33356462313931392d656139612d363866382d353666612d6561323834653663333836342e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F255633%2F35db1919-ea9a-68f8-56fa-ea284e6c3864.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=e1a8579ce6673bbef679b423ee3e3502" alt="image.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/255633/35db1919-ea9a-68f8-56fa-ea284e6c3864.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F255633%2F35db1919-ea9a-68f8-56fa-ea284e6c3864.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=77c26b65589bf6b077f2a8b3e6a0247b 1x" loading="lazy"></a><br>
そしてこの中で、ProcessMouseEvent();でMouseの処理が書かれています。</p>

<p>ではこの関数の中を見ていきましょう！<br>
この関数は同クラス内で宣言されています。<br>
<a href="https://camo.qiitausercontent.com/3e8982a88a81436a40a3ae512fd3fa0cc406297d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3235353633332f34623063613065322d363935652d373062322d323164632d3734313138636466353531662e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F255633%2F4b0ca0e2-695e-70b2-21dc-74118cdf551f.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=346f38f0788f81aaefd3e5cf2c03f13b" alt="image.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/255633/4b0ca0e2-695e-70b2-21dc-74118cdf551f.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F255633%2F4b0ca0e2-695e-70b2-21dc-74118cdf551f.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=6d3f24d9d1cb23f5d29488a492d82197 1x" loading="lazy"></a><br>
中身はProcessMouseEvent関数を呼んでいるだけです。</p>

<p>この関数も同クラス内にあり以下の画像の通りです。<br>
<a href="https://camo.qiitausercontent.com/e8c25078dc0f57c3b3ce8aee96d502db6b5c544e/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3235353633332f65343236613138392d313630332d613735662d306534652d3433326161363065353933662e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F255633%2Fe426a189-1603-a75f-0e4e-432aa60e593f.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=ee4d19647488f8a21ab143c0aa2bcdb7" alt="image.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/255633/e426a189-1603-a75f-0e4e-432aa60e593f.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F255633%2Fe426a189-1603-a75f-0e4e-432aa60e593f.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=56c0a86b57a5330fa569a163b9adfe9b 1x" loading="lazy"></a><br>
この関数はマウスの処理がまとめられています。<br>
その中で、マウスカーソルがUIのどこを選択しているかを確認する部分が最初の</p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="kt">var</span> <span class="n">mouseData</span> <span class="p">=</span> <span class="nf">GetMousePointerEventData</span><span class="p">(</span><span class="n">id</span><span class="p">);</span>
</code></pre></div></div>

<p>のGetMousePointerEventDataメソッドです。<br>
なのでこの中を見に行きましょう。</p>

<p>この関数はStandaloneInputModuleクラスの親クラスであるPointerInputModuleクラスのメンバ関数です。<br>
なのでPointerInputModule.csを読みに行きます。<br>
関数は以下のようになっています。<br>
<a href="https://camo.qiitausercontent.com/511e324f78531712acc8d93f17d500a7a1f01bec/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3235353633332f65613832326431642d613365652d303330382d326432372d6139653961373235656331642e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F255633%2Fea822d1d-a3ee-0308-2d27-a9e9a725ec1d.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=7242da285323d7f9ed9fab382d55c9f9" alt="image.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/255633/ea822d1d-a3ee-0308-2d27-a9e9a725ec1d.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F255633%2Fea822d1d-a3ee-0308-2d27-a9e9a725ec1d.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=82ced13e2d01f0b66c679282dea7eae6 1x" loading="lazy"></a></p>

<p>ここではマウスのポインターの位置からRayを飛ばしポインターの下にあるUIオブジェクトを探す部分とマウスのボタン入力の部分の処理が書かれています。<br>
前者のRayを飛ばし下にあるUIオブジェクトをとってくるコードは277行目のeventSystem.RaycastAll(leftData, m_RaycastResultCache);です。</p>

<p>eventSystemはこのクラスの親クラスであるBaseInputModuleクラスのメンバ変数でEventSystem型です<br>
なのでEventSystem.csにあるRaycastAll関数を読みに行きます。<br>
<a href="https://camo.qiitausercontent.com/a41875c4dd70c0397846086f1e469fb88222021e/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3235353633332f34333664643064632d336133332d653564642d336534322d3338653564323531616663362e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F255633%2F436dd0dc-3a33-e5dd-3e42-38e5d251afc6.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=7855974c657bf2f5b1ec7911df9e4cd8" alt="image.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/255633/436dd0dc-3a33-e5dd-3e42-38e5d251afc6.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F255633%2F436dd0dc-3a33-e5dd-3e42-38e5d251afc6.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=0d813b0ae859c0356abaada214677b6d 1x" loading="lazy"></a><br>
RaycastAllでは登録されているUIオブジェクトに一つずつRayを飛ばし確認しマウスポインタの下にあれば第二引数のraycastResultsに追加します。</p>

<p>ここで一度UnityのUIオブジェクトの登録についてまとめます。<br>
UnityでUIオブジェクトを作りEnableにするとRaycasterManagerクラスとGraphicRegistryクラスに登録されます。</p>

<p>RaycasterManagerクラスではメンバ変数にBseRaycaster型の配列であるs_RaycastersをもちUIにRayを飛ばす機能のオブジェクトを管理してます。<br>
UnityでつくるButtonオブジェクトはBaseRaycasterの子クラスであるGraphicRaycaster型のオブジェクトとしてこの配列に追加されています。</p>

<p>GraphicRegistryクラスではメンバ変数にCanvas型とGraphic型のDictionary型であるm_Graphicsを持ち、UIオブジェクトを管理しています。<br>
UnityでつくるButtonオブジェクトはGraphicクラスの子クラスであるImageクラスとしてこの配列に追加されます。</p>

<p>RaycastAllの内容に戻ると、<br>
登録されているUIにRayを飛ばす機能のオブジェクトは最初の以下の部分で取得されています。</p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="kt">var</span> <span class="n">modules</span> <span class="p">=</span> <span class="n">RaycasterManager</span><span class="p">.</span><span class="nf">GetRaycasters</span><span class="p">();</span>
</code></pre></div></div>

<p>RaycasterManager.GetRaycasters()はStatic関数でRaycasterManager.csを確認しに行くと以下の通りになっています。<br>
<a href="https://camo.qiitausercontent.com/1b4c4b5120e107803075796c5ce1713507cab14c/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3235353633332f31333938343033352d363036652d633438652d303637352d3763303234323066346531612e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F255633%2F13984035-606e-c48e-0675-7c02420f4e1a.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=ebd8fac241b6ffd7031f6b9e464e9335" alt="image.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/255633/13984035-606e-c48e-0675-7c02420f4e1a.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F255633%2F13984035-606e-c48e-0675-7c02420f4e1a.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=75a3b65ac4dafbefb971217c4f9a47c4 1x" loading="lazy"></a></p>

<p>よってRaycastAll関数内の各モジュールにRayを飛ばすmodule.Raycast(eventData, raycastResults);の部分でButtonオブジェクトがmoduleに登録されているとき、Raycast関数はGraphicRaycaster.csで書かれているものが呼び出されます。</p>

<p>なので、それを見に行きます。(このコードは長かったので画像はありません)</p>

<p>まず121行目のRaycast関数が呼ばれます。<br>
その中の126行目のvar canvasGraphics = GraphicRegistry.GetGraphicsForCanvas(canvas);で先ほど説明したGraphicRegistryに登録されたUIオブジェクトを持ってきています。<br>
そして、225行目でこのcanvasGraphicsも引数として渡して312行目で宣言されているRaycast関数を呼び出しています。</p>

<p>312行目のRaycast関数ではcanvasGraphicsに登録されているUIオブジェクトそれぞれにRayを飛ばしマウスポインタの下にあるか確認して下にあれば第五引数のresultsにそのGraphicクラスのオブジェクトを追加します。<br>
Rayを実際に飛ばす部分は330行目の部分です。</p>

<p>ここまででようやく、PointerInputModule.csの277行目のeventSystem.RaycastAll(leftData, m_RaycastResultCache);の説明がおわり、結局この行が呼ばれればm_RaycastResultCacheにマウスが載っているUIオブジェクトが追加されていることがわかりました。</p>

<p>この下の行ではそれらの中から、UIで一番上に配置されているものを取り出して各種処理を行っています。</p>

<p>以上でUnityのマウスの処理の説明が終わりました。<br>
よって今回UIのボタンの当たり判定を変更したいならば、GraphicRaycaster.csの330行目で呼び出している、GraphicクラスのRaycast関数を書き換える必要があります。</p>

<p>このRaycast関数の中ではGraphic.csの798行目でIsRaycastLocationValid関数が呼ばれていてこの関数の中で判定の処理が書かれています。<br>
このIsRaycastLocationValid関数はGraphicクラスの子クラスであるImageクラスでvirtualで定義されています。</p>

<p>つまり今回はこのIsRaycastLocationValid関数を新たなスクリプトでoverrideしてあげ、そのなかに好きな形でも判定ができるようなコードをかいてあげれば成功です。</p>

<p>ここまで読んでくださって本当にありがとうございます！<br>
そしてお疲れ様でした。</p>

<p>次の章ではこのIsRaycastLocationValid関数を書き換えるところを説明します。(多分力つきているので、大分雑になると思います、、、)</p>

<h2>
<span id="２今回作成したコードの解説-1" class="fragment"></span><a href="#%EF%BC%92%E4%BB%8A%E5%9B%9E%E4%BD%9C%E6%88%90%E3%81%97%E3%81%9F%E3%82%B3%E3%83%BC%E3%83%89%E3%81%AE%E8%A7%A3%E8%AA%AC-1"><i class="fa fa-link"></i></a>２．今回作成したコードの解説</h2>

<p>今回作成したコードは<a href="https://qiita.com/sune2/items/cf9ef9d197b47b2d7a10" id="reference-54ddd4287ca33cf27724">こちら様</a>の記事を参考(ほぼ丸パクリ)にさせていただきました。<br>
先ほど説明したImageクラスはICanvasRaycastFilterクラスを継承しているので今回はICanvasRaycastFilterクラスを新たなコンポーネントとして実装しその中でIsRaycastLocationValid関数をoverrideするようにしています。</p>

<p>指定した範囲内にマウスがあるかなどのアルゴリズムに関してはそこまで難しいものは使っていません。ぜひ元記事の方を読まれてください。</p>

<p>範囲の指定の仕方ですが、SpriteのPhysics Shapeという機能を用いています。UnityのSprite Editorで好きに形を編集し、コード側でそれを取得し判定を行っています。</p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UnityEngine</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UnityEngine.UI</span><span class="p">;</span>

<span class="c1">/// &lt;summary&gt;</span>
<span class="c1">/// SpriteのPhysicsShapeの内部のみ当たり判定を有効にするRaycastFilter</span>
<span class="c1">/// &lt;/summary&gt;</span>
<span class="p">[</span><span class="nf">RequireComponent</span><span class="p">(</span><span class="k">typeof</span><span class="p">(</span><span class="n">Image</span><span class="p">))]</span>
<span class="k">public</span> <span class="k">class</span> <span class="nc">PhysicsShapeRaycastFilter</span> <span class="p">:</span> <span class="n">MonoBehaviour</span><span class="p">,</span> <span class="n">ICanvasRaycastFilter</span> <span class="c1">//</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="k">readonly</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">Vector2</span><span class="p">&gt;</span> <span class="n">_verts</span> <span class="p">=</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">Vector2</span><span class="p">&gt;();</span>

    <span class="k">private</span> <span class="n">Image</span> <span class="n">_image</span><span class="p">;</span>

    <span class="k">public</span> <span class="kt">bool</span> <span class="nf">IsRaycastLocationValid</span><span class="p">(</span><span class="n">Vector2</span> <span class="n">screenPoint</span><span class="p">,</span> <span class="n">Camera</span> <span class="n">eventCamera</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">var</span> <span class="n">image</span> <span class="p">=</span> <span class="n">_image</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">_image</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">_image</span> <span class="p">=</span> <span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">Image</span><span class="p">&gt;();</span>
        <span class="p">}</span>

        <span class="kt">var</span> <span class="n">rectTransform</span> <span class="p">=</span> <span class="n">transform</span> <span class="k">as</span> <span class="n">RectTransform</span><span class="p">;</span>
        <span class="n">Vector2</span> <span class="n">local</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(!</span><span class="n">RectTransformUtility</span><span class="p">.</span><span class="nf">ScreenPointToLocalPointInRectangle</span><span class="p">(</span><span class="n">rectTransform</span><span class="p">,</span> <span class="n">screenPoint</span><span class="p">,</span> <span class="n">eventCamera</span><span class="p">,</span> <span class="k">out</span> <span class="n">local</span><span class="p">))</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="k">false</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="kt">var</span> <span class="n">rect</span> <span class="p">=</span> <span class="n">rectTransform</span><span class="p">.</span><span class="n">rect</span><span class="p">;</span>

        <span class="c1">// スプライト内の座標空間での位置を計算する</span>
        <span class="kt">var</span> <span class="n">pivot</span> <span class="p">=</span> <span class="n">rectTransform</span><span class="p">.</span><span class="n">pivot</span><span class="p">;</span>
        <span class="kt">var</span> <span class="n">sprite</span> <span class="p">=</span> <span class="n">image</span><span class="p">.</span><span class="n">sprite</span><span class="p">;</span>
        <span class="kt">var</span> <span class="n">x</span> <span class="p">=</span> <span class="p">(</span><span class="n">local</span><span class="p">.</span><span class="n">x</span> <span class="p">/</span> <span class="n">rect</span><span class="p">.</span><span class="n">width</span> <span class="p">+</span> <span class="n">pivot</span><span class="p">.</span><span class="n">x</span> <span class="p">-</span> <span class="m">0.5f</span><span class="p">)</span> <span class="p">*</span> <span class="n">sprite</span><span class="p">.</span><span class="n">rect</span><span class="p">.</span><span class="n">width</span> <span class="p">/</span> <span class="n">sprite</span><span class="p">.</span><span class="n">pixelsPerUnit</span><span class="p">;</span>
        <span class="kt">var</span> <span class="n">y</span> <span class="p">=</span> <span class="p">(</span><span class="n">local</span><span class="p">.</span><span class="n">y</span> <span class="p">/</span> <span class="n">rect</span><span class="p">.</span><span class="n">height</span> <span class="p">+</span> <span class="n">pivot</span><span class="p">.</span><span class="n">y</span> <span class="p">-</span> <span class="m">0.5f</span><span class="p">)</span> <span class="p">*</span> <span class="n">sprite</span><span class="p">.</span><span class="n">rect</span><span class="p">.</span><span class="n">height</span> <span class="p">/</span> <span class="n">sprite</span><span class="p">.</span><span class="n">pixelsPerUnit</span><span class="p">;</span>
        <span class="kt">var</span> <span class="n">p</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Vector2</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">);</span>

        <span class="kt">var</span> <span class="n">physicsShapeCount</span> <span class="p">=</span> <span class="n">sprite</span><span class="p">.</span><span class="nf">GetPhysicsShapeCount</span><span class="p">();</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">var</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">physicsShapeCount</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
        <span class="p">{</span>
            <span class="n">sprite</span><span class="p">.</span><span class="nf">GetPhysicsShape</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">_verts</span><span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span><span class="nf">IsInPolygon</span><span class="p">(</span><span class="n">_verts</span><span class="p">,</span> <span class="n">p</span><span class="p">))</span>
            <span class="p">{</span>
                <span class="c1">// どれかの多角形の内部にあればtrueを返す</span>
                <span class="k">return</span> <span class="k">true</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="k">false</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">/// &lt;summary&gt;</span>
    <span class="c1">/// 非凸多角形の内部に点が存在するかどうか</span>
    <span class="c1">/// &lt;/summary&gt;</span>
    <span class="k">private</span> <span class="k">static</span> <span class="kt">bool</span> <span class="nf">IsInPolygon</span><span class="p">(</span><span class="n">List</span><span class="p">&lt;</span><span class="n">Vector2</span><span class="p">&gt;</span> <span class="n">polygon</span><span class="p">,</span> <span class="n">Vector2</span> <span class="n">p</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// pからx軸の正方向への無限な半直線を考えて、多角形との交差回数によって判定する</span>
        <span class="kt">var</span> <span class="n">n</span> <span class="p">=</span> <span class="n">polygon</span><span class="p">.</span><span class="n">Count</span><span class="p">;</span>
        <span class="kt">var</span> <span class="n">isIn</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">var</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
        <span class="p">{</span>
            <span class="kt">var</span> <span class="n">nxt</span> <span class="p">=</span> <span class="p">(</span><span class="n">i</span> <span class="p">+</span> <span class="m">1</span><span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">nxt</span> <span class="p">&gt;=</span> <span class="n">n</span><span class="p">)</span> <span class="n">nxt</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span>
            <span class="kt">var</span> <span class="n">a</span> <span class="p">=</span> <span class="n">polygon</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="p">-</span> <span class="n">p</span><span class="p">;</span>
            <span class="kt">var</span> <span class="n">b</span> <span class="p">=</span> <span class="n">polygon</span><span class="p">[</span><span class="n">nxt</span><span class="p">]</span> <span class="p">-</span> <span class="n">p</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="n">y</span> <span class="p">&gt;</span> <span class="n">b</span><span class="p">.</span><span class="n">y</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="c1">// swap</span>
                <span class="kt">var</span> <span class="n">t</span> <span class="p">=</span> <span class="n">a</span><span class="p">;</span>
                <span class="n">a</span> <span class="p">=</span> <span class="n">b</span><span class="p">;</span>
                <span class="n">b</span> <span class="p">=</span> <span class="n">t</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="n">y</span> <span class="p">&lt;=</span> <span class="m">0</span> <span class="p">&amp;&amp;</span> <span class="m">0</span> <span class="p">&lt;</span> <span class="n">b</span><span class="p">.</span><span class="n">y</span> <span class="p">&amp;&amp;</span> <span class="nf">CrossProduct</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span> <span class="p">&gt;</span> <span class="m">0</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">isIn</span> <span class="p">=</span> <span class="p">!</span><span class="n">isIn</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="n">isIn</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">/// &lt;summary&gt;</span>
    <span class="c1">/// 外積</span>
    <span class="c1">/// &lt;/summary&gt;</span>
    <span class="k">private</span> <span class="k">static</span> <span class="kt">float</span> <span class="nf">CrossProduct</span><span class="p">(</span><span class="n">Vector2</span> <span class="n">u</span><span class="p">,</span> <span class="n">Vector2</span> <span class="n">v</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="n">u</span><span class="p">.</span><span class="n">x</span> <span class="p">*</span> <span class="n">v</span><span class="p">.</span><span class="n">y</span> <span class="p">-</span> <span class="n">u</span><span class="p">.</span><span class="n">y</span> <span class="p">*</span> <span class="n">v</span><span class="p">.</span><span class="n">x</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>解説に関しては元記事様の説明が非常に分かりやすいので是非読んでみて下さい</p>

<h2>
<span id="３今回作成したものの使い方-1" class="fragment"></span><a href="#%EF%BC%93%E4%BB%8A%E5%9B%9E%E4%BD%9C%E6%88%90%E3%81%97%E3%81%9F%E3%82%82%E3%81%AE%E3%81%AE%E4%BD%BF%E3%81%84%E6%96%B9-1"><i class="fa fa-link"></i></a>３．今回作成したものの使い方</h2>

<p>使い方は非常に簡単です。</p>

<p>先ほどのコードをUnityにPhysicsShapeRaycastFilter.csとして作り目的のButtonオブジェクトに着けてあげるだけです。<br>
<a href="https://camo.qiitausercontent.com/13f37b09395a9caea841864b0704a92417c33c6c/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3235353633332f35333535396239352d393033622d626333622d353733382d3063356466663434313764622e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F255633%2F53559b95-903b-bc3b-5738-0c5dff4417db.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=7185cc1cad083077472b8a8a0e90fe9c" alt="image.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/255633/53559b95-903b-bc3b-5738-0c5dff4417db.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F255633%2F53559b95-903b-bc3b-5738-0c5dff4417db.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=2f1a6449b759dbfc2487e3ace706b317 1x" loading="lazy"></a></p>

<p>そして、ButtonについているImageコンポーネントに登録している、スプライトをSprit Editorで編集していきます。</p>

<p><a href="https://camo.qiitausercontent.com/b7f5ac4d8cb43f8ac177ccfd0f8715c8f4eff763/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3235353633332f64373636326364662d613731382d333764652d333630612d6563346434656462653735622e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F255633%2Fd7662cdf-a718-37de-360a-ec4d4edbe75b.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=fddc5843c097a6b294a81f2718f9d49b" alt="image.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/255633/d7662cdf-a718-37de-360a-ec4d4edbe75b.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F255633%2Fd7662cdf-a718-37de-360a-ec4d4edbe75b.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=0d97bf2a31c0304e03401e5d05a50afd 1x" loading="lazy"></a><br>
右下のSprite Editorをクリック</p>

<p><a href="https://camo.qiitausercontent.com/b7a373da7a9ea437ab874d09038ad89bd96c5162/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3235353633332f62373136343638372d356535372d383739302d643732382d3032623130376336376538612e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F255633%2Fb7164687-5e57-8790-d728-02b107c67e8a.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=5d310c84e32ff0f1258cf0030c6dd281" alt="スクリーンショット (268).png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/255633/b7164687-5e57-8790-d728-02b107c67e8a.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F255633%2Fb7164687-5e57-8790-d728-02b107c67e8a.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=fba9ca9093f332c1977c6b3346df009c 1x" loading="lazy"></a><br>
このようなウィンドウが立ち上がるので、左上のボタンをクリックしてCustom Physics Shapeを選択。</p>

<p><a href="https://camo.qiitausercontent.com/e7d67b02a2c73880f910eb128f2b8170266c92f4/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3235353633332f38626130636165652d343561622d356261372d633736622d6435333934396666633033312e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F255633%2F8ba0caee-45ab-5ba7-c76b-d53949ffc031.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=88fd13c634e9022ae10b94e74c2a2558" alt="image.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/255633/8ba0caee-45ab-5ba7-c76b-d53949ffc031.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F255633%2F8ba0caee-45ab-5ba7-c76b-d53949ffc031.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=60e5dffd600e85846a8ce47911770b76 1x" loading="lazy"></a><br>
このように、ボタンの当たり判定になってほしい部分を描きます。<br>
描けたら、右上のApplyボタンを押して閉じましょう。</p>

<p>以上で作業は終了です。<br>
できたボタンを好きな場所に配置しましょう！</p>

<h2>
<span id="４実際に作ってみたボタン紹介-1" class="fragment"></span><a href="#%EF%BC%94%E5%AE%9F%E9%9A%9B%E3%81%AB%E4%BD%9C%E3%81%A3%E3%81%A6%E3%81%BF%E3%81%9F%E3%83%9C%E3%82%BF%E3%83%B3%E7%B4%B9%E4%BB%8B-1"><i class="fa fa-link"></i></a>４．実際に作ってみたボタン紹介</h2>

<p>実際にうまくいっているか確認してみましょう。<br>
今回できたボタンが下の画像です。<br>
<a href="https://camo.qiitausercontent.com/ba46e783a00fadace8782b65c54b7bbe98e75154/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3235353633332f39303533343263352d323039312d363764312d393634312d6565643762636332656462642e676966" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F255633%2F905342c5-2091-67d1-9641-eed7bcc2edbd.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=35c268a586bff880d71c20ba04855494" alt="Videotogif-3.gif" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/255633/905342c5-2091-67d1-9641-eed7bcc2edbd.gif" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F255633%2F905342c5-2091-67d1-9641-eed7bcc2edbd.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=1d58186c827a02efd028e708c9337bb1 1x" loading="lazy"></a></p>

<p>確かに星のへこんでいる部分では反応しないようになりました。</p>

<p>記事は以上になります！<br>
お疲れ様でした。</p>

<h1>
<span id="感想" class="fragment"></span><a href="#%E6%84%9F%E6%83%B3"><i class="fa fa-link"></i></a>感想</h1>

<p>非常に疲れました。</p>

<p>コードって自分で理解できても人に説明するのってすごい難しいってことを改めて感じました。<br>
Unity内部のコードはそこまで不可能なくらい難しくないので、勉強したい人はぜひ読んでみるといいと思いました。</p>
</div></div></section><div class="css-1yzj1fm"><div class="css-1uv1qiv"><span class="fa fa-twitter"></span></div><div class="css-1uv1qiv"><span class="fa fa-facebook"></span></div></div><div class="apm-Content"><div class="apm-Content_title">Why not register and get more from Qiita?</div><ol class="apm-Content_list"><li>We will deliver articles that match you<div class="description">By following users and tags, you can catch up information on technical fields that you are interested in as a whole</div></li><li>you can read useful information later efficiently<div class="description">By &quot;stocking&quot; the articles you like, you can search right away</div></li><div><a class="apm-Content_help" href="https://help.qiita.com/ja/articles/qiita-login-user" target="_blank"><i class="fa fa-fw fa-arrow-circle-right"></i>What you can do with signing up</a></div></ol><a href="/signup?callback_action=login_or_signup&amp;redirect_to=%2FMATU0055%2Fitems%2F2e1a306496d76bf8bfbe&amp;realm=qiita" class="apm-Content_button apm-Content_button-signup">Sign up</a><a href="/login?callback_action=login_or_signup&amp;redirect_to=%2FMATU0055%2Fitems%2F2e1a306496d76bf8bfbe&amp;realm=qiita" class="apm-Content_button apm-Content_button-signin">Login</a></div></div><div class="css-helsa7"></div></div></div></div><div class="css-109dbrr"><div class="css-5jpx49"><div class="css-mnxgyc"><button class=" css-1vlpknv"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/MATU0055/items/2e1a306496d76bf8bfbe/likers" class="css-1iupg5d">7</a></div><div class="css-fsjkhv"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-1b17vb0">0</span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-7i7f4d"><div class="css-1gj7nt">Improve article</div><a href="/drafts/2e1a306496d76bf8bfbe/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/MATU0055/items/2e1a306496d76bf8bfbe/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/MATU0055/items/2e1a306496d76bf8bfbe/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/MATU0055/items/2e1a306496d76bf8bfbe/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/MATU0055/items/2e1a306496d76bf8bfbe.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="PersonalArticlePage" data-dom-id="PersonalArticlePage-react-component-2cab95ee-a582-4771-bcea-ebb51e7ca3b6">{"authorAnalyticsTrackingId":null,"organizationAnalyticsTrackingId":null}</script>
      
<footer id="globalFooter" class="st-Footer"><div class="st-Footer_container"><div class="st-Footer_start"><div class="st-Footer_logo"><svg viewbox="0 0 426.57 130" xmlns="http://www.w3.org/2000/svg"><circle cx="167.08" cy="21.4" r="12.28" /><path d="M250.81 29.66h23.48v18.9h-23.48z" /><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z" /><circle cx="216.33" cy="21.4" r="12.28" /></svg></div><div class="st-Footer_catchcopy">How developers code is here.</div><div class="st-Footer_socials"><a class="fa fa-twitter" href="https://twitter.com/qiita"></a><a class="fa fa-facebook-square" href="https://www.facebook.com/qiita/"></a></div></div><div class="st-Footer_end"><div class="st-Footer_qiita"><div class="st-Footer_label">Qiita</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="/about">About</a><a href="/terms">Terms</a><a href="/privacy">Privacy</a><a target="_blank" href="http://help.qiita.com/ja/articles/qiita-community-guideline">Guideline</a><a target="_blank" href="https://help.qiita.com/ja/articles/others-brand-guideline">Design Guideline</a></div><div class="st-Footer_column"><a href="/release-notes">Release</a><a href="/api/v2/docs">API</a><a href="/feedback/new">ご意見</a><a href="https://help.qiita.com">Help</a><a target="_blank" href="https://qiita.com/ads?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Advertisement</a></div></div></div><div class="st-Footer_increments"><div class="st-Footer_label">Increments</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="https://increments.co.jp/company/">About</a><a href="https://increments.co.jp/jobs/">採用情報</a><a href="https://blog.qiita.com">Blog</a></div><div class="st-Footer_column"><a href="https://teams.qiita.com/">Qiita Team</a><a href="https://jobs.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Jobs</a><a href="https://zine.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Zine</a></div></div></div></div></div><div class="st-Footer_copyright">© 2011-2021 Increments Inc.</div></footer><div id="Snackbar-react-component-f39dc917-fc96-49eb-b13c-8836271f586d"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="Snackbar" data-dom-id="Snackbar-react-component-f39dc917-fc96-49eb-b13c-8836271f586d">{}</script>
      
<div id="LoginModal-react-component-9ba727e8-5da9-48a8-b0c8-8c47f5979d36"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="LoginModal" data-dom-id="LoginModal-react-component-9ba727e8-5da9-48a8-b0c8-8c47f5979d36">{}</script>
      
<div id="StockModal-react-component-f406664a-dfbb-45dd-9424-8b500c361c05"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="StockModal" data-dom-id="StockModal-react-component-f406664a-dfbb-45dd-9424-8b500c361c05">{}</script>
      
</div><div id="dataContainer" style="display: none;" data-config="{&quot;actionPath&quot;:&quot;public/items#show&quot;,&quot;settings&quot;:{&quot;analyticsTrackingId&quot;:&quot;UA-24675221-12&quot;,&quot;assetsMap&quot;:{},&quot;csrfToken&quot;:&quot;kqOxmYsiGFklwKPW2oFFdrdv+51qNr9Qcp0ZO4TruUeUvAoGJn4JVU3EyTr0AiykYMqGIHDgnbFIfsJ9IyKSfA==&quot;,&quot;locale&quot;:&quot;en&quot;},&quot;currentUser&quot;:null}" /></body></html><script type="application/json" data-js-react-on-rails-store="AppStoreWithReactOnRails">{"snackbar":{"type":"","body":"","isActive":false},"article":{"article":{"body":"\n\u003ch1\u003e\n\u003cspan id=\"初めに\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%88%9D%E3%82%81%E3%81%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e初めに\u003c/h1\u003e\n\n\u003cp\u003e本記事は\u003ca href=\"https://qiita.com/advent-calendar/2020/life-is-tech-2\"\u003eLife Is Tech ! #2 Advent Calendar 2020\u003c/a\u003e 11日目の記事です！\u003cbr\u003e\nぜひ最後まで見ていってください！\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"導入\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%B0%8E%E5%85%A5\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e導入\u003c/h2\u003e\n\n\u003cp\u003eこの記事を読んでいる皆さんはUnityで様々なゲームを作っていると思います。\u003cbr\u003e\n僕も同じようにとあるゲームを作っていたのですが、そんな時にとある問題に直面しました。\u003c/p\u003e\n\n\u003cp\u003eゲームのUIを作っている時に星型のボタンを作ろうと思い、PhotoShopで星型の絵を用意しUnityに取り込んでボタンに設定しました。\u003cbr\u003e\nそしてUnityでボタン機能の設定を行っていたら、ボタンの当たり判定つまりマウスでクリックできる範囲が四角形でしか作れませんでした。\u003cbr\u003e\n小さいボタンであれば気にならないですが、今回僕が作ろうとしていたボタンは大きめだったのでこれは非常に問題でした。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/bed8d4248f91c276df33f79f4aba9f8e995b9fd4/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3235353633332f30373737373936372d363831382d376262312d386562302d3638626135376237303838612e676966\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F255633%2F07777967-6818-7bb1-8eb0-68ba57b7088a.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=c9cb0a1de089fe4e1e5b6d8830ca5d57\" alt=\"Videotogif-2.gif\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/255633/07777967-6818-7bb1-8eb0-68ba57b7088a.gif\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F255633%2F07777967-6818-7bb1-8eb0-68ba57b7088a.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=14d29df804bdde65f496bdec94bfedfe 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/93f583c4ce62ff201421c37f58bd9b04afb468df/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3235353633332f65663464633433652d363164302d316434382d353238312d3462323231336437623637362e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F255633%2Fef4dc43e-61d0-1d48-5281-4b2213d7b676.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=75aa71f8a61cff91788b5136904ff900\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/255633/ef4dc43e-61d0-1d48-5281-4b2213d7b676.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F255633%2Fef4dc43e-61d0-1d48-5281-4b2213d7b676.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=23b31695936cd7497d1fdf4bd969add8 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e星のへこんでいる部分にもボタンのクリック判定ができてしまっている。\u003cbr\u003e\nこれを何とかするのが今回の目標です。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"この記事での最終目標\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%93%E3%81%AE%E8%A8%98%E4%BA%8B%E3%81%A7%E3%81%AE%E6%9C%80%E7%B5%82%E7%9B%AE%E6%A8%99\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eこの記事での最終目標\u003c/h2\u003e\n\n\u003cp\u003e上で書いた通り自分の好きな形のクリック判定のあるボタンを作ること\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"対象読者\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AF%BE%E8%B1%A1%E8%AA%AD%E8%80%85\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e対象読者\u003c/h2\u003e\n\n\u003cul\u003e\n\u003cli\u003eUnityに詳しくてC#のコードも割と読める人\u003c/li\u003e\n\u003cli\u003eおしゃれなボタンを作りたい人\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"目次\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E7%9B%AE%E6%AC%A1\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e目次\u003c/h1\u003e\n\n\u003cp\u003eこの記事の目次は以下の通りになります\u003cbr\u003e\n１と２に関してはコードの難しい部分に触れるので、飛ばして３と４だけでも読んでいってくれると嬉しいです！\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"１unityのマウスポインターの処理部分のコード解説\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%EF%BC%91unity%E3%81%AE%E3%83%9E%E3%82%A6%E3%82%B9%E3%83%9D%E3%82%A4%E3%83%B3%E3%82%BF%E3%83%BC%E3%81%AE%E5%87%A6%E7%90%86%E9%83%A8%E5%88%86%E3%81%AE%E3%82%B3%E3%83%BC%E3%83%89%E8%A7%A3%E8%AA%AC\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e１．Unityのマウスポインターの処理部分のコード解説\u003c/h3\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"２今回作成したコードの解説\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%EF%BC%92%E4%BB%8A%E5%9B%9E%E4%BD%9C%E6%88%90%E3%81%97%E3%81%9F%E3%82%B3%E3%83%BC%E3%83%89%E3%81%AE%E8%A7%A3%E8%AA%AC\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e２．今回作成したコードの解説\u003c/h3\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"３今回作成したものの使い方\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%EF%BC%93%E4%BB%8A%E5%9B%9E%E4%BD%9C%E6%88%90%E3%81%97%E3%81%9F%E3%82%82%E3%81%AE%E3%81%AE%E4%BD%BF%E3%81%84%E6%96%B9\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e３．今回作成したものの使い方\u003c/h3\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"４実際に作ってみたボタン紹介\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%EF%BC%94%E5%AE%9F%E9%9A%9B%E3%81%AB%E4%BD%9C%E3%81%A3%E3%81%A6%E3%81%BF%E3%81%9F%E3%83%9C%E3%82%BF%E3%83%B3%E7%B4%B9%E4%BB%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e４．実際に作ってみたボタン紹介\u003c/h3\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"１unityのマウスポインタの処理部分のコード解説\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%EF%BC%91unity%E3%81%AE%E3%83%9E%E3%82%A6%E3%82%B9%E3%83%9D%E3%82%A4%E3%83%B3%E3%82%BF%E3%81%AE%E5%87%A6%E7%90%86%E9%83%A8%E5%88%86%E3%81%AE%E3%82%B3%E3%83%BC%E3%83%89%E8%A7%A3%E8%AA%AC\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e１．Unityのマウスポインタ―の処理部分のコード解説\u003c/h2\u003e\n\n\u003cp\u003eこの章ではUnityのソースコードを読みながらマウスでボタンをクリックしている時の処理を知り、どのようなコードを書けば独自のクリック判定を実装できるかを解説していきたいと思います。\u003c/p\u003e\n\n\u003cp\u003e結構難しめなので、コードに慣れていない人は飛ばしてください。(結構自己満足なところがある)\u003c/p\u003e\n\n\u003cp\u003e今回読まなければいけないコードは以下のファイルです。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eEventSystem.cs\u003c/li\u003e\n\u003cli\u003eBaseInputModule.cs\u003c/li\u003e\n\u003cli\u003ePointerInputModule.cs\u003c/li\u003e\n\u003cli\u003eStandaloneInputModule.cs\u003c/li\u003e\n\u003cli\u003eRaycasterManager.cs\u003c/li\u003e\n\u003cli\u003eBaseRaycaster.cs\u003c/li\u003e\n\u003cli\u003eGraphicRaycaster.cs\u003c/li\u003e\n\u003cli\u003eImage.cs\u003c/li\u003e\n\u003cli\u003eMaskableGraphic.cs\u003c/li\u003e\n\u003cli\u003eGraphic.cs\u003c/li\u003e\n\u003cli\u003eGraphicRegistry.cs\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e多いですね、、、\u003cbr\u003e\n頑張っていきましょう！！\u003c/p\u003e\n\n\u003cp\u003eUnityのソースコードを読むには、例えばEventSystem.csが読みたければ画像のようにEventSystemの右上の三つポチからEdit Scriptを選択すれば開くことができます。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/e408e0c60ca447a1aa1e11bc7b3be627e77609ff/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3235353633332f38666239376534312d383866342d303331372d636539632d3430383833663262633964632e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F255633%2F8fb97e41-88f4-0317-ce9c-40883f2bc9dc.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=c2b20c095f6eecc29a40fbc902385ac0\" alt=\"スクリーンショット (266).png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/255633/8fb97e41-88f4-0317-ce9c-40883f2bc9dc.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F255633%2F8fb97e41-88f4-0317-ce9c-40883f2bc9dc.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=734ef165765e675c667ae9607cdb5759 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003cbr\u003e\n僕はこの方法と普段使っているエディターであるRiderの機能でクラスやメソッドの定義元や使用先を検索してそのコードを開いてくれる機能を使って読んでいきました。\u003c/p\u003e\n\n\u003cp\u003e一応Windowsのエクスプローラーからたどることも可能で僕の場合EventSystem.csは、\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eC:\\Program Files\\Unity\\Hub\\Editor\\2019.4.16f1\\Editor\\Data\\Resources\\PackageManager\\BuiltInPackages\\com.unity.ugui\\Runtime\\EventSystem\\EventSystem.cs\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eにありました。\u003c/p\u003e\n\n\u003cp\u003eでは早速読んでいくのですが、まずこれらのクラスの関係性をまとめたいと思います。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/a8d648864c251a570dd661b2c60a113f5f579169/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3235353633332f34353435643937302d393032392d656235652d346263352d6338343638343236393237622e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F255633%2F4545d970-9029-eb5e-4bc5-c8468426927b.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=3e6ebac4d46a68231eff3d2c223ce230\" alt=\"UI.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/255633/4545d970-9029-eb5e-4bc5-c8468426927b.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F255633%2F4545d970-9029-eb5e-4bc5-c8468426927b.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=df193d89e391c8ed3c4619daee1fcbbb 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eでは実際に見ていきましょう！\u003c/p\u003e\n\n\u003cp\u003eまず見るべきはEventSystem.csです。\u003cbr\u003e\nこのスクリプトはUIのButtonなどをUnityで作ると自動でできるEventSystemというGameObjectにつけられています。そして、UnityのUI関連(マウスやキー入力)の管理をしています。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/044c76457911c415152c6652a63f92dd34e0d04a/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3235353633332f63653239333335652d353836312d373864302d663230332d3535306634346464613065642e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F255633%2Fce29335e-5861-78d0-f203-550f44dda0ed.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=01d3da3554c6ee6a44ed0893f29fc481\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/255633/ce29335e-5861-78d0-f203-550f44dda0ed.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F255633%2Fce29335e-5861-78d0-f203-550f44dda0ed.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=4fa28d2f2f6afdaece646fd9fc810928 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/db972a8a0988f4ec295393d81bb980e8af08945f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3235353633332f37343162313236662d653962322d346133352d303664302d3432343832323564316136352e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F255633%2F741b126f-e9b2-4a35-06d0-4248225d1a65.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=cb3e317d08d2cc0f5bf6f607530b5bf3\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/255633/741b126f-e9b2-4a35-06d0-4248225d1a65.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F255633%2F741b126f-e9b2-4a35-06d0-4248225d1a65.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=0e3afef621fc639096c103437d32b7ab 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e340行目にあるUpdate関数の中の一番下\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"n\"\u003em_CurrentInputModule\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eProcess\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eで毎週期のUIの処理をしています。\u003cbr\u003e\nなので次にこの中を見に行きましょう。\u003c/p\u003e\n\n\u003cp\u003em_CurrentInputModuleはEventSystemクラスのメンバ変数でBaseInputModule型です。\u003cbr\u003e\n上の図で描いた通りBaseInputModuleの子クラスには各種入力処理に関連するものが存在し(例えばStandaloneInputModuleクラス)、毎週期のUpdateのそれぞれで現在処理すべき入力モジュール型のオブジェクトがm_CurrentInputModuleに入っています(親クラスの型に子クラスのオブジェクトは突っ込める)。\u003c/p\u003e\n\n\u003cp\u003eつまりここでのProcessは以下の画像のStandaloneInputModule.csで書かれているProcessメソッドが実行されています。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/0f4d9bf64247b07577d457356e2c64472cdde16e/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3235353633332f33356462313931392d656139612d363866382d353666612d6561323834653663333836342e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F255633%2F35db1919-ea9a-68f8-56fa-ea284e6c3864.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=e1a8579ce6673bbef679b423ee3e3502\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/255633/35db1919-ea9a-68f8-56fa-ea284e6c3864.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F255633%2F35db1919-ea9a-68f8-56fa-ea284e6c3864.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=77c26b65589bf6b077f2a8b3e6a0247b 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003cbr\u003e\nそしてこの中で、ProcessMouseEvent();でMouseの処理が書かれています。\u003c/p\u003e\n\n\u003cp\u003eではこの関数の中を見ていきましょう！\u003cbr\u003e\nこの関数は同クラス内で宣言されています。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/3e8982a88a81436a40a3ae512fd3fa0cc406297d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3235353633332f34623063613065322d363935652d373062322d323164632d3734313138636466353531662e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F255633%2F4b0ca0e2-695e-70b2-21dc-74118cdf551f.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=346f38f0788f81aaefd3e5cf2c03f13b\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/255633/4b0ca0e2-695e-70b2-21dc-74118cdf551f.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F255633%2F4b0ca0e2-695e-70b2-21dc-74118cdf551f.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=6d3f24d9d1cb23f5d29488a492d82197 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003cbr\u003e\n中身はProcessMouseEvent関数を呼んでいるだけです。\u003c/p\u003e\n\n\u003cp\u003eこの関数も同クラス内にあり以下の画像の通りです。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/e8c25078dc0f57c3b3ce8aee96d502db6b5c544e/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3235353633332f65343236613138392d313630332d613735662d306534652d3433326161363065353933662e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F255633%2Fe426a189-1603-a75f-0e4e-432aa60e593f.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=ee4d19647488f8a21ab143c0aa2bcdb7\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/255633/e426a189-1603-a75f-0e4e-432aa60e593f.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F255633%2Fe426a189-1603-a75f-0e4e-432aa60e593f.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=56c0a86b57a5330fa569a163b9adfe9b 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003cbr\u003e\nこの関数はマウスの処理がまとめられています。\u003cbr\u003e\nその中で、マウスカーソルがUIのどこを選択しているかを確認する部分が最初の\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003emouseData\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nf\"\u003eGetMousePointerEventData\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eid\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eのGetMousePointerEventDataメソッドです。\u003cbr\u003e\nなのでこの中を見に行きましょう。\u003c/p\u003e\n\n\u003cp\u003eこの関数はStandaloneInputModuleクラスの親クラスであるPointerInputModuleクラスのメンバ関数です。\u003cbr\u003e\nなのでPointerInputModule.csを読みに行きます。\u003cbr\u003e\n関数は以下のようになっています。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/511e324f78531712acc8d93f17d500a7a1f01bec/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3235353633332f65613832326431642d613365652d303330382d326432372d6139653961373235656331642e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F255633%2Fea822d1d-a3ee-0308-2d27-a9e9a725ec1d.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=7242da285323d7f9ed9fab382d55c9f9\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/255633/ea822d1d-a3ee-0308-2d27-a9e9a725ec1d.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F255633%2Fea822d1d-a3ee-0308-2d27-a9e9a725ec1d.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=82ced13e2d01f0b66c679282dea7eae6 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eここではマウスのポインターの位置からRayを飛ばしポインターの下にあるUIオブジェクトを探す部分とマウスのボタン入力の部分の処理が書かれています。\u003cbr\u003e\n前者のRayを飛ばし下にあるUIオブジェクトをとってくるコードは277行目のeventSystem.RaycastAll(leftData, m_RaycastResultCache);です。\u003c/p\u003e\n\n\u003cp\u003eeventSystemはこのクラスの親クラスであるBaseInputModuleクラスのメンバ変数でEventSystem型です\u003cbr\u003e\nなのでEventSystem.csにあるRaycastAll関数を読みに行きます。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/a41875c4dd70c0397846086f1e469fb88222021e/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3235353633332f34333664643064632d336133332d653564642d336534322d3338653564323531616663362e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F255633%2F436dd0dc-3a33-e5dd-3e42-38e5d251afc6.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=7855974c657bf2f5b1ec7911df9e4cd8\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/255633/436dd0dc-3a33-e5dd-3e42-38e5d251afc6.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F255633%2F436dd0dc-3a33-e5dd-3e42-38e5d251afc6.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=0d813b0ae859c0356abaada214677b6d 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003cbr\u003e\nRaycastAllでは登録されているUIオブジェクトに一つずつRayを飛ばし確認しマウスポインタの下にあれば第二引数のraycastResultsに追加します。\u003c/p\u003e\n\n\u003cp\u003eここで一度UnityのUIオブジェクトの登録についてまとめます。\u003cbr\u003e\nUnityでUIオブジェクトを作りEnableにするとRaycasterManagerクラスとGraphicRegistryクラスに登録されます。\u003c/p\u003e\n\n\u003cp\u003eRaycasterManagerクラスではメンバ変数にBseRaycaster型の配列であるs_RaycastersをもちUIにRayを飛ばす機能のオブジェクトを管理してます。\u003cbr\u003e\nUnityでつくるButtonオブジェクトはBaseRaycasterの子クラスであるGraphicRaycaster型のオブジェクトとしてこの配列に追加されています。\u003c/p\u003e\n\n\u003cp\u003eGraphicRegistryクラスではメンバ変数にCanvas型とGraphic型のDictionary型であるm_Graphicsを持ち、UIオブジェクトを管理しています。\u003cbr\u003e\nUnityでつくるButtonオブジェクトはGraphicクラスの子クラスであるImageクラスとしてこの配列に追加されます。\u003c/p\u003e\n\n\u003cp\u003eRaycastAllの内容に戻ると、\u003cbr\u003e\n登録されているUIにRayを飛ばす機能のオブジェクトは最初の以下の部分で取得されています。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003emodules\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eRaycasterManager\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eGetRaycasters\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eRaycasterManager.GetRaycasters()はStatic関数でRaycasterManager.csを確認しに行くと以下の通りになっています。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/1b4c4b5120e107803075796c5ce1713507cab14c/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3235353633332f31333938343033352d363036652d633438652d303637352d3763303234323066346531612e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F255633%2F13984035-606e-c48e-0675-7c02420f4e1a.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=ebd8fac241b6ffd7031f6b9e464e9335\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/255633/13984035-606e-c48e-0675-7c02420f4e1a.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F255633%2F13984035-606e-c48e-0675-7c02420f4e1a.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=75a3b65ac4dafbefb971217c4f9a47c4 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eよってRaycastAll関数内の各モジュールにRayを飛ばすmodule.Raycast(eventData, raycastResults);の部分でButtonオブジェクトがmoduleに登録されているとき、Raycast関数はGraphicRaycaster.csで書かれているものが呼び出されます。\u003c/p\u003e\n\n\u003cp\u003eなので、それを見に行きます。(このコードは長かったので画像はありません)\u003c/p\u003e\n\n\u003cp\u003eまず121行目のRaycast関数が呼ばれます。\u003cbr\u003e\nその中の126行目のvar canvasGraphics = GraphicRegistry.GetGraphicsForCanvas(canvas);で先ほど説明したGraphicRegistryに登録されたUIオブジェクトを持ってきています。\u003cbr\u003e\nそして、225行目でこのcanvasGraphicsも引数として渡して312行目で宣言されているRaycast関数を呼び出しています。\u003c/p\u003e\n\n\u003cp\u003e312行目のRaycast関数ではcanvasGraphicsに登録されているUIオブジェクトそれぞれにRayを飛ばしマウスポインタの下にあるか確認して下にあれば第五引数のresultsにそのGraphicクラスのオブジェクトを追加します。\u003cbr\u003e\nRayを実際に飛ばす部分は330行目の部分です。\u003c/p\u003e\n\n\u003cp\u003eここまででようやく、PointerInputModule.csの277行目のeventSystem.RaycastAll(leftData, m_RaycastResultCache);の説明がおわり、結局この行が呼ばれればm_RaycastResultCacheにマウスが載っているUIオブジェクトが追加されていることがわかりました。\u003c/p\u003e\n\n\u003cp\u003eこの下の行ではそれらの中から、UIで一番上に配置されているものを取り出して各種処理を行っています。\u003c/p\u003e\n\n\u003cp\u003e以上でUnityのマウスの処理の説明が終わりました。\u003cbr\u003e\nよって今回UIのボタンの当たり判定を変更したいならば、GraphicRaycaster.csの330行目で呼び出している、GraphicクラスのRaycast関数を書き換える必要があります。\u003c/p\u003e\n\n\u003cp\u003eこのRaycast関数の中ではGraphic.csの798行目でIsRaycastLocationValid関数が呼ばれていてこの関数の中で判定の処理が書かれています。\u003cbr\u003e\nこのIsRaycastLocationValid関数はGraphicクラスの子クラスであるImageクラスでvirtualで定義されています。\u003c/p\u003e\n\n\u003cp\u003eつまり今回はこのIsRaycastLocationValid関数を新たなスクリプトでoverrideしてあげ、そのなかに好きな形でも判定ができるようなコードをかいてあげれば成功です。\u003c/p\u003e\n\n\u003cp\u003eここまで読んでくださって本当にありがとうございます！\u003cbr\u003e\nそしてお疲れ様でした。\u003c/p\u003e\n\n\u003cp\u003e次の章ではこのIsRaycastLocationValid関数を書き換えるところを説明します。(多分力つきているので、大分雑になると思います、、、)\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"２今回作成したコードの解説-1\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%EF%BC%92%E4%BB%8A%E5%9B%9E%E4%BD%9C%E6%88%90%E3%81%97%E3%81%9F%E3%82%B3%E3%83%BC%E3%83%89%E3%81%AE%E8%A7%A3%E8%AA%AC-1\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e２．今回作成したコードの解説\u003c/h2\u003e\n\n\u003cp\u003e今回作成したコードは\u003ca href=\"https://qiita.com/sune2/items/cf9ef9d197b47b2d7a10\" id=\"reference-54ddd4287ca33cf27724\"\u003eこちら様\u003c/a\u003eの記事を参考(ほぼ丸パクリ)にさせていただきました。\u003cbr\u003e\n先ほど説明したImageクラスはICanvasRaycastFilterクラスを継承しているので今回はICanvasRaycastFilterクラスを新たなコンポーネントとして実装しその中でIsRaycastLocationValid関数をoverrideするようにしています。\u003c/p\u003e\n\n\u003cp\u003e指定した範囲内にマウスがあるかなどのアルゴリズムに関してはそこまで難しいものは使っていません。ぜひ元記事の方を読まれてください。\u003c/p\u003e\n\n\u003cp\u003e範囲の指定の仕方ですが、SpriteのPhysics Shapeという機能を用いています。UnityのSprite Editorで好きに形を編集し、コード側でそれを取得し判定を行っています。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem.Collections.Generic\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eUnityEngine\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eUnityEngine.UI\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e/// \u0026lt;summary\u0026gt;\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e/// SpriteのPhysicsShapeの内部のみ当たり判定を有効にするRaycastFilter\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e/// \u0026lt;/summary\u0026gt;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nf\"\u003eRequireComponent\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003etypeof\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eImage\u003c/span\u003e\u003cspan class=\"p\"\u003e))]\u003c/span\u003e\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003ePhysicsShapeRaycastFilter\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eMonoBehaviour\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eICanvasRaycastFilter\u003c/span\u003e \u003cspan class=\"c1\"\u003e//\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003ereadonly\u003c/span\u003e \u003cspan class=\"n\"\u003eList\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eVector2\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003e_verts\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eList\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eVector2\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;();\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003eImage\u003c/span\u003e \u003cspan class=\"n\"\u003e_image\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"nf\"\u003eIsRaycastLocationValid\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eVector2\u003c/span\u003e \u003cspan class=\"n\"\u003escreenPoint\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eCamera\u003c/span\u003e \u003cspan class=\"n\"\u003eeventCamera\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eimage\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003e_image\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003e_image\u003c/span\u003e \u003cspan class=\"p\"\u003e==\u003c/span\u003e \u003cspan class=\"k\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"n\"\u003e_image\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eGetComponent\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eImage\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;();\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003erectTransform\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003etransform\u003c/span\u003e \u003cspan class=\"k\"\u003eas\u003c/span\u003e \u003cspan class=\"n\"\u003eRectTransform\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eVector2\u003c/span\u003e \u003cspan class=\"n\"\u003elocal\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(!\u003c/span\u003e\u003cspan class=\"n\"\u003eRectTransformUtility\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eScreenPointToLocalPointInRectangle\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003erectTransform\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003escreenPoint\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eeventCamera\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003eout\u003c/span\u003e \u003cspan class=\"n\"\u003elocal\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003efalse\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003erect\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003erectTransform\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003erect\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n        \u003cspan class=\"c1\"\u003e// スプライト内の座標空間での位置を計算する\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003epivot\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003erectTransform\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003epivot\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003esprite\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eimage\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003esprite\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003elocal\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"p\"\u003e/\u003c/span\u003e \u003cspan class=\"n\"\u003erect\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ewidth\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"n\"\u003epivot\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"p\"\u003e-\u003c/span\u003e \u003cspan class=\"m\"\u003e0.5f\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003esprite\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003erect\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ewidth\u003c/span\u003e \u003cspan class=\"p\"\u003e/\u003c/span\u003e \u003cspan class=\"n\"\u003esprite\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003epixelsPerUnit\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003ey\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003elocal\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ey\u003c/span\u003e \u003cspan class=\"p\"\u003e/\u003c/span\u003e \u003cspan class=\"n\"\u003erect\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eheight\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"n\"\u003epivot\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ey\u003c/span\u003e \u003cspan class=\"p\"\u003e-\u003c/span\u003e \u003cspan class=\"m\"\u003e0.5f\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003esprite\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003erect\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eheight\u003c/span\u003e \u003cspan class=\"p\"\u003e/\u003c/span\u003e \u003cspan class=\"n\"\u003esprite\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003epixelsPerUnit\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003ep\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eVector2\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003ephysicsShapeCount\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003esprite\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eGetPhysicsShapeCount\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n        \u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"n\"\u003ephysicsShapeCount\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e++)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"n\"\u003esprite\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eGetPhysicsShape\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003e_verts\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nf\"\u003eIsInPolygon\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003e_verts\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ep\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"c1\"\u003e// どれかの多角形の内部にあればtrueを返す\u003c/span\u003e\n                \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003efalse\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e/// \u0026lt;summary\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e/// 非凸多角形の内部に点が存在するかどうか\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e/// \u0026lt;/summary\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003estatic\u003c/span\u003e \u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"nf\"\u003eIsInPolygon\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eList\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eVector2\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003epolygon\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eVector2\u003c/span\u003e \u003cspan class=\"n\"\u003ep\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e// pからx軸の正方向への無限な半直線を考えて、多角形との交差回数によって判定する\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003en\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003epolygon\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eCount\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eisIn\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003efalse\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"n\"\u003en\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e++)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003enxt\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ei\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003enxt\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026gt;=\u003c/span\u003e \u003cspan class=\"n\"\u003en\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"n\"\u003enxt\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003ea\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003epolygon\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"p\"\u003e-\u003c/span\u003e \u003cspan class=\"n\"\u003ep\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eb\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003epolygon\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003enxt\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"p\"\u003e-\u003c/span\u003e \u003cspan class=\"n\"\u003ep\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ea\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ey\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eb\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"c1\"\u003e// swap\u003c/span\u003e\n                \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003et\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ea\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n                \u003cspan class=\"n\"\u003ea\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eb\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n                \u003cspan class=\"n\"\u003eb\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003et\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n            \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ea\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ey\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026lt;=\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"n\"\u003eb\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ey\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e \u003cspan class=\"nf\"\u003eCrossProduct\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ea\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eb\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"n\"\u003eisIn\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e!\u003c/span\u003e\u003cspan class=\"n\"\u003eisIn\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003eisIn\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e/// \u0026lt;summary\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e/// 外積\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e/// \u0026lt;/summary\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003estatic\u003c/span\u003e \u003cspan class=\"kt\"\u003efloat\u003c/span\u003e \u003cspan class=\"nf\"\u003eCrossProduct\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eVector2\u003c/span\u003e \u003cspan class=\"n\"\u003eu\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eVector2\u003c/span\u003e \u003cspan class=\"n\"\u003ev\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003eu\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003ev\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ey\u003c/span\u003e \u003cspan class=\"p\"\u003e-\u003c/span\u003e \u003cspan class=\"n\"\u003eu\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ey\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003ev\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e解説に関しては元記事様の説明が非常に分かりやすいので是非読んでみて下さい\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"３今回作成したものの使い方-1\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%EF%BC%93%E4%BB%8A%E5%9B%9E%E4%BD%9C%E6%88%90%E3%81%97%E3%81%9F%E3%82%82%E3%81%AE%E3%81%AE%E4%BD%BF%E3%81%84%E6%96%B9-1\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e３．今回作成したものの使い方\u003c/h2\u003e\n\n\u003cp\u003e使い方は非常に簡単です。\u003c/p\u003e\n\n\u003cp\u003e先ほどのコードをUnityにPhysicsShapeRaycastFilter.csとして作り目的のButtonオブジェクトに着けてあげるだけです。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/13f37b09395a9caea841864b0704a92417c33c6c/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3235353633332f35333535396239352d393033622d626333622d353733382d3063356466663434313764622e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F255633%2F53559b95-903b-bc3b-5738-0c5dff4417db.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=7185cc1cad083077472b8a8a0e90fe9c\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/255633/53559b95-903b-bc3b-5738-0c5dff4417db.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F255633%2F53559b95-903b-bc3b-5738-0c5dff4417db.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=2f1a6449b759dbfc2487e3ace706b317 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eそして、ButtonについているImageコンポーネントに登録している、スプライトをSprit Editorで編集していきます。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/b7f5ac4d8cb43f8ac177ccfd0f8715c8f4eff763/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3235353633332f64373636326364662d613731382d333764652d333630612d6563346434656462653735622e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F255633%2Fd7662cdf-a718-37de-360a-ec4d4edbe75b.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=fddc5843c097a6b294a81f2718f9d49b\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/255633/d7662cdf-a718-37de-360a-ec4d4edbe75b.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F255633%2Fd7662cdf-a718-37de-360a-ec4d4edbe75b.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=0d97bf2a31c0304e03401e5d05a50afd 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003cbr\u003e\n右下のSprite Editorをクリック\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/b7a373da7a9ea437ab874d09038ad89bd96c5162/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3235353633332f62373136343638372d356535372d383739302d643732382d3032623130376336376538612e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F255633%2Fb7164687-5e57-8790-d728-02b107c67e8a.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=5d310c84e32ff0f1258cf0030c6dd281\" alt=\"スクリーンショット (268).png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/255633/b7164687-5e57-8790-d728-02b107c67e8a.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F255633%2Fb7164687-5e57-8790-d728-02b107c67e8a.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=fba9ca9093f332c1977c6b3346df009c 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003cbr\u003e\nこのようなウィンドウが立ち上がるので、左上のボタンをクリックしてCustom Physics Shapeを選択。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/e7d67b02a2c73880f910eb128f2b8170266c92f4/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3235353633332f38626130636165652d343561622d356261372d633736622d6435333934396666633033312e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F255633%2F8ba0caee-45ab-5ba7-c76b-d53949ffc031.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=88fd13c634e9022ae10b94e74c2a2558\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/255633/8ba0caee-45ab-5ba7-c76b-d53949ffc031.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F255633%2F8ba0caee-45ab-5ba7-c76b-d53949ffc031.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=60e5dffd600e85846a8ce47911770b76 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003cbr\u003e\nこのように、ボタンの当たり判定になってほしい部分を描きます。\u003cbr\u003e\n描けたら、右上のApplyボタンを押して閉じましょう。\u003c/p\u003e\n\n\u003cp\u003e以上で作業は終了です。\u003cbr\u003e\nできたボタンを好きな場所に配置しましょう！\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"４実際に作ってみたボタン紹介-1\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%EF%BC%94%E5%AE%9F%E9%9A%9B%E3%81%AB%E4%BD%9C%E3%81%A3%E3%81%A6%E3%81%BF%E3%81%9F%E3%83%9C%E3%82%BF%E3%83%B3%E7%B4%B9%E4%BB%8B-1\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e４．実際に作ってみたボタン紹介\u003c/h2\u003e\n\n\u003cp\u003e実際にうまくいっているか確認してみましょう。\u003cbr\u003e\n今回できたボタンが下の画像です。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/ba46e783a00fadace8782b65c54b7bbe98e75154/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3235353633332f39303533343263352d323039312d363764312d393634312d6565643762636332656462642e676966\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F255633%2F905342c5-2091-67d1-9641-eed7bcc2edbd.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=35c268a586bff880d71c20ba04855494\" alt=\"Videotogif-3.gif\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/255633/905342c5-2091-67d1-9641-eed7bcc2edbd.gif\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F255633%2F905342c5-2091-67d1-9641-eed7bcc2edbd.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=1d58186c827a02efd028e708c9337bb1 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e確かに星のへこんでいる部分では反応しないようになりました。\u003c/p\u003e\n\n\u003cp\u003e記事は以上になります！\u003cbr\u003e\nお疲れ様でした。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"感想\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%84%9F%E6%83%B3\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e感想\u003c/h1\u003e\n\n\u003cp\u003e非常に疲れました。\u003c/p\u003e\n\n\u003cp\u003eコードって自分で理解できても人に説明するのってすごい難しいってことを改めて感じました。\u003cbr\u003e\nUnity内部のコードはそこまで不可能なくらい難しくないので、勉強したい人はぜひ読んでみるといいと思いました。\u003c/p\u003e\n","createdAt":"2020-12-11T07:12:30Z","elapsedYearsFromLastModifiedAt":0,"encryptedId":"6icZuxpwiaebZW1BJvpdpcx9QoyeztEMWw==--CBHtT0pNskKkZH+d--emsJHAQcF4/FcdsZRQMG7w==","isBanned":false,"isDeprecated":false,"isDestroyableByViewer":false,"isEditRequestReadableByViewer":true,"isEditRequestSendableByViewer":true,"isLikableByViewer":true,"isLikedByViewer":false,"isPublic":true,"isSlide":false,"isStockableByViewer":true,"isStockedByViewer":false,"isSubscribableByViewer":false,"isSubscribedByViewer":false,"isUpdatableByViewer":false,"isUpdated":false,"lastModifiedAt":"2020-12-11T07:12:30Z","likesCount":7,"linkUrl":"https://qiita.com/MATU0055/items/2e1a306496d76bf8bfbe","organization":null,"originalId":1355425,"stockedCount":0,"title":"【Unity】複雑な形のボタンの当たり判定をしっかり作れるようにする","toc":"\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%88%9D%E3%82%81%E3%81%AB\"\u003e初めに\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%B0%8E%E5%85%A5\"\u003e導入\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%81%93%E3%81%AE%E8%A8%98%E4%BA%8B%E3%81%A7%E3%81%AE%E6%9C%80%E7%B5%82%E7%9B%AE%E6%A8%99\"\u003eこの記事での最終目標\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AF%BE%E8%B1%A1%E8%AA%AD%E8%80%85\"\u003e対象読者\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E7%9B%AE%E6%AC%A1\"\u003e目次\u003c/a\u003e\n\u003cul\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%EF%BC%91unity%E3%81%AE%E3%83%9E%E3%82%A6%E3%82%B9%E3%83%9D%E3%82%A4%E3%83%B3%E3%82%BF%E3%83%BC%E3%81%AE%E5%87%A6%E7%90%86%E9%83%A8%E5%88%86%E3%81%AE%E3%82%B3%E3%83%BC%E3%83%89%E8%A7%A3%E8%AA%AC\"\u003e１．Unityのマウスポインターの処理部分のコード解説\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%EF%BC%92%E4%BB%8A%E5%9B%9E%E4%BD%9C%E6%88%90%E3%81%97%E3%81%9F%E3%82%B3%E3%83%BC%E3%83%89%E3%81%AE%E8%A7%A3%E8%AA%AC\"\u003e２．今回作成したコードの解説\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%EF%BC%93%E4%BB%8A%E5%9B%9E%E4%BD%9C%E6%88%90%E3%81%97%E3%81%9F%E3%82%82%E3%81%AE%E3%81%AE%E4%BD%BF%E3%81%84%E6%96%B9\"\u003e３．今回作成したものの使い方\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%EF%BC%94%E5%AE%9F%E9%9A%9B%E3%81%AB%E4%BD%9C%E3%81%A3%E3%81%A6%E3%81%BF%E3%81%9F%E3%83%9C%E3%82%BF%E3%83%B3%E7%B4%B9%E4%BB%8B\"\u003e４．実際に作ってみたボタン紹介\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%EF%BC%91unity%E3%81%AE%E3%83%9E%E3%82%A6%E3%82%B9%E3%83%9D%E3%82%A4%E3%83%B3%E3%82%BF%E3%81%AE%E5%87%A6%E7%90%86%E9%83%A8%E5%88%86%E3%81%AE%E3%82%B3%E3%83%BC%E3%83%89%E8%A7%A3%E8%AA%AC\"\u003e１．Unityのマウスポインタ―の処理部分のコード解説\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%EF%BC%92%E4%BB%8A%E5%9B%9E%E4%BD%9C%E6%88%90%E3%81%97%E3%81%9F%E3%82%B3%E3%83%BC%E3%83%89%E3%81%AE%E8%A7%A3%E8%AA%AC-1\"\u003e２．今回作成したコードの解説\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%EF%BC%93%E4%BB%8A%E5%9B%9E%E4%BD%9C%E6%88%90%E3%81%97%E3%81%9F%E3%82%82%E3%81%AE%E3%81%AE%E4%BD%BF%E3%81%84%E6%96%B9-1\"\u003e３．今回作成したものの使い方\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%EF%BC%94%E5%AE%9F%E9%9A%9B%E3%81%AB%E4%BD%9C%E3%81%A3%E3%81%A6%E3%81%BF%E3%81%9F%E3%83%9C%E3%82%BF%E3%83%B3%E7%B4%B9%E4%BB%8B-1\"\u003e４．実際に作ってみたボタン紹介\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cli\u003e\n\u003ca href=\"#%E6%84%9F%E6%83%B3\"\u003e感想\u003c/a\u003e\n\u003c/li\u003e\n\n","totalPv":18126,"uuid":"2e1a306496d76bf8bfbe","banReason":null,"adventCalendarItem":{"day":11,"calendar":{"name":"Life is Tech ! #2","urlName":"life-is-tech-2","year":2020,"organization":null}},"author":{"encryptedId":"OlamUA1eiqcr6eOAc6WvBBVW59q+--RiAFfJFdtb5sI6HJ--a4r7AAj/uKMFK8gADjAiRQ==","originalId":255633,"description":"","facebookUrl":null,"githubUrl":"https://github.com/shuhei55","isBlockingViewer":false,"isFollowableByViewer":true,"isFollowedByViewer":false,"isTweetWebNotificationReceivable":true,"linkedinUrl":null,"name":"","profileImageUrl":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/255633/profile-images/1607689123","profileImageUrlW48":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F255633%2Fprofile-images%2F1607689123?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=48\u0026s=7a9eefb94dc635a1b10ae652ab1db76c","profileImageUrlW75":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F255633%2Fprofile-images%2F1607689123?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=74ec79305a1dfcb94d03f792632f5042","urlName":"MATU0055","websiteUrl":null,"twitterUrl":"https://twitter.com/MATU0055","twitterUrlName":"MATU0055","revealedOrganizations":{"edges":[]}},"tags":[{"name":"C#","urlName":"csharp"},{"name":"Unity","urlName":"unity"},{"name":"Unty","urlName":"unty"}],"followingLikers":{"edges":[]},"comments":{"totalCount":0}},"comments":[],"client":null,"ads_event_emitter":null}}</script>
