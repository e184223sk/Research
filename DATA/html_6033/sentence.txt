More than 3 years have passed since last update.TerrariaというゲームでModを利用するのに、ゲーム中にリアルタイムで英語を翻訳したくなり、とりあえず簡単に出来そうな方法でやってみたものです。APIは有料ですし、許されるであろう方法としてブラウザーでアクセスするのと同じ手段で翻訳する事にしました。
まずは試しに翻訳する文字列を含めたUrlを送って、DocumentCompletedで読み取ってみようとしましたが、うまくいきませんでしたので、翻訳ボタンを押して少し待機して結果欄から読み取る方法としています。
タスクの処理など含めて、まだまだ微妙なところはありますが、とりあえず次の方法で実現できています。
WebBrowserを利用しているのは、単に操作が楽であったのと、Terrariaで利用できる方法であったからです。
他の方法でもやりようはあると思いますし、そういったサンプルも他に多数あるかと思います。このコードはTerrariaというゲームで、アイテムにカーソルを合わせた際に表示されるツールチップを置き換える際に利用しています。
ツールチップの表示はカーソルを合わしている間、毎フレーム読込まれるので、翻訳が出来た瞬間に、string.Empty以外が返されて、その翻訳されたテキストに置き換えるようにしています。翻訳された際に明確に結果を得たい場合、同期処理とするか、あるいは翻訳完了時に通知するなりの対応が必要になるかと思います。Google翻訳の仕様を十分に把握しておらず、もっと確実な方法があるかもしれませんので、その辺を調べる必要があるかとは思っています。


