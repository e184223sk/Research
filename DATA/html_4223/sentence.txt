More than 1 year has passed since last update.月間ランキング機能をNCMBを使って実装できないか色々試した結果、判明した仕様や注意点についてメモ書きします。よく調べれば公式ドキュメントに載ってる内容と被ってるかもしれません。データストアのcreateDate/updateDateフィールドが曲者だった。これらはデフォルトで設定されるフィールドですが、管理画面で型を調べようとしてもよく分からないし（多分DateTime型でいいんだろうけど）、手動で変更できないし、扱いが特殊になってます。で、実際にクライアント型で操作する際にも癖があったのでそれらをメモ書きします。結果をソートするquery.OrderByDescending()では、createDate/updateDateを引数に設定してちゃんと動きました。うんうん。月間ランキングには期間で抽出する必要があったので、恐る恐るquery.WhereGreaterThanOrEqualTo()にDateTime型で渡してあげると、これも動作してくれるようです。よかったよかった。通常、queryで取得したNCMBObjectは、NCMBObject["フィールド名"]でアクセスできます。自前で実装したフィールドでこれで大丈夫です。しかし、同じノリでNCMBObject["createDate"]やNCMBObject["updateDate"]と書いて取得しようとすると「そんなkeyはない！」と怒られてエラーで落ちました。NCMBObject.Keys で含まれるKeyの一覧を取れるので見てみると、確かに無い。
無いのかよ・・・※追記
コメントで教えて頂きましたが、どうやらプロパティで取得できるようです。厳密な仕様を確かめようと分単位でquery.WhereGreaterThanOrEqualTo()を実行して調べてわかったのですが、サーバー側では標準時刻で保存されてました。↓↓管理画面上は日本時刻で表示されている（ように見える）ので注意ですね。



