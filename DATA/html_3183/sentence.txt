More than 1 year has passed since last update.以前の記事で、View(コードビハインド)でしかできないことがあるので、コードビハインドに書いたメソッドを、ViewModelから呼ぶ、ということを実験した。ViewModelのタイミングで(例えば、ボタンを押したときにプロパティの値をif分で判定して、条件を満たすときだけ)Viewのメソッドを呼ぶ、とかだと以前の記事のやり方をしないといけなさそうだが、だた単純に「ボタンを押されたときにViewのメソッドを呼びたい」という場合なら、もっと簡易的に簡単にできる方法を思いついたので備忘メモする。下記を使う。やることとしては、だけ。今回やりたかったのが、MainWindow.xamlの中の「ViewModelのメソッドの呼び方３(コードビハインドの中のメソッドを呼ぶ)」のところ。&lt;i:EventTrigger EventName="MouseDown"&gt;で、TextBlockでマウスが押されたときに、コードビハインドに書かれたメソッド「CodeBehindFunc」を呼んでいる。この書き方であれば、「EventTrigger」で表現できるイベントであれば、「ViewModelのICommand」「ViewModelクラスのメソッド」「コードビハインドのメソッド」のどれでも呼べる。EventTriggerのEventNameを変えてやれば、クリックしたときだけでなく、表示時に一回なにかする、とかもできる。また、サンプルのように、&lt;i:EventTrigger EventName="MouseDown"&gt;の中に書いたTriggerActionを継承したクラスのオブジェクト(CallMethodActionやInvokeCommandActionなど)をセットしてやれば、上から順番に実行してくれるので、ViewModelのICommandとコードビハインドのメソッドの両方を実行するとかもできそう。(それが良いかどうかは別問題)書き終わってから、「コントロールのイベントハンドラを追加して、そこに処理を書けばこんなことしなくて済むのでは？」と思ってしまった。もしかすると、i:EventTriggerよりも、PropertyChangedEventTriggerを使って、ViewModelのプロパティが変わった時に、コードビハインドのメソッドを呼べる、とかの方が、真価なのかもしれない。[C#/WPF]ビューモデルからビューのメソッドを呼ぶ
https://qiita.com/tera1707/items/158db72db21b17a1d9c5【C#/WPF】EventTriggerを使って、Buttonでなくてもクリック時のCommandをかけるようにする
https://qiita.com/tera1707/items/7ecde6e97a19437cbf72WPF4.5入門 その58「Behavior」
https://blog.okazuki.jp/entry/2014/12/21/205558


