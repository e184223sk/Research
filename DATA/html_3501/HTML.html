<!DOCTYPE html><html><head><meta charset="utf-8" /><title>Unity 公式チュートリアル「Space Shooter tutorial」をコードから理解してみる - Qiita</title><meta content="width=device-width,initial-scale=1,shrink-to-fit=no,viewport-fit=cover" name="viewport" /><meta content="#55c500" name="theme-color" /><meta content="XWpkTG32-_C4joZoJ_UsmDUi-zaH-hcrjF6ZC_FoFbk" name="google-site-verification" /><meta content="telephone=no" name="format-detection" /><link rel="canonical" href="https://qiita.com/yamachan360/items/3690d4a4de5e6f02b0b9" /><link href="/manifest.json" rel="manifest" /><link href="/opensearch.xml" rel="search" title="Qiita" type="application/opensearchdescription+xml" /><link as="script" href="https://www.googletagservices.com/tag/js/gpt.js" rel="preload" /><link href="https://securepubads.g.doubleclick.net" rel="preconnect" /><script async="" src="https://www.googletagservices.com/tag/js/gpt.js"></script><meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="2pgzgoEaTpdxms2RQ5tl//l+shbBitz3OSkta7PI4rhl1JAz2BlPLrnmhzhSO2xZTLTO3ad3ObVz0iXs1Bgjig==" /><link rel="shortcut icon" type="image/x-icon" href="https://cdn.qiita.com/assets/favicons/public/production-c620d3e403342b1022967ba5e3db1aaa.ico" /><link rel="apple-touch-icon" type="image/png" href="https://cdn.qiita.com/assets/favicons/public/apple-touch-icon-ec5ba42a24ae923f16825592efdc356f.png" /><link rel="stylesheet" media="all" href="https://cdn.qiita.com/assets/public/article-2eaa7dbedc42a8ea65c722cda46d0ebb.min.css" /><script src="https://cdn.qiita.com/assets/public/v3-article-bundle-63de2d91fef827269d3f6b958db2335b.min.js" defer="defer"></script><meta name="twitter:card" content="summary_large_image"><meta content="@Qiita" name="twitter:site" /><meta content="@yamachan360" name="twitter:creator" /><meta property="og:type" content="article"><meta property="og:title" content="Unity 公式チュートリアル「Space Shooter tutorial」をコードから理解してみる - Qiita"><meta property="og:image" content="https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0&amp;w=1200&amp;mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND1WVzVwZEhrZzVZV3M1YnlQNDRPQjQ0T2w0NE84NDRPSTQ0T3E0NEtpNDRPcjQ0Q01VM0JoWTJVZ1UyaHZiM1JsY2lCMGRYUnZjbWxoYk9PQWplT0NrdU9Dcy1PRHZPT0RpZU9CaS1PQ2llZVFodWluby1PQmwtT0JwdU9Cdi1PQ2l3JnR4dC1jb2xvcj0lMjMzMzMmdHh0LWZvbnQ9SGlyYWdpbm8lMjBTYW5zJTIwVzYmdHh0LXNpemU9NTQmdHh0LWNsaXA9ZWxsaXBzaXMmdHh0LWFsaWduPWNlbnRlciUyQ21pZGRsZSZzPWQ0MzFmYjU1M2Q5MzM1NDJkN2Q1OGE2MTAwNDFhMzM5&amp;mark-align=center%2Cmiddle&amp;blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RSGxoYldGamFHRnVNell3JnR4dC1jb2xvcj0lMjMzMzMmdHh0LWZvbnQ9SGlyYWdpbm8lMjBTYW5zJTIwVzYmdHh0LXNpemU9NDUmdHh0LWFsaWduPXJpZ2h0JTJDYm90dG9tJnM9NjUzMDVjNDZhM2Q2NWU0NmM5NDhlMjA1YzcyNTJkZTU&amp;blend-align=center%2Cmiddle&amp;blend-mode=normal&amp;s=2035a0c814fbce546520379f567cdd7e"><meta property="og:description" content="10連休も近いですし、Unity で自分の好きなシューティングゲームでも作成しようと考えました。

これまで Unity で 簡単なアニメーション を試したり、Unity ちゃんを動かしたり して遊んできましたし、他の環境で ゲームを..."><meta content="https://qiita.com/yamachan360/items/3690d4a4de5e6f02b0b9" property="og:url" /><meta content="Qiita" property="og:site_name" /><meta content="564524038" property="fb:admins" /><meta content="C#,Unity,初心者,ゲーム制作" name="keywords" /><script>!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window, document,'script',
'https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '668972150489891');
fbq('track', 'PageView');</script><style data-emotion-css="17jxvjw 11t2ec1 1dvr2p8 18lkoru 1g4cku8 1iupg5d ijvq0v 15cocm3 12rp90f 115f4t 1b8uj5v 79elbk 16hhh7b fcbn8c 1gj7nt 154zy0m yikrym 1jqivyb 1ode1bp le4d8r 1hbd3g7 1nzh4zz 38fzdi helsa7 8qb8m4 2imjyh he5w1s 70qvj9 3ojehk 100alwu 1dtnjt5 10ougpm 1ay9vb9 m19uds cgzq40 1wa99t2 1l3zk9f 4czcte 1yzj1fm 1uv1qiv 109dbrr 5jpx49 mnxgyc 1vlpknv fsjkhv 1b17vb0 7i7f4d"}>.css-17jxvjw{display:grid;display:-ms-grid;grid-template-columns:80px minmax(0,1fr) 300px;-ms-grid-columns:80px minmax(0,1fr) 300px;grid-template-rows:minmax(270px,auto) 1fr;-ms-grid-rows:minmax(270px,auto) 1fr;max-width:1280px;margin-right:auto;margin-left:auto;padding-top:24px;padding-right:24px;padding-left:24px;}@media (max-width:1200px){.css-17jxvjw{padding-bottom:0;padding-left:0;padding-right:0;}}@media (max-width:992px){.css-17jxvjw{grid-template-columns:80px 452px 300px;-ms-grid-columns:80px 452px 300px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}}@media (max-width:770px){.css-17jxvjw{display:block;}}@media (max-width:480px){.css-17jxvjw{padding-top:0;}}.css-11t2ec1{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;z-index:5;position:-webkit-sticky;position:sticky;top:calc(56px + 24px + 16px + 32px - 16px);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:16px;width:80px;}.css-11t2ec1:after{content:'';display:table;}.css-11t2ec1:before{content:'';display:table;}@media (max-width:770px){.css-11t2ec1{display:none;}}.css-1dvr2p8{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-18lkoru{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;background-color:#FFFFFF;}.css-1g4cku8{display:inline-block;vertical-align:middle;height:20px;width:20px;fill:#55C500;}.css-1iupg5d{color:#55C500;cursor:pointer;font-size:14px;font-weight:bold;}.css-ijvq0v{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-15cocm3{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#FFFFFF;border:2px solid #6E6F70;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:2px 0px 0px;width:40px;}.css-12rp90f{display:inline-block;vertical-align:bottom;height:17.77777777777778px;width:16px;fill:#6E6F70;}.css-115f4t{color:#6E6F70;font-size:14px;font-weight:bold;}.css-1b8uj5v{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;margin-bottom:16px;padding:0;}.css-79elbk{position:relative;}.css-16hhh7b{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;padding:0;}.css-fcbn8c{display:none;bottom:initial;left:initial;right:initial;top:initial;left:100%;top:calc(-8px - (14px * 1.8) - 16px - 4px);}.css-1gj7nt{color:rgba(0,0,0,0.6);font-size:14px;font-weight:bold;line-height:1.8;padding:8px 16px;}.css-154zy0m{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.87);cursor:pointer;font-size:16px;font-weight:normal;line-height:1.8;padding:4px 16px;}.css-154zy0m:hover{-webkit-text-decoration:none;text-decoration:none;background-color:#F2F2F2;}.css-yikrym{width:20px;}.css-1jqivyb{color:rgba(0,0,0,0.6);font-size:13px;}.css-1ode1bp{background-color:rgba(0,0,0,0.12);height:1px;width:100%;margin:8px 0;}.css-le4d8r{display:inline-block;vertical-align:middle;height:13px;width:13px;fill:rgba(0,0,0,0.6);}.css-1hbd3g7{height:250px;}.css-1nzh4zz{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:16px 32px;background-color:#FBE69E;color:rgba(0,0,0,0.87);line-height:1.5;font-weight:600;}@media (max-width:770px){.css-1nzh4zz{padding:16px;}}.css-38fzdi{color:#CA832A;margin-right:4px;}.css-helsa7{background-color:#FFFFFF;padding:32px;margin-bottom:24px;}@media (max-width:992px){.css-helsa7{margin:0 auto 40px;}}@media (max-width:480px){.css-helsa7{margin:0 0 40px;padding:32px 16px;}}.css-8qb8m4{margin-bottom:48px;}.css-2imjyh{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-he5w1s{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;width:100%;}@media (max-width:770px){.css-he5w1s{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}}.css-70qvj9{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.css-3ojehk{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;margin-right:4px;}.css-100alwu{display:inline-block;border-radius:50%;line-height:1;overflow:hidden;vertical-align:middle;}.css-1dtnjt5{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-10ougpm{color:rgba(0,0,0,0.87);font-size:14px;font-weight:600;line-height:1.8;margin-right:4px;text-wrap:break-word;word-break:break-all;}.css-1ay9vb9{margin-right:16px;}.css-m19uds{color:rgba(0,0,0,0.6);font-size:14px;line-height:1.8;}.css-cgzq40{color:rgba(0,0,0,0.87);font-size:32px;font-weight:bold;line-height:1.4;margin-top:8px;text-wrap:break-word;word-break:break-all;}.css-1wa99t2{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.6);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:8px;}.css-1l3zk9f{color:rgba(0,0,0,0.6);font-size:20px;margin-right:8px;}.css-4czcte{margin-right:4px;color:inherit;font-size:14px;line-height:1.8;}.css-4czcte:not(:last-child)::after{content:',';margin-right:4px;}.css-1yzj1fm{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:32px;}.css-1uv1qiv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-size:20px;height:32px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin-right:16px;outline:none;padding:0;width:32px;}.css-109dbrr{background-color:#F9F9F9;border-top:1px solid rgba(0,0,0,0.12);bottom:0;box-shadow:0px 1px 4px rgba(0,0,0,0.14);display:none;height:calc(env(safe-area-inset-bottom,0px) + 56px);-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding-bottom:env(safe-area-inset-bottom);position:-webkit-sticky;position:sticky;width:100%;z-index:2000;}@media (max-width:770px){.css-109dbrr{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}.css-5jpx49{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:space-evenly;-webkit-justify-content:space-evenly;-ms-flex-pack:space-evenly;justify-content:space-evenly;width:100%;}.css-mnxgyc{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1vlpknv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;margin-right:4px;background-color:#FFFFFF;}.css-fsjkhv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1b17vb0{color:#6E6F70;font-size:14px;font-weight:bold;margin-left:4px;}.css-7i7f4d{display:none;bottom:initial;left:initial;right:initial;top:initial;bottom:32px;right:0;}</style></head><body><div class="allWrapper"><div><div id="GlobalHeader-react-component-938f13c3-d923-4c70-8e42-15a6322acf3a"><div class="st-Header"><div class="st-Header_container"><div class="st-Header_start"><a href="/" class="st-Header_logo"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 426.57 130"><circle cx="167.08" cy="21.4" r="12.28"></circle><path d="M250.81 29.66h23.48v18.9h-23.48z"></path><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z"></path><circle cx="216.33" cy="21.4" r="12.28"></circle></svg></a><div class="st-Header_communitySelector" tabindex="0"><span class="fa fa-caret-down"></span></div><div class="st-Header_dropdown"><div class="st-Header_dropdownHeading">Qiita Teams that are logged in</div><div class="st-Header_dropdownItemNote">You are not logged in to any team</div><hr class="st-Header_dropdownDivider st-Header_dropdownDivider-shrink"/><a href="https://teams-center.qiita.com/find_team" class="st-Header_dropdownItem"><span class="fa fa-fw fa-sign-in st-Header_dropdownItemIcon"></span><div>Log in to Qiita Team</div></a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Community</div><a href="/organizations" class="st-Header_dropdownItem">Organization</a><a href="/official-events/open" class="st-Header_dropdownItem">Event</a><a href="/advent-calendar" class="st-Header_dropdownItem">Advent Calendar</a><a href="https://qiitadon.com/" class="st-Header_dropdownItem" target="_blank">Qiitadon (β)</a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Service</div><a href="https://jobs.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Jobs</a><a href="https://zine.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Zine</a><a href="https://blog.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Blog</a></div><form class="st-Header_search" action="/search" method="get"><span class="fa fa-search st-Header_searchIcon"></span><input type="search" class="st-Header_searchInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form><form class="st-Header_searchModal" action="/search" method="get"><input type="text" class="st-Header_searchModalInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form></div><div class="st-Header_end"><div class="st-Header_searchButton"><span class="fa fa-search"></span></div><a class="st-Header_signupButton" href="/signup?redirect_to=%2Fyamachan360%2Fitems%2F3690d4a4de5e6f02b0b9">Signup</a><a class="st-Header_loginLink" href="/login?redirect_to=%2Fyamachan360%2Fitems%2F3690d4a4de5e6f02b0b9">Login</a></div><div class="st-Header_overlay"></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="GlobalHeader" data-dom-id="GlobalHeader-react-component-938f13c3-d923-4c70-8e42-15a6322acf3a">{"unreadNotificationsCount":null,"realms":[{"humanName":"Qiita","isCurrentRealm":true,"isQiita":true,"isQiitaTeam":false,"loggedInUser":null,"teamId":null,"url":"https://qiita.com/"}],"teamFindUrl":"https://teams-center.qiita.com/find_team","isTeamOnlyUser":null,"currentUser":null}</script>
      
</div><div class="st-HeaderAlert st-HeaderAlert-warning"><div class="st-HeaderAlert_body"></div></div><script type="application/ld+json">{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"/","name":"Qiita"}},{"@type":"ListItem","position":2,"item":{"@id":"/tags/csharp","name":"C#"}}]}</script><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","datePublished":"2019-04-21T17:24:00.000+09:00","dateModified":"2019-05-06T22:47:49.000+09:00","headline":"Unity 公式チュートリアル「Space Shooter tutorial」をコードから理解してみる","image":"https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0\u0026w=1200\u0026mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND1WVzVwZEhrZzVZV3M1YnlQNDRPQjQ0T2w0NE84NDRPSTQ0T3E0NEtpNDRPcjQ0Q01VM0JoWTJVZ1UyaHZiM1JsY2lCMGRYUnZjbWxoYk9PQWplT0NrdU9Dcy1PRHZPT0RpZU9CaS1PQ2llZVFodWluby1PQmwtT0JwdU9Cdi1PQ2l3JnR4dC1jb2xvcj0lMjMzMzMmdHh0LWZvbnQ9SGlyYWdpbm8lMjBTYW5zJTIwVzYmdHh0LXNpemU9NTQmdHh0LWNsaXA9ZWxsaXBzaXMmdHh0LWFsaWduPWNlbnRlciUyQ21pZGRsZSZzPWQ0MzFmYjU1M2Q5MzM1NDJkN2Q1OGE2MTAwNDFhMzM5\u0026mark-align=center%2Cmiddle\u0026blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RSGxoYldGamFHRnVNell3JnR4dC1jb2xvcj0lMjMzMzMmdHh0LWZvbnQ9SGlyYWdpbm8lMjBTYW5zJTIwVzYmdHh0LXNpemU9NDUmdHh0LWFsaWduPXJpZ2h0JTJDYm90dG9tJnM9NjUzMDVjNDZhM2Q2NWU0NmM5NDhlMjA1YzcyNTJkZTU\u0026blend-align=center%2Cmiddle\u0026blend-mode=normal\u0026s=2035a0c814fbce546520379f567cdd7e","mainEntityOfPage":"https://qiita.com/yamachan360/items/3690d4a4de5e6f02b0b9","author":{"@type":"Person","address":"Tokyo, Japan","email":null,"identifier":"yamachan360","name":"yamachan360","image":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F193519%2Fprofile-images%2F1547708105?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=2755ac3d43b35c70e8ef1ac2554050b9","url":"https://qiita.com/yamachan360","description":"Web系開発者。映画,特撮,功夫,酒, ロボ,アニメ,模型,ゲーム, 懐パソ(PC6001, MSX, X68000), JavaScript/NodeJS, Unity, RPGツクール, プチコン, AWS, 開発環境なんでも好き。修行中。\r\n\r\n投稿は全て個人の見解です。\r\nPosts are my own.","memberOf":[]},"publisher":{"@type":"Organization","name":"Qiita","logo":{"@type":"ImageObject","url":"//cdn.qiita.com/assets/public/qiita-logo-c39ded593afa388e2e1ba435b110554e.png"}}}</script><style type="text/css">.wb-CampaignLink {
  background-color: #333333;
  width: 100%;
}

.wb-CampaignLink_container {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  max-width: 1100px;
  margin: 0 auto;
  font-size: 13px;
  padding: 0.8em;
}
.wb-CampaignLink_container > a {
  color: #fff;
}

.wb-CampaignLink_container > a:hover {
  text-decoration: underline;
}</style><div class="wb-CampaignLink"><div class="wb-CampaignLink_container"><a target="_blank" id="header_text_message_1" href="https://increments.connpass.com/event/211948/">【9/9(木)開催】Qiitaの過去と未来についてお話しします！Qiita エンジニアフェスタ 2021 Online Meetup</a><a target="_blank" id="header_text_message_2" href="https://increments.connpass.com/event/211948/">詳しくはこちら</a></div><script>td.trackEvent(
  'front_events',
  {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"yamachan360","type":"items","id":"3690d4a4de5e6f02b0b9"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Show","data":{"message":"【9/9(木)開催】Qiitaの過去と未来についてお話しします！Qiita エンジニアフェスタ 2021 Online Meetup","url":"https://increments.connpass.com/event/211948/","sub_message":"詳しくはこちら"}}
)</script><script>document.getElementById('header_text_message_1').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"yamachan360","type":"items","id":"3690d4a4de5e6f02b0b9"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":2,"pos_id":"header_text_message_1","message":"【9/9(木)開催】Qiitaの過去と未来についてお話しします！Qiita エンジニアフェスタ 2021 Online Meetup","url":"https://increments.connpass.com/event/211948/","sub_message":"詳しくはこちら"}}
  )
})</script><script>document.getElementById('header_text_message_2').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"yamachan360","type":"items","id":"3690d4a4de5e6f02b0b9"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":2,"pos_id":"header_text_message_2","message":"【9/9(木)開催】Qiitaの過去と未来についてお話しします！Qiita エンジニアフェスタ 2021 Online Meetup","url":"https://increments.connpass.com/event/211948/","sub_message":"詳しくはこちら"}}
  )
})</script></div><script type="application/json" id="js-react-on-rails-context">{"railsEnv":"production","inMailer":false,"i18nLocale":"en","i18nDefaultLocale":"en","href":"https://qiita.com/yamachan360/items/3690d4a4de5e6f02b0b9","location":"/yamachan360/items/3690d4a4de5e6f02b0b9","scheme":"https","host":"qiita.com","port":null,"pathname":"/yamachan360/items/3690d4a4de5e6f02b0b9","search":null,"httpAcceptLanguage":null,"actionPath":"public/items#show","settings":{"analyticsTrackingId":"UA-24675221-12","assetsMap":{},"csrfToken":"mjRwJyeztW7Q2k1gSi9BMIV88TlNpqUDV/aSaQTR3M8leNOWfrC01ximB8lbj0iWMLaN8itbQEEdDZruYwEd/Q==","locale":"en"},"currentUser":null,"isLoggedIn":false,"recaptchaSiteKey":"6LfNkiQTAAAAAM3UGnSquBy2akTITGNMO_QDxMw6","serverSide":false}</script>
<div id="PersonalArticlePage-react-component-8b90a804-2e28-49ec-9277-9f8ea9849856"><div class="p-items_wrapper"><div class=" css-17jxvjw"><div class="css-11t2ec1"><div class="css-1dvr2p8"><button class=" css-18lkoru"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/yamachan360/items/3690d4a4de5e6f02b0b9/likers" class="css-1iupg5d">2</a></div><div class="css-ijvq0v"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-115f4t">1</span></div><div class="css-1b8uj5v"><span class="fa fa-twitter"></span></div><div class="css-1b8uj5v"><span class="fa fa-facebook"></span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-fcbn8c"><div class="css-1gj7nt">Improve article</div><a href="/drafts/3690d4a4de5e6f02b0b9/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/yamachan360/items/3690d4a4de5e6f02b0b9/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/yamachan360/items/3690d4a4de5e6f02b0b9/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/yamachan360/items/3690d4a4de5e6f02b0b9/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/yamachan360/items/3690d4a4de5e6f02b0b9.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div><div class="p-items_options"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_toc"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_main"><div class="css-1nzh4zz"><span class="fa fa-fw fa-warning css-38fzdi"></span><p>More than 1 year has passed since last update.</p></div><div class="css-helsa7"><div class="css-8qb8m4"><div class="css-2imjyh"><div class="css-he5w1s"><div class="css-70qvj9"><div class="css-3ojehk"><a href="/yamachan360"><img class="css-100alwu eyfquo10" src="https://qiita-image-store.s3.amazonaws.com/0/193519/profile-images/1547708105" width="24" height="24" loading="lazy"/></a></div><div class="css-1dtnjt5"><a href="/yamachan360" class="css-10ougpm">@<!-- -->yamachan360</a><div class="css-1ay9vb9"><span><meta content="2019-04-21T08:24:00Z"/><time dateTime="2019-05-06T13:47:49Z" class="css-m19uds">updated at 2019-05-06</time></span></div></div></div></div></div><h1 class="css-cgzq40">Unity 公式チュートリアル「Space Shooter tutorial」をコードから理解してみる</h1><div class="css-1wa99t2"><span class="fa fa-tags mr-1of2 css-1l3zk9f" aria-hidden="true"></span><a href="/tags/csharp" class="css-4czcte">C#</a><a href="/tags/unity" class="css-4czcte">Unity</a><a href="/tags/%e5%88%9d%e5%bf%83%e8%80%85" class="css-4czcte">初心者</a><a href="/tags/%e3%82%b2%e3%83%bc%e3%83%a0%e5%88%b6%e4%bd%9c" class="css-4czcte">ゲーム制作</a></div></div><section class="it-MdContent"><div id="personal-public-article-body"><div><p>10連休も近いですし、Unity で自分の好きなシューティングゲームでも作成しようと考えました。</p>

<p>これまで Unity で <a href="https://qiita.com/yamachan360/items/38b76a67ee0faef7e6b0" id="reference-d042a6b4fbcd3d09973e">簡単なアニメーション</a> を試したり、<a href="https://qiita.com/yamachan360/items/d0d01bb644b81a0eb3e1" id="reference-d10ed80a1a0f7c6ffe3f">Unity ちゃんを動かしたり</a> して遊んできましたし、他の環境で <a href="http://smilebasic.com/library/ogiri/" rel="nofollow noopener" target="_blank">ゲームを作成した</a> 経験はあるので、まあなんとか作れるのではないか、と。</p>

<p>先週は <a href="https://qiita.com/yamachan360/items/2f909a11665161a6b485" id="reference-2a46d2e549899f24eba9">uGUI の基礎を理解</a> してみたので、今回は公式チュートリアルにある <a href="https://unity3d.com/jp/learn/tutorials/s/space-shooter-tutorial" rel="nofollow noopener" target="_blank">Space Shooter tutorial</a> を対象に、その構造とコードを眺めてみたいとおもいます。</p>

<p>実は以前にコース全体(動画)はざっと見た記憶があるので、今回はアセットとして <a href="https://assetstore.unity.com/packages/essentials/tutorial-projects/space-shooter-tutorial-13866" rel="nofollow noopener" target="_blank">公開されている</a> 完成されたゲームのほうから、より具体的に理解していく、という感じです。あわよくばコードなど流用させていただきたい。</p>

<h1>
<span id="プロジェクト作成" class="fragment"></span><a href="#%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E4%BD%9C%E6%88%90"><i class="fa fa-link"></i></a>プロジェクト作成</h1>

<p>Unity の Asset Store から無料の公式アセット <a href="https://assetstore.unity.com/packages/essentials/tutorial-projects/space-shooter-tutorial-13866" rel="nofollow noopener" target="_blank">Space Shooter tutorial</a> をダウンロードします。</p>

<p>私は Unity Hub を利用しているので、ダウンロードしたアセットを最初から指定して新規プロジェクトを作成しました。<br>
<a href="https://camo.qiitausercontent.com/95f08858e268d507f77bd590af69c56439c71351/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3139333531392f64343061366433352d666337342d373562612d313866302d6638616638373166343235362e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2Fd40a6d35-fc74-75ba-18f0-f8af871f4256.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=63adb3822c20a53c00f24b3514cfc8ea" alt="image.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/193519/d40a6d35-fc74-75ba-18f0-f8af871f4256.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2Fd40a6d35-fc74-75ba-18f0-f8af871f4256.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=68a49e8290c6fc69e6157c3a164e4295 1x" loading="lazy"></a><br>
普通に Unity を起動して新規プロジェクトを作成し、Space Shooter tutorial アセットを後から追加しても結果は同じです。</p>

<h1>
<span id="実行してみる" class="fragment"></span><a href="#%E5%AE%9F%E8%A1%8C%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B"><i class="fa fa-link"></i></a>実行してみる</h1>

<p>Assets に <code>_Complete-Game</code> というフォルダが作成されており、これが Space Shooter ゲームの完成形になります。scens にある <code>Done_Main</code> シーンをダブルクリックで読み込みます。<br>
<a href="https://camo.qiitausercontent.com/01f0ca3b6fff4129ebac97e5643951a0cb8fe6a7/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3139333531392f61396535393564332d346331332d326664642d323964622d3036313861646361323033352e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2Fa9e595d3-4c13-2fdd-29db-0618adca2035.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=99106ccdc156df2edf478394594fbc79" alt="image.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/193519/a9e595d3-4c13-2fdd-29db-0618adca2035.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2Fa9e595d3-4c13-2fdd-29db-0618adca2035.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=d09167d988b953d20dfa0d6cc630718f 1x" loading="lazy"></a><br>
<code>Done_Main</code> シーンを読み込んだ後のヒエラルキーとシーンは以下のような感じ。<br>
<a href="https://camo.qiitausercontent.com/70b45b4a0b44c9ffe46926e4afa841e9bab0ad71/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3139333531392f61613466363638342d373034632d356262332d393139622d6134383938393662373063652e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2Faa4f6684-704c-5bb3-919b-a489896b70ce.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=9124c989a4037fea87487322e19025c0" alt="image.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/193519/aa4f6684-704c-5bb3-919b-a489896b70ce.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2Faa4f6684-704c-5bb3-919b-a489896b70ce.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=981e493cf2c36f20f825bef938f4eb27 1x" loading="lazy"></a><br>
実行すると以下のような感じ。<br>
<a href="https://camo.qiitausercontent.com/4820d79a58167cf8c3d3d3f1be4a9012e5f24889/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3139333531392f36336334323264312d383330662d616565332d626232382d3465663962626464646139612e676966" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2F63c422d1-830f-aee3-bb28-4ef9bbddda9a.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=751e4278cbc7840bdf3a6947295449c1" alt="qiita.gif" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/193519/63c422d1-830f-aee3-bb28-4ef9bbddda9a.gif" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2F63c422d1-830f-aee3-bb28-4ef9bbddda9a.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=fa5d7bd8f861c7281a96046c7db80c7e 1x" loading="lazy"></a></p>

<h1>
<span id="大まかな構成の理解" class="fragment"></span><a href="#%E5%A4%A7%E3%81%BE%E3%81%8B%E3%81%AA%E6%A7%8B%E6%88%90%E3%81%AE%E7%90%86%E8%A7%A3"><i class="fa fa-link"></i></a>大まかな構成の理解</h1>

<p>完成プロジェクトに含まれているマテリアルは以下の3種類、2種類のビームの色と、背景画像ですね。ちょっとわかりにくいですが、敵が cyan 色のビーム、自機が orange 色のビームを撃っています。<br>
<a href="https://camo.qiitausercontent.com/866cc4d3b13183e84a34ba126e9ea4f40a816d9a/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3139333531392f66373436313833322d343733362d303536392d393639642d3461636662613638623066652e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2Ff7461832-4736-0569-969d-4acfba68b0fe.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=101f74317206b3cd4ec38dc798495af5" alt="image.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/193519/f7461832-4736-0569-969d-4acfba68b0fe.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2Ff7461832-4736-0569-969d-4acfba68b0fe.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=d143ae69cfa38a54a1c38730548a161b 1x" loading="lazy"></a><br>
そして利用されているモデル、Prefab は7種類。隕石が3種類、ビームが2種類、敵と自機が用意されています。サブフォルダには爆発などエフェクト系があります。<br>
<a href="https://camo.qiitausercontent.com/868f4f943363738fca2ff5c8db16b322b4b5e517/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3139333531392f33386631623435352d653231342d363164392d623531332d6265393165316261303134312e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2F38f1b455-e214-61d9-b513-be91e1ba0141.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=6dc8d9d4aa671fd7f7ebd27abbefb8f8" alt="image.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/193519/38f1b455-e214-61d9-b513-be91e1ba0141.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2F38f1b455-e214-61d9-b513-be91e1ba0141.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=54b21e14de96d2161c7a8793703cf351 1x" loading="lazy"></a><br>
そして今回、利用されている uGUI はテキストだけで3種類。左上に常に表示されているスコアと、ゲームオーバー時に表示される2つのみです。<br>
<a href="https://camo.qiitausercontent.com/0daf42e02a7c5fae64113cc05aeedb05084e9c9a/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3139333531392f65323732353164612d353635622d333665642d633230332d3438316131356337666461312e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2Fe27251da-565b-36ed-c203-481a15c7fda1.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=9882bb45494b0fc9d27ee18e08b5b4a0" alt="image.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/193519/e27251da-565b-36ed-c203-481a15c7fda1.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2Fe27251da-565b-36ed-c203-481a15c7fda1.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=f2c5c137e80434ae529f85655610b68c 1x" loading="lazy"></a><br>
またゲーム中に表示される隕石や敵キャラは、ゲーム中で動的に作成されていることが、ヒエラルキーを見るとわかります。ゲーム開始前は存在しないのに、ゲームが開始すると表示されるたびにヒエラルキーに追加され、不要になるとヒエラルキーから消えます。<br>
<a href="https://camo.qiitausercontent.com/b1ad204adc2883a5ba8022c5ebda4245e2c58e17/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3139333531392f63343731623631352d306537382d316263322d623737612d3836376264356330643530342e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2Fc471b615-0e78-1bc2-b77a-867bd5c0d504.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=1d2198193b5782c249585dff6d5e5ce6" alt="image.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/193519/c471b615-0e78-1bc2-b77a-867bd5c0d504.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2Fc471b615-0e78-1bc2-b77a-867bd5c0d504.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=e65ee501b9d4e70ca32c6fadf3fe7802 1x" loading="lazy"></a></p>

<h1>
<span id="背景のスクロール" class="fragment"></span><a href="#%E8%83%8C%E6%99%AF%E3%81%AE%E3%82%B9%E3%82%AF%E3%83%AD%E3%83%BC%E3%83%AB"><i class="fa fa-link"></i></a>背景のスクロール</h1>

<p>まずは背景のスクロールから見ていきましょう。まずヒエラルキーを見ると、背景を描画した板が2枚、用意されているのがわかります。親子関係になっており、親を動かせば一緒に移動します。<br>
<a href="https://camo.qiitausercontent.com/d19a662285b826a5b01848fbd98cd00e6b4218b0/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3139333531392f31326333346535612d343235382d636338632d306533342d6132383638393862393766372e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2F12c34e5a-4258-cc8c-0e34-a286898b97f7.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=d91770cb2f635a1c27ca582b94307052" alt="image.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/193519/12c34e5a-4258-cc8c-0e34-a286898b97f7.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2F12c34e5a-4258-cc8c-0e34-a286898b97f7.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=d33ee162645b273b64ed603bc33e09b5 1x" loading="lazy"></a></p>

<p>スクロールの仕組みは簡単で、ループする一枚絵を2つ繋げて、時間によって移動させているだけです。実際に背景の板である <code>Background</code> に追加されたスクロール用のスクリプトを見てみましょう。<br>
<a href="https://camo.qiitausercontent.com/498047102dd1de7e81ef47e642b4ad3166d3dec0/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3139333531392f62366639613131662d303534322d333836632d663764302d6639376663376135633366352e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2Fb6f9a11f-0542-386c-f7d0-f97fc7a5c3f5.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=3ddc172774a4048f60581c753a36fcf3" alt="image.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/193519/b6f9a11f-0542-386c-f7d0-f97fc7a5c3f5.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2Fb6f9a11f-0542-386c-f7d0-f97fc7a5c3f5.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=3906489a286e5ee9ea0296206e723210 1x" loading="lazy"></a><br>
<code>Tile Size Z</code> にはスクロールさせる背景(板)のz軸方向の長さを指定しています。ただ今回の例において、実際に指定されているのはy軸方向の長さです。というのは、背景画像の回転のためか、背景(板)がx軸方向に90度回転されていて、それに対応するためです。</p>

<p>さて、実際の <code>Done_BGScroller</code> スクリプトを見てみましょう。とてもシンプルで、経過時間にあわせて背景(板)の位置を、初期位置 <code>startPosition</code> からズラしているのがわかります。<a href="https://docs.unity3d.com/ja/2018.2/ScriptReference/Mathf.Repeat.html" rel="nofollow noopener" target="_blank">Mathf.Repeat</a> は剰余演算ですね。</p>

<div class="code-frame" data-lang="c#">
<div class="code-lang"><span class="bold">Done_BGScroller.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">Done_BGScroller</span> <span class="p">:</span> <span class="n">MonoBehaviour</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="kt">float</span> <span class="n">scrollSpeed</span><span class="p">;</span>
    <span class="k">public</span> <span class="kt">float</span> <span class="n">tileSizeZ</span><span class="p">;</span>

    <span class="k">private</span> <span class="n">Vector3</span> <span class="n">startPosition</span><span class="p">;</span>

    <span class="k">void</span> <span class="nf">Start</span> <span class="p">()</span>
    <span class="p">{</span>
        <span class="n">startPosition</span> <span class="p">=</span> <span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">;</span> <span class="c1">// 初期位置を覚えておく</span>
    <span class="p">}</span>

    <span class="k">void</span> <span class="nf">Update</span> <span class="p">()</span>
    <span class="p">{</span>
        <span class="kt">float</span> <span class="n">newPosition</span> <span class="p">=</span> <span class="n">Mathf</span><span class="p">.</span><span class="nf">Repeat</span><span class="p">(</span><span class="n">Time</span><span class="p">.</span><span class="n">time</span> <span class="p">*</span> <span class="n">scrollSpeed</span><span class="p">,</span> <span class="n">tileSizeZ</span><span class="p">);</span> <span class="c1">// 移動距離を計算</span>
        <span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="p">=</span> <span class="n">startPosition</span> <span class="p">+</span> <span class="n">Vector3</span><span class="p">.</span><span class="n">forward</span> <span class="p">*</span> <span class="n">newPosition</span><span class="p">;</span> <span class="c1">// 初期位置から移動ぶんをズラす</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<p>さて、スクロール速度をざっと計算してみましょう。<code>Time.time</code> は経過時間で単位は秒数です。<code>scrollSpeed</code> が 0.25 m/秒、<code>tileSizeZ</code> が 30 m とすると、30 を 0.25 で割って 120秒 が用意された背景画像がループするのにかかる時間となります。</p>

<p>試しにエディタのインスペクターから scrollSpeed 欄を今の -0.25 から -25 に変更したら、今の100倍の高速スクロールになり、ゲームのスピード感がかなり変わりました。ただし背景の使いまわしがすぐわかっちゃいますので、この場合はもう少し長い背景画像を用意する必要がありそうですw</p>

<p>また背景の上に被せている星の瞬き、パーティクルの部分の速度もあわせてあげる必要がありそうですね。<br>
<a href="https://camo.qiitausercontent.com/190ed8af02ec645c40d4c84b59d810d9103a3e5c/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3139333531392f64366435383266302d653139302d386462642d653631642d3137633363306164663338322e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2Fd6d582f0-e190-8dbd-e61d-17c3c0adf382.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=b9d3a99eb670051061cb5ea58703f89c" alt="image.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/193519/d6d582f0-e190-8dbd-e61d-17c3c0adf382.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2Fd6d582f0-e190-8dbd-e61d-17c3c0adf382.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=5717f6b30d117029dc4ee18f822459c2 1x" loading="lazy"></a></p>

<h1>
<span id="自機の操作" class="fragment"></span><a href="#%E8%87%AA%E6%A9%9F%E3%81%AE%E6%93%8D%E4%BD%9C"><i class="fa fa-link"></i></a>自機の操作</h1>

<h2>
<span id="自機がビームを撃つ" class="fragment"></span><a href="#%E8%87%AA%E6%A9%9F%E3%81%8C%E3%83%93%E3%83%BC%E3%83%A0%E3%82%92%E6%92%83%E3%81%A4"><i class="fa fa-link"></i></a>自機がビームを撃つ</h2>

<p>さてここからはゲームの中心、自機の移動について見ていきます。さすが公式チュートリアルだけあって、シンプルかつ拡張性の高い作りになっていますので、しっかり学んでおきましょう。<br>
<a href="https://camo.qiitausercontent.com/179f132511b840d1b88144df819d85bd89b2a023/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3139333531392f61633963383763312d383266312d383430612d326461302d6635646463626164333262362e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2Fac9c87c1-82f1-840a-2da0-f5ddcbad32b6.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=3e5935bb6ae1871405c947b071122741" alt="image.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/193519/ac9c87c1-82f1-840a-2da0-f5ddcbad32b6.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2Fac9c87c1-82f1-840a-2da0-f5ddcbad32b6.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=2c5946a46b265b751439682f138a27cb 1x" loading="lazy"></a><br>
まずはビームを撃つ部分のコードです。</p>

<div class="code-frame" data-lang="c#">
<div class="code-lang"><span class="bold">Done_PlayerController.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">Done_PlayerController</span> <span class="p">:</span> <span class="n">MonoBehaviour</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="n">GameObject</span> <span class="n">shot</span><span class="p">;</span>
    <span class="k">public</span> <span class="n">Transform</span> <span class="n">shotSpawn</span><span class="p">;</span>
    <span class="k">public</span> <span class="kt">float</span> <span class="n">fireRate</span><span class="p">;</span>
    <span class="k">private</span> <span class="kt">float</span> <span class="n">nextFire</span><span class="p">;</span>

    <span class="k">void</span> <span class="nf">Update</span> <span class="p">()</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">Input</span><span class="p">.</span><span class="nf">GetButton</span><span class="p">(</span><span class="s">"Fire1"</span><span class="p">)</span> <span class="p">&amp;&amp;</span> <span class="n">Time</span><span class="p">.</span><span class="n">time</span> <span class="p">&gt;</span> <span class="n">nextFire</span><span class="p">)</span> <span class="c1">// ボタン1でビーム発射</span>
        <span class="p">{</span>
            <span class="n">nextFire</span> <span class="p">=</span> <span class="n">Time</span><span class="p">.</span><span class="n">time</span> <span class="p">+</span> <span class="n">fireRate</span><span class="p">;</span> <span class="c1">// 次のビームの発射可能な時間を決める</span>
            <span class="nf">Instantiate</span><span class="p">(</span><span class="n">shot</span><span class="p">,</span> <span class="n">shotSpawn</span><span class="p">.</span><span class="n">position</span><span class="p">,</span> <span class="n">shotSpawn</span><span class="p">.</span><span class="n">rotation</span><span class="p">);</span> <span class="c1">// ビーム発射</span>
            <span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">AudioSource</span><span class="p">&gt;().</span><span class="nf">Play</span> <span class="p">();</span> <span class="c1">// ビーム発射音を鳴らす</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<p><code>Time.time</code> は経過秒数なので、<code>fireRate</code> に指定された秒数で、次のビームまでの発射時間が制御されているのがわかります。<code>fireRate</code> を短くすれば、ビームの連射速度が上がって、ゲームがより簡単になるはず。</p>

<p>ここで注目すべきなのは、<a href="https://docs.unity3d.com/ja/current/ScriptReference/Object.Instantiate.html" rel="nofollow noopener" target="_blank">Instantiate関数</a> の部分です。</p>

<p><code>shot</code> にはエディタのインスペクターで Prefab の <code>Done_Bolt</code> が指定されています。これは自機のビームのモデル。つまりビームが発射されるということは、この <code>Done_Bolt</code> が Instantiate関数でコピーされ、新たなオブジェクトがゲームシーン中に生成されることになります。</p>

<p>で、この新しいオブジェクトが生成される位置が2番目の引数である <code>shotSpawn.position</code> で、向きが 3番目の引数である <code>shotSpawn.rotation</code> です。この <code>shotSpawn</code> ですがエディタのヒエラルキー上で定義され、自機の少し前に配置されているのがわかります。<br>
<a href="https://camo.qiitausercontent.com/44bb593986db488429e100aa20b3dc7bf4159f66/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3139333531392f35376533386164372d393861382d386230342d643332612d3766396262396166626334612e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2F57e38ad7-98a8-8b04-d32a-7f9bb9afbc4a.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=b97e9ffce9d70c6cec53c8a4898bd4d2" alt="image.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/193519/57e38ad7-98a8-8b04-d32a-7f9bb9afbc4a.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2F57e38ad7-98a8-8b04-d32a-7f9bb9afbc4a.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=e99ca1a92423b405cc3881e2807f0a88 1x" loading="lazy"></a><br>
この「シーン上にオブジェクトを配置しておき、その位置を実行時に参照する」という手法は、ゲーム制作時に良いデザインパターンであると思います。エディタ上で自機のビームの発射位置がわかりやすいですし、変更するのも簡単です。</p>

<p>この <code>shotSpawn</code> を自機から見て右に少しローテーションさせてみると、発射されるビームもそれを引き継ぎますので、自機から発射されるビームが全部、右側に飛んでいくことになります。例えば自機の左右の傾きにあわせて、<code>shotSpawn</code> を左右にローテーションさせるロジックを加えれば、移動によってビームを左右に撃ち分けられることになり、また違ったゲーム性をもったゲームになりそうです。</p>

<h2>
<span id="自機のビームが移動する" class="fragment"></span><a href="#%E8%87%AA%E6%A9%9F%E3%81%AE%E3%83%93%E3%83%BC%E3%83%A0%E3%81%8C%E7%A7%BB%E5%8B%95%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>自機のビームが移動する</h2>

<p>さて発射されたビームですが、新たな独立したオブジェクトですので、自機とは独立して存在し動作します。その動作を確認するために Prefab の <code>Done_Bolt</code> を確認してみましょう。<br>
<a href="https://camo.qiitausercontent.com/e0a969b2fe7c635aaa3bed3b842be971d85e2d8e/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3139333531392f34353362616531362d356131332d316262382d666232652d3631313162333265333062342e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2F453bae16-5a13-1bb8-fb2e-6111b32e30b4.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=84ef333aa424d6ac492a18cd5b04b475" alt="image.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/193519/453bae16-5a13-1bb8-fb2e-6111b32e30b4.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2F453bae16-5a13-1bb8-fb2e-6111b32e30b4.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=56b4a76e080f90493a83fae3612f66bf 1x" loading="lazy"></a><br>
そして、この自機のビームに追加されたスクリプトは非常に単純で、同じ速度で前進し続けるだけ、となっています。</p>

<div class="code-frame" data-lang="c#">
<div class="code-lang"><span class="bold">Done_Mover.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">Done_Mover</span> <span class="p">:</span> <span class="n">MonoBehaviour</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="kt">float</span> <span class="n">speed</span><span class="p">;</span>

    <span class="k">void</span> <span class="nf">Start</span> <span class="p">()</span>
    <span class="p">{</span>
        <span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">Rigidbody</span><span class="p">&gt;().</span><span class="n">velocity</span> <span class="p">=</span> <span class="n">transform</span><span class="p">.</span><span class="n">forward</span> <span class="p">*</span> <span class="n">speed</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<h2>
<span id="自機が移動する" class="fragment"></span><a href="#%E8%87%AA%E6%A9%9F%E3%81%8C%E7%A7%BB%E5%8B%95%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>自機が移動する</h2>

<p>さて Done_PlayerController.cs に戻り、自機の移動に関する処理を見ていきましょう。</p>

<div class="code-frame" data-lang="c#">
<div class="code-lang"><span class="bold">Done_PlayerController.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="p">[</span><span class="n">System</span><span class="p">.</span><span class="n">Serializable</span><span class="p">]</span>
<span class="k">public</span> <span class="k">class</span> <span class="nc">Done_Boundary</span> 
<span class="p">{</span>
    <span class="k">public</span> <span class="kt">float</span> <span class="n">xMin</span><span class="p">,</span> <span class="n">xMax</span><span class="p">,</span> <span class="n">zMin</span><span class="p">,</span> <span class="n">zMax</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">public</span> <span class="k">class</span> <span class="nc">Done_PlayerController</span> <span class="p">:</span> <span class="n">MonoBehaviour</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="kt">float</span> <span class="n">speed</span><span class="p">;</span>
    <span class="k">public</span> <span class="kt">float</span> <span class="n">tilt</span><span class="p">;</span>
    <span class="k">public</span> <span class="n">Done_Boundary</span> <span class="n">boundary</span><span class="p">;</span>

    <span class="k">void</span> <span class="nf">FixedUpdate</span> <span class="p">()</span>
    <span class="p">{</span>
        <span class="kt">float</span> <span class="n">moveHorizontal</span> <span class="p">=</span> <span class="n">Input</span><span class="p">.</span><span class="nf">GetAxis</span> <span class="p">(</span><span class="s">"Horizontal"</span><span class="p">);</span> <span class="c1">// 上下の入力</span>
        <span class="kt">float</span> <span class="n">moveVertical</span> <span class="p">=</span> <span class="n">Input</span><span class="p">.</span><span class="nf">GetAxis</span> <span class="p">(</span><span class="s">"Vertical"</span><span class="p">);</span> <span class="c1">// 左右の入力</span>

        <span class="n">Vector3</span> <span class="n">movement</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Vector3</span> <span class="p">(</span><span class="n">moveHorizontal</span><span class="p">,</span> <span class="m">0.0f</span><span class="p">,</span> <span class="n">moveVertical</span><span class="p">);</span> <span class="c1">// 移動方向の決定</span>
        <span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">Rigidbody</span><span class="p">&gt;().</span><span class="n">velocity</span> <span class="p">=</span> <span class="n">movement</span> <span class="p">*</span> <span class="n">speed</span><span class="p">;</span> <span class="c1">// 移動量の決定</span>

        <span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">Rigidbody</span><span class="p">&gt;().</span><span class="n">position</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Vector3</span>
        <span class="p">(</span>
            <span class="n">Mathf</span><span class="p">.</span><span class="nf">Clamp</span> <span class="p">(</span><span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">Rigidbody</span><span class="p">&gt;().</span><span class="n">position</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">boundary</span><span class="p">.</span><span class="n">xMin</span><span class="p">,</span> <span class="n">boundary</span><span class="p">.</span><span class="n">xMax</span><span class="p">),</span> 
            <span class="m">0.0f</span><span class="p">,</span> 
            <span class="n">Mathf</span><span class="p">.</span><span class="nf">Clamp</span> <span class="p">(</span><span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">Rigidbody</span><span class="p">&gt;().</span><span class="n">position</span><span class="p">.</span><span class="n">z</span><span class="p">,</span> <span class="n">boundary</span><span class="p">.</span><span class="n">zMin</span><span class="p">,</span> <span class="n">boundary</span><span class="p">.</span><span class="n">zMax</span><span class="p">)</span>
        <span class="p">);</span> <span class="c1">// boundary の範囲内から出ないように</span>

        <span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">Rigidbody</span><span class="p">&gt;().</span><span class="n">rotation</span> <span class="p">=</span> <span class="n">Quaternion</span><span class="p">.</span><span class="nf">Euler</span> <span class="p">(</span><span class="m">0.0f</span><span class="p">,</span> <span class="m">0.0f</span><span class="p">,</span> <span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">Rigidbody</span><span class="p">&gt;().</span><span class="n">velocity</span><span class="p">.</span><span class="n">x</span> <span class="p">*</span> <span class="p">-</span><span class="n">tilt</span><span class="p">);</span> <span class="c1">// 左右の移動にあわせて自機を傾ける</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<p>まあ、すごく基本的な移動の処理ですよね。移動範囲を <code>boundary</code> に保持しておいて、各座標ごとに <a href="https://docs.unity3d.com/ja/2018.2/ScriptReference/Mathf.Clamp.html" rel="nofollow noopener" target="_blank">Mathf.Clamp</a> で値を調整する(閉じ込める)のも良く見るコードですよね。</p>

<p>最後の処理で、自機を移動にあわせて左右に少し傾けているのが、ちょっとこのゲームっぽいところかもしれませんね。</p>

<h1>
<span id="敵や岩石の表示" class="fragment"></span><a href="#%E6%95%B5%E3%82%84%E5%B2%A9%E7%9F%B3%E3%81%AE%E8%A1%A8%E7%A4%BA"><i class="fa fa-link"></i></a>敵や岩石の表示</h1>

<p>自機の操作がわかったので、次は敵側です。ゲーム全体を制御する <code>Done_GameController</code> オブジェクトを見ていきましょう。<br>
<a href="https://camo.qiitausercontent.com/ecf39dea966c49cadf2b62103f5dfb280dc2b71b/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3139333531392f63313139656363342d636230322d336638622d356563332d3736303230636266393563302e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2Fc119ecc4-cb02-3f8b-5ec3-76020cbf95c0.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=72acf80b091275d50ca3a86bb7275012" alt="image.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/193519/c119ecc4-cb02-3f8b-5ec3-76020cbf95c0.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2Fc119ecc4-cb02-3f8b-5ec3-76020cbf95c0.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=6e0b81b4a2038a837e6e98b477ad798d 1x" loading="lazy"></a><br>
コードは <code>Done_GameController.cs</code> に記載されていますので、敵を生成している主要部分を見てみます。</p>

<div class="code-frame" data-lang="c#">
<div class="code-lang"><span class="bold">Done_GameController.cs</span></div>
<div class="highlight"><pre class="with-code"><code>    <span class="n">IEnumerator</span> <span class="nf">SpawnWaves</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">yield</span> <span class="k">return</span> <span class="k">new</span> <span class="nf">WaitForSeconds</span><span class="p">(</span><span class="n">startWait</span><span class="p">);</span>
        <span class="k">while</span> <span class="p">(</span><span class="k">true</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">hazardCount</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span> <span class="c1">// 敵の生成ループ</span>
            <span class="p">{</span>
                <span class="n">GameObject</span> <span class="n">hazard</span> <span class="p">=</span> <span class="n">hazards</span><span class="p">[</span><span class="n">Random</span><span class="p">.</span><span class="nf">Range</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="n">hazards</span><span class="p">.</span><span class="n">Length</span><span class="p">)];</span> <span class="c1">// 敵の種類の決定</span>
                <span class="n">Vector3</span> <span class="n">spawnPosition</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span><span class="n">Random</span><span class="p">.</span><span class="nf">Range</span><span class="p">(-</span><span class="n">spawnValues</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">spawnValues</span><span class="p">.</span><span class="n">x</span><span class="p">),</span> <span class="n">spawnValues</span><span class="p">.</span><span class="n">y</span><span class="p">,</span> <span class="n">spawnValues</span><span class="p">.</span><span class="n">z</span><span class="p">);</span> <span class="c1">// 配置場所の決定</span>
                <span class="n">Quaternion</span> <span class="n">spawnRotation</span> <span class="p">=</span> <span class="n">Quaternion</span><span class="p">.</span><span class="n">identity</span><span class="p">;</span> <span class="c1">// 回転の初期化</span>
                <span class="nf">Instantiate</span><span class="p">(</span><span class="n">hazard</span><span class="p">,</span> <span class="n">spawnPosition</span><span class="p">,</span> <span class="n">spawnRotation</span><span class="p">);</span> <span class="c1">// 敵オブジェクトの新規コピー</span>
                <span class="k">yield</span> <span class="k">return</span> <span class="k">new</span> <span class="nf">WaitForSeconds</span><span class="p">(</span><span class="n">spawnWait</span><span class="p">);</span> <span class="c1">// 待ち</span>
            <span class="p">}</span>
            <span class="k">yield</span> <span class="k">return</span> <span class="k">new</span> <span class="nf">WaitForSeconds</span><span class="p">(</span><span class="n">waveWait</span><span class="p">);</span> <span class="c1">// 待ち</span>
        <span class="p">}</span>
    <span class="p">}</span>
</code></pre></div>
</div>

<p>ここで生成される敵なのですが、以下のとおり岩石3種類、敵1種類の合計4種類からランダムで生成されています。<br>
<a href="https://camo.qiitausercontent.com/9b4ea77947da9a99e523994e68cd7384d81d09eb/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3139333531392f38343432656434362d346537322d643566342d303162312d3161383137646530386230302e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2F8442ed46-4e72-d5f4-01b1-1a817de08b00.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=c9b0d1b5ae6e713be3134bc64e69daf0" alt="image.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/193519/8442ed46-4e72-d5f4-01b1-1a817de08b00.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2F8442ed46-4e72-d5f4-01b1-1a817de08b00.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=1bc8dd8c4ab710dafd3f8e8f7eb22ed1 1x" loading="lazy"></a><br>
例えばサイズを5にして要素4に <code>Done_Enemy Ship</code> を設定すれば、敵の出現確率がかなり上がります。1/4で25%だったのが、2/5で40%になる計算ですね。</p>

<p>また新しい敵を定義した場合には、この <code>Hazards</code> リストに追加するだけでゲームに登場させられることがわかります。</p>

<p>ちなみにこのロジックで、パラメータのみでゲームの難易度を上げるには、以下のような設定の変更が考えられます。</p>

<ul>
<li>hazardCount を増やして敵の生成数を増やす</li>
<li>spawnWait を減らして敵の生成待ち時間を減らす (減らしすぎると敵が固まって表示される)</li>
<li>waveWait を減らして次のウェーブまでの待ち時間を減らす</li>
</ul>

<p>このゲームでは難易度の変化が無いので、上手な人だと永遠にプレイできてしまいます。時間経過で上記の値をコントロールすることにより、難易度調整機能を実装して、だんだん敵の攻撃が激しくなるように改良しても良さそうですね。</p>

<h2>
<span id="岩石の移動について" class="fragment"></span><a href="#%E5%B2%A9%E7%9F%B3%E3%81%AE%E7%A7%BB%E5%8B%95%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>岩石の移動について</h2>

<p>では、さきほどのロジックで岩石が作成された場合、その後の岩石の動きについて見ておきましょう。<br>
<a href="https://camo.qiitausercontent.com/8fdf0c3d821bfdb01732b0faf75330939c0c73cb/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3139333531392f31343166346334372d393639352d306364372d343239632d3837353537616130653235312e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2F141f4c47-9695-0cd7-429c-87557aa0e251.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=d327164e5c5fb1b601ab20b353efbd43" alt="image.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/193519/141f4c47-9695-0cd7-429c-87557aa0e251.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2F141f4c47-9695-0cd7-429c-87557aa0e251.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=e92c48ee72c92e18a8943d4f23f2c9d2 1x" loading="lazy"></a><br>
<code>Done_Mover</code> スクリプトは自機のビームでも使われていましたが、真っすぐ進むだけの処理です。岩石のほうは速度が遅めに指定されているのがわかります。</p>

<p>そして同様に指定されているのが <code>Done_RandomRotator</code>スクリプトで、こちらは名前のとおり、ランダムに回転を与えるためのコードですね。</p>

<div class="code-frame" data-lang="c#">
<div class="code-lang"><span class="bold">Done_RandomRotator.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">Done_RandomRotator</span> <span class="p">:</span> <span class="n">MonoBehaviour</span> 
<span class="p">{</span>
    <span class="k">public</span> <span class="kt">float</span> <span class="n">tumble</span><span class="p">;</span>
    <span class="k">void</span> <span class="nf">Start</span> <span class="p">()</span>
    <span class="p">{</span>
        <span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">Rigidbody</span><span class="p">&gt;().</span><span class="n">angularVelocity</span> <span class="p">=</span> <span class="n">Random</span><span class="p">.</span><span class="n">insideUnitSphere</span> <span class="p">*</span> <span class="n">tumble</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<p>なおこの回転ですが、<code>tumble</code> で回転の度合いを調整することができるようです。今回の3種類の岩石では特に値は変えてありませんでしたが…</p>

<p>そして、もうひとつ設定してある <code>Done_DestroyByContact</code> スクリプトが、シューティングゲームにおける最も重要な処理、つまりは衝突に関するロジックだったりします。</p>

<div class="code-frame" data-lang="c#">
<div class="code-lang"><span class="bold">DestroyByContact.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">Done_DestroyByContact</span> <span class="p">:</span> <span class="n">MonoBehaviour</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="n">GameObject</span> <span class="n">explosion</span><span class="p">;</span>
    <span class="k">public</span> <span class="n">GameObject</span> <span class="n">playerExplosion</span><span class="p">;</span>
    <span class="k">public</span> <span class="kt">int</span> <span class="n">scoreValue</span><span class="p">;</span>
    <span class="k">private</span> <span class="n">Done_GameController</span> <span class="n">gameController</span><span class="p">;</span>

    <span class="k">void</span> <span class="nf">OnTriggerEnter</span> <span class="p">(</span><span class="n">Collider</span> <span class="n">other</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">other</span><span class="p">.</span><span class="n">tag</span> <span class="p">==</span> <span class="s">"Boundary"</span> <span class="p">||</span> <span class="n">other</span><span class="p">.</span><span class="n">tag</span> <span class="p">==</span> <span class="s">"Enemy"</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">return</span><span class="p">;</span> <span class="c1">// バウンダリや敵同士の接触は無視する</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">explosion</span> <span class="p">!=</span> <span class="k">null</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nf">Instantiate</span><span class="p">(</span><span class="n">explosion</span><span class="p">,</span> <span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">,</span> <span class="n">transform</span><span class="p">.</span><span class="n">rotation</span><span class="p">);</span> <span class="c1">// 自分の爆発</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">other</span><span class="p">.</span><span class="n">tag</span> <span class="p">==</span> <span class="s">"Player"</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nf">Instantiate</span><span class="p">(</span><span class="n">playerExplosion</span><span class="p">,</span> <span class="n">other</span><span class="p">.</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">,</span> <span class="n">other</span><span class="p">.</span><span class="n">transform</span><span class="p">.</span><span class="n">rotation</span><span class="p">);</span> <span class="c1">// プレイヤーの爆発</span>
            <span class="n">gameController</span><span class="p">.</span><span class="nf">GameOver</span><span class="p">();</span> <span class="c1">// ゲームオーバー処理</span>
        <span class="p">}</span>

        <span class="n">gameController</span><span class="p">.</span><span class="nf">AddScore</span><span class="p">(</span><span class="n">scoreValue</span><span class="p">);</span> <span class="c1">// この敵に指定されたスコアを加算</span>
        <span class="nf">Destroy</span> <span class="p">(</span><span class="n">other</span><span class="p">.</span><span class="n">gameObject</span><span class="p">);</span> <span class="c1">// 衝突相手のオブジェクトを削除</span>
        <span class="nf">Destroy</span> <span class="p">(</span><span class="n">gameObject</span><span class="p">);</span> <span class="c1">// 自身を削除</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<p>実際にロジックを見ると、シンプルで良いですね。まず今回のサンプルゲームの特徴として「弾や敵など、衝突したものはたいてい両方とも消える」ということがあげられます。そして同じ敵同士の接触を無視するため、<code>Enemy</code> などタグ付けを実施しておき、それをみて接触時の対応を変えています。</p>

<p>例えばこの岩石が、自機の発射したビームに衝突したとします。<code>OnTriggerEnter</code> 関数の処理が始まりますが、成立する if 文は <code>explosion != null</code> の条件のみのため、岩石の爆発が表示され、あとは最後の共有処理でスコアが加算されて両オブジェクトが削除されます。ビームのほうの爆発表現はないことがポイントですね。</p>

<h2>
<span id="敵の移動について" class="fragment"></span><a href="#%E6%95%B5%E3%81%AE%E7%A7%BB%E5%8B%95%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>敵の移動について</h2>

<p>同様に、生成された敵の移動についても見ていきましょう。<code>Done_Mover</code> および <code>Done_DestroyByContact</code> スクリプトについては岩石と同じですね。<br>
<a href="https://camo.qiitausercontent.com/bdbac2068b03fb5e32227e8dba8f515e22896013/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3139333531392f32653465306361352d663730312d313134642d373330382d3636393234376166373162642e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2F2e4e0ca5-f701-114d-7308-669247af71bd.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=c4666d73320ef6fcdf0bd86ee78147e8" alt="image.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/193519/2e4e0ca5-f701-114d-7308-669247af71bd.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2F2e4e0ca5-f701-114d-7308-669247af71bd.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=9278b97b21fc7d91bfb8a410ae6a4668 1x" loading="lazy"></a><br>
まず <code>Done_WeaponController</code> スクリプトは敵のビーム発射ですが、基本的には自機のビーム発射と同様です。ただ発射のタイミングですが、「一定時間に一発発射」と非常に単純なロジックでコントロールされていることがわかります。</p>

<div class="code-frame" data-lang="c#">
<div class="code-lang"><span class="bold">Done_WeaponController.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">Done_WeaponController</span> <span class="p">:</span> <span class="n">MonoBehaviour</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="n">GameObject</span> <span class="n">shot</span><span class="p">;</span>
    <span class="k">public</span> <span class="n">Transform</span> <span class="n">shotSpawn</span><span class="p">;</span>
    <span class="k">public</span> <span class="kt">float</span> <span class="n">fireRate</span><span class="p">;</span>
    <span class="k">public</span> <span class="kt">float</span> <span class="n">delay</span><span class="p">;</span>

    <span class="k">void</span> <span class="nf">Start</span> <span class="p">()</span>
    <span class="p">{</span>
        <span class="nf">InvokeRepeating</span> <span class="p">(</span><span class="s">"Fire"</span><span class="p">,</span> <span class="n">delay</span><span class="p">,</span> <span class="n">fireRate</span><span class="p">);</span> <span class="c1">// 一定時間ごとに発射ロジックを呼ぶ</span>
    <span class="p">}</span>

    <span class="k">void</span> <span class="nf">Fire</span> <span class="p">()</span>
    <span class="p">{</span>
        <span class="nf">Instantiate</span><span class="p">(</span><span class="n">shot</span><span class="p">,</span> <span class="n">shotSpawn</span><span class="p">.</span><span class="n">position</span><span class="p">,</span> <span class="n">shotSpawn</span><span class="p">.</span><span class="n">rotation</span><span class="p">);</span> <span class="c1">// 敵ビームの発射</span>
        <span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">AudioSource</span><span class="p">&gt;().</span><span class="nf">Play</span><span class="p">();</span> <span class="c1">// ビーム発射音の再生</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<p>発射された敵のビームに関しては、岩石とほぼ同じ(回転ロジックがなく、自身の爆発表示がなく、速度が速いだけ)なので説明は省略します。</p>

<p>もうひとつ、敵に特有の動きとして、たまに左右に移動する処理があります。 <code>Done_EvasiveManeuver</code> スクリプトですね。</p>

<div class="code-frame" data-lang="c#">
<div class="code-lang"><span class="bold">Done_EvasiveManeuver.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">Done_EvasiveManeuver</span> <span class="p">:</span> <span class="n">MonoBehaviour</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="n">Done_Boundary</span> <span class="n">boundary</span><span class="p">;</span>
    <span class="k">public</span> <span class="kt">float</span> <span class="n">tilt</span><span class="p">;</span>
    <span class="k">public</span> <span class="kt">float</span> <span class="n">dodge</span><span class="p">;</span>
    <span class="k">public</span> <span class="kt">float</span> <span class="n">smoothing</span><span class="p">;</span>
    <span class="k">public</span> <span class="n">Vector2</span> <span class="n">startWait</span><span class="p">;</span>
    <span class="k">public</span> <span class="n">Vector2</span> <span class="n">maneuverTime</span><span class="p">;</span>
    <span class="k">public</span> <span class="n">Vector2</span> <span class="n">maneuverWait</span><span class="p">;</span>

    <span class="k">private</span> <span class="kt">float</span> <span class="n">currentSpeed</span><span class="p">;</span>
    <span class="k">private</span> <span class="kt">float</span> <span class="n">targetManeuver</span><span class="p">;</span>

    <span class="k">void</span> <span class="nf">Start</span> <span class="p">()</span>
    <span class="p">{</span>
        <span class="n">currentSpeed</span> <span class="p">=</span> <span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">Rigidbody</span><span class="p">&gt;().</span><span class="n">velocity</span><span class="p">.</span><span class="n">z</span><span class="p">;</span>
        <span class="nf">StartCoroutine</span><span class="p">(</span><span class="nf">Evade</span><span class="p">());</span>
    <span class="p">}</span>

    <span class="n">IEnumerator</span> <span class="nf">Evade</span> <span class="p">()</span>
    <span class="p">{</span>
        <span class="k">yield</span> <span class="k">return</span> <span class="k">new</span> <span class="nf">WaitForSeconds</span> <span class="p">(</span><span class="n">Random</span><span class="p">.</span><span class="nf">Range</span> <span class="p">(</span><span class="n">startWait</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">startWait</span><span class="p">.</span><span class="n">y</span><span class="p">));</span>
        <span class="k">while</span> <span class="p">(</span><span class="k">true</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">targetManeuver</span> <span class="p">=</span> <span class="n">Random</span><span class="p">.</span><span class="nf">Range</span> <span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="n">dodge</span><span class="p">)</span> <span class="p">*</span> <span class="p">-</span><span class="n">Mathf</span><span class="p">.</span><span class="nf">Sign</span> <span class="p">(</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span><span class="p">.</span><span class="n">x</span><span class="p">);</span>
            <span class="k">yield</span> <span class="k">return</span> <span class="k">new</span> <span class="nf">WaitForSeconds</span> <span class="p">(</span><span class="n">Random</span><span class="p">.</span><span class="nf">Range</span> <span class="p">(</span><span class="n">maneuverTime</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">maneuverTime</span><span class="p">.</span><span class="n">y</span><span class="p">));</span>
            <span class="n">targetManeuver</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span>
            <span class="k">yield</span> <span class="k">return</span> <span class="k">new</span> <span class="nf">WaitForSeconds</span> <span class="p">(</span><span class="n">Random</span><span class="p">.</span><span class="nf">Range</span> <span class="p">(</span><span class="n">maneuverWait</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">maneuverWait</span><span class="p">.</span><span class="n">y</span><span class="p">));</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">void</span> <span class="nf">FixedUpdate</span> <span class="p">()</span>
    <span class="p">{</span>
        <span class="kt">float</span> <span class="n">newManeuver</span> <span class="p">=</span> <span class="n">Mathf</span><span class="p">.</span><span class="nf">MoveTowards</span> <span class="p">(</span><span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">Rigidbody</span><span class="p">&gt;().</span><span class="n">velocity</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">targetManeuver</span><span class="p">,</span> <span class="n">smoothing</span> <span class="p">*</span> <span class="n">Time</span><span class="p">.</span><span class="n">deltaTime</span><span class="p">);</span>
        <span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">Rigidbody</span><span class="p">&gt;().</span><span class="n">velocity</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Vector3</span> <span class="p">(</span><span class="n">newManeuver</span><span class="p">,</span> <span class="m">0.0f</span><span class="p">,</span> <span class="n">currentSpeed</span><span class="p">);</span>
        <span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">Rigidbody</span><span class="p">&gt;().</span><span class="n">position</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Vector3</span>
        <span class="p">(</span>
            <span class="n">Mathf</span><span class="p">.</span><span class="nf">Clamp</span><span class="p">(</span><span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">Rigidbody</span><span class="p">&gt;().</span><span class="n">position</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">boundary</span><span class="p">.</span><span class="n">xMin</span><span class="p">,</span> <span class="n">boundary</span><span class="p">.</span><span class="n">xMax</span><span class="p">),</span> 
            <span class="m">0.0f</span><span class="p">,</span> 
            <span class="n">Mathf</span><span class="p">.</span><span class="nf">Clamp</span><span class="p">(</span><span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">Rigidbody</span><span class="p">&gt;().</span><span class="n">position</span><span class="p">.</span><span class="n">z</span><span class="p">,</span> <span class="n">boundary</span><span class="p">.</span><span class="n">zMin</span><span class="p">,</span> <span class="n">boundary</span><span class="p">.</span><span class="n">zMax</span><span class="p">)</span>
        <span class="p">);</span>

        <span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">Rigidbody</span><span class="p">&gt;().</span><span class="n">rotation</span> <span class="p">=</span> <span class="n">Quaternion</span><span class="p">.</span><span class="nf">Euler</span> <span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">Rigidbody</span><span class="p">&gt;().</span><span class="n">velocity</span><span class="p">.</span><span class="n">x</span> <span class="p">*</span> <span class="p">-</span><span class="n">tilt</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<p>こちらも眺めてみると、わりとシンプルなロジックですね。敵ごとに一定時間ごとに、今いる場所とは反対側(画面の左に居たら右に)にランダム距離だけスーッと横移動する、という感じ。この時の移動範囲を <code>dodge</code> で設定できたり、移動時間や、移動の合間の時間も設定できたり。</p>

<p>色を変えた敵キャラを用意して、このへんの設定を変えておくだけでも、ゲームにかなりの幅が出せそうです。またこの動きのロジックは独立しているので、新しいロジックを追加していくのも容易ですね！</p>

<h1>
<span id="最後は全体の管理" class="fragment"></span><a href="#%E6%9C%80%E5%BE%8C%E3%81%AF%E5%85%A8%E4%BD%93%E3%81%AE%E7%AE%A1%E7%90%86"><i class="fa fa-link"></i></a>最後は全体の管理</h1>

<p>ゲーム全体の処理を知るには <a href="#%E6%95%B5%E3%82%84%E5%B2%A9%E7%9F%B3%E3%81%AE%E8%A1%A8%E7%A4%BA">敵や岩石の表示</a> のところで紹介した <code>Done_GameController</code> スクリプトの残りを見てみましょう。</p>

<div class="code-frame" data-lang="c#">
<div class="code-lang"><span class="bold">Done_GameController.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">Done_GameController</span> <span class="p">:</span> <span class="n">MonoBehaviour</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="n">Text</span> <span class="n">scoreText</span><span class="p">;</span>
    <span class="k">public</span> <span class="n">Text</span> <span class="n">restartText</span><span class="p">;</span>
    <span class="k">public</span> <span class="n">Text</span> <span class="n">gameOverText</span><span class="p">;</span>

    <span class="k">private</span> <span class="kt">bool</span> <span class="n">gameOver</span><span class="p">;</span>
    <span class="k">private</span> <span class="kt">bool</span> <span class="n">restart</span><span class="p">;</span>
    <span class="k">private</span> <span class="kt">int</span> <span class="n">score</span><span class="p">;</span>

    <span class="k">void</span> <span class="nf">Start</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">gameOver</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
        <span class="n">restart</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
        <span class="n">restartText</span><span class="p">.</span><span class="n">text</span> <span class="p">=</span> <span class="s">""</span><span class="p">;</span>
        <span class="n">gameOverText</span><span class="p">.</span><span class="n">text</span> <span class="p">=</span> <span class="s">""</span><span class="p">;</span>
        <span class="n">score</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span>
        <span class="nf">UpdateScore</span><span class="p">();</span>
        <span class="nf">StartCoroutine</span><span class="p">(</span><span class="nf">SpawnWaves</span><span class="p">());</span> <span class="c1">// 敵の生成を開始</span>
    <span class="p">}</span>

    <span class="k">void</span> <span class="nf">Update</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">restart</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">Input</span><span class="p">.</span><span class="nf">GetKeyDown</span><span class="p">(</span><span class="n">KeyCode</span><span class="p">.</span><span class="n">R</span><span class="p">))</span>
            <span class="p">{</span>
                <span class="n">SceneManager</span><span class="p">.</span><span class="nf">LoadScene</span><span class="p">(</span><span class="n">SceneManager</span><span class="p">.</span><span class="nf">GetActiveScene</span><span class="p">().</span><span class="n">buildIndex</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">void</span> <span class="nf">AddScore</span><span class="p">(</span><span class="kt">int</span> <span class="n">newScoreValue</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">score</span> <span class="p">+=</span> <span class="n">newScoreValue</span><span class="p">;</span>
        <span class="nf">UpdateScore</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="k">void</span> <span class="nf">UpdateScore</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">scoreText</span><span class="p">.</span><span class="n">text</span> <span class="p">=</span> <span class="s">"Score: "</span> <span class="p">+</span> <span class="n">score</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">void</span> <span class="nf">GameOver</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">gameOverText</span><span class="p">.</span><span class="n">text</span> <span class="p">=</span> <span class="s">"Game Over!"</span><span class="p">;</span>
        <span class="n">gameOver</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<p>関数は多いですが、それぞれの処理は単純です。特に uGUI のテキストに対し、表示コントロールを実施せず、単に中身を空にして非表示にしているあたり、なかなか小気味良い、手の抜きっぷりです。</p>

<p>そして最も驚くのは「ゲームオーバー時に特別な処理をしていない」ということです。単に <code>Game Over!</code> という文字列を表示しているだけ。何故って？自機がもう画面上に存在しないので、ユーザーは操作もできないし、敵も破壊されないので、ゲームをこれまで通り続けているだけ、なんです。そういえばゲームオーバーになっても、敵はしばらく出てきますし、BGM も止まりませんよね！</p>

<p>※ 実はウェーブの終わりに一応は終了チェックをしていて、敵は無限には出ないようになっています</p>

<p>もしゲームオーバーでゲームを止めたい場合は、<code>GameOver</code> 関数の中に BGM を止めるロジックを追加したり、各キャラの <code>Update/FixedUpdate</code> 関数で <code>gameOver</code> フラグをチェックさせたり、いろいろ修正が必要になるとおもわれます。</p>

<p>※ Time.timeScale を 0 にする方法は今回のサンプルとは相性が悪い気がします</p>

<p>そして R キーでゲームを再プレイする場合は <code>SceneManager.LoadScene</code> 関数を使って、シーン自体を読み込み直しています。大胆ですが、まあ確実な初期化方法ですね。</p>

<h1>
<span id="ちょっと改良してみよう" class="fragment"></span><a href="#%E3%81%A1%E3%82%87%E3%81%A3%E3%81%A8%E6%94%B9%E8%89%AF%E3%81%97%E3%81%A6%E3%81%BF%E3%82%88%E3%81%86"><i class="fa fa-link"></i></a>ちょっと改良してみよう</h1>

<p>このゲーム、長時間プレイを続けると、動的に生成された岩石オブジェクトでヒエラルキーが埋まってしまうんですよね。いわゆる、メモリーリークに近い問題を抱えているわけなんです。<br>
<a href="https://camo.qiitausercontent.com/03addee158e75d28d2e55e9318a18263d88e8ab5/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3139333531392f31366561373138362d383862352d343830372d656463382d6365323838636562643266642e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2F16ea7186-88b5-4807-edc8-ce288cebd2fd.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=b485945571aad0020f0e5f8e4f5e56db" alt="image.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/193519/16ea7186-88b5-4807-edc8-ce288cebd2fd.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2F16ea7186-88b5-4807-edc8-ce288cebd2fd.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=c8a38fa7be2dfb4d9ca646e5ceb289ee 1x" loading="lazy"></a><br>
ゲーム全体を眺めると、ゲーム画面を囲んでいる <code>Boundary</code> に以下のスクリプトが定義されているので、岩石もこれに該当して消えるのかと思っていましたが…？</p>

<div class="code-frame" data-lang="c#">
<div class="code-lang"><span class="bold">Done_DestroyByBoundary.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">Done_DestroyByBoundary</span> <span class="p">:</span> <span class="n">MonoBehaviour</span>
<span class="p">{</span>
    <span class="k">void</span> <span class="nf">OnTriggerExit</span> <span class="p">(</span><span class="n">Collider</span> <span class="n">other</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="nf">Destroy</span><span class="p">(</span><span class="n">other</span><span class="p">.</span><span class="n">gameObject</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<p>よくよく眺めてみると、Prefab の岩石にはコライダー設定がなく、上記のロジックが動作していないのではないか？と。</p>

<p>そこで Prefab の岩石のほうに、適当なコライダーを設定したところ、上記ロジックがうまく動作するようになり、不要なオブジェクトが消されるようになりました。<br>
<a href="https://camo.qiitausercontent.com/ef2b6d220e7cdbd0d332b0d7ce85b45b5f195eb0/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3139333531392f64623735613732342d386236662d323239342d393132662d3564316264613632326238362e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2Fdb75a724-8b6f-2294-912f-5d1bda622b86.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=abfda464f915f8bf5120a9accbb08c3a" alt="image.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/193519/db75a724-8b6f-2294-912f-5d1bda622b86.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2Fdb75a724-8b6f-2294-912f-5d1bda622b86.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=edf8ff52a2e79d201434aee7b00a2991 1x" loading="lazy"></a><br>
これでメモリーリークの心配は無くなりましたね！</p>

<h1>
<span id="まとめ" class="fragment"></span><a href="#%E3%81%BE%E3%81%A8%E3%82%81"><i class="fa fa-link"></i></a>まとめ</h1>

<p>今回は公式チュートリアル＆アセットの  <a href="https://assetstore.unity.com/packages/essentials/tutorial-projects/space-shooter-tutorial-13866" rel="nofollow noopener" target="_blank">Space Shooter tutorial</a> を対象に、実際に動作するシューティングゲームの実装方法について見ていきました。</p>

<p>シンプルかつ汎用性のある作りで、これをベースに拡張して自分のゲームを作成するのは容易だとおもいます。私も自分のゲームを作成する際に参考にしてみたいと思いますので、その際の経験なども別途まとめられたらいいな、と考えています。</p>

<p>【追記】まとめました＞ <a href="https://qiita.com/yamachan360/items/460ef13dd08118f9bf21" id="reference-d2c57abb846838e098dc">Unity 公式チュートリアル「Space Shooter tutorial」をベースに自作ゲームを作る【前編】</a></p>

<p>それではまた！</p>
</div></div></section><div class="css-1yzj1fm"><div class="css-1uv1qiv"><span class="fa fa-twitter"></span></div><div class="css-1uv1qiv"><span class="fa fa-facebook"></span></div></div><div class="apm-Content"><div class="apm-Content_title">Why not register and get more from Qiita?</div><ol class="apm-Content_list"><li>We will deliver articles that match you<div class="description">By following users and tags, you can catch up information on technical fields that you are interested in as a whole</div></li><li>you can read useful information later efficiently<div class="description">By &quot;stocking&quot; the articles you like, you can search right away</div></li><div><a class="apm-Content_help" href="https://help.qiita.com/ja/articles/qiita-login-user" target="_blank"><i class="fa fa-fw fa-arrow-circle-right"></i>What you can do with signing up</a></div></ol><a href="/signup?callback_action=login_or_signup&amp;redirect_to=%2Fyamachan360%2Fitems%2F3690d4a4de5e6f02b0b9&amp;realm=qiita" class="apm-Content_button apm-Content_button-signup">Sign up</a><a href="/login?callback_action=login_or_signup&amp;redirect_to=%2Fyamachan360%2Fitems%2F3690d4a4de5e6f02b0b9&amp;realm=qiita" class="apm-Content_button apm-Content_button-signin">Login</a></div></div><div class="css-helsa7"></div></div></div></div><div class="css-109dbrr"><div class="css-5jpx49"><div class="css-mnxgyc"><button class=" css-1vlpknv"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/yamachan360/items/3690d4a4de5e6f02b0b9/likers" class="css-1iupg5d">2</a></div><div class="css-fsjkhv"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-1b17vb0">1</span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-7i7f4d"><div class="css-1gj7nt">Improve article</div><a href="/drafts/3690d4a4de5e6f02b0b9/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/yamachan360/items/3690d4a4de5e6f02b0b9/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/yamachan360/items/3690d4a4de5e6f02b0b9/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/yamachan360/items/3690d4a4de5e6f02b0b9/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/yamachan360/items/3690d4a4de5e6f02b0b9.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="PersonalArticlePage" data-dom-id="PersonalArticlePage-react-component-8b90a804-2e28-49ec-9277-9f8ea9849856">{"authorAnalyticsTrackingId":null,"organizationAnalyticsTrackingId":null}</script>
      
<footer id="globalFooter" class="st-Footer"><div class="st-Footer_container"><div class="st-Footer_start"><div class="st-Footer_logo"><svg viewbox="0 0 426.57 130" xmlns="http://www.w3.org/2000/svg"><circle cx="167.08" cy="21.4" r="12.28" /><path d="M250.81 29.66h23.48v18.9h-23.48z" /><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z" /><circle cx="216.33" cy="21.4" r="12.28" /></svg></div><div class="st-Footer_catchcopy">How developers code is here.</div><div class="st-Footer_socials"><a class="fa fa-twitter" href="https://twitter.com/qiita"></a><a class="fa fa-facebook-square" href="https://www.facebook.com/qiita/"></a></div></div><div class="st-Footer_end"><div class="st-Footer_qiita"><div class="st-Footer_label">Qiita</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="/about">About</a><a href="/terms">Terms</a><a href="/privacy">Privacy</a><a target="_blank" href="http://help.qiita.com/ja/articles/qiita-community-guideline">Guideline</a><a target="_blank" href="https://help.qiita.com/ja/articles/others-brand-guideline">Design Guideline</a></div><div class="st-Footer_column"><a href="/release-notes">Release</a><a href="/api/v2/docs">API</a><a href="/feedback/new">ご意見</a><a href="https://help.qiita.com">Help</a><a target="_blank" href="https://qiita.com/ads?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Advertisement</a></div></div></div><div class="st-Footer_increments"><div class="st-Footer_label">Increments</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="https://increments.co.jp/company/">About</a><a href="https://increments.co.jp/jobs/">採用情報</a><a href="https://blog.qiita.com">Blog</a></div><div class="st-Footer_column"><a href="https://teams.qiita.com/">Qiita Team</a><a href="https://jobs.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Jobs</a><a href="https://zine.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Zine</a></div></div></div></div></div><div class="st-Footer_copyright">© 2011-2021 Increments Inc.</div></footer><div id="Snackbar-react-component-b5cd8fe8-92d9-4bec-8883-cdbfc288c91a"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="Snackbar" data-dom-id="Snackbar-react-component-b5cd8fe8-92d9-4bec-8883-cdbfc288c91a">{}</script>
      
<div id="LoginModal-react-component-73ebc303-ce54-4818-96f6-f991aa8b36ae"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="LoginModal" data-dom-id="LoginModal-react-component-73ebc303-ce54-4818-96f6-f991aa8b36ae">{}</script>
      
<div id="StockModal-react-component-6da598ce-47e6-4018-9288-a793ffa2acfa"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="StockModal" data-dom-id="StockModal-react-component-6da598ce-47e6-4018-9288-a793ffa2acfa">{}</script>
      
</div><div id="dataContainer" style="display: none;" data-config="{&quot;actionPath&quot;:&quot;public/items#show&quot;,&quot;settings&quot;:{&quot;analyticsTrackingId&quot;:&quot;UA-24675221-12&quot;,&quot;assetsMap&quot;:{},&quot;csrfToken&quot;:&quot;lpUTrJnprSvnnp2WN++rWcxSt5lk1m6j+BdRYrBHFHIp2bAdwOqski/i1z8mT6L/eZjLUgIri+Gy7Fnl15fVQA==&quot;,&quot;locale&quot;:&quot;en&quot;},&quot;currentUser&quot;:null}" /></body></html><script type="application/json" data-js-react-on-rails-store="AppStoreWithReactOnRails">{"snackbar":{"type":"","body":"","isActive":false},"article":{"article":{"body":"\u003cp\u003e10連休も近いですし、Unity で自分の好きなシューティングゲームでも作成しようと考えました。\u003c/p\u003e\n\n\u003cp\u003eこれまで Unity で \u003ca href=\"https://qiita.com/yamachan360/items/38b76a67ee0faef7e6b0\" id=\"reference-d042a6b4fbcd3d09973e\"\u003e簡単なアニメーション\u003c/a\u003e を試したり、\u003ca href=\"https://qiita.com/yamachan360/items/d0d01bb644b81a0eb3e1\" id=\"reference-d10ed80a1a0f7c6ffe3f\"\u003eUnity ちゃんを動かしたり\u003c/a\u003e して遊んできましたし、他の環境で \u003ca href=\"http://smilebasic.com/library/ogiri/\" rel=\"nofollow noopener\" target=\"_blank\"\u003eゲームを作成した\u003c/a\u003e 経験はあるので、まあなんとか作れるのではないか、と。\u003c/p\u003e\n\n\u003cp\u003e先週は \u003ca href=\"https://qiita.com/yamachan360/items/2f909a11665161a6b485\" id=\"reference-2a46d2e549899f24eba9\"\u003euGUI の基礎を理解\u003c/a\u003e してみたので、今回は公式チュートリアルにある \u003ca href=\"https://unity3d.com/jp/learn/tutorials/s/space-shooter-tutorial\" rel=\"nofollow noopener\" target=\"_blank\"\u003eSpace Shooter tutorial\u003c/a\u003e を対象に、その構造とコードを眺めてみたいとおもいます。\u003c/p\u003e\n\n\u003cp\u003e実は以前にコース全体(動画)はざっと見た記憶があるので、今回はアセットとして \u003ca href=\"https://assetstore.unity.com/packages/essentials/tutorial-projects/space-shooter-tutorial-13866\" rel=\"nofollow noopener\" target=\"_blank\"\u003e公開されている\u003c/a\u003e 完成されたゲームのほうから、より具体的に理解していく、という感じです。あわよくばコードなど流用させていただきたい。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"プロジェクト作成\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E4%BD%9C%E6%88%90\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eプロジェクト作成\u003c/h1\u003e\n\n\u003cp\u003eUnity の Asset Store から無料の公式アセット \u003ca href=\"https://assetstore.unity.com/packages/essentials/tutorial-projects/space-shooter-tutorial-13866\" rel=\"nofollow noopener\" target=\"_blank\"\u003eSpace Shooter tutorial\u003c/a\u003e をダウンロードします。\u003c/p\u003e\n\n\u003cp\u003e私は Unity Hub を利用しているので、ダウンロードしたアセットを最初から指定して新規プロジェクトを作成しました。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/95f08858e268d507f77bd590af69c56439c71351/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3139333531392f64343061366433352d666337342d373562612d313866302d6638616638373166343235362e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2Fd40a6d35-fc74-75ba-18f0-f8af871f4256.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=63adb3822c20a53c00f24b3514cfc8ea\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/193519/d40a6d35-fc74-75ba-18f0-f8af871f4256.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2Fd40a6d35-fc74-75ba-18f0-f8af871f4256.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=68a49e8290c6fc69e6157c3a164e4295 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003cbr\u003e\n普通に Unity を起動して新規プロジェクトを作成し、Space Shooter tutorial アセットを後から追加しても結果は同じです。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"実行してみる\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AE%9F%E8%A1%8C%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e実行してみる\u003c/h1\u003e\n\n\u003cp\u003eAssets に \u003ccode\u003e_Complete-Game\u003c/code\u003e というフォルダが作成されており、これが Space Shooter ゲームの完成形になります。scens にある \u003ccode\u003eDone_Main\u003c/code\u003e シーンをダブルクリックで読み込みます。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/01f0ca3b6fff4129ebac97e5643951a0cb8fe6a7/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3139333531392f61396535393564332d346331332d326664642d323964622d3036313861646361323033352e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2Fa9e595d3-4c13-2fdd-29db-0618adca2035.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=99106ccdc156df2edf478394594fbc79\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/193519/a9e595d3-4c13-2fdd-29db-0618adca2035.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2Fa9e595d3-4c13-2fdd-29db-0618adca2035.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=d09167d988b953d20dfa0d6cc630718f 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003cbr\u003e\n\u003ccode\u003eDone_Main\u003c/code\u003e シーンを読み込んだ後のヒエラルキーとシーンは以下のような感じ。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/70b45b4a0b44c9ffe46926e4afa841e9bab0ad71/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3139333531392f61613466363638342d373034632d356262332d393139622d6134383938393662373063652e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2Faa4f6684-704c-5bb3-919b-a489896b70ce.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=9124c989a4037fea87487322e19025c0\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/193519/aa4f6684-704c-5bb3-919b-a489896b70ce.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2Faa4f6684-704c-5bb3-919b-a489896b70ce.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=981e493cf2c36f20f825bef938f4eb27 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003cbr\u003e\n実行すると以下のような感じ。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/4820d79a58167cf8c3d3d3f1be4a9012e5f24889/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3139333531392f36336334323264312d383330662d616565332d626232382d3465663962626464646139612e676966\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2F63c422d1-830f-aee3-bb28-4ef9bbddda9a.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=751e4278cbc7840bdf3a6947295449c1\" alt=\"qiita.gif\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/193519/63c422d1-830f-aee3-bb28-4ef9bbddda9a.gif\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2F63c422d1-830f-aee3-bb28-4ef9bbddda9a.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=fa5d7bd8f861c7281a96046c7db80c7e 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"大まかな構成の理解\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%A4%A7%E3%81%BE%E3%81%8B%E3%81%AA%E6%A7%8B%E6%88%90%E3%81%AE%E7%90%86%E8%A7%A3\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e大まかな構成の理解\u003c/h1\u003e\n\n\u003cp\u003e完成プロジェクトに含まれているマテリアルは以下の3種類、2種類のビームの色と、背景画像ですね。ちょっとわかりにくいですが、敵が cyan 色のビーム、自機が orange 色のビームを撃っています。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/866cc4d3b13183e84a34ba126e9ea4f40a816d9a/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3139333531392f66373436313833322d343733362d303536392d393639642d3461636662613638623066652e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2Ff7461832-4736-0569-969d-4acfba68b0fe.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=101f74317206b3cd4ec38dc798495af5\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/193519/f7461832-4736-0569-969d-4acfba68b0fe.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2Ff7461832-4736-0569-969d-4acfba68b0fe.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=d143ae69cfa38a54a1c38730548a161b 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003cbr\u003e\nそして利用されているモデル、Prefab は7種類。隕石が3種類、ビームが2種類、敵と自機が用意されています。サブフォルダには爆発などエフェクト系があります。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/868f4f943363738fca2ff5c8db16b322b4b5e517/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3139333531392f33386631623435352d653231342d363164392d623531332d6265393165316261303134312e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2F38f1b455-e214-61d9-b513-be91e1ba0141.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=6dc8d9d4aa671fd7f7ebd27abbefb8f8\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/193519/38f1b455-e214-61d9-b513-be91e1ba0141.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2F38f1b455-e214-61d9-b513-be91e1ba0141.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=54b21e14de96d2161c7a8793703cf351 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003cbr\u003e\nそして今回、利用されている uGUI はテキストだけで3種類。左上に常に表示されているスコアと、ゲームオーバー時に表示される2つのみです。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/0daf42e02a7c5fae64113cc05aeedb05084e9c9a/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3139333531392f65323732353164612d353635622d333665642d633230332d3438316131356337666461312e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2Fe27251da-565b-36ed-c203-481a15c7fda1.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=9882bb45494b0fc9d27ee18e08b5b4a0\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/193519/e27251da-565b-36ed-c203-481a15c7fda1.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2Fe27251da-565b-36ed-c203-481a15c7fda1.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=f2c5c137e80434ae529f85655610b68c 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003cbr\u003e\nまたゲーム中に表示される隕石や敵キャラは、ゲーム中で動的に作成されていることが、ヒエラルキーを見るとわかります。ゲーム開始前は存在しないのに、ゲームが開始すると表示されるたびにヒエラルキーに追加され、不要になるとヒエラルキーから消えます。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/b1ad204adc2883a5ba8022c5ebda4245e2c58e17/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3139333531392f63343731623631352d306537382d316263322d623737612d3836376264356330643530342e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2Fc471b615-0e78-1bc2-b77a-867bd5c0d504.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=1d2198193b5782c249585dff6d5e5ce6\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/193519/c471b615-0e78-1bc2-b77a-867bd5c0d504.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2Fc471b615-0e78-1bc2-b77a-867bd5c0d504.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=e65ee501b9d4e70ca32c6fadf3fe7802 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"背景のスクロール\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%83%8C%E6%99%AF%E3%81%AE%E3%82%B9%E3%82%AF%E3%83%AD%E3%83%BC%E3%83%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e背景のスクロール\u003c/h1\u003e\n\n\u003cp\u003eまずは背景のスクロールから見ていきましょう。まずヒエラルキーを見ると、背景を描画した板が2枚、用意されているのがわかります。親子関係になっており、親を動かせば一緒に移動します。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/d19a662285b826a5b01848fbd98cd00e6b4218b0/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3139333531392f31326333346535612d343235382d636338632d306533342d6132383638393862393766372e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2F12c34e5a-4258-cc8c-0e34-a286898b97f7.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=d91770cb2f635a1c27ca582b94307052\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/193519/12c34e5a-4258-cc8c-0e34-a286898b97f7.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2F12c34e5a-4258-cc8c-0e34-a286898b97f7.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=d33ee162645b273b64ed603bc33e09b5 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eスクロールの仕組みは簡単で、ループする一枚絵を2つ繋げて、時間によって移動させているだけです。実際に背景の板である \u003ccode\u003eBackground\u003c/code\u003e に追加されたスクロール用のスクリプトを見てみましょう。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/498047102dd1de7e81ef47e642b4ad3166d3dec0/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3139333531392f62366639613131662d303534322d333836632d663764302d6639376663376135633366352e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2Fb6f9a11f-0542-386c-f7d0-f97fc7a5c3f5.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=3ddc172774a4048f60581c753a36fcf3\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/193519/b6f9a11f-0542-386c-f7d0-f97fc7a5c3f5.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2Fb6f9a11f-0542-386c-f7d0-f97fc7a5c3f5.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=3906489a286e5ee9ea0296206e723210 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003cbr\u003e\n\u003ccode\u003eTile Size Z\u003c/code\u003e にはスクロールさせる背景(板)のz軸方向の長さを指定しています。ただ今回の例において、実際に指定されているのはy軸方向の長さです。というのは、背景画像の回転のためか、背景(板)がx軸方向に90度回転されていて、それに対応するためです。\u003c/p\u003e\n\n\u003cp\u003eさて、実際の \u003ccode\u003eDone_BGScroller\u003c/code\u003e スクリプトを見てみましょう。とてもシンプルで、経過時間にあわせて背景(板)の位置を、初期位置 \u003ccode\u003estartPosition\u003c/code\u003e からズラしているのがわかります。\u003ca href=\"https://docs.unity3d.com/ja/2018.2/ScriptReference/Mathf.Repeat.html\" rel=\"nofollow noopener\" target=\"_blank\"\u003eMathf.Repeat\u003c/a\u003e は剰余演算ですね。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eDone_BGScroller.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eDone_BGScroller\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eMonoBehaviour\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003efloat\u003c/span\u003e \u003cspan class=\"n\"\u003escrollSpeed\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003efloat\u003c/span\u003e \u003cspan class=\"n\"\u003etileSizeZ\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003eVector3\u003c/span\u003e \u003cspan class=\"n\"\u003estartPosition\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eStart\u003c/span\u003e \u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003estartPosition\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003etransform\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eposition\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"c1\"\u003e// 初期位置を覚えておく\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eUpdate\u003c/span\u003e \u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003efloat\u003c/span\u003e \u003cspan class=\"n\"\u003enewPosition\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eMathf\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eRepeat\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eTime\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003etime\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003escrollSpeed\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003etileSizeZ\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e \u003cspan class=\"c1\"\u003e// 移動距離を計算\u003c/span\u003e\n        \u003cspan class=\"n\"\u003etransform\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eposition\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003estartPosition\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"n\"\u003eVector3\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eforward\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003enewPosition\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"c1\"\u003e// 初期位置から移動ぶんをズラす\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003eさて、スクロール速度をざっと計算してみましょう。\u003ccode\u003eTime.time\u003c/code\u003e は経過時間で単位は秒数です。\u003ccode\u003escrollSpeed\u003c/code\u003e が 0.25 m/秒、\u003ccode\u003etileSizeZ\u003c/code\u003e が 30 m とすると、30 を 0.25 で割って 120秒 が用意された背景画像がループするのにかかる時間となります。\u003c/p\u003e\n\n\u003cp\u003e試しにエディタのインスペクターから scrollSpeed 欄を今の -0.25 から -25 に変更したら、今の100倍の高速スクロールになり、ゲームのスピード感がかなり変わりました。ただし背景の使いまわしがすぐわかっちゃいますので、この場合はもう少し長い背景画像を用意する必要がありそうですw\u003c/p\u003e\n\n\u003cp\u003eまた背景の上に被せている星の瞬き、パーティクルの部分の速度もあわせてあげる必要がありそうですね。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/190ed8af02ec645c40d4c84b59d810d9103a3e5c/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3139333531392f64366435383266302d653139302d386462642d653631642d3137633363306164663338322e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2Fd6d582f0-e190-8dbd-e61d-17c3c0adf382.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=b9d3a99eb670051061cb5ea58703f89c\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/193519/d6d582f0-e190-8dbd-e61d-17c3c0adf382.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2Fd6d582f0-e190-8dbd-e61d-17c3c0adf382.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=5717f6b30d117029dc4ee18f822459c2 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"自機の操作\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%87%AA%E6%A9%9F%E3%81%AE%E6%93%8D%E4%BD%9C\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e自機の操作\u003c/h1\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"自機がビームを撃つ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%87%AA%E6%A9%9F%E3%81%8C%E3%83%93%E3%83%BC%E3%83%A0%E3%82%92%E6%92%83%E3%81%A4\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e自機がビームを撃つ\u003c/h2\u003e\n\n\u003cp\u003eさてここからはゲームの中心、自機の移動について見ていきます。さすが公式チュートリアルだけあって、シンプルかつ拡張性の高い作りになっていますので、しっかり学んでおきましょう。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/179f132511b840d1b88144df819d85bd89b2a023/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3139333531392f61633963383763312d383266312d383430612d326461302d6635646463626164333262362e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2Fac9c87c1-82f1-840a-2da0-f5ddcbad32b6.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=3e5935bb6ae1871405c947b071122741\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/193519/ac9c87c1-82f1-840a-2da0-f5ddcbad32b6.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2Fac9c87c1-82f1-840a-2da0-f5ddcbad32b6.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=2c5946a46b265b751439682f138a27cb 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003cbr\u003e\nまずはビームを撃つ部分のコードです。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eDone_PlayerController.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eDone_PlayerController\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eMonoBehaviour\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eGameObject\u003c/span\u003e \u003cspan class=\"n\"\u003eshot\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eTransform\u003c/span\u003e \u003cspan class=\"n\"\u003eshotSpawn\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003efloat\u003c/span\u003e \u003cspan class=\"n\"\u003efireRate\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"kt\"\u003efloat\u003c/span\u003e \u003cspan class=\"n\"\u003enextFire\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eUpdate\u003c/span\u003e \u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eInput\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eGetButton\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Fire1\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e \u003cspan class=\"n\"\u003eTime\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003etime\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003enextFire\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"c1\"\u003e// ボタン1でビーム発射\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"n\"\u003enextFire\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eTime\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003etime\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"n\"\u003efireRate\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"c1\"\u003e// 次のビームの発射可能な時間を決める\u003c/span\u003e\n            \u003cspan class=\"nf\"\u003eInstantiate\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eshot\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eshotSpawn\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eposition\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eshotSpawn\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003erotation\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e \u003cspan class=\"c1\"\u003e// ビーム発射\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eGetComponent\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eAudioSource\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;().\u003c/span\u003e\u003cspan class=\"nf\"\u003ePlay\u003c/span\u003e \u003cspan class=\"p\"\u003e();\u003c/span\u003e \u003cspan class=\"c1\"\u003e// ビーム発射音を鳴らす\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e\u003ccode\u003eTime.time\u003c/code\u003e は経過秒数なので、\u003ccode\u003efireRate\u003c/code\u003e に指定された秒数で、次のビームまでの発射時間が制御されているのがわかります。\u003ccode\u003efireRate\u003c/code\u003e を短くすれば、ビームの連射速度が上がって、ゲームがより簡単になるはず。\u003c/p\u003e\n\n\u003cp\u003eここで注目すべきなのは、\u003ca href=\"https://docs.unity3d.com/ja/current/ScriptReference/Object.Instantiate.html\" rel=\"nofollow noopener\" target=\"_blank\"\u003eInstantiate関数\u003c/a\u003e の部分です。\u003c/p\u003e\n\n\u003cp\u003e\u003ccode\u003eshot\u003c/code\u003e にはエディタのインスペクターで Prefab の \u003ccode\u003eDone_Bolt\u003c/code\u003e が指定されています。これは自機のビームのモデル。つまりビームが発射されるということは、この \u003ccode\u003eDone_Bolt\u003c/code\u003e が Instantiate関数でコピーされ、新たなオブジェクトがゲームシーン中に生成されることになります。\u003c/p\u003e\n\n\u003cp\u003eで、この新しいオブジェクトが生成される位置が2番目の引数である \u003ccode\u003eshotSpawn.position\u003c/code\u003e で、向きが 3番目の引数である \u003ccode\u003eshotSpawn.rotation\u003c/code\u003e です。この \u003ccode\u003eshotSpawn\u003c/code\u003e ですがエディタのヒエラルキー上で定義され、自機の少し前に配置されているのがわかります。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/44bb593986db488429e100aa20b3dc7bf4159f66/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3139333531392f35376533386164372d393861382d386230342d643332612d3766396262396166626334612e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2F57e38ad7-98a8-8b04-d32a-7f9bb9afbc4a.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=b97e9ffce9d70c6cec53c8a4898bd4d2\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/193519/57e38ad7-98a8-8b04-d32a-7f9bb9afbc4a.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2F57e38ad7-98a8-8b04-d32a-7f9bb9afbc4a.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=e99ca1a92423b405cc3881e2807f0a88 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003cbr\u003e\nこの「シーン上にオブジェクトを配置しておき、その位置を実行時に参照する」という手法は、ゲーム制作時に良いデザインパターンであると思います。エディタ上で自機のビームの発射位置がわかりやすいですし、変更するのも簡単です。\u003c/p\u003e\n\n\u003cp\u003eこの \u003ccode\u003eshotSpawn\u003c/code\u003e を自機から見て右に少しローテーションさせてみると、発射されるビームもそれを引き継ぎますので、自機から発射されるビームが全部、右側に飛んでいくことになります。例えば自機の左右の傾きにあわせて、\u003ccode\u003eshotSpawn\u003c/code\u003e を左右にローテーションさせるロジックを加えれば、移動によってビームを左右に撃ち分けられることになり、また違ったゲーム性をもったゲームになりそうです。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"自機のビームが移動する\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%87%AA%E6%A9%9F%E3%81%AE%E3%83%93%E3%83%BC%E3%83%A0%E3%81%8C%E7%A7%BB%E5%8B%95%E3%81%99%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e自機のビームが移動する\u003c/h2\u003e\n\n\u003cp\u003eさて発射されたビームですが、新たな独立したオブジェクトですので、自機とは独立して存在し動作します。その動作を確認するために Prefab の \u003ccode\u003eDone_Bolt\u003c/code\u003e を確認してみましょう。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/e0a969b2fe7c635aaa3bed3b842be971d85e2d8e/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3139333531392f34353362616531362d356131332d316262382d666232652d3631313162333265333062342e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2F453bae16-5a13-1bb8-fb2e-6111b32e30b4.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=84ef333aa424d6ac492a18cd5b04b475\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/193519/453bae16-5a13-1bb8-fb2e-6111b32e30b4.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2F453bae16-5a13-1bb8-fb2e-6111b32e30b4.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=56b4a76e080f90493a83fae3612f66bf 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003cbr\u003e\nそして、この自機のビームに追加されたスクリプトは非常に単純で、同じ速度で前進し続けるだけ、となっています。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eDone_Mover.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eDone_Mover\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eMonoBehaviour\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003efloat\u003c/span\u003e \u003cspan class=\"n\"\u003espeed\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eStart\u003c/span\u003e \u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eGetComponent\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eRigidbody\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;().\u003c/span\u003e\u003cspan class=\"n\"\u003evelocity\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003etransform\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eforward\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003espeed\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"自機が移動する\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%87%AA%E6%A9%9F%E3%81%8C%E7%A7%BB%E5%8B%95%E3%81%99%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e自機が移動する\u003c/h2\u003e\n\n\u003cp\u003eさて Done_PlayerController.cs に戻り、自機の移動に関する処理を見ていきましょう。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eDone_PlayerController.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eSystem\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eSerializable\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eDone_Boundary\u003c/span\u003e \n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003efloat\u003c/span\u003e \u003cspan class=\"n\"\u003exMin\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003exMax\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ezMin\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ezMax\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eDone_PlayerController\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eMonoBehaviour\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003efloat\u003c/span\u003e \u003cspan class=\"n\"\u003espeed\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003efloat\u003c/span\u003e \u003cspan class=\"n\"\u003etilt\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eDone_Boundary\u003c/span\u003e \u003cspan class=\"n\"\u003eboundary\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eFixedUpdate\u003c/span\u003e \u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003efloat\u003c/span\u003e \u003cspan class=\"n\"\u003emoveHorizontal\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eInput\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eGetAxis\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Horizontal\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e \u003cspan class=\"c1\"\u003e// 上下の入力\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003efloat\u003c/span\u003e \u003cspan class=\"n\"\u003emoveVertical\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eInput\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eGetAxis\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Vertical\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e \u003cspan class=\"c1\"\u003e// 左右の入力\u003c/span\u003e\n\n        \u003cspan class=\"n\"\u003eVector3\u003c/span\u003e \u003cspan class=\"n\"\u003emovement\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eVector3\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003emoveHorizontal\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"m\"\u003e0.0f\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003emoveVertical\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e \u003cspan class=\"c1\"\u003e// 移動方向の決定\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eGetComponent\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eRigidbody\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;().\u003c/span\u003e\u003cspan class=\"n\"\u003evelocity\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003emovement\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003espeed\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"c1\"\u003e// 移動量の決定\u003c/span\u003e\n\n        \u003cspan class=\"n\"\u003eGetComponent\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eRigidbody\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;().\u003c/span\u003e\u003cspan class=\"n\"\u003eposition\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eVector3\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e(\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eMathf\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eClamp\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eGetComponent\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eRigidbody\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;().\u003c/span\u003e\u003cspan class=\"n\"\u003eposition\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eboundary\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003exMin\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eboundary\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003exMax\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \n            \u003cspan class=\"m\"\u003e0.0f\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \n            \u003cspan class=\"n\"\u003eMathf\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eClamp\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eGetComponent\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eRigidbody\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;().\u003c/span\u003e\u003cspan class=\"n\"\u003eposition\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ez\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eboundary\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ezMin\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eboundary\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ezMax\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e);\u003c/span\u003e \u003cspan class=\"c1\"\u003e// boundary の範囲内から出ないように\u003c/span\u003e\n\n        \u003cspan class=\"n\"\u003eGetComponent\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eRigidbody\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;().\u003c/span\u003e\u003cspan class=\"n\"\u003erotation\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eQuaternion\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eEuler\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e0.0f\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"m\"\u003e0.0f\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eGetComponent\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eRigidbody\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;().\u003c/span\u003e\u003cspan class=\"n\"\u003evelocity\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"p\"\u003e-\u003c/span\u003e\u003cspan class=\"n\"\u003etilt\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e \u003cspan class=\"c1\"\u003e// 左右の移動にあわせて自機を傾ける\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003eまあ、すごく基本的な移動の処理ですよね。移動範囲を \u003ccode\u003eboundary\u003c/code\u003e に保持しておいて、各座標ごとに \u003ca href=\"https://docs.unity3d.com/ja/2018.2/ScriptReference/Mathf.Clamp.html\" rel=\"nofollow noopener\" target=\"_blank\"\u003eMathf.Clamp\u003c/a\u003e で値を調整する(閉じ込める)のも良く見るコードですよね。\u003c/p\u003e\n\n\u003cp\u003e最後の処理で、自機を移動にあわせて左右に少し傾けているのが、ちょっとこのゲームっぽいところかもしれませんね。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"敵や岩石の表示\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%95%B5%E3%82%84%E5%B2%A9%E7%9F%B3%E3%81%AE%E8%A1%A8%E7%A4%BA\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e敵や岩石の表示\u003c/h1\u003e\n\n\u003cp\u003e自機の操作がわかったので、次は敵側です。ゲーム全体を制御する \u003ccode\u003eDone_GameController\u003c/code\u003e オブジェクトを見ていきましょう。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/ecf39dea966c49cadf2b62103f5dfb280dc2b71b/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3139333531392f63313139656363342d636230322d336638622d356563332d3736303230636266393563302e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2Fc119ecc4-cb02-3f8b-5ec3-76020cbf95c0.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=72acf80b091275d50ca3a86bb7275012\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/193519/c119ecc4-cb02-3f8b-5ec3-76020cbf95c0.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2Fc119ecc4-cb02-3f8b-5ec3-76020cbf95c0.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=6e0b81b4a2038a837e6e98b477ad798d 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003cbr\u003e\nコードは \u003ccode\u003eDone_GameController.cs\u003c/code\u003e に記載されていますので、敵を生成している主要部分を見てみます。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eDone_GameController.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e    \u003cspan class=\"n\"\u003eIEnumerator\u003c/span\u003e \u003cspan class=\"nf\"\u003eSpawnWaves\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eyield\u003c/span\u003e \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eWaitForSeconds\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003estartWait\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ewhile\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"n\"\u003ehazardCount\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e++)\u003c/span\u003e \u003cspan class=\"c1\"\u003e// 敵の生成ループ\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"n\"\u003eGameObject\u003c/span\u003e \u003cspan class=\"n\"\u003ehazard\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ehazards\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eRandom\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eRange\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ehazards\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eLength\u003c/span\u003e\u003cspan class=\"p\"\u003e)];\u003c/span\u003e \u003cspan class=\"c1\"\u003e// 敵の種類の決定\u003c/span\u003e\n                \u003cspan class=\"n\"\u003eVector3\u003c/span\u003e \u003cspan class=\"n\"\u003espawnPosition\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eVector3\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eRandom\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eRange\u003c/span\u003e\u003cspan class=\"p\"\u003e(-\u003c/span\u003e\u003cspan class=\"n\"\u003espawnValues\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003espawnValues\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"n\"\u003espawnValues\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003espawnValues\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ez\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e \u003cspan class=\"c1\"\u003e// 配置場所の決定\u003c/span\u003e\n                \u003cspan class=\"n\"\u003eQuaternion\u003c/span\u003e \u003cspan class=\"n\"\u003espawnRotation\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eQuaternion\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eidentity\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"c1\"\u003e// 回転の初期化\u003c/span\u003e\n                \u003cspan class=\"nf\"\u003eInstantiate\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ehazard\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003espawnPosition\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003espawnRotation\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e \u003cspan class=\"c1\"\u003e// 敵オブジェクトの新規コピー\u003c/span\u003e\n                \u003cspan class=\"k\"\u003eyield\u003c/span\u003e \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eWaitForSeconds\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003espawnWait\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e \u003cspan class=\"c1\"\u003e// 待ち\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eyield\u003c/span\u003e \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eWaitForSeconds\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ewaveWait\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e \u003cspan class=\"c1\"\u003e// 待ち\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003eここで生成される敵なのですが、以下のとおり岩石3種類、敵1種類の合計4種類からランダムで生成されています。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/9b4ea77947da9a99e523994e68cd7384d81d09eb/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3139333531392f38343432656434362d346537322d643566342d303162312d3161383137646530386230302e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2F8442ed46-4e72-d5f4-01b1-1a817de08b00.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=c9b0d1b5ae6e713be3134bc64e69daf0\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/193519/8442ed46-4e72-d5f4-01b1-1a817de08b00.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2F8442ed46-4e72-d5f4-01b1-1a817de08b00.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=1bc8dd8c4ab710dafd3f8e8f7eb22ed1 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003cbr\u003e\n例えばサイズを5にして要素4に \u003ccode\u003eDone_Enemy Ship\u003c/code\u003e を設定すれば、敵の出現確率がかなり上がります。1/4で25%だったのが、2/5で40%になる計算ですね。\u003c/p\u003e\n\n\u003cp\u003eまた新しい敵を定義した場合には、この \u003ccode\u003eHazards\u003c/code\u003e リストに追加するだけでゲームに登場させられることがわかります。\u003c/p\u003e\n\n\u003cp\u003eちなみにこのロジックで、パラメータのみでゲームの難易度を上げるには、以下のような設定の変更が考えられます。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003ehazardCount を増やして敵の生成数を増やす\u003c/li\u003e\n\u003cli\u003espawnWait を減らして敵の生成待ち時間を減らす (減らしすぎると敵が固まって表示される)\u003c/li\u003e\n\u003cli\u003ewaveWait を減らして次のウェーブまでの待ち時間を減らす\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eこのゲームでは難易度の変化が無いので、上手な人だと永遠にプレイできてしまいます。時間経過で上記の値をコントロールすることにより、難易度調整機能を実装して、だんだん敵の攻撃が激しくなるように改良しても良さそうですね。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"岩石の移動について\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%B2%A9%E7%9F%B3%E3%81%AE%E7%A7%BB%E5%8B%95%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e岩石の移動について\u003c/h2\u003e\n\n\u003cp\u003eでは、さきほどのロジックで岩石が作成された場合、その後の岩石の動きについて見ておきましょう。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/8fdf0c3d821bfdb01732b0faf75330939c0c73cb/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3139333531392f31343166346334372d393639352d306364372d343239632d3837353537616130653235312e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2F141f4c47-9695-0cd7-429c-87557aa0e251.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=d327164e5c5fb1b601ab20b353efbd43\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/193519/141f4c47-9695-0cd7-429c-87557aa0e251.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2F141f4c47-9695-0cd7-429c-87557aa0e251.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=e92c48ee72c92e18a8943d4f23f2c9d2 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003cbr\u003e\n\u003ccode\u003eDone_Mover\u003c/code\u003e スクリプトは自機のビームでも使われていましたが、真っすぐ進むだけの処理です。岩石のほうは速度が遅めに指定されているのがわかります。\u003c/p\u003e\n\n\u003cp\u003eそして同様に指定されているのが \u003ccode\u003eDone_RandomRotator\u003c/code\u003eスクリプトで、こちらは名前のとおり、ランダムに回転を与えるためのコードですね。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eDone_RandomRotator.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eDone_RandomRotator\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eMonoBehaviour\u003c/span\u003e \n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003efloat\u003c/span\u003e \u003cspan class=\"n\"\u003etumble\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eStart\u003c/span\u003e \u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eGetComponent\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eRigidbody\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;().\u003c/span\u003e\u003cspan class=\"n\"\u003eangularVelocity\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eRandom\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003einsideUnitSphere\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003etumble\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003eなおこの回転ですが、\u003ccode\u003etumble\u003c/code\u003e で回転の度合いを調整することができるようです。今回の3種類の岩石では特に値は変えてありませんでしたが…\u003c/p\u003e\n\n\u003cp\u003eそして、もうひとつ設定してある \u003ccode\u003eDone_DestroyByContact\u003c/code\u003e スクリプトが、シューティングゲームにおける最も重要な処理、つまりは衝突に関するロジックだったりします。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eDestroyByContact.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eDone_DestroyByContact\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eMonoBehaviour\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eGameObject\u003c/span\u003e \u003cspan class=\"n\"\u003eexplosion\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eGameObject\u003c/span\u003e \u003cspan class=\"n\"\u003eplayerExplosion\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003escoreValue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003eDone_GameController\u003c/span\u003e \u003cspan class=\"n\"\u003egameController\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eOnTriggerEnter\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eCollider\u003c/span\u003e \u003cspan class=\"n\"\u003eother\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eother\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003etag\u003c/span\u003e \u003cspan class=\"p\"\u003e==\u003c/span\u003e \u003cspan class=\"s\"\u003e\"Boundary\"\u003c/span\u003e \u003cspan class=\"p\"\u003e||\u003c/span\u003e \u003cspan class=\"n\"\u003eother\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003etag\u003c/span\u003e \u003cspan class=\"p\"\u003e==\u003c/span\u003e \u003cspan class=\"s\"\u003e\"Enemy\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"c1\"\u003e// バウンダリや敵同士の接触は無視する\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eexplosion\u003c/span\u003e \u003cspan class=\"p\"\u003e!=\u003c/span\u003e \u003cspan class=\"k\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"nf\"\u003eInstantiate\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eexplosion\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003etransform\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eposition\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003etransform\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003erotation\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e \u003cspan class=\"c1\"\u003e// 自分の爆発\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eother\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003etag\u003c/span\u003e \u003cspan class=\"p\"\u003e==\u003c/span\u003e \u003cspan class=\"s\"\u003e\"Player\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"nf\"\u003eInstantiate\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eplayerExplosion\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eother\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003etransform\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eposition\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eother\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003etransform\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003erotation\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e \u003cspan class=\"c1\"\u003e// プレイヤーの爆発\u003c/span\u003e\n            \u003cspan class=\"n\"\u003egameController\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eGameOver\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e \u003cspan class=\"c1\"\u003e// ゲームオーバー処理\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"n\"\u003egameController\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAddScore\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003escoreValue\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e \u003cspan class=\"c1\"\u003e// この敵に指定されたスコアを加算\u003c/span\u003e\n        \u003cspan class=\"nf\"\u003eDestroy\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eother\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003egameObject\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e \u003cspan class=\"c1\"\u003e// 衝突相手のオブジェクトを削除\u003c/span\u003e\n        \u003cspan class=\"nf\"\u003eDestroy\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003egameObject\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e \u003cspan class=\"c1\"\u003e// 自身を削除\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e実際にロジックを見ると、シンプルで良いですね。まず今回のサンプルゲームの特徴として「弾や敵など、衝突したものはたいてい両方とも消える」ということがあげられます。そして同じ敵同士の接触を無視するため、\u003ccode\u003eEnemy\u003c/code\u003e などタグ付けを実施しておき、それをみて接触時の対応を変えています。\u003c/p\u003e\n\n\u003cp\u003e例えばこの岩石が、自機の発射したビームに衝突したとします。\u003ccode\u003eOnTriggerEnter\u003c/code\u003e 関数の処理が始まりますが、成立する if 文は \u003ccode\u003eexplosion != null\u003c/code\u003e の条件のみのため、岩石の爆発が表示され、あとは最後の共有処理でスコアが加算されて両オブジェクトが削除されます。ビームのほうの爆発表現はないことがポイントですね。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"敵の移動について\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%95%B5%E3%81%AE%E7%A7%BB%E5%8B%95%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e敵の移動について\u003c/h2\u003e\n\n\u003cp\u003e同様に、生成された敵の移動についても見ていきましょう。\u003ccode\u003eDone_Mover\u003c/code\u003e および \u003ccode\u003eDone_DestroyByContact\u003c/code\u003e スクリプトについては岩石と同じですね。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/bdbac2068b03fb5e32227e8dba8f515e22896013/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3139333531392f32653465306361352d663730312d313134642d373330382d3636393234376166373162642e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2F2e4e0ca5-f701-114d-7308-669247af71bd.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=c4666d73320ef6fcdf0bd86ee78147e8\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/193519/2e4e0ca5-f701-114d-7308-669247af71bd.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2F2e4e0ca5-f701-114d-7308-669247af71bd.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=9278b97b21fc7d91bfb8a410ae6a4668 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003cbr\u003e\nまず \u003ccode\u003eDone_WeaponController\u003c/code\u003e スクリプトは敵のビーム発射ですが、基本的には自機のビーム発射と同様です。ただ発射のタイミングですが、「一定時間に一発発射」と非常に単純なロジックでコントロールされていることがわかります。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eDone_WeaponController.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eDone_WeaponController\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eMonoBehaviour\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eGameObject\u003c/span\u003e \u003cspan class=\"n\"\u003eshot\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eTransform\u003c/span\u003e \u003cspan class=\"n\"\u003eshotSpawn\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003efloat\u003c/span\u003e \u003cspan class=\"n\"\u003efireRate\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003efloat\u003c/span\u003e \u003cspan class=\"n\"\u003edelay\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eStart\u003c/span\u003e \u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"nf\"\u003eInvokeRepeating\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Fire\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003edelay\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003efireRate\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e \u003cspan class=\"c1\"\u003e// 一定時間ごとに発射ロジックを呼ぶ\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eFire\u003c/span\u003e \u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"nf\"\u003eInstantiate\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eshot\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eshotSpawn\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eposition\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eshotSpawn\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003erotation\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e \u003cspan class=\"c1\"\u003e// 敵ビームの発射\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eGetComponent\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eAudioSource\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;().\u003c/span\u003e\u003cspan class=\"nf\"\u003ePlay\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e \u003cspan class=\"c1\"\u003e// ビーム発射音の再生\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e発射された敵のビームに関しては、岩石とほぼ同じ(回転ロジックがなく、自身の爆発表示がなく、速度が速いだけ)なので説明は省略します。\u003c/p\u003e\n\n\u003cp\u003eもうひとつ、敵に特有の動きとして、たまに左右に移動する処理があります。 \u003ccode\u003eDone_EvasiveManeuver\u003c/code\u003e スクリプトですね。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eDone_EvasiveManeuver.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eDone_EvasiveManeuver\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eMonoBehaviour\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eDone_Boundary\u003c/span\u003e \u003cspan class=\"n\"\u003eboundary\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003efloat\u003c/span\u003e \u003cspan class=\"n\"\u003etilt\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003efloat\u003c/span\u003e \u003cspan class=\"n\"\u003edodge\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003efloat\u003c/span\u003e \u003cspan class=\"n\"\u003esmoothing\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eVector2\u003c/span\u003e \u003cspan class=\"n\"\u003estartWait\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eVector2\u003c/span\u003e \u003cspan class=\"n\"\u003emaneuverTime\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eVector2\u003c/span\u003e \u003cspan class=\"n\"\u003emaneuverWait\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"kt\"\u003efloat\u003c/span\u003e \u003cspan class=\"n\"\u003ecurrentSpeed\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"kt\"\u003efloat\u003c/span\u003e \u003cspan class=\"n\"\u003etargetManeuver\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eStart\u003c/span\u003e \u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003ecurrentSpeed\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eGetComponent\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eRigidbody\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;().\u003c/span\u003e\u003cspan class=\"n\"\u003evelocity\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ez\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"nf\"\u003eStartCoroutine\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nf\"\u003eEvade\u003c/span\u003e\u003cspan class=\"p\"\u003e());\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"n\"\u003eIEnumerator\u003c/span\u003e \u003cspan class=\"nf\"\u003eEvade\u003c/span\u003e \u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eyield\u003c/span\u003e \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eWaitForSeconds\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eRandom\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eRange\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003estartWait\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003estartWait\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ewhile\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"n\"\u003etargetManeuver\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eRandom\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eRange\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003edodge\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"p\"\u003e-\u003c/span\u003e\u003cspan class=\"n\"\u003eMathf\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSign\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003etransform\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eposition\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eyield\u003c/span\u003e \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eWaitForSeconds\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eRandom\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eRange\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003emaneuverTime\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003emaneuverTime\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n            \u003cspan class=\"n\"\u003etargetManeuver\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eyield\u003c/span\u003e \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eWaitForSeconds\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eRandom\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eRange\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003emaneuverWait\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003emaneuverWait\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eFixedUpdate\u003c/span\u003e \u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003efloat\u003c/span\u003e \u003cspan class=\"n\"\u003enewManeuver\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eMathf\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eMoveTowards\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eGetComponent\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eRigidbody\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;().\u003c/span\u003e\u003cspan class=\"n\"\u003evelocity\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003etargetManeuver\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003esmoothing\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003eTime\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003edeltaTime\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eGetComponent\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eRigidbody\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;().\u003c/span\u003e\u003cspan class=\"n\"\u003evelocity\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eVector3\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003enewManeuver\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"m\"\u003e0.0f\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ecurrentSpeed\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eGetComponent\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eRigidbody\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;().\u003c/span\u003e\u003cspan class=\"n\"\u003eposition\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eVector3\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e(\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eMathf\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eClamp\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eGetComponent\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eRigidbody\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;().\u003c/span\u003e\u003cspan class=\"n\"\u003eposition\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eboundary\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003exMin\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eboundary\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003exMax\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \n            \u003cspan class=\"m\"\u003e0.0f\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \n            \u003cspan class=\"n\"\u003eMathf\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eClamp\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eGetComponent\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eRigidbody\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;().\u003c/span\u003e\u003cspan class=\"n\"\u003eposition\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ez\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eboundary\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ezMin\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eboundary\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ezMax\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n        \u003cspan class=\"n\"\u003eGetComponent\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eRigidbody\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;().\u003c/span\u003e\u003cspan class=\"n\"\u003erotation\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eQuaternion\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eEuler\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eGetComponent\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eRigidbody\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;().\u003c/span\u003e\u003cspan class=\"n\"\u003evelocity\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"p\"\u003e-\u003c/span\u003e\u003cspan class=\"n\"\u003etilt\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003eこちらも眺めてみると、わりとシンプルなロジックですね。敵ごとに一定時間ごとに、今いる場所とは反対側(画面の左に居たら右に)にランダム距離だけスーッと横移動する、という感じ。この時の移動範囲を \u003ccode\u003edodge\u003c/code\u003e で設定できたり、移動時間や、移動の合間の時間も設定できたり。\u003c/p\u003e\n\n\u003cp\u003e色を変えた敵キャラを用意して、このへんの設定を変えておくだけでも、ゲームにかなりの幅が出せそうです。またこの動きのロジックは独立しているので、新しいロジックを追加していくのも容易ですね！\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"最後は全体の管理\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%9C%80%E5%BE%8C%E3%81%AF%E5%85%A8%E4%BD%93%E3%81%AE%E7%AE%A1%E7%90%86\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e最後は全体の管理\u003c/h1\u003e\n\n\u003cp\u003eゲーム全体の処理を知るには \u003ca href=\"#%E6%95%B5%E3%82%84%E5%B2%A9%E7%9F%B3%E3%81%AE%E8%A1%A8%E7%A4%BA\"\u003e敵や岩石の表示\u003c/a\u003e のところで紹介した \u003ccode\u003eDone_GameController\u003c/code\u003e スクリプトの残りを見てみましょう。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eDone_GameController.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eDone_GameController\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eMonoBehaviour\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eText\u003c/span\u003e \u003cspan class=\"n\"\u003escoreText\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eText\u003c/span\u003e \u003cspan class=\"n\"\u003erestartText\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eText\u003c/span\u003e \u003cspan class=\"n\"\u003egameOverText\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"n\"\u003egameOver\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"n\"\u003erestart\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003escore\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eStart\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003egameOver\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003efalse\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"n\"\u003erestart\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003efalse\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"n\"\u003erestartText\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003etext\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"n\"\u003egameOverText\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003etext\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"n\"\u003escore\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"nf\"\u003eUpdateScore\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n        \u003cspan class=\"nf\"\u003eStartCoroutine\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nf\"\u003eSpawnWaves\u003c/span\u003e\u003cspan class=\"p\"\u003e());\u003c/span\u003e \u003cspan class=\"c1\"\u003e// 敵の生成を開始\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eUpdate\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003erestart\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eInput\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eGetKeyDown\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eKeyCode\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eR\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"n\"\u003eSceneManager\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eLoadScene\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eSceneManager\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eGetActiveScene\u003c/span\u003e\u003cspan class=\"p\"\u003e().\u003c/span\u003e\u003cspan class=\"n\"\u003ebuildIndex\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eAddScore\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003enewScoreValue\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003escore\u003c/span\u003e \u003cspan class=\"p\"\u003e+=\u003c/span\u003e \u003cspan class=\"n\"\u003enewScoreValue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"nf\"\u003eUpdateScore\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eUpdateScore\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003escoreText\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003etext\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"Score: \"\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"n\"\u003escore\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eGameOver\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003egameOverText\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003etext\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"Game Over!\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"n\"\u003egameOver\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e関数は多いですが、それぞれの処理は単純です。特に uGUI のテキストに対し、表示コントロールを実施せず、単に中身を空にして非表示にしているあたり、なかなか小気味良い、手の抜きっぷりです。\u003c/p\u003e\n\n\u003cp\u003eそして最も驚くのは「ゲームオーバー時に特別な処理をしていない」ということです。単に \u003ccode\u003eGame Over!\u003c/code\u003e という文字列を表示しているだけ。何故って？自機がもう画面上に存在しないので、ユーザーは操作もできないし、敵も破壊されないので、ゲームをこれまで通り続けているだけ、なんです。そういえばゲームオーバーになっても、敵はしばらく出てきますし、BGM も止まりませんよね！\u003c/p\u003e\n\n\u003cp\u003e※ 実はウェーブの終わりに一応は終了チェックをしていて、敵は無限には出ないようになっています\u003c/p\u003e\n\n\u003cp\u003eもしゲームオーバーでゲームを止めたい場合は、\u003ccode\u003eGameOver\u003c/code\u003e 関数の中に BGM を止めるロジックを追加したり、各キャラの \u003ccode\u003eUpdate/FixedUpdate\u003c/code\u003e 関数で \u003ccode\u003egameOver\u003c/code\u003e フラグをチェックさせたり、いろいろ修正が必要になるとおもわれます。\u003c/p\u003e\n\n\u003cp\u003e※ Time.timeScale を 0 にする方法は今回のサンプルとは相性が悪い気がします\u003c/p\u003e\n\n\u003cp\u003eそして R キーでゲームを再プレイする場合は \u003ccode\u003eSceneManager.LoadScene\u003c/code\u003e 関数を使って、シーン自体を読み込み直しています。大胆ですが、まあ確実な初期化方法ですね。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"ちょっと改良してみよう\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%A1%E3%82%87%E3%81%A3%E3%81%A8%E6%94%B9%E8%89%AF%E3%81%97%E3%81%A6%E3%81%BF%E3%82%88%E3%81%86\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eちょっと改良してみよう\u003c/h1\u003e\n\n\u003cp\u003eこのゲーム、長時間プレイを続けると、動的に生成された岩石オブジェクトでヒエラルキーが埋まってしまうんですよね。いわゆる、メモリーリークに近い問題を抱えているわけなんです。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/03addee158e75d28d2e55e9318a18263d88e8ab5/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3139333531392f31366561373138362d383862352d343830372d656463382d6365323838636562643266642e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2F16ea7186-88b5-4807-edc8-ce288cebd2fd.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=b485945571aad0020f0e5f8e4f5e56db\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/193519/16ea7186-88b5-4807-edc8-ce288cebd2fd.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2F16ea7186-88b5-4807-edc8-ce288cebd2fd.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=c8a38fa7be2dfb4d9ca646e5ceb289ee 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003cbr\u003e\nゲーム全体を眺めると、ゲーム画面を囲んでいる \u003ccode\u003eBoundary\u003c/code\u003e に以下のスクリプトが定義されているので、岩石もこれに該当して消えるのかと思っていましたが…？\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eDone_DestroyByBoundary.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eDone_DestroyByBoundary\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eMonoBehaviour\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eOnTriggerExit\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eCollider\u003c/span\u003e \u003cspan class=\"n\"\u003eother\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"nf\"\u003eDestroy\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eother\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003egameObject\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003eよくよく眺めてみると、Prefab の岩石にはコライダー設定がなく、上記のロジックが動作していないのではないか？と。\u003c/p\u003e\n\n\u003cp\u003eそこで Prefab の岩石のほうに、適当なコライダーを設定したところ、上記ロジックがうまく動作するようになり、不要なオブジェクトが消されるようになりました。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/ef2b6d220e7cdbd0d332b0d7ce85b45b5f195eb0/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3139333531392f64623735613732342d386236662d323239342d393132662d3564316264613632326238362e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2Fdb75a724-8b6f-2294-912f-5d1bda622b86.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=abfda464f915f8bf5120a9accbb08c3a\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/193519/db75a724-8b6f-2294-912f-5d1bda622b86.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F193519%2Fdb75a724-8b6f-2294-912f-5d1bda622b86.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=edf8ff52a2e79d201434aee7b00a2991 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003cbr\u003e\nこれでメモリーリークの心配は無くなりましたね！\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"まとめ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%BE%E3%81%A8%E3%82%81\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eまとめ\u003c/h1\u003e\n\n\u003cp\u003e今回は公式チュートリアル＆アセットの  \u003ca href=\"https://assetstore.unity.com/packages/essentials/tutorial-projects/space-shooter-tutorial-13866\" rel=\"nofollow noopener\" target=\"_blank\"\u003eSpace Shooter tutorial\u003c/a\u003e を対象に、実際に動作するシューティングゲームの実装方法について見ていきました。\u003c/p\u003e\n\n\u003cp\u003eシンプルかつ汎用性のある作りで、これをベースに拡張して自分のゲームを作成するのは容易だとおもいます。私も自分のゲームを作成する際に参考にしてみたいと思いますので、その際の経験なども別途まとめられたらいいな、と考えています。\u003c/p\u003e\n\n\u003cp\u003e【追記】まとめました＞ \u003ca href=\"https://qiita.com/yamachan360/items/460ef13dd08118f9bf21\" id=\"reference-d2c57abb846838e098dc\"\u003eUnity 公式チュートリアル「Space Shooter tutorial」をベースに自作ゲームを作る【前編】\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eそれではまた！\u003c/p\u003e\n","createdAt":"2019-04-21T08:24:00Z","elapsedYearsFromLastModifiedAt":2,"encryptedId":"eDamBlH+DUHI884Vsm7aGcUhsZVcfAmw--4fVfs2okzV6XbISe--0IzQbhlNP5TgSK2/tjSidA==","isBanned":false,"isDeprecated":true,"isDestroyableByViewer":false,"isEditRequestReadableByViewer":true,"isEditRequestSendableByViewer":true,"isLikableByViewer":true,"isLikedByViewer":false,"isPublic":true,"isSlide":false,"isStockableByViewer":true,"isStockedByViewer":false,"isSubscribableByViewer":false,"isSubscribedByViewer":false,"isUpdatableByViewer":false,"isUpdated":true,"lastModifiedAt":"2019-05-06T13:47:49Z","likesCount":2,"linkUrl":"https://qiita.com/yamachan360/items/3690d4a4de5e6f02b0b9","organization":null,"originalId":871243,"stockedCount":1,"title":"Unity 公式チュートリアル「Space Shooter tutorial」をコードから理解してみる","toc":"\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E4%BD%9C%E6%88%90\"\u003eプロジェクト作成\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AE%9F%E8%A1%8C%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B\"\u003e実行してみる\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%A4%A7%E3%81%BE%E3%81%8B%E3%81%AA%E6%A7%8B%E6%88%90%E3%81%AE%E7%90%86%E8%A7%A3\"\u003e大まかな構成の理解\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E8%83%8C%E6%99%AF%E3%81%AE%E3%82%B9%E3%82%AF%E3%83%AD%E3%83%BC%E3%83%AB\"\u003e背景のスクロール\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E8%87%AA%E6%A9%9F%E3%81%AE%E6%93%8D%E4%BD%9C\"\u003e自機の操作\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E8%87%AA%E6%A9%9F%E3%81%8C%E3%83%93%E3%83%BC%E3%83%A0%E3%82%92%E6%92%83%E3%81%A4\"\u003e自機がビームを撃つ\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E8%87%AA%E6%A9%9F%E3%81%AE%E3%83%93%E3%83%BC%E3%83%A0%E3%81%8C%E7%A7%BB%E5%8B%95%E3%81%99%E3%82%8B\"\u003e自機のビームが移動する\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E8%87%AA%E6%A9%9F%E3%81%8C%E7%A7%BB%E5%8B%95%E3%81%99%E3%82%8B\"\u003e自機が移動する\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E6%95%B5%E3%82%84%E5%B2%A9%E7%9F%B3%E3%81%AE%E8%A1%A8%E7%A4%BA\"\u003e敵や岩石の表示\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%B2%A9%E7%9F%B3%E3%81%AE%E7%A7%BB%E5%8B%95%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6\"\u003e岩石の移動について\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E6%95%B5%E3%81%AE%E7%A7%BB%E5%8B%95%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6\"\u003e敵の移動について\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E6%9C%80%E5%BE%8C%E3%81%AF%E5%85%A8%E4%BD%93%E3%81%AE%E7%AE%A1%E7%90%86\"\u003e最後は全体の管理\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%81%A1%E3%82%87%E3%81%A3%E3%81%A8%E6%94%B9%E8%89%AF%E3%81%97%E3%81%A6%E3%81%BF%E3%82%88%E3%81%86\"\u003eちょっと改良してみよう\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%81%BE%E3%81%A8%E3%82%81\"\u003eまとめ\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n","totalPv":4552,"uuid":"3690d4a4de5e6f02b0b9","banReason":null,"adventCalendarItem":null,"author":{"encryptedId":"5pDyIAtbPUgNG+RmlhVkawou6dOy--0Rf3A9qBXkqVam3T--VQ9dAzQM3Kr7rrKFvtXMlw==","originalId":193519,"description":"Web系開発者。映画,特撮,功夫,酒, ロボ,アニメ,模型,ゲーム, 懐パソ(PC6001, MSX, X68000), JavaScript/NodeJS, Unity, RPGツクール, プチコン, AWS, 開発環境なんでも好き。修行中。\r\n\r\n投稿は全て個人の見解です。\r\nPosts are my own.","facebookUrl":"https://facebook.com/yamachan360","githubUrl":"https://github.com/yamachan","isBlockingViewer":false,"isFollowableByViewer":true,"isFollowedByViewer":false,"isTweetWebNotificationReceivable":true,"linkedinUrl":"https://www.linkedin.com/in/yamasita/","name":"Toshio Yamashita","profileImageUrl":"https://qiita-image-store.s3.amazonaws.com/0/193519/profile-images/1547708105","profileImageUrlW48":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F193519%2Fprofile-images%2F1547708105?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=48\u0026s=10f81e69966af393d9cb329dbc3cc87c","profileImageUrlW75":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F193519%2Fprofile-images%2F1547708105?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=2755ac3d43b35c70e8ef1ac2554050b9","urlName":"yamachan360","websiteUrl":"","twitterUrl":"https://twitter.com/yamachan360","twitterUrlName":"yamachan360","revealedOrganizations":{"edges":[]}},"tags":[{"name":"C#","urlName":"csharp"},{"name":"Unity","urlName":"unity"},{"name":"初心者","urlName":"%e5%88%9d%e5%bf%83%e8%80%85"},{"name":"ゲーム制作","urlName":"%e3%82%b2%e3%83%bc%e3%83%a0%e5%88%b6%e4%bd%9c"}],"followingLikers":{"edges":[]},"comments":{"totalCount":0}},"comments":[],"client":null,"ads_event_emitter":null}}</script>
