<!DOCTYPE html><html><head><meta charset="utf-8" /><title>ClangNet(libclang)で構文解析(関数コールツリー/クロスリファレンス生成) - Qiita</title><meta content="width=device-width,initial-scale=1,shrink-to-fit=no,viewport-fit=cover" name="viewport" /><meta content="#55c500" name="theme-color" /><meta content="XWpkTG32-_C4joZoJ_UsmDUi-zaH-hcrjF6ZC_FoFbk" name="google-site-verification" /><meta content="telephone=no" name="format-detection" /><link rel="canonical" href="https://qiita.com/an-embedded-engineer/items/8f202a8a8acbabc08d5f" /><link href="/manifest.json" rel="manifest" /><link href="/opensearch.xml" rel="search" title="Qiita" type="application/opensearchdescription+xml" /><link as="script" href="https://www.googletagservices.com/tag/js/gpt.js" rel="preload" /><link href="https://securepubads.g.doubleclick.net" rel="preconnect" /><script async="" src="https://www.googletagservices.com/tag/js/gpt.js"></script><meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="eknCO+IrExhnC2j6jpJcqwaMBEgRYyycadkW3iYrOMapz7JgwrxN+UvJ3robRS5BqHBVpE7BUHyDWRHinjI8Cg==" /><link rel="shortcut icon" type="image/x-icon" href="https://cdn.qiita.com/assets/favicons/public/production-c620d3e403342b1022967ba5e3db1aaa.ico" /><link rel="apple-touch-icon" type="image/png" href="https://cdn.qiita.com/assets/favicons/public/apple-touch-icon-ec5ba42a24ae923f16825592efdc356f.png" /><link rel="stylesheet" media="all" href="https://cdn.qiita.com/assets/public/article-2eaa7dbedc42a8ea65c722cda46d0ebb.min.css" /><script src="https://cdn.qiita.com/assets/public/v3-article-bundle-63de2d91fef827269d3f6b958db2335b.min.js" defer="defer"></script><meta name="twitter:card" content="summary_large_image"><meta content="@Qiita" name="twitter:site" /><meta property="og:type" content="article"><meta property="og:title" content="ClangNet(libclang)で構文解析(関数コールツリー/クロスリファレンス生成) - Qiita"><meta property="og:image" content="https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0&amp;w=1200&amp;mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND1RMnhoYm1kT1pYUW9iR2xpWTJ4aGJtY3A0NEduNXFlTDVwYUg2S2VqNXA2UUtPbVdvdWFWc09PQ3MtT0R2T09EcS1PRGhPT0RxdU9EdkNfamdxX2pnNjNqZ3Juamc2cmpnNVhqZ3FIamc2empnN1BqZ3JubmxKX21pSkFwJnR4dC1jb2xvcj0lMjMzMzMmdHh0LWZvbnQ9SGlyYWdpbm8lMjBTYW5zJTIwVzYmdHh0LXNpemU9NTQmdHh0LWNsaXA9ZWxsaXBzaXMmdHh0LWFsaWduPWNlbnRlciUyQ21pZGRsZSZzPTEwNTU3NThmZTdhNzlhNTVjNWE4NjBmMzQ1NWQwM2Y3&amp;mark-align=center%2Cmiddle&amp;blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RR0Z1TFdWdFltVmtaR1ZrTFdWdVoybHVaV1Z5JnR4dC1jb2xvcj0lMjMzMzMmdHh0LWZvbnQ9SGlyYWdpbm8lMjBTYW5zJTIwVzYmdHh0LXNpemU9NDUmdHh0LWFsaWduPXJpZ2h0JTJDYm90dG9tJnM9Zjg3MmRlNjY1NWEzYzc2MGNkZTliNDc4NDQzZDc0MzY&amp;blend-align=center%2Cmiddle&amp;blend-mode=normal&amp;s=78034c51583585b4550013c4d790627e"><meta property="og:description" content="

まえがき

今回はClangNet(libclangの.NET(C#) Binding)を使った実用的な構文解析のサンプルを作成してみます。
今回作成するサンプルでは、以下の2つの情報を出力する機能を実装します。


 関数コール..."><meta content="https://qiita.com/an-embedded-engineer/items/8f202a8a8acbabc08d5f" property="og:url" /><meta content="Qiita" property="og:site_name" /><meta content="564524038" property="fb:admins" /><meta content="C#,clang,libclang,ClangNet" name="keywords" /><script>!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window, document,'script',
'https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '668972150489891');
fbq('track', 'PageView');</script><style data-emotion-css="17jxvjw 11t2ec1 1dvr2p8 18lkoru 1g4cku8 1iupg5d ijvq0v 15cocm3 12rp90f 115f4t 1b8uj5v 79elbk 16hhh7b fcbn8c 1gj7nt 154zy0m yikrym 1jqivyb 1ode1bp le4d8r 1hbd3g7 1nzh4zz 38fzdi helsa7 8qb8m4 2imjyh he5w1s 70qvj9 3ojehk 100alwu 1dtnjt5 10ougpm 1ay9vb9 m19uds cgzq40 1wa99t2 1l3zk9f 4czcte 1yzj1fm 1uv1qiv 109dbrr 5jpx49 mnxgyc 1vlpknv fsjkhv 1b17vb0 7i7f4d"}>.css-17jxvjw{display:grid;display:-ms-grid;grid-template-columns:80px minmax(0,1fr) 300px;-ms-grid-columns:80px minmax(0,1fr) 300px;grid-template-rows:minmax(270px,auto) 1fr;-ms-grid-rows:minmax(270px,auto) 1fr;max-width:1280px;margin-right:auto;margin-left:auto;padding-top:24px;padding-right:24px;padding-left:24px;}@media (max-width:1200px){.css-17jxvjw{padding-bottom:0;padding-left:0;padding-right:0;}}@media (max-width:992px){.css-17jxvjw{grid-template-columns:80px 452px 300px;-ms-grid-columns:80px 452px 300px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}}@media (max-width:770px){.css-17jxvjw{display:block;}}@media (max-width:480px){.css-17jxvjw{padding-top:0;}}.css-11t2ec1{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;z-index:5;position:-webkit-sticky;position:sticky;top:calc(56px + 24px + 16px + 32px - 16px);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:16px;width:80px;}.css-11t2ec1:after{content:'';display:table;}.css-11t2ec1:before{content:'';display:table;}@media (max-width:770px){.css-11t2ec1{display:none;}}.css-1dvr2p8{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-18lkoru{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;background-color:#FFFFFF;}.css-1g4cku8{display:inline-block;vertical-align:middle;height:20px;width:20px;fill:#55C500;}.css-1iupg5d{color:#55C500;cursor:pointer;font-size:14px;font-weight:bold;}.css-ijvq0v{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-15cocm3{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#FFFFFF;border:2px solid #6E6F70;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:2px 0px 0px;width:40px;}.css-12rp90f{display:inline-block;vertical-align:bottom;height:17.77777777777778px;width:16px;fill:#6E6F70;}.css-115f4t{color:#6E6F70;font-size:14px;font-weight:bold;}.css-1b8uj5v{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;margin-bottom:16px;padding:0;}.css-79elbk{position:relative;}.css-16hhh7b{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;padding:0;}.css-fcbn8c{display:none;bottom:initial;left:initial;right:initial;top:initial;left:100%;top:calc(-8px - (14px * 1.8) - 16px - 4px);}.css-1gj7nt{color:rgba(0,0,0,0.6);font-size:14px;font-weight:bold;line-height:1.8;padding:8px 16px;}.css-154zy0m{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.87);cursor:pointer;font-size:16px;font-weight:normal;line-height:1.8;padding:4px 16px;}.css-154zy0m:hover{-webkit-text-decoration:none;text-decoration:none;background-color:#F2F2F2;}.css-yikrym{width:20px;}.css-1jqivyb{color:rgba(0,0,0,0.6);font-size:13px;}.css-1ode1bp{background-color:rgba(0,0,0,0.12);height:1px;width:100%;margin:8px 0;}.css-le4d8r{display:inline-block;vertical-align:middle;height:13px;width:13px;fill:rgba(0,0,0,0.6);}.css-1hbd3g7{height:250px;}.css-1nzh4zz{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:16px 32px;background-color:#FBE69E;color:rgba(0,0,0,0.87);line-height:1.5;font-weight:600;}@media (max-width:770px){.css-1nzh4zz{padding:16px;}}.css-38fzdi{color:#CA832A;margin-right:4px;}.css-helsa7{background-color:#FFFFFF;padding:32px;margin-bottom:24px;}@media (max-width:992px){.css-helsa7{margin:0 auto 40px;}}@media (max-width:480px){.css-helsa7{margin:0 0 40px;padding:32px 16px;}}.css-8qb8m4{margin-bottom:48px;}.css-2imjyh{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-he5w1s{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;width:100%;}@media (max-width:770px){.css-he5w1s{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}}.css-70qvj9{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.css-3ojehk{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;margin-right:4px;}.css-100alwu{display:inline-block;border-radius:50%;line-height:1;overflow:hidden;vertical-align:middle;}.css-1dtnjt5{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-10ougpm{color:rgba(0,0,0,0.87);font-size:14px;font-weight:600;line-height:1.8;margin-right:4px;text-wrap:break-word;word-break:break-all;}.css-1ay9vb9{margin-right:16px;}.css-m19uds{color:rgba(0,0,0,0.6);font-size:14px;line-height:1.8;}.css-cgzq40{color:rgba(0,0,0,0.87);font-size:32px;font-weight:bold;line-height:1.4;margin-top:8px;text-wrap:break-word;word-break:break-all;}.css-1wa99t2{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.6);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:8px;}.css-1l3zk9f{color:rgba(0,0,0,0.6);font-size:20px;margin-right:8px;}.css-4czcte{margin-right:4px;color:inherit;font-size:14px;line-height:1.8;}.css-4czcte:not(:last-child)::after{content:',';margin-right:4px;}.css-1yzj1fm{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:32px;}.css-1uv1qiv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-size:20px;height:32px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin-right:16px;outline:none;padding:0;width:32px;}.css-109dbrr{background-color:#F9F9F9;border-top:1px solid rgba(0,0,0,0.12);bottom:0;box-shadow:0px 1px 4px rgba(0,0,0,0.14);display:none;height:calc(env(safe-area-inset-bottom,0px) + 56px);-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding-bottom:env(safe-area-inset-bottom);position:-webkit-sticky;position:sticky;width:100%;z-index:2000;}@media (max-width:770px){.css-109dbrr{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}.css-5jpx49{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:space-evenly;-webkit-justify-content:space-evenly;-ms-flex-pack:space-evenly;justify-content:space-evenly;width:100%;}.css-mnxgyc{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1vlpknv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;margin-right:4px;background-color:#FFFFFF;}.css-fsjkhv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1b17vb0{color:#6E6F70;font-size:14px;font-weight:bold;margin-left:4px;}.css-7i7f4d{display:none;bottom:initial;left:initial;right:initial;top:initial;bottom:32px;right:0;}</style></head><body><div class="allWrapper"><div><div id="GlobalHeader-react-component-159ebd75-cdfe-459a-b0bc-9f379d9f28fc"><div class="st-Header"><div class="st-Header_container"><div class="st-Header_start"><a href="/" class="st-Header_logo"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 426.57 130"><circle cx="167.08" cy="21.4" r="12.28"></circle><path d="M250.81 29.66h23.48v18.9h-23.48z"></path><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z"></path><circle cx="216.33" cy="21.4" r="12.28"></circle></svg></a><div class="st-Header_communitySelector" tabindex="0"><span class="fa fa-caret-down"></span></div><div class="st-Header_dropdown"><div class="st-Header_dropdownHeading">Qiita Teams that are logged in</div><div class="st-Header_dropdownItemNote">You are not logged in to any team</div><hr class="st-Header_dropdownDivider st-Header_dropdownDivider-shrink"/><a href="https://teams-center.qiita.com/find_team" class="st-Header_dropdownItem"><span class="fa fa-fw fa-sign-in st-Header_dropdownItemIcon"></span><div>Log in to Qiita Team</div></a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Community</div><a href="/organizations" class="st-Header_dropdownItem">Organization</a><a href="/official-events/open" class="st-Header_dropdownItem">Event</a><a href="/advent-calendar" class="st-Header_dropdownItem">Advent Calendar</a><a href="https://qiitadon.com/" class="st-Header_dropdownItem" target="_blank">Qiitadon (β)</a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Service</div><a href="https://jobs.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Jobs</a><a href="https://zine.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Zine</a><a href="https://blog.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Blog</a></div><form class="st-Header_search" action="/search" method="get"><span class="fa fa-search st-Header_searchIcon"></span><input type="search" class="st-Header_searchInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form><form class="st-Header_searchModal" action="/search" method="get"><input type="text" class="st-Header_searchModalInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form></div><div class="st-Header_end"><div class="st-Header_searchButton"><span class="fa fa-search"></span></div><a class="st-Header_signupButton" href="/signup?redirect_to=%2Fan-embedded-engineer%2Fitems%2F8f202a8a8acbabc08d5f">Signup</a><a class="st-Header_loginLink" href="/login?redirect_to=%2Fan-embedded-engineer%2Fitems%2F8f202a8a8acbabc08d5f">Login</a></div><div class="st-Header_overlay"></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="GlobalHeader" data-dom-id="GlobalHeader-react-component-159ebd75-cdfe-459a-b0bc-9f379d9f28fc">{"unreadNotificationsCount":null,"realms":[{"humanName":"Qiita","isCurrentRealm":true,"isQiita":true,"isQiitaTeam":false,"loggedInUser":null,"teamId":null,"url":"https://qiita.com/"}],"teamFindUrl":"https://teams-center.qiita.com/find_team","isTeamOnlyUser":null,"currentUser":null}</script>
      
</div><div class="st-HeaderAlert st-HeaderAlert-warning"><div class="st-HeaderAlert_body"></div></div><script type="application/ld+json">{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"/","name":"Qiita"}},{"@type":"ListItem","position":2,"item":{"@id":"/tags/csharp","name":"C#"}}]}</script><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","datePublished":"2019-10-14T15:49:06.000+09:00","dateModified":"2019-10-14T15:49:06.000+09:00","headline":"ClangNet(libclang)で構文解析(関数コールツリー/クロスリファレンス生成)","image":"https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0\u0026w=1200\u0026mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND1RMnhoYm1kT1pYUW9iR2xpWTJ4aGJtY3A0NEduNXFlTDVwYUg2S2VqNXA2UUtPbVdvdWFWc09PQ3MtT0R2T09EcS1PRGhPT0RxdU9EdkNfamdxX2pnNjNqZ3Juamc2cmpnNVhqZ3FIamc2empnN1BqZ3JubmxKX21pSkFwJnR4dC1jb2xvcj0lMjMzMzMmdHh0LWZvbnQ9SGlyYWdpbm8lMjBTYW5zJTIwVzYmdHh0LXNpemU9NTQmdHh0LWNsaXA9ZWxsaXBzaXMmdHh0LWFsaWduPWNlbnRlciUyQ21pZGRsZSZzPTEwNTU3NThmZTdhNzlhNTVjNWE4NjBmMzQ1NWQwM2Y3\u0026mark-align=center%2Cmiddle\u0026blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RR0Z1TFdWdFltVmtaR1ZrTFdWdVoybHVaV1Z5JnR4dC1jb2xvcj0lMjMzMzMmdHh0LWZvbnQ9SGlyYWdpbm8lMjBTYW5zJTIwVzYmdHh0LXNpemU9NDUmdHh0LWFsaWduPXJpZ2h0JTJDYm90dG9tJnM9Zjg3MmRlNjY1NWEzYzc2MGNkZTliNDc4NDQzZDc0MzY\u0026blend-align=center%2Cmiddle\u0026blend-mode=normal\u0026s=78034c51583585b4550013c4d790627e","mainEntityOfPage":"https://qiita.com/an-embedded-engineer/items/8f202a8a8acbabc08d5f","author":{"@type":"Person","address":"","email":null,"identifier":"an-embedded-engineer","name":"an-embedded-engineer","image":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F64578%2Fprofile-images%2F1473696628?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=32c6cab0345c05c098e234b29e5c1aa1","url":"https://qiita.com/an-embedded-engineer","description":"","memberOf":[]},"publisher":{"@type":"Organization","name":"Qiita","logo":{"@type":"ImageObject","url":"//cdn.qiita.com/assets/public/qiita-logo-c39ded593afa388e2e1ba435b110554e.png"}}}</script><style type="text/css">.wb-CampaignLink {
  background-color: #333333;
  width: 100%;
}

.wb-CampaignLink_container {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  max-width: 1100px;
  margin: 0 auto;
  font-size: 13px;
  padding: 0.8em;
}
.wb-CampaignLink_container > a {
  color: #fff;
}

.wb-CampaignLink_container > a:hover {
  text-decoration: underline;
}</style><div class="wb-CampaignLink"><div class="wb-CampaignLink_container"><a target="_blank" id="header_text_message_1" href="https://zine.qiita.com/interview/202107-hitachi/?utm_source=qiita&amp;utm_medium=header-banner">グループ会社出納業務の証票処理を70％自動化。日立のAI-OCR技術とは？</a><a target="_blank" id="header_text_message_2" href="https://zine.qiita.com/interview/202107-hitachi/?utm_source=qiita&amp;utm_medium=header-banner">詳しくはこちら</a></div><script>td.trackEvent(
  'front_events',
  {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"an-embedded-engineer","type":"items","id":"8f202a8a8acbabc08d5f"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Show","data":{"message":"グループ会社出納業務の証票処理を70％自動化。日立のAI-OCR技術とは？","url":"https://zine.qiita.com/interview/202107-hitachi/?utm_source=qiita\u0026utm_medium=header-banner","sub_message":"詳しくはこちら"}}
)</script><script>document.getElementById('header_text_message_1').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"an-embedded-engineer","type":"items","id":"8f202a8a8acbabc08d5f"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":1,"pos_id":"header_text_message_1","message":"グループ会社出納業務の証票処理を70％自動化。日立のAI-OCR技術とは？","url":"https://zine.qiita.com/interview/202107-hitachi/?utm_source=qiita\u0026utm_medium=header-banner","sub_message":"詳しくはこちら"}}
  )
})</script><script>document.getElementById('header_text_message_2').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"an-embedded-engineer","type":"items","id":"8f202a8a8acbabc08d5f"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":1,"pos_id":"header_text_message_2","message":"グループ会社出納業務の証票処理を70％自動化。日立のAI-OCR技術とは？","url":"https://zine.qiita.com/interview/202107-hitachi/?utm_source=qiita\u0026utm_medium=header-banner","sub_message":"詳しくはこちら"}}
  )
})</script></div><script type="application/json" id="js-react-on-rails-context">{"railsEnv":"production","inMailer":false,"i18nLocale":"en","i18nDefaultLocale":"en","href":"https://qiita.com/an-embedded-engineer/items/8f202a8a8acbabc08d5f","location":"/an-embedded-engineer/items/8f202a8a8acbabc08d5f","scheme":"https","host":"qiita.com","port":null,"pathname":"/an-embedded-engineer/items/8f202a8a8acbabc08d5f","search":null,"httpAcceptLanguage":null,"actionPath":"public/items#show","settings":{"analyticsTrackingId":"UA-24675221-12","assetsMap":{},"csrfToken":"FZP/Uaehr2lWq1+hqnngtAihGgjO2mff/h7vGzyhZenGFY8KhzbxiHpp6eE/rpJepl1L5JF4Gz8UnugnhLhhJQ==","locale":"en"},"currentUser":null,"isLoggedIn":false,"recaptchaSiteKey":"6LfNkiQTAAAAAM3UGnSquBy2akTITGNMO_QDxMw6","serverSide":false}</script>
<div id="PersonalArticlePage-react-component-52d8b2f4-a622-4585-b9b0-fb065539fe57"><div class="p-items_wrapper"><div class=" css-17jxvjw"><div class="css-11t2ec1"><div class="css-1dvr2p8"><button class=" css-18lkoru"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/an-embedded-engineer/items/8f202a8a8acbabc08d5f/likers" class="css-1iupg5d">4</a></div><div class="css-ijvq0v"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-115f4t">3</span></div><div class="css-1b8uj5v"><span class="fa fa-twitter"></span></div><div class="css-1b8uj5v"><span class="fa fa-facebook"></span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-fcbn8c"><div class="css-1gj7nt">Improve article</div><a href="/drafts/8f202a8a8acbabc08d5f/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/an-embedded-engineer/items/8f202a8a8acbabc08d5f/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/an-embedded-engineer/items/8f202a8a8acbabc08d5f/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/an-embedded-engineer/items/8f202a8a8acbabc08d5f/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/an-embedded-engineer/items/8f202a8a8acbabc08d5f.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div><div class="p-items_options"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_toc"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_main"><div class="css-1nzh4zz"><span class="fa fa-fw fa-warning css-38fzdi"></span><p>More than 1 year has passed since last update.</p></div><div class="css-helsa7"><div class="css-8qb8m4"><div class="css-2imjyh"><div class="css-he5w1s"><div class="css-70qvj9"><div class="css-3ojehk"><a href="/an-embedded-engineer"><img class="css-100alwu eyfquo10" src="https://qiita-image-store.s3.amazonaws.com/0/64578/profile-images/1473696628" width="24" height="24" loading="lazy"/></a></div><div class="css-1dtnjt5"><a href="/an-embedded-engineer" class="css-10ougpm">@<!-- -->an-embedded-engineer</a><div class="css-1ay9vb9"><time dateTime="2019-10-14T06:49:06Z" class="css-m19uds">posted at 2019-10-14</time></div></div></div></div></div><h1 class="css-cgzq40">ClangNet(libclang)で構文解析(関数コールツリー/クロスリファレンス生成)</h1><div class="css-1wa99t2"><span class="fa fa-tags mr-1of2 css-1l3zk9f" aria-hidden="true"></span><a href="/tags/csharp" class="css-4czcte">C#</a><a href="/tags/clang" class="css-4czcte">clang</a><a href="/tags/libclang" class="css-4czcte">libclang</a><a href="/tags/clangnet" class="css-4czcte">ClangNet</a></div></div><section class="it-MdContent"><div id="personal-public-article-body"><div>
<h4>
<span id="まえがき" class="fragment"></span><a href="#%E3%81%BE%E3%81%88%E3%81%8C%E3%81%8D"><i class="fa fa-link"></i></a>まえがき</h4>

<p>今回はClangNet(libclangの.NET(C#) Binding)を使った実用的な構文解析のサンプルを作成してみます。<br>
今回作成するサンプルでは、以下の2つの情報を出力する機能を実装します。</p>

<ol>
<li> 関数コールツリー</li>
<li>関数クロスリファレンス(宣言/定義/コール)情報</li>
</ol>

<p>ClangNetのインストールや使用方法については<a href="https://qiita.com/an-embedded-engineer/items/2d6a7b59b0a312cf7f96" id="reference-13623eb5378a3182da75">過去記事</a>をご参照ください。</p>

<h4>
<span id="解析対象ソース" class="fragment"></span><a href="#%E8%A7%A3%E6%9E%90%E5%AF%BE%E8%B1%A1%E3%82%BD%E3%83%BC%E3%82%B9"><i class="fa fa-link"></i></a>解析対象ソース</h4>

<p>まずは、今回解析対象にするC/C++用ソースコードを用意します。<br>
今回は以下の種類の関数を解析対象にします。</p>

<ul>
<li>C形式の関数</li>
<li>クラスメンバ関数</li>
<li>標準ライブラリ関数</li>
<li>再帰関数</li>
</ul>

<p>解析対象にするソースのサンプルを以下に示します。<br>
解析対象ソースの詳しい説明は割愛します。</p>

<div class="code-frame" data-lang="cpp">
<div class="code-lang"><span class="bold">TestClass.h</span></div>
<div class="highlight"><pre class="with-code"><code><span class="cp">#pragma once
</span>
<span class="k">namespace</span> <span class="n">root</span>
<span class="p">{</span>
    <span class="k">namespace</span> <span class="n">sub1</span>
    <span class="p">{</span>
        <span class="k">namespace</span> <span class="n">sub2</span>
        <span class="p">{</span>
            <span class="k">class</span> <span class="nc">TestClass</span>
            <span class="p">{</span>
            <span class="nl">public:</span>
                <span class="n">TestClass</span><span class="p">();</span>
                <span class="o">~</span><span class="n">TestClass</span><span class="p">();</span>

                <span class="kt">void</span> <span class="n">PublicMethod</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">,</span> <span class="kt">int</span> <span class="n">b</span><span class="p">);</span>

                <span class="kt">int</span> <span class="n">GetA</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">m_a</span><span class="p">;</span> <span class="p">}</span>
                <span class="kt">int</span> <span class="n">GetB</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">m_b</span><span class="p">;</span> <span class="p">}</span>
                <span class="kt">int</span> <span class="n">GetResult</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">m_result</span><span class="p">;</span> <span class="p">}</span>

                <span class="kt">void</span> <span class="n">SetA</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">)</span> <span class="p">{</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">m_a</span> <span class="o">=</span> <span class="n">a</span><span class="p">;</span> <span class="p">}</span>
                <span class="kt">void</span> <span class="n">SetB</span><span class="p">(</span><span class="kt">int</span> <span class="n">b</span><span class="p">)</span> <span class="p">{</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">m_b</span> <span class="o">=</span> <span class="n">b</span><span class="p">;</span> <span class="p">}</span>
                <span class="kt">void</span> <span class="n">SetResult</span><span class="p">(</span><span class="kt">int</span> <span class="n">result</span><span class="p">)</span> <span class="p">{</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">m_result</span> <span class="o">=</span> <span class="n">result</span><span class="p">;</span> <span class="p">}</span>

            <span class="nl">private:</span>
                <span class="kt">int</span> <span class="n">PrivateMethod</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">,</span> <span class="kt">int</span> <span class="n">b</span><span class="p">);</span>

            <span class="nl">private:</span>
                <span class="kt">int</span> <span class="n">m_a</span><span class="p">;</span>
                <span class="kt">int</span> <span class="n">m_b</span><span class="p">;</span>
                <span class="kt">int</span> <span class="n">m_result</span><span class="p">;</span>
            <span class="p">};</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<div class="code-frame" data-lang="cpp">
<div class="code-lang"><span class="bold">TestClass.cpp</span></div>
<div class="highlight"><pre class="with-code"><code><span class="cp">#include "TestClass.h"
</span>
<span class="k">namespace</span> <span class="n">root</span>
<span class="p">{</span>
    <span class="k">namespace</span> <span class="n">sub1</span>
    <span class="p">{</span>
        <span class="k">namespace</span> <span class="n">sub2</span>
        <span class="p">{</span>
            <span class="n">TestClass</span><span class="o">::</span><span class="n">TestClass</span><span class="p">()</span>
                <span class="o">:</span> <span class="n">m_a</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                <span class="p">,</span> <span class="n">m_b</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                <span class="p">,</span> <span class="n">m_result</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="p">{</span>
            <span class="p">}</span>

            <span class="n">TestClass</span><span class="o">::~</span><span class="n">TestClass</span><span class="p">()</span>
            <span class="p">{</span>

            <span class="p">}</span>

            <span class="kt">void</span> <span class="n">TestClass</span><span class="o">::</span><span class="n">PublicMethod</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">,</span> <span class="kt">int</span> <span class="n">b</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">PrivateMethod</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">);</span>

                <span class="k">this</span><span class="o">-&gt;</span><span class="n">SetResult</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="kt">int</span> <span class="n">TestClass</span><span class="o">::</span><span class="n">PrivateMethod</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">,</span> <span class="kt">int</span> <span class="n">b</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">this</span><span class="o">-&gt;</span><span class="n">SetA</span><span class="p">(</span><span class="n">a</span><span class="p">);</span>
                <span class="k">this</span><span class="o">-&gt;</span><span class="n">SetB</span><span class="p">(</span><span class="n">b</span><span class="p">);</span>

                <span class="k">return</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">m_a</span> <span class="o">+</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">m_b</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<div class="code-frame" data-lang="cpp">
<div class="code-lang"><span class="bold">main.cpp</span></div>
<div class="highlight"><pre class="with-code"><code><span class="cp">#include &lt;iostream&gt;
</span>
<span class="cp">#include "TestClass.h"
</span>
<span class="kt">void</span> <span class="nf">RecursiveCallTest</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">);</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">root</span><span class="o">::</span><span class="n">sub1</span><span class="o">::</span><span class="n">sub2</span><span class="o">::</span><span class="n">TestClass</span> <span class="n">test_instance</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="n">test_instance</span><span class="p">.</span><span class="n">SetA</span><span class="p">(</span><span class="n">a</span><span class="p">);</span>

    <span class="n">test_instance</span><span class="p">.</span><span class="n">SetB</span><span class="p">(</span><span class="n">b</span><span class="p">);</span>

    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"a : "</span> <span class="o">&lt;&lt;</span> <span class="n">test_instance</span><span class="p">.</span><span class="n">GetA</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"b : "</span> <span class="o">&lt;&lt;</span> <span class="n">test_instance</span><span class="p">.</span><span class="n">GetB</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

    <span class="n">test_instance</span><span class="p">.</span><span class="n">PublicMethod</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">);</span>

    <span class="n">result</span> <span class="o">=</span> <span class="n">test_instance</span><span class="p">.</span><span class="n">GetResult</span><span class="p">();</span>

    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"result : "</span> <span class="o">&lt;&lt;</span> <span class="n">result</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

    <span class="n">RecursiveCallTest</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">RecursiveCallTest</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"i : "</span> <span class="o">&lt;&lt;</span> <span class="n">i</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

        <span class="n">RecursiveCallTest</span><span class="p">(</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<h4>
<span id="構文解析サンプル" class="fragment"></span><a href="#%E6%A7%8B%E6%96%87%E8%A7%A3%E6%9E%90%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB"><i class="fa fa-link"></i></a>構文解析サンプル</h4>

<p>上記解析対象ソースに対して、関数コールツリー(Invokation Tree)と関数クロスリファレンス(Cross Reference)情報を生成して出力するサンプルを実装します。</p>

<h5>
<span id="実現方法" class="fragment"></span><a href="#%E5%AE%9F%E7%8F%BE%E6%96%B9%E6%B3%95"><i class="fa fa-link"></i></a>実現方法</h5>

<p>実現方法を簡単に説明します。<br>
大きく分けると次の3ステップで実現します。</p>

<ol>
<li>Translation Unit(ソースファイル)解析</li>
<li>Invokation Tree(関数コールツリー)生成</li>
<li>Cross Reference(関数参照情報)生成</li>
</ol>

<p>1 のTranslation Unit(ソースファイル)解析では、ClangNetの構文解析機能を使って各ソースファイルのAST(抽象構文木)を辿っていき、以下のような情報を収集します。</p>

<table>
<thead>
<tr>
<th>種別</th>
<th>意味</th>
<th>保持する情報</th>
<th>備考</th>
</tr>
</thead>
<tbody>
<tr>
<td>Translation Unit情報</td>
<td>変換対象(ソースファイル)ごとに保持する情報</td>
<td>ソースファイルパス、宣言・定義されているBehavior情報マップ</td>
<td></td>
</tr>
<tr>
<td>Behavior情報マップ</td>
<td>Behavior(関数)の宣言・定義位置をキーにした、Behavior情報のハッシュマップ</td>
<td>Key : 関数宣言・定義位置、Value : Behavior情報</td>
<td></td>
</tr>
<tr>
<td>Behavior情報</td>
<td></td>
<td>種別(宣言/定義)、関数宣言、名前空間、ソース位置、呼び出している関数のInvokation情報リスト</td>
<td></td>
</tr>
<tr>
<td>Invokation情報</td>
<td></td>
<td>呼び出している関数名、ソース位置、参照している関数宣言のBehavior情報</td>
<td></td>
</tr>
</tbody>
</table>

<p>2 のInvokation Tree(関数コールツリー)生成では、1 で収集した情報をもとに、関数定義内で呼び出している関数を再帰的に辿っていきます。<br>
3 の Cross Reference(関数参照情報)生成では、1 で収集した情報をもとに、関数ごとに宣言箇所、定義箇所、呼び出し箇所のテーブルを生成します。</p>

<h5>
<span id="1-translation-unitソースファイル解析" class="fragment"></span><a href="#1-translation-unit%E3%82%BD%E3%83%BC%E3%82%B9%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E8%A7%A3%E6%9E%90"><i class="fa fa-link"></i></a>1. Translation Unit(ソースファイル)解析</h5>

<p>ソースファイルからClangNetを使ってASTを解析し、必要な情報を収集します。</p>

<h6>
<span id="1-1-データ構造定義" class="fragment"></span><a href="#1-1-%E3%83%87%E3%83%BC%E3%82%BF%E6%A7%8B%E9%80%A0%E5%AE%9A%E7%BE%A9"><i class="fa fa-link"></i></a>1-1. データ構造定義</h6>

<p>まずは収集して構築するデータ構造を定義して行きます。</p>

<table>
<thead>
<tr>
<th>型名</th>
<th>ベース型</th>
<th>意味</th>
<th>保持する情報</th>
<th>備考</th>
</tr>
</thead>
<tbody>
<tr>
<td>AstNodeInfo</td>
<td>-</td>
<td>ASTノードベース型</td>
<td>ソース位置情報</td>
<td></td>
</tr>
<tr>
<td>TranslationUnitInfo</td>
<td>AstNodeInfo</td>
<td>変換対象ソース情報</td>
<td>ファイルパス、BehaviorLocationMap</td>
<td></td>
</tr>
<tr>
<td>BehaviorInfo</td>
<td>AstNodeInfo</td>
<td>関数ノードベース型</td>
<td>種別(宣言/定義)、関数名、パラメータ、名前空間、定義、ID、InvokationInfoリスト</td>
<td></td>
</tr>
<tr>
<td>ClassBehaviorInfo</td>
<td>BehaviorInfo</td>
<td>クラスに所属する関数ノードベース型</td>
<td>クラス名</td>
<td></td>
</tr>
<tr>
<td>ConstructorInfo</td>
<td>ClassBehaviorInfo</td>
<td>コンストラクタ情報</td>
<td>-</td>
<td></td>
</tr>
<tr>
<td>DestructorInfo</td>
<td>ClassBehaviorInfo</td>
<td>デストラクタ情報</td>
<td>-</td>
<td></td>
</tr>
<tr>
<td>CppMethodInfo</td>
<td>ClassBehaviorInfo</td>
<td>クラスメンバ関数情報</td>
<td>返り値</td>
<td></td>
</tr>
<tr>
<td>FunctionInfo</td>
<td>BehaviorInfo</td>
<td>Cスタイル関数情報</td>
<td>返り値</td>
<td></td>
</tr>
<tr>
<td>InvokationInfo</td>
<td>AstNodeInfo</td>
<td>関数呼び出し情報</td>
<td>関数名、ID、参照先関数BehaviorInfo</td>
<td></td>
</tr>
<tr>
<td>BehaviorLocationMap</td>
<td>Dictionary</td>
<td>ソース位置をキーとしたBehaviorInfoのDictionary</td>
<td>Key : ソース位置 / Value : BehaviorInfo</td>
<td></td>
</tr>
<tr>
<td>TranslationUnitMap</td>
<td>Dictionary</td>
<td>ソースパスをキーとしたTranslationUnitInfoのDictionary</td>
<td>Key : ソースパス / Value : TranslationUnitInfo</td>
<td></td>
</tr>
</tbody>
</table>

<p>それぞれのソースを示します。</p>

<div class="code-frame" data-lang="cs">
<div class="code-lang"><span class="bold">AstNodeInfo.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="k">abstract</span> <span class="k">class</span> <span class="nc">AstNodeInfo</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="kt">string</span> <span class="n">Location</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>

    <span class="k">public</span> <span class="nf">AstNodeInfo</span><span class="p">(</span><span class="n">ClangCursor</span> <span class="n">cursor</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="cm">/* ソース上の位置情報を取得 */</span>
        <span class="k">this</span><span class="p">.</span><span class="n">Location</span> <span class="p">=</span> <span class="k">this</span><span class="p">.</span><span class="nf">GetLocation</span><span class="p">(</span><span class="n">cursor</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="kt">string</span> <span class="nf">GetLocation</span><span class="p">(</span><span class="n">ClangCursor</span> <span class="n">cursor</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="cm">/* カーソル位置を取得 */</span>
        <span class="kt">var</span> <span class="n">loc</span> <span class="p">=</span> <span class="n">cursor</span><span class="p">.</span><span class="n">Location</span><span class="p">;</span>

        <span class="cm">/* カーソル位置がnullでない */</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">loc</span> <span class="p">!=</span> <span class="k">null</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="cm">/* ファイル位置を取得 */</span>
            <span class="kt">var</span> <span class="n">floc</span> <span class="p">=</span> <span class="n">loc</span><span class="p">.</span><span class="n">FileLocation</span><span class="p">;</span>

            <span class="cm">/* ファイル位置がnullでない */</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">floc</span> <span class="p">!=</span> <span class="k">null</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="cm">/* ファイル情報がnullでない */</span>
                <span class="k">if</span><span class="p">(</span><span class="n">floc</span><span class="p">.</span><span class="n">File</span> <span class="p">!=</span> <span class="k">null</span><span class="p">)</span>
                <span class="p">{</span>
                    <span class="cm">/* ファイルパスを取得 */</span>
                    <span class="kt">var</span> <span class="n">path</span> <span class="p">=</span> <span class="n">Path</span><span class="p">.</span><span class="nf">GetFullPath</span><span class="p">(</span><span class="n">floc</span><span class="p">.</span><span class="n">File</span><span class="p">.</span><span class="n">FileName</span><span class="p">);</span>

                    <span class="cm">/* ファイル上の行番号を取得 */</span>
                    <span class="kt">var</span> <span class="n">line</span> <span class="p">=</span> <span class="n">floc</span><span class="p">.</span><span class="n">Line</span><span class="p">;</span>

                    <span class="cm">/* ファイル上の列番号を取得 */</span>
                    <span class="kt">var</span> <span class="n">col</span> <span class="p">=</span> <span class="n">floc</span><span class="p">.</span><span class="n">Column</span><span class="p">;</span>

                    <span class="cm">/* 位置情報文字列を生成 */</span>
                    <span class="kt">var</span> <span class="n">location</span> <span class="p">=</span> <span class="s">$"</span><span class="p">{</span><span class="n">path</span><span class="p">}</span><span class="s">[L.</span><span class="p">{</span><span class="n">line</span><span class="p">}</span><span class="s">,C.</span><span class="p">{</span><span class="n">col</span><span class="p">}</span><span class="s">]"</span><span class="p">;</span>

                    <span class="k">return</span> <span class="n">location</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="k">else</span>
                <span class="p">{</span>
                    <span class="cm">/* ファイル上の行番号を取得 */</span>
                    <span class="kt">var</span> <span class="n">line</span> <span class="p">=</span> <span class="n">floc</span><span class="p">.</span><span class="n">Line</span><span class="p">;</span>

                    <span class="cm">/* ファイル上の列番号を取得 */</span>
                    <span class="kt">var</span> <span class="n">col</span> <span class="p">=</span> <span class="n">floc</span><span class="p">.</span><span class="n">Column</span><span class="p">;</span>

                    <span class="cm">/* 位置情報文字列を生成 */</span>
                    <span class="kt">var</span> <span class="n">location</span> <span class="p">=</span> <span class="s">$"[L.</span><span class="p">{</span><span class="n">line</span><span class="p">}</span><span class="s">,C.</span><span class="p">{</span><span class="n">col</span><span class="p">}</span><span class="s">]"</span><span class="p">;</span>

                    <span class="k">return</span> <span class="n">location</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">else</span>
            <span class="p">{</span>
                <span class="cm">/* 位置情報なし */</span>
                <span class="k">return</span> <span class="kt">string</span><span class="p">.</span><span class="n">Empty</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="cm">/* 位置情報なし */</span>
            <span class="k">return</span> <span class="kt">string</span><span class="p">.</span><span class="n">Empty</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<div class="code-frame" data-lang="cs">
<div class="code-lang"><span class="bold">TranslationUnitInfo.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">TranslationUnitInfo</span> <span class="p">:</span> <span class="n">AstNodeInfo</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="kt">string</span> <span class="n">Path</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>

    <span class="k">public</span> <span class="n">BehaviorLocationMap</span> <span class="n">BehaviorMap</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">BehaviorLocationMap</span><span class="p">();</span>

    <span class="k">public</span> <span class="nf">TranslationUnitInfo</span><span class="p">(</span><span class="n">ClangCursor</span> <span class="n">cursor</span><span class="p">)</span> <span class="p">:</span> <span class="k">base</span><span class="p">(</span><span class="n">cursor</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="cm">/* ソースファイルのフルパスを取得 */</span>
        <span class="k">this</span><span class="p">.</span><span class="n">Path</span> <span class="p">=</span> <span class="n">System</span><span class="p">.</span><span class="n">IO</span><span class="p">.</span><span class="n">Path</span><span class="p">.</span><span class="nf">GetFullPath</span><span class="p">(</span><span class="n">cursor</span><span class="p">.</span><span class="n">Spelling</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">void</span> <span class="nf">AddBehavior</span><span class="p">(</span><span class="n">BehaviorInfo</span> <span class="n">behavior</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="n">BehaviorMap</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">behavior</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">override</span> <span class="kt">string</span> <span class="nf">ToString</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="s">$"[TranslationUnit]</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="n">Path</span><span class="p">}</span><span class="s">"</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<div class="code-frame" data-lang="cs">
<div class="code-lang"><span class="bold">BehaviorInfo.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="k">abstract</span> <span class="k">class</span> <span class="nc">BehaviorInfo</span> <span class="p">:</span> <span class="n">AstNodeInfo</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="kt">string</span> <span class="n">Type</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>

    <span class="k">public</span> <span class="kt">string</span> <span class="n">Name</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>

    <span class="k">public</span> <span class="kt">string</span> <span class="n">Parameters</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>

    <span class="k">public</span> <span class="kt">string</span> <span class="n">NameSpace</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>

    <span class="cm">/* 関数定義は継承先で生成 */</span>
    <span class="k">public</span> <span class="kt">string</span> <span class="n">Definition</span> <span class="p">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nf">GetDefinition</span><span class="p">();</span>

    <span class="cm">/* 関数のユニークなIDを生成 */</span>
    <span class="k">public</span> <span class="kt">string</span> <span class="n">ID</span> <span class="p">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nf">GenerateBehaviorID</span><span class="p">();</span>

    <span class="k">public</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">InvokationInfo</span><span class="p">&gt;</span> <span class="n">Invokations</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span> <span class="p">=</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">InvokationInfo</span><span class="p">&gt;();</span>

    <span class="k">protected</span> <span class="k">abstract</span> <span class="kt">string</span> <span class="nf">GetDefinition</span><span class="p">();</span>

    <span class="k">public</span> <span class="nf">BehaviorInfo</span><span class="p">(</span><span class="n">ClangCursor</span> <span class="n">cursor</span><span class="p">)</span> <span class="p">:</span> <span class="k">base</span><span class="p">(</span><span class="n">cursor</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="cm">/* 関数の種別を判定 */</span>
        <span class="k">this</span><span class="p">.</span><span class="n">Type</span> <span class="p">=</span> <span class="n">cursor</span><span class="p">.</span><span class="n">IsDefinition</span> <span class="p">?</span> <span class="s">"Definition"</span> <span class="p">:</span> <span class="s">"Declaration"</span><span class="p">;</span>

        <span class="cm">/* 関数名を取得 */</span>
        <span class="k">this</span><span class="p">.</span><span class="n">Name</span> <span class="p">=</span> <span class="n">cursor</span><span class="p">.</span><span class="n">Spelling</span><span class="p">;</span>

        <span class="cm">/* 関数パラメータを取得 */</span>
        <span class="k">this</span><span class="p">.</span><span class="n">Parameters</span> <span class="p">=</span> <span class="n">cursor</span><span class="p">.</span><span class="n">DisplayName</span><span class="p">.</span><span class="nf">Replace</span><span class="p">(</span><span class="n">cursor</span><span class="p">.</span><span class="n">Spelling</span><span class="p">,</span> <span class="s">""</span><span class="p">);</span>

        <span class="cm">/* 名前空間を取得 */</span>
        <span class="k">this</span><span class="p">.</span><span class="n">NameSpace</span> <span class="p">=</span> <span class="k">this</span><span class="p">.</span><span class="nf">GetNamespace</span><span class="p">(</span><span class="n">cursor</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">void</span> <span class="nf">AddInvokation</span><span class="p">(</span><span class="n">InvokationInfo</span> <span class="n">invokation_info</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="n">Invokations</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">invokation_info</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">private</span> <span class="kt">string</span> <span class="nf">GenerateBehaviorID</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="cm">/* 関数のIDには関数定義を使用 */</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="n">Definition</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="cm">/* 名前空間を取得 */</span>
    <span class="k">private</span> <span class="kt">string</span> <span class="nf">GetNamespace</span><span class="p">(</span><span class="n">ClangCursor</span> <span class="n">cursor</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="cm">/* 名前空間保持用スタック */</span>
        <span class="kt">var</span> <span class="n">namespace_stack</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Stack</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;();</span>

        <span class="cm">/* 名前空間を再帰的にパース */</span>
        <span class="k">this</span><span class="p">.</span><span class="nf">ParseNamespace</span><span class="p">(</span><span class="n">cursor</span><span class="p">,</span> <span class="n">namespace_stack</span><span class="p">);</span>

        <span class="cm">/* スタックの要素数が0 */</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">namespace_stack</span><span class="p">.</span><span class="n">Count</span> <span class="p">==</span> <span class="m">0</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="cm">/* 名前空間なし */</span>
            <span class="k">return</span> <span class="kt">string</span><span class="p">.</span><span class="n">Empty</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="kt">var</span> <span class="n">sb</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StringBuilder</span><span class="p">();</span>

            <span class="cm">/* 一番上の名前空間を追加 */</span>
            <span class="n">sb</span><span class="p">.</span><span class="nf">Append</span><span class="p">(</span><span class="n">namespace_stack</span><span class="p">.</span><span class="nf">Pop</span><span class="p">());</span>

            <span class="cm">/* スタックが空になるまで */</span>
            <span class="k">while</span><span class="p">(</span><span class="n">namespace_stack</span><span class="p">.</span><span class="n">Count</span> <span class="p">!=</span> <span class="m">0</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="cm">/* 階層化された名前空間を連結 */</span>
                <span class="n">sb</span><span class="p">.</span><span class="nf">Append</span><span class="p">(</span><span class="s">"::"</span><span class="p">);</span>
                <span class="n">sb</span><span class="p">.</span><span class="nf">Append</span><span class="p">(</span><span class="n">namespace_stack</span><span class="p">.</span><span class="nf">Pop</span><span class="p">());</span>
            <span class="p">}</span>

            <span class="k">return</span> <span class="n">sb</span><span class="p">.</span><span class="nf">ToString</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="cm">/* 名前空間を再帰的にパース */</span>
    <span class="k">private</span> <span class="k">void</span> <span class="nf">ParseNamespace</span><span class="p">(</span><span class="n">ClangCursor</span> <span class="n">cursor</span><span class="p">,</span> <span class="n">Stack</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span> <span class="n">namespace_stack</span><span class="p">)</span>
    <span class="p">{</span>
         <span class="cm">/* 関数の意味的な親を示すカーソルを取得 */</span>
        <span class="kt">var</span> <span class="n">parent</span> <span class="p">=</span> <span class="n">cursor</span><span class="p">.</span><span class="n">SemanticParent</span><span class="p">;</span>

        <span class="cm">/* 親カーソルがnullでない */</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">parent</span> <span class="p">!=</span> <span class="k">null</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="cm">/* 親カーソルがTranslation Unit */</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">parent</span><span class="p">.</span><span class="n">Kind</span> <span class="p">==</span> <span class="n">CursorKind</span><span class="p">.</span><span class="n">TranslationUnit</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="cm">/* 最上位のためパース終了 */</span>
            <span class="p">}</span>
            <span class="cm">/* 親カーソルがNamespace */</span>
            <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">parent</span><span class="p">.</span><span class="n">Kind</span> <span class="p">==</span> <span class="n">CursorKind</span><span class="p">.</span><span class="n">Namespace</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="cm">/* 名前空間保持用スタックに追加 */</span>
                <span class="n">namespace_stack</span><span class="p">.</span><span class="nf">Push</span><span class="p">(</span><span class="n">parent</span><span class="p">.</span><span class="n">Spelling</span><span class="p">);</span>

                <span class="cm">/* 親カーソルの名前空間を再帰的にパース */</span>
                <span class="k">this</span><span class="p">.</span><span class="nf">ParseNamespace</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">namespace_stack</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="cm">/* それ以外(クラスなど) */</span>
            <span class="k">else</span>
            <span class="p">{</span>
                <span class="cm">/* 親カーソルの名前空間を再帰的にパース */</span>
                <span class="k">this</span><span class="p">.</span><span class="nf">ParseNamespace</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">namespace_stack</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">override</span> <span class="kt">string</span> <span class="nf">ToString</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="s">$"[Behavior][</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="n">Type</span><span class="p">}</span><span class="s">] </span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="n">Definition</span><span class="p">}</span><span class="s">"</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<div class="code-frame" data-lang="cs">
<div class="code-lang"><span class="bold">ClassBehaviorInfo.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="k">abstract</span> <span class="k">class</span> <span class="nc">ClassBehaviorInfo</span> <span class="p">:</span> <span class="n">BehaviorInfo</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="kt">string</span> <span class="n">ClassName</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>

    <span class="k">public</span> <span class="nf">ClassBehaviorInfo</span><span class="p">(</span><span class="n">ClangCursor</span> <span class="n">cursor</span><span class="p">)</span> <span class="p">:</span> <span class="k">base</span><span class="p">(</span><span class="n">cursor</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="cm">/* 意味的な親カーソル(クラス)を取得 */</span>
        <span class="kt">var</span> <span class="n">parent_class</span> <span class="p">=</span> <span class="n">cursor</span><span class="p">.</span><span class="n">SemanticParent</span><span class="p">;</span>

        <span class="cm">/* クラス名を取得 */</span>
        <span class="k">this</span><span class="p">.</span><span class="n">ClassName</span> <span class="p">=</span> <span class="n">parent_class</span><span class="p">.</span><span class="n">Spelling</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">override</span> <span class="kt">string</span> <span class="nf">ToString</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="s">$"[ClassBehavior][</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="n">Type</span><span class="p">}</span><span class="s">] </span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="n">Definition</span><span class="p">}</span><span class="s">"</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<div class="code-frame" data-lang="cs">
<div class="code-lang"><span class="bold">ConstructorInfo.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">ConstructorInfo</span> <span class="p">:</span> <span class="n">ClassBehaviorInfo</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="nf">ConstructorInfo</span><span class="p">(</span><span class="n">ClangCursor</span> <span class="n">cursor</span><span class="p">)</span> <span class="p">:</span> <span class="k">base</span><span class="p">(</span><span class="n">cursor</span><span class="p">)</span>
    <span class="p">{</span>
    <span class="p">}</span>

    <span class="k">protected</span> <span class="k">override</span> <span class="kt">string</span> <span class="nf">GetDefinition</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="kt">var</span> <span class="n">ns</span> <span class="p">=</span> <span class="k">this</span><span class="p">.</span><span class="n">NameSpace</span> <span class="p">==</span> <span class="kt">string</span><span class="p">.</span><span class="n">Empty</span> <span class="p">?</span> <span class="s">""</span> <span class="p">:</span> <span class="s">$"</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="n">NameSpace</span><span class="p">}</span><span class="s">::"</span><span class="p">;</span>

        <span class="cm">/* コンストラクタ定義 : [&lt;名前空間&gt;::]&lt;クラス名&gt;::&lt;コンストラクタ名&gt;(&lt;パラメータ&gt;) */</span>
        <span class="k">return</span> <span class="s">$"</span><span class="p">{</span><span class="n">ns</span><span class="p">}{</span><span class="k">this</span><span class="p">.</span><span class="n">ClassName</span><span class="p">}</span><span class="s">::</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="n">Name</span><span class="p">}{</span><span class="k">this</span><span class="p">.</span><span class="n">Parameters</span><span class="p">}</span><span class="s">"</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">override</span> <span class="kt">string</span> <span class="nf">ToString</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="s">$"[Constructor][</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="n">Type</span><span class="p">}</span><span class="s">] </span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="n">Definition</span><span class="p">}</span><span class="s">"</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<div class="code-frame" data-lang="cs">
<div class="code-lang"><span class="bold">DestructorInfo.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">DestructorInfo</span> <span class="p">:</span> <span class="n">ClassBehaviorInfo</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="nf">DestructorInfo</span><span class="p">(</span><span class="n">ClangCursor</span> <span class="n">cursor</span><span class="p">)</span> <span class="p">:</span> <span class="k">base</span><span class="p">(</span><span class="n">cursor</span><span class="p">)</span>
    <span class="p">{</span>
    <span class="p">}</span>

    <span class="k">protected</span> <span class="k">override</span> <span class="kt">string</span> <span class="nf">GetDefinition</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="kt">var</span> <span class="n">ns</span> <span class="p">=</span> <span class="k">this</span><span class="p">.</span><span class="n">NameSpace</span> <span class="p">==</span> <span class="kt">string</span><span class="p">.</span><span class="n">Empty</span> <span class="p">?</span> <span class="s">""</span> <span class="p">:</span> <span class="s">$"</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="n">NameSpace</span><span class="p">}</span><span class="s">::"</span><span class="p">;</span>

        <span class="cm">/* デストラクタ定義 : [&lt;名前空間&gt;::]&lt;クラス名&gt;::&lt;デストラクタ名&gt;(&lt;パラメータ&gt;) */</span>
        <span class="k">return</span> <span class="s">$"</span><span class="p">{</span><span class="n">ns</span><span class="p">}{</span><span class="k">this</span><span class="p">.</span><span class="n">ClassName</span><span class="p">}</span><span class="s">::</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="n">Name</span><span class="p">}{</span><span class="k">this</span><span class="p">.</span><span class="n">Parameters</span><span class="p">}</span><span class="s">"</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">override</span> <span class="kt">string</span> <span class="nf">ToString</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="s">$"[Destructor][</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="n">Type</span><span class="p">}</span><span class="s">] </span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="n">Definition</span><span class="p">}</span><span class="s">"</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<div class="code-frame" data-lang="cs">
<div class="code-lang"><span class="bold">CppMethodInfo.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">CppMethodInfo</span> <span class="p">:</span> <span class="n">ClassBehaviorInfo</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="kt">string</span> <span class="n">ReturnType</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>

    <span class="k">public</span> <span class="nf">CppMethodInfo</span><span class="p">(</span><span class="n">ClangCursor</span> <span class="n">cursor</span><span class="p">)</span> <span class="p">:</span> <span class="k">base</span><span class="p">(</span><span class="n">cursor</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">var</span> <span class="n">rtype</span> <span class="p">=</span> <span class="n">cursor</span><span class="p">.</span><span class="n">ResultType</span><span class="p">;</span>

        <span class="k">this</span><span class="p">.</span><span class="n">ReturnType</span> <span class="p">=</span> <span class="n">rtype</span><span class="p">.</span><span class="n">Spelling</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">protected</span> <span class="k">override</span> <span class="kt">string</span> <span class="nf">GetDefinition</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="kt">var</span> <span class="n">ns</span> <span class="p">=</span> <span class="k">this</span><span class="p">.</span><span class="n">NameSpace</span> <span class="p">==</span> <span class="kt">string</span><span class="p">.</span><span class="n">Empty</span> <span class="p">?</span> <span class="s">""</span> <span class="p">:</span> <span class="s">$"</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="n">NameSpace</span><span class="p">}</span><span class="s">::"</span><span class="p">;</span>

        <span class="cm">/* C++クラスメンバ関数定義 : &lt;返り値型&gt; [&lt;名前空間&gt;::]&lt;クラス名&gt;::&lt;関数名&gt;(&lt;パラメータ&gt;) */</span>
        <span class="k">return</span> <span class="s">$"</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="n">ReturnType</span><span class="p">}</span><span class="s"> </span><span class="p">{</span><span class="n">ns</span><span class="p">}{</span><span class="k">this</span><span class="p">.</span><span class="n">ClassName</span><span class="p">}</span><span class="s">::</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="n">Name</span><span class="p">}{</span><span class="k">this</span><span class="p">.</span><span class="n">Parameters</span><span class="p">}</span><span class="s">"</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">override</span> <span class="kt">string</span> <span class="nf">ToString</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="s">$"[Function][</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="n">Type</span><span class="p">}</span><span class="s">] </span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="n">Definition</span><span class="p">}</span><span class="s">"</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<div class="code-frame" data-lang="cs">
<div class="code-lang"><span class="bold">FunctionInfo.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">FunctionInfo</span> <span class="p">:</span> <span class="n">BehaviorInfo</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="kt">string</span> <span class="n">ReturnType</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>

    <span class="k">public</span> <span class="nf">FunctionInfo</span><span class="p">(</span><span class="n">ClangCursor</span> <span class="n">cursor</span><span class="p">)</span> <span class="p">:</span> <span class="k">base</span><span class="p">(</span><span class="n">cursor</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">var</span> <span class="n">rtype</span> <span class="p">=</span> <span class="n">cursor</span><span class="p">.</span><span class="n">ResultType</span><span class="p">;</span>

        <span class="k">this</span><span class="p">.</span><span class="n">ReturnType</span> <span class="p">=</span> <span class="n">rtype</span><span class="p">.</span><span class="n">Spelling</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">protected</span> <span class="k">override</span> <span class="kt">string</span> <span class="nf">GetDefinition</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="kt">var</span> <span class="n">ns</span> <span class="p">=</span> <span class="k">this</span><span class="p">.</span><span class="n">NameSpace</span> <span class="p">==</span> <span class="kt">string</span><span class="p">.</span><span class="n">Empty</span> <span class="p">?</span> <span class="s">""</span> <span class="p">:</span> <span class="s">$"</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="n">NameSpace</span><span class="p">}</span><span class="s">::"</span><span class="p">;</span>

        <span class="cm">/* Cスタイル関数定義 : &lt;返り値型&gt; [&lt;名前空間&gt;::]&lt;関数名&gt;(&lt;パラメータ&gt;) */</span>
        <span class="k">return</span> <span class="s">$"</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="n">ReturnType</span><span class="p">}</span><span class="s"> </span><span class="p">{</span><span class="n">ns</span><span class="p">}{</span><span class="k">this</span><span class="p">.</span><span class="n">Name</span><span class="p">}{</span><span class="k">this</span><span class="p">.</span><span class="n">Parameters</span><span class="p">}</span><span class="s">"</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">override</span> <span class="kt">string</span> <span class="nf">ToString</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="s">$"[Function][</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="n">Type</span><span class="p">}</span><span class="s">] </span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="n">Definition</span><span class="p">}</span><span class="s">"</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<div class="code-frame" data-lang="cs">
<div class="code-lang"><span class="bold">InvokationInfo.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">InvokationInfo</span> <span class="p">:</span> <span class="n">AstNodeInfo</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="kt">string</span> <span class="n">ID</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>

    <span class="k">public</span> <span class="kt">string</span> <span class="n">Definition</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>

    <span class="k">public</span> <span class="kt">string</span> <span class="n">Name</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>

    <span class="k">public</span> <span class="n">BehaviorInfo</span> <span class="n">Declaration</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>

    <span class="k">public</span> <span class="nf">InvokationInfo</span><span class="p">(</span><span class="n">ClangCursor</span> <span class="n">cursor</span><span class="p">)</span> <span class="p">:</span> <span class="k">base</span><span class="p">(</span><span class="n">cursor</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="cm">/* コール関数名を取得 */</span>
        <span class="k">this</span><span class="p">.</span><span class="n">Name</span> <span class="p">=</span> <span class="n">cursor</span><span class="p">.</span><span class="n">Spelling</span><span class="p">;</span>

        <span class="cm">/* コール関数の参照先がnullでない */</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">cursor</span><span class="p">.</span><span class="n">Referenced</span> <span class="p">!=</span> <span class="k">null</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="cm">/* 参照先カーソルから関数宣言のBehavior Infoを生成 */</span>
            <span class="k">this</span><span class="p">.</span><span class="n">Declaration</span> <span class="p">=</span> <span class="n">BehaviorInfoFactory</span><span class="p">.</span><span class="nf">Create</span><span class="p">(</span><span class="n">cursor</span><span class="p">.</span><span class="n">Referenced</span><span class="p">);</span>

            <span class="cm">/* 関数宣言のBehavior Infoから関数IDを取得 */</span>
            <span class="k">this</span><span class="p">.</span><span class="n">ID</span> <span class="p">=</span> <span class="k">this</span><span class="p">.</span><span class="n">Declaration</span><span class="p">.</span><span class="n">ID</span><span class="p">;</span>

            <span class="cm">/* 関数宣言のBehavior Infoから関数定義を取得 */</span>
            <span class="k">this</span><span class="p">.</span><span class="n">Definition</span> <span class="p">=</span> <span class="k">this</span><span class="p">.</span><span class="n">Declaration</span><span class="p">.</span><span class="n">Definition</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">FieldAccessException</span><span class="p">(</span><span class="s">$"Behavior Declaration Not Found : </span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="n">Name</span><span class="p">}</span><span class="s">"</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">override</span> <span class="kt">string</span> <span class="nf">ToString</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="s">$"[Invokation]</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="n">Name</span><span class="p">}</span><span class="s">"</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<div class="code-frame" data-lang="cs">
<div class="code-lang"><span class="bold">BehaviorlocationMap.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">BehaviorLocationMap</span> <span class="p">:</span> <span class="n">Dictionary</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">,</span> <span class="n">BehaviorInfo</span><span class="p">&gt;</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">void</span> <span class="nf">Add</span><span class="p">(</span><span class="n">BehaviorInfo</span> <span class="n">behavior</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nf">ContainsKey</span><span class="p">(</span><span class="n">behavior</span><span class="p">.</span><span class="n">Location</span><span class="p">)</span> <span class="p">==</span> <span class="k">false</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">behavior</span><span class="p">.</span><span class="n">Location</span><span class="p">,</span> <span class="n">behavior</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">InvalidOperationException</span><span class="p">(</span><span class="s">$"Behavior Already Registered : </span><span class="p">{</span><span class="n">behavior</span><span class="p">.</span><span class="n">ID</span><span class="p">}</span><span class="s">"</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">void</span> <span class="nf">AddIfNotRegistered</span><span class="p">(</span><span class="n">BehaviorInfo</span> <span class="n">behavior</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nf">ContainsKey</span><span class="p">(</span><span class="n">behavior</span><span class="p">.</span><span class="n">Location</span><span class="p">)</span> <span class="p">==</span> <span class="k">false</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">behavior</span><span class="p">.</span><span class="n">Location</span><span class="p">,</span> <span class="n">behavior</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="cm">/* Nothing to do */</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<div class="code-frame" data-lang="cs">
<div class="code-lang"><span class="bold">BehaviorlocationMap.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">TranslationUnitMap</span> <span class="p">:</span> <span class="n">Dictionary</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">,</span> <span class="n">TranslationUnitInfo</span><span class="p">&gt;</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">void</span> <span class="nf">Add</span><span class="p">(</span><span class="n">TranslationUnitInfo</span> <span class="n">tu</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nf">ContainsKey</span><span class="p">(</span><span class="n">tu</span><span class="p">.</span><span class="n">Path</span><span class="p">)</span> <span class="p">==</span> <span class="k">false</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">tu</span><span class="p">.</span><span class="n">Path</span><span class="p">,</span> <span class="n">tu</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">InvalidOperationException</span><span class="p">(</span><span class="s">$"Translation Unit Already Registered : </span><span class="p">{</span><span class="n">tu</span><span class="p">.</span><span class="n">Path</span><span class="p">}</span><span class="s">"</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<h6>
<span id="1-2-ast解析" class="fragment"></span><a href="#1-2-ast%E8%A7%A3%E6%9E%90"><i class="fa fa-link"></i></a>1-2. AST解析</h6>

<p>続いて、ASTを解析してTranslationUnitMapを生成するロジックを実現するクラスを定義します。<br>
また、ASTを解析する部分は、様々なソースファイルの入力に対応できるように設定情報を保持するクラスを定義し、それをパラメータとして渡すようにします。<br>
さらに、関数情報(BehaviorInfo)はカーソルの種別に対応したクラスのインスタンスを生成できるようにFactoryクラスを定義します。<br>
それぞれのソースを以下に示します。  </p>

<div class="code-frame" data-lang="cs">
<div class="code-lang"><span class="bold">TranslationUnitParseSetting.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">TranslationUnitParseSetting</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="n">List</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span> <span class="n">Sources</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span> <span class="p">=</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;();</span>

    <span class="k">public</span> <span class="n">List</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span> <span class="n">CommandLineArgs</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span> <span class="p">=</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;();</span>

    <span class="k">public</span> <span class="n">TranslationUnitFlags</span> <span class="n">ParseOptions</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span> <span class="p">=</span> <span class="n">TranslationUnitFlags</span><span class="p">.</span><span class="n">None</span><span class="p">;</span>

    <span class="k">public</span> <span class="kt">bool</span> <span class="n">DisplayDiag</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>

    <span class="k">public</span> <span class="kt">bool</span> <span class="n">DumpAST</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
</div>

<div class="code-frame" data-lang="cs">
<div class="code-lang"><span class="bold">BehaviorInfoFactory.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="k">static</span> <span class="k">class</span> <span class="nc">BehaviorInfoFactory</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">static</span> <span class="n">BehaviorInfo</span> <span class="nf">Create</span><span class="p">(</span><span class="n">ClangCursor</span> <span class="n">cursor</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">switch</span><span class="p">(</span><span class="n">cursor</span><span class="p">.</span><span class="n">Kind</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="cm">/* コンストラクタ */</span>
            <span class="k">case</span> <span class="n">CursorKind</span><span class="p">.</span><span class="n">Constructor</span><span class="p">:</span>
                <span class="k">return</span> <span class="k">new</span> <span class="nf">ConstructorInfo</span><span class="p">(</span><span class="n">cursor</span><span class="p">);</span>
            <span class="cm">/* デストラクタ */</span>
            <span class="k">case</span> <span class="n">CursorKind</span><span class="p">.</span><span class="n">Destructor</span><span class="p">:</span>
                <span class="k">return</span> <span class="k">new</span> <span class="nf">DestructorInfo</span><span class="p">(</span><span class="n">cursor</span><span class="p">);</span>
            <span class="cm">/* Cスタイル関数 */</span>
            <span class="k">case</span> <span class="n">CursorKind</span><span class="p">.</span><span class="n">FunctionDeclaration</span><span class="p">:</span>
                <span class="k">return</span> <span class="k">new</span> <span class="nf">FunctionInfo</span><span class="p">(</span><span class="n">cursor</span><span class="p">);</span>
            <span class="cm">/* C++クラスメンバ関数 */</span>
            <span class="k">case</span> <span class="n">CursorKind</span><span class="p">.</span><span class="n">CXXMethod</span><span class="p">:</span>
                <span class="k">return</span> <span class="k">new</span> <span class="nf">CppMethodInfo</span><span class="p">(</span><span class="n">cursor</span><span class="p">);</span>
            <span class="k">default</span><span class="p">:</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nf">ArgumentException</span><span class="p">(</span><span class="s">$"Not Behavior Cursor"</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<div class="code-frame" data-lang="cs">
<div class="code-lang"><span class="bold">TranslationUnitsParser.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="k">static</span> <span class="k">class</span> <span class="nc">TranslationUnitsParser</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">static</span> <span class="n">TranslationUnitMap</span> <span class="nf">Parse</span><span class="p">(</span><span class="n">TranslationUnitParseSetting</span> <span class="n">setting</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">var</span> <span class="n">impl</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">TranslationUnitsParserImpl</span><span class="p">();</span>

        <span class="kt">var</span> <span class="n">map</span> <span class="p">=</span> <span class="n">impl</span><span class="p">.</span><span class="nf">Execute</span><span class="p">(</span><span class="n">setting</span><span class="p">);</span>

        <span class="k">return</span> <span class="n">map</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">class</span> <span class="nc">TranslationUnitsParserImpl</span> <span class="p">:</span> <span class="n">AMessageable</span>
    <span class="p">{</span>
        <span class="k">private</span> <span class="n">TranslationUnitParseSetting</span> <span class="n">Setting</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>

        <span class="k">private</span> <span class="n">TranslationUnitInfo</span> <span class="n">CurrentTranslationUnit</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>

        <span class="k">private</span> <span class="n">BehaviorInfo</span> <span class="n">CurrentBehavior</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>

        <span class="k">private</span> <span class="n">TranslationUnitMap</span> <span class="n">TranslationUnitMap</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">TranslationUnitMap</span><span class="p">();</span>

        <span class="k">public</span> <span class="n">TranslationUnitMap</span> <span class="nf">Execute</span><span class="p">(</span><span class="n">TranslationUnitParseSetting</span> <span class="n">setting</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="n">Setting</span> <span class="p">=</span> <span class="n">setting</span><span class="p">;</span>

            <span class="kt">var</span> <span class="n">display_diag</span> <span class="p">=</span> <span class="n">setting</span><span class="p">.</span><span class="n">DisplayDiag</span><span class="p">;</span>

            <span class="kt">var</span> <span class="n">src_path_list</span> <span class="p">=</span> <span class="n">setting</span><span class="p">.</span><span class="n">Sources</span><span class="p">;</span>

            <span class="kt">var</span> <span class="n">command_line_args</span> <span class="p">=</span> <span class="n">setting</span><span class="p">.</span><span class="n">CommandLineArgs</span><span class="p">.</span><span class="nf">ToArray</span><span class="p">();</span>

            <span class="kt">var</span> <span class="n">options</span> <span class="p">=</span> <span class="n">setting</span><span class="p">.</span><span class="n">ParseOptions</span><span class="p">;</span>

            <span class="cm">/* Indexを生成 */</span>
            <span class="k">using</span> <span class="p">(</span><span class="kt">var</span> <span class="n">index</span> <span class="p">=</span> <span class="n">Clang</span><span class="p">.</span><span class="nf">CreateIndex</span><span class="p">(</span><span class="k">false</span><span class="p">,</span> <span class="n">display_diag</span><span class="p">))</span>
            <span class="p">{</span>
                <span class="cm">/* 解析対象のソースファイルパスリストを走査 */</span>
                <span class="k">foreach</span> <span class="p">(</span><span class="kt">var</span> <span class="n">src_path</span> <span class="k">in</span> <span class="n">src_path_list</span><span class="p">)</span>
                <span class="p">{</span>
                    <span class="cm">/* ソースファイルパスのファイルが存在するかを確認 */</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">File</span><span class="p">.</span><span class="nf">Exists</span><span class="p">(</span><span class="n">src_path</span><span class="p">))</span>
                    <span class="p">{</span>
                        <span class="cm">/* ソースファイルをパースし、Translation Unitを生成 */</span>
                        <span class="k">using</span> <span class="p">(</span><span class="kt">var</span> <span class="n">tu</span> <span class="p">=</span> <span class="n">index</span><span class="p">.</span><span class="nf">ParseTranslationUnit</span><span class="p">(</span><span class="n">src_path</span><span class="p">,</span> <span class="n">command_line_args</span><span class="p">,</span> <span class="k">new</span> <span class="n">ClangUnsavedFile</span><span class="p">[</span><span class="m">0</span><span class="p">],</span> <span class="n">options</span><span class="p">))</span>
                        <span class="p">{</span>
                            <span class="cm">/* 解析実行 */</span>
                            <span class="k">this</span><span class="p">.</span><span class="nf">ExecuteCore</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">tu</span><span class="p">);</span>
                        <span class="p">}</span>
                    <span class="p">}</span>
                    <span class="k">else</span>
                    <span class="p">{</span>
                        <span class="k">throw</span> <span class="k">new</span> <span class="nf">InvalidOperationException</span><span class="p">(</span><span class="s">$"Source File Not Found :</span><span class="p">{</span><span class="n">src_path</span><span class="p">}</span><span class="s">"</span><span class="p">);</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="n">TranslationUnitMap</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">private</span> <span class="k">void</span> <span class="nf">ExecuteCore</span><span class="p">(</span><span class="n">ClangIndex</span> <span class="n">index</span><span class="p">,</span> <span class="n">ClangTranslationUnit</span> <span class="n">tu</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="n">Setting</span><span class="p">.</span><span class="n">DumpAST</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nf">SendMessage</span><span class="p">(</span><span class="s">$"AST Dump:"</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="cm">/* ASTを再帰的にパース */</span>
            <span class="k">this</span><span class="p">.</span><span class="nf">VisitChild</span><span class="p">(</span><span class="n">tu</span><span class="p">.</span><span class="n">Cursor</span><span class="p">,</span> <span class="m">0</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">private</span> <span class="n">ChildVisitResult</span> <span class="nf">Visitor</span><span class="p">(</span><span class="n">ClangCursor</span> <span class="n">cursor</span><span class="p">,</span> <span class="n">ClangCursor</span> <span class="n">parent</span><span class="p">,</span> <span class="kt">int</span> <span class="n">depth</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="cm">/* カーソル位置を取得 */</span>
            <span class="kt">var</span> <span class="n">loc</span> <span class="p">=</span> <span class="n">cursor</span><span class="p">.</span><span class="n">Location</span><span class="p">;</span>

            <span class="cm">/* 解析対象ソースファイル内 */</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">loc</span><span class="p">.</span><span class="n">IsFromMainFile</span> <span class="p">==</span> <span class="k">true</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="cm">/* 子要素をパース */</span>
                <span class="k">this</span><span class="p">.</span><span class="nf">VisitChild</span><span class="p">(</span><span class="n">cursor</span><span class="p">,</span> <span class="n">depth</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span>
            <span class="p">{</span>
                <span class="cm">/* システムヘッダ内 */</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">loc</span><span class="p">.</span><span class="n">IsInSystemHeader</span> <span class="p">==</span> <span class="k">true</span><span class="p">)</span>
                <span class="p">{</span>
                    <span class="cm">/* Nothing to do */</span>
                <span class="p">}</span>
                <span class="cm">/* ユーザヘッダ内 */</span>
                <span class="k">else</span>
                <span class="p">{</span>
                    <span class="cm">/* 子要素をパース */</span>
                    <span class="k">this</span><span class="p">.</span><span class="nf">VisitChild</span><span class="p">(</span><span class="n">cursor</span><span class="p">,</span> <span class="n">depth</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="k">return</span> <span class="n">ChildVisitResult</span><span class="p">.</span><span class="n">Continue</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">private</span> <span class="k">void</span> <span class="nf">VisitChild</span><span class="p">(</span><span class="n">ClangCursor</span> <span class="n">cursor</span><span class="p">,</span> <span class="kt">int</span> <span class="n">depth</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="cm">/* デバッグ用にASTをダンプ */</span>
            <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="n">Setting</span><span class="p">.</span><span class="n">DumpAST</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nf">DumpAstInfo</span><span class="p">(</span><span class="n">cursor</span><span class="p">,</span> <span class="n">depth</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="cm">/* 関数コール情報を解析 */</span>
            <span class="k">this</span><span class="p">.</span><span class="nf">AnalyseInvokationInfo</span><span class="p">(</span><span class="n">cursor</span><span class="p">);</span>

            <span class="n">cursor</span><span class="p">.</span><span class="nf">VisitChildren</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="n">Visitor</span><span class="p">,</span> <span class="n">depth</span> <span class="p">+</span> <span class="m">1</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">private</span> <span class="k">void</span> <span class="nf">DumpAstInfo</span><span class="p">(</span><span class="n">ClangCursor</span> <span class="n">cursor</span><span class="p">,</span> <span class="kt">int</span> <span class="n">depth</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="kt">var</span> <span class="n">indent</span> <span class="p">=</span> <span class="k">new</span> <span class="kt">string</span><span class="p">(</span><span class="sc">' '</span><span class="p">,</span> <span class="n">depth</span> <span class="p">*</span> <span class="m">2</span><span class="p">);</span>

            <span class="kt">var</span> <span class="n">kind</span> <span class="p">=</span> <span class="n">cursor</span><span class="p">.</span><span class="n">Kind</span><span class="p">;</span>

            <span class="kt">var</span> <span class="n">name</span> <span class="p">=</span> <span class="n">cursor</span><span class="p">.</span><span class="n">Spelling</span><span class="p">;</span>

            <span class="kt">var</span> <span class="n">loc</span> <span class="p">=</span> <span class="n">cursor</span><span class="p">.</span><span class="n">Location</span><span class="p">.</span><span class="nf">ToStringEx</span><span class="p">();</span>

            <span class="k">this</span><span class="p">.</span><span class="nf">SendMessage</span><span class="p">(</span><span class="s">$"</span><span class="p">{</span><span class="n">indent</span><span class="p">}</span><span class="s">[</span><span class="p">{</span><span class="n">kind</span><span class="p">}</span><span class="s">] </span><span class="p">{</span><span class="n">name</span><span class="p">}</span><span class="s"> @ </span><span class="p">{</span><span class="n">loc</span><span class="p">}</span><span class="s">"</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">private</span> <span class="k">void</span> <span class="nf">AnalyseInvokationInfo</span><span class="p">(</span><span class="n">ClangCursor</span> <span class="n">cursor</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">switch</span> <span class="p">(</span><span class="n">cursor</span><span class="p">.</span><span class="n">Kind</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="cm">/* 解析対象ソースファイル */</span>
                <span class="k">case</span> <span class="n">CursorKind</span><span class="p">.</span><span class="n">TranslationUnit</span><span class="p">:</span>
                    <span class="cm">/* Translation Unit Infoを生成し、Translation Unit Mapに追加 */</span>
                    <span class="k">this</span><span class="p">.</span><span class="n">CurrentTranslationUnit</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">TranslationUnitInfo</span><span class="p">(</span><span class="n">cursor</span><span class="p">);</span>
                    <span class="k">this</span><span class="p">.</span><span class="n">TranslationUnitMap</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="n">CurrentTranslationUnit</span><span class="p">);</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="cm">/* コンストラクタ */</span>
                <span class="k">case</span> <span class="n">CursorKind</span><span class="p">.</span><span class="n">Constructor</span><span class="p">:</span>
                    <span class="cm">/* Constructor Infoを生成し、Translation Unit Infoに追加 */</span>
                    <span class="k">this</span><span class="p">.</span><span class="n">CurrentBehavior</span> <span class="p">=</span> <span class="n">BehaviorInfoFactory</span><span class="p">.</span><span class="nf">Create</span><span class="p">(</span><span class="n">cursor</span><span class="p">);</span>
                    <span class="k">this</span><span class="p">.</span><span class="n">CurrentTranslationUnit</span><span class="p">.</span><span class="nf">AddBehavior</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="n">CurrentBehavior</span><span class="p">);</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="cm">/* デストラクタ */</span>
                <span class="k">case</span> <span class="n">CursorKind</span><span class="p">.</span><span class="n">Destructor</span><span class="p">:</span>
                    <span class="cm">/* Destructor Infoを生成し、Translation Unit Infoに追加 */</span>
                    <span class="k">this</span><span class="p">.</span><span class="n">CurrentBehavior</span> <span class="p">=</span> <span class="n">BehaviorInfoFactory</span><span class="p">.</span><span class="nf">Create</span><span class="p">(</span><span class="n">cursor</span><span class="p">);</span>
                    <span class="k">this</span><span class="p">.</span><span class="n">CurrentTranslationUnit</span><span class="p">.</span><span class="nf">AddBehavior</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="n">CurrentBehavior</span><span class="p">);</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="cm">/* Cスタイル関数*/</span>
                <span class="k">case</span> <span class="n">CursorKind</span><span class="p">.</span><span class="n">FunctionDeclaration</span><span class="p">:</span>
                    <span class="cm">/* Function Infoを生成し、Translation Unit Infoに追加 */</span>
                    <span class="k">this</span><span class="p">.</span><span class="n">CurrentBehavior</span> <span class="p">=</span> <span class="n">BehaviorInfoFactory</span><span class="p">.</span><span class="nf">Create</span><span class="p">(</span><span class="n">cursor</span><span class="p">);</span>
                    <span class="k">this</span><span class="p">.</span><span class="n">CurrentTranslationUnit</span><span class="p">.</span><span class="nf">AddBehavior</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="n">CurrentBehavior</span><span class="p">);</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="cm">/* C++メンバ関数 */</span>
                <span class="k">case</span> <span class="n">CursorKind</span><span class="p">.</span><span class="n">CXXMethod</span><span class="p">:</span>
                    <span class="cm">/* Cpp Method Infoを生成し、Translation Unit Infoに追加 */</span>
                    <span class="k">this</span><span class="p">.</span><span class="n">CurrentBehavior</span> <span class="p">=</span> <span class="n">BehaviorInfoFactory</span><span class="p">.</span><span class="nf">Create</span><span class="p">(</span><span class="n">cursor</span><span class="p">);</span>
                    <span class="k">this</span><span class="p">.</span><span class="n">CurrentTranslationUnit</span><span class="p">.</span><span class="nf">AddBehavior</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="n">CurrentBehavior</span><span class="p">);</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="cm">/* 関数コール */</span>
                <span class="k">case</span> <span class="n">CursorKind</span><span class="p">.</span><span class="n">CallExpression</span><span class="p">:</span>
                    <span class="cm">/* Invokation Infoを生成し、Translation Unit Infoに追加 */</span>
                    <span class="kt">var</span> <span class="n">invokation_info</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">InvokationInfo</span><span class="p">(</span><span class="n">cursor</span><span class="p">);</span>
                    <span class="k">this</span><span class="p">.</span><span class="n">CurrentBehavior</span><span class="p">.</span><span class="nf">AddInvokation</span><span class="p">(</span><span class="n">invokation_info</span><span class="p">);</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="k">default</span><span class="p">:</span>
                    <span class="k">break</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<h5>
<span id="2-invokation-tree関数コールツリー生成" class="fragment"></span><a href="#2-invokation-tree%E9%96%A2%E6%95%B0%E3%82%B3%E3%83%BC%E3%83%AB%E3%83%84%E3%83%AA%E3%83%BC%E7%94%9F%E6%88%90"><i class="fa fa-link"></i></a>2. Invokation Tree(関数コールツリー)生成</h5>

<p>次は、1.で生成したTranslationUnitMapの情報から関数コールツリー情報を生成し、出力する機能を持つクラスを実装します。<br>
関数コールツリーを出力するために、TranslationUnitMapに登録されている各TranslationUnitInfoのBehaviorMapから、種別がDefinition(関数定義)のBehaviorInfoを抽出し、Behavior IDをキーとしたハッシュマップを生成します。<br>
生成するハッシュマップ(BehaviorDefinitionMapクラス)の定義と、ハッシュマップ生成処理の実装コードを以下に示します。</p>

<div class="code-frame" data-lang="cs">
<div class="code-lang"><span class="bold">BehaviorDefinitionMap.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">BehaviorDefinitionMap</span> <span class="p">:</span> <span class="n">Dictionary</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">,</span> <span class="n">BehaviorInfo</span><span class="p">&gt;</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">void</span> <span class="nf">Add</span><span class="p">(</span><span class="n">BehaviorInfo</span> <span class="n">behavior</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nf">ContainsKey</span><span class="p">(</span><span class="n">behavior</span><span class="p">.</span><span class="n">ID</span><span class="p">)</span> <span class="p">==</span> <span class="k">false</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">behavior</span><span class="p">.</span><span class="n">ID</span><span class="p">,</span> <span class="n">behavior</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">InvalidOperationException</span><span class="p">(</span><span class="s">$"Behavior Already Registered : </span><span class="p">{</span><span class="n">behavior</span><span class="p">.</span><span class="n">ID</span><span class="p">}</span><span class="s">"</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">void</span> <span class="nf">AddIfNotRegistered</span><span class="p">(</span><span class="n">BehaviorInfo</span> <span class="n">behavior</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nf">ContainsKey</span><span class="p">(</span><span class="n">behavior</span><span class="p">.</span><span class="n">ID</span><span class="p">)</span> <span class="p">==</span> <span class="k">false</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">behavior</span><span class="p">.</span><span class="n">ID</span><span class="p">,</span> <span class="n">behavior</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="cm">/* Nothing to do */</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<div class="code-frame" data-lang="cs">
<div class="code-lang"><span class="bold">ハッシュマップ生成処理</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">private</span> <span class="k">void</span> <span class="nf">CreateBehaviorDefinitionMap</span><span class="p">()</span>
<span class="p">{</span>
    <span class="cm">/* Translation Unit Infoを走査 */</span>
    <span class="k">foreach</span> <span class="p">(</span><span class="kt">var</span> <span class="n">tu</span> <span class="k">in</span> <span class="k">this</span><span class="p">.</span><span class="n">TranslationUnitMap</span><span class="p">.</span><span class="n">Values</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="cm">/* Translation Unit InfoのBehavior MapからTypeがDefinitionのBehavior Infoを抽出 */</span>
        <span class="kt">var</span> <span class="n">behavior_definitions</span> <span class="p">=</span> <span class="n">tu</span><span class="p">.</span><span class="n">BehaviorMap</span><span class="p">.</span><span class="n">Values</span><span class="p">.</span><span class="nf">Where</span><span class="p">(</span><span class="n">b</span> <span class="p">=&gt;</span> <span class="n">b</span><span class="p">.</span><span class="n">Type</span> <span class="p">==</span> <span class="s">"Definition"</span><span class="p">).</span><span class="nf">ToList</span><span class="p">();</span>

        <span class="cm">/* 抽出したBehavior Infoを走査 */</span>
        <span class="k">foreach</span> <span class="p">(</span><span class="kt">var</span> <span class="n">behavior_definition</span> <span class="k">in</span> <span class="n">behavior_definitions</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="cm">/* Behavior Infoが登録されていなければ、Behavior Definition Mapに登録 */</span>
            <span class="k">this</span><span class="p">.</span><span class="n">BehaviorDefinitionMap</span><span class="p">.</span><span class="nf">AddIfNotRegistered</span><span class="p">(</span><span class="n">behavior_definition</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<p>生成したBehaviorDefinitionMapを用いて、関数が呼び出している関数情報を辿っていき、関数のコールツリーを出力します。<br>
実装コードを以下に示します。</p>

<div class="code-frame" data-lang="cs">
<div class="code-lang"><span class="bold">関数コールツリー出力</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">private</span> <span class="k">void</span> <span class="nf">DumpInvokationTrees</span><span class="p">()</span>
<span class="p">{</span>
    <span class="cm">/* Behavior Definition MapのValue(BehaviorInfo)リストを取得 */</span>
    <span class="kt">var</span> <span class="n">behavior_defnitions</span> <span class="p">=</span> <span class="k">this</span><span class="p">.</span><span class="n">BehaviorDefinitionMap</span><span class="p">.</span><span class="n">Values</span><span class="p">;</span>

    <span class="cm">/* Behavior Definitionリストを走査 */</span>
    <span class="k">foreach</span> <span class="p">(</span><span class="kt">var</span> <span class="n">behavior</span> <span class="k">in</span> <span class="n">behavior_defnitions</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="cm">/* 関数定義と定義位置を出力 */</span>
        <span class="k">this</span><span class="p">.</span><span class="nf">SendMessage</span><span class="p">(</span><span class="s">$"</span><span class="p">{</span><span class="n">behavior</span><span class="p">.</span><span class="n">Definition</span><span class="p">}</span><span class="s"> @ </span><span class="p">{</span><span class="n">behavior</span><span class="p">.</span><span class="n">Location</span><span class="p">}</span><span class="s">"</span><span class="p">);</span>

        <span class="cm">/* 関数のコールツリーを出力 */</span>
        <span class="k">this</span><span class="p">.</span><span class="nf">DumpInvokationTree</span><span class="p">(</span><span class="n">behavior</span><span class="p">);</span>

        <span class="cm">/* 改行 */</span>
        <span class="k">this</span><span class="p">.</span><span class="nf">SendMessage</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">private</span> <span class="k">void</span> <span class="nf">DumpInvokationTree</span><span class="p">(</span><span class="n">BehaviorInfo</span> <span class="n">behavior</span><span class="p">,</span> <span class="kt">int</span> <span class="n">depth</span> <span class="p">=</span> <span class="m">1</span><span class="p">)</span>
<span class="p">{</span>
    <span class="cm">/* Behavior InfoのInvokation Infoリストを走査 */</span>
    <span class="k">foreach</span> <span class="p">(</span><span class="kt">var</span> <span class="n">invokation</span> <span class="k">in</span> <span class="n">behavior</span><span class="p">.</span><span class="n">Invokations</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="cm">/* インデント(1段階)を生成 */</span>
        <span class="kt">var</span> <span class="n">indent</span> <span class="p">=</span> <span class="k">new</span> <span class="kt">string</span><span class="p">(</span><span class="sc">' '</span><span class="p">,</span> <span class="n">depth</span> <span class="p">*</span> <span class="m">2</span><span class="p">);</span>

        <span class="cm">/* インデント(2段階)を生成 */</span>
        <span class="kt">var</span> <span class="n">indent2</span> <span class="p">=</span> <span class="k">new</span> <span class="kt">string</span><span class="p">(</span><span class="sc">' '</span><span class="p">,</span> <span class="p">(</span><span class="n">depth</span> <span class="p">+</span> <span class="m">1</span><span class="p">)</span> <span class="p">*</span> <span class="m">2</span><span class="p">);</span>

        <span class="cm">/* コール関数定義とコール位置を出力 */</span>
        <span class="k">this</span><span class="p">.</span><span class="nf">SendMessage</span><span class="p">(</span><span class="s">$"</span><span class="p">{</span><span class="n">indent</span><span class="p">}{</span><span class="n">invokation</span><span class="p">.</span><span class="n">Definition</span><span class="p">}</span><span class="s"> @ </span><span class="p">{</span><span class="n">invokation</span><span class="p">.</span><span class="n">Location</span><span class="p">}</span><span class="s">"</span><span class="p">);</span>

        <span class="cm">/* 親関数とコール関数のIDが同一(再帰呼び出し) */</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">behavior</span><span class="p">.</span><span class="n">ID</span> <span class="p">==</span> <span class="n">invokation</span><span class="p">.</span><span class="n">ID</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="cm">/* 再帰呼び出しの旨を出力 */</span>
            <span class="k">this</span><span class="p">.</span><span class="nf">SendMessage</span><span class="p">(</span><span class="s">$"</span><span class="p">{</span><span class="n">indent2</span><span class="p">}</span><span class="s"> &lt;Recursive Call...&gt;"</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="cm">/* Behavior Definition Mapにコール関数と同一IDのBehavior Infoがあるかを確認 */</span>
            <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="n">BehaviorDefinitionMap</span><span class="p">.</span><span class="nf">ContainsKey</span><span class="p">(</span><span class="n">invokation</span><span class="p">.</span><span class="n">ID</span><span class="p">))</span>
            <span class="p">{</span>
                <span class="cm">/* コール関数のBehavior Infoを取得 */</span>
                <span class="kt">var</span> <span class="n">child_behavior</span> <span class="p">=</span> <span class="k">this</span><span class="p">.</span><span class="n">BehaviorDefinitionMap</span><span class="p">[</span><span class="n">invokation</span><span class="p">.</span><span class="n">ID</span><span class="p">];</span>

                <span class="cm">/* コール関数を親にしてコールツリーを出力 */</span>
                <span class="k">this</span><span class="p">.</span><span class="nf">DumpInvokationTree</span><span class="p">(</span><span class="n">child_behavior</span><span class="p">,</span> <span class="n">depth</span> <span class="p">+</span> <span class="m">1</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span>
            <span class="p">{</span>
                <span class="cm">/* コール関数の関数定義が見つからない旨を出力 */</span>
                <span class="k">this</span><span class="p">.</span><span class="nf">SendMessage</span><span class="p">(</span><span class="s">$"</span><span class="p">{</span><span class="n">indent2</span><span class="p">}</span><span class="s"> &lt;Behavior Definition Not Found...&gt;"</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<p>ソース全文を以下に示します。</p>

<div class="code-frame" data-lang="cs">
<div class="code-lang"><span class="bold">InvokationTreeDumper.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="k">static</span> <span class="k">class</span> <span class="nc">InvokationTreeDumper</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">Dump</span><span class="p">(</span><span class="n">TranslationUnitMap</span> <span class="n">map</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">var</span> <span class="n">impl</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">InvokationTreeDumperImpl</span><span class="p">();</span>

        <span class="n">impl</span><span class="p">.</span><span class="nf">Execute</span><span class="p">(</span><span class="n">map</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">class</span> <span class="nc">InvokationTreeDumperImpl</span> <span class="p">:</span> <span class="n">AMessageable</span>
    <span class="p">{</span>
        <span class="k">private</span> <span class="n">TranslationUnitMap</span> <span class="n">TranslationUnitMap</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">TranslationUnitMap</span><span class="p">();</span>

        <span class="k">private</span> <span class="n">BehaviorDefinitionMap</span> <span class="n">BehaviorDefinitionMap</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">BehaviorDefinitionMap</span><span class="p">();</span>

        <span class="k">public</span> <span class="k">void</span> <span class="nf">Execute</span><span class="p">(</span><span class="n">TranslationUnitMap</span> <span class="n">map</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="n">TranslationUnitMap</span> <span class="p">=</span> <span class="n">map</span><span class="p">;</span>

            <span class="k">this</span><span class="p">.</span><span class="nf">CreateBehaviorDefinitionMap</span><span class="p">();</span>

            <span class="k">this</span><span class="p">.</span><span class="nf">SendMessage</span><span class="p">();</span>
            <span class="k">this</span><span class="p">.</span><span class="nf">SendMessage</span><span class="p">(</span><span class="s">"--------------------------------------"</span><span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="nf">SendMessage</span><span class="p">(</span><span class="s">"Invokation Tree:"</span><span class="p">);</span>

            <span class="k">this</span><span class="p">.</span><span class="nf">DumpInvokationTrees</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="k">private</span> <span class="k">void</span> <span class="nf">CreateBehaviorDefinitionMap</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="k">foreach</span> <span class="p">(</span><span class="kt">var</span> <span class="n">tu</span> <span class="k">in</span> <span class="k">this</span><span class="p">.</span><span class="n">TranslationUnitMap</span><span class="p">.</span><span class="n">Values</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="kt">var</span> <span class="n">behavior_definitions</span> <span class="p">=</span> <span class="n">tu</span><span class="p">.</span><span class="n">BehaviorMap</span><span class="p">.</span><span class="n">Values</span><span class="p">.</span><span class="nf">Where</span><span class="p">(</span><span class="n">b</span> <span class="p">=&gt;</span> <span class="n">b</span><span class="p">.</span><span class="n">Type</span> <span class="p">==</span> <span class="s">"Definition"</span><span class="p">).</span><span class="nf">ToList</span><span class="p">();</span>

                <span class="k">foreach</span> <span class="p">(</span><span class="kt">var</span> <span class="n">behavior_definition</span> <span class="k">in</span> <span class="n">behavior_definitions</span><span class="p">)</span>
                <span class="p">{</span>
                    <span class="k">this</span><span class="p">.</span><span class="n">BehaviorDefinitionMap</span><span class="p">.</span><span class="nf">AddIfNotRegistered</span><span class="p">(</span><span class="n">behavior_definition</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">private</span> <span class="k">void</span> <span class="nf">DumpInvokationTrees</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="kt">var</span> <span class="n">behavior_defnitions</span> <span class="p">=</span> <span class="k">this</span><span class="p">.</span><span class="n">BehaviorDefinitionMap</span><span class="p">.</span><span class="n">Values</span><span class="p">;</span>

            <span class="k">foreach</span> <span class="p">(</span><span class="kt">var</span> <span class="n">behavior</span> <span class="k">in</span> <span class="n">behavior_defnitions</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nf">SendMessage</span><span class="p">(</span><span class="s">$"</span><span class="p">{</span><span class="n">behavior</span><span class="p">.</span><span class="n">Definition</span><span class="p">}</span><span class="s"> @ </span><span class="p">{</span><span class="n">behavior</span><span class="p">.</span><span class="n">Location</span><span class="p">}</span><span class="s">"</span><span class="p">);</span>

                <span class="k">this</span><span class="p">.</span><span class="nf">DumpInvokationTree</span><span class="p">(</span><span class="n">behavior</span><span class="p">);</span>

                <span class="k">this</span><span class="p">.</span><span class="nf">SendMessage</span><span class="p">();</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">private</span> <span class="k">void</span> <span class="nf">DumpInvokationTree</span><span class="p">(</span><span class="n">BehaviorInfo</span> <span class="n">behavior</span><span class="p">,</span> <span class="kt">int</span> <span class="n">depth</span> <span class="p">=</span> <span class="m">1</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">foreach</span> <span class="p">(</span><span class="kt">var</span> <span class="n">invokation</span> <span class="k">in</span> <span class="n">behavior</span><span class="p">.</span><span class="n">Invokations</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="kt">var</span> <span class="n">indent</span> <span class="p">=</span> <span class="k">new</span> <span class="kt">string</span><span class="p">(</span><span class="sc">' '</span><span class="p">,</span> <span class="n">depth</span> <span class="p">*</span> <span class="m">2</span><span class="p">);</span>

                <span class="kt">var</span> <span class="n">indent2</span> <span class="p">=</span> <span class="k">new</span> <span class="kt">string</span><span class="p">(</span><span class="sc">' '</span><span class="p">,</span> <span class="p">(</span><span class="n">depth</span> <span class="p">+</span> <span class="m">1</span><span class="p">)</span> <span class="p">*</span> <span class="m">2</span><span class="p">);</span>

                <span class="k">this</span><span class="p">.</span><span class="nf">SendMessage</span><span class="p">(</span><span class="s">$"</span><span class="p">{</span><span class="n">indent</span><span class="p">}{</span><span class="n">invokation</span><span class="p">.</span><span class="n">Definition</span><span class="p">}</span><span class="s"> @ </span><span class="p">{</span><span class="n">invokation</span><span class="p">.</span><span class="n">Location</span><span class="p">}</span><span class="s">"</span><span class="p">);</span>

                <span class="k">if</span> <span class="p">(</span><span class="n">behavior</span><span class="p">.</span><span class="n">ID</span> <span class="p">==</span> <span class="n">invokation</span><span class="p">.</span><span class="n">ID</span><span class="p">)</span>
                <span class="p">{</span>
                    <span class="k">this</span><span class="p">.</span><span class="nf">SendMessage</span><span class="p">(</span><span class="s">$"</span><span class="p">{</span><span class="n">indent2</span><span class="p">}</span><span class="s"> &lt;Recursive Call...&gt;"</span><span class="p">);</span>
                <span class="p">}</span>
                <span class="k">else</span>
                <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="n">BehaviorDefinitionMap</span><span class="p">.</span><span class="nf">ContainsKey</span><span class="p">(</span><span class="n">invokation</span><span class="p">.</span><span class="n">ID</span><span class="p">))</span>
                    <span class="p">{</span>
                        <span class="kt">var</span> <span class="n">child_behavior</span> <span class="p">=</span> <span class="k">this</span><span class="p">.</span><span class="n">BehaviorDefinitionMap</span><span class="p">[</span><span class="n">invokation</span><span class="p">.</span><span class="n">ID</span><span class="p">];</span>

                        <span class="k">this</span><span class="p">.</span><span class="nf">DumpInvokationTree</span><span class="p">(</span><span class="n">child_behavior</span><span class="p">,</span> <span class="n">depth</span> <span class="p">+</span> <span class="m">1</span><span class="p">);</span>
                    <span class="p">}</span>
                    <span class="k">else</span>
                    <span class="p">{</span>
                        <span class="k">this</span><span class="p">.</span><span class="nf">SendMessage</span><span class="p">(</span><span class="s">$"</span><span class="p">{</span><span class="n">indent2</span><span class="p">}</span><span class="s"> &lt;Behavior Definition Not Found...&gt;"</span><span class="p">);</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<h5>
<span id="3-cross-reference関数参照情報生成" class="fragment"></span><a href="#3-cross-reference%E9%96%A2%E6%95%B0%E5%8F%82%E7%85%A7%E6%83%85%E5%A0%B1%E7%94%9F%E6%88%90"><i class="fa fa-link"></i></a>3. Cross Reference(関数参照情報)生成</h5>

<p>続いて1.で生成したTranslationUnitMapの情報から関数クロスリファレンス(宣言/定義/コール)情報を生成し、出力する機能を持つクラスを実装します。<br>
クロスリファレンス情報を保持するためのクラス(BehaviorCrossReferenceInfo)と、それを関数ごとにまとめるコンテナ(BehaviorCrossReferenceMap)を定義します。<br>
なお、BehaviorCrossReferenceInfoは、重複を排除するためにValueObjectパターンで実装します。<br>
それぞれの実装コードを以下に示します。</p>

<div class="code-frame" data-lang="cs">
<div class="code-lang"><span class="bold">ValueObject.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="k">abstract</span> <span class="k">class</span> <span class="nc">ValueObject</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span> <span class="k">where</span> <span class="n">T</span> <span class="p">:</span> <span class="n">ValueObject</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span>
<span class="p">{</span>
    <span class="cm">/* データの同一性を判定する関数 -&gt; 継承先で実装 */</span>
    <span class="k">protected</span> <span class="k">abstract</span> <span class="kt">bool</span> <span class="nf">EqualsCore</span><span class="p">(</span><span class="n">T</span> <span class="n">other</span><span class="p">);</span>

    <span class="cm">/* ハッシュコード生成に使用するパラメータを取得する関数 -&gt; 継承先で実装 */</span>
    <span class="k">protected</span> <span class="k">abstract</span> <span class="n">IEnumerable</span><span class="p">&lt;</span><span class="kt">object</span><span class="p">&gt;</span> <span class="nf">GetHashCodeParameters</span><span class="p">();</span>

    <span class="k">public</span> <span class="k">static</span> <span class="kt">bool</span> <span class="k">operator</span> <span class="p">==(</span><span class="n">ValueObject</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span> <span class="n">left</span><span class="p">,</span> <span class="n">ValueObject</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span> <span class="n">right</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nf">Equals</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">static</span> <span class="kt">bool</span> <span class="k">operator</span> <span class="p">!=(</span><span class="n">ValueObject</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span> <span class="n">left</span><span class="p">,</span> <span class="n">ValueObject</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span> <span class="n">right</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="p">!</span><span class="nf">Equals</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">override</span> <span class="kt">bool</span> <span class="nf">Equals</span><span class="p">(</span><span class="kt">object</span> <span class="n">obj</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">var</span> <span class="n">other</span> <span class="p">=</span> <span class="n">obj</span> <span class="k">as</span> <span class="n">T</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">other</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="k">false</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nf">EqualsCore</span><span class="p">(</span><span class="n">other</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">override</span> <span class="kt">int</span> <span class="nf">GetHashCode</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="kt">var</span> <span class="n">objs</span> <span class="p">=</span> <span class="k">this</span><span class="p">.</span><span class="nf">GetHashCodeParameters</span><span class="p">();</span>

        <span class="kt">var</span> <span class="n">hash</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span>

        <span class="k">foreach</span><span class="p">(</span><span class="kt">var</span> <span class="n">obj</span> <span class="k">in</span> <span class="n">objs</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">hash</span> <span class="p">^=</span> <span class="n">obj</span><span class="p">.</span><span class="nf">GetHashCode</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="n">hash</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<div class="code-frame" data-lang="cs">
<div class="code-lang"><span class="bold">BehaviorCrossReferenceInfo.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">BehaviorCrossReferenceInfo</span> <span class="p">:</span> <span class="n">ValueObject</span><span class="p">&lt;</span><span class="n">BehaviorCrossReferenceInfo</span><span class="p">&gt;</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="kt">string</span> <span class="n">ID</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>

    <span class="k">public</span> <span class="kt">string</span> <span class="n">Type</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>

    <span class="k">public</span> <span class="kt">string</span> <span class="n">Definition</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>

    <span class="k">public</span> <span class="kt">string</span> <span class="n">Location</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>

    <span class="cm">/* Behavior Infoからクロスリファレンス情報を生成 */</span>
    <span class="k">public</span> <span class="nf">BehaviorCrossReferenceInfo</span><span class="p">(</span><span class="n">BehaviorInfo</span> <span class="n">info</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="n">ID</span> <span class="p">=</span> <span class="n">info</span><span class="p">.</span><span class="n">ID</span><span class="p">;</span>

        <span class="k">this</span><span class="p">.</span><span class="n">Type</span> <span class="p">=</span> <span class="n">info</span><span class="p">.</span><span class="n">Type</span><span class="p">;</span>

        <span class="k">this</span><span class="p">.</span><span class="n">Definition</span> <span class="p">=</span> <span class="n">info</span><span class="p">.</span><span class="n">Definition</span><span class="p">;</span>

        <span class="k">this</span><span class="p">.</span><span class="n">Location</span> <span class="p">=</span> <span class="n">info</span><span class="p">.</span><span class="n">Location</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="cm">/* Invokation Infoからクロスリファレンス情報を生成 */</span>
    <span class="k">public</span> <span class="nf">BehaviorCrossReferenceInfo</span><span class="p">(</span><span class="n">InvokationInfo</span> <span class="n">info</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="n">ID</span> <span class="p">=</span> <span class="n">info</span><span class="p">.</span><span class="n">ID</span><span class="p">;</span>

        <span class="k">this</span><span class="p">.</span><span class="n">Type</span> <span class="p">=</span> <span class="s">"Call"</span><span class="p">;</span>

        <span class="k">this</span><span class="p">.</span><span class="n">Definition</span> <span class="p">=</span> <span class="n">info</span><span class="p">.</span><span class="n">Definition</span><span class="p">;</span>

        <span class="k">this</span><span class="p">.</span><span class="n">Location</span> <span class="p">=</span> <span class="n">info</span><span class="p">.</span><span class="n">Location</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">override</span> <span class="kt">string</span> <span class="nf">ToString</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="s">$"[</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="n">Type</span><span class="p">}</span><span class="s">]</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="n">Definition</span><span class="p">}</span><span class="s"> @ </span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="n">Location</span><span class="p">}</span><span class="s">"</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="cm">/* 各プロパティの値が全て一致する場合、同一のオブジェクトとみなす */</span>
    <span class="k">protected</span> <span class="k">override</span> <span class="kt">bool</span> <span class="nf">EqualsCore</span><span class="p">(</span><span class="n">BehaviorCrossReferenceInfo</span> <span class="n">other</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="n">ID</span> <span class="p">==</span> <span class="n">other</span><span class="p">.</span><span class="n">ID</span> <span class="p">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="n">Type</span> <span class="p">==</span> <span class="n">other</span><span class="p">.</span><span class="n">Type</span> <span class="p">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="n">Definition</span> <span class="p">==</span> <span class="n">other</span><span class="p">.</span><span class="n">Definition</span> <span class="p">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="n">Location</span> <span class="p">==</span> <span class="n">other</span><span class="p">.</span><span class="n">Location</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="cm">/* 各プロパティの値をもとにハッシュコードを生成 */</span>
    <span class="k">protected</span> <span class="k">override</span> <span class="n">IEnumerable</span><span class="p">&lt;</span><span class="kt">object</span><span class="p">&gt;</span> <span class="nf">GetHashCodeParameters</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="kt">var</span> <span class="n">objs</span> <span class="p">=</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="kt">object</span><span class="p">&gt;()</span>
        <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="n">ID</span><span class="p">,</span>
            <span class="k">this</span><span class="p">.</span><span class="n">Definition</span><span class="p">,</span>
            <span class="k">this</span><span class="p">.</span><span class="n">Type</span><span class="p">,</span>
            <span class="k">this</span><span class="p">.</span><span class="n">Location</span><span class="p">,</span>
        <span class="p">};</span>

        <span class="k">return</span> <span class="n">objs</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<div class="code-frame" data-lang="cs">
<div class="code-lang"><span class="bold">BehaviorCrossReferenceMap.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="cm">/* 同一ID(同一関数)ごとにクロスリファレンス情報をまとめるコンテナ(重複は排除) */</span>
<span class="k">public</span> <span class="k">class</span> <span class="nc">BehaviorCrossReferenceMap</span> <span class="p">:</span> <span class="n">Dictionary</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">,</span> <span class="n">HashSet</span><span class="p">&lt;</span><span class="n">BehaviorCrossReferenceInfo</span><span class="p">&gt;&gt;</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">void</span> <span class="nf">Add</span><span class="p">(</span><span class="n">BehaviorCrossReferenceInfo</span> <span class="n">info</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nf">ContainsKey</span><span class="p">(</span><span class="n">info</span><span class="p">.</span><span class="n">ID</span><span class="p">)</span> <span class="p">==</span> <span class="k">false</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">info</span><span class="p">.</span><span class="n">ID</span><span class="p">,</span> <span class="k">new</span> <span class="n">HashSet</span><span class="p">&lt;</span><span class="n">BehaviorCrossReferenceInfo</span><span class="p">&gt;());</span>
        <span class="p">}</span>

        <span class="k">this</span><span class="p">[</span><span class="n">info</span><span class="p">.</span><span class="n">ID</span><span class="p">].</span><span class="nf">Add</span><span class="p">(</span><span class="n">info</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<p>上記で示したクロスリファレンス情報を生成するコードを実装します。  </p>

<div class="code-frame" data-lang="cs">
<div class="code-lang"><span class="bold">クロスリファレンス情報生成</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">private</span> <span class="k">void</span> <span class="nf">AnalyseCrossReferences</span><span class="p">()</span>
<span class="p">{</span>
    <span class="kt">var</span> <span class="n">map1</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">BehaviorCrossReferenceMap</span><span class="p">();</span>

    <span class="cm">/* Translation Unit Infoを走査 */</span>
    <span class="k">foreach</span> <span class="p">(</span><span class="kt">var</span> <span class="n">tu</span> <span class="k">in</span> <span class="k">this</span><span class="p">.</span><span class="n">TranslationUnitMap</span><span class="p">.</span><span class="n">Values</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="cm">/* Translation Unit InfoのBehavior Mapの値(Behavior Info)を走査 */</span>
        <span class="k">foreach</span> <span class="p">(</span><span class="kt">var</span> <span class="n">behavior</span> <span class="k">in</span> <span class="n">tu</span><span class="p">.</span><span class="n">BehaviorMap</span><span class="p">.</span><span class="n">Values</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="cm">/* Behavior InfoからBehavior Cross Reference Infoを生成 */</span>
            <span class="kt">var</span> <span class="n">xref_behavior</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">BehaviorCrossReferenceInfo</span><span class="p">(</span><span class="n">behavior</span><span class="p">);</span>

            <span class="cm">/* Cross Reference Mapに登録 */</span>
            <span class="n">map1</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">xref_behavior</span><span class="p">);</span>

            <span class="cm">/* Behavior InfoのInvokation Infoリストを走査 */</span>
            <span class="k">foreach</span> <span class="p">(</span><span class="kt">var</span> <span class="n">invoke</span> <span class="k">in</span> <span class="n">behavior</span><span class="p">.</span><span class="n">Invokations</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="cm">/* Invokation InfoからBehavior Cross Reference Infoを生成 */</span>
                <span class="kt">var</span> <span class="n">xref_invoke</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">BehaviorCrossReferenceInfo</span><span class="p">(</span><span class="n">invoke</span><span class="p">);</span>

                <span class="cm">/* Cross Reference Mapに登録 */</span>
                <span class="n">map1</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">xref_invoke</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="cm">/* 新規Behavior Cross Reference Mapを生成 */</span>
    <span class="kt">var</span> <span class="n">map2</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">BehaviorCrossReferenceMap</span><span class="p">();</span>

    <span class="cm">/* 前段で生成したBehavior Cross Reference Mapの各キーを走査 */</span>
    <span class="k">foreach</span> <span class="p">(</span><span class="kt">var</span> <span class="n">key</span> <span class="k">in</span> <span class="n">map1</span><span class="p">.</span><span class="n">Keys</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="cm">/* キーを指定してハッシュセットを取得 */</span>
        <span class="kt">var</span> <span class="k">set</span> <span class="p">=</span> <span class="n">map1</span><span class="p">[</span><span class="n">key</span><span class="p">];</span>

        <span class="cm">/* Behavior Cross Reference InfoのTypeでソート */</span>
        <span class="kt">var</span> <span class="n">sorted_set</span> <span class="p">=</span> <span class="k">set</span><span class="p">.</span><span class="nf">OrderBy</span><span class="p">(</span><span class="n">x</span> <span class="p">=&gt;</span> <span class="n">x</span><span class="p">.</span><span class="n">Type</span><span class="p">).</span><span class="nf">ToHashSet</span><span class="p">();</span>

        <span class="cm">/* ソート後のハッシュセットを登録 */</span>
        <span class="n">map2</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">sorted_set</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">this</span><span class="p">.</span><span class="n">CrossReferenceMap</span> <span class="p">=</span> <span class="n">map2</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
</div>

<p>次に、生成したクロスリファレンス情報を順番に出力します。<br>
実装コードを以下に示します。</p>

<div class="code-frame" data-lang="cs">
<div class="code-lang"><span class="bold">クロスリファレンス情報出力</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">private</span> <span class="k">void</span> <span class="nf">DumpCrossReferences</span><span class="p">()</span>
<span class="p">{</span>
    <span class="cm">/* Behavior Cross Reference Mapの各キー(Behavior ID)を走査 */</span>
    <span class="k">foreach</span> <span class="p">(</span><span class="kt">var</span> <span class="n">xref_id</span> <span class="k">in</span> <span class="k">this</span><span class="p">.</span><span class="n">CrossReferenceMap</span><span class="p">.</span><span class="n">Keys</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="cm">/* Behavior IDを出力 */</span>
        <span class="k">this</span><span class="p">.</span><span class="nf">SendMessage</span><span class="p">(</span><span class="s">$"</span><span class="p">{</span><span class="n">xref_id</span><span class="p">}</span><span class="s">"</span><span class="p">);</span>

        <span class="cm">/* キーを指定してBehavior Cross Reference Infoのハッシュセットを取得 */</span>
        <span class="kt">var</span> <span class="n">xref_hash_set</span> <span class="p">=</span> <span class="k">this</span><span class="p">.</span><span class="n">CrossReferenceMap</span><span class="p">[</span><span class="n">xref_id</span><span class="p">];</span>

        <span class="cm">/* ハッシュセットの要素(Behavior Cross Reference Info)を走査 */</span>
        <span class="k">foreach</span> <span class="p">(</span><span class="kt">var</span> <span class="n">xref_info</span> <span class="k">in</span> <span class="n">xref_hash_set</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="kt">var</span> <span class="n">type</span> <span class="p">=</span> <span class="n">xref_info</span><span class="p">.</span><span class="n">Type</span><span class="p">;</span>
            <span class="kt">var</span> <span class="n">loc</span> <span class="p">=</span> <span class="n">xref_info</span><span class="p">.</span><span class="n">Location</span><span class="p">;</span>
            <span class="k">this</span><span class="p">.</span><span class="nf">SendMessage</span><span class="p">(</span><span class="s">$"  [</span><span class="p">{</span><span class="n">type</span><span class="p">}</span><span class="s">] @ </span><span class="p">{</span><span class="n">loc</span><span class="p">}</span><span class="s">"</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">this</span><span class="p">.</span><span class="nf">SendMessage</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<p>ソース全文を以下に示します。</p>

<div class="code-frame" data-lang="cs">
<div class="code-lang"><span class="bold">CrossReferencesDumper.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="k">static</span> <span class="k">class</span> <span class="nc">CrossReferencesDumper</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">Dump</span><span class="p">(</span><span class="n">TranslationUnitMap</span> <span class="n">map</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">var</span> <span class="n">impl</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">CrossReferencesDumperImpl</span><span class="p">();</span>

        <span class="n">impl</span><span class="p">.</span><span class="nf">Execute</span><span class="p">(</span><span class="n">map</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">class</span> <span class="nc">CrossReferencesDumperImpl</span> <span class="p">:</span> <span class="n">AMessageable</span>
    <span class="p">{</span>
        <span class="k">private</span> <span class="n">TranslationUnitMap</span> <span class="n">TranslationUnitMap</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">TranslationUnitMap</span><span class="p">();</span>

        <span class="k">private</span> <span class="n">BehaviorCrossReferenceMap</span> <span class="n">CrossReferenceMap</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">BehaviorCrossReferenceMap</span><span class="p">();</span>

        <span class="k">public</span> <span class="k">void</span> <span class="nf">Execute</span><span class="p">(</span><span class="n">TranslationUnitMap</span> <span class="n">map</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="n">TranslationUnitMap</span> <span class="p">=</span> <span class="n">map</span><span class="p">;</span>

            <span class="k">this</span><span class="p">.</span><span class="nf">AnalyseCrossReferences</span><span class="p">();</span>

            <span class="k">this</span><span class="p">.</span><span class="nf">SendMessage</span><span class="p">();</span>
            <span class="k">this</span><span class="p">.</span><span class="nf">SendMessage</span><span class="p">(</span><span class="s">"--------------------------------------"</span><span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="nf">SendMessage</span><span class="p">(</span><span class="s">"Cross References:"</span><span class="p">);</span>

            <span class="k">this</span><span class="p">.</span><span class="nf">DumpCrossReferences</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="k">private</span> <span class="k">void</span> <span class="nf">AnalyseCrossReferences</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="kt">var</span> <span class="n">map1</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">BehaviorCrossReferenceMap</span><span class="p">();</span>

            <span class="k">foreach</span> <span class="p">(</span><span class="kt">var</span> <span class="n">tu</span> <span class="k">in</span> <span class="k">this</span><span class="p">.</span><span class="n">TranslationUnitMap</span><span class="p">.</span><span class="n">Values</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">foreach</span> <span class="p">(</span><span class="kt">var</span> <span class="n">behavior</span> <span class="k">in</span> <span class="n">tu</span><span class="p">.</span><span class="n">BehaviorMap</span><span class="p">.</span><span class="n">Values</span><span class="p">)</span>
                <span class="p">{</span>
                    <span class="kt">var</span> <span class="n">xref_behavior</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">BehaviorCrossReferenceInfo</span><span class="p">(</span><span class="n">behavior</span><span class="p">);</span>

                    <span class="n">map1</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">xref_behavior</span><span class="p">);</span>

                    <span class="k">foreach</span> <span class="p">(</span><span class="kt">var</span> <span class="n">invoke</span> <span class="k">in</span> <span class="n">behavior</span><span class="p">.</span><span class="n">Invokations</span><span class="p">)</span>
                    <span class="p">{</span>
                        <span class="kt">var</span> <span class="n">xref_invoke</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">BehaviorCrossReferenceInfo</span><span class="p">(</span><span class="n">invoke</span><span class="p">);</span>

                        <span class="n">map1</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">xref_invoke</span><span class="p">);</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="kt">var</span> <span class="n">map2</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">BehaviorCrossReferenceMap</span><span class="p">();</span>

            <span class="k">foreach</span> <span class="p">(</span><span class="kt">var</span> <span class="n">key</span> <span class="k">in</span> <span class="n">map1</span><span class="p">.</span><span class="n">Keys</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="kt">var</span> <span class="k">set</span> <span class="p">=</span> <span class="n">map1</span><span class="p">[</span><span class="n">key</span><span class="p">];</span>

                <span class="kt">var</span> <span class="n">sorted_set</span> <span class="p">=</span> <span class="k">set</span><span class="p">.</span><span class="nf">OrderBy</span><span class="p">(</span><span class="n">x</span> <span class="p">=&gt;</span> <span class="n">x</span><span class="p">.</span><span class="n">Type</span><span class="p">).</span><span class="nf">ToHashSet</span><span class="p">();</span>

                <span class="n">map2</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">sorted_set</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="k">this</span><span class="p">.</span><span class="n">CrossReferenceMap</span> <span class="p">=</span> <span class="n">map2</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">private</span> <span class="k">void</span> <span class="nf">DumpCrossReferences</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="k">foreach</span> <span class="p">(</span><span class="kt">var</span> <span class="n">xref_id</span> <span class="k">in</span> <span class="k">this</span><span class="p">.</span><span class="n">CrossReferenceMap</span><span class="p">.</span><span class="n">Keys</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nf">SendMessage</span><span class="p">(</span><span class="s">$"</span><span class="p">{</span><span class="n">xref_id</span><span class="p">}</span><span class="s">"</span><span class="p">);</span>

                <span class="kt">var</span> <span class="n">xref_hash_set</span> <span class="p">=</span> <span class="k">this</span><span class="p">.</span><span class="n">CrossReferenceMap</span><span class="p">[</span><span class="n">xref_id</span><span class="p">];</span>

                <span class="k">foreach</span> <span class="p">(</span><span class="kt">var</span> <span class="n">xref_info</span> <span class="k">in</span> <span class="n">xref_hash_set</span><span class="p">)</span>
                <span class="p">{</span>
                    <span class="kt">var</span> <span class="n">type</span> <span class="p">=</span> <span class="n">xref_info</span><span class="p">.</span><span class="n">Type</span><span class="p">;</span>
                    <span class="kt">var</span> <span class="n">loc</span> <span class="p">=</span> <span class="n">xref_info</span><span class="p">.</span><span class="n">Location</span><span class="p">;</span>
                    <span class="k">this</span><span class="p">.</span><span class="nf">SendMessage</span><span class="p">(</span><span class="s">$"  [</span><span class="p">{</span><span class="n">type</span><span class="p">}</span><span class="s">] @ </span><span class="p">{</span><span class="n">loc</span><span class="p">}</span><span class="s">"</span><span class="p">);</span>
                <span class="p">}</span>

                <span class="k">this</span><span class="p">.</span><span class="nf">SendMessage</span><span class="p">();</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<h5>
<span id="4-各処理呼び出し" class="fragment"></span><a href="#4-%E5%90%84%E5%87%A6%E7%90%86%E5%91%BC%E3%81%B3%E5%87%BA%E3%81%97"><i class="fa fa-link"></i></a>4. 各処理呼び出し</h5>

<p>最後に、1-3.で実装した各機能を呼び出す処理を実装します。</p>

<div class="code-frame" data-lang="cs">
<div class="code-lang"><span class="bold">BehaviorRelationsAnalyser.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="k">static</span> <span class="k">class</span> <span class="nc">BehaviorRelationsAnalyser</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">Execute</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="cm">/* Translation Unitのパース設定情報を生成 */</span>
        <span class="kt">var</span> <span class="n">setting</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">TranslationUnitParseSetting</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="cm">/* パース対象ソースパスの指定 */</span>
            <span class="n">Sources</span> <span class="p">=</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;()</span>
            <span class="p">{</span>
                <span class="s">"./Code2/src/main.cpp"</span><span class="p">,</span>
                <span class="s">"./Code2/src/TestClass.cpp"</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="cm">/* libclangに渡すコマンドライン引数(インクルードパスなど)の指定 */</span>
            <span class="n">CommandLineArgs</span> <span class="p">=</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;()</span>
            <span class="p">{</span>
                <span class="s">"-I./Code2/inc"</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="cm">/* libclangのTranslation Unitパースオプション */</span>
            <span class="n">ParseOptions</span> <span class="p">=</span> <span class="n">TranslationUnitFlags</span><span class="p">.</span><span class="n">None</span><span class="p">,</span>
            <span class="cm">/* ダイアグ情報(構文エラーなど)を表示 */</span>
            <span class="n">DisplayDiag</span> <span class="p">=</span> <span class="k">true</span><span class="p">,</span>
            <span class="cm">/* AST情報を出力(デバッグ用) */</span>
            <span class="n">DumpAST</span> <span class="p">=</span> <span class="k">true</span><span class="p">,</span>
        <span class="p">};</span>

        <span class="cm">/* Translation Unitをパースし、Translation Unit Mapを生成 */</span>
        <span class="kt">var</span> <span class="n">map</span> <span class="p">=</span> <span class="n">TranslationUnitsParser</span><span class="p">.</span><span class="nf">Parse</span><span class="p">(</span><span class="n">setting</span><span class="p">);</span>

        <span class="cm">/* Translation Unit Mapから関数コールツリーを生成して出力 */</span>
        <span class="n">InvokationTreeDumper</span><span class="p">.</span><span class="nf">Dump</span><span class="p">(</span><span class="n">map</span><span class="p">);</span>

        <span class="cm">/* Translation Unit Mapから関数クロスリファレンス情報を生成して出力 */</span>
        <span class="n">CrossReferencesDumper</span><span class="p">.</span><span class="nf">Dump</span><span class="p">(</span><span class="n">map</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<p><br></p>

<p>解析対象サンプルソースを入力して実行した結果を示します。<br>
上から、ASTのダンプ結果、関数コールツリー、関数クロスリファレンス情報が出力されています。  </p>

<div class="code-frame" data-lang="text">
<div class="code-lang"><span class="bold">Log.txt</span></div>
<div class="highlight"><pre class="with-code"><code>AST Dump:
[TranslationUnit] ./Code2/src/main.cpp @ 
  [Namespace] root @ ./Code2/inc/TestClass.h[L.3,C.11]
    [Namespace] sub1 @ ./Code2/inc/TestClass.h[L.5,C.15]
      [Namespace] sub2 @ ./Code2/inc/TestClass.h[L.7,C.19]
        [ClassDeclaration] TestClass @ ./Code2/inc/TestClass.h[L.9,C.19]
          [LastDeclaration]  @ ./Code2/inc/TestClass.h[L.11,C.13]
          [Constructor] TestClass @ ./Code2/inc/TestClass.h[L.12,C.17]
          [Destructor] ~TestClass @ ./Code2/inc/TestClass.h[L.13,C.17]
          [CXXMethod] PublicMethod @ ./Code2/inc/TestClass.h[L.15,C.22]
            [ParmDeclaration] a @ ./Code2/inc/TestClass.h[L.15,C.39]
            [ParmDeclaration] b @ ./Code2/inc/TestClass.h[L.15,C.46]
          [CXXMethod] GetA @ ./Code2/inc/TestClass.h[L.17,C.21]
            [CompoundStatement]  @ ./Code2/inc/TestClass.h[L.17,C.28]
              [ReturnStatement]  @ ./Code2/inc/TestClass.h[L.17,C.30]
                [UnexposedExpression] m_a @ ./Code2/inc/TestClass.h[L.17,C.43]
                  [MemberReferenceExpression] m_a @ ./Code2/inc/TestClass.h[L.17,C.43]
                    [CXXThisExpression]  @ ./Code2/inc/TestClass.h[L.17,C.37]
          [CXXMethod] GetB @ ./Code2/inc/TestClass.h[L.18,C.21]
            [CompoundStatement]  @ ./Code2/inc/TestClass.h[L.18,C.28]
              [ReturnStatement]  @ ./Code2/inc/TestClass.h[L.18,C.30]
                [UnexposedExpression] m_b @ ./Code2/inc/TestClass.h[L.18,C.43]
                  [MemberReferenceExpression] m_b @ ./Code2/inc/TestClass.h[L.18,C.43]
                    [CXXThisExpression]  @ ./Code2/inc/TestClass.h[L.18,C.37]
          [CXXMethod] GetResult @ ./Code2/inc/TestClass.h[L.19,C.21]
            [CompoundStatement]  @ ./Code2/inc/TestClass.h[L.19,C.33]
              [ReturnStatement]  @ ./Code2/inc/TestClass.h[L.19,C.35]
                [UnexposedExpression] m_result @ ./Code2/inc/TestClass.h[L.19,C.48]
                  [MemberReferenceExpression] m_result @ ./Code2/inc/TestClass.h[L.19,C.48]
                    [CXXThisExpression]  @ ./Code2/inc/TestClass.h[L.19,C.42]
          [CXXMethod] SetA @ ./Code2/inc/TestClass.h[L.21,C.22]
            [ParmDeclaration] a @ ./Code2/inc/TestClass.h[L.21,C.31]
            [CompoundStatement]  @ ./Code2/inc/TestClass.h[L.21,C.34]
              [BinaryOperator]  @ ./Code2/inc/TestClass.h[L.21,C.36]
                [MemberReferenceExpression] m_a @ ./Code2/inc/TestClass.h[L.21,C.42]
                  [CXXThisExpression]  @ ./Code2/inc/TestClass.h[L.21,C.36]
                [UnexposedExpression] a @ ./Code2/inc/TestClass.h[L.21,C.48]
                  [DeclarationReferenceExpression] a @ ./Code2/inc/TestClass.h[L.21,C.48]
          [CXXMethod] SetB @ ./Code2/inc/TestClass.h[L.22,C.22]
            [ParmDeclaration] b @ ./Code2/inc/TestClass.h[L.22,C.31]
            [CompoundStatement]  @ ./Code2/inc/TestClass.h[L.22,C.34]
              [BinaryOperator]  @ ./Code2/inc/TestClass.h[L.22,C.36]
                [MemberReferenceExpression] m_b @ ./Code2/inc/TestClass.h[L.22,C.42]
                  [CXXThisExpression]  @ ./Code2/inc/TestClass.h[L.22,C.36]
                [UnexposedExpression] b @ ./Code2/inc/TestClass.h[L.22,C.48]
                  [DeclarationReferenceExpression] b @ ./Code2/inc/TestClass.h[L.22,C.48]
          [CXXMethod] SetResult @ ./Code2/inc/TestClass.h[L.23,C.22]
            [ParmDeclaration] result @ ./Code2/inc/TestClass.h[L.23,C.36]
            [CompoundStatement]  @ ./Code2/inc/TestClass.h[L.23,C.44]
              [BinaryOperator]  @ ./Code2/inc/TestClass.h[L.23,C.46]
                [MemberReferenceExpression] m_result @ ./Code2/inc/TestClass.h[L.23,C.52]
                  [CXXThisExpression]  @ ./Code2/inc/TestClass.h[L.23,C.46]
                [UnexposedExpression] result @ ./Code2/inc/TestClass.h[L.23,C.63]
                  [DeclarationReferenceExpression] result @ ./Code2/inc/TestClass.h[L.23,C.63]
          [LastDeclaration]  @ ./Code2/inc/TestClass.h[L.25,C.13]
          [CXXMethod] PrivateMethod @ ./Code2/inc/TestClass.h[L.26,C.21]
            [ParmDeclaration] a @ ./Code2/inc/TestClass.h[L.26,C.39]
            [ParmDeclaration] b @ ./Code2/inc/TestClass.h[L.26,C.46]
          [LastDeclaration]  @ ./Code2/inc/TestClass.h[L.28,C.13]
          [FieldDeclaration] m_a @ ./Code2/inc/TestClass.h[L.29,C.21]
          [FieldDeclaration] m_b @ ./Code2/inc/TestClass.h[L.30,C.21]
          [FieldDeclaration] m_result @ ./Code2/inc/TestClass.h[L.31,C.21]
  [FunctionDeclaration] RecursiveCallTest @ ./Code2/src/main.cpp[L.5,C.6]
    [ParmDeclaration] i @ ./Code2/src/main.cpp[L.5,C.28]
  [FunctionDeclaration] main @ ./Code2/src/main.cpp[L.7,C.5]
    [CompoundStatement]  @ ./Code2/src/main.cpp[L.8,C.1]
      [DeclarationStatement]  @ ./Code2/src/main.cpp[L.9,C.5]
        [VarDeclaration] test_instance @ ./Code2/src/main.cpp[L.9,C.33]
          [NamespaceReference] root @ ./Code2/src/main.cpp[L.9,C.5]
          [NamespaceReference] sub1 @ ./Code2/src/main.cpp[L.9,C.11]
          [NamespaceReference] sub2 @ ./Code2/src/main.cpp[L.9,C.17]
          [TypeReference] class root::sub1::sub2::TestClass @ ./Code2/src/main.cpp[L.9,C.23]
          [CallExpression] TestClass @ ./Code2/src/main.cpp[L.9,C.33]
      [DeclarationStatement]  @ ./Code2/src/main.cpp[L.10,C.5]
        [VarDeclaration] a @ ./Code2/src/main.cpp[L.10,C.9]
          [IntegerLiteral]  @ ./Code2/src/main.cpp[L.10,C.13]
      [DeclarationStatement]  @ ./Code2/src/main.cpp[L.11,C.5]
        [VarDeclaration] b @ ./Code2/src/main.cpp[L.11,C.9]
          [IntegerLiteral]  @ ./Code2/src/main.cpp[L.11,C.13]
      [DeclarationStatement]  @ ./Code2/src/main.cpp[L.12,C.5]
        [VarDeclaration] result @ ./Code2/src/main.cpp[L.12,C.9]
          [IntegerLiteral]  @ ./Code2/src/main.cpp[L.12,C.18]
      [CallExpression] SetA @ ./Code2/src/main.cpp[L.14,C.5]
        [MemberReferenceExpression] SetA @ ./Code2/src/main.cpp[L.14,C.19]
          [DeclarationReferenceExpression] test_instance @ ./Code2/src/main.cpp[L.14,C.5]
        [UnexposedExpression] a @ ./Code2/src/main.cpp[L.14,C.24]
          [DeclarationReferenceExpression] a @ ./Code2/src/main.cpp[L.14,C.24]
      [CallExpression] SetB @ ./Code2/src/main.cpp[L.16,C.5]
        [MemberReferenceExpression] SetB @ ./Code2/src/main.cpp[L.16,C.19]
          [DeclarationReferenceExpression] test_instance @ ./Code2/src/main.cpp[L.16,C.5]
        [UnexposedExpression] b @ ./Code2/src/main.cpp[L.16,C.24]
          [DeclarationReferenceExpression] b @ ./Code2/src/main.cpp[L.16,C.24]
      [CallExpression] operator&lt;&lt; @ ./Code2/src/main.cpp[L.18,C.5]
        [CallExpression] operator&lt;&lt; @ ./Code2/src/main.cpp[L.18,C.5]
          [CallExpression] operator&lt;&lt; @ ./Code2/src/main.cpp[L.18,C.5]
            [DeclarationReferenceExpression] cout @ ./Code2/src/main.cpp[L.18,C.10]
              [NamespaceReference] std @ ./Code2/src/main.cpp[L.18,C.5]
            [UnexposedExpression] operator&lt;&lt; @ ./Code2/src/main.cpp[L.18,C.15]
              [DeclarationReferenceExpression] operator&lt;&lt; @ ./Code2/src/main.cpp[L.18,C.15]
            [UnexposedExpression]  @ ./Code2/src/main.cpp[L.18,C.18]
              [StringLiteral] "a : " @ ./Code2/src/main.cpp[L.18,C.18]
          [UnexposedExpression] operator&lt;&lt; @ ./Code2/src/main.cpp[L.18,C.25]
            [DeclarationReferenceExpression] operator&lt;&lt; @ ./Code2/src/main.cpp[L.18,C.25]
          [CallExpression] GetA @ ./Code2/src/main.cpp[L.18,C.28]
            [MemberReferenceExpression] GetA @ ./Code2/src/main.cpp[L.18,C.42]
              [DeclarationReferenceExpression] test_instance @ ./Code2/src/main.cpp[L.18,C.28]
        [UnexposedExpression] operator&lt;&lt; @ ./Code2/src/main.cpp[L.18,C.49]
          [DeclarationReferenceExpression] operator&lt;&lt; @ ./Code2/src/main.cpp[L.18,C.49]
        [UnexposedExpression] endl @ ./Code2/src/main.cpp[L.18,C.57]
          [DeclarationReferenceExpression] endl @ ./Code2/src/main.cpp[L.18,C.57]
            [NamespaceReference] std @ ./Code2/src/main.cpp[L.18,C.52]
      [CallExpression] operator&lt;&lt; @ ./Code2/src/main.cpp[L.20,C.5]
        [CallExpression] operator&lt;&lt; @ ./Code2/src/main.cpp[L.20,C.5]
          [CallExpression] operator&lt;&lt; @ ./Code2/src/main.cpp[L.20,C.5]
            [DeclarationReferenceExpression] cout @ ./Code2/src/main.cpp[L.20,C.10]
              [NamespaceReference] std @ ./Code2/src/main.cpp[L.20,C.5]
            [UnexposedExpression] operator&lt;&lt; @ ./Code2/src/main.cpp[L.20,C.15]
              [DeclarationReferenceExpression] operator&lt;&lt; @ ./Code2/src/main.cpp[L.20,C.15]
            [UnexposedExpression]  @ ./Code2/src/main.cpp[L.20,C.18]
              [StringLiteral] "b : " @ ./Code2/src/main.cpp[L.20,C.18]
          [UnexposedExpression] operator&lt;&lt; @ ./Code2/src/main.cpp[L.20,C.25]
            [DeclarationReferenceExpression] operator&lt;&lt; @ ./Code2/src/main.cpp[L.20,C.25]
          [CallExpression] GetB @ ./Code2/src/main.cpp[L.20,C.28]
            [MemberReferenceExpression] GetB @ ./Code2/src/main.cpp[L.20,C.42]
              [DeclarationReferenceExpression] test_instance @ ./Code2/src/main.cpp[L.20,C.28]
        [UnexposedExpression] operator&lt;&lt; @ ./Code2/src/main.cpp[L.20,C.49]
          [DeclarationReferenceExpression] operator&lt;&lt; @ ./Code2/src/main.cpp[L.20,C.49]
        [UnexposedExpression] endl @ ./Code2/src/main.cpp[L.20,C.57]
          [DeclarationReferenceExpression] endl @ ./Code2/src/main.cpp[L.20,C.57]
            [NamespaceReference] std @ ./Code2/src/main.cpp[L.20,C.52]
      [CallExpression] PublicMethod @ ./Code2/src/main.cpp[L.22,C.5]
        [MemberReferenceExpression] PublicMethod @ ./Code2/src/main.cpp[L.22,C.19]
          [DeclarationReferenceExpression] test_instance @ ./Code2/src/main.cpp[L.22,C.5]
        [UnexposedExpression] a @ ./Code2/src/main.cpp[L.22,C.32]
          [DeclarationReferenceExpression] a @ ./Code2/src/main.cpp[L.22,C.32]
        [UnexposedExpression] b @ ./Code2/src/main.cpp[L.22,C.35]
          [DeclarationReferenceExpression] b @ ./Code2/src/main.cpp[L.22,C.35]
      [BinaryOperator]  @ ./Code2/src/main.cpp[L.24,C.5]
        [DeclarationReferenceExpression] result @ ./Code2/src/main.cpp[L.24,C.5]
        [CallExpression] GetResult @ ./Code2/src/main.cpp[L.24,C.14]
          [MemberReferenceExpression] GetResult @ ./Code2/src/main.cpp[L.24,C.28]
            [DeclarationReferenceExpression] test_instance @ ./Code2/src/main.cpp[L.24,C.14]
      [CallExpression] operator&lt;&lt; @ ./Code2/src/main.cpp[L.26,C.5]
        [CallExpression] operator&lt;&lt; @ ./Code2/src/main.cpp[L.26,C.5]
          [CallExpression] operator&lt;&lt; @ ./Code2/src/main.cpp[L.26,C.5]
            [DeclarationReferenceExpression] cout @ ./Code2/src/main.cpp[L.26,C.10]
              [NamespaceReference] std @ ./Code2/src/main.cpp[L.26,C.5]
            [UnexposedExpression] operator&lt;&lt; @ ./Code2/src/main.cpp[L.26,C.15]
              [DeclarationReferenceExpression] operator&lt;&lt; @ ./Code2/src/main.cpp[L.26,C.15]
            [UnexposedExpression]  @ ./Code2/src/main.cpp[L.26,C.18]
              [StringLiteral] "result : " @ ./Code2/src/main.cpp[L.26,C.18]
          [UnexposedExpression] operator&lt;&lt; @ ./Code2/src/main.cpp[L.26,C.30]
            [DeclarationReferenceExpression] operator&lt;&lt; @ ./Code2/src/main.cpp[L.26,C.30]
          [UnexposedExpression] result @ ./Code2/src/main.cpp[L.26,C.33]
            [DeclarationReferenceExpression] result @ ./Code2/src/main.cpp[L.26,C.33]
        [UnexposedExpression] operator&lt;&lt; @ ./Code2/src/main.cpp[L.26,C.40]
          [DeclarationReferenceExpression] operator&lt;&lt; @ ./Code2/src/main.cpp[L.26,C.40]
        [UnexposedExpression] endl @ ./Code2/src/main.cpp[L.26,C.48]
          [DeclarationReferenceExpression] endl @ ./Code2/src/main.cpp[L.26,C.48]
            [NamespaceReference] std @ ./Code2/src/main.cpp[L.26,C.43]
      [CallExpression] RecursiveCallTest @ ./Code2/src/main.cpp[L.28,C.5]
        [UnexposedExpression] RecursiveCallTest @ ./Code2/src/main.cpp[L.28,C.5]
          [DeclarationReferenceExpression] RecursiveCallTest @ ./Code2/src/main.cpp[L.28,C.5]
        [IntegerLiteral]  @ ./Code2/src/main.cpp[L.28,C.23]
  [FunctionDeclaration] RecursiveCallTest @ ./Code2/src/main.cpp[L.31,C.6]
    [ParmDeclaration] i @ ./Code2/src/main.cpp[L.31,C.28]
    [CompoundStatement]  @ ./Code2/src/main.cpp[L.32,C.1]
      [IfStatement]  @ ./Code2/src/main.cpp[L.33,C.5]
        [BinaryOperator]  @ ./Code2/src/main.cpp[L.33,C.9]
          [UnexposedExpression] i @ ./Code2/src/main.cpp[L.33,C.9]
            [DeclarationReferenceExpression] i @ ./Code2/src/main.cpp[L.33,C.9]
          [IntegerLiteral]  @ ./Code2/src/main.cpp[L.33,C.13]
        [CompoundStatement]  @ ./Code2/src/main.cpp[L.34,C.5]
          [ReturnStatement]  @ ./Code2/src/main.cpp[L.35,C.9]
        [CompoundStatement]  @ ./Code2/src/main.cpp[L.38,C.5]
          [CallExpression] operator&lt;&lt; @ ./Code2/src/main.cpp[L.39,C.9]
            [CallExpression] operator&lt;&lt; @ ./Code2/src/main.cpp[L.39,C.9]
              [CallExpression] operator&lt;&lt; @ ./Code2/src/main.cpp[L.39,C.9]
                [DeclarationReferenceExpression] cout @ ./Code2/src/main.cpp[L.39,C.14]
                  [NamespaceReference] std @ ./Code2/src/main.cpp[L.39,C.9]
                [UnexposedExpression] operator&lt;&lt; @ ./Code2/src/main.cpp[L.39,C.19]
                  [DeclarationReferenceExpression] operator&lt;&lt; @ ./Code2/src/main.cpp[L.39,C.19]
                [UnexposedExpression]  @ ./Code2/src/main.cpp[L.39,C.22]
                  [StringLiteral] "i : " @ ./Code2/src/main.cpp[L.39,C.22]
              [UnexposedExpression] operator&lt;&lt; @ ./Code2/src/main.cpp[L.39,C.29]
                [DeclarationReferenceExpression] operator&lt;&lt; @ ./Code2/src/main.cpp[L.39,C.29]
              [UnexposedExpression] i @ ./Code2/src/main.cpp[L.39,C.32]
                [DeclarationReferenceExpression] i @ ./Code2/src/main.cpp[L.39,C.32]
            [UnexposedExpression] operator&lt;&lt; @ ./Code2/src/main.cpp[L.39,C.34]
              [DeclarationReferenceExpression] operator&lt;&lt; @ ./Code2/src/main.cpp[L.39,C.34]
            [UnexposedExpression] endl @ ./Code2/src/main.cpp[L.39,C.42]
              [DeclarationReferenceExpression] endl @ ./Code2/src/main.cpp[L.39,C.42]
                [NamespaceReference] std @ ./Code2/src/main.cpp[L.39,C.37]
          [CallExpression] RecursiveCallTest @ ./Code2/src/main.cpp[L.41,C.9]
            [UnexposedExpression] RecursiveCallTest @ ./Code2/src/main.cpp[L.41,C.9]
              [DeclarationReferenceExpression] RecursiveCallTest @ ./Code2/src/main.cpp[L.41,C.9]
            [BinaryOperator]  @ ./Code2/src/main.cpp[L.41,C.27]
              [UnexposedExpression] i @ ./Code2/src/main.cpp[L.41,C.27]
                [DeclarationReferenceExpression] i @ ./Code2/src/main.cpp[L.41,C.27]
              [IntegerLiteral]  @ ./Code2/src/main.cpp[L.41,C.31]
AST Dump:
[TranslationUnit] ./Code2/src/TestClass.cpp @ 
  [Namespace] root @ ./Code2/inc/TestClass.h[L.3,C.11]
    [Namespace] sub1 @ ./Code2/inc/TestClass.h[L.5,C.15]
      [Namespace] sub2 @ ./Code2/inc/TestClass.h[L.7,C.19]
        [ClassDeclaration] TestClass @ ./Code2/inc/TestClass.h[L.9,C.19]
          [LastDeclaration]  @ ./Code2/inc/TestClass.h[L.11,C.13]
          [Constructor] TestClass @ ./Code2/inc/TestClass.h[L.12,C.17]
          [Destructor] ~TestClass @ ./Code2/inc/TestClass.h[L.13,C.17]
          [CXXMethod] PublicMethod @ ./Code2/inc/TestClass.h[L.15,C.22]
            [ParmDeclaration] a @ ./Code2/inc/TestClass.h[L.15,C.39]
            [ParmDeclaration] b @ ./Code2/inc/TestClass.h[L.15,C.46]
          [CXXMethod] GetA @ ./Code2/inc/TestClass.h[L.17,C.21]
            [CompoundStatement]  @ ./Code2/inc/TestClass.h[L.17,C.28]
              [ReturnStatement]  @ ./Code2/inc/TestClass.h[L.17,C.30]
                [UnexposedExpression] m_a @ ./Code2/inc/TestClass.h[L.17,C.43]
                  [MemberReferenceExpression] m_a @ ./Code2/inc/TestClass.h[L.17,C.43]
                    [CXXThisExpression]  @ ./Code2/inc/TestClass.h[L.17,C.37]
          [CXXMethod] GetB @ ./Code2/inc/TestClass.h[L.18,C.21]
            [CompoundStatement]  @ ./Code2/inc/TestClass.h[L.18,C.28]
              [ReturnStatement]  @ ./Code2/inc/TestClass.h[L.18,C.30]
                [UnexposedExpression] m_b @ ./Code2/inc/TestClass.h[L.18,C.43]
                  [MemberReferenceExpression] m_b @ ./Code2/inc/TestClass.h[L.18,C.43]
                    [CXXThisExpression]  @ ./Code2/inc/TestClass.h[L.18,C.37]
          [CXXMethod] GetResult @ ./Code2/inc/TestClass.h[L.19,C.21]
            [CompoundStatement]  @ ./Code2/inc/TestClass.h[L.19,C.33]
              [ReturnStatement]  @ ./Code2/inc/TestClass.h[L.19,C.35]
                [UnexposedExpression] m_result @ ./Code2/inc/TestClass.h[L.19,C.48]
                  [MemberReferenceExpression] m_result @ ./Code2/inc/TestClass.h[L.19,C.48]
                    [CXXThisExpression]  @ ./Code2/inc/TestClass.h[L.19,C.42]
          [CXXMethod] SetA @ ./Code2/inc/TestClass.h[L.21,C.22]
            [ParmDeclaration] a @ ./Code2/inc/TestClass.h[L.21,C.31]
            [CompoundStatement]  @ ./Code2/inc/TestClass.h[L.21,C.34]
              [BinaryOperator]  @ ./Code2/inc/TestClass.h[L.21,C.36]
                [MemberReferenceExpression] m_a @ ./Code2/inc/TestClass.h[L.21,C.42]
                  [CXXThisExpression]  @ ./Code2/inc/TestClass.h[L.21,C.36]
                [UnexposedExpression] a @ ./Code2/inc/TestClass.h[L.21,C.48]
                  [DeclarationReferenceExpression] a @ ./Code2/inc/TestClass.h[L.21,C.48]
          [CXXMethod] SetB @ ./Code2/inc/TestClass.h[L.22,C.22]
            [ParmDeclaration] b @ ./Code2/inc/TestClass.h[L.22,C.31]
            [CompoundStatement]  @ ./Code2/inc/TestClass.h[L.22,C.34]
              [BinaryOperator]  @ ./Code2/inc/TestClass.h[L.22,C.36]
                [MemberReferenceExpression] m_b @ ./Code2/inc/TestClass.h[L.22,C.42]
                  [CXXThisExpression]  @ ./Code2/inc/TestClass.h[L.22,C.36]
                [UnexposedExpression] b @ ./Code2/inc/TestClass.h[L.22,C.48]
                  [DeclarationReferenceExpression] b @ ./Code2/inc/TestClass.h[L.22,C.48]
          [CXXMethod] SetResult @ ./Code2/inc/TestClass.h[L.23,C.22]
            [ParmDeclaration] result @ ./Code2/inc/TestClass.h[L.23,C.36]
            [CompoundStatement]  @ ./Code2/inc/TestClass.h[L.23,C.44]
              [BinaryOperator]  @ ./Code2/inc/TestClass.h[L.23,C.46]
                [MemberReferenceExpression] m_result @ ./Code2/inc/TestClass.h[L.23,C.52]
                  [CXXThisExpression]  @ ./Code2/inc/TestClass.h[L.23,C.46]
                [UnexposedExpression] result @ ./Code2/inc/TestClass.h[L.23,C.63]
                  [DeclarationReferenceExpression] result @ ./Code2/inc/TestClass.h[L.23,C.63]
          [LastDeclaration]  @ ./Code2/inc/TestClass.h[L.25,C.13]
          [CXXMethod] PrivateMethod @ ./Code2/inc/TestClass.h[L.26,C.21]
            [ParmDeclaration] a @ ./Code2/inc/TestClass.h[L.26,C.39]
            [ParmDeclaration] b @ ./Code2/inc/TestClass.h[L.26,C.46]
          [LastDeclaration]  @ ./Code2/inc/TestClass.h[L.28,C.13]
          [FieldDeclaration] m_a @ ./Code2/inc/TestClass.h[L.29,C.21]
          [FieldDeclaration] m_b @ ./Code2/inc/TestClass.h[L.30,C.21]
          [FieldDeclaration] m_result @ ./Code2/inc/TestClass.h[L.31,C.21]
  [Namespace] root @ ./Code2/src/TestClass.cpp[L.3,C.11]
    [Namespace] sub1 @ ./Code2/src/TestClass.cpp[L.5,C.15]
      [Namespace] sub2 @ ./Code2/src/TestClass.cpp[L.7,C.19]
        [Constructor] TestClass @ ./Code2/src/TestClass.cpp[L.9,C.24]
          [TypeReference] class root::sub1::sub2::TestClass @ ./Code2/src/TestClass.cpp[L.9,C.13]
          [MemberReference] m_a @ ./Code2/src/TestClass.cpp[L.10,C.19]
          [IntegerLiteral]  @ ./Code2/src/TestClass.cpp[L.10,C.23]
          [MemberReference] m_b @ ./Code2/src/TestClass.cpp[L.11,C.19]
          [IntegerLiteral]  @ ./Code2/src/TestClass.cpp[L.11,C.23]
          [MemberReference] m_result @ ./Code2/src/TestClass.cpp[L.12,C.19]
          [IntegerLiteral]  @ ./Code2/src/TestClass.cpp[L.12,C.28]
          [CompoundStatement]  @ ./Code2/src/TestClass.cpp[L.13,C.13]
        [Destructor] ~TestClass @ ./Code2/src/TestClass.cpp[L.16,C.24]
          [TypeReference] class root::sub1::sub2::TestClass @ ./Code2/src/TestClass.cpp[L.16,C.13]
          [CompoundStatement]  @ ./Code2/src/TestClass.cpp[L.17,C.13]
        [CXXMethod] PublicMethod @ ./Code2/src/TestClass.cpp[L.21,C.29]
          [TypeReference] class root::sub1::sub2::TestClass @ ./Code2/src/TestClass.cpp[L.21,C.18]
          [ParmDeclaration] a @ ./Code2/src/TestClass.cpp[L.21,C.46]
          [ParmDeclaration] b @ ./Code2/src/TestClass.cpp[L.21,C.53]
          [CompoundStatement]  @ ./Code2/src/TestClass.cpp[L.22,C.13]
            [DeclarationStatement]  @ ./Code2/src/TestClass.cpp[L.23,C.17]
              [VarDeclaration] result @ ./Code2/src/TestClass.cpp[L.23,C.21]
                [CallExpression] PrivateMethod @ ./Code2/src/TestClass.cpp[L.23,C.30]
                  [MemberReferenceExpression] PrivateMethod @ ./Code2/src/TestClass.cpp[L.23,C.36]
                    [CXXThisExpression]  @ ./Code2/src/TestClass.cpp[L.23,C.30]
                  [UnexposedExpression] a @ ./Code2/src/TestClass.cpp[L.23,C.50]
                    [DeclarationReferenceExpression] a @ ./Code2/src/TestClass.cpp[L.23,C.50]
                  [UnexposedExpression] b @ ./Code2/src/TestClass.cpp[L.23,C.53]
                    [DeclarationReferenceExpression] b @ ./Code2/src/TestClass.cpp[L.23,C.53]
            [CallExpression] SetResult @ ./Code2/src/TestClass.cpp[L.25,C.17]
              [MemberReferenceExpression] SetResult @ ./Code2/src/TestClass.cpp[L.25,C.23]
                [CXXThisExpression]  @ ./Code2/src/TestClass.cpp[L.25,C.17]
              [UnexposedExpression] result @ ./Code2/src/TestClass.cpp[L.25,C.33]
                [DeclarationReferenceExpression] result @ ./Code2/src/TestClass.cpp[L.25,C.33]
        [CXXMethod] PrivateMethod @ ./Code2/src/TestClass.cpp[L.28,C.28]
          [TypeReference] class root::sub1::sub2::TestClass @ ./Code2/src/TestClass.cpp[L.28,C.17]
          [ParmDeclaration] a @ ./Code2/src/TestClass.cpp[L.28,C.46]
          [ParmDeclaration] b @ ./Code2/src/TestClass.cpp[L.28,C.53]
          [CompoundStatement]  @ ./Code2/src/TestClass.cpp[L.29,C.13]
            [CallExpression] SetA @ ./Code2/src/TestClass.cpp[L.30,C.17]
              [MemberReferenceExpression] SetA @ ./Code2/src/TestClass.cpp[L.30,C.23]
                [CXXThisExpression]  @ ./Code2/src/TestClass.cpp[L.30,C.17]
              [UnexposedExpression] a @ ./Code2/src/TestClass.cpp[L.30,C.28]
                [DeclarationReferenceExpression] a @ ./Code2/src/TestClass.cpp[L.30,C.28]
            [CallExpression] SetB @ ./Code2/src/TestClass.cpp[L.31,C.17]
              [MemberReferenceExpression] SetB @ ./Code2/src/TestClass.cpp[L.31,C.23]
                [CXXThisExpression]  @ ./Code2/src/TestClass.cpp[L.31,C.17]
              [UnexposedExpression] b @ ./Code2/src/TestClass.cpp[L.31,C.28]
                [DeclarationReferenceExpression] b @ ./Code2/src/TestClass.cpp[L.31,C.28]
            [ReturnStatement]  @ ./Code2/src/TestClass.cpp[L.33,C.17]
              [BinaryOperator]  @ ./Code2/src/TestClass.cpp[L.33,C.24]
                [UnexposedExpression] m_a @ ./Code2/src/TestClass.cpp[L.33,C.30]
                  [MemberReferenceExpression] m_a @ ./Code2/src/TestClass.cpp[L.33,C.30]
                    [CXXThisExpression]  @ ./Code2/src/TestClass.cpp[L.33,C.24]
                [UnexposedExpression] m_b @ ./Code2/src/TestClass.cpp[L.33,C.42]
                  [MemberReferenceExpression] m_b @ ./Code2/src/TestClass.cpp[L.33,C.42]
                    [CXXThisExpression]  @ ./Code2/src/TestClass.cpp[L.33,C.36]

--------------------------------------
Invokation Tree:
int root::sub1::sub2::TestClass::GetA() @ C:\Works\Test\Code2\inc\TestClass.h[L.17,C.21]

int root::sub1::sub2::TestClass::GetB() @ C:\Works\Test\Code2\inc\TestClass.h[L.18,C.21]

int root::sub1::sub2::TestClass::GetResult() @ C:\Works\Test\Code2\inc\TestClass.h[L.19,C.21]

void root::sub1::sub2::TestClass::SetA(int) @ C:\Works\Test\Code2\inc\TestClass.h[L.21,C.22]

void root::sub1::sub2::TestClass::SetB(int) @ C:\Works\Test\Code2\inc\TestClass.h[L.22,C.22]

void root::sub1::sub2::TestClass::SetResult(int) @ C:\Works\Test\Code2\inc\TestClass.h[L.23,C.22]

main() @ C:\Works\Test\Code2\src\main.cpp[L.7,C.5]
  root::sub1::sub2::TestClass::TestClass() @ C:\Works\Test\Code2\src\main.cpp[L.9,C.33]
  void root::sub1::sub2::TestClass::SetA(int) @ C:\Works\Test\Code2\src\main.cpp[L.14,C.5]
  void root::sub1::sub2::TestClass::SetB(int) @ C:\Works\Test\Code2\src\main.cpp[L.16,C.5]
  std::basic_ostream&lt;char, std::char_traits&lt;char&gt; &gt; &amp; std::basic_ostream::operator&lt;&lt;(std::basic_ostream&lt;char, std::char_traits&lt;char&gt; &gt; &amp;(*)(std::basic_ostream&lt;char, std::char_traits&lt;char&gt; &gt; &amp;) __attribute__((cdecl))) @ C:\Works\Test\Code2\src\main.cpp[L.18,C.5]
     &lt;Behavior Definition Not Found...&gt;
  std::basic_ostream&lt;char, std::char_traits&lt;char&gt; &gt; &amp; std::basic_ostream::operator&lt;&lt;(int) @ C:\Works\Test\Code2\src\main.cpp[L.18,C.5]
     &lt;Behavior Definition Not Found...&gt;
  std::operator&lt;&lt;&lt;&gt;(basic_ostream&lt;char, std::char_traits&lt;char&gt; &gt; &amp;, const char *) @ C:\Works\Test\Code2\src\main.cpp[L.18,C.5]
     &lt;Behavior Definition Not Found...&gt;
  int root::sub1::sub2::TestClass::GetA() @ C:\Works\Test\Code2\src\main.cpp[L.18,C.28]
  std::basic_ostream&lt;char, std::char_traits&lt;char&gt; &gt; &amp; std::basic_ostream::operator&lt;&lt;(std::basic_ostream&lt;char, std::char_traits&lt;char&gt; &gt; &amp;(*)(std::basic_ostream&lt;char, std::char_traits&lt;char&gt; &gt; &amp;) __attribute__((cdecl))) @ C:\Works\Test\Code2\src\main.cpp[L.20,C.5]
     &lt;Behavior Definition Not Found...&gt;
  std::basic_ostream&lt;char, std::char_traits&lt;char&gt; &gt; &amp; std::basic_ostream::operator&lt;&lt;(int) @ C:\Works\Test\Code2\src\main.cpp[L.20,C.5]
     &lt;Behavior Definition Not Found...&gt;
  std::operator&lt;&lt;&lt;&gt;(basic_ostream&lt;char, std::char_traits&lt;char&gt; &gt; &amp;, const char *) @ C:\Works\Test\Code2\src\main.cpp[L.20,C.5]
     &lt;Behavior Definition Not Found...&gt;
  int root::sub1::sub2::TestClass::GetB() @ C:\Works\Test\Code2\src\main.cpp[L.20,C.28]
  void root::sub1::sub2::TestClass::PublicMethod(int, int) @ C:\Works\Test\Code2\src\main.cpp[L.22,C.5]
    int root::sub1::sub2::TestClass::PrivateMethod(int, int) @ C:\Works\Test\Code2\src\TestClass.cpp[L.23,C.30]
      void root::sub1::sub2::TestClass::SetA(int) @ C:\Works\Test\Code2\src\TestClass.cpp[L.30,C.17]
      void root::sub1::sub2::TestClass::SetB(int) @ C:\Works\Test\Code2\src\TestClass.cpp[L.31,C.17]
    void root::sub1::sub2::TestClass::SetResult(int) @ C:\Works\Test\Code2\src\TestClass.cpp[L.25,C.17]
  int root::sub1::sub2::TestClass::GetResult() @ C:\Works\Test\Code2\src\main.cpp[L.24,C.14]
  std::basic_ostream&lt;char, std::char_traits&lt;char&gt; &gt; &amp; std::basic_ostream::operator&lt;&lt;(std::basic_ostream&lt;char, std::char_traits&lt;char&gt; &gt; &amp;(*)(std::basic_ostream&lt;char, std::char_traits&lt;char&gt; &gt; &amp;) __attribute__((cdecl))) @ C:\Works\Test\Code2\src\main.cpp[L.26,C.5]
     &lt;Behavior Definition Not Found...&gt;
  std::basic_ostream&lt;char, std::char_traits&lt;char&gt; &gt; &amp; std::basic_ostream::operator&lt;&lt;(int) @ C:\Works\Test\Code2\src\main.cpp[L.26,C.5]
     &lt;Behavior Definition Not Found...&gt;
  std::operator&lt;&lt;&lt;&gt;(basic_ostream&lt;char, std::char_traits&lt;char&gt; &gt; &amp;, const char *) @ C:\Works\Test\Code2\src\main.cpp[L.26,C.5]
     &lt;Behavior Definition Not Found...&gt;
  RecursiveCallTest(int) @ C:\Works\Test\Code2\src\main.cpp[L.28,C.5]
    std::basic_ostream&lt;char, std::char_traits&lt;char&gt; &gt; &amp; std::basic_ostream::operator&lt;&lt;(std::basic_ostream&lt;char, std::char_traits&lt;char&gt; &gt; &amp;(*)(std::basic_ostream&lt;char, std::char_traits&lt;char&gt; &gt; &amp;) __attribute__((cdecl))) @ C:\Works\Test\Code2\src\main.cpp[L.39,C.9]
       &lt;Behavior Definition Not Found...&gt;
    std::basic_ostream&lt;char, std::char_traits&lt;char&gt; &gt; &amp; std::basic_ostream::operator&lt;&lt;(int) @ C:\Works\Test\Code2\src\main.cpp[L.39,C.9]
       &lt;Behavior Definition Not Found...&gt;
    std::operator&lt;&lt;&lt;&gt;(basic_ostream&lt;char, std::char_traits&lt;char&gt; &gt; &amp;, const char *) @ C:\Works\Test\Code2\src\main.cpp[L.39,C.9]
       &lt;Behavior Definition Not Found...&gt;
    RecursiveCallTest(int) @ C:\Works\Test\Code2\src\main.cpp[L.41,C.9]
       &lt;Recursive Call...&gt;

RecursiveCallTest(int) @ C:\Works\Test\Code2\src\main.cpp[L.31,C.6]
  std::basic_ostream&lt;char, std::char_traits&lt;char&gt; &gt; &amp; std::basic_ostream::operator&lt;&lt;(std::basic_ostream&lt;char, std::char_traits&lt;char&gt; &gt; &amp;(*)(std::basic_ostream&lt;char, std::char_traits&lt;char&gt; &gt; &amp;) __attribute__((cdecl))) @ C:\Works\Test\Code2\src\main.cpp[L.39,C.9]
     &lt;Behavior Definition Not Found...&gt;
  std::basic_ostream&lt;char, std::char_traits&lt;char&gt; &gt; &amp; std::basic_ostream::operator&lt;&lt;(int) @ C:\Works\Test\Code2\src\main.cpp[L.39,C.9]
     &lt;Behavior Definition Not Found...&gt;
  std::operator&lt;&lt;&lt;&gt;(basic_ostream&lt;char, std::char_traits&lt;char&gt; &gt; &amp;, const char *) @ C:\Works\Test\Code2\src\main.cpp[L.39,C.9]
     &lt;Behavior Definition Not Found...&gt;
  RecursiveCallTest(int) @ C:\Works\Test\Code2\src\main.cpp[L.41,C.9]
     &lt;Recursive Call...&gt;

root::sub1::sub2::TestClass::TestClass() @ C:\Works\Test\Code2\src\TestClass.cpp[L.9,C.24]

root::sub1::sub2::TestClass::~TestClass() @ C:\Works\Test\Code2\src\TestClass.cpp[L.16,C.24]

void root::sub1::sub2::TestClass::PublicMethod(int, int) @ C:\Works\Test\Code2\src\TestClass.cpp[L.21,C.29]
  int root::sub1::sub2::TestClass::PrivateMethod(int, int) @ C:\Works\Test\Code2\src\TestClass.cpp[L.23,C.30]
    void root::sub1::sub2::TestClass::SetA(int) @ C:\Works\Test\Code2\src\TestClass.cpp[L.30,C.17]
    void root::sub1::sub2::TestClass::SetB(int) @ C:\Works\Test\Code2\src\TestClass.cpp[L.31,C.17]
  void root::sub1::sub2::TestClass::SetResult(int) @ C:\Works\Test\Code2\src\TestClass.cpp[L.25,C.17]

int root::sub1::sub2::TestClass::PrivateMethod(int, int) @ C:\Works\Test\Code2\src\TestClass.cpp[L.28,C.28]
  void root::sub1::sub2::TestClass::SetA(int) @ C:\Works\Test\Code2\src\TestClass.cpp[L.30,C.17]
  void root::sub1::sub2::TestClass::SetB(int) @ C:\Works\Test\Code2\src\TestClass.cpp[L.31,C.17]


--------------------------------------
Cross References:
root::sub1::sub2::TestClass::TestClass()
  [Call] @ C:\Works\Test\Code2\src\main.cpp[L.9,C.33]
  [Declaration] @ C:\Works\Test\Code2\inc\TestClass.h[L.12,C.17]
  [Definition] @ C:\Works\Test\Code2\src\TestClass.cpp[L.9,C.24]

root::sub1::sub2::TestClass::~TestClass()
  [Declaration] @ C:\Works\Test\Code2\inc\TestClass.h[L.13,C.17]
  [Definition] @ C:\Works\Test\Code2\src\TestClass.cpp[L.16,C.24]

void root::sub1::sub2::TestClass::PublicMethod(int, int)
  [Call] @ C:\Works\Test\Code2\src\main.cpp[L.22,C.5]
  [Declaration] @ C:\Works\Test\Code2\inc\TestClass.h[L.15,C.22]
  [Definition] @ C:\Works\Test\Code2\src\TestClass.cpp[L.21,C.29]

int root::sub1::sub2::TestClass::GetA()
  [Call] @ C:\Works\Test\Code2\src\main.cpp[L.18,C.28]
  [Definition] @ C:\Works\Test\Code2\inc\TestClass.h[L.17,C.21]

int root::sub1::sub2::TestClass::GetB()
  [Call] @ C:\Works\Test\Code2\src\main.cpp[L.20,C.28]
  [Definition] @ C:\Works\Test\Code2\inc\TestClass.h[L.18,C.21]

int root::sub1::sub2::TestClass::GetResult()
  [Call] @ C:\Works\Test\Code2\src\main.cpp[L.24,C.14]
  [Definition] @ C:\Works\Test\Code2\inc\TestClass.h[L.19,C.21]

void root::sub1::sub2::TestClass::SetA(int)
  [Call] @ C:\Works\Test\Code2\src\main.cpp[L.14,C.5]
  [Call] @ C:\Works\Test\Code2\src\TestClass.cpp[L.30,C.17]
  [Definition] @ C:\Works\Test\Code2\inc\TestClass.h[L.21,C.22]

void root::sub1::sub2::TestClass::SetB(int)
  [Call] @ C:\Works\Test\Code2\src\main.cpp[L.16,C.5]
  [Call] @ C:\Works\Test\Code2\src\TestClass.cpp[L.31,C.17]
  [Definition] @ C:\Works\Test\Code2\inc\TestClass.h[L.22,C.22]

void root::sub1::sub2::TestClass::SetResult(int)
  [Call] @ C:\Works\Test\Code2\src\TestClass.cpp[L.25,C.17]
  [Definition] @ C:\Works\Test\Code2\inc\TestClass.h[L.23,C.22]

int root::sub1::sub2::TestClass::PrivateMethod(int, int)
  [Call] @ C:\Works\Test\Code2\src\TestClass.cpp[L.23,C.30]
  [Declaration] @ C:\Works\Test\Code2\inc\TestClass.h[L.26,C.21]
  [Definition] @ C:\Works\Test\Code2\src\TestClass.cpp[L.28,C.28]

RecursiveCallTest(int)
  [Call] @ C:\Works\Test\Code2\src\main.cpp[L.28,C.5]
  [Call] @ C:\Works\Test\Code2\src\main.cpp[L.41,C.9]
  [Declaration] @ C:\Works\Test\Code2\src\main.cpp[L.5,C.6]
  [Definition] @ C:\Works\Test\Code2\src\main.cpp[L.31,C.6]

main()
  [Definition] @ C:\Works\Test\Code2\src\main.cpp[L.7,C.5]

std::basic_ostream&lt;char, std::char_traits&lt;char&gt; &gt; &amp; std::basic_ostream::operator&lt;&lt;(std::basic_ostream&lt;char, std::char_traits&lt;char&gt; &gt; &amp;(*)(std::basic_ostream&lt;char, std::char_traits&lt;char&gt; &gt; &amp;) __attribute__((cdecl)))
  [Call] @ C:\Works\Test\Code2\src\main.cpp[L.18,C.5]
  [Call] @ C:\Works\Test\Code2\src\main.cpp[L.20,C.5]
  [Call] @ C:\Works\Test\Code2\src\main.cpp[L.26,C.5]
  [Call] @ C:\Works\Test\Code2\src\main.cpp[L.39,C.9]

std::basic_ostream&lt;char, std::char_traits&lt;char&gt; &gt; &amp; std::basic_ostream::operator&lt;&lt;(int)
  [Call] @ C:\Works\Test\Code2\src\main.cpp[L.18,C.5]
  [Call] @ C:\Works\Test\Code2\src\main.cpp[L.20,C.5]
  [Call] @ C:\Works\Test\Code2\src\main.cpp[L.26,C.5]
  [Call] @ C:\Works\Test\Code2\src\main.cpp[L.39,C.9]

std::operator&lt;&lt;&lt;&gt;(basic_ostream&lt;char, std::char_traits&lt;char&gt; &gt; &amp;, const char *)
  [Call] @ C:\Works\Test\Code2\src\main.cpp[L.18,C.5]
  [Call] @ C:\Works\Test\Code2\src\main.cpp[L.20,C.5]
  [Call] @ C:\Works\Test\Code2\src\main.cpp[L.26,C.5]
  [Call] @ C:\Works\Test\Code2\src\main.cpp[L.39,C.9]
</code></pre></div>
</div>

<h4>
<span id="あとがき" class="fragment"></span><a href="#%E3%81%82%E3%81%A8%E3%81%8C%E3%81%8D"><i class="fa fa-link"></i></a>あとがき</h4>

<p>ClangNetを使って以下の情報を出力する機能を実現するサンプルを紹介しました。</p>

<ol>
<li> 関数コールツリー</li>
<li>関数クロスリファレンス(宣言/定義/コール)情報</li>
</ol>

<p>作成したサンプルの全ソースはGitHubにおいてあります。<br>
GitHub : <a href="https://github.com/an-embedded-engineer/ClangNet" rel="nofollow noopener" target="_blank">Link</a></p>

<p>今回作成したサンプルには、テンプレート関数など対応していないケースがあるので、次回はそれらに対応できるように拡張していきたいと思います。</p>
</div></div></section><div class="css-1yzj1fm"><div class="css-1uv1qiv"><span class="fa fa-twitter"></span></div><div class="css-1uv1qiv"><span class="fa fa-facebook"></span></div></div><div class="apm-Content"><div class="apm-Content_title">Why not register and get more from Qiita?</div><ol class="apm-Content_list"><li>We will deliver articles that match you<div class="description">By following users and tags, you can catch up information on technical fields that you are interested in as a whole</div></li><li>you can read useful information later efficiently<div class="description">By &quot;stocking&quot; the articles you like, you can search right away</div></li><div><a class="apm-Content_help" href="https://help.qiita.com/ja/articles/qiita-login-user" target="_blank"><i class="fa fa-fw fa-arrow-circle-right"></i>What you can do with signing up</a></div></ol><a href="/signup?callback_action=login_or_signup&amp;redirect_to=%2Fan-embedded-engineer%2Fitems%2F8f202a8a8acbabc08d5f&amp;realm=qiita" class="apm-Content_button apm-Content_button-signup">Sign up</a><a href="/login?callback_action=login_or_signup&amp;redirect_to=%2Fan-embedded-engineer%2Fitems%2F8f202a8a8acbabc08d5f&amp;realm=qiita" class="apm-Content_button apm-Content_button-signin">Login</a></div></div><div class="css-helsa7"></div></div></div></div><div class="css-109dbrr"><div class="css-5jpx49"><div class="css-mnxgyc"><button class=" css-1vlpknv"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/an-embedded-engineer/items/8f202a8a8acbabc08d5f/likers" class="css-1iupg5d">4</a></div><div class="css-fsjkhv"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-1b17vb0">3</span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-7i7f4d"><div class="css-1gj7nt">Improve article</div><a href="/drafts/8f202a8a8acbabc08d5f/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/an-embedded-engineer/items/8f202a8a8acbabc08d5f/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/an-embedded-engineer/items/8f202a8a8acbabc08d5f/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/an-embedded-engineer/items/8f202a8a8acbabc08d5f/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/an-embedded-engineer/items/8f202a8a8acbabc08d5f.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="PersonalArticlePage" data-dom-id="PersonalArticlePage-react-component-52d8b2f4-a622-4585-b9b0-fb065539fe57">{"authorAnalyticsTrackingId":null,"organizationAnalyticsTrackingId":null}</script>
      
<footer id="globalFooter" class="st-Footer"><div class="st-Footer_container"><div class="st-Footer_start"><div class="st-Footer_logo"><svg viewbox="0 0 426.57 130" xmlns="http://www.w3.org/2000/svg"><circle cx="167.08" cy="21.4" r="12.28" /><path d="M250.81 29.66h23.48v18.9h-23.48z" /><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z" /><circle cx="216.33" cy="21.4" r="12.28" /></svg></div><div class="st-Footer_catchcopy">How developers code is here.</div><div class="st-Footer_socials"><a class="fa fa-twitter" href="https://twitter.com/qiita"></a><a class="fa fa-facebook-square" href="https://www.facebook.com/qiita/"></a></div></div><div class="st-Footer_end"><div class="st-Footer_qiita"><div class="st-Footer_label">Qiita</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="/about">About</a><a href="/terms">Terms</a><a href="/privacy">Privacy</a><a target="_blank" href="http://help.qiita.com/ja/articles/qiita-community-guideline">Guideline</a><a target="_blank" href="https://help.qiita.com/ja/articles/others-brand-guideline">Design Guideline</a></div><div class="st-Footer_column"><a href="/release-notes">Release</a><a href="/api/v2/docs">API</a><a href="/feedback/new">ご意見</a><a href="https://help.qiita.com">Help</a><a target="_blank" href="https://qiita.com/ads?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Advertisement</a></div></div></div><div class="st-Footer_increments"><div class="st-Footer_label">Increments</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="https://increments.co.jp/company/">About</a><a href="https://increments.co.jp/jobs/">採用情報</a><a href="https://blog.qiita.com">Blog</a></div><div class="st-Footer_column"><a href="https://teams.qiita.com/">Qiita Team</a><a href="https://jobs.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Jobs</a><a href="https://zine.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Zine</a></div></div></div></div></div><div class="st-Footer_copyright">© 2011-2021 Increments Inc.</div></footer><div id="Snackbar-react-component-480ceec3-4487-4689-a5e4-61ebf4e7cd87"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="Snackbar" data-dom-id="Snackbar-react-component-480ceec3-4487-4689-a5e4-61ebf4e7cd87">{}</script>
      
<div id="LoginModal-react-component-8581be12-dc64-4245-bb9b-6a318284c68c"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="LoginModal" data-dom-id="LoginModal-react-component-8581be12-dc64-4245-bb9b-6a318284c68c">{}</script>
      
<div id="StockModal-react-component-b2dc4da8-2466-478e-af74-39682c000d19"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="StockModal" data-dom-id="StockModal-react-component-b2dc4da8-2466-478e-af74-39682c000d19">{}</script>
      
</div><div id="dataContainer" style="display: none;" data-config="{&quot;actionPath&quot;:&quot;public/items#show&quot;,&quot;settings&quot;:{&quot;analyticsTrackingId&quot;:&quot;UA-24675221-12&quot;,&quot;assetsMap&quot;:{},&quot;csrfToken&quot;:&quot;qh2GE248NikAjqStOfHooTv+P9bYGwxU39Y5N7aEXwJ5m/ZITqtoyCxMEu2sJppLlQJuOoe5cLQ1Vj4LDp1bzg==&quot;,&quot;locale&quot;:&quot;en&quot;},&quot;currentUser&quot;:null}" /></body></html><script type="application/json" data-js-react-on-rails-store="AppStoreWithReactOnRails">{"snackbar":{"type":"","body":"","isActive":false},"article":{"article":{"body":"\n\u003ch4\u003e\n\u003cspan id=\"まえがき\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%BE%E3%81%88%E3%81%8C%E3%81%8D\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eまえがき\u003c/h4\u003e\n\n\u003cp\u003e今回はClangNet(libclangの.NET(C#) Binding)を使った実用的な構文解析のサンプルを作成してみます。\u003cbr\u003e\n今回作成するサンプルでは、以下の2つの情報を出力する機能を実装します。\u003c/p\u003e\n\n\u003col\u003e\n\u003cli\u003e 関数コールツリー\u003c/li\u003e\n\u003cli\u003e関数クロスリファレンス(宣言/定義/コール)情報\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003cp\u003eClangNetのインストールや使用方法については\u003ca href=\"https://qiita.com/an-embedded-engineer/items/2d6a7b59b0a312cf7f96\" id=\"reference-13623eb5378a3182da75\"\u003e過去記事\u003c/a\u003eをご参照ください。\u003c/p\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"解析対象ソース\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%A7%A3%E6%9E%90%E5%AF%BE%E8%B1%A1%E3%82%BD%E3%83%BC%E3%82%B9\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e解析対象ソース\u003c/h4\u003e\n\n\u003cp\u003eまずは、今回解析対象にするC/C++用ソースコードを用意します。\u003cbr\u003e\n今回は以下の種類の関数を解析対象にします。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eC形式の関数\u003c/li\u003e\n\u003cli\u003eクラスメンバ関数\u003c/li\u003e\n\u003cli\u003e標準ライブラリ関数\u003c/li\u003e\n\u003cli\u003e再帰関数\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e解析対象にするソースのサンプルを以下に示します。\u003cbr\u003e\n解析対象ソースの詳しい説明は割愛します。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"cpp\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eTestClass.h\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"cp\"\u003e#pragma once\n\u003c/span\u003e\n\u003cspan class=\"k\"\u003enamespace\u003c/span\u003e \u003cspan class=\"n\"\u003eroot\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003enamespace\u003c/span\u003e \u003cspan class=\"n\"\u003esub1\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003enamespace\u003c/span\u003e \u003cspan class=\"n\"\u003esub2\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eTestClass\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"nl\"\u003epublic:\u003c/span\u003e\n                \u003cspan class=\"n\"\u003eTestClass\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n                \u003cspan class=\"o\"\u003e~\u003c/span\u003e\u003cspan class=\"n\"\u003eTestClass\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n                \u003cspan class=\"kt\"\u003evoid\u003c/span\u003e \u003cspan class=\"n\"\u003ePublicMethod\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003ea\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003eb\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n                \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003eGetA\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003em_a\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n                \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003eGetB\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003em_b\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n                \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003eGetResult\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003em_result\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n                \u003cspan class=\"kt\"\u003evoid\u003c/span\u003e \u003cspan class=\"n\"\u003eSetA\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003ea\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003em_a\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ea\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n                \u003cspan class=\"kt\"\u003evoid\u003c/span\u003e \u003cspan class=\"n\"\u003eSetB\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003eb\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003em_b\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eb\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n                \u003cspan class=\"kt\"\u003evoid\u003c/span\u003e \u003cspan class=\"n\"\u003eSetResult\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003em_result\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n            \u003cspan class=\"nl\"\u003eprivate:\u003c/span\u003e\n                \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003ePrivateMethod\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003ea\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003eb\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n            \u003cspan class=\"nl\"\u003eprivate:\u003c/span\u003e\n                \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003em_a\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n                \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003em_b\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n                \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003em_result\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e};\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"cpp\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eTestClass.cpp\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"cp\"\u003e#include \"TestClass.h\"\n\u003c/span\u003e\n\u003cspan class=\"k\"\u003enamespace\u003c/span\u003e \u003cspan class=\"n\"\u003eroot\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003enamespace\u003c/span\u003e \u003cspan class=\"n\"\u003esub1\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003enamespace\u003c/span\u003e \u003cspan class=\"n\"\u003esub2\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eTestClass\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eTestClass\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n                \u003cspan class=\"o\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003em_a\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003em_b\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003em_result\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n            \u003cspan class=\"n\"\u003eTestClass\u003c/span\u003e\u003cspan class=\"o\"\u003e::~\u003c/span\u003e\u003cspan class=\"n\"\u003eTestClass\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\n            \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n            \u003cspan class=\"kt\"\u003evoid\u003c/span\u003e \u003cspan class=\"n\"\u003eTestClass\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003ePublicMethod\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003ea\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003eb\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003eresult\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003ePrivateMethod\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ea\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eb\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n                \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003eSetResult\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n            \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003eTestClass\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003ePrivateMethod\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003ea\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003eb\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003eSetA\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ea\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n                \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003eSetB\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eb\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n                \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003em_a\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003em_b\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"cpp\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003emain.cpp\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"cp\"\u003e#include \u0026lt;iostream\u0026gt;\n\u003c/span\u003e\n\u003cspan class=\"cp\"\u003e#include \"TestClass.h\"\n\u003c/span\u003e\n\u003cspan class=\"kt\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eRecursiveCallTest\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n\u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"nf\"\u003emain\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eroot\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003esub1\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003esub2\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eTestClass\u003c/span\u003e \u003cspan class=\"n\"\u003etest_instance\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003ea\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e10\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003eb\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e5\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003eresult\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"n\"\u003etest_instance\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eSetA\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ea\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n    \u003cspan class=\"n\"\u003etest_instance\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eSetB\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eb\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n    \u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003ecout\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e \u003cspan class=\"s\"\u003e\"a : \"\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e \u003cspan class=\"n\"\u003etest_instance\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eGetA\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e \u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eendl\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003ecout\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e \u003cspan class=\"s\"\u003e\"b : \"\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e \u003cspan class=\"n\"\u003etest_instance\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eGetB\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e \u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eendl\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"n\"\u003etest_instance\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ePublicMethod\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ea\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eb\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n    \u003cspan class=\"n\"\u003eresult\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003etest_instance\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eGetResult\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n    \u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003ecout\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e \u003cspan class=\"s\"\u003e\"result : \"\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e \u003cspan class=\"n\"\u003eresult\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e \u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eendl\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"n\"\u003eRecursiveCallTest\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e10\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"kt\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eRecursiveCallTest\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ei\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eelse\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003ecout\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e \u003cspan class=\"s\"\u003e\"i : \"\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e \u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eendl\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n        \u003cspan class=\"n\"\u003eRecursiveCallTest\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ei\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"構文解析サンプル\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%A7%8B%E6%96%87%E8%A7%A3%E6%9E%90%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e構文解析サンプル\u003c/h4\u003e\n\n\u003cp\u003e上記解析対象ソースに対して、関数コールツリー(Invokation Tree)と関数クロスリファレンス(Cross Reference)情報を生成して出力するサンプルを実装します。\u003c/p\u003e\n\n\u003ch5\u003e\n\u003cspan id=\"実現方法\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AE%9F%E7%8F%BE%E6%96%B9%E6%B3%95\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e実現方法\u003c/h5\u003e\n\n\u003cp\u003e実現方法を簡単に説明します。\u003cbr\u003e\n大きく分けると次の3ステップで実現します。\u003c/p\u003e\n\n\u003col\u003e\n\u003cli\u003eTranslation Unit(ソースファイル)解析\u003c/li\u003e\n\u003cli\u003eInvokation Tree(関数コールツリー)生成\u003c/li\u003e\n\u003cli\u003eCross Reference(関数参照情報)生成\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003cp\u003e1 のTranslation Unit(ソースファイル)解析では、ClangNetの構文解析機能を使って各ソースファイルのAST(抽象構文木)を辿っていき、以下のような情報を収集します。\u003c/p\u003e\n\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003e種別\u003c/th\u003e\n\u003cth\u003e意味\u003c/th\u003e\n\u003cth\u003e保持する情報\u003c/th\u003e\n\u003cth\u003e備考\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003eTranslation Unit情報\u003c/td\u003e\n\u003ctd\u003e変換対象(ソースファイル)ごとに保持する情報\u003c/td\u003e\n\u003ctd\u003eソースファイルパス、宣言・定義されているBehavior情報マップ\u003c/td\u003e\n\u003ctd\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eBehavior情報マップ\u003c/td\u003e\n\u003ctd\u003eBehavior(関数)の宣言・定義位置をキーにした、Behavior情報のハッシュマップ\u003c/td\u003e\n\u003ctd\u003eKey : 関数宣言・定義位置、Value : Behavior情報\u003c/td\u003e\n\u003ctd\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eBehavior情報\u003c/td\u003e\n\u003ctd\u003e\u003c/td\u003e\n\u003ctd\u003e種別(宣言/定義)、関数宣言、名前空間、ソース位置、呼び出している関数のInvokation情報リスト\u003c/td\u003e\n\u003ctd\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eInvokation情報\u003c/td\u003e\n\u003ctd\u003e\u003c/td\u003e\n\u003ctd\u003e呼び出している関数名、ソース位置、参照している関数宣言のBehavior情報\u003c/td\u003e\n\u003ctd\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\n\u003cp\u003e2 のInvokation Tree(関数コールツリー)生成では、1 で収集した情報をもとに、関数定義内で呼び出している関数を再帰的に辿っていきます。\u003cbr\u003e\n3 の Cross Reference(関数参照情報)生成では、1 で収集した情報をもとに、関数ごとに宣言箇所、定義箇所、呼び出し箇所のテーブルを生成します。\u003c/p\u003e\n\n\u003ch5\u003e\n\u003cspan id=\"1-translation-unitソースファイル解析\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#1-translation-unit%E3%82%BD%E3%83%BC%E3%82%B9%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E8%A7%A3%E6%9E%90\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e1. Translation Unit(ソースファイル)解析\u003c/h5\u003e\n\n\u003cp\u003eソースファイルからClangNetを使ってASTを解析し、必要な情報を収集します。\u003c/p\u003e\n\n\u003ch6\u003e\n\u003cspan id=\"1-1-データ構造定義\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#1-1-%E3%83%87%E3%83%BC%E3%82%BF%E6%A7%8B%E9%80%A0%E5%AE%9A%E7%BE%A9\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e1-1. データ構造定義\u003c/h6\u003e\n\n\u003cp\u003eまずは収集して構築するデータ構造を定義して行きます。\u003c/p\u003e\n\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003e型名\u003c/th\u003e\n\u003cth\u003eベース型\u003c/th\u003e\n\u003cth\u003e意味\u003c/th\u003e\n\u003cth\u003e保持する情報\u003c/th\u003e\n\u003cth\u003e備考\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003eAstNodeInfo\u003c/td\u003e\n\u003ctd\u003e-\u003c/td\u003e\n\u003ctd\u003eASTノードベース型\u003c/td\u003e\n\u003ctd\u003eソース位置情報\u003c/td\u003e\n\u003ctd\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eTranslationUnitInfo\u003c/td\u003e\n\u003ctd\u003eAstNodeInfo\u003c/td\u003e\n\u003ctd\u003e変換対象ソース情報\u003c/td\u003e\n\u003ctd\u003eファイルパス、BehaviorLocationMap\u003c/td\u003e\n\u003ctd\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eBehaviorInfo\u003c/td\u003e\n\u003ctd\u003eAstNodeInfo\u003c/td\u003e\n\u003ctd\u003e関数ノードベース型\u003c/td\u003e\n\u003ctd\u003e種別(宣言/定義)、関数名、パラメータ、名前空間、定義、ID、InvokationInfoリスト\u003c/td\u003e\n\u003ctd\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eClassBehaviorInfo\u003c/td\u003e\n\u003ctd\u003eBehaviorInfo\u003c/td\u003e\n\u003ctd\u003eクラスに所属する関数ノードベース型\u003c/td\u003e\n\u003ctd\u003eクラス名\u003c/td\u003e\n\u003ctd\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eConstructorInfo\u003c/td\u003e\n\u003ctd\u003eClassBehaviorInfo\u003c/td\u003e\n\u003ctd\u003eコンストラクタ情報\u003c/td\u003e\n\u003ctd\u003e-\u003c/td\u003e\n\u003ctd\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eDestructorInfo\u003c/td\u003e\n\u003ctd\u003eClassBehaviorInfo\u003c/td\u003e\n\u003ctd\u003eデストラクタ情報\u003c/td\u003e\n\u003ctd\u003e-\u003c/td\u003e\n\u003ctd\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eCppMethodInfo\u003c/td\u003e\n\u003ctd\u003eClassBehaviorInfo\u003c/td\u003e\n\u003ctd\u003eクラスメンバ関数情報\u003c/td\u003e\n\u003ctd\u003e返り値\u003c/td\u003e\n\u003ctd\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eFunctionInfo\u003c/td\u003e\n\u003ctd\u003eBehaviorInfo\u003c/td\u003e\n\u003ctd\u003eCスタイル関数情報\u003c/td\u003e\n\u003ctd\u003e返り値\u003c/td\u003e\n\u003ctd\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eInvokationInfo\u003c/td\u003e\n\u003ctd\u003eAstNodeInfo\u003c/td\u003e\n\u003ctd\u003e関数呼び出し情報\u003c/td\u003e\n\u003ctd\u003e関数名、ID、参照先関数BehaviorInfo\u003c/td\u003e\n\u003ctd\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eBehaviorLocationMap\u003c/td\u003e\n\u003ctd\u003eDictionary\u003c/td\u003e\n\u003ctd\u003eソース位置をキーとしたBehaviorInfoのDictionary\u003c/td\u003e\n\u003ctd\u003eKey : ソース位置 / Value : BehaviorInfo\u003c/td\u003e\n\u003ctd\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eTranslationUnitMap\u003c/td\u003e\n\u003ctd\u003eDictionary\u003c/td\u003e\n\u003ctd\u003eソースパスをキーとしたTranslationUnitInfoのDictionary\u003c/td\u003e\n\u003ctd\u003eKey : ソースパス / Value : TranslationUnitInfo\u003c/td\u003e\n\u003ctd\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\n\u003cp\u003eそれぞれのソースを示します。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"cs\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eAstNodeInfo.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eabstract\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eAstNodeInfo\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003eLocation\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003eAstNodeInfo\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eClangCursor\u003c/span\u003e \u003cspan class=\"n\"\u003ecursor\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"cm\"\u003e/* ソース上の位置情報を取得 */\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eLocation\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eGetLocation\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ecursor\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"nf\"\u003eGetLocation\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eClangCursor\u003c/span\u003e \u003cspan class=\"n\"\u003ecursor\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"cm\"\u003e/* カーソル位置を取得 */\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eloc\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ecursor\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eLocation\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n        \u003cspan class=\"cm\"\u003e/* カーソル位置がnullでない */\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eloc\u003c/span\u003e \u003cspan class=\"p\"\u003e!=\u003c/span\u003e \u003cspan class=\"k\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"cm\"\u003e/* ファイル位置を取得 */\u003c/span\u003e\n            \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003efloc\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eloc\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eFileLocation\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n            \u003cspan class=\"cm\"\u003e/* ファイル位置がnullでない */\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003efloc\u003c/span\u003e \u003cspan class=\"p\"\u003e!=\u003c/span\u003e \u003cspan class=\"k\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"cm\"\u003e/* ファイル情報がnullでない */\u003c/span\u003e\n                \u003cspan class=\"k\"\u003eif\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003efloc\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eFile\u003c/span\u003e \u003cspan class=\"p\"\u003e!=\u003c/span\u003e \u003cspan class=\"k\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                    \u003cspan class=\"cm\"\u003e/* ファイルパスを取得 */\u003c/span\u003e\n                    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003epath\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ePath\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eGetFullPath\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003efloc\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eFile\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eFileName\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n                    \u003cspan class=\"cm\"\u003e/* ファイル上の行番号を取得 */\u003c/span\u003e\n                    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eline\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003efloc\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eLine\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n                    \u003cspan class=\"cm\"\u003e/* ファイル上の列番号を取得 */\u003c/span\u003e\n                    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003ecol\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003efloc\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eColumn\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n                    \u003cspan class=\"cm\"\u003e/* 位置情報文字列を生成 */\u003c/span\u003e\n                    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003elocation\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e$\"\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e[L.\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003eline\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e,C.\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003ecol\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e]\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n                    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003elocation\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n                \u003cspan class=\"k\"\u003eelse\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                    \u003cspan class=\"cm\"\u003e/* ファイル上の行番号を取得 */\u003c/span\u003e\n                    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eline\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003efloc\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eLine\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n                    \u003cspan class=\"cm\"\u003e/* ファイル上の列番号を取得 */\u003c/span\u003e\n                    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003ecol\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003efloc\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eColumn\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n                    \u003cspan class=\"cm\"\u003e/* 位置情報文字列を生成 */\u003c/span\u003e\n                    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003elocation\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e$\"[L.\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003eline\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e,C.\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003ecol\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e]\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n                    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003elocation\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eelse\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"cm\"\u003e/* 位置情報なし */\u003c/span\u003e\n                \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eEmpty\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eelse\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"cm\"\u003e/* 位置情報なし */\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eEmpty\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"cs\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eTranslationUnitInfo.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eTranslationUnitInfo\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eAstNodeInfo\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003ePath\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eBehaviorLocationMap\u003c/span\u003e \u003cspan class=\"n\"\u003eBehaviorMap\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eBehaviorLocationMap\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003eTranslationUnitInfo\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eClangCursor\u003c/span\u003e \u003cspan class=\"n\"\u003ecursor\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"k\"\u003ebase\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ecursor\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"cm\"\u003e/* ソースファイルのフルパスを取得 */\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ePath\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eSystem\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eIO\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ePath\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eGetFullPath\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ecursor\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eSpelling\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eAddBehavior\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eBehaviorInfo\u003c/span\u003e \u003cspan class=\"n\"\u003ebehavior\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eBehaviorMap\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAdd\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ebehavior\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eoverride\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"nf\"\u003eToString\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"s\"\u003e$\"[TranslationUnit]\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ePath\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"cs\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eBehaviorInfo.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eabstract\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eBehaviorInfo\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eAstNodeInfo\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003eType\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003eName\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003eParameters\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003eNameSpace\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"cm\"\u003e/* 関数定義は継承先で生成 */\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003eDefinition\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eGetDefinition\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n    \u003cspan class=\"cm\"\u003e/* 関数のユニークなIDを生成 */\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003eID\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eGenerateBehaviorID\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eList\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eInvokationInfo\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eInvokations\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eList\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eInvokationInfo\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;();\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003eprotected\u003c/span\u003e \u003cspan class=\"k\"\u003eabstract\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"nf\"\u003eGetDefinition\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003eBehaviorInfo\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eClangCursor\u003c/span\u003e \u003cspan class=\"n\"\u003ecursor\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"k\"\u003ebase\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ecursor\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"cm\"\u003e/* 関数の種別を判定 */\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eType\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ecursor\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eIsDefinition\u003c/span\u003e \u003cspan class=\"p\"\u003e?\u003c/span\u003e \u003cspan class=\"s\"\u003e\"Definition\"\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"s\"\u003e\"Declaration\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n        \u003cspan class=\"cm\"\u003e/* 関数名を取得 */\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eName\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ecursor\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eSpelling\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n        \u003cspan class=\"cm\"\u003e/* 関数パラメータを取得 */\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eParameters\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ecursor\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eDisplayName\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eReplace\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ecursor\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eSpelling\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\"\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n        \u003cspan class=\"cm\"\u003e/* 名前空間を取得 */\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eNameSpace\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eGetNamespace\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ecursor\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eAddInvokation\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eInvokationInfo\u003c/span\u003e \u003cspan class=\"n\"\u003einvokation_info\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eInvokations\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAdd\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003einvokation_info\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"nf\"\u003eGenerateBehaviorID\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"cm\"\u003e/* 関数のIDには関数定義を使用 */\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eDefinition\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"cm\"\u003e/* 名前空間を取得 */\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"nf\"\u003eGetNamespace\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eClangCursor\u003c/span\u003e \u003cspan class=\"n\"\u003ecursor\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"cm\"\u003e/* 名前空間保持用スタック */\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003enamespace_stack\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eStack\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;();\u003c/span\u003e\n\n        \u003cspan class=\"cm\"\u003e/* 名前空間を再帰的にパース */\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eParseNamespace\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ecursor\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003enamespace_stack\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n        \u003cspan class=\"cm\"\u003e/* スタックの要素数が0 */\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003enamespace_stack\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eCount\u003c/span\u003e \u003cspan class=\"p\"\u003e==\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"cm\"\u003e/* 名前空間なし */\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eEmpty\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eelse\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003esb\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eStringBuilder\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n            \u003cspan class=\"cm\"\u003e/* 一番上の名前空間を追加 */\u003c/span\u003e\n            \u003cspan class=\"n\"\u003esb\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAppend\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003enamespace_stack\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003ePop\u003c/span\u003e\u003cspan class=\"p\"\u003e());\u003c/span\u003e\n\n            \u003cspan class=\"cm\"\u003e/* スタックが空になるまで */\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ewhile\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003enamespace_stack\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eCount\u003c/span\u003e \u003cspan class=\"p\"\u003e!=\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"cm\"\u003e/* 階層化された名前空間を連結 */\u003c/span\u003e\n                \u003cspan class=\"n\"\u003esb\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAppend\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"::\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n                \u003cspan class=\"n\"\u003esb\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAppend\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003enamespace_stack\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003ePop\u003c/span\u003e\u003cspan class=\"p\"\u003e());\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n            \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003esb\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eToString\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"cm\"\u003e/* 名前空間を再帰的にパース */\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eParseNamespace\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eClangCursor\u003c/span\u003e \u003cspan class=\"n\"\u003ecursor\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eStack\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003enamespace_stack\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n         \u003cspan class=\"cm\"\u003e/* 関数の意味的な親を示すカーソルを取得 */\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eparent\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ecursor\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eSemanticParent\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n        \u003cspan class=\"cm\"\u003e/* 親カーソルがnullでない */\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eparent\u003c/span\u003e \u003cspan class=\"p\"\u003e!=\u003c/span\u003e \u003cspan class=\"k\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"cm\"\u003e/* 親カーソルがTranslation Unit */\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eparent\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eKind\u003c/span\u003e \u003cspan class=\"p\"\u003e==\u003c/span\u003e \u003cspan class=\"n\"\u003eCursorKind\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eTranslationUnit\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"cm\"\u003e/* 最上位のためパース終了 */\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n            \u003cspan class=\"cm\"\u003e/* 親カーソルがNamespace */\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eelse\u003c/span\u003e \u003cspan class=\"k\"\u003eif\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eparent\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eKind\u003c/span\u003e \u003cspan class=\"p\"\u003e==\u003c/span\u003e \u003cspan class=\"n\"\u003eCursorKind\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eNamespace\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"cm\"\u003e/* 名前空間保持用スタックに追加 */\u003c/span\u003e\n                \u003cspan class=\"n\"\u003enamespace_stack\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003ePush\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eparent\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eSpelling\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n                \u003cspan class=\"cm\"\u003e/* 親カーソルの名前空間を再帰的にパース */\u003c/span\u003e\n                \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eParseNamespace\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eparent\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003enamespace_stack\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n            \u003cspan class=\"cm\"\u003e/* それ以外(クラスなど) */\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eelse\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"cm\"\u003e/* 親カーソルの名前空間を再帰的にパース */\u003c/span\u003e\n                \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eParseNamespace\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eparent\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003enamespace_stack\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eoverride\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"nf\"\u003eToString\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"s\"\u003e$\"[Behavior][\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eType\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e] \u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eDefinition\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"cs\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eClassBehaviorInfo.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eabstract\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eClassBehaviorInfo\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eBehaviorInfo\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003eClassName\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003eClassBehaviorInfo\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eClangCursor\u003c/span\u003e \u003cspan class=\"n\"\u003ecursor\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"k\"\u003ebase\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ecursor\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"cm\"\u003e/* 意味的な親カーソル(クラス)を取得 */\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eparent_class\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ecursor\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eSemanticParent\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n        \u003cspan class=\"cm\"\u003e/* クラス名を取得 */\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eClassName\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eparent_class\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eSpelling\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eoverride\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"nf\"\u003eToString\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"s\"\u003e$\"[ClassBehavior][\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eType\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e] \u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eDefinition\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"cs\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eConstructorInfo.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eConstructorInfo\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eClassBehaviorInfo\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003eConstructorInfo\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eClangCursor\u003c/span\u003e \u003cspan class=\"n\"\u003ecursor\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"k\"\u003ebase\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ecursor\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003eprotected\u003c/span\u003e \u003cspan class=\"k\"\u003eoverride\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"nf\"\u003eGetDefinition\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003ens\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eNameSpace\u003c/span\u003e \u003cspan class=\"p\"\u003e==\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eEmpty\u003c/span\u003e \u003cspan class=\"p\"\u003e?\u003c/span\u003e \u003cspan class=\"s\"\u003e\"\"\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"s\"\u003e$\"\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eNameSpace\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e::\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n        \u003cspan class=\"cm\"\u003e/* コンストラクタ定義 : [\u0026lt;名前空間\u0026gt;::]\u0026lt;クラス名\u0026gt;::\u0026lt;コンストラクタ名\u0026gt;(\u0026lt;パラメータ\u0026gt;) */\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"s\"\u003e$\"\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003ens\u003c/span\u003e\u003cspan class=\"p\"\u003e}{\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eClassName\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e::\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eName\u003c/span\u003e\u003cspan class=\"p\"\u003e}{\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eParameters\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eoverride\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"nf\"\u003eToString\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"s\"\u003e$\"[Constructor][\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eType\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e] \u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eDefinition\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"cs\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eDestructorInfo.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eDestructorInfo\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eClassBehaviorInfo\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003eDestructorInfo\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eClangCursor\u003c/span\u003e \u003cspan class=\"n\"\u003ecursor\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"k\"\u003ebase\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ecursor\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003eprotected\u003c/span\u003e \u003cspan class=\"k\"\u003eoverride\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"nf\"\u003eGetDefinition\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003ens\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eNameSpace\u003c/span\u003e \u003cspan class=\"p\"\u003e==\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eEmpty\u003c/span\u003e \u003cspan class=\"p\"\u003e?\u003c/span\u003e \u003cspan class=\"s\"\u003e\"\"\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"s\"\u003e$\"\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eNameSpace\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e::\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n        \u003cspan class=\"cm\"\u003e/* デストラクタ定義 : [\u0026lt;名前空間\u0026gt;::]\u0026lt;クラス名\u0026gt;::\u0026lt;デストラクタ名\u0026gt;(\u0026lt;パラメータ\u0026gt;) */\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"s\"\u003e$\"\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003ens\u003c/span\u003e\u003cspan class=\"p\"\u003e}{\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eClassName\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e::\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eName\u003c/span\u003e\u003cspan class=\"p\"\u003e}{\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eParameters\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eoverride\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"nf\"\u003eToString\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"s\"\u003e$\"[Destructor][\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eType\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e] \u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eDefinition\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"cs\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eCppMethodInfo.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eCppMethodInfo\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eClassBehaviorInfo\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003eReturnType\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003eCppMethodInfo\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eClangCursor\u003c/span\u003e \u003cspan class=\"n\"\u003ecursor\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"k\"\u003ebase\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ecursor\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003ertype\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ecursor\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eResultType\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eReturnType\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ertype\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eSpelling\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003eprotected\u003c/span\u003e \u003cspan class=\"k\"\u003eoverride\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"nf\"\u003eGetDefinition\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003ens\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eNameSpace\u003c/span\u003e \u003cspan class=\"p\"\u003e==\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eEmpty\u003c/span\u003e \u003cspan class=\"p\"\u003e?\u003c/span\u003e \u003cspan class=\"s\"\u003e\"\"\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"s\"\u003e$\"\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eNameSpace\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e::\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n        \u003cspan class=\"cm\"\u003e/* C++クラスメンバ関数定義 : \u0026lt;返り値型\u0026gt; [\u0026lt;名前空間\u0026gt;::]\u0026lt;クラス名\u0026gt;::\u0026lt;関数名\u0026gt;(\u0026lt;パラメータ\u0026gt;) */\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"s\"\u003e$\"\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eReturnType\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e \u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003ens\u003c/span\u003e\u003cspan class=\"p\"\u003e}{\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eClassName\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e::\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eName\u003c/span\u003e\u003cspan class=\"p\"\u003e}{\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eParameters\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eoverride\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"nf\"\u003eToString\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"s\"\u003e$\"[Function][\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eType\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e] \u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eDefinition\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"cs\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eFunctionInfo.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eFunctionInfo\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eBehaviorInfo\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003eReturnType\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003eFunctionInfo\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eClangCursor\u003c/span\u003e \u003cspan class=\"n\"\u003ecursor\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"k\"\u003ebase\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ecursor\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003ertype\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ecursor\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eResultType\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eReturnType\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ertype\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eSpelling\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003eprotected\u003c/span\u003e \u003cspan class=\"k\"\u003eoverride\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"nf\"\u003eGetDefinition\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003ens\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eNameSpace\u003c/span\u003e \u003cspan class=\"p\"\u003e==\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eEmpty\u003c/span\u003e \u003cspan class=\"p\"\u003e?\u003c/span\u003e \u003cspan class=\"s\"\u003e\"\"\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"s\"\u003e$\"\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eNameSpace\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e::\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n        \u003cspan class=\"cm\"\u003e/* Cスタイル関数定義 : \u0026lt;返り値型\u0026gt; [\u0026lt;名前空間\u0026gt;::]\u0026lt;関数名\u0026gt;(\u0026lt;パラメータ\u0026gt;) */\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"s\"\u003e$\"\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eReturnType\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e \u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003ens\u003c/span\u003e\u003cspan class=\"p\"\u003e}{\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eName\u003c/span\u003e\u003cspan class=\"p\"\u003e}{\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eParameters\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eoverride\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"nf\"\u003eToString\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"s\"\u003e$\"[Function][\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eType\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e] \u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eDefinition\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"cs\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eInvokationInfo.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eInvokationInfo\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eAstNodeInfo\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003eID\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003eDefinition\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003eName\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eBehaviorInfo\u003c/span\u003e \u003cspan class=\"n\"\u003eDeclaration\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003eInvokationInfo\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eClangCursor\u003c/span\u003e \u003cspan class=\"n\"\u003ecursor\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"k\"\u003ebase\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ecursor\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"cm\"\u003e/* コール関数名を取得 */\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eName\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ecursor\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eSpelling\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n        \u003cspan class=\"cm\"\u003e/* コール関数の参照先がnullでない */\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ecursor\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eReferenced\u003c/span\u003e \u003cspan class=\"p\"\u003e!=\u003c/span\u003e \u003cspan class=\"k\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"cm\"\u003e/* 参照先カーソルから関数宣言のBehavior Infoを生成 */\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eDeclaration\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eBehaviorInfoFactory\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eCreate\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ecursor\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eReferenced\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n            \u003cspan class=\"cm\"\u003e/* 関数宣言のBehavior Infoから関数IDを取得 */\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eID\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eDeclaration\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eID\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n            \u003cspan class=\"cm\"\u003e/* 関数宣言のBehavior Infoから関数定義を取得 */\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eDefinition\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eDeclaration\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eDefinition\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eelse\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ethrow\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eFieldAccessException\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e$\"Behavior Declaration Not Found : \u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eName\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eoverride\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"nf\"\u003eToString\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"s\"\u003e$\"[Invokation]\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eName\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"cs\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eBehaviorlocationMap.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eBehaviorLocationMap\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eDictionary\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eBehaviorInfo\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eAdd\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eBehaviorInfo\u003c/span\u003e \u003cspan class=\"n\"\u003ebehavior\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eContainsKey\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ebehavior\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eLocation\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e==\u003c/span\u003e \u003cspan class=\"k\"\u003efalse\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAdd\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ebehavior\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eLocation\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ebehavior\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eelse\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ethrow\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eInvalidOperationException\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e$\"Behavior Already Registered : \u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003ebehavior\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eID\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eAddIfNotRegistered\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eBehaviorInfo\u003c/span\u003e \u003cspan class=\"n\"\u003ebehavior\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eContainsKey\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ebehavior\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eLocation\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e==\u003c/span\u003e \u003cspan class=\"k\"\u003efalse\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAdd\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ebehavior\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eLocation\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ebehavior\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eelse\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"cm\"\u003e/* Nothing to do */\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"cs\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eBehaviorlocationMap.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eTranslationUnitMap\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eDictionary\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eTranslationUnitInfo\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eAdd\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eTranslationUnitInfo\u003c/span\u003e \u003cspan class=\"n\"\u003etu\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eContainsKey\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003etu\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ePath\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e==\u003c/span\u003e \u003cspan class=\"k\"\u003efalse\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAdd\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003etu\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ePath\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003etu\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eelse\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ethrow\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eInvalidOperationException\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e$\"Translation Unit Already Registered : \u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003etu\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ePath\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch6\u003e\n\u003cspan id=\"1-2-ast解析\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#1-2-ast%E8%A7%A3%E6%9E%90\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e1-2. AST解析\u003c/h6\u003e\n\n\u003cp\u003e続いて、ASTを解析してTranslationUnitMapを生成するロジックを実現するクラスを定義します。\u003cbr\u003e\nまた、ASTを解析する部分は、様々なソースファイルの入力に対応できるように設定情報を保持するクラスを定義し、それをパラメータとして渡すようにします。\u003cbr\u003e\nさらに、関数情報(BehaviorInfo)はカーソルの種別に対応したクラスのインスタンスを生成できるようにFactoryクラスを定義します。\u003cbr\u003e\nそれぞれのソースを以下に示します。  \u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"cs\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eTranslationUnitParseSetting.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eTranslationUnitParseSetting\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eList\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eSources\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"k\"\u003eset\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eList\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;();\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eList\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eCommandLineArgs\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"k\"\u003eset\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eList\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;();\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eTranslationUnitFlags\u003c/span\u003e \u003cspan class=\"n\"\u003eParseOptions\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"k\"\u003eset\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eTranslationUnitFlags\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eNone\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"n\"\u003eDisplayDiag\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"k\"\u003eset\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"n\"\u003eDumpAST\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"k\"\u003eset\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"cs\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eBehaviorInfoFactory.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003estatic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eBehaviorInfoFactory\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003estatic\u003c/span\u003e \u003cspan class=\"n\"\u003eBehaviorInfo\u003c/span\u003e \u003cspan class=\"nf\"\u003eCreate\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eClangCursor\u003c/span\u003e \u003cspan class=\"n\"\u003ecursor\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eswitch\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ecursor\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eKind\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"cm\"\u003e/* コンストラクタ */\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ecase\u003c/span\u003e \u003cspan class=\"n\"\u003eCursorKind\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eConstructor\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n                \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eConstructorInfo\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ecursor\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n            \u003cspan class=\"cm\"\u003e/* デストラクタ */\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ecase\u003c/span\u003e \u003cspan class=\"n\"\u003eCursorKind\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eDestructor\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n                \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eDestructorInfo\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ecursor\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n            \u003cspan class=\"cm\"\u003e/* Cスタイル関数 */\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ecase\u003c/span\u003e \u003cspan class=\"n\"\u003eCursorKind\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eFunctionDeclaration\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n                \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eFunctionInfo\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ecursor\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n            \u003cspan class=\"cm\"\u003e/* C++クラスメンバ関数 */\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ecase\u003c/span\u003e \u003cspan class=\"n\"\u003eCursorKind\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eCXXMethod\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n                \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eCppMethodInfo\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ecursor\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n            \u003cspan class=\"k\"\u003edefault\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n                \u003cspan class=\"k\"\u003ethrow\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eArgumentException\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e$\"Not Behavior Cursor\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"cs\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eTranslationUnitsParser.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003estatic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eTranslationUnitsParser\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003estatic\u003c/span\u003e \u003cspan class=\"n\"\u003eTranslationUnitMap\u003c/span\u003e \u003cspan class=\"nf\"\u003eParse\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eTranslationUnitParseSetting\u003c/span\u003e \u003cspan class=\"n\"\u003esetting\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eimpl\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eTranslationUnitsParserImpl\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003emap\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eimpl\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eExecute\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003esetting\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003emap\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eTranslationUnitsParserImpl\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eAMessageable\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003eTranslationUnitParseSetting\u003c/span\u003e \u003cspan class=\"n\"\u003eSetting\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"k\"\u003eset\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003eTranslationUnitInfo\u003c/span\u003e \u003cspan class=\"n\"\u003eCurrentTranslationUnit\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"k\"\u003eset\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003eBehaviorInfo\u003c/span\u003e \u003cspan class=\"n\"\u003eCurrentBehavior\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"k\"\u003eset\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003eTranslationUnitMap\u003c/span\u003e \u003cspan class=\"n\"\u003eTranslationUnitMap\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"k\"\u003eset\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eTranslationUnitMap\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eTranslationUnitMap\u003c/span\u003e \u003cspan class=\"nf\"\u003eExecute\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eTranslationUnitParseSetting\u003c/span\u003e \u003cspan class=\"n\"\u003esetting\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eSetting\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003esetting\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n            \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003edisplay_diag\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003esetting\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eDisplayDiag\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n            \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003esrc_path_list\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003esetting\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eSources\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n            \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003ecommand_line_args\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003esetting\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eCommandLineArgs\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eToArray\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n            \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eoptions\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003esetting\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eParseOptions\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n            \u003cspan class=\"cm\"\u003e/* Indexを生成 */\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eindex\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eClang\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eCreateIndex\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003efalse\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003edisplay_diag\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"cm\"\u003e/* 解析対象のソースファイルパスリストを走査 */\u003c/span\u003e\n                \u003cspan class=\"k\"\u003eforeach\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003esrc_path\u003c/span\u003e \u003cspan class=\"k\"\u003ein\u003c/span\u003e \u003cspan class=\"n\"\u003esrc_path_list\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                    \u003cspan class=\"cm\"\u003e/* ソースファイルパスのファイルが存在するかを確認 */\u003c/span\u003e\n                    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eFile\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eExists\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003esrc_path\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n                    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                        \u003cspan class=\"cm\"\u003e/* ソースファイルをパースし、Translation Unitを生成 */\u003c/span\u003e\n                        \u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003etu\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eindex\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eParseTranslationUnit\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003esrc_path\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ecommand_line_args\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eClangUnsavedFile\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e],\u003c/span\u003e \u003cspan class=\"n\"\u003eoptions\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n                        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                            \u003cspan class=\"cm\"\u003e/* 解析実行 */\u003c/span\u003e\n                            \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eExecuteCore\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eindex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003etu\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n                        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n                    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n                    \u003cspan class=\"k\"\u003eelse\u003c/span\u003e\n                    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                        \u003cspan class=\"k\"\u003ethrow\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eInvalidOperationException\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e$\"Source File Not Found :\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003esrc_path\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n                    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n            \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eTranslationUnitMap\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eExecuteCore\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eClangIndex\u003c/span\u003e \u003cspan class=\"n\"\u003eindex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eClangTranslationUnit\u003c/span\u003e \u003cspan class=\"n\"\u003etu\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eSetting\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eDumpAST\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSendMessage\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e$\"AST Dump:\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n            \u003cspan class=\"cm\"\u003e/* ASTを再帰的にパース */\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eVisitChild\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003etu\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eCursor\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003eChildVisitResult\u003c/span\u003e \u003cspan class=\"nf\"\u003eVisitor\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eClangCursor\u003c/span\u003e \u003cspan class=\"n\"\u003ecursor\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eClangCursor\u003c/span\u003e \u003cspan class=\"n\"\u003eparent\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003edepth\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"cm\"\u003e/* カーソル位置を取得 */\u003c/span\u003e\n            \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eloc\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ecursor\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eLocation\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n            \u003cspan class=\"cm\"\u003e/* 解析対象ソースファイル内 */\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eloc\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eIsFromMainFile\u003c/span\u003e \u003cspan class=\"p\"\u003e==\u003c/span\u003e \u003cspan class=\"k\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"cm\"\u003e/* 子要素をパース */\u003c/span\u003e\n                \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eVisitChild\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ecursor\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003edepth\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eelse\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"cm\"\u003e/* システムヘッダ内 */\u003c/span\u003e\n                \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eloc\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eIsInSystemHeader\u003c/span\u003e \u003cspan class=\"p\"\u003e==\u003c/span\u003e \u003cspan class=\"k\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                    \u003cspan class=\"cm\"\u003e/* Nothing to do */\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n                \u003cspan class=\"cm\"\u003e/* ユーザヘッダ内 */\u003c/span\u003e\n                \u003cspan class=\"k\"\u003eelse\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                    \u003cspan class=\"cm\"\u003e/* 子要素をパース */\u003c/span\u003e\n                    \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eVisitChild\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ecursor\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003edepth\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n            \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003eChildVisitResult\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eContinue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eVisitChild\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eClangCursor\u003c/span\u003e \u003cspan class=\"n\"\u003ecursor\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003edepth\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"cm\"\u003e/* デバッグ用にASTをダンプ */\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eSetting\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eDumpAST\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eDumpAstInfo\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ecursor\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003edepth\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n            \u003cspan class=\"cm\"\u003e/* 関数コール情報を解析 */\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAnalyseInvokationInfo\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ecursor\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n            \u003cspan class=\"n\"\u003ecursor\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eVisitChildren\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eVisitor\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003edepth\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eDumpAstInfo\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eClangCursor\u003c/span\u003e \u003cspan class=\"n\"\u003ecursor\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003edepth\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eindent\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"sc\"\u003e' '\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003edepth\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"m\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n            \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003ekind\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ecursor\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eKind\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n            \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003ename\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ecursor\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eSpelling\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n            \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eloc\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ecursor\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eLocation\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eToStringEx\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n            \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSendMessage\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e$\"\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003eindent\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e[\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003ekind\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e] \u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e @ \u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003eloc\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eAnalyseInvokationInfo\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eClangCursor\u003c/span\u003e \u003cspan class=\"n\"\u003ecursor\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eswitch\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ecursor\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eKind\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"cm\"\u003e/* 解析対象ソースファイル */\u003c/span\u003e\n                \u003cspan class=\"k\"\u003ecase\u003c/span\u003e \u003cspan class=\"n\"\u003eCursorKind\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eTranslationUnit\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n                    \u003cspan class=\"cm\"\u003e/* Translation Unit Infoを生成し、Translation Unit Mapに追加 */\u003c/span\u003e\n                    \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eCurrentTranslationUnit\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eTranslationUnitInfo\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ecursor\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n                    \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eTranslationUnitMap\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAdd\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eCurrentTranslationUnit\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n                    \u003cspan class=\"k\"\u003ebreak\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n                \u003cspan class=\"cm\"\u003e/* コンストラクタ */\u003c/span\u003e\n                \u003cspan class=\"k\"\u003ecase\u003c/span\u003e \u003cspan class=\"n\"\u003eCursorKind\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eConstructor\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n                    \u003cspan class=\"cm\"\u003e/* Constructor Infoを生成し、Translation Unit Infoに追加 */\u003c/span\u003e\n                    \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eCurrentBehavior\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eBehaviorInfoFactory\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eCreate\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ecursor\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n                    \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eCurrentTranslationUnit\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAddBehavior\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eCurrentBehavior\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n                    \u003cspan class=\"k\"\u003ebreak\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n                \u003cspan class=\"cm\"\u003e/* デストラクタ */\u003c/span\u003e\n                \u003cspan class=\"k\"\u003ecase\u003c/span\u003e \u003cspan class=\"n\"\u003eCursorKind\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eDestructor\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n                    \u003cspan class=\"cm\"\u003e/* Destructor Infoを生成し、Translation Unit Infoに追加 */\u003c/span\u003e\n                    \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eCurrentBehavior\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eBehaviorInfoFactory\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eCreate\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ecursor\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n                    \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eCurrentTranslationUnit\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAddBehavior\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eCurrentBehavior\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n                    \u003cspan class=\"k\"\u003ebreak\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n                \u003cspan class=\"cm\"\u003e/* Cスタイル関数*/\u003c/span\u003e\n                \u003cspan class=\"k\"\u003ecase\u003c/span\u003e \u003cspan class=\"n\"\u003eCursorKind\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eFunctionDeclaration\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n                    \u003cspan class=\"cm\"\u003e/* Function Infoを生成し、Translation Unit Infoに追加 */\u003c/span\u003e\n                    \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eCurrentBehavior\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eBehaviorInfoFactory\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eCreate\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ecursor\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n                    \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eCurrentTranslationUnit\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAddBehavior\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eCurrentBehavior\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n                    \u003cspan class=\"k\"\u003ebreak\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n                \u003cspan class=\"cm\"\u003e/* C++メンバ関数 */\u003c/span\u003e\n                \u003cspan class=\"k\"\u003ecase\u003c/span\u003e \u003cspan class=\"n\"\u003eCursorKind\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eCXXMethod\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n                    \u003cspan class=\"cm\"\u003e/* Cpp Method Infoを生成し、Translation Unit Infoに追加 */\u003c/span\u003e\n                    \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eCurrentBehavior\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eBehaviorInfoFactory\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eCreate\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ecursor\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n                    \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eCurrentTranslationUnit\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAddBehavior\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eCurrentBehavior\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n                    \u003cspan class=\"k\"\u003ebreak\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n                \u003cspan class=\"cm\"\u003e/* 関数コール */\u003c/span\u003e\n                \u003cspan class=\"k\"\u003ecase\u003c/span\u003e \u003cspan class=\"n\"\u003eCursorKind\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eCallExpression\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n                    \u003cspan class=\"cm\"\u003e/* Invokation Infoを生成し、Translation Unit Infoに追加 */\u003c/span\u003e\n                    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003einvokation_info\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eInvokationInfo\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ecursor\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n                    \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eCurrentBehavior\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAddInvokation\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003einvokation_info\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n                    \u003cspan class=\"k\"\u003ebreak\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n                \u003cspan class=\"k\"\u003edefault\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n                    \u003cspan class=\"k\"\u003ebreak\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch5\u003e\n\u003cspan id=\"2-invokation-tree関数コールツリー生成\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#2-invokation-tree%E9%96%A2%E6%95%B0%E3%82%B3%E3%83%BC%E3%83%AB%E3%83%84%E3%83%AA%E3%83%BC%E7%94%9F%E6%88%90\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e2. Invokation Tree(関数コールツリー)生成\u003c/h5\u003e\n\n\u003cp\u003e次は、1.で生成したTranslationUnitMapの情報から関数コールツリー情報を生成し、出力する機能を持つクラスを実装します。\u003cbr\u003e\n関数コールツリーを出力するために、TranslationUnitMapに登録されている各TranslationUnitInfoのBehaviorMapから、種別がDefinition(関数定義)のBehaviorInfoを抽出し、Behavior IDをキーとしたハッシュマップを生成します。\u003cbr\u003e\n生成するハッシュマップ(BehaviorDefinitionMapクラス)の定義と、ハッシュマップ生成処理の実装コードを以下に示します。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"cs\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eBehaviorDefinitionMap.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eBehaviorDefinitionMap\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eDictionary\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eBehaviorInfo\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eAdd\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eBehaviorInfo\u003c/span\u003e \u003cspan class=\"n\"\u003ebehavior\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eContainsKey\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ebehavior\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eID\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e==\u003c/span\u003e \u003cspan class=\"k\"\u003efalse\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAdd\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ebehavior\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eID\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ebehavior\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eelse\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ethrow\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eInvalidOperationException\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e$\"Behavior Already Registered : \u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003ebehavior\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eID\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eAddIfNotRegistered\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eBehaviorInfo\u003c/span\u003e \u003cspan class=\"n\"\u003ebehavior\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eContainsKey\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ebehavior\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eID\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e==\u003c/span\u003e \u003cspan class=\"k\"\u003efalse\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAdd\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ebehavior\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eID\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ebehavior\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eelse\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"cm\"\u003e/* Nothing to do */\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"cs\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eハッシュマップ生成処理\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eCreateBehaviorDefinitionMap\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"cm\"\u003e/* Translation Unit Infoを走査 */\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eforeach\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003etu\u003c/span\u003e \u003cspan class=\"k\"\u003ein\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eTranslationUnitMap\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eValues\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"cm\"\u003e/* Translation Unit InfoのBehavior MapからTypeがDefinitionのBehavior Infoを抽出 */\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003ebehavior_definitions\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003etu\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eBehaviorMap\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eValues\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWhere\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eb\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eb\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eType\u003c/span\u003e \u003cspan class=\"p\"\u003e==\u003c/span\u003e \u003cspan class=\"s\"\u003e\"Definition\"\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nf\"\u003eToList\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n        \u003cspan class=\"cm\"\u003e/* 抽出したBehavior Infoを走査 */\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eforeach\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003ebehavior_definition\u003c/span\u003e \u003cspan class=\"k\"\u003ein\u003c/span\u003e \u003cspan class=\"n\"\u003ebehavior_definitions\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"cm\"\u003e/* Behavior Infoが登録されていなければ、Behavior Definition Mapに登録 */\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eBehaviorDefinitionMap\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAddIfNotRegistered\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ebehavior_definition\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e生成したBehaviorDefinitionMapを用いて、関数が呼び出している関数情報を辿っていき、関数のコールツリーを出力します。\u003cbr\u003e\n実装コードを以下に示します。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"cs\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003e関数コールツリー出力\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eDumpInvokationTrees\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"cm\"\u003e/* Behavior Definition MapのValue(BehaviorInfo)リストを取得 */\u003c/span\u003e\n    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003ebehavior_defnitions\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eBehaviorDefinitionMap\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eValues\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"cm\"\u003e/* Behavior Definitionリストを走査 */\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eforeach\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003ebehavior\u003c/span\u003e \u003cspan class=\"k\"\u003ein\u003c/span\u003e \u003cspan class=\"n\"\u003ebehavior_defnitions\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"cm\"\u003e/* 関数定義と定義位置を出力 */\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSendMessage\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e$\"\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003ebehavior\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eDefinition\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e @ \u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003ebehavior\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eLocation\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n        \u003cspan class=\"cm\"\u003e/* 関数のコールツリーを出力 */\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eDumpInvokationTree\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ebehavior\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n        \u003cspan class=\"cm\"\u003e/* 改行 */\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSendMessage\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eDumpInvokationTree\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eBehaviorInfo\u003c/span\u003e \u003cspan class=\"n\"\u003ebehavior\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003edepth\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"cm\"\u003e/* Behavior InfoのInvokation Infoリストを走査 */\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eforeach\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003einvokation\u003c/span\u003e \u003cspan class=\"k\"\u003ein\u003c/span\u003e \u003cspan class=\"n\"\u003ebehavior\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eInvokations\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"cm\"\u003e/* インデント(1段階)を生成 */\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eindent\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"sc\"\u003e' '\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003edepth\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"m\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n        \u003cspan class=\"cm\"\u003e/* インデント(2段階)を生成 */\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eindent2\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"sc\"\u003e' '\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003edepth\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"m\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n        \u003cspan class=\"cm\"\u003e/* コール関数定義とコール位置を出力 */\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSendMessage\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e$\"\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003eindent\u003c/span\u003e\u003cspan class=\"p\"\u003e}{\u003c/span\u003e\u003cspan class=\"n\"\u003einvokation\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eDefinition\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e @ \u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003einvokation\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eLocation\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n        \u003cspan class=\"cm\"\u003e/* 親関数とコール関数のIDが同一(再帰呼び出し) */\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ebehavior\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eID\u003c/span\u003e \u003cspan class=\"p\"\u003e==\u003c/span\u003e \u003cspan class=\"n\"\u003einvokation\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eID\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"cm\"\u003e/* 再帰呼び出しの旨を出力 */\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSendMessage\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e$\"\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003eindent2\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e \u0026lt;Recursive Call...\u0026gt;\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eelse\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"cm\"\u003e/* Behavior Definition Mapにコール関数と同一IDのBehavior Infoがあるかを確認 */\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eBehaviorDefinitionMap\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eContainsKey\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003einvokation\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eID\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"cm\"\u003e/* コール関数のBehavior Infoを取得 */\u003c/span\u003e\n                \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003echild_behavior\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eBehaviorDefinitionMap\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003einvokation\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eID\u003c/span\u003e\u003cspan class=\"p\"\u003e];\u003c/span\u003e\n\n                \u003cspan class=\"cm\"\u003e/* コール関数を親にしてコールツリーを出力 */\u003c/span\u003e\n                \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eDumpInvokationTree\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003echild_behavior\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003edepth\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eelse\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"cm\"\u003e/* コール関数の関数定義が見つからない旨を出力 */\u003c/span\u003e\n                \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSendMessage\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e$\"\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003eindent2\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e \u0026lt;Behavior Definition Not Found...\u0026gt;\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003eソース全文を以下に示します。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"cs\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eInvokationTreeDumper.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003estatic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eInvokationTreeDumper\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003estatic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eDump\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eTranslationUnitMap\u003c/span\u003e \u003cspan class=\"n\"\u003emap\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eimpl\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eInvokationTreeDumperImpl\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n        \u003cspan class=\"n\"\u003eimpl\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eExecute\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003emap\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eInvokationTreeDumperImpl\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eAMessageable\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003eTranslationUnitMap\u003c/span\u003e \u003cspan class=\"n\"\u003eTranslationUnitMap\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"k\"\u003eset\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eTranslationUnitMap\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003eBehaviorDefinitionMap\u003c/span\u003e \u003cspan class=\"n\"\u003eBehaviorDefinitionMap\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"k\"\u003eset\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eBehaviorDefinitionMap\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eExecute\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eTranslationUnitMap\u003c/span\u003e \u003cspan class=\"n\"\u003emap\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eTranslationUnitMap\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003emap\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n            \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eCreateBehaviorDefinitionMap\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n            \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSendMessage\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSendMessage\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"--------------------------------------\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSendMessage\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Invokation Tree:\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n            \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eDumpInvokationTrees\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eCreateBehaviorDefinitionMap\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eforeach\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003etu\u003c/span\u003e \u003cspan class=\"k\"\u003ein\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eTranslationUnitMap\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eValues\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003ebehavior_definitions\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003etu\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eBehaviorMap\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eValues\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWhere\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eb\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eb\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eType\u003c/span\u003e \u003cspan class=\"p\"\u003e==\u003c/span\u003e \u003cspan class=\"s\"\u003e\"Definition\"\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nf\"\u003eToList\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n                \u003cspan class=\"k\"\u003eforeach\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003ebehavior_definition\u003c/span\u003e \u003cspan class=\"k\"\u003ein\u003c/span\u003e \u003cspan class=\"n\"\u003ebehavior_definitions\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                    \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eBehaviorDefinitionMap\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAddIfNotRegistered\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ebehavior_definition\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eDumpInvokationTrees\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003ebehavior_defnitions\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eBehaviorDefinitionMap\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eValues\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n            \u003cspan class=\"k\"\u003eforeach\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003ebehavior\u003c/span\u003e \u003cspan class=\"k\"\u003ein\u003c/span\u003e \u003cspan class=\"n\"\u003ebehavior_defnitions\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSendMessage\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e$\"\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003ebehavior\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eDefinition\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e @ \u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003ebehavior\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eLocation\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n                \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eDumpInvokationTree\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ebehavior\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n                \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSendMessage\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eDumpInvokationTree\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eBehaviorInfo\u003c/span\u003e \u003cspan class=\"n\"\u003ebehavior\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003edepth\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eforeach\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003einvokation\u003c/span\u003e \u003cspan class=\"k\"\u003ein\u003c/span\u003e \u003cspan class=\"n\"\u003ebehavior\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eInvokations\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eindent\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"sc\"\u003e' '\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003edepth\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"m\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n                \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eindent2\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"sc\"\u003e' '\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003edepth\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"m\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n                \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSendMessage\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e$\"\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003eindent\u003c/span\u003e\u003cspan class=\"p\"\u003e}{\u003c/span\u003e\u003cspan class=\"n\"\u003einvokation\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eDefinition\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e @ \u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003einvokation\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eLocation\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n                \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ebehavior\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eID\u003c/span\u003e \u003cspan class=\"p\"\u003e==\u003c/span\u003e \u003cspan class=\"n\"\u003einvokation\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eID\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                    \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSendMessage\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e$\"\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003eindent2\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e \u0026lt;Recursive Call...\u0026gt;\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n                \u003cspan class=\"k\"\u003eelse\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eBehaviorDefinitionMap\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eContainsKey\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003einvokation\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eID\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n                    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003echild_behavior\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eBehaviorDefinitionMap\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003einvokation\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eID\u003c/span\u003e\u003cspan class=\"p\"\u003e];\u003c/span\u003e\n\n                        \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eDumpInvokationTree\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003echild_behavior\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003edepth\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n                    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n                    \u003cspan class=\"k\"\u003eelse\u003c/span\u003e\n                    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                        \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSendMessage\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e$\"\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003eindent2\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e \u0026lt;Behavior Definition Not Found...\u0026gt;\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n                    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch5\u003e\n\u003cspan id=\"3-cross-reference関数参照情報生成\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#3-cross-reference%E9%96%A2%E6%95%B0%E5%8F%82%E7%85%A7%E6%83%85%E5%A0%B1%E7%94%9F%E6%88%90\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e3. Cross Reference(関数参照情報)生成\u003c/h5\u003e\n\n\u003cp\u003e続いて1.で生成したTranslationUnitMapの情報から関数クロスリファレンス(宣言/定義/コール)情報を生成し、出力する機能を持つクラスを実装します。\u003cbr\u003e\nクロスリファレンス情報を保持するためのクラス(BehaviorCrossReferenceInfo)と、それを関数ごとにまとめるコンテナ(BehaviorCrossReferenceMap)を定義します。\u003cbr\u003e\nなお、BehaviorCrossReferenceInfoは、重複を排除するためにValueObjectパターンで実装します。\u003cbr\u003e\nそれぞれの実装コードを以下に示します。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"cs\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eValueObject.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eabstract\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eValueObject\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eT\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"k\"\u003ewhere\u003c/span\u003e \u003cspan class=\"n\"\u003eT\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eValueObject\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eT\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"cm\"\u003e/* データの同一性を判定する関数 -\u0026gt; 継承先で実装 */\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eprotected\u003c/span\u003e \u003cspan class=\"k\"\u003eabstract\u003c/span\u003e \u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"nf\"\u003eEqualsCore\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eT\u003c/span\u003e \u003cspan class=\"n\"\u003eother\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n    \u003cspan class=\"cm\"\u003e/* ハッシュコード生成に使用するパラメータを取得する関数 -\u0026gt; 継承先で実装 */\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eprotected\u003c/span\u003e \u003cspan class=\"k\"\u003eabstract\u003c/span\u003e \u003cspan class=\"n\"\u003eIEnumerable\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eobject\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"nf\"\u003eGetHashCodeParameters\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003estatic\u003c/span\u003e \u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"k\"\u003eoperator\u003c/span\u003e \u003cspan class=\"p\"\u003e==(\u003c/span\u003e\u003cspan class=\"n\"\u003eValueObject\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eT\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eleft\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eValueObject\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eT\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eright\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"nf\"\u003eEquals\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eleft\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eright\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003estatic\u003c/span\u003e \u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"k\"\u003eoperator\u003c/span\u003e \u003cspan class=\"p\"\u003e!=(\u003c/span\u003e\u003cspan class=\"n\"\u003eValueObject\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eT\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eleft\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eValueObject\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eT\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eright\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"p\"\u003e!\u003c/span\u003e\u003cspan class=\"nf\"\u003eEquals\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eleft\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eright\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eoverride\u003c/span\u003e \u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"nf\"\u003eEquals\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eobject\u003c/span\u003e \u003cspan class=\"n\"\u003eobj\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eother\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eobj\u003c/span\u003e \u003cspan class=\"k\"\u003eas\u003c/span\u003e \u003cspan class=\"n\"\u003eT\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eother\u003c/span\u003e \u003cspan class=\"p\"\u003e==\u003c/span\u003e \u003cspan class=\"k\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003efalse\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eelse\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eEqualsCore\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eother\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eoverride\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"nf\"\u003eGetHashCode\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eobjs\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eGetHashCodeParameters\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003ehash\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003eforeach\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eobj\u003c/span\u003e \u003cspan class=\"k\"\u003ein\u003c/span\u003e \u003cspan class=\"n\"\u003eobjs\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"n\"\u003ehash\u003c/span\u003e \u003cspan class=\"p\"\u003e^=\u003c/span\u003e \u003cspan class=\"n\"\u003eobj\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eGetHashCode\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003ehash\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"cs\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eBehaviorCrossReferenceInfo.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eBehaviorCrossReferenceInfo\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eValueObject\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eBehaviorCrossReferenceInfo\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003eID\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003eType\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003eDefinition\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003eLocation\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"cm\"\u003e/* Behavior Infoからクロスリファレンス情報を生成 */\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003eBehaviorCrossReferenceInfo\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eBehaviorInfo\u003c/span\u003e \u003cspan class=\"n\"\u003einfo\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eID\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003einfo\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eID\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eType\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003einfo\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eType\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eDefinition\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003einfo\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eDefinition\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eLocation\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003einfo\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eLocation\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"cm\"\u003e/* Invokation Infoからクロスリファレンス情報を生成 */\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003eBehaviorCrossReferenceInfo\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eInvokationInfo\u003c/span\u003e \u003cspan class=\"n\"\u003einfo\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eID\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003einfo\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eID\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eType\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"Call\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eDefinition\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003einfo\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eDefinition\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eLocation\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003einfo\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eLocation\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eoverride\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"nf\"\u003eToString\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"s\"\u003e$\"[\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eType\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e]\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eDefinition\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e @ \u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eLocation\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"cm\"\u003e/* 各プロパティの値が全て一致する場合、同一のオブジェクトとみなす */\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eprotected\u003c/span\u003e \u003cspan class=\"k\"\u003eoverride\u003c/span\u003e \u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"nf\"\u003eEqualsCore\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eBehaviorCrossReferenceInfo\u003c/span\u003e \u003cspan class=\"n\"\u003eother\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eID\u003c/span\u003e \u003cspan class=\"p\"\u003e==\u003c/span\u003e \u003cspan class=\"n\"\u003eother\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eID\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eType\u003c/span\u003e \u003cspan class=\"p\"\u003e==\u003c/span\u003e \u003cspan class=\"n\"\u003eother\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eType\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eDefinition\u003c/span\u003e \u003cspan class=\"p\"\u003e==\u003c/span\u003e \u003cspan class=\"n\"\u003eother\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eDefinition\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eLocation\u003c/span\u003e \u003cspan class=\"p\"\u003e==\u003c/span\u003e \u003cspan class=\"n\"\u003eother\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eLocation\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"cm\"\u003e/* 各プロパティの値をもとにハッシュコードを生成 */\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eprotected\u003c/span\u003e \u003cspan class=\"k\"\u003eoverride\u003c/span\u003e \u003cspan class=\"n\"\u003eIEnumerable\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eobject\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"nf\"\u003eGetHashCodeParameters\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eobjs\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eList\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eobject\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;()\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eID\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eDefinition\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eType\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eLocation\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e};\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003eobjs\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"cs\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eBehaviorCrossReferenceMap.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"cm\"\u003e/* 同一ID(同一関数)ごとにクロスリファレンス情報をまとめるコンテナ(重複は排除) */\u003c/span\u003e\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eBehaviorCrossReferenceMap\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eDictionary\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eHashSet\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eBehaviorCrossReferenceInfo\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026gt;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eAdd\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eBehaviorCrossReferenceInfo\u003c/span\u003e \u003cspan class=\"n\"\u003einfo\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eContainsKey\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003einfo\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eID\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e==\u003c/span\u003e \u003cspan class=\"k\"\u003efalse\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAdd\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003einfo\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eID\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eHashSet\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eBehaviorCrossReferenceInfo\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;());\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003einfo\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eID\u003c/span\u003e\u003cspan class=\"p\"\u003e].\u003c/span\u003e\u003cspan class=\"nf\"\u003eAdd\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003einfo\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e上記で示したクロスリファレンス情報を生成するコードを実装します。  \u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"cs\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eクロスリファレンス情報生成\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eAnalyseCrossReferences\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003emap1\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eBehaviorCrossReferenceMap\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n    \u003cspan class=\"cm\"\u003e/* Translation Unit Infoを走査 */\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eforeach\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003etu\u003c/span\u003e \u003cspan class=\"k\"\u003ein\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eTranslationUnitMap\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eValues\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"cm\"\u003e/* Translation Unit InfoのBehavior Mapの値(Behavior Info)を走査 */\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eforeach\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003ebehavior\u003c/span\u003e \u003cspan class=\"k\"\u003ein\u003c/span\u003e \u003cspan class=\"n\"\u003etu\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eBehaviorMap\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eValues\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"cm\"\u003e/* Behavior InfoからBehavior Cross Reference Infoを生成 */\u003c/span\u003e\n            \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003exref_behavior\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eBehaviorCrossReferenceInfo\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ebehavior\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n            \u003cspan class=\"cm\"\u003e/* Cross Reference Mapに登録 */\u003c/span\u003e\n            \u003cspan class=\"n\"\u003emap1\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAdd\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003exref_behavior\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n            \u003cspan class=\"cm\"\u003e/* Behavior InfoのInvokation Infoリストを走査 */\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eforeach\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003einvoke\u003c/span\u003e \u003cspan class=\"k\"\u003ein\u003c/span\u003e \u003cspan class=\"n\"\u003ebehavior\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eInvokations\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"cm\"\u003e/* Invokation InfoからBehavior Cross Reference Infoを生成 */\u003c/span\u003e\n                \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003exref_invoke\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eBehaviorCrossReferenceInfo\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003einvoke\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n                \u003cspan class=\"cm\"\u003e/* Cross Reference Mapに登録 */\u003c/span\u003e\n                \u003cspan class=\"n\"\u003emap1\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAdd\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003exref_invoke\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"cm\"\u003e/* 新規Behavior Cross Reference Mapを生成 */\u003c/span\u003e\n    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003emap2\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eBehaviorCrossReferenceMap\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n    \u003cspan class=\"cm\"\u003e/* 前段で生成したBehavior Cross Reference Mapの各キーを走査 */\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eforeach\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003ekey\u003c/span\u003e \u003cspan class=\"k\"\u003ein\u003c/span\u003e \u003cspan class=\"n\"\u003emap1\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eKeys\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"cm\"\u003e/* キーを指定してハッシュセットを取得 */\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"k\"\u003eset\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003emap1\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003ekey\u003c/span\u003e\u003cspan class=\"p\"\u003e];\u003c/span\u003e\n\n        \u003cspan class=\"cm\"\u003e/* Behavior Cross Reference InfoのTypeでソート */\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003esorted_set\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003eset\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eOrderBy\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eType\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nf\"\u003eToHashSet\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n        \u003cspan class=\"cm\"\u003e/* ソート後のハッシュセットを登録 */\u003c/span\u003e\n        \u003cspan class=\"n\"\u003emap2\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAdd\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ekey\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003esorted_set\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eCrossReferenceMap\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003emap2\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e次に、生成したクロスリファレンス情報を順番に出力します。\u003cbr\u003e\n実装コードを以下に示します。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"cs\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eクロスリファレンス情報出力\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eDumpCrossReferences\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"cm\"\u003e/* Behavior Cross Reference Mapの各キー(Behavior ID)を走査 */\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eforeach\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003exref_id\u003c/span\u003e \u003cspan class=\"k\"\u003ein\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eCrossReferenceMap\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eKeys\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"cm\"\u003e/* Behavior IDを出力 */\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSendMessage\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e$\"\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003exref_id\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n        \u003cspan class=\"cm\"\u003e/* キーを指定してBehavior Cross Reference Infoのハッシュセットを取得 */\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003exref_hash_set\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eCrossReferenceMap\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003exref_id\u003c/span\u003e\u003cspan class=\"p\"\u003e];\u003c/span\u003e\n\n        \u003cspan class=\"cm\"\u003e/* ハッシュセットの要素(Behavior Cross Reference Info)を走査 */\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eforeach\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003exref_info\u003c/span\u003e \u003cspan class=\"k\"\u003ein\u003c/span\u003e \u003cspan class=\"n\"\u003exref_hash_set\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003etype\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003exref_info\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eType\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eloc\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003exref_info\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eLocation\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSendMessage\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e$\"  [\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003etype\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e] @ \u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003eloc\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSendMessage\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003eソース全文を以下に示します。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"cs\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eCrossReferencesDumper.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003estatic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eCrossReferencesDumper\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003estatic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eDump\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eTranslationUnitMap\u003c/span\u003e \u003cspan class=\"n\"\u003emap\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eimpl\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eCrossReferencesDumperImpl\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n        \u003cspan class=\"n\"\u003eimpl\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eExecute\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003emap\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eCrossReferencesDumperImpl\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eAMessageable\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003eTranslationUnitMap\u003c/span\u003e \u003cspan class=\"n\"\u003eTranslationUnitMap\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"k\"\u003eset\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eTranslationUnitMap\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003eBehaviorCrossReferenceMap\u003c/span\u003e \u003cspan class=\"n\"\u003eCrossReferenceMap\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"k\"\u003eset\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eBehaviorCrossReferenceMap\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eExecute\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eTranslationUnitMap\u003c/span\u003e \u003cspan class=\"n\"\u003emap\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eTranslationUnitMap\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003emap\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n            \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAnalyseCrossReferences\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n            \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSendMessage\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSendMessage\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"--------------------------------------\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSendMessage\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Cross References:\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n            \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eDumpCrossReferences\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eAnalyseCrossReferences\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003emap1\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eBehaviorCrossReferenceMap\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n            \u003cspan class=\"k\"\u003eforeach\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003etu\u003c/span\u003e \u003cspan class=\"k\"\u003ein\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eTranslationUnitMap\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eValues\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"k\"\u003eforeach\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003ebehavior\u003c/span\u003e \u003cspan class=\"k\"\u003ein\u003c/span\u003e \u003cspan class=\"n\"\u003etu\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eBehaviorMap\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eValues\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003exref_behavior\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eBehaviorCrossReferenceInfo\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ebehavior\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n                    \u003cspan class=\"n\"\u003emap1\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAdd\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003exref_behavior\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n                    \u003cspan class=\"k\"\u003eforeach\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003einvoke\u003c/span\u003e \u003cspan class=\"k\"\u003ein\u003c/span\u003e \u003cspan class=\"n\"\u003ebehavior\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eInvokations\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n                    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003exref_invoke\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eBehaviorCrossReferenceInfo\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003einvoke\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n                        \u003cspan class=\"n\"\u003emap1\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAdd\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003exref_invoke\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n                    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n            \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003emap2\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eBehaviorCrossReferenceMap\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n            \u003cspan class=\"k\"\u003eforeach\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003ekey\u003c/span\u003e \u003cspan class=\"k\"\u003ein\u003c/span\u003e \u003cspan class=\"n\"\u003emap1\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eKeys\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"k\"\u003eset\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003emap1\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003ekey\u003c/span\u003e\u003cspan class=\"p\"\u003e];\u003c/span\u003e\n\n                \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003esorted_set\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003eset\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eOrderBy\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eType\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nf\"\u003eToHashSet\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n                \u003cspan class=\"n\"\u003emap2\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAdd\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ekey\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003esorted_set\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n            \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eCrossReferenceMap\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003emap2\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eDumpCrossReferences\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eforeach\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003exref_id\u003c/span\u003e \u003cspan class=\"k\"\u003ein\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eCrossReferenceMap\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eKeys\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSendMessage\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e$\"\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003exref_id\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n                \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003exref_hash_set\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eCrossReferenceMap\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003exref_id\u003c/span\u003e\u003cspan class=\"p\"\u003e];\u003c/span\u003e\n\n                \u003cspan class=\"k\"\u003eforeach\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003exref_info\u003c/span\u003e \u003cspan class=\"k\"\u003ein\u003c/span\u003e \u003cspan class=\"n\"\u003exref_hash_set\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003etype\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003exref_info\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eType\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n                    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eloc\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003exref_info\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eLocation\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n                    \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSendMessage\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e$\"  [\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003etype\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e] @ \u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003eloc\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n                \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSendMessage\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch5\u003e\n\u003cspan id=\"4-各処理呼び出し\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#4-%E5%90%84%E5%87%A6%E7%90%86%E5%91%BC%E3%81%B3%E5%87%BA%E3%81%97\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e4. 各処理呼び出し\u003c/h5\u003e\n\n\u003cp\u003e最後に、1-3.で実装した各機能を呼び出す処理を実装します。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"cs\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eBehaviorRelationsAnalyser.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003estatic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eBehaviorRelationsAnalyser\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003estatic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eExecute\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"cm\"\u003e/* Translation Unitのパース設定情報を生成 */\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003esetting\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eTranslationUnitParseSetting\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"cm\"\u003e/* パース対象ソースパスの指定 */\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eSources\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eList\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;()\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"s\"\u003e\"./Code2/src/main.cpp\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                \u003cspan class=\"s\"\u003e\"./Code2/src/TestClass.cpp\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e},\u003c/span\u003e\n            \u003cspan class=\"cm\"\u003e/* libclangに渡すコマンドライン引数(インクルードパスなど)の指定 */\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eCommandLineArgs\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eList\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;()\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"s\"\u003e\"-I./Code2/inc\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e},\u003c/span\u003e\n            \u003cspan class=\"cm\"\u003e/* libclangのTranslation Unitパースオプション */\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eParseOptions\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eTranslationUnitFlags\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eNone\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"cm\"\u003e/* ダイアグ情報(構文エラーなど)を表示 */\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eDisplayDiag\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"cm\"\u003e/* AST情報を出力(デバッグ用) */\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eDumpAST\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e};\u003c/span\u003e\n\n        \u003cspan class=\"cm\"\u003e/* Translation Unitをパースし、Translation Unit Mapを生成 */\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003emap\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eTranslationUnitsParser\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eParse\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003esetting\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n        \u003cspan class=\"cm\"\u003e/* Translation Unit Mapから関数コールツリーを生成して出力 */\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eInvokationTreeDumper\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eDump\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003emap\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n        \u003cspan class=\"cm\"\u003e/* Translation Unit Mapから関数クロスリファレンス情報を生成して出力 */\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eCrossReferencesDumper\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eDump\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003emap\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e\u003cbr\u003e\u003c/p\u003e\n\n\u003cp\u003e解析対象サンプルソースを入力して実行した結果を示します。\u003cbr\u003e\n上から、ASTのダンプ結果、関数コールツリー、関数クロスリファレンス情報が出力されています。  \u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eLog.txt\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eAST Dump:\n[TranslationUnit] ./Code2/src/main.cpp @ \n  [Namespace] root @ ./Code2/inc/TestClass.h[L.3,C.11]\n    [Namespace] sub1 @ ./Code2/inc/TestClass.h[L.5,C.15]\n      [Namespace] sub2 @ ./Code2/inc/TestClass.h[L.7,C.19]\n        [ClassDeclaration] TestClass @ ./Code2/inc/TestClass.h[L.9,C.19]\n          [LastDeclaration]  @ ./Code2/inc/TestClass.h[L.11,C.13]\n          [Constructor] TestClass @ ./Code2/inc/TestClass.h[L.12,C.17]\n          [Destructor] ~TestClass @ ./Code2/inc/TestClass.h[L.13,C.17]\n          [CXXMethod] PublicMethod @ ./Code2/inc/TestClass.h[L.15,C.22]\n            [ParmDeclaration] a @ ./Code2/inc/TestClass.h[L.15,C.39]\n            [ParmDeclaration] b @ ./Code2/inc/TestClass.h[L.15,C.46]\n          [CXXMethod] GetA @ ./Code2/inc/TestClass.h[L.17,C.21]\n            [CompoundStatement]  @ ./Code2/inc/TestClass.h[L.17,C.28]\n              [ReturnStatement]  @ ./Code2/inc/TestClass.h[L.17,C.30]\n                [UnexposedExpression] m_a @ ./Code2/inc/TestClass.h[L.17,C.43]\n                  [MemberReferenceExpression] m_a @ ./Code2/inc/TestClass.h[L.17,C.43]\n                    [CXXThisExpression]  @ ./Code2/inc/TestClass.h[L.17,C.37]\n          [CXXMethod] GetB @ ./Code2/inc/TestClass.h[L.18,C.21]\n            [CompoundStatement]  @ ./Code2/inc/TestClass.h[L.18,C.28]\n              [ReturnStatement]  @ ./Code2/inc/TestClass.h[L.18,C.30]\n                [UnexposedExpression] m_b @ ./Code2/inc/TestClass.h[L.18,C.43]\n                  [MemberReferenceExpression] m_b @ ./Code2/inc/TestClass.h[L.18,C.43]\n                    [CXXThisExpression]  @ ./Code2/inc/TestClass.h[L.18,C.37]\n          [CXXMethod] GetResult @ ./Code2/inc/TestClass.h[L.19,C.21]\n            [CompoundStatement]  @ ./Code2/inc/TestClass.h[L.19,C.33]\n              [ReturnStatement]  @ ./Code2/inc/TestClass.h[L.19,C.35]\n                [UnexposedExpression] m_result @ ./Code2/inc/TestClass.h[L.19,C.48]\n                  [MemberReferenceExpression] m_result @ ./Code2/inc/TestClass.h[L.19,C.48]\n                    [CXXThisExpression]  @ ./Code2/inc/TestClass.h[L.19,C.42]\n          [CXXMethod] SetA @ ./Code2/inc/TestClass.h[L.21,C.22]\n            [ParmDeclaration] a @ ./Code2/inc/TestClass.h[L.21,C.31]\n            [CompoundStatement]  @ ./Code2/inc/TestClass.h[L.21,C.34]\n              [BinaryOperator]  @ ./Code2/inc/TestClass.h[L.21,C.36]\n                [MemberReferenceExpression] m_a @ ./Code2/inc/TestClass.h[L.21,C.42]\n                  [CXXThisExpression]  @ ./Code2/inc/TestClass.h[L.21,C.36]\n                [UnexposedExpression] a @ ./Code2/inc/TestClass.h[L.21,C.48]\n                  [DeclarationReferenceExpression] a @ ./Code2/inc/TestClass.h[L.21,C.48]\n          [CXXMethod] SetB @ ./Code2/inc/TestClass.h[L.22,C.22]\n            [ParmDeclaration] b @ ./Code2/inc/TestClass.h[L.22,C.31]\n            [CompoundStatement]  @ ./Code2/inc/TestClass.h[L.22,C.34]\n              [BinaryOperator]  @ ./Code2/inc/TestClass.h[L.22,C.36]\n                [MemberReferenceExpression] m_b @ ./Code2/inc/TestClass.h[L.22,C.42]\n                  [CXXThisExpression]  @ ./Code2/inc/TestClass.h[L.22,C.36]\n                [UnexposedExpression] b @ ./Code2/inc/TestClass.h[L.22,C.48]\n                  [DeclarationReferenceExpression] b @ ./Code2/inc/TestClass.h[L.22,C.48]\n          [CXXMethod] SetResult @ ./Code2/inc/TestClass.h[L.23,C.22]\n            [ParmDeclaration] result @ ./Code2/inc/TestClass.h[L.23,C.36]\n            [CompoundStatement]  @ ./Code2/inc/TestClass.h[L.23,C.44]\n              [BinaryOperator]  @ ./Code2/inc/TestClass.h[L.23,C.46]\n                [MemberReferenceExpression] m_result @ ./Code2/inc/TestClass.h[L.23,C.52]\n                  [CXXThisExpression]  @ ./Code2/inc/TestClass.h[L.23,C.46]\n                [UnexposedExpression] result @ ./Code2/inc/TestClass.h[L.23,C.63]\n                  [DeclarationReferenceExpression] result @ ./Code2/inc/TestClass.h[L.23,C.63]\n          [LastDeclaration]  @ ./Code2/inc/TestClass.h[L.25,C.13]\n          [CXXMethod] PrivateMethod @ ./Code2/inc/TestClass.h[L.26,C.21]\n            [ParmDeclaration] a @ ./Code2/inc/TestClass.h[L.26,C.39]\n            [ParmDeclaration] b @ ./Code2/inc/TestClass.h[L.26,C.46]\n          [LastDeclaration]  @ ./Code2/inc/TestClass.h[L.28,C.13]\n          [FieldDeclaration] m_a @ ./Code2/inc/TestClass.h[L.29,C.21]\n          [FieldDeclaration] m_b @ ./Code2/inc/TestClass.h[L.30,C.21]\n          [FieldDeclaration] m_result @ ./Code2/inc/TestClass.h[L.31,C.21]\n  [FunctionDeclaration] RecursiveCallTest @ ./Code2/src/main.cpp[L.5,C.6]\n    [ParmDeclaration] i @ ./Code2/src/main.cpp[L.5,C.28]\n  [FunctionDeclaration] main @ ./Code2/src/main.cpp[L.7,C.5]\n    [CompoundStatement]  @ ./Code2/src/main.cpp[L.8,C.1]\n      [DeclarationStatement]  @ ./Code2/src/main.cpp[L.9,C.5]\n        [VarDeclaration] test_instance @ ./Code2/src/main.cpp[L.9,C.33]\n          [NamespaceReference] root @ ./Code2/src/main.cpp[L.9,C.5]\n          [NamespaceReference] sub1 @ ./Code2/src/main.cpp[L.9,C.11]\n          [NamespaceReference] sub2 @ ./Code2/src/main.cpp[L.9,C.17]\n          [TypeReference] class root::sub1::sub2::TestClass @ ./Code2/src/main.cpp[L.9,C.23]\n          [CallExpression] TestClass @ ./Code2/src/main.cpp[L.9,C.33]\n      [DeclarationStatement]  @ ./Code2/src/main.cpp[L.10,C.5]\n        [VarDeclaration] a @ ./Code2/src/main.cpp[L.10,C.9]\n          [IntegerLiteral]  @ ./Code2/src/main.cpp[L.10,C.13]\n      [DeclarationStatement]  @ ./Code2/src/main.cpp[L.11,C.5]\n        [VarDeclaration] b @ ./Code2/src/main.cpp[L.11,C.9]\n          [IntegerLiteral]  @ ./Code2/src/main.cpp[L.11,C.13]\n      [DeclarationStatement]  @ ./Code2/src/main.cpp[L.12,C.5]\n        [VarDeclaration] result @ ./Code2/src/main.cpp[L.12,C.9]\n          [IntegerLiteral]  @ ./Code2/src/main.cpp[L.12,C.18]\n      [CallExpression] SetA @ ./Code2/src/main.cpp[L.14,C.5]\n        [MemberReferenceExpression] SetA @ ./Code2/src/main.cpp[L.14,C.19]\n          [DeclarationReferenceExpression] test_instance @ ./Code2/src/main.cpp[L.14,C.5]\n        [UnexposedExpression] a @ ./Code2/src/main.cpp[L.14,C.24]\n          [DeclarationReferenceExpression] a @ ./Code2/src/main.cpp[L.14,C.24]\n      [CallExpression] SetB @ ./Code2/src/main.cpp[L.16,C.5]\n        [MemberReferenceExpression] SetB @ ./Code2/src/main.cpp[L.16,C.19]\n          [DeclarationReferenceExpression] test_instance @ ./Code2/src/main.cpp[L.16,C.5]\n        [UnexposedExpression] b @ ./Code2/src/main.cpp[L.16,C.24]\n          [DeclarationReferenceExpression] b @ ./Code2/src/main.cpp[L.16,C.24]\n      [CallExpression] operator\u0026lt;\u0026lt; @ ./Code2/src/main.cpp[L.18,C.5]\n        [CallExpression] operator\u0026lt;\u0026lt; @ ./Code2/src/main.cpp[L.18,C.5]\n          [CallExpression] operator\u0026lt;\u0026lt; @ ./Code2/src/main.cpp[L.18,C.5]\n            [DeclarationReferenceExpression] cout @ ./Code2/src/main.cpp[L.18,C.10]\n              [NamespaceReference] std @ ./Code2/src/main.cpp[L.18,C.5]\n            [UnexposedExpression] operator\u0026lt;\u0026lt; @ ./Code2/src/main.cpp[L.18,C.15]\n              [DeclarationReferenceExpression] operator\u0026lt;\u0026lt; @ ./Code2/src/main.cpp[L.18,C.15]\n            [UnexposedExpression]  @ ./Code2/src/main.cpp[L.18,C.18]\n              [StringLiteral] \"a : \" @ ./Code2/src/main.cpp[L.18,C.18]\n          [UnexposedExpression] operator\u0026lt;\u0026lt; @ ./Code2/src/main.cpp[L.18,C.25]\n            [DeclarationReferenceExpression] operator\u0026lt;\u0026lt; @ ./Code2/src/main.cpp[L.18,C.25]\n          [CallExpression] GetA @ ./Code2/src/main.cpp[L.18,C.28]\n            [MemberReferenceExpression] GetA @ ./Code2/src/main.cpp[L.18,C.42]\n              [DeclarationReferenceExpression] test_instance @ ./Code2/src/main.cpp[L.18,C.28]\n        [UnexposedExpression] operator\u0026lt;\u0026lt; @ ./Code2/src/main.cpp[L.18,C.49]\n          [DeclarationReferenceExpression] operator\u0026lt;\u0026lt; @ ./Code2/src/main.cpp[L.18,C.49]\n        [UnexposedExpression] endl @ ./Code2/src/main.cpp[L.18,C.57]\n          [DeclarationReferenceExpression] endl @ ./Code2/src/main.cpp[L.18,C.57]\n            [NamespaceReference] std @ ./Code2/src/main.cpp[L.18,C.52]\n      [CallExpression] operator\u0026lt;\u0026lt; @ ./Code2/src/main.cpp[L.20,C.5]\n        [CallExpression] operator\u0026lt;\u0026lt; @ ./Code2/src/main.cpp[L.20,C.5]\n          [CallExpression] operator\u0026lt;\u0026lt; @ ./Code2/src/main.cpp[L.20,C.5]\n            [DeclarationReferenceExpression] cout @ ./Code2/src/main.cpp[L.20,C.10]\n              [NamespaceReference] std @ ./Code2/src/main.cpp[L.20,C.5]\n            [UnexposedExpression] operator\u0026lt;\u0026lt; @ ./Code2/src/main.cpp[L.20,C.15]\n              [DeclarationReferenceExpression] operator\u0026lt;\u0026lt; @ ./Code2/src/main.cpp[L.20,C.15]\n            [UnexposedExpression]  @ ./Code2/src/main.cpp[L.20,C.18]\n              [StringLiteral] \"b : \" @ ./Code2/src/main.cpp[L.20,C.18]\n          [UnexposedExpression] operator\u0026lt;\u0026lt; @ ./Code2/src/main.cpp[L.20,C.25]\n            [DeclarationReferenceExpression] operator\u0026lt;\u0026lt; @ ./Code2/src/main.cpp[L.20,C.25]\n          [CallExpression] GetB @ ./Code2/src/main.cpp[L.20,C.28]\n            [MemberReferenceExpression] GetB @ ./Code2/src/main.cpp[L.20,C.42]\n              [DeclarationReferenceExpression] test_instance @ ./Code2/src/main.cpp[L.20,C.28]\n        [UnexposedExpression] operator\u0026lt;\u0026lt; @ ./Code2/src/main.cpp[L.20,C.49]\n          [DeclarationReferenceExpression] operator\u0026lt;\u0026lt; @ ./Code2/src/main.cpp[L.20,C.49]\n        [UnexposedExpression] endl @ ./Code2/src/main.cpp[L.20,C.57]\n          [DeclarationReferenceExpression] endl @ ./Code2/src/main.cpp[L.20,C.57]\n            [NamespaceReference] std @ ./Code2/src/main.cpp[L.20,C.52]\n      [CallExpression] PublicMethod @ ./Code2/src/main.cpp[L.22,C.5]\n        [MemberReferenceExpression] PublicMethod @ ./Code2/src/main.cpp[L.22,C.19]\n          [DeclarationReferenceExpression] test_instance @ ./Code2/src/main.cpp[L.22,C.5]\n        [UnexposedExpression] a @ ./Code2/src/main.cpp[L.22,C.32]\n          [DeclarationReferenceExpression] a @ ./Code2/src/main.cpp[L.22,C.32]\n        [UnexposedExpression] b @ ./Code2/src/main.cpp[L.22,C.35]\n          [DeclarationReferenceExpression] b @ ./Code2/src/main.cpp[L.22,C.35]\n      [BinaryOperator]  @ ./Code2/src/main.cpp[L.24,C.5]\n        [DeclarationReferenceExpression] result @ ./Code2/src/main.cpp[L.24,C.5]\n        [CallExpression] GetResult @ ./Code2/src/main.cpp[L.24,C.14]\n          [MemberReferenceExpression] GetResult @ ./Code2/src/main.cpp[L.24,C.28]\n            [DeclarationReferenceExpression] test_instance @ ./Code2/src/main.cpp[L.24,C.14]\n      [CallExpression] operator\u0026lt;\u0026lt; @ ./Code2/src/main.cpp[L.26,C.5]\n        [CallExpression] operator\u0026lt;\u0026lt; @ ./Code2/src/main.cpp[L.26,C.5]\n          [CallExpression] operator\u0026lt;\u0026lt; @ ./Code2/src/main.cpp[L.26,C.5]\n            [DeclarationReferenceExpression] cout @ ./Code2/src/main.cpp[L.26,C.10]\n              [NamespaceReference] std @ ./Code2/src/main.cpp[L.26,C.5]\n            [UnexposedExpression] operator\u0026lt;\u0026lt; @ ./Code2/src/main.cpp[L.26,C.15]\n              [DeclarationReferenceExpression] operator\u0026lt;\u0026lt; @ ./Code2/src/main.cpp[L.26,C.15]\n            [UnexposedExpression]  @ ./Code2/src/main.cpp[L.26,C.18]\n              [StringLiteral] \"result : \" @ ./Code2/src/main.cpp[L.26,C.18]\n          [UnexposedExpression] operator\u0026lt;\u0026lt; @ ./Code2/src/main.cpp[L.26,C.30]\n            [DeclarationReferenceExpression] operator\u0026lt;\u0026lt; @ ./Code2/src/main.cpp[L.26,C.30]\n          [UnexposedExpression] result @ ./Code2/src/main.cpp[L.26,C.33]\n            [DeclarationReferenceExpression] result @ ./Code2/src/main.cpp[L.26,C.33]\n        [UnexposedExpression] operator\u0026lt;\u0026lt; @ ./Code2/src/main.cpp[L.26,C.40]\n          [DeclarationReferenceExpression] operator\u0026lt;\u0026lt; @ ./Code2/src/main.cpp[L.26,C.40]\n        [UnexposedExpression] endl @ ./Code2/src/main.cpp[L.26,C.48]\n          [DeclarationReferenceExpression] endl @ ./Code2/src/main.cpp[L.26,C.48]\n            [NamespaceReference] std @ ./Code2/src/main.cpp[L.26,C.43]\n      [CallExpression] RecursiveCallTest @ ./Code2/src/main.cpp[L.28,C.5]\n        [UnexposedExpression] RecursiveCallTest @ ./Code2/src/main.cpp[L.28,C.5]\n          [DeclarationReferenceExpression] RecursiveCallTest @ ./Code2/src/main.cpp[L.28,C.5]\n        [IntegerLiteral]  @ ./Code2/src/main.cpp[L.28,C.23]\n  [FunctionDeclaration] RecursiveCallTest @ ./Code2/src/main.cpp[L.31,C.6]\n    [ParmDeclaration] i @ ./Code2/src/main.cpp[L.31,C.28]\n    [CompoundStatement]  @ ./Code2/src/main.cpp[L.32,C.1]\n      [IfStatement]  @ ./Code2/src/main.cpp[L.33,C.5]\n        [BinaryOperator]  @ ./Code2/src/main.cpp[L.33,C.9]\n          [UnexposedExpression] i @ ./Code2/src/main.cpp[L.33,C.9]\n            [DeclarationReferenceExpression] i @ ./Code2/src/main.cpp[L.33,C.9]\n          [IntegerLiteral]  @ ./Code2/src/main.cpp[L.33,C.13]\n        [CompoundStatement]  @ ./Code2/src/main.cpp[L.34,C.5]\n          [ReturnStatement]  @ ./Code2/src/main.cpp[L.35,C.9]\n        [CompoundStatement]  @ ./Code2/src/main.cpp[L.38,C.5]\n          [CallExpression] operator\u0026lt;\u0026lt; @ ./Code2/src/main.cpp[L.39,C.9]\n            [CallExpression] operator\u0026lt;\u0026lt; @ ./Code2/src/main.cpp[L.39,C.9]\n              [CallExpression] operator\u0026lt;\u0026lt; @ ./Code2/src/main.cpp[L.39,C.9]\n                [DeclarationReferenceExpression] cout @ ./Code2/src/main.cpp[L.39,C.14]\n                  [NamespaceReference] std @ ./Code2/src/main.cpp[L.39,C.9]\n                [UnexposedExpression] operator\u0026lt;\u0026lt; @ ./Code2/src/main.cpp[L.39,C.19]\n                  [DeclarationReferenceExpression] operator\u0026lt;\u0026lt; @ ./Code2/src/main.cpp[L.39,C.19]\n                [UnexposedExpression]  @ ./Code2/src/main.cpp[L.39,C.22]\n                  [StringLiteral] \"i : \" @ ./Code2/src/main.cpp[L.39,C.22]\n              [UnexposedExpression] operator\u0026lt;\u0026lt; @ ./Code2/src/main.cpp[L.39,C.29]\n                [DeclarationReferenceExpression] operator\u0026lt;\u0026lt; @ ./Code2/src/main.cpp[L.39,C.29]\n              [UnexposedExpression] i @ ./Code2/src/main.cpp[L.39,C.32]\n                [DeclarationReferenceExpression] i @ ./Code2/src/main.cpp[L.39,C.32]\n            [UnexposedExpression] operator\u0026lt;\u0026lt; @ ./Code2/src/main.cpp[L.39,C.34]\n              [DeclarationReferenceExpression] operator\u0026lt;\u0026lt; @ ./Code2/src/main.cpp[L.39,C.34]\n            [UnexposedExpression] endl @ ./Code2/src/main.cpp[L.39,C.42]\n              [DeclarationReferenceExpression] endl @ ./Code2/src/main.cpp[L.39,C.42]\n                [NamespaceReference] std @ ./Code2/src/main.cpp[L.39,C.37]\n          [CallExpression] RecursiveCallTest @ ./Code2/src/main.cpp[L.41,C.9]\n            [UnexposedExpression] RecursiveCallTest @ ./Code2/src/main.cpp[L.41,C.9]\n              [DeclarationReferenceExpression] RecursiveCallTest @ ./Code2/src/main.cpp[L.41,C.9]\n            [BinaryOperator]  @ ./Code2/src/main.cpp[L.41,C.27]\n              [UnexposedExpression] i @ ./Code2/src/main.cpp[L.41,C.27]\n                [DeclarationReferenceExpression] i @ ./Code2/src/main.cpp[L.41,C.27]\n              [IntegerLiteral]  @ ./Code2/src/main.cpp[L.41,C.31]\nAST Dump:\n[TranslationUnit] ./Code2/src/TestClass.cpp @ \n  [Namespace] root @ ./Code2/inc/TestClass.h[L.3,C.11]\n    [Namespace] sub1 @ ./Code2/inc/TestClass.h[L.5,C.15]\n      [Namespace] sub2 @ ./Code2/inc/TestClass.h[L.7,C.19]\n        [ClassDeclaration] TestClass @ ./Code2/inc/TestClass.h[L.9,C.19]\n          [LastDeclaration]  @ ./Code2/inc/TestClass.h[L.11,C.13]\n          [Constructor] TestClass @ ./Code2/inc/TestClass.h[L.12,C.17]\n          [Destructor] ~TestClass @ ./Code2/inc/TestClass.h[L.13,C.17]\n          [CXXMethod] PublicMethod @ ./Code2/inc/TestClass.h[L.15,C.22]\n            [ParmDeclaration] a @ ./Code2/inc/TestClass.h[L.15,C.39]\n            [ParmDeclaration] b @ ./Code2/inc/TestClass.h[L.15,C.46]\n          [CXXMethod] GetA @ ./Code2/inc/TestClass.h[L.17,C.21]\n            [CompoundStatement]  @ ./Code2/inc/TestClass.h[L.17,C.28]\n              [ReturnStatement]  @ ./Code2/inc/TestClass.h[L.17,C.30]\n                [UnexposedExpression] m_a @ ./Code2/inc/TestClass.h[L.17,C.43]\n                  [MemberReferenceExpression] m_a @ ./Code2/inc/TestClass.h[L.17,C.43]\n                    [CXXThisExpression]  @ ./Code2/inc/TestClass.h[L.17,C.37]\n          [CXXMethod] GetB @ ./Code2/inc/TestClass.h[L.18,C.21]\n            [CompoundStatement]  @ ./Code2/inc/TestClass.h[L.18,C.28]\n              [ReturnStatement]  @ ./Code2/inc/TestClass.h[L.18,C.30]\n                [UnexposedExpression] m_b @ ./Code2/inc/TestClass.h[L.18,C.43]\n                  [MemberReferenceExpression] m_b @ ./Code2/inc/TestClass.h[L.18,C.43]\n                    [CXXThisExpression]  @ ./Code2/inc/TestClass.h[L.18,C.37]\n          [CXXMethod] GetResult @ ./Code2/inc/TestClass.h[L.19,C.21]\n            [CompoundStatement]  @ ./Code2/inc/TestClass.h[L.19,C.33]\n              [ReturnStatement]  @ ./Code2/inc/TestClass.h[L.19,C.35]\n                [UnexposedExpression] m_result @ ./Code2/inc/TestClass.h[L.19,C.48]\n                  [MemberReferenceExpression] m_result @ ./Code2/inc/TestClass.h[L.19,C.48]\n                    [CXXThisExpression]  @ ./Code2/inc/TestClass.h[L.19,C.42]\n          [CXXMethod] SetA @ ./Code2/inc/TestClass.h[L.21,C.22]\n            [ParmDeclaration] a @ ./Code2/inc/TestClass.h[L.21,C.31]\n            [CompoundStatement]  @ ./Code2/inc/TestClass.h[L.21,C.34]\n              [BinaryOperator]  @ ./Code2/inc/TestClass.h[L.21,C.36]\n                [MemberReferenceExpression] m_a @ ./Code2/inc/TestClass.h[L.21,C.42]\n                  [CXXThisExpression]  @ ./Code2/inc/TestClass.h[L.21,C.36]\n                [UnexposedExpression] a @ ./Code2/inc/TestClass.h[L.21,C.48]\n                  [DeclarationReferenceExpression] a @ ./Code2/inc/TestClass.h[L.21,C.48]\n          [CXXMethod] SetB @ ./Code2/inc/TestClass.h[L.22,C.22]\n            [ParmDeclaration] b @ ./Code2/inc/TestClass.h[L.22,C.31]\n            [CompoundStatement]  @ ./Code2/inc/TestClass.h[L.22,C.34]\n              [BinaryOperator]  @ ./Code2/inc/TestClass.h[L.22,C.36]\n                [MemberReferenceExpression] m_b @ ./Code2/inc/TestClass.h[L.22,C.42]\n                  [CXXThisExpression]  @ ./Code2/inc/TestClass.h[L.22,C.36]\n                [UnexposedExpression] b @ ./Code2/inc/TestClass.h[L.22,C.48]\n                  [DeclarationReferenceExpression] b @ ./Code2/inc/TestClass.h[L.22,C.48]\n          [CXXMethod] SetResult @ ./Code2/inc/TestClass.h[L.23,C.22]\n            [ParmDeclaration] result @ ./Code2/inc/TestClass.h[L.23,C.36]\n            [CompoundStatement]  @ ./Code2/inc/TestClass.h[L.23,C.44]\n              [BinaryOperator]  @ ./Code2/inc/TestClass.h[L.23,C.46]\n                [MemberReferenceExpression] m_result @ ./Code2/inc/TestClass.h[L.23,C.52]\n                  [CXXThisExpression]  @ ./Code2/inc/TestClass.h[L.23,C.46]\n                [UnexposedExpression] result @ ./Code2/inc/TestClass.h[L.23,C.63]\n                  [DeclarationReferenceExpression] result @ ./Code2/inc/TestClass.h[L.23,C.63]\n          [LastDeclaration]  @ ./Code2/inc/TestClass.h[L.25,C.13]\n          [CXXMethod] PrivateMethod @ ./Code2/inc/TestClass.h[L.26,C.21]\n            [ParmDeclaration] a @ ./Code2/inc/TestClass.h[L.26,C.39]\n            [ParmDeclaration] b @ ./Code2/inc/TestClass.h[L.26,C.46]\n          [LastDeclaration]  @ ./Code2/inc/TestClass.h[L.28,C.13]\n          [FieldDeclaration] m_a @ ./Code2/inc/TestClass.h[L.29,C.21]\n          [FieldDeclaration] m_b @ ./Code2/inc/TestClass.h[L.30,C.21]\n          [FieldDeclaration] m_result @ ./Code2/inc/TestClass.h[L.31,C.21]\n  [Namespace] root @ ./Code2/src/TestClass.cpp[L.3,C.11]\n    [Namespace] sub1 @ ./Code2/src/TestClass.cpp[L.5,C.15]\n      [Namespace] sub2 @ ./Code2/src/TestClass.cpp[L.7,C.19]\n        [Constructor] TestClass @ ./Code2/src/TestClass.cpp[L.9,C.24]\n          [TypeReference] class root::sub1::sub2::TestClass @ ./Code2/src/TestClass.cpp[L.9,C.13]\n          [MemberReference] m_a @ ./Code2/src/TestClass.cpp[L.10,C.19]\n          [IntegerLiteral]  @ ./Code2/src/TestClass.cpp[L.10,C.23]\n          [MemberReference] m_b @ ./Code2/src/TestClass.cpp[L.11,C.19]\n          [IntegerLiteral]  @ ./Code2/src/TestClass.cpp[L.11,C.23]\n          [MemberReference] m_result @ ./Code2/src/TestClass.cpp[L.12,C.19]\n          [IntegerLiteral]  @ ./Code2/src/TestClass.cpp[L.12,C.28]\n          [CompoundStatement]  @ ./Code2/src/TestClass.cpp[L.13,C.13]\n        [Destructor] ~TestClass @ ./Code2/src/TestClass.cpp[L.16,C.24]\n          [TypeReference] class root::sub1::sub2::TestClass @ ./Code2/src/TestClass.cpp[L.16,C.13]\n          [CompoundStatement]  @ ./Code2/src/TestClass.cpp[L.17,C.13]\n        [CXXMethod] PublicMethod @ ./Code2/src/TestClass.cpp[L.21,C.29]\n          [TypeReference] class root::sub1::sub2::TestClass @ ./Code2/src/TestClass.cpp[L.21,C.18]\n          [ParmDeclaration] a @ ./Code2/src/TestClass.cpp[L.21,C.46]\n          [ParmDeclaration] b @ ./Code2/src/TestClass.cpp[L.21,C.53]\n          [CompoundStatement]  @ ./Code2/src/TestClass.cpp[L.22,C.13]\n            [DeclarationStatement]  @ ./Code2/src/TestClass.cpp[L.23,C.17]\n              [VarDeclaration] result @ ./Code2/src/TestClass.cpp[L.23,C.21]\n                [CallExpression] PrivateMethod @ ./Code2/src/TestClass.cpp[L.23,C.30]\n                  [MemberReferenceExpression] PrivateMethod @ ./Code2/src/TestClass.cpp[L.23,C.36]\n                    [CXXThisExpression]  @ ./Code2/src/TestClass.cpp[L.23,C.30]\n                  [UnexposedExpression] a @ ./Code2/src/TestClass.cpp[L.23,C.50]\n                    [DeclarationReferenceExpression] a @ ./Code2/src/TestClass.cpp[L.23,C.50]\n                  [UnexposedExpression] b @ ./Code2/src/TestClass.cpp[L.23,C.53]\n                    [DeclarationReferenceExpression] b @ ./Code2/src/TestClass.cpp[L.23,C.53]\n            [CallExpression] SetResult @ ./Code2/src/TestClass.cpp[L.25,C.17]\n              [MemberReferenceExpression] SetResult @ ./Code2/src/TestClass.cpp[L.25,C.23]\n                [CXXThisExpression]  @ ./Code2/src/TestClass.cpp[L.25,C.17]\n              [UnexposedExpression] result @ ./Code2/src/TestClass.cpp[L.25,C.33]\n                [DeclarationReferenceExpression] result @ ./Code2/src/TestClass.cpp[L.25,C.33]\n        [CXXMethod] PrivateMethod @ ./Code2/src/TestClass.cpp[L.28,C.28]\n          [TypeReference] class root::sub1::sub2::TestClass @ ./Code2/src/TestClass.cpp[L.28,C.17]\n          [ParmDeclaration] a @ ./Code2/src/TestClass.cpp[L.28,C.46]\n          [ParmDeclaration] b @ ./Code2/src/TestClass.cpp[L.28,C.53]\n          [CompoundStatement]  @ ./Code2/src/TestClass.cpp[L.29,C.13]\n            [CallExpression] SetA @ ./Code2/src/TestClass.cpp[L.30,C.17]\n              [MemberReferenceExpression] SetA @ ./Code2/src/TestClass.cpp[L.30,C.23]\n                [CXXThisExpression]  @ ./Code2/src/TestClass.cpp[L.30,C.17]\n              [UnexposedExpression] a @ ./Code2/src/TestClass.cpp[L.30,C.28]\n                [DeclarationReferenceExpression] a @ ./Code2/src/TestClass.cpp[L.30,C.28]\n            [CallExpression] SetB @ ./Code2/src/TestClass.cpp[L.31,C.17]\n              [MemberReferenceExpression] SetB @ ./Code2/src/TestClass.cpp[L.31,C.23]\n                [CXXThisExpression]  @ ./Code2/src/TestClass.cpp[L.31,C.17]\n              [UnexposedExpression] b @ ./Code2/src/TestClass.cpp[L.31,C.28]\n                [DeclarationReferenceExpression] b @ ./Code2/src/TestClass.cpp[L.31,C.28]\n            [ReturnStatement]  @ ./Code2/src/TestClass.cpp[L.33,C.17]\n              [BinaryOperator]  @ ./Code2/src/TestClass.cpp[L.33,C.24]\n                [UnexposedExpression] m_a @ ./Code2/src/TestClass.cpp[L.33,C.30]\n                  [MemberReferenceExpression] m_a @ ./Code2/src/TestClass.cpp[L.33,C.30]\n                    [CXXThisExpression]  @ ./Code2/src/TestClass.cpp[L.33,C.24]\n                [UnexposedExpression] m_b @ ./Code2/src/TestClass.cpp[L.33,C.42]\n                  [MemberReferenceExpression] m_b @ ./Code2/src/TestClass.cpp[L.33,C.42]\n                    [CXXThisExpression]  @ ./Code2/src/TestClass.cpp[L.33,C.36]\n\n--------------------------------------\nInvokation Tree:\nint root::sub1::sub2::TestClass::GetA() @ C:\\Works\\Test\\Code2\\inc\\TestClass.h[L.17,C.21]\n\nint root::sub1::sub2::TestClass::GetB() @ C:\\Works\\Test\\Code2\\inc\\TestClass.h[L.18,C.21]\n\nint root::sub1::sub2::TestClass::GetResult() @ C:\\Works\\Test\\Code2\\inc\\TestClass.h[L.19,C.21]\n\nvoid root::sub1::sub2::TestClass::SetA(int) @ C:\\Works\\Test\\Code2\\inc\\TestClass.h[L.21,C.22]\n\nvoid root::sub1::sub2::TestClass::SetB(int) @ C:\\Works\\Test\\Code2\\inc\\TestClass.h[L.22,C.22]\n\nvoid root::sub1::sub2::TestClass::SetResult(int) @ C:\\Works\\Test\\Code2\\inc\\TestClass.h[L.23,C.22]\n\nmain() @ C:\\Works\\Test\\Code2\\src\\main.cpp[L.7,C.5]\n  root::sub1::sub2::TestClass::TestClass() @ C:\\Works\\Test\\Code2\\src\\main.cpp[L.9,C.33]\n  void root::sub1::sub2::TestClass::SetA(int) @ C:\\Works\\Test\\Code2\\src\\main.cpp[L.14,C.5]\n  void root::sub1::sub2::TestClass::SetB(int) @ C:\\Works\\Test\\Code2\\src\\main.cpp[L.16,C.5]\n  std::basic_ostream\u0026lt;char, std::char_traits\u0026lt;char\u0026gt; \u0026gt; \u0026amp; std::basic_ostream::operator\u0026lt;\u0026lt;(std::basic_ostream\u0026lt;char, std::char_traits\u0026lt;char\u0026gt; \u0026gt; \u0026amp;(*)(std::basic_ostream\u0026lt;char, std::char_traits\u0026lt;char\u0026gt; \u0026gt; \u0026amp;) __attribute__((cdecl))) @ C:\\Works\\Test\\Code2\\src\\main.cpp[L.18,C.5]\n     \u0026lt;Behavior Definition Not Found...\u0026gt;\n  std::basic_ostream\u0026lt;char, std::char_traits\u0026lt;char\u0026gt; \u0026gt; \u0026amp; std::basic_ostream::operator\u0026lt;\u0026lt;(int) @ C:\\Works\\Test\\Code2\\src\\main.cpp[L.18,C.5]\n     \u0026lt;Behavior Definition Not Found...\u0026gt;\n  std::operator\u0026lt;\u0026lt;\u0026lt;\u0026gt;(basic_ostream\u0026lt;char, std::char_traits\u0026lt;char\u0026gt; \u0026gt; \u0026amp;, const char *) @ C:\\Works\\Test\\Code2\\src\\main.cpp[L.18,C.5]\n     \u0026lt;Behavior Definition Not Found...\u0026gt;\n  int root::sub1::sub2::TestClass::GetA() @ C:\\Works\\Test\\Code2\\src\\main.cpp[L.18,C.28]\n  std::basic_ostream\u0026lt;char, std::char_traits\u0026lt;char\u0026gt; \u0026gt; \u0026amp; std::basic_ostream::operator\u0026lt;\u0026lt;(std::basic_ostream\u0026lt;char, std::char_traits\u0026lt;char\u0026gt; \u0026gt; \u0026amp;(*)(std::basic_ostream\u0026lt;char, std::char_traits\u0026lt;char\u0026gt; \u0026gt; \u0026amp;) __attribute__((cdecl))) @ C:\\Works\\Test\\Code2\\src\\main.cpp[L.20,C.5]\n     \u0026lt;Behavior Definition Not Found...\u0026gt;\n  std::basic_ostream\u0026lt;char, std::char_traits\u0026lt;char\u0026gt; \u0026gt; \u0026amp; std::basic_ostream::operator\u0026lt;\u0026lt;(int) @ C:\\Works\\Test\\Code2\\src\\main.cpp[L.20,C.5]\n     \u0026lt;Behavior Definition Not Found...\u0026gt;\n  std::operator\u0026lt;\u0026lt;\u0026lt;\u0026gt;(basic_ostream\u0026lt;char, std::char_traits\u0026lt;char\u0026gt; \u0026gt; \u0026amp;, const char *) @ C:\\Works\\Test\\Code2\\src\\main.cpp[L.20,C.5]\n     \u0026lt;Behavior Definition Not Found...\u0026gt;\n  int root::sub1::sub2::TestClass::GetB() @ C:\\Works\\Test\\Code2\\src\\main.cpp[L.20,C.28]\n  void root::sub1::sub2::TestClass::PublicMethod(int, int) @ C:\\Works\\Test\\Code2\\src\\main.cpp[L.22,C.5]\n    int root::sub1::sub2::TestClass::PrivateMethod(int, int) @ C:\\Works\\Test\\Code2\\src\\TestClass.cpp[L.23,C.30]\n      void root::sub1::sub2::TestClass::SetA(int) @ C:\\Works\\Test\\Code2\\src\\TestClass.cpp[L.30,C.17]\n      void root::sub1::sub2::TestClass::SetB(int) @ C:\\Works\\Test\\Code2\\src\\TestClass.cpp[L.31,C.17]\n    void root::sub1::sub2::TestClass::SetResult(int) @ C:\\Works\\Test\\Code2\\src\\TestClass.cpp[L.25,C.17]\n  int root::sub1::sub2::TestClass::GetResult() @ C:\\Works\\Test\\Code2\\src\\main.cpp[L.24,C.14]\n  std::basic_ostream\u0026lt;char, std::char_traits\u0026lt;char\u0026gt; \u0026gt; \u0026amp; std::basic_ostream::operator\u0026lt;\u0026lt;(std::basic_ostream\u0026lt;char, std::char_traits\u0026lt;char\u0026gt; \u0026gt; \u0026amp;(*)(std::basic_ostream\u0026lt;char, std::char_traits\u0026lt;char\u0026gt; \u0026gt; \u0026amp;) __attribute__((cdecl))) @ C:\\Works\\Test\\Code2\\src\\main.cpp[L.26,C.5]\n     \u0026lt;Behavior Definition Not Found...\u0026gt;\n  std::basic_ostream\u0026lt;char, std::char_traits\u0026lt;char\u0026gt; \u0026gt; \u0026amp; std::basic_ostream::operator\u0026lt;\u0026lt;(int) @ C:\\Works\\Test\\Code2\\src\\main.cpp[L.26,C.5]\n     \u0026lt;Behavior Definition Not Found...\u0026gt;\n  std::operator\u0026lt;\u0026lt;\u0026lt;\u0026gt;(basic_ostream\u0026lt;char, std::char_traits\u0026lt;char\u0026gt; \u0026gt; \u0026amp;, const char *) @ C:\\Works\\Test\\Code2\\src\\main.cpp[L.26,C.5]\n     \u0026lt;Behavior Definition Not Found...\u0026gt;\n  RecursiveCallTest(int) @ C:\\Works\\Test\\Code2\\src\\main.cpp[L.28,C.5]\n    std::basic_ostream\u0026lt;char, std::char_traits\u0026lt;char\u0026gt; \u0026gt; \u0026amp; std::basic_ostream::operator\u0026lt;\u0026lt;(std::basic_ostream\u0026lt;char, std::char_traits\u0026lt;char\u0026gt; \u0026gt; \u0026amp;(*)(std::basic_ostream\u0026lt;char, std::char_traits\u0026lt;char\u0026gt; \u0026gt; \u0026amp;) __attribute__((cdecl))) @ C:\\Works\\Test\\Code2\\src\\main.cpp[L.39,C.9]\n       \u0026lt;Behavior Definition Not Found...\u0026gt;\n    std::basic_ostream\u0026lt;char, std::char_traits\u0026lt;char\u0026gt; \u0026gt; \u0026amp; std::basic_ostream::operator\u0026lt;\u0026lt;(int) @ C:\\Works\\Test\\Code2\\src\\main.cpp[L.39,C.9]\n       \u0026lt;Behavior Definition Not Found...\u0026gt;\n    std::operator\u0026lt;\u0026lt;\u0026lt;\u0026gt;(basic_ostream\u0026lt;char, std::char_traits\u0026lt;char\u0026gt; \u0026gt; \u0026amp;, const char *) @ C:\\Works\\Test\\Code2\\src\\main.cpp[L.39,C.9]\n       \u0026lt;Behavior Definition Not Found...\u0026gt;\n    RecursiveCallTest(int) @ C:\\Works\\Test\\Code2\\src\\main.cpp[L.41,C.9]\n       \u0026lt;Recursive Call...\u0026gt;\n\nRecursiveCallTest(int) @ C:\\Works\\Test\\Code2\\src\\main.cpp[L.31,C.6]\n  std::basic_ostream\u0026lt;char, std::char_traits\u0026lt;char\u0026gt; \u0026gt; \u0026amp; std::basic_ostream::operator\u0026lt;\u0026lt;(std::basic_ostream\u0026lt;char, std::char_traits\u0026lt;char\u0026gt; \u0026gt; \u0026amp;(*)(std::basic_ostream\u0026lt;char, std::char_traits\u0026lt;char\u0026gt; \u0026gt; \u0026amp;) __attribute__((cdecl))) @ C:\\Works\\Test\\Code2\\src\\main.cpp[L.39,C.9]\n     \u0026lt;Behavior Definition Not Found...\u0026gt;\n  std::basic_ostream\u0026lt;char, std::char_traits\u0026lt;char\u0026gt; \u0026gt; \u0026amp; std::basic_ostream::operator\u0026lt;\u0026lt;(int) @ C:\\Works\\Test\\Code2\\src\\main.cpp[L.39,C.9]\n     \u0026lt;Behavior Definition Not Found...\u0026gt;\n  std::operator\u0026lt;\u0026lt;\u0026lt;\u0026gt;(basic_ostream\u0026lt;char, std::char_traits\u0026lt;char\u0026gt; \u0026gt; \u0026amp;, const char *) @ C:\\Works\\Test\\Code2\\src\\main.cpp[L.39,C.9]\n     \u0026lt;Behavior Definition Not Found...\u0026gt;\n  RecursiveCallTest(int) @ C:\\Works\\Test\\Code2\\src\\main.cpp[L.41,C.9]\n     \u0026lt;Recursive Call...\u0026gt;\n\nroot::sub1::sub2::TestClass::TestClass() @ C:\\Works\\Test\\Code2\\src\\TestClass.cpp[L.9,C.24]\n\nroot::sub1::sub2::TestClass::~TestClass() @ C:\\Works\\Test\\Code2\\src\\TestClass.cpp[L.16,C.24]\n\nvoid root::sub1::sub2::TestClass::PublicMethod(int, int) @ C:\\Works\\Test\\Code2\\src\\TestClass.cpp[L.21,C.29]\n  int root::sub1::sub2::TestClass::PrivateMethod(int, int) @ C:\\Works\\Test\\Code2\\src\\TestClass.cpp[L.23,C.30]\n    void root::sub1::sub2::TestClass::SetA(int) @ C:\\Works\\Test\\Code2\\src\\TestClass.cpp[L.30,C.17]\n    void root::sub1::sub2::TestClass::SetB(int) @ C:\\Works\\Test\\Code2\\src\\TestClass.cpp[L.31,C.17]\n  void root::sub1::sub2::TestClass::SetResult(int) @ C:\\Works\\Test\\Code2\\src\\TestClass.cpp[L.25,C.17]\n\nint root::sub1::sub2::TestClass::PrivateMethod(int, int) @ C:\\Works\\Test\\Code2\\src\\TestClass.cpp[L.28,C.28]\n  void root::sub1::sub2::TestClass::SetA(int) @ C:\\Works\\Test\\Code2\\src\\TestClass.cpp[L.30,C.17]\n  void root::sub1::sub2::TestClass::SetB(int) @ C:\\Works\\Test\\Code2\\src\\TestClass.cpp[L.31,C.17]\n\n\n--------------------------------------\nCross References:\nroot::sub1::sub2::TestClass::TestClass()\n  [Call] @ C:\\Works\\Test\\Code2\\src\\main.cpp[L.9,C.33]\n  [Declaration] @ C:\\Works\\Test\\Code2\\inc\\TestClass.h[L.12,C.17]\n  [Definition] @ C:\\Works\\Test\\Code2\\src\\TestClass.cpp[L.9,C.24]\n\nroot::sub1::sub2::TestClass::~TestClass()\n  [Declaration] @ C:\\Works\\Test\\Code2\\inc\\TestClass.h[L.13,C.17]\n  [Definition] @ C:\\Works\\Test\\Code2\\src\\TestClass.cpp[L.16,C.24]\n\nvoid root::sub1::sub2::TestClass::PublicMethod(int, int)\n  [Call] @ C:\\Works\\Test\\Code2\\src\\main.cpp[L.22,C.5]\n  [Declaration] @ C:\\Works\\Test\\Code2\\inc\\TestClass.h[L.15,C.22]\n  [Definition] @ C:\\Works\\Test\\Code2\\src\\TestClass.cpp[L.21,C.29]\n\nint root::sub1::sub2::TestClass::GetA()\n  [Call] @ C:\\Works\\Test\\Code2\\src\\main.cpp[L.18,C.28]\n  [Definition] @ C:\\Works\\Test\\Code2\\inc\\TestClass.h[L.17,C.21]\n\nint root::sub1::sub2::TestClass::GetB()\n  [Call] @ C:\\Works\\Test\\Code2\\src\\main.cpp[L.20,C.28]\n  [Definition] @ C:\\Works\\Test\\Code2\\inc\\TestClass.h[L.18,C.21]\n\nint root::sub1::sub2::TestClass::GetResult()\n  [Call] @ C:\\Works\\Test\\Code2\\src\\main.cpp[L.24,C.14]\n  [Definition] @ C:\\Works\\Test\\Code2\\inc\\TestClass.h[L.19,C.21]\n\nvoid root::sub1::sub2::TestClass::SetA(int)\n  [Call] @ C:\\Works\\Test\\Code2\\src\\main.cpp[L.14,C.5]\n  [Call] @ C:\\Works\\Test\\Code2\\src\\TestClass.cpp[L.30,C.17]\n  [Definition] @ C:\\Works\\Test\\Code2\\inc\\TestClass.h[L.21,C.22]\n\nvoid root::sub1::sub2::TestClass::SetB(int)\n  [Call] @ C:\\Works\\Test\\Code2\\src\\main.cpp[L.16,C.5]\n  [Call] @ C:\\Works\\Test\\Code2\\src\\TestClass.cpp[L.31,C.17]\n  [Definition] @ C:\\Works\\Test\\Code2\\inc\\TestClass.h[L.22,C.22]\n\nvoid root::sub1::sub2::TestClass::SetResult(int)\n  [Call] @ C:\\Works\\Test\\Code2\\src\\TestClass.cpp[L.25,C.17]\n  [Definition] @ C:\\Works\\Test\\Code2\\inc\\TestClass.h[L.23,C.22]\n\nint root::sub1::sub2::TestClass::PrivateMethod(int, int)\n  [Call] @ C:\\Works\\Test\\Code2\\src\\TestClass.cpp[L.23,C.30]\n  [Declaration] @ C:\\Works\\Test\\Code2\\inc\\TestClass.h[L.26,C.21]\n  [Definition] @ C:\\Works\\Test\\Code2\\src\\TestClass.cpp[L.28,C.28]\n\nRecursiveCallTest(int)\n  [Call] @ C:\\Works\\Test\\Code2\\src\\main.cpp[L.28,C.5]\n  [Call] @ C:\\Works\\Test\\Code2\\src\\main.cpp[L.41,C.9]\n  [Declaration] @ C:\\Works\\Test\\Code2\\src\\main.cpp[L.5,C.6]\n  [Definition] @ C:\\Works\\Test\\Code2\\src\\main.cpp[L.31,C.6]\n\nmain()\n  [Definition] @ C:\\Works\\Test\\Code2\\src\\main.cpp[L.7,C.5]\n\nstd::basic_ostream\u0026lt;char, std::char_traits\u0026lt;char\u0026gt; \u0026gt; \u0026amp; std::basic_ostream::operator\u0026lt;\u0026lt;(std::basic_ostream\u0026lt;char, std::char_traits\u0026lt;char\u0026gt; \u0026gt; \u0026amp;(*)(std::basic_ostream\u0026lt;char, std::char_traits\u0026lt;char\u0026gt; \u0026gt; \u0026amp;) __attribute__((cdecl)))\n  [Call] @ C:\\Works\\Test\\Code2\\src\\main.cpp[L.18,C.5]\n  [Call] @ C:\\Works\\Test\\Code2\\src\\main.cpp[L.20,C.5]\n  [Call] @ C:\\Works\\Test\\Code2\\src\\main.cpp[L.26,C.5]\n  [Call] @ C:\\Works\\Test\\Code2\\src\\main.cpp[L.39,C.9]\n\nstd::basic_ostream\u0026lt;char, std::char_traits\u0026lt;char\u0026gt; \u0026gt; \u0026amp; std::basic_ostream::operator\u0026lt;\u0026lt;(int)\n  [Call] @ C:\\Works\\Test\\Code2\\src\\main.cpp[L.18,C.5]\n  [Call] @ C:\\Works\\Test\\Code2\\src\\main.cpp[L.20,C.5]\n  [Call] @ C:\\Works\\Test\\Code2\\src\\main.cpp[L.26,C.5]\n  [Call] @ C:\\Works\\Test\\Code2\\src\\main.cpp[L.39,C.9]\n\nstd::operator\u0026lt;\u0026lt;\u0026lt;\u0026gt;(basic_ostream\u0026lt;char, std::char_traits\u0026lt;char\u0026gt; \u0026gt; \u0026amp;, const char *)\n  [Call] @ C:\\Works\\Test\\Code2\\src\\main.cpp[L.18,C.5]\n  [Call] @ C:\\Works\\Test\\Code2\\src\\main.cpp[L.20,C.5]\n  [Call] @ C:\\Works\\Test\\Code2\\src\\main.cpp[L.26,C.5]\n  [Call] @ C:\\Works\\Test\\Code2\\src\\main.cpp[L.39,C.9]\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"あとがき\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%82%E3%81%A8%E3%81%8C%E3%81%8D\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eあとがき\u003c/h4\u003e\n\n\u003cp\u003eClangNetを使って以下の情報を出力する機能を実現するサンプルを紹介しました。\u003c/p\u003e\n\n\u003col\u003e\n\u003cli\u003e 関数コールツリー\u003c/li\u003e\n\u003cli\u003e関数クロスリファレンス(宣言/定義/コール)情報\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003cp\u003e作成したサンプルの全ソースはGitHubにおいてあります。\u003cbr\u003e\nGitHub : \u003ca href=\"https://github.com/an-embedded-engineer/ClangNet\" rel=\"nofollow noopener\" target=\"_blank\"\u003eLink\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e今回作成したサンプルには、テンプレート関数など対応していないケースがあるので、次回はそれらに対応できるように拡張していきたいと思います。\u003c/p\u003e\n","createdAt":"2019-10-14T06:49:06Z","elapsedYearsFromLastModifiedAt":1,"encryptedId":"N5VwjnuY9yuo+LW0C+92TG20oyUXy6knyg==--/5Xc52glEDgjbjRq--H+1C7+7PqEfJJ7DFIdzJzQ==","isBanned":false,"isDeprecated":true,"isDestroyableByViewer":false,"isEditRequestReadableByViewer":true,"isEditRequestSendableByViewer":true,"isLikableByViewer":true,"isLikedByViewer":false,"isPublic":true,"isSlide":false,"isStockableByViewer":true,"isStockedByViewer":false,"isSubscribableByViewer":false,"isSubscribedByViewer":false,"isUpdatableByViewer":false,"isUpdated":false,"lastModifiedAt":"2019-10-14T06:49:06Z","likesCount":4,"linkUrl":"https://qiita.com/an-embedded-engineer/items/8f202a8a8acbabc08d5f","organization":null,"originalId":1047315,"stockedCount":3,"title":"ClangNet(libclang)で構文解析(関数コールツリー/クロスリファレンス生成)","toc":"\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%81%BE%E3%81%88%E3%81%8C%E3%81%8D\"\u003eまえがき\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E8%A7%A3%E6%9E%90%E5%AF%BE%E8%B1%A1%E3%82%BD%E3%83%BC%E3%82%B9\"\u003e解析対象ソース\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E6%A7%8B%E6%96%87%E8%A7%A3%E6%9E%90%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB\"\u003e構文解析サンプル\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AE%9F%E7%8F%BE%E6%96%B9%E6%B3%95\"\u003e実現方法\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#1-translation-unit%E3%82%BD%E3%83%BC%E3%82%B9%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E8%A7%A3%E6%9E%90\"\u003e1. Translation Unit(ソースファイル)解析\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#1-1-%E3%83%87%E3%83%BC%E3%82%BF%E6%A7%8B%E9%80%A0%E5%AE%9A%E7%BE%A9\"\u003e1-1. データ構造定義\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#1-2-ast%E8%A7%A3%E6%9E%90\"\u003e1-2. AST解析\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#2-invokation-tree%E9%96%A2%E6%95%B0%E3%82%B3%E3%83%BC%E3%83%AB%E3%83%84%E3%83%AA%E3%83%BC%E7%94%9F%E6%88%90\"\u003e2. Invokation Tree(関数コールツリー)生成\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#3-cross-reference%E9%96%A2%E6%95%B0%E5%8F%82%E7%85%A7%E6%83%85%E5%A0%B1%E7%94%9F%E6%88%90\"\u003e3. Cross Reference(関数参照情報)生成\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#4-%E5%90%84%E5%87%A6%E7%90%86%E5%91%BC%E3%81%B3%E5%87%BA%E3%81%97\"\u003e4. 各処理呼び出し\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%81%82%E3%81%A8%E3%81%8C%E3%81%8D\"\u003eあとがき\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n","totalPv":882,"uuid":"8f202a8a8acbabc08d5f","banReason":null,"adventCalendarItem":null,"author":{"encryptedId":"nlNlDCn/IpwSoV9GV8ULOZhbvro=--Cmyv1E3pecJw+uVw--eW7OFqR1wPvz4WXcfBzlRw==","originalId":64578,"description":"","facebookUrl":null,"githubUrl":"https://github.com/an-embedded-engineer","isBlockingViewer":false,"isFollowableByViewer":true,"isFollowedByViewer":false,"isTweetWebNotificationReceivable":true,"linkedinUrl":null,"name":"","profileImageUrl":"https://qiita-image-store.s3.amazonaws.com/0/64578/profile-images/1473696628","profileImageUrlW48":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F64578%2Fprofile-images%2F1473696628?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=48\u0026s=40b63b5dd00161a791f14b6050ceb188","profileImageUrlW75":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F64578%2Fprofile-images%2F1473696628?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=32c6cab0345c05c098e234b29e5c1aa1","urlName":"an-embedded-engineer","websiteUrl":"https://an-embedded-engineer.hateblo.jp/","twitterUrl":null,"twitterUrlName":null,"revealedOrganizations":{"edges":[]}},"tags":[{"name":"C#","urlName":"csharp"},{"name":"clang","urlName":"clang"},{"name":"libclang","urlName":"libclang"},{"name":"ClangNet","urlName":"clangnet"}],"followingLikers":{"edges":[]},"comments":{"totalCount":0}},"comments":[],"client":null,"ads_event_emitter":null}}</script>
