More than 1 year has passed since last update.前回の記事の続きです。リファクタリングとバグ修正です。PlayMode中に動かしたオブジェクトはEditModeに切り替えると元に戻ります。

これはもともとのEditorの機能ですよね。前回の記事でEditor上でDebugできることは確認できたのですが、
動かしている最中にPlayModeに移ると、その位置で停止してしまいます。
これはなんとかしないと、かえって効率が悪くなりそうです。Editor上で再生状態が変更されたときに呼びだされるコールバックです。
EditMode→PlayModeに移る瞬間にポジションをもとに戻してあげればいいので
EditorApplication.playModeStateChangedにポジションを戻す処理を登録しとけばいけそうです。PlayMode⇔EditModeの変更がそれぞれ用意されています。
今回はExitingEditModeを使うのでEditModeが終了してPlayModeが始まる直前です。[ExecuteInEditMode]を使うことでコルーチンのコードがスッキリしました。
まずは使う前の記事です。EditModeでは、MonoBehaviourのUpdate内の処理は呼ばれないので
本来Update内に記述しておけばスッキリするコードをコルーチン内に長々と書いています。しかし、[ExecuteInEditMode]を使うことでEditModeでもUpdateを呼んでくれます。
下記が修正後です。ばっちりですね。


