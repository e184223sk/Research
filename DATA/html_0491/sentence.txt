ネタ記事が流行ってる！なので C# 9 で書いてみようと思います。
C# 8 ベースのものは別の方が書いてくれています。C#で湯婆婆を実装してみる湯婆婆はシンプルなのでトップレベルステートメントくらいしか使えるものがありません…！なのでこうなります。空文字で落ちるのは仕様なので置いといて𠮷田さんが働けないのは問題です。Windows のコマンドプロンプトや PowerShell 上で𠮷田さんを表示できないので GitHub Codespace で適当な Linux マシンでやってみます。そうすると申込用紙は𠮷田さんに対応してくれたみたいですが肝心の湯婆婆が𠮷田さんだとバグってしまいます。これですが、俗にいう4バイト文字に対応していないことにより起こります。サロゲートペアとか4バイト文字あたりでぐぐると情報が出てきます。C# では System.Globalization.StringInfo クラスを使って対応します。今回のように 1 文字だけ取り出せればいいというケースでは StringInfo クラスのインスタンスを作って LengthInTextElements でサロゲートペアもきちんと見てくれている状態での文字数カウントをして SubstringByTextElements でサロゲートペアとかもきちんと考慮した状態で 1 文字切り取ってやればいいでしょう。ということで、𠮷田さんに対応した湯婆婆は以下のようになります。では実行してみましょう。ばっちりですね。これで𠮷田さんも働けます。もちろん空文字の場合は仕様通り例外が発生します。もう 1 記事くらい湯婆婆で書けそうな気がする。


