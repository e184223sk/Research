<!DOCTYPE html><html><head><meta charset="utf-8" /><title>[Unity] クォータービューのドット絵に深度バッファを適用する（重なり順解決） - Qiita</title><meta content="width=device-width,initial-scale=1,shrink-to-fit=no,viewport-fit=cover" name="viewport" /><meta content="#55c500" name="theme-color" /><meta content="XWpkTG32-_C4joZoJ_UsmDUi-zaH-hcrjF6ZC_FoFbk" name="google-site-verification" /><meta content="telephone=no" name="format-detection" /><link rel="canonical" href="https://qiita.com/Shinoda_Naoki/items/fccdc137747ea4301578" /><link href="/manifest.json" rel="manifest" /><link href="/opensearch.xml" rel="search" title="Qiita" type="application/opensearchdescription+xml" /><link as="script" href="https://www.googletagservices.com/tag/js/gpt.js" rel="preload" /><link href="https://securepubads.g.doubleclick.net" rel="preconnect" /><script async="" src="https://www.googletagservices.com/tag/js/gpt.js"></script><meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="iyrkt8O7D1R4MbYW29PHrKCN7wb7qMTVn7ZVwPPSk12BH65AY/yHHptgR/94kAlmnw4Bk/Ws69Q1O5xE6NcZyA==" /><link rel="shortcut icon" type="image/x-icon" href="https://cdn.qiita.com/assets/favicons/public/production-c620d3e403342b1022967ba5e3db1aaa.ico" /><link rel="apple-touch-icon" type="image/png" href="https://cdn.qiita.com/assets/favicons/public/apple-touch-icon-ec5ba42a24ae923f16825592efdc356f.png" /><link rel="stylesheet" media="all" href="https://cdn.qiita.com/assets/public/article-2eaa7dbedc42a8ea65c722cda46d0ebb.min.css" /><script src="https://cdn.qiita.com/assets/public/v3-article-bundle-63de2d91fef827269d3f6b958db2335b.min.js" defer="defer"></script><meta name="twitter:card" content="summary_large_image"><meta content="@Qiita" name="twitter:site" /><meta property="og:type" content="article"><meta property="og:title" content="[Unity] クォータービューのドット絵に深度バッファを適用する（重なり順解決） - Qiita"><meta property="og:image" content="https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0&amp;w=1200&amp;mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND1XMVZ1YVhSNVhTRGpncV9qZ3Fuamc3empncl9qZzd6amc1UGpnNlhqZzd6amdhN2pnNG5qZzRQamc0am50YlhqZ2F2bXQ3SGx1cWJqZzVEamc0UGpnNVhqZ3FIamdwTHBnYW5ubEtqamdabmpnb3Z2dklqcGg0M2pnYXJqZ29ycG9JYm9wNlBtc2JydnZJayZ0eHQtY29sb3I9JTIzMzMzJnR4dC1mb250PUhpcmFnaW5vJTIwU2FucyUyMFc2JnR4dC1zaXplPTU0JnR4dC1jbGlwPWVsbGlwc2lzJnR4dC1hbGlnbj1jZW50ZXIlMkNtaWRkbGUmcz1hYjVhNDE2ZmY1MTQ4YTg3YjExMDc5Y2IwZWI0MjczYw&amp;mark-align=center%2Cmiddle&amp;blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RRk5vYVc1dlpHRmZUbUZ2YTJrJnR4dC1jb2xvcj0lMjMzMzMmdHh0LWZvbnQ9SGlyYWdpbm8lMjBTYW5zJTIwVzYmdHh0LXNpemU9NDUmdHh0LWFsaWduPXJpZ2h0JTJDYm90dG9tJnM9MDQ5NDUzMDBjM2MyOTY0NzU4NDdmYzk3MjEwNTIyOWM&amp;blend-align=center%2Cmiddle&amp;blend-mode=normal&amp;s=39c6618e4eec7803cd1767fd385c2550"><meta property="og:description" content="

前置き



クオータービューゲームってご存知ですか？
自分はあんまり最近のゲーム知らなくて、古い例しか出てきませんが、「A列車で行こう4」とか「SimCity 2000」のような、等角投影図風に描いたドット絵を配置したゲームのこ..."><meta content="https://qiita.com/Shinoda_Naoki/items/fccdc137747ea4301578" property="og:url" /><meta content="Qiita" property="og:site_name" /><meta content="564524038" property="fb:admins" /><meta content="C#,game,Unity3D,Unity,ゲーム制作" name="keywords" /><script>!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window, document,'script',
'https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '668972150489891');
fbq('track', 'PageView');</script><style data-emotion-css="17jxvjw 11t2ec1 1dvr2p8 18lkoru 1g4cku8 1iupg5d ijvq0v 15cocm3 12rp90f 115f4t 1b8uj5v 79elbk 16hhh7b fcbn8c 1gj7nt 154zy0m yikrym 1jqivyb 1ode1bp le4d8r 1hbd3g7 1nzh4zz 38fzdi helsa7 8qb8m4 2imjyh he5w1s 70qvj9 3ojehk 100alwu 1dtnjt5 10ougpm 1ay9vb9 m19uds cgzq40 1wa99t2 1l3zk9f 4czcte 1yzj1fm 1uv1qiv 109dbrr 5jpx49 mnxgyc 1vlpknv fsjkhv 1b17vb0 7i7f4d"}>.css-17jxvjw{display:grid;display:-ms-grid;grid-template-columns:80px minmax(0,1fr) 300px;-ms-grid-columns:80px minmax(0,1fr) 300px;grid-template-rows:minmax(270px,auto) 1fr;-ms-grid-rows:minmax(270px,auto) 1fr;max-width:1280px;margin-right:auto;margin-left:auto;padding-top:24px;padding-right:24px;padding-left:24px;}@media (max-width:1200px){.css-17jxvjw{padding-bottom:0;padding-left:0;padding-right:0;}}@media (max-width:992px){.css-17jxvjw{grid-template-columns:80px 452px 300px;-ms-grid-columns:80px 452px 300px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}}@media (max-width:770px){.css-17jxvjw{display:block;}}@media (max-width:480px){.css-17jxvjw{padding-top:0;}}.css-11t2ec1{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;z-index:5;position:-webkit-sticky;position:sticky;top:calc(56px + 24px + 16px + 32px - 16px);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:16px;width:80px;}.css-11t2ec1:after{content:'';display:table;}.css-11t2ec1:before{content:'';display:table;}@media (max-width:770px){.css-11t2ec1{display:none;}}.css-1dvr2p8{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-18lkoru{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;background-color:#FFFFFF;}.css-1g4cku8{display:inline-block;vertical-align:middle;height:20px;width:20px;fill:#55C500;}.css-1iupg5d{color:#55C500;cursor:pointer;font-size:14px;font-weight:bold;}.css-ijvq0v{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-15cocm3{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#FFFFFF;border:2px solid #6E6F70;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:2px 0px 0px;width:40px;}.css-12rp90f{display:inline-block;vertical-align:bottom;height:17.77777777777778px;width:16px;fill:#6E6F70;}.css-115f4t{color:#6E6F70;font-size:14px;font-weight:bold;}.css-1b8uj5v{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;margin-bottom:16px;padding:0;}.css-79elbk{position:relative;}.css-16hhh7b{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;padding:0;}.css-fcbn8c{display:none;bottom:initial;left:initial;right:initial;top:initial;left:100%;top:calc(-8px - (14px * 1.8) - 16px - 4px);}.css-1gj7nt{color:rgba(0,0,0,0.6);font-size:14px;font-weight:bold;line-height:1.8;padding:8px 16px;}.css-154zy0m{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.87);cursor:pointer;font-size:16px;font-weight:normal;line-height:1.8;padding:4px 16px;}.css-154zy0m:hover{-webkit-text-decoration:none;text-decoration:none;background-color:#F2F2F2;}.css-yikrym{width:20px;}.css-1jqivyb{color:rgba(0,0,0,0.6);font-size:13px;}.css-1ode1bp{background-color:rgba(0,0,0,0.12);height:1px;width:100%;margin:8px 0;}.css-le4d8r{display:inline-block;vertical-align:middle;height:13px;width:13px;fill:rgba(0,0,0,0.6);}.css-1hbd3g7{height:250px;}.css-1nzh4zz{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:16px 32px;background-color:#FBE69E;color:rgba(0,0,0,0.87);line-height:1.5;font-weight:600;}@media (max-width:770px){.css-1nzh4zz{padding:16px;}}.css-38fzdi{color:#CA832A;margin-right:4px;}.css-helsa7{background-color:#FFFFFF;padding:32px;margin-bottom:24px;}@media (max-width:992px){.css-helsa7{margin:0 auto 40px;}}@media (max-width:480px){.css-helsa7{margin:0 0 40px;padding:32px 16px;}}.css-8qb8m4{margin-bottom:48px;}.css-2imjyh{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-he5w1s{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;width:100%;}@media (max-width:770px){.css-he5w1s{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}}.css-70qvj9{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.css-3ojehk{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;margin-right:4px;}.css-100alwu{display:inline-block;border-radius:50%;line-height:1;overflow:hidden;vertical-align:middle;}.css-1dtnjt5{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-10ougpm{color:rgba(0,0,0,0.87);font-size:14px;font-weight:600;line-height:1.8;margin-right:4px;text-wrap:break-word;word-break:break-all;}.css-1ay9vb9{margin-right:16px;}.css-m19uds{color:rgba(0,0,0,0.6);font-size:14px;line-height:1.8;}.css-cgzq40{color:rgba(0,0,0,0.87);font-size:32px;font-weight:bold;line-height:1.4;margin-top:8px;text-wrap:break-word;word-break:break-all;}.css-1wa99t2{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.6);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:8px;}.css-1l3zk9f{color:rgba(0,0,0,0.6);font-size:20px;margin-right:8px;}.css-4czcte{margin-right:4px;color:inherit;font-size:14px;line-height:1.8;}.css-4czcte:not(:last-child)::after{content:',';margin-right:4px;}.css-1yzj1fm{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:32px;}.css-1uv1qiv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-size:20px;height:32px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin-right:16px;outline:none;padding:0;width:32px;}.css-109dbrr{background-color:#F9F9F9;border-top:1px solid rgba(0,0,0,0.12);bottom:0;box-shadow:0px 1px 4px rgba(0,0,0,0.14);display:none;height:calc(env(safe-area-inset-bottom,0px) + 56px);-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding-bottom:env(safe-area-inset-bottom);position:-webkit-sticky;position:sticky;width:100%;z-index:2000;}@media (max-width:770px){.css-109dbrr{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}.css-5jpx49{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:space-evenly;-webkit-justify-content:space-evenly;-ms-flex-pack:space-evenly;justify-content:space-evenly;width:100%;}.css-mnxgyc{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1vlpknv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;margin-right:4px;background-color:#FFFFFF;}.css-fsjkhv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1b17vb0{color:#6E6F70;font-size:14px;font-weight:bold;margin-left:4px;}.css-7i7f4d{display:none;bottom:initial;left:initial;right:initial;top:initial;bottom:32px;right:0;}</style></head><body><div class="allWrapper"><div><div id="GlobalHeader-react-component-cc6af27b-eb4c-408a-90d1-07b262be2f8e"><div class="st-Header"><div class="st-Header_container"><div class="st-Header_start"><a href="/" class="st-Header_logo"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 426.57 130"><circle cx="167.08" cy="21.4" r="12.28"></circle><path d="M250.81 29.66h23.48v18.9h-23.48z"></path><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z"></path><circle cx="216.33" cy="21.4" r="12.28"></circle></svg></a><div class="st-Header_communitySelector" tabindex="0"><span class="fa fa-caret-down"></span></div><div class="st-Header_dropdown"><div class="st-Header_dropdownHeading">Qiita Teams that are logged in</div><div class="st-Header_dropdownItemNote">You are not logged in to any team</div><hr class="st-Header_dropdownDivider st-Header_dropdownDivider-shrink"/><a href="https://teams-center.qiita.com/find_team" class="st-Header_dropdownItem"><span class="fa fa-fw fa-sign-in st-Header_dropdownItemIcon"></span><div>Log in to Qiita Team</div></a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Community</div><a href="/organizations" class="st-Header_dropdownItem">Organization</a><a href="/official-events/open" class="st-Header_dropdownItem">Event</a><a href="/advent-calendar" class="st-Header_dropdownItem">Advent Calendar</a><a href="https://qiitadon.com/" class="st-Header_dropdownItem" target="_blank">Qiitadon (β)</a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Service</div><a href="https://jobs.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Jobs</a><a href="https://zine.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Zine</a><a href="https://blog.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Blog</a></div><form class="st-Header_search" action="/search" method="get"><span class="fa fa-search st-Header_searchIcon"></span><input type="search" class="st-Header_searchInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form><form class="st-Header_searchModal" action="/search" method="get"><input type="text" class="st-Header_searchModalInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form></div><div class="st-Header_end"><div class="st-Header_searchButton"><span class="fa fa-search"></span></div><a class="st-Header_signupButton" href="/signup?redirect_to=%2FShinoda_Naoki%2Fitems%2Ffccdc137747ea4301578">Signup</a><a class="st-Header_loginLink" href="/login?redirect_to=%2FShinoda_Naoki%2Fitems%2Ffccdc137747ea4301578">Login</a></div><div class="st-Header_overlay"></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="GlobalHeader" data-dom-id="GlobalHeader-react-component-cc6af27b-eb4c-408a-90d1-07b262be2f8e">{"unreadNotificationsCount":null,"realms":[{"humanName":"Qiita","isCurrentRealm":true,"isQiita":true,"isQiitaTeam":false,"loggedInUser":null,"teamId":null,"url":"https://qiita.com/"}],"teamFindUrl":"https://teams-center.qiita.com/find_team","isTeamOnlyUser":null,"currentUser":null}</script>
      
</div><div class="st-HeaderAlert st-HeaderAlert-warning"><div class="st-HeaderAlert_body"></div></div><script type="application/ld+json">{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"/","name":"Qiita"}},{"@type":"ListItem","position":2,"item":{"@id":"/tags/csharp","name":"C#"}}]}</script><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","datePublished":"2019-07-17T15:19:29.000+09:00","dateModified":"2019-12-15T20:32:06.000+09:00","headline":"[Unity] クォータービューのドット絵に深度バッファを適用する（重なり順解決）","image":"https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0\u0026w=1200\u0026mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND1XMVZ1YVhSNVhTRGpncV9qZ3Fuamc3empncl9qZzd6amc1UGpnNlhqZzd6amdhN2pnNG5qZzRQamc0am50YlhqZ2F2bXQ3SGx1cWJqZzVEamc0UGpnNVhqZ3FIamdwTHBnYW5ubEtqamdabmpnb3Z2dklqcGg0M2pnYXJqZ29ycG9JYm9wNlBtc2JydnZJayZ0eHQtY29sb3I9JTIzMzMzJnR4dC1mb250PUhpcmFnaW5vJTIwU2FucyUyMFc2JnR4dC1zaXplPTU0JnR4dC1jbGlwPWVsbGlwc2lzJnR4dC1hbGlnbj1jZW50ZXIlMkNtaWRkbGUmcz1hYjVhNDE2ZmY1MTQ4YTg3YjExMDc5Y2IwZWI0MjczYw\u0026mark-align=center%2Cmiddle\u0026blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RRk5vYVc1dlpHRmZUbUZ2YTJrJnR4dC1jb2xvcj0lMjMzMzMmdHh0LWZvbnQ9SGlyYWdpbm8lMjBTYW5zJTIwVzYmdHh0LXNpemU9NDUmdHh0LWFsaWduPXJpZ2h0JTJDYm90dG9tJnM9MDQ5NDUzMDBjM2MyOTY0NzU4NDdmYzk3MjEwNTIyOWM\u0026blend-align=center%2Cmiddle\u0026blend-mode=normal\u0026s=39c6618e4eec7803cd1767fd385c2550","mainEntityOfPage":"https://qiita.com/Shinoda_Naoki/items/fccdc137747ea4301578","author":{"@type":"Person","address":null,"email":null,"identifier":"Shinoda_Naoki","name":"Shinoda_Naoki","image":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F75035%2Fprofile-images%2F1473700038?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=1d027acc213195aa714453863473a257","url":"https://qiita.com/Shinoda_Naoki","description":null,"memberOf":[{"@type":"Organization","address":"京都市下京区大政所町685  京都四条烏丸ビル2F","legalName":"株式会社テクロス","image":"https://s3-ap-northeast-1.amazonaws.com/qiita-organization-image/62accf6f20b1556dd2ac37d6503eb0552457d25b/original.jpg?1569306622","logo":"https://s3-ap-northeast-1.amazonaws.com/qiita-organization-image/47bb6192a32d490348c8d00949b8b21bd852af31/original.jpg?1569306622","identifier":"techcross","description":"京都を拠点にソーシャルゲームの開発・運用、その他システム開発を行っています。"}]},"publisher":{"@type":"Organization","name":"Qiita","logo":{"@type":"ImageObject","url":"//cdn.qiita.com/assets/public/qiita-logo-c39ded593afa388e2e1ba435b110554e.png"}}}</script><style type="text/css">.wb-CampaignLink {
  background-color: #333333;
  width: 100%;
}

.wb-CampaignLink_container {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  max-width: 1100px;
  margin: 0 auto;
  font-size: 13px;
  padding: 0.8em;
}
.wb-CampaignLink_container > a {
  color: #fff;
}

.wb-CampaignLink_container > a:hover {
  text-decoration: underline;
}</style><div class="wb-CampaignLink"><div class="wb-CampaignLink_container"><a target="_blank" id="header_text_message_1" href="https://increments.connpass.com/event/211948/">【9/9(木)開催】Qiitaの過去と未来についてお話しします！Qiita エンジニアフェスタ 2021 Online Meetup</a><a target="_blank" id="header_text_message_2" href="https://increments.connpass.com/event/211948/">詳しくはこちら</a></div><script>td.trackEvent(
  'front_events',
  {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"Shinoda_Naoki","type":"items","id":"fccdc137747ea4301578"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Show","data":{"message":"【9/9(木)開催】Qiitaの過去と未来についてお話しします！Qiita エンジニアフェスタ 2021 Online Meetup","url":"https://increments.connpass.com/event/211948/","sub_message":"詳しくはこちら"}}
)</script><script>document.getElementById('header_text_message_1').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"Shinoda_Naoki","type":"items","id":"fccdc137747ea4301578"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":2,"pos_id":"header_text_message_1","message":"【9/9(木)開催】Qiitaの過去と未来についてお話しします！Qiita エンジニアフェスタ 2021 Online Meetup","url":"https://increments.connpass.com/event/211948/","sub_message":"詳しくはこちら"}}
  )
})</script><script>document.getElementById('header_text_message_2').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"Shinoda_Naoki","type":"items","id":"fccdc137747ea4301578"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":2,"pos_id":"header_text_message_2","message":"【9/9(木)開催】Qiitaの過去と未来についてお話しします！Qiita エンジニアフェスタ 2021 Online Meetup","url":"https://increments.connpass.com/event/211948/","sub_message":"詳しくはこちら"}}
  )
})</script></div><script type="application/json" id="js-react-on-rails-context">{"railsEnv":"production","inMailer":false,"i18nLocale":"en","i18nDefaultLocale":"en","href":"https://qiita.com/Shinoda_Naoki/items/fccdc137747ea4301578","location":"/Shinoda_Naoki/items/fccdc137747ea4301578","scheme":"https","host":"qiita.com","port":null,"pathname":"/Shinoda_Naoki/items/fccdc137747ea4301578","search":null,"httpAcceptLanguage":null,"actionPath":"public/items#show","settings":{"analyticsTrackingId":"UA-24675221-12","assetsMap":{},"csrfToken":"7void9y/GHQYtQWdtfLM/NOHh5hQ7bU9wuRE16KOUoLkz2iAfPiQPvvk9HQWsQI27ARpDV7pmjxoaY1TuYvYFw==","locale":"en"},"currentUser":null,"isLoggedIn":false,"recaptchaSiteKey":"6LfNkiQTAAAAAM3UGnSquBy2akTITGNMO_QDxMw6","serverSide":false}</script>
<div id="PersonalArticlePage-react-component-46cb6c69-0996-4e40-a028-2b9d25820113"><div class="p-items_wrapper"><div class=" css-17jxvjw"><div class="css-11t2ec1"><div class="css-1dvr2p8"><button class=" css-18lkoru"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/Shinoda_Naoki/items/fccdc137747ea4301578/likers" class="css-1iupg5d">59</a></div><div class="css-ijvq0v"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-115f4t">50</span></div><div class="css-1b8uj5v"><span class="fa fa-twitter"></span></div><div class="css-1b8uj5v"><span class="fa fa-facebook"></span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-fcbn8c"><div class="css-1gj7nt">Improve article</div><a href="/drafts/fccdc137747ea4301578/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/Shinoda_Naoki/items/fccdc137747ea4301578/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/Shinoda_Naoki/items/fccdc137747ea4301578/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/Shinoda_Naoki/items/fccdc137747ea4301578/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/Shinoda_Naoki/items/fccdc137747ea4301578.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div><div class="p-items_options"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_toc"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_main"><div class="css-1nzh4zz"><span class="fa fa-fw fa-warning css-38fzdi"></span><p>More than 1 year has passed since last update.</p></div><div class="css-helsa7"><div class="css-8qb8m4"><div class="css-2imjyh"><div class="css-he5w1s"><div class="css-70qvj9"><div class="css-3ojehk"><a href="/Shinoda_Naoki"><img class="css-100alwu eyfquo10" src="https://qiita-image-store.s3.amazonaws.com/0/75035/profile-images/1473700038" width="24" height="24" loading="lazy"/></a></div><div class="css-1dtnjt5"><a href="/Shinoda_Naoki" class="css-10ougpm">@<!-- -->Shinoda_Naoki</a><div class="css-1ay9vb9"><span><meta content="2019-07-17T06:19:29Z"/><time dateTime="2019-12-15T11:32:06Z" class="css-m19uds">updated at 2019-12-15</time></span></div></div></div></div></div><h1 class="css-cgzq40">[Unity] クォータービューのドット絵に深度バッファを適用する（重なり順解決）</h1><div class="css-1wa99t2"><span class="fa fa-tags mr-1of2 css-1l3zk9f" aria-hidden="true"></span><a href="/tags/csharp" class="css-4czcte">C#</a><a href="/tags/game" class="css-4czcte">game</a><a href="/tags/unity3d" class="css-4czcte">Unity3D</a><a href="/tags/unity" class="css-4czcte">Unity</a><a href="/tags/%e3%82%b2%e3%83%bc%e3%83%a0%e5%88%b6%e4%bd%9c" class="css-4czcte">ゲーム制作</a></div></div><section class="it-MdContent"><div id="personal-public-article-body"><div>
<h1>
<span id="前置き" class="fragment"></span><a href="#%E5%89%8D%E7%BD%AE%E3%81%8D"><i class="fa fa-link"></i></a>前置き</h1>

<p><a href="https://camo.qiitausercontent.com/23b0095a9dff45314be022ae2245121d528c63ea/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f37353033352f63626165643437382d616630662d316132662d613465612d3432353765303265383663662e6a706567" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2Fcbaed478-af0f-1a2f-a4ea-4257e02e86cf.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=46ecc505ceb7fcb50b0ec4b8bcbfb116" alt="withTerrain.jpg" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/75035/cbaed478-af0f-1a2f-a4ea-4257e02e86cf.jpeg" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2Fcbaed478-af0f-1a2f-a4ea-4257e02e86cf.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=2f571e945a644204f8f940a9713b3fa4 1x" loading="lazy"></a><a href="https://camo.qiitausercontent.com/2b73935ea3590598a0ba639c21e8f2f768ff0d56/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f37353033352f38316637653361322d383337352d313666662d336336642d3430306163623934656137362e676966" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F81f7e3a2-8375-16ff-3c6d-400acb94ea76.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=b0f396f3c753747810857ab55794b6a7" alt="sceneViewAni.gif" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/75035/81f7e3a2-8375-16ff-3c6d-400acb94ea76.gif" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F81f7e3a2-8375-16ff-3c6d-400acb94ea76.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=ad84197488294dc6331df44d2e4e6e33 1x" loading="lazy"></a></p>

<p><strong>クオータービュー</strong>ゲームってご存知ですか？<br>
自分はあんまり最近のゲーム知らなくて、古い例しか出てきませんが、「A列車で行こう4」とか「SimCity 2000」のような、<strong>等角投影図風に描いたドット絵</strong>を配置したゲームのことです。見下ろし型とか、2.5Dとか、鳥瞰図なんて言われる場合もありますね（これらは必ずしもクオータービューだけを指す言葉じゃないですが）。英語だと isometric view と呼ぶようです。</p>

<p>3Dのような奥行きのある絵ですが、実体は二次元（Sprite）なので<strong>描画順(z-オーダー)</strong>で重なりを制御する必要があります。</p>

<h2>
<span id="唐突ですがここで問題" class="fragment"></span><a href="#%E5%94%90%E7%AA%81%E3%81%A7%E3%81%99%E3%81%8C%E3%81%93%E3%81%93%E3%81%A7%E5%95%8F%E9%A1%8C"><i class="fa fa-link"></i></a>唐突ですがここで問題。</h2>

<p><a href="https://camo.qiitausercontent.com/da3117d74d8f022ee607b568b7c13c6dd456bde3/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f37353033352f37333631343064362d343264382d383833632d663461662d6430663531643836323864332e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F736140d6-42d8-883c-f4af-d0f51d8628d3.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=0135186699c4af4df96a143d70e6a4e6" alt="greenFrame.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/75035/736140d6-42d8-883c-f4af-d0f51d8628d3.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F736140d6-42d8-883c-f4af-d0f51d8628d3.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=614d4b46e0b18a59f2b98cdf64f0f885 1x" loading="lazy"></a><a href="https://camo.qiitausercontent.com/af8cf2a2dae80090e26616ab9c18cc525a51f3ff/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f37353033352f30376664333863372d623538652d353066632d633766392d3639326334613666613939312e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F07fd38c7-b58e-50fc-c7f9-692c4a6fa991.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=274daae50d52063186703eea51133140" alt="orangeSteps.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/75035/07fd38c7-b58e-50fc-c7f9-692c4a6fa991.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F07fd38c7-b58e-50fc-c7f9-692c4a6fa991.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=2102271a5078f89b35fca77760b3fa28 1x" loading="lazy"></a><a href="https://camo.qiitausercontent.com/0f3c622ccb3be3207d21c3be2ec62945d3314b2f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f37353033352f39353964323663662d353933642d366433362d346431612d3262393463633030656331392e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F959d26cf-593d-6d36-4d1a-2b94cc00ec19.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=e9d90563bf5894a1f6ee0e86dc1e8b7b" alt="purpleCargo.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/75035/959d26cf-593d-6d36-4d1a-2b94cc00ec19.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F959d26cf-593d-6d36-4d1a-2b94cc00ec19.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=3cf4f22e66b9547e69a2684483d6f3de 1x" loading="lazy"></a></p>

<p>上に挙げた<strong>緑</strong>、<strong>橙</strong>、<strong>紫</strong>のドット絵それぞれから３つの Sprite を作って、下の画像を作るにはどういう描画順で描画すればいいでしょうか？</p>

<p><a href="https://camo.qiitausercontent.com/3fb0caf2a99f8e422c425eceba13aa6088cd7c84/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f37353033352f61373239663839332d343433302d663565392d653534662d3837306538306261316562302e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2Fa729f893-4430-f5e9-e54f-870e80ba1eb0.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=9c65e68233adb71a04a142eac596381c" alt="Image10000.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/75035/a729f893-4430-f5e9-e54f-870e80ba1eb0.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2Fa729f893-4430-f5e9-e54f-870e80ba1eb0.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=8b09545af5a9fc459327d34c2f5c2ce4 1x" loading="lazy"></a></p>

<p>答えは、「（※この問題の前提では）<strong>不可能</strong>」です。<br>
それぞれの重なってる部分を見てください。<strong>橙＞紫</strong>、<strong>紫＞緑</strong>、<strong>緑＞橙</strong>となるようなｚオーダーの組み合わせは作れません。方程式で言うなら「解なし」です。</p>

<p>こういう絵を作りたいときに、他の人たちはどうやっているかというと、<strong>Sprite をタイルなどに分割して描く</strong>（もちろん、その時分割部分ごとに適切な順番になるようにする）のが一般的のようです。</p>

<p><a href="https://gamedevelopment.tutsplus.com/tutorials/creating-isometric-worlds-a-primer-for-game-developers--gamedev-6511" class="autolink" rel="nofollow noopener" target="_blank">https://gamedevelopment.tutsplus.com/tutorials/creating-isometric-worlds-a-primer-for-game-developers--gamedev-6511</a><br>
<a href="https://blog.pocketcitygame.com/cheating-at-z-depth-sprite-sorting-in-an-isometric-game/" class="autolink" rel="nofollow noopener" target="_blank">https://blog.pocketcitygame.com/cheating-at-z-depth-sprite-sorting-in-an-isometric-game/</a><br>
<a href="http://ashley.baldock.me/tilecutter" class="autolink" rel="nofollow noopener" target="_blank">http://ashley.baldock.me/tilecutter</a></p>

<h1>
<span id="やりたいこと" class="fragment"></span><a href="#%E3%82%84%E3%82%8A%E3%81%9F%E3%81%84%E3%81%93%E3%81%A8"><i class="fa fa-link"></i></a>やりたいこと</h1>

<p>クオータービューのドット絵ゲームを作るとき、 <strong>スプライトを分割せずに重なり順を解決したい</strong>。そのためにドット絵に深度バッファを適用したい。<br>
そこで下記の図のように3Dオブジェクトにドット絵を正射影表示してやろうと思いました。<br>
<a href="https://camo.qiitausercontent.com/ea64cc7686c5b31523e850aaeeda74ae908eba81/687474703a2f2f626c6f672d696d67732d35342e6663322e636f6d2f712f6f2f6f2f716f6f666173742f6375626570726f6a656374696f6e6d61702e676966" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/http%3A%2F%2Fblog-imgs-54.fc2.com%2Fq%2Fo%2Fo%2Fqoofast%2Fcubeprojectionmap.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=ced40ee17c90893a298e76f2dc34a978" alt="" data-canonical-src="http://blog-imgs-54.fc2.com/q/o/o/qoofast/cubeprojectionmap.gif" srcset="https://qiita-user-contents.imgix.net/http%3A%2F%2Fblog-imgs-54.fc2.com%2Fq%2Fo%2Fo%2Fqoofast%2Fcubeprojectionmap.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=d13a693d93ad0a825c61a745ddd0e659 1x" loading="lazy"></a><br>
これができれば、重なり順解決だけでなく他の<strong>3Dオブジェクト（例えば Terrain）とドット絵を上手い具合に共存させる</strong>こともできます。</p>

<p>実は Unity ではないですが、既に<a href="http://qoofast.blog76.fc2.com/blog-entry-23.html" rel="nofollow noopener" target="_blank"><strong>このアイデアを実現してる記事</strong></a>があります。上記の図もそこからの拝借です。今回はこれを Unity に移植してみました。</p>

<h1>
<span id="テクスチャを立体に正射影する" class="fragment"></span><a href="#%E3%83%86%E3%82%AF%E3%82%B9%E3%83%81%E3%83%A3%E3%82%92%E7%AB%8B%E4%BD%93%E3%81%AB%E6%AD%A3%E5%B0%84%E5%BD%B1%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>テクスチャを立体に正射影する</h1>

<h2>
<span id="マテリアル" class="fragment"></span><a href="#%E3%83%9E%E3%83%86%E3%83%AA%E3%82%A2%E3%83%AB"><i class="fa fa-link"></i></a>マテリアル</h2>

<p><a href="https://camo.qiitausercontent.com/f28cda8b27fe511352cfc0007f21c244ab004719/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f37353033352f64393435616337312d373931312d613461382d376532312d3634376139656334386532612e6a706567" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2Fd945ac71-7911-a4a8-7e21-647a9ec48e2a.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=98c122f822866eeffd7f8b126cb744ae" alt="materialG01.jpg" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/75035/d945ac71-7911-a4a8-7e21-647a9ec48e2a.jpeg" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2Fd945ac71-7911-a4a8-7e21-647a9ec48e2a.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=8079a9e60a03a4cc9ea5ab62e43075e1 1x" loading="lazy"></a></p>

<p>Unity使ってる諸氏には釈迦に説法かもしれませんが、<strong>テクスチャを2の累乗サイズに調整</strong>しないといけません。普段はUnityが勝手にやってくれるのですが、それに任せてるとテクスチャ上の<strong>ドット絵の切り出し位置指定がややこしくなる</strong>ので、それを避けるためです。<br>
<a href="https://camo.qiitausercontent.com/f4cab183a8c49dbbce8542c0f21e5c26e513e3a4/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f37353033352f34363163353338322d643165362d623832392d646266612d6132656531313132636337302e6a706567" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F461c5382-d1e6-b829-dbfa-a2ee1112cc70.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=2c5e110b63b1afbd9412fd6859b38aea" alt="resizedGreen.jpg" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/75035/461c5382-d1e6-b829-dbfa-a2ee1112cc70.jpeg" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F461c5382-d1e6-b829-dbfa-a2ee1112cc70.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=2f176fe5647f02bd06eb0394a31e804f 1x" loading="lazy"></a><a href="https://camo.qiitausercontent.com/a1bd41b06c1b7561beafc28cb1e0df41fc05816b/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f37353033352f36393735316539352d363833642d386166302d613534632d3532353338613861613534362e6a706567" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F69751e95-683d-8af0-a54c-52538a8aa546.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=d65ce6970660e829a15eadd040be8822" alt="resizedOrange.jpg" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/75035/69751e95-683d-8af0-a54c-52538a8aa546.jpeg" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F69751e95-683d-8af0-a54c-52538a8aa546.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=9837fcaa2c9b0d8ef87b6fe2c14e93fe 1x" loading="lazy"></a><a href="https://camo.qiitausercontent.com/074cff8d2d19e09d9ec6de2796653142e2911914/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f37353033352f64323063376238332d336261392d663639342d313130382d3639643565393165376631382e6a706567" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2Fd20c7b83-3ba9-f694-1108-69d5e91e7f18.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=ed3c2d497688d61039f7e5ebb652e7b4" alt="resizedPurple.jpg" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/75035/d20c7b83-3ba9-f694-1108-69d5e91e7f18.jpeg" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2Fd20c7b83-3ba9-f694-1108-69d5e91e7f18.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=74d5da6547be5f2545d24c77e4b5108f 1x" loading="lazy"></a></p>

<p>シェーダーは透過ができてUnlitでTextureを指定できればよいので、 Sprite/Default か UI/Default を使えます。<br>
ですが、将来の拡張を見越して、一応独自のシェーダーを用意しておきました。</p>

<div class="code-frame" data-lang="GLSL">
<div class="code-lang"><span class="bold">PseudoSprite.shader</span></div>
<div class="highlight"><pre class="with-code"><code><span class="n">Shader</span> <span class="s">"Custom/SeudoSprite"</span>
<span class="p">{</span>
    <span class="n">Properties</span>
    <span class="p">{</span>
        <span class="n">_MainTex</span> <span class="p">(</span><span class="s">"Texture"</span><span class="p">,</span> <span class="mi">2</span><span class="n">D</span><span class="p">)</span> <span class="o">=</span> <span class="s">"white"</span> <span class="p">{}</span>
    <span class="p">}</span>
    <span class="n">SubShader</span>
    <span class="p">{</span>
        <span class="n">Tags</span> <span class="p">{</span> <span class="s">"RenderType"</span><span class="o">=</span><span class="s">"Opaque"</span> <span class="p">}</span>
        <span class="n">LOD</span> <span class="mi">100</span>

        <span class="n">Pass</span>
        <span class="p">{</span>
            <span class="n">CGPROGRAM</span>
            <span class="cp">#pragma vertex vert
</span>            <span class="cp">#pragma fragment frag
</span>            <span class="c1">// make fog work</span>
            <span class="cp">#pragma multi_compile_fog
</span>
            <span class="cp">#include "UnityCG.cginc"
</span>
            <span class="k">struct</span> <span class="n">appdata</span>
            <span class="p">{</span>
                <span class="n">float4</span> <span class="n">vertex</span> <span class="o">:</span> <span class="n">POSITION</span><span class="p">;</span>
                <span class="n">float2</span> <span class="n">uv</span> <span class="o">:</span> <span class="n">TEXCOORD0</span><span class="p">;</span>
            <span class="p">};</span>

            <span class="k">struct</span> <span class="n">v2f</span>
            <span class="p">{</span>
                <span class="n">float2</span> <span class="n">uv</span> <span class="o">:</span> <span class="n">TEXCOORD0</span><span class="p">;</span>
                <span class="n">UNITY_FOG_COORDS</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
                <span class="n">float4</span> <span class="n">vertex</span> <span class="o">:</span> <span class="n">SV_POSITION</span><span class="p">;</span>
            <span class="p">};</span>

            <span class="kt">sampler2D</span> <span class="n">_MainTex</span><span class="p">;</span>
            <span class="n">float4</span> <span class="n">_MainTex_ST</span><span class="p">;</span>

            <span class="n">v2f</span> <span class="n">vert</span> <span class="p">(</span><span class="n">appdata</span> <span class="n">v</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">v2f</span> <span class="n">o</span><span class="p">;</span>
                <span class="n">o</span><span class="p">.</span><span class="n">vertex</span> <span class="o">=</span> <span class="n">UnityObjectToClipPos</span><span class="p">(</span><span class="n">v</span><span class="p">.</span><span class="n">vertex</span><span class="p">);</span>
                <span class="n">o</span><span class="p">.</span><span class="n">uv</span> <span class="o">=</span> <span class="n">TRANSFORM_TEX</span><span class="p">(</span><span class="n">v</span><span class="p">.</span><span class="n">uv</span><span class="p">,</span> <span class="n">_MainTex</span><span class="p">);</span>
                <span class="n">UNITY_TRANSFER_FOG</span><span class="p">(</span><span class="n">o</span><span class="p">,</span><span class="n">o</span><span class="p">.</span><span class="n">vertex</span><span class="p">);</span>
                <span class="k">return</span> <span class="n">o</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="n">fixed4</span> <span class="n">frag</span> <span class="p">(</span><span class="n">v2f</span> <span class="n">i</span><span class="p">)</span> <span class="o">:</span> <span class="n">SV_Target</span>
            <span class="p">{</span>
                <span class="c1">// sample the texture</span>
                <span class="n">fixed4</span> <span class="n">col</span> <span class="o">=</span> <span class="n">tex2D</span><span class="p">(</span><span class="n">_MainTex</span><span class="p">,</span> <span class="n">i</span><span class="p">.</span><span class="n">uv</span><span class="p">);</span>
                <span class="k">if</span><span class="p">(</span><span class="n">col</span><span class="p">.</span><span class="n">a</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">.</span><span class="mi">2</span><span class="p">)</span> <span class="k">discard</span><span class="p">;</span>
                <span class="c1">// apply fog</span>
                <span class="n">UNITY_APPLY_FOG</span><span class="p">(</span><span class="n">i</span><span class="p">.</span><span class="n">fogCoord</span><span class="p">,</span> <span class="n">col</span><span class="p">);</span>
                <span class="k">return</span> <span class="n">col</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="n">ENDCG</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<p>テンプレで生成されるUnlitシェーダーに透過処理を付け加えただけの単純なものです。</p>

<div class="code-frame" data-lang="GLSL"><div class="highlight"><pre class="with-code"><code>    <span class="k">if</span><span class="p">(</span><span class="n">col</span><span class="p">.</span><span class="n">a</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">.</span><span class="mi">2</span><span class="p">)</span> <span class="k">discard</span><span class="p">;</span>
</code></pre></div></div>

<h2>
<span id="メッシュ生成コンポーネント" class="fragment"></span><a href="#%E3%83%A1%E3%83%83%E3%82%B7%E3%83%A5%E7%94%9F%E6%88%90%E3%82%B3%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%8D%E3%83%B3%E3%83%88"><i class="fa fa-link"></i></a>メッシュ生成コンポーネント</h2>

<p>スプライトに相当する役割のオブジェクトとして、メッシュ生成用コンポーネントをEmptyなgameObjectにつけて使います。<br>
ちなみに Shed （シェド）は小屋という意味で名づけました。<br>
<a href="https://camo.qiitausercontent.com/6d52a2d7d5dd7fa3093feec48e01ecb16667261a/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f37353033352f61323263323833332d616133612d643234642d636331642d3263333665316139343537352e6a706567" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2Fa22c2833-aa3a-d24d-cc1d-2c36e1a94575.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=d7eba98da5a528c2770ef1b203ca4c02" alt="prefabG01.jpg" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/75035/a22c2833-aa3a-d24d-cc1d-2c36e1a94575.jpeg" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2Fa22c2833-aa3a-d24d-cc1d-2c36e1a94575.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=f9b32d9bc86d52ea3eb4af66cb322775 1x" loading="lazy"></a><br>
上の図のように Mesh Renderer, Mesh Filter も追加してください。設定を弄る必要はありません。</p>

<p>以下ソース</p>

<div class="code-frame" data-lang="csharp">
<div class="code-lang"><span class="bold">Shed.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="cp">#if UNITY_EDITOR
</span><span class="k">using</span> <span class="nn">UnityEditor</span><span class="p">;</span>
<span class="cp">#endif
</span><span class="k">using</span> <span class="nn">UnityEngine</span><span class="p">;</span>

<span class="p">[</span><span class="n">ExecuteInEditMode</span><span class="p">]</span>
<span class="k">public</span> <span class="k">class</span> <span class="nc">Shed</span> <span class="p">:</span> <span class="n">MonoBehaviour</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="kt">bool</span> <span class="n">needRestruct</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>

<span class="cp">#if UNITY_EDITOR
</span>    <span class="k">void</span> <span class="nf">OnEnable</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">SceneView</span><span class="p">.</span><span class="n">onSceneGUIDelegate</span> <span class="p">+=</span> <span class="k">this</span><span class="p">.</span><span class="n">OnEditorUpdate</span><span class="p">;</span>
        <span class="n">needRestruct</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">void</span> <span class="nf">OnDisable</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">SceneView</span><span class="p">.</span><span class="n">onSceneGUIDelegate</span> <span class="p">-=</span> <span class="k">this</span><span class="p">.</span><span class="n">OnEditorUpdate</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">void</span> <span class="nf">OnEditorUpdate</span><span class="p">(</span><span class="n">SceneView</span> <span class="n">vw</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nf">Start</span><span class="p">();</span>
    <span class="p">}</span>
<span class="cp">#endif
</span>
    <span class="p">[</span><span class="n">SerializeField</span><span class="p">,</span> <span class="nf">Header</span><span class="p">(</span><span class="s">"ドット絵の3Dサイズ"</span><span class="p">)]</span>
    <span class="k">private</span> <span class="n">Vector3Int</span> <span class="n">size</span><span class="p">;</span>

    <span class="p">[</span><span class="n">SerializeField</span><span class="p">,</span> <span class="nf">Header</span><span class="p">(</span><span class="s">"テクスチャの最手前座標"</span><span class="p">)]</span>
    <span class="k">private</span> <span class="n">Vector2Int</span> <span class="n">pivot</span><span class="p">;</span>

    <span class="c1">// ドット絵を保持するマテリアル</span>
    <span class="k">public</span> <span class="n">Material</span> <span class="n">material</span><span class="p">;</span>

    <span class="c1">// マテリアルのメインテクスチャサイズ</span>
    <span class="k">private</span> <span class="n">Vector2Int</span> <span class="n">texSize</span><span class="p">;</span>

    <span class="k">private</span> <span class="k">void</span> <span class="nf">Awake</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// なぜか Start/Awake の両方から Mesh初期化しないと、シーン再生時に表示されない</span>
        <span class="nf">Start</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="k">void</span> <span class="nf">Start</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(!</span><span class="n">needRestruct</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
        <span class="n">needRestruct</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>

        <span class="n">Mesh</span> <span class="n">mesh</span> <span class="p">=</span> <span class="nf">InitializeCube</span><span class="p">();</span>
        <span class="n">texSize</span> <span class="p">=</span> <span class="nf">GetTextureSize</span><span class="p">();</span>
        <span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">MeshFilter</span><span class="p">&gt;().</span><span class="n">sharedMesh</span> <span class="p">=</span> <span class="n">mesh</span><span class="p">;</span>
        <span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">MeshRenderer</span><span class="p">&gt;().</span><span class="n">material</span> <span class="p">=</span> <span class="n">material</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">/// &lt;summary&gt;</span>
    <span class="c1">/// テクスチャサイズを取得</span>
    <span class="c1">/// &lt;/summary&gt;</span>
    <span class="c1">/// &lt;returns&gt;&lt;/returns&gt;</span>
    <span class="k">private</span> <span class="n">Vector2Int</span> <span class="nf">GetTextureSize</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">Debug</span><span class="p">.</span><span class="nf">Assert</span><span class="p">(</span><span class="n">material</span><span class="p">.</span><span class="n">mainTexture</span> <span class="p">!=</span> <span class="k">null</span><span class="p">,</span> <span class="s">"Main texture is NULL!"</span><span class="p">);</span>

        <span class="kt">var</span> <span class="n">tex</span> <span class="p">=</span> <span class="n">material</span><span class="p">.</span><span class="n">mainTexture</span><span class="p">;</span>

        <span class="k">return</span> <span class="k">new</span> <span class="nf">Vector2Int</span><span class="p">(</span><span class="n">tex</span><span class="p">.</span><span class="n">width</span><span class="p">,</span> <span class="n">tex</span><span class="p">.</span><span class="n">height</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="c1">/// &lt;summary&gt;</span>
    <span class="c1">/// pivotからの相対位置をUV座標に変換する</span>
    <span class="c1">/// &lt;/summary&gt;</span>
    <span class="c1">/// &lt;param name="offestX"&gt;&lt;/param&gt;</span>
    <span class="c1">/// &lt;param name="offsetY"&gt;&lt;/param&gt;</span>
    <span class="c1">/// &lt;returns&gt;&lt;/returns&gt;    </span>
    <span class="k">private</span> <span class="n">Vector2</span> <span class="nf">ToUV</span><span class="p">(</span><span class="kt">float</span> <span class="n">offestX</span><span class="p">,</span> <span class="kt">float</span> <span class="n">offsetY</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">Vector2</span><span class="p">((</span><span class="n">pivot</span><span class="p">.</span><span class="n">x</span> <span class="p">+</span> <span class="n">offestX</span><span class="p">)</span> <span class="p">/</span> <span class="n">texSize</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="p">(</span><span class="n">texSize</span><span class="p">.</span><span class="n">y</span> <span class="p">-</span> <span class="n">pivot</span><span class="p">.</span><span class="n">y</span> <span class="p">+</span> <span class="n">offsetY</span><span class="p">)</span> <span class="p">/</span> <span class="n">texSize</span><span class="p">.</span><span class="n">y</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="c1">/// &lt;summary&gt;</span>
    <span class="c1">/// メッシュを生成する</span>
    <span class="c1">/// &lt;/summary&gt;</span>
    <span class="c1">/// &lt;returns&gt;&lt;/returns&gt;</span>
    <span class="k">private</span> <span class="n">Mesh</span> <span class="nf">InitializeCube</span><span class="p">()</span>
    <span class="p">{</span>

        <span class="n">Mesh</span> <span class="n">mesh</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Mesh</span><span class="p">();</span>

        <span class="cm">/*
         *  　6
         * 5＜ ＞3
         * |　1　|
         * 4＜|＞2
         *  　0
         */</span>
        <span class="kt">var</span> <span class="n">vertices</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Vector3</span><span class="p">[]</span> <span class="p">{</span>            
            <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">),</span> <span class="c1">// 0:pivot</span>
            <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="n">size</span><span class="p">.</span><span class="n">y</span><span class="p">,</span> <span class="m">0</span><span class="p">),</span> <span class="c1">// 1:nearest top</span>
            <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="n">size</span><span class="p">.</span><span class="n">z</span><span class="p">),</span> <span class="c1">// 2:bottom right</span>
            <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="n">size</span><span class="p">.</span><span class="n">y</span><span class="p">,</span> <span class="n">size</span><span class="p">.</span><span class="n">z</span><span class="p">),</span> <span class="c1">// 3:top right</span>
            <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span><span class="n">size</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">),</span> <span class="c1">// 4:bottom left</span>
            <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span><span class="n">size</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">size</span><span class="p">.</span><span class="n">y</span><span class="p">,</span> <span class="m">0</span><span class="p">),</span> <span class="c1">// 5:top left</span>
            <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span><span class="n">size</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">size</span><span class="p">.</span><span class="n">y</span><span class="p">,</span> <span class="n">size</span><span class="p">.</span><span class="n">z</span><span class="p">),</span> <span class="c1">// 6:most far top</span>
        <span class="p">};</span>

        <span class="kt">var</span> <span class="n">harfX</span> <span class="p">=</span> <span class="n">size</span><span class="p">.</span><span class="n">x</span> <span class="p">*</span> <span class="m">0.5f</span><span class="p">;</span>
        <span class="kt">var</span> <span class="n">harfZ</span> <span class="p">=</span> <span class="n">size</span><span class="p">.</span><span class="n">z</span> <span class="p">*</span> <span class="m">0.5f</span><span class="p">;</span>
        <span class="kt">var</span> <span class="n">uv</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Vector2</span><span class="p">[]</span> <span class="p">{</span>
            <span class="nf">ToUV</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">),</span> <span class="c1">// 0:pivot</span>
            <span class="nf">ToUV</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="n">size</span><span class="p">.</span><span class="n">y</span><span class="p">),</span> <span class="c1">// 1:nearest top</span>
            <span class="nf">ToUV</span><span class="p">(-</span><span class="n">size</span><span class="p">.</span><span class="n">z</span><span class="p">,</span> <span class="n">harfZ</span><span class="p">),</span> <span class="c1">// 4:bottom left</span>
            <span class="nf">ToUV</span><span class="p">(-</span><span class="n">size</span><span class="p">.</span><span class="n">z</span><span class="p">,</span> <span class="n">harfZ</span> <span class="p">+</span> <span class="n">size</span><span class="p">.</span><span class="n">y</span><span class="p">),</span> <span class="c1">// 5:top left</span>
            <span class="nf">ToUV</span><span class="p">(</span><span class="n">size</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">harfX</span><span class="p">),</span> <span class="c1">// 2:bottom right</span>
            <span class="nf">ToUV</span><span class="p">(</span><span class="n">size</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">harfX</span> <span class="p">+</span> <span class="n">size</span><span class="p">.</span><span class="n">y</span><span class="p">),</span>  <span class="c1">// 3:top right</span>
            <span class="nf">ToUV</span><span class="p">(</span><span class="n">size</span><span class="p">.</span><span class="n">x</span> <span class="p">-</span> <span class="n">size</span><span class="p">.</span><span class="n">z</span><span class="p">,</span> <span class="n">harfX</span> <span class="p">+</span> <span class="n">harfZ</span> <span class="p">+</span> <span class="n">size</span><span class="p">.</span><span class="n">y</span><span class="p">),</span> <span class="c1">// 6:most far top</span>
        <span class="p">};</span>

        <span class="kt">var</span> <span class="n">triangles</span> <span class="p">=</span> <span class="k">new</span> <span class="kt">int</span><span class="p">[]</span> <span class="p">{</span>
            <span class="m">0</span><span class="p">,</span><span class="m">3</span><span class="p">,</span><span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span><span class="m">2</span><span class="p">,</span><span class="m">3</span><span class="p">,</span> <span class="c1">// Right Surface </span>
            <span class="m">5</span><span class="p">,</span><span class="m">4</span><span class="p">,</span><span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span><span class="m">1</span><span class="p">,</span><span class="m">5</span><span class="p">,</span> <span class="c1">// Left Surface </span>
            <span class="m">1</span><span class="p">,</span><span class="m">3</span><span class="p">,</span><span class="m">5</span><span class="p">,</span> <span class="m">3</span><span class="p">,</span><span class="m">6</span><span class="p">,</span><span class="m">5</span><span class="p">,</span> <span class="c1">// Upper Surface</span>
        <span class="p">};</span>

        <span class="n">mesh</span><span class="p">.</span><span class="n">vertices</span> <span class="p">=</span> <span class="n">vertices</span><span class="p">;</span>
        <span class="n">mesh</span><span class="p">.</span><span class="n">uv</span> <span class="p">=</span> <span class="n">uv</span><span class="p">;</span>
        <span class="n">mesh</span><span class="p">.</span><span class="n">triangles</span> <span class="p">=</span> <span class="n">triangles</span><span class="p">;</span>

        <span class="k">return</span> <span class="n">mesh</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<p><code>#if UNITY_EDITOR</code>~<code>#endif</code>ブロックは、Sceneビューでもプレビューできるようにするためのものです。</p>

<p>上のソースだと行間が伸びて若干見辛いですがVS上ではコメントの図はこんな感じです。<br>
<a href="https://camo.qiitausercontent.com/9e888e3c5331f98ea2d9bed6f5e888cf7ca73d4b/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f37353033352f61303136383466372d613466302d653837622d623633312d6230373066366261303863302e6a706567" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2Fa01684f7-a4f0-e87b-b631-b070f6ba08c0.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=503a6384481dd0ebd3f0c417a8553019" alt="vertIndex.jpg" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/75035/a01684f7-a4f0-e87b-b631-b070f6ba08c0.jpeg" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2Fa01684f7-a4f0-e87b-b631-b070f6ba08c0.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=9a07515cf87099654bbdc94059d58343 1x" loading="lazy"></a><br>
0番が pivot で、1番が手前上面、6番が最奥上面… という風に割り振ってます。<br>
基本的に一方向から見ることしか想定してませんから、裏側のメッシュは作りません。<br>
Unity に合わせて一部書き換えましたが、やってることは参照元記事にある<code>InitializeCube</code>メソッドとほぼ同じです。<br>
（オリジナルはオブジェクトの配置位置を反映してましたが、Unityでは親のtransformで動かせば良いので０起点に固定してます。）<br>
テクスチャサイズが2の累乗に拡大されているので、 ToUV() メソッドでは pivot に相当するピクセルから必要な範囲だけを取り出せるように補正しています。このため<strong>アトラス画像のように同じ画像に複数のドット絵を入れて使うことも可能</strong>になっています。</p>

<h2>
<span id="カメラ" class="fragment"></span><a href="#%E3%82%AB%E3%83%A1%E3%83%A9"><i class="fa fa-link"></i></a>カメラ</h2>

<p><a href="https://camo.qiitausercontent.com/b65280bfa84b513000f8b932718926fa189e686b/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f37353033352f61373663353335622d386636352d303464312d653036332d6464623365623431353538632e6a706567" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2Fa76c535b-8f65-04d1-e063-ddb3eb41558c.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=cf86326260708aef2bd168d2de152d5a" alt="Camera01.jpg" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/75035/a76c535b-8f65-04d1-e063-ddb3eb41558c.jpeg" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2Fa76c535b-8f65-04d1-e063-ddb3eb41558c.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=522ff836389b1562efa9502de5a75360 1x" loading="lazy"></a></p>

<p>これも2Dシーンなら基本中の基本、釈迦に説法かもしれませんが、パース(遠近法)を適用しないようにカメラを Orthographic に設定します。<br>
Transform はお好みで調整してください、Clear Frags を Solid Color にしましたが、それ以外はデフォルト設定です。</p>

<h2>
<span id="途中結果１" class="fragment"></span><a href="#%E9%80%94%E4%B8%AD%E7%B5%90%E6%9E%9C%EF%BC%91"><i class="fa fa-link"></i></a>途中結果１</h2>

<p>ここまでの段階でこうなります。ぱっと見た感じでは既にお題の絵は出来ていますが、<strong>ドット絵が綺麗に出ていません</strong>。<br>
<a href="https://camo.qiitausercontent.com/c8453a2271c67271de3b54c8ddb8242e2f2796b7/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f37353033352f34333335346466392d653565612d353266312d356362362d3665316463356466363639352e6a706567" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F43354df9-e5ea-52f1-5cb6-6e1dc5df6695.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=7e82892dc5e084d277813598d6941d62" alt="sceneView01.jpg" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/75035/43354df9-e5ea-52f1-5cb6-6e1dc5df6695.jpeg" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F43354df9-e5ea-52f1-5cb6-6e1dc5df6695.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=4debfe0d35fed92366aa804237690aa9 1x" loading="lazy"></a></p>

<h1>
<span id="ドット絵を綺麗に表示-pixelperfect" class="fragment"></span><a href="#%E3%83%89%E3%83%83%E3%83%88%E7%B5%B5%E3%82%92%E7%B6%BA%E9%BA%97%E3%81%AB%E8%A1%A8%E7%A4%BA-pixelperfect"><i class="fa fa-link"></i></a>ドット絵を綺麗に表示 PixelPerfect</h1>

<p>わざわざドット絵を使うからには、<strong>ドットが潰れたり引き伸ばされたりボヤけたりせず、元の品質を保って表示したい</strong>ですね。（これを英語では <strong>PixelPerfect</strong> と言うようです。）</p>

<h2>
<span id="テクスチャのアンチエイリアスを解除" class="fragment"></span><a href="#%E3%83%86%E3%82%AF%E3%82%B9%E3%83%81%E3%83%A3%E3%81%AE%E3%82%A2%E3%83%B3%E3%83%81%E3%82%A8%E3%82%A4%E3%83%AA%E3%82%A2%E3%82%B9%E3%82%92%E8%A7%A3%E9%99%A4"><i class="fa fa-link"></i></a>テクスチャのアンチエイリアスを解除</h2>

<p><a href="https://camo.qiitausercontent.com/76cb3c458b5aeb4c74dd2d12ce3c9aac92fff526/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f37353033352f39666532646130332d393363312d643363342d326633642d3661643562373765613763332e6a706567" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F9fe2da03-93c1-d3c4-2f3d-6ad5b77ea7c3.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=f5f66d47e49a1c24fb57e2ebc712441a" alt="texFilterMode.jpg" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/75035/9fe2da03-93c1-d3c4-2f3d-6ad5b77ea7c3.jpeg" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F9fe2da03-93c1-d3c4-2f3d-6ad5b77ea7c3.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=573f4a0cb415ed11caf504e52e07de44 1x" loading="lazy"></a><br>
デフォルトだとテクスチャにアンチエイリアスがかかってぼやけてしまうので、上のように <strong>Filter Mode を Point に設定して解除</strong>します。<br>
また、マッピングが適切に出来ていれば大差ないのですが、 Wrap Mode も Repeat から Clamp に変更しています。</p>

<p><strong>Bilinear</strong> [初期設定]<br>
|<a href="https://camo.qiitausercontent.com/802718ea6aea4c874c7c485b6394fd746653fb0f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f37353033352f31313566326235332d363562332d336236632d303266612d6663306161656231336333392e6a706567" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F115f2b53-65b3-3b6c-02fa-fc0aaeb13c39.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=651bb89676d9d6e1031edeab83a30f7a" alt="bilinear.jpg" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/75035/115f2b53-65b3-3b6c-02fa-fc0aaeb13c39.jpeg" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F115f2b53-65b3-3b6c-02fa-fc0aaeb13c39.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=2ff728a2b0939be7a3988431eec2e086 1x" loading="lazy"></a></p>

<p><strong>Point(No filter)</strong><br>
<a href="https://camo.qiitausercontent.com/542fca485d989cb6cb3fda070151ddc0a95d2c98/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f37353033352f33663131633562332d653531302d313434392d613638372d3365303030323534353462352e6a706567" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F3f11c5b3-e510-1449-a687-3e00025454b5.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=bd1fb4de35522c3cba5345f4428c320a" alt="point.jpg" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/75035/3f11c5b3-e510-1449-a687-3e00025454b5.jpeg" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F3f11c5b3-e510-1449-a687-3e00025454b5.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=b8a18cfbe173e5bdaee724ec47f45c02 1x" loading="lazy"></a><br>
※上記キャプチャはいずれも倍率２</p>

<h2>
<span id="プロジェクション行列の調整" class="fragment"></span><a href="#%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3%E8%A1%8C%E5%88%97%E3%81%AE%E8%AA%BF%E6%95%B4"><i class="fa fa-link"></i></a>プロジェクション行列の調整</h2>

<p>カメラのプロジェクション(射影)行列の調整を行う QuaterView コンポーネントを作成します。<br>
個人的には<strong>これこそが元記事の肝</strong>だと思ってます。【以下引用】</p>

<blockquote>
<p><a href="https://camo.qiitausercontent.com/773349734b550edcfdff002ce11be152c91988a5/687474703a2f2f626c6f672d696d67732d35342e6663322e636f6d2f712f6f2f6f2f716f6f666173742f63756265706978656c73697a652e676966" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/http%3A%2F%2Fblog-imgs-54.fc2.com%2Fq%2Fo%2Fo%2Fqoofast%2Fcubepixelsize.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=4b9bf490d301c95acde9035d19d647b7" alt="" data-canonical-src="http://blog-imgs-54.fc2.com/q/o/o/qoofast/cubepixelsize.gif" srcset="https://qiita-user-contents.imgix.net/http%3A%2F%2Fblog-imgs-54.fc2.com%2Fq%2Fo%2Fo%2Fqoofast%2Fcubepixelsize.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=ee83d64d451452c4ed2157044ea1c3b5 1x" loading="lazy"></a><br>
ちょっと注意が必要なのは、xとzは直方体の辺に沿った長さではなく、画像の横幅に占めるドット数で指定すること。<br>
例えば、<del>右の絵</del>(※上の絵)なら size = new Vector(24,18,20); となるだろう。</p>

<p>なぜこんな仕様なのかというと、直方体の辺に沿った長さで指定すると x=20*√3, z=24*√3 になるわけだが、√3なんて<strong>無理数を使うと小数点誤差を避けようもなく、ドット絵が歪む原因になる</strong>から避けたいのだ。</p>
</blockquote>

<p>というわけで、ドット絵のピクセル単位でサイズ指定できて、スクリーンのドットに綺麗に射影するための変換行列を作ります。</p>

<div class="code-frame" data-lang="csharp">
<div class="code-lang"><span class="bold">QuaterView</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">QuaterView</span> <span class="p">:</span> <span class="n">MonoBehaviour</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="k">new</span> <span class="n">Camera</span> <span class="n">camera</span><span class="p">;</span>

    <span class="p">[</span><span class="n">SerializeField</span><span class="p">,</span> <span class="nf">Header</span><span class="p">(</span><span class="s">"カメラが移す中心地"</span><span class="p">)]</span>
    <span class="k">private</span> <span class="n">Vector3Int</span> <span class="n">lookAt</span><span class="p">;</span>

    <span class="p">[</span><span class="n">SerializeField</span><span class="p">,</span> <span class="nf">Header</span><span class="p">(</span><span class="s">"中心地の画面内上下位置(0～1)"</span><span class="p">)]</span>
    <span class="k">private</span> <span class="kt">float</span> <span class="n">vertFocusPos</span><span class="p">;</span>

    <span class="p">[</span><span class="n">SerializeField</span><span class="p">,</span> <span class="nf">Header</span><span class="p">(</span><span class="s">"カメラを離す距離"</span><span class="p">)]</span>
    <span class="k">private</span> <span class="kt">int</span> <span class="n">distance</span> <span class="p">=</span> <span class="m">256</span><span class="p">;</span>

    <span class="p">[</span><span class="n">SerializeField</span><span class="p">,</span> <span class="nf">Header</span><span class="p">(</span><span class="s">"ピクセル倍率"</span><span class="p">),</span> <span class="nf">Min</span><span class="p">(</span><span class="m">1</span><span class="p">)]</span>
    <span class="k">private</span> <span class="kt">int</span> <span class="n">zoom</span> <span class="p">=</span> <span class="m">1</span><span class="p">;</span>


    <span class="k">void</span> <span class="nf">Awake</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">camera</span> <span class="p">=</span> <span class="n">gameObject</span><span class="p">.</span><span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">Camera</span><span class="p">&gt;();</span>
        <span class="n">Assert</span><span class="p">.</span><span class="nf">IsNotNull</span><span class="p">(</span><span class="n">camera</span><span class="p">);</span>
        <span class="nf">AdjustCamera</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="k">void</span> <span class="nf">OnValidate</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nf">Awake</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="k">private</span> <span class="kt">float</span> <span class="nf">CalcOrthoSize</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// 画面の高さの半分＝等倍サイズ</span>
        <span class="k">return</span> <span class="n">camera</span><span class="p">.</span><span class="n">pixelHeight</span> <span class="p">/</span> <span class="p">(</span><span class="n">zoom</span> <span class="p">*</span> <span class="m">2f</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">private</span> <span class="k">void</span> <span class="nf">AdjustCamera</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">camera</span><span class="p">.</span><span class="n">transform</span><span class="p">.</span><span class="n">rotation</span> <span class="p">=</span> <span class="n">Quaternion</span><span class="p">.</span><span class="n">identity</span><span class="p">;</span>
        <span class="n">camera</span><span class="p">.</span><span class="n">transform</span><span class="p">.</span><span class="n">position</span> <span class="p">=</span> <span class="n">Vector3</span><span class="p">.</span><span class="n">zero</span><span class="p">;</span>
        <span class="n">camera</span><span class="p">.</span><span class="nf">ResetProjectionMatrix</span><span class="p">();</span>

        <span class="kt">int</span> <span class="n">depth</span> <span class="p">=</span> <span class="p">(</span><span class="n">lookAt</span><span class="p">.</span><span class="n">x</span> <span class="p">+</span> <span class="n">lookAt</span><span class="p">.</span><span class="n">z</span><span class="p">)</span> <span class="p">/</span> <span class="m">2</span><span class="p">;</span>
        <span class="n">Vector3Int</span> <span class="n">pos</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Vector3Int</span><span class="p">(</span><span class="n">lookAt</span><span class="p">.</span><span class="n">x</span> <span class="p">-</span> <span class="n">lookAt</span><span class="p">.</span><span class="n">z</span><span class="p">,</span> <span class="n">lookAt</span><span class="p">.</span><span class="n">y</span> <span class="p">+</span> <span class="n">depth</span><span class="p">,</span> <span class="n">lookAt</span><span class="p">.</span><span class="n">y</span> <span class="p">-</span> <span class="n">depth</span><span class="p">);</span>

        <span class="kt">var</span> <span class="n">matrix</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Matrix4x4</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="n">m00</span> <span class="p">=</span> <span class="m">1.0f</span><span class="p">,</span> <span class="n">m01</span> <span class="p">=</span> <span class="m">0.0f</span><span class="p">,</span> <span class="n">m02</span> <span class="p">=-</span><span class="m">1.0f</span><span class="p">,</span> <span class="n">m03</span> <span class="p">=</span> <span class="m">0.5f</span> <span class="p">-</span> <span class="n">pos</span><span class="p">.</span><span class="n">x</span><span class="p">,</span>
            <span class="n">m10</span> <span class="p">=</span> <span class="m">0.5f</span><span class="p">,</span> <span class="n">m11</span> <span class="p">=</span> <span class="m">1.0f</span><span class="p">,</span> <span class="n">m12</span> <span class="p">=</span> <span class="m">0.5f</span><span class="p">,</span> <span class="n">m13</span> <span class="p">=</span> <span class="m">0.0f</span> <span class="p">-</span> <span class="n">pos</span><span class="p">.</span><span class="n">y</span><span class="p">,</span>
            <span class="n">m20</span> <span class="p">=-</span><span class="m">0.5f</span><span class="p">,</span> <span class="n">m21</span> <span class="p">=</span> <span class="m">1.0f</span><span class="p">,</span> <span class="n">m22</span> <span class="p">=-</span><span class="m">0.5f</span><span class="p">,</span> <span class="n">m23</span> <span class="p">=</span> <span class="m">0.0f</span> <span class="p">-</span> <span class="n">pos</span><span class="p">.</span><span class="n">z</span> <span class="p">-</span> <span class="n">distance</span><span class="p">,</span>
            <span class="n">m30</span> <span class="p">=</span> <span class="m">0.0f</span><span class="p">,</span> <span class="n">m31</span> <span class="p">=</span> <span class="m">0.0f</span><span class="p">,</span> <span class="n">m32</span> <span class="p">=</span> <span class="m">0.0f</span><span class="p">,</span> <span class="n">m33</span> <span class="p">=</span> <span class="m">1.0f</span>            
        <span class="p">};</span>

        <span class="n">camera</span><span class="p">.</span><span class="n">worldToCameraMatrix</span> <span class="p">=</span> <span class="n">matrix</span><span class="p">;</span>
        <span class="n">camera</span><span class="p">.</span><span class="n">orthographicSize</span> <span class="p">=</span> <span class="nf">CalcOrthoSize</span><span class="p">();</span>

    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<p>下の方に出てくる matrix は元記事のこの行列を Unity 用に変換したもので、<strong>z軸の符号を反転</strong>しています。また使用するクラスの違いから<strong>パラメーターの表記順が行と列入れ替わってる</strong>ことに注意してください。<br>
<a href="https://camo.qiitausercontent.com/9dd4d7748ddc49074e1cfe6ae8ab8e650c949227/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f37353033352f32353739633930352d373934382d346430372d333532392d3361613739323865623139362e6a706567" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F2579c905-7948-4d07-3529-3aa7928eb196.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=072833c70d43d8bc23d91641bd33d06e" alt="xnaMatrix.jpg" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/75035/2579c905-7948-4d07-3529-3aa7928eb196.jpeg" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F2579c905-7948-4d07-3529-3aa7928eb196.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=7b0bd1969002a9842fb0598e5a91a0bd 1x" loading="lazy"></a><br>
参考: <a href="http://logicalbeat.jp/blog/929/" class="autolink" rel="nofollow noopener" target="_blank">http://logicalbeat.jp/blog/929/</a></p>

<p>この行列は camera の projectionMatrix ではなく worldToCameraMatrix にセットします。<br>
projectionMatrix は標準的な Orthographic を使います。ピクセル等倍なサイズにするには、<br>
<code>camera.orthographicSize = camera.pixelHeight / 2;</code><br>
に設定すればよいことがわかりました。<br>
参考: <a href="http://light11.hatenadiary.com/entry/2019/04/17/012544" class="autolink" rel="nofollow noopener" target="_blank">http://light11.hatenadiary.com/entry/2019/04/17/012544</a></p>

<h3>
<span id="カメラの回転も不要に" class="fragment"></span><a href="#%E3%82%AB%E3%83%A1%E3%83%A9%E3%81%AE%E5%9B%9E%E8%BB%A2%E3%82%82%E4%B8%8D%E8%A6%81%E3%81%AB"><i class="fa fa-link"></i></a>カメラの回転も不要に</h3>

<p>元記事には具体的には書いてないですが、この変換行列は回転も含んでます。<br>
上の方で貼ったカメラの Inspector は transform/rotation が <code>x=22.5, y=45, z=0</code> となっていますが、 <strong>QuaterView を適用したカメラは回転は不要</strong>です。これも<strong>小数点丸め誤差をなくすのに有用</strong>だと思います。<br>
<a href="https://camo.qiitausercontent.com/6cf5374709eb8de995b6b27612dbe7a60482181d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f37353033352f61326339393838392d346434332d356531632d323836322d3131313430333138393437302e6a706567" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2Fa2c99889-4d43-5e1c-2862-111403189470.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=b7650c9f89c0aef28d343a73f306c8d5" alt="quarterViewCamera.jpg" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/75035/a2c99889-4d43-5e1c-2862-111403189470.jpeg" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2Fa2c99889-4d43-5e1c-2862-111403189470.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=bc86ad7e95642e966089ba608716690e 1x" loading="lazy"></a><br>
<a href="https://camo.qiitausercontent.com/da581c59812f2cea962516d37d91b1c341e5c710/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f37353033352f37393031316235382d343633662d326539362d363736352d3031383561366562643465332e6a706567" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F79011b58-463f-2e96-6765-0185a6ebd4e3.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=571a86a2c0d54bea7f16627b65c5c8a1" alt="projection.jpg" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/75035/79011b58-463f-2e96-6765-0185a6ebd4e3.jpeg" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F79011b58-463f-2e96-6765-0185a6ebd4e3.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=6a8813193ef0ee9a3677ec406a575d7d 1x" loading="lazy"></a><br>
なお、 worldToCameraMatrix をセットすると transform 自体が無効になるので、<strong>QuaterView の lookAt でワールドの表示目標位置を設定できる</strong>ようにしています。Distanceはちょっとイジっただけだと見た目の変化はないですが、目標位置とカメラの距離を示します。 near/far plane の適用範囲をシフトさせる効果があります。</p>

<h2>
<span id="途中結果２" class="fragment"></span><a href="#%E9%80%94%E4%B8%AD%E7%B5%90%E6%9E%9C%EF%BC%92"><i class="fa fa-link"></i></a>途中結果２</h2>

<p>ドットがわかるように表示倍率x2にしてます。<br>
<a href="https://camo.qiitausercontent.com/5a1727521bf5545f5dffc4fa53e4424b7830aece/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f37353033352f38646636633066382d396337382d336638332d626661352d6138353666333764303639612e6a706567" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F8df6c0f8-9c78-3f83-bfa5-a856f37d069a.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=ac35a54e0ad386c7aae8116082bf9af3" alt="fixMatrix.jpg" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/75035/8df6c0f8-9c78-3f83-bfa5-a856f37d069a.jpeg" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F8df6c0f8-9c78-3f83-bfa5-a856f37d069a.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=1d730cc746105b1bb79278ceffd20eca 1x" loading="lazy"></a></p>

<p>かなりいい感じですが、よく見るとまだドットの歪みがあるようです。<br>
解りやすくするため、元記事のようにディザテクスチャを貼ってみました。<br>
<a href="https://camo.qiitausercontent.com/86e82b00ac7d632127930436735c6d5c91c7f3b8/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f37353033352f34376361383363382d346666372d643235342d356363332d6465653739363135393939392e6a706567" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F47ca83c8-4ff7-d254-5cc3-dee796159999.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=6695c237724f0ccaf4187b1d434d5c6f" alt="textureCompressed.jpg" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/75035/47ca83c8-4ff7-d254-5cc3-dee796159999.jpeg" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F47ca83c8-4ff7-d254-5cc3-dee796159999.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=410dd92404a0d6cf5d577396f96ccdf7 1x" loading="lazy"></a></p>

<p>なぜか<strong>境界付近の色がおかしい</strong>ですね。</p>

<h2>
<span id="テクスチャの圧縮設定" class="fragment"></span><a href="#%E3%83%86%E3%82%AF%E3%82%B9%E3%83%81%E3%83%A3%E3%81%AE%E5%9C%A7%E7%B8%AE%E8%A8%AD%E5%AE%9A"><i class="fa fa-link"></i></a>テクスチャの圧縮設定</h2>

<p>調べてみたところ、<strong>境界付近の色がおかしいのはテクスチャの圧縮によるもの</strong>だとわかりました。<br>
作成したばかりのテクスチャはデフォルトでは左のように Format が <code>RGBA Compressed DXT5</code> になっています（最下部のグレーアウト部分）。これを右のように<strong><code>RGBA 32 bit</code></strong>にしました。ついでにMax Sizeもテクスチャに合わせてます。</p>

<table>
<thead>
<tr>
<th style="text-align: center">Before</th>
<th style="text-align: center">After</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center"><a href="https://camo.qiitausercontent.com/8bf4bcd3e3fa6e31866e320c3399c4f9fc3e4321/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f37353033352f31636433356237642d303764302d643533382d376237382d6231343365666539666531662e6a706567" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F1cd35b7d-07d0-d538-7b78-b143efe9fe1f.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=c79209547f2ab068c4bab229559a7c16" alt="texDefaultComp.jpg" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/75035/1cd35b7d-07d0-d538-7b78-b143efe9fe1f.jpeg" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F1cd35b7d-07d0-d538-7b78-b143efe9fe1f.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=7cb6c21e88afbcd194c3d0fc5df51010 1x" loading="lazy"></a></td>
<td style="text-align: center"><a href="https://camo.qiitausercontent.com/155da3205ff8a369c3838485945166c07ab17c15/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f37353033352f66383266323665622d633735322d303837392d393862662d3364663536373730646465352e6a706567" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2Ff82f26eb-c752-0879-98bf-3df56770dde5.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=83a11dfc27269c9d93b26de75549c611" alt="texSetNoComp.jpg" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/75035/f82f26eb-c752-0879-98bf-3df56770dde5.jpeg" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2Ff82f26eb-c752-0879-98bf-3df56770dde5.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=9e755d4960f0a010101fdf0c934302b1 1x" loading="lazy"></a></td>
</tr>
<tr>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
</tr>
</tbody>
</table>

<h2>
<span id="ポリゴン境界の拡張" class="fragment"></span><a href="#%E3%83%9D%E3%83%AA%E3%82%B4%E3%83%B3%E5%A2%83%E7%95%8C%E3%81%AE%E6%8B%A1%E5%BC%B5"><i class="fa fa-link"></i></a>ポリゴン境界の拡張</h2>

<p>色がおかしいのは直りましたが、よく見ると<strong>斜めの線が途切れ途切れ</strong>になっています。<br>
<a href="https://camo.qiitausercontent.com/6d1dcbb06e00d533726c7714153d437509b26a3a/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f37353033352f38646461353462342d323739322d353136322d383535392d6132373834313336393639612e6a706567" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F8dda54b4-2792-5162-8559-a2784136969a.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=43a1761550d73f43a2126afce3b3c0ee" alt="needMapping.jpg" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/75035/8dda54b4-2792-5162-8559-a2784136969a.jpeg" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F8dda54b4-2792-5162-8559-a2784136969a.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=fc4b771e7562ef49ac0746841926306d 1x" loading="lazy"></a><br>
これは、左右側面のポリゴンの高さが足りないせいだと思われるので、<strong>ポリゴンを上下に 0.5f づつ拡張</strong>してみました。UVも同じように拡張しています。<br>
<a href="https://camo.qiitausercontent.com/a11bbc8d0ecf68ab6a9e1e5be6d25bbd6c2e8823/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f37353033352f37613936363461372d373034312d626363632d316464642d3034336539303861323638642e676966" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F7a9664a7-7041-bccc-1ddd-043e908a268d.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=657836672af182323b620ef26888e6e0" alt="polyExpand.gif" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/75035/7a9664a7-7041-bccc-1ddd-043e908a268d.gif" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F7a9664a7-7041-bccc-1ddd-043e908a268d.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=4c8639fedbc0a7b7855f86b8d8dd138d 1x" loading="lazy"></a></p>

<div class="code-frame" data-lang="csharp">
<div class="code-lang"><span class="bold">Shed.cs</span></div>
<div class="highlight"><pre class="with-code"><code>        <span class="kt">var</span> <span class="n">vertices</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Vector3</span><span class="p">[]</span> <span class="p">{</span>            
            <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="p">-</span><span class="m">0.5f</span><span class="p">,</span> <span class="m">0</span><span class="p">),</span> <span class="c1">// 0:pivot</span>
            <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="n">size</span><span class="p">.</span><span class="n">y</span><span class="p">+</span><span class="m">0.5f</span><span class="p">,</span> <span class="m">0</span><span class="p">),</span> <span class="c1">// 1:nearest top</span>
            <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="p">-</span><span class="m">0.5f</span><span class="p">,</span> <span class="n">size</span><span class="p">.</span><span class="n">z</span><span class="p">),</span> <span class="c1">// 2:bottom right</span>
            <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="n">size</span><span class="p">.</span><span class="n">y</span><span class="p">+</span><span class="m">0.5f</span><span class="p">,</span> <span class="n">size</span><span class="p">.</span><span class="n">z</span><span class="p">),</span> <span class="c1">// 3:top right</span>
            <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span><span class="n">size</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="p">-</span><span class="m">0.5f</span><span class="p">,</span> <span class="m">0</span><span class="p">),</span> <span class="c1">// 4:bottom left</span>
            <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span><span class="n">size</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">size</span><span class="p">.</span><span class="n">y</span><span class="p">+</span><span class="m">0.5f</span><span class="p">,</span> <span class="m">0</span><span class="p">),</span> <span class="c1">// 5:top left</span>
            <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span><span class="n">size</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">size</span><span class="p">.</span><span class="n">y</span><span class="p">+</span><span class="m">0.5f</span><span class="p">,</span> <span class="n">size</span><span class="p">.</span><span class="n">z</span><span class="p">),</span> <span class="c1">// 6:most far top</span>
        <span class="p">};</span>

        <span class="kt">var</span> <span class="n">harfX</span> <span class="p">=</span> <span class="n">size</span><span class="p">.</span><span class="n">x</span> <span class="p">*</span> <span class="m">0.5f</span><span class="p">;</span>
        <span class="kt">var</span> <span class="n">harfZ</span> <span class="p">=</span> <span class="n">size</span><span class="p">.</span><span class="n">z</span> <span class="p">*</span> <span class="m">0.5f</span><span class="p">;</span>
        <span class="kt">var</span> <span class="n">uv</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Vector2</span><span class="p">[]</span> <span class="p">{</span>
            <span class="nf">ToUV</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="p">-</span><span class="m">0.5f</span><span class="p">),</span> <span class="c1">// 0:pivot</span>
            <span class="nf">ToUV</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="n">size</span><span class="p">.</span><span class="n">y</span><span class="p">+</span><span class="m">0.5f</span><span class="p">),</span> <span class="c1">// 1:nearest top</span>
            <span class="nf">ToUV</span><span class="p">(-</span><span class="n">size</span><span class="p">.</span><span class="n">z</span><span class="p">,</span> <span class="n">harfZ</span><span class="p">-</span><span class="m">0.5f</span><span class="p">),</span> <span class="c1">// 4:bottom left</span>
            <span class="nf">ToUV</span><span class="p">(-</span><span class="n">size</span><span class="p">.</span><span class="n">z</span><span class="p">,</span> <span class="n">harfZ</span> <span class="p">+</span> <span class="n">size</span><span class="p">.</span><span class="n">y</span><span class="p">+</span><span class="m">0.5f</span><span class="p">),</span> <span class="c1">// 5:top left</span>
            <span class="nf">ToUV</span><span class="p">(</span><span class="n">size</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">harfX</span><span class="p">-</span><span class="m">0.5f</span><span class="p">),</span> <span class="c1">// 2:bottom right</span>
            <span class="nf">ToUV</span><span class="p">(</span><span class="n">size</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">harfX</span> <span class="p">+</span> <span class="n">size</span><span class="p">.</span><span class="n">y</span><span class="p">+</span><span class="m">0.5f</span><span class="p">),</span>  <span class="c1">// 3:top right</span>
            <span class="nf">ToUV</span><span class="p">(</span><span class="n">size</span><span class="p">.</span><span class="n">x</span> <span class="p">-</span> <span class="n">size</span><span class="p">.</span><span class="n">z</span><span class="p">,</span> <span class="n">harfX</span> <span class="p">+</span> <span class="n">harfZ</span> <span class="p">+</span> <span class="n">size</span><span class="p">.</span><span class="n">y</span><span class="p">+</span><span class="m">0.5f</span><span class="p">),</span> <span class="c1">// 6:most far top</span>
        <span class="p">};</span>
</code></pre></div>
</div>

<p>これで綺麗に表示されました。文句なしの Pixel Perfect です。<br>
<a href="https://camo.qiitausercontent.com/6971676f8299b830a60be60974277204ac7d2b61/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f37353033352f37333466396465392d376563362d653765632d323464622d6534376138303666373430662e6a706567" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F734f9de9-7ec6-e7ec-24db-e47a806f740f.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=3546278914aeac2ebfde7f202b6e9d8e" alt="allAdjusted.jpg" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/75035/734f9de9-7ec6-e7ec-24db-e47a806f740f.jpeg" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F734f9de9-7ec6-e7ec-24db-e47a806f740f.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=5c449958d226a2b372f4d3e145e297a3 1x" loading="lazy"></a></p>

<h1>
<span id="最終結果" class="fragment"></span><a href="#%E6%9C%80%E7%B5%82%E7%B5%90%E6%9E%9C"><i class="fa fa-link"></i></a>最終結果</h1>

<p>元のシーンも調整してこのようになりました。<strong>ドットに歪みなく描画され、深度バッファを適用して適切な重なり順が実現できています</strong>。<br>
<a href="https://camo.qiitausercontent.com/5ce547edf699eb9771843b4c6963e7f1abe5a0e0/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f37353033352f36316230656666322d353832322d626665302d356133662d3234303835613662383936652e6a706567" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F61b0eff2-5822-bfe0-5a3f-24085a6b896e.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=812fe2021ca6e06f4a15f03c2c35f5a1" alt="finalResult.jpg" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/75035/61b0eff2-5822-bfe0-5a3f-24085a6b896e.jpeg" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F61b0eff2-5822-bfe0-5a3f-24085a6b896e.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=c82f923e7ca338e81715e80f8e788303 1x" loading="lazy"></a></p>

<h1>
<span id="3dオブジェクトとの共演" class="fragment"></span><a href="#3d%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%A8%E3%81%AE%E5%85%B1%E6%BC%94"><i class="fa fa-link"></i></a>3Dオブジェクトとの共演</h1>

<p>深度バッファを適用してるので、<strong>他の３Dオブジェクトと混在させたシーンが作れます</strong>。<br>
例えば地形(Terrain)と組み合わせたり。<br>
<a href="https://camo.qiitausercontent.com/23b0095a9dff45314be022ae2245121d528c63ea/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f37353033352f63626165643437382d616630662d316132662d613465612d3432353765303265383663662e6a706567" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2Fcbaed478-af0f-1a2f-a4ea-4257e02e86cf.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=46ecc505ceb7fcb50b0ec4b8bcbfb116" alt="withTerrain.jpg" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/75035/cbaed478-af0f-1a2f-a4ea-4257e02e86cf.jpeg" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2Fcbaed478-af0f-1a2f-a4ea-4257e02e86cf.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=2f571e945a644204f8f940a9713b3fa4 1x" loading="lazy"></a><br>
イーサンくんと組み合わせたり。<br>
<a href="https://camo.qiitausercontent.com/8efc0633c739613deeda2863594eb6ac9e46cad0/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f37353033352f34373362663434662d613331312d613465322d386633352d6463663063366332303361352e6a706567" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F473bf44f-a311-a4e2-8f35-dcf0c6c203a5.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=1434d0a4519c47f8167df6bc4cb95ed4" alt="ethanWalk.jpg" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/75035/473bf44f-a311-a4e2-8f35-dcf0c6c203a5.jpeg" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F473bf44f-a311-a4e2-8f35-dcf0c6c203a5.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=c68690cde189cbb48eebd9cdf46de5ca 1x" loading="lazy"></a><br>
↑足は紫の物体の向こう側にあるのに、右手は紫の物体の上にあるのがおわかりいただけるでしょうか。</p>

<h2>
<span id="縦横比補正" class="fragment"></span><a href="#%E7%B8%A6%E6%A8%AA%E6%AF%94%E8%A3%9C%E6%AD%A3"><i class="fa fa-link"></i></a>縦横比補正</h2>

<p>ところで、よく見ると３Dオブジェクトは若干縦に潰れた感じになります。<br>
これはドット絵に都合のよいように強引な射影変形をしてるためですので、以下のように<strong>アスペクト補正用のゲームオブジェクトの下に3Dオブジェクトを入れてやる</strong>とよいと思います。<br>
<a href="https://camo.qiitausercontent.com/767b07f0bd23dcbe375c11094db827caadd307a1/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f37353033352f63336662666335332d306537352d376434652d646563372d6236366235376362616564372e6a706567" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2Fc3fbfc53-0e75-7d4e-dec7-b66b57cbaed7.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=60bca1b9681a41ec5e7504c0cd80c8fb" alt="adjust3D.jpg" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/75035/c3fbfc53-0e75-7d4e-dec7-b66b57cbaed7.jpeg" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2Fc3fbfc53-0e75-7d4e-dec7-b66b57cbaed7.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=e53d52d8596e04876cf8dbe5e2d3b515 1x" loading="lazy"></a><br>
ここで<strong>調整用オブジェクト(adjust3D)は縦を 1.155 倍</strong>にしていることに注目してください。<br>
1.155という数値はまったく無根拠ではなくて、これはx,z軸方向のドットが本来 √3/2 の距離を１ピクセルに変換していることから、逆数である <code>2/√3 ≒ 1.155</code> をy軸方向に適用したものです。</p>

<table>
<thead>
<tr>
<th style="text-align: center">無調整</th>
<th style="text-align: center">アスペクト調整済</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center"><a href="https://camo.qiitausercontent.com/a78e9fbc3ea31244c084f80c426b104d898a1b9e/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f37353033352f62663337306337332d326530302d383239312d633135382d3832306439313830326139312e6a706567" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2Fbf370c73-2e00-8291-c158-820d91802a91.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=ac425af51179250b642da80fc21dbd20" alt="ethanNoAdjust.jpg" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/75035/bf370c73-2e00-8291-c158-820d91802a91.jpeg" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2Fbf370c73-2e00-8291-c158-820d91802a91.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=f0a792711949c745f13722b833ffabd7 1x" loading="lazy"></a></td>
<td style="text-align: center"><a href="https://camo.qiitausercontent.com/623b8e3d174df8fda9809b062523df311e025b5f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f37353033352f62623734646164322d653263612d383239652d383131342d6661653031343632353062652e6a706567" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2Fbb74dad2-e2ca-829e-8114-fae0146250be.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=a3e32071fac705446bfb2a7f27d4a8df" alt="ethanAdjusted.jpg" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/75035/bb74dad2-e2ca-829e-8114-fae0146250be.jpeg" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2Fbb74dad2-e2ca-829e-8114-fae0146250be.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=cfcb4da1a444b46c94754f5e3629844e 1x" loading="lazy"></a></td>
</tr>
</tbody>
</table>

<p>ご覧のように回転させても違和感ないですね！<br>
<a href="https://camo.qiitausercontent.com/ab051a1df130bd05056b6992a4625bc3e5d5a28e/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f37353033352f64346334663231322d373537382d613130372d363866642d6537613062323733633764662e676966" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2Fd4c4f212-7578-a107-68fd-e7a0b273c7df.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=b9ff990f470f70a698551d34c7c868e8" alt="rotateEthan.gif" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/75035/d4c4f212-7578-a107-68fd-e7a0b273c7df.gif" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2Fd4c4f212-7578-a107-68fd-e7a0b273c7df.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=3f431f7e0f590c6744227bbee354a08d 1x" loading="lazy"></a></p>

<h1>
<span id="まとめ" class="fragment"></span><a href="#%E3%81%BE%E3%81%A8%E3%82%81"><i class="fa fa-link"></i></a>まとめ</h1>

<ul>
<li>等角投影法のドット絵を立体に正射影して深度バッファを適用することができた</li>
<li>worldToCameraMatrix を調整して Pixel Perfect にできた</li>
<li>Pixel Perfect のために必要なテクスチャ設定がわかった</li>
<li>縦横比調整して3Dモデルとの併用もできた</li>
</ul>

<p>プロジェクトファイル一式は <a href="https://github.com/ShinodaNaoki/isometricPixelarts" rel="nofollow noopener" target="_blank">GitHub</a> にあります。</p>

<h1>
<span id="参考" class="fragment"></span><a href="#%E5%8F%82%E8%80%83"><i class="fa fa-link"></i></a>参考</h1>

<p>【元ネタ】<a href="http://qoofast.blog76.fc2.com/blog-entry-23.html" class="autolink" rel="nofollow noopener" target="_blank">http://qoofast.blog76.fc2.com/blog-entry-23.html</a></p>

<p><strong>カスタムmesh作成</strong><br>
<a href="http://nn-hokuson.hatenablog.com/entry/2018/02/13/200114" class="autolink" rel="nofollow noopener" target="_blank">http://nn-hokuson.hatenablog.com/entry/2018/02/13/200114</a></p>

<p><strong>テクスチャ設定</strong><br>
<a href="http://baba-s.hatenablog.com/entry/2018/01/31/213000" class="autolink" rel="nofollow noopener" target="_blank">http://baba-s.hatenablog.com/entry/2018/01/31/213000</a></p>

<p><strong>射影行列とカメラ周り</strong><br>
<a href="http://logicalbeat.jp/blog/929/" class="autolink" rel="nofollow noopener" target="_blank">http://logicalbeat.jp/blog/929/</a><br>
<a href="https://note.mu/fuqunaga/n/n08d81b185514" class="autolink" rel="nofollow noopener" target="_blank">https://note.mu/fuqunaga/n/n08d81b185514</a><br>
<a href="http://light11.hatenadiary.com/entry/2019/04/17/012544" class="autolink" rel="nofollow noopener" target="_blank">http://light11.hatenadiary.com/entry/2019/04/17/012544</a><br>
<a href="https://github.com/cmilr/DeadSimple-Pixel-Perfect-Camera" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/cmilr/DeadSimple-Pixel-Perfect-Camera</a></p>
</div></div></section><div class="css-1yzj1fm"><div class="css-1uv1qiv"><span class="fa fa-twitter"></span></div><div class="css-1uv1qiv"><span class="fa fa-facebook"></span></div></div><div class="apm-Content"><div class="apm-Content_title">Why not register and get more from Qiita?</div><ol class="apm-Content_list"><li>We will deliver articles that match you<div class="description">By following users and tags, you can catch up information on technical fields that you are interested in as a whole</div></li><li>you can read useful information later efficiently<div class="description">By &quot;stocking&quot; the articles you like, you can search right away</div></li><div><a class="apm-Content_help" href="https://help.qiita.com/ja/articles/qiita-login-user" target="_blank"><i class="fa fa-fw fa-arrow-circle-right"></i>What you can do with signing up</a></div></ol><a href="/signup?callback_action=login_or_signup&amp;redirect_to=%2FShinoda_Naoki%2Fitems%2Ffccdc137747ea4301578&amp;realm=qiita" class="apm-Content_button apm-Content_button-signup">Sign up</a><a href="/login?callback_action=login_or_signup&amp;redirect_to=%2FShinoda_Naoki%2Fitems%2Ffccdc137747ea4301578&amp;realm=qiita" class="apm-Content_button apm-Content_button-signin">Login</a></div></div><div class="css-helsa7"></div></div></div></div><div class="css-109dbrr"><div class="css-5jpx49"><div class="css-mnxgyc"><button class=" css-1vlpknv"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/Shinoda_Naoki/items/fccdc137747ea4301578/likers" class="css-1iupg5d">59</a></div><div class="css-fsjkhv"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-1b17vb0">50</span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-7i7f4d"><div class="css-1gj7nt">Improve article</div><a href="/drafts/fccdc137747ea4301578/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/Shinoda_Naoki/items/fccdc137747ea4301578/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/Shinoda_Naoki/items/fccdc137747ea4301578/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/Shinoda_Naoki/items/fccdc137747ea4301578/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/Shinoda_Naoki/items/fccdc137747ea4301578.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="PersonalArticlePage" data-dom-id="PersonalArticlePage-react-component-46cb6c69-0996-4e40-a028-2b9d25820113">{"authorAnalyticsTrackingId":null,"organizationAnalyticsTrackingId":null}</script>
      
<footer id="globalFooter" class="st-Footer"><div class="st-Footer_container"><div class="st-Footer_start"><div class="st-Footer_logo"><svg viewbox="0 0 426.57 130" xmlns="http://www.w3.org/2000/svg"><circle cx="167.08" cy="21.4" r="12.28" /><path d="M250.81 29.66h23.48v18.9h-23.48z" /><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z" /><circle cx="216.33" cy="21.4" r="12.28" /></svg></div><div class="st-Footer_catchcopy">How developers code is here.</div><div class="st-Footer_socials"><a class="fa fa-twitter" href="https://twitter.com/qiita"></a><a class="fa fa-facebook-square" href="https://www.facebook.com/qiita/"></a></div></div><div class="st-Footer_end"><div class="st-Footer_qiita"><div class="st-Footer_label">Qiita</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="/about">About</a><a href="/terms">Terms</a><a href="/privacy">Privacy</a><a target="_blank" href="http://help.qiita.com/ja/articles/qiita-community-guideline">Guideline</a><a target="_blank" href="https://help.qiita.com/ja/articles/others-brand-guideline">Design Guideline</a></div><div class="st-Footer_column"><a href="/release-notes">Release</a><a href="/api/v2/docs">API</a><a href="/feedback/new">ご意見</a><a href="https://help.qiita.com">Help</a><a target="_blank" href="https://qiita.com/ads?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Advertisement</a></div></div></div><div class="st-Footer_increments"><div class="st-Footer_label">Increments</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="https://increments.co.jp/company/">About</a><a href="https://increments.co.jp/jobs/">採用情報</a><a href="https://blog.qiita.com">Blog</a></div><div class="st-Footer_column"><a href="https://teams.qiita.com/">Qiita Team</a><a href="https://jobs.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Jobs</a><a href="https://zine.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Zine</a></div></div></div></div></div><div class="st-Footer_copyright">© 2011-2021 Increments Inc.</div></footer><div id="Snackbar-react-component-38982fc3-43e6-46a4-a5ff-3406245b520d"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="Snackbar" data-dom-id="Snackbar-react-component-38982fc3-43e6-46a4-a5ff-3406245b520d">{}</script>
      
<div id="LoginModal-react-component-35c9a6a5-96ec-47a1-8aa3-2be2c7a34830"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="LoginModal" data-dom-id="LoginModal-react-component-35c9a6a5-96ec-47a1-8aa3-2be2c7a34830">{}</script>
      
<div id="StockModal-react-component-1e72354d-9dea-41a2-94f7-5ea4ae166654"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="StockModal" data-dom-id="StockModal-react-component-1e72354d-9dea-41a2-94f7-5ea4ae166654">{}</script>
      
</div><div id="dataContainer" style="display: none;" data-config="{&quot;actionPath&quot;:&quot;public/items#show&quot;,&quot;settings&quot;:{&quot;analyticsTrackingId&quot;:&quot;UA-24675221-12&quot;,&quot;assetsMap&quot;:{},&quot;csrfToken&quot;:&quot;2sb2iIJzNUJZ/PKyo8bL1nw+TW8HfHhdlAAmJhI4h1/Q87x/IjS9CLqtA1sAhQUcQ72j+gl4V1w+je+iCT0Nyg==&quot;,&quot;locale&quot;:&quot;en&quot;},&quot;currentUser&quot;:null}" /></body></html><script type="application/json" data-js-react-on-rails-store="AppStoreWithReactOnRails">{"snackbar":{"type":"","body":"","isActive":false},"article":{"article":{"body":"\n\u003ch1\u003e\n\u003cspan id=\"前置き\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%89%8D%E7%BD%AE%E3%81%8D\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e前置き\u003c/h1\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/23b0095a9dff45314be022ae2245121d528c63ea/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f37353033352f63626165643437382d616630662d316132662d613465612d3432353765303265383663662e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2Fcbaed478-af0f-1a2f-a4ea-4257e02e86cf.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=46ecc505ceb7fcb50b0ec4b8bcbfb116\" alt=\"withTerrain.jpg\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/75035/cbaed478-af0f-1a2f-a4ea-4257e02e86cf.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2Fcbaed478-af0f-1a2f-a4ea-4257e02e86cf.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=2f571e945a644204f8f940a9713b3fa4 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003ca href=\"https://camo.qiitausercontent.com/2b73935ea3590598a0ba639c21e8f2f768ff0d56/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f37353033352f38316637653361322d383337352d313666662d336336642d3430306163623934656137362e676966\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F81f7e3a2-8375-16ff-3c6d-400acb94ea76.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=b0f396f3c753747810857ab55794b6a7\" alt=\"sceneViewAni.gif\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/75035/81f7e3a2-8375-16ff-3c6d-400acb94ea76.gif\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F81f7e3a2-8375-16ff-3c6d-400acb94ea76.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=ad84197488294dc6331df44d2e4e6e33 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003eクオータービュー\u003c/strong\u003eゲームってご存知ですか？\u003cbr\u003e\n自分はあんまり最近のゲーム知らなくて、古い例しか出てきませんが、「A列車で行こう4」とか「SimCity 2000」のような、\u003cstrong\u003e等角投影図風に描いたドット絵\u003c/strong\u003eを配置したゲームのことです。見下ろし型とか、2.5Dとか、鳥瞰図なんて言われる場合もありますね（これらは必ずしもクオータービューだけを指す言葉じゃないですが）。英語だと isometric view と呼ぶようです。\u003c/p\u003e\n\n\u003cp\u003e3Dのような奥行きのある絵ですが、実体は二次元（Sprite）なので\u003cstrong\u003e描画順(z-オーダー)\u003c/strong\u003eで重なりを制御する必要があります。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"唐突ですがここで問題\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%94%90%E7%AA%81%E3%81%A7%E3%81%99%E3%81%8C%E3%81%93%E3%81%93%E3%81%A7%E5%95%8F%E9%A1%8C\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e唐突ですがここで問題。\u003c/h2\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/da3117d74d8f022ee607b568b7c13c6dd456bde3/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f37353033352f37333631343064362d343264382d383833632d663461662d6430663531643836323864332e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F736140d6-42d8-883c-f4af-d0f51d8628d3.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=0135186699c4af4df96a143d70e6a4e6\" alt=\"greenFrame.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/75035/736140d6-42d8-883c-f4af-d0f51d8628d3.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F736140d6-42d8-883c-f4af-d0f51d8628d3.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=614d4b46e0b18a59f2b98cdf64f0f885 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003ca href=\"https://camo.qiitausercontent.com/af8cf2a2dae80090e26616ab9c18cc525a51f3ff/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f37353033352f30376664333863372d623538652d353066632d633766392d3639326334613666613939312e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F07fd38c7-b58e-50fc-c7f9-692c4a6fa991.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=274daae50d52063186703eea51133140\" alt=\"orangeSteps.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/75035/07fd38c7-b58e-50fc-c7f9-692c4a6fa991.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F07fd38c7-b58e-50fc-c7f9-692c4a6fa991.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=2102271a5078f89b35fca77760b3fa28 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003ca href=\"https://camo.qiitausercontent.com/0f3c622ccb3be3207d21c3be2ec62945d3314b2f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f37353033352f39353964323663662d353933642d366433362d346431612d3262393463633030656331392e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F959d26cf-593d-6d36-4d1a-2b94cc00ec19.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=e9d90563bf5894a1f6ee0e86dc1e8b7b\" alt=\"purpleCargo.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/75035/959d26cf-593d-6d36-4d1a-2b94cc00ec19.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F959d26cf-593d-6d36-4d1a-2b94cc00ec19.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=3cf4f22e66b9547e69a2684483d6f3de 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e上に挙げた\u003cstrong\u003e緑\u003c/strong\u003e、\u003cstrong\u003e橙\u003c/strong\u003e、\u003cstrong\u003e紫\u003c/strong\u003eのドット絵それぞれから３つの Sprite を作って、下の画像を作るにはどういう描画順で描画すればいいでしょうか？\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/3fb0caf2a99f8e422c425eceba13aa6088cd7c84/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f37353033352f61373239663839332d343433302d663565392d653534662d3837306538306261316562302e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2Fa729f893-4430-f5e9-e54f-870e80ba1eb0.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=9c65e68233adb71a04a142eac596381c\" alt=\"Image10000.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/75035/a729f893-4430-f5e9-e54f-870e80ba1eb0.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2Fa729f893-4430-f5e9-e54f-870e80ba1eb0.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=8b09545af5a9fc459327d34c2f5c2ce4 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e答えは、「（※この問題の前提では）\u003cstrong\u003e不可能\u003c/strong\u003e」です。\u003cbr\u003e\nそれぞれの重なってる部分を見てください。\u003cstrong\u003e橙＞紫\u003c/strong\u003e、\u003cstrong\u003e紫＞緑\u003c/strong\u003e、\u003cstrong\u003e緑＞橙\u003c/strong\u003eとなるようなｚオーダーの組み合わせは作れません。方程式で言うなら「解なし」です。\u003c/p\u003e\n\n\u003cp\u003eこういう絵を作りたいときに、他の人たちはどうやっているかというと、\u003cstrong\u003eSprite をタイルなどに分割して描く\u003c/strong\u003e（もちろん、その時分割部分ごとに適切な順番になるようにする）のが一般的のようです。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://gamedevelopment.tutsplus.com/tutorials/creating-isometric-worlds-a-primer-for-game-developers--gamedev-6511\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://gamedevelopment.tutsplus.com/tutorials/creating-isometric-worlds-a-primer-for-game-developers--gamedev-6511\u003c/a\u003e\u003cbr\u003e\n\u003ca href=\"https://blog.pocketcitygame.com/cheating-at-z-depth-sprite-sorting-in-an-isometric-game/\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://blog.pocketcitygame.com/cheating-at-z-depth-sprite-sorting-in-an-isometric-game/\u003c/a\u003e\u003cbr\u003e\n\u003ca href=\"http://ashley.baldock.me/tilecutter\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://ashley.baldock.me/tilecutter\u003c/a\u003e\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"やりたいこと\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%84%E3%82%8A%E3%81%9F%E3%81%84%E3%81%93%E3%81%A8\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eやりたいこと\u003c/h1\u003e\n\n\u003cp\u003eクオータービューのドット絵ゲームを作るとき、 \u003cstrong\u003eスプライトを分割せずに重なり順を解決したい\u003c/strong\u003e。そのためにドット絵に深度バッファを適用したい。\u003cbr\u003e\nそこで下記の図のように3Dオブジェクトにドット絵を正射影表示してやろうと思いました。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/ea64cc7686c5b31523e850aaeeda74ae908eba81/687474703a2f2f626c6f672d696d67732d35342e6663322e636f6d2f712f6f2f6f2f716f6f666173742f6375626570726f6a656374696f6e6d61702e676966\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/http%3A%2F%2Fblog-imgs-54.fc2.com%2Fq%2Fo%2Fo%2Fqoofast%2Fcubeprojectionmap.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=ced40ee17c90893a298e76f2dc34a978\" alt=\"\" data-canonical-src=\"http://blog-imgs-54.fc2.com/q/o/o/qoofast/cubeprojectionmap.gif\" srcset=\"https://qiita-user-contents.imgix.net/http%3A%2F%2Fblog-imgs-54.fc2.com%2Fq%2Fo%2Fo%2Fqoofast%2Fcubeprojectionmap.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=d13a693d93ad0a825c61a745ddd0e659 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003cbr\u003e\nこれができれば、重なり順解決だけでなく他の\u003cstrong\u003e3Dオブジェクト（例えば Terrain）とドット絵を上手い具合に共存させる\u003c/strong\u003eこともできます。\u003c/p\u003e\n\n\u003cp\u003e実は Unity ではないですが、既に\u003ca href=\"http://qoofast.blog76.fc2.com/blog-entry-23.html\" rel=\"nofollow noopener\" target=\"_blank\"\u003e\u003cstrong\u003eこのアイデアを実現してる記事\u003c/strong\u003e\u003c/a\u003eがあります。上記の図もそこからの拝借です。今回はこれを Unity に移植してみました。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"テクスチャを立体に正射影する\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%86%E3%82%AF%E3%82%B9%E3%83%81%E3%83%A3%E3%82%92%E7%AB%8B%E4%BD%93%E3%81%AB%E6%AD%A3%E5%B0%84%E5%BD%B1%E3%81%99%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eテクスチャを立体に正射影する\u003c/h1\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"マテリアル\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%9E%E3%83%86%E3%83%AA%E3%82%A2%E3%83%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eマテリアル\u003c/h2\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/f28cda8b27fe511352cfc0007f21c244ab004719/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f37353033352f64393435616337312d373931312d613461382d376532312d3634376139656334386532612e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2Fd945ac71-7911-a4a8-7e21-647a9ec48e2a.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=98c122f822866eeffd7f8b126cb744ae\" alt=\"materialG01.jpg\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/75035/d945ac71-7911-a4a8-7e21-647a9ec48e2a.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2Fd945ac71-7911-a4a8-7e21-647a9ec48e2a.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=8079a9e60a03a4cc9ea5ab62e43075e1 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eUnity使ってる諸氏には釈迦に説法かもしれませんが、\u003cstrong\u003eテクスチャを2の累乗サイズに調整\u003c/strong\u003eしないといけません。普段はUnityが勝手にやってくれるのですが、それに任せてるとテクスチャ上の\u003cstrong\u003eドット絵の切り出し位置指定がややこしくなる\u003c/strong\u003eので、それを避けるためです。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/f4cab183a8c49dbbce8542c0f21e5c26e513e3a4/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f37353033352f34363163353338322d643165362d623832392d646266612d6132656531313132636337302e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F461c5382-d1e6-b829-dbfa-a2ee1112cc70.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=2c5e110b63b1afbd9412fd6859b38aea\" alt=\"resizedGreen.jpg\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/75035/461c5382-d1e6-b829-dbfa-a2ee1112cc70.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F461c5382-d1e6-b829-dbfa-a2ee1112cc70.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=2f176fe5647f02bd06eb0394a31e804f 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003ca href=\"https://camo.qiitausercontent.com/a1bd41b06c1b7561beafc28cb1e0df41fc05816b/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f37353033352f36393735316539352d363833642d386166302d613534632d3532353338613861613534362e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F69751e95-683d-8af0-a54c-52538a8aa546.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=d65ce6970660e829a15eadd040be8822\" alt=\"resizedOrange.jpg\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/75035/69751e95-683d-8af0-a54c-52538a8aa546.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F69751e95-683d-8af0-a54c-52538a8aa546.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=9837fcaa2c9b0d8ef87b6fe2c14e93fe 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003ca href=\"https://camo.qiitausercontent.com/074cff8d2d19e09d9ec6de2796653142e2911914/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f37353033352f64323063376238332d336261392d663639342d313130382d3639643565393165376631382e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2Fd20c7b83-3ba9-f694-1108-69d5e91e7f18.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=ed3c2d497688d61039f7e5ebb652e7b4\" alt=\"resizedPurple.jpg\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/75035/d20c7b83-3ba9-f694-1108-69d5e91e7f18.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2Fd20c7b83-3ba9-f694-1108-69d5e91e7f18.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=74d5da6547be5f2545d24c77e4b5108f 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eシェーダーは透過ができてUnlitでTextureを指定できればよいので、 Sprite/Default か UI/Default を使えます。\u003cbr\u003e\nですが、将来の拡張を見越して、一応独自のシェーダーを用意しておきました。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"GLSL\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003ePseudoSprite.shader\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"n\"\u003eShader\u003c/span\u003e \u003cspan class=\"s\"\u003e\"Custom/SeudoSprite\"\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eProperties\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003e_MainTex\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Texture\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e2\u003c/span\u003e\u003cspan class=\"n\"\u003eD\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"white\"\u003c/span\u003e \u003cspan class=\"p\"\u003e{}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eSubShader\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eTags\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"s\"\u003e\"RenderType\"\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Opaque\"\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eLOD\u003c/span\u003e \u003cspan class=\"mi\"\u003e100\u003c/span\u003e\n\n        \u003cspan class=\"n\"\u003ePass\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eCGPROGRAM\u003c/span\u003e\n            \u003cspan class=\"cp\"\u003e#pragma vertex vert\n\u003c/span\u003e            \u003cspan class=\"cp\"\u003e#pragma fragment frag\n\u003c/span\u003e            \u003cspan class=\"c1\"\u003e// make fog work\u003c/span\u003e\n            \u003cspan class=\"cp\"\u003e#pragma multi_compile_fog\n\u003c/span\u003e\n            \u003cspan class=\"cp\"\u003e#include \"UnityCG.cginc\"\n\u003c/span\u003e\n            \u003cspan class=\"k\"\u003estruct\u003c/span\u003e \u003cspan class=\"n\"\u003eappdata\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"n\"\u003efloat4\u003c/span\u003e \u003cspan class=\"n\"\u003evertex\u003c/span\u003e \u003cspan class=\"o\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003ePOSITION\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n                \u003cspan class=\"n\"\u003efloat2\u003c/span\u003e \u003cspan class=\"n\"\u003euv\u003c/span\u003e \u003cspan class=\"o\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eTEXCOORD0\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e};\u003c/span\u003e\n\n            \u003cspan class=\"k\"\u003estruct\u003c/span\u003e \u003cspan class=\"n\"\u003ev2f\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"n\"\u003efloat2\u003c/span\u003e \u003cspan class=\"n\"\u003euv\u003c/span\u003e \u003cspan class=\"o\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eTEXCOORD0\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n                \u003cspan class=\"n\"\u003eUNITY_FOG_COORDS\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n                \u003cspan class=\"n\"\u003efloat4\u003c/span\u003e \u003cspan class=\"n\"\u003evertex\u003c/span\u003e \u003cspan class=\"o\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eSV_POSITION\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e};\u003c/span\u003e\n\n            \u003cspan class=\"kt\"\u003esampler2D\u003c/span\u003e \u003cspan class=\"n\"\u003e_MainTex\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"n\"\u003efloat4\u003c/span\u003e \u003cspan class=\"n\"\u003e_MainTex_ST\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n            \u003cspan class=\"n\"\u003ev2f\u003c/span\u003e \u003cspan class=\"n\"\u003evert\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eappdata\u003c/span\u003e \u003cspan class=\"n\"\u003ev\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"n\"\u003ev2f\u003c/span\u003e \u003cspan class=\"n\"\u003eo\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n                \u003cspan class=\"n\"\u003eo\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003evertex\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eUnityObjectToClipPos\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ev\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003evertex\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n                \u003cspan class=\"n\"\u003eo\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003euv\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eTRANSFORM_TEX\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ev\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003euv\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003e_MainTex\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n                \u003cspan class=\"n\"\u003eUNITY_TRANSFER_FOG\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eo\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003eo\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003evertex\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n                \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003eo\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n            \u003cspan class=\"n\"\u003efixed4\u003c/span\u003e \u003cspan class=\"n\"\u003efrag\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ev2f\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eSV_Target\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"c1\"\u003e// sample the texture\u003c/span\u003e\n                \u003cspan class=\"n\"\u003efixed4\u003c/span\u003e \u003cspan class=\"n\"\u003ecol\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003etex2D\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003e_MainTex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003euv\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n                \u003cspan class=\"k\"\u003eif\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ecol\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ea\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;=\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"mi\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"k\"\u003ediscard\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n                \u003cspan class=\"c1\"\u003e// apply fog\u003c/span\u003e\n                \u003cspan class=\"n\"\u003eUNITY_APPLY_FOG\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003efogCoord\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ecol\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n                \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003ecol\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eENDCG\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003eテンプレで生成されるUnlitシェーダーに透過処理を付け加えただけの単純なものです。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"GLSL\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e    \u003cspan class=\"k\"\u003eif\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ecol\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ea\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;=\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"mi\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"k\"\u003ediscard\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"メッシュ生成コンポーネント\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%A1%E3%83%83%E3%82%B7%E3%83%A5%E7%94%9F%E6%88%90%E3%82%B3%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%8D%E3%83%B3%E3%83%88\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eメッシュ生成コンポーネント\u003c/h2\u003e\n\n\u003cp\u003eスプライトに相当する役割のオブジェクトとして、メッシュ生成用コンポーネントをEmptyなgameObjectにつけて使います。\u003cbr\u003e\nちなみに Shed （シェド）は小屋という意味で名づけました。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/6d52a2d7d5dd7fa3093feec48e01ecb16667261a/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f37353033352f61323263323833332d616133612d643234642d636331642d3263333665316139343537352e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2Fa22c2833-aa3a-d24d-cc1d-2c36e1a94575.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=d7eba98da5a528c2770ef1b203ca4c02\" alt=\"prefabG01.jpg\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/75035/a22c2833-aa3a-d24d-cc1d-2c36e1a94575.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2Fa22c2833-aa3a-d24d-cc1d-2c36e1a94575.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=f9b32d9bc86d52ea3eb4af66cb322775 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003cbr\u003e\n上の図のように Mesh Renderer, Mesh Filter も追加してください。設定を弄る必要はありません。\u003c/p\u003e\n\n\u003cp\u003e以下ソース\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eShed.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"cp\"\u003e#if UNITY_EDITOR\n\u003c/span\u003e\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eUnityEditor\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"cp\"\u003e#endif\n\u003c/span\u003e\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eUnityEngine\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eExecuteInEditMode\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eShed\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eMonoBehaviour\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"n\"\u003eneedRestruct\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"cp\"\u003e#if UNITY_EDITOR\n\u003c/span\u003e    \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eOnEnable\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eSceneView\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eonSceneGUIDelegate\u003c/span\u003e \u003cspan class=\"p\"\u003e+=\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eOnEditorUpdate\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eneedRestruct\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eOnDisable\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eSceneView\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eonSceneGUIDelegate\u003c/span\u003e \u003cspan class=\"p\"\u003e-=\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eOnEditorUpdate\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eOnEditorUpdate\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eSceneView\u003c/span\u003e \u003cspan class=\"n\"\u003evw\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"nf\"\u003eStart\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"cp\"\u003e#endif\n\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eSerializeField\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nf\"\u003eHeader\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"ドット絵の3Dサイズ\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)]\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003eVector3Int\u003c/span\u003e \u003cspan class=\"n\"\u003esize\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eSerializeField\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nf\"\u003eHeader\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"テクスチャの最手前座標\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)]\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003eVector2Int\u003c/span\u003e \u003cspan class=\"n\"\u003epivot\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e// ドット絵を保持するマテリアル\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eMaterial\u003c/span\u003e \u003cspan class=\"n\"\u003ematerial\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e// マテリアルのメインテクスチャサイズ\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003eVector2Int\u003c/span\u003e \u003cspan class=\"n\"\u003etexSize\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eAwake\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e// なぜか Start/Awake の両方から Mesh初期化しないと、シーン再生時に表示されない\u003c/span\u003e\n        \u003cspan class=\"nf\"\u003eStart\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eStart\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(!\u003c/span\u003e\u003cspan class=\"n\"\u003eneedRestruct\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eneedRestruct\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n        \u003cspan class=\"n\"\u003eMesh\u003c/span\u003e \u003cspan class=\"n\"\u003emesh\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nf\"\u003eInitializeCube\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n        \u003cspan class=\"n\"\u003etexSize\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nf\"\u003eGetTextureSize\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eGetComponent\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eMeshFilter\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;().\u003c/span\u003e\u003cspan class=\"n\"\u003esharedMesh\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003emesh\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eGetComponent\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eMeshRenderer\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;().\u003c/span\u003e\u003cspan class=\"n\"\u003ematerial\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ematerial\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e/// \u0026lt;summary\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e/// テクスチャサイズを取得\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e/// \u0026lt;/summary\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e/// \u0026lt;returns\u0026gt;\u0026lt;/returns\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003eVector2Int\u003c/span\u003e \u003cspan class=\"nf\"\u003eGetTextureSize\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eDebug\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAssert\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ematerial\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003emainTexture\u003c/span\u003e \u003cspan class=\"p\"\u003e!=\u003c/span\u003e \u003cspan class=\"k\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\"Main texture is NULL!\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003etex\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ematerial\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003emainTexture\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eVector2Int\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003etex\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ewidth\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003etex\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eheight\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e/// \u0026lt;summary\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e/// pivotからの相対位置をUV座標に変換する\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e/// \u0026lt;/summary\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e/// \u0026lt;param name=\"offestX\"\u0026gt;\u0026lt;/param\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e/// \u0026lt;param name=\"offsetY\"\u0026gt;\u0026lt;/param\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e/// \u0026lt;returns\u0026gt;\u0026lt;/returns\u0026gt;    \u003c/span\u003e\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003eVector2\u003c/span\u003e \u003cspan class=\"nf\"\u003eToUV\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003efloat\u003c/span\u003e \u003cspan class=\"n\"\u003eoffestX\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003efloat\u003c/span\u003e \u003cspan class=\"n\"\u003eoffsetY\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eVector2\u003c/span\u003e\u003cspan class=\"p\"\u003e((\u003c/span\u003e\u003cspan class=\"n\"\u003epivot\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"n\"\u003eoffestX\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e/\u003c/span\u003e \u003cspan class=\"n\"\u003etexSize\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003etexSize\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ey\u003c/span\u003e \u003cspan class=\"p\"\u003e-\u003c/span\u003e \u003cspan class=\"n\"\u003epivot\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ey\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"n\"\u003eoffsetY\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e/\u003c/span\u003e \u003cspan class=\"n\"\u003etexSize\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e/// \u0026lt;summary\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e/// メッシュを生成する\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e/// \u0026lt;/summary\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e/// \u0026lt;returns\u0026gt;\u0026lt;/returns\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003eMesh\u003c/span\u003e \u003cspan class=\"nf\"\u003eInitializeCube\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\n        \u003cspan class=\"n\"\u003eMesh\u003c/span\u003e \u003cspan class=\"n\"\u003emesh\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eMesh\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n        \u003cspan class=\"cm\"\u003e/*\n         *  　6\n         * 5＜ ＞3\n         * |　1　|\n         * 4＜|＞2\n         *  　0\n         */\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003evertices\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eVector3\u003c/span\u003e\u003cspan class=\"p\"\u003e[]\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e            \n            \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eVector3\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"c1\"\u003e// 0:pivot\u003c/span\u003e\n            \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eVector3\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003esize\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"c1\"\u003e// 1:nearest top\u003c/span\u003e\n            \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eVector3\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003esize\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ez\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"c1\"\u003e// 2:bottom right\u003c/span\u003e\n            \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eVector3\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003esize\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003esize\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ez\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"c1\"\u003e// 3:top right\u003c/span\u003e\n            \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eVector3\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003esize\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"c1\"\u003e// 4:bottom left\u003c/span\u003e\n            \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eVector3\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003esize\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003esize\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"c1\"\u003e// 5:top left\u003c/span\u003e\n            \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eVector3\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003esize\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003esize\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003esize\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ez\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"c1\"\u003e// 6:most far top\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e};\u003c/span\u003e\n\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eharfX\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003esize\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"m\"\u003e0.5f\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eharfZ\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003esize\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ez\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"m\"\u003e0.5f\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003euv\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eVector2\u003c/span\u003e\u003cspan class=\"p\"\u003e[]\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"nf\"\u003eToUV\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"c1\"\u003e// 0:pivot\u003c/span\u003e\n            \u003cspan class=\"nf\"\u003eToUV\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003esize\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"c1\"\u003e// 1:nearest top\u003c/span\u003e\n            \u003cspan class=\"nf\"\u003eToUV\u003c/span\u003e\u003cspan class=\"p\"\u003e(-\u003c/span\u003e\u003cspan class=\"n\"\u003esize\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ez\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eharfZ\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"c1\"\u003e// 4:bottom left\u003c/span\u003e\n            \u003cspan class=\"nf\"\u003eToUV\u003c/span\u003e\u003cspan class=\"p\"\u003e(-\u003c/span\u003e\u003cspan class=\"n\"\u003esize\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ez\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eharfZ\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"n\"\u003esize\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"c1\"\u003e// 5:top left\u003c/span\u003e\n            \u003cspan class=\"nf\"\u003eToUV\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003esize\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eharfX\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"c1\"\u003e// 2:bottom right\u003c/span\u003e\n            \u003cspan class=\"nf\"\u003eToUV\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003esize\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eharfX\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"n\"\u003esize\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e  \u003cspan class=\"c1\"\u003e// 3:top right\u003c/span\u003e\n            \u003cspan class=\"nf\"\u003eToUV\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003esize\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"p\"\u003e-\u003c/span\u003e \u003cspan class=\"n\"\u003esize\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ez\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eharfX\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"n\"\u003eharfZ\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"n\"\u003esize\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"c1\"\u003e// 6:most far top\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e};\u003c/span\u003e\n\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003etriangles\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e[]\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"m\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"m\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"m\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"c1\"\u003e// Right Surface \u003c/span\u003e\n            \u003cspan class=\"m\"\u003e5\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"m\"\u003e4\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"m\"\u003e5\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"c1\"\u003e// Left Surface \u003c/span\u003e\n            \u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"m\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"m\"\u003e5\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"m\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"m\"\u003e6\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"m\"\u003e5\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"c1\"\u003e// Upper Surface\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e};\u003c/span\u003e\n\n        \u003cspan class=\"n\"\u003emesh\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003evertices\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003evertices\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"n\"\u003emesh\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003euv\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003euv\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"n\"\u003emesh\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003etriangles\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003etriangles\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003emesh\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e\u003ccode\u003e#if UNITY_EDITOR\u003c/code\u003e~\u003ccode\u003e#endif\u003c/code\u003eブロックは、Sceneビューでもプレビューできるようにするためのものです。\u003c/p\u003e\n\n\u003cp\u003e上のソースだと行間が伸びて若干見辛いですがVS上ではコメントの図はこんな感じです。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/9e888e3c5331f98ea2d9bed6f5e888cf7ca73d4b/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f37353033352f61303136383466372d613466302d653837622d623633312d6230373066366261303863302e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2Fa01684f7-a4f0-e87b-b631-b070f6ba08c0.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=503a6384481dd0ebd3f0c417a8553019\" alt=\"vertIndex.jpg\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/75035/a01684f7-a4f0-e87b-b631-b070f6ba08c0.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2Fa01684f7-a4f0-e87b-b631-b070f6ba08c0.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=9a07515cf87099654bbdc94059d58343 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003cbr\u003e\n0番が pivot で、1番が手前上面、6番が最奥上面… という風に割り振ってます。\u003cbr\u003e\n基本的に一方向から見ることしか想定してませんから、裏側のメッシュは作りません。\u003cbr\u003e\nUnity に合わせて一部書き換えましたが、やってることは参照元記事にある\u003ccode\u003eInitializeCube\u003c/code\u003eメソッドとほぼ同じです。\u003cbr\u003e\n（オリジナルはオブジェクトの配置位置を反映してましたが、Unityでは親のtransformで動かせば良いので０起点に固定してます。）\u003cbr\u003e\nテクスチャサイズが2の累乗に拡大されているので、 ToUV() メソッドでは pivot に相当するピクセルから必要な範囲だけを取り出せるように補正しています。このため\u003cstrong\u003eアトラス画像のように同じ画像に複数のドット絵を入れて使うことも可能\u003c/strong\u003eになっています。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"カメラ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%AB%E3%83%A1%E3%83%A9\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eカメラ\u003c/h2\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/b65280bfa84b513000f8b932718926fa189e686b/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f37353033352f61373663353335622d386636352d303464312d653036332d6464623365623431353538632e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2Fa76c535b-8f65-04d1-e063-ddb3eb41558c.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=cf86326260708aef2bd168d2de152d5a\" alt=\"Camera01.jpg\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/75035/a76c535b-8f65-04d1-e063-ddb3eb41558c.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2Fa76c535b-8f65-04d1-e063-ddb3eb41558c.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=522ff836389b1562efa9502de5a75360 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eこれも2Dシーンなら基本中の基本、釈迦に説法かもしれませんが、パース(遠近法)を適用しないようにカメラを Orthographic に設定します。\u003cbr\u003e\nTransform はお好みで調整してください、Clear Frags を Solid Color にしましたが、それ以外はデフォルト設定です。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"途中結果１\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E9%80%94%E4%B8%AD%E7%B5%90%E6%9E%9C%EF%BC%91\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e途中結果１\u003c/h2\u003e\n\n\u003cp\u003eここまでの段階でこうなります。ぱっと見た感じでは既にお題の絵は出来ていますが、\u003cstrong\u003eドット絵が綺麗に出ていません\u003c/strong\u003e。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/c8453a2271c67271de3b54c8ddb8242e2f2796b7/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f37353033352f34333335346466392d653565612d353266312d356362362d3665316463356466363639352e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F43354df9-e5ea-52f1-5cb6-6e1dc5df6695.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=7e82892dc5e084d277813598d6941d62\" alt=\"sceneView01.jpg\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/75035/43354df9-e5ea-52f1-5cb6-6e1dc5df6695.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F43354df9-e5ea-52f1-5cb6-6e1dc5df6695.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=4debfe0d35fed92366aa804237690aa9 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"ドット絵を綺麗に表示-pixelperfect\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%89%E3%83%83%E3%83%88%E7%B5%B5%E3%82%92%E7%B6%BA%E9%BA%97%E3%81%AB%E8%A1%A8%E7%A4%BA-pixelperfect\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eドット絵を綺麗に表示 PixelPerfect\u003c/h1\u003e\n\n\u003cp\u003eわざわざドット絵を使うからには、\u003cstrong\u003eドットが潰れたり引き伸ばされたりボヤけたりせず、元の品質を保って表示したい\u003c/strong\u003eですね。（これを英語では \u003cstrong\u003ePixelPerfect\u003c/strong\u003e と言うようです。）\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"テクスチャのアンチエイリアスを解除\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%86%E3%82%AF%E3%82%B9%E3%83%81%E3%83%A3%E3%81%AE%E3%82%A2%E3%83%B3%E3%83%81%E3%82%A8%E3%82%A4%E3%83%AA%E3%82%A2%E3%82%B9%E3%82%92%E8%A7%A3%E9%99%A4\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eテクスチャのアンチエイリアスを解除\u003c/h2\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/76cb3c458b5aeb4c74dd2d12ce3c9aac92fff526/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f37353033352f39666532646130332d393363312d643363342d326633642d3661643562373765613763332e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F9fe2da03-93c1-d3c4-2f3d-6ad5b77ea7c3.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=f5f66d47e49a1c24fb57e2ebc712441a\" alt=\"texFilterMode.jpg\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/75035/9fe2da03-93c1-d3c4-2f3d-6ad5b77ea7c3.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F9fe2da03-93c1-d3c4-2f3d-6ad5b77ea7c3.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=573f4a0cb415ed11caf504e52e07de44 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003cbr\u003e\nデフォルトだとテクスチャにアンチエイリアスがかかってぼやけてしまうので、上のように \u003cstrong\u003eFilter Mode を Point に設定して解除\u003c/strong\u003eします。\u003cbr\u003e\nまた、マッピングが適切に出来ていれば大差ないのですが、 Wrap Mode も Repeat から Clamp に変更しています。\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003eBilinear\u003c/strong\u003e [初期設定]\u003cbr\u003e\n|\u003ca href=\"https://camo.qiitausercontent.com/802718ea6aea4c874c7c485b6394fd746653fb0f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f37353033352f31313566326235332d363562332d336236632d303266612d6663306161656231336333392e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F115f2b53-65b3-3b6c-02fa-fc0aaeb13c39.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=651bb89676d9d6e1031edeab83a30f7a\" alt=\"bilinear.jpg\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/75035/115f2b53-65b3-3b6c-02fa-fc0aaeb13c39.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F115f2b53-65b3-3b6c-02fa-fc0aaeb13c39.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=2ff728a2b0939be7a3988431eec2e086 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003ePoint(No filter)\u003c/strong\u003e\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/542fca485d989cb6cb3fda070151ddc0a95d2c98/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f37353033352f33663131633562332d653531302d313434392d613638372d3365303030323534353462352e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F3f11c5b3-e510-1449-a687-3e00025454b5.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=bd1fb4de35522c3cba5345f4428c320a\" alt=\"point.jpg\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/75035/3f11c5b3-e510-1449-a687-3e00025454b5.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F3f11c5b3-e510-1449-a687-3e00025454b5.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=b8a18cfbe173e5bdaee724ec47f45c02 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003cbr\u003e\n※上記キャプチャはいずれも倍率２\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"プロジェクション行列の調整\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3%E8%A1%8C%E5%88%97%E3%81%AE%E8%AA%BF%E6%95%B4\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eプロジェクション行列の調整\u003c/h2\u003e\n\n\u003cp\u003eカメラのプロジェクション(射影)行列の調整を行う QuaterView コンポーネントを作成します。\u003cbr\u003e\n個人的には\u003cstrong\u003eこれこそが元記事の肝\u003c/strong\u003eだと思ってます。【以下引用】\u003c/p\u003e\n\n\u003cblockquote\u003e\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/773349734b550edcfdff002ce11be152c91988a5/687474703a2f2f626c6f672d696d67732d35342e6663322e636f6d2f712f6f2f6f2f716f6f666173742f63756265706978656c73697a652e676966\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/http%3A%2F%2Fblog-imgs-54.fc2.com%2Fq%2Fo%2Fo%2Fqoofast%2Fcubepixelsize.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=4b9bf490d301c95acde9035d19d647b7\" alt=\"\" data-canonical-src=\"http://blog-imgs-54.fc2.com/q/o/o/qoofast/cubepixelsize.gif\" srcset=\"https://qiita-user-contents.imgix.net/http%3A%2F%2Fblog-imgs-54.fc2.com%2Fq%2Fo%2Fo%2Fqoofast%2Fcubepixelsize.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=ee83d64d451452c4ed2157044ea1c3b5 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003cbr\u003e\nちょっと注意が必要なのは、xとzは直方体の辺に沿った長さではなく、画像の横幅に占めるドット数で指定すること。\u003cbr\u003e\n例えば、\u003cdel\u003e右の絵\u003c/del\u003e(※上の絵)なら size = new Vector(24,18,20); となるだろう。\u003c/p\u003e\n\n\u003cp\u003eなぜこんな仕様なのかというと、直方体の辺に沿った長さで指定すると x=20*√3, z=24*√3 になるわけだが、√3なんて\u003cstrong\u003e無理数を使うと小数点誤差を避けようもなく、ドット絵が歪む原因になる\u003c/strong\u003eから避けたいのだ。\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003cp\u003eというわけで、ドット絵のピクセル単位でサイズ指定できて、スクリーンのドットに綺麗に射影するための変換行列を作ります。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eQuaterView\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eQuaterView\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eMonoBehaviour\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eCamera\u003c/span\u003e \u003cspan class=\"n\"\u003ecamera\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eSerializeField\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nf\"\u003eHeader\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"カメラが移す中心地\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)]\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003eVector3Int\u003c/span\u003e \u003cspan class=\"n\"\u003elookAt\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eSerializeField\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nf\"\u003eHeader\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"中心地の画面内上下位置(0～1)\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)]\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"kt\"\u003efloat\u003c/span\u003e \u003cspan class=\"n\"\u003evertFocusPos\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eSerializeField\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nf\"\u003eHeader\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"カメラを離す距離\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)]\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003edistance\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e256\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eSerializeField\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nf\"\u003eHeader\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"ピクセル倍率\"\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"nf\"\u003eMin\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e)]\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003ezoom\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\n    \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eAwake\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003ecamera\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003egameObject\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eGetComponent\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eCamera\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;();\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eAssert\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eIsNotNull\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ecamera\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"nf\"\u003eAdjustCamera\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eOnValidate\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"nf\"\u003eAwake\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"kt\"\u003efloat\u003c/span\u003e \u003cspan class=\"nf\"\u003eCalcOrthoSize\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e// 画面の高さの半分＝等倍サイズ\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003ecamera\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003epixelHeight\u003c/span\u003e \u003cspan class=\"p\"\u003e/\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ezoom\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"m\"\u003e2f\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eAdjustCamera\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003ecamera\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003etransform\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003erotation\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eQuaternion\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eidentity\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"n\"\u003ecamera\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003etransform\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eposition\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eVector3\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ezero\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"n\"\u003ecamera\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eResetProjectionMatrix\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n        \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003edepth\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003elookAt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"n\"\u003elookAt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ez\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e/\u003c/span\u003e \u003cspan class=\"m\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eVector3Int\u003c/span\u003e \u003cspan class=\"n\"\u003epos\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eVector3Int\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003elookAt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"p\"\u003e-\u003c/span\u003e \u003cspan class=\"n\"\u003elookAt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ez\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003elookAt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ey\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"n\"\u003edepth\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003elookAt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ey\u003c/span\u003e \u003cspan class=\"p\"\u003e-\u003c/span\u003e \u003cspan class=\"n\"\u003edepth\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003ematrix\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eMatrix4x4\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"n\"\u003em00\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e1.0f\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003em01\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e0.0f\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003em02\u003c/span\u003e \u003cspan class=\"p\"\u003e=-\u003c/span\u003e\u003cspan class=\"m\"\u003e1.0f\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003em03\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e0.5f\u003c/span\u003e \u003cspan class=\"p\"\u003e-\u003c/span\u003e \u003cspan class=\"n\"\u003epos\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"n\"\u003em10\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e0.5f\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003em11\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e1.0f\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003em12\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e0.5f\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003em13\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e0.0f\u003c/span\u003e \u003cspan class=\"p\"\u003e-\u003c/span\u003e \u003cspan class=\"n\"\u003epos\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"n\"\u003em20\u003c/span\u003e \u003cspan class=\"p\"\u003e=-\u003c/span\u003e\u003cspan class=\"m\"\u003e0.5f\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003em21\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e1.0f\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003em22\u003c/span\u003e \u003cspan class=\"p\"\u003e=-\u003c/span\u003e\u003cspan class=\"m\"\u003e0.5f\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003em23\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e0.0f\u003c/span\u003e \u003cspan class=\"p\"\u003e-\u003c/span\u003e \u003cspan class=\"n\"\u003epos\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ez\u003c/span\u003e \u003cspan class=\"p\"\u003e-\u003c/span\u003e \u003cspan class=\"n\"\u003edistance\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"n\"\u003em30\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e0.0f\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003em31\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e0.0f\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003em32\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e0.0f\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003em33\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e1.0f\u003c/span\u003e            \n        \u003cspan class=\"p\"\u003e};\u003c/span\u003e\n\n        \u003cspan class=\"n\"\u003ecamera\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eworldToCameraMatrix\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ematrix\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"n\"\u003ecamera\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eorthographicSize\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nf\"\u003eCalcOrthoSize\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e下の方に出てくる matrix は元記事のこの行列を Unity 用に変換したもので、\u003cstrong\u003ez軸の符号を反転\u003c/strong\u003eしています。また使用するクラスの違いから\u003cstrong\u003eパラメーターの表記順が行と列入れ替わってる\u003c/strong\u003eことに注意してください。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/9dd4d7748ddc49074e1cfe6ae8ab8e650c949227/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f37353033352f32353739633930352d373934382d346430372d333532392d3361613739323865623139362e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F2579c905-7948-4d07-3529-3aa7928eb196.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=072833c70d43d8bc23d91641bd33d06e\" alt=\"xnaMatrix.jpg\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/75035/2579c905-7948-4d07-3529-3aa7928eb196.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F2579c905-7948-4d07-3529-3aa7928eb196.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=7b0bd1969002a9842fb0598e5a91a0bd 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003cbr\u003e\n参考: \u003ca href=\"http://logicalbeat.jp/blog/929/\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://logicalbeat.jp/blog/929/\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eこの行列は camera の projectionMatrix ではなく worldToCameraMatrix にセットします。\u003cbr\u003e\nprojectionMatrix は標準的な Orthographic を使います。ピクセル等倍なサイズにするには、\u003cbr\u003e\n\u003ccode\u003ecamera.orthographicSize = camera.pixelHeight / 2;\u003c/code\u003e\u003cbr\u003e\nに設定すればよいことがわかりました。\u003cbr\u003e\n参考: \u003ca href=\"http://light11.hatenadiary.com/entry/2019/04/17/012544\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://light11.hatenadiary.com/entry/2019/04/17/012544\u003c/a\u003e\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"カメラの回転も不要に\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%AB%E3%83%A1%E3%83%A9%E3%81%AE%E5%9B%9E%E8%BB%A2%E3%82%82%E4%B8%8D%E8%A6%81%E3%81%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eカメラの回転も不要に\u003c/h3\u003e\n\n\u003cp\u003e元記事には具体的には書いてないですが、この変換行列は回転も含んでます。\u003cbr\u003e\n上の方で貼ったカメラの Inspector は transform/rotation が \u003ccode\u003ex=22.5, y=45, z=0\u003c/code\u003e となっていますが、 \u003cstrong\u003eQuaterView を適用したカメラは回転は不要\u003c/strong\u003eです。これも\u003cstrong\u003e小数点丸め誤差をなくすのに有用\u003c/strong\u003eだと思います。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/6cf5374709eb8de995b6b27612dbe7a60482181d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f37353033352f61326339393838392d346434332d356531632d323836322d3131313430333138393437302e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2Fa2c99889-4d43-5e1c-2862-111403189470.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=b7650c9f89c0aef28d343a73f306c8d5\" alt=\"quarterViewCamera.jpg\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/75035/a2c99889-4d43-5e1c-2862-111403189470.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2Fa2c99889-4d43-5e1c-2862-111403189470.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=bc86ad7e95642e966089ba608716690e 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/da581c59812f2cea962516d37d91b1c341e5c710/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f37353033352f37393031316235382d343633662d326539362d363736352d3031383561366562643465332e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F79011b58-463f-2e96-6765-0185a6ebd4e3.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=571a86a2c0d54bea7f16627b65c5c8a1\" alt=\"projection.jpg\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/75035/79011b58-463f-2e96-6765-0185a6ebd4e3.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F79011b58-463f-2e96-6765-0185a6ebd4e3.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=6a8813193ef0ee9a3677ec406a575d7d 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003cbr\u003e\nなお、 worldToCameraMatrix をセットすると transform 自体が無効になるので、\u003cstrong\u003eQuaterView の lookAt でワールドの表示目標位置を設定できる\u003c/strong\u003eようにしています。Distanceはちょっとイジっただけだと見た目の変化はないですが、目標位置とカメラの距離を示します。 near/far plane の適用範囲をシフトさせる効果があります。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"途中結果２\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E9%80%94%E4%B8%AD%E7%B5%90%E6%9E%9C%EF%BC%92\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e途中結果２\u003c/h2\u003e\n\n\u003cp\u003eドットがわかるように表示倍率x2にしてます。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/5a1727521bf5545f5dffc4fa53e4424b7830aece/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f37353033352f38646636633066382d396337382d336638332d626661352d6138353666333764303639612e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F8df6c0f8-9c78-3f83-bfa5-a856f37d069a.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=ac35a54e0ad386c7aae8116082bf9af3\" alt=\"fixMatrix.jpg\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/75035/8df6c0f8-9c78-3f83-bfa5-a856f37d069a.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F8df6c0f8-9c78-3f83-bfa5-a856f37d069a.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=1d730cc746105b1bb79278ceffd20eca 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eかなりいい感じですが、よく見るとまだドットの歪みがあるようです。\u003cbr\u003e\n解りやすくするため、元記事のようにディザテクスチャを貼ってみました。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/86e82b00ac7d632127930436735c6d5c91c7f3b8/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f37353033352f34376361383363382d346666372d643235342d356363332d6465653739363135393939392e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F47ca83c8-4ff7-d254-5cc3-dee796159999.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=6695c237724f0ccaf4187b1d434d5c6f\" alt=\"textureCompressed.jpg\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/75035/47ca83c8-4ff7-d254-5cc3-dee796159999.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F47ca83c8-4ff7-d254-5cc3-dee796159999.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=410dd92404a0d6cf5d577396f96ccdf7 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eなぜか\u003cstrong\u003e境界付近の色がおかしい\u003c/strong\u003eですね。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"テクスチャの圧縮設定\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%86%E3%82%AF%E3%82%B9%E3%83%81%E3%83%A3%E3%81%AE%E5%9C%A7%E7%B8%AE%E8%A8%AD%E5%AE%9A\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eテクスチャの圧縮設定\u003c/h2\u003e\n\n\u003cp\u003e調べてみたところ、\u003cstrong\u003e境界付近の色がおかしいのはテクスチャの圧縮によるもの\u003c/strong\u003eだとわかりました。\u003cbr\u003e\n作成したばかりのテクスチャはデフォルトでは左のように Format が \u003ccode\u003eRGBA Compressed DXT5\u003c/code\u003e になっています（最下部のグレーアウト部分）。これを右のように\u003cstrong\u003e\u003ccode\u003eRGBA 32 bit\u003c/code\u003e\u003c/strong\u003eにしました。ついでにMax Sizeもテクスチャに合わせてます。\u003c/p\u003e\n\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth style=\"text-align: center\"\u003eBefore\u003c/th\u003e\n\u003cth style=\"text-align: center\"\u003eAfter\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd style=\"text-align: center\"\u003e\u003ca href=\"https://camo.qiitausercontent.com/8bf4bcd3e3fa6e31866e320c3399c4f9fc3e4321/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f37353033352f31636433356237642d303764302d643533382d376237382d6231343365666539666531662e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F1cd35b7d-07d0-d538-7b78-b143efe9fe1f.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=c79209547f2ab068c4bab229559a7c16\" alt=\"texDefaultComp.jpg\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/75035/1cd35b7d-07d0-d538-7b78-b143efe9fe1f.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F1cd35b7d-07d0-d538-7b78-b143efe9fe1f.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=7cb6c21e88afbcd194c3d0fc5df51010 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/td\u003e\n\u003ctd style=\"text-align: center\"\u003e\u003ca href=\"https://camo.qiitausercontent.com/155da3205ff8a369c3838485945166c07ab17c15/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f37353033352f66383266323665622d633735322d303837392d393862662d3364663536373730646465352e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2Ff82f26eb-c752-0879-98bf-3df56770dde5.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=83a11dfc27269c9d93b26de75549c611\" alt=\"texSetNoComp.jpg\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/75035/f82f26eb-c752-0879-98bf-3df56770dde5.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2Ff82f26eb-c752-0879-98bf-3df56770dde5.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=9e755d4960f0a010101fdf0c934302b1 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd style=\"text-align: center\"\u003e\u003c/td\u003e\n\u003ctd style=\"text-align: center\"\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"ポリゴン境界の拡張\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%9D%E3%83%AA%E3%82%B4%E3%83%B3%E5%A2%83%E7%95%8C%E3%81%AE%E6%8B%A1%E5%BC%B5\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eポリゴン境界の拡張\u003c/h2\u003e\n\n\u003cp\u003e色がおかしいのは直りましたが、よく見ると\u003cstrong\u003e斜めの線が途切れ途切れ\u003c/strong\u003eになっています。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/6d1dcbb06e00d533726c7714153d437509b26a3a/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f37353033352f38646461353462342d323739322d353136322d383535392d6132373834313336393639612e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F8dda54b4-2792-5162-8559-a2784136969a.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=43a1761550d73f43a2126afce3b3c0ee\" alt=\"needMapping.jpg\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/75035/8dda54b4-2792-5162-8559-a2784136969a.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F8dda54b4-2792-5162-8559-a2784136969a.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=fc4b771e7562ef49ac0746841926306d 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003cbr\u003e\nこれは、左右側面のポリゴンの高さが足りないせいだと思われるので、\u003cstrong\u003eポリゴンを上下に 0.5f づつ拡張\u003c/strong\u003eしてみました。UVも同じように拡張しています。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/a11bbc8d0ecf68ab6a9e1e5be6d25bbd6c2e8823/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f37353033352f37613936363461372d373034312d626363632d316464642d3034336539303861323638642e676966\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F7a9664a7-7041-bccc-1ddd-043e908a268d.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=657836672af182323b620ef26888e6e0\" alt=\"polyExpand.gif\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/75035/7a9664a7-7041-bccc-1ddd-043e908a268d.gif\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F7a9664a7-7041-bccc-1ddd-043e908a268d.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=4c8639fedbc0a7b7855f86b8d8dd138d 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eShed.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003evertices\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eVector3\u003c/span\u003e\u003cspan class=\"p\"\u003e[]\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e            \n            \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eVector3\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e-\u003c/span\u003e\u003cspan class=\"m\"\u003e0.5f\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"c1\"\u003e// 0:pivot\u003c/span\u003e\n            \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eVector3\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003esize\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"m\"\u003e0.5f\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"c1\"\u003e// 1:nearest top\u003c/span\u003e\n            \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eVector3\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e-\u003c/span\u003e\u003cspan class=\"m\"\u003e0.5f\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003esize\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ez\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"c1\"\u003e// 2:bottom right\u003c/span\u003e\n            \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eVector3\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003esize\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"m\"\u003e0.5f\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003esize\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ez\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"c1\"\u003e// 3:top right\u003c/span\u003e\n            \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eVector3\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003esize\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e-\u003c/span\u003e\u003cspan class=\"m\"\u003e0.5f\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"c1\"\u003e// 4:bottom left\u003c/span\u003e\n            \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eVector3\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003esize\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003esize\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"m\"\u003e0.5f\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"c1\"\u003e// 5:top left\u003c/span\u003e\n            \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eVector3\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003esize\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003esize\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"m\"\u003e0.5f\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003esize\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ez\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"c1\"\u003e// 6:most far top\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e};\u003c/span\u003e\n\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eharfX\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003esize\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"m\"\u003e0.5f\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eharfZ\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003esize\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ez\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"m\"\u003e0.5f\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003euv\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eVector2\u003c/span\u003e\u003cspan class=\"p\"\u003e[]\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"nf\"\u003eToUV\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e-\u003c/span\u003e\u003cspan class=\"m\"\u003e0.5f\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"c1\"\u003e// 0:pivot\u003c/span\u003e\n            \u003cspan class=\"nf\"\u003eToUV\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003esize\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"m\"\u003e0.5f\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"c1\"\u003e// 1:nearest top\u003c/span\u003e\n            \u003cspan class=\"nf\"\u003eToUV\u003c/span\u003e\u003cspan class=\"p\"\u003e(-\u003c/span\u003e\u003cspan class=\"n\"\u003esize\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ez\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eharfZ\u003c/span\u003e\u003cspan class=\"p\"\u003e-\u003c/span\u003e\u003cspan class=\"m\"\u003e0.5f\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"c1\"\u003e// 4:bottom left\u003c/span\u003e\n            \u003cspan class=\"nf\"\u003eToUV\u003c/span\u003e\u003cspan class=\"p\"\u003e(-\u003c/span\u003e\u003cspan class=\"n\"\u003esize\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ez\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eharfZ\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"n\"\u003esize\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"m\"\u003e0.5f\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"c1\"\u003e// 5:top left\u003c/span\u003e\n            \u003cspan class=\"nf\"\u003eToUV\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003esize\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eharfX\u003c/span\u003e\u003cspan class=\"p\"\u003e-\u003c/span\u003e\u003cspan class=\"m\"\u003e0.5f\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"c1\"\u003e// 2:bottom right\u003c/span\u003e\n            \u003cspan class=\"nf\"\u003eToUV\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003esize\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eharfX\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"n\"\u003esize\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"m\"\u003e0.5f\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e  \u003cspan class=\"c1\"\u003e// 3:top right\u003c/span\u003e\n            \u003cspan class=\"nf\"\u003eToUV\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003esize\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"p\"\u003e-\u003c/span\u003e \u003cspan class=\"n\"\u003esize\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ez\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eharfX\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"n\"\u003eharfZ\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"n\"\u003esize\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e+\u003c/span\u003e\u003cspan class=\"m\"\u003e0.5f\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"c1\"\u003e// 6:most far top\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e};\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003eこれで綺麗に表示されました。文句なしの Pixel Perfect です。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/6971676f8299b830a60be60974277204ac7d2b61/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f37353033352f37333466396465392d376563362d653765632d323464622d6534376138303666373430662e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F734f9de9-7ec6-e7ec-24db-e47a806f740f.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=3546278914aeac2ebfde7f202b6e9d8e\" alt=\"allAdjusted.jpg\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/75035/734f9de9-7ec6-e7ec-24db-e47a806f740f.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F734f9de9-7ec6-e7ec-24db-e47a806f740f.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=5c449958d226a2b372f4d3e145e297a3 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"最終結果\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%9C%80%E7%B5%82%E7%B5%90%E6%9E%9C\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e最終結果\u003c/h1\u003e\n\n\u003cp\u003e元のシーンも調整してこのようになりました。\u003cstrong\u003eドットに歪みなく描画され、深度バッファを適用して適切な重なり順が実現できています\u003c/strong\u003e。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/5ce547edf699eb9771843b4c6963e7f1abe5a0e0/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f37353033352f36316230656666322d353832322d626665302d356133662d3234303835613662383936652e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F61b0eff2-5822-bfe0-5a3f-24085a6b896e.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=812fe2021ca6e06f4a15f03c2c35f5a1\" alt=\"finalResult.jpg\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/75035/61b0eff2-5822-bfe0-5a3f-24085a6b896e.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F61b0eff2-5822-bfe0-5a3f-24085a6b896e.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=c82f923e7ca338e81715e80f8e788303 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"3dオブジェクトとの共演\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#3d%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%A8%E3%81%AE%E5%85%B1%E6%BC%94\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e3Dオブジェクトとの共演\u003c/h1\u003e\n\n\u003cp\u003e深度バッファを適用してるので、\u003cstrong\u003e他の３Dオブジェクトと混在させたシーンが作れます\u003c/strong\u003e。\u003cbr\u003e\n例えば地形(Terrain)と組み合わせたり。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/23b0095a9dff45314be022ae2245121d528c63ea/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f37353033352f63626165643437382d616630662d316132662d613465612d3432353765303265383663662e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2Fcbaed478-af0f-1a2f-a4ea-4257e02e86cf.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=46ecc505ceb7fcb50b0ec4b8bcbfb116\" alt=\"withTerrain.jpg\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/75035/cbaed478-af0f-1a2f-a4ea-4257e02e86cf.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2Fcbaed478-af0f-1a2f-a4ea-4257e02e86cf.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=2f571e945a644204f8f940a9713b3fa4 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003cbr\u003e\nイーサンくんと組み合わせたり。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/8efc0633c739613deeda2863594eb6ac9e46cad0/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f37353033352f34373362663434662d613331312d613465322d386633352d6463663063366332303361352e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F473bf44f-a311-a4e2-8f35-dcf0c6c203a5.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=1434d0a4519c47f8167df6bc4cb95ed4\" alt=\"ethanWalk.jpg\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/75035/473bf44f-a311-a4e2-8f35-dcf0c6c203a5.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2F473bf44f-a311-a4e2-8f35-dcf0c6c203a5.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=c68690cde189cbb48eebd9cdf46de5ca 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003cbr\u003e\n↑足は紫の物体の向こう側にあるのに、右手は紫の物体の上にあるのがおわかりいただけるでしょうか。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"縦横比補正\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E7%B8%A6%E6%A8%AA%E6%AF%94%E8%A3%9C%E6%AD%A3\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e縦横比補正\u003c/h2\u003e\n\n\u003cp\u003eところで、よく見ると３Dオブジェクトは若干縦に潰れた感じになります。\u003cbr\u003e\nこれはドット絵に都合のよいように強引な射影変形をしてるためですので、以下のように\u003cstrong\u003eアスペクト補正用のゲームオブジェクトの下に3Dオブジェクトを入れてやる\u003c/strong\u003eとよいと思います。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/767b07f0bd23dcbe375c11094db827caadd307a1/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f37353033352f63336662666335332d306537352d376434652d646563372d6236366235376362616564372e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2Fc3fbfc53-0e75-7d4e-dec7-b66b57cbaed7.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=60bca1b9681a41ec5e7504c0cd80c8fb\" alt=\"adjust3D.jpg\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/75035/c3fbfc53-0e75-7d4e-dec7-b66b57cbaed7.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2Fc3fbfc53-0e75-7d4e-dec7-b66b57cbaed7.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=e53d52d8596e04876cf8dbe5e2d3b515 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003cbr\u003e\nここで\u003cstrong\u003e調整用オブジェクト(adjust3D)は縦を 1.155 倍\u003c/strong\u003eにしていることに注目してください。\u003cbr\u003e\n1.155という数値はまったく無根拠ではなくて、これはx,z軸方向のドットが本来 √3/2 の距離を１ピクセルに変換していることから、逆数である \u003ccode\u003e2/√3 ≒ 1.155\u003c/code\u003e をy軸方向に適用したものです。\u003c/p\u003e\n\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth style=\"text-align: center\"\u003e無調整\u003c/th\u003e\n\u003cth style=\"text-align: center\"\u003eアスペクト調整済\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd style=\"text-align: center\"\u003e\u003ca href=\"https://camo.qiitausercontent.com/a78e9fbc3ea31244c084f80c426b104d898a1b9e/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f37353033352f62663337306337332d326530302d383239312d633135382d3832306439313830326139312e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2Fbf370c73-2e00-8291-c158-820d91802a91.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=ac425af51179250b642da80fc21dbd20\" alt=\"ethanNoAdjust.jpg\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/75035/bf370c73-2e00-8291-c158-820d91802a91.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2Fbf370c73-2e00-8291-c158-820d91802a91.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=f0a792711949c745f13722b833ffabd7 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/td\u003e\n\u003ctd style=\"text-align: center\"\u003e\u003ca href=\"https://camo.qiitausercontent.com/623b8e3d174df8fda9809b062523df311e025b5f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f37353033352f62623734646164322d653263612d383239652d383131342d6661653031343632353062652e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2Fbb74dad2-e2ca-829e-8114-fae0146250be.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=a3e32071fac705446bfb2a7f27d4a8df\" alt=\"ethanAdjusted.jpg\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/75035/bb74dad2-e2ca-829e-8114-fae0146250be.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2Fbb74dad2-e2ca-829e-8114-fae0146250be.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=cfcb4da1a444b46c94754f5e3629844e 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\n\u003cp\u003eご覧のように回転させても違和感ないですね！\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/ab051a1df130bd05056b6992a4625bc3e5d5a28e/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f37353033352f64346334663231322d373537382d613130372d363866642d6537613062323733633764662e676966\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2Fd4c4f212-7578-a107-68fd-e7a0b273c7df.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=b9ff990f470f70a698551d34c7c868e8\" alt=\"rotateEthan.gif\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/75035/d4c4f212-7578-a107-68fd-e7a0b273c7df.gif\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F75035%2Fd4c4f212-7578-a107-68fd-e7a0b273c7df.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=3f431f7e0f590c6744227bbee354a08d 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"まとめ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%BE%E3%81%A8%E3%82%81\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eまとめ\u003c/h1\u003e\n\n\u003cul\u003e\n\u003cli\u003e等角投影法のドット絵を立体に正射影して深度バッファを適用することができた\u003c/li\u003e\n\u003cli\u003eworldToCameraMatrix を調整して Pixel Perfect にできた\u003c/li\u003e\n\u003cli\u003ePixel Perfect のために必要なテクスチャ設定がわかった\u003c/li\u003e\n\u003cli\u003e縦横比調整して3Dモデルとの併用もできた\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eプロジェクトファイル一式は \u003ca href=\"https://github.com/ShinodaNaoki/isometricPixelarts\" rel=\"nofollow noopener\" target=\"_blank\"\u003eGitHub\u003c/a\u003e にあります。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"参考\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%8F%82%E8%80%83\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e参考\u003c/h1\u003e\n\n\u003cp\u003e【元ネタ】\u003ca href=\"http://qoofast.blog76.fc2.com/blog-entry-23.html\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://qoofast.blog76.fc2.com/blog-entry-23.html\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003eカスタムmesh作成\u003c/strong\u003e\u003cbr\u003e\n\u003ca href=\"http://nn-hokuson.hatenablog.com/entry/2018/02/13/200114\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://nn-hokuson.hatenablog.com/entry/2018/02/13/200114\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003eテクスチャ設定\u003c/strong\u003e\u003cbr\u003e\n\u003ca href=\"http://baba-s.hatenablog.com/entry/2018/01/31/213000\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://baba-s.hatenablog.com/entry/2018/01/31/213000\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003e射影行列とカメラ周り\u003c/strong\u003e\u003cbr\u003e\n\u003ca href=\"http://logicalbeat.jp/blog/929/\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://logicalbeat.jp/blog/929/\u003c/a\u003e\u003cbr\u003e\n\u003ca href=\"https://note.mu/fuqunaga/n/n08d81b185514\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://note.mu/fuqunaga/n/n08d81b185514\u003c/a\u003e\u003cbr\u003e\n\u003ca href=\"http://light11.hatenadiary.com/entry/2019/04/17/012544\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://light11.hatenadiary.com/entry/2019/04/17/012544\u003c/a\u003e\u003cbr\u003e\n\u003ca href=\"https://github.com/cmilr/DeadSimple-Pixel-Perfect-Camera\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://github.com/cmilr/DeadSimple-Pixel-Perfect-Camera\u003c/a\u003e\u003c/p\u003e\n","createdAt":"2019-07-17T06:19:29Z","elapsedYearsFromLastModifiedAt":1,"encryptedId":"2E2VbemAHx+GTm5iS/Mz204PHZOttBKT--vOyBeKSoZ1/zEgKY--TeM0MBkZxXqz7RUMTin0Nw==","isBanned":false,"isDeprecated":true,"isDestroyableByViewer":false,"isEditRequestReadableByViewer":true,"isEditRequestSendableByViewer":true,"isLikableByViewer":true,"isLikedByViewer":false,"isPublic":true,"isSlide":false,"isStockableByViewer":true,"isStockedByViewer":false,"isSubscribableByViewer":false,"isSubscribedByViewer":false,"isUpdatableByViewer":false,"isUpdated":true,"lastModifiedAt":"2019-12-15T11:32:06Z","likesCount":59,"linkUrl":"https://qiita.com/Shinoda_Naoki/items/fccdc137747ea4301578","organization":null,"originalId":970002,"stockedCount":50,"title":"[Unity] クォータービューのドット絵に深度バッファを適用する（重なり順解決）","toc":"\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%89%8D%E7%BD%AE%E3%81%8D\"\u003e前置き\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%94%90%E7%AA%81%E3%81%A7%E3%81%99%E3%81%8C%E3%81%93%E3%81%93%E3%81%A7%E5%95%8F%E9%A1%8C\"\u003e唐突ですがここで問題。\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%84%E3%82%8A%E3%81%9F%E3%81%84%E3%81%93%E3%81%A8\"\u003eやりたいこと\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%86%E3%82%AF%E3%82%B9%E3%83%81%E3%83%A3%E3%82%92%E7%AB%8B%E4%BD%93%E3%81%AB%E6%AD%A3%E5%B0%84%E5%BD%B1%E3%81%99%E3%82%8B\"\u003eテクスチャを立体に正射影する\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%9E%E3%83%86%E3%83%AA%E3%82%A2%E3%83%AB\"\u003eマテリアル\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%A1%E3%83%83%E3%82%B7%E3%83%A5%E7%94%9F%E6%88%90%E3%82%B3%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%8D%E3%83%B3%E3%83%88\"\u003eメッシュ生成コンポーネント\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%AB%E3%83%A1%E3%83%A9\"\u003eカメラ\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E9%80%94%E4%B8%AD%E7%B5%90%E6%9E%9C%EF%BC%91\"\u003e途中結果１\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%89%E3%83%83%E3%83%88%E7%B5%B5%E3%82%92%E7%B6%BA%E9%BA%97%E3%81%AB%E8%A1%A8%E7%A4%BA-pixelperfect\"\u003eドット絵を綺麗に表示 PixelPerfect\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%86%E3%82%AF%E3%82%B9%E3%83%81%E3%83%A3%E3%81%AE%E3%82%A2%E3%83%B3%E3%83%81%E3%82%A8%E3%82%A4%E3%83%AA%E3%82%A2%E3%82%B9%E3%82%92%E8%A7%A3%E9%99%A4\"\u003eテクスチャのアンチエイリアスを解除\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3%E8%A1%8C%E5%88%97%E3%81%AE%E8%AA%BF%E6%95%B4\"\u003eプロジェクション行列の調整\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%AB%E3%83%A1%E3%83%A9%E3%81%AE%E5%9B%9E%E8%BB%A2%E3%82%82%E4%B8%8D%E8%A6%81%E3%81%AB\"\u003eカメラの回転も不要に\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E9%80%94%E4%B8%AD%E7%B5%90%E6%9E%9C%EF%BC%92\"\u003e途中結果２\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%86%E3%82%AF%E3%82%B9%E3%83%81%E3%83%A3%E3%81%AE%E5%9C%A7%E7%B8%AE%E8%A8%AD%E5%AE%9A\"\u003eテクスチャの圧縮設定\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%9D%E3%83%AA%E3%82%B4%E3%83%B3%E5%A2%83%E7%95%8C%E3%81%AE%E6%8B%A1%E5%BC%B5\"\u003eポリゴン境界の拡張\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E6%9C%80%E7%B5%82%E7%B5%90%E6%9E%9C\"\u003e最終結果\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#3d%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%A8%E3%81%AE%E5%85%B1%E6%BC%94\"\u003e3Dオブジェクトとの共演\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E7%B8%A6%E6%A8%AA%E6%AF%94%E8%A3%9C%E6%AD%A3\"\u003e縦横比補正\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%81%BE%E3%81%A8%E3%82%81\"\u003eまとめ\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%8F%82%E8%80%83\"\u003e参考\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n","totalPv":8235,"uuid":"fccdc137747ea4301578","banReason":null,"adventCalendarItem":null,"author":{"encryptedId":"RCIrsveL2emO9uX7jTHZrDwGslE=--7UB7lL3RqeBuKMZZ--Ci5VwlePfPIU4M7wW2NDcg==","originalId":75035,"description":"","facebookUrl":null,"githubUrl":"https://github.com/ShinodaNaoki","isBlockingViewer":false,"isFollowableByViewer":true,"isFollowedByViewer":false,"isTweetWebNotificationReceivable":true,"linkedinUrl":null,"name":"","profileImageUrl":"https://qiita-image-store.s3.amazonaws.com/0/75035/profile-images/1473700038","profileImageUrlW48":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F75035%2Fprofile-images%2F1473700038?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=48\u0026s=e221019e78da0571f26ab6e59668f387","profileImageUrlW75":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F75035%2Fprofile-images%2F1473700038?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=1d027acc213195aa714453863473a257","urlName":"Shinoda_Naoki","websiteUrl":null,"twitterUrl":null,"twitterUrlName":null,"revealedOrganizations":{"edges":[{"node":{"encryptedId":"FzbeLooxBqZlTnFU6xpQZwaDITJKoRQgHUQ=--odj5DiHGV2nlE1qp--TFUZNTgQyroTCygPZr0r2Q==","isBetaReleaseEnabled":false,"isFollowableByViewer":false,"isFollowedByViewer":false,"name":"株式会社テクロス","logoUrl":"https://s3-ap-northeast-1.amazonaws.com/qiita-organization-image/47bb6192a32d490348c8d00949b8b21bd852af31/original.jpg?1569306622","urlName":"techcross","description":"京都を拠点にソーシャルゲームの開発・運用、その他システム開発を行っています。","url":"https://www.techcross.co.jp/"}}]}},"tags":[{"name":"C#","urlName":"csharp"},{"name":"game","urlName":"game"},{"name":"Unity3D","urlName":"unity3d"},{"name":"Unity","urlName":"unity"},{"name":"ゲーム制作","urlName":"%e3%82%b2%e3%83%bc%e3%83%a0%e5%88%b6%e4%bd%9c"}],"followingLikers":{"edges":[]},"comments":{"totalCount":0}},"comments":[],"client":null,"ads_event_emitter":null}}</script>
