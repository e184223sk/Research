たとえば顧客リストを表示する画面があったとして、顧客を五十音順で検索できるようにしたいということがあります。
こんな画面です
.Net Framework 4.8でEntity Framework6を使っていましたが、このときは以下のようなコードを書いていました。SqlFunctions.PatIndexを使用して、パターン検索を行っていました。SqlFunctions.PatIndexはMicrosoftのドキュメントにあるように.NET Frameworkでしか使えないようです。
そのため、代替手段を考える必要が出てきました。最初はStartWithやContainsが使えるかなと試したのですが、%といったワイルドカードが使用できなくなるみたいでうまくいきませんでした。
その後調べ続けたところ、見つけたのがこちらEF Core 2.0 の新機能で紹介されていました。これを使うことで、パターン検索ができるみたいです。
変更したコードはこんな感じですこれで、以前と同じようにパターン検索が可能となりました。
EF Coreを触ったのが初めてだったので、いろいろとまだまだ知らないことが多そうです。


