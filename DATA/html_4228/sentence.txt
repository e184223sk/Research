More than 1 year has passed since last update.本記事はXamarin Advent Calendar 2018の12日目として、Xamarin.Macでスクリーンキャプチャを撮る手法をご紹介します。
また、スクリーンキャプチャのメインとなる処理はこちらの記事を参考にさせていただきました。macOS Mojave(10.14.2)
Visual Studio for Mac Community(7.6.11)
Xcode(10.1)ボタンを押下したらその時点での画面のスクリーンキャプチャを撮る実装をしてみました。実装全体はこちらを参照していただければと思います。さて、肝となるスクリーンキャプチャの実装ですが、以下の通りです。DllImportを行うあたりはWindowsのスクリーンキャプチャと変わりないのかなという印象です。
画面全体をCGImageとして取得できるようになったので、あとは画面に表示するだけです。少し分かりづらいですが、画面全体をスクリーンキャプチャしたものがアプリ内に画像として表示されています。
Xamarin.Macは触ったことがない状態からのスタートでしたが、事前に簡単なMacアプリを作成していたことと、Xamarin.Macチュートリアルを一通りこなしたおかげで、それほど苦労なくやりたいことを実装することができました。非常に小さな規模でのXamarin.Macのサンプルプログラムでしたが、やはりmacOS固有の知識は必須だなと実感できました。これを機に引き続きXamarin.Macを触っていきたいと思います。


