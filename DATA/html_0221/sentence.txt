この記事は、Xamarin Advent Calendar 2020の20日目の記事です。Xamarin Community Toolkit カタログの続きです。この記事では、エフェクト、XAMLマークアップ拡張、コントロールについて紹介します。以下が他の記事です。ソースコード
XamarinCommunityToolkitCatalogアイコン画像の色を変更するエフェクトです。ただし、現状ではiOSだとうまく色が変わらない場合があります。どうも画像が設定される前に色を変更する処理が走っているようで、何も処理をせず終了しているようです。このエフェクトを使う場合は、タイマーやイベントなど何らかの方法で画像設定後に処理が行われるように工夫する必要がありそうです。Entryの枠を消すエフェクトです。コントロールにセーフエリアの分マージンを追加するエフェクトです。iOSのみ有効です。EntryやEditorでタップしたら全テキストが選択されるようになるエフェクトです。タップ時にスケール変化や回転などアニメーションを追加するエフェクトです。ロングタップにも対応しています。タップ時のフィードバックエフェクトの色を変更するエフェクトです。Gravatarのアバター画像を取得するXAMLマークアップ拡張です。リソースID使用して埋め込み画像の読み込みを行うためのXAMLマークアップ拡張です。Resxファイルのローカライズテキストを取得するためのXAMLマークアップ拡張です。StringFormatでフォーマットの指定もできます。なお、使用するためには、ResourceManagerの設定が必要です。塗りつぶしの丸の中央に名前といったデフォルトのアバター画像の表示を行うコントロールです。Sourceで画像の設定も行うこともできます。子のコントロールにバッジをつけることができるコントロールです。色、サイズ、位置、アニメーションなどの設定を行うことができます。カメラのプレビューを表示するコントロールです。Shutter()メソッドや、ShutterCommandで写真やビデオの撮影ができ、MediaCapturedイベントで画像データを受けることができます。カメラとマイクを使うので、iOSではカメラとマイクの使用のプライバシー、Androidでは、CAMERA、RECORD_AUDIOのパーミッションの設定が必要です。上下左右に簡単にコントロールを配置できるようにするコントロールです。LastChildFillがTrueだと、最後に追加したコントロールのサイズが拡張されます。タップでコントロールの表示、非表示を切り替えることができるコントロールです。常に表示されるヘッダーのコントロールは、Expander.Headerで設定します。アニメーションやタップ時のコマンドの設定などもできます。動画の再生を行うコントロールです。Sorceで動画のソースを設定します。再生位置や音量などの設定も可能です。２つのつまみをもつ数の範囲を設定できるスライダーです。Shields IOのようなステータスのバッジを表示するコントロールです。TappedイベントやCommandでタップ時の処理を設定することもできます。左右にスライドして、サイドメニューを表示するコントロールです。メインの表示の下にメニューが存在しているので、メインの背景色の設定は必須です。Pageの拡張メソッドDisplaySnackBarAsyncでスナックバーを表示できます。Pageの拡張メソッドDisplayToastAsyncでトーストを表示できます。状態によって表示を切り替えるコントロールです。StateLayout.StateViewsに各状態でのStateViewを設定します。用意されている状態だけではなく、独自の状態も追加することができます。同じ高さと幅でグリッドに配置されるレイアウトです。WidthRequestで指定された幅以上で最も小さくなるような幅に決められます。タブの位置やアイコン、バッジなどいろいろとカスタマイズできるタブのコントロールです。Xamarin Community Toolkitの機能を紹介してきました。
機能が多くて把握が大変ですが、汎用的に使える機能が多いので、Xamarin.Formsを使うなら入れといて損はないかと思います。


