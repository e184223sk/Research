WEBサイトから様々なデータを自動で収集するとき（いわゆるスクレイピングするとき）は、時にユーザーアカウントを作成してログインするサイトも対象となるときがある。私の記事でオンライン麻雀サイトに自動ログインしてプレイ履歴を取得するソフトは作成して紹介したが他のサイトにもログインして自動ログインをいろいろ実行してみようと思う。あらかじめ断っておくが今回、楽天市場にログインまではできたが商品情報などは楽天ＡＰＩでしかアクセスできないようスクリプトが組んであり商品情報の抜き取りはできなかったためご了承いただきたい。それでは早速、楽天市場のログイン画面を開いてみる。今回は初めからChromeブラウザの検証画面を同時に表示してある（画面上で右クリックして「検証」）HTMLのスクリプトをカーソルでなぞると左側のサイトの中のどこのことを書いているのか
グレーにして表示してくれているので適時▽を押しながらツリーを表示していき該当箇所を探す。
「ユーザＩＤ」はinputフォームのname ="u"
「パスワード」はinputフォームのname ="p"ということが分かった。また、＜input＞タグは必ず＜form＞タグの内側にあるのでformの中のaction="./logini"も確認しておく。（actionはPOST要求する際にサイトのURLにactionを続けて書いたURLがPOSTの送り先になるため）上記のソフトではPOST要求とGET要求それぞれで通信ステータスが返るのでURLの間違いなのか、入力フォームの間違いなのか、エラーの確認がしやすく自作ではあるが使いやすい造りになっている。以前にMJサイトで右往左往して作った甲斐があった。今回はあまりデータを抜き取れる要素が無かったので次回は楽天APIを使って商品情報の取得を目指したいと思います。
おわり


