※ 個人blogに投稿した記事（投稿日：2019/10/21）をQiitaに移行しました現場の案件で、外部APIやDB接続が絡んだ少々複雑な判定でCookie を作成するという処理を実装することになり、
対象の処理でユニットテストを作成しておきたくなりました。Cookie の作成や、作成した値を検証するには当然ですがHttpRequestやHttpResponseのインスタンスが必要ですが、
これらのクラスのインスタンスをユニットテストで生成するのは困難（ほぼ不可能のはず）です。  そこで、ASP.NET ではHttpRequestWrapperというクラスが実装されています。
HttpRequestWrapperはHttpRequestBaseという抽象クラスから派生されています。
HttpRequestBaseはHttpRequestと同じプロパティ、関数を保有したクラスです。
対象となる処理の実装ではHttpRequestBaseを使用し、
HttpRequestWrapperでHttpRequestをラップしたインスタンスを使用することにします。
これらはHttpResponseでも同様です。文章だとややこしいので、サンプルコードを実装してみました。  そして、ユニットテストコードでは以下のようにHttpRequestBaseから派生したMockクラスを作成し、
テストで必要となるプロパティや関数をOverrideして実装します。  今回の記事で作成したサンプルコードをGitHubにアップしました。


