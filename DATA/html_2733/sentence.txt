More than 1 year has passed since last update.パーティクルに当たり判定を実装する方法を紹介します。本記事では、パーティクルがオブジェクトに衝突すると衝突回数が加算されていくように実装します。最終的にこの動画にようになります。
パーティクルと立方体との衝突回数を表示させる pic.twitter.com/1EWeWrf9YX本記事で使用するオブジェクトは、緑色のCube、赤いParticle、衝突回数を表示するTextです。各オブジェクトのTransformの値はのように変更しました。さらにCubeにはBox Colliderをつけます。Box Colliderがないと衝突判定ができません。Box ColliderのIs Triggerのチェックは入れないでおきます。カメラから見てCubeの右側からParticleを放出するようにします。パーティクルの設定は上の図のようにします。Particleの色は図には映っていませんが、Start Colorで変更します。Particleの当たり判定を実装するうえで重要なのがです。1~3までは上の図の通りです。4については以下のスクリプトで説明します。ParticleController.csはParticle Systemにアタッチするスクリプトです。この中にOnParicleCollsionという名前のメソッドが入っています。これは、先ほどの1~3の設定ができているときにパーティクルがColliderのついているオブジェクトに衝突したときに自動で呼び出されるメソッドです。衝突するたびに、衝突回数を表す変数countを1ずつ増やしています。メソッドの名前はOnParticleCollsionでなければならず、引数の型もGameObjectでなければなりません。続いてTextにアタッチするTextController.csです。Textに衝突回数を表示させる必要があるので、ParticleController.cs内で定義されている変数countを参照しなければなりません。そこでParticle SystemにParticleControllerがついていることを利用してでParticleController.cs内にアクセスできるようにします。あとはUpdateメソッドでTextの文字をcountにすれば衝突回数が増えていく様子が画面上で見てとれます。以上です。


