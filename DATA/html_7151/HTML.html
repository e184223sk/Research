<!DOCTYPE html><html><head><meta charset="utf-8" /><title>英語のドキュメントを読みたくない人の為のBot Framework入門（C#編） - Qiita</title><meta content="width=device-width,initial-scale=1,shrink-to-fit=no,viewport-fit=cover" name="viewport" /><meta content="#55c500" name="theme-color" /><meta content="XWpkTG32-_C4joZoJ_UsmDUi-zaH-hcrjF6ZC_FoFbk" name="google-site-verification" /><meta content="telephone=no" name="format-detection" /><link rel="canonical" href="https://qiita.com/ymisono/items/c6096fa62a68dda8001a" /><link href="/manifest.json" rel="manifest" /><link href="/opensearch.xml" rel="search" title="Qiita" type="application/opensearchdescription+xml" /><link as="script" href="https://www.googletagservices.com/tag/js/gpt.js" rel="preload" /><link href="https://securepubads.g.doubleclick.net" rel="preconnect" /><script async="" src="https://www.googletagservices.com/tag/js/gpt.js"></script><meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="k32H1Wcf4AGcPiI8DNNjqGiM7k4CMi4rk3DNVzx0N5QhTZzvc4Hr68L2DWLvkwq8h7X2BFKQQssNyPNLAGzDsw==" /><link rel="shortcut icon" type="image/x-icon" href="https://cdn.qiita.com/assets/favicons/public/production-c620d3e403342b1022967ba5e3db1aaa.ico" /><link rel="apple-touch-icon" type="image/png" href="https://cdn.qiita.com/assets/favicons/public/apple-touch-icon-ec5ba42a24ae923f16825592efdc356f.png" /><link rel="stylesheet" media="all" href="https://cdn.qiita.com/assets/public/article-2eaa7dbedc42a8ea65c722cda46d0ebb.min.css" /><script src="https://cdn.qiita.com/assets/public/v3-article-bundle-63de2d91fef827269d3f6b958db2335b.min.js" defer="defer"></script><meta name="twitter:card" content="summary_large_image"><meta content="@Qiita" name="twitter:site" /><meta property="og:type" content="article"><meta property="og:title" content="英語のドキュメントを読みたくない人の為のBot Framework入門（C#編） - Qiita"><meta property="og:image" content="https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0&amp;w=1200&amp;mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND02SXV4NktxZTQ0R3U0NE9KNDRLdDQ0T2w0NE9oNDRPejQ0T0k0NEtTNktxdDQ0R180NEdmNDRHUDQ0R3E0NEdFNUxxNjQ0R3U1NEs2NDRHdVFtOTBJRVp5WVcxbGQyOXlhLVdGcGVtV2dPLThpRU1qNTdlbzc3eUomdHh0LWNvbG9yPSUyMzMzMyZ0eHQtZm9udD1IaXJhZ2lubyUyMFNhbnMlMjBXNiZ0eHQtc2l6ZT01NCZ0eHQtY2xpcD1lbGxpcHNpcyZ0eHQtYWxpZ249Y2VudGVyJTJDbWlkZGxlJnM9YjE2MzQ3MTQ2OGEyYmEyNWJjMjNkYTE4ODY3MzAwYTM&amp;mark-align=center%2Cmiddle&amp;blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RSGx0YVhOdmJtOCZ0eHQtY29sb3I9JTIzMzMzJnR4dC1mb250PUhpcmFnaW5vJTIwU2FucyUyMFc2JnR4dC1zaXplPTQ1JnR4dC1hbGlnbj1yaWdodCUyQ2JvdHRvbSZzPThmZTU3NjNjZjFhYWUwYmRhNmZkMzNjODAyYjI0MDY1&amp;blend-align=center%2Cmiddle&amp;blend-mode=normal&amp;s=d22774c25339cf53a5fef9e3d3e67d1a"><meta property="og:description" content="　やや話題に乗り遅れた感がありますが、マイクロソフトがBuild2016でBot Frameworkを発表しましたね。これを使えば簡単にBotを作れるようになるそうです。ほー。
　BotといえばBombtterの印象しかない私ですが、..."><meta content="https://qiita.com/ymisono/items/c6096fa62a68dda8001a" property="og:url" /><meta content="Qiita" property="og:site_name" /><meta content="564524038" property="fb:admins" /><meta content="Facebook,C#,bot,BotFramework" name="keywords" /><script>!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window, document,'script',
'https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '668972150489891');
fbq('track', 'PageView');</script><style data-emotion-css="17jxvjw 11t2ec1 1dvr2p8 18lkoru 1g4cku8 1iupg5d ijvq0v 15cocm3 12rp90f 115f4t 1b8uj5v 79elbk 16hhh7b fcbn8c 1gj7nt 154zy0m yikrym 1jqivyb 1ode1bp le4d8r 1hbd3g7 1nzh4zz 38fzdi helsa7 8qb8m4 2imjyh he5w1s 70qvj9 3ojehk 100alwu 1dtnjt5 10ougpm 1ay9vb9 m19uds cgzq40 1wa99t2 1l3zk9f 4czcte 1yzj1fm 1uv1qiv 109dbrr 5jpx49 mnxgyc 1vlpknv fsjkhv 1b17vb0 7i7f4d"}>.css-17jxvjw{display:grid;display:-ms-grid;grid-template-columns:80px minmax(0,1fr) 300px;-ms-grid-columns:80px minmax(0,1fr) 300px;grid-template-rows:minmax(270px,auto) 1fr;-ms-grid-rows:minmax(270px,auto) 1fr;max-width:1280px;margin-right:auto;margin-left:auto;padding-top:24px;padding-right:24px;padding-left:24px;}@media (max-width:1200px){.css-17jxvjw{padding-bottom:0;padding-left:0;padding-right:0;}}@media (max-width:992px){.css-17jxvjw{grid-template-columns:80px 452px 300px;-ms-grid-columns:80px 452px 300px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}}@media (max-width:770px){.css-17jxvjw{display:block;}}@media (max-width:480px){.css-17jxvjw{padding-top:0;}}.css-11t2ec1{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;z-index:5;position:-webkit-sticky;position:sticky;top:calc(56px + 24px + 16px + 32px - 16px);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:16px;width:80px;}.css-11t2ec1:after{content:'';display:table;}.css-11t2ec1:before{content:'';display:table;}@media (max-width:770px){.css-11t2ec1{display:none;}}.css-1dvr2p8{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-18lkoru{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;background-color:#FFFFFF;}.css-1g4cku8{display:inline-block;vertical-align:middle;height:20px;width:20px;fill:#55C500;}.css-1iupg5d{color:#55C500;cursor:pointer;font-size:14px;font-weight:bold;}.css-ijvq0v{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-15cocm3{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#FFFFFF;border:2px solid #6E6F70;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:2px 0px 0px;width:40px;}.css-12rp90f{display:inline-block;vertical-align:bottom;height:17.77777777777778px;width:16px;fill:#6E6F70;}.css-115f4t{color:#6E6F70;font-size:14px;font-weight:bold;}.css-1b8uj5v{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;margin-bottom:16px;padding:0;}.css-79elbk{position:relative;}.css-16hhh7b{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;padding:0;}.css-fcbn8c{display:none;bottom:initial;left:initial;right:initial;top:initial;left:100%;top:calc(-8px - (14px * 1.8) - 16px - 4px);}.css-1gj7nt{color:rgba(0,0,0,0.6);font-size:14px;font-weight:bold;line-height:1.8;padding:8px 16px;}.css-154zy0m{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.87);cursor:pointer;font-size:16px;font-weight:normal;line-height:1.8;padding:4px 16px;}.css-154zy0m:hover{-webkit-text-decoration:none;text-decoration:none;background-color:#F2F2F2;}.css-yikrym{width:20px;}.css-1jqivyb{color:rgba(0,0,0,0.6);font-size:13px;}.css-1ode1bp{background-color:rgba(0,0,0,0.12);height:1px;width:100%;margin:8px 0;}.css-le4d8r{display:inline-block;vertical-align:middle;height:13px;width:13px;fill:rgba(0,0,0,0.6);}.css-1hbd3g7{height:250px;}.css-1nzh4zz{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:16px 32px;background-color:#FBE69E;color:rgba(0,0,0,0.87);line-height:1.5;font-weight:600;}@media (max-width:770px){.css-1nzh4zz{padding:16px;}}.css-38fzdi{color:#CA832A;margin-right:4px;}.css-helsa7{background-color:#FFFFFF;padding:32px;margin-bottom:24px;}@media (max-width:992px){.css-helsa7{margin:0 auto 40px;}}@media (max-width:480px){.css-helsa7{margin:0 0 40px;padding:32px 16px;}}.css-8qb8m4{margin-bottom:48px;}.css-2imjyh{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-he5w1s{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;width:100%;}@media (max-width:770px){.css-he5w1s{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}}.css-70qvj9{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.css-3ojehk{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;margin-right:4px;}.css-100alwu{display:inline-block;border-radius:50%;line-height:1;overflow:hidden;vertical-align:middle;}.css-1dtnjt5{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-10ougpm{color:rgba(0,0,0,0.87);font-size:14px;font-weight:600;line-height:1.8;margin-right:4px;text-wrap:break-word;word-break:break-all;}.css-1ay9vb9{margin-right:16px;}.css-m19uds{color:rgba(0,0,0,0.6);font-size:14px;line-height:1.8;}.css-cgzq40{color:rgba(0,0,0,0.87);font-size:32px;font-weight:bold;line-height:1.4;margin-top:8px;text-wrap:break-word;word-break:break-all;}.css-1wa99t2{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.6);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:8px;}.css-1l3zk9f{color:rgba(0,0,0,0.6);font-size:20px;margin-right:8px;}.css-4czcte{margin-right:4px;color:inherit;font-size:14px;line-height:1.8;}.css-4czcte:not(:last-child)::after{content:',';margin-right:4px;}.css-1yzj1fm{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:32px;}.css-1uv1qiv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-size:20px;height:32px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin-right:16px;outline:none;padding:0;width:32px;}.css-109dbrr{background-color:#F9F9F9;border-top:1px solid rgba(0,0,0,0.12);bottom:0;box-shadow:0px 1px 4px rgba(0,0,0,0.14);display:none;height:calc(env(safe-area-inset-bottom,0px) + 56px);-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding-bottom:env(safe-area-inset-bottom);position:-webkit-sticky;position:sticky;width:100%;z-index:2000;}@media (max-width:770px){.css-109dbrr{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}.css-5jpx49{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:space-evenly;-webkit-justify-content:space-evenly;-ms-flex-pack:space-evenly;justify-content:space-evenly;width:100%;}.css-mnxgyc{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1vlpknv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;margin-right:4px;background-color:#FFFFFF;}.css-fsjkhv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1b17vb0{color:#6E6F70;font-size:14px;font-weight:bold;margin-left:4px;}.css-7i7f4d{display:none;bottom:initial;left:initial;right:initial;top:initial;bottom:32px;right:0;}</style></head><body><div class="allWrapper"><div><div id="GlobalHeader-react-component-cefd8b5a-eb11-425d-9ca7-9cf41080f41e"><div class="st-Header"><div class="st-Header_container"><div class="st-Header_start"><a href="/" class="st-Header_logo"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 426.57 130"><circle cx="167.08" cy="21.4" r="12.28"></circle><path d="M250.81 29.66h23.48v18.9h-23.48z"></path><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z"></path><circle cx="216.33" cy="21.4" r="12.28"></circle></svg></a><div class="st-Header_communitySelector" tabindex="0"><span class="fa fa-caret-down"></span></div><div class="st-Header_dropdown"><div class="st-Header_dropdownHeading">Qiita Teams that are logged in</div><div class="st-Header_dropdownItemNote">You are not logged in to any team</div><hr class="st-Header_dropdownDivider st-Header_dropdownDivider-shrink"/><a href="https://teams-center.qiita.com/find_team" class="st-Header_dropdownItem"><span class="fa fa-fw fa-sign-in st-Header_dropdownItemIcon"></span><div>Log in to Qiita Team</div></a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Community</div><a href="/organizations" class="st-Header_dropdownItem">Organization</a><a href="/official-events/open" class="st-Header_dropdownItem">Event</a><a href="/advent-calendar" class="st-Header_dropdownItem">Advent Calendar</a><a href="https://qiitadon.com/" class="st-Header_dropdownItem" target="_blank">Qiitadon (β)</a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Service</div><a href="https://jobs.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Jobs</a><a href="https://zine.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Zine</a><a href="https://blog.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Blog</a></div><form class="st-Header_search" action="/search" method="get"><span class="fa fa-search st-Header_searchIcon"></span><input type="search" class="st-Header_searchInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form><form class="st-Header_searchModal" action="/search" method="get"><input type="text" class="st-Header_searchModalInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form></div><div class="st-Header_end"><div class="st-Header_searchButton"><span class="fa fa-search"></span></div><a class="st-Header_signupButton" href="/signup?redirect_to=%2Fymisono%2Fitems%2Fc6096fa62a68dda8001a">Signup</a><a class="st-Header_loginLink" href="/login?redirect_to=%2Fymisono%2Fitems%2Fc6096fa62a68dda8001a">Login</a></div><div class="st-Header_overlay"></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="GlobalHeader" data-dom-id="GlobalHeader-react-component-cefd8b5a-eb11-425d-9ca7-9cf41080f41e">{"unreadNotificationsCount":null,"realms":[{"humanName":"Qiita","isCurrentRealm":true,"isQiita":true,"isQiitaTeam":false,"loggedInUser":null,"teamId":null,"url":"https://qiita.com/"}],"teamFindUrl":"https://teams-center.qiita.com/find_team","isTeamOnlyUser":null,"currentUser":null}</script>
      
</div><div class="st-HeaderAlert st-HeaderAlert-warning"><div class="st-HeaderAlert_body"></div></div><script type="application/ld+json">{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"/","name":"Qiita"}},{"@type":"ListItem","position":2,"item":{"@id":"/tags/facebook","name":"Facebook"}}]}</script><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","datePublished":"2016-07-09T18:52:23.000+09:00","dateModified":"2016-07-10T21:27:43.000+09:00","headline":"英語のドキュメントを読みたくない人の為のBot Framework入門（C#編）","image":"https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0\u0026w=1200\u0026mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND02SXV4NktxZTQ0R3U0NE9KNDRLdDQ0T2w0NE9oNDRPejQ0T0k0NEtTNktxdDQ0R180NEdmNDRHUDQ0R3E0NEdFNUxxNjQ0R3U1NEs2NDRHdVFtOTBJRVp5WVcxbGQyOXlhLVdGcGVtV2dPLThpRU1qNTdlbzc3eUomdHh0LWNvbG9yPSUyMzMzMyZ0eHQtZm9udD1IaXJhZ2lubyUyMFNhbnMlMjBXNiZ0eHQtc2l6ZT01NCZ0eHQtY2xpcD1lbGxpcHNpcyZ0eHQtYWxpZ249Y2VudGVyJTJDbWlkZGxlJnM9YjE2MzQ3MTQ2OGEyYmEyNWJjMjNkYTE4ODY3MzAwYTM\u0026mark-align=center%2Cmiddle\u0026blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RSGx0YVhOdmJtOCZ0eHQtY29sb3I9JTIzMzMzJnR4dC1mb250PUhpcmFnaW5vJTIwU2FucyUyMFc2JnR4dC1zaXplPTQ1JnR4dC1hbGlnbj1yaWdodCUyQ2JvdHRvbSZzPThmZTU3NjNjZjFhYWUwYmRhNmZkMzNjODAyYjI0MDY1\u0026blend-align=center%2Cmiddle\u0026blend-mode=normal\u0026s=d22774c25339cf53a5fef9e3d3e67d1a","mainEntityOfPage":"https://qiita.com/ymisono/items/c6096fa62a68dda8001a","author":{"@type":"Person","address":null,"email":null,"identifier":"ymisono","name":"ymisono","image":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2Fprofile-images%2F1473718574?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=e186232309218f0098d00d38b0a82402","url":"https://qiita.com/ymisono","description":null,"memberOf":[]},"publisher":{"@type":"Organization","name":"Qiita","logo":{"@type":"ImageObject","url":"//cdn.qiita.com/assets/public/qiita-logo-c39ded593afa388e2e1ba435b110554e.png"}}}</script><style type="text/css">.wb-CampaignLink {
  background-color: #333333;
  width: 100%;
}

.wb-CampaignLink_container {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  max-width: 1100px;
  margin: 0 auto;
  font-size: 13px;
  padding: 0.8em;
}
.wb-CampaignLink_container > a {
  color: #fff;
}

.wb-CampaignLink_container > a:hover {
  text-decoration: underline;
}</style><div class="wb-CampaignLink"><div class="wb-CampaignLink_container"><a target="_blank" id="header_text_message_1" href="https://increments.connpass.com/event/211948/">「AirPods Pro」を抽選でプレゼント！Qiita エンジニアフェスタ 2021 Online Meetupを9/9(木)に開催</a><a target="_blank" id="header_text_message_2" href="https://increments.connpass.com/event/211948/">詳しくはこちら</a></div><script>td.trackEvent(
  'front_events',
  {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"ymisono","type":"items","id":"c6096fa62a68dda8001a"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Show","data":{"message":"「AirPods Pro」を抽選でプレゼント！Qiita エンジニアフェスタ 2021 Online Meetupを9/9(木)に開催","url":"https://increments.connpass.com/event/211948/","sub_message":"詳しくはこちら"}}
)</script><script>document.getElementById('header_text_message_1').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"ymisono","type":"items","id":"c6096fa62a68dda8001a"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":0,"pos_id":"header_text_message_1","message":"「AirPods Pro」を抽選でプレゼント！Qiita エンジニアフェスタ 2021 Online Meetupを9/9(木)に開催","url":"https://increments.connpass.com/event/211948/","sub_message":"詳しくはこちら"}}
  )
})</script><script>document.getElementById('header_text_message_2').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"ymisono","type":"items","id":"c6096fa62a68dda8001a"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":0,"pos_id":"header_text_message_2","message":"「AirPods Pro」を抽選でプレゼント！Qiita エンジニアフェスタ 2021 Online Meetupを9/9(木)に開催","url":"https://increments.connpass.com/event/211948/","sub_message":"詳しくはこちら"}}
  )
})</script></div><script type="application/json" id="js-react-on-rails-context">{"railsEnv":"production","inMailer":false,"i18nLocale":"en","i18nDefaultLocale":"en","href":"https://qiita.com/ymisono/items/c6096fa62a68dda8001a","location":"/ymisono/items/c6096fa62a68dda8001a","scheme":"https","host":"qiita.com","port":null,"pathname":"/ymisono/items/c6096fa62a68dda8001a","search":null,"httpAcceptLanguage":null,"actionPath":"public/items#show","settings":{"analyticsTrackingId":"UA-24675221-12","assetsMap":{},"csrfToken":"TJ8DiPNhic3pg4w1H4+y3OKPxRWa4Ph21/L60VXY4A3+rxiy5/+CJ7dLo2v8z9vIDbbdX8pClJZJSsTNacAUKg==","locale":"en"},"currentUser":null,"isLoggedIn":false,"recaptchaSiteKey":"6LfNkiQTAAAAAM3UGnSquBy2akTITGNMO_QDxMw6","serverSide":false}</script>
<div id="PersonalArticlePage-react-component-6bcafdbd-0ba2-479b-bfc5-76f0c6eae389"><div class="p-items_wrapper"><div class=" css-17jxvjw"><div class="css-11t2ec1"><div class="css-1dvr2p8"><button class=" css-18lkoru"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/ymisono/items/c6096fa62a68dda8001a/likers" class="css-1iupg5d">21</a></div><div class="css-ijvq0v"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-115f4t">23</span></div><div class="css-1b8uj5v"><span class="fa fa-twitter"></span></div><div class="css-1b8uj5v"><span class="fa fa-facebook"></span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-fcbn8c"><div class="css-1gj7nt">Improve article</div><a href="/drafts/c6096fa62a68dda8001a/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/ymisono/items/c6096fa62a68dda8001a/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/ymisono/items/c6096fa62a68dda8001a/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/ymisono/items/c6096fa62a68dda8001a/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/ymisono/items/c6096fa62a68dda8001a.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div><div class="p-items_options"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_toc"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_main"><div class="css-1nzh4zz"><span class="fa fa-fw fa-warning css-38fzdi"></span><p>More than 5 years have passed since last update.</p></div><div class="css-helsa7"><div class="css-8qb8m4"><div class="css-2imjyh"><div class="css-he5w1s"><div class="css-70qvj9"><div class="css-3ojehk"><a href="/ymisono"><img class="css-100alwu eyfquo10" src="https://qiita-image-store.s3.amazonaws.com/0/132297/profile-images/1473718574" width="24" height="24" loading="lazy"/></a></div><div class="css-1dtnjt5"><a href="/ymisono" class="css-10ougpm">@<!-- -->ymisono</a><div class="css-1ay9vb9"><span><meta content="2016-07-09T09:52:23Z"/><time dateTime="2016-07-10T12:27:43Z" class="css-m19uds">updated at 2016-07-10</time></span></div></div></div></div></div><h1 class="css-cgzq40">英語のドキュメントを読みたくない人の為のBot Framework入門（C#編）</h1><div class="css-1wa99t2"><span class="fa fa-tags mr-1of2 css-1l3zk9f" aria-hidden="true"></span><a href="/tags/facebook" class="css-4czcte">Facebook</a><a href="/tags/csharp" class="css-4czcte">C#</a><a href="/tags/bot" class="css-4czcte">bot</a><a href="/tags/botframework" class="css-4czcte">BotFramework</a></div></div><section class="it-MdContent"><div id="personal-public-article-body"><div><p>　やや話題に乗り遅れた感がありますが、<a href="http://www.itmedia.co.jp/news/articles/1603/31/news063.html" rel="nofollow noopener" target="_blank">マイクロソフトがBuild2016でBot Frameworkを発表しましたね</a>。これを使えば簡単にBotを作れるようになるそうです。ほー。<br>
　Botといえば<a href="https://twitter.com/bombtter" rel="nofollow noopener" target="_blank">Bombtter</a>の印象しかない私ですが、いつの間にやら世間的には次のステージへ到達しているようですね。<br>
　さて、このBot Frameworkですが触れ込み通り割と簡単にBotを作り始める事ができます。情報はまだ少ないですが公式のドキュメントがマイクロソフト製とは思えないくらい親切で充実しているので、これを読むだけなんとかなります。が、残念なことに現時点では英語しかありません。<br>
　<strong>そ・こ・で</strong><br>
　せっかくなので、Bot Frameworkを使いたいけど公式ドキュメントは読みたくないぞ、という方向けに入門記事を書きたいと思います。パチパチ。</p>

<p>　<strong>記事を執筆中にBot Frameworkがv3へと更新されました。</strong><del>何てタイミングにやってんだこのヤロー。</del>記事でもv3の内容を反映しました<del>（スクショの取り直し面倒くせぇ）</del>。</p>

<h2>
<span id="目標" class="fragment"></span><a href="#%E7%9B%AE%E6%A8%99"><i class="fa fa-link"></i></a>目標</h2>

<p>　オウム返し + αをする簡単なbotをBot Frameworkを使って作れるようにする。さらに、それを外部サービス（Facebook）と連携させてみる。</p>

<h2>
<span id="前提" class="fragment"></span><a href="#%E5%89%8D%E6%8F%90"><i class="fa fa-link"></i></a>前提</h2>

<ul>
<li>C#の読み書きができる。</li>
<li>Visual Studioを使ったことがある。</li>
</ul>

<p>　Bot FrameworkではC#とnode.jsが使えますが、この記事ではC# + Visual Studioを使います。<br>
　SNSとの連携とAzureへのデプロイもやりますが、その都度解説するので前提にはしません。</p>

<h2>
<span id="準備" class="fragment"></span><a href="#%E6%BA%96%E5%82%99"><i class="fa fa-link"></i></a>準備</h2>

<h3>
<span id="最新版のvisual-studioをインストール" class="fragment"></span><a href="#%E6%9C%80%E6%96%B0%E7%89%88%E3%81%AEvisual-studio%E3%82%92%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB"><i class="fa fa-link"></i></a>最新版のVisual Studioをインストール</h3>

<p>　2015 Update3 が現在の最新です。個人利用ならCommunity版がタダで使えます（<a href="https://www.visualstudio.com/ja-jp/products/visual-studio-community-vs.aspx" rel="nofollow noopener" target="_blank">リンク</a>）。</p>

<p>　<strong>インストールの際にカスタムインストールで"Microsoft Web Developer Tools"を入れてください。</strong>これがないとプロジェクトを作れません。</p>

<p><a href="https://camo.qiitausercontent.com/12301a216f3e9980516ecb80d1e769fcbd8507a4/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3133323239372f61363463616437372d336365622d386639382d613730382d3263313963383831326332312e706e67" target="_blank" rel="nofollow noopener"><img width="345" alt="vs.png" src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2Fa64cad77-3ceb-8f98-a708-2c19c8812c21.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=15edb9dc924270ff0fb50795e6a557d2" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/132297/a64cad77-3ceb-8f98-a708-2c19c8812c21.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2Fa64cad77-3ceb-8f98-a708-2c19c8812c21.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=2dec6eb25ef447923d18fec21b426622 1x" loading="lazy"></a></p>

<h3>
<span id="マイクロソフトアカウントを作る" class="fragment"></span><a href="#%E3%83%9E%E3%82%A4%E3%82%AF%E3%83%AD%E3%82%BD%E3%83%95%E3%83%88%E3%82%A2%E3%82%AB%E3%82%A6%E3%83%B3%E3%83%88%E3%82%92%E4%BD%9C%E3%82%8B"><i class="fa fa-link"></i></a>マイクロソフトアカウントを作る</h3>

<p>　マイクロソフトのサービスを使うので必須です。<br>
※@outlook.com、@hotmail.comなどで終わるアカウントがあればそれが使えます。Gmailを使っていればそれと繋ぐこともできます。</p>

<h3>
<span id="azureサブスクリプションに登録" class="fragment"></span><a href="#azure%E3%82%B5%E3%83%96%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%97%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%AB%E7%99%BB%E9%8C%B2"><i class="fa fa-link"></i></a>Azureサブスクリプションに登録</h3>

<p>　ホスティングの為に必要です。<br>
　作り方は<a href="http://kikutaro777.hatenablog.com/entry/2014/01/03/025126" rel="nofollow noopener" target="_blank">こちらの記事</a>などを参考にしてください。</p>

<p>※クレジットカードが必須ですが、無料プランを利用すればお金はかからない、はずです（自分のカードで利用したことないので断言はできないです。大丈夫だと思うのですが）。</p>

<p>　Azure以外の場所へ上げる事ももちろん可能です。その場合、解説は適宜読み替えてください。</p>

<h2>
<span id="bot-framworkを使う" class="fragment"></span><a href="#bot-framwork%E3%82%92%E4%BD%BF%E3%81%86"><i class="fa fa-link"></i></a>Bot Framworkを使う</h2>

<h3>
<span id="bot-applicationテンプレートでプロジェクト作成" class="fragment"></span><a href="#bot-application%E3%83%86%E3%83%B3%E3%83%97%E3%83%AC%E3%83%BC%E3%83%88%E3%81%A7%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E4%BD%9C%E6%88%90"><i class="fa fa-link"></i></a>Bot Applicationテンプレートでプロジェクト作成</h3>

<h4>
<span id="テンプレート配置" class="fragment"></span><a href="#%E3%83%86%E3%83%B3%E3%83%97%E3%83%AC%E3%83%BC%E3%83%88%E9%85%8D%E7%BD%AE"><i class="fa fa-link"></i></a>テンプレート配置</h4>

<p>　Bot Frameworkのプロジェクトを作るためにマイクロソフトがテンプレートを用意してくれました。<a href="http://aka.ms/bf-bc-vstemplate" rel="nofollow noopener" target="_blank">こちら</a>よりダウンロードしてください。ダウンロードしたzipファイルをVisual Studio 2015のテンプレートフォルダに入れてください（デフォルトでは %USERPROFILE%\Documents\Visual Studio 2015\Templates\ProjectTemplates\Visual C# です。エクスプローラーのアドレスバーに貼り付けて飛んでください）。</p>

<p><a href="https://camo.qiitausercontent.com/906259716039a8f58ce0afb1ba11da8500da34f2/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3133323239372f64316433393733322d653965652d346238662d663461312d6465666564356234663939352e706e67" target="_blank" rel="nofollow noopener"><img width="798" alt="template.png" src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2Fd1d39732-e9ee-4b8f-f4a1-defed5b4f995.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=704c1f2237dcc93f7eca956ec47f1d5d" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/132297/d1d39732-e9ee-4b8f-f4a1-defed5b4f995.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2Fd1d39732-e9ee-4b8f-f4a1-defed5b4f995.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=1802d37c1b3b57bd7db946d704cefcc6 1x" loading="lazy"></a></p>

<h4>
<span id="プロジェクト作成" class="fragment"></span><a href="#%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E4%BD%9C%E6%88%90"><i class="fa fa-link"></i></a>プロジェクト作成</h4>

<p>　テンプレートを入れたらVisual Studioを起動して、新しいプロジェクトを作ってみてください。問題がなければ、Bot Applicationというテンプレートが選べるはずです。</p>

<p><a href="https://camo.qiitausercontent.com/7255a26c2d7dae283c0391538a109bf2defd00f2/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3133323239372f34313839303130632d306464652d636162642d336364662d6165353332343239633238662e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F4189010c-0dde-cabd-3cdf-ae532429c28f.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=ade04333e14e27a0508a688b27baed6c" alt="bot_template.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/132297/4189010c-0dde-cabd-3cdf-ae532429c28f.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F4189010c-0dde-cabd-3cdf-ae532429c28f.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=3eba6dff37edd88a6628cbbfbeeeb824 1x" loading="lazy"></a></p>

<h4>
<span id="ビルド" class="fragment"></span><a href="#%E3%83%93%E3%83%AB%E3%83%89"><i class="fa fa-link"></i></a>ビルド</h4>

<p>　プロジェクトを作成したら、そのままビルドをしてください。ブラウザが開き、下の画像のようなページが表示されればオッケーです。</p>

<p><a href="https://camo.qiitausercontent.com/ad0f149de8f9f272e79409b057a294966d910c85/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3133323239372f32303365363236302d323833312d613864612d376132392d3836396161663231303734302e706e67" target="_blank" rel="nofollow noopener"><img width="1080" alt="debug_boot.png" src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F203e6260-2831-a8da-7a29-869aaf210740.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=084a8a62c57dc166bc72899f55213571" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/132297/203e6260-2831-a8da-7a29-869aaf210740.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F203e6260-2831-a8da-7a29-869aaf210740.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=11d3c2784a7806ea39cd5eb2b16d7361 1x" loading="lazy"></a></p>

<h3>
<span id="エミュレーターで動作確認" class="fragment"></span><a href="#%E3%82%A8%E3%83%9F%E3%83%A5%E3%83%AC%E3%83%BC%E3%82%BF%E3%83%BC%E3%81%A7%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D"><i class="fa fa-link"></i></a>エミュレーターで動作確認</h3>

<p>　実はさきほど入れたテンプレートには、動くbotがもう書いてあります。なので、もう半分終わった……といいたい所ですが、まだまだですね。今のままではbotはどこともつながっていません。壁と話してろよ状態です。<br>
　ここからいきなり実際のSNSサービスに接続してもよいのですが、それには少し手間がいります。でも早く動いている所を見たいですよね。<br>
　こういう事を想定してマイクロソフトが動作確認用のエミュレーターを用意してくれてます。</p>

<p><strong>※v3でエミュレーターもバージョンアップしました。7/9時点で3.0.0.54です。</strong></p>

<h4>
<span id="インストール" class="fragment"></span><a href="#%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB"><i class="fa fa-link"></i></a>インストール</h4>

<p>　この<a href="https://aka.ms/bf-bc-emulator" rel="nofollow noopener" target="_blank">リンク</a>からインストールできます。<br>
　インストールが終われば、自動的にエミュレーターが起動します。</p>

<h4>
<span id="接続設定" class="fragment"></span><a href="#%E6%8E%A5%E7%B6%9A%E8%A8%AD%E5%AE%9A"><i class="fa fa-link"></i></a>接続設定</h4>

<p>　エミュレーターをbotにつなげるには次の3つの項目を設定する必要があります</p>

<p>※v3より<strong>「AppId」は「MicrosoftAppId」</strong>に、<strong>「AppSecret」は「MicrosoftAppPassword」</strong>へ変更されました。</p>

<ol>
<li>URL: さきほどビルドをして開いたページがあると思います。そのページのアドレスをコピーしてエミュレーターのURLのボックスにペーストしてください。さらに、ペーストした文字列の後ろに"/api/messages"を足してください。</li>
</ol>

<p>2-3. MicrosoftAppId/MicrosoftAppPassword: プロジェクト内に"Web.config"というファイルがあるはずです。それを開くと</p>

<div class="code-frame" data-lang="xml"><div class="highlight"><pre class="with-code"><code>  <span class="nt">&lt;appSettings&gt;</span>
    <span class="c">&lt;!-- update these with your BotId, Microsoft App Id and your Microsoft App Password--&gt;</span>
    <span class="nt">&lt;add</span> <span class="na">key=</span><span class="s">"BotId"</span> <span class="na">value=</span><span class="s">"YourBotId"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;add</span> <span class="na">key=</span><span class="s">"MicrosoftAppId"</span> <span class="na">value=</span><span class="s">""</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;add</span> <span class="na">key=</span><span class="s">"MicrosoftAppPassword"</span> <span class="na">value=</span><span class="s">""</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/appSettings&gt;</span>
</code></pre></div></div>

<p>という項目があるので、MicrosoftAppIdとMicrosoftAppPasswordが空白になっているのを確認してください。この値はBotの登録後にちゃんとしたものを入れます。<br>
　埋めた結果次のようになりました（具体的な値は環境や時期によって変わるかもしれません）。</p>

<p><a href="https://camo.qiitausercontent.com/20035ddcb302275dccaa91c035059391077cd69d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3133323239372f34386135393638342d656136342d336635352d356637302d3739663138653038346639342e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F48a59684-ea64-3f55-5f70-79f18e084f94.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=68e89007de17ff82abad8cdbded66549" alt="new_emulator.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/132297/48a59684-ea64-3f55-5f70-79f18e084f94.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F48a59684-ea64-3f55-5f70-79f18e084f94.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=cf83406f49234c30f987748afb8e8146 1x" loading="lazy"></a></p>

<h4>
<span id="エミュレーター上でbotと会話" class="fragment"></span><a href="#%E3%82%A8%E3%83%9F%E3%83%A5%E3%83%AC%E3%83%BC%E3%82%BF%E3%83%BC%E4%B8%8A%E3%81%A7bot%E3%81%A8%E4%BC%9A%E8%A9%B1"><i class="fa fa-link"></i></a>エミュレーター上でbotと会話</h4>

<p>　できましたか？　それではbotに話しかけてください（画面最下部のボックスが入力欄です）。</p>

<p><a href="https://camo.qiitausercontent.com/7a89d6369d19854dbbbc1a59ba270c56f958b150/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3133323239372f32383135353030352d333265332d363466652d623034322d6237343534356534353765302e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F28155005-32e3-64fe-b042-b74545e457e0.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=f33946ca99141e1a2be4caf3e8711de4" alt="bot_error.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/132297/28155005-32e3-64fe-b042-b74545e457e0.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F28155005-32e3-64fe-b042-b74545e457e0.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=d447374a13d5e5f80ddf401da29786c4 1x" loading="lazy"></a></p>

<p>　あらら、エラーです。<br>
　どうやらプログラムを起動し忘れてたみたいですね。よくある事です（上手くいった人は経験者かズボラで毎回終了するのを忘れるタイプの人でしょう）。<br>
　もう一度起動してから、話してみましょう</p>

<p><a href="https://camo.qiitausercontent.com/b2c73f7d02e667d8d2799f26a26e15acf747056e/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3133323239372f32643238363133382d316131362d323461302d343335662d3233303230373037636337652e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F2d286138-1a16-24a0-435f-23020707cc7e.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=8db69b49c0d26bcf30bd44d69f118d1c" alt="bot_succsess.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/132297/2d286138-1a16-24a0-435f-23020707cc7e.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F2d286138-1a16-24a0-435f-23020707cc7e.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=9f38c075eea983da97f5cf1d02f3f28b 1x" loading="lazy"></a></p>

<p>　できましたね！<br>
　どうやらこれは、話しかけた内容の文字数を返すbotのようです。</p>

<h3>
<span id="bot改造" class="fragment"></span><a href="#bot%E6%94%B9%E9%80%A0"><i class="fa fa-link"></i></a>bot改造</h3>

<p>　目標ではオウム返しをするbotと書いたので、オウム返しをするようコードを書き換えてみましょう。</p>

<p>　まず、ソリューションエクスプローラーからControllers/MessagesController.csを開いてください。<br>
　その中のPostメソッドを見てください。</p>

<div class="code-frame" data-lang="csharp"><div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="k">async</span> <span class="n">Task</span><span class="p">&lt;</span><span class="n">HttpResponseMessage</span><span class="p">&gt;</span> <span class="nf">Post</span><span class="p">([</span><span class="n">FromBody</span><span class="p">]</span><span class="n">Activity</span> <span class="n">activity</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">activity</span><span class="p">.</span><span class="n">Type</span> <span class="p">==</span> <span class="n">ActivityTypes</span><span class="p">.</span><span class="n">Message</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">ConnectorClient</span> <span class="n">connector</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">ConnectorClient</span><span class="p">(</span><span class="k">new</span> <span class="nf">Uri</span><span class="p">(</span><span class="n">activity</span><span class="p">.</span><span class="n">ServiceUrl</span><span class="p">));</span>
        <span class="c1">// calculate something for us to return</span>
        <span class="kt">int</span> <span class="n">length</span> <span class="p">=</span> <span class="p">(</span><span class="n">activity</span><span class="p">.</span><span class="n">Text</span> <span class="p">??</span> <span class="kt">string</span><span class="p">.</span><span class="n">Empty</span><span class="p">).</span><span class="n">Length</span><span class="p">;</span>

        <span class="c1">// return our reply to the user</span>
        <span class="n">Activity</span> <span class="n">reply</span> <span class="p">=</span> <span class="n">activity</span><span class="p">.</span><span class="nf">CreateReply</span><span class="p">(</span><span class="s">$"You sent </span><span class="p">{</span><span class="n">activity</span><span class="p">.</span><span class="n">Text</span><span class="p">}</span><span class="s"> which was </span><span class="p">{</span><span class="n">length</span><span class="p">}</span><span class="s"> characters"</span><span class="p">);</span>
        <span class="k">await</span> <span class="n">connector</span><span class="p">.</span><span class="n">Conversations</span><span class="p">.</span><span class="nf">ReplyToActivityAsync</span><span class="p">(</span><span class="n">reply</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="nf">HandleSystemMessage</span><span class="p">(</span><span class="n">activity</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="kt">var</span> <span class="n">response</span> <span class="p">=</span> <span class="n">Request</span><span class="p">.</span><span class="nf">CreateResponse</span><span class="p">(</span><span class="n">HttpStatusCode</span><span class="p">.</span><span class="n">OK</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">response</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>　なんとなく分かると思いますが、ユーザーから呼びかけがあるとこのPostメソッドが呼ばれます。その中身もだいたい分かりますね、送られたメッセージの文字数を数えて返しているだけです。</p>

<p>　ここをオウム返しするように書き換えます。本当にそのまま戻すだけだと芸がないので、かぎかっこでくくった上でビックリマークをつけてあげましょう。ちょっとだけ愛嬌度が上がります。</p>

<div class="code-frame" data-lang="csharp"><div class="highlight"><pre class="with-code"><code><span class="k">if</span> <span class="p">(</span><span class="n">activity</span><span class="p">.</span><span class="n">Type</span> <span class="p">==</span> <span class="n">ActivityTypes</span><span class="p">.</span><span class="n">Message</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">ConnectorClient</span> <span class="n">connector</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">ConnectorClient</span><span class="p">(</span><span class="k">new</span> <span class="nf">Uri</span><span class="p">(</span><span class="n">activity</span><span class="p">.</span><span class="n">ServiceUrl</span><span class="p">));</span>

    <span class="c1">// 「オウム返しだ」「オウム返しだ！」</span>
    <span class="n">Activity</span> <span class="n">reply</span> <span class="p">=</span> <span class="n">activity</span><span class="p">.</span><span class="nf">CreateReply</span><span class="p">(</span><span class="s">$"「</span><span class="p">{</span><span class="n">activity</span><span class="p">.</span><span class="n">Text</span><span class="p">}</span><span class="s">！」"</span><span class="p">);</span>
    <span class="k">await</span> <span class="n">connector</span><span class="p">.</span><span class="n">Conversations</span><span class="p">.</span><span class="nf">ReplyToActivityAsync</span><span class="p">(</span><span class="n">reply</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p><a href="https://camo.qiitausercontent.com/db697d8104b4406c5b75c75b56f4e6b47ec4951b/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3133323239372f66366662663534392d396531632d326564352d363933342d3763333138343630326166372e706e67" target="_blank" rel="nofollow noopener"><img width="375" alt="parroting.png" src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2Ff6fbf549-9e1c-2ed5-6934-7c3184602af7.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=9e30c0e1f48420ab161446be372d50e5" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/132297/f6fbf549-9e1c-2ed5-6934-7c3184602af7.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2Ff6fbf549-9e1c-2ed5-6934-7c3184602af7.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=e2066ec2c22e859de94197d91fe11d95 1x" loading="lazy"></a></p>

<p>　できました。簡単でしょう？</p>

<h3>
<span id="messagetypeについて" class="fragment"></span><a href="#messagetype%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>MessageTypeについて</h3>

<p>　おおざっぱなタイプの人がそろそろ「はよサーバーにあげろ」と言ってきそうですが、その前に<del>重箱の隅が気になってしょうがない</del>几帳面な方々（世に言う早死にするタイプ。<del>プログラマーに多い</del>）の疑問に答えましょう。HandleSystemMessageメソッドについてです。</p>

<p>　今見たオウム返しのように、ユーザーの送信に応答するというのはよくある使用例ですが、それ以外の特定の状況をトリガーにメッセージを出したい場合が考えられます。例えば、会話が始まったときにあいさつをしたい、というケースです。<br>
　このような場面に対応するために、Bot FrameworkではMessageTypeというものが用意されています。具体的に以下のものがあります（<del>2016/7/7現時点<sup id="fnref1"><a href="#fn1" title="http://docs.botframework.com/connector/message-types/#navtitle (v1のドキュメント)">1</a></sup></del>）</p>

<p><strong>※v3で大きな変更が入りました。以下はv3の説明です。(2016/7/9現時点<sup id="fnref2"><a href="#fn2" title="http://docs.botframework.com/en-us/csharp/builder/sdkreference/activities.html#message">2</a></sup>)</strong></p>

<table>
<thead>
<tr>
<th style="text-align: center">MessageType</th>
<th style="text-align: center">MessageType (訳)</th>
<th style="text-align: center">説明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center">Message</td>
<td style="text-align: center">メッセージ</td>
<td style="text-align: center">通常の会話</td>
</tr>
<tr>
<td style="text-align: center">DeleteUserData</td>
<td style="text-align: center">ユーザー情報削除</td>
<td style="text-align: center">ユーザー固有の情報（例：個人情報）の削除を希望する</td>
</tr>
<tr>
<td style="text-align: center">ConversationUpdate</td>
<td style="text-align: center">会話の更新</td>
<td style="text-align: center">Botやユーザーが会話に加わったり、外れたりした事を伝えるメッセージ。 MembersAddedとMembersRemovedプロパティで具体的な内容を取得。</td>
</tr>
<tr>
<td style="text-align: center">ContactRelationUpdate</td>
<td style="text-align: center">連絡帳の更新</td>
<td style="text-align: center">連絡帳（やそれに類似する機能）が存在するサービス（例：Skype）などの場合、それに変更があった事を知らせる。Actionプロパティの値に"add"/"remove"が入っている。</td>
</tr>
<tr>
<td style="text-align: center">Typing</td>
<td style="text-align: center">タイピング中</td>
<td style="text-align: center">ユーザーがタイピング中である事を知らせる。</td>
</tr>
<tr>
<td style="text-align: center">Ping</td>
<td style="text-align: center">Ping</td>
<td style="text-align: center">Botの状態を確認するためのシステムリクエスト</td>
</tr>
</tbody>
</table>

<p>　特筆するべきなのは、これが汎用的に使える事です。それぞれのメッセージへの応答を書いておけばBot Frameworkが実際に利用しているサービス（SkypeならSkypeの、FacebookならFacebookの）のメッセージに変換してくれます。この汎用性がBot Frameworkを使う大きなメリットの1つです（そのサービスで利用できない機能は単に無視されます）。</p>

<p>　それでは簡単な例を提示します。ユーザーが会話に参加したときにあいさつをするようにしましょう。以下のコード加えます。</p>

<div class="code-frame" data-lang="csharp"><div class="highlight"><pre class="with-code"><code><span class="k">if</span><span class="p">(</span><span class="n">message</span><span class="p">.</span><span class="n">MembersAdded</span><span class="p">.</span><span class="n">Count</span> <span class="p">&gt;</span> <span class="m">0</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">//アイサツは実際大事。古事記にもそう書かれている。</span>
    <span class="k">return</span> <span class="n">message</span><span class="p">.</span><span class="nf">CreateReply</span><span class="p">(</span><span class="s">$"「こんにちは！」"</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>そして、呼び出し側で応答を返します。以下が全体のコードです。</p>

<div class="code-frame" data-lang="csharp"><div class="highlight"><pre class="with-code"><code><span class="p">[</span><span class="n">BotAuthentication</span><span class="p">]</span>
<span class="k">public</span> <span class="k">class</span> <span class="nc">MessagesController</span> <span class="p">:</span> <span class="n">ApiController</span>
<span class="p">{</span>
    <span class="c1">/// &lt;summary&gt;</span>
    <span class="c1">/// POST: api/Messages</span>
    <span class="c1">/// Receive a message from a user and reply to it</span>
    <span class="c1">/// &lt;/summary&gt;</span>
    <span class="k">public</span> <span class="k">async</span> <span class="n">Task</span><span class="p">&lt;</span><span class="n">HttpResponseMessage</span><span class="p">&gt;</span> <span class="nf">Post</span><span class="p">([</span><span class="n">FromBody</span><span class="p">]</span><span class="n">Activity</span> <span class="n">activity</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">ConnectorClient</span> <span class="n">connector</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">ConnectorClient</span><span class="p">(</span><span class="k">new</span> <span class="nf">Uri</span><span class="p">(</span><span class="n">activity</span><span class="p">.</span><span class="n">ServiceUrl</span><span class="p">));</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">activity</span><span class="p">.</span><span class="n">Type</span> <span class="p">==</span> <span class="n">ActivityTypes</span><span class="p">.</span><span class="n">Message</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="c1">// 「オウム返しだ」「オウム返しだ！」</span>
            <span class="n">Activity</span> <span class="n">reply</span> <span class="p">=</span> <span class="n">activity</span><span class="p">.</span><span class="nf">CreateReply</span><span class="p">(</span><span class="s">$"「</span><span class="p">{</span><span class="n">activity</span><span class="p">.</span><span class="n">Text</span><span class="p">}</span><span class="s">！」"</span><span class="p">);</span>
            <span class="k">await</span> <span class="n">connector</span><span class="p">.</span><span class="n">Conversations</span><span class="p">.</span><span class="nf">ReplyToActivityAsync</span><span class="p">(</span><span class="n">reply</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="kt">var</span> <span class="n">reply</span> <span class="p">=</span> <span class="nf">HandleSystemMessage</span><span class="p">(</span><span class="n">activity</span><span class="p">);</span>
            <span class="c1">//システムメッセージに対する応答</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">reply</span> <span class="p">!=</span> <span class="k">null</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">await</span> <span class="n">connector</span><span class="p">.</span><span class="n">Conversations</span><span class="p">.</span><span class="nf">ReplyToActivityAsync</span><span class="p">(</span><span class="n">reply</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="kt">var</span> <span class="n">response</span> <span class="p">=</span> <span class="n">Request</span><span class="p">.</span><span class="nf">CreateResponse</span><span class="p">(</span><span class="n">HttpStatusCode</span><span class="p">.</span><span class="n">OK</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">response</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">private</span> <span class="n">Activity</span> <span class="nf">HandleSystemMessage</span><span class="p">(</span><span class="n">Activity</span> <span class="n">message</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">message</span><span class="p">.</span><span class="n">Type</span> <span class="p">==</span> <span class="n">ActivityTypes</span><span class="p">.</span><span class="n">DeleteUserData</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="c1">// Implement user deletion here</span>
            <span class="c1">// If we handle user deletion, return a real message</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">message</span><span class="p">.</span><span class="n">Type</span> <span class="p">==</span> <span class="n">ActivityTypes</span><span class="p">.</span><span class="n">ConversationUpdate</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">message</span><span class="p">.</span><span class="n">MembersAdded</span><span class="p">.</span><span class="n">Count</span> <span class="p">&gt;</span> <span class="m">0</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="c1">//アイサツは実際大事。古事記にもそう書かれている。</span>
                <span class="k">return</span> <span class="n">message</span><span class="p">.</span><span class="nf">CreateReply</span><span class="p">(</span><span class="s">$"「こんにちは！」"</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="c1">//省略</span>

        <span class="k">return</span> <span class="k">null</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>エミュレーターにはシステムメッセージを直接送信する機能があるので、これでテストできます。</p>

<p><a href="https://camo.qiitausercontent.com/8f546b1addfc9bfd37c26efdecdbd48056282cd7/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3133323239372f38326232326436352d326632342d316635662d373031642d3936326666323335623437352e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F82b22d65-2f24-1f5f-701d-962ff235b475.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=7795d1286cfd71404c11d4b048ebb12d" alt="added_user_to_conversation.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/132297/82b22d65-2f24-1f5f-701d-962ff235b475.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F82b22d65-2f24-1f5f-701d-962ff235b475.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=393d029de566f4bc80567587a4224876 1x" loading="lazy"></a></p>

<h3>
<span id="azureへのアップロード" class="fragment"></span><a href="#azure%E3%81%B8%E3%81%AE%E3%82%A2%E3%83%83%E3%83%97%E3%83%AD%E3%83%BC%E3%83%89"><i class="fa fa-link"></i></a>Azureへのアップロード</h3>

<p>　お待たせしました。ようやくサーバーへアップロードします。今回はAzureへアップロードしますが、場所はどこでもいいです。</p>

<h4>
<span id="visual-studioから公開" class="fragment"></span><a href="#visual-studio%E3%81%8B%E3%82%89%E5%85%AC%E9%96%8B"><i class="fa fa-link"></i></a>Visual Studioから公開</h4>

<ul>
<li>「ソリューションエクスプローラー」&gt; プロジェクトを右クリック &gt; 「公開」</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/f47bee2da9ea07084186fd0574f03d7084bb43b0/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3133323239372f66363363303931662d666639352d373830652d333933622d3965386465656234376462612e706e67" target="_blank" rel="nofollow noopener"><img width="386" alt="publish.png" src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2Ff63c091f-ff95-780e-393b-9e8deeb47dba.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=60bbad1fb870e8b35b8430470f7c320d" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/132297/f63c091f-ff95-780e-393b-9e8deeb47dba.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2Ff63c091f-ff95-780e-393b-9e8deeb47dba.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=2957716e82b00747ed0f6ad274f4f20a 1x" loading="lazy"></a></p>

<ul>
<li>Azure App Serviceを選択</li>
</ul>

<p><a href="https://camo.qiitausercontent.com/2e9ea5890d98f5330f2d88c727bda97b58e07db0/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3133323239372f36353166383337302d616232642d666665312d363239342d3637653966643562383936362e706e67" target="_blank" rel="nofollow noopener"><img width="530" alt="public2.png" src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F651f8370-ab2d-ffe1-6294-67e9fd5b8966.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=2e95ee32260da6886793942c5c7a70b7" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/132297/651f8370-ab2d-ffe1-6294-67e9fd5b8966.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F651f8370-ab2d-ffe1-6294-67e9fd5b8966.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=6814adf66c318547e38089c0b5a98576 1x" loading="lazy"></a></p>

<ul>
<li>App Serviceの項目を埋める</li>
</ul>

<ol>
<li>「アカウントの追加」からマイクロソフトアカウントを設定</li>
<li> 自分のサブスクリプションを選択</li>
<li> 既にApp Serviceを作っていたらそれを選びます、なければ「新規作成」を選択</li>
</ol>

<p><a href="https://camo.qiitausercontent.com/a5ae1326bd1df3ebfbf15c2427aa98baa260d1dc/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3133323239372f34353232323864312d613661372d656634612d333531342d6263383465356236373435332e706e67" target="_blank" rel="nofollow noopener"><img width="600" alt="public3.png" src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F452228d1-a6a7-ef4a-3514-bc84e5b67453.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=abb46d905ee1ed1c24f4904e7191afe1" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/132297/452228d1-a6a7-ef4a-3514-bc84e5b67453.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F452228d1-a6a7-ef4a-3514-bc84e5b67453.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=82cae40e19d11edd5e41a66e7eab2917 1x" loading="lazy"></a></p>

<p>　「種類の変更」でWeb Appに変更してください。リソースグループとプランを作成してない方はここでそれぞれ「新規作成」してください。<br>
<a href="https://camo.qiitausercontent.com/4b40a5d5e7b78cc683a55eb3b83718d79cde7f80/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3133323239372f38336435346462302d306562382d396465622d316565632d3366343563363136353738392e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F83d54db0-0eb8-9deb-1eec-3f45c6165789.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=2718e0ad5c363af088c2fbebc4486faf" alt="create_app_service.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/132297/83d54db0-0eb8-9deb-1eec-3f45c6165789.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F83d54db0-0eb8-9deb-1eec-3f45c6165789.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=c42c98172f75e721a04b2154f5d09fad 1x" loading="lazy"></a></p>

<p>　無料で使いたい人はプラン内で「無料」プランを選んでください。<br>
<a href="https://camo.qiitausercontent.com/2c65e3d030b550cc0e5fe4d814432f8b6c4e3714/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3133323239372f62373664386537372d306431342d613663322d396135622d3064313539373931326537362e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2Fb76d8e77-0d14-a6c2-9a5b-0d1597912e76.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=59efbc231df8a119ff2c363a65593d50" alt="plan_dialog.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/132297/b76d8e77-0d14-a6c2-9a5b-0d1597912e76.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2Fb76d8e77-0d14-a6c2-9a5b-0d1597912e76.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=66cb731ef061d9b9c9b5e20457b27777 1x" loading="lazy"></a><br>
4. App Serviceを選んで「OK」すると、デプロイ画面になります。設定値は既に埋まってるので、「発行」でデプロイしてください。</p>

<p><a href="https://camo.qiitausercontent.com/a3b1a426ea3ba4801d80a02d1baef2d04acb675a/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3133323239372f64356235613034642d316533322d633433392d373832322d3664326365376163306331652e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2Fd5b5a04d-1e32-c439-7822-6d2ce7ac0c1e.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=1b3bc77f6655851430cc7b7f2a3da5d5" alt="deploy_new.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/132297/d5b5a04d-1e32-c439-7822-6d2ce7ac0c1e.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2Fd5b5a04d-1e32-c439-7822-6d2ce7ac0c1e.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=2298529605c88eb99d68a79b611301f5 1x" loading="lazy"></a><br>
5. 「宛先URL」でローカルの時と同じページが開きます。次の登録処理で使うので、アドレスバーの値はコピーしておいてください。</p>

<p><a href="https://camo.qiitausercontent.com/95de676c66be08f7a9873e847b9a1ccfa298bc73/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3133323239372f30313036316261342d393531622d633035372d313633652d6433663535313165623930362e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F01061ba4-951b-c057-163e-d3f5511eb906.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=379f525e17a5ba6b16e18a215a9f165a" alt="hosted_to_azure.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/132297/01061ba4-951b-c057-163e-d3f5511eb906.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F01061ba4-951b-c057-163e-d3f5511eb906.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=af5d7a835b0e86cb01144a51d9693bc1 1x" loading="lazy"></a></p>

<p>　Visual Studioの「Azure App Serviceのアクティビティ」ウィンドウで発行状況を確認します。</p>

<p><a href="https://camo.qiitausercontent.com/53b53ecb504671ba8face69b602cd270b0236626/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3133323239372f38306330373739312d373031352d383235302d316363302d3931343735373033356137352e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F80c07791-7015-8250-1cc0-914757035a75.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=1a8c0c1706c9851b29980a02517589f5" alt="deploy_success.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/132297/80c07791-7015-8250-1cc0-914757035a75.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F80c07791-7015-8250-1cc0-914757035a75.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=0ee8fe3c9aaaf6a98b45afba2d973b0f 1x" loading="lazy"></a></p>

<p>　これでデプロイ完了です。</p>

<h3>
<span id="公式サイトdeveloper-portalへ登録設定公開" class="fragment"></span><a href="#%E5%85%AC%E5%BC%8F%E3%82%B5%E3%82%A4%E3%83%88developer-portal%E3%81%B8%E7%99%BB%E9%8C%B2%E8%A8%AD%E5%AE%9A%E5%85%AC%E9%96%8B"><i class="fa fa-link"></i></a>公式サイト（Developer Portal）へ登録・設定・（公開）</h3>

<p>　デプロイをしたら、今度はBot Frameworkの公式サイトに登録します。これをする事で各種SNSサービスとの連携やBotの設定をブラウザから行う事ができるようになります。この公式サイトのサービスの事をBot FrameworkではDeveloper Portalと呼びます（v3から。v1ではBot Connectorと呼ばれ、担当範囲も少し違いました）。</p>

<h4>
<span id="登録の流れ" class="fragment"></span><a href="#%E7%99%BB%E9%8C%B2%E3%81%AE%E6%B5%81%E3%82%8C"><i class="fa fa-link"></i></a>登録の流れ</h4>

<ol>
<li>
<a href="https://dev.botframework.com/" rel="nofollow noopener" target="_blank">公式ページ</a>へ飛び、右上の「Sign in」からマイクロソフトアカウントでログインします。</li>
<li>上部メニューから「Register a bot（Botを登録）」を選択します。</li>
<li>Botの情報を入力します。</li>
<li>登録の前にMicrosoft App Idを作成します。</li>
<li>登録。</li>
</ol>

<h4>
<span id="botの登録情報" class="fragment"></span><a href="#bot%E3%81%AE%E7%99%BB%E9%8C%B2%E6%83%85%E5%A0%B1"><i class="fa fa-link"></i></a>Botの登録情報</h4>

<p>　各項目の和訳と説明です。*は必須項目。<br>
<strong>※v3アップデートで、設定項目に変更がありました。</strong></p>

<h5>
<span id="bot-profilebot情報" class="fragment"></span><a href="#bot-profilebot%E6%83%85%E5%A0%B1"><i class="fa fa-link"></i></a>Bot profile（Bot情報）</h5>

<table>
<thead>
<tr>
<th style="text-align: center">項目</th>
<th style="text-align: center">項目の和訳</th>
<th style="text-align: center">説明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center">*Name</td>
<td style="text-align: center">名前</td>
<td style="text-align: center">Botの表示名。35文字以内。</td>
</tr>
<tr>
<td style="text-align: center">*Bot handle</td>
<td style="text-align: center">Botのハンドル</td>
<td style="text-align: center">Urlに使われる。英数字+_（アンダースコア）のみ。後で変更不可。</td>
</tr>
<tr>
<td style="text-align: center">*Description</td>
<td style="text-align: center">説明</td>
<td style="text-align: center">Botの説明。</td>
</tr>
</tbody>
</table>

<h5>
<span id="configuration設定" class="fragment"></span><a href="#configuration%E8%A8%AD%E5%AE%9A"><i class="fa fa-link"></i></a>Configuration（設定）</h5>

<table>
<thead>
<tr>
<th style="text-align: center">項目</th>
<th style="text-align: center">項目の和訳</th>
<th style="text-align: center">説明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center">Messaging endpoint</td>
<td style="text-align: center">メッセージエンドポイント</td>
<td style="text-align: center">メッセージの送受信をさせるRestのエンドポイント。</td>
</tr>
<tr>
<td style="text-align: center">*Microsoft App ID</td>
<td style="text-align: center">MicrosoftアプリID</td>
<td style="text-align: center">後述。</td>
</tr>
</tbody>
</table>

<p>　Message endpointには<strong>公開時に表示されたページのアドレス + 後ろに/api/messagesを追記したものを入力してください</strong>。</p>

<h5>
<span id="publisher-profile公開者情報" class="fragment"></span><a href="#publisher-profile%E5%85%AC%E9%96%8B%E8%80%85%E6%83%85%E5%A0%B1"><i class="fa fa-link"></i></a>Publisher profile（公開者情報）</h5>

<table>
<thead>
<tr>
<th style="text-align: center">項目</th>
<th style="text-align: center">項目の和訳</th>
<th style="text-align: center">説明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center">*Publisher name</td>
<td style="text-align: center">公開者名</td>
<td style="text-align: center">-</td>
</tr>
<tr>
<td style="text-align: center">*Publisher Email</td>
<td style="text-align: center">公開者メールアドレス</td>
<td style="text-align: center">-</td>
</tr>
<tr>
<td style="text-align: center">*Privacy statement</td>
<td style="text-align: center">プライバシーポリシー</td>
<td style="text-align: center">Botのプライバシーポリシーが記載されているURL。</td>
</tr>
<tr>
<td style="text-align: center">*Term of Use</td>
<td style="text-align: center">利用規約</td>
<td style="text-align: center">Botの利用規約が記載されているURL。</td>
</tr>
<tr>
<td style="text-align: center">Bot website</td>
<td style="text-align: center">Botのホームページ</td>
<td style="text-align: center">-</td>
</tr>
<tr>
<td style="text-align: center">Hashtags</td>
<td style="text-align: center">ハッシュタグ</td>
<td style="text-align: center">コンマ区切り。具体的な意味は未調査。</td>
</tr>
<tr>
<td style="text-align: center">Languages</td>
<td style="text-align: center">言語</td>
<td style="text-align: center">ISO-639-1で指定（日本語はja）。コンマ区切り。具体的な意味は未調査。</td>
</tr>
<tr>
<td style="text-align: center">Default Conversation Language</td>
<td style="text-align: center">デフォルトの会話言語</td>
<td style="text-align: center">ISO-639-1で指定。</td>
</tr>
</tbody>
</table>

<h5>
<span id="admin管理" class="fragment"></span><a href="#admin%E7%AE%A1%E7%90%86"><i class="fa fa-link"></i></a>Admin（管理）</h5>

<table>
<thead>
<tr>
<th style="text-align: center">項目</th>
<th style="text-align: center">項目の和訳</th>
<th style="text-align: center">説明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center">Owners</td>
<td style="text-align: center">所有者</td>
<td style="text-align: center">Botを編集できる人のリスト。コンマ区切り。</td>
</tr>
<tr>
<td style="text-align: center">Azure App Insights key</td>
<td style="text-align: center">Azure App Insightsキー</td>
<td style="text-align: center">キーを設定すればBotの解析結果が送られてくる。</td>
</tr>
</tbody>
</table>

<h4>
<span id="micosoft-app-idの作成" class="fragment"></span><a href="#micosoft-app-id%E3%81%AE%E4%BD%9C%E6%88%90"><i class="fa fa-link"></i></a>Micosoft App Idの作成</h4>

<p>　登録する前にMicosoft App Idを作成します。<br>
1. 「Create Microsoft App ID and password」と書かれたボタンを押してください。<br>
<a href="https://camo.qiitausercontent.com/b3eb2fb1b465a3524a316818527dde639aa05fa4/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3133323239372f31323632636661342d363835652d343437652d613666362d3733626261613665366239372e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F1262cfa4-685e-447e-a6f6-73bbaa6e6b97.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=64515e7dcf5ddf692e79a4fd64fe03ff" alt="create_ms_app_id.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/132297/1262cfa4-685e-447e-a6f6-73bbaa6e6b97.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F1262cfa4-685e-447e-a6f6-73bbaa6e6b97.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=624ce43de9c8f70e2230ddcef0455692 1x" loading="lazy"></a><br>
2. 自動的に設定値が決められます。「Generate a password to continue」ボタンを押してください。<br>
<a href="https://camo.qiitausercontent.com/3ee985be8a4725f78edffc3c693b00386520fa84/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3133323239372f65646231313161302d363838642d643061362d613833302d3964333562313131393833622e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2Fedb111a0-688d-d0a6-a830-9d35b111983b.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=2f1dd5eecf9044018723e7830a6095a5" alt="generate_a_password.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/132297/edb111a0-688d-d0a6-a830-9d35b111983b.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2Fedb111a0-688d-d0a6-a830-9d35b111983b.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=87b600c11cd9453be423cacdbbfce471 1x" loading="lazy"></a><br>
3. パスワードが表示されます。この時だけしか表示されないのでコピーして、セキュリティ的に安全な所で保管してください。なお、忘れたり流出などした場合、ここで削除して作り直せばいいと思います。<br>
<a href="https://camo.qiitausercontent.com/2733103e0a6652e14ef29231aff64d38fda57e13/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3133323239372f34323936643038362d363932662d343733312d353639352d6566633465626566656163642e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F4296d086-692f-4731-5695-efc4ebefeacd.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=4d52df73a9343d9ee8955f02af663bcf" alt="new_password_generated.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/132297/4296d086-692f-4731-5695-efc4ebefeacd.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F4296d086-692f-4731-5695-efc4ebefeacd.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=4e7a0cf38ccb3491f451c867d8124a39 1x" loading="lazy"></a><br>
4. 「Finish and go back to Bot Framework」ボタンを押します。登録画面には自動的にさきほどのIDが入力されているはずです。<br>
<a href="https://camo.qiitausercontent.com/4bf5be680e7b114d15f89f27fd364a05507c67eb/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3133323239372f39323238373630302d666464332d303334312d666332342d3231643733623130363430392e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F92287600-fdd3-0341-fc24-21d73b106409.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=8d7245e18408461fefabfe7de408dbeb" alt="generate_a_password2.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/132297/92287600-fdd3-0341-fc24-21d73b106409.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F92287600-fdd3-0341-fc24-21d73b106409.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=6ca9e03e2150540a738d34436d13d91e 1x" loading="lazy"></a></p>

<h4>
<span id="登録" class="fragment"></span><a href="#%E7%99%BB%E9%8C%B2"><i class="fa fa-link"></i></a>登録</h4>

<p>　「Register」ボタンで登録できます。なお登録あたっては、マイクロソフトが提示するプライバシーポリシー・利用規約・行動模範を確認、内容に同意した上で行ってください。</p>

<h4>
<span id="アプリidとアプリキーの設定" class="fragment"></span><a href="#%E3%82%A2%E3%83%97%E3%83%AAid%E3%81%A8%E3%82%A2%E3%83%97%E3%83%AA%E3%82%AD%E3%83%BC%E3%81%AE%E8%A8%AD%E5%AE%9A"><i class="fa fa-link"></i></a>アプリIDとアプリキーの設定</h4>

<p><strong>※v3よりAppIdはMicrosoftAppId、AppSecretはMicrosoftAppPasswordに変更されました</strong></p>

<p>　Bot登録が完了したらVisual Studioを開きなおし、先ほど登録したBot Id（Bot handle）/Microsoft App ID/Microsoft App Passwordをプロジェクト内にある「Web.config」というファイルに反映させます。<br>
　設定値が分からなくなった場合、ポータルの「My Bots」ページからBotの管理画面に行く事ができるので、そこから確認する事ができます（パスワードは無理）。</p>

<div class="code-frame" data-lang="xml"><div class="highlight"><pre class="with-code"><code><span class="nt">&lt;appSettings&gt;</span>
    <span class="c">&lt;!-- update these with your BotId, Microsoft App Id and your Microsoft App Password--&gt;</span>
    <span class="nt">&lt;add</span> <span class="na">key=</span><span class="s">"BotId"</span> <span class="na">value=</span><span class="s">"&lt;ここにBot ID(Bot handle)&gt;"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;add</span> <span class="na">key=</span><span class="s">"MicrosoftAppId"</span> <span class="na">value=</span><span class="s">"&lt;ここにMicrosoft App ID&gt;"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;add</span> <span class="na">key=</span><span class="s">"MicrosoftAppPassword"</span> <span class="na">value=</span><span class="s">"&lt;ここにMicrosoft App Password&gt;"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/appSettings&gt;</span>
</code></pre></div></div>

<h4>
<span id="接続確認" class="fragment"></span><a href="#%E6%8E%A5%E7%B6%9A%E7%A2%BA%E8%AA%8D"><i class="fa fa-link"></i></a>接続確認</h4>

<p>　Botへの接続テストを管理画面から行えます。</p>

<p>　左下の「Test connection to your bot（Botへの接続テスト）」というテキストの下の「Test」ボタンを押します。「Endpoint authorization suceeded（エンドポイントへの認証成功）」が出てくれば接続テスト成功です。</p>

<p><a href="https://camo.qiitausercontent.com/84afb2e3f5e85b904cce7e09d62da15e2762bec7/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3133323239372f61386632653730392d396332322d633830312d663730622d6130323932393238313837332e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2Fa8f2e709-9c22-c801-f70b-a02929281873.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=29ea51724905b03fc2759b0f1d82e6a5" alt="bot_connection_success.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/132297/a8f2e709-9c22-c801-f70b-a02929281873.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2Fa8f2e709-9c22-c801-f70b-a02929281873.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=372222006419e61e6b70f874cf847ecd 1x" loading="lazy"></a></p>

<h4>
<span id="公開任意" class="fragment"></span><a href="#%E5%85%AC%E9%96%8B%E4%BB%BB%E6%84%8F"><i class="fa fa-link"></i></a>公開（任意）</h4>

<p>　管理画面の右上にある「Publish」を押すと、マイクロソフトへレビュー申請がされ、合格するとBotが公開されます。公開されると他の人が利用したりできるようですが、やってないので詳細は分からないです。公開したくない場合はしなくていいです。</p>

<h3>
<span id="facebook連携" class="fragment"></span><a href="#facebook%E9%80%A3%E6%90%BA"><i class="fa fa-link"></i></a>Facebook連携</h3>

<p>　Bot Frameworkでは各種外部サービスなどと連携する事ができます。Bot Frameworkではこれらの外部サービスの事を<strong>チャンネル</strong>と呼んでいます。</p>

<p><a href="https://camo.qiitausercontent.com/76d706bac0f587719a13be732e83e6bbe002c881/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3133323239372f35346163626463382d636138612d646435642d653433382d3236656263376165653862632e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F54acbdc8-ca8a-dd5d-e438-26ebc7aee8bc.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=fa09b54b42e9a79680cdade0c73c54d4" alt="channels.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/132297/54acbdc8-ca8a-dd5d-e438-26ebc7aee8bc.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F54acbdc8-ca8a-dd5d-e438-26ebc7aee8bc.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=5b9cbf8e99db804c1a0f20a80ab5d320 1x" loading="lazy"></a></p>

<p>　日本では見慣れないサービスも多いですね。せめてTwitterがあればよいのですが、まぁこれは後から来るでしょう（LINEはおそらく無理でしょうか）。<br>
　今回はFacebootと連携してみましょう。</p>

<p>※Bot Framework側もFacebook側も設定画面は変化が激しい部分なので、柔軟に対応してください。</p>

<h4>
<span id="準備-1" class="fragment"></span><a href="#%E6%BA%96%E5%82%99-1"><i class="fa fa-link"></i></a>準備</h4>

<p>　Facebookの開発者アカウントを作成してください。<a href="https://developers.facebook.com" rel="nofollow noopener" target="_blank">こちら</a>から作成してください。</p>

<h4>
<span id="設定の流れ" class="fragment"></span><a href="#%E8%A8%AD%E5%AE%9A%E3%81%AE%E6%B5%81%E3%82%8C"><i class="fa fa-link"></i></a>設定の流れ</h4>

<ol>
<li>ポータルでFacebook Messengerチャネルを追加するを選び、設定画面を開く。</li>
<li>Facebookページを作成する。ページIDを控える。</li>
<li>Facebook Appを作る。AppのIdとシークレットを控える。</li>
<li>1で開いた設定画面からBot Frameworkが使うコールバックUrlと検証トークンを入手し、それをFacebook Appに設定する。</li>
<li>Facebookページへのアクセストークンを生成し、控える。</li>
<li>1で開いた設定画面に2、3、5の値を入力する</li>
<li>設定を反映。</li>
</ol>

<h4>
<span id="設定画面" class="fragment"></span><a href="#%E8%A8%AD%E5%AE%9A%E7%94%BB%E9%9D%A2"><i class="fa fa-link"></i></a>設定画面</h4>

<p>　まずBotの管理画面で、「Facebook Messenger」項目にある「Add」をクリックしてください。FacebookMessengerの設定画面が開きます。</p>

<p><a href="https://camo.qiitausercontent.com/afc4e94c92340d81a59dd03e995d18aac515625c/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3133323239372f38356536653666362d326132302d613239352d613038322d3731366330656164393734302e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F85e6e6f6-2a20-a295-a082-716c0ead9740.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=1226d7ed6b718d5fc10545d84785c59b" alt="Configure Facebook Messenger.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/132297/85e6e6f6-2a20-a295-a082-716c0ead9740.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F85e6e6f6-2a20-a295-a082-716c0ead9740.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=c787b0e46e744cf526fd3fbe01e154a6 1x" loading="lazy"></a></p>

<h4>
<span id="botが動くfacebookページを作成する" class="fragment"></span><a href="#bot%E3%81%8C%E5%8B%95%E3%81%8Ffacebook%E3%83%9A%E3%83%BC%E3%82%B8%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>Botが動くFacebookページを作成する</h4>

<p>　ここでいう「ページ」とは、主に企業のブランドやコミュニティの為の場を提供するFacebookのサービスを指します。詳細は「facebook page」で適当にググってください。</p>

<p>　<a href="https://www.facebook.com/pages/create" rel="nofollow noopener" target="_blank">ページ作成画面</a>に行ってください。</p>

<p><a href="https://camo.qiitausercontent.com/573d042b25c6f9990d25308e6d4c6e30f2f3b46a/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3133323239372f66626539363337332d666164392d313535312d343161612d3463343032633639306236652e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2Ffbe96373-fad9-1551-41aa-4c402c690b6e.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=824a101962d65f6e9bae73c14d5d676c" alt="page_create.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/132297/fbe96373-fad9-1551-41aa-4c402c690b6e.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2Ffbe96373-fad9-1551-41aa-4c402c690b6e.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=b4ada8114fc66dd0f9c471b6ab85db80 1x" loading="lazy"></a></p>

<p>　作りたいBotにあった項目を選んで、ページを作ってください。<br>
　ページができたら、作成したページに行き、左サイドメニューから「基本データ」を選んでください。「<strong>FacebookページID</strong>」という項目があるので、これを控えておいてください。後で使います。</p>

<p><a href="https://camo.qiitausercontent.com/cb0dd8e6485b9f297af081f1475bd4ac44c4aedd/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3133323239372f65393730353732632d373166622d663837632d313864362d3938663732666264373963622e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2Fe970572c-71fb-f87c-18d6-98f72fbd79cb.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=b499ffd93839670cb8c0ee2c321ab109" alt="page_id.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/132297/e970572c-71fb-f87c-18d6-98f72fbd79cb.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2Fe970572c-71fb-f87c-18d6-98f72fbd79cb.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=ffb8b9e519765559fd7ae5cf19544a4f 1x" loading="lazy"></a></p>

<h4>
<span id="facebook-appを作成する" class="fragment"></span><a href="#facebook-app%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>Facebook Appを作成する</h4>

<p>　Botを利用するために、Facebook Appを作成します。<br>
　現時点では<a href="https://developers.facebook.com/quickstarts/?platform=web" rel="nofollow noopener" target="_blank">こちらのリンク</a>からいけます。</p>

<p><a href="https://camo.qiitausercontent.com/19e3bf4700bea991f97179149a82f701abc560ef/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3133323239372f36626262646165302d396333322d356639642d386534632d6234373534363162663465362e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F6bbbdae0-9c32-5f9d-8e4c-b475461bf4e6.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=116ba63136b2f340e1547f8ff5563bc9" alt="fb_app_start.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/132297/6bbbdae0-9c32-5f9d-8e4c-b475461bf4e6.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F6bbbdae0-9c32-5f9d-8e4c-b475461bf4e6.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=96f274c2a3cf4d8a78bd7712e53ea877 1x" loading="lazy"></a></p>

<p>　右上の「Skip and Create App ID」をクリックします。</p>

<p><a href="https://camo.qiitausercontent.com/146362431e913027c09e36e075157e2d92aa7e89/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3133323239372f38393533326537632d336461322d343739612d326235332d3337396637626362353831642e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F89532e7c-3da2-479a-2b53-379f7bcb581d.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=f6c080667aefeee51123f5ed267c902f" alt="fb_app_create_id.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/132297/89532e7c-3da2-479a-2b53-379f7bcb581d.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F89532e7c-3da2-479a-2b53-379f7bcb581d.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=350b3f9f170a6d09e304575773ea3234 1x" loading="lazy"></a></p>

<p>　アプリの作成を求められるので、埋めて作成してください。<br>
　アプリを作成したら、ダッシュボードに行き、そこで表示されるApp Idとシークレットを控えてください。</p>

<p><a href="https://camo.qiitausercontent.com/4daa129e2a3f5a62e69b9a7b08b33d9c5db390c8/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3133323239372f64363565356630362d306464612d343235362d343239382d6162323462393631386163642e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2Fd65e5f06-0dda-4256-4298-ab24b9618acd.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=4fa64987f75b9d22d8e57f414871a136" alt="fb_appid.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/132297/d65e5f06-0dda-4256-4298-ab24b9618acd.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2Fd65e5f06-0dda-4256-4298-ab24b9618acd.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=de1fa528e54aab46a21629a37ceba864 1x" loading="lazy"></a></p>

<h4>
<span id="ウェブフック用のコールバックurlと検証トークンを設定" class="fragment"></span><a href="#%E3%82%A6%E3%82%A7%E3%83%96%E3%83%95%E3%83%83%E3%82%AF%E7%94%A8%E3%81%AE%E3%82%B3%E3%83%BC%E3%83%AB%E3%83%90%E3%83%83%E3%82%AFurl%E3%81%A8%E6%A4%9C%E8%A8%BC%E3%83%88%E3%83%BC%E3%82%AF%E3%83%B3%E3%82%92%E8%A8%AD%E5%AE%9A"><i class="fa fa-link"></i></a>ウェブフック用のコールバックURLと検証トークンを設定</h4>

<p>　Bot FrameworkのFacebook Messengerチャンネル追加画面に行き、「Set webhook callback url and verify token」を展開して、「Callback Url」と「Verify Token」を控えてください。</p>

<p><a href="https://camo.qiitausercontent.com/bfa3c224f097773acc50e36622626eef7a19ab16/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3133323239372f66393962636164392d303964312d363038622d623866302d3837623435356532633830612e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2Ff99bcad9-09d1-608b-b8f0-87b455e2c80a.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=47bd5a5eb21c61a19366e59e4acb8546" alt="fb_webhook.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/132297/f99bcad9-09d1-608b-b8f0-87b455e2c80a.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2Ff99bcad9-09d1-608b-b8f0-87b455e2c80a.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=a09ff8c3ce72533e3448c41c06018fc7 1x" loading="lazy"></a></p>

<p>　Facebook Appの管理画面に行き、左メニューから「+製品の追加」を選び、メインページに出てくるリストの中から「Webhooks」を選んでください。Webhooksのページで「新しいフォロー」を選び「Page」を選びます。</p>

<p>　そうすると、Webhookの設定画面で出てくるので、Bot Frameworkの管理画面で控えておいた、コールバックUrlと検証トークンを入れます。そして、フォロー入力欄で<br>
* message_deliveries<br>
* messages<br>
* messaging_optins<br>
* messaging_postbacks<br>
の4項目にチェックを入れます。</p>

<p><a href="https://camo.qiitausercontent.com/1e515ffa52ebc3b9fd7ad35a96508ad54c6a5e0c/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3133323239372f35613330663063332d316632392d633932622d363639622d6431633563666636326638632e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F5a30f0c3-1f29-c92b-669b-d1c5cff62f8c.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=bbb18ad1c6d56086b6c5e4af638e6735" alt="fb_callback.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/132297/5a30f0c3-1f29-c92b-669b-d1c5cff62f8c.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F5a30f0c3-1f29-c92b-669b-d1c5cff62f8c.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=f355fb940bd8bb145e4eae749ddaaf2d 1x" loading="lazy"></a></p>

<p>　この操作により、ページ中でメッセージを利用した場合、Facebook側からあなたのBotへ処理を引き渡すことが可能になります。</p>

<h4>
<span id="ページへのアクセストークンを発行する" class="fragment"></span><a href="#%E3%83%9A%E3%83%BC%E3%82%B8%E3%81%B8%E3%81%AE%E3%82%A2%E3%82%AF%E3%82%BB%E3%82%B9%E3%83%88%E3%83%BC%E3%82%AF%E3%83%B3%E3%82%92%E7%99%BA%E8%A1%8C%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>ページへのアクセストークンを発行する</h4>

<p>　Botからページにアクセルするためのトークを発行します。<br>
　Facebook Appの管理画面から「+製品の追加」を選び「Messenger」を選択、出てくる説明を読んでから「スタート」を押します。<br>
　すると、Messengerの画面が出るので、「トークン生成」メニューから上の方で作ったページを選びトークンを生成してください。トークンは後で使うので、控えてください。</p>

<p><a href="https://camo.qiitausercontent.com/9a6c7f908c2f047db20d9853e116a66405701acd/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3133323239372f36616537646435392d656334382d306137392d333136382d6563373461323537636338362e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F6ae7dd59-ec48-0a79-3168-ec74a257cc86.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=3b77dd968be401b588cb48d5583a33f9" alt="fb_page_accesstoken.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/132297/6ae7dd59-ec48-0a79-3168-ec74a257cc86.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F6ae7dd59-ec48-0a79-3168-ec74a257cc86.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=1c045cafe23efd2789f77022424bfb40 1x" loading="lazy"></a></p>

<h4>
<span id="資格情報を入力" class="fragment"></span><a href="#%E8%B3%87%E6%A0%BC%E6%83%85%E5%A0%B1%E3%82%92%E5%85%A5%E5%8A%9B"><i class="fa fa-link"></i></a>資格情報を入力</h4>

<p>　再びBot FrameworkのFacebook Messengerチャンネル追加画面に行き、「Enter your credentials（資格情報を入力）」を展開します。ここに控えておいた4つの値を入力します。</p>

<p><a href="https://camo.qiitausercontent.com/37bc9cf85b9d0d4928a41ec9e01e128d77e882ad/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3133323239372f65656436613864642d626535612d643766652d316438372d3434386566326436393732352e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2Feed6a8dd-be5a-d7fe-1d87-448ef2d69725.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=a7c03f909890fe5c66e2ce63730d5ffb" alt="fb_credentials.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/132297/eed6a8dd-be5a-d7fe-1d87-448ef2d69725.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2Feed6a8dd-be5a-d7fe-1d87-448ef2d69725.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=bd2ef516c118b029b5401fac55d73c7f 1x" loading="lazy"></a></p>

<p>　入力したら「Resubmit」を押してください。「Credentials have been validated（資格情報の検証が完了しました）」と表示されれば成功です。</p>

<p><a href="https://camo.qiitausercontent.com/074dbb773f1ae2c5c4f9e83c22c62ce0ada7086d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3133323239372f65363963303764332d306561352d646632302d623965332d3464323634663036646661612e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2Fe69c07d3-0ea5-df20-b9e3-4d264f06dfaa.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=05706f6e8a5b75714120b83b169340e7" alt="fb_credentials2.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/132297/e69c07d3-0ea5-df20-b9e3-4d264f06dfaa.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2Fe69c07d3-0ea5-df20-b9e3-4d264f06dfaa.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=3712cc8c2dbd33584a19327dad35d31c 1x" loading="lazy"></a></p>

<h4>
<span id="設定登録" class="fragment"></span><a href="#%E8%A8%AD%E5%AE%9A%E7%99%BB%E9%8C%B2"><i class="fa fa-link"></i></a>設定登録</h4>

<p>　「Enable this bot on Facebook Messenger（Facebook MessengerでBotを有効化する）」にチェックを入れます。使用を止める時はここをオフにすれば、設定を残したまま無効化できるはずです（検証はしてないです）。<br>
　最後に「I'm done configuring Facebook Messenger（Facebook Messengerの設定を終えました）」を押せば設定完了です。</p>

<p>　Botの管理画面でチャンネルのところFacebook Messengerがあり、Statusが「Running（実行中）」になっているのを確認してください。</p>

<h4>
<span id="利用" class="fragment"></span><a href="#%E5%88%A9%E7%94%A8"><i class="fa fa-link"></i></a>利用</h4>

<p>　それでは実際に動いている所を見てみましょう。</p>

<p>　作成したFacebookのページに行きます。「メッセージ」を押して会話を始めます。</p>

<p><a href="https://camo.qiitausercontent.com/4d6b465de0589f7166be735d1c73fc72a158b0bd/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3133323239372f63633033353337622d613763662d666434312d393461392d6539376338346633323430352e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2Fcc03537b-a7cf-fd41-94a9-e97c84f32405.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=14dbd61469a5bb87b268d50301b90e57" alt="facebook_message_test.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/132297/cc03537b-a7cf-fd41-94a9-e97c84f32405.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2Fcc03537b-a7cf-fd41-94a9-e97c84f32405.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=ac073cd4a81073de5aadfdd444ba3b10 1x" loading="lazy"></a></p>

<p><a href="https://camo.qiitausercontent.com/0b8f24abd1c049cfc943f98eec70fab0bb47737e/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3133323239372f61346436313061362d306132362d663735612d646436322d3232343838646230303366312e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2Fa4d610a6-0a26-f75a-dd62-22488db003f1.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=ea451de5c73751fac3c63483513df2fa" alt="bot answer.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/132297/a4d610a6-0a26-f75a-dd62-22488db003f1.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2Fa4d610a6-0a26-f75a-dd62-22488db003f1.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=593b536a20390ce1553b919e143f66fb 1x" loading="lazy"></a></p>

<p>　できました！<br>
　グレートですよこれは。</p>

<h1>
<span id="まとめ" class="fragment"></span><a href="#%E3%81%BE%E3%81%A8%E3%82%81"><i class="fa fa-link"></i></a>まとめ</h1>

<p>　これで目標通り、簡単なBotを作って外部サービスと連携することができるようになりました。<br>
　あとはプログラミング次第で色々できるのではないかと思います。</p>

<p>　なお、今回は触れませんでしたがBot Frameworkには<strong>Bot Builder</strong>というBot構築のためのライブラリがあり、会話を統一的に実装できるようになるとかなんとかだそうです（まだよく調べていないです）。また、Botに自然言語での会話機能を組み込みたいというニーズのために、Microsoft Coginitive Serviceの1つである<a href="https://www.luis.ai/Home" rel="nofollow noopener" target="_blank">LUIS</a>というサービスと連携することもできます。</p>

<p>　初めての記事執筆で至らないこともあると思いますが、何かの役に立てれば幸いです。<br>
　ではでは。</p>

<h1>
<span id="参考" class="fragment"></span><a href="#%E5%8F%82%E8%80%83"><i class="fa fa-link"></i></a>参考</h1>

<ul>
<li><a href="http://docs.botframework.com/" rel="nofollow noopener" target="_blank">公式ドキュメント</a></li>
</ul>

<div class="footnotes">
<hr>
<ol>

<li id="fn1">
<p><del><a href="http://docs.botframework.com/connector/message-types/#navtitle" class="autolink" rel="nofollow noopener" target="_blank">http://docs.botframework.com/connector/message-types/#navtitle</a></del> (v1のドキュメント) <a href="#fnref1">↩</a></p>
</li>

<li id="fn2">
<p><a href="http://docs.botframework.com/en-us/csharp/builder/sdkreference/activities.html#message" class="autolink" rel="nofollow noopener" target="_blank">http://docs.botframework.com/en-us/csharp/builder/sdkreference/activities.html#message</a> <a href="#fnref2">↩</a></p>
</li>

</ol>
</div>
</div></div></section><div class="css-1yzj1fm"><div class="css-1uv1qiv"><span class="fa fa-twitter"></span></div><div class="css-1uv1qiv"><span class="fa fa-facebook"></span></div></div><div class="apm-Content"><div class="apm-Content_title">Why not register and get more from Qiita?</div><ol class="apm-Content_list"><li>We will deliver articles that match you<div class="description">By following users and tags, you can catch up information on technical fields that you are interested in as a whole</div></li><li>you can read useful information later efficiently<div class="description">By &quot;stocking&quot; the articles you like, you can search right away</div></li><div><a class="apm-Content_help" href="https://help.qiita.com/ja/articles/qiita-login-user" target="_blank"><i class="fa fa-fw fa-arrow-circle-right"></i>What you can do with signing up</a></div></ol><a href="/signup?callback_action=login_or_signup&amp;redirect_to=%2Fymisono%2Fitems%2Fc6096fa62a68dda8001a&amp;realm=qiita" class="apm-Content_button apm-Content_button-signup">Sign up</a><a href="/login?callback_action=login_or_signup&amp;redirect_to=%2Fymisono%2Fitems%2Fc6096fa62a68dda8001a&amp;realm=qiita" class="apm-Content_button apm-Content_button-signin">Login</a></div></div><div class="css-helsa7"></div></div></div></div><div class="css-109dbrr"><div class="css-5jpx49"><div class="css-mnxgyc"><button class=" css-1vlpknv"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/ymisono/items/c6096fa62a68dda8001a/likers" class="css-1iupg5d">21</a></div><div class="css-fsjkhv"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-1b17vb0">23</span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-7i7f4d"><div class="css-1gj7nt">Improve article</div><a href="/drafts/c6096fa62a68dda8001a/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/ymisono/items/c6096fa62a68dda8001a/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/ymisono/items/c6096fa62a68dda8001a/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/ymisono/items/c6096fa62a68dda8001a/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/ymisono/items/c6096fa62a68dda8001a.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="PersonalArticlePage" data-dom-id="PersonalArticlePage-react-component-6bcafdbd-0ba2-479b-bfc5-76f0c6eae389">{"authorAnalyticsTrackingId":null,"organizationAnalyticsTrackingId":null}</script>
      
<footer id="globalFooter" class="st-Footer"><div class="st-Footer_container"><div class="st-Footer_start"><div class="st-Footer_logo"><svg viewbox="0 0 426.57 130" xmlns="http://www.w3.org/2000/svg"><circle cx="167.08" cy="21.4" r="12.28" /><path d="M250.81 29.66h23.48v18.9h-23.48z" /><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z" /><circle cx="216.33" cy="21.4" r="12.28" /></svg></div><div class="st-Footer_catchcopy">How developers code is here.</div><div class="st-Footer_socials"><a class="fa fa-twitter" href="https://twitter.com/qiita"></a><a class="fa fa-facebook-square" href="https://www.facebook.com/qiita/"></a></div></div><div class="st-Footer_end"><div class="st-Footer_qiita"><div class="st-Footer_label">Qiita</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="/about">About</a><a href="/terms">Terms</a><a href="/privacy">Privacy</a><a target="_blank" href="http://help.qiita.com/ja/articles/qiita-community-guideline">Guideline</a><a target="_blank" href="https://help.qiita.com/ja/articles/others-brand-guideline">Design Guideline</a></div><div class="st-Footer_column"><a href="/release-notes">Release</a><a href="/api/v2/docs">API</a><a href="/feedback/new">ご意見</a><a href="https://help.qiita.com">Help</a><a target="_blank" href="https://qiita.com/ads?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Advertisement</a></div></div></div><div class="st-Footer_increments"><div class="st-Footer_label">Increments</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="https://increments.co.jp/company/">About</a><a href="https://increments.co.jp/jobs/">採用情報</a><a href="https://blog.qiita.com">Blog</a></div><div class="st-Footer_column"><a href="https://teams.qiita.com/">Qiita Team</a><a href="https://jobs.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Jobs</a><a href="https://zine.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Zine</a></div></div></div></div></div><div class="st-Footer_copyright">© 2011-2021 Increments Inc.</div></footer><div id="Snackbar-react-component-d92ec363-d05c-46c7-b6c7-0c83647e166d"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="Snackbar" data-dom-id="Snackbar-react-component-d92ec363-d05c-46c7-b6c7-0c83647e166d">{}</script>
      
<div id="LoginModal-react-component-68aa3111-ab47-4c5a-bf10-10b41ff8e0b0"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="LoginModal" data-dom-id="LoginModal-react-component-68aa3111-ab47-4c5a-bf10-10b41ff8e0b0">{}</script>
      
<div id="StockModal-react-component-3223941f-b9e8-47f8-bcb2-79a4a37e46a0"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="StockModal" data-dom-id="StockModal-react-component-3223941f-b9e8-47f8-bcb2-79a4a37e46a0">{}</script>
      
</div><div id="dataContainer" style="display: none;" data-config="{&quot;actionPath&quot;:&quot;public/items#show&quot;,&quot;settings&quot;:{&quot;analyticsTrackingId&quot;:&quot;UA-24675221-12&quot;,&quot;assetsMap&quot;:{},&quot;csrfToken&quot;:&quot;hY8CH7pP5TXNQqTSzDOF1zH64DFVoOYPn9W0EpoTxJU3vxklrtHu35OKi4wvc+zD3sP4ewUCiu8BbYoOpgswsg==&quot;,&quot;locale&quot;:&quot;en&quot;},&quot;currentUser&quot;:null}" /></body></html><script type="application/json" data-js-react-on-rails-store="AppStoreWithReactOnRails">{"snackbar":{"type":"","body":"","isActive":false},"article":{"article":{"body":"\u003cp\u003e　やや話題に乗り遅れた感がありますが、\u003ca href=\"http://www.itmedia.co.jp/news/articles/1603/31/news063.html\" rel=\"nofollow noopener\" target=\"_blank\"\u003eマイクロソフトがBuild2016でBot Frameworkを発表しましたね\u003c/a\u003e。これを使えば簡単にBotを作れるようになるそうです。ほー。\u003cbr\u003e\n　Botといえば\u003ca href=\"https://twitter.com/bombtter\" rel=\"nofollow noopener\" target=\"_blank\"\u003eBombtter\u003c/a\u003eの印象しかない私ですが、いつの間にやら世間的には次のステージへ到達しているようですね。\u003cbr\u003e\n　さて、このBot Frameworkですが触れ込み通り割と簡単にBotを作り始める事ができます。情報はまだ少ないですが公式のドキュメントがマイクロソフト製とは思えないくらい親切で充実しているので、これを読むだけなんとかなります。が、残念なことに現時点では英語しかありません。\u003cbr\u003e\n　\u003cstrong\u003eそ・こ・で\u003c/strong\u003e\u003cbr\u003e\n　せっかくなので、Bot Frameworkを使いたいけど公式ドキュメントは読みたくないぞ、という方向けに入門記事を書きたいと思います。パチパチ。\u003c/p\u003e\n\n\u003cp\u003e　\u003cstrong\u003e記事を執筆中にBot Frameworkがv3へと更新されました。\u003c/strong\u003e\u003cdel\u003e何てタイミングにやってんだこのヤロー。\u003c/del\u003e記事でもv3の内容を反映しました\u003cdel\u003e（スクショの取り直し面倒くせぇ）\u003c/del\u003e。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"目標\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E7%9B%AE%E6%A8%99\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e目標\u003c/h2\u003e\n\n\u003cp\u003e　オウム返し + αをする簡単なbotをBot Frameworkを使って作れるようにする。さらに、それを外部サービス（Facebook）と連携させてみる。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"前提\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%89%8D%E6%8F%90\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e前提\u003c/h2\u003e\n\n\u003cul\u003e\n\u003cli\u003eC#の読み書きができる。\u003c/li\u003e\n\u003cli\u003eVisual Studioを使ったことがある。\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e　Bot FrameworkではC#とnode.jsが使えますが、この記事ではC# + Visual Studioを使います。\u003cbr\u003e\n　SNSとの連携とAzureへのデプロイもやりますが、その都度解説するので前提にはしません。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"準備\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%BA%96%E5%82%99\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e準備\u003c/h2\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"最新版のvisual-studioをインストール\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%9C%80%E6%96%B0%E7%89%88%E3%81%AEvisual-studio%E3%82%92%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e最新版のVisual Studioをインストール\u003c/h3\u003e\n\n\u003cp\u003e　2015 Update3 が現在の最新です。個人利用ならCommunity版がタダで使えます（\u003ca href=\"https://www.visualstudio.com/ja-jp/products/visual-studio-community-vs.aspx\" rel=\"nofollow noopener\" target=\"_blank\"\u003eリンク\u003c/a\u003e）。\u003c/p\u003e\n\n\u003cp\u003e　\u003cstrong\u003eインストールの際にカスタムインストールで\"Microsoft Web Developer Tools\"を入れてください。\u003c/strong\u003eこれがないとプロジェクトを作れません。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/12301a216f3e9980516ecb80d1e769fcbd8507a4/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3133323239372f61363463616437372d336365622d386639382d613730382d3263313963383831326332312e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg width=\"345\" alt=\"vs.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2Fa64cad77-3ceb-8f98-a708-2c19c8812c21.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=15edb9dc924270ff0fb50795e6a557d2\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/132297/a64cad77-3ceb-8f98-a708-2c19c8812c21.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2Fa64cad77-3ceb-8f98-a708-2c19c8812c21.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=2dec6eb25ef447923d18fec21b426622 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"マイクロソフトアカウントを作る\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%9E%E3%82%A4%E3%82%AF%E3%83%AD%E3%82%BD%E3%83%95%E3%83%88%E3%82%A2%E3%82%AB%E3%82%A6%E3%83%B3%E3%83%88%E3%82%92%E4%BD%9C%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eマイクロソフトアカウントを作る\u003c/h3\u003e\n\n\u003cp\u003e　マイクロソフトのサービスを使うので必須です。\u003cbr\u003e\n※@outlook.com、@hotmail.comなどで終わるアカウントがあればそれが使えます。Gmailを使っていればそれと繋ぐこともできます。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"azureサブスクリプションに登録\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#azure%E3%82%B5%E3%83%96%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%97%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%AB%E7%99%BB%E9%8C%B2\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eAzureサブスクリプションに登録\u003c/h3\u003e\n\n\u003cp\u003e　ホスティングの為に必要です。\u003cbr\u003e\n　作り方は\u003ca href=\"http://kikutaro777.hatenablog.com/entry/2014/01/03/025126\" rel=\"nofollow noopener\" target=\"_blank\"\u003eこちらの記事\u003c/a\u003eなどを参考にしてください。\u003c/p\u003e\n\n\u003cp\u003e※クレジットカードが必須ですが、無料プランを利用すればお金はかからない、はずです（自分のカードで利用したことないので断言はできないです。大丈夫だと思うのですが）。\u003c/p\u003e\n\n\u003cp\u003e　Azure以外の場所へ上げる事ももちろん可能です。その場合、解説は適宜読み替えてください。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"bot-framworkを使う\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#bot-framwork%E3%82%92%E4%BD%BF%E3%81%86\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eBot Framworkを使う\u003c/h2\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"bot-applicationテンプレートでプロジェクト作成\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#bot-application%E3%83%86%E3%83%B3%E3%83%97%E3%83%AC%E3%83%BC%E3%83%88%E3%81%A7%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E4%BD%9C%E6%88%90\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eBot Applicationテンプレートでプロジェクト作成\u003c/h3\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"テンプレート配置\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%86%E3%83%B3%E3%83%97%E3%83%AC%E3%83%BC%E3%83%88%E9%85%8D%E7%BD%AE\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eテンプレート配置\u003c/h4\u003e\n\n\u003cp\u003e　Bot Frameworkのプロジェクトを作るためにマイクロソフトがテンプレートを用意してくれました。\u003ca href=\"http://aka.ms/bf-bc-vstemplate\" rel=\"nofollow noopener\" target=\"_blank\"\u003eこちら\u003c/a\u003eよりダウンロードしてください。ダウンロードしたzipファイルをVisual Studio 2015のテンプレートフォルダに入れてください（デフォルトでは %USERPROFILE%\\Documents\\Visual Studio 2015\\Templates\\ProjectTemplates\\Visual C# です。エクスプローラーのアドレスバーに貼り付けて飛んでください）。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/906259716039a8f58ce0afb1ba11da8500da34f2/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3133323239372f64316433393733322d653965652d346238662d663461312d6465666564356234663939352e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg width=\"798\" alt=\"template.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2Fd1d39732-e9ee-4b8f-f4a1-defed5b4f995.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=704c1f2237dcc93f7eca956ec47f1d5d\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/132297/d1d39732-e9ee-4b8f-f4a1-defed5b4f995.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2Fd1d39732-e9ee-4b8f-f4a1-defed5b4f995.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=1802d37c1b3b57bd7db946d704cefcc6 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"プロジェクト作成\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E4%BD%9C%E6%88%90\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eプロジェクト作成\u003c/h4\u003e\n\n\u003cp\u003e　テンプレートを入れたらVisual Studioを起動して、新しいプロジェクトを作ってみてください。問題がなければ、Bot Applicationというテンプレートが選べるはずです。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/7255a26c2d7dae283c0391538a109bf2defd00f2/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3133323239372f34313839303130632d306464652d636162642d336364662d6165353332343239633238662e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F4189010c-0dde-cabd-3cdf-ae532429c28f.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=ade04333e14e27a0508a688b27baed6c\" alt=\"bot_template.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/132297/4189010c-0dde-cabd-3cdf-ae532429c28f.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F4189010c-0dde-cabd-3cdf-ae532429c28f.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=3eba6dff37edd88a6628cbbfbeeeb824 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"ビルド\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%93%E3%83%AB%E3%83%89\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eビルド\u003c/h4\u003e\n\n\u003cp\u003e　プロジェクトを作成したら、そのままビルドをしてください。ブラウザが開き、下の画像のようなページが表示されればオッケーです。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/ad0f149de8f9f272e79409b057a294966d910c85/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3133323239372f32303365363236302d323833312d613864612d376132392d3836396161663231303734302e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg width=\"1080\" alt=\"debug_boot.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F203e6260-2831-a8da-7a29-869aaf210740.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=084a8a62c57dc166bc72899f55213571\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/132297/203e6260-2831-a8da-7a29-869aaf210740.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F203e6260-2831-a8da-7a29-869aaf210740.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=11d3c2784a7806ea39cd5eb2b16d7361 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"エミュレーターで動作確認\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%A8%E3%83%9F%E3%83%A5%E3%83%AC%E3%83%BC%E3%82%BF%E3%83%BC%E3%81%A7%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eエミュレーターで動作確認\u003c/h3\u003e\n\n\u003cp\u003e　実はさきほど入れたテンプレートには、動くbotがもう書いてあります。なので、もう半分終わった……といいたい所ですが、まだまだですね。今のままではbotはどこともつながっていません。壁と話してろよ状態です。\u003cbr\u003e\n　ここからいきなり実際のSNSサービスに接続してもよいのですが、それには少し手間がいります。でも早く動いている所を見たいですよね。\u003cbr\u003e\n　こういう事を想定してマイクロソフトが動作確認用のエミュレーターを用意してくれてます。\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003e※v3でエミュレーターもバージョンアップしました。7/9時点で3.0.0.54です。\u003c/strong\u003e\u003c/p\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"インストール\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eインストール\u003c/h4\u003e\n\n\u003cp\u003e　この\u003ca href=\"https://aka.ms/bf-bc-emulator\" rel=\"nofollow noopener\" target=\"_blank\"\u003eリンク\u003c/a\u003eからインストールできます。\u003cbr\u003e\n　インストールが終われば、自動的にエミュレーターが起動します。\u003c/p\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"接続設定\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%8E%A5%E7%B6%9A%E8%A8%AD%E5%AE%9A\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e接続設定\u003c/h4\u003e\n\n\u003cp\u003e　エミュレーターをbotにつなげるには次の3つの項目を設定する必要があります\u003c/p\u003e\n\n\u003cp\u003e※v3より\u003cstrong\u003e「AppId」は「MicrosoftAppId」\u003c/strong\u003eに、\u003cstrong\u003e「AppSecret」は「MicrosoftAppPassword」\u003c/strong\u003eへ変更されました。\u003c/p\u003e\n\n\u003col\u003e\n\u003cli\u003eURL: さきほどビルドをして開いたページがあると思います。そのページのアドレスをコピーしてエミュレーターのURLのボックスにペーストしてください。さらに、ペーストした文字列の後ろに\"/api/messages\"を足してください。\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003cp\u003e2-3. MicrosoftAppId/MicrosoftAppPassword: プロジェクト内に\"Web.config\"というファイルがあるはずです。それを開くと\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"xml\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e  \u003cspan class=\"nt\"\u003e\u0026lt;appSettings\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"c\"\u003e\u0026lt;!-- update these with your BotId, Microsoft App Id and your Microsoft App Password--\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;add\u003c/span\u003e \u003cspan class=\"na\"\u003ekey=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"BotId\"\u003c/span\u003e \u003cspan class=\"na\"\u003evalue=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"YourBotId\"\u003c/span\u003e \u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;add\u003c/span\u003e \u003cspan class=\"na\"\u003ekey=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"MicrosoftAppId\"\u003c/span\u003e \u003cspan class=\"na\"\u003evalue=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\"\u003c/span\u003e \u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;add\u003c/span\u003e \u003cspan class=\"na\"\u003ekey=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"MicrosoftAppPassword\"\u003c/span\u003e \u003cspan class=\"na\"\u003evalue=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\"\u003c/span\u003e \u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"nt\"\u003e\u0026lt;/appSettings\u0026gt;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eという項目があるので、MicrosoftAppIdとMicrosoftAppPasswordが空白になっているのを確認してください。この値はBotの登録後にちゃんとしたものを入れます。\u003cbr\u003e\n　埋めた結果次のようになりました（具体的な値は環境や時期によって変わるかもしれません）。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/20035ddcb302275dccaa91c035059391077cd69d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3133323239372f34386135393638342d656136342d336635352d356637302d3739663138653038346639342e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F48a59684-ea64-3f55-5f70-79f18e084f94.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=68e89007de17ff82abad8cdbded66549\" alt=\"new_emulator.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/132297/48a59684-ea64-3f55-5f70-79f18e084f94.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F48a59684-ea64-3f55-5f70-79f18e084f94.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=cf83406f49234c30f987748afb8e8146 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"エミュレーター上でbotと会話\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%A8%E3%83%9F%E3%83%A5%E3%83%AC%E3%83%BC%E3%82%BF%E3%83%BC%E4%B8%8A%E3%81%A7bot%E3%81%A8%E4%BC%9A%E8%A9%B1\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eエミュレーター上でbotと会話\u003c/h4\u003e\n\n\u003cp\u003e　できましたか？　それではbotに話しかけてください（画面最下部のボックスが入力欄です）。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/7a89d6369d19854dbbbc1a59ba270c56f958b150/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3133323239372f32383135353030352d333265332d363466652d623034322d6237343534356534353765302e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F28155005-32e3-64fe-b042-b74545e457e0.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=f33946ca99141e1a2be4caf3e8711de4\" alt=\"bot_error.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/132297/28155005-32e3-64fe-b042-b74545e457e0.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F28155005-32e3-64fe-b042-b74545e457e0.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=d447374a13d5e5f80ddf401da29786c4 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e　あらら、エラーです。\u003cbr\u003e\n　どうやらプログラムを起動し忘れてたみたいですね。よくある事です（上手くいった人は経験者かズボラで毎回終了するのを忘れるタイプの人でしょう）。\u003cbr\u003e\n　もう一度起動してから、話してみましょう\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/b2c73f7d02e667d8d2799f26a26e15acf747056e/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3133323239372f32643238363133382d316131362d323461302d343335662d3233303230373037636337652e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F2d286138-1a16-24a0-435f-23020707cc7e.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=8db69b49c0d26bcf30bd44d69f118d1c\" alt=\"bot_succsess.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/132297/2d286138-1a16-24a0-435f-23020707cc7e.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F2d286138-1a16-24a0-435f-23020707cc7e.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=9f38c075eea983da97f5cf1d02f3f28b 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e　できましたね！\u003cbr\u003e\n　どうやらこれは、話しかけた内容の文字数を返すbotのようです。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"bot改造\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#bot%E6%94%B9%E9%80%A0\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003ebot改造\u003c/h3\u003e\n\n\u003cp\u003e　目標ではオウム返しをするbotと書いたので、オウム返しをするようコードを書き換えてみましょう。\u003c/p\u003e\n\n\u003cp\u003e　まず、ソリューションエクスプローラーからControllers/MessagesController.csを開いてください。\u003cbr\u003e\n　その中のPostメソッドを見てください。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003easync\u003c/span\u003e \u003cspan class=\"n\"\u003eTask\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eHttpResponseMessage\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"nf\"\u003ePost\u003c/span\u003e\u003cspan class=\"p\"\u003e([\u003c/span\u003e\u003cspan class=\"n\"\u003eFromBody\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\u003cspan class=\"n\"\u003eActivity\u003c/span\u003e \u003cspan class=\"n\"\u003eactivity\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eactivity\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eType\u003c/span\u003e \u003cspan class=\"p\"\u003e==\u003c/span\u003e \u003cspan class=\"n\"\u003eActivityTypes\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eMessage\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eConnectorClient\u003c/span\u003e \u003cspan class=\"n\"\u003econnector\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eConnectorClient\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eUri\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eactivity\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eServiceUrl\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e// calculate something for us to return\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003elength\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eactivity\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eText\u003c/span\u003e \u003cspan class=\"p\"\u003e??\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eEmpty\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"n\"\u003eLength\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n        \u003cspan class=\"c1\"\u003e// return our reply to the user\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eActivity\u003c/span\u003e \u003cspan class=\"n\"\u003ereply\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eactivity\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eCreateReply\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e$\"You sent \u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003eactivity\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eText\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e which was \u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003elength\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e characters\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eawait\u003c/span\u003e \u003cspan class=\"n\"\u003econnector\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eConversations\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eReplyToActivityAsync\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ereply\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eelse\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"nf\"\u003eHandleSystemMessage\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eactivity\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eresponse\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eRequest\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eCreateResponse\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eHttpStatusCode\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eOK\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003eresponse\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e　なんとなく分かると思いますが、ユーザーから呼びかけがあるとこのPostメソッドが呼ばれます。その中身もだいたい分かりますね、送られたメッセージの文字数を数えて返しているだけです。\u003c/p\u003e\n\n\u003cp\u003e　ここをオウム返しするように書き換えます。本当にそのまま戻すだけだと芸がないので、かぎかっこでくくった上でビックリマークをつけてあげましょう。ちょっとだけ愛嬌度が上がります。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eactivity\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eType\u003c/span\u003e \u003cspan class=\"p\"\u003e==\u003c/span\u003e \u003cspan class=\"n\"\u003eActivityTypes\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eMessage\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eConnectorClient\u003c/span\u003e \u003cspan class=\"n\"\u003econnector\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eConnectorClient\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eUri\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eactivity\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eServiceUrl\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e// 「オウム返しだ」「オウム返しだ！」\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eActivity\u003c/span\u003e \u003cspan class=\"n\"\u003ereply\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eactivity\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eCreateReply\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e$\"「\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003eactivity\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eText\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e！」\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eawait\u003c/span\u003e \u003cspan class=\"n\"\u003econnector\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eConversations\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eReplyToActivityAsync\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ereply\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/db697d8104b4406c5b75c75b56f4e6b47ec4951b/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3133323239372f66366662663534392d396531632d326564352d363933342d3763333138343630326166372e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg width=\"375\" alt=\"parroting.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2Ff6fbf549-9e1c-2ed5-6934-7c3184602af7.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=9e30c0e1f48420ab161446be372d50e5\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/132297/f6fbf549-9e1c-2ed5-6934-7c3184602af7.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2Ff6fbf549-9e1c-2ed5-6934-7c3184602af7.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=e2066ec2c22e859de94197d91fe11d95 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e　できました。簡単でしょう？\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"messagetypeについて\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#messagetype%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eMessageTypeについて\u003c/h3\u003e\n\n\u003cp\u003e　おおざっぱなタイプの人がそろそろ「はよサーバーにあげろ」と言ってきそうですが、その前に\u003cdel\u003e重箱の隅が気になってしょうがない\u003c/del\u003e几帳面な方々（世に言う早死にするタイプ。\u003cdel\u003eプログラマーに多い\u003c/del\u003e）の疑問に答えましょう。HandleSystemMessageメソッドについてです。\u003c/p\u003e\n\n\u003cp\u003e　今見たオウム返しのように、ユーザーの送信に応答するというのはよくある使用例ですが、それ以外の特定の状況をトリガーにメッセージを出したい場合が考えられます。例えば、会話が始まったときにあいさつをしたい、というケースです。\u003cbr\u003e\n　このような場面に対応するために、Bot FrameworkではMessageTypeというものが用意されています。具体的に以下のものがあります（\u003cdel\u003e2016/7/7現時点\u003csup id=\"fnref1\"\u003e\u003ca href=\"#fn1\" title=\"http://docs.botframework.com/connector/message-types/#navtitle (v1のドキュメント)\"\u003e1\u003c/a\u003e\u003c/sup\u003e\u003c/del\u003e）\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003e※v3で大きな変更が入りました。以下はv3の説明です。(2016/7/9現時点\u003csup id=\"fnref2\"\u003e\u003ca href=\"#fn2\" title=\"http://docs.botframework.com/en-us/csharp/builder/sdkreference/activities.html#message\"\u003e2\u003c/a\u003e\u003c/sup\u003e)\u003c/strong\u003e\u003c/p\u003e\n\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth style=\"text-align: center\"\u003eMessageType\u003c/th\u003e\n\u003cth style=\"text-align: center\"\u003eMessageType (訳)\u003c/th\u003e\n\u003cth style=\"text-align: center\"\u003e説明\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd style=\"text-align: center\"\u003eMessage\u003c/td\u003e\n\u003ctd style=\"text-align: center\"\u003eメッセージ\u003c/td\u003e\n\u003ctd style=\"text-align: center\"\u003e通常の会話\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd style=\"text-align: center\"\u003eDeleteUserData\u003c/td\u003e\n\u003ctd style=\"text-align: center\"\u003eユーザー情報削除\u003c/td\u003e\n\u003ctd style=\"text-align: center\"\u003eユーザー固有の情報（例：個人情報）の削除を希望する\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd style=\"text-align: center\"\u003eConversationUpdate\u003c/td\u003e\n\u003ctd style=\"text-align: center\"\u003e会話の更新\u003c/td\u003e\n\u003ctd style=\"text-align: center\"\u003eBotやユーザーが会話に加わったり、外れたりした事を伝えるメッセージ。 MembersAddedとMembersRemovedプロパティで具体的な内容を取得。\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd style=\"text-align: center\"\u003eContactRelationUpdate\u003c/td\u003e\n\u003ctd style=\"text-align: center\"\u003e連絡帳の更新\u003c/td\u003e\n\u003ctd style=\"text-align: center\"\u003e連絡帳（やそれに類似する機能）が存在するサービス（例：Skype）などの場合、それに変更があった事を知らせる。Actionプロパティの値に\"add\"/\"remove\"が入っている。\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd style=\"text-align: center\"\u003eTyping\u003c/td\u003e\n\u003ctd style=\"text-align: center\"\u003eタイピング中\u003c/td\u003e\n\u003ctd style=\"text-align: center\"\u003eユーザーがタイピング中である事を知らせる。\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd style=\"text-align: center\"\u003ePing\u003c/td\u003e\n\u003ctd style=\"text-align: center\"\u003ePing\u003c/td\u003e\n\u003ctd style=\"text-align: center\"\u003eBotの状態を確認するためのシステムリクエスト\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\n\u003cp\u003e　特筆するべきなのは、これが汎用的に使える事です。それぞれのメッセージへの応答を書いておけばBot Frameworkが実際に利用しているサービス（SkypeならSkypeの、FacebookならFacebookの）のメッセージに変換してくれます。この汎用性がBot Frameworkを使う大きなメリットの1つです（そのサービスで利用できない機能は単に無視されます）。\u003c/p\u003e\n\n\u003cp\u003e　それでは簡単な例を提示します。ユーザーが会話に参加したときにあいさつをするようにしましょう。以下のコード加えます。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eif\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003emessage\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eMembersAdded\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eCount\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e//アイサツは実際大事。古事記にもそう書かれている。\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003emessage\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eCreateReply\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e$\"「こんにちは！」\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eそして、呼び出し側で応答を返します。以下が全体のコードです。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eBotAuthentication\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eMessagesController\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eApiController\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e/// \u0026lt;summary\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e/// POST: api/Messages\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e/// Receive a message from a user and reply to it\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e/// \u0026lt;/summary\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003easync\u003c/span\u003e \u003cspan class=\"n\"\u003eTask\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eHttpResponseMessage\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"nf\"\u003ePost\u003c/span\u003e\u003cspan class=\"p\"\u003e([\u003c/span\u003e\u003cspan class=\"n\"\u003eFromBody\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\u003cspan class=\"n\"\u003eActivity\u003c/span\u003e \u003cspan class=\"n\"\u003eactivity\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eConnectorClient\u003c/span\u003e \u003cspan class=\"n\"\u003econnector\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eConnectorClient\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eUri\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eactivity\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eServiceUrl\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eactivity\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eType\u003c/span\u003e \u003cspan class=\"p\"\u003e==\u003c/span\u003e \u003cspan class=\"n\"\u003eActivityTypes\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eMessage\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"c1\"\u003e// 「オウム返しだ」「オウム返しだ！」\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eActivity\u003c/span\u003e \u003cspan class=\"n\"\u003ereply\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eactivity\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eCreateReply\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e$\"「\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003eactivity\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eText\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e！」\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eawait\u003c/span\u003e \u003cspan class=\"n\"\u003econnector\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eConversations\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eReplyToActivityAsync\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ereply\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eelse\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003ereply\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nf\"\u003eHandleSystemMessage\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eactivity\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n            \u003cspan class=\"c1\"\u003e//システムメッセージに対する応答\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ereply\u003c/span\u003e \u003cspan class=\"p\"\u003e!=\u003c/span\u003e \u003cspan class=\"k\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"k\"\u003eawait\u003c/span\u003e \u003cspan class=\"n\"\u003econnector\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eConversations\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eReplyToActivityAsync\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ereply\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eresponse\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eRequest\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eCreateResponse\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eHttpStatusCode\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eOK\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003eresponse\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003eActivity\u003c/span\u003e \u003cspan class=\"nf\"\u003eHandleSystemMessage\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eActivity\u003c/span\u003e \u003cspan class=\"n\"\u003emessage\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003emessage\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eType\u003c/span\u003e \u003cspan class=\"p\"\u003e==\u003c/span\u003e \u003cspan class=\"n\"\u003eActivityTypes\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eDeleteUserData\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"c1\"\u003e// Implement user deletion here\u003c/span\u003e\n            \u003cspan class=\"c1\"\u003e// If we handle user deletion, return a real message\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eelse\u003c/span\u003e \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003emessage\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eType\u003c/span\u003e \u003cspan class=\"p\"\u003e==\u003c/span\u003e \u003cspan class=\"n\"\u003eActivityTypes\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eConversationUpdate\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eif\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003emessage\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eMembersAdded\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eCount\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"c1\"\u003e//アイサツは実際大事。古事記にもそう書かれている。\u003c/span\u003e\n                \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003emessage\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eCreateReply\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e$\"「こんにちは！」\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e//省略\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eエミュレーターにはシステムメッセージを直接送信する機能があるので、これでテストできます。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/8f546b1addfc9bfd37c26efdecdbd48056282cd7/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3133323239372f38326232326436352d326632342d316635662d373031642d3936326666323335623437352e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F82b22d65-2f24-1f5f-701d-962ff235b475.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=7795d1286cfd71404c11d4b048ebb12d\" alt=\"added_user_to_conversation.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/132297/82b22d65-2f24-1f5f-701d-962ff235b475.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F82b22d65-2f24-1f5f-701d-962ff235b475.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=393d029de566f4bc80567587a4224876 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"azureへのアップロード\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#azure%E3%81%B8%E3%81%AE%E3%82%A2%E3%83%83%E3%83%97%E3%83%AD%E3%83%BC%E3%83%89\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eAzureへのアップロード\u003c/h3\u003e\n\n\u003cp\u003e　お待たせしました。ようやくサーバーへアップロードします。今回はAzureへアップロードしますが、場所はどこでもいいです。\u003c/p\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"visual-studioから公開\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#visual-studio%E3%81%8B%E3%82%89%E5%85%AC%E9%96%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eVisual Studioから公開\u003c/h4\u003e\n\n\u003cul\u003e\n\u003cli\u003e「ソリューションエクスプローラー」\u0026gt; プロジェクトを右クリック \u0026gt; 「公開」\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/f47bee2da9ea07084186fd0574f03d7084bb43b0/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3133323239372f66363363303931662d666639352d373830652d333933622d3965386465656234376462612e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg width=\"386\" alt=\"publish.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2Ff63c091f-ff95-780e-393b-9e8deeb47dba.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=60bbad1fb870e8b35b8430470f7c320d\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/132297/f63c091f-ff95-780e-393b-9e8deeb47dba.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2Ff63c091f-ff95-780e-393b-9e8deeb47dba.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=2957716e82b00747ed0f6ad274f4f20a 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eAzure App Serviceを選択\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/2e9ea5890d98f5330f2d88c727bda97b58e07db0/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3133323239372f36353166383337302d616232642d666665312d363239342d3637653966643562383936362e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg width=\"530\" alt=\"public2.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F651f8370-ab2d-ffe1-6294-67e9fd5b8966.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=2e95ee32260da6886793942c5c7a70b7\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/132297/651f8370-ab2d-ffe1-6294-67e9fd5b8966.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F651f8370-ab2d-ffe1-6294-67e9fd5b8966.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=6814adf66c318547e38089c0b5a98576 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eApp Serviceの項目を埋める\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003col\u003e\n\u003cli\u003e「アカウントの追加」からマイクロソフトアカウントを設定\u003c/li\u003e\n\u003cli\u003e 自分のサブスクリプションを選択\u003c/li\u003e\n\u003cli\u003e 既にApp Serviceを作っていたらそれを選びます、なければ「新規作成」を選択\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/a5ae1326bd1df3ebfbf15c2427aa98baa260d1dc/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3133323239372f34353232323864312d613661372d656634612d333531342d6263383465356236373435332e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg width=\"600\" alt=\"public3.png\" src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F452228d1-a6a7-ef4a-3514-bc84e5b67453.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=abb46d905ee1ed1c24f4904e7191afe1\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/132297/452228d1-a6a7-ef4a-3514-bc84e5b67453.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F452228d1-a6a7-ef4a-3514-bc84e5b67453.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=82cae40e19d11edd5e41a66e7eab2917 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e　「種類の変更」でWeb Appに変更してください。リソースグループとプランを作成してない方はここでそれぞれ「新規作成」してください。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/4b40a5d5e7b78cc683a55eb3b83718d79cde7f80/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3133323239372f38336435346462302d306562382d396465622d316565632d3366343563363136353738392e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F83d54db0-0eb8-9deb-1eec-3f45c6165789.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=2718e0ad5c363af088c2fbebc4486faf\" alt=\"create_app_service.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/132297/83d54db0-0eb8-9deb-1eec-3f45c6165789.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F83d54db0-0eb8-9deb-1eec-3f45c6165789.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=c42c98172f75e721a04b2154f5d09fad 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e　無料で使いたい人はプラン内で「無料」プランを選んでください。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/2c65e3d030b550cc0e5fe4d814432f8b6c4e3714/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3133323239372f62373664386537372d306431342d613663322d396135622d3064313539373931326537362e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2Fb76d8e77-0d14-a6c2-9a5b-0d1597912e76.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=59efbc231df8a119ff2c363a65593d50\" alt=\"plan_dialog.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/132297/b76d8e77-0d14-a6c2-9a5b-0d1597912e76.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2Fb76d8e77-0d14-a6c2-9a5b-0d1597912e76.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=66cb731ef061d9b9c9b5e20457b27777 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003cbr\u003e\n4. App Serviceを選んで「OK」すると、デプロイ画面になります。設定値は既に埋まってるので、「発行」でデプロイしてください。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/a3b1a426ea3ba4801d80a02d1baef2d04acb675a/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3133323239372f64356235613034642d316533322d633433392d373832322d3664326365376163306331652e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2Fd5b5a04d-1e32-c439-7822-6d2ce7ac0c1e.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=1b3bc77f6655851430cc7b7f2a3da5d5\" alt=\"deploy_new.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/132297/d5b5a04d-1e32-c439-7822-6d2ce7ac0c1e.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2Fd5b5a04d-1e32-c439-7822-6d2ce7ac0c1e.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=2298529605c88eb99d68a79b611301f5 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003cbr\u003e\n5. 「宛先URL」でローカルの時と同じページが開きます。次の登録処理で使うので、アドレスバーの値はコピーしておいてください。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/95de676c66be08f7a9873e847b9a1ccfa298bc73/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3133323239372f30313036316261342d393531622d633035372d313633652d6433663535313165623930362e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F01061ba4-951b-c057-163e-d3f5511eb906.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=379f525e17a5ba6b16e18a215a9f165a\" alt=\"hosted_to_azure.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/132297/01061ba4-951b-c057-163e-d3f5511eb906.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F01061ba4-951b-c057-163e-d3f5511eb906.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=af5d7a835b0e86cb01144a51d9693bc1 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e　Visual Studioの「Azure App Serviceのアクティビティ」ウィンドウで発行状況を確認します。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/53b53ecb504671ba8face69b602cd270b0236626/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3133323239372f38306330373739312d373031352d383235302d316363302d3931343735373033356137352e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F80c07791-7015-8250-1cc0-914757035a75.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=1a8c0c1706c9851b29980a02517589f5\" alt=\"deploy_success.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/132297/80c07791-7015-8250-1cc0-914757035a75.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F80c07791-7015-8250-1cc0-914757035a75.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=0ee8fe3c9aaaf6a98b45afba2d973b0f 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e　これでデプロイ完了です。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"公式サイトdeveloper-portalへ登録設定公開\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%85%AC%E5%BC%8F%E3%82%B5%E3%82%A4%E3%83%88developer-portal%E3%81%B8%E7%99%BB%E9%8C%B2%E8%A8%AD%E5%AE%9A%E5%85%AC%E9%96%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e公式サイト（Developer Portal）へ登録・設定・（公開）\u003c/h3\u003e\n\n\u003cp\u003e　デプロイをしたら、今度はBot Frameworkの公式サイトに登録します。これをする事で各種SNSサービスとの連携やBotの設定をブラウザから行う事ができるようになります。この公式サイトのサービスの事をBot FrameworkではDeveloper Portalと呼びます（v3から。v1ではBot Connectorと呼ばれ、担当範囲も少し違いました）。\u003c/p\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"登録の流れ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E7%99%BB%E9%8C%B2%E3%81%AE%E6%B5%81%E3%82%8C\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e登録の流れ\u003c/h4\u003e\n\n\u003col\u003e\n\u003cli\u003e\n\u003ca href=\"https://dev.botframework.com/\" rel=\"nofollow noopener\" target=\"_blank\"\u003e公式ページ\u003c/a\u003eへ飛び、右上の「Sign in」からマイクロソフトアカウントでログインします。\u003c/li\u003e\n\u003cli\u003e上部メニューから「Register a bot（Botを登録）」を選択します。\u003c/li\u003e\n\u003cli\u003eBotの情報を入力します。\u003c/li\u003e\n\u003cli\u003e登録の前にMicrosoft App Idを作成します。\u003c/li\u003e\n\u003cli\u003e登録。\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"botの登録情報\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#bot%E3%81%AE%E7%99%BB%E9%8C%B2%E6%83%85%E5%A0%B1\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eBotの登録情報\u003c/h4\u003e\n\n\u003cp\u003e　各項目の和訳と説明です。*は必須項目。\u003cbr\u003e\n\u003cstrong\u003e※v3アップデートで、設定項目に変更がありました。\u003c/strong\u003e\u003c/p\u003e\n\n\u003ch5\u003e\n\u003cspan id=\"bot-profilebot情報\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#bot-profilebot%E6%83%85%E5%A0%B1\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eBot profile（Bot情報）\u003c/h5\u003e\n\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth style=\"text-align: center\"\u003e項目\u003c/th\u003e\n\u003cth style=\"text-align: center\"\u003e項目の和訳\u003c/th\u003e\n\u003cth style=\"text-align: center\"\u003e説明\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd style=\"text-align: center\"\u003e*Name\u003c/td\u003e\n\u003ctd style=\"text-align: center\"\u003e名前\u003c/td\u003e\n\u003ctd style=\"text-align: center\"\u003eBotの表示名。35文字以内。\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd style=\"text-align: center\"\u003e*Bot handle\u003c/td\u003e\n\u003ctd style=\"text-align: center\"\u003eBotのハンドル\u003c/td\u003e\n\u003ctd style=\"text-align: center\"\u003eUrlに使われる。英数字+_（アンダースコア）のみ。後で変更不可。\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd style=\"text-align: center\"\u003e*Description\u003c/td\u003e\n\u003ctd style=\"text-align: center\"\u003e説明\u003c/td\u003e\n\u003ctd style=\"text-align: center\"\u003eBotの説明。\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\n\u003ch5\u003e\n\u003cspan id=\"configuration設定\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#configuration%E8%A8%AD%E5%AE%9A\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eConfiguration（設定）\u003c/h5\u003e\n\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth style=\"text-align: center\"\u003e項目\u003c/th\u003e\n\u003cth style=\"text-align: center\"\u003e項目の和訳\u003c/th\u003e\n\u003cth style=\"text-align: center\"\u003e説明\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd style=\"text-align: center\"\u003eMessaging endpoint\u003c/td\u003e\n\u003ctd style=\"text-align: center\"\u003eメッセージエンドポイント\u003c/td\u003e\n\u003ctd style=\"text-align: center\"\u003eメッセージの送受信をさせるRestのエンドポイント。\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd style=\"text-align: center\"\u003e*Microsoft App ID\u003c/td\u003e\n\u003ctd style=\"text-align: center\"\u003eMicrosoftアプリID\u003c/td\u003e\n\u003ctd style=\"text-align: center\"\u003e後述。\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\n\u003cp\u003e　Message endpointには\u003cstrong\u003e公開時に表示されたページのアドレス + 後ろに/api/messagesを追記したものを入力してください\u003c/strong\u003e。\u003c/p\u003e\n\n\u003ch5\u003e\n\u003cspan id=\"publisher-profile公開者情報\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#publisher-profile%E5%85%AC%E9%96%8B%E8%80%85%E6%83%85%E5%A0%B1\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003ePublisher profile（公開者情報）\u003c/h5\u003e\n\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth style=\"text-align: center\"\u003e項目\u003c/th\u003e\n\u003cth style=\"text-align: center\"\u003e項目の和訳\u003c/th\u003e\n\u003cth style=\"text-align: center\"\u003e説明\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd style=\"text-align: center\"\u003e*Publisher name\u003c/td\u003e\n\u003ctd style=\"text-align: center\"\u003e公開者名\u003c/td\u003e\n\u003ctd style=\"text-align: center\"\u003e-\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd style=\"text-align: center\"\u003e*Publisher Email\u003c/td\u003e\n\u003ctd style=\"text-align: center\"\u003e公開者メールアドレス\u003c/td\u003e\n\u003ctd style=\"text-align: center\"\u003e-\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd style=\"text-align: center\"\u003e*Privacy statement\u003c/td\u003e\n\u003ctd style=\"text-align: center\"\u003eプライバシーポリシー\u003c/td\u003e\n\u003ctd style=\"text-align: center\"\u003eBotのプライバシーポリシーが記載されているURL。\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd style=\"text-align: center\"\u003e*Term of Use\u003c/td\u003e\n\u003ctd style=\"text-align: center\"\u003e利用規約\u003c/td\u003e\n\u003ctd style=\"text-align: center\"\u003eBotの利用規約が記載されているURL。\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd style=\"text-align: center\"\u003eBot website\u003c/td\u003e\n\u003ctd style=\"text-align: center\"\u003eBotのホームページ\u003c/td\u003e\n\u003ctd style=\"text-align: center\"\u003e-\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd style=\"text-align: center\"\u003eHashtags\u003c/td\u003e\n\u003ctd style=\"text-align: center\"\u003eハッシュタグ\u003c/td\u003e\n\u003ctd style=\"text-align: center\"\u003eコンマ区切り。具体的な意味は未調査。\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd style=\"text-align: center\"\u003eLanguages\u003c/td\u003e\n\u003ctd style=\"text-align: center\"\u003e言語\u003c/td\u003e\n\u003ctd style=\"text-align: center\"\u003eISO-639-1で指定（日本語はja）。コンマ区切り。具体的な意味は未調査。\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd style=\"text-align: center\"\u003eDefault Conversation Language\u003c/td\u003e\n\u003ctd style=\"text-align: center\"\u003eデフォルトの会話言語\u003c/td\u003e\n\u003ctd style=\"text-align: center\"\u003eISO-639-1で指定。\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\n\u003ch5\u003e\n\u003cspan id=\"admin管理\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#admin%E7%AE%A1%E7%90%86\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eAdmin（管理）\u003c/h5\u003e\n\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth style=\"text-align: center\"\u003e項目\u003c/th\u003e\n\u003cth style=\"text-align: center\"\u003e項目の和訳\u003c/th\u003e\n\u003cth style=\"text-align: center\"\u003e説明\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd style=\"text-align: center\"\u003eOwners\u003c/td\u003e\n\u003ctd style=\"text-align: center\"\u003e所有者\u003c/td\u003e\n\u003ctd style=\"text-align: center\"\u003eBotを編集できる人のリスト。コンマ区切り。\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd style=\"text-align: center\"\u003eAzure App Insights key\u003c/td\u003e\n\u003ctd style=\"text-align: center\"\u003eAzure App Insightsキー\u003c/td\u003e\n\u003ctd style=\"text-align: center\"\u003eキーを設定すればBotの解析結果が送られてくる。\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"micosoft-app-idの作成\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#micosoft-app-id%E3%81%AE%E4%BD%9C%E6%88%90\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eMicosoft App Idの作成\u003c/h4\u003e\n\n\u003cp\u003e　登録する前にMicosoft App Idを作成します。\u003cbr\u003e\n1. 「Create Microsoft App ID and password」と書かれたボタンを押してください。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/b3eb2fb1b465a3524a316818527dde639aa05fa4/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3133323239372f31323632636661342d363835652d343437652d613666362d3733626261613665366239372e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F1262cfa4-685e-447e-a6f6-73bbaa6e6b97.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=64515e7dcf5ddf692e79a4fd64fe03ff\" alt=\"create_ms_app_id.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/132297/1262cfa4-685e-447e-a6f6-73bbaa6e6b97.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F1262cfa4-685e-447e-a6f6-73bbaa6e6b97.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=624ce43de9c8f70e2230ddcef0455692 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003cbr\u003e\n2. 自動的に設定値が決められます。「Generate a password to continue」ボタンを押してください。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/3ee985be8a4725f78edffc3c693b00386520fa84/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3133323239372f65646231313161302d363838642d643061362d613833302d3964333562313131393833622e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2Fedb111a0-688d-d0a6-a830-9d35b111983b.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=2f1dd5eecf9044018723e7830a6095a5\" alt=\"generate_a_password.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/132297/edb111a0-688d-d0a6-a830-9d35b111983b.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2Fedb111a0-688d-d0a6-a830-9d35b111983b.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=87b600c11cd9453be423cacdbbfce471 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003cbr\u003e\n3. パスワードが表示されます。この時だけしか表示されないのでコピーして、セキュリティ的に安全な所で保管してください。なお、忘れたり流出などした場合、ここで削除して作り直せばいいと思います。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/2733103e0a6652e14ef29231aff64d38fda57e13/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3133323239372f34323936643038362d363932662d343733312d353639352d6566633465626566656163642e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F4296d086-692f-4731-5695-efc4ebefeacd.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=4d52df73a9343d9ee8955f02af663bcf\" alt=\"new_password_generated.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/132297/4296d086-692f-4731-5695-efc4ebefeacd.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F4296d086-692f-4731-5695-efc4ebefeacd.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=4e7a0cf38ccb3491f451c867d8124a39 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003cbr\u003e\n4. 「Finish and go back to Bot Framework」ボタンを押します。登録画面には自動的にさきほどのIDが入力されているはずです。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/4bf5be680e7b114d15f89f27fd364a05507c67eb/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3133323239372f39323238373630302d666464332d303334312d666332342d3231643733623130363430392e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F92287600-fdd3-0341-fc24-21d73b106409.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=8d7245e18408461fefabfe7de408dbeb\" alt=\"generate_a_password2.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/132297/92287600-fdd3-0341-fc24-21d73b106409.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F92287600-fdd3-0341-fc24-21d73b106409.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=6ca9e03e2150540a738d34436d13d91e 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"登録\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E7%99%BB%E9%8C%B2\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e登録\u003c/h4\u003e\n\n\u003cp\u003e　「Register」ボタンで登録できます。なお登録あたっては、マイクロソフトが提示するプライバシーポリシー・利用規約・行動模範を確認、内容に同意した上で行ってください。\u003c/p\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"アプリidとアプリキーの設定\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%A2%E3%83%97%E3%83%AAid%E3%81%A8%E3%82%A2%E3%83%97%E3%83%AA%E3%82%AD%E3%83%BC%E3%81%AE%E8%A8%AD%E5%AE%9A\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eアプリIDとアプリキーの設定\u003c/h4\u003e\n\n\u003cp\u003e\u003cstrong\u003e※v3よりAppIdはMicrosoftAppId、AppSecretはMicrosoftAppPasswordに変更されました\u003c/strong\u003e\u003c/p\u003e\n\n\u003cp\u003e　Bot登録が完了したらVisual Studioを開きなおし、先ほど登録したBot Id（Bot handle）/Microsoft App ID/Microsoft App Passwordをプロジェクト内にある「Web.config」というファイルに反映させます。\u003cbr\u003e\n　設定値が分からなくなった場合、ポータルの「My Bots」ページからBotの管理画面に行く事ができるので、そこから確認する事ができます（パスワードは無理）。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"xml\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"nt\"\u003e\u0026lt;appSettings\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"c\"\u003e\u0026lt;!-- update these with your BotId, Microsoft App Id and your Microsoft App Password--\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;add\u003c/span\u003e \u003cspan class=\"na\"\u003ekey=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"BotId\"\u003c/span\u003e \u003cspan class=\"na\"\u003evalue=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u0026lt;ここにBot ID(Bot handle)\u0026gt;\"\u003c/span\u003e \u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;add\u003c/span\u003e \u003cspan class=\"na\"\u003ekey=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"MicrosoftAppId\"\u003c/span\u003e \u003cspan class=\"na\"\u003evalue=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u0026lt;ここにMicrosoft App ID\u0026gt;\"\u003c/span\u003e \u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;add\u003c/span\u003e \u003cspan class=\"na\"\u003ekey=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"MicrosoftAppPassword\"\u003c/span\u003e \u003cspan class=\"na\"\u003evalue=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u0026lt;ここにMicrosoft App Password\u0026gt;\"\u003c/span\u003e \u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n\u003cspan class=\"nt\"\u003e\u0026lt;/appSettings\u0026gt;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"接続確認\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%8E%A5%E7%B6%9A%E7%A2%BA%E8%AA%8D\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e接続確認\u003c/h4\u003e\n\n\u003cp\u003e　Botへの接続テストを管理画面から行えます。\u003c/p\u003e\n\n\u003cp\u003e　左下の「Test connection to your bot（Botへの接続テスト）」というテキストの下の「Test」ボタンを押します。「Endpoint authorization suceeded（エンドポイントへの認証成功）」が出てくれば接続テスト成功です。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/84afb2e3f5e85b904cce7e09d62da15e2762bec7/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3133323239372f61386632653730392d396332322d633830312d663730622d6130323932393238313837332e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2Fa8f2e709-9c22-c801-f70b-a02929281873.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=29ea51724905b03fc2759b0f1d82e6a5\" alt=\"bot_connection_success.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/132297/a8f2e709-9c22-c801-f70b-a02929281873.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2Fa8f2e709-9c22-c801-f70b-a02929281873.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=372222006419e61e6b70f874cf847ecd 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"公開任意\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%85%AC%E9%96%8B%E4%BB%BB%E6%84%8F\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e公開（任意）\u003c/h4\u003e\n\n\u003cp\u003e　管理画面の右上にある「Publish」を押すと、マイクロソフトへレビュー申請がされ、合格するとBotが公開されます。公開されると他の人が利用したりできるようですが、やってないので詳細は分からないです。公開したくない場合はしなくていいです。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"facebook連携\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#facebook%E9%80%A3%E6%90%BA\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eFacebook連携\u003c/h3\u003e\n\n\u003cp\u003e　Bot Frameworkでは各種外部サービスなどと連携する事ができます。Bot Frameworkではこれらの外部サービスの事を\u003cstrong\u003eチャンネル\u003c/strong\u003eと呼んでいます。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/76d706bac0f587719a13be732e83e6bbe002c881/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3133323239372f35346163626463382d636138612d646435642d653433382d3236656263376165653862632e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F54acbdc8-ca8a-dd5d-e438-26ebc7aee8bc.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=fa09b54b42e9a79680cdade0c73c54d4\" alt=\"channels.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/132297/54acbdc8-ca8a-dd5d-e438-26ebc7aee8bc.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F54acbdc8-ca8a-dd5d-e438-26ebc7aee8bc.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=5b9cbf8e99db804c1a0f20a80ab5d320 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e　日本では見慣れないサービスも多いですね。せめてTwitterがあればよいのですが、まぁこれは後から来るでしょう（LINEはおそらく無理でしょうか）。\u003cbr\u003e\n　今回はFacebootと連携してみましょう。\u003c/p\u003e\n\n\u003cp\u003e※Bot Framework側もFacebook側も設定画面は変化が激しい部分なので、柔軟に対応してください。\u003c/p\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"準備-1\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%BA%96%E5%82%99-1\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e準備\u003c/h4\u003e\n\n\u003cp\u003e　Facebookの開発者アカウントを作成してください。\u003ca href=\"https://developers.facebook.com\" rel=\"nofollow noopener\" target=\"_blank\"\u003eこちら\u003c/a\u003eから作成してください。\u003c/p\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"設定の流れ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%A8%AD%E5%AE%9A%E3%81%AE%E6%B5%81%E3%82%8C\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e設定の流れ\u003c/h4\u003e\n\n\u003col\u003e\n\u003cli\u003eポータルでFacebook Messengerチャネルを追加するを選び、設定画面を開く。\u003c/li\u003e\n\u003cli\u003eFacebookページを作成する。ページIDを控える。\u003c/li\u003e\n\u003cli\u003eFacebook Appを作る。AppのIdとシークレットを控える。\u003c/li\u003e\n\u003cli\u003e1で開いた設定画面からBot Frameworkが使うコールバックUrlと検証トークンを入手し、それをFacebook Appに設定する。\u003c/li\u003e\n\u003cli\u003eFacebookページへのアクセストークンを生成し、控える。\u003c/li\u003e\n\u003cli\u003e1で開いた設定画面に2、3、5の値を入力する\u003c/li\u003e\n\u003cli\u003e設定を反映。\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"設定画面\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%A8%AD%E5%AE%9A%E7%94%BB%E9%9D%A2\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e設定画面\u003c/h4\u003e\n\n\u003cp\u003e　まずBotの管理画面で、「Facebook Messenger」項目にある「Add」をクリックしてください。FacebookMessengerの設定画面が開きます。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/afc4e94c92340d81a59dd03e995d18aac515625c/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3133323239372f38356536653666362d326132302d613239352d613038322d3731366330656164393734302e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F85e6e6f6-2a20-a295-a082-716c0ead9740.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=1226d7ed6b718d5fc10545d84785c59b\" alt=\"Configure Facebook Messenger.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/132297/85e6e6f6-2a20-a295-a082-716c0ead9740.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F85e6e6f6-2a20-a295-a082-716c0ead9740.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=c787b0e46e744cf526fd3fbe01e154a6 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"botが動くfacebookページを作成する\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#bot%E3%81%8C%E5%8B%95%E3%81%8Ffacebook%E3%83%9A%E3%83%BC%E3%82%B8%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eBotが動くFacebookページを作成する\u003c/h4\u003e\n\n\u003cp\u003e　ここでいう「ページ」とは、主に企業のブランドやコミュニティの為の場を提供するFacebookのサービスを指します。詳細は「facebook page」で適当にググってください。\u003c/p\u003e\n\n\u003cp\u003e　\u003ca href=\"https://www.facebook.com/pages/create\" rel=\"nofollow noopener\" target=\"_blank\"\u003eページ作成画面\u003c/a\u003eに行ってください。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/573d042b25c6f9990d25308e6d4c6e30f2f3b46a/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3133323239372f66626539363337332d666164392d313535312d343161612d3463343032633639306236652e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2Ffbe96373-fad9-1551-41aa-4c402c690b6e.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=824a101962d65f6e9bae73c14d5d676c\" alt=\"page_create.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/132297/fbe96373-fad9-1551-41aa-4c402c690b6e.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2Ffbe96373-fad9-1551-41aa-4c402c690b6e.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=b4ada8114fc66dd0f9c471b6ab85db80 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e　作りたいBotにあった項目を選んで、ページを作ってください。\u003cbr\u003e\n　ページができたら、作成したページに行き、左サイドメニューから「基本データ」を選んでください。「\u003cstrong\u003eFacebookページID\u003c/strong\u003e」という項目があるので、これを控えておいてください。後で使います。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/cb0dd8e6485b9f297af081f1475bd4ac44c4aedd/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3133323239372f65393730353732632d373166622d663837632d313864362d3938663732666264373963622e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2Fe970572c-71fb-f87c-18d6-98f72fbd79cb.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=b499ffd93839670cb8c0ee2c321ab109\" alt=\"page_id.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/132297/e970572c-71fb-f87c-18d6-98f72fbd79cb.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2Fe970572c-71fb-f87c-18d6-98f72fbd79cb.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=ffb8b9e519765559fd7ae5cf19544a4f 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"facebook-appを作成する\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#facebook-app%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eFacebook Appを作成する\u003c/h4\u003e\n\n\u003cp\u003e　Botを利用するために、Facebook Appを作成します。\u003cbr\u003e\n　現時点では\u003ca href=\"https://developers.facebook.com/quickstarts/?platform=web\" rel=\"nofollow noopener\" target=\"_blank\"\u003eこちらのリンク\u003c/a\u003eからいけます。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/19e3bf4700bea991f97179149a82f701abc560ef/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3133323239372f36626262646165302d396333322d356639642d386534632d6234373534363162663465362e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F6bbbdae0-9c32-5f9d-8e4c-b475461bf4e6.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=116ba63136b2f340e1547f8ff5563bc9\" alt=\"fb_app_start.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/132297/6bbbdae0-9c32-5f9d-8e4c-b475461bf4e6.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F6bbbdae0-9c32-5f9d-8e4c-b475461bf4e6.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=96f274c2a3cf4d8a78bd7712e53ea877 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e　右上の「Skip and Create App ID」をクリックします。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/146362431e913027c09e36e075157e2d92aa7e89/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3133323239372f38393533326537632d336461322d343739612d326235332d3337396637626362353831642e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F89532e7c-3da2-479a-2b53-379f7bcb581d.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=f6c080667aefeee51123f5ed267c902f\" alt=\"fb_app_create_id.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/132297/89532e7c-3da2-479a-2b53-379f7bcb581d.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F89532e7c-3da2-479a-2b53-379f7bcb581d.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=350b3f9f170a6d09e304575773ea3234 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e　アプリの作成を求められるので、埋めて作成してください。\u003cbr\u003e\n　アプリを作成したら、ダッシュボードに行き、そこで表示されるApp Idとシークレットを控えてください。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/4daa129e2a3f5a62e69b9a7b08b33d9c5db390c8/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3133323239372f64363565356630362d306464612d343235362d343239382d6162323462393631386163642e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2Fd65e5f06-0dda-4256-4298-ab24b9618acd.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=4fa64987f75b9d22d8e57f414871a136\" alt=\"fb_appid.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/132297/d65e5f06-0dda-4256-4298-ab24b9618acd.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2Fd65e5f06-0dda-4256-4298-ab24b9618acd.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=de1fa528e54aab46a21629a37ceba864 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"ウェブフック用のコールバックurlと検証トークンを設定\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%A6%E3%82%A7%E3%83%96%E3%83%95%E3%83%83%E3%82%AF%E7%94%A8%E3%81%AE%E3%82%B3%E3%83%BC%E3%83%AB%E3%83%90%E3%83%83%E3%82%AFurl%E3%81%A8%E6%A4%9C%E8%A8%BC%E3%83%88%E3%83%BC%E3%82%AF%E3%83%B3%E3%82%92%E8%A8%AD%E5%AE%9A\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eウェブフック用のコールバックURLと検証トークンを設定\u003c/h4\u003e\n\n\u003cp\u003e　Bot FrameworkのFacebook Messengerチャンネル追加画面に行き、「Set webhook callback url and verify token」を展開して、「Callback Url」と「Verify Token」を控えてください。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/bfa3c224f097773acc50e36622626eef7a19ab16/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3133323239372f66393962636164392d303964312d363038622d623866302d3837623435356532633830612e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2Ff99bcad9-09d1-608b-b8f0-87b455e2c80a.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=47bd5a5eb21c61a19366e59e4acb8546\" alt=\"fb_webhook.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/132297/f99bcad9-09d1-608b-b8f0-87b455e2c80a.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2Ff99bcad9-09d1-608b-b8f0-87b455e2c80a.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=a09ff8c3ce72533e3448c41c06018fc7 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e　Facebook Appの管理画面に行き、左メニューから「+製品の追加」を選び、メインページに出てくるリストの中から「Webhooks」を選んでください。Webhooksのページで「新しいフォロー」を選び「Page」を選びます。\u003c/p\u003e\n\n\u003cp\u003e　そうすると、Webhookの設定画面で出てくるので、Bot Frameworkの管理画面で控えておいた、コールバックUrlと検証トークンを入れます。そして、フォロー入力欄で\u003cbr\u003e\n* message_deliveries\u003cbr\u003e\n* messages\u003cbr\u003e\n* messaging_optins\u003cbr\u003e\n* messaging_postbacks\u003cbr\u003e\nの4項目にチェックを入れます。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/1e515ffa52ebc3b9fd7ad35a96508ad54c6a5e0c/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3133323239372f35613330663063332d316632392d633932622d363639622d6431633563666636326638632e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F5a30f0c3-1f29-c92b-669b-d1c5cff62f8c.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=bbb18ad1c6d56086b6c5e4af638e6735\" alt=\"fb_callback.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/132297/5a30f0c3-1f29-c92b-669b-d1c5cff62f8c.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F5a30f0c3-1f29-c92b-669b-d1c5cff62f8c.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=f355fb940bd8bb145e4eae749ddaaf2d 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e　この操作により、ページ中でメッセージを利用した場合、Facebook側からあなたのBotへ処理を引き渡すことが可能になります。\u003c/p\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"ページへのアクセストークンを発行する\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%9A%E3%83%BC%E3%82%B8%E3%81%B8%E3%81%AE%E3%82%A2%E3%82%AF%E3%82%BB%E3%82%B9%E3%83%88%E3%83%BC%E3%82%AF%E3%83%B3%E3%82%92%E7%99%BA%E8%A1%8C%E3%81%99%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eページへのアクセストークンを発行する\u003c/h4\u003e\n\n\u003cp\u003e　Botからページにアクセルするためのトークを発行します。\u003cbr\u003e\n　Facebook Appの管理画面から「+製品の追加」を選び「Messenger」を選択、出てくる説明を読んでから「スタート」を押します。\u003cbr\u003e\n　すると、Messengerの画面が出るので、「トークン生成」メニューから上の方で作ったページを選びトークンを生成してください。トークンは後で使うので、控えてください。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/9a6c7f908c2f047db20d9853e116a66405701acd/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3133323239372f36616537646435392d656334382d306137392d333136382d6563373461323537636338362e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F6ae7dd59-ec48-0a79-3168-ec74a257cc86.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=3b77dd968be401b588cb48d5583a33f9\" alt=\"fb_page_accesstoken.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/132297/6ae7dd59-ec48-0a79-3168-ec74a257cc86.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2F6ae7dd59-ec48-0a79-3168-ec74a257cc86.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=1c045cafe23efd2789f77022424bfb40 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"資格情報を入力\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%B3%87%E6%A0%BC%E6%83%85%E5%A0%B1%E3%82%92%E5%85%A5%E5%8A%9B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e資格情報を入力\u003c/h4\u003e\n\n\u003cp\u003e　再びBot FrameworkのFacebook Messengerチャンネル追加画面に行き、「Enter your credentials（資格情報を入力）」を展開します。ここに控えておいた4つの値を入力します。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/37bc9cf85b9d0d4928a41ec9e01e128d77e882ad/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3133323239372f65656436613864642d626535612d643766652d316438372d3434386566326436393732352e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2Feed6a8dd-be5a-d7fe-1d87-448ef2d69725.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=a7c03f909890fe5c66e2ce63730d5ffb\" alt=\"fb_credentials.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/132297/eed6a8dd-be5a-d7fe-1d87-448ef2d69725.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2Feed6a8dd-be5a-d7fe-1d87-448ef2d69725.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=bd2ef516c118b029b5401fac55d73c7f 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e　入力したら「Resubmit」を押してください。「Credentials have been validated（資格情報の検証が完了しました）」と表示されれば成功です。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/074dbb773f1ae2c5c4f9e83c22c62ce0ada7086d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3133323239372f65363963303764332d306561352d646632302d623965332d3464323634663036646661612e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2Fe69c07d3-0ea5-df20-b9e3-4d264f06dfaa.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=05706f6e8a5b75714120b83b169340e7\" alt=\"fb_credentials2.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/132297/e69c07d3-0ea5-df20-b9e3-4d264f06dfaa.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2Fe69c07d3-0ea5-df20-b9e3-4d264f06dfaa.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=3712cc8c2dbd33584a19327dad35d31c 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"設定登録\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%A8%AD%E5%AE%9A%E7%99%BB%E9%8C%B2\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e設定登録\u003c/h4\u003e\n\n\u003cp\u003e　「Enable this bot on Facebook Messenger（Facebook MessengerでBotを有効化する）」にチェックを入れます。使用を止める時はここをオフにすれば、設定を残したまま無効化できるはずです（検証はしてないです）。\u003cbr\u003e\n　最後に「I'm done configuring Facebook Messenger（Facebook Messengerの設定を終えました）」を押せば設定完了です。\u003c/p\u003e\n\n\u003cp\u003e　Botの管理画面でチャンネルのところFacebook Messengerがあり、Statusが「Running（実行中）」になっているのを確認してください。\u003c/p\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"利用\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%88%A9%E7%94%A8\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e利用\u003c/h4\u003e\n\n\u003cp\u003e　それでは実際に動いている所を見てみましょう。\u003c/p\u003e\n\n\u003cp\u003e　作成したFacebookのページに行きます。「メッセージ」を押して会話を始めます。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/4d6b465de0589f7166be735d1c73fc72a158b0bd/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3133323239372f63633033353337622d613763662d666434312d393461392d6539376338346633323430352e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2Fcc03537b-a7cf-fd41-94a9-e97c84f32405.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=14dbd61469a5bb87b268d50301b90e57\" alt=\"facebook_message_test.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/132297/cc03537b-a7cf-fd41-94a9-e97c84f32405.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2Fcc03537b-a7cf-fd41-94a9-e97c84f32405.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=ac073cd4a81073de5aadfdd444ba3b10 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/0b8f24abd1c049cfc943f98eec70fab0bb47737e/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3133323239372f61346436313061362d306132362d663735612d646436322d3232343838646230303366312e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2Fa4d610a6-0a26-f75a-dd62-22488db003f1.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=ea451de5c73751fac3c63483513df2fa\" alt=\"bot answer.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/132297/a4d610a6-0a26-f75a-dd62-22488db003f1.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2Fa4d610a6-0a26-f75a-dd62-22488db003f1.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=593b536a20390ce1553b919e143f66fb 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e　できました！\u003cbr\u003e\n　グレートですよこれは。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"まとめ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%BE%E3%81%A8%E3%82%81\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eまとめ\u003c/h1\u003e\n\n\u003cp\u003e　これで目標通り、簡単なBotを作って外部サービスと連携することができるようになりました。\u003cbr\u003e\n　あとはプログラミング次第で色々できるのではないかと思います。\u003c/p\u003e\n\n\u003cp\u003e　なお、今回は触れませんでしたがBot Frameworkには\u003cstrong\u003eBot Builder\u003c/strong\u003eというBot構築のためのライブラリがあり、会話を統一的に実装できるようになるとかなんとかだそうです（まだよく調べていないです）。また、Botに自然言語での会話機能を組み込みたいというニーズのために、Microsoft Coginitive Serviceの1つである\u003ca href=\"https://www.luis.ai/Home\" rel=\"nofollow noopener\" target=\"_blank\"\u003eLUIS\u003c/a\u003eというサービスと連携することもできます。\u003c/p\u003e\n\n\u003cp\u003e　初めての記事執筆で至らないこともあると思いますが、何かの役に立てれば幸いです。\u003cbr\u003e\n　ではでは。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"参考\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%8F%82%E8%80%83\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e参考\u003c/h1\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"http://docs.botframework.com/\" rel=\"nofollow noopener\" target=\"_blank\"\u003e公式ドキュメント\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cdiv class=\"footnotes\"\u003e\n\u003chr\u003e\n\u003col\u003e\n\n\u003cli id=\"fn1\"\u003e\n\u003cp\u003e\u003cdel\u003e\u003ca href=\"http://docs.botframework.com/connector/message-types/#navtitle\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://docs.botframework.com/connector/message-types/#navtitle\u003c/a\u003e\u003c/del\u003e (v1のドキュメント) \u003ca href=\"#fnref1\"\u003e↩\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\n\u003cli id=\"fn2\"\u003e\n\u003cp\u003e\u003ca href=\"http://docs.botframework.com/en-us/csharp/builder/sdkreference/activities.html#message\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://docs.botframework.com/en-us/csharp/builder/sdkreference/activities.html#message\u003c/a\u003e \u003ca href=\"#fnref2\"\u003e↩\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\n\u003c/ol\u003e\n\u003c/div\u003e\n","createdAt":"2016-07-09T09:52:23Z","elapsedYearsFromLastModifiedAt":5,"encryptedId":"8Whv5DfGSau029FboZUnLDWxWjJfbAKA--rHX63k0OxybPwtfB--gVxgpX9NFjkeMIuNxp+hvg==","isBanned":false,"isDeprecated":true,"isDestroyableByViewer":false,"isEditRequestReadableByViewer":true,"isEditRequestSendableByViewer":true,"isLikableByViewer":true,"isLikedByViewer":false,"isPublic":true,"isSlide":false,"isStockableByViewer":true,"isStockedByViewer":false,"isSubscribableByViewer":false,"isSubscribedByViewer":false,"isUpdatableByViewer":false,"isUpdated":true,"lastModifiedAt":"2016-07-10T12:27:43Z","likesCount":21,"linkUrl":"https://qiita.com/ymisono/items/c6096fa62a68dda8001a","organization":null,"originalId":406750,"stockedCount":23,"title":"英語のドキュメントを読みたくない人の為のBot Framework入門（C#編）","toc":"\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E7%9B%AE%E6%A8%99\"\u003e目標\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%89%8D%E6%8F%90\"\u003e前提\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E6%BA%96%E5%82%99\"\u003e準備\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E6%9C%80%E6%96%B0%E7%89%88%E3%81%AEvisual-studio%E3%82%92%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB\"\u003e最新版のVisual Studioをインストール\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%9E%E3%82%A4%E3%82%AF%E3%83%AD%E3%82%BD%E3%83%95%E3%83%88%E3%82%A2%E3%82%AB%E3%82%A6%E3%83%B3%E3%83%88%E3%82%92%E4%BD%9C%E3%82%8B\"\u003eマイクロソフトアカウントを作る\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#azure%E3%82%B5%E3%83%96%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%97%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%AB%E7%99%BB%E9%8C%B2\"\u003eAzureサブスクリプションに登録\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#bot-framwork%E3%82%92%E4%BD%BF%E3%81%86\"\u003eBot Framworkを使う\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#bot-application%E3%83%86%E3%83%B3%E3%83%97%E3%83%AC%E3%83%BC%E3%83%88%E3%81%A7%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E4%BD%9C%E6%88%90\"\u003eBot Applicationテンプレートでプロジェクト作成\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%86%E3%83%B3%E3%83%97%E3%83%AC%E3%83%BC%E3%83%88%E9%85%8D%E7%BD%AE\"\u003eテンプレート配置\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E4%BD%9C%E6%88%90\"\u003eプロジェクト作成\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%93%E3%83%AB%E3%83%89\"\u003eビルド\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%A8%E3%83%9F%E3%83%A5%E3%83%AC%E3%83%BC%E3%82%BF%E3%83%BC%E3%81%A7%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D\"\u003eエミュレーターで動作確認\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB\"\u003eインストール\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E6%8E%A5%E7%B6%9A%E8%A8%AD%E5%AE%9A\"\u003e接続設定\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%A8%E3%83%9F%E3%83%A5%E3%83%AC%E3%83%BC%E3%82%BF%E3%83%BC%E4%B8%8A%E3%81%A7bot%E3%81%A8%E4%BC%9A%E8%A9%B1\"\u003eエミュレーター上でbotと会話\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#bot%E6%94%B9%E9%80%A0\"\u003ebot改造\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#messagetype%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6\"\u003eMessageTypeについて\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#azure%E3%81%B8%E3%81%AE%E3%82%A2%E3%83%83%E3%83%97%E3%83%AD%E3%83%BC%E3%83%89\"\u003eAzureへのアップロード\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#visual-studio%E3%81%8B%E3%82%89%E5%85%AC%E9%96%8B\"\u003eVisual Studioから公開\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%85%AC%E5%BC%8F%E3%82%B5%E3%82%A4%E3%83%88developer-portal%E3%81%B8%E7%99%BB%E9%8C%B2%E8%A8%AD%E5%AE%9A%E5%85%AC%E9%96%8B\"\u003e公式サイト（Developer Portal）へ登録・設定・（公開）\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E7%99%BB%E9%8C%B2%E3%81%AE%E6%B5%81%E3%82%8C\"\u003e登録の流れ\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#bot%E3%81%AE%E7%99%BB%E9%8C%B2%E6%83%85%E5%A0%B1\"\u003eBotの登録情報\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#bot-profilebot%E6%83%85%E5%A0%B1\"\u003eBot profile（Bot情報）\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#configuration%E8%A8%AD%E5%AE%9A\"\u003eConfiguration（設定）\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#publisher-profile%E5%85%AC%E9%96%8B%E8%80%85%E6%83%85%E5%A0%B1\"\u003ePublisher profile（公開者情報）\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#admin%E7%AE%A1%E7%90%86\"\u003eAdmin（管理）\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#micosoft-app-id%E3%81%AE%E4%BD%9C%E6%88%90\"\u003eMicosoft App Idの作成\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E7%99%BB%E9%8C%B2\"\u003e登録\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%A2%E3%83%97%E3%83%AAid%E3%81%A8%E3%82%A2%E3%83%97%E3%83%AA%E3%82%AD%E3%83%BC%E3%81%AE%E8%A8%AD%E5%AE%9A\"\u003eアプリIDとアプリキーの設定\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E6%8E%A5%E7%B6%9A%E7%A2%BA%E8%AA%8D\"\u003e接続確認\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%85%AC%E9%96%8B%E4%BB%BB%E6%84%8F\"\u003e公開（任意）\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#facebook%E9%80%A3%E6%90%BA\"\u003eFacebook連携\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E6%BA%96%E5%82%99-1\"\u003e準備\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E8%A8%AD%E5%AE%9A%E3%81%AE%E6%B5%81%E3%82%8C\"\u003e設定の流れ\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E8%A8%AD%E5%AE%9A%E7%94%BB%E9%9D%A2\"\u003e設定画面\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#bot%E3%81%8C%E5%8B%95%E3%81%8Ffacebook%E3%83%9A%E3%83%BC%E3%82%B8%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B\"\u003eBotが動くFacebookページを作成する\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#facebook-app%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B\"\u003eFacebook Appを作成する\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%A6%E3%82%A7%E3%83%96%E3%83%95%E3%83%83%E3%82%AF%E7%94%A8%E3%81%AE%E3%82%B3%E3%83%BC%E3%83%AB%E3%83%90%E3%83%83%E3%82%AFurl%E3%81%A8%E6%A4%9C%E8%A8%BC%E3%83%88%E3%83%BC%E3%82%AF%E3%83%B3%E3%82%92%E8%A8%AD%E5%AE%9A\"\u003eウェブフック用のコールバックURLと検証トークンを設定\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%9A%E3%83%BC%E3%82%B8%E3%81%B8%E3%81%AE%E3%82%A2%E3%82%AF%E3%82%BB%E3%82%B9%E3%83%88%E3%83%BC%E3%82%AF%E3%83%B3%E3%82%92%E7%99%BA%E8%A1%8C%E3%81%99%E3%82%8B\"\u003eページへのアクセストークンを発行する\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E8%B3%87%E6%A0%BC%E6%83%85%E5%A0%B1%E3%82%92%E5%85%A5%E5%8A%9B\"\u003e資格情報を入力\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E8%A8%AD%E5%AE%9A%E7%99%BB%E9%8C%B2\"\u003e設定登録\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%88%A9%E7%94%A8\"\u003e利用\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%81%BE%E3%81%A8%E3%82%81\"\u003eまとめ\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%8F%82%E8%80%83\"\u003e参考\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n","totalPv":6706,"uuid":"c6096fa62a68dda8001a","banReason":null,"adventCalendarItem":null,"author":{"encryptedId":"BQZzrzFbaJfItyJ/1xapCpO1NjWf--tRB5fX+N95w5vB5t--1AcoEfmgg1eDCwiv4bXjrA==","originalId":132297,"description":"","facebookUrl":null,"githubUrl":"https://github.com/ymisono","isBlockingViewer":false,"isFollowableByViewer":true,"isFollowedByViewer":false,"isTweetWebNotificationReceivable":true,"linkedinUrl":null,"name":"","profileImageUrl":"https://qiita-image-store.s3.amazonaws.com/0/132297/profile-images/1473718574","profileImageUrlW48":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2Fprofile-images%2F1473718574?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=48\u0026s=0d7a6d12873742911b3417e752c04a2c","profileImageUrlW75":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F132297%2Fprofile-images%2F1473718574?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=e186232309218f0098d00d38b0a82402","urlName":"ymisono","websiteUrl":null,"twitterUrl":null,"twitterUrlName":null,"revealedOrganizations":{"edges":[]}},"tags":[{"name":"Facebook","urlName":"facebook"},{"name":"C#","urlName":"csharp"},{"name":"bot","urlName":"bot"},{"name":"BotFramework","urlName":"botframework"}],"followingLikers":{"edges":[]},"comments":{"totalCount":0}},"comments":[],"client":null,"ads_event_emitter":null}}</script>
