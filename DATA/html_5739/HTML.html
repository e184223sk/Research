<!DOCTYPE html><html><head><meta charset="utf-8" /><title>C#でIEnumerableインターフェースを実装してみる - Qiita</title><meta content="width=device-width,initial-scale=1,shrink-to-fit=no,viewport-fit=cover" name="viewport" /><meta content="#55c500" name="theme-color" /><meta content="XWpkTG32-_C4joZoJ_UsmDUi-zaH-hcrjF6ZC_FoFbk" name="google-site-verification" /><meta content="telephone=no" name="format-detection" /><link rel="canonical" href="https://qiita.com/kerochan/items/13bbbbb14c3a309c7ec4" /><link href="/manifest.json" rel="manifest" /><link href="/opensearch.xml" rel="search" title="Qiita" type="application/opensearchdescription+xml" /><link as="script" href="https://www.googletagservices.com/tag/js/gpt.js" rel="preload" /><link href="https://securepubads.g.doubleclick.net" rel="preconnect" /><script async="" src="https://www.googletagservices.com/tag/js/gpt.js"></script><meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="flzBUalY5Me78yEorTbMrEh9vh5BqZIP2Md1Fu4wxj+KI9EAgkNV0aD+wlN84csen6vK2mMICvvnxfpMDppVGg==" /><link rel="shortcut icon" type="image/x-icon" href="https://cdn.qiita.com/assets/favicons/public/production-c620d3e403342b1022967ba5e3db1aaa.ico" /><link rel="apple-touch-icon" type="image/png" href="https://cdn.qiita.com/assets/favicons/public/apple-touch-icon-ec5ba42a24ae923f16825592efdc356f.png" /><link rel="stylesheet" media="all" href="https://cdn.qiita.com/assets/public/article-2eaa7dbedc42a8ea65c722cda46d0ebb.min.css" /><script src="https://cdn.qiita.com/assets/public/v3-article-bundle-63de2d91fef827269d3f6b958db2335b.min.js" defer="defer"></script><meta name="twitter:card" content="summary_large_image"><meta content="@Qiita" name="twitter:site" /><meta property="og:type" content="article"><meta property="og:title" content="C#でIEnumerableインターフェースを実装してみる - Qiita"><meta property="og:image" content="https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0&amp;w=1200&amp;mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND1ReVBqZ2FkSlJXNTFiV1Z5WVdKc1plT0NwT09Ecy1PQ3YtT0R2T09EbGVPQ3AtT0R2T09DdWVPQ2t1V3VuLWlqaGVPQmwtT0JwdU9Cdi1PQ2l3JnR4dC1jb2xvcj0lMjMzMzMmdHh0LWZvbnQ9SGlyYWdpbm8lMjBTYW5zJTIwVzYmdHh0LXNpemU9NTQmdHh0LWNsaXA9ZWxsaXBzaXMmdHh0LWFsaWduPWNlbnRlciUyQ21pZGRsZSZzPWQ5MWExMmRhY2Q1NTE4OWI2YjYzOWE1ZjZiN2Y2OTRj&amp;mark-align=center%2Cmiddle&amp;blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RR3RsY205amFHRnUmdHh0LWNvbG9yPSUyMzMzMyZ0eHQtZm9udD1IaXJhZ2lubyUyMFNhbnMlMjBXNiZ0eHQtc2l6ZT00NSZ0eHQtYWxpZ249cmlnaHQlMkNib3R0b20mcz1iNTYxNDRmMmE0NjAzNzQzNzEwZjk4YTBhZGM1NmRlMQ&amp;blend-align=center%2Cmiddle&amp;blend-mode=normal&amp;s=290e3fa7d2c61c5c377f06146d32356a"><meta property="og:description" content="※この記事は、AmusementCreators Advent Calendar 2017 の13日目の記事です。

C#でIEnumerableインターフェースの実装に関していろいろ考えてやってみました。そのメモ書きとして残しておこ..."><meta content="https://qiita.com/kerochan/items/13bbbbb14c3a309c7ec4" property="og:url" /><meta content="Qiita" property="og:site_name" /><meta content="564524038" property="fb:admins" /><meta content="C#,.NETFramework,IEnumerable" name="keywords" /><script>!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window, document,'script',
'https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '668972150489891');
fbq('track', 'PageView');</script><style data-emotion-css="17jxvjw 11t2ec1 1dvr2p8 18lkoru 1g4cku8 1iupg5d ijvq0v 15cocm3 12rp90f 115f4t 1b8uj5v 79elbk 16hhh7b fcbn8c 1gj7nt 154zy0m yikrym 1jqivyb 1ode1bp le4d8r 1hbd3g7 1nzh4zz 38fzdi helsa7 8qb8m4 2imjyh he5w1s 70qvj9 3ojehk 100alwu 1dtnjt5 10ougpm 1ay9vb9 m19uds cgzq40 1wa99t2 1l3zk9f 4czcte 1yzj1fm 1uv1qiv 109dbrr 5jpx49 mnxgyc 1vlpknv fsjkhv 1b17vb0 7i7f4d"}>.css-17jxvjw{display:grid;display:-ms-grid;grid-template-columns:80px minmax(0,1fr) 300px;-ms-grid-columns:80px minmax(0,1fr) 300px;grid-template-rows:minmax(270px,auto) 1fr;-ms-grid-rows:minmax(270px,auto) 1fr;max-width:1280px;margin-right:auto;margin-left:auto;padding-top:24px;padding-right:24px;padding-left:24px;}@media (max-width:1200px){.css-17jxvjw{padding-bottom:0;padding-left:0;padding-right:0;}}@media (max-width:992px){.css-17jxvjw{grid-template-columns:80px 452px 300px;-ms-grid-columns:80px 452px 300px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}}@media (max-width:770px){.css-17jxvjw{display:block;}}@media (max-width:480px){.css-17jxvjw{padding-top:0;}}.css-11t2ec1{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;z-index:5;position:-webkit-sticky;position:sticky;top:calc(56px + 24px + 16px + 32px - 16px);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:16px;width:80px;}.css-11t2ec1:after{content:'';display:table;}.css-11t2ec1:before{content:'';display:table;}@media (max-width:770px){.css-11t2ec1{display:none;}}.css-1dvr2p8{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-18lkoru{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;background-color:#FFFFFF;}.css-1g4cku8{display:inline-block;vertical-align:middle;height:20px;width:20px;fill:#55C500;}.css-1iupg5d{color:#55C500;cursor:pointer;font-size:14px;font-weight:bold;}.css-ijvq0v{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-15cocm3{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#FFFFFF;border:2px solid #6E6F70;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:2px 0px 0px;width:40px;}.css-12rp90f{display:inline-block;vertical-align:bottom;height:17.77777777777778px;width:16px;fill:#6E6F70;}.css-115f4t{color:#6E6F70;font-size:14px;font-weight:bold;}.css-1b8uj5v{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;margin-bottom:16px;padding:0;}.css-79elbk{position:relative;}.css-16hhh7b{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;padding:0;}.css-fcbn8c{display:none;bottom:initial;left:initial;right:initial;top:initial;left:100%;top:calc(-8px - (14px * 1.8) - 16px - 4px);}.css-1gj7nt{color:rgba(0,0,0,0.6);font-size:14px;font-weight:bold;line-height:1.8;padding:8px 16px;}.css-154zy0m{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.87);cursor:pointer;font-size:16px;font-weight:normal;line-height:1.8;padding:4px 16px;}.css-154zy0m:hover{-webkit-text-decoration:none;text-decoration:none;background-color:#F2F2F2;}.css-yikrym{width:20px;}.css-1jqivyb{color:rgba(0,0,0,0.6);font-size:13px;}.css-1ode1bp{background-color:rgba(0,0,0,0.12);height:1px;width:100%;margin:8px 0;}.css-le4d8r{display:inline-block;vertical-align:middle;height:13px;width:13px;fill:rgba(0,0,0,0.6);}.css-1hbd3g7{height:250px;}.css-1nzh4zz{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:16px 32px;background-color:#FBE69E;color:rgba(0,0,0,0.87);line-height:1.5;font-weight:600;}@media (max-width:770px){.css-1nzh4zz{padding:16px;}}.css-38fzdi{color:#CA832A;margin-right:4px;}.css-helsa7{background-color:#FFFFFF;padding:32px;margin-bottom:24px;}@media (max-width:992px){.css-helsa7{margin:0 auto 40px;}}@media (max-width:480px){.css-helsa7{margin:0 0 40px;padding:32px 16px;}}.css-8qb8m4{margin-bottom:48px;}.css-2imjyh{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-he5w1s{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;width:100%;}@media (max-width:770px){.css-he5w1s{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}}.css-70qvj9{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.css-3ojehk{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;margin-right:4px;}.css-100alwu{display:inline-block;border-radius:50%;line-height:1;overflow:hidden;vertical-align:middle;}.css-1dtnjt5{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-10ougpm{color:rgba(0,0,0,0.87);font-size:14px;font-weight:600;line-height:1.8;margin-right:4px;text-wrap:break-word;word-break:break-all;}.css-1ay9vb9{margin-right:16px;}.css-m19uds{color:rgba(0,0,0,0.6);font-size:14px;line-height:1.8;}.css-cgzq40{color:rgba(0,0,0,0.87);font-size:32px;font-weight:bold;line-height:1.4;margin-top:8px;text-wrap:break-word;word-break:break-all;}.css-1wa99t2{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.6);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:8px;}.css-1l3zk9f{color:rgba(0,0,0,0.6);font-size:20px;margin-right:8px;}.css-4czcte{margin-right:4px;color:inherit;font-size:14px;line-height:1.8;}.css-4czcte:not(:last-child)::after{content:',';margin-right:4px;}.css-1yzj1fm{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:32px;}.css-1uv1qiv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-size:20px;height:32px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin-right:16px;outline:none;padding:0;width:32px;}.css-109dbrr{background-color:#F9F9F9;border-top:1px solid rgba(0,0,0,0.12);bottom:0;box-shadow:0px 1px 4px rgba(0,0,0,0.14);display:none;height:calc(env(safe-area-inset-bottom,0px) + 56px);-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding-bottom:env(safe-area-inset-bottom);position:-webkit-sticky;position:sticky;width:100%;z-index:2000;}@media (max-width:770px){.css-109dbrr{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}.css-5jpx49{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:space-evenly;-webkit-justify-content:space-evenly;-ms-flex-pack:space-evenly;justify-content:space-evenly;width:100%;}.css-mnxgyc{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1vlpknv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;margin-right:4px;background-color:#FFFFFF;}.css-fsjkhv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1b17vb0{color:#6E6F70;font-size:14px;font-weight:bold;margin-left:4px;}.css-7i7f4d{display:none;bottom:initial;left:initial;right:initial;top:initial;bottom:32px;right:0;}</style></head><body><div class="allWrapper"><div><div id="GlobalHeader-react-component-622a85cb-40d2-45c5-872d-ce7c7cf0f089"><div class="st-Header"><div class="st-Header_container"><div class="st-Header_start"><a href="/" class="st-Header_logo"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 426.57 130"><circle cx="167.08" cy="21.4" r="12.28"></circle><path d="M250.81 29.66h23.48v18.9h-23.48z"></path><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z"></path><circle cx="216.33" cy="21.4" r="12.28"></circle></svg></a><div class="st-Header_communitySelector" tabindex="0"><span class="fa fa-caret-down"></span></div><div class="st-Header_dropdown"><div class="st-Header_dropdownHeading">Qiita Teams that are logged in</div><div class="st-Header_dropdownItemNote">You are not logged in to any team</div><hr class="st-Header_dropdownDivider st-Header_dropdownDivider-shrink"/><a href="https://teams-center.qiita.com/find_team" class="st-Header_dropdownItem"><span class="fa fa-fw fa-sign-in st-Header_dropdownItemIcon"></span><div>Log in to Qiita Team</div></a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Community</div><a href="/organizations" class="st-Header_dropdownItem">Organization</a><a href="/official-events/open" class="st-Header_dropdownItem">Event</a><a href="/advent-calendar" class="st-Header_dropdownItem">Advent Calendar</a><a href="https://qiitadon.com/" class="st-Header_dropdownItem" target="_blank">Qiitadon (β)</a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Service</div><a href="https://jobs.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Jobs</a><a href="https://zine.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Zine</a><a href="https://blog.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Blog</a></div><form class="st-Header_search" action="/search" method="get"><span class="fa fa-search st-Header_searchIcon"></span><input type="search" class="st-Header_searchInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form><form class="st-Header_searchModal" action="/search" method="get"><input type="text" class="st-Header_searchModalInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form></div><div class="st-Header_end"><div class="st-Header_searchButton"><span class="fa fa-search"></span></div><a class="st-Header_signupButton" href="/signup?redirect_to=%2Fkerochan%2Fitems%2F13bbbbb14c3a309c7ec4">Signup</a><a class="st-Header_loginLink" href="/login?redirect_to=%2Fkerochan%2Fitems%2F13bbbbb14c3a309c7ec4">Login</a></div><div class="st-Header_overlay"></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="GlobalHeader" data-dom-id="GlobalHeader-react-component-622a85cb-40d2-45c5-872d-ce7c7cf0f089">{"unreadNotificationsCount":null,"realms":[{"humanName":"Qiita","isCurrentRealm":true,"isQiita":true,"isQiitaTeam":false,"loggedInUser":null,"teamId":null,"url":"https://qiita.com/"}],"teamFindUrl":"https://teams-center.qiita.com/find_team","isTeamOnlyUser":null,"currentUser":null}</script>
      
</div><div class="st-HeaderAlert st-HeaderAlert-warning"><div class="st-HeaderAlert_body"></div></div><script type="application/ld+json">{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"/","name":"Qiita"}},{"@type":"ListItem","position":2,"item":{"@id":"/tags/csharp","name":"C#"}}]}</script><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","datePublished":"2017-12-13T17:50:16.000+09:00","dateModified":"2018-12-10T22:16:09.000+09:00","headline":"C#でIEnumerableインターフェースを実装してみる","image":"https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0\u0026w=1200\u0026mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND1ReVBqZ2FkSlJXNTFiV1Z5WVdKc1plT0NwT09Ecy1PQ3YtT0R2T09EbGVPQ3AtT0R2T09DdWVPQ2t1V3VuLWlqaGVPQmwtT0JwdU9Cdi1PQ2l3JnR4dC1jb2xvcj0lMjMzMzMmdHh0LWZvbnQ9SGlyYWdpbm8lMjBTYW5zJTIwVzYmdHh0LXNpemU9NTQmdHh0LWNsaXA9ZWxsaXBzaXMmdHh0LWFsaWduPWNlbnRlciUyQ21pZGRsZSZzPWQ5MWExMmRhY2Q1NTE4OWI2YjYzOWE1ZjZiN2Y2OTRj\u0026mark-align=center%2Cmiddle\u0026blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RR3RsY205amFHRnUmdHh0LWNvbG9yPSUyMzMzMyZ0eHQtZm9udD1IaXJhZ2lubyUyMFNhbnMlMjBXNiZ0eHQtc2l6ZT00NSZ0eHQtYWxpZ249cmlnaHQlMkNib3R0b20mcz1iNTYxNDRmMmE0NjAzNzQzNzEwZjk4YTBhZGM1NmRlMQ\u0026blend-align=center%2Cmiddle\u0026blend-mode=normal\u0026s=290e3fa7d2c61c5c377f06146d32356a","mainEntityOfPage":"https://qiita.com/kerochan/items/13bbbbb14c3a309c7ec4","author":{"@type":"Person","address":"日本　つくば","email":null,"identifier":"kerochan","name":"kerochan","image":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Favatars1.githubusercontent.com%2Fu%2F30919974%3Fv%3D4?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=12ddbd94f61d43573e65bbf6ec56f378","url":"https://qiita.com/kerochan","description":"AmusementCreatorsというサークルの人です。最近はC++でゲーム作ってます。","memberOf":[]},"publisher":{"@type":"Organization","name":"Qiita","logo":{"@type":"ImageObject","url":"//cdn.qiita.com/assets/public/qiita-logo-c39ded593afa388e2e1ba435b110554e.png"}}}</script><style type="text/css">.wb-CampaignLink {
  background-color: #333333;
  width: 100%;
}

.wb-CampaignLink_container {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  max-width: 1100px;
  margin: 0 auto;
  font-size: 13px;
  padding: 0.8em;
}
.wb-CampaignLink_container > a {
  color: #fff;
}

.wb-CampaignLink_container > a:hover {
  text-decoration: underline;
}</style><div class="wb-CampaignLink"><div class="wb-CampaignLink_container"><a target="_blank" id="header_text_message_1" href="https://zine.qiita.com/interview/202107-hitachi/?utm_source=qiita&amp;utm_medium=header-banner">グループ会社出納業務の証票処理を70％自動化。日立のAI-OCR技術とは？</a><a target="_blank" id="header_text_message_2" href="https://zine.qiita.com/interview/202107-hitachi/?utm_source=qiita&amp;utm_medium=header-banner">詳しくはこちら</a></div><script>td.trackEvent(
  'front_events',
  {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"kerochan","type":"items","id":"13bbbbb14c3a309c7ec4"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Show","data":{"message":"グループ会社出納業務の証票処理を70％自動化。日立のAI-OCR技術とは？","url":"https://zine.qiita.com/interview/202107-hitachi/?utm_source=qiita\u0026utm_medium=header-banner","sub_message":"詳しくはこちら"}}
)</script><script>document.getElementById('header_text_message_1').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"kerochan","type":"items","id":"13bbbbb14c3a309c7ec4"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":1,"pos_id":"header_text_message_1","message":"グループ会社出納業務の証票処理を70％自動化。日立のAI-OCR技術とは？","url":"https://zine.qiita.com/interview/202107-hitachi/?utm_source=qiita\u0026utm_medium=header-banner","sub_message":"詳しくはこちら"}}
  )
})</script><script>document.getElementById('header_text_message_2').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"kerochan","type":"items","id":"13bbbbb14c3a309c7ec4"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":1,"pos_id":"header_text_message_2","message":"グループ会社出納業務の証票処理を70％自動化。日立のAI-OCR技術とは？","url":"https://zine.qiita.com/interview/202107-hitachi/?utm_source=qiita\u0026utm_medium=header-banner","sub_message":"詳しくはこちら"}}
  )
})</script></div><script type="application/json" id="js-react-on-rails-context">{"railsEnv":"production","inMailer":false,"i18nLocale":"en","i18nDefaultLocale":"en","href":"https://qiita.com/kerochan/items/13bbbbb14c3a309c7ec4","location":"/kerochan/items/13bbbbb14c3a309c7ec4","scheme":"https","host":"qiita.com","port":null,"pathname":"/kerochan/items/13bbbbb14c3a309c7ec4","search":null,"httpAcceptLanguage":null,"actionPath":"public/items#show","settings":{"analyticsTrackingId":"UA-24675221-12","assetsMap":{},"csrfToken":"OXdzgPY6yZ/Snr36g2Z7p1cvJ+rItA8AZqPAemnJLUvNCGPR3SF4icmTXoFSsXwVgPlTLuoVl/RZoU8giWO+bg==","locale":"en"},"currentUser":null,"isLoggedIn":false,"recaptchaSiteKey":"6LfNkiQTAAAAAM3UGnSquBy2akTITGNMO_QDxMw6","serverSide":false}</script>
<div id="PersonalArticlePage-react-component-8ef5bd31-3bc5-46d7-a268-122cdd42f864"><div class="p-items_wrapper"><div class=" css-17jxvjw"><div class="css-11t2ec1"><div class="css-1dvr2p8"><button class=" css-18lkoru"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/kerochan/items/13bbbbb14c3a309c7ec4/likers" class="css-1iupg5d">63</a></div><div class="css-ijvq0v"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-115f4t">54</span></div><div class="css-1b8uj5v"><span class="fa fa-twitter"></span></div><div class="css-1b8uj5v"><span class="fa fa-facebook"></span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-fcbn8c"><div class="css-1gj7nt">Improve article</div><a href="/drafts/13bbbbb14c3a309c7ec4/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/kerochan/items/13bbbbb14c3a309c7ec4/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/kerochan/items/13bbbbb14c3a309c7ec4/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/kerochan/items/13bbbbb14c3a309c7ec4/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/kerochan/items/13bbbbb14c3a309c7ec4.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div><div class="p-items_options"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_toc"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_main"><div class="css-1nzh4zz"><span class="fa fa-fw fa-warning css-38fzdi"></span><p>More than 1 year has passed since last update.</p></div><div class="css-helsa7"><div class="css-8qb8m4"><div class="css-2imjyh"><div class="css-he5w1s"><div class="css-70qvj9"><div class="css-3ojehk"><a href="/kerochan"><img class="css-100alwu eyfquo10" src="https://avatars1.githubusercontent.com/u/30919974?v=4" width="24" height="24" loading="lazy"/></a></div><div class="css-1dtnjt5"><a href="/kerochan" class="css-10ougpm">@<!-- -->kerochan</a><div class="css-1ay9vb9"><span><meta content="2017-12-13T08:50:16Z"/><time dateTime="2018-12-10T13:16:09Z" class="css-m19uds">updated at 2018-12-10</time></span></div></div></div></div></div><h1 class="css-cgzq40">C#でIEnumerableインターフェースを実装してみる</h1><div class="css-1wa99t2"><span class="fa fa-tags mr-1of2 css-1l3zk9f" aria-hidden="true"></span><a href="/tags/csharp" class="css-4czcte">C#</a><a href="/tags/.netframework" class="css-4czcte">.NETFramework</a><a href="/tags/ienumerable" class="css-4czcte">IEnumerable</a></div></div><section class="it-MdContent"><div id="personal-public-article-body"><div><p>※この記事は、AmusementCreators Advent Calendar 2017 の13日目の記事です。</p>

<p>C#でIEnumerableインターフェースの実装に関していろいろ考えてやってみました。そのメモ書きとして残しておこうかと。<br>
※検証した環境はWindows8.1 64bit .netframework4.7 開発ツールはVS2017です(C#のバージョンはおそらく7.1)。</p>

<p>本記事ではインターフェースや<code>foreach</code>文についていちいち説明はしませんので、それらについてよくわからないという人は、次のサイトを見ておくことをお勧めします。<br>
<a href="http://ufcpp.net/study/csharp/oo_interface.html" class="autolink" rel="nofollow noopener" target="_blank">http://ufcpp.net/study/csharp/oo_interface.html</a><br>
<a href="http://ufcpp.net/study/csharp/sp_foreach.html" class="autolink" rel="nofollow noopener" target="_blank">http://ufcpp.net/study/csharp/sp_foreach.html</a></p>

<h1>
<span id="ienumerableインターフェースとは" class="fragment"></span><a href="#ienumerable%E3%82%A4%E3%83%B3%E3%82%BF%E3%83%BC%E3%83%95%E3%82%A7%E3%83%BC%E3%82%B9%E3%81%A8%E3%81%AF"><i class="fa fa-link"></i></a><code>Ienumerable</code>インターフェースとは</h1>

<p>Ienumerableインターフェースとは、「<strong>コレクションに対する単純な反復処理をサポートする反復子を公開する</strong>」インターフェースのことです。<br>
要は「<strong>繰り返して連続して値を読み込むことができる機能を提供する</strong>」インターフェースのことです。</p>

<h1>
<span id="ienumerableインターフェースの構造" class="fragment"></span><a href="#ienumerable%E3%82%A4%E3%83%B3%E3%82%BF%E3%83%BC%E3%83%95%E3%82%A7%E3%83%BC%E3%82%B9%E3%81%AE%E6%A7%8B%E9%80%A0"><i class="fa fa-link"></i></a><code>IEnumerable</code>インターフェースの構造</h1>

<p>IEnumerableインターフェースをコンパイルするのに必要なコードを下に示します。なお、以下<code>System</code>名前空間、<code>System.Collections</code>名前空間、<code>System.Collections.Generic</code>名前空間は<code>using</code>ディレクティブによって省略されているものとします。</p>

<div class="code-frame" data-lang="C#">
<div class="code-lang"><span class="bold">IEnumerableインターフェース実装に必要な最小構造</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">class</span> <span class="nc">Array</span> <span class="p">:</span> <span class="n">IEnumerable</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="n">IEnumerator</span> <span class="nf">GetEnumerator</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="k">new</span> <span class="nf">ArrayEnumerator</span><span class="p">();</span> <span class="p">}</span>

        <span class="k">class</span> <span class="nc">ArrayEnumerator</span> <span class="p">:</span> <span class="n">IEnumerator</span>
        <span class="p">{</span>
            <span class="k">public</span> <span class="n">Object</span> <span class="n">Current</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>
            <span class="k">public</span> <span class="kt">bool</span> <span class="nf">MoveNext</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="k">true</span><span class="p">;</span> <span class="p">}</span>
            <span class="k">public</span> <span class="k">void</span> <span class="nf">Reset</span><span class="p">()</span> <span class="p">{</span> <span class="p">}</span>
        <span class="p">}</span>

    <span class="p">}</span>

</code></pre></div>
</div>

<p>もちろんこのままでは使い物になりませんが、コンパイルは通ります。筆者も、はじめ見たときはあまりにシンプルで拍子抜けしてしまいました。しかしこのシンプルさこそが応用を可能にしているのではないかと思います。<br>
<code>IEnumerable</code>インターフェースは、<code>IEnumerator</code>インターフェースを返す引数なしの関数を持ちます。また、<code>IEnumerator</code>インターフェースは上記三つのメソッドおよびプロパティを持ちます。<br>
基本的に、コレクションに対する操作はこの<code>IEnumerator</code>インターフェース(<strong>反復子</strong>と呼ばれる)を介することによって行われます。筆者は、この反復子の動作がなかなか理解出来なかったのですが、反復子を「<strong>コレクションのどのセルを指し示すかを表す矢印</strong>」と考えたことですんなりと理解できました。<br>
(「セル」とは、ここでは要素を格納する箱を表します。コレクションでは要素だけでなく別の値も同時に保存する必要があるので、それらが入るような箱を用意しなければいけません。詳しくは後程話します)<br>
<a href="https://camo.qiitausercontent.com/75169c57f840157eba7b6a831d20168689240ad8/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3231343330302f38623237333439382d666432382d636537372d656332612d3934646137333661643031612e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F214300%2F8b273498-fd28-ce77-ec2a-94da736ad01a.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=2fbfba033c609e79c58834512cd9cdcb" alt="IEnumerator.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/214300/8b273498-fd28-ce77-ec2a-94da736ad01a.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F214300%2F8b273498-fd28-ce77-ec2a-94da736ad01a.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=687404366c1b77cd12f835d77fdc9630 1x" loading="lazy"></a><br>
この図を用いて、<code>IEnumerator</code>インターフェースの各プロパティ、メソッドの動作を説明すると、<br>
(1)<code>Current</code>プロパティ：現在矢印の指し示す要素を保管しておくプロパティ<br>
(2)<code>MoveNext</code>メソッド：矢印の指し示す要素を次へ移すメソッド。移動できれば<code>true</code>、できなければ<code>false</code>を返す。<br>
(3)<code>Reset</code>プロパティ：矢印の指し示す要素を一番初めへ戻すメソッド。</p>

<p>となります。筆者はこのイメージで動作を理解しています。<br>
これを見れば、<code>foreach</code>文の動作も容易に理解することができると思います。</p>

<div class="code-frame" data-lang="C#">
<div class="code-lang"><span class="bold">foreach文の展開</span></div>
<div class="highlight"><pre class="with-code"><code><span class="c1">//`foreach(型名 変数 in コレクション){文}は、次のように展開されます。</span>
<span class="k">try</span>
<span class="p">{</span>
    <span class="n">IEnumerator</span> <span class="n">e</span> <span class="p">=</span> <span class="err">コレクション</span><span class="p">.</span><span class="nf">GetEnumerator</span><span class="p">();</span><span class="c1">//(1)</span>
    <span class="k">while</span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="nf">MoveNext</span><span class="p">())</span><span class="c1">//(2)</span>
    <span class="p">{</span>
        <span class="err">型名</span> <span class="err">変数</span> <span class="p">=</span> <span class="p">(</span><span class="err">型名</span><span class="p">)</span><span class="n">e</span><span class="p">.</span><span class="n">Current</span><span class="p">;</span><span class="c1">//(3)</span>
        <span class="err">文</span>
    <span class="p">}</span>
<span class="p">}</span> 
<span class="k">finally</span>
<span class="p">{</span>
    <span class="c1">//Dispose処理(4)</span>
<span class="p">}</span>
</code></pre></div>
</div>

<p>(1)あるコレクションに対し、矢印を作成する。<br>
(2)矢印が次の要素へ移動できる間(最後尾の要素に達するまで)、矢印を移動し<br>
(3)変数に、現在矢印が指し示す要素を与えられた型でキャストして代入する<br>
(4)矢印が移動できなくなったら、必要であればリソースの破棄を行う<br>
<a href="https://camo.qiitausercontent.com/50c0bbe7c46a175feef433d30e748e7d3f43aaf6/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3231343330302f64613035316531382d333036302d333866342d653764642d3131363763303334656435382e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F214300%2Fda051e18-3060-38f4-e7dd-1167c034ed58.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=daa9c300831fe0f83465c4738c3e0a43" alt="IEnumerator2.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/214300/da051e18-3060-38f4-e7dd-1167c034ed58.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F214300%2Fda051e18-3060-38f4-e7dd-1167c034ed58.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=f194eb363f04fba906a69bca1afc2874 1x" loading="lazy"></a><br>
図で説明すると、上のような感じになります。<br>
<code>foreach</code>文は、<code>IEnumerable</code>インターフェースを実装した要素に対して有効であり、かつ反復子をふんだんに使っているので上で書いた各プロパティ・メソッドの動作を理解するのには有効かと思います。実際に筆者も<code>foreach</code>文を見て、なるほどと納得することができました。</p>

<h1>
<span id="ienumerableインターフェースを用いたコレクションクラスの作成" class="fragment"></span><a href="#ienumerable%E3%82%A4%E3%83%B3%E3%82%BF%E3%83%BC%E3%83%95%E3%82%A7%E3%83%BC%E3%82%B9%E3%82%92%E7%94%A8%E3%81%84%E3%81%9F%E3%82%B3%E3%83%AC%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3%E3%82%AF%E3%83%A9%E3%82%B9%E3%81%AE%E4%BD%9C%E6%88%90"><i class="fa fa-link"></i></a>IEnumerableインターフェースを用いたコレクションクラスの作成</h1>

<p>上の<code>IEnumerator</code>の動作が分かったらもう簡単にコレクションクラスを自作できる、ということはないと思います。少なくとも筆者は、この記事を書いている今現在しっかり理解できていない部分も多くあります。筆者は、「理解するには実際に書いてみるべし！」という考えを持っているので、<br>
ここでは、<code>IEnumerable</code>インターフェースを用いた片方向連結リストを作成して、理解を深めていきたいと思います。<br>
なお、筆者はC#に精通している人ではないので、ここで書いたコードは実行速度や可読性を重視しているわけではないですがあしからず。</p>

<h2>
<span id="1作成するコレクションクラスの機能" class="fragment"></span><a href="#1%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B%E3%82%B3%E3%83%AC%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3%E3%82%AF%E3%83%A9%E3%82%B9%E3%81%AE%E6%A9%9F%E8%83%BD"><i class="fa fa-link"></i></a>(1)作成するコレクションクラスの機能</h2>

<p>片方向連結リストについては次のサイトを参照してください。<br>
<a href="http://ufcpp.net/study/algorithm/col_flist.html#impl%E3%81%A9%E3%81%AE%E3%82%88%E3%81%86%E3%81%AA" class="autolink" rel="nofollow noopener" target="_blank">http://ufcpp.net/study/algorithm/col_flist.html#implどのような</a><br>
アルゴリズムを学んでいる方にとってはお馴染みかもしれません。</p>

<h2>
<span id="2コンパイルするための最小限のコード" class="fragment"></span><a href="#2%E3%82%B3%E3%83%B3%E3%83%91%E3%82%A4%E3%83%AB%E3%81%99%E3%82%8B%E3%81%9F%E3%82%81%E3%81%AE%E6%9C%80%E5%B0%8F%E9%99%90%E3%81%AE%E3%82%B3%E3%83%BC%E3%83%89"><i class="fa fa-link"></i></a>(2)コンパイルするための最小限のコード</h2>

<p>クラス名は'Array'とし、<code>GetEnumerator</code>メソッドは<code>IEnumerator</code>インターフェースを実装した<code>ArrayEnumerator</code>クラスを返します。<br>
(<code>IEnumerator</code>インターフェースと<code>IEnumerator</code>インターフェースはジェネリックバージョンもあり、それを使用するほうが好ましいとされているようですが、めんどくさいのでここでは非ジェネリックバージョンのクラスを用いています。)</p>

<div class="code-frame" data-lang="C#">
<div class="code-lang"><span class="bold">Arrayクラス</span></div>
<div class="highlight"><pre class="with-code"><code><span class="c1">/// &lt;summary&gt;</span>
<span class="c1">/// 片方向連結リスト</span>
<span class="c1">/// &lt;/summary&gt;</span>
<span class="k">class</span> <span class="nc">Array</span> <span class="p">:</span> <span class="n">IEnumerable</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="n">IEnumerator</span> <span class="nf">GetEnumerator</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="k">new</span> <span class="nf">ArrayEnumerator</span><span class="p">();</span> <span class="p">}</span>

    <span class="k">class</span> <span class="nc">ArrayEnumerator</span> <span class="p">:</span> <span class="n">IEnumerator</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="n">Object</span> <span class="n">Current</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>
        <span class="k">public</span> <span class="kt">bool</span> <span class="nf">MoveNext</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="k">true</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">public</span> <span class="k">void</span> <span class="nf">Reset</span><span class="p">()</span> <span class="p">{</span>  <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<p>先にも書いたように、<code>IEnumerable</code>インターフェースを実装するにはこのコードは必須です。</p>

<h2>
<span id="3要素を格納するクラスを実装する" class="fragment"></span><a href="#3%E8%A6%81%E7%B4%A0%E3%82%92%E6%A0%BC%E7%B4%8D%E3%81%99%E3%82%8B%E3%82%AF%E3%83%A9%E3%82%B9%E3%82%92%E5%AE%9F%E8%A3%85%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>(3)要素を格納するクラスを実装する</h2>

<p>コレクションクラスは複数の要素を一つにまとめるためのクラスなので、もちろんコレクションクラスには要素を格納するためのデータ型が必要です(前に書いた要素を格納するための箱)。今回作成するコレクションクラスは、このデータ型を<code>Cell</code>クラスとして実装します。つまり、連結リストにおけるノードを<code>Cell</code>クラスに実装します。なお、<code>Cell</code>クラスは<code>Array</code>クラスの内部に記述します。</p>

<div class="code-frame" data-lang="C#">
<div class="code-lang"><span class="bold">Arrayクラス(Cellクラスの追加)</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">class</span> <span class="nc">Array</span> <span class="p">:</span> <span class="n">IEnumerable</span>
<span class="p">{</span>
    <span class="c1">//先頭のセルを格納するフィールド。</span>
    <span class="k">private</span> <span class="n">Cell</span> <span class="n">Head</span><span class="p">;</span>
    <span class="c1">//まず、コレクションのインスタンスを生成したと同時に</span>
    <span class="c1">//空のセル(フィールドがnullなセル。要素の格納はできない)を作成する</span>
    <span class="k">public</span> <span class="nf">Array</span><span class="p">()</span> <span class="p">{</span> <span class="n">Head</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Cell</span><span class="p">(</span><span class="k">null</span><span class="p">);</span> <span class="p">}</span>

    <span class="k">public</span> <span class="n">IEnumerator</span> <span class="nf">GetEnumerator</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="k">new</span> <span class="nf">ArrayEnumerator</span><span class="p">();</span> <span class="p">}</span>

    <span class="c1">//ここはあくまで現在のセルの場所を示すためのものなので、</span>
    <span class="c1">//例えば、新たにセルを加えたりなどセルの場所を扱う必要のない操作に関しては</span>
    <span class="c1">//一切不要（セルを加える操作では、このコレクションの場合常に先頭に追加されるため不要）</span>
    <span class="k">class</span> <span class="nc">ArrayEnumerator</span> <span class="p">:</span> <span class="n">IEnumerator</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="n">Object</span> <span class="n">Current</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>
        <span class="k">public</span> <span class="kt">bool</span> <span class="nf">MoveNext</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="k">true</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">public</span> <span class="k">void</span> <span class="nf">Reset</span><span class="p">()</span> <span class="p">{</span>  <span class="p">}</span>
    <span class="p">}</span>

    <span class="c1">//セル。要素と次のセルを格納するフィールドを持つ。</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">Cell</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="n">Object</span> <span class="n">Item</span> <span class="p">{</span> <span class="k">set</span><span class="p">;</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>
        <span class="k">public</span> <span class="n">Cell</span> <span class="n">Next</span> <span class="p">{</span> <span class="k">set</span><span class="p">;</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>
        <span class="c1">//新たにセルが作られたとき、各フィールドに値を代入する。</span>
        <span class="c1">//コンストラクタの引数は、セルの要素。</span>
        <span class="k">public</span> <span class="nf">Cell</span><span class="p">(</span><span class="n">Object</span> <span class="n">item</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">Item</span> <span class="p">=</span> <span class="n">item</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<p><code>Cell</code>クラス(以下セル)は、セルの持つ要素を格納する<code>Item</code>と、次に参照するセルを格納する<code>Next</code>というプロパティを持ちます。<br>
また、<code>Array</code>クラスは先頭のセルを格納する<code>Head</code>フィールドを持ちます。さらに、<code>Array</code>クラスのコンストラクタでは、空のセル(要素がnullなセル)を作成しています。これは矢印(反復子)次に指すセルが存在するかどうかを判断するためのものです。具体的な動作は以降の項で説明します。</p>

<h2>
<span id="4セルを追加する関数を追加する" class="fragment"></span><a href="#4%E3%82%BB%E3%83%AB%E3%82%92%E8%BF%BD%E5%8A%A0%E3%81%99%E3%82%8B%E9%96%A2%E6%95%B0%E3%82%92%E8%BF%BD%E5%8A%A0%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>(4)セルを追加する関数を追加する</h2>

<p>作成するコレクションクラスによって必要な機能や仕様は変わりますが、連結リストの場合は要素の追加する機能が必要です。ここでは、要素を追加する機能を<code>Add</code>メソッドとして実装します。加えて要素を追加する際の動作も説明します。</p>

<div class="code-frame" data-lang="C#">
<div class="code-lang"><span class="bold">Addメソッド</span></div>
<div class="highlight"><pre class="with-code"><code><span class="c1">/// &lt;summary&gt;</span>
<span class="c1">/// セルを新規に追加するメソッド。</span>
<span class="c1">/// &lt;/summary&gt;</span>
<span class="c1">//これがなくては何もできない。</span>
<span class="k">public</span> <span class="k">void</span> <span class="nf">Add</span><span class="p">(</span><span class="n">Object</span> <span class="n">item</span><span class="p">)</span>
<span class="p">{</span>        
    <span class="c1">//現在の先頭のセル(ヘッド)を一時的に保存</span>
    <span class="n">Cell</span> <span class="n">temphead</span> <span class="p">=</span> <span class="n">Head</span><span class="p">;</span>
    <span class="c1">//ヘッドに、新たに作成したセルを格納。</span>
    <span class="n">Head</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Cell</span><span class="p">(</span><span class="n">item</span><span class="p">);</span>
    <span class="c1">//ヘッドのもつ、次のセルを格納するフィールドに追加するセルを代入。</span>
    <span class="n">Head</span><span class="p">.</span><span class="n">Next</span> <span class="p">=</span> <span class="n">temphead</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
</div>

<p>Addメソッド内の動作は下の図のようになっています。<br>
<a href="https://camo.qiitausercontent.com/add58320ee2624e6375d254e3b38cf298bc3b53b/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3231343330302f66383735623438352d306439322d366236392d646362642d3835323264383761633762372e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F214300%2Ff875b485-0d92-6b69-dcbd-8522d87ac7b7.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=78e8491bfabc4cd3f15550dbb707407f" alt="Add.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/214300/f875b485-0d92-6b69-dcbd-8522d87ac7b7.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F214300%2Ff875b485-0d92-6b69-dcbd-8522d87ac7b7.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=cec108f8bca47ad541c8972879fd0f6b 1x" loading="lazy"></a><br>
図では、<code>Add</code>メソッド実行時の動作を表しています。ただし、図の上半分は新規にコレクションを作成した際の動作(空のセルの作成)を示しています。<br>
図の<code>Head</code>は、新たに<code>Add</code>で作成したセルを格納しています。<code>Add</code>メソッドで新たなセルを追加する前に、<code>temphead</code>(図の<code>PreHead</code>)に<code>Head</code>に格納されていたセルを格納します。新たに作成されたセルは<code>Head</code>に格納され、前の先頭のセルは<code>Head</code>の<code>Next</code>プロパティに格納されています。<br>
片方向連結リストはこのような構造になっているため、要素を先頭から順に呼び出していくことが非常に容易です。なぜなら、<code>Head</code>の中身さえわかれば、あとは<code>Next</code>の中身を順々に見ていくことで、追加したすべての要素を引き出すことができるからです。</p>

<h2>
<span id="5反復子を追加する" class="fragment"></span><a href="#5%E5%8F%8D%E5%BE%A9%E5%AD%90%E3%82%92%E8%BF%BD%E5%8A%A0%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>(5)反復子を追加する</h2>

<p><code>Add</code>メソッドを導入したことで、要素の追加を可能にしました。しかしこのままでは、それらの要素を<strong>読み取る</strong>ことはできません。そこで、要素の読み取りをするために新たに反復子を作成します。<br>
先に書いたように、要素へのアクセスは全て反復子を用いて行うので、読み取り機能を実装する際は必然的に反復子を使うことになります。<br>
ここでは、反復子のクラス名を<code>ArrayEnumerator</code>とし、<code>Array</code>クラス内に記述します。<br>
なお、<code>Cell</code>クラスも<code>Array</code>クラス内に記述していましたが、<code>Array</code>クラス外部に記述しても内部に記述した際の動作と変わりませんが、これらのクラスがそれぞれ独立していると、「<code>Array</code>クラスが使うセル、<code>Array</code>クラスが持つ反復子」というのがわかりにくくなってしまうのでそのように記述をしています。</p>

<div class="code-frame" data-lang="C#">
<div class="code-lang"><span class="bold">ArrayEnumeratorクラス</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">class</span> <span class="nc">ArrayEnumerator</span> <span class="p">:</span> <span class="n">IEnumerator</span>
<span class="p">{</span>
    <span class="n">Cell</span> <span class="n">CurrentCell</span><span class="p">;</span>
    <span class="n">Array</span> <span class="n">Array</span><span class="p">;</span>

    <span class="k">public</span> <span class="nf">ArrayEnumerator</span><span class="p">(</span><span class="n">Array</span> <span class="n">array</span><span class="p">)</span>
    <span class="p">{</span>        
        <span class="k">this</span><span class="p">.</span><span class="n">Array</span> <span class="p">=</span> <span class="n">array</span><span class="p">;</span>
        <span class="n">CurrentCell</span> <span class="p">=</span> <span class="k">null</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">//矢印が指し示すセルの要素を返す</span>
    <span class="k">public</span> <span class="n">Object</span> <span class="n">Current</span> <span class="p">{</span> <span class="k">get</span> <span class="p">{</span> <span class="k">return</span> <span class="n">CurrentCell</span><span class="p">.</span><span class="n">Item</span><span class="p">;</span> <span class="p">}</span> <span class="p">}</span>

    <span class="c1">//返り値は、ちゃんと動かせたかどうか。</span>
    <span class="c1">//true(矢印を動かせた)、false(もうこれ以上矢印を動かせない)</span>
    <span class="k">public</span> <span class="kt">bool</span> <span class="nf">MoveNext</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">//現在指し示しているセルの次のセル(Next)があるかどうかを調べる。、</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">CurrentCell</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span>
            <span class="c1">//矢印の位置を初期位置(Head)に戻す。</span>
            <span class="n">CurrentCell</span> <span class="p">=</span> <span class="n">Array</span><span class="p">.</span><span class="n">Head</span><span class="p">;</span>
        <span class="k">else</span>
            <span class="c1">//矢印を動かす。</span>
            <span class="n">CurrentCell</span> <span class="p">=</span> <span class="n">CurrentCell</span><span class="p">.</span><span class="n">Next</span><span class="p">;</span>

        <span class="c1">//条件文が同じなので統合したくなるが、それはできない。</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">CurrentCell</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span>
            <span class="k">return</span> <span class="k">false</span><span class="p">;</span>
        <span class="k">return</span> <span class="k">true</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">//先頭位置を元に戻す</span>
    <span class="k">public</span> <span class="k">void</span> <span class="nf">Reset</span><span class="p">()</span> <span class="p">{</span> <span class="n">CurrentCell</span> <span class="p">=</span> <span class="k">null</span><span class="p">;</span> <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<p>この記事の「<code>IEnumerable</code>インターフェースとは」の項に載せてある画像を見ながらの方が、<code>ArrayEnumerator</code>クラスの内容を理解しやすいと思います。<br>
まずフィールドとして、現在指し示しているセルを格納する<code>CurrentCell</code>と対象となるコレクションクラスのインスタンスを格納する<code>Array</code>を作成しました。<br>
コンストラクタでは、引数として矢印の作成の対象となるコレクションのインスタンスを取り、矢印の先頭位置を決めます。ここで先頭位置に<code>Head</code>を指定しないのは、この後出てくる<code>MoveNext</code>メソッドで先頭のセルが読み込まれないの防ぐためです。<br>
さて、その<code>MoveNext</code>メソッドですが、機能としては<strong>今示されているセルが空ならば矢印を先頭に持っていき、あれば次のセルに矢印を移し</strong>、<strong>もしその矢印が何のセルも示していなければfalse、何らかのセルを指していればtrueを返す</strong>というものです。なぜ<code>bool</code>値を返すのかは、<code>foreach</code>文の内部構造を見るとはっきりすると思います。この機能からもわかるように<code>MoveNext</code>メソッドが、読み取り機能の中核をなしているといっても過言ではありません。<br>
<code>Current</code>メソッドと、<code>Reset</code>メソッドについてはそこまで難しいことはしていないので特に説明はしません。</p>

<p>最後にこれまでのコードをまとめておきます。このクラスの変更に伴って<code>Array</code>クラス自身の内容も少し変更したので確認してみてください。</p>

<div class="code-frame" data-lang="C#">
<div class="code-lang"><span class="bold">Arrayクラス(完成形)</span></div>
<div class="highlight"><pre class="with-code"><code><span class="c1">/// &lt;summary&gt;</span>
<span class="c1">/// 片方向連結リスト</span>
<span class="c1">/// &lt;/summary&gt;</span>
<span class="k">class</span> <span class="nc">Array</span> <span class="p">:</span> <span class="n">IEnumerable</span>
<span class="p">{</span>
    <span class="c1">//先頭のセルを格納するフィールド。</span>
    <span class="k">private</span> <span class="n">Cell</span> <span class="n">Head</span><span class="p">;</span>

    <span class="c1">//空のセル(フィールドがnullなセル。要素の格納はできない)を作成する</span>
    <span class="k">public</span> <span class="nf">Array</span><span class="p">()</span> <span class="p">{</span> <span class="n">Head</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Cell</span><span class="p">(</span><span class="k">null</span><span class="p">);</span> <span class="p">}</span>

    <span class="k">public</span> <span class="n">IEnumerator</span> <span class="nf">GetEnumerator</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="k">new</span> <span class="nf">ArrayEnumerator</span><span class="p">(</span><span class="k">this</span><span class="p">);</span> <span class="p">}</span><span class="c1">//</span>

    <span class="c1">//反復子のクラス</span>
    <span class="k">class</span> <span class="nc">ArrayEnumerator</span> <span class="p">:</span> <span class="n">IEnumerator</span>
    <span class="p">{</span>
        <span class="n">Cell</span> <span class="n">CurrentCell</span><span class="p">;</span>
        <span class="n">Array</span> <span class="n">Array</span><span class="p">;</span>

        <span class="k">public</span> <span class="nf">ArrayEnumerator</span><span class="p">(</span><span class="n">Array</span> <span class="n">array</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="n">Array</span> <span class="p">=</span> <span class="n">array</span><span class="p">;</span>
            <span class="c1">//初めにどのセルを指し示すのかを決める。          </span>
            <span class="n">CurrentCell</span> <span class="p">=</span> <span class="k">null</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="c1">//現在指し示されているセルの要素を返す</span>
        <span class="k">public</span> <span class="n">Object</span> <span class="n">Current</span> <span class="p">{</span> <span class="k">get</span> <span class="p">{</span> <span class="k">return</span> <span class="n">CurrentCell</span><span class="p">.</span><span class="n">Item</span><span class="p">;</span> <span class="p">}</span> <span class="p">}</span>

        <span class="c1">//返り値のbool値は、ちゃんと動かせたかどうかという情報。</span>
        <span class="c1">//true(矢印を動かせた)、false(もうこれ以上矢印を動かせない)</span>
        <span class="k">public</span> <span class="kt">bool</span> <span class="nf">MoveNext</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="c1">//現在指し示しているセルの次のセル(Next)があるかどうかを調べる。、</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">CurrentCell</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span>
                <span class="c1">//矢印の位置を初期位置(Head)に戻す。</span>
                <span class="n">CurrentCell</span> <span class="p">=</span> <span class="n">Array</span><span class="p">.</span><span class="n">Head</span><span class="p">;</span>
            <span class="k">else</span>
                <span class="c1">//矢印を動かす。</span>
            <span class="n">CurrentCell</span> <span class="p">=</span> <span class="n">CurrentCell</span><span class="p">.</span><span class="n">Next</span><span class="p">;</span>

            <span class="c1">//条件文が同じなので統合したくなるが、それはできない。</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">CurrentCell</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span>
                <span class="k">return</span> <span class="k">false</span><span class="p">;</span>
            <span class="k">return</span> <span class="k">true</span><span class="p">;</span>

        <span class="p">}</span>
        <span class="c1">//先頭位置を元に戻す</span>
        <span class="k">public</span> <span class="k">void</span> <span class="nf">Reset</span><span class="p">()</span> <span class="p">{</span> <span class="n">CurrentCell</span> <span class="p">=</span> <span class="k">null</span><span class="p">;</span> <span class="p">}</span>
    <span class="p">}</span>

    <span class="c1">//セル。要素と次のセルを格納するフィールドを持つ。</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">Cell</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="n">Object</span> <span class="n">Item</span> <span class="p">{</span> <span class="k">set</span><span class="p">;</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>
        <span class="k">public</span> <span class="n">Cell</span> <span class="n">Next</span> <span class="p">{</span> <span class="k">set</span><span class="p">;</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>

        <span class="c1">//新たにセルが作られたとき、各フィールドに値を代入する。</span>
        <span class="k">public</span> <span class="nf">Cell</span><span class="p">(</span><span class="n">Object</span> <span class="n">item</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">Item</span> <span class="p">=</span> <span class="n">item</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="c1">/// &lt;summary&gt;</span>
    <span class="c1">/// セルを新規に追加するメソッド。</span>
    <span class="c1">/// &lt;/summary&gt;</span>
    <span class="k">public</span> <span class="k">void</span> <span class="nf">Add</span><span class="p">(</span><span class="n">Object</span> <span class="n">item</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">//現在のヘッドを一時的に保存</span>
        <span class="kt">var</span> <span class="n">temphead</span> <span class="p">=</span> <span class="n">Head</span><span class="p">;</span>
        <span class="c1">//先頭のセルを、追加したセルに切り替える。</span>
        <span class="n">Head</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Cell</span><span class="p">(</span><span class="n">item</span><span class="p">);</span>
        <span class="c1">//先頭のセルのもつ、次のセルを格納するフィールドに追加するセルを代入。</span>
        <span class="n">Head</span><span class="p">.</span><span class="n">Next</span> <span class="p">=</span> <span class="n">temphead</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<p><code>Array</code>クラスが完成しましたが、このままでは機能としては貧弱すぎてほとんど使い物になりません(これと完全上位互換なコレクションクラスに<code>List&lt;T&gt;</code>クラスが存在します)。<br>
実際に<code>IEnumerable</code>インターフェースを実装する際には、例えばコレクションを任意の順にソーティングする機能をつけるなどの機能追加や、各セルに対しインデックスを関連付けるなどして独自の機能や仕様を追加すると思います。</p>

<h1>
<span id="まとめ" class="fragment"></span><a href="#%E3%81%BE%E3%81%A8%E3%82%81"><i class="fa fa-link"></i></a>まとめ</h1>

<p>ここまで説明してきましたが、実際筆者はこの記事を書く直前まで<code>IEnumerable</code>インターフェースの仕組みや実装方法についてほとんどわかっていませんでした。そのため、この記事を書きながらこのインターフェースについて勉強し、自分なりにこういうことではないかというのを考えながら書いていました。「ちゃんと理解してから書けよ！」と言われそうですが、自分では書いているうちにだんだんと理解できたのでまあいいか、と思っています。</p>

<h1>
<span id="追記" class="fragment"></span><a href="#%E8%BF%BD%E8%A8%98"><i class="fa fa-link"></i></a>追記</h1>

<p>ある方がコメントで教えてくださったのですが、現在ではこれまで筆者が書いてきたような実装の仕方はほとんどされておらず、通常反復子を<code>yield return</code>を用いて書き、かつ<code>IEnumerable</code>インターフェースではなく、そのジェネリックバージョンの<code>IEnumerable&lt;T&gt;</code>インターフェースを実装するそうです。<br>
実際にコレクションクラスを自作する際はこれらのことに注意したほうがいいと思います。</p>
</div></div></section><div class="css-1yzj1fm"><div class="css-1uv1qiv"><span class="fa fa-twitter"></span></div><div class="css-1uv1qiv"><span class="fa fa-facebook"></span></div></div><div class="apm-Content"><div class="apm-Content_title">Why not register and get more from Qiita?</div><ol class="apm-Content_list"><li>We will deliver articles that match you<div class="description">By following users and tags, you can catch up information on technical fields that you are interested in as a whole</div></li><li>you can read useful information later efficiently<div class="description">By &quot;stocking&quot; the articles you like, you can search right away</div></li><div><a class="apm-Content_help" href="https://help.qiita.com/ja/articles/qiita-login-user" target="_blank"><i class="fa fa-fw fa-arrow-circle-right"></i>What you can do with signing up</a></div></ol><a href="/signup?callback_action=login_or_signup&amp;redirect_to=%2Fkerochan%2Fitems%2F13bbbbb14c3a309c7ec4&amp;realm=qiita" class="apm-Content_button apm-Content_button-signup">Sign up</a><a href="/login?callback_action=login_or_signup&amp;redirect_to=%2Fkerochan%2Fitems%2F13bbbbb14c3a309c7ec4&amp;realm=qiita" class="apm-Content_button apm-Content_button-signin">Login</a></div></div><div class="css-helsa7"></div></div></div></div><div class="css-109dbrr"><div class="css-5jpx49"><div class="css-mnxgyc"><button class=" css-1vlpknv"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/kerochan/items/13bbbbb14c3a309c7ec4/likers" class="css-1iupg5d">63</a></div><div class="css-fsjkhv"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-1b17vb0">54</span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-7i7f4d"><div class="css-1gj7nt">Improve article</div><a href="/drafts/13bbbbb14c3a309c7ec4/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/kerochan/items/13bbbbb14c3a309c7ec4/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/kerochan/items/13bbbbb14c3a309c7ec4/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/kerochan/items/13bbbbb14c3a309c7ec4/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/kerochan/items/13bbbbb14c3a309c7ec4.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="PersonalArticlePage" data-dom-id="PersonalArticlePage-react-component-8ef5bd31-3bc5-46d7-a268-122cdd42f864">{"authorAnalyticsTrackingId":null,"organizationAnalyticsTrackingId":null}</script>
      
<footer id="globalFooter" class="st-Footer"><div class="st-Footer_container"><div class="st-Footer_start"><div class="st-Footer_logo"><svg viewbox="0 0 426.57 130" xmlns="http://www.w3.org/2000/svg"><circle cx="167.08" cy="21.4" r="12.28" /><path d="M250.81 29.66h23.48v18.9h-23.48z" /><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z" /><circle cx="216.33" cy="21.4" r="12.28" /></svg></div><div class="st-Footer_catchcopy">How developers code is here.</div><div class="st-Footer_socials"><a class="fa fa-twitter" href="https://twitter.com/qiita"></a><a class="fa fa-facebook-square" href="https://www.facebook.com/qiita/"></a></div></div><div class="st-Footer_end"><div class="st-Footer_qiita"><div class="st-Footer_label">Qiita</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="/about">About</a><a href="/terms">Terms</a><a href="/privacy">Privacy</a><a target="_blank" href="http://help.qiita.com/ja/articles/qiita-community-guideline">Guideline</a><a target="_blank" href="https://help.qiita.com/ja/articles/others-brand-guideline">Design Guideline</a></div><div class="st-Footer_column"><a href="/release-notes">Release</a><a href="/api/v2/docs">API</a><a href="/feedback/new">ご意見</a><a href="https://help.qiita.com">Help</a><a target="_blank" href="https://qiita.com/ads?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Advertisement</a></div></div></div><div class="st-Footer_increments"><div class="st-Footer_label">Increments</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="https://increments.co.jp/company/">About</a><a href="https://increments.co.jp/jobs/">採用情報</a><a href="https://blog.qiita.com">Blog</a></div><div class="st-Footer_column"><a href="https://teams.qiita.com/">Qiita Team</a><a href="https://jobs.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Jobs</a><a href="https://zine.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Zine</a></div></div></div></div></div><div class="st-Footer_copyright">© 2011-2021 Increments Inc.</div></footer><div id="Snackbar-react-component-193f6a89-6fe0-45f9-a3f7-197f4ec6cd07"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="Snackbar" data-dom-id="Snackbar-react-component-193f6a89-6fe0-45f9-a3f7-197f4ec6cd07">{}</script>
      
<div id="LoginModal-react-component-94ad8c70-4384-4395-b170-07fcbe25e147"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="LoginModal" data-dom-id="LoginModal-react-component-94ad8c70-4384-4395-b170-07fcbe25e147">{}</script>
      
<div id="StockModal-react-component-b1954db1-6c2b-4dd0-8914-51951e061a9c"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="StockModal" data-dom-id="StockModal-react-component-b1954db1-6c2b-4dd0-8914-51951e061a9c">{}</script>
      
</div><div id="dataContainer" style="display: none;" data-config="{&quot;actionPath&quot;:&quot;public/items#show&quot;,&quot;settings&quot;:{&quot;analyticsTrackingId&quot;:&quot;UA-24675221-12&quot;,&quot;assetsMap&quot;:{},&quot;csrfToken&quot;:&quot;1CD4v/2ddOAlwiYriR5frY8TSD8sJSPxhWQM9yIK0MwgX+ju1obF9j7PxVBYyVgfWMU8+w6EuwW6ZoOtwqBD6Q==&quot;,&quot;locale&quot;:&quot;en&quot;},&quot;currentUser&quot;:null}" /></body></html><script type="application/json" data-js-react-on-rails-store="AppStoreWithReactOnRails">{"snackbar":{"type":"","body":"","isActive":false},"article":{"article":{"body":"\u003cp\u003e※この記事は、AmusementCreators Advent Calendar 2017 の13日目の記事です。\u003c/p\u003e\n\n\u003cp\u003eC#でIEnumerableインターフェースの実装に関していろいろ考えてやってみました。そのメモ書きとして残しておこうかと。\u003cbr\u003e\n※検証した環境はWindows8.1 64bit .netframework4.7 開発ツールはVS2017です(C#のバージョンはおそらく7.1)。\u003c/p\u003e\n\n\u003cp\u003e本記事ではインターフェースや\u003ccode\u003eforeach\u003c/code\u003e文についていちいち説明はしませんので、それらについてよくわからないという人は、次のサイトを見ておくことをお勧めします。\u003cbr\u003e\n\u003ca href=\"http://ufcpp.net/study/csharp/oo_interface.html\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://ufcpp.net/study/csharp/oo_interface.html\u003c/a\u003e\u003cbr\u003e\n\u003ca href=\"http://ufcpp.net/study/csharp/sp_foreach.html\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://ufcpp.net/study/csharp/sp_foreach.html\u003c/a\u003e\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"ienumerableインターフェースとは\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#ienumerable%E3%82%A4%E3%83%B3%E3%82%BF%E3%83%BC%E3%83%95%E3%82%A7%E3%83%BC%E3%82%B9%E3%81%A8%E3%81%AF\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003ccode\u003eIenumerable\u003c/code\u003eインターフェースとは\u003c/h1\u003e\n\n\u003cp\u003eIenumerableインターフェースとは、「\u003cstrong\u003eコレクションに対する単純な反復処理をサポートする反復子を公開する\u003c/strong\u003e」インターフェースのことです。\u003cbr\u003e\n要は「\u003cstrong\u003e繰り返して連続して値を読み込むことができる機能を提供する\u003c/strong\u003e」インターフェースのことです。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"ienumerableインターフェースの構造\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#ienumerable%E3%82%A4%E3%83%B3%E3%82%BF%E3%83%BC%E3%83%95%E3%82%A7%E3%83%BC%E3%82%B9%E3%81%AE%E6%A7%8B%E9%80%A0\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003ccode\u003eIEnumerable\u003c/code\u003eインターフェースの構造\u003c/h1\u003e\n\n\u003cp\u003eIEnumerableインターフェースをコンパイルするのに必要なコードを下に示します。なお、以下\u003ccode\u003eSystem\u003c/code\u003e名前空間、\u003ccode\u003eSystem.Collections\u003c/code\u003e名前空間、\u003ccode\u003eSystem.Collections.Generic\u003c/code\u003e名前空間は\u003ccode\u003eusing\u003c/code\u003eディレクティブによって省略されているものとします。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eIEnumerableインターフェース実装に必要な最小構造\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eArray\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eIEnumerable\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eIEnumerator\u003c/span\u003e \u003cspan class=\"nf\"\u003eGetEnumerator\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eArrayEnumerator\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eArrayEnumerator\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eIEnumerator\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eObject\u003c/span\u003e \u003cspan class=\"n\"\u003eCurrent\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n            \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"nf\"\u003eMoveNext\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n            \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eReset\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003eもちろんこのままでは使い物になりませんが、コンパイルは通ります。筆者も、はじめ見たときはあまりにシンプルで拍子抜けしてしまいました。しかしこのシンプルさこそが応用を可能にしているのではないかと思います。\u003cbr\u003e\n\u003ccode\u003eIEnumerable\u003c/code\u003eインターフェースは、\u003ccode\u003eIEnumerator\u003c/code\u003eインターフェースを返す引数なしの関数を持ちます。また、\u003ccode\u003eIEnumerator\u003c/code\u003eインターフェースは上記三つのメソッドおよびプロパティを持ちます。\u003cbr\u003e\n基本的に、コレクションに対する操作はこの\u003ccode\u003eIEnumerator\u003c/code\u003eインターフェース(\u003cstrong\u003e反復子\u003c/strong\u003eと呼ばれる)を介することによって行われます。筆者は、この反復子の動作がなかなか理解出来なかったのですが、反復子を「\u003cstrong\u003eコレクションのどのセルを指し示すかを表す矢印\u003c/strong\u003e」と考えたことですんなりと理解できました。\u003cbr\u003e\n(「セル」とは、ここでは要素を格納する箱を表します。コレクションでは要素だけでなく別の値も同時に保存する必要があるので、それらが入るような箱を用意しなければいけません。詳しくは後程話します)\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/75169c57f840157eba7b6a831d20168689240ad8/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3231343330302f38623237333439382d666432382d636537372d656332612d3934646137333661643031612e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F214300%2F8b273498-fd28-ce77-ec2a-94da736ad01a.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=2fbfba033c609e79c58834512cd9cdcb\" alt=\"IEnumerator.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/214300/8b273498-fd28-ce77-ec2a-94da736ad01a.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F214300%2F8b273498-fd28-ce77-ec2a-94da736ad01a.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=687404366c1b77cd12f835d77fdc9630 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003cbr\u003e\nこの図を用いて、\u003ccode\u003eIEnumerator\u003c/code\u003eインターフェースの各プロパティ、メソッドの動作を説明すると、\u003cbr\u003e\n(1)\u003ccode\u003eCurrent\u003c/code\u003eプロパティ：現在矢印の指し示す要素を保管しておくプロパティ\u003cbr\u003e\n(2)\u003ccode\u003eMoveNext\u003c/code\u003eメソッド：矢印の指し示す要素を次へ移すメソッド。移動できれば\u003ccode\u003etrue\u003c/code\u003e、できなければ\u003ccode\u003efalse\u003c/code\u003eを返す。\u003cbr\u003e\n(3)\u003ccode\u003eReset\u003c/code\u003eプロパティ：矢印の指し示す要素を一番初めへ戻すメソッド。\u003c/p\u003e\n\n\u003cp\u003eとなります。筆者はこのイメージで動作を理解しています。\u003cbr\u003e\nこれを見れば、\u003ccode\u003eforeach\u003c/code\u003e文の動作も容易に理解することができると思います。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eforeach文の展開\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"c1\"\u003e//`foreach(型名 変数 in コレクション){文}は、次のように展開されます。\u003c/span\u003e\n\u003cspan class=\"k\"\u003etry\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eIEnumerator\u003c/span\u003e \u003cspan class=\"n\"\u003ee\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"err\"\u003eコレクション\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eGetEnumerator\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\u003cspan class=\"c1\"\u003e//(1)\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ewhile\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ee\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eMoveNext\u003c/span\u003e\u003cspan class=\"p\"\u003e())\u003c/span\u003e\u003cspan class=\"c1\"\u003e//(2)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"err\"\u003e型名\u003c/span\u003e \u003cspan class=\"err\"\u003e変数\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"err\"\u003e型名\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"n\"\u003ee\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eCurrent\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\u003cspan class=\"c1\"\u003e//(3)\u003c/span\u003e\n        \u003cspan class=\"err\"\u003e文\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e \n\u003cspan class=\"k\"\u003efinally\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e//Dispose処理(4)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e(1)あるコレクションに対し、矢印を作成する。\u003cbr\u003e\n(2)矢印が次の要素へ移動できる間(最後尾の要素に達するまで)、矢印を移動し\u003cbr\u003e\n(3)変数に、現在矢印が指し示す要素を与えられた型でキャストして代入する\u003cbr\u003e\n(4)矢印が移動できなくなったら、必要であればリソースの破棄を行う\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/50c0bbe7c46a175feef433d30e748e7d3f43aaf6/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3231343330302f64613035316531382d333036302d333866342d653764642d3131363763303334656435382e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F214300%2Fda051e18-3060-38f4-e7dd-1167c034ed58.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=daa9c300831fe0f83465c4738c3e0a43\" alt=\"IEnumerator2.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/214300/da051e18-3060-38f4-e7dd-1167c034ed58.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F214300%2Fda051e18-3060-38f4-e7dd-1167c034ed58.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=f194eb363f04fba906a69bca1afc2874 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003cbr\u003e\n図で説明すると、上のような感じになります。\u003cbr\u003e\n\u003ccode\u003eforeach\u003c/code\u003e文は、\u003ccode\u003eIEnumerable\u003c/code\u003eインターフェースを実装した要素に対して有効であり、かつ反復子をふんだんに使っているので上で書いた各プロパティ・メソッドの動作を理解するのには有効かと思います。実際に筆者も\u003ccode\u003eforeach\u003c/code\u003e文を見て、なるほどと納得することができました。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"ienumerableインターフェースを用いたコレクションクラスの作成\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#ienumerable%E3%82%A4%E3%83%B3%E3%82%BF%E3%83%BC%E3%83%95%E3%82%A7%E3%83%BC%E3%82%B9%E3%82%92%E7%94%A8%E3%81%84%E3%81%9F%E3%82%B3%E3%83%AC%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3%E3%82%AF%E3%83%A9%E3%82%B9%E3%81%AE%E4%BD%9C%E6%88%90\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eIEnumerableインターフェースを用いたコレクションクラスの作成\u003c/h1\u003e\n\n\u003cp\u003e上の\u003ccode\u003eIEnumerator\u003c/code\u003eの動作が分かったらもう簡単にコレクションクラスを自作できる、ということはないと思います。少なくとも筆者は、この記事を書いている今現在しっかり理解できていない部分も多くあります。筆者は、「理解するには実際に書いてみるべし！」という考えを持っているので、\u003cbr\u003e\nここでは、\u003ccode\u003eIEnumerable\u003c/code\u003eインターフェースを用いた片方向連結リストを作成して、理解を深めていきたいと思います。\u003cbr\u003e\nなお、筆者はC#に精通している人ではないので、ここで書いたコードは実行速度や可読性を重視しているわけではないですがあしからず。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"1作成するコレクションクラスの機能\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#1%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B%E3%82%B3%E3%83%AC%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3%E3%82%AF%E3%83%A9%E3%82%B9%E3%81%AE%E6%A9%9F%E8%83%BD\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e(1)作成するコレクションクラスの機能\u003c/h2\u003e\n\n\u003cp\u003e片方向連結リストについては次のサイトを参照してください。\u003cbr\u003e\n\u003ca href=\"http://ufcpp.net/study/algorithm/col_flist.html#impl%E3%81%A9%E3%81%AE%E3%82%88%E3%81%86%E3%81%AA\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://ufcpp.net/study/algorithm/col_flist.html#implどのような\u003c/a\u003e\u003cbr\u003e\nアルゴリズムを学んでいる方にとってはお馴染みかもしれません。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"2コンパイルするための最小限のコード\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#2%E3%82%B3%E3%83%B3%E3%83%91%E3%82%A4%E3%83%AB%E3%81%99%E3%82%8B%E3%81%9F%E3%82%81%E3%81%AE%E6%9C%80%E5%B0%8F%E9%99%90%E3%81%AE%E3%82%B3%E3%83%BC%E3%83%89\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e(2)コンパイルするための最小限のコード\u003c/h2\u003e\n\n\u003cp\u003eクラス名は'Array'とし、\u003ccode\u003eGetEnumerator\u003c/code\u003eメソッドは\u003ccode\u003eIEnumerator\u003c/code\u003eインターフェースを実装した\u003ccode\u003eArrayEnumerator\u003c/code\u003eクラスを返します。\u003cbr\u003e\n(\u003ccode\u003eIEnumerator\u003c/code\u003eインターフェースと\u003ccode\u003eIEnumerator\u003c/code\u003eインターフェースはジェネリックバージョンもあり、それを使用するほうが好ましいとされているようですが、めんどくさいのでここでは非ジェネリックバージョンのクラスを用いています。)\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eArrayクラス\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"c1\"\u003e/// \u0026lt;summary\u0026gt;\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e/// 片方向連結リスト\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e/// \u0026lt;/summary\u0026gt;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eArray\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eIEnumerable\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eIEnumerator\u003c/span\u003e \u003cspan class=\"nf\"\u003eGetEnumerator\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eArrayEnumerator\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eArrayEnumerator\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eIEnumerator\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eObject\u003c/span\u003e \u003cspan class=\"n\"\u003eCurrent\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"nf\"\u003eMoveNext\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eReset\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e  \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e先にも書いたように、\u003ccode\u003eIEnumerable\u003c/code\u003eインターフェースを実装するにはこのコードは必須です。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"3要素を格納するクラスを実装する\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#3%E8%A6%81%E7%B4%A0%E3%82%92%E6%A0%BC%E7%B4%8D%E3%81%99%E3%82%8B%E3%82%AF%E3%83%A9%E3%82%B9%E3%82%92%E5%AE%9F%E8%A3%85%E3%81%99%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e(3)要素を格納するクラスを実装する\u003c/h2\u003e\n\n\u003cp\u003eコレクションクラスは複数の要素を一つにまとめるためのクラスなので、もちろんコレクションクラスには要素を格納するためのデータ型が必要です(前に書いた要素を格納するための箱)。今回作成するコレクションクラスは、このデータ型を\u003ccode\u003eCell\u003c/code\u003eクラスとして実装します。つまり、連結リストにおけるノードを\u003ccode\u003eCell\u003c/code\u003eクラスに実装します。なお、\u003ccode\u003eCell\u003c/code\u003eクラスは\u003ccode\u003eArray\u003c/code\u003eクラスの内部に記述します。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eArrayクラス(Cellクラスの追加)\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eArray\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eIEnumerable\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e//先頭のセルを格納するフィールド。\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003eCell\u003c/span\u003e \u003cspan class=\"n\"\u003eHead\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e//まず、コレクションのインスタンスを生成したと同時に\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e//空のセル(フィールドがnullなセル。要素の格納はできない)を作成する\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003eArray\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"n\"\u003eHead\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eCell\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eIEnumerator\u003c/span\u003e \u003cspan class=\"nf\"\u003eGetEnumerator\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eArrayEnumerator\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e//ここはあくまで現在のセルの場所を示すためのものなので、\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e//例えば、新たにセルを加えたりなどセルの場所を扱う必要のない操作に関しては\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e//一切不要（セルを加える操作では、このコレクションの場合常に先頭に追加されるため不要）\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eArrayEnumerator\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eIEnumerator\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eObject\u003c/span\u003e \u003cspan class=\"n\"\u003eCurrent\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"nf\"\u003eMoveNext\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eReset\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e  \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e//セル。要素と次のセルを格納するフィールドを持つ。\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eCell\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eObject\u003c/span\u003e \u003cspan class=\"n\"\u003eItem\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eset\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eCell\u003c/span\u003e \u003cspan class=\"n\"\u003eNext\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eset\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e//新たにセルが作られたとき、各フィールドに値を代入する。\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e//コンストラクタの引数は、セルの要素。\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003eCell\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eObject\u003c/span\u003e \u003cspan class=\"n\"\u003eitem\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eItem\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eitem\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e\u003ccode\u003eCell\u003c/code\u003eクラス(以下セル)は、セルの持つ要素を格納する\u003ccode\u003eItem\u003c/code\u003eと、次に参照するセルを格納する\u003ccode\u003eNext\u003c/code\u003eというプロパティを持ちます。\u003cbr\u003e\nまた、\u003ccode\u003eArray\u003c/code\u003eクラスは先頭のセルを格納する\u003ccode\u003eHead\u003c/code\u003eフィールドを持ちます。さらに、\u003ccode\u003eArray\u003c/code\u003eクラスのコンストラクタでは、空のセル(要素がnullなセル)を作成しています。これは矢印(反復子)次に指すセルが存在するかどうかを判断するためのものです。具体的な動作は以降の項で説明します。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"4セルを追加する関数を追加する\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#4%E3%82%BB%E3%83%AB%E3%82%92%E8%BF%BD%E5%8A%A0%E3%81%99%E3%82%8B%E9%96%A2%E6%95%B0%E3%82%92%E8%BF%BD%E5%8A%A0%E3%81%99%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e(4)セルを追加する関数を追加する\u003c/h2\u003e\n\n\u003cp\u003e作成するコレクションクラスによって必要な機能や仕様は変わりますが、連結リストの場合は要素の追加する機能が必要です。ここでは、要素を追加する機能を\u003ccode\u003eAdd\u003c/code\u003eメソッドとして実装します。加えて要素を追加する際の動作も説明します。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eAddメソッド\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"c1\"\u003e/// \u0026lt;summary\u0026gt;\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e/// セルを新規に追加するメソッド。\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e/// \u0026lt;/summary\u0026gt;\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e//これがなくては何もできない。\u003c/span\u003e\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eAdd\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eObject\u003c/span\u003e \u003cspan class=\"n\"\u003eitem\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e        \n    \u003cspan class=\"c1\"\u003e//現在の先頭のセル(ヘッド)を一時的に保存\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eCell\u003c/span\u003e \u003cspan class=\"n\"\u003etemphead\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eHead\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e//ヘッドに、新たに作成したセルを格納。\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eHead\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eCell\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eitem\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e//ヘッドのもつ、次のセルを格納するフィールドに追加するセルを代入。\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eHead\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eNext\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003etemphead\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003eAddメソッド内の動作は下の図のようになっています。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/add58320ee2624e6375d254e3b38cf298bc3b53b/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3231343330302f66383735623438352d306439322d366236392d646362642d3835323264383761633762372e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F214300%2Ff875b485-0d92-6b69-dcbd-8522d87ac7b7.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=78e8491bfabc4cd3f15550dbb707407f\" alt=\"Add.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/214300/f875b485-0d92-6b69-dcbd-8522d87ac7b7.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F214300%2Ff875b485-0d92-6b69-dcbd-8522d87ac7b7.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=cec108f8bca47ad541c8972879fd0f6b 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003cbr\u003e\n図では、\u003ccode\u003eAdd\u003c/code\u003eメソッド実行時の動作を表しています。ただし、図の上半分は新規にコレクションを作成した際の動作(空のセルの作成)を示しています。\u003cbr\u003e\n図の\u003ccode\u003eHead\u003c/code\u003eは、新たに\u003ccode\u003eAdd\u003c/code\u003eで作成したセルを格納しています。\u003ccode\u003eAdd\u003c/code\u003eメソッドで新たなセルを追加する前に、\u003ccode\u003etemphead\u003c/code\u003e(図の\u003ccode\u003ePreHead\u003c/code\u003e)に\u003ccode\u003eHead\u003c/code\u003eに格納されていたセルを格納します。新たに作成されたセルは\u003ccode\u003eHead\u003c/code\u003eに格納され、前の先頭のセルは\u003ccode\u003eHead\u003c/code\u003eの\u003ccode\u003eNext\u003c/code\u003eプロパティに格納されています。\u003cbr\u003e\n片方向連結リストはこのような構造になっているため、要素を先頭から順に呼び出していくことが非常に容易です。なぜなら、\u003ccode\u003eHead\u003c/code\u003eの中身さえわかれば、あとは\u003ccode\u003eNext\u003c/code\u003eの中身を順々に見ていくことで、追加したすべての要素を引き出すことができるからです。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"5反復子を追加する\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#5%E5%8F%8D%E5%BE%A9%E5%AD%90%E3%82%92%E8%BF%BD%E5%8A%A0%E3%81%99%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e(5)反復子を追加する\u003c/h2\u003e\n\n\u003cp\u003e\u003ccode\u003eAdd\u003c/code\u003eメソッドを導入したことで、要素の追加を可能にしました。しかしこのままでは、それらの要素を\u003cstrong\u003e読み取る\u003c/strong\u003eことはできません。そこで、要素の読み取りをするために新たに反復子を作成します。\u003cbr\u003e\n先に書いたように、要素へのアクセスは全て反復子を用いて行うので、読み取り機能を実装する際は必然的に反復子を使うことになります。\u003cbr\u003e\nここでは、反復子のクラス名を\u003ccode\u003eArrayEnumerator\u003c/code\u003eとし、\u003ccode\u003eArray\u003c/code\u003eクラス内に記述します。\u003cbr\u003e\nなお、\u003ccode\u003eCell\u003c/code\u003eクラスも\u003ccode\u003eArray\u003c/code\u003eクラス内に記述していましたが、\u003ccode\u003eArray\u003c/code\u003eクラス外部に記述しても内部に記述した際の動作と変わりませんが、これらのクラスがそれぞれ独立していると、「\u003ccode\u003eArray\u003c/code\u003eクラスが使うセル、\u003ccode\u003eArray\u003c/code\u003eクラスが持つ反復子」というのがわかりにくくなってしまうのでそのように記述をしています。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eArrayEnumeratorクラス\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eArrayEnumerator\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eIEnumerator\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eCell\u003c/span\u003e \u003cspan class=\"n\"\u003eCurrentCell\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eArray\u003c/span\u003e \u003cspan class=\"n\"\u003eArray\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003eArrayEnumerator\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eArray\u003c/span\u003e \u003cspan class=\"n\"\u003earray\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e        \n        \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eArray\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003earray\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eCurrentCell\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e//矢印が指し示すセルの要素を返す\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eObject\u003c/span\u003e \u003cspan class=\"n\"\u003eCurrent\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003eCurrentCell\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eItem\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e//返り値は、ちゃんと動かせたかどうか。\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e//true(矢印を動かせた)、false(もうこれ以上矢印を動かせない)\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"nf\"\u003eMoveNext\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e//現在指し示しているセルの次のセル(Next)があるかどうかを調べる。、\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eCurrentCell\u003c/span\u003e \u003cspan class=\"p\"\u003e==\u003c/span\u003e \u003cspan class=\"k\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"c1\"\u003e//矢印の位置を初期位置(Head)に戻す。\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eCurrentCell\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eArray\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eHead\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eelse\u003c/span\u003e\n            \u003cspan class=\"c1\"\u003e//矢印を動かす。\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eCurrentCell\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eCurrentCell\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eNext\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n        \u003cspan class=\"c1\"\u003e//条件文が同じなので統合したくなるが、それはできない。\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eCurrentCell\u003c/span\u003e \u003cspan class=\"p\"\u003e==\u003c/span\u003e \u003cspan class=\"k\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003efalse\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e//先頭位置を元に戻す\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eReset\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"n\"\u003eCurrentCell\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003eこの記事の「\u003ccode\u003eIEnumerable\u003c/code\u003eインターフェースとは」の項に載せてある画像を見ながらの方が、\u003ccode\u003eArrayEnumerator\u003c/code\u003eクラスの内容を理解しやすいと思います。\u003cbr\u003e\nまずフィールドとして、現在指し示しているセルを格納する\u003ccode\u003eCurrentCell\u003c/code\u003eと対象となるコレクションクラスのインスタンスを格納する\u003ccode\u003eArray\u003c/code\u003eを作成しました。\u003cbr\u003e\nコンストラクタでは、引数として矢印の作成の対象となるコレクションのインスタンスを取り、矢印の先頭位置を決めます。ここで先頭位置に\u003ccode\u003eHead\u003c/code\u003eを指定しないのは、この後出てくる\u003ccode\u003eMoveNext\u003c/code\u003eメソッドで先頭のセルが読み込まれないの防ぐためです。\u003cbr\u003e\nさて、その\u003ccode\u003eMoveNext\u003c/code\u003eメソッドですが、機能としては\u003cstrong\u003e今示されているセルが空ならば矢印を先頭に持っていき、あれば次のセルに矢印を移し\u003c/strong\u003e、\u003cstrong\u003eもしその矢印が何のセルも示していなければfalse、何らかのセルを指していればtrueを返す\u003c/strong\u003eというものです。なぜ\u003ccode\u003ebool\u003c/code\u003e値を返すのかは、\u003ccode\u003eforeach\u003c/code\u003e文の内部構造を見るとはっきりすると思います。この機能からもわかるように\u003ccode\u003eMoveNext\u003c/code\u003eメソッドが、読み取り機能の中核をなしているといっても過言ではありません。\u003cbr\u003e\n\u003ccode\u003eCurrent\u003c/code\u003eメソッドと、\u003ccode\u003eReset\u003c/code\u003eメソッドについてはそこまで難しいことはしていないので特に説明はしません。\u003c/p\u003e\n\n\u003cp\u003e最後にこれまでのコードをまとめておきます。このクラスの変更に伴って\u003ccode\u003eArray\u003c/code\u003eクラス自身の内容も少し変更したので確認してみてください。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eArrayクラス(完成形)\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"c1\"\u003e/// \u0026lt;summary\u0026gt;\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e/// 片方向連結リスト\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e/// \u0026lt;/summary\u0026gt;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eArray\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eIEnumerable\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e//先頭のセルを格納するフィールド。\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003eCell\u003c/span\u003e \u003cspan class=\"n\"\u003eHead\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e//空のセル(フィールドがnullなセル。要素の格納はできない)を作成する\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003eArray\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"n\"\u003eHead\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eCell\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eIEnumerator\u003c/span\u003e \u003cspan class=\"nf\"\u003eGetEnumerator\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eArrayEnumerator\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"c1\"\u003e//\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e//反復子のクラス\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eArrayEnumerator\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eIEnumerator\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eCell\u003c/span\u003e \u003cspan class=\"n\"\u003eCurrentCell\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eArray\u003c/span\u003e \u003cspan class=\"n\"\u003eArray\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003eArrayEnumerator\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eArray\u003c/span\u003e \u003cspan class=\"n\"\u003earray\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eArray\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003earray\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"c1\"\u003e//初めにどのセルを指し示すのかを決める。          \u003c/span\u003e\n            \u003cspan class=\"n\"\u003eCurrentCell\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e//現在指し示されているセルの要素を返す\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eObject\u003c/span\u003e \u003cspan class=\"n\"\u003eCurrent\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003eCurrentCell\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eItem\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"c1\"\u003e//返り値のbool値は、ちゃんと動かせたかどうかという情報。\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e//true(矢印を動かせた)、false(もうこれ以上矢印を動かせない)\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"nf\"\u003eMoveNext\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"c1\"\u003e//現在指し示しているセルの次のセル(Next)があるかどうかを調べる。、\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eCurrentCell\u003c/span\u003e \u003cspan class=\"p\"\u003e==\u003c/span\u003e \u003cspan class=\"k\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n                \u003cspan class=\"c1\"\u003e//矢印の位置を初期位置(Head)に戻す。\u003c/span\u003e\n                \u003cspan class=\"n\"\u003eCurrentCell\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eArray\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eHead\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eelse\u003c/span\u003e\n                \u003cspan class=\"c1\"\u003e//矢印を動かす。\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eCurrentCell\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eCurrentCell\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eNext\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n            \u003cspan class=\"c1\"\u003e//条件文が同じなので統合したくなるが、それはできない。\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eCurrentCell\u003c/span\u003e \u003cspan class=\"p\"\u003e==\u003c/span\u003e \u003cspan class=\"k\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n                \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003efalse\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e//先頭位置を元に戻す\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eReset\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"n\"\u003eCurrentCell\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e//セル。要素と次のセルを格納するフィールドを持つ。\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eCell\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eObject\u003c/span\u003e \u003cspan class=\"n\"\u003eItem\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eset\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eCell\u003c/span\u003e \u003cspan class=\"n\"\u003eNext\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eset\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"c1\"\u003e//新たにセルが作られたとき、各フィールドに値を代入する。\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003eCell\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eObject\u003c/span\u003e \u003cspan class=\"n\"\u003eitem\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eItem\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eitem\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e/// \u0026lt;summary\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e/// セルを新規に追加するメソッド。\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e/// \u0026lt;/summary\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eAdd\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eObject\u003c/span\u003e \u003cspan class=\"n\"\u003eitem\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e//現在のヘッドを一時的に保存\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003etemphead\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eHead\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e//先頭のセルを、追加したセルに切り替える。\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eHead\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eCell\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eitem\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e//先頭のセルのもつ、次のセルを格納するフィールドに追加するセルを代入。\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eHead\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eNext\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003etemphead\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e\u003ccode\u003eArray\u003c/code\u003eクラスが完成しましたが、このままでは機能としては貧弱すぎてほとんど使い物になりません(これと完全上位互換なコレクションクラスに\u003ccode\u003eList\u0026lt;T\u0026gt;\u003c/code\u003eクラスが存在します)。\u003cbr\u003e\n実際に\u003ccode\u003eIEnumerable\u003c/code\u003eインターフェースを実装する際には、例えばコレクションを任意の順にソーティングする機能をつけるなどの機能追加や、各セルに対しインデックスを関連付けるなどして独自の機能や仕様を追加すると思います。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"まとめ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%BE%E3%81%A8%E3%82%81\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eまとめ\u003c/h1\u003e\n\n\u003cp\u003eここまで説明してきましたが、実際筆者はこの記事を書く直前まで\u003ccode\u003eIEnumerable\u003c/code\u003eインターフェースの仕組みや実装方法についてほとんどわかっていませんでした。そのため、この記事を書きながらこのインターフェースについて勉強し、自分なりにこういうことではないかというのを考えながら書いていました。「ちゃんと理解してから書けよ！」と言われそうですが、自分では書いているうちにだんだんと理解できたのでまあいいか、と思っています。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"追記\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%BF%BD%E8%A8%98\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e追記\u003c/h1\u003e\n\n\u003cp\u003eある方がコメントで教えてくださったのですが、現在ではこれまで筆者が書いてきたような実装の仕方はほとんどされておらず、通常反復子を\u003ccode\u003eyield return\u003c/code\u003eを用いて書き、かつ\u003ccode\u003eIEnumerable\u003c/code\u003eインターフェースではなく、そのジェネリックバージョンの\u003ccode\u003eIEnumerable\u0026lt;T\u0026gt;\u003c/code\u003eインターフェースを実装するそうです。\u003cbr\u003e\n実際にコレクションクラスを自作する際はこれらのことに注意したほうがいいと思います。\u003c/p\u003e\n","createdAt":"2017-12-13T08:50:16Z","elapsedYearsFromLastModifiedAt":2,"encryptedId":"bUZPG6GsUOm1Iv1wKKUut9B8WfFXgmcC--g88OK1GAJxnt7qeu--usPynhscTn2nzWDfLywRXA==","isBanned":false,"isDeprecated":true,"isDestroyableByViewer":false,"isEditRequestReadableByViewer":true,"isEditRequestSendableByViewer":true,"isLikableByViewer":true,"isLikedByViewer":false,"isPublic":true,"isSlide":false,"isStockableByViewer":true,"isStockedByViewer":false,"isSubscribableByViewer":false,"isSubscribedByViewer":false,"isUpdatableByViewer":false,"isUpdated":true,"lastModifiedAt":"2018-12-10T13:16:09Z","likesCount":63,"linkUrl":"https://qiita.com/kerochan/items/13bbbbb14c3a309c7ec4","organization":null,"originalId":587723,"stockedCount":54,"title":"C#でIEnumerableインターフェースを実装してみる","toc":"\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#ienumerable%E3%82%A4%E3%83%B3%E3%82%BF%E3%83%BC%E3%83%95%E3%82%A7%E3%83%BC%E3%82%B9%E3%81%A8%E3%81%AF\"\u003eIenumerableインターフェースとは\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#ienumerable%E3%82%A4%E3%83%B3%E3%82%BF%E3%83%BC%E3%83%95%E3%82%A7%E3%83%BC%E3%82%B9%E3%81%AE%E6%A7%8B%E9%80%A0\"\u003eIEnumerableインターフェースの構造\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#ienumerable%E3%82%A4%E3%83%B3%E3%82%BF%E3%83%BC%E3%83%95%E3%82%A7%E3%83%BC%E3%82%B9%E3%82%92%E7%94%A8%E3%81%84%E3%81%9F%E3%82%B3%E3%83%AC%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3%E3%82%AF%E3%83%A9%E3%82%B9%E3%81%AE%E4%BD%9C%E6%88%90\"\u003eIEnumerableインターフェースを用いたコレクションクラスの作成\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#1%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B%E3%82%B3%E3%83%AC%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3%E3%82%AF%E3%83%A9%E3%82%B9%E3%81%AE%E6%A9%9F%E8%83%BD\"\u003e(1)作成するコレクションクラスの機能\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#2%E3%82%B3%E3%83%B3%E3%83%91%E3%82%A4%E3%83%AB%E3%81%99%E3%82%8B%E3%81%9F%E3%82%81%E3%81%AE%E6%9C%80%E5%B0%8F%E9%99%90%E3%81%AE%E3%82%B3%E3%83%BC%E3%83%89\"\u003e(2)コンパイルするための最小限のコード\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#3%E8%A6%81%E7%B4%A0%E3%82%92%E6%A0%BC%E7%B4%8D%E3%81%99%E3%82%8B%E3%82%AF%E3%83%A9%E3%82%B9%E3%82%92%E5%AE%9F%E8%A3%85%E3%81%99%E3%82%8B\"\u003e(3)要素を格納するクラスを実装する\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#4%E3%82%BB%E3%83%AB%E3%82%92%E8%BF%BD%E5%8A%A0%E3%81%99%E3%82%8B%E9%96%A2%E6%95%B0%E3%82%92%E8%BF%BD%E5%8A%A0%E3%81%99%E3%82%8B\"\u003e(4)セルを追加する関数を追加する\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#5%E5%8F%8D%E5%BE%A9%E5%AD%90%E3%82%92%E8%BF%BD%E5%8A%A0%E3%81%99%E3%82%8B\"\u003e(5)反復子を追加する\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%81%BE%E3%81%A8%E3%82%81\"\u003eまとめ\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E8%BF%BD%E8%A8%98\"\u003e追記\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n","totalPv":61032,"uuid":"13bbbbb14c3a309c7ec4","banReason":null,"adventCalendarItem":null,"author":{"encryptedId":"f1REidGK6+tQX9FUNK6aifxnpg5L--cjrAhOmNuRukpul7--1Njy4D9feeYpqn4pJG91tw==","originalId":214300,"description":"AmusementCreatorsというサークルの人です。最近はC++でゲーム作ってます。","facebookUrl":null,"githubUrl":"https://github.com/kerochan","isBlockingViewer":false,"isFollowableByViewer":true,"isFollowedByViewer":false,"isTweetWebNotificationReceivable":true,"linkedinUrl":null,"name":"鈴木 悠斗","profileImageUrl":"https://avatars1.githubusercontent.com/u/30919974?v=4","profileImageUrlW48":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Favatars1.githubusercontent.com%2Fu%2F30919974%3Fv%3D4?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=48\u0026s=a1dc720e3f196e7be220d646cecbd3a1","profileImageUrlW75":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Favatars1.githubusercontent.com%2Fu%2F30919974%3Fv%3D4?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=12ddbd94f61d43573e65bbf6ec56f378","urlName":"kerochan","websiteUrl":"","twitterUrl":null,"twitterUrlName":null,"revealedOrganizations":{"edges":[]}},"tags":[{"name":"C#","urlName":"csharp"},{"name":".NETFramework","urlName":".netframework"},{"name":"IEnumerable","urlName":"ienumerable"}],"followingLikers":{"edges":[]},"comments":{"totalCount":2}},"comments":[],"client":null,"ads_event_emitter":null}}</script>
