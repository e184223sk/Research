More than 3 years have passed since last update.ミニゲームを作ってUnityを学ぶ！[ひつじコレクション編]前回に引き続き、描画部分の機能改善を行っていきます。
まずは前回までのステータスを再掲載。それでは、引き続き描画部分の修正を行っていきます。問題があるまま放置していたミニマップの描画を修正します。
現在はステージを単純に上から見下ろしているだけの状態ですが、これを新しくミニマップ専用のオブジェクトを用意してMinimapCameraにはそのオブジェクトのみが描画されるように変更します。CullingMaskはカメラに映し出すレイヤーを指定する項目ですので、これによってForMinimapレイヤーのオブジェクトはMainCameraに映らず、MinimapCameraのみに映るようになります。このMinimapマテリアル適用した板ポリゴンを各パーツに張り付けて、MinimapCameraではその板ポリゴンのみを描画していきます。ちょっと見にくいですが、プロジェクトを実行するとBushがミニマップに表示されます。この作業をミニマップに表示したいオブジェクト全てに対して行っていきます。以下、各オブジェクトについてQuadのトランスフォーム値とUvMapQuadのフィールド値のみを掲示していきます。ミニマップの修正が完了しました。
ステータスは以下のようになります。影の有無と比べると見劣りはしますが、それでも確実に描画ステータスが改善されています。続いて、フォロワーのポップアップ中を表すために使用しているエフェクト（magic_ring_03）を修正します。
こちらは1つのエフェクトを表示するために3枚のテクスチャ画像と5つのマテリアルを利用している状態なため、これを1枚のテクスチャ画像と1つのマテリアルで同じようなエフェクトが表示できるようにします。TextureSheetAnimationは名前の通り、1枚のテクスチャ内で表示部分を切り替える設定です。参考： エフェクトのテクスチャのアトラス化とShurikenへの設定方法 完成品がこちら……新しいエフェクトを使用した際の描画ステータスが以下になります。テクスチャとマテリアルを共有したことで環境の変更回数が少なくなり、SetPass callsを13減少させることができました。ひつじコレクションでは行っていませんが、今回の修正に加えて複数オブジェクトのMeshを結合することでさらにレンダリング負荷を下げることができます。その際には「Mesh Baker」というアセットがよく利用されますので、ご興味がありましたら下記参考サイトなどをぜひご覧くださいませ。参考： Mesh Bakerを使ってメッシュをまとめ、Draw Callsを1306から6にしてみた 次のページに進む（現在作成中……）
イントロダクションに戻る

この作品はユニティちゃんライセンス条項の元に提供されています


