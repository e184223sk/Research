More than 1 year has passed since last update.こんにちは、のんびりエンジニアのたっつーです。
ブログを運営しています、今回はこの記事の転載になります。Unityのネットワークライブラリの Photon を使う場合に、Photonのインスタンス化を Resources から 自分で指定したプレファブリストに変更する方法をご紹介したいと思います。PUN 2 – FREE （無料版）
Photon PUN 2+ （有料版）Photon とはマルチプレイヤーゲームを作る場合にネットワーク部分を担当してくれるネットワークライブラリになります。例えば、モンストなどのゲームを作る場合には同時プレイしている４人の画面の情報を同期しないといけないですよね？そんな時に Photon を使うとネットワーク部分のめんどくさい部分を一括して担当してくれます。Photon の使い方は今回のテーマではないので他の記事に譲ります。今回は、Photon を使う時に困る事の１つとしてインスタンス化する際に Resources に Prefab を格納しないといけないのですが、これを自分で定義したリストから生成するように変更します。通常 Photon では、文字列の名前から Resources を検索してヒットしたオブジェクトをインスタンス化の対象とします。上記のソースコードは Photon内で、「DefaultPool」で定義されているソースコードになります、中身簡単に読んでみると Resources で定義された Prefab をキャッシュしなから要求があれば、インスタンス化してくれる実装になっています。今回はこの実装を、自分で作った Prefabリスト からインスタンス化してくれる実装に差し替えたいと思います。以下のソースコードを追加します。MyPhotonPoolスクリプトを適当なオブジェクトに追加して、PrefabList に Photon の生成対象となる Prefab を指定します。呼び出し側は通常通りのインスタンス化の方法で使ってください。よければ ブログ「Unity+AssetStoreおすすめ情報」の方にも色々記載しているのでぜひご参照いただければと思います。


