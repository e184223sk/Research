<!DOCTYPE html><html><head><meta charset="utf-8" /><title>Unity+Googleスプレッドシート+GASでサーバーレスのデータベースシステムを実現する？ - Qiita</title><meta content="width=device-width,initial-scale=1,shrink-to-fit=no,viewport-fit=cover" name="viewport" /><meta content="#55c500" name="theme-color" /><meta content="XWpkTG32-_C4joZoJ_UsmDUi-zaH-hcrjF6ZC_FoFbk" name="google-site-verification" /><meta content="telephone=no" name="format-detection" /><link rel="canonical" href="https://qiita.com/Totorock/items/13e838af9dc9bfdce509" /><link href="/manifest.json" rel="manifest" /><link href="/opensearch.xml" rel="search" title="Qiita" type="application/opensearchdescription+xml" /><link as="script" href="https://www.googletagservices.com/tag/js/gpt.js" rel="preload" /><link href="https://securepubads.g.doubleclick.net" rel="preconnect" /><script async="" src="https://www.googletagservices.com/tag/js/gpt.js"></script><meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="2vvJ6PlmIJgWuTp8D85imH6K4c3Xtfmi29ggzsQ2o+HkUSOCq39LVeU1DHEgBFCgVBimxmzf+VOsBXtSeZCP1g==" /><link rel="shortcut icon" type="image/x-icon" href="https://cdn.qiita.com/assets/favicons/public/production-c620d3e403342b1022967ba5e3db1aaa.ico" /><link rel="apple-touch-icon" type="image/png" href="https://cdn.qiita.com/assets/favicons/public/apple-touch-icon-ec5ba42a24ae923f16825592efdc356f.png" /><link rel="stylesheet" media="all" href="https://cdn.qiita.com/assets/public/article-2eaa7dbedc42a8ea65c722cda46d0ebb.min.css" /><script src="https://cdn.qiita.com/assets/public/v3-article-bundle-63de2d91fef827269d3f6b958db2335b.min.js" defer="defer"></script><meta name="twitter:card" content="summary_large_image"><meta content="@Qiita" name="twitter:site" /><meta content="@totorock_lin" name="twitter:creator" /><meta property="og:type" content="article"><meta property="og:title" content="Unity+Googleスプレッドシート+GASでサーバーレスのデータベースシステムを実現する？ - Qiita"><meta property="og:image" content="https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0&amp;w=1200&amp;mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND1WVzVwZEhrclIyOXZaMnhsNDRLNTQ0T1g0NE9zNDRPRDQ0T0o0NEszNDRPODQ0T0lLMGRCVS1PQnAtT0N0ZU9Edk9PRGtPT0R2T09Eck9PQ3VlT0JydU9EaC1PRHZPT0N2LU9EbWVPRHZPT0N1ZU9DdC1PQ3VlT0RodU9Eb09PQ2t1V3VuLWVQdnVPQm1lT0NpLS04bncmdHh0LWNvbG9yPSUyMzMzMyZ0eHQtZm9udD1IaXJhZ2lubyUyMFNhbnMlMjBXNiZ0eHQtc2l6ZT01NCZ0eHQtY2xpcD1lbGxpcHNpcyZ0eHQtYWxpZ249Y2VudGVyJTJDbWlkZGxlJnM9MWZhYzNiOWQ3NTA1YjAxZGY3MDk4OTI1ZmVkNzIxN2Q&amp;mark-align=center%2Cmiddle&amp;blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RRlJ2ZEc5eWIyTnImdHh0LWNvbG9yPSUyMzMzMyZ0eHQtZm9udD1IaXJhZ2lubyUyMFNhbnMlMjBXNiZ0eHQtc2l6ZT00NSZ0eHQtYWxpZ249cmlnaHQlMkNib3R0b20mcz0wZjAzOGViZjlmZTk2MDc2YjA3YzQxYzMyOTAwMDc2Mw&amp;blend-align=center%2Cmiddle&amp;blend-mode=normal&amp;s=8bdb0cf570800f51a44f46817df6b12b"><meta property="og:description" content="2020年7月9日更新：実装変更でメソッド名や使い方の紹介などの修正を行いました。


前書き

unity1weekをきっかけに、Unity+Googleスプレッドシート+GASで簡易ランキング機能を作ってみました。この仕組みで、ラ..."><meta content="https://qiita.com/Totorock/items/13e838af9dc9bfdce509" property="og:url" /><meta content="Qiita" property="og:site_name" /><meta content="564524038" property="fb:admins" /><meta content="JavaScript,C#,GoogleAppsScript,Unity" name="keywords" /><script>!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window, document,'script',
'https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '668972150489891');
fbq('track', 'PageView');</script><style data-emotion-css="17jxvjw 11t2ec1 1dvr2p8 18lkoru 1g4cku8 1iupg5d ijvq0v 15cocm3 12rp90f 115f4t 1b8uj5v 79elbk 16hhh7b fcbn8c 1gj7nt 154zy0m yikrym 1jqivyb 1ode1bp le4d8r 1hbd3g7 helsa7 8qb8m4 2imjyh he5w1s 70qvj9 3ojehk 100alwu 1dtnjt5 10ougpm 1ay9vb9 m19uds cgzq40 1wa99t2 1l3zk9f 4czcte 1yzj1fm 1uv1qiv 109dbrr 5jpx49 mnxgyc 1vlpknv fsjkhv 1b17vb0 7i7f4d"}>.css-17jxvjw{display:grid;display:-ms-grid;grid-template-columns:80px minmax(0,1fr) 300px;-ms-grid-columns:80px minmax(0,1fr) 300px;grid-template-rows:minmax(270px,auto) 1fr;-ms-grid-rows:minmax(270px,auto) 1fr;max-width:1280px;margin-right:auto;margin-left:auto;padding-top:24px;padding-right:24px;padding-left:24px;}@media (max-width:1200px){.css-17jxvjw{padding-bottom:0;padding-left:0;padding-right:0;}}@media (max-width:992px){.css-17jxvjw{grid-template-columns:80px 452px 300px;-ms-grid-columns:80px 452px 300px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}}@media (max-width:770px){.css-17jxvjw{display:block;}}@media (max-width:480px){.css-17jxvjw{padding-top:0;}}.css-11t2ec1{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;z-index:5;position:-webkit-sticky;position:sticky;top:calc(56px + 24px + 16px + 32px - 16px);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:16px;width:80px;}.css-11t2ec1:after{content:'';display:table;}.css-11t2ec1:before{content:'';display:table;}@media (max-width:770px){.css-11t2ec1{display:none;}}.css-1dvr2p8{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-18lkoru{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;background-color:#FFFFFF;}.css-1g4cku8{display:inline-block;vertical-align:middle;height:20px;width:20px;fill:#55C500;}.css-1iupg5d{color:#55C500;cursor:pointer;font-size:14px;font-weight:bold;}.css-ijvq0v{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-15cocm3{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#FFFFFF;border:2px solid #6E6F70;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:2px 0px 0px;width:40px;}.css-12rp90f{display:inline-block;vertical-align:bottom;height:17.77777777777778px;width:16px;fill:#6E6F70;}.css-115f4t{color:#6E6F70;font-size:14px;font-weight:bold;}.css-1b8uj5v{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;margin-bottom:16px;padding:0;}.css-79elbk{position:relative;}.css-16hhh7b{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;padding:0;}.css-fcbn8c{display:none;bottom:initial;left:initial;right:initial;top:initial;left:100%;top:calc(-8px - (14px * 1.8) - 16px - 4px);}.css-1gj7nt{color:rgba(0,0,0,0.6);font-size:14px;font-weight:bold;line-height:1.8;padding:8px 16px;}.css-154zy0m{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.87);cursor:pointer;font-size:16px;font-weight:normal;line-height:1.8;padding:4px 16px;}.css-154zy0m:hover{-webkit-text-decoration:none;text-decoration:none;background-color:#F2F2F2;}.css-yikrym{width:20px;}.css-1jqivyb{color:rgba(0,0,0,0.6);font-size:13px;}.css-1ode1bp{background-color:rgba(0,0,0,0.12);height:1px;width:100%;margin:8px 0;}.css-le4d8r{display:inline-block;vertical-align:middle;height:13px;width:13px;fill:rgba(0,0,0,0.6);}.css-1hbd3g7{height:250px;}.css-helsa7{background-color:#FFFFFF;padding:32px;margin-bottom:24px;}@media (max-width:992px){.css-helsa7{margin:0 auto 40px;}}@media (max-width:480px){.css-helsa7{margin:0 0 40px;padding:32px 16px;}}.css-8qb8m4{margin-bottom:48px;}.css-2imjyh{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-he5w1s{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;width:100%;}@media (max-width:770px){.css-he5w1s{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}}.css-70qvj9{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.css-3ojehk{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;margin-right:4px;}.css-100alwu{display:inline-block;border-radius:50%;line-height:1;overflow:hidden;vertical-align:middle;}.css-1dtnjt5{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-10ougpm{color:rgba(0,0,0,0.87);font-size:14px;font-weight:600;line-height:1.8;margin-right:4px;text-wrap:break-word;word-break:break-all;}.css-1ay9vb9{margin-right:16px;}.css-m19uds{color:rgba(0,0,0,0.6);font-size:14px;line-height:1.8;}.css-cgzq40{color:rgba(0,0,0,0.87);font-size:32px;font-weight:bold;line-height:1.4;margin-top:8px;text-wrap:break-word;word-break:break-all;}.css-1wa99t2{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.6);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:8px;}.css-1l3zk9f{color:rgba(0,0,0,0.6);font-size:20px;margin-right:8px;}.css-4czcte{margin-right:4px;color:inherit;font-size:14px;line-height:1.8;}.css-4czcte:not(:last-child)::after{content:',';margin-right:4px;}.css-1yzj1fm{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:32px;}.css-1uv1qiv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-size:20px;height:32px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin-right:16px;outline:none;padding:0;width:32px;}.css-109dbrr{background-color:#F9F9F9;border-top:1px solid rgba(0,0,0,0.12);bottom:0;box-shadow:0px 1px 4px rgba(0,0,0,0.14);display:none;height:calc(env(safe-area-inset-bottom,0px) + 56px);-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding-bottom:env(safe-area-inset-bottom);position:-webkit-sticky;position:sticky;width:100%;z-index:2000;}@media (max-width:770px){.css-109dbrr{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}.css-5jpx49{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:space-evenly;-webkit-justify-content:space-evenly;-ms-flex-pack:space-evenly;justify-content:space-evenly;width:100%;}.css-mnxgyc{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1vlpknv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;margin-right:4px;background-color:#FFFFFF;}.css-fsjkhv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1b17vb0{color:#6E6F70;font-size:14px;font-weight:bold;margin-left:4px;}.css-7i7f4d{display:none;bottom:initial;left:initial;right:initial;top:initial;bottom:32px;right:0;}</style></head><body><div class="allWrapper"><div><div id="GlobalHeader-react-component-6b00ceb0-ccfc-4730-b622-595b71b63dd5"><div class="st-Header"><div class="st-Header_container"><div class="st-Header_start"><a href="/" class="st-Header_logo"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 426.57 130"><circle cx="167.08" cy="21.4" r="12.28"></circle><path d="M250.81 29.66h23.48v18.9h-23.48z"></path><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z"></path><circle cx="216.33" cy="21.4" r="12.28"></circle></svg></a><div class="st-Header_communitySelector" tabindex="0"><span class="fa fa-caret-down"></span></div><div class="st-Header_dropdown"><div class="st-Header_dropdownHeading">Qiita Teams that are logged in</div><div class="st-Header_dropdownItemNote">You are not logged in to any team</div><hr class="st-Header_dropdownDivider st-Header_dropdownDivider-shrink"/><a href="https://teams-center.qiita.com/find_team" class="st-Header_dropdownItem"><span class="fa fa-fw fa-sign-in st-Header_dropdownItemIcon"></span><div>Log in to Qiita Team</div></a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Community</div><a href="/organizations" class="st-Header_dropdownItem">Organization</a><a href="/official-events/open" class="st-Header_dropdownItem">Event</a><a href="/advent-calendar" class="st-Header_dropdownItem">Advent Calendar</a><a href="https://qiitadon.com/" class="st-Header_dropdownItem" target="_blank">Qiitadon (β)</a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Service</div><a href="https://jobs.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Jobs</a><a href="https://zine.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Zine</a><a href="https://blog.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Blog</a></div><form class="st-Header_search" action="/search" method="get"><span class="fa fa-search st-Header_searchIcon"></span><input type="search" class="st-Header_searchInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form><form class="st-Header_searchModal" action="/search" method="get"><input type="text" class="st-Header_searchModalInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form></div><div class="st-Header_end"><div class="st-Header_searchButton"><span class="fa fa-search"></span></div><a class="st-Header_signupButton" href="/signup?redirect_to=%2FTotorock%2Fitems%2F13e838af9dc9bfdce509">Signup</a><a class="st-Header_loginLink" href="/login?redirect_to=%2FTotorock%2Fitems%2F13e838af9dc9bfdce509">Login</a></div><div class="st-Header_overlay"></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="GlobalHeader" data-dom-id="GlobalHeader-react-component-6b00ceb0-ccfc-4730-b622-595b71b63dd5">{"unreadNotificationsCount":null,"realms":[{"humanName":"Qiita","isCurrentRealm":true,"isQiita":true,"isQiitaTeam":false,"loggedInUser":null,"teamId":null,"url":"https://qiita.com/"}],"teamFindUrl":"https://teams-center.qiita.com/find_team","isTeamOnlyUser":null,"currentUser":null}</script>
      
</div><div class="st-HeaderAlert st-HeaderAlert-warning"><div class="st-HeaderAlert_body"></div></div><script type="application/ld+json">{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"/","name":"Qiita"}},{"@type":"ListItem","position":2,"item":{"@id":"/tags/javascript","name":"JavaScript"}}]}</script><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","datePublished":"2020-01-13T15:22:23.000+09:00","dateModified":"2020-10-07T21:48:30.000+09:00","headline":"Unity+Googleスプレッドシート+GASでサーバーレスのデータベースシステムを実現する？","image":"https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0\u0026w=1200\u0026mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND1WVzVwZEhrclIyOXZaMnhsNDRLNTQ0T1g0NE9zNDRPRDQ0T0o0NEszNDRPODQ0T0lLMGRCVS1PQnAtT0N0ZU9Edk9PRGtPT0R2T09Eck9PQ3VlT0JydU9EaC1PRHZPT0N2LU9EbWVPRHZPT0N1ZU9DdC1PQ3VlT0RodU9Eb09PQ2t1V3VuLWVQdnVPQm1lT0NpLS04bncmdHh0LWNvbG9yPSUyMzMzMyZ0eHQtZm9udD1IaXJhZ2lubyUyMFNhbnMlMjBXNiZ0eHQtc2l6ZT01NCZ0eHQtY2xpcD1lbGxpcHNpcyZ0eHQtYWxpZ249Y2VudGVyJTJDbWlkZGxlJnM9MWZhYzNiOWQ3NTA1YjAxZGY3MDk4OTI1ZmVkNzIxN2Q\u0026mark-align=center%2Cmiddle\u0026blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RRlJ2ZEc5eWIyTnImdHh0LWNvbG9yPSUyMzMzMyZ0eHQtZm9udD1IaXJhZ2lubyUyMFNhbnMlMjBXNiZ0eHQtc2l6ZT00NSZ0eHQtYWxpZ249cmlnaHQlMkNib3R0b20mcz0wZjAzOGViZjlmZTk2MDc2YjA3YzQxYzMyOTAwMDc2Mw\u0026blend-align=center%2Cmiddle\u0026blend-mode=normal\u0026s=8bdb0cf570800f51a44f46817df6b12b","mainEntityOfPage":"https://qiita.com/Totorock/items/13e838af9dc9bfdce509","author":{"@type":"Person","address":null,"email":null,"identifier":"Totorock","name":"Totorock","image":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fpbs.twimg.com%2Fprofile_images%2F1029722432389537793%2FPBWx9nU8_bigger.jpg?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=ba0ac8d7f66fdd1b7a8cdb6af39b6ee2","url":"https://qiita.com/Totorock","description":null,"memberOf":[]},"publisher":{"@type":"Organization","name":"Qiita","logo":{"@type":"ImageObject","url":"//cdn.qiita.com/assets/public/qiita-logo-c39ded593afa388e2e1ba435b110554e.png"}}}</script><style type="text/css">.wb-CampaignLink {
  background-color: #333333;
  width: 100%;
}

.wb-CampaignLink_container {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  max-width: 1100px;
  margin: 0 auto;
  font-size: 13px;
  padding: 0.8em;
}
.wb-CampaignLink_container > a {
  color: #fff;
}

.wb-CampaignLink_container > a:hover {
  text-decoration: underline;
}</style><div class="wb-CampaignLink"><div class="wb-CampaignLink_container"><a target="_blank" id="header_text_message_1" href="https://zine.qiita.com/interview/202105-uzabase/?utm_source=qiita&amp;utm_medium=header-banner">プロダクト全体の「エコシステム」を考えるユーザベースの開発手法とは？</a><a target="_blank" id="header_text_message_2" href="https://zine.qiita.com/interview/202105-uzabase/?utm_source=qiita&amp;utm_medium=header-banner">詳しくはこちら</a></div><script>td.trackEvent(
  'front_events',
  {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"Totorock","type":"items","id":"13e838af9dc9bfdce509"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Show","data":{"message":"プロダクト全体の「エコシステム」を考えるユーザベースの開発手法とは？","url":"https://zine.qiita.com/interview/202105-uzabase/?utm_source=qiita\u0026utm_medium=header-banner","sub_message":"詳しくはこちら"}}
)</script><script>document.getElementById('header_text_message_1').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"Totorock","type":"items","id":"13e838af9dc9bfdce509"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":1,"pos_id":"header_text_message_1","message":"プロダクト全体の「エコシステム」を考えるユーザベースの開発手法とは？","url":"https://zine.qiita.com/interview/202105-uzabase/?utm_source=qiita\u0026utm_medium=header-banner","sub_message":"詳しくはこちら"}}
  )
})</script><script>document.getElementById('header_text_message_2').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"Totorock","type":"items","id":"13e838af9dc9bfdce509"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":1,"pos_id":"header_text_message_2","message":"プロダクト全体の「エコシステム」を考えるユーザベースの開発手法とは？","url":"https://zine.qiita.com/interview/202105-uzabase/?utm_source=qiita\u0026utm_medium=header-banner","sub_message":"詳しくはこちら"}}
  )
})</script></div><script type="application/json" id="js-react-on-rails-context">{"railsEnv":"production","inMailer":false,"i18nLocale":"en","i18nDefaultLocale":"en","href":"https://qiita.com/Totorock/items/13e838af9dc9bfdce509","location":"/Totorock/items/13e838af9dc9bfdce509","scheme":"https","host":"qiita.com","port":null,"pathname":"/Totorock/items/13e838af9dc9bfdce509","search":null,"httpAcceptLanguage":null,"actionPath":"public/items#show","settings":{"analyticsTrackingId":"UA-24675221-12","assetsMap":{},"csrfToken":"Bg3w/yEIvcsfdnI6Eeuivh2dJBYNw+0OFhHxw+YA9gE4pxqVcxHWBuz6RDc+IZCGNw9jHbap7f9hzKpfW6baNg==","locale":"en"},"currentUser":null,"isLoggedIn":false,"recaptchaSiteKey":"6LfNkiQTAAAAAM3UGnSquBy2akTITGNMO_QDxMw6","serverSide":false}</script>
<div id="PersonalArticlePage-react-component-4b017d3d-db53-4094-a357-5c175a6c5e3f"><div class="p-items_wrapper"><div class=" css-17jxvjw"><div class="css-11t2ec1"><div class="css-1dvr2p8"><button class=" css-18lkoru"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/Totorock/items/13e838af9dc9bfdce509/likers" class="css-1iupg5d">11</a></div><div class="css-ijvq0v"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-115f4t">3</span></div><div class="css-1b8uj5v"><span class="fa fa-twitter"></span></div><div class="css-1b8uj5v"><span class="fa fa-facebook"></span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-fcbn8c"><div class="css-1gj7nt">Improve article</div><a href="/drafts/13e838af9dc9bfdce509/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/Totorock/items/13e838af9dc9bfdce509/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/Totorock/items/13e838af9dc9bfdce509/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/Totorock/items/13e838af9dc9bfdce509/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/Totorock/items/13e838af9dc9bfdce509.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div><div class="p-items_options"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_toc"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_main"><div class="css-helsa7"><div class="css-8qb8m4"><div class="css-2imjyh"><div class="css-he5w1s"><div class="css-70qvj9"><div class="css-3ojehk"><a href="/Totorock"><img class="css-100alwu eyfquo10" src="https://pbs.twimg.com/profile_images/1029722432389537793/PBWx9nU8_bigger.jpg" width="24" height="24" loading="lazy"/></a></div><div class="css-1dtnjt5"><a href="/Totorock" class="css-10ougpm">@<!-- -->Totorock</a><div class="css-1ay9vb9"><span><meta content="2020-01-13T06:22:23Z"/><time dateTime="2020-10-07T12:48:30Z" class="css-m19uds">updated at 2020-10-07</time></span></div></div></div></div></div><h1 class="css-cgzq40">Unity+Googleスプレッドシート+GASでサーバーレスのデータベースシステムを実現する？</h1><div class="css-1wa99t2"><span class="fa fa-tags mr-1of2 css-1l3zk9f" aria-hidden="true"></span><a href="/tags/javascript" class="css-4czcte">JavaScript</a><a href="/tags/csharp" class="css-4czcte">C#</a><a href="/tags/googleappsscript" class="css-4czcte">GoogleAppsScript</a><a href="/tags/unity" class="css-4czcte">Unity</a></div></div><section class="it-MdContent"><div id="personal-public-article-body"><div><p><strong>2020年7月9日更新：実装変更でメソッド名や使い方の紹介などの修正を行いました。</strong></p>

<h1>
<span id="前書き" class="fragment"></span><a href="#%E5%89%8D%E6%9B%B8%E3%81%8D"><i class="fa fa-link"></i></a>前書き</h1>

<p>unity1weekをきっかけに、Unity+Googleスプレッドシート+GASで簡易ランキング機能を作ってみました。この仕組みで、ランキングだけではなく、任意のデータをアップロード・ダウンロードできれば、一応汎用的なデータベースとして使えるのではないかと思いました。例えばゲームのマスタデータをGoogleスプレッドシートに保存することで、アプリのバージョン更新なしでゲームの調整ができてまうとか、ゲームの最新バージョンをGoogleスプレッドシートに書き込んで、アプリ起動時にそれを取得して古ければ強制アップデートポップアップを出すとか、さらにチャットやユーザー情報の管理もGoogleスプレッドシートでやりとりするなど、ユースケースがどんどん湧いてきます。<br>
ということで、実装してみました。</p>

<h1>
<span id="使い方" class="fragment"></span><a href="#%E4%BD%BF%E3%81%84%E6%96%B9"><i class="fa fa-link"></i></a>使い方</h1>

<p>プロジェクトは<a href="https://github.com/RINNUXEI/Umbrella" rel="nofollow noopener" target="_blank">Umbrella</a>（トトロなので）という名でGithubに公開しました。最新パッケージのダウンロードは<a href="https://github.com/RINNUXEI/Umbrella/releases" rel="nofollow noopener" target="_blank">こちら</a>。ちなみに、Umbrellaには単純なデータ通信管理システム<strong>Database</strong>以外に、簡易ランキングシステム<strong>Ranking</strong>も含まれています。興味ある方はぜひ合わせていじってみてください。</p>

<h2>
<span id="gas側" class="fragment"></span><a href="#gas%E5%81%B4"><i class="fa fa-link"></i></a>GAS側</h2>

<ol>
<li>新しいGoogleスプレッドシートを作成する。</li>
<li>メニューの<em>ツール</em>から<em>スクリプト エディタ</em>をクリックする。</li>
<li>
<em>Assets/Umbrella/Database/Database.gs</em>の内容を<em>コード.gs</em>にコピーする。</li>
<li>メニューの<em>ファイル</em> &gt; <em>保存</em>でプロジェクトに名前をつけて保存する（保存にちょっと2、3秒ぐらい掛かるかも）。</li>
<li>メニューの<em>公開</em> &gt; <em>ウェブアプリケーションとして導入...</em>をクリックする。</li>
<li>
<em>ウェブアプリケーションとして導入</em>のポップアップにて、<em>次のユーザーとしてアプリケーションを実行</em>に自分のアカウントを、<em>アプリケーションにアクセスできるユーザー</em>に<em>全員（匿名ユーザーを含む）</em>を設定する。</li>
<li>
<em>導入</em>をクリックして、<em>現在のウェブアプリケーションのURL</em>の下に書いてあるURLをコピーする。</li>
<li>「認証が必要です」のポップアップが出たら<a href="/zk_phi" class="user-mention js-hovercard" title="zk_phi" data-hovercard-target-type="user" data-hovercard-target-name="zk_phi">@zk_phi</a>さんの<a href="https://qiita.com/zk_phi/items/7220b67afa84c58cc160" id="reference-607c1cec04f345b71b96">記事</a>を参考にして認証を行ってください。</li>
</ol>

<h2>
<span id="unity側" class="fragment"></span><a href="#unity%E5%81%B4"><i class="fa fa-link"></i></a>Unity側</h2>

<ol>
<li>
<em>Assets/Umbrella/Database/DatabaseManager</em>プレハブを通信するシーンのヒエラルキーにドラッグ&amp;ドロップする。</li>
<li>
<em>Assets/Umbrella/Database/DatabaseSettings</em>スクリタブルオブジェクトのインスペクターから、<em>App URL</em>のフィールドに先ほどコピーしたGASのウェブアプリケーションURLをペーストする。</li>
<li>
<em>Default Sheet Name</em>フィールドに使いたいGoogleスプレッドシートのデフォルトシート名を入力する。</li>
<li>任意のスクリプトで、データを送信したい場合は<code>DatabaseManager.Instance.SendDataAsync(data, sheetName)</code>を呼び、データを取得したい場合は<code>DatabaseManager.Instance.GetDataAsync(keys, responseHandler, sheetName)</code>を呼ぶ。<code>sheetName</code>を省略した場合は、<em>Default Sheet Name</em>が使われる。</li>
<li>うち、<code>responseHandler</code>はGAS側からのレスポンスを処理するコールバックで、通信が終わってから呼ばれる。GAS側のレスポンスは<code>object</code>型のリストに変換され、それの表示処理などは自分で実装できる。</li>
<li>また、<code>DatabaseManager.Instance.SendDataAsync(data, sheetName)</code>や<code>DatabaseManager.Instance.GetDataAsync(keys, responseHandler, sheetName)</code>の前に<code>yield return</code>を付ければ<code>responseHandler</code>が実行完了するまで待つことができる。</li>
<li>具体的な使い方はサンプルシーンとスクリプトを参照してください。</li>
</ol>

<h1>
<span id="デモ" class="fragment"></span><a href="#%E3%83%87%E3%83%A2"><i class="fa fa-link"></i></a>デモ</h1>

<ul>
<li><p>Googleスプレッドシートにデータを送信します。デモではデータ名と値のペアで複数データを送信しています。<br>
<a href="https://camo.qiitausercontent.com/20c95a9cb7f613c828aa7649cfbfda6c6317828a/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3437353438322f33636239633465622d376562642d316338392d393364652d6564653362316266386530342e676966" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F475482%2F3cb9c4eb-7ebd-1c89-93de-ede3b1bf8e04.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=a06c9a84f2bf9615ece5641610dfce0b" alt="send_data.gif" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/475482/3cb9c4eb-7ebd-1c89-93de-ede3b1bf8e04.gif" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F475482%2F3cb9c4eb-7ebd-1c89-93de-ede3b1bf8e04.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=3056d467c478475fbc40c91fa3393199 1x" loading="lazy"></a></p></li>
<li><p>Googleスプレッドシートにあるデータを更新します。デモではデータ名を指定して新しい値を送信しています。<br>
<a href="https://camo.qiitausercontent.com/8b1bb660e587b7c6451a7bfcf6a48841bd481c09/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3437353438322f32623836356537312d343430622d373935392d656533612d3464616539623266393236352e676966" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F475482%2F2b865e71-440b-7959-ee3a-4dae9b2f9265.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=ab47941ad099f49677a1a27ac3f98a8c" alt="update_data.gif" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/475482/2b865e71-440b-7959-ee3a-4dae9b2f9265.gif" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F475482%2F2b865e71-440b-7959-ee3a-4dae9b2f9265.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=9ca1882d4a2cc5086819bbc92b082bbd 1x" loading="lazy"></a></p></li>
<li><p>他のクライアントとしてデータを送信します。Umbrellaではクライアントを識別するユニークIDをUnity側で生成してPlayerPrefsに保存しているため、PlayerPrefsをクリアしないまま送信すると既存のデータを上書きすることになります。<br>
<a href="https://camo.qiitausercontent.com/800825ea25f83c8a4488d01d0c36c51da6623c13/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3437353438322f38376162663435302d333937352d633164622d393866382d6361376330626364306534622e676966" target="_blank" rel="nofollow noopener"><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/475482/87abf450-3975-c1db-98f8-ca7c0bcd0e4b.gif" alt="send_another_data.gif" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/475482/87abf450-3975-c1db-98f8-ca7c0bcd0e4b.gif" loading="lazy"></a></p></li>
<li><p>Googleスプレッドシートにあるデータを取得します。デモではデータ名のリストで複数のデータを取得しています。<br>
<a href="https://camo.qiitausercontent.com/ba837e8297ab3cd748cf13d8d5a5c8a6ae4fe1bb/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3437353438322f66616264313061622d376263342d653839382d376132612d3262643264346131313764652e676966" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F475482%2Ffabd10ab-7bc4-e898-7a2a-2bd2d4a117de.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=b5313fcacccb3b4b5d6b5df9f0af8fb5" alt="get_data.gif" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/475482/fabd10ab-7bc4-e898-7a2a-2bd2d4a117de.gif" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F475482%2Ffabd10ab-7bc4-e898-7a2a-2bd2d4a117de.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=94c634d9ae616418ec31bd9c134796aa 1x" loading="lazy"></a></p></li>
<li><p>セル参照で範囲内のデータを一気に取得する方法もあります。<br>
<a href="https://camo.qiitausercontent.com/51075ccef14be597453f3b7e78826c14148e5768/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3437353438322f37336534633964382d323363302d343966362d663362612d3937633865643035623238332e676966" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F475482%2F73e4c9d8-23c0-49f6-f3ba-97c8ed05b283.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=ea227c631fee2c3b1ebc428d091eef18" alt="get_data_by_cell.gif" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/475482/73e4c9d8-23c0-49f6-f3ba-97c8ed05b283.gif" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F475482%2F73e4c9d8-23c0-49f6-f3ba-97c8ed05b283.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=533aa82cb0dcfe0fb8fc1d08d5e849ca 1x" loading="lazy"></a></p></li>
</ul>

<h1>
<span id="実装の抜粋" class="fragment"></span><a href="#%E5%AE%9F%E8%A3%85%E3%81%AE%E6%8A%9C%E7%B2%8B"><i class="fa fa-link"></i></a>実装の抜粋</h1>

<h2>
<span id="gas側の処理" class="fragment"></span><a href="#gas%E5%81%B4%E3%81%AE%E5%87%A6%E7%90%86"><i class="fa fa-link"></i></a>GAS側の処理</h2>

<p>GASはUnityから送ってきたデータに基づき、スプレッドシートの中身を更新します。</p>

<div class="code-frame" data-lang="js"><div class="highlight"><pre class="with-code"><code><span class="kd">function</span> <span class="nx">doPost</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">parameter</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">method</span> <span class="o">=</span> <span class="nx">request</span><span class="p">[</span><span class="nx">CONST</span><span class="p">.</span><span class="nx">Method</span><span class="p">];</span>

  <span class="k">if</span><span class="p">(</span><span class="nx">method</span> <span class="o">==</span> <span class="nx">CONST</span><span class="p">.</span><span class="nx">SaveDataMethod</span><span class="p">){</span>
    <span class="k">return</span> <span class="nx">saveData</span><span class="p">(</span><span class="nx">request</span><span class="p">[</span><span class="nx">CONST</span><span class="p">.</span><span class="nx">Payload</span><span class="p">]);</span>
  <span class="p">}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">method</span> <span class="o">==</span> <span class="nx">CONST</span><span class="p">.</span><span class="nx">GetDataMethod</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">getData</span><span class="p">(</span><span class="nx">request</span><span class="p">[</span><span class="nx">CONST</span><span class="p">.</span><span class="nx">Payload</span><span class="p">]);</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nx">ContentService</span><span class="p">.</span><span class="nx">createTextOutput</span><span class="p">(</span><span class="dl">"</span><span class="s2">Error: Invalid method</span><span class="dl">"</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p><code>saveData</code>と<code>getData</code>の実装詳細はここでは省略しますが、GASのAPIコールはコスト高いため、処理速度を高めるにはできる限りAPIコールの回数を減らす必要があります。例えばセルデータの取得で、各セルで<code>sheet.getRange().getValue()</code>の代わりに、予め<code>var data = sheet.getDataRange().getValues()</code>で指定範囲のセルデータを一括で配列に格納し、後で配列から値を取るなどの策が考えられます。また、データの書き込みがある場合、排他処理（ロック）を入れる必要がありますが、一行のデータをまとめて一括でappendRow()を使えばセル単位でのロック処理をなくすテクニックもあります。appendRow()は不可分操作（Atomic Operation）なので排他処理が要らないからです。</p>

<h2>
<span id="unityからgasへの送信" class="fragment"></span><a href="#unity%E3%81%8B%E3%82%89gas%E3%81%B8%E3%81%AE%E9%80%81%E4%BF%A1"><i class="fa fa-link"></i></a>UnityからGASへの送信</h2>

<p>簡易のデータベース機能なので、特に通信の仕様とかは決めなく（暗号化？？）、完全にJSON形式で送信しています。JSON解析は軽量の<a href="https://gist.github.com/darktable/1411710" rel="nofollow noopener" target="_blank">MiniJson</a>を導入しています。</p>

<div class="code-frame" data-lang="csharp"><div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="n">CustomYieldInstruction</span> <span class="nf">SendDataAsync</span><span class="p">(</span><span class="n">MonoBehaviour</span> <span class="n">context</span><span class="p">,</span> <span class="kt">string</span> <span class="n">methodName</span><span class="p">,</span> <span class="n">IDictionary</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">,</span> <span class="kt">object</span><span class="p">&gt;</span> <span class="n">data</span><span class="p">,</span> <span class="n">Action</span><span class="p">&lt;</span><span class="kt">object</span><span class="p">&gt;</span> <span class="n">responseHandler</span> <span class="p">=</span> <span class="k">null</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">var</span> <span class="n">strData</span> <span class="p">=</span> <span class="n">Json</span><span class="p">.</span><span class="nf">Serialize</span><span class="p">(</span><span class="n">data</span><span class="p">);</span>

    <span class="kt">var</span> <span class="n">formData</span> <span class="p">=</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">IMultipartFormSection</span><span class="p">&gt;();</span>
    <span class="n">formData</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="k">new</span> <span class="nf">MultipartFormDataSection</span><span class="p">(</span><span class="n">Const</span><span class="p">.</span><span class="n">Method</span><span class="p">,</span> <span class="n">methodName</span><span class="p">));</span>
    <span class="n">formData</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="k">new</span> <span class="nf">MultipartFormDataSection</span><span class="p">(</span><span class="n">Const</span><span class="p">.</span><span class="n">Payload</span><span class="p">,</span> <span class="n">strData</span><span class="p">));</span>

    <span class="kt">bool</span> <span class="n">complete</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
    <span class="n">context</span><span class="p">.</span><span class="nf">StartCoroutine</span><span class="p">(</span><span class="nf">CT_SendData</span><span class="p">(</span><span class="n">formData</span><span class="p">,</span> <span class="n">status</span> <span class="p">=&gt;</span> <span class="n">complete</span> <span class="p">=</span> <span class="n">status</span><span class="p">,</span> <span class="n">responseHandler</span><span class="p">));</span>

    <span class="k">return</span> <span class="k">new</span> <span class="nf">WaitUntil</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="n">complete</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p><code>WWWForm</code>がLegacyになったので、<code>IMultipartFormSection</code>でフォームデータを作成しています。フォームデータにGAS側で呼び出したいメソッド名とデータ内容を入れています。また、外部で<code>yield return</code>をつけて待たせられるように、返り値のタイプを<code>CustomYieldInstruction</code>にして<code>complete</code>がtrueになるまで処理を止めることを可能にしています。</p>

<p><code>UnityWebRequest</code>の<code>Post</code>メソッドでフォームデータを送信しています。</p>

<div class="code-frame" data-lang="csharp"><div class="highlight"><pre class="with-code"><code><span class="k">private</span> <span class="n">IEnumerator</span> <span class="nf">CT_SendData</span><span class="p">(</span><span class="n">List</span><span class="p">&lt;</span><span class="n">IMultipartFormSection</span><span class="p">&gt;</span> <span class="n">formData</span><span class="p">,</span> <span class="n">Action</span><span class="p">&lt;</span><span class="kt">bool</span><span class="p">&gt;</span> <span class="n">updateStatus</span><span class="p">,</span> <span class="n">Action</span><span class="p">&lt;</span><span class="kt">object</span><span class="p">&gt;</span> <span class="n">responseHandler</span> <span class="p">=</span> <span class="k">null</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nf">updateStatus</span><span class="p">(</span><span class="k">false</span><span class="p">);</span>

    <span class="kt">var</span> <span class="n">www</span> <span class="p">=</span> <span class="n">UnityWebRequest</span><span class="p">.</span><span class="nf">Post</span><span class="p">(</span><span class="n">_appURL</span><span class="p">,</span> <span class="n">formData</span><span class="p">);</span>

    <span class="n">Debug</span><span class="p">.</span><span class="nf">Log</span><span class="p">(</span><span class="s">"&lt;color=blue&gt;[GSSDataService]&lt;/color&gt; Start sending data to Google Sheets."</span><span class="p">);</span>

    <span class="k">yield</span> <span class="k">return</span> <span class="n">www</span><span class="p">.</span><span class="nf">SendWebRequest</span><span class="p">();</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">www</span><span class="p">.</span><span class="n">isNetworkError</span> <span class="p">||</span> <span class="n">www</span><span class="p">.</span><span class="n">isHttpError</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">Debug</span><span class="p">.</span><span class="nf">LogError</span><span class="p">(</span><span class="s">$"&lt;color=blue&gt;[GSSDataService]&lt;/color&gt; Sending data to Google Sheets failed. Error: </span><span class="p">{</span><span class="n">www</span><span class="p">.</span><span class="n">error</span><span class="p">}</span><span class="s">"</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="n">Debug</span><span class="p">.</span><span class="nf">Log</span><span class="p">(</span><span class="s">"&lt;color=blue&gt;[GSSDataService]&lt;/color&gt; Sending data to Google Sheets completed"</span><span class="p">);</span>
        <span class="k">try</span>
        <span class="p">{</span>
            <span class="kt">var</span> <span class="n">response</span> <span class="p">=</span> <span class="n">Json</span><span class="p">.</span><span class="nf">Deserialize</span><span class="p">(</span><span class="n">www</span><span class="p">.</span><span class="n">downloadHandler</span><span class="p">.</span><span class="n">text</span><span class="p">);</span>
            <span class="kt">string</span> <span class="n">message</span> <span class="p">=</span> <span class="n">response</span> <span class="k">as</span> <span class="kt">string</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">message</span> <span class="p">!=</span> <span class="k">null</span> <span class="p">&amp;&amp;</span> <span class="n">message</span><span class="p">.</span><span class="nf">Contains</span><span class="p">(</span><span class="s">"Error"</span><span class="p">))</span> <span class="n">Debug</span><span class="p">.</span><span class="nf">LogError</span><span class="p">(</span><span class="s">$"&lt;color=blue&gt;[GSSDataService]&lt;/color&gt; Getting data from Google Sheets failed. </span><span class="p">{</span><span class="n">message</span><span class="p">}</span><span class="s">"</span><span class="p">);</span>
            <span class="k">else</span> <span class="n">responseHandler</span><span class="p">?.</span><span class="nf">Invoke</span><span class="p">(</span><span class="n">response</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">catch</span> <span class="p">(</span><span class="n">InvalidCastException</span> <span class="n">e</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">Debug</span><span class="p">.</span><span class="nf">LogError</span><span class="p">(</span><span class="s">$"&lt;color=blue&gt;[GSSDataService]&lt;/color&gt; Parsing result from Google Sheets failed. Error: </span><span class="p">{</span><span class="n">e</span><span class="p">.</span><span class="n">Message</span><span class="p">}</span><span class="s">"</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="nf">updateStatus</span><span class="p">(</span><span class="k">true</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>返ってきた結果に<strong>Error</strong>文字列（GAS側で入れている）が含まれたらエラーログを書き出し、なければ結果を処理するコールバック<code>responseHandler</code>を呼び出します。</p>

<h1>
<span id="後書き" class="fragment"></span><a href="#%E5%BE%8C%E6%9B%B8%E3%81%8D"><i class="fa fa-link"></i></a>後書き</h1>

<p>Unity+Googleスプレッドシート+GASでサーバーレスの簡易データベース機能を作ってみました。当然いくつか問題もあります。</p>

<ul>
<li>完全JSON形式でデータのやりとりをしているため、複雑なデータ構造に対応できない（自分でシリアライザとデシリアライザを書くなどの工夫が要る）。</li>
<li>安全性一切考えていない（Google神がいい感じにしてくれるはず）。</li>
<li>負荷検証や処理速度を計測・比較していないので不明（使った肌感だと耐えられレベルの遅延）。</li>
<li>そもそもGoogleのサービスに<a href="https://developers.google.com/apps-script/guides/services/quotas" rel="nofollow noopener" target="_blank">制限</a>がある。<em>URL Fetch calls</em>だと、無料のGmailアカウントで1日2万回までしか呼べないので、大規模や非常に頻繁な通信に向いていない。</li>
</ul>

<p>しかしながら個人プロジェクトレベルのものとしては十分機能できるのではないかと思います。何より、Googleスプレッドシートならではの機能が使えて、直接データを一目瞭然で見たり、気軽にデータを修正したりすることができる点から、普通のSQLデータベースよりも便利かもしれません？（？）</p>

<h1>
<span id="おまけ" class="fragment"></span><a href="#%E3%81%8A%E3%81%BE%E3%81%91"><i class="fa fa-link"></i></a>おまけ</h1>

<p>Umbrellaにランキング機能も付いているので、それの使い方も紹介します。</p>

<ol>
<li>
<em>Assets/Umbrella/Ranking/RankingManager</em>プレハブをランキングを表示したいシーンのヒエラルキーに置いておく。</li>
<li>
<em>Assets/Umbrella/Ranking/RankingSettings</em>スクリタブルオブジェクトのインスペクターから、<em>App URL</em>フィールドにGASのウェブアプリケーションURLをコピーする。</li>
<li>
<em>Default Ranking Request Data</em>にデフォルトのランキング取得設定を入力する。

<ul>
<li>
<em>Ranking Name</em>：ランキングの名前（Googleシートのシート名でもある）。</li>
<li>
<em>Top Ranking List Settings</em>

<ul>
<li>
<em>Take Number</em>：上位何位までデータを取得する。ゼロならランキングリストがソートされず、空のリストが返ってくる。</li>
<li>
<em>Order By</em>：昇順（ASC）あるいは降順（DESC）にソートする。</li>
</ul>
</li>
<li>
<em>Around Me Ranking List Settings</em>

<ul>
<li>
<em>Take Number</em>：自分の順位の周りの何個データを取得する（自分のデータが出来る限り中心にされる）。ゼロならランキングリストがソートされず、空のリストが返ってくる。</li>
<li>
<em>Order By</em>：昇順（ASC）あるいは降順（DESC）にソートする。</li>
</ul>
</li>
</ul>
</li>
<li>スコアを送信したい時は、まず<code>SendScoreRequestData</code>というオブジェクトを作る必要がある。このオブジェクトでは送信するスコアとランキング取得設定をプロパティとして持つことになっている。ちなみに、<code>RankingManager.Instance.CreateDefaultSendScoreRequest(score)</code>を呼ぶことで、デフォルトのランキング取得設定でオブジェクトを作ることができる。ランキング取得時も同様で、<code>RankingRequestData</code>というオブジェクトを先に作っておく必要がある。あとは<code>RankingManager.Instance.SendScoresAsync(requestDataList, responseHandler)</code>でスコアを送信し、<code>RankingManager.Instance.GetRankingListsAsync(requestDataList, responseHandler)</code>でランキングリストを取得する。</li>
<li>うち、<code>responseHandler</code>はGAS側からのレスポンスを処理するコールバックで、通信が終わってから呼ばれる。GAS側のレスポンスは<code>RankingResponseData</code>型のリストに変換され、それの表示処理などは自分で実装できる。</li>
<li>こちらも<code>RankingManager.Instance.SendScoresAsync(requestDataList, responseHandler)</code>や<code>RankingManager.Instance.GetRankingListsAsync(requestDataList, responseHandler)</code>の前に<code>yield return</code>を付ければ<code>responseHandler</code>の実行完了を待つことができる。</li>
<li>具体的な使い方はサンプルシーンとスクリプトを参照してください。</li>
</ol>

<ul>
<li><p>Googleスプレッドシートにスコア送信します。<br>
<a href="https://camo.qiitausercontent.com/34df5c745d1bf3189a5a0faa463209ebaf70c56e/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3437353438322f33653362363865342d366132302d613034312d623934312d3964313531353865663231652e676966" target="_blank" rel="nofollow noopener"><img src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/475482/3e3b68e4-6a20-a041-b941-9d15158ef21e.gif" alt="send_score.gif" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/475482/3e3b68e4-6a20-a041-b941-9d15158ef21e.gif" loading="lazy"></a></p></li>
<li><p>Googleスプレッドシートにあるスコアを更新します。<br>
<a href="https://camo.qiitausercontent.com/39914cd6da3013e22d8f6985e7396d6b2c43044e/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3437353438322f32353363356330312d353738372d353563662d346534382d6131343066646234393366312e676966" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F475482%2F253c5c01-5787-55cf-4e48-a140fdb493f1.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=3e61c8858e58ce51cf776d2c539ec544" alt="update_score.gif" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/475482/253c5c01-5787-55cf-4e48-a140fdb493f1.gif" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F475482%2F253c5c01-5787-55cf-4e48-a140fdb493f1.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=6c182328a288e4da54d14e0d02322df0 1x" loading="lazy"></a></p></li>
<li><p>Googleスプレッドシートのランキングリストを取得します。<br>
<a href="https://camo.qiitausercontent.com/3879e6c035b2f8f79e815f2c5a275b585a9fe9f8/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3437353438322f64653133383963662d663766662d306333652d666334612d3563623934313139633336642e676966" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F475482%2Fde1389cf-f7ff-0c3e-fc4a-5cb94119c36d.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=43905fcab744f15a06eea9d064c1e2c4" alt="get_ranking.gif" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/475482/de1389cf-f7ff-0c3e-fc4a-5cb94119c36d.gif" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F475482%2Fde1389cf-f7ff-0c3e-fc4a-5cb94119c36d.gif?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=35ef6f7e475c36d567ad3704741dd4d2 1x" loading="lazy"></a></p></li>
</ul>

<h1>
<span id="参考" class="fragment"></span><a href="#%E5%8F%82%E8%80%83"><i class="fa fa-link"></i></a>参考</h1>

<ol>
<li><a href="https://qiita.com/divideby_zero/items/50897a2695aa04bfeb69" id="reference-4cdb01fb0315febbe263">UnityのWebGL出力に簡単に無料でグローバルランキングを実装できる仕組みを考えてみた</a></li>
<li><a href="https://qiita.com/zk_phi/items/7220b67afa84c58cc160">GAS で「一部のスコープへのアクセス権限がありません」と怒られたときの対処法</a></li>
</ol>
</div></div></section><div class="css-1yzj1fm"><div class="css-1uv1qiv"><span class="fa fa-twitter"></span></div><div class="css-1uv1qiv"><span class="fa fa-facebook"></span></div></div><div class="apm-Content"><div class="apm-Content_title">Why not register and get more from Qiita?</div><ol class="apm-Content_list"><li>We will deliver articles that match you<div class="description">By following users and tags, you can catch up information on technical fields that you are interested in as a whole</div></li><li>you can read useful information later efficiently<div class="description">By &quot;stocking&quot; the articles you like, you can search right away</div></li><div><a class="apm-Content_help" href="https://help.qiita.com/ja/articles/qiita-login-user" target="_blank"><i class="fa fa-fw fa-arrow-circle-right"></i>What you can do with signing up</a></div></ol><a href="/signup?callback_action=login_or_signup&amp;redirect_to=%2FTotorock%2Fitems%2F13e838af9dc9bfdce509&amp;realm=qiita" class="apm-Content_button apm-Content_button-signup">Sign up</a><a href="/login?callback_action=login_or_signup&amp;redirect_to=%2FTotorock%2Fitems%2F13e838af9dc9bfdce509&amp;realm=qiita" class="apm-Content_button apm-Content_button-signin">Login</a></div></div><div class="css-helsa7"></div></div></div></div><div class="css-109dbrr"><div class="css-5jpx49"><div class="css-mnxgyc"><button class=" css-1vlpknv"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/Totorock/items/13e838af9dc9bfdce509/likers" class="css-1iupg5d">11</a></div><div class="css-fsjkhv"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-1b17vb0">3</span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-7i7f4d"><div class="css-1gj7nt">Improve article</div><a href="/drafts/13e838af9dc9bfdce509/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/Totorock/items/13e838af9dc9bfdce509/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/Totorock/items/13e838af9dc9bfdce509/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/Totorock/items/13e838af9dc9bfdce509/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/Totorock/items/13e838af9dc9bfdce509.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="PersonalArticlePage" data-dom-id="PersonalArticlePage-react-component-4b017d3d-db53-4094-a357-5c175a6c5e3f">{"authorAnalyticsTrackingId":null,"organizationAnalyticsTrackingId":null}</script>
      
<footer id="globalFooter" class="st-Footer"><div class="st-Footer_container"><div class="st-Footer_start"><div class="st-Footer_logo"><svg viewbox="0 0 426.57 130" xmlns="http://www.w3.org/2000/svg"><circle cx="167.08" cy="21.4" r="12.28" /><path d="M250.81 29.66h23.48v18.9h-23.48z" /><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z" /><circle cx="216.33" cy="21.4" r="12.28" /></svg></div><div class="st-Footer_catchcopy">How developers code is here.</div><div class="st-Footer_socials"><a class="fa fa-twitter" href="https://twitter.com/qiita"></a><a class="fa fa-facebook-square" href="https://www.facebook.com/qiita/"></a></div></div><div class="st-Footer_end"><div class="st-Footer_qiita"><div class="st-Footer_label">Qiita</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="/about">About</a><a href="/terms">Terms</a><a href="/privacy">Privacy</a><a target="_blank" href="http://help.qiita.com/ja/articles/qiita-community-guideline">Guideline</a><a target="_blank" href="https://help.qiita.com/ja/articles/others-brand-guideline">Design Guideline</a></div><div class="st-Footer_column"><a href="/release-notes">Release</a><a href="/api/v2/docs">API</a><a href="/feedback/new">ご意見</a><a href="https://help.qiita.com">Help</a><a target="_blank" href="https://qiita.com/ads?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Advertisement</a></div></div></div><div class="st-Footer_increments"><div class="st-Footer_label">Increments</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="https://increments.co.jp/company/">About</a><a href="https://increments.co.jp/jobs/">採用情報</a><a href="https://blog.qiita.com">Blog</a></div><div class="st-Footer_column"><a href="https://teams.qiita.com/">Qiita Team</a><a href="https://jobs.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Jobs</a><a href="https://zine.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Zine</a></div></div></div></div></div><div class="st-Footer_copyright">© 2011-2021 Increments Inc.</div></footer><div id="Snackbar-react-component-337422ff-c545-4eb1-9a39-5b3d8d7669cb"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="Snackbar" data-dom-id="Snackbar-react-component-337422ff-c545-4eb1-9a39-5b3d8d7669cb">{}</script>
      
<div id="LoginModal-react-component-13908461-88d3-4817-9d96-341933ceae2d"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="LoginModal" data-dom-id="LoginModal-react-component-13908461-88d3-4817-9d96-341933ceae2d">{}</script>
      
<div id="StockModal-react-component-2bc946f5-f8f4-4a00-a869-188ce27a8bc0"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="StockModal" data-dom-id="StockModal-react-component-2bc946f5-f8f4-4a00-a869-188ce27a8bc0">{}</script>
      
</div><div id="dataContainer" style="display: none;" data-config="{&quot;actionPath&quot;:&quot;public/items#show&quot;,&quot;settings&quot;:{&quot;analyticsTrackingId&quot;:&quot;UA-24675221-12&quot;,&quot;assetsMap&quot;:{},&quot;csrfToken&quot;:&quot;1+ZNWZhdpMsHiBxDPt0RA6cSo2xxkfTfErycMedzp27pTKczykTPBvQEKk4RFyM7jYDkZ8r79C5lYcetWtWLWQ==&quot;,&quot;locale&quot;:&quot;en&quot;},&quot;currentUser&quot;:null}" /></body></html><script type="application/json" data-js-react-on-rails-store="AppStoreWithReactOnRails">{"snackbar":{"type":"","body":"","isActive":false},"article":{"article":{"body":"\u003cp\u003e\u003cstrong\u003e2020年7月9日更新：実装変更でメソッド名や使い方の紹介などの修正を行いました。\u003c/strong\u003e\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"前書き\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%89%8D%E6%9B%B8%E3%81%8D\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e前書き\u003c/h1\u003e\n\n\u003cp\u003eunity1weekをきっかけに、Unity+Googleスプレッドシート+GASで簡易ランキング機能を作ってみました。この仕組みで、ランキングだけではなく、任意のデータをアップロード・ダウンロードできれば、一応汎用的なデータベースとして使えるのではないかと思いました。例えばゲームのマスタデータをGoogleスプレッドシートに保存することで、アプリのバージョン更新なしでゲームの調整ができてまうとか、ゲームの最新バージョンをGoogleスプレッドシートに書き込んで、アプリ起動時にそれを取得して古ければ強制アップデートポップアップを出すとか、さらにチャットやユーザー情報の管理もGoogleスプレッドシートでやりとりするなど、ユースケースがどんどん湧いてきます。\u003cbr\u003e\nということで、実装してみました。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"使い方\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E4%BD%BF%E3%81%84%E6%96%B9\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e使い方\u003c/h1\u003e\n\n\u003cp\u003eプロジェクトは\u003ca href=\"https://github.com/RINNUXEI/Umbrella\" rel=\"nofollow noopener\" target=\"_blank\"\u003eUmbrella\u003c/a\u003e（トトロなので）という名でGithubに公開しました。最新パッケージのダウンロードは\u003ca href=\"https://github.com/RINNUXEI/Umbrella/releases\" rel=\"nofollow noopener\" target=\"_blank\"\u003eこちら\u003c/a\u003e。ちなみに、Umbrellaには単純なデータ通信管理システム\u003cstrong\u003eDatabase\u003c/strong\u003e以外に、簡易ランキングシステム\u003cstrong\u003eRanking\u003c/strong\u003eも含まれています。興味ある方はぜひ合わせていじってみてください。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"gas側\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#gas%E5%81%B4\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eGAS側\u003c/h2\u003e\n\n\u003col\u003e\n\u003cli\u003e新しいGoogleスプレッドシートを作成する。\u003c/li\u003e\n\u003cli\u003eメニューの\u003cem\u003eツール\u003c/em\u003eから\u003cem\u003eスクリプト エディタ\u003c/em\u003eをクリックする。\u003c/li\u003e\n\u003cli\u003e\n\u003cem\u003eAssets/Umbrella/Database/Database.gs\u003c/em\u003eの内容を\u003cem\u003eコード.gs\u003c/em\u003eにコピーする。\u003c/li\u003e\n\u003cli\u003eメニューの\u003cem\u003eファイル\u003c/em\u003e \u0026gt; \u003cem\u003e保存\u003c/em\u003eでプロジェクトに名前をつけて保存する（保存にちょっと2、3秒ぐらい掛かるかも）。\u003c/li\u003e\n\u003cli\u003eメニューの\u003cem\u003e公開\u003c/em\u003e \u0026gt; \u003cem\u003eウェブアプリケーションとして導入...\u003c/em\u003eをクリックする。\u003c/li\u003e\n\u003cli\u003e\n\u003cem\u003eウェブアプリケーションとして導入\u003c/em\u003eのポップアップにて、\u003cem\u003e次のユーザーとしてアプリケーションを実行\u003c/em\u003eに自分のアカウントを、\u003cem\u003eアプリケーションにアクセスできるユーザー\u003c/em\u003eに\u003cem\u003e全員（匿名ユーザーを含む）\u003c/em\u003eを設定する。\u003c/li\u003e\n\u003cli\u003e\n\u003cem\u003e導入\u003c/em\u003eをクリックして、\u003cem\u003e現在のウェブアプリケーションのURL\u003c/em\u003eの下に書いてあるURLをコピーする。\u003c/li\u003e\n\u003cli\u003e「認証が必要です」のポップアップが出たら\u003ca href=\"/zk_phi\" class=\"user-mention js-hovercard\" title=\"zk_phi\" data-hovercard-target-type=\"user\" data-hovercard-target-name=\"zk_phi\"\u003e@zk_phi\u003c/a\u003eさんの\u003ca href=\"https://qiita.com/zk_phi/items/7220b67afa84c58cc160\" id=\"reference-607c1cec04f345b71b96\"\u003e記事\u003c/a\u003eを参考にして認証を行ってください。\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"unity側\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#unity%E5%81%B4\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eUnity側\u003c/h2\u003e\n\n\u003col\u003e\n\u003cli\u003e\n\u003cem\u003eAssets/Umbrella/Database/DatabaseManager\u003c/em\u003eプレハブを通信するシーンのヒエラルキーにドラッグ\u0026amp;ドロップする。\u003c/li\u003e\n\u003cli\u003e\n\u003cem\u003eAssets/Umbrella/Database/DatabaseSettings\u003c/em\u003eスクリタブルオブジェクトのインスペクターから、\u003cem\u003eApp URL\u003c/em\u003eのフィールドに先ほどコピーしたGASのウェブアプリケーションURLをペーストする。\u003c/li\u003e\n\u003cli\u003e\n\u003cem\u003eDefault Sheet Name\u003c/em\u003eフィールドに使いたいGoogleスプレッドシートのデフォルトシート名を入力する。\u003c/li\u003e\n\u003cli\u003e任意のスクリプトで、データを送信したい場合は\u003ccode\u003eDatabaseManager.Instance.SendDataAsync(data, sheetName)\u003c/code\u003eを呼び、データを取得したい場合は\u003ccode\u003eDatabaseManager.Instance.GetDataAsync(keys, responseHandler, sheetName)\u003c/code\u003eを呼ぶ。\u003ccode\u003esheetName\u003c/code\u003eを省略した場合は、\u003cem\u003eDefault Sheet Name\u003c/em\u003eが使われる。\u003c/li\u003e\n\u003cli\u003eうち、\u003ccode\u003eresponseHandler\u003c/code\u003eはGAS側からのレスポンスを処理するコールバックで、通信が終わってから呼ばれる。GAS側のレスポンスは\u003ccode\u003eobject\u003c/code\u003e型のリストに変換され、それの表示処理などは自分で実装できる。\u003c/li\u003e\n\u003cli\u003eまた、\u003ccode\u003eDatabaseManager.Instance.SendDataAsync(data, sheetName)\u003c/code\u003eや\u003ccode\u003eDatabaseManager.Instance.GetDataAsync(keys, responseHandler, sheetName)\u003c/code\u003eの前に\u003ccode\u003eyield return\u003c/code\u003eを付ければ\u003ccode\u003eresponseHandler\u003c/code\u003eが実行完了するまで待つことができる。\u003c/li\u003e\n\u003cli\u003e具体的な使い方はサンプルシーンとスクリプトを参照してください。\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"デモ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%87%E3%83%A2\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eデモ\u003c/h1\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003cp\u003eGoogleスプレッドシートにデータを送信します。デモではデータ名と値のペアで複数データを送信しています。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/20c95a9cb7f613c828aa7649cfbfda6c6317828a/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3437353438322f33636239633465622d376562642d316338392d393364652d6564653362316266386530342e676966\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F475482%2F3cb9c4eb-7ebd-1c89-93de-ede3b1bf8e04.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=a06c9a84f2bf9615ece5641610dfce0b\" alt=\"send_data.gif\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/475482/3cb9c4eb-7ebd-1c89-93de-ede3b1bf8e04.gif\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F475482%2F3cb9c4eb-7ebd-1c89-93de-ede3b1bf8e04.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=3056d467c478475fbc40c91fa3393199 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eGoogleスプレッドシートにあるデータを更新します。デモではデータ名を指定して新しい値を送信しています。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/8b1bb660e587b7c6451a7bfcf6a48841bd481c09/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3437353438322f32623836356537312d343430622d373935392d656533612d3464616539623266393236352e676966\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F475482%2F2b865e71-440b-7959-ee3a-4dae9b2f9265.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=ab47941ad099f49677a1a27ac3f98a8c\" alt=\"update_data.gif\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/475482/2b865e71-440b-7959-ee3a-4dae9b2f9265.gif\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F475482%2F2b865e71-440b-7959-ee3a-4dae9b2f9265.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=9ca1882d4a2cc5086819bbc92b082bbd 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e他のクライアントとしてデータを送信します。Umbrellaではクライアントを識別するユニークIDをUnity側で生成してPlayerPrefsに保存しているため、PlayerPrefsをクリアしないまま送信すると既存のデータを上書きすることになります。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/800825ea25f83c8a4488d01d0c36c51da6623c13/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3437353438322f38376162663435302d333937352d633164622d393866382d6361376330626364306534622e676966\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/475482/87abf450-3975-c1db-98f8-ca7c0bcd0e4b.gif\" alt=\"send_another_data.gif\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/475482/87abf450-3975-c1db-98f8-ca7c0bcd0e4b.gif\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eGoogleスプレッドシートにあるデータを取得します。デモではデータ名のリストで複数のデータを取得しています。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/ba837e8297ab3cd748cf13d8d5a5c8a6ae4fe1bb/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3437353438322f66616264313061622d376263342d653839382d376132612d3262643264346131313764652e676966\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F475482%2Ffabd10ab-7bc4-e898-7a2a-2bd2d4a117de.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=b5313fcacccb3b4b5d6b5df9f0af8fb5\" alt=\"get_data.gif\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/475482/fabd10ab-7bc4-e898-7a2a-2bd2d4a117de.gif\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F475482%2Ffabd10ab-7bc4-e898-7a2a-2bd2d4a117de.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=94c634d9ae616418ec31bd9c134796aa 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eセル参照で範囲内のデータを一気に取得する方法もあります。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/51075ccef14be597453f3b7e78826c14148e5768/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3437353438322f37336534633964382d323363302d343966362d663362612d3937633865643035623238332e676966\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F475482%2F73e4c9d8-23c0-49f6-f3ba-97c8ed05b283.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=ea227c631fee2c3b1ebc428d091eef18\" alt=\"get_data_by_cell.gif\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/475482/73e4c9d8-23c0-49f6-f3ba-97c8ed05b283.gif\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F475482%2F73e4c9d8-23c0-49f6-f3ba-97c8ed05b283.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=533aa82cb0dcfe0fb8fc1d08d5e849ca 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"実装の抜粋\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AE%9F%E8%A3%85%E3%81%AE%E6%8A%9C%E7%B2%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e実装の抜粋\u003c/h1\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"gas側の処理\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#gas%E5%81%B4%E3%81%AE%E5%87%A6%E7%90%86\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eGAS側の処理\u003c/h2\u003e\n\n\u003cp\u003eGASはUnityから送ってきたデータに基づき、スプレッドシートの中身を更新します。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"js\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"kd\"\u003efunction\u003c/span\u003e \u003cspan class=\"nx\"\u003edoPost\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003ee\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"kd\"\u003evar\u003c/span\u003e \u003cspan class=\"nx\"\u003erequest\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003ee\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eparameter\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"kd\"\u003evar\u003c/span\u003e \u003cspan class=\"nx\"\u003emethod\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003erequest\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nx\"\u003eCONST\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eMethod\u003c/span\u003e\u003cspan class=\"p\"\u003e];\u003c/span\u003e\n\n  \u003cspan class=\"k\"\u003eif\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003emethod\u003c/span\u003e \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"nx\"\u003eCONST\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eSaveDataMethod\u003c/span\u003e\u003cspan class=\"p\"\u003e){\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"nx\"\u003esaveData\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003erequest\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nx\"\u003eCONST\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003ePayload\u003c/span\u003e\u003cspan class=\"p\"\u003e]);\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"k\"\u003eelse\u003c/span\u003e \u003cspan class=\"k\"\u003eif\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003emethod\u003c/span\u003e \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"nx\"\u003eCONST\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eGetDataMethod\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"nx\"\u003egetData\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003erequest\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nx\"\u003eCONST\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003ePayload\u003c/span\u003e\u003cspan class=\"p\"\u003e]);\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n  \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"nx\"\u003eContentService\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003ecreateTextOutput\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003eError: Invalid method\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e\u003ccode\u003esaveData\u003c/code\u003eと\u003ccode\u003egetData\u003c/code\u003eの実装詳細はここでは省略しますが、GASのAPIコールはコスト高いため、処理速度を高めるにはできる限りAPIコールの回数を減らす必要があります。例えばセルデータの取得で、各セルで\u003ccode\u003esheet.getRange().getValue()\u003c/code\u003eの代わりに、予め\u003ccode\u003evar data = sheet.getDataRange().getValues()\u003c/code\u003eで指定範囲のセルデータを一括で配列に格納し、後で配列から値を取るなどの策が考えられます。また、データの書き込みがある場合、排他処理（ロック）を入れる必要がありますが、一行のデータをまとめて一括でappendRow()を使えばセル単位でのロック処理をなくすテクニックもあります。appendRow()は不可分操作（Atomic Operation）なので排他処理が要らないからです。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"unityからgasへの送信\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#unity%E3%81%8B%E3%82%89gas%E3%81%B8%E3%81%AE%E9%80%81%E4%BF%A1\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eUnityからGASへの送信\u003c/h2\u003e\n\n\u003cp\u003e簡易のデータベース機能なので、特に通信の仕様とかは決めなく（暗号化？？）、完全にJSON形式で送信しています。JSON解析は軽量の\u003ca href=\"https://gist.github.com/darktable/1411710\" rel=\"nofollow noopener\" target=\"_blank\"\u003eMiniJson\u003c/a\u003eを導入しています。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eCustomYieldInstruction\u003c/span\u003e \u003cspan class=\"nf\"\u003eSendDataAsync\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eMonoBehaviour\u003c/span\u003e \u003cspan class=\"n\"\u003econtext\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003emethodName\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eIDictionary\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003eobject\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eAction\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eobject\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eresponseHandler\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003estrData\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eJson\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSerialize\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eformData\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eList\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eIMultipartFormSection\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;();\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eformData\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAdd\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eMultipartFormDataSection\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eConst\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eMethod\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003emethodName\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eformData\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAdd\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eMultipartFormDataSection\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eConst\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ePayload\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003estrData\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n\n    \u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"n\"\u003ecomplete\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003efalse\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"n\"\u003econtext\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eStartCoroutine\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nf\"\u003eCT_SendData\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eformData\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003estatus\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ecomplete\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003estatus\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eresponseHandler\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eWaitUntil\u003c/span\u003e\u003cspan class=\"p\"\u003e(()\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ecomplete\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e\u003ccode\u003eWWWForm\u003c/code\u003eがLegacyになったので、\u003ccode\u003eIMultipartFormSection\u003c/code\u003eでフォームデータを作成しています。フォームデータにGAS側で呼び出したいメソッド名とデータ内容を入れています。また、外部で\u003ccode\u003eyield return\u003c/code\u003eをつけて待たせられるように、返り値のタイプを\u003ccode\u003eCustomYieldInstruction\u003c/code\u003eにして\u003ccode\u003ecomplete\u003c/code\u003eがtrueになるまで処理を止めることを可能にしています。\u003c/p\u003e\n\n\u003cp\u003e\u003ccode\u003eUnityWebRequest\u003c/code\u003eの\u003ccode\u003ePost\u003c/code\u003eメソッドでフォームデータを送信しています。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003eIEnumerator\u003c/span\u003e \u003cspan class=\"nf\"\u003eCT_SendData\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eList\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eIMultipartFormSection\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eformData\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eAction\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003ebool\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eupdateStatus\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eAction\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eobject\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eresponseHandler\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"nf\"\u003eupdateStatus\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003efalse\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003ewww\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eUnityWebRequest\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003ePost\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003e_appURL\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eformData\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n    \u003cspan class=\"n\"\u003eDebug\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eLog\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u0026lt;color=blue\u0026gt;[GSSDataService]\u0026lt;/color\u0026gt; Start sending data to Google Sheets.\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003eyield\u003c/span\u003e \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003ewww\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSendWebRequest\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ewww\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eisNetworkError\u003c/span\u003e \u003cspan class=\"p\"\u003e||\u003c/span\u003e \u003cspan class=\"n\"\u003ewww\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eisHttpError\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eDebug\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eLogError\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e$\"\u0026lt;color=blue\u0026gt;[GSSDataService]\u0026lt;/color\u0026gt; Sending data to Google Sheets failed. Error: \u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003ewww\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eerror\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eelse\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eDebug\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eLog\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u0026lt;color=blue\u0026gt;[GSSDataService]\u0026lt;/color\u0026gt; Sending data to Google Sheets completed\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"k\"\u003etry\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eresponse\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eJson\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eDeserialize\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ewww\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003edownloadHandler\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003etext\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n            \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003emessage\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eresponse\u003c/span\u003e \u003cspan class=\"k\"\u003eas\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003emessage\u003c/span\u003e \u003cspan class=\"p\"\u003e!=\u003c/span\u003e \u003cspan class=\"k\"\u003enull\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e \u003cspan class=\"n\"\u003emessage\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eContains\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Error\"\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e \u003cspan class=\"n\"\u003eDebug\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eLogError\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e$\"\u0026lt;color=blue\u0026gt;[GSSDataService]\u0026lt;/color\u0026gt; Getting data from Google Sheets failed. \u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003emessage\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eelse\u003c/span\u003e \u003cspan class=\"n\"\u003eresponseHandler\u003c/span\u003e\u003cspan class=\"p\"\u003e?.\u003c/span\u003e\u003cspan class=\"nf\"\u003eInvoke\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eresponse\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ecatch\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eInvalidCastException\u003c/span\u003e \u003cspan class=\"n\"\u003ee\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eDebug\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eLogError\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e$\"\u0026lt;color=blue\u0026gt;[GSSDataService]\u0026lt;/color\u0026gt; Parsing result from Google Sheets failed. Error: \u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003ee\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eMessage\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"nf\"\u003eupdateStatus\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e返ってきた結果に\u003cstrong\u003eError\u003c/strong\u003e文字列（GAS側で入れている）が含まれたらエラーログを書き出し、なければ結果を処理するコールバック\u003ccode\u003eresponseHandler\u003c/code\u003eを呼び出します。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"後書き\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%BE%8C%E6%9B%B8%E3%81%8D\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e後書き\u003c/h1\u003e\n\n\u003cp\u003eUnity+Googleスプレッドシート+GASでサーバーレスの簡易データベース機能を作ってみました。当然いくつか問題もあります。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e完全JSON形式でデータのやりとりをしているため、複雑なデータ構造に対応できない（自分でシリアライザとデシリアライザを書くなどの工夫が要る）。\u003c/li\u003e\n\u003cli\u003e安全性一切考えていない（Google神がいい感じにしてくれるはず）。\u003c/li\u003e\n\u003cli\u003e負荷検証や処理速度を計測・比較していないので不明（使った肌感だと耐えられレベルの遅延）。\u003c/li\u003e\n\u003cli\u003eそもそもGoogleのサービスに\u003ca href=\"https://developers.google.com/apps-script/guides/services/quotas\" rel=\"nofollow noopener\" target=\"_blank\"\u003e制限\u003c/a\u003eがある。\u003cem\u003eURL Fetch calls\u003c/em\u003eだと、無料のGmailアカウントで1日2万回までしか呼べないので、大規模や非常に頻繁な通信に向いていない。\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eしかしながら個人プロジェクトレベルのものとしては十分機能できるのではないかと思います。何より、Googleスプレッドシートならではの機能が使えて、直接データを一目瞭然で見たり、気軽にデータを修正したりすることができる点から、普通のSQLデータベースよりも便利かもしれません？（？）\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"おまけ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%8A%E3%81%BE%E3%81%91\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eおまけ\u003c/h1\u003e\n\n\u003cp\u003eUmbrellaにランキング機能も付いているので、それの使い方も紹介します。\u003c/p\u003e\n\n\u003col\u003e\n\u003cli\u003e\n\u003cem\u003eAssets/Umbrella/Ranking/RankingManager\u003c/em\u003eプレハブをランキングを表示したいシーンのヒエラルキーに置いておく。\u003c/li\u003e\n\u003cli\u003e\n\u003cem\u003eAssets/Umbrella/Ranking/RankingSettings\u003c/em\u003eスクリタブルオブジェクトのインスペクターから、\u003cem\u003eApp URL\u003c/em\u003eフィールドにGASのウェブアプリケーションURLをコピーする。\u003c/li\u003e\n\u003cli\u003e\n\u003cem\u003eDefault Ranking Request Data\u003c/em\u003eにデフォルトのランキング取得設定を入力する。\n\n\u003cul\u003e\n\u003cli\u003e\n\u003cem\u003eRanking Name\u003c/em\u003e：ランキングの名前（Googleシートのシート名でもある）。\u003c/li\u003e\n\u003cli\u003e\n\u003cem\u003eTop Ranking List Settings\u003c/em\u003e\n\n\u003cul\u003e\n\u003cli\u003e\n\u003cem\u003eTake Number\u003c/em\u003e：上位何位までデータを取得する。ゼロならランキングリストがソートされず、空のリストが返ってくる。\u003c/li\u003e\n\u003cli\u003e\n\u003cem\u003eOrder By\u003c/em\u003e：昇順（ASC）あるいは降順（DESC）にソートする。\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cem\u003eAround Me Ranking List Settings\u003c/em\u003e\n\n\u003cul\u003e\n\u003cli\u003e\n\u003cem\u003eTake Number\u003c/em\u003e：自分の順位の周りの何個データを取得する（自分のデータが出来る限り中心にされる）。ゼロならランキングリストがソートされず、空のリストが返ってくる。\u003c/li\u003e\n\u003cli\u003e\n\u003cem\u003eOrder By\u003c/em\u003e：昇順（ASC）あるいは降順（DESC）にソートする。\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eスコアを送信したい時は、まず\u003ccode\u003eSendScoreRequestData\u003c/code\u003eというオブジェクトを作る必要がある。このオブジェクトでは送信するスコアとランキング取得設定をプロパティとして持つことになっている。ちなみに、\u003ccode\u003eRankingManager.Instance.CreateDefaultSendScoreRequest(score)\u003c/code\u003eを呼ぶことで、デフォルトのランキング取得設定でオブジェクトを作ることができる。ランキング取得時も同様で、\u003ccode\u003eRankingRequestData\u003c/code\u003eというオブジェクトを先に作っておく必要がある。あとは\u003ccode\u003eRankingManager.Instance.SendScoresAsync(requestDataList, responseHandler)\u003c/code\u003eでスコアを送信し、\u003ccode\u003eRankingManager.Instance.GetRankingListsAsync(requestDataList, responseHandler)\u003c/code\u003eでランキングリストを取得する。\u003c/li\u003e\n\u003cli\u003eうち、\u003ccode\u003eresponseHandler\u003c/code\u003eはGAS側からのレスポンスを処理するコールバックで、通信が終わってから呼ばれる。GAS側のレスポンスは\u003ccode\u003eRankingResponseData\u003c/code\u003e型のリストに変換され、それの表示処理などは自分で実装できる。\u003c/li\u003e\n\u003cli\u003eこちらも\u003ccode\u003eRankingManager.Instance.SendScoresAsync(requestDataList, responseHandler)\u003c/code\u003eや\u003ccode\u003eRankingManager.Instance.GetRankingListsAsync(requestDataList, responseHandler)\u003c/code\u003eの前に\u003ccode\u003eyield return\u003c/code\u003eを付ければ\u003ccode\u003eresponseHandler\u003c/code\u003eの実行完了を待つことができる。\u003c/li\u003e\n\u003cli\u003e具体的な使い方はサンプルシーンとスクリプトを参照してください。\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003cp\u003eGoogleスプレッドシートにスコア送信します。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/34df5c745d1bf3189a5a0faa463209ebaf70c56e/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3437353438322f33653362363865342d366132302d613034312d623934312d3964313531353865663231652e676966\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/475482/3e3b68e4-6a20-a041-b941-9d15158ef21e.gif\" alt=\"send_score.gif\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/475482/3e3b68e4-6a20-a041-b941-9d15158ef21e.gif\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eGoogleスプレッドシートにあるスコアを更新します。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/39914cd6da3013e22d8f6985e7396d6b2c43044e/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3437353438322f32353363356330312d353738372d353563662d346534382d6131343066646234393366312e676966\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F475482%2F253c5c01-5787-55cf-4e48-a140fdb493f1.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=3e61c8858e58ce51cf776d2c539ec544\" alt=\"update_score.gif\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/475482/253c5c01-5787-55cf-4e48-a140fdb493f1.gif\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F475482%2F253c5c01-5787-55cf-4e48-a140fdb493f1.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=6c182328a288e4da54d14e0d02322df0 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eGoogleスプレッドシートのランキングリストを取得します。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/3879e6c035b2f8f79e815f2c5a275b585a9fe9f8/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3437353438322f64653133383963662d663766662d306333652d666334612d3563623934313139633336642e676966\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F475482%2Fde1389cf-f7ff-0c3e-fc4a-5cb94119c36d.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=43905fcab744f15a06eea9d064c1e2c4\" alt=\"get_ranking.gif\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/475482/de1389cf-f7ff-0c3e-fc4a-5cb94119c36d.gif\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F475482%2Fde1389cf-f7ff-0c3e-fc4a-5cb94119c36d.gif?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=35ef6f7e475c36d567ad3704741dd4d2 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"参考\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%8F%82%E8%80%83\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e参考\u003c/h1\u003e\n\n\u003col\u003e\n\u003cli\u003e\u003ca href=\"https://qiita.com/divideby_zero/items/50897a2695aa04bfeb69\" id=\"reference-4cdb01fb0315febbe263\"\u003eUnityのWebGL出力に簡単に無料でグローバルランキングを実装できる仕組みを考えてみた\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://qiita.com/zk_phi/items/7220b67afa84c58cc160\"\u003eGAS で「一部のスコープへのアクセス権限がありません」と怒られたときの対処法\u003c/a\u003e\u003c/li\u003e\n\u003c/ol\u003e\n","createdAt":"2020-01-13T06:22:23Z","elapsedYearsFromLastModifiedAt":0,"encryptedId":"QXJWFqoE6wtPduaQGi+tvbk5/ZbJEVQtiw==--zCgAEo7p8KhOXc85--+PT4vn4pJnzjNiKeSwPtsA==","isBanned":false,"isDeprecated":false,"isDestroyableByViewer":false,"isEditRequestReadableByViewer":true,"isEditRequestSendableByViewer":true,"isLikableByViewer":true,"isLikedByViewer":false,"isPublic":true,"isSlide":false,"isStockableByViewer":true,"isStockedByViewer":false,"isSubscribableByViewer":false,"isSubscribedByViewer":false,"isUpdatableByViewer":false,"isUpdated":true,"lastModifiedAt":"2020-10-07T12:48:30Z","likesCount":11,"linkUrl":"https://qiita.com/Totorock/items/13e838af9dc9bfdce509","organization":null,"originalId":1136984,"stockedCount":3,"title":"Unity+Googleスプレッドシート+GASでサーバーレスのデータベースシステムを実現する？","toc":"\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%89%8D%E6%9B%B8%E3%81%8D\"\u003e前書き\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E4%BD%BF%E3%81%84%E6%96%B9\"\u003e使い方\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#gas%E5%81%B4\"\u003eGAS側\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#unity%E5%81%B4\"\u003eUnity側\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%87%E3%83%A2\"\u003eデモ\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AE%9F%E8%A3%85%E3%81%AE%E6%8A%9C%E7%B2%8B\"\u003e実装の抜粋\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#gas%E5%81%B4%E3%81%AE%E5%87%A6%E7%90%86\"\u003eGAS側の処理\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#unity%E3%81%8B%E3%82%89gas%E3%81%B8%E3%81%AE%E9%80%81%E4%BF%A1\"\u003eUnityからGASへの送信\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%BE%8C%E6%9B%B8%E3%81%8D\"\u003e後書き\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%81%8A%E3%81%BE%E3%81%91\"\u003eおまけ\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%8F%82%E8%80%83\"\u003e参考\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n","totalPv":3050,"uuid":"13e838af9dc9bfdce509","banReason":null,"adventCalendarItem":null,"author":{"encryptedId":"AunGkMs1m63Ec6VK4/yzsTNpVfnS--8p0+nHVCuKfoZNHR--2MLjR+t+2g6kSTl6Mbsu7Q==","originalId":475482,"description":"","facebookUrl":null,"githubUrl":"https://github.com/RINNUXEI","isBlockingViewer":false,"isFollowableByViewer":true,"isFollowedByViewer":false,"isTweetWebNotificationReceivable":true,"linkedinUrl":null,"name":"","profileImageUrl":"https://pbs.twimg.com/profile_images/1029722432389537793/PBWx9nU8_bigger.jpg","profileImageUrlW48":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fpbs.twimg.com%2Fprofile_images%2F1029722432389537793%2FPBWx9nU8_bigger.jpg?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=48\u0026s=2bee687831750eab0cad5e590ddc57b5","profileImageUrlW75":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fpbs.twimg.com%2Fprofile_images%2F1029722432389537793%2FPBWx9nU8_bigger.jpg?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=ba0ac8d7f66fdd1b7a8cdb6af39b6ee2","urlName":"Totorock","websiteUrl":null,"twitterUrl":"https://twitter.com/totorock_lin","twitterUrlName":"totorock_lin","revealedOrganizations":{"edges":[]}},"tags":[{"name":"JavaScript","urlName":"javascript"},{"name":"C#","urlName":"csharp"},{"name":"GoogleAppsScript","urlName":"googleappsscript"},{"name":"Unity","urlName":"unity"}],"followingLikers":{"edges":[]},"comments":{"totalCount":6}},"comments":[],"client":null,"ads_event_emitter":null}}</script>
