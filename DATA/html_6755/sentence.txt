More than 3 years have passed since last update.gloops Advent Calendar2016も21日目に突入しました！
毎日エンジニアが頑張って投稿してくれているので無事に完走できそうです21日目は本日で誕生日を迎え40代に一歩近付いたy_nakaiが担当致します
普段はマネジメント業務をやっていてめっきりコードに触れることが減っているので小ネタになります
C#エンジニアなら一度は触れるであろう【LINQPad】についてですgloops Advent Calendar1日目にて紹介されたデータチェック方法について、
【LINQPad】を使用してデータ参照してメールで通知という方法も採用しております
今回は複数のDBサーバを跨って参照する際に行ったことを記しますLINQPadで参照できるスキーマってデフォルトだと1個だけで、
現在参照しているスキーマとは別スキーマからテーブルをD&amp;Dするとスキーマ情報が変更されてしまいますよね
そんな時、簡単に別スキーマ情報を追加することができるんです！方法：左側のスキーマビューから、追加したいスキーマをCtrlを押しながらコード書いてるところにD&amp;Dあら、簡単！
するとスキーマビューに新たな接続が追加されるので、参照したいテーブルをD&amp;DすればOKです
もちろん3つ以上スキーマを追加することが可能です！Ctrl押しながら追加できるなんて簡単やん
って試しに別サーバのテーブルをD&amp;Dしたらエラーが発生しました
別サーバの場合は「linked servers」設定を入れなくてはいけないとのことリンクサーバーの作成方法はこちら
https://technet.microsoft.com/ja-jp/library/ff772782(v=sql.105).aspxう～ん、インフラに相談が必要ですね・・・結局、自作しちゃったほうが早そうですね
Dapperを使ってみますまずNuGet Package Manager（Ctrl＋Shift＋Pで起動）から「Dapper dot net」をAddして下さい
※注：Nuget integrationはDeveloper以上のライセンスが必要です
https://www.linqpad.net/Purchase.aspxあとはDapperを使ったコードを書くだけです
簡単なサンプルを載せておきます簡単にアクセスできました
同様に別DBについての記述をすればサーバを跨いだチェックが可能となりますこんな感じで、
gloops Advent Calendar1日目の投稿と同様に、必要なデータチェックをしてメール配信するようにしています


