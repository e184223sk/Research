More than 1 year has passed since last update.こんにちは。もっちゃそです。
Weekend Engineer(WE)の10月分の開発として、2Dスクロールアクションゲームを制作しました。
WEの開発プロダクトは、今回で2個目となります。以下のような流れで撮影しました。（前回の記事と重複しますがご容赦ください・・・）
当コミュニティでは以下のステップに従って経験を積んでいきます。ステップ2まで進み、いよいよ自分でアイデア出しをする段階に入りました。
来年度からゲーム制作の仕事をさせてもらえることになり、その経験を積もうと考えました。「ゲーム制作といえばUnityが多いよな」→「前に3～4か月間触っただけだし実装しやすいゲームにするか」ということで、2Dスクロールアクションゲームを選択しました。
それだけだとオリジナリティが無いので、完全に苦し紛れですが、ストーリーを設定しました。主人公が寝坊したので、授業が始まるまでに学校へ急ぐというもの。
画像と音楽の追加まで間に合わなかったため、ゲームやっただけだと全く分かりません・・・。ステージ右端の赤い物体に触れればクリアー、ステージから落下する or 時間切れになる or プレイヤーのライフが無くなるとゲームオーバーとなります。操作方法は以下の通りです。ゲーム画面だけだとゲームっぽくないと思い、作成しました。
Spaceキーを押すとゲーム画面へ移るようにしました。Unityの各ビューを使い、よしなに配置しました。
ステージ右端に赤いCubeオブジェクトGoalを配置し、"Goal"タグを付けました。
PlayerController.csでプレイヤーがGoalに触れたかどうかを検出し、GameManager.cs内のクリアーフラグを更新しています。
PlayerController.csをPlayerオブジェクトにアタッチすることで正常に動作しています。ステージから落下する or 時間切れになる or プレイヤーのライフが無くなる状態を、以下のように検出しました。ステージの下部に適当なオブジェクトを配置し、プレイヤーがそのオブジェクトに衝突したら落下していると見なします。時間切れに関しまして、次の前半部分で1秒ごとに残り時間の表示を更新しています。
それが0秒になったら時間切れとしています。
プレイヤーのライフ切れに関しましては、PlayerController.csのOnCollisionEnter2D（上記参照）で敵との衝突を検出し、その都度GameManager.cs内のダメージ変数を更新しています。
ライフの最大値 - ダメージ変数の値 &gt;= 0となったらライフ切れとしています。発射のキー入力の実装は、タイトル画面のSpaceキー押下部分と概ね同じです。
fキーが押されたら、Prefab（プレハブ）化したファイアボールのゲームオブジェクトをインスタンス化します。現在のプレイヤーの向きと1フレーム前のプレイヤーの向きを比較し（横方向のみ）、
向きが変わっていたらx軸方向のスケールを-1倍します。
これにより、プレイヤーが向いている向きに応じてテクスチャの向きも反転します。
※向きが変わったと判定するのは、設置している時のみに限定していますタイトル画面と同様の経緯で作成しました。
Spaceキーを押すとタイトル画面へ移るようにしました。
実装コードはタイトル画面と同じなので割愛させていただきます。調べたサイトが多いため、1つのセクションとしてまとめたいと思います。簡単なゲームでも1人でつくるのは大変でしたが、ゲーム制作には何が必要かを入念に考えることができました。ゲーム内容の企画、デザイン、サウンドの導入、コーディング、テストプレイなど。
前回よりも時間配分に気を付けることはできましたが、研究を優先していたためビジュアルやサウンドの導入、アイテムの設置までは至りませんでした・・・。
ただ、全ての工程を1人でこなす必要があったので、力はついたような気がします。※コード全体はこちらをご参照ください
→ Unity 2Dスクロールアクションゲーム：学校へ急ごう！渡辺大智さん (@ahpjop) 率いる開発コミュニティ。
「どんなアイデアもカタチにする」ことに焦点を置いて活動しています。
ホームページはこちら。このホームページも、WEのメンバーが制作しました。


