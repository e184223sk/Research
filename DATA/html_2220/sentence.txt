More than 1 year has passed since last update.こんにちは、アドベントカレンダー16日目担当の避雷です。急ですがこれを見てください。
https://docs.unity3d.com/ScriptReference/Shader.SetGlobalFloat.html
シェーダーにグローバル変数なんかあるんだ…複数のシェーダーに一括でパラメータを与えられると色々捗りそうですね、ちょっと調べてみましょう。https://docs.unity3d.com/ScriptReference/Shader.html
ここのドキュメントを読んでみます。

どうやらBuffer,Color,Float,Float配列などをShaderのグローバル変数として代入して利用することが出来るみたいです。global変数はC#で設定するようです。試しに適当な値を代入するコードといくつかのシェーダーがあれば動作検証ぐらいは出来そうです。ScriptReferenceに基づいて適当にSetGlobalFloatしてみました。
第一引数がShader側の変数名、第二引数がその値です。試しにグローバル変数を使って色を変えるシェーダーを実装してみましょう。折角globalなのでもう一つぐらい用意してみます。適当にSphereにアタッチしてみます。実行結果はこんな感じです。
C#側で送信したFloatの値が同時に反映されていることが確認できると思います。
PlayModeを止めるとそのままの値で静止します。なるほど、ShaderのGlobal変数には中々のポテンシャルがありそうです。C#で解析した音声波形データなんかをglobal変数にセットできれば、異なる挙動をする複数種類のオーディオビジュアライズ系のシェーダーを一括で管理できたりするので、可読性と表現力がグッと伸びそうです。今後の掘り下げに期待ですね。


