<!DOCTYPE html><html><head><meta charset="utf-8" /><title>C#: Array,List,Collection,Dictionary,HashSet,Queue,Stack,IEnumerable - Qiita</title><meta content="width=device-width,initial-scale=1,shrink-to-fit=no,viewport-fit=cover" name="viewport" /><meta content="#55c500" name="theme-color" /><meta content="XWpkTG32-_C4joZoJ_UsmDUi-zaH-hcrjF6ZC_FoFbk" name="google-site-verification" /><meta content="telephone=no" name="format-detection" /><link rel="canonical" href="https://qiita.com/aakasaka/items/fce713a90af011cbd21d" /><link href="/manifest.json" rel="manifest" /><link href="/opensearch.xml" rel="search" title="Qiita" type="application/opensearchdescription+xml" /><link as="script" href="https://www.googletagservices.com/tag/js/gpt.js" rel="preload" /><link href="https://securepubads.g.doubleclick.net" rel="preconnect" /><script async="" src="https://www.googletagservices.com/tag/js/gpt.js"></script><meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="VGwf5OUa9wvwkGWY6aq53rCN4an+wNhSfwkEXWfBJgtfJVILWSZWEEETdoq0U1rqBNFqs/o0oC6MtWmQ/w3tng==" /><link rel="shortcut icon" type="image/x-icon" href="https://cdn.qiita.com/assets/favicons/public/production-c620d3e403342b1022967ba5e3db1aaa.ico" /><link rel="apple-touch-icon" type="image/png" href="https://cdn.qiita.com/assets/favicons/public/apple-touch-icon-ec5ba42a24ae923f16825592efdc356f.png" /><link rel="stylesheet" media="all" href="https://cdn.qiita.com/assets/public/article-2eaa7dbedc42a8ea65c722cda46d0ebb.min.css" /><script src="https://cdn.qiita.com/assets/public/v3-article-bundle-63de2d91fef827269d3f6b958db2335b.min.js" defer="defer"></script><meta name="twitter:card" content="summary_large_image"><meta content="@Qiita" name="twitter:site" /><meta property="og:type" content="article"><meta property="og:title" content="C#: Array,List,Collection,Dictionary,HashSet,Queue,Stack,IEnumerable - Qiita"><meta property="og:image" content="https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0&amp;w=1200&amp;mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND1ReU02SUVGeWNtRjVMRXhwYzNRc1EyOXNiR1ZqZEdsdmJpeEVhV04wYVc5dVlYSjVMRWhoYzJoVFpYUXNVWFZsZFdVc1UzUmhZMnNzU1VWdWRXMWxjbUZpYkdVJnR4dC1jb2xvcj0lMjMzMzMmdHh0LWZvbnQ9SGlyYWdpbm8lMjBTYW5zJTIwVzYmdHh0LXNpemU9NTQmdHh0LWNsaXA9ZWxsaXBzaXMmdHh0LWFsaWduPWNlbnRlciUyQ21pZGRsZSZzPWRiZTZhNDBiYTI5NjMyNWQ1YzRjY2I4NGY0OTc4YWEy&amp;mark-align=center%2Cmiddle&amp;blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RR0ZoYTJGellXdGgmdHh0LWNvbG9yPSUyMzMzMyZ0eHQtZm9udD1IaXJhZ2lubyUyMFNhbnMlMjBXNiZ0eHQtc2l6ZT00NSZ0eHQtYWxpZ249cmlnaHQlMkNib3R0b20mcz1lODI4NTdiY2VjMTE1ZTY4OThiZmFmY2Q1ZTlmNmNmNA&amp;blend-align=center%2Cmiddle&amp;blend-mode=normal&amp;s=d538524fa65da70b357660cd9ec7f160"><meta property="og:description" content="

リストの種類多すぎ！？

C#初学者に必要以上に混乱を与える要素として、リスト／コレクションクラス多すぎ問題が知られています。

初学者への進言としては、とりあえず List&amp;lt;T&amp;gt; 使っとけーで、だいたいの局面は乗り切..."><meta content="https://qiita.com/aakasaka/items/fce713a90af011cbd21d" property="og:url" /><meta content="Qiita" property="og:site_name" /><meta content="564524038" property="fb:admins" /><meta content="C#,.NET,LINQ,adventcalendar2017" name="keywords" /><script>!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window, document,'script',
'https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '668972150489891');
fbq('track', 'PageView');</script><style data-emotion-css="17jxvjw 11t2ec1 1dvr2p8 18lkoru 1g4cku8 1iupg5d ijvq0v 15cocm3 12rp90f 115f4t 1b8uj5v 79elbk 16hhh7b fcbn8c 1gj7nt 154zy0m yikrym 1jqivyb 1ode1bp le4d8r 1hbd3g7 1nzh4zz 38fzdi helsa7 8qb8m4 2imjyh he5w1s 70qvj9 3ojehk 100alwu 1dtnjt5 10ougpm 1ay9vb9 m19uds cgzq40 1wa99t2 1l3zk9f 4czcte 1yzj1fm 1uv1qiv 109dbrr 5jpx49 mnxgyc 1vlpknv fsjkhv 1b17vb0 7i7f4d"}>.css-17jxvjw{display:grid;display:-ms-grid;grid-template-columns:80px minmax(0,1fr) 300px;-ms-grid-columns:80px minmax(0,1fr) 300px;grid-template-rows:minmax(270px,auto) 1fr;-ms-grid-rows:minmax(270px,auto) 1fr;max-width:1280px;margin-right:auto;margin-left:auto;padding-top:24px;padding-right:24px;padding-left:24px;}@media (max-width:1200px){.css-17jxvjw{padding-bottom:0;padding-left:0;padding-right:0;}}@media (max-width:992px){.css-17jxvjw{grid-template-columns:80px 452px 300px;-ms-grid-columns:80px 452px 300px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}}@media (max-width:770px){.css-17jxvjw{display:block;}}@media (max-width:480px){.css-17jxvjw{padding-top:0;}}.css-11t2ec1{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;z-index:5;position:-webkit-sticky;position:sticky;top:calc(56px + 24px + 16px + 32px - 16px);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:16px;width:80px;}.css-11t2ec1:after{content:'';display:table;}.css-11t2ec1:before{content:'';display:table;}@media (max-width:770px){.css-11t2ec1{display:none;}}.css-1dvr2p8{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-18lkoru{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;background-color:#FFFFFF;}.css-1g4cku8{display:inline-block;vertical-align:middle;height:20px;width:20px;fill:#55C500;}.css-1iupg5d{color:#55C500;cursor:pointer;font-size:14px;font-weight:bold;}.css-ijvq0v{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-15cocm3{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#FFFFFF;border:2px solid #6E6F70;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:2px 0px 0px;width:40px;}.css-12rp90f{display:inline-block;vertical-align:bottom;height:17.77777777777778px;width:16px;fill:#6E6F70;}.css-115f4t{color:#6E6F70;font-size:14px;font-weight:bold;}.css-1b8uj5v{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;margin-bottom:16px;padding:0;}.css-79elbk{position:relative;}.css-16hhh7b{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;padding:0;}.css-fcbn8c{display:none;bottom:initial;left:initial;right:initial;top:initial;left:100%;top:calc(-8px - (14px * 1.8) - 16px - 4px);}.css-1gj7nt{color:rgba(0,0,0,0.6);font-size:14px;font-weight:bold;line-height:1.8;padding:8px 16px;}.css-154zy0m{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.87);cursor:pointer;font-size:16px;font-weight:normal;line-height:1.8;padding:4px 16px;}.css-154zy0m:hover{-webkit-text-decoration:none;text-decoration:none;background-color:#F2F2F2;}.css-yikrym{width:20px;}.css-1jqivyb{color:rgba(0,0,0,0.6);font-size:13px;}.css-1ode1bp{background-color:rgba(0,0,0,0.12);height:1px;width:100%;margin:8px 0;}.css-le4d8r{display:inline-block;vertical-align:middle;height:13px;width:13px;fill:rgba(0,0,0,0.6);}.css-1hbd3g7{height:250px;}.css-1nzh4zz{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:16px 32px;background-color:#FBE69E;color:rgba(0,0,0,0.87);line-height:1.5;font-weight:600;}@media (max-width:770px){.css-1nzh4zz{padding:16px;}}.css-38fzdi{color:#CA832A;margin-right:4px;}.css-helsa7{background-color:#FFFFFF;padding:32px;margin-bottom:24px;}@media (max-width:992px){.css-helsa7{margin:0 auto 40px;}}@media (max-width:480px){.css-helsa7{margin:0 0 40px;padding:32px 16px;}}.css-8qb8m4{margin-bottom:48px;}.css-2imjyh{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-he5w1s{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;width:100%;}@media (max-width:770px){.css-he5w1s{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}}.css-70qvj9{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.css-3ojehk{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;margin-right:4px;}.css-100alwu{display:inline-block;border-radius:50%;line-height:1;overflow:hidden;vertical-align:middle;}.css-1dtnjt5{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-10ougpm{color:rgba(0,0,0,0.87);font-size:14px;font-weight:600;line-height:1.8;margin-right:4px;text-wrap:break-word;word-break:break-all;}.css-1ay9vb9{margin-right:16px;}.css-m19uds{color:rgba(0,0,0,0.6);font-size:14px;line-height:1.8;}.css-cgzq40{color:rgba(0,0,0,0.87);font-size:32px;font-weight:bold;line-height:1.4;margin-top:8px;text-wrap:break-word;word-break:break-all;}.css-1wa99t2{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.6);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:8px;}.css-1l3zk9f{color:rgba(0,0,0,0.6);font-size:20px;margin-right:8px;}.css-4czcte{margin-right:4px;color:inherit;font-size:14px;line-height:1.8;}.css-4czcte:not(:last-child)::after{content:',';margin-right:4px;}.css-1yzj1fm{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:32px;}.css-1uv1qiv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-size:20px;height:32px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin-right:16px;outline:none;padding:0;width:32px;}.css-109dbrr{background-color:#F9F9F9;border-top:1px solid rgba(0,0,0,0.12);bottom:0;box-shadow:0px 1px 4px rgba(0,0,0,0.14);display:none;height:calc(env(safe-area-inset-bottom,0px) + 56px);-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding-bottom:env(safe-area-inset-bottom);position:-webkit-sticky;position:sticky;width:100%;z-index:2000;}@media (max-width:770px){.css-109dbrr{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}.css-5jpx49{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:space-evenly;-webkit-justify-content:space-evenly;-ms-flex-pack:space-evenly;justify-content:space-evenly;width:100%;}.css-mnxgyc{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1vlpknv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;margin-right:4px;background-color:#FFFFFF;}.css-fsjkhv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1b17vb0{color:#6E6F70;font-size:14px;font-weight:bold;margin-left:4px;}.css-7i7f4d{display:none;bottom:initial;left:initial;right:initial;top:initial;bottom:32px;right:0;}</style></head><body><div class="allWrapper"><div><div id="GlobalHeader-react-component-08e57122-13a5-447c-8b1a-b9b4dba6cf2b"><div class="st-Header"><div class="st-Header_container"><div class="st-Header_start"><a href="/" class="st-Header_logo"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 426.57 130"><circle cx="167.08" cy="21.4" r="12.28"></circle><path d="M250.81 29.66h23.48v18.9h-23.48z"></path><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z"></path><circle cx="216.33" cy="21.4" r="12.28"></circle></svg></a><div class="st-Header_communitySelector" tabindex="0"><span class="fa fa-caret-down"></span></div><div class="st-Header_dropdown"><div class="st-Header_dropdownHeading">Qiita Teams that are logged in</div><div class="st-Header_dropdownItemNote">You are not logged in to any team</div><hr class="st-Header_dropdownDivider st-Header_dropdownDivider-shrink"/><a href="https://teams-center.qiita.com/find_team" class="st-Header_dropdownItem"><span class="fa fa-fw fa-sign-in st-Header_dropdownItemIcon"></span><div>Log in to Qiita Team</div></a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Community</div><a href="/organizations" class="st-Header_dropdownItem">Organization</a><a href="/official-events/open" class="st-Header_dropdownItem">Event</a><a href="/advent-calendar" class="st-Header_dropdownItem">Advent Calendar</a><a href="https://qiitadon.com/" class="st-Header_dropdownItem" target="_blank">Qiitadon (β)</a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Service</div><a href="https://jobs.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Jobs</a><a href="https://zine.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Zine</a><a href="https://blog.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Blog</a></div><form class="st-Header_search" action="/search" method="get"><span class="fa fa-search st-Header_searchIcon"></span><input type="search" class="st-Header_searchInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form><form class="st-Header_searchModal" action="/search" method="get"><input type="text" class="st-Header_searchModalInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form></div><div class="st-Header_end"><div class="st-Header_searchButton"><span class="fa fa-search"></span></div><a class="st-Header_signupButton" href="/signup?redirect_to=%2Faakasaka%2Fitems%2Ffce713a90af011cbd21d">Signup</a><a class="st-Header_loginLink" href="/login?redirect_to=%2Faakasaka%2Fitems%2Ffce713a90af011cbd21d">Login</a></div><div class="st-Header_overlay"></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="GlobalHeader" data-dom-id="GlobalHeader-react-component-08e57122-13a5-447c-8b1a-b9b4dba6cf2b">{"unreadNotificationsCount":null,"realms":[{"humanName":"Qiita","isCurrentRealm":true,"isQiita":true,"isQiitaTeam":false,"loggedInUser":null,"teamId":null,"url":"https://qiita.com/"}],"teamFindUrl":"https://teams-center.qiita.com/find_team","isTeamOnlyUser":null,"currentUser":null}</script>
      
</div><div class="st-HeaderAlert st-HeaderAlert-warning"><div class="st-HeaderAlert_body"></div></div><script type="application/ld+json">{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"/","name":"Qiita"}},{"@type":"ListItem","position":2,"item":{"@id":"/tags/csharp","name":"C#"}}]}</script><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","datePublished":"2017-12-16T13:15:04.000+09:00","dateModified":"2017-12-16T13:25:12.000+09:00","headline":"C#: Array,List,Collection,Dictionary,HashSet,Queue,Stack,IEnumerable","image":"https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0\u0026w=1200\u0026mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND1ReU02SUVGeWNtRjVMRXhwYzNRc1EyOXNiR1ZqZEdsdmJpeEVhV04wYVc5dVlYSjVMRWhoYzJoVFpYUXNVWFZsZFdVc1UzUmhZMnNzU1VWdWRXMWxjbUZpYkdVJnR4dC1jb2xvcj0lMjMzMzMmdHh0LWZvbnQ9SGlyYWdpbm8lMjBTYW5zJTIwVzYmdHh0LXNpemU9NTQmdHh0LWNsaXA9ZWxsaXBzaXMmdHh0LWFsaWduPWNlbnRlciUyQ21pZGRsZSZzPWRiZTZhNDBiYTI5NjMyNWQ1YzRjY2I4NGY0OTc4YWEy\u0026mark-align=center%2Cmiddle\u0026blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RR0ZoYTJGellXdGgmdHh0LWNvbG9yPSUyMzMzMyZ0eHQtZm9udD1IaXJhZ2lubyUyMFNhbnMlMjBXNiZ0eHQtc2l6ZT00NSZ0eHQtYWxpZ249cmlnaHQlMkNib3R0b20mcz1lODI4NTdiY2VjMTE1ZTY4OThiZmFmY2Q1ZTlmNmNmNA\u0026blend-align=center%2Cmiddle\u0026blend-mode=normal\u0026s=d538524fa65da70b357660cd9ec7f160","mainEntityOfPage":"https://qiita.com/aakasaka/items/fce713a90af011cbd21d","author":{"@type":"Person","address":"","email":null,"identifier":"aakasaka","name":"aakasaka","image":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F211332%2Fprofile-images%2F1509624834?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=f290f104fa6578740910b820cb1f679d","url":"https://qiita.com/aakasaka","description":"","memberOf":[]},"publisher":{"@type":"Organization","name":"Qiita","logo":{"@type":"ImageObject","url":"//cdn.qiita.com/assets/public/qiita-logo-c39ded593afa388e2e1ba435b110554e.png"}}}</script><style type="text/css">.wb-CampaignLink {
  background-color: #333333;
  width: 100%;
}

.wb-CampaignLink_container {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  max-width: 1100px;
  margin: 0 auto;
  font-size: 13px;
  padding: 0.8em;
}
.wb-CampaignLink_container > a {
  color: #fff;
}

.wb-CampaignLink_container > a:hover {
  text-decoration: underline;
}</style><div class="wb-CampaignLink"><div class="wb-CampaignLink_container"><a target="_blank" id="header_text_message_1" href="https://zine.qiita.com/interview/202107-line-growth-technology/?utm_source=qiita&amp;utm_medium=header-banner">LINEグループの成長を担うLINE Growth Technologyのこれまでとこれから</a><a target="_blank" id="header_text_message_2" href="https://zine.qiita.com/interview/202107-line-growth-technology/?utm_source=qiita&amp;utm_medium=header-banner">詳しくはこちら</a></div><script>td.trackEvent(
  'front_events',
  {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"aakasaka","type":"items","id":"fce713a90af011cbd21d"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Show","data":{"message":"LINEグループの成長を担うLINE Growth Technologyのこれまでとこれから","url":"https://zine.qiita.com/interview/202107-line-growth-technology/?utm_source=qiita\u0026utm_medium=header-banner","sub_message":"詳しくはこちら"}}
)</script><script>document.getElementById('header_text_message_1').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"aakasaka","type":"items","id":"fce713a90af011cbd21d"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":1,"pos_id":"header_text_message_1","message":"LINEグループの成長を担うLINE Growth Technologyのこれまでとこれから","url":"https://zine.qiita.com/interview/202107-line-growth-technology/?utm_source=qiita\u0026utm_medium=header-banner","sub_message":"詳しくはこちら"}}
  )
})</script><script>document.getElementById('header_text_message_2').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"aakasaka","type":"items","id":"fce713a90af011cbd21d"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":1,"pos_id":"header_text_message_2","message":"LINEグループの成長を担うLINE Growth Technologyのこれまでとこれから","url":"https://zine.qiita.com/interview/202107-line-growth-technology/?utm_source=qiita\u0026utm_medium=header-banner","sub_message":"詳しくはこちら"}}
  )
})</script></div><script type="application/json" id="js-react-on-rails-context">{"railsEnv":"production","inMailer":false,"i18nLocale":"en","i18nDefaultLocale":"en","href":"https://qiita.com/aakasaka/items/fce713a90af011cbd21d","location":"/aakasaka/items/fce713a90af011cbd21d","scheme":"https","host":"qiita.com","port":null,"pathname":"/aakasaka/items/fce713a90af011cbd21d","search":null,"httpAcceptLanguage":null,"actionPath":"public/items#show","settings":{"analyticsTrackingId":"UA-24675221-12","assetsMap":{},"csrfToken":"QSFXnLXsNSE84gHfSIRYhlry3opVmnhog6O831OxXTpKaBpzCdCUOo1hEs0Vfbuy7q5VkFFuABRwH9ESy32Wrw==","locale":"en"},"currentUser":null,"isLoggedIn":false,"recaptchaSiteKey":"6LfNkiQTAAAAAM3UGnSquBy2akTITGNMO_QDxMw6","serverSide":false}</script>
<div id="PersonalArticlePage-react-component-4ce44085-720f-4d51-b98a-60ad53d80288"><div class="p-items_wrapper"><div class=" css-17jxvjw"><div class="css-11t2ec1"><div class="css-1dvr2p8"><button class=" css-18lkoru"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/aakasaka/items/fce713a90af011cbd21d/likers" class="css-1iupg5d">39</a></div><div class="css-ijvq0v"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-115f4t">29</span></div><div class="css-1b8uj5v"><span class="fa fa-twitter"></span></div><div class="css-1b8uj5v"><span class="fa fa-facebook"></span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-fcbn8c"><div class="css-1gj7nt">Improve article</div><a href="/drafts/fce713a90af011cbd21d/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/aakasaka/items/fce713a90af011cbd21d/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/aakasaka/items/fce713a90af011cbd21d/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/aakasaka/items/fce713a90af011cbd21d/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/aakasaka/items/fce713a90af011cbd21d.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div><div class="p-items_options"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_toc"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_main"><div class="css-1nzh4zz"><span class="fa fa-fw fa-warning css-38fzdi"></span><p>More than 3 years have passed since last update.</p></div><div class="css-helsa7"><div class="css-8qb8m4"><div class="it-AdcalRibbon"><span><a href="/advent-calendar/2017/softgiken" class="it-AdcalRibbon_title">ソフト技研<!-- --> Advent Calendar<!-- --> <!-- -->2017</a>Day 16</span></div><div class="css-2imjyh"><div class="css-he5w1s"><div class="css-70qvj9"><div class="css-3ojehk"><a href="/aakasaka"><img class="css-100alwu eyfquo10" src="https://qiita-image-store.s3.amazonaws.com/0/211332/profile-images/1509624834" width="24" height="24" loading="lazy"/></a></div><div class="css-1dtnjt5"><a href="/aakasaka" class="css-10ougpm">@<!-- -->aakasaka</a><div class="css-1ay9vb9"><span><meta content="2017-12-16T04:15:04Z"/><time dateTime="2017-12-16T04:25:12Z" class="css-m19uds">updated at 2017-12-16</time></span></div></div></div></div></div><h1 class="css-cgzq40">C#: Array,List,Collection,Dictionary,HashSet,Queue,Stack,IEnumerable</h1><div class="css-1wa99t2"><span class="fa fa-tags mr-1of2 css-1l3zk9f" aria-hidden="true"></span><a href="/tags/csharp" class="css-4czcte">C#</a><a href="/tags/.net" class="css-4czcte">.NET</a><a href="/tags/linq" class="css-4czcte">LINQ</a><a href="/tags/adventcalendar2017" class="css-4czcte">adventcalendar2017</a></div></div><section class="it-MdContent"><div id="personal-public-article-body"><div>
<h1>
<span id="リストの種類多すぎ" class="fragment"></span><a href="#%E3%83%AA%E3%82%B9%E3%83%88%E3%81%AE%E7%A8%AE%E9%A1%9E%E5%A4%9A%E3%81%99%E3%81%8E"><i class="fa fa-link"></i></a>リストの種類多すぎ！？</h1>

<p>C#初学者に必要以上に混乱を与える要素として、リスト／コレクションクラス多すぎ問題が知られています。</p>

<p>初学者への進言としては、とりあえず <code>List&lt;T&gt;</code> 使っとけーで、だいたいの局面は乗り切れるかなとも思いますが、C#を生業とするならば、ちゃんと各クラスの特徴を知った上で正しく使いわけられるようになりたいところ。</p>

<p>この記事では、コレクション使い分けの指針をいくらか共有できればと思います。</p>

<h1>
<span id="使わないもの" class="fragment"></span><a href="#%E4%BD%BF%E3%82%8F%E3%81%AA%E3%81%84%E3%82%82%E3%81%AE"><i class="fa fa-link"></i></a>使わないもの</h1>

<h2>
<span id="systemcollections名前空間" class="fragment"></span><a href="#systemcollections%E5%90%8D%E5%89%8D%E7%A9%BA%E9%96%93"><i class="fa fa-link"></i></a>System.Collections名前空間</h2>

<p><code>ArrayList</code> , <code>IList</code> , <code>ICollection</code> , <code>Hashtable</code> 等、C#にジェネリックが導入される以前の遺産である非ジェネリックなコレクションのクラス／インターフェースがSystem.Collections名前空間に存在します。</p>

<p>が、もはやこれらを直接使う必要性はほぼ無いと考えて良いでしょう。</p>

<p>本ページでもこれ以降触れることはありません。</p>

<h1>
<span id="主要インターフェース" class="fragment"></span><a href="#%E4%B8%BB%E8%A6%81%E3%82%A4%E3%83%B3%E3%82%BF%E3%83%BC%E3%83%95%E3%82%A7%E3%83%BC%E3%82%B9"><i class="fa fa-link"></i></a>主要インターフェース</h1>

<h2>
<span id="ienumerablet" class="fragment"></span><a href="#ienumerablet"><i class="fa fa-link"></i></a>IEnumerable&lt;T&gt;</h2>

<p>すべてのリスト・コレクションの基本となる、「列挙できる」ことを表すインターフェースです。</p>

<p>foreach文やLINQメソッドを適用できる最も抽象的なインターフェースであるため、公開メソッドの引数はとりあえず <code>IEnumerable&lt;T&gt;</code> にしとけ的なコードを見かけることがありますが、以下のような点に注意する必要があります。</p>

<h3>
<span id="有限である保証がない" class="fragment"></span><a href="#%E6%9C%89%E9%99%90%E3%81%A7%E3%81%82%E3%82%8B%E4%BF%9D%E8%A8%BC%E3%81%8C%E3%81%AA%E3%81%84"><i class="fa fa-link"></i></a>有限である保証がない</h3>

<p><code>IEnumerable&lt;T&gt;</code> というインターフェースは、要素数が有限であることを保証しません。</p>

<p>例として、以下のメソッドは要素数が無限なコレクション（ <code>{0,0,0,0,0,...}</code> ）を返します。</p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="n">IEnumerable</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;</span> <span class="nf">EnumerateZero</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">while</span><span class="p">(</span><span class="k">true</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">yield</span> <span class="k">return</span> <span class="m">0</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>このようなコレクションをCount()で数えようとしたり、ToArray()で配列化しようとした瞬間にOverflow／OutOfMemoryで落ちます。</p>

<h3>
<span id="列挙のコストがわからない" class="fragment"></span><a href="#%E5%88%97%E6%8C%99%E3%81%AE%E3%82%B3%E3%82%B9%E3%83%88%E3%81%8C%E3%82%8F%E3%81%8B%E3%82%89%E3%81%AA%E3%81%84"><i class="fa fa-link"></i></a>列挙のコストがわからない</h3>

<p><code>IEnumerable&lt;T&gt;</code> インターフェースは遅延評価をサポートします。<br>
この実体が式である場合、必要になったタイミングで初めて評価されます。</p>

<p>メソッドの引数などで外部からこのインターフェースを受け取ると、列挙に伴うコストを予測することができません。</p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="k">void</span> <span class="nf">PrintNums</span><span class="p">(</span><span class="n">IEnumerable</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;</span> <span class="n">nums</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">nums</span><span class="p">.</span><span class="nf">Count</span><span class="p">();</span> <span class="n">i</span><span class="p">++)</span>
    <span class="p">{</span>
        <span class="kt">var</span> <span class="n">num</span> <span class="p">=</span> <span class="n">nums</span><span class="p">.</span><span class="nf">ElementAt</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
        <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">num</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>上のコードは一見なんの問題もないように見えますが、例えば以下のEnumerateNumsメソッドにより返される値を渡して実行した場合、</p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="n">IEnumerable</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;</span> <span class="nf">EnumerateNums</span><span class="p">()</span>
<span class="p">{</span>
    <span class="c1">//1秒くらいかかる重い処理をしながら1,2,3,4を返す</span>
    <span class="n">Thread</span><span class="p">.</span><span class="nf">Sleep</span><span class="p">(</span><span class="m">1000</span><span class="p">);</span>
    <span class="k">yield</span> <span class="k">return</span> <span class="m">1</span><span class="p">;</span>
    <span class="n">Thread</span><span class="p">.</span><span class="nf">Sleep</span><span class="p">(</span><span class="m">1000</span><span class="p">);</span>
    <span class="k">yield</span> <span class="k">return</span> <span class="m">2</span><span class="p">;</span>
    <span class="n">Thread</span><span class="p">.</span><span class="nf">Sleep</span><span class="p">(</span><span class="m">1000</span><span class="p">);</span>
    <span class="k">yield</span> <span class="k">return</span> <span class="m">3</span><span class="p">;</span>
    <span class="n">Thread</span><span class="p">.</span><span class="nf">Sleep</span><span class="p">(</span><span class="m">1000</span><span class="p">);</span>
    <span class="k">yield</span> <span class="k">return</span> <span class="m">4</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="kt">var</span> <span class="n">nums</span> <span class="p">=</span> <span class="nf">EnumerateNums</span><span class="p">();</span>
<span class="nf">PrintNums</span><span class="p">(</span><span class="n">nums</span><span class="p">);</span>
</code></pre></div></div>

<p>上記コードは、実行に <strong>30秒</strong> もかかります。<sup id="fnref1"><a href="#fn1" title="nums.Count()が5回走るので4秒×5、nums.ElementAt(0)～nums.ElementAt(3)にそれぞれ1,2,3,4秒を要するので、20+1+2+3+4=30">1</a></sup></p>

<p>このように要素数をCountする必要がある場合などは、引数をオブジェクト化された <code>List&lt;T&gt;</code> や <code>IReadOnlyList&lt;T&gt;</code> などの形で受け取るか、最初にオブジェクト化して、評価が1度しか走らないようにするべきです。</p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="k">void</span> <span class="nf">PrintNums</span><span class="p">(</span><span class="n">IEnumerable</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;</span> <span class="n">nums</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">//ここで式が確定する（※ただし要素が有限である前提）</span>
    <span class="kt">var</span> <span class="n">array</span> <span class="p">=</span> <span class="n">nums</span><span class="p">.</span><span class="nf">ToArray</span><span class="p">();</span>

    <span class="c1">//もちろんforeachでも良い</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">array</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
    <span class="p">{</span>
        <span class="kt">var</span> <span class="n">num</span> <span class="p">=</span> <span class="n">array</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
        <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">num</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>上記コードなら4秒で実行されます。</p>

<p>もちろん、この遅延評価の性質は、使いどころを間違えなければ効率の良い処理の実装に役立つものです。<br>
たとえば前述の <code>EnumerateNums()</code> の結果が1つ以上の要素を持つかどうかだけを知りたい場合、オブジェクト化して <code>EnumerateNums().ToArray().Length &gt; 0</code> とやれば同様に4秒かかりますが、式のまま <code>EnumerateNums().Any()</code> と調べれば、最初の要素が返されるところまでしか評価されず、実行に1秒しかかかりません。</p>

<h2>
<span id="icollectiont-ilistt" class="fragment"></span><a href="#icollectiont-ilistt"><i class="fa fa-link"></i></a>ICollection&lt;T&gt;, IList&lt;T&gt;</h2>

<p><code>ICollection&lt;T&gt;</code> は要素数が有限であるコレクションを表すインターフェースです。</p>

<p><code>IList&lt;T&gt;</code> は <code>ICollection&lt;T&gt;</code> を継承するインターフェースで、 <code>ICollection&lt;T&gt;</code> との違いは、インデクサプロパティと、Insert, RemoveAtといった、インデクスを指定して要素にアクセスできるメソッドを持つ点です。</p>

<p><code>ICollection&lt;T&gt;</code> 、<code>IList&lt;T&gt;</code> には1つ罠があり、Add, Removeのようなメソッドが定義されているにもかかわらず、 <strong>コレクションが編集可能であることを保証しません。</strong></p>

<p>代表的な例として、配列も <code>IList&lt;T&gt;</code> インターフェースを実装していますが、配列に対しAddメソッドを呼ぶと、NotSupportedExceptionがスローされます。</p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="n">IList</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;</span> <span class="n">ilist</span> <span class="p">=</span> <span class="k">new</span> <span class="kt">int</span><span class="p">[]</span> <span class="p">{</span> <span class="p">};</span>
<span class="n">ilist</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="m">1</span><span class="p">);</span>  <span class="c1">//throws NotSupportedException</span>
</code></pre></div></div>

<p>このインターフェースを持つコレクションは、IsReadOnlyプロパティがFalseであることを確認してから編集を行うのが正しい使い方とされています。</p>

<h2>
<span id="ireadonlycollectiont-ireadonlylistt" class="fragment"></span><a href="#ireadonlycollectiont-ireadonlylistt"><i class="fa fa-link"></i></a>IReadOnlyCollection&lt;T&gt;, IReadOnlyList&lt;T&gt;</h2>

<p>いちいちIsReadOnlyなんて見てられるか！ということで、待ち望まれていた、読み取り専用であることを表すインターフェースが .NET Framework 4.5で追加されました。</p>

<p>配列や <code>List&lt;T&gt;</code> をはじめ、ほとんどのコレクションクラスがこれらを実装しており、非常に使い勝手の良いインターフェースです。</p>

<p>メソッド内で変更する必要のないコレクションを引数として受け取る場合や、変更されたくないコレクションをプロパティとして公開する場合、 <code>IReadOnlyList&lt;T&gt;</code> を第一選択肢とするのが良いでしょう。</p>

<h1>
<span id="主要な実装クラス" class="fragment"></span><a href="#%E4%B8%BB%E8%A6%81%E3%81%AA%E5%AE%9F%E8%A3%85%E3%82%AF%E3%83%A9%E3%82%B9"><i class="fa fa-link"></i></a>主要な実装クラス</h1>

<h2>
<span id="配列" class="fragment"></span><a href="#%E9%85%8D%E5%88%97"><i class="fa fa-link"></i></a>配列</h2>

<p>サイズ固定のコレクションクラスです。</p>

<p><code>var array = new[] { 1, 2, 3 };</code> のように最もシンプルに宣言・初期化することができ、LINQ式の <code>IEnumerable&lt;T&gt;</code> をToArray()で簡単に配列化することもできるので、局所的な使用機会は少なくないでしょう。</p>

<p>ただし、サイズこそ固定ですが、格納値が不変となるわけではないところに注意が必要。手軽さゆえに安易に広いスコープで使われてバグの元となるケースをまま見かけます。</p>

<p>特に、以下のような配列の公開プロパティはアンチパターンとされています。</p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="kt">int</span><span class="p">[]</span> <span class="n">NumArray</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">private</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</code></pre></div></div>

<p>たとえsetterをprivateにしていたとしても、この配列の値を外から <code>NumArray[0] = 1</code> のように変更することができてしまいます。通常これはコーダーの意図に反していることが多いでしょう。</p>

<p>ほかに配列で留意すべき点として、 <strong>連続したメモリ領域を必要とする</strong> ことが挙げられます。</p>

<p>巨大なサイズの配列を作成する場合、たとえOSの空きメモリに余裕があったとしても、連続するメモリ空間としてそのサイズが確保できなければ、OutOfMemoryになってしまいます。</p>

<h2>
<span id="listt" class="fragment"></span><a href="#listt"><i class="fa fa-link"></i></a>List&lt;T&gt;</h2>

<p>もっとも汎用的で使い勝手の良いクラスです。</p>

<p>LINQ式からもToList()で簡単にリスト化することができます。</p>

<p>パフォーマンスも決して悪くなく、それほど要素の多くならないコレクションでは、とりあえず <code>List&lt;T&gt;</code> にしておけばほぼ困ることはありません。<br>
特にコレクションを返すメソッドでは、迷ったら <code>List&lt;T&gt;</code> で返す形にしておけば不便はないでしょう。</p>

<p>LINQ使いにとって特筆すべきは、<a href="https://msdn.microsoft.com/ja-jp/library/bwabdf9z(v=vs.110).aspx" rel="nofollow noopener" target="_blank">ForEach</a>メソッドを持っていること。<br>
LINQ式につなげて書きやすいという理由でわざわざToList()してForEachを使うコードや、自前で <code>IEnumerable&lt;T&gt;</code> に対する拡張メソッドとして同等のForEachを定義しているコードなどもよく見かけます。</p>

<h2>
<span id="collectiont" class="fragment"></span><a href="#collectiont"><i class="fa fa-link"></i></a>Collection&lt;T&gt;</h2>

<p><code>ICollection&lt;T&gt;</code> の実装クラスです。</p>

<p><code>List&lt;T&gt;</code> に比べると使用頻度は多くないと思いますが、特徴として、他のコレクションをラップするコンストラクタを持っています。</p>

<p>他のコレクションを読み取り専用のコレクションとしてラップして扱う <code>ReadOnlyCollection&lt;T&gt;</code> クラスもあり、先述の <code>IReadOnlyList&lt;T&gt;</code> が登場する前は特に活躍しました。</p>

<p>また、 <code>List&lt;T&gt;</code> クラスは、継承してサブクラスを作るような使われ方を想定していないらしく、そのような用途では <code>List&lt;T&gt;</code> よりも <code>Collection&lt;T&gt;</code> を基底クラスに使用するのが良いとされています。</p>

<h2>
<span id="hashsett-dictionarytkeytvalue" class="fragment"></span><a href="#hashsett-dictionarytkeytvalue"><i class="fa fa-link"></i></a>HashSet&lt;T&gt;, Dictionary&lt;TKey, TValue&gt;</h2>

<p><code>Dictionary&lt;TKey, TValue&gt;</code> は、キーと値の対応付けで要素を保持するコレクションです。</p>

<p>特徴として、キーの値は重複が許可されず、既に存在するキーをAddしようとすると例外がスローされます。</p>

<p><code>HashSet&lt;T&gt;</code> は、Dictionaryのキーのみのようなコレクションで、重複のない一意の値を保持します。</p>

<p>どちらも内部的にハッシュコードによって管理・検索されており、単純なリストと比較すると、キーの検索は圧倒的に速いです。</p>

<p>大量のレコードから特定の要素を探したい場合には積極的にDictionaryを利用するのが良いでしょう。</p>

<p>HashSetは、要素の有無のみを調べたい際にはDictionary同様にハイパフォーマンスを期待できるほか、値に重複がないことを保証するコレクションとして使い勝手が良いです。</p>

<p>注意点として、どちらも <strong>要素の格納順が保証されません。</strong></p>

<p>実は単純に要素を追加していく分にはその順番が保持されてしまうのですが、現状たまたまそうなっているだけですので、将来的に内部実装が変わる可能性はあります。</p>

<p>また、以下のように中身を抜いてからAddしたりしてみると、現在の実装でも順番が保持されないのがわかるかと思います。</p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="kt">var</span> <span class="n">dic</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Dictionary</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">string</span><span class="p">&gt;();</span>
<span class="n">dic</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="s">""</span><span class="p">);</span>
<span class="n">dic</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="m">2</span><span class="p">,</span> <span class="s">""</span><span class="p">);</span>
<span class="n">dic</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="m">3</span><span class="p">,</span> <span class="s">""</span><span class="p">);</span>
<span class="n">dic</span><span class="p">.</span><span class="nf">Remove</span><span class="p">(</span><span class="m">2</span><span class="p">);</span> <span class="c1">//key=2を削除</span>
<span class="n">dic</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="m">4</span><span class="p">,</span> <span class="s">""</span><span class="p">);</span>

<span class="c1">//1, 4, 3 の順で出力される</span>
<span class="n">dic</span><span class="p">.</span><span class="nf">ToList</span><span class="p">().</span><span class="nf">ForEach</span><span class="p">(</span><span class="n">p</span> <span class="p">=&gt;</span> <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">Key</span><span class="p">));</span>
</code></pre></div></div>

<p>要素の順番を保持しつつDictionaryを使いたい場合は、</p>

<ul>
<li>
<code>SortedDictionary&lt;TKey, TValue&gt;</code> を使う</li>
<li>
<code>List&lt;T&gt;</code> 等で保持しておいて、必要なときにToDictionary()して使う</li>
<li>要素を追加順で保持するDictionaryクラスを自作する</li>
</ul>

<p>といった方法を検討します。</p>

<h1>
<span id="特殊なコレクション" class="fragment"></span><a href="#%E7%89%B9%E6%AE%8A%E3%81%AA%E3%82%B3%E3%83%AC%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3"><i class="fa fa-link"></i></a>特殊なコレクション</h1>

<p>その他のコレクションクラスにもちょっとだけ触れておきます。</p>

<h2>
<span id="concurrentなコレクション" class="fragment"></span><a href="#concurrent%E3%81%AA%E3%82%B3%E3%83%AC%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3"><i class="fa fa-link"></i></a>Concurrentなコレクション</h2>

<p>System.Collections.Concurrent名前空間には、 <code>ConcurrentDictionary&lt;TKey, TValue&gt;</code> , <code>ConcurrentBag&lt;T&gt;</code> といった、スレッドセーフなコレクションクラスが用意されています。</p>

<p>複数のスレッドで共有する資源を管理するコレクションには、自前で <code>lock</code> による排他を行っても良いですが、これらのConcurrentなコレクションの利用も検討すると良いでしょう。</p>

<h2>
<span id="queuet-stackt" class="fragment"></span><a href="#queuet-stackt"><i class="fa fa-link"></i></a>Queue&lt;T&gt;, Stack&lt;T&gt;</h2>

<p><code>Queue&lt;T&gt;</code> と <code>Stack&lt;T&gt;</code> はどちらも、要素を1つずつ取り出して1度だけ使用する目的で利用されるコレクションです。</p>

<p>キューはいわゆるFIFO（先入れ先出し）で、最初にコレクションに入れたものから順番に取り出すためのデータ構造です。<br>
レジの順番待ちに並ぶ人が、先頭から順にレジを通って列をぬけていくイメージです。</p>

<p>スタックはその反対で、LIFO（後入れ先出し）となります。<br>
上に積み重ねていった座布団が、上から順に使われていくイメージです。</p>

<p>いずれも、 <code>List&lt;T&gt;</code> を使えば同等の操作は可能ですが、これらのクラスは <strong>コレクションの使用意図</strong> を表現するために使用するのが良いかと思います。<br>
ある変数が <code>Queue&lt;T&gt;</code> になっていれば、これは先に入れたものから順に取り出して使用されるんだな、というのが一目瞭然になります。</p>

<p>逆にいうと、これらの用途に一致しない使い方をすると、読む人にとって混乱のもとになります。<br>
Queueなのに最後に入れた値にアクセスしようとしたり、Stackなのに全要素から条件に一致する値を探そうとしたりしていることに気づいたら、これらの使用はやめて、おとなしく <code>List&lt;T&gt;</code> などに置き換えるのが良いでしょう。</p>

<h2>
<span id="observablecollectiont" class="fragment"></span><a href="#observablecollectiont"><i class="fa fa-link"></i></a>ObservableCollection&lt;T&gt;</h2>

<p><code>ObservableCollection&lt;T&gt;</code> は、 <code>INotifyCollectionChanged</code> インターフェースを実装し、コレクションに変更が生じたことを検知するためのコレクションクラスです。</p>

<p>主には、Binding機構をもつWPF等のフレームワークで、モデルのデータリストからビューの一覧へ変更を通知する目的で使用されます。<br>
もちろん、<code>ObservableCollection&lt;T&gt;</code> 自体は特別なフレームワークに依存するクラスではないので、GUIアプリに限らず、コードからCollectionChangedイベントを購読して使うこともできます。</p>

<p>なお、最高に意味のわからないコレクションとして、 <code>ReadOnlyObservableCollection&lt;T&gt;</code> というのもあります。</p>

<p>変更されないのに何をObserveするんだよと思ってしまうところですが、これは <code>ObservableCollection&lt;T&gt;</code> をラップして扱うクラスになります。<br>
このクラスに対して外部から変更を加えることはできませんが、もとになるObservableCollectionに変更が加えられた際には、このクラスにも変更が反映されます。</p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="kt">var</span> <span class="n">obs</span> <span class="p">=</span> <span class="k">new</span> <span class="n">ObservableCollection</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;();</span>
<span class="kt">var</span> <span class="n">roObs</span> <span class="p">=</span> <span class="k">new</span> <span class="n">ReadOnlyObservableCollection</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;(</span><span class="n">obs</span><span class="p">);</span>

<span class="c1">//roObs.Add(123); できない</span>
<span class="n">obs</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="m">123</span><span class="p">);</span>

<span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">obs</span><span class="p">.</span><span class="n">Count</span><span class="p">);</span>   <span class="c1">// 1</span>
<span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">roObs</span><span class="p">.</span><span class="n">Count</span><span class="p">);</span> <span class="c1">// 1</span>
</code></pre></div></div>

<p>ですが、このReadOnlyObservableCollectionクラスでは、CollectionChangedイベントがprotectedに隠蔽されているため、なんと、このクラスに対して外から直接CollectionChangedを購読することはできません。</p>

<p>なので、通常はReadOnlyなコレクションとしてラップしたい場合は、<code>ReadOnlyCollection&lt;T&gt;</code> を使えば事足りるかと思います。</p>

<h1>
<span id="使い分けの指針まとめ" class="fragment"></span><a href="#%E4%BD%BF%E3%81%84%E5%88%86%E3%81%91%E3%81%AE%E6%8C%87%E9%87%9D%E3%81%BE%E3%81%A8%E3%82%81"><i class="fa fa-link"></i></a>使い分けの指針まとめ</h1>

<ul>
<li>評価を遅延させたいI/Fでは <code>IEnumerable&lt;T&gt;</code> を使う</li>
<li>変更しない／させないことを表すI/Fでは <code>IReadOnlyList&lt;T&gt;</code> を使う</li>
<li>配列は局所的な利用に留める</li>
<li>汎用的なメソッドでは <code>List&lt;T&gt;</code> を返しておく</li>
<li>別のコレクションをラップして扱うときは <code>Collection&lt;T&gt;</code> , <code>ReadOnlyCollection&lt;T&gt;</code> を使う</li>
<li>要素検索のパフォーマンスを求めるときは <code>Dictionary&lt;TKey, TValue&gt;</code> を使う</li>
<li>値に重複がないことを保証したいときは <code>HashSet&lt;T&gt;</code> を使う</li>
</ul>

<p>以上になります。</p>

<div class="footnotes">
<hr>
<ol>

<li id="fn1">
<p>nums.Count()が5回走るので4秒×5、nums.ElementAt(0)～nums.ElementAt(3)にそれぞれ1,2,3,4秒を要するので、20+1+2+3+4=30 <a href="#fnref1">↩</a></p>
</li>

</ol>
</div>
</div></div></section><div class="css-1yzj1fm"><div class="css-1uv1qiv"><span class="fa fa-twitter"></span></div><div class="css-1uv1qiv"><span class="fa fa-facebook"></span></div></div><div class="apm-Content"><div class="apm-Content_title">Why not register and get more from Qiita?</div><ol class="apm-Content_list"><li>We will deliver articles that match you<div class="description">By following users and tags, you can catch up information on technical fields that you are interested in as a whole</div></li><li>you can read useful information later efficiently<div class="description">By &quot;stocking&quot; the articles you like, you can search right away</div></li><div><a class="apm-Content_help" href="https://help.qiita.com/ja/articles/qiita-login-user" target="_blank"><i class="fa fa-fw fa-arrow-circle-right"></i>What you can do with signing up</a></div></ol><a href="/signup?callback_action=login_or_signup&amp;redirect_to=%2Faakasaka%2Fitems%2Ffce713a90af011cbd21d&amp;realm=qiita" class="apm-Content_button apm-Content_button-signup">Sign up</a><a href="/login?callback_action=login_or_signup&amp;redirect_to=%2Faakasaka%2Fitems%2Ffce713a90af011cbd21d&amp;realm=qiita" class="apm-Content_button apm-Content_button-signin">Login</a></div></div><div class="css-helsa7"></div></div></div></div><div class="css-109dbrr"><div class="css-5jpx49"><div class="css-mnxgyc"><button class=" css-1vlpknv"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/aakasaka/items/fce713a90af011cbd21d/likers" class="css-1iupg5d">39</a></div><div class="css-fsjkhv"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-1b17vb0">29</span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-7i7f4d"><div class="css-1gj7nt">Improve article</div><a href="/drafts/fce713a90af011cbd21d/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/aakasaka/items/fce713a90af011cbd21d/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/aakasaka/items/fce713a90af011cbd21d/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/aakasaka/items/fce713a90af011cbd21d/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/aakasaka/items/fce713a90af011cbd21d.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="PersonalArticlePage" data-dom-id="PersonalArticlePage-react-component-4ce44085-720f-4d51-b98a-60ad53d80288">{"authorAnalyticsTrackingId":null,"organizationAnalyticsTrackingId":null}</script>
      
<footer id="globalFooter" class="st-Footer"><div class="st-Footer_container"><div class="st-Footer_start"><div class="st-Footer_logo"><svg viewbox="0 0 426.57 130" xmlns="http://www.w3.org/2000/svg"><circle cx="167.08" cy="21.4" r="12.28" /><path d="M250.81 29.66h23.48v18.9h-23.48z" /><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z" /><circle cx="216.33" cy="21.4" r="12.28" /></svg></div><div class="st-Footer_catchcopy">How developers code is here.</div><div class="st-Footer_socials"><a class="fa fa-twitter" href="https://twitter.com/qiita"></a><a class="fa fa-facebook-square" href="https://www.facebook.com/qiita/"></a></div></div><div class="st-Footer_end"><div class="st-Footer_qiita"><div class="st-Footer_label">Qiita</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="/about">About</a><a href="/terms">Terms</a><a href="/privacy">Privacy</a><a target="_blank" href="http://help.qiita.com/ja/articles/qiita-community-guideline">Guideline</a><a target="_blank" href="https://help.qiita.com/ja/articles/others-brand-guideline">Design Guideline</a></div><div class="st-Footer_column"><a href="/release-notes">Release</a><a href="/api/v2/docs">API</a><a href="/feedback/new">ご意見</a><a href="https://help.qiita.com">Help</a><a target="_blank" href="https://qiita.com/ads?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Advertisement</a></div></div></div><div class="st-Footer_increments"><div class="st-Footer_label">Increments</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="https://increments.co.jp/company/">About</a><a href="https://increments.co.jp/jobs/">採用情報</a><a href="https://blog.qiita.com">Blog</a></div><div class="st-Footer_column"><a href="https://teams.qiita.com/">Qiita Team</a><a href="https://jobs.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Jobs</a><a href="https://zine.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Zine</a></div></div></div></div></div><div class="st-Footer_copyright">© 2011-2021 Increments Inc.</div></footer><div id="Snackbar-react-component-aba201de-0e6e-4344-9640-5dcef5f6f5c2"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="Snackbar" data-dom-id="Snackbar-react-component-aba201de-0e6e-4344-9640-5dcef5f6f5c2">{}</script>
      
<div id="LoginModal-react-component-5876f5f8-d38d-4240-8985-6c6954492b67"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="LoginModal" data-dom-id="LoginModal-react-component-5876f5f8-d38d-4240-8985-6c6954492b67">{}</script>
      
<div id="StockModal-react-component-7d554c5f-ddb1-4fc6-b6fd-d339c8779bc8"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="StockModal" data-dom-id="StockModal-react-component-7d554c5f-ddb1-4fc6-b6fd-d339c8779bc8">{}</script>
      
</div><div id="dataContainer" style="display: none;" data-config="{&quot;actionPath&quot;:&quot;public/items#show&quot;,&quot;settings&quot;:{&quot;analyticsTrackingId&quot;:&quot;UA-24675221-12&quot;,&quot;assetsMap&quot;:{},&quot;csrfToken&quot;:&quot;zzuy/U0iSStkvZTVtB4XY94+1SkQwrJPkUh0W6rKD57Ecv8S8R7oMNU+h8fp5/RXamJeMxQ2yjNi9BmWMgbECw==&quot;,&quot;locale&quot;:&quot;en&quot;},&quot;currentUser&quot;:null}" /></body></html><script type="application/json" data-js-react-on-rails-store="AppStoreWithReactOnRails">{"snackbar":{"type":"","body":"","isActive":false},"article":{"article":{"body":"\n\u003ch1\u003e\n\u003cspan id=\"リストの種類多すぎ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%AA%E3%82%B9%E3%83%88%E3%81%AE%E7%A8%AE%E9%A1%9E%E5%A4%9A%E3%81%99%E3%81%8E\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eリストの種類多すぎ！？\u003c/h1\u003e\n\n\u003cp\u003eC#初学者に必要以上に混乱を与える要素として、リスト／コレクションクラス多すぎ問題が知られています。\u003c/p\u003e\n\n\u003cp\u003e初学者への進言としては、とりあえず \u003ccode\u003eList\u0026lt;T\u0026gt;\u003c/code\u003e 使っとけーで、だいたいの局面は乗り切れるかなとも思いますが、C#を生業とするならば、ちゃんと各クラスの特徴を知った上で正しく使いわけられるようになりたいところ。\u003c/p\u003e\n\n\u003cp\u003eこの記事では、コレクション使い分けの指針をいくらか共有できればと思います。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"使わないもの\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E4%BD%BF%E3%82%8F%E3%81%AA%E3%81%84%E3%82%82%E3%81%AE\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e使わないもの\u003c/h1\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"systemcollections名前空間\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#systemcollections%E5%90%8D%E5%89%8D%E7%A9%BA%E9%96%93\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eSystem.Collections名前空間\u003c/h2\u003e\n\n\u003cp\u003e\u003ccode\u003eArrayList\u003c/code\u003e , \u003ccode\u003eIList\u003c/code\u003e , \u003ccode\u003eICollection\u003c/code\u003e , \u003ccode\u003eHashtable\u003c/code\u003e 等、C#にジェネリックが導入される以前の遺産である非ジェネリックなコレクションのクラス／インターフェースがSystem.Collections名前空間に存在します。\u003c/p\u003e\n\n\u003cp\u003eが、もはやこれらを直接使う必要性はほぼ無いと考えて良いでしょう。\u003c/p\u003e\n\n\u003cp\u003e本ページでもこれ以降触れることはありません。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"主要インターフェース\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E4%B8%BB%E8%A6%81%E3%82%A4%E3%83%B3%E3%82%BF%E3%83%BC%E3%83%95%E3%82%A7%E3%83%BC%E3%82%B9\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e主要インターフェース\u003c/h1\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"ienumerablet\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#ienumerablet\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eIEnumerable\u0026lt;T\u0026gt;\u003c/h2\u003e\n\n\u003cp\u003eすべてのリスト・コレクションの基本となる、「列挙できる」ことを表すインターフェースです。\u003c/p\u003e\n\n\u003cp\u003eforeach文やLINQメソッドを適用できる最も抽象的なインターフェースであるため、公開メソッドの引数はとりあえず \u003ccode\u003eIEnumerable\u0026lt;T\u0026gt;\u003c/code\u003e にしとけ的なコードを見かけることがありますが、以下のような点に注意する必要があります。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"有限である保証がない\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%9C%89%E9%99%90%E3%81%A7%E3%81%82%E3%82%8B%E4%BF%9D%E8%A8%BC%E3%81%8C%E3%81%AA%E3%81%84\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e有限である保証がない\u003c/h3\u003e\n\n\u003cp\u003e\u003ccode\u003eIEnumerable\u0026lt;T\u0026gt;\u003c/code\u003e というインターフェースは、要素数が有限であることを保証しません。\u003c/p\u003e\n\n\u003cp\u003e例として、以下のメソッドは要素数が無限なコレクション（ \u003ccode\u003e{0,0,0,0,0,...}\u003c/code\u003e ）を返します。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eIEnumerable\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"nf\"\u003eEnumerateZero\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ewhile\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eyield\u003c/span\u003e \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eこのようなコレクションをCount()で数えようとしたり、ToArray()で配列化しようとした瞬間にOverflow／OutOfMemoryで落ちます。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"列挙のコストがわからない\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%88%97%E6%8C%99%E3%81%AE%E3%82%B3%E3%82%B9%E3%83%88%E3%81%8C%E3%82%8F%E3%81%8B%E3%82%89%E3%81%AA%E3%81%84\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e列挙のコストがわからない\u003c/h3\u003e\n\n\u003cp\u003e\u003ccode\u003eIEnumerable\u0026lt;T\u0026gt;\u003c/code\u003e インターフェースは遅延評価をサポートします。\u003cbr\u003e\nこの実体が式である場合、必要になったタイミングで初めて評価されます。\u003c/p\u003e\n\n\u003cp\u003eメソッドの引数などで外部からこのインターフェースを受け取ると、列挙に伴うコストを予測することができません。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003ePrintNums\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eIEnumerable\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003enums\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"n\"\u003enums\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eCount\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e++)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003enum\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003enums\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eElementAt\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eConsole\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWriteLine\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003enum\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e上のコードは一見なんの問題もないように見えますが、例えば以下のEnumerateNumsメソッドにより返される値を渡して実行した場合、\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eIEnumerable\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"nf\"\u003eEnumerateNums\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e//1秒くらいかかる重い処理をしながら1,2,3,4を返す\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eThread\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSleep\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e1000\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eyield\u003c/span\u003e \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eThread\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSleep\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e1000\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eyield\u003c/span\u003e \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"m\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eThread\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSleep\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e1000\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eyield\u003c/span\u003e \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"m\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eThread\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSleep\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e1000\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eyield\u003c/span\u003e \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"m\"\u003e4\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003enums\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nf\"\u003eEnumerateNums\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\u003cspan class=\"nf\"\u003ePrintNums\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003enums\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e上記コードは、実行に \u003cstrong\u003e30秒\u003c/strong\u003e もかかります。\u003csup id=\"fnref1\"\u003e\u003ca href=\"#fn1\" title=\"nums.Count()が5回走るので4秒×5、nums.ElementAt(0)～nums.ElementAt(3)にそれぞれ1,2,3,4秒を要するので、20+1+2+3+4=30\"\u003e1\u003c/a\u003e\u003c/sup\u003e\u003c/p\u003e\n\n\u003cp\u003eこのように要素数をCountする必要がある場合などは、引数をオブジェクト化された \u003ccode\u003eList\u0026lt;T\u0026gt;\u003c/code\u003e や \u003ccode\u003eIReadOnlyList\u0026lt;T\u0026gt;\u003c/code\u003e などの形で受け取るか、最初にオブジェクト化して、評価が1度しか走らないようにするべきです。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003ePrintNums\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eIEnumerable\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003enums\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e//ここで式が確定する（※ただし要素が有限である前提）\u003c/span\u003e\n    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003earray\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003enums\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eToArray\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e//もちろんforeachでも良い\u003c/span\u003e\n    \u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"n\"\u003earray\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eLength\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e++)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003enum\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003earray\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e];\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eConsole\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWriteLine\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003enum\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e上記コードなら4秒で実行されます。\u003c/p\u003e\n\n\u003cp\u003eもちろん、この遅延評価の性質は、使いどころを間違えなければ効率の良い処理の実装に役立つものです。\u003cbr\u003e\nたとえば前述の \u003ccode\u003eEnumerateNums()\u003c/code\u003e の結果が1つ以上の要素を持つかどうかだけを知りたい場合、オブジェクト化して \u003ccode\u003eEnumerateNums().ToArray().Length \u0026gt; 0\u003c/code\u003e とやれば同様に4秒かかりますが、式のまま \u003ccode\u003eEnumerateNums().Any()\u003c/code\u003e と調べれば、最初の要素が返されるところまでしか評価されず、実行に1秒しかかかりません。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"icollectiont-ilistt\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#icollectiont-ilistt\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eICollection\u0026lt;T\u0026gt;, IList\u0026lt;T\u0026gt;\u003c/h2\u003e\n\n\u003cp\u003e\u003ccode\u003eICollection\u0026lt;T\u0026gt;\u003c/code\u003e は要素数が有限であるコレクションを表すインターフェースです。\u003c/p\u003e\n\n\u003cp\u003e\u003ccode\u003eIList\u0026lt;T\u0026gt;\u003c/code\u003e は \u003ccode\u003eICollection\u0026lt;T\u0026gt;\u003c/code\u003e を継承するインターフェースで、 \u003ccode\u003eICollection\u0026lt;T\u0026gt;\u003c/code\u003e との違いは、インデクサプロパティと、Insert, RemoveAtといった、インデクスを指定して要素にアクセスできるメソッドを持つ点です。\u003c/p\u003e\n\n\u003cp\u003e\u003ccode\u003eICollection\u0026lt;T\u0026gt;\u003c/code\u003e 、\u003ccode\u003eIList\u0026lt;T\u0026gt;\u003c/code\u003e には1つ罠があり、Add, Removeのようなメソッドが定義されているにもかかわらず、 \u003cstrong\u003eコレクションが編集可能であることを保証しません。\u003c/strong\u003e\u003c/p\u003e\n\n\u003cp\u003e代表的な例として、配列も \u003ccode\u003eIList\u0026lt;T\u0026gt;\u003c/code\u003e インターフェースを実装していますが、配列に対しAddメソッドを呼ぶと、NotSupportedExceptionがスローされます。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"n\"\u003eIList\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eilist\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e[]\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"p\"\u003e};\u003c/span\u003e\n\u003cspan class=\"n\"\u003eilist\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAdd\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e  \u003cspan class=\"c1\"\u003e//throws NotSupportedException\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eこのインターフェースを持つコレクションは、IsReadOnlyプロパティがFalseであることを確認してから編集を行うのが正しい使い方とされています。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"ireadonlycollectiont-ireadonlylistt\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#ireadonlycollectiont-ireadonlylistt\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eIReadOnlyCollection\u0026lt;T\u0026gt;, IReadOnlyList\u0026lt;T\u0026gt;\u003c/h2\u003e\n\n\u003cp\u003eいちいちIsReadOnlyなんて見てられるか！ということで、待ち望まれていた、読み取り専用であることを表すインターフェースが .NET Framework 4.5で追加されました。\u003c/p\u003e\n\n\u003cp\u003e配列や \u003ccode\u003eList\u0026lt;T\u0026gt;\u003c/code\u003e をはじめ、ほとんどのコレクションクラスがこれらを実装しており、非常に使い勝手の良いインターフェースです。\u003c/p\u003e\n\n\u003cp\u003eメソッド内で変更する必要のないコレクションを引数として受け取る場合や、変更されたくないコレクションをプロパティとして公開する場合、 \u003ccode\u003eIReadOnlyList\u0026lt;T\u0026gt;\u003c/code\u003e を第一選択肢とするのが良いでしょう。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"主要な実装クラス\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E4%B8%BB%E8%A6%81%E3%81%AA%E5%AE%9F%E8%A3%85%E3%82%AF%E3%83%A9%E3%82%B9\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e主要な実装クラス\u003c/h1\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"配列\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E9%85%8D%E5%88%97\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e配列\u003c/h2\u003e\n\n\u003cp\u003eサイズ固定のコレクションクラスです。\u003c/p\u003e\n\n\u003cp\u003e\u003ccode\u003evar array = new[] { 1, 2, 3 };\u003c/code\u003e のように最もシンプルに宣言・初期化することができ、LINQ式の \u003ccode\u003eIEnumerable\u0026lt;T\u0026gt;\u003c/code\u003e をToArray()で簡単に配列化することもできるので、局所的な使用機会は少なくないでしょう。\u003c/p\u003e\n\n\u003cp\u003eただし、サイズこそ固定ですが、格納値が不変となるわけではないところに注意が必要。手軽さゆえに安易に広いスコープで使われてバグの元となるケースをまま見かけます。\u003c/p\u003e\n\n\u003cp\u003e特に、以下のような配列の公開プロパティはアンチパターンとされています。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e[]\u003c/span\u003e \u003cspan class=\"n\"\u003eNumArray\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003eset\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eたとえsetterをprivateにしていたとしても、この配列の値を外から \u003ccode\u003eNumArray[0] = 1\u003c/code\u003e のように変更することができてしまいます。通常これはコーダーの意図に反していることが多いでしょう。\u003c/p\u003e\n\n\u003cp\u003eほかに配列で留意すべき点として、 \u003cstrong\u003e連続したメモリ領域を必要とする\u003c/strong\u003e ことが挙げられます。\u003c/p\u003e\n\n\u003cp\u003e巨大なサイズの配列を作成する場合、たとえOSの空きメモリに余裕があったとしても、連続するメモリ空間としてそのサイズが確保できなければ、OutOfMemoryになってしまいます。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"listt\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#listt\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eList\u0026lt;T\u0026gt;\u003c/h2\u003e\n\n\u003cp\u003eもっとも汎用的で使い勝手の良いクラスです。\u003c/p\u003e\n\n\u003cp\u003eLINQ式からもToList()で簡単にリスト化することができます。\u003c/p\u003e\n\n\u003cp\u003eパフォーマンスも決して悪くなく、それほど要素の多くならないコレクションでは、とりあえず \u003ccode\u003eList\u0026lt;T\u0026gt;\u003c/code\u003e にしておけばほぼ困ることはありません。\u003cbr\u003e\n特にコレクションを返すメソッドでは、迷ったら \u003ccode\u003eList\u0026lt;T\u0026gt;\u003c/code\u003e で返す形にしておけば不便はないでしょう。\u003c/p\u003e\n\n\u003cp\u003eLINQ使いにとって特筆すべきは、\u003ca href=\"https://msdn.microsoft.com/ja-jp/library/bwabdf9z(v=vs.110).aspx\" rel=\"nofollow noopener\" target=\"_blank\"\u003eForEach\u003c/a\u003eメソッドを持っていること。\u003cbr\u003e\nLINQ式につなげて書きやすいという理由でわざわざToList()してForEachを使うコードや、自前で \u003ccode\u003eIEnumerable\u0026lt;T\u0026gt;\u003c/code\u003e に対する拡張メソッドとして同等のForEachを定義しているコードなどもよく見かけます。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"collectiont\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#collectiont\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eCollection\u0026lt;T\u0026gt;\u003c/h2\u003e\n\n\u003cp\u003e\u003ccode\u003eICollection\u0026lt;T\u0026gt;\u003c/code\u003e の実装クラスです。\u003c/p\u003e\n\n\u003cp\u003e\u003ccode\u003eList\u0026lt;T\u0026gt;\u003c/code\u003e に比べると使用頻度は多くないと思いますが、特徴として、他のコレクションをラップするコンストラクタを持っています。\u003c/p\u003e\n\n\u003cp\u003e他のコレクションを読み取り専用のコレクションとしてラップして扱う \u003ccode\u003eReadOnlyCollection\u0026lt;T\u0026gt;\u003c/code\u003e クラスもあり、先述の \u003ccode\u003eIReadOnlyList\u0026lt;T\u0026gt;\u003c/code\u003e が登場する前は特に活躍しました。\u003c/p\u003e\n\n\u003cp\u003eまた、 \u003ccode\u003eList\u0026lt;T\u0026gt;\u003c/code\u003e クラスは、継承してサブクラスを作るような使われ方を想定していないらしく、そのような用途では \u003ccode\u003eList\u0026lt;T\u0026gt;\u003c/code\u003e よりも \u003ccode\u003eCollection\u0026lt;T\u0026gt;\u003c/code\u003e を基底クラスに使用するのが良いとされています。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"hashsett-dictionarytkeytvalue\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#hashsett-dictionarytkeytvalue\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eHashSet\u0026lt;T\u0026gt;, Dictionary\u0026lt;TKey, TValue\u0026gt;\u003c/h2\u003e\n\n\u003cp\u003e\u003ccode\u003eDictionary\u0026lt;TKey, TValue\u0026gt;\u003c/code\u003e は、キーと値の対応付けで要素を保持するコレクションです。\u003c/p\u003e\n\n\u003cp\u003e特徴として、キーの値は重複が許可されず、既に存在するキーをAddしようとすると例外がスローされます。\u003c/p\u003e\n\n\u003cp\u003e\u003ccode\u003eHashSet\u0026lt;T\u0026gt;\u003c/code\u003e は、Dictionaryのキーのみのようなコレクションで、重複のない一意の値を保持します。\u003c/p\u003e\n\n\u003cp\u003eどちらも内部的にハッシュコードによって管理・検索されており、単純なリストと比較すると、キーの検索は圧倒的に速いです。\u003c/p\u003e\n\n\u003cp\u003e大量のレコードから特定の要素を探したい場合には積極的にDictionaryを利用するのが良いでしょう。\u003c/p\u003e\n\n\u003cp\u003eHashSetは、要素の有無のみを調べたい際にはDictionary同様にハイパフォーマンスを期待できるほか、値に重複がないことを保証するコレクションとして使い勝手が良いです。\u003c/p\u003e\n\n\u003cp\u003e注意点として、どちらも \u003cstrong\u003e要素の格納順が保証されません。\u003c/strong\u003e\u003c/p\u003e\n\n\u003cp\u003e実は単純に要素を追加していく分にはその順番が保持されてしまうのですが、現状たまたまそうなっているだけですので、将来的に内部実装が変わる可能性はあります。\u003c/p\u003e\n\n\u003cp\u003eまた、以下のように中身を抜いてからAddしたりしてみると、現在の実装でも順番が保持されないのがわかるかと思います。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003edic\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eDictionary\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;();\u003c/span\u003e\n\u003cspan class=\"n\"\u003edic\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAdd\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\"\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"n\"\u003edic\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAdd\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\"\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"n\"\u003edic\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAdd\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\"\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"n\"\u003edic\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eRemove\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e \u003cspan class=\"c1\"\u003e//key=2を削除\u003c/span\u003e\n\u003cspan class=\"n\"\u003edic\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAdd\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e4\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\"\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e//1, 4, 3 の順で出力される\u003c/span\u003e\n\u003cspan class=\"n\"\u003edic\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eToList\u003c/span\u003e\u003cspan class=\"p\"\u003e().\u003c/span\u003e\u003cspan class=\"nf\"\u003eForEach\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ep\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eConsole\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWriteLine\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ep\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eKey\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e要素の順番を保持しつつDictionaryを使いたい場合は、\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\n\u003ccode\u003eSortedDictionary\u0026lt;TKey, TValue\u0026gt;\u003c/code\u003e を使う\u003c/li\u003e\n\u003cli\u003e\n\u003ccode\u003eList\u0026lt;T\u0026gt;\u003c/code\u003e 等で保持しておいて、必要なときにToDictionary()して使う\u003c/li\u003e\n\u003cli\u003e要素を追加順で保持するDictionaryクラスを自作する\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eといった方法を検討します。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"特殊なコレクション\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E7%89%B9%E6%AE%8A%E3%81%AA%E3%82%B3%E3%83%AC%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e特殊なコレクション\u003c/h1\u003e\n\n\u003cp\u003eその他のコレクションクラスにもちょっとだけ触れておきます。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"concurrentなコレクション\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#concurrent%E3%81%AA%E3%82%B3%E3%83%AC%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eConcurrentなコレクション\u003c/h2\u003e\n\n\u003cp\u003eSystem.Collections.Concurrent名前空間には、 \u003ccode\u003eConcurrentDictionary\u0026lt;TKey, TValue\u0026gt;\u003c/code\u003e , \u003ccode\u003eConcurrentBag\u0026lt;T\u0026gt;\u003c/code\u003e といった、スレッドセーフなコレクションクラスが用意されています。\u003c/p\u003e\n\n\u003cp\u003e複数のスレッドで共有する資源を管理するコレクションには、自前で \u003ccode\u003elock\u003c/code\u003e による排他を行っても良いですが、これらのConcurrentなコレクションの利用も検討すると良いでしょう。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"queuet-stackt\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#queuet-stackt\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eQueue\u0026lt;T\u0026gt;, Stack\u0026lt;T\u0026gt;\u003c/h2\u003e\n\n\u003cp\u003e\u003ccode\u003eQueue\u0026lt;T\u0026gt;\u003c/code\u003e と \u003ccode\u003eStack\u0026lt;T\u0026gt;\u003c/code\u003e はどちらも、要素を1つずつ取り出して1度だけ使用する目的で利用されるコレクションです。\u003c/p\u003e\n\n\u003cp\u003eキューはいわゆるFIFO（先入れ先出し）で、最初にコレクションに入れたものから順番に取り出すためのデータ構造です。\u003cbr\u003e\nレジの順番待ちに並ぶ人が、先頭から順にレジを通って列をぬけていくイメージです。\u003c/p\u003e\n\n\u003cp\u003eスタックはその反対で、LIFO（後入れ先出し）となります。\u003cbr\u003e\n上に積み重ねていった座布団が、上から順に使われていくイメージです。\u003c/p\u003e\n\n\u003cp\u003eいずれも、 \u003ccode\u003eList\u0026lt;T\u0026gt;\u003c/code\u003e を使えば同等の操作は可能ですが、これらのクラスは \u003cstrong\u003eコレクションの使用意図\u003c/strong\u003e を表現するために使用するのが良いかと思います。\u003cbr\u003e\nある変数が \u003ccode\u003eQueue\u0026lt;T\u0026gt;\u003c/code\u003e になっていれば、これは先に入れたものから順に取り出して使用されるんだな、というのが一目瞭然になります。\u003c/p\u003e\n\n\u003cp\u003e逆にいうと、これらの用途に一致しない使い方をすると、読む人にとって混乱のもとになります。\u003cbr\u003e\nQueueなのに最後に入れた値にアクセスしようとしたり、Stackなのに全要素から条件に一致する値を探そうとしたりしていることに気づいたら、これらの使用はやめて、おとなしく \u003ccode\u003eList\u0026lt;T\u0026gt;\u003c/code\u003e などに置き換えるのが良いでしょう。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"observablecollectiont\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#observablecollectiont\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eObservableCollection\u0026lt;T\u0026gt;\u003c/h2\u003e\n\n\u003cp\u003e\u003ccode\u003eObservableCollection\u0026lt;T\u0026gt;\u003c/code\u003e は、 \u003ccode\u003eINotifyCollectionChanged\u003c/code\u003e インターフェースを実装し、コレクションに変更が生じたことを検知するためのコレクションクラスです。\u003c/p\u003e\n\n\u003cp\u003e主には、Binding機構をもつWPF等のフレームワークで、モデルのデータリストからビューの一覧へ変更を通知する目的で使用されます。\u003cbr\u003e\nもちろん、\u003ccode\u003eObservableCollection\u0026lt;T\u0026gt;\u003c/code\u003e 自体は特別なフレームワークに依存するクラスではないので、GUIアプリに限らず、コードからCollectionChangedイベントを購読して使うこともできます。\u003c/p\u003e\n\n\u003cp\u003eなお、最高に意味のわからないコレクションとして、 \u003ccode\u003eReadOnlyObservableCollection\u0026lt;T\u0026gt;\u003c/code\u003e というのもあります。\u003c/p\u003e\n\n\u003cp\u003e変更されないのに何をObserveするんだよと思ってしまうところですが、これは \u003ccode\u003eObservableCollection\u0026lt;T\u0026gt;\u003c/code\u003e をラップして扱うクラスになります。\u003cbr\u003e\nこのクラスに対して外部から変更を加えることはできませんが、もとになるObservableCollectionに変更が加えられた際には、このクラスにも変更が反映されます。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eobs\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eObservableCollection\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;();\u003c/span\u003e\n\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eroObs\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eReadOnlyObservableCollection\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"n\"\u003eobs\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e//roObs.Add(123); できない\u003c/span\u003e\n\u003cspan class=\"n\"\u003eobs\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAdd\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e123\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n\u003cspan class=\"n\"\u003eConsole\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWriteLine\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eobs\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eCount\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e   \u003cspan class=\"c1\"\u003e// 1\u003c/span\u003e\n\u003cspan class=\"n\"\u003eConsole\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWriteLine\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eroObs\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eCount\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e \u003cspan class=\"c1\"\u003e// 1\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eですが、このReadOnlyObservableCollectionクラスでは、CollectionChangedイベントがprotectedに隠蔽されているため、なんと、このクラスに対して外から直接CollectionChangedを購読することはできません。\u003c/p\u003e\n\n\u003cp\u003eなので、通常はReadOnlyなコレクションとしてラップしたい場合は、\u003ccode\u003eReadOnlyCollection\u0026lt;T\u0026gt;\u003c/code\u003e を使えば事足りるかと思います。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"使い分けの指針まとめ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E4%BD%BF%E3%81%84%E5%88%86%E3%81%91%E3%81%AE%E6%8C%87%E9%87%9D%E3%81%BE%E3%81%A8%E3%82%81\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e使い分けの指針まとめ\u003c/h1\u003e\n\n\u003cul\u003e\n\u003cli\u003e評価を遅延させたいI/Fでは \u003ccode\u003eIEnumerable\u0026lt;T\u0026gt;\u003c/code\u003e を使う\u003c/li\u003e\n\u003cli\u003e変更しない／させないことを表すI/Fでは \u003ccode\u003eIReadOnlyList\u0026lt;T\u0026gt;\u003c/code\u003e を使う\u003c/li\u003e\n\u003cli\u003e配列は局所的な利用に留める\u003c/li\u003e\n\u003cli\u003e汎用的なメソッドでは \u003ccode\u003eList\u0026lt;T\u0026gt;\u003c/code\u003e を返しておく\u003c/li\u003e\n\u003cli\u003e別のコレクションをラップして扱うときは \u003ccode\u003eCollection\u0026lt;T\u0026gt;\u003c/code\u003e , \u003ccode\u003eReadOnlyCollection\u0026lt;T\u0026gt;\u003c/code\u003e を使う\u003c/li\u003e\n\u003cli\u003e要素検索のパフォーマンスを求めるときは \u003ccode\u003eDictionary\u0026lt;TKey, TValue\u0026gt;\u003c/code\u003e を使う\u003c/li\u003e\n\u003cli\u003e値に重複がないことを保証したいときは \u003ccode\u003eHashSet\u0026lt;T\u0026gt;\u003c/code\u003e を使う\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e以上になります。\u003c/p\u003e\n\n\u003cdiv class=\"footnotes\"\u003e\n\u003chr\u003e\n\u003col\u003e\n\n\u003cli id=\"fn1\"\u003e\n\u003cp\u003enums.Count()が5回走るので4秒×5、nums.ElementAt(0)～nums.ElementAt(3)にそれぞれ1,2,3,4秒を要するので、20+1+2+3+4=30 \u003ca href=\"#fnref1\"\u003e↩\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\n\u003c/ol\u003e\n\u003c/div\u003e\n","createdAt":"2017-12-16T04:15:04Z","elapsedYearsFromLastModifiedAt":3,"encryptedId":"ugmyeseyIoLzr0RzR+xScEwnsiCRJMzT--4S0ALenkUk28+6iD--RBGyT/67aqrxJ2lgra+/vw==","isBanned":false,"isDeprecated":true,"isDestroyableByViewer":false,"isEditRequestReadableByViewer":true,"isEditRequestSendableByViewer":true,"isLikableByViewer":true,"isLikedByViewer":false,"isPublic":true,"isSlide":false,"isStockableByViewer":true,"isStockedByViewer":false,"isSubscribableByViewer":false,"isSubscribedByViewer":false,"isUpdatableByViewer":false,"isUpdated":true,"lastModifiedAt":"2017-12-16T04:25:12Z","likesCount":39,"linkUrl":"https://qiita.com/aakasaka/items/fce713a90af011cbd21d","organization":null,"originalId":589157,"stockedCount":29,"title":"C#: Array,List,Collection,Dictionary,HashSet,Queue,Stack,IEnumerable","toc":"\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%AA%E3%82%B9%E3%83%88%E3%81%AE%E7%A8%AE%E9%A1%9E%E5%A4%9A%E3%81%99%E3%81%8E\"\u003eリストの種類多すぎ！？\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E4%BD%BF%E3%82%8F%E3%81%AA%E3%81%84%E3%82%82%E3%81%AE\"\u003e使わないもの\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#systemcollections%E5%90%8D%E5%89%8D%E7%A9%BA%E9%96%93\"\u003eSystem.Collections名前空間\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E4%B8%BB%E8%A6%81%E3%82%A4%E3%83%B3%E3%82%BF%E3%83%BC%E3%83%95%E3%82%A7%E3%83%BC%E3%82%B9\"\u003e主要インターフェース\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#ienumerablet\"\u003eIEnumerable\u0026lt;T\u0026gt;\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E6%9C%89%E9%99%90%E3%81%A7%E3%81%82%E3%82%8B%E4%BF%9D%E8%A8%BC%E3%81%8C%E3%81%AA%E3%81%84\"\u003e有限である保証がない\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%88%97%E6%8C%99%E3%81%AE%E3%82%B3%E3%82%B9%E3%83%88%E3%81%8C%E3%82%8F%E3%81%8B%E3%82%89%E3%81%AA%E3%81%84\"\u003e列挙のコストがわからない\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#icollectiont-ilistt\"\u003eICollection\u0026lt;T\u0026gt;, IList\u0026lt;T\u0026gt;\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#ireadonlycollectiont-ireadonlylistt\"\u003eIReadOnlyCollection\u0026lt;T\u0026gt;, IReadOnlyList\u0026lt;T\u0026gt;\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E4%B8%BB%E8%A6%81%E3%81%AA%E5%AE%9F%E8%A3%85%E3%82%AF%E3%83%A9%E3%82%B9\"\u003e主要な実装クラス\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E9%85%8D%E5%88%97\"\u003e配列\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#listt\"\u003eList\u0026lt;T\u0026gt;\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#collectiont\"\u003eCollection\u0026lt;T\u0026gt;\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#hashsett-dictionarytkeytvalue\"\u003eHashSet\u0026lt;T\u0026gt;, Dictionary\u0026lt;TKey, TValue\u0026gt;\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E7%89%B9%E6%AE%8A%E3%81%AA%E3%82%B3%E3%83%AC%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3\"\u003e特殊なコレクション\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#concurrent%E3%81%AA%E3%82%B3%E3%83%AC%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3\"\u003eConcurrentなコレクション\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#queuet-stackt\"\u003eQueue\u0026lt;T\u0026gt;, Stack\u0026lt;T\u0026gt;\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#observablecollectiont\"\u003eObservableCollection\u0026lt;T\u0026gt;\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E4%BD%BF%E3%81%84%E5%88%86%E3%81%91%E3%81%AE%E6%8C%87%E9%87%9D%E3%81%BE%E3%81%A8%E3%82%81\"\u003e使い分けの指針まとめ\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n","totalPv":10395,"uuid":"fce713a90af011cbd21d","banReason":null,"adventCalendarItem":{"day":16,"calendar":{"name":"ソフト技研","urlName":"softgiken","year":2017,"organization":null}},"author":{"encryptedId":"w0Vxqaf1n1S/zbZoRyEFb4PBn54F--rJZWedw21kd76dQb--BMTrlBJfNZr5NnMFmMlbZA==","originalId":211332,"description":"","facebookUrl":null,"githubUrl":null,"isBlockingViewer":false,"isFollowableByViewer":true,"isFollowedByViewer":false,"isTweetWebNotificationReceivable":true,"linkedinUrl":null,"name":"","profileImageUrl":"https://qiita-image-store.s3.amazonaws.com/0/211332/profile-images/1509624834","profileImageUrlW48":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F211332%2Fprofile-images%2F1509624834?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=48\u0026s=606b214855e9d1cd7f4a2d228a0cfa09","profileImageUrlW75":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F211332%2Fprofile-images%2F1509624834?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=f290f104fa6578740910b820cb1f679d","urlName":"aakasaka","websiteUrl":"","twitterUrl":null,"twitterUrlName":null,"revealedOrganizations":{"edges":[]}},"tags":[{"name":"C#","urlName":"csharp"},{"name":".NET","urlName":".net"},{"name":"LINQ","urlName":"linq"},{"name":"adventcalendar2017","urlName":"adventcalendar2017"}],"followingLikers":{"edges":[]},"comments":{"totalCount":0}},"comments":[],"client":null,"ads_event_emitter":null}}</script>
