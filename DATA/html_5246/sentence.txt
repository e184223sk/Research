More than 3 years have passed since last update.こんにちは！ほたてです。
今回は、Unityで使われるSliderを、HPバーとして使用する方法をスクリプトの書き方をメインにして紹介したいと思います。
スクリプト以外の基本的な手順はこちらで紹介されているのを参考にしています。上記のURLを参考にした際に気をつけておかなければならないことをいくつか挙げておきます。・MovingEnemyを選択し、必ずMovingEnemyを親としてCanvasを作成した後にそのCanvas内でSliderを作りましょう!おそらく、すでにCanvasはゲーム画面として使われているものがあると思いますが、それとは別にもう一つCanvasを作っておく必要があります。・MovingEnemyにCanvasとSliderとこれから紹介するScriptをつけたら、inspectorビューのApplyをクリックしましょう。そうすると、プレファブ化されているゲームオブジェクト全てにHPバーが適用されます！最終的にはMovingEnemyのヒエラルキービューはこんな感じ。Canvas名は紛らわしいのでSliderCanvasという名前に変更しています。
MovingEnemyのInspectorビューはこんな感じを目指します！EnemyHPScriptの中身をこれから解説していきます！
本題に入る前に、おそらく、以前の鬼宿題の通りだと、MovingEnemyにはEnemyScriptが付いていたと思いますが、今回はそれとは別に新しくEnemyHPScriptというものを作りました。最終的には、EnemyScriptを外して、新しく作ったEnemyHPScriptをつけましょう。まず、SliderのInspectorビューのMinvalueを0,MaxValueを1,Valueを1に設定しましょう。
本題のScriptの説明をしていきます。slider.maxValueは敵HPの最大値を示していて、今回だと最大HPは1です。slider.valueは現在のHPと考えましょう。Startメソッドで最初に敵HPの最大値を所得して、Updateメソッドで、現在の敵HPを随時更新していきます。Damageメソッドは前回のEnemyScriptとほぼ同じ内容ですが、最大HPを１と考えているので、ここでは一度の攻撃で0.2減る設定にしています。前回から書き換えていなければ、GunScriptからDamegeメソッドを呼び出す設定にしてあるはずなので、ここでの関数名は必ずDamageのままにしておきましょう！後は、前述したように、このScriptをMovingEnemyにつけて、sliderを関連づけましょう。そして、Applyするのを忘れずに！Canvasが常にPlayerの方を向くようにするには下記のコードをMovingEnemy内のCanvasにつけましょう!(ここではSliderCanvas)


