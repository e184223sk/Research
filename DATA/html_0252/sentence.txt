以下のページのサマリ
Application Insights for ASP.NET Core アプリケーション以下のパッケージを追加します以下のコードを追加この時点で実際の Azure には行かないけどローカルでデバッグ実行すると Visual Studio で確認できるようになります。デフォルトで警告以上が対象なので、もうちょっと詳細な情報が欲しい場合は appsettings.json の Logging の下に ApplicationInsights を追加してログレベルを構成できます。
こんな感じになります。例えば今回は Razor Pages のプロジェクトを作ったので Index.cshtlm.cs の OnGet で以下のようなログを仕込むと…こんな風に出てきます。Application Insights を作成すると接続文字列が取得できます。接続文字列を、APPLICATIONINSIGHTS_CONNECTION_STRING 環境変数に設定します。Azure Web Appsだと構成のアプリケーション設定で設定しましょう。アプリをデプロイして実行するとログが Application Insights に出るようになります。以下のようにクエリも出来ます。ルールを設定すれば指定の条件を満たしたときにメールなどで通知することも出来ます。とりあえず必要最低限の手順はこんな感じっぽいです。


