<!DOCTYPE html><html><head><meta charset="utf-8" /><title>バーチャルYouTuberが投稿した動画、公開した生放送を自動で再生リストに登録してツイートするボットを作った話 - Qiita</title><meta content="width=device-width,initial-scale=1,shrink-to-fit=no,viewport-fit=cover" name="viewport" /><meta content="#55c500" name="theme-color" /><meta content="XWpkTG32-_C4joZoJ_UsmDUi-zaH-hcrjF6ZC_FoFbk" name="google-site-verification" /><meta content="telephone=no" name="format-detection" /><link rel="canonical" href="https://qiita.com/kokeiro001/items/ceaf04848101b5065454" /><link href="/manifest.json" rel="manifest" /><link href="/opensearch.xml" rel="search" title="Qiita" type="application/opensearchdescription+xml" /><link as="script" href="https://www.googletagservices.com/tag/js/gpt.js" rel="preload" /><link href="https://securepubads.g.doubleclick.net" rel="preconnect" /><script async="" src="https://www.googletagservices.com/tag/js/gpt.js"></script><meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="kEaDBAE1RDrDHFiJDRTTmJ77tyPoBdr6YcoLm2tPBTux1LGfsfknGbielsEvqB+l5ig6S8/TVMzszvKod362Kg==" /><link rel="shortcut icon" type="image/x-icon" href="https://cdn.qiita.com/assets/favicons/public/production-c620d3e403342b1022967ba5e3db1aaa.ico" /><link rel="apple-touch-icon" type="image/png" href="https://cdn.qiita.com/assets/favicons/public/apple-touch-icon-ec5ba42a24ae923f16825592efdc356f.png" /><link rel="stylesheet" media="all" href="https://cdn.qiita.com/assets/public/article-2eaa7dbedc42a8ea65c722cda46d0ebb.min.css" /><script src="https://cdn.qiita.com/assets/public/v3-article-bundle-63de2d91fef827269d3f6b958db2335b.min.js" defer="defer"></script><meta name="twitter:card" content="summary_large_image"><meta content="@Qiita" name="twitter:site" /><meta content="@kokeiro0_00" name="twitter:creator" /><meta property="og:type" content="article"><meta property="og:title" content="バーチャルYouTuberが投稿した動画、公開した生放送を自動で再生リストに登録してツイートするボットを作った話 - Qiita"><meta property="og:image" content="https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0&amp;w=1200&amp;mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND00NE9RNDRPODQ0T0I0NE9qNDRPcldXOTFWSFZpWlhMamdZem1pcFhucUxfamdaZmpnWl9saTVYbmxMdmpnSUhsaGF6cGxvdmpnWmZqZ1pfbmxKX21sTDdwZ0lIamdwTG9oNnJsaTVYamdhZmxobzNubEpfamc2cmpncm5qZzRqamdhdm5tYnZwakxMamdaZmpnYWJqZzRUamdxVGpnN3pqZzRqamdabmpnb3ZqZzV6amc0UGpnNGpqZ3BMa3ZaempnYVBqZ1pfb3FiRSZ0eHQtY29sb3I9JTIzMzMzJnR4dC1mb250PUhpcmFnaW5vJTIwU2FucyUyMFc2JnR4dC1zaXplPTU0JnR4dC1jbGlwPWVsbGlwc2lzJnR4dC1hbGlnbj1jZW50ZXIlMkNtaWRkbGUmcz01OTJjZmM4MjFkMTU4MWM0NDM0MWZjMzYzMGYxMWZjZg&amp;mark-align=center%2Cmiddle&amp;blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RR3R2YTJWcGNtOHdNREUmdHh0LWNvbG9yPSUyMzMzMyZ0eHQtZm9udD1IaXJhZ2lubyUyMFNhbnMlMjBXNiZ0eHQtc2l6ZT00NSZ0eHQtYWxpZ249cmlnaHQlMkNib3R0b20mcz1lZDMxMDg1OWQ1MGI0ZDVhNmQ2ZDRmNTAzZmYwZTdiMw&amp;blend-align=center%2Cmiddle&amp;blend-mode=normal&amp;s=b81827c151bc3e33c43d06d189ed8ea7"><meta property="og:description" content="

バーチャルYouTuberが投稿した動画、公開した生放送を自動で再生リストに登録してツイートするボットを作った話


概要

　バーチャルYouTuberさんについて広く知りたいけど、いろんなチャンネル、Twitter見て新着動画..."><meta content="https://qiita.com/kokeiro001/items/ceaf04848101b5065454" property="og:url" /><meta content="Qiita" property="og:site_name" /><meta content="564524038" property="fb:admins" /><meta content="Chrome,C#,Twitter,Docker,YouTube" name="keywords" /><script>!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window, document,'script',
'https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '668972150489891');
fbq('track', 'PageView');</script><style data-emotion-css="17jxvjw 11t2ec1 1dvr2p8 18lkoru 1g4cku8 1iupg5d ijvq0v 15cocm3 12rp90f 115f4t 1b8uj5v 79elbk 16hhh7b fcbn8c 1gj7nt 154zy0m yikrym 1jqivyb 1ode1bp le4d8r 1hbd3g7 1nzh4zz 38fzdi helsa7 8qb8m4 2imjyh he5w1s 70qvj9 3ojehk 100alwu 1dtnjt5 10ougpm 1ay9vb9 m19uds cgzq40 1wa99t2 1l3zk9f 4czcte 1yzj1fm 1uv1qiv 109dbrr 5jpx49 mnxgyc 1vlpknv fsjkhv 1b17vb0 7i7f4d"}>.css-17jxvjw{display:grid;display:-ms-grid;grid-template-columns:80px minmax(0,1fr) 300px;-ms-grid-columns:80px minmax(0,1fr) 300px;grid-template-rows:minmax(270px,auto) 1fr;-ms-grid-rows:minmax(270px,auto) 1fr;max-width:1280px;margin-right:auto;margin-left:auto;padding-top:24px;padding-right:24px;padding-left:24px;}@media (max-width:1200px){.css-17jxvjw{padding-bottom:0;padding-left:0;padding-right:0;}}@media (max-width:992px){.css-17jxvjw{grid-template-columns:80px 452px 300px;-ms-grid-columns:80px 452px 300px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}}@media (max-width:770px){.css-17jxvjw{display:block;}}@media (max-width:480px){.css-17jxvjw{padding-top:0;}}.css-11t2ec1{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;z-index:5;position:-webkit-sticky;position:sticky;top:calc(56px + 24px + 16px + 32px - 16px);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:16px;width:80px;}.css-11t2ec1:after{content:'';display:table;}.css-11t2ec1:before{content:'';display:table;}@media (max-width:770px){.css-11t2ec1{display:none;}}.css-1dvr2p8{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-18lkoru{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;background-color:#FFFFFF;}.css-1g4cku8{display:inline-block;vertical-align:middle;height:20px;width:20px;fill:#55C500;}.css-1iupg5d{color:#55C500;cursor:pointer;font-size:14px;font-weight:bold;}.css-ijvq0v{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-15cocm3{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#FFFFFF;border:2px solid #6E6F70;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:2px 0px 0px;width:40px;}.css-12rp90f{display:inline-block;vertical-align:bottom;height:17.77777777777778px;width:16px;fill:#6E6F70;}.css-115f4t{color:#6E6F70;font-size:14px;font-weight:bold;}.css-1b8uj5v{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;margin-bottom:16px;padding:0;}.css-79elbk{position:relative;}.css-16hhh7b{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;padding:0;}.css-fcbn8c{display:none;bottom:initial;left:initial;right:initial;top:initial;left:100%;top:calc(-8px - (14px * 1.8) - 16px - 4px);}.css-1gj7nt{color:rgba(0,0,0,0.6);font-size:14px;font-weight:bold;line-height:1.8;padding:8px 16px;}.css-154zy0m{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.87);cursor:pointer;font-size:16px;font-weight:normal;line-height:1.8;padding:4px 16px;}.css-154zy0m:hover{-webkit-text-decoration:none;text-decoration:none;background-color:#F2F2F2;}.css-yikrym{width:20px;}.css-1jqivyb{color:rgba(0,0,0,0.6);font-size:13px;}.css-1ode1bp{background-color:rgba(0,0,0,0.12);height:1px;width:100%;margin:8px 0;}.css-le4d8r{display:inline-block;vertical-align:middle;height:13px;width:13px;fill:rgba(0,0,0,0.6);}.css-1hbd3g7{height:250px;}.css-1nzh4zz{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:16px 32px;background-color:#FBE69E;color:rgba(0,0,0,0.87);line-height:1.5;font-weight:600;}@media (max-width:770px){.css-1nzh4zz{padding:16px;}}.css-38fzdi{color:#CA832A;margin-right:4px;}.css-helsa7{background-color:#FFFFFF;padding:32px;margin-bottom:24px;}@media (max-width:992px){.css-helsa7{margin:0 auto 40px;}}@media (max-width:480px){.css-helsa7{margin:0 0 40px;padding:32px 16px;}}.css-8qb8m4{margin-bottom:48px;}.css-2imjyh{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-he5w1s{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;width:100%;}@media (max-width:770px){.css-he5w1s{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}}.css-70qvj9{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.css-3ojehk{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;margin-right:4px;}.css-100alwu{display:inline-block;border-radius:50%;line-height:1;overflow:hidden;vertical-align:middle;}.css-1dtnjt5{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-10ougpm{color:rgba(0,0,0,0.87);font-size:14px;font-weight:600;line-height:1.8;margin-right:4px;text-wrap:break-word;word-break:break-all;}.css-1ay9vb9{margin-right:16px;}.css-m19uds{color:rgba(0,0,0,0.6);font-size:14px;line-height:1.8;}.css-cgzq40{color:rgba(0,0,0,0.87);font-size:32px;font-weight:bold;line-height:1.4;margin-top:8px;text-wrap:break-word;word-break:break-all;}.css-1wa99t2{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.6);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:8px;}.css-1l3zk9f{color:rgba(0,0,0,0.6);font-size:20px;margin-right:8px;}.css-4czcte{margin-right:4px;color:inherit;font-size:14px;line-height:1.8;}.css-4czcte:not(:last-child)::after{content:',';margin-right:4px;}.css-1yzj1fm{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:32px;}.css-1uv1qiv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-size:20px;height:32px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin-right:16px;outline:none;padding:0;width:32px;}.css-109dbrr{background-color:#F9F9F9;border-top:1px solid rgba(0,0,0,0.12);bottom:0;box-shadow:0px 1px 4px rgba(0,0,0,0.14);display:none;height:calc(env(safe-area-inset-bottom,0px) + 56px);-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding-bottom:env(safe-area-inset-bottom);position:-webkit-sticky;position:sticky;width:100%;z-index:2000;}@media (max-width:770px){.css-109dbrr{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}.css-5jpx49{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:space-evenly;-webkit-justify-content:space-evenly;-ms-flex-pack:space-evenly;justify-content:space-evenly;width:100%;}.css-mnxgyc{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1vlpknv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;margin-right:4px;background-color:#FFFFFF;}.css-fsjkhv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1b17vb0{color:#6E6F70;font-size:14px;font-weight:bold;margin-left:4px;}.css-7i7f4d{display:none;bottom:initial;left:initial;right:initial;top:initial;bottom:32px;right:0;}</style></head><body><div class="allWrapper"><div><div id="GlobalHeader-react-component-b778386f-5858-4534-8875-aea8808af1e2"><div class="st-Header"><div class="st-Header_container"><div class="st-Header_start"><a href="/" class="st-Header_logo"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 426.57 130"><circle cx="167.08" cy="21.4" r="12.28"></circle><path d="M250.81 29.66h23.48v18.9h-23.48z"></path><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z"></path><circle cx="216.33" cy="21.4" r="12.28"></circle></svg></a><div class="st-Header_communitySelector" tabindex="0"><span class="fa fa-caret-down"></span></div><div class="st-Header_dropdown"><div class="st-Header_dropdownHeading">Qiita Teams that are logged in</div><div class="st-Header_dropdownItemNote">You are not logged in to any team</div><hr class="st-Header_dropdownDivider st-Header_dropdownDivider-shrink"/><a href="https://teams-center.qiita.com/find_team" class="st-Header_dropdownItem"><span class="fa fa-fw fa-sign-in st-Header_dropdownItemIcon"></span><div>Log in to Qiita Team</div></a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Community</div><a href="/organizations" class="st-Header_dropdownItem">Organization</a><a href="/official-events/open" class="st-Header_dropdownItem">Event</a><a href="/advent-calendar" class="st-Header_dropdownItem">Advent Calendar</a><a href="https://qiitadon.com/" class="st-Header_dropdownItem" target="_blank">Qiitadon (β)</a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Service</div><a href="https://jobs.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Jobs</a><a href="https://zine.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Zine</a><a href="https://blog.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Blog</a></div><form class="st-Header_search" action="/search" method="get"><span class="fa fa-search st-Header_searchIcon"></span><input type="search" class="st-Header_searchInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form><form class="st-Header_searchModal" action="/search" method="get"><input type="text" class="st-Header_searchModalInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form></div><div class="st-Header_end"><div class="st-Header_searchButton"><span class="fa fa-search"></span></div><a class="st-Header_signupButton" href="/signup?redirect_to=%2Fkokeiro001%2Fitems%2Fceaf04848101b5065454">Signup</a><a class="st-Header_loginLink" href="/login?redirect_to=%2Fkokeiro001%2Fitems%2Fceaf04848101b5065454">Login</a></div><div class="st-Header_overlay"></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="GlobalHeader" data-dom-id="GlobalHeader-react-component-b778386f-5858-4534-8875-aea8808af1e2">{"unreadNotificationsCount":null,"realms":[{"humanName":"Qiita","isCurrentRealm":true,"isQiita":true,"isQiitaTeam":false,"loggedInUser":null,"teamId":null,"url":"https://qiita.com/"}],"teamFindUrl":"https://teams-center.qiita.com/find_team","isTeamOnlyUser":null,"currentUser":null}</script>
      
</div><div class="st-HeaderAlert st-HeaderAlert-warning"><div class="st-HeaderAlert_body"></div></div><script type="application/ld+json">{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"/","name":"Qiita"}},{"@type":"ListItem","position":2,"item":{"@id":"/tags/chrome","name":"Chrome"}}]}</script><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","datePublished":"2019-07-15T14:10:38.000+09:00","dateModified":"2019-07-15T14:23:05.000+09:00","headline":"バーチャルYouTuberが投稿した動画、公開した生放送を自動で再生リストに登録してツイートするボットを作った話","image":"https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0\u0026w=1200\u0026mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND00NE9RNDRPODQ0T0I0NE9qNDRPcldXOTFWSFZpWlhMamdZem1pcFhucUxfamdaZmpnWl9saTVYbmxMdmpnSUhsaGF6cGxvdmpnWmZqZ1pfbmxKX21sTDdwZ0lIamdwTG9oNnJsaTVYamdhZmxobzNubEpfamc2cmpncm5qZzRqamdhdm5tYnZwakxMamdaZmpnYWJqZzRUamdxVGpnN3pqZzRqamdabmpnb3ZqZzV6amc0UGpnNGpqZ3BMa3ZaempnYVBqZ1pfb3FiRSZ0eHQtY29sb3I9JTIzMzMzJnR4dC1mb250PUhpcmFnaW5vJTIwU2FucyUyMFc2JnR4dC1zaXplPTU0JnR4dC1jbGlwPWVsbGlwc2lzJnR4dC1hbGlnbj1jZW50ZXIlMkNtaWRkbGUmcz01OTJjZmM4MjFkMTU4MWM0NDM0MWZjMzYzMGYxMWZjZg\u0026mark-align=center%2Cmiddle\u0026blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RR3R2YTJWcGNtOHdNREUmdHh0LWNvbG9yPSUyMzMzMyZ0eHQtZm9udD1IaXJhZ2lubyUyMFNhbnMlMjBXNiZ0eHQtc2l6ZT00NSZ0eHQtYWxpZ249cmlnaHQlMkNib3R0b20mcz1lZDMxMDg1OWQ1MGI0ZDVhNmQ2ZDRmNTAzZmYwZTdiMw\u0026blend-align=center%2Cmiddle\u0026blend-mode=normal\u0026s=b81827c151bc3e33c43d06d189ed8ea7","mainEntityOfPage":"https://qiita.com/kokeiro001/items/ceaf04848101b5065454","author":{"@type":"Person","address":"","email":"kokeiro.ssbm.001@gmail.com","identifier":"kokeiro001","name":"kokeiro001","image":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F93212%2Fprofile-images%2F1486294639?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=11f2f94ec08172c0819831feffbd6540","url":"https://qiita.com/kokeiro001","description":"VRエンジニア。お酒とプログラミングとC#とVisualStudioと.NETが好き。","memberOf":[]},"publisher":{"@type":"Organization","name":"Qiita","logo":{"@type":"ImageObject","url":"//cdn.qiita.com/assets/public/qiita-logo-c39ded593afa388e2e1ba435b110554e.png"}}}</script><style type="text/css">.wb-CampaignLink {
  background-color: #333333;
  width: 100%;
}

.wb-CampaignLink_container {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  max-width: 1100px;
  margin: 0 auto;
  font-size: 13px;
  padding: 0.8em;
}
.wb-CampaignLink_container > a {
  color: #fff;
}

.wb-CampaignLink_container > a:hover {
  text-decoration: underline;
}</style><div class="wb-CampaignLink"><div class="wb-CampaignLink_container"><a target="_blank" id="header_text_message_1" href="https://zine.qiita.com/interview/202105-uzabase-2/?utm_source=qiita&amp;utm_medium=header-banner">常にメンバーが開発しやすい環境を作るNewsPicksの組織作りとは</a><a target="_blank" id="header_text_message_2" href="https://zine.qiita.com/interview/202105-uzabase-2/?utm_source=qiita&amp;utm_medium=header-banner">詳しくはこちら</a></div><script>td.trackEvent(
  'front_events',
  {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"kokeiro001","type":"items","id":"ceaf04848101b5065454"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Show","data":{"message":"常にメンバーが開発しやすい環境を作るNewsPicksの組織作りとは","url":"https://zine.qiita.com/interview/202105-uzabase-2/?utm_source=qiita\u0026utm_medium=header-banner","sub_message":"詳しくはこちら"}}
)</script><script>document.getElementById('header_text_message_1').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"kokeiro001","type":"items","id":"ceaf04848101b5065454"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":2,"pos_id":"header_text_message_1","message":"常にメンバーが開発しやすい環境を作るNewsPicksの組織作りとは","url":"https://zine.qiita.com/interview/202105-uzabase-2/?utm_source=qiita\u0026utm_medium=header-banner","sub_message":"詳しくはこちら"}}
  )
})</script><script>document.getElementById('header_text_message_2').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"kokeiro001","type":"items","id":"ceaf04848101b5065454"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":2,"pos_id":"header_text_message_2","message":"常にメンバーが開発しやすい環境を作るNewsPicksの組織作りとは","url":"https://zine.qiita.com/interview/202105-uzabase-2/?utm_source=qiita\u0026utm_medium=header-banner","sub_message":"詳しくはこちら"}}
  )
})</script></div><script type="application/json" id="js-react-on-rails-context">{"railsEnv":"production","inMailer":false,"i18nLocale":"en","i18nDefaultLocale":"en","href":"https://qiita.com/kokeiro001/items/ceaf04848101b5065454","location":"/kokeiro001/items/ceaf04848101b5065454","scheme":"https","host":"qiita.com","port":null,"pathname":"/kokeiro001/items/ceaf04848101b5065454","search":null,"httpAcceptLanguage":null,"actionPath":"public/items#show","settings":{"analyticsTrackingId":"UA-24675221-12","assetsMap":{},"csrfToken":"PPH4dKcaXvkxxilldedsy6zVFTBuuo0pqy6ADK2lGQUdY8rvF9Y92kpE5y1XW6D21AaYWElsAx8mKnk/sZSqFA==","locale":"en"},"currentUser":null,"isLoggedIn":false,"recaptchaSiteKey":"6LfNkiQTAAAAAM3UGnSquBy2akTITGNMO_QDxMw6","serverSide":false}</script>
<div id="PersonalArticlePage-react-component-f2e79487-3742-44e2-b166-0d419d0ccb0d"><div class="p-items_wrapper"><div class=" css-17jxvjw"><div class="css-11t2ec1"><div class="css-1dvr2p8"><button class=" css-18lkoru"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/kokeiro001/items/ceaf04848101b5065454/likers" class="css-1iupg5d">4</a></div><div class="css-ijvq0v"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-115f4t">4</span></div><div class="css-1b8uj5v"><span class="fa fa-twitter"></span></div><div class="css-1b8uj5v"><span class="fa fa-facebook"></span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-fcbn8c"><div class="css-1gj7nt">Improve article</div><a href="/drafts/ceaf04848101b5065454/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/kokeiro001/items/ceaf04848101b5065454/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/kokeiro001/items/ceaf04848101b5065454/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/kokeiro001/items/ceaf04848101b5065454/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/kokeiro001/items/ceaf04848101b5065454.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div><div class="p-items_options"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_toc"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_main"><div class="css-1nzh4zz"><span class="fa fa-fw fa-warning css-38fzdi"></span><p>More than 1 year has passed since last update.</p></div><div class="css-helsa7"><div class="css-8qb8m4"><div class="css-2imjyh"><div class="css-he5w1s"><div class="css-70qvj9"><div class="css-3ojehk"><a href="/kokeiro001"><img class="css-100alwu eyfquo10" src="https://qiita-image-store.s3.amazonaws.com/0/93212/profile-images/1486294639" width="24" height="24" loading="lazy"/></a></div><div class="css-1dtnjt5"><a href="/kokeiro001" class="css-10ougpm">@<!-- -->kokeiro001</a><div class="css-1ay9vb9"><span><meta content="2019-07-15T05:10:38Z"/><time dateTime="2019-07-15T05:23:05Z" class="css-m19uds">updated at 2019-07-15</time></span></div></div></div></div></div><h1 class="css-cgzq40">バーチャルYouTuberが投稿した動画、公開した生放送を自動で再生リストに登録してツイートするボットを作った話</h1><div class="css-1wa99t2"><span class="fa fa-tags mr-1of2 css-1l3zk9f" aria-hidden="true"></span><a href="/tags/chrome" class="css-4czcte">Chrome</a><a href="/tags/csharp" class="css-4czcte">C#</a><a href="/tags/twitter" class="css-4czcte">Twitter</a><a href="/tags/docker" class="css-4czcte">Docker</a><a href="/tags/youtube" class="css-4czcte">YouTube</a></div></div><section class="it-MdContent"><div id="personal-public-article-body"><div>
<h1>
<span id="バーチャルyoutuberが投稿した動画公開した生放送を自動で再生リストに登録してツイートするボットを作った話" class="fragment"></span><a href="#%E3%83%90%E3%83%BC%E3%83%81%E3%83%A3%E3%83%AByoutuber%E3%81%8C%E6%8A%95%E7%A8%BF%E3%81%97%E3%81%9F%E5%8B%95%E7%94%BB%E5%85%AC%E9%96%8B%E3%81%97%E3%81%9F%E7%94%9F%E6%94%BE%E9%80%81%E3%82%92%E8%87%AA%E5%8B%95%E3%81%A7%E5%86%8D%E7%94%9F%E3%83%AA%E3%82%B9%E3%83%88%E3%81%AB%E7%99%BB%E9%8C%B2%E3%81%97%E3%81%A6%E3%83%84%E3%82%A4%E3%83%BC%E3%83%88%E3%81%99%E3%82%8B%E3%83%9C%E3%83%83%E3%83%88%E3%82%92%E4%BD%9C%E3%81%A3%E3%81%9F%E8%A9%B1"><i class="fa fa-link"></i></a>バーチャルYouTuberが投稿した動画、公開した生放送を自動で再生リストに登録してツイートするボットを作った話</h1>

<h2>
<span id="概要" class="fragment"></span><a href="#%E6%A6%82%E8%A6%81"><i class="fa fa-link"></i></a>概要</h2>

<p>　バーチャルYouTuberさんについて広く知りたいけど、いろんなチャンネル、Twitter見て新着動画探すの大変だよー。</p>

<p>　となったのでバーチャルYouTuberが投稿した動画、公開した生放送を自動で再生リストに登録してツイートするボットを作りました。紹介します。</p>

<p><a href="https://twitter.com/vtuber_movies" rel="nofollow noopener" target="_blank">日刊VTuber動画(@vtuber_movies)さん | Twitter</a><br>
<a href="https://twitter.com/vtuber_movies" class="autolink" rel="nofollow noopener" target="_blank">https://twitter.com/vtuber_movies</a></p>

<p>　こんな感じにツイートされます。</p>

<blockquote class="twitter-tweet">
<p>再生リスト「2019年7月14日に投稿されたバーチャルYouTuberの動画・生放送」を作成しました。(119件登録済み)<a href="https://t.co/pxGURk5J0J" rel="nofollow noopener" target="_blank">https://t.co/pxGURk5J0J</a></p>— 日刊VTuber動画 (@vtuber_movies) <a href="https://twitter.com/vtuber_movies/status/1150557735697539072?ref_src=twsrc%5Etfw" rel="nofollow noopener" target="_blank">2019年7月15日</a>
</blockquote>

<p>　アイコン絶賛募集中です。</p>

<p>　ざっくり下記の流れでプログラムが動きます。</p>

<ol>
<li>バーチャルYouTuberのチャンネル一覧をクロールして取得する</li>
<li>YouTubeのチャンネルRSSにアクセスして新着動画を取得する</li>
<li>YouTubeのAPI叩いて再生リストを生成、動画を登録する</li>
<li>生成した再生リストをTwitterのボットでツイートする</li>
</ol>

<p>　GitHubで公開済みです。</p>

<p><a href="https://github.com/kokeiro001/YouTubeNotifier" rel="nofollow noopener" target="_blank">kokeiro001/YouTubeNotifier</a><br>
<a href="https://github.com/kokeiro001/YouTubeNotifier" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/kokeiro001/YouTubeNotifier</a></p>

<h3>
<span id="使用技術概要" class="fragment"></span><a href="#%E4%BD%BF%E7%94%A8%E6%8A%80%E8%A1%93%E6%A6%82%E8%A6%81"><i class="fa fa-link"></i></a>使用技術概要</h3>

<p>　だいたいこの辺の技術使って実現しました。</p>

<ul>
<li>C# / VsialStudio / .NET Core 2.2</li>
<li>Docker</li>
<li>Chrome / Selenium</li>
<li>Google API</li>
<li>Twitter API</li>
<li>Azure Storage</li>
</ul>

<h2>
<span id="1バーチャルyoutuberのチャンネル一覧をクロールして取得する" class="fragment"></span><a href="#1%E3%83%90%E3%83%BC%E3%83%81%E3%83%A3%E3%83%AByoutuber%E3%81%AE%E3%83%81%E3%83%A3%E3%83%B3%E3%83%8D%E3%83%AB%E4%B8%80%E8%A6%A7%E3%82%92%E3%82%AF%E3%83%AD%E3%83%BC%E3%83%AB%E3%81%97%E3%81%A6%E5%8F%96%E5%BE%97%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>1.バーチャルYouTuberのチャンネル一覧をクロールして取得する</h2>

<p>　そもそもどんなバーチャルYouTuberさんが動画投稿、生放送を実施しているか知る必要があります。自動で。</p>

<p>　今回はVtuber Insightさんのデータをクロールして利用させていただくことにしました。</p>

<p><a href="https://vtuberinsight.com/" rel="nofollow noopener" target="_blank">Vtuber Insight</a><br>
<a href="https://vtuberinsight.com/" class="autolink" rel="nofollow noopener" target="_blank">https://vtuberinsight.com/</a></p>

<p>　さて、このサイト。チャンネル名やチャンネルのIDを取得できるのですがWebSocketを用いて実現しています。普段Webページからのデータ取得、クロールには適当なHttpClientを用いてGetやらPostで取得しているのですがWebSocketではそうも行きません。</p>

<p>　そこで、今回はヘッドレスモードのChrome＋Seleniumを用いてざっくり下記のようにデータを取得しました。</p>

<div class="code-frame" data-lang="c#"><div class="highlight"><pre><code><span class="k">private</span> <span class="k">async</span> <span class="n">Task</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span> <span class="nf">GetPageSource</span><span class="p">()</span>
<span class="p">{</span>
    <span class="kt">var</span> <span class="n">driverPath</span> <span class="p">=</span> <span class="s">"/opt/selenium/"</span><span class="p">;</span>
    <span class="kt">var</span> <span class="n">driverExecutableFileName</span> <span class="p">=</span> <span class="s">"chromedriver"</span><span class="p">;</span>

    <span class="kt">var</span> <span class="n">options</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">ChromeOptions</span><span class="p">();</span>
    <span class="n">options</span><span class="p">.</span><span class="nf">AddArguments</span><span class="p">(</span><span class="s">"headless"</span><span class="p">);</span>
    <span class="n">options</span><span class="p">.</span><span class="nf">AddArguments</span><span class="p">(</span><span class="s">"--disable-gpu"</span><span class="p">);</span>
    <span class="n">options</span><span class="p">.</span><span class="nf">AddArguments</span><span class="p">(</span><span class="s">"no-sandbox"</span><span class="p">);</span>
    <span class="n">options</span><span class="p">.</span><span class="nf">AddArguments</span><span class="p">(</span><span class="s">"--window-size=1,1"</span><span class="p">);</span>
    <span class="n">options</span><span class="p">.</span><span class="nf">AddArguments</span><span class="p">(</span><span class="s">"--disable-desktop-notifications"</span><span class="p">);</span>
    <span class="n">options</span><span class="p">.</span><span class="nf">AddArguments</span><span class="p">(</span><span class="s">"--disable-extensions"</span><span class="p">);</span>
    <span class="n">options</span><span class="p">.</span><span class="nf">AddArguments</span><span class="p">(</span><span class="s">"--blink-settings=imagesEnabled=false"</span><span class="p">);</span>
    <span class="n">options</span><span class="p">.</span><span class="n">BinaryLocation</span> <span class="p">=</span> <span class="s">"/opt/google/chrome/chrome"</span><span class="p">;</span>

    <span class="k">using</span> <span class="p">(</span><span class="kt">var</span> <span class="n">service</span> <span class="p">=</span> <span class="n">ChromeDriverService</span><span class="p">.</span><span class="nf">CreateDefaultService</span><span class="p">(</span><span class="n">driverPath</span><span class="p">,</span> <span class="n">driverExecutableFileName</span><span class="p">))</span>
    <span class="k">using</span> <span class="p">(</span><span class="kt">var</span> <span class="n">driver</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">ChromeDriver</span><span class="p">(</span><span class="n">service</span><span class="p">,</span> <span class="n">options</span><span class="p">,</span> <span class="n">TimeSpan</span><span class="p">.</span><span class="nf">FromSeconds</span><span class="p">(</span><span class="m">60</span><span class="p">)))</span>
    <span class="p">{</span>
        <span class="n">driver</span><span class="p">.</span><span class="nf">Manage</span><span class="p">().</span><span class="nf">Timeouts</span><span class="p">().</span><span class="n">ImplicitWait</span> <span class="p">=</span> <span class="n">TimeSpan</span><span class="p">.</span><span class="nf">FromSeconds</span><span class="p">(</span><span class="m">5</span><span class="p">);</span>
        <span class="n">driver</span><span class="p">.</span><span class="nf">Manage</span><span class="p">().</span><span class="n">Window</span><span class="p">.</span><span class="nf">Minimize</span><span class="p">();</span>

        <span class="kt">var</span> <span class="n">url</span> <span class="p">=</span> <span class="s">@"https://vtuber-insight.com/index.html"</span><span class="p">;</span>

        <span class="n">driver</span><span class="p">.</span><span class="nf">Navigate</span><span class="p">().</span><span class="nf">GoToUrl</span><span class="p">(</span><span class="n">url</span><span class="p">);</span>

        <span class="c1">// WebSocket経由のデータ取得のため適当に20秒ほど待つ</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">20</span><span class="p">;</span> <span class="n">i</span> <span class="p">&gt;</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span><span class="p">--)</span>
        <span class="p">{</span>
            <span class="n">log</span><span class="p">.</span><span class="nf">Infomation</span><span class="p">(</span><span class="s">$"** Wait </span><span class="p">{</span><span class="n">i</span><span class="p">}</span><span class="s"> seconds for web socket"</span><span class="p">);</span>
            <span class="k">await</span> <span class="n">Task</span><span class="p">.</span><span class="nf">Delay</span><span class="p">(</span><span class="n">TimeSpan</span><span class="p">.</span><span class="nf">FromSeconds</span><span class="p">(</span><span class="m">1</span><span class="p">));</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="n">driver</span><span class="p">.</span><span class="n">PageSource</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>　Chromeの起動時オプションでいろいろな機能を無効にしてます。このプログラムはConoHaのメモリ512MBのVPSで動かしてるのですが、少なくとも画像読み込まないようにしないとメモリ使い潰してしまいます。多分headlessにした時点で無効になってるパラメータもあって、重複して無効にしようとしているオプションあるんだろうなとは思います。が、動いてるのでおｋ．気が向いたらしっかりドキュメント読みつつ検証します。</p>

<p>　DockerイメージにChrome/Seleniumをインストールするにあたっては下記リポジトリを参考にさせていただきました。こっちのDockerファイルもあまり理解しないままほぼ丸コピしてるだけなので気が向いたらしっかり読みます。</p>

<p><qiita-embed-ogp src="https://github.com/devpabloassis/seleniumdotnetcore/blob/master/Dockerfile"></qiita-embed-ogp></p>

<h2>
<span id="2youtubeのチャンネルrssにアクセスして新着動画を取得する" class="fragment"></span><a href="#2youtube%E3%81%AE%E3%83%81%E3%83%A3%E3%83%B3%E3%83%8D%E3%83%ABrss%E3%81%AB%E3%82%A2%E3%82%AF%E3%82%BB%E3%82%B9%E3%81%97%E3%81%A6%E6%96%B0%E7%9D%80%E5%8B%95%E7%94%BB%E3%82%92%E5%8F%96%E5%BE%97%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>2.YouTubeのチャンネルRSSにアクセスして新着動画を取得する</h2>

<p>　次はVtuber Insightから取得したYouTubeのチャンネルIDを用いて、それぞれのチャンネルにアクセスして新着動画を取得していきます。</p>

<p>　新着動画を取得するにあたって、実現方法は大きく２パターンを想定していました。</p>

<ul>
<li>1.YouTubeのAPIを叩いて動画を取得する</li>
<li>2.YouTubeチャンネルのRSSにアクセスして動画を取得する</li>
</ul>

<p>　はじめは素直に1で実装していました。任意の期間に投稿された動画をAPIリクエストに入れられたのでそもそも実現も楽そうでしたし、何より「普通こっちだよなぁ」みたいな直感があったので。</p>

<p>　が、YouTubeのAPIのクォータを消費してしまうことがわかったため辞めました。</p>

<p><a href="https://developers.google.com/youtube/v3/getting-started?hl=ja#quota" rel="nofollow noopener" target="_blank">YouTube Data API の概要  |  YouTube Data API (v3)  |  Google Developers</a><br>
<a href="https://developers.google.com/youtube/v3/getting-started?hl=ja#quota" class="autolink" rel="nofollow noopener" target="_blank">https://developers.google.com/youtube/v3/getting-started?hl=ja#quota</a></p>

<blockquote>
<p>YouTube Data API では、デベロッパーが目的どおりにサービスを使用できることと、不当にサービス品質を低下させたり他のリソースへのアクセスを制限したりしてしまうアプリケーションの作成を防ぐことを目的としてクォータを使用します。</p>
</blockquote>

<p>　動画取得のためにAPIを叩いてしまうと、このプログラムの本命である「再生リストに動画を登録する」APIを叩いてる際にクォータを消費しきってしまい、新着動画を登録しきれなくなることが判明しました。(この利用上限を開放するためには英語による手続き、審査が必要なので面倒臭い。。)</p>

<p>　そこで、クォータを消費しないRSSを用いて新着動画を取得することにしました。下記のようなURLでそれぞれのチャンネルのRSSにアクセスできます。</p>

<div class="code-frame" data-lang="c#"><div class="highlight"><pre><code><span class="kt">var</span> <span class="n">url</span> <span class="p">=</span> <span class="s">$"https://www.youtube.com/feeds/videos.xml?channel_id=</span><span class="p">{</span><span class="n">channelId</span><span class="p">}</span><span class="s">"</span><span class="p">;</span>
</code></pre></div></div>

<p>　取得後、自分でRSSをパースする手間が増えますがこれでいくらチャンネル情報を取得してもクォータ利用制限で死ななくなります。</p>

<div class="code-frame" data-lang="c#"><div class="highlight"><pre><code><span class="k">private</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">YouTubeRssItem</span><span class="p">&gt;</span> <span class="nf">GetRssItems</span><span class="p">(</span><span class="kt">string</span> <span class="n">channelId</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">var</span> <span class="n">url</span> <span class="p">=</span> <span class="s">$"https://www.youtube.com/feeds/videos.xml?channel_id=</span><span class="p">{</span><span class="n">channelId</span><span class="p">}</span><span class="s">"</span><span class="p">;</span>

    <span class="kt">var</span> <span class="n">list</span> <span class="p">=</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">YouTubeRssItem</span><span class="p">&gt;();</span>

    <span class="k">using</span> <span class="p">(</span><span class="kt">var</span> <span class="n">xmlReader</span> <span class="p">=</span> <span class="n">XmlReader</span><span class="p">.</span><span class="nf">Create</span><span class="p">(</span><span class="n">url</span><span class="p">))</span>
    <span class="p">{</span>
        <span class="kt">var</span> <span class="n">feed</span> <span class="p">=</span> <span class="n">SyndicationFeed</span><span class="p">.</span><span class="nf">Load</span><span class="p">(</span><span class="n">xmlReader</span><span class="p">);</span>
        <span class="k">foreach</span> <span class="p">(</span><span class="kt">var</span> <span class="n">item</span> <span class="k">in</span> <span class="n">feed</span><span class="p">.</span><span class="n">Items</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="kt">var</span> <span class="n">movieUri</span> <span class="p">=</span> <span class="n">item</span><span class="p">.</span><span class="n">Links</span><span class="p">.</span><span class="nf">First</span><span class="p">().</span><span class="n">Uri</span><span class="p">;</span>
            <span class="kt">var</span> <span class="n">movieId</span> <span class="p">=</span> <span class="n">movieUri</span><span class="p">.</span><span class="n">Query</span><span class="p">.</span><span class="nf">Substring</span><span class="p">(</span><span class="m">3</span><span class="p">);</span>

            <span class="kt">var</span> <span class="n">youtubeRssItem</span> <span class="p">=</span> <span class="k">new</span> <span class="n">YouTubeRssItem</span>
            <span class="p">{</span>
                <span class="n">Url</span> <span class="p">=</span> <span class="n">movieUri</span><span class="p">.</span><span class="nf">ToString</span><span class="p">(),</span>
                <span class="n">VideoId</span> <span class="p">=</span> <span class="n">movieId</span><span class="p">,</span>
                <span class="n">Title</span> <span class="p">=</span> <span class="n">item</span><span class="p">.</span><span class="n">Title</span><span class="p">.</span><span class="n">Text</span><span class="p">,</span>
                <span class="n">PublishDateUtc</span> <span class="p">=</span> <span class="n">item</span><span class="p">.</span><span class="n">PublishDate</span><span class="p">.</span><span class="n">DateTime</span><span class="p">,</span>
            <span class="p">};</span>

            <span class="n">list</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">youtubeRssItem</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="n">list</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>　自分用のコードはガンガンハードコードするマン。</p>

<p>　ちょっとクォータ使用してないことに抜け道感はありますが、おそらくYouTubeのサーバー的にもRSSへのアクセスのが低負荷でそんなに悪い子としてないと自分を信じ込ませましょう。現在読み込むチャンネル数は300にしていますが、適当にディレイ挟みながらアクセスしてるのでそこまでしんどくないはず。300って数字は気分で決めました。</p>

<h2>
<span id="3youtubeのapi叩いて再生リストを生成動画を登録する" class="fragment"></span><a href="#3youtube%E3%81%AEapi%E5%8F%A9%E3%81%84%E3%81%A6%E5%86%8D%E7%94%9F%E3%83%AA%E3%82%B9%E3%83%88%E3%82%92%E7%94%9F%E6%88%90%E5%8B%95%E7%94%BB%E3%82%92%E7%99%BB%E9%8C%B2%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>3.YouTubeのAPI叩いて再生リストを生成、動画を登録する</h2>

<p>　素直にnugetから <code>Google.Apis.YouTube.v3</code> をインストールしてAPI叩いていきます。この辺のAPI使うにはGoogleの開発者登録必要です。必要に応じて登録してください。</p>

<p>　今回作ったプログラムは一日に一回cronで起動し「昨日の再生リスト」を生成することを想定していますが、作ろうとしている名前と同名の再生リストをがあったら新規作成しない、既に登録済みの動画があった場合は登録しない、という制御を自前で入れています。自分で制御しないと重複した名前の再生リスト作ったり、同じ再生リストに同じ動画が複数入ったりするので注意が必要です。デバッグ中は何度も実行するので、この辺の制御入れとかないと手動で消す羽目になります(n敗)。</p>

<p>　また、しっかり受け取るパラメータをFieldプロパティで明示して制限しないとあっという間にクォータ上限いっちゃって次の日までデバッグできないのも注意です(n敗)。</p>

<div class="code-frame" data-lang="c#"><div class="highlight"><pre><code><span class="k">private</span> <span class="k">async</span> <span class="n">Task</span><span class="p">&lt;(</span><span class="n">Playlist</span> <span class="n">playlist</span><span class="p">,</span> <span class="n">List</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span> <span class="n">videoIds</span><span class="p">)&gt;</span> <span class="nf">GetOrInsertPlaylist</span><span class="p">(</span><span class="kt">string</span> <span class="n">playlistTitle</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">log</span><span class="p">.</span><span class="nf">Infomation</span><span class="p">(</span><span class="s">$"GetOrInsertPlaylist playlistTitle=</span><span class="p">{</span><span class="n">playlistTitle</span><span class="p">}</span><span class="s">"</span><span class="p">);</span>

    <span class="kt">var</span> <span class="n">listPlaylistRequest</span> <span class="p">=</span> <span class="n">youtubeService</span><span class="p">.</span><span class="n">Playlists</span><span class="p">.</span><span class="nf">List</span><span class="p">(</span><span class="s">"id,snippet"</span><span class="p">);</span>
    <span class="n">listPlaylistRequest</span><span class="p">.</span><span class="n">Mine</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
    <span class="n">listPlaylistRequest</span><span class="p">.</span><span class="n">MaxResults</span> <span class="p">=</span> <span class="m">50</span><span class="p">;</span>
    <span class="n">listPlaylistRequest</span><span class="p">.</span><span class="n">Fields</span> <span class="p">=</span> <span class="s">"items/id,items/snippet/title"</span><span class="p">;</span>

    <span class="n">log</span><span class="p">.</span><span class="nf">Infomation</span><span class="p">(</span><span class="s">"listPlaylistRequest.ExecuteAsync"</span><span class="p">);</span>
    <span class="kt">var</span> <span class="n">listPlaylistResponse</span> <span class="p">=</span> <span class="k">await</span> <span class="n">listPlaylistRequest</span><span class="p">.</span><span class="nf">ExecuteAsync</span><span class="p">();</span>

    <span class="kt">var</span> <span class="n">playlist</span> <span class="p">=</span> <span class="n">listPlaylistResponse</span><span class="p">.</span><span class="n">Items</span>
        <span class="p">.</span><span class="nf">Where</span><span class="p">(</span><span class="n">x</span> <span class="p">=&gt;</span> <span class="n">x</span><span class="p">.</span><span class="n">Snippet</span><span class="p">.</span><span class="n">Title</span> <span class="p">==</span> <span class="n">playlistTitle</span><span class="p">)</span>
        <span class="p">.</span><span class="nf">FirstOrDefault</span><span class="p">();</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">playlist</span> <span class="p">!=</span> <span class="k">null</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">var</span> <span class="n">videoIds</span> <span class="p">=</span> <span class="k">await</span> <span class="nf">GetPlaylistItemVideoIds</span><span class="p">(</span><span class="n">playlist</span><span class="p">);</span>

        <span class="k">return</span> <span class="p">(</span><span class="n">playlist</span><span class="p">,</span> <span class="n">videoIds</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="c1">// not found playlist. insert playlist.</span>
    <span class="n">log</span><span class="p">.</span><span class="nf">Infomation</span><span class="p">(</span><span class="s">$"NotFound playlistTitle=</span><span class="p">{</span><span class="n">playlistTitle</span><span class="p">}</span><span class="s">"</span><span class="p">);</span>

    <span class="n">log</span><span class="p">.</span><span class="nf">Infomation</span><span class="p">(</span><span class="s">$"InsertPlayList </span><span class="p">{</span><span class="n">playlistTitle</span><span class="p">}</span><span class="s">"</span><span class="p">);</span>

    <span class="kt">var</span> <span class="n">insertPlaylistRequest</span> <span class="p">=</span> <span class="n">youtubeService</span><span class="p">.</span><span class="n">Playlists</span><span class="p">.</span><span class="nf">Insert</span><span class="p">(</span><span class="k">new</span> <span class="n">Playlist</span>
    <span class="p">{</span>
        <span class="n">Snippet</span> <span class="p">=</span> <span class="k">new</span> <span class="n">PlaylistSnippet</span>
        <span class="p">{</span>
            <span class="n">Title</span> <span class="p">=</span> <span class="n">playlistTitle</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="n">Status</span> <span class="p">=</span> <span class="k">new</span> <span class="n">PlaylistStatus</span>
        <span class="p">{</span>
            <span class="n">PrivacyStatus</span> <span class="p">=</span> <span class="s">"public"</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">},</span> <span class="s">"snippet,status"</span><span class="p">);</span>

    <span class="n">insertPlaylistRequest</span><span class="p">.</span><span class="n">Fields</span> <span class="p">=</span> <span class="s">"id,snippet/title"</span><span class="p">;</span>

    <span class="n">log</span><span class="p">.</span><span class="nf">Infomation</span><span class="p">(</span><span class="s">"insertPlaylistRequest.ExecuteAsync"</span><span class="p">);</span>
    <span class="kt">var</span> <span class="n">insertPlaylistResponse</span> <span class="p">=</span> <span class="k">await</span> <span class="n">insertPlaylistRequest</span><span class="p">.</span><span class="nf">ExecuteAsync</span><span class="p">();</span>

    <span class="k">return</span> <span class="p">(</span><span class="n">insertPlaylistResponse</span><span class="p">,</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;());</span>
<span class="p">}</span>


<span class="k">private</span> <span class="k">async</span> <span class="n">Task</span><span class="p">&lt;</span><span class="n">List</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;&gt;</span> <span class="nf">GetPlaylistItemVideoIds</span><span class="p">(</span><span class="n">Playlist</span> <span class="n">playlist</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">var</span> <span class="n">pageToken</span> <span class="p">=</span> <span class="k">default</span><span class="p">(</span><span class="kt">string</span><span class="p">);</span>

    <span class="kt">var</span> <span class="n">list</span> <span class="p">=</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;();</span>

    <span class="k">do</span>
    <span class="p">{</span>
        <span class="kt">var</span> <span class="n">playlistItemsRequest</span> <span class="p">=</span> <span class="n">youtubeService</span><span class="p">.</span><span class="n">PlaylistItems</span><span class="p">.</span><span class="nf">List</span><span class="p">(</span><span class="s">"snippet"</span><span class="p">);</span>
        <span class="n">playlistItemsRequest</span><span class="p">.</span><span class="n">Fields</span> <span class="p">=</span> <span class="s">"items/snippet/id"</span><span class="p">;</span>
        <span class="n">playlistItemsRequest</span><span class="p">.</span><span class="n">PageToken</span> <span class="p">=</span> <span class="n">pageToken</span><span class="p">;</span>
        <span class="n">playlistItemsRequest</span><span class="p">.</span><span class="n">PlaylistId</span> <span class="p">=</span> <span class="n">playlist</span><span class="p">.</span><span class="n">Id</span><span class="p">;</span>
        <span class="n">playlistItemsRequest</span><span class="p">.</span><span class="n">MaxResults</span> <span class="p">=</span> <span class="m">50</span><span class="p">;</span>

        <span class="kt">var</span> <span class="n">playlistItemsResponse</span> <span class="p">=</span> <span class="k">await</span> <span class="n">playlistItemsRequest</span><span class="p">.</span><span class="nf">ExecuteAsync</span><span class="p">();</span>

        <span class="kt">var</span> <span class="n">videoIds</span> <span class="p">=</span> <span class="n">playlistItemsResponse</span><span class="p">.</span><span class="n">Items</span><span class="p">.</span><span class="nf">Select</span><span class="p">(</span><span class="n">x</span> <span class="p">=&gt;</span> <span class="n">x</span><span class="p">.</span><span class="n">Id</span><span class="p">);</span>

        <span class="n">list</span><span class="p">.</span><span class="nf">AddRange</span><span class="p">(</span><span class="n">videoIds</span><span class="p">);</span>

        <span class="n">pageToken</span> <span class="p">=</span> <span class="n">playlistItemsResponse</span><span class="p">.</span><span class="n">NextPageToken</span><span class="p">;</span>

    <span class="p">}</span> <span class="k">while</span> <span class="p">(!</span><span class="kt">string</span><span class="p">.</span><span class="nf">IsNullOrEmpty</span><span class="p">(</span><span class="n">pageToken</span><span class="p">));</span>

    <span class="k">return</span> <span class="n">list</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>　余談ですが小規模な趣味開発では「GetOrInsertPlaylist」みたいな複数の関心事をモリモリやらせてるんだろうなぁ！みたいなメソッドを躊躇せず作ります。小規模で誰にも引き継がないプロジェクトであれば結局そっちのが実装が早くかつメンテナンスしやすいと思ってます。</p>

<h2>
<span id="4生成した再生リストをtwitterのボットでツイートする" class="fragment"></span><a href="#4%E7%94%9F%E6%88%90%E3%81%97%E3%81%9F%E5%86%8D%E7%94%9F%E3%83%AA%E3%82%B9%E3%83%88%E3%82%92twitter%E3%81%AE%E3%83%9C%E3%83%83%E3%83%88%E3%81%A7%E3%83%84%E3%82%A4%E3%83%BC%E3%83%88%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>4.生成した再生リストをTwitterのボットでツイートする</h2>

<p>　こちらも素直にnugetから <code>CoreTweet</code> をインストールしてAPI叩きます。こっちもTwitterでの開発者登録が必要です。ググってください。</p>

<div class="code-frame" data-lang="c#"><div class="highlight"><pre><code><span class="k">class</span> <span class="nc">TwitterService</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="k">readonly</span> <span class="n">Tokens</span> <span class="n">tokens</span><span class="p">;</span>

    <span class="k">public</span> <span class="nf">TwitterService</span><span class="p">(</span><span class="n">Settings</span> <span class="n">settings</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">tokens</span> <span class="p">=</span> <span class="n">Tokens</span><span class="p">.</span><span class="nf">Create</span><span class="p">(</span>
            <span class="n">settings</span><span class="p">.</span><span class="n">Twitter</span><span class="p">.</span><span class="n">ApiKey</span><span class="p">,</span>
            <span class="n">settings</span><span class="p">.</span><span class="n">Twitter</span><span class="p">.</span><span class="n">ApiSecret</span><span class="p">,</span>
            <span class="n">settings</span><span class="p">.</span><span class="n">Twitter</span><span class="p">.</span><span class="n">AccessToken</span><span class="p">,</span>
            <span class="n">settings</span><span class="p">.</span><span class="n">Twitter</span><span class="p">.</span><span class="n">AccessTokenSecret</span>
        <span class="p">);</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">TweetGeneratedPlaylist</span><span class="p">(</span><span class="kt">string</span> <span class="n">playlistId</span><span class="p">,</span> <span class="kt">string</span> <span class="n">playlistTitle</span><span class="p">,</span> <span class="kt">int</span> <span class="n">videoCount</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">var</span> <span class="n">playlistUrl</span> <span class="p">=</span> <span class="s">$"https://www.youtube.com/playlist?list=</span><span class="p">{</span><span class="n">playlistId</span><span class="p">}</span><span class="s">"</span><span class="p">;</span>

        <span class="kt">var</span> <span class="n">stringBuilder</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StringBuilder</span><span class="p">();</span>

        <span class="n">stringBuilder</span><span class="p">.</span><span class="nf">AppendLine</span><span class="p">(</span><span class="s">$"再生リスト「</span><span class="p">{</span><span class="n">playlistTitle</span><span class="p">}</span><span class="s">」を作成しました。(</span><span class="p">{</span><span class="n">videoCount</span><span class="p">}</span><span class="s">件登録済み)"</span><span class="p">);</span>

        <span class="n">stringBuilder</span><span class="p">.</span><span class="nf">AppendLine</span><span class="p">(</span><span class="s">""</span><span class="p">);</span>
        <span class="n">stringBuilder</span><span class="p">.</span><span class="nf">Append</span><span class="p">(</span><span class="n">playlistUrl</span><span class="p">);</span>

        <span class="k">await</span> <span class="n">tokens</span><span class="p">.</span><span class="n">Statuses</span><span class="p">.</span><span class="nf">UpdateAsync</span><span class="p">(</span><span class="k">new</span>
        <span class="p">{</span>
            <span class="n">status</span> <span class="p">=</span> <span class="n">stringBuilder</span><span class="p">.</span><span class="nf">ToString</span><span class="p">(),</span>
        <span class="p">});</span>
    <span class="p">}</span>    
<span class="p">}</span>
</code></pre></div></div>

<h2>
<span id="感想" class="fragment"></span><a href="#%E6%84%9F%E6%83%B3"><i class="fa fa-link"></i></a>感想</h2>

<p>　バーチャルYouTuberさんたちって日々こんなに動画あげてるのかー、生放送やってるのかーってのを日次で知ることが出来るようになりました。大きな収穫です。めちゃめちゃ多い。なるほど手動じゃ追いきれんわな。</p>

<p>　また、ヘッドレスモードのChromeを用いたクロールやらYouTubeのRSSの取得、再生リストの作成、動画の登録などなど、今まで触ったことのなかった技術やAPIにたくさん触れることが出来て楽しかったです。メモリ512MBのLinux上でヘッドレスモードのChrome動かせるってのが分かったのも収穫。今後のクロール手札が増えました。</p>

<p>　実はもともと非コンテナアプリとしてAzure Functions向けに作ってたのですが、ヘッドレスブラウザを利用する必要が出てきたため断念してコンテナ化。コンテナをAzureで動かすにはまだランニングコスト10円/月とかは難しいって認識で、以前つから使ってたConoHaのVPSに統合する形となりました。Azure Storageを利用しているのはその頃の名残です。知らないAzureのコンテナ動かすサービスありそうだなぁ。。</p>

<p>　ちなみに推しはポン子です。</p>
</div></div></section><div class="css-1yzj1fm"><div class="css-1uv1qiv"><span class="fa fa-twitter"></span></div><div class="css-1uv1qiv"><span class="fa fa-facebook"></span></div></div><div class="apm-Content"><div class="apm-Content_title">Why not register and get more from Qiita?</div><ol class="apm-Content_list"><li>We will deliver articles that match you<div class="description">By following users and tags, you can catch up information on technical fields that you are interested in as a whole</div></li><li>you can read useful information later efficiently<div class="description">By &quot;stocking&quot; the articles you like, you can search right away</div></li><div><a class="apm-Content_help" href="https://help.qiita.com/ja/articles/qiita-login-user" target="_blank"><i class="fa fa-fw fa-arrow-circle-right"></i>What you can do with signing up</a></div></ol><a href="/signup?callback_action=login_or_signup&amp;redirect_to=%2Fkokeiro001%2Fitems%2Fceaf04848101b5065454&amp;realm=qiita" class="apm-Content_button apm-Content_button-signup">Sign up</a><a href="/login?callback_action=login_or_signup&amp;redirect_to=%2Fkokeiro001%2Fitems%2Fceaf04848101b5065454&amp;realm=qiita" class="apm-Content_button apm-Content_button-signin">Login</a></div></div><div class="css-helsa7"></div></div></div></div><div class="css-109dbrr"><div class="css-5jpx49"><div class="css-mnxgyc"><button class=" css-1vlpknv"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/kokeiro001/items/ceaf04848101b5065454/likers" class="css-1iupg5d">4</a></div><div class="css-fsjkhv"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-1b17vb0">4</span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-7i7f4d"><div class="css-1gj7nt">Improve article</div><a href="/drafts/ceaf04848101b5065454/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/kokeiro001/items/ceaf04848101b5065454/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/kokeiro001/items/ceaf04848101b5065454/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/kokeiro001/items/ceaf04848101b5065454/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/kokeiro001/items/ceaf04848101b5065454.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="PersonalArticlePage" data-dom-id="PersonalArticlePage-react-component-f2e79487-3742-44e2-b166-0d419d0ccb0d">{"authorAnalyticsTrackingId":"UA-78749869-3","organizationAnalyticsTrackingId":null}</script>
      
<footer id="globalFooter" class="st-Footer"><div class="st-Footer_container"><div class="st-Footer_start"><div class="st-Footer_logo"><svg viewbox="0 0 426.57 130" xmlns="http://www.w3.org/2000/svg"><circle cx="167.08" cy="21.4" r="12.28" /><path d="M250.81 29.66h23.48v18.9h-23.48z" /><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z" /><circle cx="216.33" cy="21.4" r="12.28" /></svg></div><div class="st-Footer_catchcopy">How developers code is here.</div><div class="st-Footer_socials"><a class="fa fa-twitter" href="https://twitter.com/qiita"></a><a class="fa fa-facebook-square" href="https://www.facebook.com/qiita/"></a></div></div><div class="st-Footer_end"><div class="st-Footer_qiita"><div class="st-Footer_label">Qiita</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="/about">About</a><a href="/terms">Terms</a><a href="/privacy">Privacy</a><a target="_blank" href="http://help.qiita.com/ja/articles/qiita-community-guideline">Guideline</a><a target="_blank" href="https://help.qiita.com/ja/articles/others-brand-guideline">Design Guideline</a></div><div class="st-Footer_column"><a href="/release-notes">Release</a><a href="/api/v2/docs">API</a><a href="/feedback/new">ご意見</a><a href="https://help.qiita.com">Help</a><a target="_blank" href="https://qiita.com/ads?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Advertisement</a></div></div></div><div class="st-Footer_increments"><div class="st-Footer_label">Increments</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="https://increments.co.jp/company/">About</a><a href="https://increments.co.jp/jobs/">採用情報</a><a href="https://blog.qiita.com">Blog</a></div><div class="st-Footer_column"><a href="https://teams.qiita.com/">Qiita Team</a><a href="https://jobs.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Jobs</a><a href="https://zine.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Zine</a></div></div></div></div></div><div class="st-Footer_copyright">© 2011-2021 Increments Inc.</div></footer><div id="Snackbar-react-component-85b8d67d-f30e-491e-8ecb-3d8c7c335301"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="Snackbar" data-dom-id="Snackbar-react-component-85b8d67d-f30e-491e-8ecb-3d8c7c335301">{}</script>
      
<div id="LoginModal-react-component-d18decad-f9ea-481d-856b-1d70e0821a38"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="LoginModal" data-dom-id="LoginModal-react-component-d18decad-f9ea-481d-856b-1d70e0821a38">{}</script>
      
<div id="StockModal-react-component-ef41b9c7-5a24-496c-a84a-49489376b328"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="StockModal" data-dom-id="StockModal-react-component-ef41b9c7-5a24-496c-a84a-49489376b328">{}</script>
      
</div><div id="dataContainer" style="display: none;" data-config="{&quot;actionPath&quot;:&quot;public/items#show&quot;,&quot;settings&quot;:{&quot;analyticsTrackingId&quot;:&quot;UA-24675221-12&quot;,&quot;assetsMap&quot;:{},&quot;csrfToken&quot;:&quot;IM/HzDFu+cnm10MtE6w48XCwKLmUeFg//0Z+vbPxoM4BXfVXgaKa6p1VjWUxEPTMCGOl0bOu1glyQoeOr8AT3w==&quot;,&quot;locale&quot;:&quot;en&quot;},&quot;currentUser&quot;:null}" /></body></html><script type="application/json" data-js-react-on-rails-store="AppStoreWithReactOnRails">{"snackbar":{"type":"","body":"","isActive":false},"article":{"article":{"body":"\n\u003ch1\u003e\n\u003cspan id=\"バーチャルyoutuberが投稿した動画公開した生放送を自動で再生リストに登録してツイートするボットを作った話\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%90%E3%83%BC%E3%83%81%E3%83%A3%E3%83%AByoutuber%E3%81%8C%E6%8A%95%E7%A8%BF%E3%81%97%E3%81%9F%E5%8B%95%E7%94%BB%E5%85%AC%E9%96%8B%E3%81%97%E3%81%9F%E7%94%9F%E6%94%BE%E9%80%81%E3%82%92%E8%87%AA%E5%8B%95%E3%81%A7%E5%86%8D%E7%94%9F%E3%83%AA%E3%82%B9%E3%83%88%E3%81%AB%E7%99%BB%E9%8C%B2%E3%81%97%E3%81%A6%E3%83%84%E3%82%A4%E3%83%BC%E3%83%88%E3%81%99%E3%82%8B%E3%83%9C%E3%83%83%E3%83%88%E3%82%92%E4%BD%9C%E3%81%A3%E3%81%9F%E8%A9%B1\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eバーチャルYouTuberが投稿した動画、公開した生放送を自動で再生リストに登録してツイートするボットを作った話\u003c/h1\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"概要\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%A6%82%E8%A6%81\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e概要\u003c/h2\u003e\n\n\u003cp\u003e　バーチャルYouTuberさんについて広く知りたいけど、いろんなチャンネル、Twitter見て新着動画探すの大変だよー。\u003c/p\u003e\n\n\u003cp\u003e　となったのでバーチャルYouTuberが投稿した動画、公開した生放送を自動で再生リストに登録してツイートするボットを作りました。紹介します。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://twitter.com/vtuber_movies\" rel=\"nofollow noopener\" target=\"_blank\"\u003e日刊VTuber動画(@vtuber_movies)さん | Twitter\u003c/a\u003e\u003cbr\u003e\n\u003ca href=\"https://twitter.com/vtuber_movies\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://twitter.com/vtuber_movies\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e　こんな感じにツイートされます。\u003c/p\u003e\n\n\u003cblockquote class=\"twitter-tweet\"\u003e\n\u003cp\u003e再生リスト「2019年7月14日に投稿されたバーチャルYouTuberの動画・生放送」を作成しました。(119件登録済み)\u003ca href=\"https://t.co/pxGURk5J0J\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://t.co/pxGURk5J0J\u003c/a\u003e\u003c/p\u003e— 日刊VTuber動画 (@vtuber_movies) \u003ca href=\"https://twitter.com/vtuber_movies/status/1150557735697539072?ref_src=twsrc%5Etfw\" rel=\"nofollow noopener\" target=\"_blank\"\u003e2019年7月15日\u003c/a\u003e\n\u003c/blockquote\u003e\n\n\u003cp\u003e　アイコン絶賛募集中です。\u003c/p\u003e\n\n\u003cp\u003e　ざっくり下記の流れでプログラムが動きます。\u003c/p\u003e\n\n\u003col\u003e\n\u003cli\u003eバーチャルYouTuberのチャンネル一覧をクロールして取得する\u003c/li\u003e\n\u003cli\u003eYouTubeのチャンネルRSSにアクセスして新着動画を取得する\u003c/li\u003e\n\u003cli\u003eYouTubeのAPI叩いて再生リストを生成、動画を登録する\u003c/li\u003e\n\u003cli\u003e生成した再生リストをTwitterのボットでツイートする\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003cp\u003e　GitHubで公開済みです。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://github.com/kokeiro001/YouTubeNotifier\" rel=\"nofollow noopener\" target=\"_blank\"\u003ekokeiro001/YouTubeNotifier\u003c/a\u003e\u003cbr\u003e\n\u003ca href=\"https://github.com/kokeiro001/YouTubeNotifier\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://github.com/kokeiro001/YouTubeNotifier\u003c/a\u003e\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"使用技術概要\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E4%BD%BF%E7%94%A8%E6%8A%80%E8%A1%93%E6%A6%82%E8%A6%81\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e使用技術概要\u003c/h3\u003e\n\n\u003cp\u003e　だいたいこの辺の技術使って実現しました。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eC# / VsialStudio / .NET Core 2.2\u003c/li\u003e\n\u003cli\u003eDocker\u003c/li\u003e\n\u003cli\u003eChrome / Selenium\u003c/li\u003e\n\u003cli\u003eGoogle API\u003c/li\u003e\n\u003cli\u003eTwitter API\u003c/li\u003e\n\u003cli\u003eAzure Storage\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"1バーチャルyoutuberのチャンネル一覧をクロールして取得する\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#1%E3%83%90%E3%83%BC%E3%83%81%E3%83%A3%E3%83%AByoutuber%E3%81%AE%E3%83%81%E3%83%A3%E3%83%B3%E3%83%8D%E3%83%AB%E4%B8%80%E8%A6%A7%E3%82%92%E3%82%AF%E3%83%AD%E3%83%BC%E3%83%AB%E3%81%97%E3%81%A6%E5%8F%96%E5%BE%97%E3%81%99%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e1.バーチャルYouTuberのチャンネル一覧をクロールして取得する\u003c/h2\u003e\n\n\u003cp\u003e　そもそもどんなバーチャルYouTuberさんが動画投稿、生放送を実施しているか知る必要があります。自動で。\u003c/p\u003e\n\n\u003cp\u003e　今回はVtuber Insightさんのデータをクロールして利用させていただくことにしました。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://vtuberinsight.com/\" rel=\"nofollow noopener\" target=\"_blank\"\u003eVtuber Insight\u003c/a\u003e\u003cbr\u003e\n\u003ca href=\"https://vtuberinsight.com/\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://vtuberinsight.com/\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e　さて、このサイト。チャンネル名やチャンネルのIDを取得できるのですがWebSocketを用いて実現しています。普段Webページからのデータ取得、クロールには適当なHttpClientを用いてGetやらPostで取得しているのですがWebSocketではそうも行きません。\u003c/p\u003e\n\n\u003cp\u003e　そこで、今回はヘッドレスモードのChrome＋Seleniumを用いてざっくり下記のようにデータを取得しました。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003easync\u003c/span\u003e \u003cspan class=\"n\"\u003eTask\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"nf\"\u003eGetPageSource\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003edriverPath\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"/opt/selenium/\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003edriverExecutableFileName\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"chromedriver\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eoptions\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eChromeOptions\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eoptions\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAddArguments\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"headless\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eoptions\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAddArguments\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"--disable-gpu\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eoptions\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAddArguments\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"no-sandbox\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eoptions\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAddArguments\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"--window-size=1,1\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eoptions\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAddArguments\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"--disable-desktop-notifications\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eoptions\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAddArguments\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"--disable-extensions\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eoptions\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAddArguments\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"--blink-settings=imagesEnabled=false\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eoptions\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eBinaryLocation\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"/opt/google/chrome/chrome\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eservice\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eChromeDriverService\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eCreateDefaultService\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003edriverPath\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003edriverExecutableFileName\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003edriver\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eChromeDriver\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eservice\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eoptions\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eTimeSpan\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eFromSeconds\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e60\u003c/span\u003e\u003cspan class=\"p\"\u003e)))\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003edriver\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eManage\u003c/span\u003e\u003cspan class=\"p\"\u003e().\u003c/span\u003e\u003cspan class=\"nf\"\u003eTimeouts\u003c/span\u003e\u003cspan class=\"p\"\u003e().\u003c/span\u003e\u003cspan class=\"n\"\u003eImplicitWait\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eTimeSpan\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eFromSeconds\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e5\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"n\"\u003edriver\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eManage\u003c/span\u003e\u003cspan class=\"p\"\u003e().\u003c/span\u003e\u003cspan class=\"n\"\u003eWindow\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eMinimize\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eurl\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e@\"https://vtuber-insight.com/index.html\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n        \u003cspan class=\"n\"\u003edriver\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eNavigate\u003c/span\u003e\u003cspan class=\"p\"\u003e().\u003c/span\u003e\u003cspan class=\"nf\"\u003eGoToUrl\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eurl\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n        \u003cspan class=\"c1\"\u003e// WebSocket経由のデータ取得のため適当に20秒ほど待つ\u003c/span\u003e\n        \u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e20\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e--)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"n\"\u003elog\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eInfomation\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e$\"** Wait \u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e seconds for web socket\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eawait\u003c/span\u003e \u003cspan class=\"n\"\u003eTask\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eDelay\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eTimeSpan\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eFromSeconds\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003edriver\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ePageSource\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e　Chromeの起動時オプションでいろいろな機能を無効にしてます。このプログラムはConoHaのメモリ512MBのVPSで動かしてるのですが、少なくとも画像読み込まないようにしないとメモリ使い潰してしまいます。多分headlessにした時点で無効になってるパラメータもあって、重複して無効にしようとしているオプションあるんだろうなとは思います。が、動いてるのでおｋ．気が向いたらしっかりドキュメント読みつつ検証します。\u003c/p\u003e\n\n\u003cp\u003e　DockerイメージにChrome/Seleniumをインストールするにあたっては下記リポジトリを参考にさせていただきました。こっちのDockerファイルもあまり理解しないままほぼ丸コピしてるだけなので気が向いたらしっかり読みます。\u003c/p\u003e\n\n\u003cp\u003e\u003cqiita-embed-ogp src=\"https://github.com/devpabloassis/seleniumdotnetcore/blob/master/Dockerfile\"\u003e\u003c/qiita-embed-ogp\u003e\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"2youtubeのチャンネルrssにアクセスして新着動画を取得する\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#2youtube%E3%81%AE%E3%83%81%E3%83%A3%E3%83%B3%E3%83%8D%E3%83%ABrss%E3%81%AB%E3%82%A2%E3%82%AF%E3%82%BB%E3%82%B9%E3%81%97%E3%81%A6%E6%96%B0%E7%9D%80%E5%8B%95%E7%94%BB%E3%82%92%E5%8F%96%E5%BE%97%E3%81%99%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e2.YouTubeのチャンネルRSSにアクセスして新着動画を取得する\u003c/h2\u003e\n\n\u003cp\u003e　次はVtuber Insightから取得したYouTubeのチャンネルIDを用いて、それぞれのチャンネルにアクセスして新着動画を取得していきます。\u003c/p\u003e\n\n\u003cp\u003e　新着動画を取得するにあたって、実現方法は大きく２パターンを想定していました。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e1.YouTubeのAPIを叩いて動画を取得する\u003c/li\u003e\n\u003cli\u003e2.YouTubeチャンネルのRSSにアクセスして動画を取得する\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e　はじめは素直に1で実装していました。任意の期間に投稿された動画をAPIリクエストに入れられたのでそもそも実現も楽そうでしたし、何より「普通こっちだよなぁ」みたいな直感があったので。\u003c/p\u003e\n\n\u003cp\u003e　が、YouTubeのAPIのクォータを消費してしまうことがわかったため辞めました。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://developers.google.com/youtube/v3/getting-started?hl=ja#quota\" rel=\"nofollow noopener\" target=\"_blank\"\u003eYouTube Data API の概要  |  YouTube Data API (v3)  |  Google Developers\u003c/a\u003e\u003cbr\u003e\n\u003ca href=\"https://developers.google.com/youtube/v3/getting-started?hl=ja#quota\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://developers.google.com/youtube/v3/getting-started?hl=ja#quota\u003c/a\u003e\u003c/p\u003e\n\n\u003cblockquote\u003e\n\u003cp\u003eYouTube Data API では、デベロッパーが目的どおりにサービスを使用できることと、不当にサービス品質を低下させたり他のリソースへのアクセスを制限したりしてしまうアプリケーションの作成を防ぐことを目的としてクォータを使用します。\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003cp\u003e　動画取得のためにAPIを叩いてしまうと、このプログラムの本命である「再生リストに動画を登録する」APIを叩いてる際にクォータを消費しきってしまい、新着動画を登録しきれなくなることが判明しました。(この利用上限を開放するためには英語による手続き、審査が必要なので面倒臭い。。)\u003c/p\u003e\n\n\u003cp\u003e　そこで、クォータを消費しないRSSを用いて新着動画を取得することにしました。下記のようなURLでそれぞれのチャンネルのRSSにアクセスできます。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eurl\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e$\"https://www.youtube.com/feeds/videos.xml?channel_id=\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003echannelId\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e　取得後、自分でRSSをパースする手間が増えますがこれでいくらチャンネル情報を取得してもクォータ利用制限で死ななくなります。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003eList\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eYouTubeRssItem\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"nf\"\u003eGetRssItems\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003echannelId\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eurl\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e$\"https://www.youtube.com/feeds/videos.xml?channel_id=\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003echannelId\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003elist\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eList\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eYouTubeRssItem\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;();\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003exmlReader\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eXmlReader\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eCreate\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eurl\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003efeed\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eSyndicationFeed\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eLoad\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003exmlReader\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eforeach\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eitem\u003c/span\u003e \u003cspan class=\"k\"\u003ein\u003c/span\u003e \u003cspan class=\"n\"\u003efeed\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eItems\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003emovieUri\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eitem\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eLinks\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eFirst\u003c/span\u003e\u003cspan class=\"p\"\u003e().\u003c/span\u003e\u003cspan class=\"n\"\u003eUri\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003emovieId\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003emovieUri\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eQuery\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSubstring\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n            \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eyoutubeRssItem\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eYouTubeRssItem\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"n\"\u003eUrl\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003emovieUri\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eToString\u003c/span\u003e\u003cspan class=\"p\"\u003e(),\u003c/span\u003e\n                \u003cspan class=\"n\"\u003eVideoId\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003emovieId\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                \u003cspan class=\"n\"\u003eTitle\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eitem\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eTitle\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eText\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                \u003cspan class=\"n\"\u003ePublishDateUtc\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eitem\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ePublishDate\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eDateTime\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e};\u003c/span\u003e\n\n            \u003cspan class=\"n\"\u003elist\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAdd\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eyoutubeRssItem\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003elist\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e　自分用のコードはガンガンハードコードするマン。\u003c/p\u003e\n\n\u003cp\u003e　ちょっとクォータ使用してないことに抜け道感はありますが、おそらくYouTubeのサーバー的にもRSSへのアクセスのが低負荷でそんなに悪い子としてないと自分を信じ込ませましょう。現在読み込むチャンネル数は300にしていますが、適当にディレイ挟みながらアクセスしてるのでそこまでしんどくないはず。300って数字は気分で決めました。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"3youtubeのapi叩いて再生リストを生成動画を登録する\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#3youtube%E3%81%AEapi%E5%8F%A9%E3%81%84%E3%81%A6%E5%86%8D%E7%94%9F%E3%83%AA%E3%82%B9%E3%83%88%E3%82%92%E7%94%9F%E6%88%90%E5%8B%95%E7%94%BB%E3%82%92%E7%99%BB%E9%8C%B2%E3%81%99%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e3.YouTubeのAPI叩いて再生リストを生成、動画を登録する\u003c/h2\u003e\n\n\u003cp\u003e　素直にnugetから \u003ccode\u003eGoogle.Apis.YouTube.v3\u003c/code\u003e をインストールしてAPI叩いていきます。この辺のAPI使うにはGoogleの開発者登録必要です。必要に応じて登録してください。\u003c/p\u003e\n\n\u003cp\u003e　今回作ったプログラムは一日に一回cronで起動し「昨日の再生リスト」を生成することを想定していますが、作ろうとしている名前と同名の再生リストをがあったら新規作成しない、既に登録済みの動画があった場合は登録しない、という制御を自前で入れています。自分で制御しないと重複した名前の再生リスト作ったり、同じ再生リストに同じ動画が複数入ったりするので注意が必要です。デバッグ中は何度も実行するので、この辺の制御入れとかないと手動で消す羽目になります(n敗)。\u003c/p\u003e\n\n\u003cp\u003e　また、しっかり受け取るパラメータをFieldプロパティで明示して制限しないとあっという間にクォータ上限いっちゃって次の日までデバッグできないのも注意です(n敗)。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003easync\u003c/span\u003e \u003cspan class=\"n\"\u003eTask\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;(\u003c/span\u003e\u003cspan class=\"n\"\u003ePlaylist\u003c/span\u003e \u003cspan class=\"n\"\u003eplaylist\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eList\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003evideoIds\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u0026gt;\u003c/span\u003e \u003cspan class=\"nf\"\u003eGetOrInsertPlaylist\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003eplaylistTitle\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"n\"\u003elog\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eInfomation\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e$\"GetOrInsertPlaylist playlistTitle=\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003eplaylistTitle\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003elistPlaylistRequest\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eyoutubeService\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ePlaylists\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eList\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"id,snippet\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"n\"\u003elistPlaylistRequest\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eMine\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"n\"\u003elistPlaylistRequest\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eMaxResults\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e50\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"n\"\u003elistPlaylistRequest\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eFields\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"items/id,items/snippet/title\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"n\"\u003elog\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eInfomation\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"listPlaylistRequest.ExecuteAsync\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003elistPlaylistResponse\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003eawait\u003c/span\u003e \u003cspan class=\"n\"\u003elistPlaylistRequest\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eExecuteAsync\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eplaylist\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003elistPlaylistResponse\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eItems\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWhere\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eSnippet\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eTitle\u003c/span\u003e \u003cspan class=\"p\"\u003e==\u003c/span\u003e \u003cspan class=\"n\"\u003eplaylistTitle\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eFirstOrDefault\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eplaylist\u003c/span\u003e \u003cspan class=\"p\"\u003e!=\u003c/span\u003e \u003cspan class=\"k\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003evideoIds\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003eawait\u003c/span\u003e \u003cspan class=\"nf\"\u003eGetPlaylistItemVideoIds\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eplaylist\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eplaylist\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003evideoIds\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e// not found playlist. insert playlist.\u003c/span\u003e\n    \u003cspan class=\"n\"\u003elog\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eInfomation\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e$\"NotFound playlistTitle=\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003eplaylistTitle\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n    \u003cspan class=\"n\"\u003elog\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eInfomation\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e$\"InsertPlayList \u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003eplaylistTitle\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003einsertPlaylistRequest\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eyoutubeService\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ePlaylists\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eInsert\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003ePlaylist\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eSnippet\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003ePlaylistSnippet\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eTitle\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eplaylistTitle\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e},\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eStatus\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003ePlaylistStatus\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"n\"\u003ePrivacyStatus\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"public\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e},\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e},\u003c/span\u003e \u003cspan class=\"s\"\u003e\"snippet,status\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n    \u003cspan class=\"n\"\u003einsertPlaylistRequest\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eFields\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"id,snippet/title\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"n\"\u003elog\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eInfomation\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"insertPlaylistRequest.ExecuteAsync\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003einsertPlaylistResponse\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003eawait\u003c/span\u003e \u003cspan class=\"n\"\u003einsertPlaylistRequest\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eExecuteAsync\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003einsertPlaylistResponse\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eList\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;());\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\n\u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003easync\u003c/span\u003e \u003cspan class=\"n\"\u003eTask\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eList\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026gt;\u003c/span\u003e \u003cspan class=\"nf\"\u003eGetPlaylistItemVideoIds\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ePlaylist\u003c/span\u003e \u003cspan class=\"n\"\u003eplaylist\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003epageToken\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003edefault\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003elist\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eList\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;();\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003edo\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eplaylistItemsRequest\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eyoutubeService\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ePlaylistItems\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eList\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"snippet\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eplaylistItemsRequest\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eFields\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"items/snippet/id\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eplaylistItemsRequest\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ePageToken\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003epageToken\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eplaylistItemsRequest\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ePlaylistId\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eplaylist\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eId\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eplaylistItemsRequest\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eMaxResults\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e50\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eplaylistItemsResponse\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003eawait\u003c/span\u003e \u003cspan class=\"n\"\u003eplaylistItemsRequest\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eExecuteAsync\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003evideoIds\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eplaylistItemsResponse\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eItems\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSelect\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eId\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n        \u003cspan class=\"n\"\u003elist\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAddRange\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003evideoIds\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n        \u003cspan class=\"n\"\u003epageToken\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eplaylistItemsResponse\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eNextPageToken\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e \u003cspan class=\"k\"\u003ewhile\u003c/span\u003e \u003cspan class=\"p\"\u003e(!\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eIsNullOrEmpty\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003epageToken\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003elist\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e　余談ですが小規模な趣味開発では「GetOrInsertPlaylist」みたいな複数の関心事をモリモリやらせてるんだろうなぁ！みたいなメソッドを躊躇せず作ります。小規模で誰にも引き継がないプロジェクトであれば結局そっちのが実装が早くかつメンテナンスしやすいと思ってます。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"4生成した再生リストをtwitterのボットでツイートする\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#4%E7%94%9F%E6%88%90%E3%81%97%E3%81%9F%E5%86%8D%E7%94%9F%E3%83%AA%E3%82%B9%E3%83%88%E3%82%92twitter%E3%81%AE%E3%83%9C%E3%83%83%E3%83%88%E3%81%A7%E3%83%84%E3%82%A4%E3%83%BC%E3%83%88%E3%81%99%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e4.生成した再生リストをTwitterのボットでツイートする\u003c/h2\u003e\n\n\u003cp\u003e　こちらも素直にnugetから \u003ccode\u003eCoreTweet\u003c/code\u003e をインストールしてAPI叩きます。こっちもTwitterでの開発者登録が必要です。ググってください。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eTwitterService\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003ereadonly\u003c/span\u003e \u003cspan class=\"n\"\u003eTokens\u003c/span\u003e \u003cspan class=\"n\"\u003etokens\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003eTwitterService\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eSettings\u003c/span\u003e \u003cspan class=\"n\"\u003esettings\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003etokens\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eTokens\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eCreate\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n            \u003cspan class=\"n\"\u003esettings\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eTwitter\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eApiKey\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"n\"\u003esettings\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eTwitter\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eApiSecret\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"n\"\u003esettings\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eTwitter\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eAccessToken\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"n\"\u003esettings\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eTwitter\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eAccessTokenSecret\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003easync\u003c/span\u003e \u003cspan class=\"n\"\u003eTask\u003c/span\u003e \u003cspan class=\"nf\"\u003eTweetGeneratedPlaylist\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003eplaylistId\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003eplaylistTitle\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003evideoCount\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eplaylistUrl\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e$\"https://www.youtube.com/playlist?list=\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003eplaylistId\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003estringBuilder\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eStringBuilder\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n        \u003cspan class=\"n\"\u003estringBuilder\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAppendLine\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e$\"再生リスト「\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003eplaylistTitle\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e」を作成しました。(\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003evideoCount\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e件登録済み)\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n        \u003cspan class=\"n\"\u003estringBuilder\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAppendLine\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"n\"\u003estringBuilder\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAppend\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eplaylistUrl\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003eawait\u003c/span\u003e \u003cspan class=\"n\"\u003etokens\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eStatuses\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eUpdateAsync\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003enew\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"n\"\u003estatus\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003estringBuilder\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eToString\u003c/span\u003e\u003cspan class=\"p\"\u003e(),\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e});\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e    \n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"感想\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%84%9F%E6%83%B3\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e感想\u003c/h2\u003e\n\n\u003cp\u003e　バーチャルYouTuberさんたちって日々こんなに動画あげてるのかー、生放送やってるのかーってのを日次で知ることが出来るようになりました。大きな収穫です。めちゃめちゃ多い。なるほど手動じゃ追いきれんわな。\u003c/p\u003e\n\n\u003cp\u003e　また、ヘッドレスモードのChromeを用いたクロールやらYouTubeのRSSの取得、再生リストの作成、動画の登録などなど、今まで触ったことのなかった技術やAPIにたくさん触れることが出来て楽しかったです。メモリ512MBのLinux上でヘッドレスモードのChrome動かせるってのが分かったのも収穫。今後のクロール手札が増えました。\u003c/p\u003e\n\n\u003cp\u003e　実はもともと非コンテナアプリとしてAzure Functions向けに作ってたのですが、ヘッドレスブラウザを利用する必要が出てきたため断念してコンテナ化。コンテナをAzureで動かすにはまだランニングコスト10円/月とかは難しいって認識で、以前つから使ってたConoHaのVPSに統合する形となりました。Azure Storageを利用しているのはその頃の名残です。知らないAzureのコンテナ動かすサービスありそうだなぁ。。\u003c/p\u003e\n\n\u003cp\u003e　ちなみに推しはポン子です。\u003c/p\u003e\n","createdAt":"2019-07-15T05:10:38Z","elapsedYearsFromLastModifiedAt":2,"encryptedId":"XvyO5YRbae2ZIlTRWonJT8g5fsxRhHmQ--F2UwtLWDn2tHt/Db--POKwlN3g6PEfll5SEaud4g==","isBanned":false,"isDeprecated":true,"isDestroyableByViewer":false,"isEditRequestReadableByViewer":true,"isEditRequestSendableByViewer":true,"isLikableByViewer":true,"isLikedByViewer":false,"isPublic":true,"isSlide":false,"isStockableByViewer":true,"isStockedByViewer":false,"isSubscribableByViewer":false,"isSubscribedByViewer":false,"isUpdatableByViewer":false,"isUpdated":true,"lastModifiedAt":"2019-07-15T05:23:05Z","likesCount":4,"linkUrl":"https://qiita.com/kokeiro001/items/ceaf04848101b5065454","organization":null,"originalId":968349,"stockedCount":4,"title":"バーチャルYouTuberが投稿した動画、公開した生放送を自動で再生リストに登録してツイートするボットを作った話","toc":"\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%90%E3%83%BC%E3%83%81%E3%83%A3%E3%83%AByoutuber%E3%81%8C%E6%8A%95%E7%A8%BF%E3%81%97%E3%81%9F%E5%8B%95%E7%94%BB%E5%85%AC%E9%96%8B%E3%81%97%E3%81%9F%E7%94%9F%E6%94%BE%E9%80%81%E3%82%92%E8%87%AA%E5%8B%95%E3%81%A7%E5%86%8D%E7%94%9F%E3%83%AA%E3%82%B9%E3%83%88%E3%81%AB%E7%99%BB%E9%8C%B2%E3%81%97%E3%81%A6%E3%83%84%E3%82%A4%E3%83%BC%E3%83%88%E3%81%99%E3%82%8B%E3%83%9C%E3%83%83%E3%83%88%E3%82%92%E4%BD%9C%E3%81%A3%E3%81%9F%E8%A9%B1\"\u003eバーチャルYouTuberが投稿した動画、公開した生放送を自動で再生リストに登録してツイートするボットを作った話\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E6%A6%82%E8%A6%81\"\u003e概要\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E4%BD%BF%E7%94%A8%E6%8A%80%E8%A1%93%E6%A6%82%E8%A6%81\"\u003e使用技術概要\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#1%E3%83%90%E3%83%BC%E3%83%81%E3%83%A3%E3%83%AByoutuber%E3%81%AE%E3%83%81%E3%83%A3%E3%83%B3%E3%83%8D%E3%83%AB%E4%B8%80%E8%A6%A7%E3%82%92%E3%82%AF%E3%83%AD%E3%83%BC%E3%83%AB%E3%81%97%E3%81%A6%E5%8F%96%E5%BE%97%E3%81%99%E3%82%8B\"\u003e1.バーチャルYouTuberのチャンネル一覧をクロールして取得する\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#2youtube%E3%81%AE%E3%83%81%E3%83%A3%E3%83%B3%E3%83%8D%E3%83%ABrss%E3%81%AB%E3%82%A2%E3%82%AF%E3%82%BB%E3%82%B9%E3%81%97%E3%81%A6%E6%96%B0%E7%9D%80%E5%8B%95%E7%94%BB%E3%82%92%E5%8F%96%E5%BE%97%E3%81%99%E3%82%8B\"\u003e2.YouTubeのチャンネルRSSにアクセスして新着動画を取得する\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#3youtube%E3%81%AEapi%E5%8F%A9%E3%81%84%E3%81%A6%E5%86%8D%E7%94%9F%E3%83%AA%E3%82%B9%E3%83%88%E3%82%92%E7%94%9F%E6%88%90%E5%8B%95%E7%94%BB%E3%82%92%E7%99%BB%E9%8C%B2%E3%81%99%E3%82%8B\"\u003e3.YouTubeのAPI叩いて再生リストを生成、動画を登録する\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#4%E7%94%9F%E6%88%90%E3%81%97%E3%81%9F%E5%86%8D%E7%94%9F%E3%83%AA%E3%82%B9%E3%83%88%E3%82%92twitter%E3%81%AE%E3%83%9C%E3%83%83%E3%83%88%E3%81%A7%E3%83%84%E3%82%A4%E3%83%BC%E3%83%88%E3%81%99%E3%82%8B\"\u003e4.生成した再生リストをTwitterのボットでツイートする\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E6%84%9F%E6%83%B3\"\u003e感想\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n","totalPv":2504,"uuid":"ceaf04848101b5065454","banReason":null,"adventCalendarItem":null,"author":{"encryptedId":"IkKO+8MfwZoZ0pKqglFkK6nh+lE=--yXGO9n46QtMHLKJ3--4E1ZaC1013TaNTmY0x+0Gg==","originalId":93212,"description":"VRエンジニア。お酒とプログラミングとC#とVisualStudioと.NETが好き。","facebookUrl":null,"githubUrl":"https://github.com/kokeiro001","isBlockingViewer":false,"isFollowableByViewer":true,"isFollowedByViewer":false,"isTweetWebNotificationReceivable":true,"linkedinUrl":null,"name":"","profileImageUrl":"https://qiita-image-store.s3.amazonaws.com/0/93212/profile-images/1486294639","profileImageUrlW48":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F93212%2Fprofile-images%2F1486294639?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=48\u0026s=168729d5626dd46fb0a766eae7397db5","profileImageUrlW75":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F93212%2Fprofile-images%2F1486294639?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=11f2f94ec08172c0819831feffbd6540","urlName":"kokeiro001","websiteUrl":"http://kokeiro.hatenablog.com/","twitterUrl":"https://twitter.com/kokeiro0_00","twitterUrlName":"kokeiro0_00","revealedOrganizations":{"edges":[]}},"tags":[{"name":"Chrome","urlName":"chrome"},{"name":"C#","urlName":"csharp"},{"name":"Twitter","urlName":"twitter"},{"name":"Docker","urlName":"docker"},{"name":"YouTube","urlName":"youtube"}],"followingLikers":{"edges":[]},"comments":{"totalCount":0}},"comments":[],"client":null,"ads_event_emitter":null}}</script>
