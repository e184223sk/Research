More than 3 years have passed since last update.１時間前まで　コンピュータ囲碁やってた気もするんだが、コンピュータ将棋ソフトに切り替えよう。なるほど……、最近どんな騒ぎがあったのか知らないのかツッコミたいところだが　わたしには関係ない。まず　わたしの環境なんだがぱっと思いつくところではだが Webサーバー を立てないといけない気もする。があればいいんだろうか？　将棋ソフトって　マルチユーザーに対応しているのか？キューとか要るんじゃないか？とりあえず１人用でいいか。ローカル環境でテストもしたいし、Windows上でLinux を動かすバーチャルなあれなんて名前だったか……。思い出せないや、ググって出てくる バーチャルボックスを調べておこう。まず　ローカルに　テスト環境を構築しよう。あとで記事を続ける。Windows 10 で Virtual Box を導入できるだろうか。ググって読んでおこう。参照 : 「WindowsでVirtualBoxを使用してLinux（Ubuntu）を動作させる手順と設定」 (俺の開発研究所) http://itmemo.net-luck.com/virtualbox-ubuntu/とりあえず　浮かむ瀬　のソースはダウンロードしておこう。参照 : 「第4回将棋電王トーナメント version (for Windows 64bit) (出場ソフト名「浮かむ瀬」)」 (Aperyopen source shogi engine) http://hiraokatakuya.github.io/apery/Antec の CORE i3 なんだが、[F2][F10][F12][F8][Del] で BIOS が出てこなかった。
USBポートを左上の方に挿してみて [Del][F6] もやってみたが BIOS は出てこなかった。もうちょっと調べてみる。無ければ無いで……。そういえば、自宅の開発PCのBIOS　今まで見たことないな。用意された さくらVPS 物理サーバー1台 の 2週間無料 ページを見る。
http://vps.sakura.ad.jp/標準OSが「Ubuntu14.04 amd64 / Ubuntu16.04 amd64」か。じゃあもう Ubuntu インストールされてるや。ざっくり言って、コンピューターと言うのは　無制限に使うことより　制限して使う方に　発展している。
それもこれも　人類はガイア理論のような超個体ではなく、群集生物で１個体が利己的にリソースを使うからだが……。で、コンピューターのリソースを使う人は　ユーザー・アカウント　を開設する。直訳すると口座でこの日本語はお金の出入り口の場所ぐらいの意味で分かりやすいんだが、account も何か count という語が入ってるし、接頭辞 ac- って何かと調べると「～の方へ」ぐらいの意味のようだ。ユーザー・アカウントはもう用意されていた。
掴みどころとしてはの３つを聞いて控えておくと、コンピューターに入る（ログイン）こともできるし、ファイル（データ）を送ることもできる。
家に入って　送った荷物が届くようなものだ。そういえば　ログ　というのは足跡のようなもので、いつコンピューター（家）に入ったかとか、コンピューターに入って何をしたかとか、最後にファイルを開いたのは誰か、とか残されていくんだが、コンピューターに入ることを　ログイン　と呼ぶのも興味深い。Teratarm という寺さんが作ったターミナルでログインしようかと思ったんだが、（へぇ、今はコミュニティが開発を後継しているのか）
開発PCのランチャーに PuTTY のアイコンがあったので PuTTY で接続してしまった。接続プロトコルのタイプは SSH だ。なんかセキュリティーが高いんだろうぐらいしか分からないが「SSHだ」と言われたら SSH を選ぶしかない。こっちが好きなものを選べます、というやつじゃない。PuTTYがなんかセキュリティ警告を出しているが気にせず [はい(Y)] を選んで入る。ユーザー名に root と入れてパスワード叩いて Linux に入れね、とか思ってたんだが　聞いてみると ルート・ユーザーでは入れないらしい。
そういえばなんか su コマンドとかあった気もする。Windows 10 だって 自分のアカウントで入ってから右クリックして「管理者権限で実行」を選んだりもする。なんかもう就活で Linuxの実務経験があります というのは止めておこう。ぜんぜんダメだ。ls ぐらいしか覚えてないんだが　ぶーたれているとsudo su -というコマンドを教えてくれたので使ってみる。
パスワードを聞かれるので入れる。とりあえず root ユーザーになったんじゃないか。これで 権限 というのが大きくなったので、何か役立つだろう。と叩く。何にも出ねー。と叩く。. で始まる名前のファイルがいっぱい出てくる。隠しファイルばっかりか。
フォルダーや、隠しじゃないファイルは無いようだ。とか適当にフォルダーを切ってみる。shogi フォルダー無ぇ～。ここは　どこなんだ。うわ、どこにいたのか分からなくなった。 home フォルダーにいたのかと思ったんだがなんかおかしい。root フォルダーにいたんじゃないか？ふむ……。 shogi フォルダーがあるな。
こんな root とかいう分けわかんないとこにフォルダーは要らないや。消しとこ……。よし。将棋ソフトはどこに デプロイメント（すぐ使えるように用意しておくこと。引っ越しでダンボール箱を引っ越し先に届けて箱を開けるところまで全部やろうという気分に似ている）すればいいんだ？「各ディレクトリの役割を知ろう（ルートディレクトリ編） (1/2)」 (@ IT)
http://www.atmarkit.co.jp/ait/articles/0108/07/news002.htmlbin に入れるにしては　将棋ソフトはコマンドな気はしない。なんか機能が巨大な気もするし、
root フォルダーなんか外からバンバン利用されるものを置いてていいのか分からんし、
lib というには　共有するソフトという気分でもない。
じゃあ etc か。設定ファイルじゃないし……。じゃあ無難に home へ。home ディレクトリの下に 自分のアカウント名のフォルダーがあるのでさらにその下へ。ファイルの転送に失敗した、ぶーたれていると教えてくれた。そうだ Linux にはパーミッションがあったんだ！パーミッション（ファイルの利用許可範囲の設定）は d:ディレクトリ の rwx、r-x、r-xで、
r:読取、w:書込、x:実行、-:権限なし　という権限で、３つ並んでるんだが何だったか。「第2回 「パーミッションの意味と使い分け」」 (MdN Design Interactive)
http://www.mdn.co.jp/di/articles/2104/?page=2「所有者」「グループ」「その他」の３つが並んでるらしい。グループなんて使ったことないな。
うーむ、外からファイルを転送してこようと思ったら「その他」に書き込み権限 w を付けた方がいいんだろうか？はい、おっけ。あれ？　日本語の抽象度がおかしいぜ。もう一度。よし。
具体的には、よし。
なんか　この日本語の抽象性と具体性の使い分けができないと、会話をしている相手が　ファミコンのスーパーマリオが谷間に転落したあとに　飛び出してきたときのような　反応をすることがある。もちろん　わたしには　そんな会話力なんか無いぜ。あ、そうそう。サーバーからログアウトしよう。なんか２回打たないとダメだった。
（※2017-03-06 追記: サーバーからexitして、PuTTYからexitしているようだ。コマンドは exit 2連打でOK)ここで　用事でおでかけだ。帰ってから記事を続ける。続き。ログイン後の画面を見るとと書いてある。と打ち込んだらいいのだろうか。
なんかパスワードを尋ねられたり、[yN] の入力を促されたりする。なんか ポートを '1022' にしろ、みたいに書いてるけど無視して進める。更新には several hour かかる、とか書いてある……、だったら　お出かけ前に更新しておけばよかった……。と思ったら　[yN] をよく尋ねられるし　ＰＣから離れられない。
そして　system will be restarted. という文字を見かけるが　システムが再起動される様子もない。
どうもタイムアウトして接続が切れたらしい。接続しなおすと　メッセージが変わっていた。じゃあ　更新は終わったのだろうか。でパスワード入力して rootユーザーに切り替える。ふむ。どっちかがソースで、どっちかがバイナリだ。どっちもソースじゃないか？　よくわからん。tar.gz の方を解凍できないだろうか。unzip コマンドはインストールされてないか、パスが通ってないみたいなので、コマンドを試してみる。今度は unzip コマンドを叩けるようだ。と何かエラーらしきメッセージが返ってきている。じゃあ .zip の方を unzip してみる。
何か動いているようだ。apery-SDT4 ディレクトリーが作られたのか。多分、ソースが展開されたのではないか。このソースをコンパイルできないか。g++4.8以上というのが何なのか調べてみよう。「g++」(C++)
http://kaworu.jpn.org/cpp/g++ややこしい名前だ……。まず ubuntu に g++ が入っているか検索する。
上記Ｗｅｂサイトからをマウスのドラッグでコピーして、PuTTY へ右クリックで貼り付け。
なんか文字がいっぱい出力されて流れていった。なんなのかわからない。「g++をUbuntuへインストールする」 (C++)
http://kaworu.jpn.org/cpp/g++%E3%82%92Ubuntu%E3%81%B8%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%99%E3%82%8B一番新しいバージョンに飛びつくぜ。インストールは終わったのだろうか。コマンドを打ってみる。もう g++ はインストールできたんじゃないか。C言語はコンパイルの手続きを Makefile に書くと思うんだが g++ はどうか。「Makefileの書き方」 (Web就活日記)
http://yut.hatenablog.com/entry/20120702/1341185909浮かむ瀬 の Makefile は apery-SDT4/src/Makefile にあるようだ。Makefile のあるディレクトリまで　カレントを移動。違うのか……。コマンドが多すぎて分からん。「自動化のためのGNU Make入門講座 - Makefileの基本：ルール
Document 」 (オブラブ)
http://objectclub.jp/community/memorial/homepage3.nifty.com/masarl/article/gnu-make/rule.htmlなんか動き出した。
出力の一部分を見てみると、と書いているので、ディレクトリを１つ上がったところの obj ディレクトリに　中間ファイル（.o）はできているのだろう。ところで Linux って .exe ファイルの代わりに何ができるのか？ コマンド？うん？リストの先頭にある apery、あれ、フォルダーじゃなくて 実行ファイルなんじゃないか？パーミッションに x が付いている。実行できるんじゃないか？何がダメなのか……。「lsっぽいコマンドを作る」 (碧色工房)
http://www.mm2d.net/main/prog/linux/ls-08.html実行可能なファイルなんじゃないのか……。「ubuntu初心者です。 端末でプログラムの実行を」 (YAHOO!JAPAN知恵袋)
http://detail.chiebukuro.yahoo.co.jp/qa/question_detail/q1356985753おっ、なんか処理が返ってこずにブロックされたぜ。バックグラウンドで動かせばいいんじゃないか？[Ctrl] + [C] でも押しとけば止まるんじゃないか。止まった。じゃあ、バックグラウンドで実行するには。「【Linux】ジョブのバックグラウンド実行」 (Qiita)
http://qiita.com/fujitetsu/items/665413e0dc8b0cc3b6edQiitaからQiitaへの記事ぐらい　なんか　WordPress みたいに　かっこいいリンクに差し替えてくれたらいいのにｗｗｗｗｗ
コマンドの末尾に &amp; を付けるといいらしい。ほう。じゃあ、apery に話しかけれるのだろうか？ 牛とか。「図解：標準入力、標準出力、標準エラー出力、パイプとは ?」 (Linux)
http://www.creatology.jp/unix/outin.html違うのか。「（２−５）複数のコマンド間で標準入出力を共有し，連携するためには，パイプを用いる。」 (Linux上でシェルが実行される仕組みを，体系的に理解しよう　（bash 中級者への道）)
http://language-and-engineering.hatenablog.jp/entry/20110617/p1じゃあ　パイプ（縦棒）でつないでみよう。おっ！ Apery と会話でけたな！だが　ちょっと待ってほしい。とても気になるぜ。これって、デバッグ・モードでコンパイルしたエイプリーなんじゃないか？
デバッグ・モードでない方法でコンパイルしてくれる方法を調べよう……。apery-SDT4 の usi.cpp を見ると、と書いている。 NDEBUG というプリプロセッサ・マクロ を make に指定できれば ukamuse_SDT4 君になってくれると思うんだが……。
Makefile ファイルにはという記述を　よく見かける。 -D と NDEBUG なのだろう。どうやって利用するのか？「Makefileの書き方」 (Web就活日記)
http://yut.hatenablog.com/entry/20120702/1341185909じゃあ、こうか。うーむ。何が起こったのか。そういえば　Apery Debug Build 君をバックグラウンドで起動しっぱなしだったな。「【 stop 】 バックグラウンドのジョブを停止する」 (ITPro)
http://itpro.nikkeibp.co.jp/article/COLUMN/20060227/230891/あらー。いつのまに止まっていたのか。よし。よし。作り直した。ダメじゃないかｗｗｗｗこれなら　いけるのか。しかしベンチマークが走り出して時間がかかりすぎる。あるいは　最適化のために、わざと走らせているのか。2回目の make publish をしようとしたらとか言われて止まってしまう。とでもすればいいのか？objディレクトリの中を空っぽにしてくれたみたいだ。よし、またコンパイルが走り出した。うまくいかないものだ。apery を bin フォルダーに移動するとどうだろうか？よし。どこか壊してしまったのか、評価ファイルが無いかなのだろうか？うん？ Makefile に何か書いてるぞ。コメントアウトしてるよなあ。頭に # が付いてるし。じゃあ、こんどはコンパイルできたか？よし！どうも　このとき、私はコピペをしようとして [Ctrl] + [C] を押していて、プロセスを落としている気がする。
やりなおし。PuTTYでは、マウスドラッグでなぞるだけで　コピーはできるのだ。
左ボタンクリックで貼り付け。うーむ、こういう使い方じゃないのか？これも違う。ソースコードを読んでいるんだが、そういや、きふわらぷりーを作っているとき、.exe と一緒のフォルダーに benchmark.sfen ファイルが無かったら落ちてたなあ。ある。じゃあ、apery と benchmark.sfen を bin フォルダーに持っていけばいいのだろうか？これでどうか？だめなのか。Killed と Stopped の違いはなんだろうか。大樹の枝を改悪した　きふわらぷりー　だと、まず Kifuwarapery.exe をダブルクリックしてコマンドプロンプトを出し、
しばらく待って入力できる状態になってから bench と入力して[Enter]キーを押すとベンチマークが走り出す。浮かむ瀬も同じかと思うんだが……。のあと、すぐ Killed になっているんじゃないだろうか？aperyのmain.cppにあるmain関数はなので、 コマンド・ループで止まっていてくれると思うんだが……、調べてみるか。うーむ。Windowsの実行と、Linuxの実行に違いはあるのだろうか。うーむ。よく Killed が出てくるようになった。この Stopped が溜まっているのはいいのだろうか？「バックグラウンドプロセス(ジョブ)の管理Add Star」 （satake7’s memo）
http://d.hatena.ne.jp/satake7/20080606/p1こうだろうか。Stopped が Terminated に変わったが、なんのこっちゃ。
この調子で全部のジョブをkillした。だめか。これは　うまくいったんじゃないか？だめか。なんのこっちゃ。今までよりは　反応があるだけマシか。どうも、メインループからすぐ抜けてしまうのか、Stopped になってしまうようだ。きふわらぷりーは　どうやって動いてるのか　調べてみよう……。評価ファイルを作る make_synthesized_eval.sh みたいなファイルを .bat に書き直して 20151105 フォルダーに KPP_synthesized.bin、KK_synthesized.bin、KKP_synthesized.bin の３つのバイナリを生成している。調べよう。ukamuse_sdt4.zip というバイナリもあるみたいだ。なんだこれ。FileZilla で Linuxサーバー へ転送して unzip してみよう。inflating:
とか
creating:
とか出てくるが何だろうか。あら、ukamuse_sdt4 にも src が入っている。そして .bin の中には exe も入っているが、Linux で使うのだろうか？20161007 フォルダーの中にはと、いろいろ入っている。じゃあ ukamuse_sdt4 フォルダーの中で Linux用にコンパイルし直したらいいのだろうか？じゃあ src ディレクトリーでなんか CPU が対応してないんじゃないか。これならコンパイルが通る。これでどうか。よし、ループでブロック（ループを抜けない）されてる感じがする。[Ctrl]+[C]で抜ける。数秒でループを抜けたようだ。よく分からない。これでしばらく待つ。
なんも起こらない。だめか。src/evaluate.cpp ファイルには と書いているので、フォルダー名は合っているのだろう。
じゃあ次は src ディレクトリでを実行。今度は bench が実行された。テスト用の局面に対して　読み筋がどんどん並んでいる。Done じゃないんだが……。常駐してほしいんだが……。「○自作プログラムをデーモンとして起動させる」
http://7ujm.net/linux/daemon.html将棋プログラムは　デーモンなのか？のあと 右キーか何か押したら bench が走った。どういうことなのか。bench と入れると bench が走るんだが、usi と入れても走らない。何が違うのか。eval はオッケーなのか。print はダメなのか。key はオッケーなのか。tosfen はオッケーなのか。d もオッケーなのか。printはダメなのに。s もいける。t もいける。b もいける。あーっ。print は 学習用のコマンドか。あっ、時間かかりそう。 [Ctrl]+[C]。setoption もいけてそう。isready もいけてるじゃないか。usi もいけてるじゃないか。じゃあ、手動で対局できるか調べてみるか。もう一度最初から。私が打つ次、浮かむ瀬が返してくる。次、わたしが打つ。次、浮かむ瀬が返してくる。脳内で将棋盤をいじくる。1g1f というのは　１六歩　だが、なんで端歩を突くのか。
じゃあ　１四歩　としよう。なんか 浮かむ瀬がノータイムで返してくる。なぜ　ノータイムなのか。とりあえず　浮かむ瀬とは指せるようだ。
じゃあ終了しよ……。
私が打つ。あとは設定をいじろう。学習の用途とかで 0.02 秒で返すようにしてあるんだろうか。
コンピューターに１秒で指させるんなら、通信にかかる時間に３秒ぐらいとっておきたいが要件定義を満たさないので、0.5 秒ぐらい思考させるか。これを usinewgame の前に思考エンジンに送ってやればいいんだろうか？うむ、0.5秒以上は考えているようだ、飛車先の歩を伸ばしているから　大丈夫そうだ。これだけ見ると……。ループ待機している浮かむ瀬の、標準入力をシェル・スクリプトか何かに、標準出力を同じくシェル・スクリプトか何かにして、キャッチボールができればいいんだが、将棋所にできるんだし、やる方法はあるんだろう……。あるいはそれこそ C++ でもいいのかもしれないが……、できれば PHP と連携したい。どういう方法があるかは　また今度考えよう。打鍵で 浮かむ瀬と 標準入出力通信ができたのだから、シェルにもできるだろう。
調べよう。ググると　ぱっと見　bash　しか出てこない。じゃあ bash で。エディターは Ubuntu には gedit が最初からインストールされているので、という説もあったが わたしのにはインストールされていなかったので、わたしの環境で最初からインストールされている nano でいいや……。「シェルスクリプト入門 書き方のまとめ」 (Memo on the Web)
http://motw.mods.jp/shellscript/tutorial.html[Ctrl]+[O]tamesi1 で名前を付けて保存。おっ、テキストに色が付いた。[Ctrl]+[X]で nano エディターを終了。パーミッションがあるのか。じゃあとかでいいんだろうか？ 無理。ルート権限がいるのか。おっ、いけた。
じゃあ bin フォルダーの中でシェル・スクリプトを書くか。あっ！　こっちじゃないや。.exe ファイルとか置いてあるんだが、Ubuntu じゃ使わないだろ……、消しておくか。テキストエディタに書いてコピー、PuTTY で左クリックで貼り付け、[Enter]キー１回で全部終わり。じゃあ、こんな風に書けばいいんだろうか？まずは bench で試し。これも PuTTY へ右クリックで貼り付け。保存して nano 終了。待機ループに入ったようだが、bench を入力するのが早すぎるのだろうか？手入力すると行ける。数秒待機してから bench を入力するようにした方がいいのか？[Ctrl]+[C] でブロックを抜ける。「【 sleep 】 指定された時間，停止する」 (ITPro)
http://itpro.nikkeibp.co.jp/article/COLUMN/20060227/230884/?rt=nocntじゃあ、浮かむ瀬起動から 10秒待ってから bench と入力するようにしよう。nano で編集して、コマンドラインで実行。ブロックされている。じゃあ、書き方が違うのか。こうか。ブロックされたままだが……。 ./apery の行でブロックしているんじゃないか？　だったら。
これでどうか？ビンゴ！　いけた。
じゃあ、sleep とか要るのだろうか？これでもいけた。じゃあ、bench はこれで。お出かけのあと追記する。PuTTY に IPアドレスを入れて SSHプロトコルでログイン。
ユーザー名とパスワードを入れる。またパスワードを入れる。よし。tamesi2 ファイルを作ってみよう。この　浮かむ瀬　の出力を　シェル・スクリプトで受け取るには　どうすればいいのか？
テキスト・ファイルを経由すれば、それはできそうだが……？「関数の使用方法」 (UNIX &amp; Linux コマンド・シェルスクリプト リファレンス)
http://shellscript.sunone.me/function.htmlこれは関数の例か。リダイレクトで変数に渡せないものか。「コマンドの実行結果を変数に設定する」 (UNIX &amp; Linux コマンド・シェルスクリプト リファレンス)
http://shellscript.sunone.me/variable.html#コマンドの実行結果を変数に設定するへぇ。ほう。$( ) の方はネストも可能らしい。なんのこっちゃ分からんが　使うこともあるかもしれない。
じゃあ　こうか。うーむ。うーむ。うーむ。「【 複数の変数を連結する 】」 (ITPro)
http://itpro.nikkeibp.co.jp/article/COLUMN/20060228/231154/おーっ！C#言語とかなら簡単なのに……。bashスクリプトではどうやるんだ。「【bash】行ごとに処理する」 (Qiita)
http://qiita.com/kazu56/items/83340a2e284298b9e237cat コマンドって何だ？「【Linuxコマンド集】3分でわかるcat コマンドの使い方」 (エンジニアの入り口)
http://eng-entrance.com/linux_command_catふーん。引数で指定したファイルの内容を標準出力へ１行ずつ出力するのか。
じゃあ、試しに。あれ！ せっかく変数で受け取ったのに、ファイル経由だと意味ないじゃないか。
じゃあ、これでどうか？tamesi4やっべ、PuTTY での日本語フォント表示が怪しいぜ。読めるからいいか……。なんだこりゃ。文字 n で改行されているのでは……？
区切り文字の行頭に # を付けて、いったんコメントアウトしてみよう。ホワイトスペース全部　区切り文字なのか。試しに \n をダブルクォーテーションで囲んでみよう。だめ。だめ。だめ。文字 t まで消えた。だめ。だめ。だめ。「bashのIFSに改行のみを設定するには」 (計算機と戯れる日々)
http://d.hatena.ne.jp/n9d/20090313/1236912316いけた。じゃあ、ひとまず１行ずつには区切れた。
次は、区切った１行を　半角スペースで区切りたい。ループをネストすると　区切り文字指定　のリセットの手間が増えそうなので、
行分割した結果は配列に入れて　別ループにしたい。「bash 配列まとめ」 (Qiita)
http://qiita.com/b4b4r07/items/e56a8e3471fb45df2f59なんだこの、ややこしいの。
可変長配列の作り方が分からない。
分割すると同時に、配列で取得することはできるだろうか？「BashでStringから配列に変換してfor文で回す」 (くらげになりたい。)
http://wannabe-jellyfish.hatenablog.com/entry/2015/01/10/004554'''array_text=(echo $text)
'''やってみよう。あれ？ 今まで　シングル・クォーテーションと　バック・クォーテーションを間違えていたのだろうか？これの間違いなんじゃないか？うわ、なんか　出力がおかしい。こうか。区切り文字は echo でも設定しないといけないのか……？あれ、tamesi5 が掴まれたままみたいだ。止めてはみたが。うーむ。ロック・ファイルが残っているんじゃないか？　消していいのだろうか。tamesi5 編集。これでどうか。なんか出力結果が１行につながってしまった。
じゃあ、配列への要素追加を使ってみよう。うーむ。「bashとかshで配列を扱う。」 (自分の仕事を憎むには人生は余りにも短い)
http://garapon.hatenablog.com/entry/20100129/1264780520sh には配列が無いので、 bash を使うのがいいらしい。
じゃあファイルの冒頭をからに変更する。１行だけ返ってきた。
配列の要素数を確認しよう。うーむ。
こうか。配列に分割するところまではいけたのだろうか。「配列のデータを参照する」 (Qiita)
http://qiita.com/b4b4r07/items/e56a8e3471fb45df2f59じゃあ、こうか。よし！これでどうか？いけてるか。１行を分割して配列に入れる部分は　サブルーチンにして切り出そう。よし、意図した通りには動いてるだろ。サブルーチン化した嬉しみが少ないが……。ここで、各行の１単語目（１トークン目）を見ると-id
-option
-usiokのいずれかであることが分かるだろう。ここで取り合えず id と option は無視して、usiok があるかどうかだけ調べるルーチンを書こう。usiok があれば、浮かむ瀬に isready という文字列を送るものとする。テキストの 1行目を取得するには、「How do I read first line using cat」 (stack overflow)
http://stackoverflow.com/questions/6114119/how-do-i-read-first-line-using-catを使えばいいのだろうか。head コマンドの動作確認をしてみよう。ファイルじゃないとダメなんじゃないだろうか？「【 文字列を抜き出す「cut」 】」 (ITPro)
http://itpro.nikkeibp.co.jp/article/COLUMN/20060228/231159/うーむ。
シェルのコマンドは　ほとんど　標準入出力　を介すのだろうか。
だったら　素直に　ファイルを経由した方がいいのか？
書き直してみよう。echo は複数行は出力してくれないんだろうか？とりあえず 最初のトークンは取れるものの、すっきりしない。bash じゃなくて、将棋所相当のプログラムを C# で書いて 浮かむ瀬 は別プロセスで動かして通信したらいいんじゃないか。じゃあ、mono をインストールした方がいいのか？LinuxではC#は人気ないのか。「Compiling Mono on Linux」 (Mono)
http://www.mono-project.com/docs/compiling-mono/linux/こんなコマンド叩いたらいいんだろうか？なんか動いた。じゃあ、どんどん進んでいこう。もうインストール終わった。
じゃあ C#言語で ハローワールドを書いてみるか。nano は C# 書いても色ついてくれないのか。どうやってコンパイルするんだ。
というか　いつまで　コマンドラインなんだ。GUI は入れるべきか。だめだ、行数が多すぎる。おっ、バージョン 4 が入ったぜ。助かるぜ。「csc.exe を使用したコマンド ラインからのビルド」 (MSDN)
https://msdn.microsoft.com/ja-jp/library/78f4aasd.aspxC# のコンパイラは csc なのだろうか？入ってないし……。「Xamarinの基盤となっている「Mono」と、C#コンパイラー「mcs」」 (buildinsider)
http://www.buildinsider.net/mobile/insidexamarin/02C# のコンパイラは mcs なのだろうか？.exe なんかできているが、Linuxで動くのか？へぇ！C#のMakefile とか書けるのだろうか……。じゃあ、ひとまず、標準入力で "usi" が飛んできて、"usiok" を返すというサンプル・プログラムを組んでみるか。tamesi9じゃあ、あー、コマンドライン引数と　標準入力は　違うのか。
じゃあ、そうか。
じゃあ、こうか。よし。よし。あらっ。あらら。
[Ctrl]+[C]あーそうか、switch文 で break しても switch文 を抜けるだけで for文 を抜けないんだ。こう。こんどは　うまくいった。じゃあ、このプログラムをバックグラウンドで走らせられるだろうか。この、Stopped というのが分からない。[Ctrl]+[C]なんということだ。どういう理屈だ。switch文に次の１行を足してはどうか？だめか。ReadLine() を止めて、Read() にしてみる。うーむ、-1 って何だ。
じゃあ、-1 は省いて。ところでいままで、出力が入力と被っているところがあった。これ　だめなんじゃないだろうか。さて、今度はどうか。反応が返ってこない。
どういう待機状態なのか。どうも、標準入力は１回しか効かないのか？ １回出力すると、２回目の入力は効かないとかルールでもあるのだろうか？ 別のメソッドを使ってみよう。うーむ。null を弾くとどうか？もう入力は効かない。無限ループで待機できないのだろうか？
別の書き方も試してみる。入力側のバッファーがフラッシュされてないのか。「自プロセスの標準入出力」 (SMDN)
http://smdn.jp/programming/netfx/standard_streams/0_console/「C#で競技プログラミングをし続ける人のためのTips」 (Qiita)
http://qiita.com/Camypaper/items/de6d576fe5513743a50eじゃあ、異なる入力があるまで無視するように書き換えてみよう。はいっ、ビンゴ！ えーっ！ なんでそんなバグ残ってんだ。何それ！「How to install mono on ubuntu 64-bit v14.04?」 (Ubuntu)
http://askubuntu.com/questions/497358/how-to-install-mono-on-ubuntu-64-bit-v14-04これやってみるか。インストールが終わると、挙動が変わったｗｗｗｗひとまずこれで。コンパイルしなおして、フォア・グラウンドで実行すると、想定した挙動になる。これを、バックグラウンドで待機させておいて、バックグラウンドで動いているプロセスの標準入力に向かって文字を投げれないだろうか。そんなことをしたら [Ctrl]+[C] も効かなくなって　入力は将棋サーバーに吸い込まれていくようになってしまった。PuTTY を強制終了させてセッションを落としてもいいのだろうか？何ごともなく　静かなコンソール画面に再ログインすることができた。おっ、Running なんか初めて見た。また　固まったんだが。画面にと表示されてるだけで、キー入力はできるのか。今 Running している方の ./tamesi10.exe に標準入力を送れないものか。なんか分からないがやってみよう。「What is the difference between Ctrl-z and Ctrl-c in the shell?」 (ask ubuntu)
http://askubuntu.com/questions/510811/what-is-the-difference-between-ctrl-z-and-ctrl-c-in-the-shell[Ctrl]+[Z]ストップして　コマンド・プロンプトが戻ってきたぜ。ほう。戻ってきた。[Ctrl]+[Z]ほう。ジョブID が分かってるんだったら手動で「fg 番号」して入力できるが……。
わたしが通信したいんじゃなくて、コンピューター同士に双方向通信させたいんだが、
２つのプロセスを起動させておいて、シェル・スクリプトで fg と bg を使えばいいのだろうか？ポートを開いてソケット通信したらダメなのか……？　なんだろう、この難しい操作。とりあえず　将棋サーバーは　ポートを開いてバックグラウンドで走らせておいたらいいんじゃないか。じゃあ、ウェブ・アプリケーション・サーバーは、ポートを開いている実行プログラムに向かって、文字列を投げる方法があるのか調べてみよう。「socket_create_listen」 (PHPマニュアル)
http://php.net/manual/ja/function.socket-create-listen.phpソケットの接続を確立したあとの処理はどうするのか？「fsockopen」 (PHPマニュアル)
http://php.net/manual/ja/function.fsockopen.phpつなぎに行く方は　これでいいんだが。「PHP でサーバソケットプログラミング (1)」 (Rainy Day Codings)
http://rainyday.blog.so-net.ne.jp/2007-02-17サーバーの待ち受け側は　これでいいか。じゃあ、PHPが動くようにセットアップするか。
レンタル・サーバーの環境は　どうなってたっけ。「料金・サービス仕様」 (SAKURA internet)
http://solution.sakura.ad.jp/windows_vps/specification.htmlApache や PHP のバージョンは自分で調べろということか。おおっ、PHP 7 だ。なんか --version という引数は無さげ。apache2 は 2.4.18 か。じゃあ、PHPの設定とか　もう終わってんの？ 試してみるか。ブラウザで開いて URLでアクセスすればいいわけなんだが、外に開かれているんだろうか？
ブラウザのURL欄に入れてみる。でた。このフォルダーはどこなのか？ Linux のフォルダ構成はよく分からんが、ググろう。「Ubuntu serverApache」 (Yamamoto's Laboratory)
http://www.yamamo10.jp/yamamoto/comp/home_server/ubuntu_server/apache/index.phpページは /var/www/index.html みたいな感じであるんだろうか？調べてみよう。ひゅーっ！/var/www/html/index.html何かある。
ソースの中身をみたんだが　気に入らないタグ打ちだぜｗｗｗｗｗどうも　これは　トップ階層じゃないみたいだ。なんか　外からは FileZilla で転送できない。パーミッションを w に変えていいのだろうか？
変えないと作業が進まない。chmod する。で、ブラウザで開いても PHP は効いてないみたいだ。未設定なのか。「【PHP】PHPをインストールしたらやっておきたい設定」 (Qiita)
http://qiita.com/knife0125/items/0e1af52255e9879f9332etc フォルダーに設定ファイルが入っているのか。etc フォルダーの下には php と php5 ディレクトリがある。 php5 ではないと思うが。/etc/php/7.0/cli ディレクトリの中に php.ini があった。あれっ？「PHPの設定」 (Sakura VPS マニュアル)
http://www.xn--vps-073b3a72a.com/10.htmlわたしの渡されたフォルダー構成と異なるぜ。設定したあとで渡されたんだろうか。と叩けば httpデーモンが開始されるのだろうか。いろいろ　さっぱり状況が分からんな……。「7.　WEBサーバーの設定」 (Sakura VPS マニュアル)
http://www.xn--vps-073b3a72a.com/7.html「STEP.3：WEBページをアップしよう」 (Sakura VPS マニュアル)
http://www.xn--vps-073b3a72a.com/8.htmlさくらVPSのホームページのデフォルトの階層は var/www/html になります。あれま！いじったところを　元に戻そう。多分、なんか、わたしに渡された状態では apache2 と php7.0 は入ってたけど、全然　設定されてない気がする。
かといって　アン・インストール／再インストール　したら　なんか設定されているのが　消えてしまうかもしれない。現状を知らない。Apache 入ってるんだが、リスタート掛けてみるか。「UbuntuでApacheを再起動する方法・コマンド」 (MiuxMiu)
http://www.miuxmiu.com/archives/2010/03/03/ubuntu_apache_restart_command.htmlなんか　すぐ再起動したな。Apache はいて、PHP とは連携してないのだろう。Apacheの It's works とかいうデフォルトページは html フォルダーの下に見えるんだが、そうか、DNS 設定してないから　こんなサブ・ディレクトリでページを見ているんだった。いろいろ　コメントアウトされているので、そのコメントを解除していく作業だ。php.ini のバックアップを取っておく。名前は適当に php.ini.original としておいた。を、頭のセミコロンを外して、ディレクトリも次のように変えた。次に、は、頭のセミコロンを外した。次に、は、次のように変えた。次に、は、次のように変えた。次に、は、次のように変えた。次に、を、次のように変えた。「「expose_php = off」の設定」（エンジニア足立のコーディング日記）
https://www.deep-deep.jp/blog_engineer/archives/3793このあと、FileZilla で設定ファイルをサーバーに転送し……パーミッションはその都度ルート・ユーザーで変えて、
PuTTY で次のようにコマンドを叩く。何か　インストールされていないなあ。説明と全然一致しない。インストールした。分からん。Apache を再起動するのは、できるんだが。じゃあ次のように叩くと？init.d ディレクトリに httpd コマンドはあるのだろうか？無い。ハイパー・テキスト・トランスファー・プロトコル無い。「Can't find httpd.conf」 (ask ubuntu)
http://askubuntu.com/questions/652095/cant-find-httpd-confダメー。index.phpこの内容がそのまま表示されてしまう。じゃあ、HTMLならどうなのか？ HTML は表示されている。とコマンドラインに打っても何も起こらない。現状の環境が使い物にならないので　インストールからやり直そう。「PHPの設定」 (さくらのVPS 設定マニュアル)
http://www.sakura-vps.net/php-settings-for-sakura-vps/「【初心者向け】PHPがブラウザで正しく表示されない時の対処」 (n2p blog)
https://n2p.co.jp/blog/tech/serverside/php-donot-display/これは動いている。じゃあ、phpinfo() を実行してみよう。
表示されるようだ。じゃあ、パーミッションか？html は見れるしなあ。apache の設定に php が書かれていないのだろうか？ブラウザで開くとがそのまま表示されている。「PHPが実行されずコメントアウトになる」 (teratail)
https://teratail.com/questions/34508じゃあ、php5 を削除するか。「php5.5とかphp5.6をインストールする」 (Qiita)
http://qiita.com/ykyk1218/items/c859870ef8dac79f5e1c一致しないようだ。無料だと PHPは使えないとかないだろうか。「UbuntuサーバからPHP5.6を完全に削除」 (エンジニア足立のコーディング日記)
https://www.deep-deep.jp/blog_engineer/archives/4168完全に削除する場合動かない。設定ファイルだけ残す場合動いた。が、 0 ばっかりか。コマンドラインからは php は動かせるので、apache の設定だと思うが。「モジュール(php7_module)の追加と拡張子(.php)の登録」 (Admin Web)
https://www.adminweb.jp/apache/php/index1.htmlhttpd.conf が無いので、/etc/apache2/apache2.conf を開いてみよう。説明と全然ちがう。パス「Ubuntu で apache の設定。まとめ。」 (freefielder.jp)
http://freefielder.jp/blog/2012/12/ubuntu-apache.html/etc/apache2/mods-available/php5.conf を探す。
ある。
あるんだが php5 という名前でいいのか。と書いてあるところの頭に # を付け足すことにする。
アパッチを再起動。ブラウザに変化なし。「ubuntu 16.04 インストール(6) apache, php」 (kashiの日記)
http://verifiedby.me/adiary/086うーむ、関係なさげ。「【Ubuntu】PHP 5.6 を PHP 7 へアップグレード」 (Sukohi's tech blog!!)
http://sukohi.blogspot.jp/2016/01/ubuntuphp-56-php-7.html移動。/etc/apache2/mods-enabledPHP5 関係は無さそう。etc/php5 というディレクトリがある。削除する。アパッチを再起動する。これでもダメ。httpd.conf はどこにあるんだろう。「PHP7.0をApache2.4にインストール＠ウィンドウズ10」 (weblog)
http://weblog.4141.biz/?p=359Windows の設定なので合わない。「ubuntu apatche２ でhttpd.confの内容はど」 (YAHOO!JAPAN知恵袋)
http://detail.chiebukuro.yahoo.co.jp/qa/question_detail/q1419833899/etc/apache2/mods-available ディレクトリに、php5 のファイルがあるので削除してみる。アパッチを再起動する。これでもダメ。ダメ。「Apache 2.x (Unixシステム用)」 (PHPドキュメント)
http://php.net/manual/ja/install.unix.apache2.php違う。「Debian GNU/Linux へのインストール」 (PHPドキュメント)
http://php.net/manual/ja/install.unix.debian.phpうーむ、何かエラーが出ている。アパッチを止めると、サイトにアクセスできなくなっている。アパッチを再開させると、サイトにはアクセスできるが、PHPはソースがそのまま出力されている。「PHPスクリプトを利用する」 (server world)
https://www.server-world.info/query?os=Debian_8&amp;p=httpd&amp;f=3「aptitudeをインストールする(Ubuntu 10.10 11.04 64bit)」 (upp)
http://www005.upp.so-net.ne.jp/develop-tom/ub/aptitude-ub.htmlインストールできただろうか？今度は動いている。220行目あたりに追記とのこと。ダメ。エラーが出ている。「PHP + Apacheのインストール - Debian」 (Linux入門)
http://webkaru.net/linux/debian-php-apache-install/エラーが出ている。エラーが出ている。PHP が無いということか。「Debian（jessie）にPHP 7をインストールする方法」 (約束の地)
http://obel.hatenablog.jp/entry/20160311/1457644814インストールする。php 指定で PHP7 相当らしい。ひとまず PHP7 はインストールした。「Debian 完全にApache2をアンインストールし、再インストールする」 (SE'S BOOK)
https://viewse.blogspot.jp/2011/02/debian-apache2.htmlまず、関連するパッケージを文字列検索する。見つけたパッケージを削除するこれで apache 関連のパッケージを削除した。
次に PHPに関連するパッケージを文字列検索する。見つけたパッケージを削除するこれで apache 関連のパッケージを削除した。次に再インストールする。アパッチを起動させてみる。404 Not Found になったが、代わりに html フォルダーではなく、その上の階層にアクセスすると
It works! のページが出た。index.php は相変わらずソースがそのまま出ている。220行目あたりに追記とのこと。アパッチを再起動する。PHP はソースのまま出ている。「PHPスクリプトを利用する」 (Server World)
https://www.server-world.info/query?os=Ubuntu_16.04&amp;p=httpd&amp;f=3PHP をインストールする。アパッチを再起動する。じゃあ決め手は、このあたりか。途中でディレクトリ階層も変わった。「HTTPを使うソケット通信」 (rsch)
http://www.rsch.tuis.ac.jp/~mizutani/online/software-basic2002/socket-http.htmlサーバー側が欲しいんだが。「【CakePHP】リクエストの取得方法」 (Qiita)
http://qiita.com/kazu56/items/7d344ccef56deef66a7aひとまず PHP でGETクエリー文字列を取得してみるか。みたいな感じで。なんだこれ、ダメだぜ。「クエリ文字列の全体を取得する。」 (php pro)
http://www.phppro.jp/qa/1572「urldecode」 (PHPマニュアル)
http://php.net/manual/ja/function.urldecode.php例えばこんな感じ。tamesi1.phpで、サーバー側でプログラムが動いているとして、どうやって　この文字列を渡すのか？
ポート番号が開いているとして、書き込めばいいのか？ PHP でできるだろうか？「exeからphpにデータを渡す」 (teratail)
https://teratail.com/questions/55331プロセス間通信を調べてみるか。「メッセージキューの使い方(CとPHPでプロセス間通信)」 (Linux Install Memo)
https://linux.yebisu.jp/memo/630メッセージ・キューというのもあるのか。とりあえず C# 側から調べてみよう。「C# メッセージキューにメッセージを送信する」 (ITLAB51.COM)
http://www.itlab51.com/?p=4111ウィンドウズの検索ボックスに「コンピューターの管理」と入れる。[サービスとアプリケーション] - [メッセージ キュー] - [専用キュー]今は空だが、ここに　メッセージを置けるらしい。
あとで使ってみよう。「C# メッセージキューからメッセージを受信する」 (ITLAB51.COM)
http://www.itlab51.com/?p=4173先に　メッセージ・キューを作成しないとダメみたいだ。「C# メッセージキューに専用キューを作成する」 (ITLAB51.COM)
http://www.itlab51.com/?p=2322よし、Windowsでは確認できた。C# サンプルプログラムUbuntu でも試してみよう。「「○○○.dllを参照に追加します」の意味は？」 (DOBON.NET)
http://dobon.net/vb/dotnet/help/addreference.html「/reference」 (MSDN)
https://msdn.microsoft.com/ja-jp/library/2b07fd84(v=vs.100).aspxじゃあ、こんな感じでいいのか？まあ、 .dll 無いよな。どうするのか……。「System messaging dll missing?」 (stack overflow)
http://stackoverflow.com/questions/13409342/system-messaging-dll-missingこうか。行けた！？なんのこっちゃ～。「None of the specified endpoints were reachable」 (stack overflow)
http://stackoverflow.com/questions/32432018/none-of-the-specified-endpoints-were-reachableシングルトンで解決するのか？「Linux のメッセージキュー (IPC)」 (楽吾楽, Repeat myself)
http://blogs.yahoo.co.jp/ichi0346/34314386.htmlうーむ、エラーが出るぜ。＜その２＞へ


