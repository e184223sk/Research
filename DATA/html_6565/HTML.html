<!DOCTYPE html><html><head><meta charset="utf-8" /><title>コンピュータ将棋ソフトとの対局サーバーを立てよう＜その１＞ - Qiita</title><meta content="width=device-width,initial-scale=1,shrink-to-fit=no,viewport-fit=cover" name="viewport" /><meta content="#55c500" name="theme-color" /><meta content="XWpkTG32-_C4joZoJ_UsmDUi-zaH-hcrjF6ZC_FoFbk" name="google-site-verification" /><meta content="telephone=no" name="format-detection" /><link rel="canonical" href="https://qiita.com/muzudho1/items/af3537d36f16c063a572" /><link href="/manifest.json" rel="manifest" /><link href="/opensearch.xml" rel="search" title="Qiita" type="application/opensearchdescription+xml" /><link as="script" href="https://www.googletagservices.com/tag/js/gpt.js" rel="preload" /><link href="https://securepubads.g.doubleclick.net" rel="preconnect" /><script async="" src="https://www.googletagservices.com/tag/js/gpt.js"></script><meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="JlUya9HC8h513tjsvYv6+pb5y2SuDhw1IjUMOgcCeC4BFA3fjM1RZ6HL3fHgopp1Iu+EXCTcLmq1Ujj6Y0NS0Q==" /><link rel="shortcut icon" type="image/x-icon" href="https://cdn.qiita.com/assets/favicons/public/production-c620d3e403342b1022967ba5e3db1aaa.ico" /><link rel="apple-touch-icon" type="image/png" href="https://cdn.qiita.com/assets/favicons/public/apple-touch-icon-ec5ba42a24ae923f16825592efdc356f.png" /><link rel="stylesheet" media="all" href="https://cdn.qiita.com/assets/public/article-2eaa7dbedc42a8ea65c722cda46d0ebb.min.css" /><script src="https://cdn.qiita.com/assets/public/v3-article-bundle-63de2d91fef827269d3f6b958db2335b.min.js" defer="defer"></script><meta name="twitter:card" content="summary_large_image"><meta content="@Qiita" name="twitter:site" /><meta content="@muzudho1" name="twitter:creator" /><meta property="og:type" content="article"><meta property="og:title" content="コンピュータ将棋ソフトとの対局サーバーを立てよう＜その１＞ - Qiita"><meta property="og:image" content="https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0&amp;w=1200&amp;mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND00NEt6NDRPejQ0T1U0NE9sNDRPODQ0S181YkNHNXFPTDQ0Szk0NE9WNDRPSTQ0R280NEd1NWEtLTViR0E0NEsxNDRPODQ0T1E0NE84NDRLUzU2dUw0NEdtNDRLSTQ0R0c3N3ljNDRHZDQ0R3U3N3lSNzd5ZSZ0eHQtY29sb3I9JTIzMzMzJnR4dC1mb250PUhpcmFnaW5vJTIwU2FucyUyMFc2JnR4dC1zaXplPTU0JnR4dC1jbGlwPWVsbGlwc2lzJnR4dC1hbGlnbj1jZW50ZXIlMkNtaWRkbGUmcz1lOGRhN2VjNzFlZTQzNGJmZDVmM2RkODU4NGFhM2UwYw&amp;mark-align=center%2Cmiddle&amp;blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RRzExZW5Wa2FHOHgmdHh0LWNvbG9yPSUyMzMzMyZ0eHQtZm9udD1IaXJhZ2lubyUyMFNhbnMlMjBXNiZ0eHQtc2l6ZT00NSZ0eHQtYWxpZ249cmlnaHQlMkNib3R0b20mcz0yNzBmM2IxNzA3MjZjZWFjNGMyNjg1YTgwYTdjMjY5Ng&amp;blend-align=center%2Cmiddle&amp;blend-mode=normal&amp;s=1630734c84421e8e82c7730de04492d8"><meta property="og:description" content="１時間前まで　コンピュータ囲碁やってた気もするんだが、コンピュータ将棋ソフトに切り替えよう。


要件定義


URL叩いたら指し手を返してほしい。1秒以内で。
環境


レンタルサーバーは用意される
Linux




なるほど……..."><meta content="https://qiita.com/muzudho1/items/af3537d36f16c063a572" property="og:url" /><meta content="Qiita" property="og:site_name" /><meta content="564524038" property="fb:admins" /><meta content="Bash,Ubuntu,C#,mono,コンピュータ将棋" name="keywords" /><script>!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window, document,'script',
'https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '668972150489891');
fbq('track', 'PageView');</script><style data-emotion-css="17jxvjw 11t2ec1 1dvr2p8 18lkoru 1g4cku8 1iupg5d ijvq0v 15cocm3 12rp90f 115f4t 1b8uj5v 79elbk 16hhh7b fcbn8c 1gj7nt 154zy0m yikrym 1jqivyb 1ode1bp le4d8r 1hbd3g7 1nzh4zz 38fzdi helsa7 8qb8m4 2imjyh he5w1s 70qvj9 3ojehk 100alwu 1dtnjt5 10ougpm 1ay9vb9 m19uds cgzq40 1wa99t2 1l3zk9f 4czcte 1yzj1fm 1uv1qiv 109dbrr 5jpx49 mnxgyc 1vlpknv fsjkhv 1b17vb0 7i7f4d"}>.css-17jxvjw{display:grid;display:-ms-grid;grid-template-columns:80px minmax(0,1fr) 300px;-ms-grid-columns:80px minmax(0,1fr) 300px;grid-template-rows:minmax(270px,auto) 1fr;-ms-grid-rows:minmax(270px,auto) 1fr;max-width:1280px;margin-right:auto;margin-left:auto;padding-top:24px;padding-right:24px;padding-left:24px;}@media (max-width:1200px){.css-17jxvjw{padding-bottom:0;padding-left:0;padding-right:0;}}@media (max-width:992px){.css-17jxvjw{grid-template-columns:80px 452px 300px;-ms-grid-columns:80px 452px 300px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}}@media (max-width:770px){.css-17jxvjw{display:block;}}@media (max-width:480px){.css-17jxvjw{padding-top:0;}}.css-11t2ec1{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;z-index:5;position:-webkit-sticky;position:sticky;top:calc(56px + 24px + 16px + 32px - 16px);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:16px;width:80px;}.css-11t2ec1:after{content:'';display:table;}.css-11t2ec1:before{content:'';display:table;}@media (max-width:770px){.css-11t2ec1{display:none;}}.css-1dvr2p8{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-18lkoru{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;background-color:#FFFFFF;}.css-1g4cku8{display:inline-block;vertical-align:middle;height:20px;width:20px;fill:#55C500;}.css-1iupg5d{color:#55C500;cursor:pointer;font-size:14px;font-weight:bold;}.css-ijvq0v{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-15cocm3{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#FFFFFF;border:2px solid #6E6F70;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:2px 0px 0px;width:40px;}.css-12rp90f{display:inline-block;vertical-align:bottom;height:17.77777777777778px;width:16px;fill:#6E6F70;}.css-115f4t{color:#6E6F70;font-size:14px;font-weight:bold;}.css-1b8uj5v{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;margin-bottom:16px;padding:0;}.css-79elbk{position:relative;}.css-16hhh7b{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;padding:0;}.css-fcbn8c{display:none;bottom:initial;left:initial;right:initial;top:initial;left:100%;top:calc(-8px - (14px * 1.8) - 16px - 4px);}.css-1gj7nt{color:rgba(0,0,0,0.6);font-size:14px;font-weight:bold;line-height:1.8;padding:8px 16px;}.css-154zy0m{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.87);cursor:pointer;font-size:16px;font-weight:normal;line-height:1.8;padding:4px 16px;}.css-154zy0m:hover{-webkit-text-decoration:none;text-decoration:none;background-color:#F2F2F2;}.css-yikrym{width:20px;}.css-1jqivyb{color:rgba(0,0,0,0.6);font-size:13px;}.css-1ode1bp{background-color:rgba(0,0,0,0.12);height:1px;width:100%;margin:8px 0;}.css-le4d8r{display:inline-block;vertical-align:middle;height:13px;width:13px;fill:rgba(0,0,0,0.6);}.css-1hbd3g7{height:250px;}.css-1nzh4zz{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:16px 32px;background-color:#FBE69E;color:rgba(0,0,0,0.87);line-height:1.5;font-weight:600;}@media (max-width:770px){.css-1nzh4zz{padding:16px;}}.css-38fzdi{color:#CA832A;margin-right:4px;}.css-helsa7{background-color:#FFFFFF;padding:32px;margin-bottom:24px;}@media (max-width:992px){.css-helsa7{margin:0 auto 40px;}}@media (max-width:480px){.css-helsa7{margin:0 0 40px;padding:32px 16px;}}.css-8qb8m4{margin-bottom:48px;}.css-2imjyh{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-he5w1s{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;width:100%;}@media (max-width:770px){.css-he5w1s{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}}.css-70qvj9{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.css-3ojehk{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;margin-right:4px;}.css-100alwu{display:inline-block;border-radius:50%;line-height:1;overflow:hidden;vertical-align:middle;}.css-1dtnjt5{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-10ougpm{color:rgba(0,0,0,0.87);font-size:14px;font-weight:600;line-height:1.8;margin-right:4px;text-wrap:break-word;word-break:break-all;}.css-1ay9vb9{margin-right:16px;}.css-m19uds{color:rgba(0,0,0,0.6);font-size:14px;line-height:1.8;}.css-cgzq40{color:rgba(0,0,0,0.87);font-size:32px;font-weight:bold;line-height:1.4;margin-top:8px;text-wrap:break-word;word-break:break-all;}.css-1wa99t2{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.6);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:8px;}.css-1l3zk9f{color:rgba(0,0,0,0.6);font-size:20px;margin-right:8px;}.css-4czcte{margin-right:4px;color:inherit;font-size:14px;line-height:1.8;}.css-4czcte:not(:last-child)::after{content:',';margin-right:4px;}.css-1yzj1fm{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:32px;}.css-1uv1qiv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-size:20px;height:32px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin-right:16px;outline:none;padding:0;width:32px;}.css-109dbrr{background-color:#F9F9F9;border-top:1px solid rgba(0,0,0,0.12);bottom:0;box-shadow:0px 1px 4px rgba(0,0,0,0.14);display:none;height:calc(env(safe-area-inset-bottom,0px) + 56px);-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding-bottom:env(safe-area-inset-bottom);position:-webkit-sticky;position:sticky;width:100%;z-index:2000;}@media (max-width:770px){.css-109dbrr{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}.css-5jpx49{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:space-evenly;-webkit-justify-content:space-evenly;-ms-flex-pack:space-evenly;justify-content:space-evenly;width:100%;}.css-mnxgyc{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1vlpknv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;margin-right:4px;background-color:#FFFFFF;}.css-fsjkhv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1b17vb0{color:#6E6F70;font-size:14px;font-weight:bold;margin-left:4px;}.css-7i7f4d{display:none;bottom:initial;left:initial;right:initial;top:initial;bottom:32px;right:0;}</style></head><body><div class="allWrapper"><div><div id="GlobalHeader-react-component-1c559897-17be-449c-9a95-19b07f25f8c7"><div class="st-Header"><div class="st-Header_container"><div class="st-Header_start"><a href="/" class="st-Header_logo"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 426.57 130"><circle cx="167.08" cy="21.4" r="12.28"></circle><path d="M250.81 29.66h23.48v18.9h-23.48z"></path><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z"></path><circle cx="216.33" cy="21.4" r="12.28"></circle></svg></a><div class="st-Header_communitySelector" tabindex="0"><span class="fa fa-caret-down"></span></div><div class="st-Header_dropdown"><div class="st-Header_dropdownHeading">Qiita Teams that are logged in</div><div class="st-Header_dropdownItemNote">You are not logged in to any team</div><hr class="st-Header_dropdownDivider st-Header_dropdownDivider-shrink"/><a href="https://teams-center.qiita.com/find_team" class="st-Header_dropdownItem"><span class="fa fa-fw fa-sign-in st-Header_dropdownItemIcon"></span><div>Log in to Qiita Team</div></a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Community</div><a href="/organizations" class="st-Header_dropdownItem">Organization</a><a href="/official-events/open" class="st-Header_dropdownItem">Event</a><a href="/advent-calendar" class="st-Header_dropdownItem">Advent Calendar</a><a href="https://qiitadon.com/" class="st-Header_dropdownItem" target="_blank">Qiitadon (β)</a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Service</div><a href="https://jobs.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Jobs</a><a href="https://zine.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Zine</a><a href="https://blog.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Blog</a></div><form class="st-Header_search" action="/search" method="get"><span class="fa fa-search st-Header_searchIcon"></span><input type="search" class="st-Header_searchInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form><form class="st-Header_searchModal" action="/search" method="get"><input type="text" class="st-Header_searchModalInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form></div><div class="st-Header_end"><div class="st-Header_searchButton"><span class="fa fa-search"></span></div><a class="st-Header_signupButton" href="/signup?redirect_to=%2Fmuzudho1%2Fitems%2Faf3537d36f16c063a572">Signup</a><a class="st-Header_loginLink" href="/login?redirect_to=%2Fmuzudho1%2Fitems%2Faf3537d36f16c063a572">Login</a></div><div class="st-Header_overlay"></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="GlobalHeader" data-dom-id="GlobalHeader-react-component-1c559897-17be-449c-9a95-19b07f25f8c7">{"unreadNotificationsCount":null,"realms":[{"humanName":"Qiita","isCurrentRealm":true,"isQiita":true,"isQiitaTeam":false,"loggedInUser":null,"teamId":null,"url":"https://qiita.com/"}],"teamFindUrl":"https://teams-center.qiita.com/find_team","isTeamOnlyUser":null,"currentUser":null}</script>
      
</div><div class="st-HeaderAlert st-HeaderAlert-warning"><div class="st-HeaderAlert_body"></div></div><script type="application/ld+json">{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"/","name":"Qiita"}},{"@type":"ListItem","position":2,"item":{"@id":"/tags/bash","name":"Bash"}}]}</script><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","datePublished":"2017-03-04T00:02:47.000+09:00","dateModified":"2017-03-24T23:13:32.000+09:00","headline":"コンピュータ将棋ソフトとの対局サーバーを立てよう＜その１＞","image":"https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0\u0026w=1200\u0026mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND00NEt6NDRPejQ0T1U0NE9sNDRPODQ0S181YkNHNXFPTDQ0Szk0NE9WNDRPSTQ0R280NEd1NWEtLTViR0E0NEsxNDRPODQ0T1E0NE84NDRLUzU2dUw0NEdtNDRLSTQ0R0c3N3ljNDRHZDQ0R3U3N3lSNzd5ZSZ0eHQtY29sb3I9JTIzMzMzJnR4dC1mb250PUhpcmFnaW5vJTIwU2FucyUyMFc2JnR4dC1zaXplPTU0JnR4dC1jbGlwPWVsbGlwc2lzJnR4dC1hbGlnbj1jZW50ZXIlMkNtaWRkbGUmcz1lOGRhN2VjNzFlZTQzNGJmZDVmM2RkODU4NGFhM2UwYw\u0026mark-align=center%2Cmiddle\u0026blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RRzExZW5Wa2FHOHgmdHh0LWNvbG9yPSUyMzMzMyZ0eHQtZm9udD1IaXJhZ2lubyUyMFNhbnMlMjBXNiZ0eHQtc2l6ZT00NSZ0eHQtYWxpZ249cmlnaHQlMkNib3R0b20mcz0yNzBmM2IxNzA3MjZjZWFjNGMyNjg1YTgwYTdjMjY5Ng\u0026blend-align=center%2Cmiddle\u0026blend-mode=normal\u0026s=1630734c84421e8e82c7730de04492d8","mainEntityOfPage":"https://qiita.com/muzudho1/items/af3537d36f16c063a572","author":{"@type":"Person","address":"埼玉","email":null,"identifier":"muzudho1","name":"muzudho1","image":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fpbs.twimg.com%2Fprofile_images%2F378800000224959199%2F109762cc48c6e63fad3fbe01065cf862_normal.png?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=3ed9df1f72e7b42b01bc26234820b49f","url":"https://qiita.com/muzudho1","description":"（＾～＾）","memberOf":[]},"publisher":{"@type":"Organization","name":"Qiita","logo":{"@type":"ImageObject","url":"//cdn.qiita.com/assets/public/qiita-logo-c39ded593afa388e2e1ba435b110554e.png"}}}</script><style type="text/css">.wb-CampaignLink {
  background-color: #333333;
  width: 100%;
}

.wb-CampaignLink_container {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  max-width: 1100px;
  margin: 0 auto;
  font-size: 13px;
  padding: 0.8em;
}
.wb-CampaignLink_container > a {
  color: #fff;
}

.wb-CampaignLink_container > a:hover {
  text-decoration: underline;
}</style><div class="wb-CampaignLink"><div class="wb-CampaignLink_container"><a target="_blank" id="header_text_message_1" href="https://increments.connpass.com/event/211948/">Qiita創業者海野氏登壇！Qiita エンジニアフェスタ 2021 Online Meetupを9/9(木)に開催</a><a target="_blank" id="header_text_message_2" href="https://increments.connpass.com/event/211948/">詳しくはこちら</a></div><script>td.trackEvent(
  'front_events',
  {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"muzudho1","type":"items","id":"af3537d36f16c063a572"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Show","data":{"message":"Qiita創業者海野氏登壇！Qiita エンジニアフェスタ 2021 Online Meetupを9/9(木)に開催","url":"https://increments.connpass.com/event/211948/","sub_message":"詳しくはこちら"}}
)</script><script>document.getElementById('header_text_message_1').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"muzudho1","type":"items","id":"af3537d36f16c063a572"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":1,"pos_id":"header_text_message_1","message":"Qiita創業者海野氏登壇！Qiita エンジニアフェスタ 2021 Online Meetupを9/9(木)に開催","url":"https://increments.connpass.com/event/211948/","sub_message":"詳しくはこちら"}}
  )
})</script><script>document.getElementById('header_text_message_2').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"muzudho1","type":"items","id":"af3537d36f16c063a572"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":1,"pos_id":"header_text_message_2","message":"Qiita創業者海野氏登壇！Qiita エンジニアフェスタ 2021 Online Meetupを9/9(木)に開催","url":"https://increments.connpass.com/event/211948/","sub_message":"詳しくはこちら"}}
  )
})</script></div><script type="application/json" id="js-react-on-rails-context">{"railsEnv":"production","inMailer":false,"i18nLocale":"en","i18nDefaultLocale":"en","href":"https://qiita.com/muzudho1/items/af3537d36f16c063a572","location":"/muzudho1/items/af3537d36f16c063a572","scheme":"https","host":"qiita.com","port":null,"pathname":"/muzudho1/items/af3537d36f16c063a572","search":null,"httpAcceptLanguage":null,"actionPath":"public/items#show","settings":{"analyticsTrackingId":"UA-24675221-12","assetsMap":{},"csrfToken":"U10VzLblhXe4tVat6EcST2GNcKCBZ0cfGZ/l35yIVHF0HCp46+omDmygU7C1bnLA1Zs/mAu1dUCO+NEf+Ml+jg==","locale":"en"},"currentUser":null,"isLoggedIn":false,"recaptchaSiteKey":"6LfNkiQTAAAAAM3UGnSquBy2akTITGNMO_QDxMw6","serverSide":false}</script>
<div id="PersonalArticlePage-react-component-34bbc1fb-8228-4edb-b1eb-b805df130ef6"><div class="p-items_wrapper"><div class=" css-17jxvjw"><div class="css-11t2ec1"><div class="css-1dvr2p8"><button class=" css-18lkoru"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/muzudho1/items/af3537d36f16c063a572/likers" class="css-1iupg5d">8</a></div><div class="css-ijvq0v"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-115f4t">10</span></div><div class="css-1b8uj5v"><span class="fa fa-twitter"></span></div><div class="css-1b8uj5v"><span class="fa fa-facebook"></span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-fcbn8c"><div class="css-1gj7nt">Improve article</div><a href="/drafts/af3537d36f16c063a572/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/muzudho1/items/af3537d36f16c063a572/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/muzudho1/items/af3537d36f16c063a572/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/muzudho1/items/af3537d36f16c063a572/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/muzudho1/items/af3537d36f16c063a572.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div><div class="p-items_options"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_toc"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_main"><div class="css-1nzh4zz"><span class="fa fa-fw fa-warning css-38fzdi"></span><p>More than 3 years have passed since last update.</p></div><div class="css-helsa7"><div class="css-8qb8m4"><div class="css-2imjyh"><div class="css-he5w1s"><div class="css-70qvj9"><div class="css-3ojehk"><a href="/muzudho1"><img class="css-100alwu eyfquo10" src="https://pbs.twimg.com/profile_images/378800000224959199/109762cc48c6e63fad3fbe01065cf862_normal.png" width="24" height="24" loading="lazy"/></a></div><div class="css-1dtnjt5"><a href="/muzudho1" class="css-10ougpm">@<!-- -->muzudho1</a><div class="css-1ay9vb9"><span><meta content="2017-03-03T15:02:47Z"/><time dateTime="2017-03-24T14:13:32Z" class="css-m19uds">updated at 2017-03-24</time></span></div></div></div></div></div><h1 class="css-cgzq40">コンピュータ将棋ソフトとの対局サーバーを立てよう＜その１＞</h1><div class="css-1wa99t2"><span class="fa fa-tags mr-1of2 css-1l3zk9f" aria-hidden="true"></span><a href="/tags/bash" class="css-4czcte">Bash</a><a href="/tags/ubuntu" class="css-4czcte">Ubuntu</a><a href="/tags/csharp" class="css-4czcte">C#</a><a href="/tags/mono" class="css-4czcte">mono</a><a href="/tags/%e3%82%b3%e3%83%b3%e3%83%94%e3%83%a5%e3%83%bc%e3%82%bf%e5%b0%86%e6%a3%8b" class="css-4czcte">コンピュータ将棋</a></div></div><section class="it-MdContent"><div id="personal-public-article-body"><div><p>１時間前まで　コンピュータ囲碁やってた気もするんだが、コンピュータ将棋ソフトに切り替えよう。</p>

<h1>
<span id="要件定義" class="fragment"></span><a href="#%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9"><i class="fa fa-link"></i></a>要件定義</h1>

<ul>
<li>URL叩いたら指し手を返してほしい。1秒以内で。</li>
<li>環境

<ul>
<li>レンタルサーバーは用意される</li>
<li>Linux</li>
</ul>
</li>
</ul>

<p>なるほど……、最近どんな騒ぎがあったのか知らないのかツッコミたいところだが　わたしには関係ない。</p>

<h1>
<span id="思いついてみよう" class="fragment"></span><a href="#%E6%80%9D%E3%81%84%E3%81%A4%E3%81%84%E3%81%A6%E3%81%BF%E3%82%88%E3%81%86"><i class="fa fa-link"></i></a>思いついてみよう</h1>

<p>まず　わたしの環境なんだが</p>

<ul>
<li>Windows 10</li>
</ul>

<p>ぱっと思いつくところでは</p>

<ul>
<li>浮かむ瀬</li>
<li>Ubuntu ※第４回電王トーナメントでも大人気だ。USBに入れて突きさしてセットアップされる。

<ul>
<li>(追記)(初期インストール済み) 14.04.5 LTS (GNU/Linux 3.13.0-63-generic x86_64)</li>
</ul>
</li>
<li>
<del>GCC</del> g++-4.8以上</li>
<li>
<del>teratarm</del> PuTTY</li>
<li>(追記) mono ※将棋所を使う場合</li>
<li>(追記) FileZilla</li>
<li>(追記)(初期インストール済み) nano ※テキストエディター</li>
<li>(追記)(初期インストール済み) bash ※シェル・スクリプト</li>
</ul>

<p>だが Webサーバー を立てないといけない気もする。</p>

<ul>
<li>Apache</li>
<li>PHP</li>
</ul>

<p>があればいいんだろうか？　将棋ソフトって　マルチユーザーに対応しているのか？キューとか要るんじゃないか？とりあえず１人用でいいか。</p>

<p>ローカル環境でテストもしたいし、Windows上でLinux を動かすバーチャルなあれなんて名前だったか……。思い出せないや、ググって出てくる バーチャルボックスを調べておこう。</p>

<h1>
<span id="テスト環境を作ろう" class="fragment"></span><a href="#%E3%83%86%E3%82%B9%E3%83%88%E7%92%B0%E5%A2%83%E3%82%92%E4%BD%9C%E3%82%8D%E3%81%86"><i class="fa fa-link"></i></a>テスト環境を作ろう</h1>

<p>まず　ローカルに　テスト環境を構築しよう。</p>

<p>あとで記事を続ける。</p>

<p>Windows 10 で Virtual Box を導入できるだろうか。ググって読んでおこう。</p>

<p>参照 : 「WindowsでVirtualBoxを使用してLinux（Ubuntu）を動作させる手順と設定」 (俺の開発研究所) <a href="http://itmemo.net-luck.com/virtualbox-ubuntu/" class="autolink" rel="nofollow noopener" target="_blank">http://itmemo.net-luck.com/virtualbox-ubuntu/</a></p>

<p>とりあえず　浮かむ瀬　のソースはダウンロードしておこう。</p>

<p>参照 : 「第4回将棋電王トーナメント version (for Windows 64bit) (出場ソフト名「浮かむ瀬」)」 (Apery</p>

<p>open source shogi engine) <a href="http://hiraokatakuya.github.io/apery/" class="autolink" rel="nofollow noopener" target="_blank">http://hiraokatakuya.github.io/apery/</a></p>

<h1>
<span id="biosが起動しないぜ" class="fragment"></span><a href="#bios%E3%81%8C%E8%B5%B7%E5%8B%95%E3%81%97%E3%81%AA%E3%81%84%E3%81%9C"><i class="fa fa-link"></i></a>BIOSが起動しないぜ</h1>

<p>Antec の CORE i3 なんだが、[F2][F10][F12][F8][Del] で BIOS が出てこなかった。<br>
USBポートを左上の方に挿してみて [Del][F6] もやってみたが BIOS は出てこなかった。</p>

<p>もうちょっと調べてみる。</p>

<h1>
<span id="ローカルテスト環境-構築できなかったぜ" class="fragment"></span><a href="#%E3%83%AD%E3%83%BC%E3%82%AB%E3%83%AB%E3%83%86%E3%82%B9%E3%83%88%E7%92%B0%E5%A2%83-%E6%A7%8B%E7%AF%89%E3%81%A7%E3%81%8D%E3%81%AA%E3%81%8B%E3%81%A3%E3%81%9F%E3%81%9C"><i class="fa fa-link"></i></a>ローカルテスト環境 構築できなかったぜ。</h1>

<p>無ければ無いで……。</p>

<p>そういえば、自宅の開発PCのBIOS　今まで見たことないな。</p>

<p>用意された さくらVPS 物理サーバー1台 の 2週間無料 ページを見る。<br>
<a href="http://vps.sakura.ad.jp/" class="autolink" rel="nofollow noopener" target="_blank">http://vps.sakura.ad.jp/</a></p>

<p>標準OSが「Ubuntu14.04 amd64 / Ubuntu16.04 amd64」か。じゃあもう Ubuntu インストールされてるや。</p>

<h2>
<span id="コンピューターとセキュリティ" class="fragment"></span><a href="#%E3%82%B3%E3%83%B3%E3%83%94%E3%83%A5%E3%83%BC%E3%82%BF%E3%83%BC%E3%81%A8%E3%82%BB%E3%82%AD%E3%83%A5%E3%83%AA%E3%83%86%E3%82%A3"><i class="fa fa-link"></i></a>コンピューターとセキュリティ</h2>

<p>ざっくり言って、コンピューターと言うのは　無制限に使うことより　制限して使う方に　発展している。<br>
それもこれも　人類はガイア理論のような超個体ではなく、群集生物で１個体が利己的にリソースを使うからだが……。</p>

<p>で、コンピューターのリソースを使う人は　ユーザー・アカウント　を開設する。直訳すると口座でこの日本語はお金の出入り口の場所ぐらいの意味で分かりやすいんだが、account も何か count という語が入ってるし、接頭辞 ac- って何かと調べると「～の方へ」ぐらいの意味のようだ。</p>

<p>ユーザー・アカウントはもう用意されていた。<br>
掴みどころとしては</p>

<ul>
<li>ネットワーク上の住所 (IPアドレス)</li>
<li>その住所にあるコンピュータ内で使われる自分の氏名 (ユーザー名)</li>
<li>本人確認をするもの (パスワード)</li>
</ul>

<p>の<strong>３つを聞いて控えておく</strong>と、コンピューターに入る（ログイン）こともできるし、ファイル（データ）を送ることもできる。<br>
家に入って　送った荷物が届くようなものだ。</p>

<p>そういえば　ログ　というのは足跡のようなもので、いつコンピューター（家）に入ったかとか、コンピューターに入って何をしたかとか、最後にファイルを開いたのは誰か、とか残されていくんだが、コンピューターに入ることを　ログイン　と呼ぶのも興味深い。</p>

<h2>
<span id="そういえばルートユーザーというのがあったな" class="fragment"></span><a href="#%E3%81%9D%E3%81%86%E3%81%84%E3%81%88%E3%81%B0%E3%83%AB%E3%83%BC%E3%83%88%E3%83%A6%E3%83%BC%E3%82%B6%E3%83%BC%E3%81%A8%E3%81%84%E3%81%86%E3%81%AE%E3%81%8C%E3%81%82%E3%81%A3%E3%81%9F%E3%81%AA"><i class="fa fa-link"></i></a>そういえばルート・ユーザーというのがあったな</h2>

<p>Teratarm という寺さんが作ったターミナルでログインしようかと思ったんだが、（へぇ、今はコミュニティが開発を後継しているのか）<br>
開発PCのランチャーに PuTTY のアイコンがあったので PuTTY で接続してしまった。</p>

<p>接続プロトコルのタイプは SSH だ。なんかセキュリティーが高いんだろうぐらいしか分からないが「SSHだ」と言われたら SSH を選ぶしかない。こっちが好きなものを選べます、というやつじゃない。</p>

<p>PuTTYがなんかセキュリティ警告を出しているが気にせず [はい(Y)] を選んで入る。</p>

<p>ユーザー名に root と入れてパスワード叩いて Linux に入れね、とか思ってたんだが　聞いてみると ルート・ユーザーでは入れないらしい。<br>
そういえばなんか su コマンドとかあった気もする。Windows 10 だって 自分のアカウントで入ってから右クリックして「管理者権限で実行」を選んだりもする。</p>

<p>なんかもう就活で Linuxの実務経験があります というのは止めておこう。ぜんぜんダメだ。</p>

<h2>
<span id="コマンドラインだ" class="fragment"></span><a href="#%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89%E3%83%A9%E3%82%A4%E3%83%B3%E3%81%A0"><i class="fa fa-link"></i></a>コマンドラインだ</h2>

<p>ls ぐらいしか覚えてないんだが　ぶーたれていると</p>

<p>sudo su -</p>

<p>というコマンドを教えてくれたので使ってみる。<br>
パスワードを聞かれるので入れる。</p>

<p>とりあえず root ユーザーになったんじゃないか。これで <strong>権限</strong> というのが大きくなったので、何か役立つだろう。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>ls
</code></pre></div></div>

<p>と叩く。何にも出ねー。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>ls -an
</code></pre></div></div>

<p>と叩く。</p>

<p>. で始まる名前のファイルがいっぱい出てくる。隠しファイルばっかりか。<br>
フォルダーや、隠しじゃないファイルは無いようだ。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>mkdir shogi
</code></pre></div></div>

<p>とか適当にフォルダーを切ってみる。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>ls -an
</code></pre></div></div>

<p>shogi フォルダー無ぇ～。</p>

<p>ここは　どこなんだ。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>cd ../
</code></pre></div></div>

<p>うわ、どこにいたのか分からなくなった。 home フォルダーにいたのかと思ったんだがなんかおかしい。root フォルダーにいたんじゃないか？</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>cd root
ls
</code></pre></div></div>

<p>ふむ……。 shogi フォルダーがあるな。<br>
こんな root とかいう分けわかんないとこにフォルダーは要らないや。消しとこ……。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>rmdir shogi/
ls
</code></pre></div></div>

<p>よし。</p>

<p>将棋ソフトはどこに デプロイメント（すぐ使えるように用意しておくこと。引っ越しでダンボール箱を引っ越し先に届けて箱を開けるところまで全部やろうという気分に似ている）すればいいんだ？</p>

<p>「各ディレクトリの役割を知ろう（ルートディレクトリ編） (1/2)」 (@ IT)<br>
<a href="http://www.atmarkit.co.jp/ait/articles/0108/07/news002.html" class="autolink" rel="nofollow noopener" target="_blank">http://www.atmarkit.co.jp/ait/articles/0108/07/news002.html</a></p>

<p>bin に入れるにしては　将棋ソフトはコマンドな気はしない。なんか機能が巨大な気もするし、<br>
root フォルダーなんか外からバンバン利用されるものを置いてていいのか分からんし、<br>
lib というには　共有するソフトという気分でもない。<br>
じゃあ etc か。設定ファイルじゃないし……。</p>

<p>じゃあ無難に home へ。</p>

<p>home ディレクトリの下に 自分のアカウント名のフォルダーがあるのでさらにその下へ。</p>

<h2>
<span id="パーミッション" class="fragment"></span><a href="#%E3%83%91%E3%83%BC%E3%83%9F%E3%83%83%E3%82%B7%E3%83%A7%E3%83%B3"><i class="fa fa-link"></i></a>パーミッション</h2>

<p><strong>ファイルの転送に失敗した、ぶーたれていると教えてくれた。そうだ Linux にはパーミッションがあったんだ！</strong></p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>ls -an
drwxr-xr-x ～略～ 01:37 shogi
</code></pre></div></div>

<p>パーミッション（ファイルの利用許可範囲の設定）は d:ディレクトリ の rwx、r-x、r-xで、<br>
r:読取、w:書込、x:実行、-:権限なし　という権限で、３つ並んでるんだが何だったか。</p>

<p>「第2回 「パーミッションの意味と使い分け」」 (MdN Design Interactive)<br>
<a href="http://www.mdn.co.jp/di/articles/2104/?page=2" class="autolink" rel="nofollow noopener" target="_blank">http://www.mdn.co.jp/di/articles/2104/?page=2</a></p>

<p>「所有者」「グループ」「その他」の３つが並んでるらしい。グループなんて使ったことないな。<br>
うーむ、外からファイルを転送してこようと思ったら「その他」に書き込み権限 w を付けた方がいいんだろうか？</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>chmod 757 shogi/
ls -an
drwxr-xrwx ～略～ 01:37 shogi
        ~
        ここが変わった
</code></pre></div></div>

<p>はい、おっけ。</p>

<h2>
<span id="ファイルを転送しよう" class="fragment"></span><a href="#%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%E8%BB%A2%E9%80%81%E3%81%97%E3%82%88%E3%81%86"><i class="fa fa-link"></i></a>ファイルを転送しよう</h2>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>FileZilla を使って Windows 10 から Linux へ Apery を転送しよう。
</code></pre></div></div>

<p><strong>あれ？　日本語の抽象度がおかしいぜ。</strong>もう一度。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>ファイル転送ソフトを使って Windows から Linux へコンピュータ将棋ソフトを転送しよう。
</code></pre></div></div>

<p>よし。<br>
具体的には、</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>FileZilla を使って Windows 10 から Ubuntu へ 浮かむ瀬 を転送する。
</code></pre></div></div>

<p>よし。<br>
なんか　この日本語の抽象性と具体性の使い分けができないと、会話をしている相手が　ファミコンのスーパーマリオが谷間に転落したあとに　飛び出してきたときのような　反応をすることがある。</p>

<p>もちろん　わたしには　そんな会話力なんか無いぜ。</p>

<p>あ、そうそう。サーバーからログアウトしよう。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>exit
logout
</code></pre></div></div>

<p>なんか２回打たないとダメだった。<br>
（※2017-03-06 追記: サーバーからexitして、PuTTYからexitしているようだ。コマンドは exit 2連打でOK)</p>

<p>ここで　用事でおでかけだ。帰ってから記事を続ける。</p>

<p>続き。</p>

<p>ログイン後の画面を見ると</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>Welcome to Ubuntu 14.04.5 LTS (GNU/Linux 3.13.0-63-generic x86_64)

 * Documentation:  https://help.ubuntu.com/
New release '16.04.2 LTS' available.
Run 'do-release-upgrade' to upgrade to it.
</code></pre></div></div>

<p>と書いてある。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>do-release-upgrade
</code></pre></div></div>

<p>と打ち込んだらいいのだろうか。<br>
なんかパスワードを尋ねられたり、[yN] の入力を促されたりする。</p>

<p>なんか ポートを '1022' にしろ、みたいに書いてるけど無視して進める。</p>

<p>更新には several hour かかる、とか書いてある……、だったら　お出かけ前に更新しておけばよかった……。</p>

<p>と思ったら　[yN] をよく尋ねられるし　ＰＣから離れられない。<br>
そして　system will be restarted. という文字を見かけるが　システムが再起動される様子もない。<br>
どうもタイムアウトして接続が切れたらしい。</p>

<p>接続しなおすと　メッセージが変わっていた。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code> * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage
Last login: Sat Mar  4 20:59:46 2017 from ～略～
To run a command as administrator (user "root"), use "sudo &lt;command&gt;".
See "man sudo_root" for details.
</code></pre></div></div>

<p>じゃあ　更新は終わったのだろうか。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>sudo su -
</code></pre></div></div>

<p>でパスワード入力して rootユーザーに切り替える。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>cd ../
ls
cd home
ls
cd アカウント名
ls
cd shogi
ls
apery-SDT4.tar.gz  apery-SDT4.zip
</code></pre></div></div>

<p>ふむ。どっちかがソースで、どっちかがバイナリだ。</p>

<p>どっちもソースじゃないか？　よくわからん。</p>

<p>tar.gz の方を解凍できないだろうか。</p>

<p>unzip コマンドはインストールされてないか、パスが通ってないみたいなので、</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>apt install unzip
</code></pre></div></div>

<p>コマンドを試してみる。今度は unzip コマンドを叩けるようだ。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>End-of-central-directory ～略～
</code></pre></div></div>

<p>と何かエラーらしきメッセージが返ってきている。じゃあ .zip の方を unzip してみる。<br>
何か動いているようだ。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>ls
apery-SDT4 ～以下略～
</code></pre></div></div>

<p>apery-SDT4 ディレクトリーが作られたのか。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>cd apery-SDT4
ls
bin  Copying.txt  Readme.txt  src  utils
</code></pre></div></div>

<p>多分、ソースが展開されたのではないか。このソースをコンパイルできないか。</p>

<p>g++4.8以上というのが何なのか調べてみよう。</p>

<h1>
<span id="g" class="fragment"></span><a href="#g"><i class="fa fa-link"></i></a>g++</h1>

<p>「g++」(C++)<br>
<a href="http://kaworu.jpn.org/cpp/g++" class="autolink" rel="nofollow noopener" target="_blank">http://kaworu.jpn.org/cpp/g++</a></p>

<p>ややこしい名前だ……。</p>

<p>まず ubuntu に g++ が入っているか検索する。<br>
上記Ｗｅｂサイトから</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>apt-cache search g++
</code></pre></div></div>

<p>をマウスのドラッグでコピーして、PuTTY へ右クリックで貼り付け。<br>
なんか文字がいっぱい出力されて流れていった。なんなのかわからない。</p>

<p>「g++をUbuntuへインストールする」 (C++)<br>
<a href="http://kaworu.jpn.org/cpp/g++%E3%82%92Ubuntu%E3%81%B8%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%99%E3%82%8B" class="autolink" rel="nofollow noopener" target="_blank">http://kaworu.jpn.org/cpp/g++%E3%82%92Ubuntu%E3%81%B8%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%99%E3%82%8B</a></p>

<p>一番新しいバージョンに飛びつくぜ。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>sudo apt install g++-4.9
</code></pre></div></div>

<p>インストールは終わったのだろうか。コマンドを打ってみる。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>g++ --version

g++ (Ubuntu 5.4.0-6ubuntu1~16.04.4) 5.4.0 20160609
Copyright (C) 2015 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
</code></pre></div></div>

<p>もう g++ はインストールできたんじゃないか。</p>

<h1>
<span id="apery-のソースコードをコンパイルしよう" class="fragment"></span><a href="#apery-%E3%81%AE%E3%82%BD%E3%83%BC%E3%82%B9%E3%82%B3%E3%83%BC%E3%83%89%E3%82%92%E3%82%B3%E3%83%B3%E3%83%91%E3%82%A4%E3%83%AB%E3%81%97%E3%82%88%E3%81%86"><i class="fa fa-link"></i></a>apery のソースコードをコンパイルしよう</h1>

<p>C言語はコンパイルの手続きを Makefile に書くと思うんだが g++ はどうか。</p>

<p>「Makefileの書き方」 (Web就活日記)<br>
<a href="http://yut.hatenablog.com/entry/20120702/1341185909" class="autolink" rel="nofollow noopener" target="_blank">http://yut.hatenablog.com/entry/20120702/1341185909</a></p>

<p>浮かむ瀬 の Makefile は apery-SDT4/src/Makefile にあるようだ。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>cd apery-SDT4/src/
</code></pre></div></div>

<p>Makefile のあるディレクトリまで　カレントを移動。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>gmake

No command 'gmake' found, did you mean:
～略～
</code></pre></div></div>

<p>違うのか……。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>man -k g++
</code></pre></div></div>

<p>コマンドが多すぎて分からん。</p>

<p>「自動化のためのGNU Make入門講座 - Makefileの基本：ルール<br>
Document 」 (オブラブ)<br>
<a href="http://objectclub.jp/community/memorial/homepage3.nifty.com/masarl/article/gnu-make/rule.html" class="autolink" rel="nofollow noopener" target="_blank">http://objectclub.jp/community/memorial/homepage3.nifty.com/masarl/article/gnu-make/rule.html</a></p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>make
</code></pre></div></div>

<p>なんか動き出した。<br>
出力の一部分を見てみると、</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>g++ -o apery ../obj/main.o ../obj/bitboard.o ../obj/init.o ../obj/mt64bit.o ../o
bj/position.o ../obj/evalList.o ../obj/move.o ../obj/movePicker.o ../obj/square.
o ../obj/usi.o ../obj/generateMoves.o ../obj/evaluate.o ../obj/search.o ../obj/h
and.o ../obj/tt.o ../obj/timeManager.o ../obj/book.o ../obj/benchmark.o ../obj/t
hread.o ../obj/common.o ../obj/pieceScore.o -lpthread  -std=c++11 -fno-exception
s -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp
</code></pre></div></div>

<p>と書いているので、ディレクトリを１つ上がったところの obj ディレクトリに　中間ファイル（.o）はできているのだろう。ところで Linux って .exe ファイルの代わりに何ができるのか？ コマンド？</p>

<h1>
<span id="黄緑色の-apery" class="fragment"></span><a href="#%E9%BB%84%E7%B7%91%E8%89%B2%E3%81%AE-apery"><i class="fa fa-link"></i></a>黄緑色の apery</h1>

<p><strong>うん？</strong></p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>ls
apery           evaluate.cpp       move.hpp                   search.hpp
benchmark.cpp   evaluate.hpp       movePicker.cpp             square.cpp
benchmark.hpp   generateMoves.cpp  movePicker.hpp             square.hpp
benchmark.sfen  generateMoves.hpp  mt64bit.cpp                thread.cpp
bitboard.cpp    hand.cpp           mt64bit.hpp                thread.hpp
bitboard.hpp    hand.hpp           overloadEnumOperators.hpp  timeManager.cpp
book.cpp        ifdef.hpp          piece.hpp                  timeManager.hpp
book.hpp        init.cpp           pieceScore.cpp             tt.cpp
color.hpp       init.hpp           pieceScore.hpp             tt.hpp
common.cpp      learner.hpp        position.cpp               usi.cpp
common.hpp      main.cpp           position.hpp               usi.hpp
evalList.cpp    Makefile           score.hpp
evalList.hpp    move.cpp           search.cpp
</code></pre></div></div>

<p>リストの先頭にある apery、あれ、フォルダーじゃなくて 実行ファイルなんじゃないか？</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>ls -an
-rwxr-xr-x 1 0 0 444728 Mar  4 22:16 apery
</code></pre></div></div>

<p>パーミッションに x が付いている。実行できるんじゃないか？</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>apery
apery: command not found
</code></pre></div></div>

<p>何がダメなのか……。</p>

<p>「lsっぽいコマンドを作る」 (碧色工房)<br>
<a href="http://www.mm2d.net/main/prog/linux/ls-08.html" class="autolink" rel="nofollow noopener" target="_blank">http://www.mm2d.net/main/prog/linux/ls-08.html</a></p>

<p>実行可能なファイルなんじゃないのか……。</p>

<p>「ubuntu初心者です。 端末でプログラムの実行を」 (YAHOO!JAPAN知恵袋)<br>
<a href="http://detail.chiebukuro.yahoo.co.jp/qa/question_detail/q1356985753" class="autolink" rel="nofollow noopener" target="_blank">http://detail.chiebukuro.yahoo.co.jp/qa/question_detail/q1356985753</a></p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>./apery
</code></pre></div></div>

<p>おっ、なんか処理が返ってこずにブロックされたぜ。バックグラウンドで動かせばいいんじゃないか？</p>

<h1>
<span id="プログラムを強制終了させよう" class="fragment"></span><a href="#%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%A0%E3%82%92%E5%BC%B7%E5%88%B6%E7%B5%82%E4%BA%86%E3%81%95%E3%81%9B%E3%82%88%E3%81%86"><i class="fa fa-link"></i></a>プログラムを強制終了させよう</h1>

<p>[Ctrl] + [C] でも押しとけば止まるんじゃないか。止まった。</p>

<h1>
<span id="プログラムをバックグラウンドで実行させよう" class="fragment"></span><a href="#%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%A0%E3%82%92%E3%83%90%E3%83%83%E3%82%AF%E3%82%B0%E3%83%A9%E3%82%A6%E3%83%B3%E3%83%89%E3%81%A7%E5%AE%9F%E8%A1%8C%E3%81%95%E3%81%9B%E3%82%88%E3%81%86"><i class="fa fa-link"></i></a>プログラムをバックグラウンドで実行させよう</h1>

<p>じゃあ、バックグラウンドで実行するには。</p>

<p>「【Linux】ジョブのバックグラウンド実行」 (Qiita)<br>
<a href="http://qiita.com/fujitetsu/items/665413e0dc8b0cc3b6ed" class="autolink" id="reference-c537da6274e12cfaa192">http://qiita.com/fujitetsu/items/665413e0dc8b0cc3b6ed</a></p>

<p>QiitaからQiitaへの記事ぐらい　なんか　WordPress みたいに　かっこいいリンクに差し替えてくれたらいいのにｗｗｗｗｗ<br>
コマンドの末尾に &amp; を付けるといいらしい。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>./apery &amp;
[1] 1692
</code></pre></div></div>

<p>ほう。</p>

<h1>
<span id="aperyに標準入力で入力しよう" class="fragment"></span><a href="#apery%E3%81%AB%E6%A8%99%E6%BA%96%E5%85%A5%E5%8A%9B%E3%81%A7%E5%85%A5%E5%8A%9B%E3%81%97%E3%82%88%E3%81%86"><i class="fa fa-link"></i></a>Aperyに標準入力で入力しよう</h1>

<p>じゃあ、apery に話しかけれるのだろうか？ 牛とか。</p>

<p>「図解：標準入力、標準出力、標準エラー出力、パイプとは ?」 (Linux)<br>
<a href="http://www.creatology.jp/unix/outin.html" class="autolink" rel="nofollow noopener" target="_blank">http://www.creatology.jp/unix/outin.html</a></p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>echo 'usi' &gt; ./apery
-su: ./apery: Text file busy
</code></pre></div></div>

<p>違うのか。</p>

<p>「（２−５）複数のコマンド間で標準入出力を共有し，連携するためには，パイプを用いる。」 (Linux上でシェルが実行される仕組みを，体系的に理解しよう　（bash 中級者への道）)<br>
<a href="http://language-and-engineering.hatenablog.jp/entry/20110617/p1" class="autolink" rel="nofollow noopener" target="_blank">http://language-and-engineering.hatenablog.jp/entry/20110617/p1</a></p>

<p>じゃあ　パイプ（縦棒）でつないでみよう。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>echo 'usi' | ./apery
id name Apery Debug Build
id author Hiraoka Takuya

option name Best_Book_Move type check default false
option name Book_File type string default book/20150503/book.bin
option name Byoyomi_Margin type spin default 500 min 0 max 2147483647
option name Clear_Hash type button
option name Draw_Ply type spin default 256 min 1 max 2147483647
option name Engine_Name type string default Apery Debug Build
option name Max_Book_Ply type spin default 32767 min 0 max 32767
option name Max_Random_Score_Diff type spin default 0 min 0 max 32600
option name Max_Random_Score_Diff_Ply type spin default 32767 min 0 max 32767
option name Min_Book_Ply type spin default 32767 min 0 max 32767
option name Min_Book_Score type spin default -180 min -32601 max 32601
option name Minimum_Thinking_Time type spin default 20 min 0 max 2147483647
option name Move_Overhead type spin default 30 min 0 max 5000
option name MultiPV type spin default 1 min 1 max 594
option name OwnBook type check default true
option name Slow_Mover type spin default 89 min 1 max 1000
option name Slow_Mover_10 type spin default 10 min 1 max 1000
option name Slow_Mover_16 type spin default 20 min 1 max 1000
option name Slow_Mover_20 type spin default 40 min 1 max 1000
option name Threads type spin default 2 min 1 max 256
option name Time_Margin type spin default 4500 min 0 max 2147483647
option name USI_Hash type spin default 256 min 1 max 1048576
option name USI_Ponder type check default true
usiok
</code></pre></div></div>

<p><strong>おっ！</strong> Apery と会話でけたな！</p>

<h1>
<span id="デバッグビルドとリリースビルド" class="fragment"></span><a href="#%E3%83%87%E3%83%90%E3%83%83%E3%82%B0%E3%83%93%E3%83%AB%E3%83%89%E3%81%A8%E3%83%AA%E3%83%AA%E3%83%BC%E3%82%B9%E3%83%93%E3%83%AB%E3%83%89"><i class="fa fa-link"></i></a>デバッグ・ビルド　と　リリース・ビルド</h1>

<p>だが　ちょっと待ってほしい。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>id name Apery Debug Build
</code></pre></div></div>

<p>とても気になるぜ。これって、デバッグ・モードでコンパイルしたエイプリーなんじゃないか？<br>
デバッグ・モードでない方法でコンパイルしてくれる方法を調べよう……。</p>

<p>apery-SDT4 の usi.cpp を見ると、</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>#ifdef NDEBUG
    (*this)["Engine_Name"]                 = USIOption("ukamuse_SDT4");
#else
    (*this)["Engine_Name"]                 = USIOption("Apery Debug Build");
#endif
</code></pre></div></div>

<p>と書いている。 NDEBUG というプリプロセッサ・マクロ を make に指定できれば ukamuse_SDT4 君になってくれると思うんだが……。<br>
Makefile ファイルには</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>-DNDEBUG
</code></pre></div></div>

<p>という記述を　よく見かける。 -D と NDEBUG なのだろう。どうやって利用するのか？</p>

<p>「Makefileの書き方」 (Web就活日記)<br>
<a href="http://yut.hatenablog.com/entry/20120702/1341185909" class="autolink" rel="nofollow noopener" target="_blank">http://yut.hatenablog.com/entry/20120702/1341185909</a></p>

<p>じゃあ、こうか。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>make bmi2
make CFLAGS='-std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopen
mp -DNDEBUG -DHAVE_SSE4 -DHAVE_SSE42 -DHAVE_BMI2 -msse4.2 -mbmi2 -DHAVE_AVX2 -ma
vx2' LDFLAGS='-lpthread  -flto' apery
make[1]: Entering directory '/home/csg10/shogi/apery-SDT4/src'
make[1]: 'apery' is up to date.
make[1]: Leaving directory '/home/csg10/shogi/apery-SDT4/src'
</code></pre></div></div>

<p>うーむ。何が起こったのか。</p>

<h1>
<span id="バックグラウンドのプロセスを止めよう" class="fragment"></span><a href="#%E3%83%90%E3%83%83%E3%82%AF%E3%82%B0%E3%83%A9%E3%82%A6%E3%83%B3%E3%83%89%E3%81%AE%E3%83%97%E3%83%AD%E3%82%BB%E3%82%B9%E3%82%92%E6%AD%A2%E3%82%81%E3%82%88%E3%81%86"><i class="fa fa-link"></i></a>バックグラウンドのプロセスを止めよう</h1>

<p>そういえば　Apery Debug Build 君をバックグラウンドで起動しっぱなしだったな。</p>

<p>「【 stop 】 バックグラウンドのジョブを停止する」 (ITPro)<br>
<a href="http://itpro.nikkeibp.co.jp/article/COLUMN/20060227/230891/" class="autolink" rel="nofollow noopener" target="_blank">http://itpro.nikkeibp.co.jp/article/COLUMN/20060227/230891/</a></p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>%1692
-su: fg: %1692: no such job
</code></pre></div></div>

<p>あらー。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>jobs
[1]+  Stopped                 ./apery
</code></pre></div></div>

<p>いつのまに止まっていたのか。</p>

<h1>
<span id="ファイルを削除してもう一回-make-すると" class="fragment"></span><a href="#%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%E5%89%8A%E9%99%A4%E3%81%97%E3%81%A6%E3%82%82%E3%81%86%E4%B8%80%E5%9B%9E-make-%E3%81%99%E3%82%8B%E3%81%A8"><i class="fa fa-link"></i></a>ファイルを削除してもう一回 make すると？</h1>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>rm apery
ls
</code></pre></div></div>

<p>よし。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>make bmi2
make CFLAGS='-std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopen
mp -DNDEBUG -DHAVE_SSE4 -DHAVE_SSE42 -DHAVE_BMI2 -msse4.2 -mbmi2 -DHAVE_AVX2 -ma
vx2' LDFLAGS='-lpthread  -flto' apery
make[1]: Entering directory '/home/csg10/shogi/apery-SDT4/src'
g++ -o apery ../obj/main.o ../obj/bitboard.o ../obj/init.o ../obj/mt64bit.o ../o
bj/position.o ../obj/evalList.o ../obj/move.o ../obj/movePicker.o ../obj/square.
o ../obj/usi.o ../obj/generateMoves.o ../obj/evaluate.o ../obj/search.o ../obj/h
and.o ../obj/tt.o ../obj/timeManager.o ../obj/book.o ../obj/benchmark.o ../obj/t
hread.o ../obj/common.o ../obj/pieceScore.o -lpthread  -flto -std=c++11 -fno-exc
eptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -DNDEBUG -DHAVE_SSE4 -DHAVE_S
SE42 -DHAVE_BMI2 -msse4.2 -mbmi2 -DHAVE_AVX2 -mavx2
make[1]: Leaving directory '/home/csg10/shogi/apery-SDT4/src'

ls
</code></pre></div></div>

<p>よし。作り直した。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>echo 'usi' | ./apery
id name Apery Debug Build
</code></pre></div></div>

<p>ダメじゃないかｗｗｗｗ</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>make publish
～中略～
echo 'usi' | ./apery
id name ukamuse_SDT4
</code></pre></div></div>

<p>これなら　いけるのか。しかしベンチマークが走り出して時間がかかりすぎる。あるいは　最適化のために、わざと走らせているのか。</p>

<h1>
<span id="クリーンしよう" class="fragment"></span><a href="#%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%81%97%E3%82%88%E3%81%86"><i class="fa fa-link"></i></a>クリーンしよう</h1>

<p>2回目の make publish をしようとしたら</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>Illegal instruction
</code></pre></div></div>

<p>とか言われて止まってしまう。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>make clean
</code></pre></div></div>

<p>とでもすればいいのか？</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>cd ..
ls obj
</code></pre></div></div>

<p>objディレクトリの中を空っぽにしてくれたみたいだ。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>make publish
</code></pre></div></div>

<p>よし、またコンパイルが走り出した。</p>

<h1>
<span id="イリーガルインストラクション" class="fragment"></span><a href="#%E3%82%A4%E3%83%AA%E3%83%BC%E3%82%AC%E3%83%AB%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%A9%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3"><i class="fa fa-link"></i></a>イリーガル　インストラクション</h1>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>./apery
Illegal instruction
</code></pre></div></div>

<p>うまくいかないものだ。</p>

<p>apery を bin フォルダーに移動するとどうだろうか？</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>mv apery ../bin/apery
ls
ls ../bin
apery
</code></pre></div></div>

<p>よし。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>../bin/apery
Illegal instruction
</code></pre></div></div>

<p>どこか壊してしまったのか、評価ファイルが無いかなのだろうか？</p>

<h1>
<span id="makefile-と-make-publish" class="fragment"></span><a href="#makefile-%E3%81%A8-make-publish"><i class="fa fa-link"></i></a>Makefile と make publish</h1>

<p><strong>うん？</strong> Makefile に何か書いてるぞ。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>#CFLAGS   += -march=native # make publish の時はここをコメントアウトする必要がある。
</code></pre></div></div>

<p>コメントアウトしてるよなあ。頭に # が付いてるし。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>make publish
</code></pre></div></div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>make profgen
make[1]: Entering directory '/home/csg10/shogi/apery-SDT4/src'
make CFLAGS='-std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov' LDFLAGS='-lpthread  -fprofile-generate -lgcov' bmi2
make[2]: Entering directory '/home/csg10/shogi/apery-SDT4/src'
make CFLAGS='-std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE4 -DHAVE_SSE42 -DHAVE_BMI2 -msse4.2 -mbmi2 -DHAVE_AVX2 -mavx2' LDFLAGS='-lpthread  -fprofile-generate -lgcov -flto' apery
make[3]: Entering directory '/home/csg10/shogi/apery-SDT4/src'
g++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE4 -DHAVE_SSE42 -DHAVE_BMI2 -msse4.2 -mbmi2 -DHAVE_AVX2 -mavx2  -o ../obj/main.o -c main.cpp
g++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE4 -DHAVE_SSE42 -DHAVE_BMI2 -msse4.2 -mbmi2 -DHAVE_AVX2 -mavx2  -o ../obj/bitboard.o -c bitboard.cpp
g++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE4 -DHAVE_SSE42 -DHAVE_BMI2 -msse4.2 -mbmi2 -DHAVE_AVX2 -mavx2  -o ../obj/init.o -c init.cpp
g++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE4 -DHAVE_SSE42 -DHAVE_BMI2 -msse4.2 -mbmi2 -DHAVE_AVX2 -mavx2  -o ../obj/mt64bit.o -c mt64bit.cpp
g++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE4 -DHAVE_SSE42 -DHAVE_BMI2 -msse4.2 -mbmi2 -DHAVE_AVX2 -mavx2  -o ../obj/position.o -c position.cpp
g++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE4 -DHAVE_SSE42 -DHAVE_BMI2 -msse4.2 -mbmi2 -DHAVE_AVX2 -mavx2  -o ../obj/evalList.o -c evalList.cpp
g++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE4 -DHAVE_SSE42 -DHAVE_BMI2 -msse4.2 -mbmi2 -DHAVE_AVX2 -mavx2  -o ../obj/move.o -c move.cpp
g++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE4 -DHAVE_SSE42 -DHAVE_BMI2 -msse4.2 -mbmi2 -DHAVE_AVX2 -mavx2  -o ../obj/movePicker.o -c movePicker.cpp
g++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE4 -DHAVE_SSE42 -DHAVE_BMI2 -msse4.2 -mbmi2 -DHAVE_AVX2 -mavx2  -o ../obj/square.o -c square.cpp
g++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE4 -DHAVE_SSE42 -DHAVE_BMI2 -msse4.2 -mbmi2 -DHAVE_AVX2 -mavx2  -o ../obj/usi.o -c usi.cpp
g++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE4 -DHAVE_SSE42 -DHAVE_BMI2 -msse4.2 -mbmi2 -DHAVE_AVX2 -mavx2  -o ../obj/generateMoves.o -c generateMoves.cpp
g++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE4 -DHAVE_SSE42 -DHAVE_BMI2 -msse4.2 -mbmi2 -DHAVE_AVX2 -mavx2  -o ../obj/evaluate.o -c evaluate.cpp
g++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE4 -DHAVE_SSE42 -DHAVE_BMI2 -msse4.2 -mbmi2 -DHAVE_AVX2 -mavx2  -o ../obj/search.o -c search.cpp
g++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE4 -DHAVE_SSE42 -DHAVE_BMI2 -msse4.2 -mbmi2 -DHAVE_AVX2 -mavx2  -o ../obj/hand.o -c hand.cpp
g++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE4 -DHAVE_SSE42 -DHAVE_BMI2 -msse4.2 -mbmi2 -DHAVE_AVX2 -mavx2  -o ../obj/tt.o -c tt.cpp
g++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE4 -DHAVE_SSE42 -DHAVE_BMI2 -msse4.2 -mbmi2 -DHAVE_AVX2 -mavx2  -o ../obj/timeManager.o -c timeManager.cpp
g++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE4 -DHAVE_SSE42 -DHAVE_BMI2 -msse4.2 -mbmi2 -DHAVE_AVX2 -mavx2  -o ../obj/book.o -c book.cpp
g++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE4 -DHAVE_SSE42 -DHAVE_BMI2 -msse4.2 -mbmi2 -DHAVE_AVX2 -mavx2  -o ../obj/benchmark.o -c benchmark.cpp
g++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE4 -DHAVE_SSE42 -DHAVE_BMI2 -msse4.2 -mbmi2 -DHAVE_AVX2 -mavx2  -o ../obj/thread.o -c thread.cpp
g++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE4 -DHAVE_SSE42 -DHAVE_BMI2 -msse4.2 -mbmi2 -DHAVE_AVX2 -mavx2  -o ../obj/common.o -c common.cpp
g++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE4 -DHAVE_SSE42 -DHAVE_BMI2 -msse4.2 -mbmi2 -DHAVE_AVX2 -mavx2  -o ../obj/pieceScore.o -c pieceScore.cpp
g++ -o apery ../obj/main.o ../obj/bitboard.o ../obj/init.o ../obj/mt64bit.o ../obj/position.o ../obj/evalList.o ../obj/move.o ../obj/movePicker.o ../obj/square.o ../obj/usi.o ../obj/generateMoves.o ../obj/evaluate.o ../obj/search.o ../obj/hand.o ../obj/tt.o ../obj/timeManager.o ../obj/book.o ../obj/benchmark.o ../obj/thread.o ../obj/common.o ../obj/pieceScore.o -lpthread  -fprofile-generate -lgcov -flto -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE4 -DHAVE_SSE42 -DHAVE_BMI2 -msse4.2 -mbmi2 -DHAVE_AVX2 -mavx2
make[3]: Leaving directory '/home/csg10/shogi/apery-SDT4/src'
make[2]: Leaving directory '/home/csg10/shogi/apery-SDT4/src'
make[1]: Leaving directory '/home/csg10/shogi/apery-SDT4/src'
Makefile:86: recipe for target 'publish' failed
make: *** [publish] Illegal instruction
</code></pre></div></div>

<p>じゃあ、</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>make clean
make profgen_sse
</code></pre></div></div>

<p>こんどはコンパイルできたか？</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>ls
～略～
echo 'usi' | ./apery
id name ukamuse_SDT4
id author Hiraoka Takuya

option name Best_Book_Move type check default false
option name Book_File type string default book/20150503/book.bin
option name Byoyomi_Margin type spin default 500 min 0 max 2147483647
option name Clear_Hash type button
option name Draw_Ply type spin default 256 min 1 max 2147483647
option name Engine_Name type string default ukamuse_SDT4
option name Max_Book_Ply type spin default 32767 min 0 max 32767
option name Max_Random_Score_Diff type spin default 0 min 0 max 32600
option name Max_Random_Score_Diff_Ply type spin default 32767 min 0 max 32767
option name Min_Book_Ply type spin default 32767 min 0 max 32767
option name Min_Book_Score type spin default -180 min -32601 max 32601
option name Minimum_Thinking_Time type spin default 20 min 0 max 2147483647
option name Move_Overhead type spin default 30 min 0 max 5000
option name MultiPV type spin default 1 min 1 max 594
option name OwnBook type check default true
option name Slow_Mover type spin default 89 min 1 max 1000
option name Slow_Mover_10 type spin default 10 min 1 max 1000
option name Slow_Mover_16 type spin default 20 min 1 max 1000
option name Slow_Mover_20 type spin default 40 min 1 max 1000
option name Threads type spin default 2 min 1 max 256
option name Time_Margin type spin default 4500 min 0 max 2147483647
option name USI_Hash type spin default 256 min 1 max 1048576
option name USI_Ponder type check default true
usiok
</code></pre></div></div>

<p>よし！</p>

<h1>
<span id="ベンチマークを取ってみよう" class="fragment"></span><a href="#%E3%83%99%E3%83%B3%E3%83%81%E3%83%9E%E3%83%BC%E3%82%AF%E3%82%92%E5%8F%96%E3%81%A3%E3%81%A6%E3%81%BF%E3%82%88%E3%81%86"><i class="fa fa-link"></i></a>ベンチマークを取ってみよう</h1>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>./apery &amp;
[3] 2508
</code></pre></div></div>

<p>どうも　このとき、私はコピペをしようとして [Ctrl] + [C] を押していて、プロセスを落としている気がする。<br>
やりなおし。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>./apery &amp;
[4] 2511
</code></pre></div></div>

<p>PuTTYでは、マウスドラッグでなぞるだけで　コピーはできるのだ。<br>
左ボタンクリックで貼り付け。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>echo 'bench' | ./apery

[4]+  Stopped                 ./apery
</code></pre></div></div>

<p>うーむ、こういう使い方じゃないのか？</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>./apery bench
Killed
</code></pre></div></div>

<p>これも違う。</p>

<p>ソースコードを読んでいるんだが、そういや、きふわらぷりーを作っているとき、.exe と一緒のフォルダーに benchmark.sfen ファイルが無かったら落ちてたなあ。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>ls
apery           evaluate.cpp       move.hpp                   search.hpp
benchmark.cpp   evaluate.hpp       movePicker.cpp             square.cpp
benchmark.hpp   generateMoves.cpp  movePicker.hpp             square.hpp
benchmark.sfen  generateMoves.hpp  mt64bit.cpp                thread.cpp
bitboard.cpp    hand.cpp           mt64bit.hpp                thread.hpp
bitboard.hpp    hand.hpp           overloadEnumOperators.hpp  timeManager.cpp
book.cpp        ifdef.hpp          piece.hpp                  timeManager.hpp
book.hpp        init.cpp           pieceScore.cpp             tt.cpp
color.hpp       init.hpp           pieceScore.hpp             tt.hpp
common.cpp      learner.hpp        position.cpp               usi.cpp
common.hpp      main.cpp           position.hpp               usi.hpp
evalList.cpp    Makefile           score.hpp
evalList.hpp    move.cpp           search.cpp
</code></pre></div></div>

<p>ある。じゃあ、apery と benchmark.sfen を bin フォルダーに持っていけばいいのだろうか？</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>mv apery ../bin/apery
mv benchmark.sfen ../bin/benchmark.sfen
ls ../bin
apery  benchmark.sfen
</code></pre></div></div>

<p>これでどうか？</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>../bin/apery bench
Killed
</code></pre></div></div>

<p>だめなのか。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>../bin/apery bench &amp;
[5] 2571
</code></pre></div></div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>[1]   Stopped                 ./apery
[2]   Stopped                 ./apery
[3]-  Stopped                 ./apery
[4]+  Stopped                 ./apery
[5]   Killed                  ../bin/apery bench
</code></pre></div></div>

<p>Killed と Stopped の違いはなんだろうか。</p>

<h1>
<span id="きふわらぷりーで-bench" class="fragment"></span><a href="#%E3%81%8D%E3%81%B5%E3%82%8F%E3%82%89%E3%81%B7%E3%82%8A%E3%83%BC%E3%81%A7-bench"><i class="fa fa-link"></i></a>きふわらぷりーで bench</h1>

<p>大樹の枝を改悪した　きふわらぷりー　だと、まず Kifuwarapery.exe をダブルクリックしてコマンドプロンプトを出し、<br>
しばらく待って入力できる状態になってから bench と入力して[Enter]キーを押すとベンチマークが走り出す。</p>

<p>浮かむ瀬も同じかと思うんだが……。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>./apery
</code></pre></div></div>

<p>のあと、すぐ Killed になっているんじゃないだろうか？</p>

<p>aperyのmain.cppにあるmain関数は</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>// 将棋を指すソフト
int main(int argc, char* argv[]) {
    initTable();
    Position::initZobrist();
    HuffmanCodedPos::init();
    auto s = std::unique_ptr&lt;Searcher&gt;(new Searcher);
    s-&gt;init();
    s-&gt;doUSICommandLoop(argc, argv);
    s-&gt;threads.exit();
}
</code></pre></div></div>

<p>なので、 コマンド・ループで止まっていてくれると思うんだが……、調べてみるか。</p>

<div class="code-frame" data-lang="C++"><div class="highlight"><pre class="with-code"><code><span class="kt">void</span> <span class="n">Searcher</span><span class="o">::</span><span class="n">doUSICommandLoop</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span><span class="o">*</span> <span class="n">argv</span><span class="p">[])</span> <span class="p">{</span>
    <span class="kt">bool</span> <span class="n">evalTableIsRead</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
    <span class="n">Position</span> <span class="n">pos</span><span class="p">(</span><span class="n">DefaultStartPositionSFEN</span><span class="p">,</span> <span class="n">threads</span><span class="p">.</span><span class="n">main</span><span class="p">(),</span> <span class="n">thisptr</span><span class="p">);</span>

    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">cmd</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">token</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">argc</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span>
        <span class="n">cmd</span> <span class="o">+=</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">+</span> <span class="s">" "</span><span class="p">;</span>

    <span class="k">do</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">argc</span> <span class="o">==</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">std</span><span class="o">::</span><span class="n">getline</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">cin</span><span class="p">,</span> <span class="n">cmd</span><span class="p">))</span>
            <span class="n">cmd</span> <span class="o">=</span> <span class="s">"quit"</span><span class="p">;</span>

        <span class="n">std</span><span class="o">::</span><span class="n">istringstream</span> <span class="n">ssCmd</span><span class="p">(</span><span class="n">cmd</span><span class="p">);</span>

        <span class="n">ssCmd</span> <span class="o">&gt;&gt;</span> <span class="n">std</span><span class="o">::</span><span class="n">skipws</span> <span class="o">&gt;&gt;</span> <span class="n">token</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">token</span> <span class="o">==</span> <span class="s">"quit"</span> <span class="o">||</span> <span class="n">token</span> <span class="o">==</span> <span class="s">"stop"</span> <span class="o">||</span> <span class="n">token</span> <span class="o">==</span> <span class="s">"ponderhit"</span> <span class="o">||</span> <span class="n">token</span> <span class="o">==</span> <span class="s">"gameover"</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">token</span> <span class="o">!=</span> <span class="s">"ponderhit"</span> <span class="o">||</span> <span class="n">signals</span><span class="p">.</span><span class="n">stopOnPonderHit</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">signals</span><span class="p">.</span><span class="n">stop</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
                <span class="n">threads</span><span class="p">.</span><span class="n">main</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">startSearching</span><span class="p">(</span><span class="nb">true</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">else</span>
                <span class="n">limits</span><span class="p">.</span><span class="n">ponder</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">token</span> <span class="o">==</span> <span class="s">"ponderhit"</span> <span class="o">&amp;&amp;</span> <span class="n">limits</span><span class="p">.</span><span class="n">moveTime</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span>
                <span class="n">limits</span><span class="p">.</span><span class="n">moveTime</span> <span class="o">+=</span> <span class="n">timeManager</span><span class="p">.</span><span class="n">elapsed</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">token</span> <span class="o">==</span> <span class="s">"go"</span>       <span class="p">)</span> <span class="n">go</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="n">ssCmd</span><span class="p">);</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">token</span> <span class="o">==</span> <span class="s">"position"</span> <span class="p">)</span> <span class="n">setPosition</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="n">ssCmd</span><span class="p">);</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">token</span> <span class="o">==</span> <span class="s">"usinewgame"</span><span class="p">);</span> <span class="c1">// isready で準備は出来たので、対局開始時に特にする事はない。</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">token</span> <span class="o">==</span> <span class="s">"usi"</span>      <span class="p">)</span> <span class="n">SYNCCOUT</span> <span class="o">&lt;&lt;</span> <span class="s">"id name "</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">(</span><span class="n">options</span><span class="p">[</span><span class="s">"Engine_Name"</span><span class="p">])</span>
                                                <span class="o">&lt;&lt;</span> <span class="s">"</span><span class="se">\n</span><span class="s">id author Hiraoka Takuya"</span>
                                                <span class="o">&lt;&lt;</span> <span class="s">"</span><span class="se">\n</span><span class="s">"</span> <span class="o">&lt;&lt;</span> <span class="n">options</span>
                                                <span class="o">&lt;&lt;</span> <span class="s">"</span><span class="se">\n</span><span class="s">usiok"</span> <span class="o">&lt;&lt;</span> <span class="n">SYNCENDL</span><span class="p">;</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">token</span> <span class="o">==</span> <span class="s">"isready"</span>  <span class="p">)</span> <span class="p">{</span> <span class="c1">// 対局開始前の準備。</span>
            <span class="n">tt</span><span class="p">.</span><span class="n">clear</span><span class="p">();</span>
            <span class="n">threads</span><span class="p">.</span><span class="n">main</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">previousScore</span> <span class="o">=</span> <span class="n">ScoreInfinite</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">evalTableIsRead</span><span class="p">)</span> <span class="p">{</span>
                <span class="c1">// 一時オブジェクトを生成して Evaluator::init() を呼んだ直後にオブジェクトを破棄する。</span>
                <span class="c1">// 評価関数の次元下げをしたデータを格納する分のメモリが無駄な為、</span>
                <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">Evaluator</span><span class="o">&gt;</span><span class="p">(</span><span class="k">new</span> <span class="n">Evaluator</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">init</span><span class="p">(</span><span class="n">Evaluator</span><span class="o">::</span><span class="n">evalDir</span><span class="p">,</span> <span class="nb">true</span><span class="p">);</span>
                <span class="n">evalTableIsRead</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="n">SYNCCOUT</span> <span class="o">&lt;&lt;</span> <span class="s">"readyok"</span> <span class="o">&lt;&lt;</span> <span class="n">SYNCENDL</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">token</span> <span class="o">==</span> <span class="s">"setoption"</span><span class="p">)</span> <span class="n">setOption</span><span class="p">(</span><span class="n">ssCmd</span><span class="p">);</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">token</span> <span class="o">==</span> <span class="s">"write_eval"</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// 対局で使う為の評価関数バイナリをファイルに書き出す。</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">evalTableIsRead</span><span class="p">)</span>
                <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">Evaluator</span><span class="o">&gt;</span><span class="p">(</span><span class="k">new</span> <span class="n">Evaluator</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">init</span><span class="p">(</span><span class="n">Evaluator</span><span class="o">::</span><span class="n">evalDir</span><span class="p">,</span> <span class="nb">true</span><span class="p">);</span>
            <span class="n">Evaluator</span><span class="o">::</span><span class="n">writeSynthesized</span><span class="p">(</span><span class="n">Evaluator</span><span class="o">::</span><span class="n">evalDir</span><span class="p">);</span>
        <span class="p">}</span>
<span class="cp">#if defined LEARN
</span>        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">token</span> <span class="o">==</span> <span class="s">"l"</span>        <span class="p">)</span> <span class="p">{</span>
            <span class="k">auto</span> <span class="n">learner</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">Learner</span><span class="o">&gt;</span><span class="p">(</span><span class="k">new</span> <span class="n">Learner</span><span class="p">);</span>
            <span class="n">learner</span><span class="o">-&gt;</span><span class="n">learn</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="n">ssCmd</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">token</span> <span class="o">==</span> <span class="s">"make_teacher"</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">evalTableIsRead</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">Evaluator</span><span class="o">&gt;</span><span class="p">(</span><span class="k">new</span> <span class="n">Evaluator</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">init</span><span class="p">(</span><span class="n">Evaluator</span><span class="o">::</span><span class="n">evalDir</span><span class="p">,</span> <span class="nb">true</span><span class="p">);</span>
                <span class="n">evalTableIsRead</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="n">make_teacher</span><span class="p">(</span><span class="n">ssCmd</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">token</span> <span class="o">==</span> <span class="s">"use_teacher"</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">evalTableIsRead</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">Evaluator</span><span class="o">&gt;</span><span class="p">(</span><span class="k">new</span> <span class="n">Evaluator</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">init</span><span class="p">(</span><span class="n">Evaluator</span><span class="o">::</span><span class="n">evalDir</span><span class="p">,</span> <span class="nb">true</span><span class="p">);</span>
                <span class="n">evalTableIsRead</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="n">use_teacher</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="n">ssCmd</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">token</span> <span class="o">==</span> <span class="s">"check_teacher"</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">check_teacher</span><span class="p">(</span><span class="n">ssCmd</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">token</span> <span class="o">==</span> <span class="s">"print"</span>    <span class="p">)</span> <span class="n">printEvalTable</span><span class="p">(</span><span class="n">SQ88</span><span class="p">,</span> <span class="n">f_gold</span> <span class="o">+</span> <span class="n">SQ78</span><span class="p">,</span> <span class="n">f_gold</span><span class="p">,</span> <span class="nb">false</span><span class="p">);</span>
<span class="cp">#endif
#if !defined MINIMUL
</span>        <span class="c1">// 以下、デバッグ用</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">token</span> <span class="o">==</span> <span class="s">"bench"</span>    <span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">evalTableIsRead</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">Evaluator</span><span class="o">&gt;</span><span class="p">(</span><span class="k">new</span> <span class="n">Evaluator</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">init</span><span class="p">(</span><span class="n">Evaluator</span><span class="o">::</span><span class="n">evalDir</span><span class="p">,</span> <span class="nb">true</span><span class="p">);</span>
                <span class="n">evalTableIsRead</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="n">benchmark</span><span class="p">(</span><span class="n">pos</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">token</span> <span class="o">==</span> <span class="s">"key"</span>      <span class="p">)</span> <span class="n">SYNCCOUT</span> <span class="o">&lt;&lt;</span> <span class="n">pos</span><span class="p">.</span><span class="n">getKey</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">SYNCENDL</span><span class="p">;</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">token</span> <span class="o">==</span> <span class="s">"tosfen"</span>   <span class="p">)</span> <span class="n">SYNCCOUT</span> <span class="o">&lt;&lt;</span> <span class="n">pos</span><span class="p">.</span><span class="n">toSFEN</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">SYNCENDL</span><span class="p">;</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">token</span> <span class="o">==</span> <span class="s">"eval"</span>     <span class="p">)</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">evaluateUnUseDiff</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span> <span class="o">/</span> <span class="n">FVScale</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">token</span> <span class="o">==</span> <span class="s">"d"</span>        <span class="p">)</span> <span class="n">pos</span><span class="p">.</span><span class="n">print</span><span class="p">();</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">token</span> <span class="o">==</span> <span class="s">"s"</span>        <span class="p">)</span> <span class="n">measureGenerateMoves</span><span class="p">(</span><span class="n">pos</span><span class="p">);</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">token</span> <span class="o">==</span> <span class="s">"t"</span>        <span class="p">)</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">pos</span><span class="p">.</span><span class="n">mateMoveIn1Ply</span><span class="p">().</span><span class="n">toCSA</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">token</span> <span class="o">==</span> <span class="s">"b"</span>        <span class="p">)</span> <span class="n">makeBook</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="n">ssCmd</span><span class="p">);</span>
<span class="cp">#endif
</span>        <span class="k">else</span>                           <span class="n">SYNCCOUT</span> <span class="o">&lt;&lt;</span> <span class="s">"unknown command: "</span> <span class="o">&lt;&lt;</span> <span class="n">cmd</span> <span class="o">&lt;&lt;</span> <span class="n">SYNCENDL</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="n">token</span> <span class="o">!=</span> <span class="s">"quit"</span> <span class="o">&amp;&amp;</span> <span class="n">argc</span> <span class="o">==</span> <span class="mi">1</span><span class="p">);</span>

    <span class="n">threads</span><span class="p">.</span><span class="n">main</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">waitForSearchFinished</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div></div>

<p>うーむ。Windowsの実行と、Linuxの実行に違いはあるのだろうか。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>Makefile:86: recipe for target 'publish' failed
make: *** [publish] Killed
</code></pre></div></div>

<p>うーむ。よく Killed が出てくるようになった。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>jobs
[1]   Stopped                 ./apery
[2]   Stopped                 ./apery
[3]   Stopped                 ./apery
[4]   Stopped                 ./apery
[5]-  Stopped                 ./apery  (wd: /home/csg10/shogi/apery-SDT4/bin)
[6]+  Stopped                 ./apery  (wd: /home/csg10/shogi/apery-SDT4/bin)
</code></pre></div></div>

<p>この Stopped が溜まっているのはいいのだろうか？</p>

<h1>
<span id="killコマンドを使ってみよう" class="fragment"></span><a href="#kill%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E3%81%BF%E3%82%88%E3%81%86"><i class="fa fa-link"></i></a>killコマンドを使ってみよう</h1>

<p>「バックグラウンドプロセス(ジョブ)の管理Add Star」 （satake7’s memo）<br>
<a href="http://d.hatena.ne.jp/satake7/20080606/p1" class="autolink" rel="nofollow noopener" target="_blank">http://d.hatena.ne.jp/satake7/20080606/p1</a></p>

<p>こうだろうか。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>kill %1
</code></pre></div></div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>jobs
[1]   Terminated              ./apery
[2]   Stopped                 ./apery
[3]   Stopped                 ./apery
[4]   Stopped                 ./apery
[5]-  Stopped                 ./apery  (wd: /home/csg10/shogi/apery-SDT4/bin)
[6]+  Stopped                 ./apery  (wd: /home/csg10/shogi/apery-SDT4/bin)
</code></pre></div></div>

<p>Stopped が Terminated に変わったが、なんのこっちゃ。<br>
この調子で全部のジョブをkillした。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>jobs
make clean
make publish
</code></pre></div></div>

<p>だめか。</p>

<h1>
<span id="profgen_sse2" class="fragment"></span><a href="#profgen_sse2"><i class="fa fa-link"></i></a>profgen_sse2</h1>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>    make clean
    make profgen_sse2
</code></pre></div></div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>make CFLAGS='-std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov' LDFLAGS='-lpthread  -fprofile-generate -lgcov' sse2
make[1]: Entering directory '/home/csg10/shogi/apery-SDT4/src'
make CFLAGS='-std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE2 -msse2' LDFLAGS='-lpthread  -fprofile-generate -lgcov -flto' apery
make[2]: Entering directory '/home/csg10/shogi/apery-SDT4/src'
g++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE2 -msse2  -o ../obj/main.o -c main.cpp
g++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE2 -msse2  -o ../obj/bitboard.o -c bitboard.cpp
g++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE2 -msse2  -o ../obj/init.o -c init.cpp
g++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE2 -msse2  -o ../obj/mt64bit.o -c mt64bit.cpp
g++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE2 -msse2  -o ../obj/position.o -c position.cpp
g++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE2 -msse2  -o ../obj/evalList.o -c evalList.cpp
g++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE2 -msse2  -o ../obj/move.o -c move.cpp
g++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE2 -msse2  -o ../obj/movePicker.o -c movePicker.cpp
g++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE2 -msse2  -o ../obj/square.o -c square.cpp
g++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE2 -msse2  -o ../obj/usi.o -c usi.cpp
g++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE2 -msse2  -o ../obj/generateMoves.o -c generateMoves.cpp
g++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE2 -msse2  -o ../obj/evaluate.o -c evaluate.cpp
g++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE2 -msse2  -o ../obj/search.o -c search.cpp
g++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE2 -msse2  -o ../obj/hand.o -c hand.cpp
g++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE2 -msse2  -o ../obj/tt.o -c tt.cpp
g++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE2 -msse2  -o ../obj/timeManager.o -c timeManager.cpp
g++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE2 -msse2  -o ../obj/book.o -c book.cpp
g++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE2 -msse2  -o ../obj/benchmark.o -c benchmark.cpp
g++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE2 -msse2  -o ../obj/thread.o -c thread.cpp
g++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE2 -msse2  -o ../obj/common.o -c common.cpp
g++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE2 -msse2  -o ../obj/pieceScore.o -c pieceScore.cpp
g++ -o apery ../obj/main.o ../obj/bitboard.o ../obj/init.o ../obj/mt64bit.o ../obj/position.o ../obj/evalList.o ../obj/move.o ../obj/movePicker.o ../obj/square.o ../obj/usi.o ../obj/generateMoves.o ../obj/evaluate.o ../obj/search.o ../obj/hand.o ../obj/tt.o ../obj/timeManager.o ../obj/book.o ../obj/benchmark.o ../obj/thread.o ../obj/common.o ../obj/pieceScore.o -lpthread  -fprofile-generate -lgcov -flto -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE2 -msse2
make[2]: Leaving directory '/home/csg10/shogi/apery-SDT4/src'
make[1]: Leaving directory '/home/csg10/shogi/apery-SDT4/src'
</code></pre></div></div>

<p>これは　うまくいったんじゃないか？</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>./apery &amp;
[1] 3144
jobs
[1]+  Stopped                 ./apery
</code></pre></div></div>

<p>だめか。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>./apery bench
info string start setting eval table
info string end setting eval table
</code></pre></div></div>

<p>なんのこっちゃ。今までよりは　反応があるだけマシか。</p>

<p>どうも、メインループからすぐ抜けてしまうのか、Stopped になってしまうようだ。</p>

<h1>
<span id="評価関数ファイルが無いんじゃないか" class="fragment"></span><a href="#%E8%A9%95%E4%BE%A1%E9%96%A2%E6%95%B0%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%8C%E7%84%A1%E3%81%84%E3%82%93%E3%81%98%E3%82%83%E3%81%AA%E3%81%84%E3%81%8B"><i class="fa fa-link"></i></a>評価関数ファイルが無いんじゃないか？</h1>

<p>きふわらぷりーは　どうやって動いてるのか　調べてみよう……。</p>

<p>評価ファイルを作る make_synthesized_eval.sh みたいなファイルを .bat に書き直して 20151105 フォルダーに KPP_synthesized.bin、KK_synthesized.bin、KKP_synthesized.bin の３つのバイナリを生成している。</p>

<p>調べよう。</p>

<h1>
<span id="ukamuse_sdt4zip" class="fragment"></span><a href="#ukamuse_sdt4zip"><i class="fa fa-link"></i></a>ukamuse_sdt4.zip</h1>

<p>ukamuse_sdt4.zip というバイナリもあるみたいだ。なんだこれ。FileZilla で Linuxサーバー へ転送して unzip してみよう。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>unzip ukamuse_sdt4.zip
</code></pre></div></div>

<p>inflating:<br>
とか<br>
creating:<br>
とか出てくるが何だろうか。</p>

<p>あら、ukamuse_sdt4 にも src が入っている。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>ls
20161007  ukamuse_sdt4_bmi2.exe  ukamuse_sdt4_sse2.exe  ukamuse_sdt4_sse41.exe  ukamuse_sdt4_sse42.exe
</code></pre></div></div>

<p>そして .bin の中には exe も入っているが、Linux で使うのだろうか？</p>

<p>20161007 フォルダーの中には</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>ls
KKP_synthesized.bin  KPP_synthesized.bin  log_v1.10.0.txt  log_v1.1.1.txt   log_v1.13.0.txt  log_v1.2.0_2.txt  log_v1.3.0.txt  log_v1.5.0.txt  log_v1.7.0.txt
KK_synthesized.bin   log_v1.0.3.txt       log_v1.11.0.txt  log_v1.12.0.txt  log_v1.14.0.txt  log_v1.2.0.txt    log_v1.4.0.txt  log_v1.6.0.txt  log_v1.8.1.txt
</code></pre></div></div>

<p>と、いろいろ入っている。じゃあ ukamuse_sdt4 フォルダーの中で Linux用にコンパイルし直したらいいのだろうか？</p>

<p>じゃあ src ディレクトリーで</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>make publish
～中略～
Makefile:86: recipe for target 'publish' failed
make: *** [publish] Illegal instruction
</code></pre></div></div>

<p>なんか CPU が対応してないんじゃないか。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>make clean
make profgen_sse2
</code></pre></div></div>

<p>これならコンパイルが通る。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>mv apery ../bin/apery
ls
20161007  apery  ukamuse_sdt4_bmi2.exe  ukamuse_sdt4_sse2.exe  ukamuse_sdt4_sse41.exe  ukamuse_sdt4_sse42.exe
</code></pre></div></div>

<p>これでどうか。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>./apery
</code></pre></div></div>

<p>よし、ループでブロック（ループを抜けない）されてる感じがする。[Ctrl]+[C]で抜ける。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>./apery bench
</code></pre></div></div>

<p>数秒でループを抜けたようだ。よく分からない。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>./apery
</code></pre></div></div>

<p>これでしばらく待つ。<br>
なんも起こらない。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>./apery &amp;
[1] 3459
jobs
[1]+  Stopped                 ./apery
</code></pre></div></div>

<p>だめか。</p>

<p>src/evaluate.cpp ファイルには </p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>std::string Evaluator::evalDir = "20161007";
</code></pre></div></div>

<p>と書いているので、フォルダー名は合っているのだろう。<br>
じゃあ次は src ディレクトリで</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>cp benchmark.sfen ../bin/benchmark.sfen
</code></pre></div></div>

<p>を実行。</p>

<h1>
<span id="あっbench-動いた" class="fragment"></span><a href="#%E3%81%82%E3%81%A3bench-%E5%8B%95%E3%81%84%E3%81%9F"><i class="fa fa-link"></i></a>あっ、bench 動いた。</h1>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>./apery bench
</code></pre></div></div>

<p>今度は bench が実行された。テスト用の局面に対して　読み筋がどんどん並んでいる。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>info depth 16 seldepth 37 multipv 1 score cp -562 upperbound nodes 1866534 nps 206978 time 9018 pv 6g6h+ 5h4i 6h6g S*5b 3a4b 5b4c+ 4b4c 6f6e 6g5g 6e7d B*6g 4i3h 6g5f+ 7d6d 5g4g 3h2g 2b5e R*5a
info nodes 1950370 time 9518
bestmove 6g6h+ ponder 5h4i
</code></pre></div></div>

<h1>
<span id="じゃあ対局はどうか" class="fragment"></span><a href="#%E3%81%98%E3%82%83%E3%81%82%E5%AF%BE%E5%B1%80%E3%81%AF%E3%81%A9%E3%81%86%E3%81%8B"><i class="fa fa-link"></i></a>じゃあ対局はどうか？</h1>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>./apery usi &amp;
[2] 3510
</code></pre></div></div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>id name ukamuse_SDT4
id author Hiraoka Takuya

option name Best_Book_Move type check default false
option name Book_File type string default book/20150503/book.bin
option name Byoyomi_Margin type spin default 500 min 0 max 2147483647
option name Clear_Hash type button
option name Draw_Ply type spin default 256 min 1 max 2147483647
option name Engine_Name type string default ukamuse_SDT4
option name Max_Book_Ply type spin default 32767 min 0 max 32767
option name Max_Random_Score_Diff type spin default 0 min 0 max 32600
option name Max_Random_Score_Diff_Ply type spin default 32767 min 0 max 32767
option name Min_Book_Ply type spin default 32767 min 0 max 32767
option name Min_Book_Score type spin default -180 min -32601 max 32601
option name Minimum_Thinking_Time type spin default 20 min 0 max 2147483647
option name Move_Overhead type spin default 30 min 0 max 5000
option name MultiPV type spin default 1 min 1 max 594
option name OwnBook type check default true
option name Slow_Mover type spin default 89 min 1 max 1000
option name Slow_Mover_10 type spin default 10 min 1 max 1000
option name Slow_Mover_16 type spin default 20 min 1 max 1000
option name Slow_Mover_20 type spin default 40 min 1 max 1000
option name Threads type spin default 2 min 1 max 256
option name Time_Margin type spin default 4500 min 0 max 2147483647
option name USI_Hash type spin default 256 min 1 max 1048576
option name USI_Ponder type check default true
usiok
</code></pre></div></div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>jobs
[1]+  Stopped                 ./apery
[2]-  Done                    ./apery usi
</code></pre></div></div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code> jobs
[1]+  Stopped                 ./apery
</code></pre></div></div>

<p>Done じゃないんだが……。常駐してほしいんだが……。</p>

<p>「○自作プログラムをデーモンとして起動させる」<br>
<a href="http://7ujm.net/linux/daemon.html" class="autolink" rel="nofollow noopener" target="_blank">http://7ujm.net/linux/daemon.html</a></p>

<p>将棋プログラムは　デーモンなのか？</p>

<h1>
<span id="メインループに入っているのでは" class="fragment"></span><a href="#%E3%83%A1%E3%82%A4%E3%83%B3%E3%83%AB%E3%83%BC%E3%83%97%E3%81%AB%E5%85%A5%E3%81%A3%E3%81%A6%E3%81%84%E3%82%8B%E3%81%AE%E3%81%A7%E3%81%AF"><i class="fa fa-link"></i></a>メインループに入っているのでは？</h1>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>./apery
bench
</code></pre></div></div>

<p>のあと 右キーか何か押したら bench が走った。どういうことなのか。</p>

<p>bench と入れると bench が走るんだが、usi と入れても走らない。何が違うのか。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>unknown command:       usi
</code></pre></div></div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>eval
-243
</code></pre></div></div>

<p>eval はオッケーなのか。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>print
unknown command: print
</code></pre></div></div>

<p>print はダメなのか。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>key
4543979467506711947
</code></pre></div></div>

<p>key はオッケーなのか。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>tosfen
sfen l5knl/7b1/p3pg1gp/1pr3Pp1/5pS2/1PpGP4/2gpBPS1P/4K2R1/LN5NL w 2Sn5p 74
</code></pre></div></div>

<p>tosfen はオッケーなのか。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>d
'  9  8  7  6  5  4  3  2  1
P1-KY *  *  *  *  * -OU-KE-KY
P2 *  *  *  *  *  *  * -KA *
P3-FU *  *  * -FU-KI * -KI-FU
P4 * -FU-HI *  *  * +FU-FU *
P5 *  *  *  *  * -FU+GI *  *
P6 * +FU-FU+KI+FU *  *  *  *
P7 *  * -KI-FU+KA+FU+GI * +FU
P8 *  *  *  * +OU *  * +HI *
P9+KY+KE *  *  *  *  * +KE+KY
P+00GI00GI
P-00FU00FU00FU00FU00FU
P-00KE
-

key = 4543979467506711947
</code></pre></div></div>

<p>d もオッケーなのか。printはダメなのに。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>s
'  9  8  7  6  5  4  3  2  1
P1-KY *  *  *  *  * -OU-KE-KY
P2 *  *  *  *  *  *  * -KA *
P3-FU *  *  * -FU-KI * -KI-FU
P4 * -FU-HI *  *  * +FU-FU *
P5 *  *  *  *  * -FU+GI *  *
P6 * +FU-FU+KI+FU *  *  *  *
P7 *  * -KI-FU+KA+FU+GI * +FU
P8 *  *  *  * +OU *  * +HI *
P9+KY+KE *  *  *  *  * +KE+KY
P+00GI00GI
P-00FU00FU00FU00FU00FU
P-00KE
-

key = 4543979467506711947
elapsed = 2870 [msec]
times/s = 1742160 [times/sec]
num of moves = 78
6768TO, 2266KA, 7434HI, 2334KI, 4334KI, 1314FU, 2425FU, 4546FU, 5354FU, 8485FU, 9394FU, 1112KY, 9192KY, 2133KE, 2233KA, 2244KA, 2255KA, 7444HI, 7454HI, 7464HI, 7471HI, 7472HI, 7473HI, 7475HI, 2314KI, 2333KI, 4333KI, 4342KI, 4344KI, 4354KI, 7768KI, 7778KI, 7787KI, 7788KI, 3132OU, 3141OU, 3142OU, 0032FU, 0033FU, 0036FU, 0038FU, 0012KE, 0014KE, 0015KE, 0016KE, 0025KE, 0026KE, 0027KE, 0032KE, 0033KE, 0036KE, 0041KE, 0042KE, 0044KE, 0046KE, 0051KE, 0052KE, 0054KE, 0055KE, 0061KE, 0062KE, 0063KE, 0064KE, 0065KE, 0071KE, 0072KE, 0073KE, 0075KE, 0081KE, 0082KE, 0083KE, 0085KE, 0087KE, 0092KE, 0094KE, 0095KE, 0096KE, 0097KE,
</code></pre></div></div>

<p>s もいける。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>t
None
</code></pre></div></div>

<p>t もいける。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>b
I cannot open
</code></pre></div></div>

<p>b もいける。</p>

<p><strong>あーっ</strong>。</p>

<div class="code-frame" data-lang="C++"><div class="highlight"><pre class="with-code"><code><span class="cp">#if defined LEARN
</span></code></pre></div></div>

<p>print は 学習用のコマンドか。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>write_eval
</code></pre></div></div>

<p>あっ、時間かかりそう。 [Ctrl]+[C]。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>setoption
No such option:
</code></pre></div></div>

<p>setoption もいけてそう。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>isready
readyok
</code></pre></div></div>

<p>isready もいけてるじゃないか。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>usi
id name ukamuse_SDT4
id author Hiraoka Takuya

option name Best_Book_Move type check default false
option name Book_File type string default book/20150503/book.bin
option name Byoyomi_Margin type spin default 500 min 0 max 2147483647
option name Clear_Hash type button
option name Draw_Ply type spin default 256 min 1 max 2147483647
option name Engine_Name type string default ukamuse_SDT4
option name Max_Book_Ply type spin default 32767 min 0 max 32767
option name Max_Random_Score_Diff type spin default 0 min 0 max 32600
option name Max_Random_Score_Diff_Ply type spin default 32767 min 0 max 32767
option name Min_Book_Ply type spin default 32767 min 0 max 32767
option name Min_Book_Score type spin default -180 min -32601 max 32601
option name Minimum_Thinking_Time type spin default 20 min 0 max 2147483647
option name Move_Overhead type spin default 30 min 0 max 5000
option name MultiPV type spin default 1 min 1 max 594
option name OwnBook type check default true
option name Slow_Mover type spin default 89 min 1 max 1000
option name Slow_Mover_10 type spin default 10 min 1 max 1000
option name Slow_Mover_16 type spin default 20 min 1 max 1000
option name Slow_Mover_20 type spin default 40 min 1 max 1000
option name Threads type spin default 2 min 1 max 256
option name Time_Margin type spin default 4500 min 0 max 2147483647
option name USI_Hash type spin default 256 min 1 max 1048576
option name USI_Ponder type check default true
usiok
</code></pre></div></div>

<p>usi もいけてるじゃないか。</p>

<p>じゃあ、手動で対局できるか調べてみるか。もう一度最初から。</p>

<h1>
<span id="手動で対局しようぜ" class="fragment"></span><a href="#%E6%89%8B%E5%8B%95%E3%81%A7%E5%AF%BE%E5%B1%80%E3%81%97%E3%82%88%E3%81%86%E3%81%9C"><i class="fa fa-link"></i></a>手動で対局しようぜ</h1>

<p>私が打つ</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>./apery
usi
</code></pre></div></div>

<p>次、浮かむ瀬が返してくる。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>id name ukamuse_SDT4
id author Hiraoka Takuya

option name Best_Book_Move type check default false
option name Book_File type string default book/20150503/book.bin
option name Byoyomi_Margin type spin default 500 min 0 max 2147483647
option name Clear_Hash type button
option name Draw_Ply type spin default 256 min 1 max 2147483647
option name Engine_Name type string default ukamuse_SDT4
option name Max_Book_Ply type spin default 32767 min 0 max 32767
option name Max_Random_Score_Diff type spin default 0 min 0 max 32600
option name Max_Random_Score_Diff_Ply type spin default 32767 min 0 max 32767
option name Min_Book_Ply type spin default 32767 min 0 max 32767
option name Min_Book_Score type spin default -180 min -32601 max 32601
option name Minimum_Thinking_Time type spin default 20 min 0 max 2147483647
option name Move_Overhead type spin default 30 min 0 max 5000
option name MultiPV type spin default 1 min 1 max 594
option name OwnBook type check default true
option name Slow_Mover type spin default 89 min 1 max 1000
option name Slow_Mover_10 type spin default 10 min 1 max 1000
option name Slow_Mover_16 type spin default 20 min 1 max 1000
option name Slow_Mover_20 type spin default 40 min 1 max 1000
option name Threads type spin default 2 min 1 max 256
option name Time_Margin type spin default 4500 min 0 max 2147483647
option name USI_Hash type spin default 256 min 1 max 1048576
option name USI_Ponder type check default true
usiok
</code></pre></div></div>

<p>次、わたしが打つ。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>usinewgame
position startpos moves
go
</code></pre></div></div>

<p>次、浮かむ瀬が返してくる。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>info string optimum_time = 20
info string maximum_time = 20
info string book_ply 32767
info depth 1 seldepth 1 multipv 1 score cp 0 nodes 67 nps 1367 time 49 pv 1g1f
bestmove 1g1f
</code></pre></div></div>

<p>脳内で将棋盤をいじくる。1g1f というのは　１六歩　だが、なんで端歩を突くのか。<br>
じゃあ　１四歩　としよう。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>position sfen lnsgkgsnl/1b5r1/pppppppp1/8p/9/8P/PPPPPPPP1/1B5R1/LNSGKGSNL b - 1 moves 1g1f 1c1d
go
</code></pre></div></div>

<p>なんか 浮かむ瀬がノータイムで返してくる。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>info string optimum_time = 20
info string maximum_time = 20
info string book_ply 32767
info depth 1 seldepth 1 multipv 1 score cp 0 nodes 72 nps 3272 time 22 pv 2g2f
info depth 2 seldepth 2 multipv 1 score cp 0 nodes 195 nps 4062 time 48 pv 2g2f 2c2d
bestmove 2g2f ponder 2c2d
</code></pre></div></div>

<p>なぜ　ノータイムなのか。とりあえず　浮かむ瀬とは指せるようだ。<br>
じゃあ終了しよ……。<br>
私が打つ。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>gameover
quit
</code></pre></div></div>

<p>あとは設定をいじろう。</p>

<h1>
<span id="設定を見てみよう" class="fragment"></span><a href="#%E8%A8%AD%E5%AE%9A%E3%82%92%E8%A6%8B%E3%81%A6%E3%81%BF%E3%82%88%E3%81%86"><i class="fa fa-link"></i></a>設定を見てみよう</h1>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>option name Minimum_Thinking_Time type spin default 20 min 0 max 2147483647
</code></pre></div></div>

<p>学習の用途とかで 0.02 秒で返すようにしてあるんだろうか。<br>
コンピューターに１秒で指させるんなら、<strong>通信にかかる時間に３秒ぐらいとっておきたいが要件定義を満たさないので</strong>、0.5 秒ぐらい思考させるか。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>setoption name Minimum_Thinking_Time value 500
</code></pre></div></div>

<p>これを usinewgame の前に思考エンジンに送ってやればいいんだろうか？</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>./apery
usi
id name ukamuse_SDT4
id author Hiraoka Takuya

option name Best_Book_Move type check default false
option name Book_File type string default book/20150503/book.bin
option name Byoyomi_Margin type spin default 500 min 0 max 2147483647
option name Clear_Hash type button
option name Draw_Ply type spin default 256 min 1 max 2147483647
option name Engine_Name type string default ukamuse_SDT4
option name Max_Book_Ply type spin default 32767 min 0 max 32767
option name Max_Random_Score_Diff type spin default 0 min 0 max 32600
option name Max_Random_Score_Diff_Ply type spin default 32767 min 0 max 32767
option name Min_Book_Ply type spin default 32767 min 0 max 32767
option name Min_Book_Score type spin default -180 min -32601 max 32601
option name Minimum_Thinking_Time type spin default 20 min 0 max 2147483647
option name Move_Overhead type spin default 30 min 0 max 5000
option name MultiPV type spin default 1 min 1 max 594
option name OwnBook type check default true
option name Slow_Mover type spin default 89 min 1 max 1000
option name Slow_Mover_10 type spin default 10 min 1 max 1000
option name Slow_Mover_16 type spin default 20 min 1 max 1000
option name Slow_Mover_20 type spin default 40 min 1 max 1000
option name Threads type spin default 2 min 1 max 256
option name Time_Margin type spin default 4500 min 0 max 2147483647
option name USI_Hash type spin default 256 min 1 max 1048576
option name USI_Ponder type check default true
usiok
isready
readyok
setoption name Minimum_Thinking_Time value 500
usinewgame
position startpos moves
go
info string optimum_time = 500
info string maximum_time = 500
info string book_ply 32767
info depth 1 seldepth 1 multipv 1 score cp 63 nodes 64 nps 1230 time 52 pv 2g2f
info depth 2 seldepth 2 multipv 1 score cp 173 nodes 108 nps 1611 time 67 pv 2g2f 1c1d
info depth 3 seldepth 3 multipv 1 score cp 155 nodes 229 nps 2462 time 93 pv 2g2f 3c3d 2f2e
info depth 4 seldepth 4 multipv 1 score cp 291 nodes 341 nps 2772 time 123 pv 2g2f 3c3d 2f2e 1c1d 2e2d
info depth 5 seldepth 5 multipv 1 score cp 252 nodes 1781 nps 6720 time 265 pv 2g2f 8c8d 2f2e 8d8e 2e2d 2c2d 2h2d
info depth 6 seldepth 6 multipv 1 score cp 252 nodes 2047 nps 6603 time 310 pv 2g2f 8c8d 2f2e 8d8e 2e2d 2c2d 2h2d
info depth 7 seldepth 7 multipv 1 score cp 252 nodes 2653 nps 6615 time 401 pv 2g2f 8c8d 2f2e 8d8e 2e2d 2c2d 2h2d 8e8f
info depth 8 seldepth 9 multipv 1 score cp 22 nodes 6478 nps 6733 time 962 pv 2g2f 8c8d 2f2e 8d8e 6i7h 8e8f 8g8f 8b8f
bestmove 2g2f ponder 8c8d
</code></pre></div></div>

<p>うむ、0.5秒以上は考えているようだ、飛車先の歩を伸ばしているから　大丈夫そうだ。これだけ見ると……。</p>

<h1>
<span id="次はシェルスクリプトか" class="fragment"></span><a href="#%E6%AC%A1%E3%81%AF%E3%82%B7%E3%82%A7%E3%83%AB%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%97%E3%83%88%E3%81%8B"><i class="fa fa-link"></i></a>次はシェル・スクリプトか？</h1>

<p>ループ待機している浮かむ瀬の、標準入力をシェル・スクリプトか何かに、標準出力を同じくシェル・スクリプトか何かにして、キャッチボールができればいいんだが、将棋所にできるんだし、やる方法はあるんだろう……。</p>

<p>あるいはそれこそ C++ でもいいのかもしれないが……、できれば PHP と連携したい。</p>

<p>どういう方法があるかは　また今度考えよう。</p>

<p>打鍵で 浮かむ瀬と 標準入出力通信ができたのだから、シェルにもできるだろう。<br>
調べよう。</p>

<h1>
<span id="どのシェルを使う" class="fragment"></span><a href="#%E3%81%A9%E3%81%AE%E3%82%B7%E3%82%A7%E3%83%AB%E3%82%92%E4%BD%BF%E3%81%86"><i class="fa fa-link"></i></a>どのシェルを使う？</h1>

<p>ググると　ぱっと見　bash　しか出てこない。じゃあ bash で。</p>

<p>エディターは Ubuntu には gedit が最初からインストールされているので、という説もあったが わたしのにはインストールされていなかったので、わたしの環境で最初からインストールされている nano でいいや……。</p>

<p>「シェルスクリプト入門 書き方のまとめ」 (Memo on the Web)<br>
<a href="http://motw.mods.jp/shellscript/tutorial.html" class="autolink" rel="nofollow noopener" target="_blank">http://motw.mods.jp/shellscript/tutorial.html</a></p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>mkdir jikken
cd jikken
nano tamesi1
</code></pre></div></div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>#!/bin/sh
echo "hello, world"
</code></pre></div></div>

<p>[Ctrl]+[O]</p>

<p>tamesi1 で名前を付けて保存。</p>

<p>おっ、テキストに色が付いた。</p>

<p>[Ctrl]+[X]</p>

<p>で nano エディターを終了。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>./tamesi1
-bash: ./tamesi1: Permission denied
</code></pre></div></div>

<p>パーミッションがあるのか。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>ls -an
total 12
drwxrwxr-x 2 1000 1000 4096 Mar  5 16:30 .
drwxr-xr-x 6 1000 1000 4096 Mar  5 16:28 ..
-rw-rw-r-- 1 1000 1000   30 Mar  5 16:30 tamesi1
</code></pre></div></div>

<p>じゃあ</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>chmod 765 tamesi1
</code></pre></div></div>

<p>とかでいいんだろうか？ 無理。ルート権限がいるのか。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>sudo su -
～パスワード入力～
chmod 765 tamesi1
</code></pre></div></div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>ls -an
total 12
drwxrwxr-x 2 1000 1000 4096 Mar  5 16:30 .
drwxr-xr-x 6 1000 1000 4096 Mar  5 16:28 ..
-rwxrw-r-x 1 1000 1000   30 Mar  5 16:30 tamesi1
   ~     ~
   ※ここが変わった
</code></pre></div></div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>./tamesi1
hello, world
</code></pre></div></div>

<p>おっ、いけた。<br>
じゃあ bin フォルダーの中でシェル・スクリプトを書くか。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>cd ../shogi/apery-SDT4/bin
</code></pre></div></div>

<p>あっ！　こっちじゃないや。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>cd ../../ukamuse_sdt4/bin
</code></pre></div></div>

<p>.exe ファイルとか置いてあるんだが、Ubuntu じゃ使わないだろ……、消しておくか。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>rm ukamuse_sdt4_bmi2.exe
rm ukamuse_sdt4_sse2.exe
rm ukamuse_sdt4_sse41.exe
rm ukamuse_sdt4_sse42.exe
</code></pre></div></div>

<p>テキストエディタに書いてコピー、PuTTY で左クリックで貼り付け、[Enter]キー１回で全部終わり。</p>

<h1>
<span id="シェルスクリプトを書こう" class="fragment"></span><a href="#%E3%82%B7%E3%82%A7%E3%83%AB%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%97%E3%83%88%E3%82%92%E6%9B%B8%E3%81%93%E3%81%86"><i class="fa fa-link"></i></a>シェル・スクリプトを書こう</h1>

<p>じゃあ、こんな風に書けばいいんだろうか？</p>

<p>まずは bench で試し。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>nano tamesi1
</code></pre></div></div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>#!/bin/sh
./apery
bench
</code></pre></div></div>

<p>これも PuTTY へ右クリックで貼り付け。保存して nano 終了。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>./tamesi1
-su: ./tamesi1: Permission denied
</code></pre></div></div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>ls -an
total 852
drwxr-xr-x 3 0 0   4096 Mar  5 16:44 .
drwxr-xr-x 6 0 0   4096 Mar  5 02:33 ..
drwxr-xr-x 2 0 0   4096 Oct  7 11:05 20161007
-rwxr-xr-x 1 0 0 848120 Mar  5 02:47 apery
-rw-r--r-- 1 0 0   1531 Mar  5 03:04 benchmark.sfen
-rw-r--r-- 1 0 0     24 Mar  5 16:44 tamesi1
</code></pre></div></div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>chmod 744 tamesi1
ls -n
total 844
drwxr-xr-x 2 0 0   4096 Oct  7 11:05 20161007
-rwxr-xr-x 1 0 0 848120 Mar  5 02:47 apery
-rw-r--r-- 1 0 0   1531 Mar  5 03:04 benchmark.sfen
-rwxr--r-- 1 0 0     24 Mar  5 16:44 tamesi1
   ~
   ※ここが変わった
</code></pre></div></div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>./tamesi1
</code></pre></div></div>

<p>待機ループに入ったようだが、bench を入力するのが早すぎるのだろうか？</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>bench
</code></pre></div></div>

<p>手入力すると行ける。数秒待機してから bench を入力するようにした方がいいのか？</p>

<p>[Ctrl]+[C] でブロックを抜ける。</p>

<h1>
<span id="数秒待ってから入力しよう" class="fragment"></span><a href="#%E6%95%B0%E7%A7%92%E5%BE%85%E3%81%A3%E3%81%A6%E3%81%8B%E3%82%89%E5%85%A5%E5%8A%9B%E3%81%97%E3%82%88%E3%81%86"><i class="fa fa-link"></i></a>数秒待ってから入力しよう</h1>

<p>「【 sleep 】 指定された時間，停止する」 (ITPro)<br>
<a href="http://itpro.nikkeibp.co.jp/article/COLUMN/20060227/230884/?rt=nocnt" class="autolink" rel="nofollow noopener" target="_blank">http://itpro.nikkeibp.co.jp/article/COLUMN/20060227/230884/?rt=nocnt</a></p>

<p>じゃあ、浮かむ瀬起動から 10秒待ってから bench と入力するようにしよう。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>#!/bin/sh
./apery
sleep 10s
bench
</code></pre></div></div>

<p>nano で編集して、コマンドラインで実行。</p>

<p>ブロックされている。じゃあ、書き方が違うのか。こうか。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>#!/bin/sh
./apery
sleep 10s
echo 'bench'
</code></pre></div></div>

<p>ブロックされたままだが……。 ./apery の行でブロックしているんじゃないか？　だったら。<br>
これでどうか？</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>#!/bin/sh
./apery &amp;
sleep 3s
echo 'bench' | ./apery
</code></pre></div></div>

<p>ビンゴ！　いけた。<br>
じゃあ、sleep とか要るのだろうか？</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>#!/bin/sh
./apery &amp;
echo 'bench' | ./apery
</code></pre></div></div>

<p>これでもいけた。じゃあ、bench はこれで。</p>

<h1>
<span id="対局もシェルスクリプトで書いてみよう" class="fragment"></span><a href="#%E5%AF%BE%E5%B1%80%E3%82%82%E3%82%B7%E3%82%A7%E3%83%AB%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%97%E3%83%88%E3%81%A7%E6%9B%B8%E3%81%84%E3%81%A6%E3%81%BF%E3%82%88%E3%81%86"><i class="fa fa-link"></i></a>対局も、シェル・スクリプトで書いてみよう</h1>

<p>お出かけのあと追記する。</p>

<p>PuTTY に IPアドレスを入れて SSHプロトコルでログイン。<br>
ユーザー名とパスワードを入れる。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>sudo su -
</code></pre></div></div>

<p>またパスワードを入れる。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>cd ../home/ユーザー名/shogi/ukamuse_sdt4/bin
ls
</code></pre></div></div>

<p>よし。</p>

<p>tamesi2 ファイルを作ってみよう。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>nano tamesi2
</code></pre></div></div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>#!/bin/sh
./apery &amp;
echo 'usi' | ./apery
</code></pre></div></div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>ls -n
～略～
-rw-r--r-- 1 0 0     41 Mar  5 18:25 tamesi2
chmod 744 tamesi2
ls -n
～略～
-rwxr--r-- 1 0 0     41 Mar  5 18:25 tamesi2
</code></pre></div></div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>./tamesi2
id name ukamuse_SDT4
～略～
usiok
</code></pre></div></div>

<h1>
<span id="コマンドの出力をシェルの変数で受け取ろう" class="fragment"></span><a href="#%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89%E3%81%AE%E5%87%BA%E5%8A%9B%E3%82%92%E3%82%B7%E3%82%A7%E3%83%AB%E3%81%AE%E5%A4%89%E6%95%B0%E3%81%A7%E5%8F%97%E3%81%91%E5%8F%96%E3%82%8D%E3%81%86"><i class="fa fa-link"></i></a>コマンドの出力を、シェルの変数で受け取ろう</h1>

<p>この　浮かむ瀬　の出力を　シェル・スクリプトで受け取るには　どうすればいいのか？<br>
テキスト・ファイルを経由すれば、それはできそうだが……？</p>

<p>「関数の使用方法」 (UNIX &amp; Linux コマンド・シェルスクリプト リファレンス)<br>
<a href="http://shellscript.sunone.me/function.html" class="autolink" rel="nofollow noopener" target="_blank">http://shellscript.sunone.me/function.html</a></p>

<p>これは関数の例か。リダイレクトで変数に渡せないものか。</p>

<p>「コマンドの実行結果を変数に設定する」 (UNIX &amp; Linux コマンド・シェルスクリプト リファレンス)<br>
<a href="http://shellscript.sunone.me/variable.html#%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89%E3%81%AE%E5%AE%9F%E8%A1%8C%E7%B5%90%E6%9E%9C%E3%82%92%E5%A4%89%E6%95%B0%E3%81%AB%E8%A8%AD%E5%AE%9A%E3%81%99%E3%82%8B" class="autolink" rel="nofollow noopener" target="_blank">http://shellscript.sunone.me/variable.html#コマンドの実行結果を変数に設定する</a></p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>VAR=`command`
echo $VAR
</code></pre></div></div>

<p>へぇ。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>VAR=$(command)
echo $VAR
</code></pre></div></div>

<p>ほう。$( ) の方はネストも可能らしい。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>var=$(expr $(expr $(date '+%Y') + $(date '+%m')) + $(date '+%d'))
echo $VAR
</code></pre></div></div>

<p>なんのこっちゃ分からんが　使うこともあるかもしれない。<br>
じゃあ　こうか。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>nano tamesi3
</code></pre></div></div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>#!/bin/sh
./apery &amp;
VAR=$(echo 'usi' | ./apery)
echo '(^o^)$VAR'
</code></pre></div></div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>chmod 744 tamesi3
./tamesi3
(^o^)$VAR
</code></pre></div></div>

<p>うーむ。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>#!/bin/sh
./apery &amp;
VAR=$(echo 'usi' | ./apery)
echo '(^o^)${VAR}'
</code></pre></div></div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>./tamesi3
(^o^)${VAR}
</code></pre></div></div>

<p>うーむ。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>#!/bin/sh
./apery &amp;
VAR=$(echo 'usi' | ./apery)
echo '(^o^)$(VAR)'
</code></pre></div></div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>./tamesi3
(^o^)$(VAR)
</code></pre></div></div>

<p>うーむ。</p>

<p>「【 複数の変数を連結する 】」 (ITPro)<br>
<a href="http://itpro.nikkeibp.co.jp/article/COLUMN/20060228/231154/" class="autolink" rel="nofollow noopener" target="_blank">http://itpro.nikkeibp.co.jp/article/COLUMN/20060228/231154/</a></p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>#!/bin/sh
./apery &amp;
VAR=$(echo 'usi' | ./apery)
echo "(^o^)${VAR}"
</code></pre></div></div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>./tamesi3
(^o^)id name ukamuse_SDT4
～略～
usiok
</code></pre></div></div>

<p><strong>おーっ！</strong></p>

<h1>
<span id="bash-で複数行テキストを１行毎に分割し各行に対して対応する処理を書こう" class="fragment"></span><a href="#bash-%E3%81%A7%E8%A4%87%E6%95%B0%E8%A1%8C%E3%83%86%E3%82%AD%E3%82%B9%E3%83%88%E3%82%92%EF%BC%91%E8%A1%8C%E6%AF%8E%E3%81%AB%E5%88%86%E5%89%B2%E3%81%97%E5%90%84%E8%A1%8C%E3%81%AB%E5%AF%BE%E3%81%97%E3%81%A6%E5%AF%BE%E5%BF%9C%E3%81%99%E3%82%8B%E5%87%A6%E7%90%86%E3%82%92%E6%9B%B8%E3%81%93%E3%81%86"><i class="fa fa-link"></i></a>bash で複数行テキストを１行毎に分割し、各行に対して　対応する処理を書こう</h1>

<p>C#言語とかなら簡単なのに……。bashスクリプトではどうやるんだ。</p>

<p>「【bash】行ごとに処理する」 (Qiita)<br>
<a href="http://qiita.com/kazu56/items/83340a2e284298b9e237" class="autolink" id="reference-1c40d9b03e24d0ea77f1">http://qiita.com/kazu56/items/83340a2e284298b9e237</a></p>

<p>cat コマンドって何だ？</p>

<p>「【Linuxコマンド集】3分でわかるcat コマンドの使い方」 (エンジニアの入り口)<br>
<a href="http://eng-entrance.com/linux_command_cat" class="autolink" rel="nofollow noopener" target="_blank">http://eng-entrance.com/linux_command_cat</a></p>

<p>ふーん。引数で指定したファイルの内容を標準出力へ１行ずつ出力するのか。<br>
じゃあ、試しに。</p>

<p><strong>あれ！</strong> せっかく変数で受け取ったのに、ファイル経由だと意味ないじゃないか。<br>
じゃあ、これでどうか？</p>

<p>tamesi4</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>#!/bin/sh
./apery &amp;
VAR=$(echo 'usi' | ./apery)

# 区切り文字は NewLine で。
IFS=$'\n'
for line in $VAR
do
echo "(^o^)$line"
done
</code></pre></div></div>

<p>やっべ、PuTTY での日本語フォント表示が怪しいぜ。読めるからいいか……。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>chmod 744 tamesi4
./tamesi4
(^o^)id
(^o^)ame ukamuse_SDT4
id author Hiraoka Takuya

optio
(^o^)
(^o^)ame Best_Book_Move type check default false
optio
(^o^)
(^o^)ame Book_File type stri
(^o^)g default book/20150503/book.bi
(^o^)
optio
(^o^)
(^o^)ame Byoyomi_Margi
(^o^) type spi
(^o^) default 500 mi
(^o^) 0 max 2147483647
optio
(^o^)
(^o^)ame Clear_Hash type butto
(^o^)
optio
(^o^)
(^o^)ame Draw_Ply type spi
(^o^) default 256 mi
(^o^) 1 max 2147483647
optio
(^o^)
(^o^)ame E
(^o^)gi
(^o^)e_Name type stri
(^o^)g default ukamuse_SDT4
optio
(^o^)
(^o^)ame Max_Book_Ply type spi
(^o^) default 32767 mi
(^o^) 0 max 32767
optio
(^o^)
(^o^)ame Max_Ra
(^o^)dom_Score_Diff type spi
(^o^) default 0 mi
(^o^) 0 max 32600
optio
(^o^)
(^o^)ame Max_Ra
(^o^)dom_Score_Diff_Ply type spi
(^o^) default 32767 mi
(^o^) 0 max 32767
optio
(^o^)
(^o^)ame Mi
(^o^)_Book_Ply type spi
(^o^) default 32767 mi
(^o^) 0 max 32767
optio
(^o^)
(^o^)ame Mi
(^o^)_Book_Score type spi
(^o^) default -180 mi
(^o^) -32601 max 32601
optio
(^o^)
(^o^)ame Mi
(^o^)imum_Thi
(^o^)ki
(^o^)g_Time type spi
(^o^) default 20 mi
(^o^) 0 max 2147483647
optio
(^o^)
(^o^)ame Move_Overhead type spi
(^o^) default 30 mi
(^o^) 0 max 5000
optio
(^o^)
(^o^)ame MultiPV type spi
(^o^) default 1 mi
(^o^) 1 max 594
optio
(^o^)
(^o^)ame Ow
(^o^)Book type check default true
optio
(^o^)
(^o^)ame Slow_Mover type spi
(^o^) default 89 mi
(^o^) 1 max 1000
optio
(^o^)
(^o^)ame Slow_Mover_10 type spi
(^o^) default 10 mi
(^o^) 1 max 1000
optio
(^o^)
(^o^)ame Slow_Mover_16 type spi
(^o^) default 20 mi
(^o^) 1 max 1000
optio
(^o^)
(^o^)ame Slow_Mover_20 type spi
(^o^) default 40 mi
(^o^) 1 max 1000
optio
(^o^)
(^o^)ame Threads type spi
(^o^) default 2 mi
(^o^) 1 max 256
optio
(^o^)
(^o^)ame Time_Margi
(^o^) type spi
(^o^) default 4500 mi
(^o^) 0 max 2147483647
optio
(^o^)
(^o^)ame USI_Hash type spi
(^o^) default 256 mi
(^o^) 1 max 1048576
optio
(^o^)
(^o^)ame USI_Po
(^o^)der type check default true
usiok
</code></pre></div></div>

<p>なんだこりゃ。</p>

<p>文字 n で改行されているのでは……？<br>
区切り文字の行頭に # を付けて、いったんコメントアウトしてみよう。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>#!/bin/sh
./apery &amp;
VAR=$(echo 'usi' | ./apery)

# 区切り文字は NewLine で。
# IFS=$'\n'
for line in $VAR
do
echo "(^o^)$line"
done
</code></pre></div></div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>./tamesi4
(^o^)id
(^o^)name
(^o^)ukamuse_SDT4
(^o^)id
(^o^)author
(^o^)Hiraoka
(^o^)Takuya
(^o^)option
(^o^)name
(^o^)Best_Book_Move
(^o^)type
(^o^)check
(^o^)default
(^o^)false
(^o^)option
(^o^)name
～以下略～
</code></pre></div></div>

<p>ホワイトスペース全部　区切り文字なのか。</p>

<p>試しに \n をダブルクォーテーションで囲んでみよう。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>IFS=$"\n"
</code></pre></div></div>

<p>だめ。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>IFS=$"\n"
</code></pre></div></div>

<p>だめ。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>IFS=$'\t\n'
</code></pre></div></div>

<p>だめ。文字 t まで消えた。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>IFS=$'\\n'
</code></pre></div></div>

<p>だめ。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>IFS=$"\\n"
</code></pre></div></div>

<p>だめ。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>IFS="\\n"
</code></pre></div></div>

<p>だめ。</p>

<p>「bashのIFSに改行のみを設定するには」 (計算機と戯れる日々)<br>
<a href="http://d.hatena.ne.jp/n9d/20090313/1236912316" class="autolink" rel="nofollow noopener" target="_blank">http://d.hatena.ne.jp/n9d/20090313/1236912316</a></p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>IFS='
'
</code></pre></div></div>

<p>いけた。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>./tamesi4
(^o^)id name ukamuse_SDT4
(^o^)id author Hiraoka Takuya
(^o^)option name Best_Book_Move type check default false
(^o^)option name Book_File type string default book/20150503/book.bin
(^o^)option name Byoyomi_Margin type spin default 500 min 0 max 2147483647
～以下略～
</code></pre></div></div>

<p>じゃあ、ひとまず１行ずつには区切れた。<br>
次は、区切った１行を　半角スペースで区切りたい。</p>

<p>ループをネストすると　区切り文字指定　のリセットの手間が増えそうなので、<br>
行分割した結果は配列に入れて　別ループにしたい。</p>

<h1>
<span id="配列を使うには" class="fragment"></span><a href="#%E9%85%8D%E5%88%97%E3%82%92%E4%BD%BF%E3%81%86%E3%81%AB%E3%81%AF"><i class="fa fa-link"></i></a>配列を使うには？</h1>

<p>「bash 配列まとめ」 (Qiita)<br>
<a href="http://qiita.com/b4b4r07/items/e56a8e3471fb45df2f59" class="autolink" id="reference-f6c50ae78decdcc8773c">http://qiita.com/b4b4r07/items/e56a8e3471fb45df2f59</a></p>

<p>なんだこの、ややこしいの。<br>
可変長配列の作り方が分からない。<br>
分割すると同時に、配列で取得することはできるだろうか？</p>

<p>「BashでStringから配列に変換してfor文で回す」 (くらげになりたい。)<br>
<a href="http://wannabe-jellyfish.hatenablog.com/entry/2015/01/10/004554" class="autolink" rel="nofollow noopener" target="_blank">http://wannabe-jellyfish.hatenablog.com/entry/2015/01/10/004554</a></p>

<p>'''</p>

<h2>
<span id="配列に変換" class="fragment"></span><a href="#%E9%85%8D%E5%88%97%E3%81%AB%E5%A4%89%E6%8F%9B"><i class="fa fa-link"></i></a>配列に変換</h2>

<p>array_text=(<code>echo $text</code>)<br>
'''</p>

<p>やってみよう。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>nano tamesi5
</code></pre></div></div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>#!/bin/sh
./apery &amp;
VAR=$(echo 'usi' | ./apery)

# 改行で分割して配列に入れる
LINES=(`echo $VAR`)
for line in $LINES
do
echo "(^o^)$line"
done
</code></pre></div></div>

<p><strong>あれ？</strong> 今まで　シングル・クォーテーションと　バック・クォーテーションを間違えていたのだろうか？</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>chmod 744 tamesi5
./tamesi5
./tamesi5: 6: ./tamesi5: Syntax error: "(" unexpected
</code></pre></div></div>

<p>これの間違いなんじゃないか？</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>LINES=$("echo $VAR")
</code></pre></div></div>

<p>うわ、なんか　出力がおかしい。こうか。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>LINES=$(echo $VAR)
</code></pre></div></div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>./tamesi5
(^o^)id
(^o^)name
(^o^)ukamuse_SDT4
(^o^)id
(^o^)author
</code></pre></div></div>

<p>区切り文字は echo でも設定しないといけないのか……？</p>

<p>あれ、tamesi5 が掴まれたままみたいだ。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>kill %1
</code></pre></div></div>

<p>止めてはみたが。うーむ。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>ls -an
～中略～
-rwxr--r-- 1 0 0    156 Mar  5 20:01 tamesi5
-rw-r--r-- 1 0 0   1024 Mar  5 20:01 .tamesi5.swp
</code></pre></div></div>

<p>ロック・ファイルが残っているんじゃないか？　消していいのだろうか。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>rm .tamesi5.swp
</code></pre></div></div>

<p>tamesi5 編集。これでどうか。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code># 区切り文字IFSは改行だけで分割して配列に入れる
IFS='
'
LINES=$(echo $VAR)
</code></pre></div></div>

<p>なんか出力結果が１行につながってしまった。<br>
じゃあ、配列への要素追加を使ってみよう。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>#!/bin/sh
./apery &amp;
VAR=$(echo 'usi' | ./apery)

# 行分割して配列に入れる
LINES=()
# 区切り文字は 改行だけで。
IFS='
'
for line in $VAR
do
LINES=("${LINES[@]}" $line)
done

for line in $LINES
do
echo "(^o^)$line"
done
</code></pre></div></div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>./tamesi5
./tamesi5: 6: ./tamesi5: Syntax error: "(" unexpected
</code></pre></div></div>

<p>うーむ。</p>

<p>「bashとかshで配列を扱う。」 (自分の仕事を憎むには人生は余りにも短い)<br>
<a href="http://garapon.hatenablog.com/entry/20100129/1264780520" class="autolink" rel="nofollow noopener" target="_blank">http://garapon.hatenablog.com/entry/20100129/1264780520</a></p>

<p>sh には配列が無いので、 bash を使うのがいいらしい。<br>
じゃあファイルの冒頭を</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>#!/bin/sh
</code></pre></div></div>

<p>から</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>#!/bin/bash
</code></pre></div></div>

<p>に変更する。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>./tamesi5
(^o^)id name ukamuse_SDT4
</code></pre></div></div>

<p>１行だけ返ってきた。<br>
配列の要素数を確認しよう。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>echo ${#array[@]}
</code></pre></div></div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>./tamesi5
0
(^o^)id name ukamuse_SDT4
</code></pre></div></div>

<p>うーむ。<br>
こうか。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>echo ${#LINES[@]}
</code></pre></div></div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>./tamesi5
26
(^o^)id name ukamuse_SDT4
</code></pre></div></div>

<p>配列に分割するところまではいけたのだろうか。</p>

<p>「配列のデータを参照する」 (Qiita)<br>
<a href="http://qiita.com/b4b4r07/items/e56a8e3471fb45df2f59" class="autolink">http://qiita.com/b4b4r07/items/e56a8e3471fb45df2f59</a></p>

<p>じゃあ、こうか。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>i=0
for line in ${LINES[@]}
do
    echo "(^q^)[$i] = $line"
    let i++
done
</code></pre></div></div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>./tamesi5
26
(^q^)[0] = id name ukamuse_SDT4
(^q^)[1] = id author Hiraoka Takuya
(^q^)[2] = option name Best_Book_Move type check default false
(^q^)[3] = option name Book_File type string default book/20150503/book.bin
(^q^)[4] = option name Byoyomi_Margin type spin default 500 min 0 max 2147483647
(^q^)[5] = option name Clear_Hash type button
(^q^)[6] = option name Draw_Ply type spin default 256 min 1 max 2147483647
(^q^)[7] = option name Engine_Name type string default ukamuse_SDT4
(^q^)[8] = option name Max_Book_Ply type spin default 32767 min 0 max 32767
(^q^)[9] = option name Max_Random_Score_Diff type spin default 0 min 0 max 32600
(^q^)[10] = option name Max_Random_Score_Diff_Ply type spin default 32767 min 0 max 32767
(^q^)[11] = option name Min_Book_Ply type spin default 32767 min 0 max 32767
(^q^)[12] = option name Min_Book_Score type spin default -180 min -32601 max 32601
(^q^)[13] = option name Minimum_Thinking_Time type spin default 20 min 0 max 2147483647
(^q^)[14] = option name Move_Overhead type spin default 30 min 0 max 5000
(^q^)[15] = option name MultiPV type spin default 1 min 1 max 594
(^q^)[16] = option name OwnBook type check default true
(^q^)[17] = option name Slow_Mover type spin default 89 min 1 max 1000
(^q^)[18] = option name Slow_Mover_10 type spin default 10 min 1 max 1000
(^q^)[19] = option name Slow_Mover_16 type spin default 20 min 1 max 1000
(^q^)[20] = option name Slow_Mover_20 type spin default 40 min 1 max 1000
(^q^)[21] = option name Threads type spin default 2 min 1 max 256
(^q^)[22] = option name Time_Margin type spin default 4500 min 0 max 2147483647
(^q^)[23] = option name USI_Hash type spin default 256 min 1 max 1048576
(^q^)[24] = option name USI_Ponder type check default true
(^q^)[25] = usiok
</code></pre></div></div>

<p>よし！</p>

<h1>
<span id="配列の要素の中身をスペース区切りにしよう" class="fragment"></span><a href="#%E9%85%8D%E5%88%97%E3%81%AE%E8%A6%81%E7%B4%A0%E3%81%AE%E4%B8%AD%E8%BA%AB%E3%82%92%E3%82%B9%E3%83%9A%E3%83%BC%E3%82%B9%E5%8C%BA%E5%88%87%E3%82%8A%E3%81%AB%E3%81%97%E3%82%88%E3%81%86"><i class="fa fa-link"></i></a>配列の要素の中身を、スペース区切りにしよう</h1>

<p>これでどうか？</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>nano tamesi6
</code></pre></div></div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>#!/bin/bash
./apery &amp;
VAR=$(echo 'usi' | ./apery)

# 行分割して配列に入れる
LINES=()
# 区切り文字は 改行だけで
IFS='
'
for line in $VAR
do
LINES=("${LINES[@]}" $line)
done
# echo ${#LINES[@]}

iLine=0
for line in ${LINES[@]}
do
    echo "(^q^)[$iLine] = $line"

    # 行分割して配列に入れる
    TOKENS=()
    # 区切り文字は 半角スペースだけで
    IFS=' '

    iToken=0
    for token in $line
    do
        TOKENS=("${TOKENS[@]}" $token)
        echo "(^q^)[$iLine][$iToken] = $token"
        let iToken++
    done

    let iLine++
done
</code></pre></div></div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>chmod 744 tamesi6
./tamesi6
(^q^)[0] = id name ukamuse_SDT4
(^q^)[0][0] = id
(^q^)[0][1] = name
(^q^)[0][2] = ukamuse_SDT4
(^q^)[1] = id author Hiraoka Takuya
(^q^)[1][0] = id
(^q^)[1][1] = author
(^q^)[1][2] = Hiraoka
(^q^)[1][3] = Takuya
(^q^)[2] = option name Best_Book_Move type check default false
(^q^)[2][0] = option
(^q^)[2][1] = name
(^q^)[2][2] = Best_Book_Move
(^q^)[2][3] = type
(^q^)[2][4] = check
(^q^)[2][5] = default
(^q^)[2][6] = false
(^q^)[3] = option name Book_File type string default book/20150503/book.bin
(^q^)[3][0] = option
(^q^)[3][1] = name
(^q^)[3][2] = Book_File
(^q^)[3][3] = type
(^q^)[3][4] = string
(^q^)[3][5] = default
(^q^)[3][6] = book/20150503/book.bin
(^q^)[4] = option name Byoyomi_Margin type spin default 500 min 0 max 2147483647
(^q^)[4][0] = option
(^q^)[4][1] = name
(^q^)[4][2] = Byoyomi_Margin
(^q^)[4][3] = type
(^q^)[4][4] = spin
(^q^)[4][5] = default
(^q^)[4][6] = 500
(^q^)[4][7] = min
(^q^)[4][8] = 0
(^q^)[4][9] = max
(^q^)[4][10] = 2147483647
(^q^)[5] = option name Clear_Hash type button
(^q^)[5][0] = option
(^q^)[5][1] = name
(^q^)[5][2] = Clear_Hash
(^q^)[5][3] = type
(^q^)[5][4] = button
(^q^)[6] = option name Draw_Ply type spin default 256 min 1 max 2147483647
(^q^)[6][0] = option
(^q^)[6][1] = name
(^q^)[6][2] = Draw_Ply
(^q^)[6][3] = type
(^q^)[6][4] = spin
(^q^)[6][5] = default
(^q^)[6][6] = 256
(^q^)[6][7] = min
(^q^)[6][8] = 1
(^q^)[6][9] = max
(^q^)[6][10] = 2147483647
(^q^)[7] = option name Engine_Name type string default ukamuse_SDT4
(^q^)[7][0] = option
(^q^)[7][1] = name
(^q^)[7][2] = Engine_Name
(^q^)[7][3] = type
(^q^)[7][4] = string
(^q^)[7][5] = default
(^q^)[7][6] = ukamuse_SDT4
(^q^)[8] = option name Max_Book_Ply type spin default 32767 min 0 max 32767
(^q^)[8][0] = option
(^q^)[8][1] = name
(^q^)[8][2] = Max_Book_Ply
(^q^)[8][3] = type
(^q^)[8][4] = spin
(^q^)[8][5] = default
(^q^)[8][6] = 32767
(^q^)[8][7] = min
(^q^)[8][8] = 0
(^q^)[8][9] = max
(^q^)[8][10] = 32767
(^q^)[9] = option name Max_Random_Score_Diff type spin default 0 min 0 max 32600
(^q^)[9][0] = option
(^q^)[9][1] = name
(^q^)[9][2] = Max_Random_Score_Diff
(^q^)[9][3] = type
(^q^)[9][4] = spin
(^q^)[9][5] = default
(^q^)[9][6] = 0
(^q^)[9][7] = min
(^q^)[9][8] = 0
(^q^)[9][9] = max
(^q^)[9][10] = 32600
(^q^)[10] = option name Max_Random_Score_Diff_Ply type spin default 32767 min 0 max 32767
(^q^)[10][0] = option
(^q^)[10][1] = name
(^q^)[10][2] = Max_Random_Score_Diff_Ply
(^q^)[10][3] = type
(^q^)[10][4] = spin
(^q^)[10][5] = default
(^q^)[10][6] = 32767
(^q^)[10][7] = min
(^q^)[10][8] = 0
(^q^)[10][9] = max
(^q^)[10][10] = 32767
(^q^)[11] = option name Min_Book_Ply type spin default 32767 min 0 max 32767
(^q^)[11][0] = option
(^q^)[11][1] = name
(^q^)[11][2] = Min_Book_Ply
(^q^)[11][3] = type
(^q^)[11][4] = spin
(^q^)[11][5] = default
(^q^)[11][6] = 32767
(^q^)[11][7] = min
(^q^)[11][8] = 0
(^q^)[11][9] = max
(^q^)[11][10] = 32767
(^q^)[12] = option name Min_Book_Score type spin default -180 min -32601 max 32601
(^q^)[12][0] = option
(^q^)[12][1] = name
(^q^)[12][2] = Min_Book_Score
(^q^)[12][3] = type
(^q^)[12][4] = spin
(^q^)[12][5] = default
(^q^)[12][6] = -180
(^q^)[12][7] = min
(^q^)[12][8] = -32601
(^q^)[12][9] = max
(^q^)[12][10] = 32601
(^q^)[13] = option name Minimum_Thinking_Time type spin default 20 min 0 max 2147483647
(^q^)[13][0] = option
(^q^)[13][1] = name
(^q^)[13][2] = Minimum_Thinking_Time
(^q^)[13][3] = type
(^q^)[13][4] = spin
(^q^)[13][5] = default
(^q^)[13][6] = 20
(^q^)[13][7] = min
(^q^)[13][8] = 0
(^q^)[13][9] = max
(^q^)[13][10] = 2147483647
(^q^)[14] = option name Move_Overhead type spin default 30 min 0 max 5000
(^q^)[14][0] = option
(^q^)[14][1] = name
(^q^)[14][2] = Move_Overhead
(^q^)[14][3] = type
(^q^)[14][4] = spin
(^q^)[14][5] = default
(^q^)[14][6] = 30
(^q^)[14][7] = min
(^q^)[14][8] = 0
(^q^)[14][9] = max
(^q^)[14][10] = 5000
(^q^)[15] = option name MultiPV type spin default 1 min 1 max 594
(^q^)[15][0] = option
(^q^)[15][1] = name
(^q^)[15][2] = MultiPV
(^q^)[15][3] = type
(^q^)[15][4] = spin
(^q^)[15][5] = default
(^q^)[15][6] = 1
(^q^)[15][7] = min
(^q^)[15][8] = 1
(^q^)[15][9] = max
(^q^)[15][10] = 594
(^q^)[16] = option name OwnBook type check default true
(^q^)[16][0] = option
(^q^)[16][1] = name
(^q^)[16][2] = OwnBook
(^q^)[16][3] = type
(^q^)[16][4] = check
(^q^)[16][5] = default
(^q^)[16][6] = true
(^q^)[17] = option name Slow_Mover type spin default 89 min 1 max 1000
(^q^)[17][0] = option
(^q^)[17][1] = name
(^q^)[17][2] = Slow_Mover
(^q^)[17][3] = type
(^q^)[17][4] = spin
(^q^)[17][5] = default
(^q^)[17][6] = 89
(^q^)[17][7] = min
(^q^)[17][8] = 1
(^q^)[17][9] = max
(^q^)[17][10] = 1000
(^q^)[18] = option name Slow_Mover_10 type spin default 10 min 1 max 1000
(^q^)[18][0] = option
(^q^)[18][1] = name
(^q^)[18][2] = Slow_Mover_10
(^q^)[18][3] = type
(^q^)[18][4] = spin
(^q^)[18][5] = default
(^q^)[18][6] = 10
(^q^)[18][7] = min
(^q^)[18][8] = 1
(^q^)[18][9] = max
(^q^)[18][10] = 1000
(^q^)[19] = option name Slow_Mover_16 type spin default 20 min 1 max 1000
(^q^)[19][0] = option
(^q^)[19][1] = name
(^q^)[19][2] = Slow_Mover_16
(^q^)[19][3] = type
(^q^)[19][4] = spin
(^q^)[19][5] = default
(^q^)[19][6] = 20
(^q^)[19][7] = min
(^q^)[19][8] = 1
(^q^)[19][9] = max
(^q^)[19][10] = 1000
(^q^)[20] = option name Slow_Mover_20 type spin default 40 min 1 max 1000
(^q^)[20][0] = option
(^q^)[20][1] = name
(^q^)[20][2] = Slow_Mover_20
(^q^)[20][3] = type
(^q^)[20][4] = spin
(^q^)[20][5] = default
(^q^)[20][6] = 40
(^q^)[20][7] = min
(^q^)[20][8] = 1
(^q^)[20][9] = max
(^q^)[20][10] = 1000
(^q^)[21] = option name Threads type spin default 2 min 1 max 256
(^q^)[21][0] = option
(^q^)[21][1] = name
(^q^)[21][2] = Threads
(^q^)[21][3] = type
(^q^)[21][4] = spin
(^q^)[21][5] = default
(^q^)[21][6] = 2
(^q^)[21][7] = min
(^q^)[21][8] = 1
(^q^)[21][9] = max
(^q^)[21][10] = 256
(^q^)[22] = option name Time_Margin type spin default 4500 min 0 max 2147483647
(^q^)[22][0] = option
(^q^)[22][1] = name
(^q^)[22][2] = Time_Margin
(^q^)[22][3] = type
(^q^)[22][4] = spin
(^q^)[22][5] = default
(^q^)[22][6] = 4500
(^q^)[22][7] = min
(^q^)[22][8] = 0
(^q^)[22][9] = max
(^q^)[22][10] = 2147483647
(^q^)[23] = option name USI_Hash type spin default 256 min 1 max 1048576
(^q^)[23][0] = option
(^q^)[23][1] = name
(^q^)[23][2] = USI_Hash
(^q^)[23][3] = type
(^q^)[23][4] = spin
(^q^)[23][5] = default
(^q^)[23][6] = 256
(^q^)[23][7] = min
(^q^)[23][8] = 1
(^q^)[23][9] = max
(^q^)[23][10] = 1048576
(^q^)[24] = option name USI_Ponder type check default true
(^q^)[24][0] = option
(^q^)[24][1] = name
(^q^)[24][2] = USI_Ponder
(^q^)[24][3] = type
(^q^)[24][4] = check
(^q^)[24][5] = default
(^q^)[24][6] = true
(^q^)[25] = usiok
(^q^)[25][0] = usiok
</code></pre></div></div>

<p><strong>いけてるか。</strong></p>

<h1>
<span id="サブルーチンにしよう" class="fragment"></span><a href="#%E3%82%B5%E3%83%96%E3%83%AB%E3%83%BC%E3%83%81%E3%83%B3%E3%81%AB%E3%81%97%E3%82%88%E3%81%86"><i class="fa fa-link"></i></a>サブルーチンにしよう</h1>

<p>１行を分割して配列に入れる部分は　サブルーチンにして切り出そう。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>nano tamesi7
</code></pre></div></div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>#!/bin/bash

# 一行をトークン区切り配列へ
# $1...line
Line_To_Tokens(){
    TOKENS=()
    # 区切り文字は 半角スペースだけで
    IFS=' '

    iToken=0
    for token in $1
    do
        TOKENS=("${TOKENS[@]}" $token)
        let iToken++
    done

    # せっかく配列にいれても標準出力へ返すのか……
    echo ${TOKENS[@]}
}

./apery &amp;
VAR=$(echo 'usi' | ./apery)

# 行分割して配列に入れる
LINES=()
# 区切り文字は 改行だけで
IFS='
'
for line in $VAR
do
LINES=("${LINES[@]}" $line)
done

iLine=0
for line in ${LINES[@]}
do
    # 行分割して配列に入れる
    TOKENS=(`Line_To_Tokens $line`)

    echo "(^q^)[$iLine] = ${TOKENS[@]}"

    let iLine++
done
</code></pre></div></div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>chmod 744 tamesi7
./tamesi7
(^q^)[0] = id name ukamuse_SDT4
(^q^)[1] = id author Hiraoka Takuya
(^q^)[2] = option name Best_Book_Move type check default false
(^q^)[3] = option name Book_File type string default book/20150503/book.bin
(^q^)[4] = option name Byoyomi_Margin type spin default 500 min 0 max 2147483647
(^q^)[5] = option name Clear_Hash type button
(^q^)[6] = option name Draw_Ply type spin default 256 min 1 max 2147483647
(^q^)[7] = option name Engine_Name type string default ukamuse_SDT4
(^q^)[8] = option name Max_Book_Ply type spin default 32767 min 0 max 32767
(^q^)[9] = option name Max_Random_Score_Diff type spin default 0 min 0 max 32600
(^q^)[10] = option name Max_Random_Score_Diff_Ply type spin default 32767 min 0 max 32767
(^q^)[11] = option name Min_Book_Ply type spin default 32767 min 0 max 32767
(^q^)[12] = option name Min_Book_Score type spin default -180 min -32601 max 32601
(^q^)[13] = option name Minimum_Thinking_Time type spin default 20 min 0 max 2147483647
(^q^)[14] = option name Move_Overhead type spin default 30 min 0 max 5000
(^q^)[15] = option name MultiPV type spin default 1 min 1 max 594
(^q^)[16] = option name OwnBook type check default true
(^q^)[17] = option name Slow_Mover type spin default 89 min 1 max 1000
(^q^)[18] = option name Slow_Mover_10 type spin default 10 min 1 max 1000
(^q^)[19] = option name Slow_Mover_16 type spin default 20 min 1 max 1000
(^q^)[20] = option name Slow_Mover_20 type spin default 40 min 1 max 1000
(^q^)[21] = option name Threads type spin default 2 min 1 max 256
(^q^)[22] = option name Time_Margin type spin default 4500 min 0 max 2147483647
(^q^)[23] = option name USI_Hash type spin default 256 min 1 max 1048576
(^q^)[24] = option name USI_Ponder type check default true
(^q^)[25] = usiok
</code></pre></div></div>

<p>よし、意図した通りには動いてるだろ。サブルーチン化した嬉しみが少ないが……。</p>

<h1>
<span id="仕分けしよう" class="fragment"></span><a href="#%E4%BB%95%E5%88%86%E3%81%91%E3%81%97%E3%82%88%E3%81%86"><i class="fa fa-link"></i></a>仕分けしよう</h1>

<p>ここで、各行の１単語目（１トークン目）を見ると</p>

<p>-id<br>
-option<br>
-usiok</p>

<p>のいずれかであることが分かるだろう。ここで取り合えず id と option は無視して、usiok があるかどうかだけ調べるルーチンを書こう。</p>

<p>usiok があれば、浮かむ瀬に isready という文字列を送るものとする。</p>

<p>テキストの 1行目を取得するには、</p>

<p>「How do I read first line using cat」 (stack overflow)<br>
<a href="http://stackoverflow.com/questions/6114119/how-do-i-read-first-line-using-cat" class="autolink" rel="nofollow noopener" target="_blank">http://stackoverflow.com/questions/6114119/how-do-i-read-first-line-using-cat</a></p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>head -n 1 file.txt
</code></pre></div></div>

<p>を使えばいいのだろうか。head コマンドの動作確認をしてみよう。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>FIRST_TOKEN=(`head -n 1 ${TOKENS[@]}`)
</code></pre></div></div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>(^q^)[1] =
head: cannot open 'option name Best_Book_Move type check default false' for reading: No such file or directory
</code></pre></div></div>

<p>ファイルじゃないとダメなんじゃないだろうか？</p>

<p>「【 文字列を抜き出す「cut」 】」 (ITPro)<br>
<a href="http://itpro.nikkeibp.co.jp/article/COLUMN/20060228/231159/" class="autolink" rel="nofollow noopener" target="_blank">http://itpro.nikkeibp.co.jp/article/COLUMN/20060228/231159/</a></p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>FIRST_TOKEN=(`echo ${TOKENS[@]} | cut -d "
"`)
</code></pre></div></div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>(^q^)[0] =
cut: you must specify a list of bytes, characters, or fields
Try 'cut --help' for more information.
</code></pre></div></div>

<p>うーむ。<br>
シェルのコマンドは　ほとんど　標準入出力　を介すのだろうか。<br>
だったら　素直に　ファイルを経由した方がいいのか？<br>
書き直してみよう。</p>

<p>echo は複数行は出力してくれないんだろうか？</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>nano tamesi8
</code></pre></div></div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>#!/bin/bash

# 引数1をスペース区切りにし、最初のトークンを出力
# $1...line
Line_To_FirstToken(){
    TOKENS=()
    # 区切り文字は 半角スペースだけで
    IFS=' '

    for token in $1
    do
        echo $token
        return 0
    done
}

./apery &amp;
VAR=$(echo 'usi' | ./apery)

# 行分割して配列に入れる
LINES=()
# 区切り文字は 改行だけで
IFS='
'
for line in $VAR
do
LINES=("${LINES[@]}" $line)
done

iLine=0
for line in ${LINES[@]}
do
    # 行分割して配列に入れる
    FIRST_TOKEN=(`Line_To_FirstToken $line`)

    echo "(^q^)[$iLine] = $FIRST_TOKEN"

    let iLine++
done
</code></pre></div></div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>chmod 744 tamesi8
./tamesi8
</code></pre></div></div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>./tamesi8
(^q^)[0] = id
(^q^)[1] = id
(^q^)[2] = option
(^q^)[3] = option
(^q^)[4] = option
(^q^)[5] = option
(^q^)[6] = option
(^q^)[7] = option
(^q^)[8] = option
(^q^)[9] = option
(^q^)[10] = option
(^q^)[11] = option
(^q^)[12] = option
(^q^)[13] = option
(^q^)[14] = option
(^q^)[15] = option
(^q^)[16] = option
(^q^)[17] = option
(^q^)[18] = option
(^q^)[19] = option
(^q^)[20] = option
(^q^)[21] = option
(^q^)[22] = option
(^q^)[23] = option
(^q^)[24] = option
(^q^)[25] = usiok
</code></pre></div></div>

<p>とりあえず 最初のトークンは取れるものの、すっきりしない。</p>

<p><strong>bash じゃなくて、将棋所相当のプログラムを C# で書いて 浮かむ瀬 は別プロセスで動かして通信したらいいんじゃないか。</strong></p>

<p>じゃあ、mono をインストールした方がいいのか？</p>

<h1>
<span id="ubuntu-に-mono-をインストールしよう" class="fragment"></span><a href="#ubuntu-%E3%81%AB-mono-%E3%82%92%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%97%E3%82%88%E3%81%86"><i class="fa fa-link"></i></a>Ubuntu に mono をインストールしよう</h1>

<p>LinuxではC#は人気ないのか。</p>

<p>「Compiling Mono on Linux」 (Mono)<br>
<a href="http://www.mono-project.com/docs/compiling-mono/linux/" class="autolink" rel="nofollow noopener" target="_blank">http://www.mono-project.com/docs/compiling-mono/linux/</a></p>

<p>こんなコマンド叩いたらいいんだろうか？</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>sudo apt-get install git autoconf libtool automake build-essential mono-devel gettext cmake
</code></pre></div></div>

<p>なんか動いた。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>After this operation, 132 MB of additional disk space will be used.
Do you want to continue? [Y/n]
</code></pre></div></div>

<p>じゃあ、どんどん進んでいこう。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>done.
</code></pre></div></div>

<p>もうインストール終わった。<br>
じゃあ C#言語で ハローワールドを書いてみるか。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>nano ShogiServer.cs
</code></pre></div></div>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">ShogiServer</span>
<span class="p">{</span>
    <span class="k">class</span> <span class="nc">Program</span>
    <span class="p">{</span>
        <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"hello, world"</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>nano は C# 書いても色ついてくれないのか。</p>

<p>どうやってコンパイルするんだ。<br>
というか　いつまで　コマンドラインなんだ。GUI は入れるべきか。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>man mono
</code></pre></div></div>

<p>だめだ、行数が多すぎる。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>mono --version
Mono JIT compiler version 4.2.1 (Debian 4.2.1.102+dfsg2-7ubuntu4)
Copyright (C) 2002-2014 Novell, Inc, Xamarin Inc and Contributors. www.mono-project.com
        TLS:           __thread
        SIGSEGV:       altstack
        Notifications: epoll
        Architecture:  amd64
        Disabled:      none
        Misc:          softdebug
        LLVM:          supported, not enabled.
        GC:            sgen
</code></pre></div></div>

<p>おっ、バージョン 4 が入ったぜ。助かるぜ。</p>

<p>「csc.exe を使用したコマンド ラインからのビルド」 (MSDN)<br>
<a href="https://msdn.microsoft.com/ja-jp/library/78f4aasd.aspx" class="autolink" rel="nofollow noopener" target="_blank">https://msdn.microsoft.com/ja-jp/library/78f4aasd.aspx</a></p>

<p>C# のコンパイラは csc なのだろうか？</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>csc ShogiServer.cs
The program 'csc' is currently not installed. You can install it by typing:
apt install chicken-bin
</code></pre></div></div>

<p>入ってないし……。</p>

<p>「Xamarinの基盤となっている「Mono」と、C#コンパイラー「mcs」」 (buildinsider)<br>
<a href="http://www.buildinsider.net/mobile/insidexamarin/02" class="autolink" rel="nofollow noopener" target="_blank">http://www.buildinsider.net/mobile/insidexamarin/02</a></p>

<p>C# のコンパイラは mcs なのだろうか？</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>mcs ShogiServer.cs
ls
～略～
ShogiServer.cs
ShogiServer.exe
</code></pre></div></div>

<p>.exe なんかできているが、Linuxで動くのか？</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>./ShogiServer.exe
hello, world
</code></pre></div></div>

<p><strong>へぇ！</strong></p>

<p>C#のMakefile とか書けるのだろうか……。</p>

<h2>
<span id="サンプルプログラムを作ろう" class="fragment"></span><a href="#%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%A0%E3%82%92%E4%BD%9C%E3%82%8D%E3%81%86"><i class="fa fa-link"></i></a>サンプル・プログラムを作ろう</h2>

<p>じゃあ、ひとまず、標準入力で "usi" が飛んできて、"usiok" を返すというサンプル・プログラムを組んでみるか。</p>

<p>tamesi9</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>using System;

namespace ShogiServer
{
    class Program
    {
        static void Main(string[] args)
        {
            Console.WriteLine("hello, world");
            Console.WriteLine("args.Length=" + args.Length);
            int i = 0;
            foreach (string arg in args)
            {
                Console.WriteLine("args[i]=" + args[i]);
                i++;
            }
        }
    }
}
</code></pre></div></div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>mcs tamesi9
./tamesi9.exe
hello, world
args.Length=0
</code></pre></div></div>

<p>じゃあ、</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>echo 'usi' | ./tamesi9.exe
hello, world
args.Length=0
</code></pre></div></div>

<p>あー、コマンドライン引数と　標準入力は　違うのか。<br>
じゃあ、</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>./tamesi9.exe abc def ghi
hello, world
args.Length=3
args[i]=abc
args[i]=def
args[i]=ghi
</code></pre></div></div>

<p>そうか。<br>
じゃあ、こうか。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>nano tamesi10
</code></pre></div></div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>using System;

namespace ShogiServer
{
    class Program
    {
        static void Main(string[] args)
        {
            Console.WriteLine("start a loop.");
            for (;;)
            {
                string line = Console.ReadLine();
                switch (line)
                {
                    case "quit": break;
                    default: Console.WriteLine("(^q^)"+line); break;
                }
            }
        }
    }
}
</code></pre></div></div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>mcs tamesi10
./tamesi10.exe
start a loop.
</code></pre></div></div>

<p>よし。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>abc
(^q^)abc
</code></pre></div></div>

<p>よし。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>quit
</code></pre></div></div>

<p>あらっ。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>abc
(^q^)
</code></pre></div></div>

<p>あらら。<br>
[Ctrl]+[C]</p>

<p>あーそうか、switch文 で break しても switch文 を抜けるだけで for文 を抜けないんだ。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>rm tamesi10
nano tamesi10
</code></pre></div></div>

<p>こう。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>using System;

namespace ShogiServer
{
    class Program
    {
        static void Main(string[] args)
        {
            Console.WriteLine("start a loop.");
            for (;;)
            {
                string line = Console.ReadLine();
                switch (line)
                {
                    case "quit": goto gt_EndLoop;
                    default: Console.WriteLine("(^q^)"+line); break;
                }
            }
            gt_EndLoop:
            Console.WriteLine("finished a loop.");
        }
    }
}
</code></pre></div></div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>mcs tamesi10
./tamesi10.exe
start a loop.
abc
(^q^)abc
quit
finished a loop.
</code></pre></div></div>

<p>こんどは　うまくいった。じゃあ、このプログラムをバックグラウンドで走らせられるだろうか。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>./tamesi10.exe &amp;
[1] 14279
start a loop.
</code></pre></div></div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>jobs
[1]+  Stopped                 ./tamesi10.exe
</code></pre></div></div>

<p>この、Stopped というのが分からない。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>echo 'usi' | ./tamesi10.exe
(^q^)
(^q^)
(^q^)
(^q^)
(^q^)
(^q^)
(^q^)
(^q^)
(^q^)
(^q^)
(^q^)
(^q^)
(^q^)
(^q^)
(^q^)
～略～
</code></pre></div></div>

<p>[Ctrl]+[C]</p>

<p>なんということだ。</p>

<p>どういう理屈だ。</p>

<p>switch文に次の１行を足してはどうか？</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>case "": break;
</code></pre></div></div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>./tamesi10.exe &amp;
[3] 14317
start a loop.
jobs
[1]   Stopped                 ./tamesi10.exe
[2]-  Stopped                 nano tamesi10
[3]+  Stopped                 ./tamesi10.exe
kill %1
jobs
[1]   Terminated              ./tamesi10.exe
[2]-  Stopped                 nano tamesi10
[3]+  Stopped                 ./tamesi10.exe
echo 'usi' | ./tamesi10.exe
(^q^)
(^q^)
(^q^)
(^q^)
(^q^)
(^q^)
(^q^)
(^q^)
(^q^)
(^q^)
(^q^)
(^q^)
～中略～
</code></pre></div></div>

<p>だめか。</p>

<p>ReadLine() を止めて、Read() にしてみる。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>using System;

namespace ShogiServer
{
    class Program
    {
        static void Main(string[] args)
        {
            Console.WriteLine("start a loop.");
            for (;;)
            {
                int ch = Console.Read();
                Console.WriteLine("(^q^)ch=" + ch);
            }
            Console.WriteLine("finished a loop.");
        }
    }
}
</code></pre></div></div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>mcs tamesi10
tamesi10(15,13): warning CS0162: Unreachable code detected
Compilation succeeded - 1 warning(s)
./tamesi10.exe &amp;
[3] 14482
start a loop.
echo 'usi' | ./tamesi10.exe
(^q^)ch=-1
(^q^)ch=-1
(^q^)ch=-1
(^q^)ch=-1
(^q^)ch=-1
(^q^)ch=-1
(^q^)ch=-1
(^q^)ch=-1
(^q^)ch=-1
(^q^)ch=-1
(^q^)ch=-1
(^q^)ch=-1
(^q^)ch=-1
(^q^)ch=-1
(^q^)ch=-1
(^q^)ch=-1
(^q^)ch=-1
(^q^)ch=-1
(^q^)ch=-1
</code></pre></div></div>

<p>うーむ、-1 って何だ。<br>
じゃあ、-1 は省いて。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>using System;

namespace ShogiServer
{
    class Program
    {
        static void Main(string[] args)
        {
            Console.WriteLine("start a loop.");
            for (;;)
            {
                int ch = Console.Read();
                if (-1 != ch)
                {
                    Console.WriteLine("(^q^)ch=" + ch);
                }
            }
            Console.WriteLine("finished a loop.");
        }
    }
}
</code></pre></div></div>

<p>ところでいままで、出力が入力と被っているところがあった。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>root@tk2-217-18401:/home/アカウント名/shogi/ukamuse_sdt4/bin# start a loop.
</code></pre></div></div>

<p>これ　だめなんじゃないだろうか。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>echo 'usi' | ./tamesi10.exe
start a loop.
(^q^)ch=117
(^q^)ch=115
(^q^)ch=105
(^q^)ch=10
</code></pre></div></div>

<p>さて、今度はどうか。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>echo 'abc' | ./tamesi10.exe
</code></pre></div></div>

<p>反応が返ってこない。<br>
どういう待機状態なのか。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>echo 'abc' | ./tamesi10.exe
start a loop.
(^q^)ch=97
(^q^)ch=98
(^q^)ch=99
(^q^)ch=10
</code></pre></div></div>

<p>どうも、標準入力は１回しか効かないのか？ <strong>１回出力すると、２回目の入力は効かないとかルールでもあるのだろうか？</strong> </p>

<p>別のメソッドを使ってみよう。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>using System;

namespace ShogiServer
{
    class Program
    {
        static void Main(string[] args)
        {
            Console.WriteLine("start a loop.");
            for (;;)
            {
                string line = Console.In.ReadLine();
                switch (line)
                {
                    case "quit": goto gt_EndLoop;
                    default: Console.WriteLine("(^q^)line=" + line); break;
                }
            }
            gt_EndLoop:
            Console.WriteLine("finished a loop.");
        }
    }
}
</code></pre></div></div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>./tamesi10.exe &amp;
echo 'usi' | ./tamesi10.exe
(^q^)line=
(^q^)line=
(^q^)line=
(^q^)line=
(^q^)line=
(^q^)line=
(^q^)line=
～中略～
</code></pre></div></div>

<p>うーむ。null を弾くとどうか？</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>rm tamesi10
nano tamesi10
</code></pre></div></div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>using System;

namespace ShogiServer
{
    class Program
    {
        static void Main(string[] args)
        {
            Console.WriteLine("start a loop.");
            for (;;)
            {
                string line = Console.In.ReadLine();
                if (null != line)
                {
                    switch (line)
                    {
                        case "quit": goto gt_EndLoop;
                        default: Console.WriteLine("(^q^)line=" + line); break;
                    }
                }
            }
            gt_EndLoop:
            Console.WriteLine("finished a loop.");
        }
    }
}
</code></pre></div></div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>mcs tamesi10
echo 'usi' | ./tamesi10.exe
start a loop.
(^q^)line=usi
</code></pre></div></div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>abc
def
ghi
echo 'usi' | ./tamesi10.exe
</code></pre></div></div>

<p>もう入力は効かない。無限ループで待機できないのだろうか？<br>
別の書き方も試してみる。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>using System;

namespace ShogiServer
{
    class Program
    {
        static void Main(string[] args)
        {
            char[] buffer = new char[256];

            Console.WriteLine("start a loop.");
            for (;;)
            {
                int result = Console.In.ReadBlock(buffer, 0, 255);
                Console.WriteLine("(^q^)result=" + result);
                Console.Write("(^q^)buffer=");
                foreach (char ch in buffer)
                {
                    Console.Write(ch);
                }
                Console.WriteLine("(^_^)");
            }
            Console.WriteLine("finished a loop.");
        }
    }
}
</code></pre></div></div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>./tamesi10.exe &amp;
echo 'usi' | ./tamesi10.exe
(^q^)result=0
(^q^)buffer=usi
(^_^)
(^q^)result=0
(^q^)buffer=usi
(^_^)
(^q^)result=0
(^q^)buffer=usi
(^_^)
(^q^)result=0
(^q^)buffer=usi
(^_^)
(^q^)result=0
(^q^)buffer=usi
(^_^)
</code></pre></div></div>

<h2>
<span id="ubuntuc-では入力側のバッファーがフラッシュされてないのか" class="fragment"></span><a href="#ubuntuc-%E3%81%A7%E3%81%AF%E5%85%A5%E5%8A%9B%E5%81%B4%E3%81%AE%E3%83%90%E3%83%83%E3%83%95%E3%82%A1%E3%83%BC%E3%81%8C%E3%83%95%E3%83%A9%E3%83%83%E3%82%B7%E3%83%A5%E3%81%95%E3%82%8C%E3%81%A6%E3%81%AA%E3%81%84%E3%81%AE%E3%81%8B"><i class="fa fa-link"></i></a>Ubuntu/C# では、入力側のバッファーがフラッシュされてないのか。</h2>

<p>入力側のバッファーがフラッシュされてないのか。</p>

<p>「自プロセスの標準入出力」 (SMDN)<br>
<a href="http://smdn.jp/programming/netfx/standard_streams/0_console/" class="autolink" rel="nofollow noopener" target="_blank">http://smdn.jp/programming/netfx/standard_streams/0_console/</a></p>

<p>「C#で競技プログラミングをし続ける人のためのTips」 (Qiita)<br>
<a href="http://qiita.com/Camypaper/items/de6d576fe5513743a50e" class="autolink" id="reference-bd1927f924e7e197f00a">http://qiita.com/Camypaper/items/de6d576fe5513743a50e</a></p>

<p>じゃあ、異なる入力があるまで無視するように書き換えてみよう。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>using System;

namespace ShogiServer
{
    class Program
    {
        static void Main(string[] args)
        {
            string line_old = "";

            Console.WriteLine("start a loop.");
            for (;;)
            {
                string line = Console.ReadLine(); // Ubuntuでは入力がフラッシュされなかった。
                if (line!=line_old)
                {
                    Console.WriteLine("(^q^)line=" + line);
                    line_old = line;
                    switch (line)
                    {
                        case "quit": goto gt_EndLoop;
                        default: break;
                    }
                }
            }
            gt_EndLoop:
            Console.WriteLine("finished a loop.");
        }
    }
}
</code></pre></div></div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>./tamesi10.exe
start a loop.
a
(^q^)line=a
b
(^q^)line=b
c
(^q^)line=c
usi
(^q^)line=usi
quit
(^q^)line=quit
finished a loop.
</code></pre></div></div>

<p>はいっ、<strong>ビンゴ</strong>！ えーっ！ なんでそんなバグ残ってんだ。</p>

<h2>
<span id="mono-complete-をインストールしましたか" class="fragment"></span><a href="#mono-complete-%E3%82%92%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%97%E3%81%BE%E3%81%97%E3%81%9F%E3%81%8B"><i class="fa fa-link"></i></a>mono-complete をインストールしましたか？</h2>

<p>何それ！</p>

<p>「How to install mono on ubuntu 64-bit v14.04?」 (Ubuntu)<br>
<a href="http://askubuntu.com/questions/497358/how-to-install-mono-on-ubuntu-64-bit-v14-04" class="autolink" rel="nofollow noopener" target="_blank">http://askubuntu.com/questions/497358/how-to-install-mono-on-ubuntu-64-bit-v14-04</a></p>

<p>これやってみるか。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>sudo apt-get install mono-complete
</code></pre></div></div>

<p>インストールが終わると、挙動が変わったｗｗｗｗ</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>using System;

namespace ShogiServer
{
    class Program
    {
        static void Main(string[] args)
        {
            Console.WriteLine("start a loop.");
            for (;;)
            {
                string line = Console.ReadLine();
                Console.WriteLine("(^q^)line=" + line);
                switch (line)
                {
                    case "quit": goto gt_EndLoop;
                    default: break;
                }
            }
            gt_EndLoop:
            Console.WriteLine("finished a loop.");
        }
    }
}
</code></pre></div></div>

<p>ひとまずこれで。コンパイルしなおして、フォア・グラウンドで実行すると、想定した挙動になる。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>./tamesi10.exe
start a loop.
a
(^q^)line=a
b
(^q^)line=b
c
(^q^)line=c
quit
(^q^)line=quit
finished a loop.
</code></pre></div></div>

<p>これを、バックグラウンドで待機させておいて、バックグラウンドで動いているプロセスの標準入力に向かって文字を投げれないだろうか。</p>

<p>そんなことをしたら [Ctrl]+[C] も効かなくなって　入力は将棋サーバーに吸い込まれていくようになってしまった。PuTTY を強制終了させてセッションを落としてもいいのだろうか？</p>

<p>何ごともなく　静かなコンソール画面に再ログインすることができた。</p>

<h2>
<span id="出力をリダイレクトするといいのだろうか" class="fragment"></span><a href="#%E5%87%BA%E5%8A%9B%E3%82%92%E3%83%AA%E3%83%80%E3%82%A4%E3%83%AC%E3%82%AF%E3%83%88%E3%81%99%E3%82%8B%E3%81%A8%E3%81%84%E3%81%84%E3%81%AE%E3%81%A0%E3%82%8D%E3%81%86%E3%81%8B"><i class="fa fa-link"></i></a>出力をリダイレクトするといいのだろうか？</h2>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>echo 'usi' | ./tamesi10.exe &gt; log1 &amp;
jobs
[1]+  Running                 echo 'usi' | ./tamesi10.exe &gt; log1 &amp;
</code></pre></div></div>

<p>おっ、<strong>Running</strong> なんか初めて見た。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>ls
nano log1

[ Reading File ]
</code></pre></div></div>

<p>また　固まったんだが。画面に</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>[ Reading File ]
</code></pre></div></div>

<p>と表示されてるだけで、キー入力はできるのか。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>echo 'quit' | ./tamesi10.exe
start a loop.
(^q^)line=quit
finished a loop.
jobs
[1]+  Running                 echo 'usi' | ./tamesi10.exe &gt; log1 &amp;
</code></pre></div></div>

<p>今 Running している方の ./tamesi10.exe に標準入力を送れないものか。</p>

<h2>
<span id="ctrlz" class="fragment"></span><a href="#ctrlz"><i class="fa fa-link"></i></a>[Ctrl]+[Z]</h2>

<p>なんか分からないがやってみよう。</p>

<p>「What is the difference between Ctrl-z and Ctrl-c in the shell?」 (ask ubuntu)<br>
<a href="http://askubuntu.com/questions/510811/what-is-the-difference-between-ctrl-z-and-ctrl-c-in-the-shell" class="autolink" rel="nofollow noopener" target="_blank">http://askubuntu.com/questions/510811/what-is-the-difference-between-ctrl-z-and-ctrl-c-in-the-shell</a></p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>./tamesi10.exe
start a loop.
</code></pre></div></div>

<p>[Ctrl]+[Z]</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
[1]+  Stopped                 ./tamesi10.exe
</code></pre></div></div>

<p>ストップして　コマンド・プロンプトが戻ってきたぜ。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>bg 1
[1]+ ./tamesi10.exe &amp;
</code></pre></div></div>

<p>ほう。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>fg 1
./tamesi10.exe
</code></pre></div></div>

<p>戻ってきた。</p>

<p>[Ctrl]+[Z]</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>
[1]+  Stopped                 ./tamesi10.exe
</code></pre></div></div>

<p>ほう。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>fg 1
./tamesi10.exe
usi
(^q^)line=usi
</code></pre></div></div>

<p>ジョブID が分かってるんだったら手動で「fg 番号」して入力できるが……。<br>
わたしが通信したいんじゃなくて、コンピューター同士に双方向通信させたいんだが、<br>
２つのプロセスを起動させておいて、シェル・スクリプトで fg と bg を使えばいいのだろうか？</p>

<h1>
<span id="標準入出力通信はむずかしいのでは" class="fragment"></span><a href="#%E6%A8%99%E6%BA%96%E5%85%A5%E5%87%BA%E5%8A%9B%E9%80%9A%E4%BF%A1%E3%81%AF%E3%82%80%E3%81%9A%E3%81%8B%E3%81%97%E3%81%84%E3%81%AE%E3%81%A7%E3%81%AF"><i class="fa fa-link"></i></a>標準入出力通信は　むずかしいのでは？</h1>

<p><strong>ポートを開いてソケット通信したらダメなのか……？</strong>　なんだろう、この難しい操作。</p>

<h1>
<span id="シェルスクリプトよりソケットプログラムの方が簡単なんじゃないか" class="fragment"></span><a href="#%E3%82%B7%E3%82%A7%E3%83%AB%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%97%E3%83%88%E3%82%88%E3%82%8A%E3%82%BD%E3%82%B1%E3%83%83%E3%83%88%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%A0%E3%81%AE%E6%96%B9%E3%81%8C%E7%B0%A1%E5%8D%98%E3%81%AA%E3%82%93%E3%81%98%E3%82%83%E3%81%AA%E3%81%84%E3%81%8B"><i class="fa fa-link"></i></a>シェル・スクリプトより、ソケット・プログラムの方が簡単なんじゃないか？</h1>

<p>とりあえず　将棋サーバーは　ポートを開いてバックグラウンドで走らせておいたらいいんじゃないか。</p>

<p>じゃあ、ウェブ・アプリケーション・サーバーは、ポートを開いている実行プログラムに向かって、文字列を投げる方法があるのか調べてみよう。</p>

<h1>
<span id="php-とかでソケット通信できるんだろうか" class="fragment"></span><a href="#php-%E3%81%A8%E3%81%8B%E3%81%A7%E3%82%BD%E3%82%B1%E3%83%83%E3%83%88%E9%80%9A%E4%BF%A1%E3%81%A7%E3%81%8D%E3%82%8B%E3%82%93%E3%81%A0%E3%82%8D%E3%81%86%E3%81%8B"><i class="fa fa-link"></i></a>PHP とかでソケット通信できるんだろうか？</h1>

<p>「socket_create_listen」 (PHPマニュアル)<br>
<a href="http://php.net/manual/ja/function.socket-create-listen.php" class="autolink" rel="nofollow noopener" target="_blank">http://php.net/manual/ja/function.socket-create-listen.php</a></p>

<p>ソケットの接続を確立したあとの処理はどうするのか？</p>

<p>「fsockopen」 (PHPマニュアル)<br>
<a href="http://php.net/manual/ja/function.fsockopen.php" class="autolink" rel="nofollow noopener" target="_blank">http://php.net/manual/ja/function.fsockopen.php</a></p>

<p>つなぎに行く方は　これでいいんだが。</p>

<p>「PHP でサーバソケットプログラミング (1)」 (Rainy Day Codings)<br>
<a href="http://rainyday.blog.so-net.ne.jp/2007-02-17" class="autolink" rel="nofollow noopener" target="_blank">http://rainyday.blog.so-net.ne.jp/2007-02-17</a></p>

<p>サーバーの待ち受け側は　これでいいか。</p>

<p>じゃあ、PHPが動くようにセットアップするか。<br>
レンタル・サーバーの環境は　どうなってたっけ。</p>

<p>「料金・サービス仕様」 (SAKURA internet)<br>
<a href="http://solution.sakura.ad.jp/windows_vps/specification.html" class="autolink" rel="nofollow noopener" target="_blank">http://solution.sakura.ad.jp/windows_vps/specification.html</a></p>

<p>Apache や PHP のバージョンは自分で調べろということか。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>php --version
PHP 7.0.15-0ubuntu0.16.04.4 (cli) ( NTS )
Copyright (c) 1997-2017 The PHP Group
Zend Engine v3.0.0, Copyright (c) 1998-2017 Zend Technologies
    with Zend OPcache v7.0.15-0ubuntu0.16.04.4, Copyright (c) 1999-2017, by Zend Technologies
</code></pre></div></div>

<p>おおっ、PHP 7 だ。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>apache2 --version
[Mon Mar 06 02:17:27.188336 2017] [core:warn] [pid 19747] AH00111: Config variable ${APACHE_LOCK_DIR} is not defined
[Mon Mar 06 02:17:27.188706 2017] [core:warn] [pid 19747] AH00111: Config variable ${APACHE_PID_FILE} is not defined
[Mon Mar 06 02:17:27.188743 2017] [core:warn] [pid 19747] AH00111: Config variable ${APACHE_RUN_USER} is not defined
[Mon Mar 06 02:17:27.188765 2017] [core:warn] [pid 19747] AH00111: Config variable ${APACHE_RUN_GROUP} is not defined
[Mon Mar 06 02:17:27.188801 2017] [core:warn] [pid 19747] AH00111: Config variable ${APACHE_LOG_DIR} is not defined
[Mon Mar 06 02:17:27.195871 2017] [core:warn] [pid 19747] AH00111: Config variable ${APACHE_LOG_DIR} is not defined
[Mon Mar 06 02:17:27.196170 2017] [core:warn] [pid 19747] AH00111: Config variable ${APACHE_LOG_DIR} is not defined
[Mon Mar 06 02:17:27.197322 2017] [core:warn] [pid 19747] AH00111: Config variable ${APACHE_LOG_DIR} is not defined
AH00526: Syntax error on line 74 of /etc/apache2/apache2.conf:
Invalid Mutex directory in argument file:${APACHE_LOCK_DIR}
</code></pre></div></div>

<p>なんか --version という引数は無さげ。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>man apache2
apache2 -v
Server version: Apache/2.4.18 (Ubuntu)
Server built:   2016-07-14T12:32:26
</code></pre></div></div>

<p>apache2 は 2.4.18 か。</p>

<p>じゃあ、PHPの設定とか　もう終わってんの？ 試してみるか。</p>

<h1>
<span id="php-を試そうぜ" class="fragment"></span><a href="#php-%E3%82%92%E8%A9%A6%E3%81%9D%E3%81%86%E3%81%9C"><i class="fa fa-link"></i></a>PHP を試そうぜ</h1>

<p>ブラウザで開いて URLでアクセスすればいいわけなんだが、外に開かれているんだろうか？<br>
ブラウザのURL欄に入れてみる。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>http://数字.数字.数字.数字
</code></pre></div></div>

<p>でた。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>Index of /

[ICO]   Name    Last modified   Size    Description
[   ]   gpskick.php 2015-09-12 03:07    351  
[DIR]   html/   2015-09-12 02:40    -    
[   ]   la.php  2015-09-12 03:14    241  
[DIR]   tumecheck/  2015-09-12 03:15    -    
[DIR]   vscom/  2015-09-12 03:03    -    
</code></pre></div></div>

<p>このフォルダーはどこなのか？ Linux のフォルダ構成はよく分からんが、ググろう。</p>

<p>「Ubuntu serverApache」 (Yamamoto's Laboratory)<br>
<a href="http://www.yamamo10.jp/yamamoto/comp/home_server/ubuntu_server/apache/index.php" class="autolink" rel="nofollow noopener" target="_blank">http://www.yamamo10.jp/yamamoto/comp/home_server/ubuntu_server/apache/index.php</a></p>

<p>ページは /var/www/index.html みたいな感じであるんだろうか？調べてみよう。</p>

<p><strong>ひゅーっ！</strong></p>

<p>/var/www/html/index.html</p>

<p>何かある。<br>
ソースの中身をみたんだが　気に入らないタグ打ちだぜｗｗｗｗｗ</p>

<p>どうも　これは　トップ階層じゃないみたいだ。</p>

<p>なんか　外からは FileZilla で転送できない。パーミッションを w に変えていいのだろうか？<br>
変えないと作業が進まない。chmod する。</p>

<p>で、ブラウザで開いても PHP は効いてないみたいだ。未設定なのか。</p>

<h1>
<span id="php-を設定しよう" class="fragment"></span><a href="#php-%E3%82%92%E8%A8%AD%E5%AE%9A%E3%81%97%E3%82%88%E3%81%86"><i class="fa fa-link"></i></a>PHP を設定しよう</h1>

<p>「【PHP】PHPをインストールしたらやっておきたい設定」 (Qiita)<br>
<a href="http://qiita.com/knife0125/items/0e1af52255e9879f9332" class="autolink" id="reference-eaf74ee8ae9ddad93739">http://qiita.com/knife0125/items/0e1af52255e9879f9332</a></p>

<p>etc フォルダーに設定ファイルが入っているのか。</p>

<p>etc フォルダーの下には php と php5 ディレクトリがある。 php5 ではないと思うが。</p>

<p>/etc/php/7.0/cli ディレクトリの中に php.ini があった。</p>

<p><strong>あれっ？</strong></p>

<p>「PHPの設定」 (Sakura VPS マニュアル)<br>
<a href="http://www.xn--vps-073b3a72a.com/10.html" class="autolink" rel="nofollow noopener" target="_blank">http://www.xn--vps-073b3a72a.com/10.html</a></p>

<p>わたしの渡されたフォルダー構成と異なるぜ。設定したあとで渡されたんだろうか。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>service httpd restart
</code></pre></div></div>

<p>と叩けば httpデーモンが開始されるのだろうか。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>service httpd restart
Failed to restart httpd.service: Unit httpd.service not found.
</code></pre></div></div>

<p>いろいろ　さっぱり状況が分からんな……。</p>

<p>「7.　WEBサーバーの設定」 (Sakura VPS マニュアル)<br>
<a href="http://www.xn--vps-073b3a72a.com/7.html" class="autolink" rel="nofollow noopener" target="_blank">http://www.xn--vps-073b3a72a.com/7.html</a></p>

<p>「STEP.3：WEBページをアップしよう」 (Sakura VPS マニュアル)<br>
<a href="http://www.xn--vps-073b3a72a.com/8.html" class="autolink" rel="nofollow noopener" target="_blank">http://www.xn--vps-073b3a72a.com/8.html</a></p>

<h1>
<span id="varwwwhtml" class="fragment"></span><a href="#varwwwhtml"><i class="fa fa-link"></i></a>var/www/html</h1>

<blockquote>
<p>さくらVPSのホームページのデフォルトの階層は var/www/html になります。</p>
</blockquote>

<p><strong>あれま！</strong></p>

<p>いじったところを　元に戻そう。</p>

<p>多分、なんか、わたしに渡された状態では apache2 と php7.0 は入ってたけど、全然　設定されてない気がする。<br>
かといって　アン・インストール／再インストール　したら　なんか設定されているのが　消えてしまうかもしれない。現状を知らない。</p>

<h1>
<span id="apache-を再起動しよう" class="fragment"></span><a href="#apache-%E3%82%92%E5%86%8D%E8%B5%B7%E5%8B%95%E3%81%97%E3%82%88%E3%81%86"><i class="fa fa-link"></i></a>Apache を再起動しよう</h1>

<p>Apache 入ってるんだが、リスタート掛けてみるか。</p>

<p>「UbuntuでApacheを再起動する方法・コマンド」 (MiuxMiu)<br>
<a href="http://www.miuxmiu.com/archives/2010/03/03/ubuntu_apache_restart_command.html" class="autolink" rel="nofollow noopener" target="_blank">http://www.miuxmiu.com/archives/2010/03/03/ubuntu_apache_restart_command.html</a></p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>sudo /etc/init.d/apache2 restart
[ ok ] Restarting apache2 (via systemctl): apache2.service.
</code></pre></div></div>

<p>なんか　すぐ再起動したな。Apache はいて、PHP とは連携してないのだろう。</p>

<p>Apacheの It's works とかいうデフォルトページは html フォルダーの下に見えるんだが、そうか、DNS 設定してないから　こんなサブ・ディレクトリでページを見ているんだった。</p>

<h1>
<span id="phpini-を設定しよう" class="fragment"></span><a href="#phpini-%E3%82%92%E8%A8%AD%E5%AE%9A%E3%81%97%E3%82%88%E3%81%86"><i class="fa fa-link"></i></a>php.ini を設定しよう</h1>

<p>いろいろ　コメントアウトされているので、そのコメントを解除していく作業だ。</p>

<p>php.ini のバックアップを取っておく。名前は適当に php.ini.original としておいた。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>;error_log = php_errors.log
</code></pre></div></div>

<p>を、頭のセミコロンを外して、ディレクトリも次のように変えた。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>error_log = /var/log/php_errors.log
</code></pre></div></div>

<p>次に、</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>;mbstring.language = Japanese
</code></pre></div></div>

<p>は、頭のセミコロンを外した。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>mbstring.language = Japanese
</code></pre></div></div>

<p>次に、</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>;mbstring.internal_encoding =
</code></pre></div></div>

<p>は、次のように変えた。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>mbstring.internal_encoding = UTF-8
</code></pre></div></div>

<p>次に、</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>;mbstring.http_input =
</code></pre></div></div>

<p>は、次のように変えた。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>mbstring.http_input = auto
</code></pre></div></div>

<p>次に、</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>;mbstring.detect_order = auto
</code></pre></div></div>

<p>は、次のように変えた。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>mbstring.detect_order = auto
</code></pre></div></div>

<p>次に、</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>expose_php = On
</code></pre></div></div>

<p>を、次のように変えた。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>expose_php = Off
</code></pre></div></div>

<p>「「expose_php = off」の設定」（エンジニア足立のコーディング日記）<br>
<a href="https://www.deep-deep.jp/blog_engineer/archives/3793" class="autolink" rel="nofollow noopener" target="_blank">https://www.deep-deep.jp/blog_engineer/archives/3793</a></p>

<p>このあと、FileZilla で設定ファイルをサーバーに転送し……パーミッションはその都度ルート・ユーザーで変えて、<br>
PuTTY で次のようにコマンドを叩く。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>service httpd restart
Failed to restart httpd.service: Unit httpd.service not found.
</code></pre></div></div>

<p>何か　インストールされていないなあ。</p>

<h1>
<span id="apache-はインストールされているけどインストールしてみよう" class="fragment"></span><a href="#apache-%E3%81%AF%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%95%E3%82%8C%E3%81%A6%E3%81%84%E3%82%8B%E3%81%91%E3%81%A9%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%97%E3%81%A6%E3%81%BF%E3%82%88%E3%81%86"><i class="fa fa-link"></i></a>Apache はインストールされているけど、インストールしてみよう</h1>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>yum -y install httpd
The program 'yum' is currently not installed. You can install it by typing:
apt install yum
</code></pre></div></div>

<p>説明と全然一致しない。</p>

<h1>
<span id="yum-をインストールしよう" class="fragment"></span><a href="#yum-%E3%82%92%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%97%E3%82%88%E3%81%86"><i class="fa fa-link"></i></a>yum をインストールしよう</h1>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>apt install yum
</code></pre></div></div>

<p>インストールした。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>yum -y install httpd
There are no enabled repos.
 Run "yum repolist all" to see the repos you have.
 You can enable repos with yum-config-manager --enable &lt;repo&gt;
</code></pre></div></div>

<p>分からん。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>yum repolist all
repolist: 0
</code></pre></div></div>

<p>Apache を再起動するのは、</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>sudo /etc/init.d/apache2 restart
[ ok ] Restarting apache2 (via systemctl): apache2.service.
</code></pre></div></div>

<p>できるんだが。じゃあ次のように叩くと？</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>sudo /etc/init.d/httpd restart
sudo: /etc/init.d/httpd: command not found
</code></pre></div></div>

<p>init.d ディレクトリに httpd コマンドはあるのだろうか？</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>/etc/init.d# ls
apache2                 halt                   networking    single
apache-htcacheclean     hostname.sh            ondemand      skeleton
apparmor                hwclock.sh             plymouth      ssh
binfmt-support          irqbalance             plymouth-log  thermald
bootmisc.sh             keyboard-setup         pppd-dns      udev
cgmanager               killprocs              procps        ufw
cgproxy                 kmod                   rc            umountfs
checkfs.sh              memcached              rc.local      umountnfs.sh
checkroot-bootclean.sh  mountall-bootclean.sh  rcS           umountroot
checkroot.sh            mountall.sh            README        urandom
console-setup           mountdevsubfs.sh       reboot        uuidd
cron                    mountkernfs.sh         resolvconf    x11-common
dbus                    mountnfs-bootclean.sh  rsync
dns-clean               mountnfs.sh            rsyslog
grub-common             mysql                  sendsigs
</code></pre></div></div>

<p>無い。ハイパー・テキスト・トランスファー・プロトコル無い。</p>

<h1>
<span id="httpd-なんで無いの" class="fragment"></span><a href="#httpd-%E3%81%AA%E3%82%93%E3%81%A7%E7%84%A1%E3%81%84%E3%81%AE"><i class="fa fa-link"></i></a>httpd なんで無いの？</h1>

<p>「Can't find httpd.conf」 (ask ubuntu)<br>
<a href="http://askubuntu.com/questions/652095/cant-find-httpd-conf" class="autolink" rel="nofollow noopener" target="_blank">http://askubuntu.com/questions/652095/cant-find-httpd-conf</a></p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>/etc/apache2# ls
apache2.conf    conf-enabled  magic           mods-enabled  sites-available
conf-available  envvars       mods-available  ports.conf    sites-enabled
</code></pre></div></div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>sudo /etc/apache2/apache2.conf restart
sudo: /etc/apache2/apache2.conf: command not found
</code></pre></div></div>

<p>ダメー。</p>

<p>index.php</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>&lt;?php
echo 'hello, shogi world1';
</code></pre></div></div>

<p>この内容がそのまま表示されてしまう。じゃあ、HTMLならどうなのか？ HTML は表示されている。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>echo "&lt;?php phpinfo();"
</code></pre></div></div>

<p>とコマンドラインに打っても何も起こらない。</p>

<p>現状の環境が使い物にならないので　インストールからやり直そう。</p>

<p>「PHPの設定」 (さくらのVPS 設定マニュアル)<br>
<a href="http://www.sakura-vps.net/php-settings-for-sakura-vps/" class="autolink" rel="nofollow noopener" target="_blank">http://www.sakura-vps.net/php-settings-for-sakura-vps/</a></p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>yum -y install php php-mbstring php-mysql
There are no enabled repos.
 Run "yum repolist all" to see the repos you have.
 You can enable repos with yum-config-manager --enable &lt;repo&gt;
</code></pre></div></div>

<p>「【初心者向け】PHPがブラウザで正しく表示されない時の対処」 (n2p blog)<br>
<a href="https://n2p.co.jp/blog/tech/serverside/php-donot-display/" class="autolink" rel="nofollow noopener" target="_blank">https://n2p.co.jp/blog/tech/serverside/php-donot-display/</a></p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>php index.php
hello, shogi world1
</code></pre></div></div>

<p>これは動いている。じゃあ、phpinfo() を実行してみよう。<br>
表示されるようだ。</p>

<p>じゃあ、パーミッションか？</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>ls -an
-rw-r--r-- 1    0    0 11510 Sep 12  2015 index.html
-rw-rw-r-- 1 1000 1000    21 Mar  6 04:04 index.php
</code></pre></div></div>

<p>html は見れるしなあ。</p>

<p>apache の設定に php が書かれていないのだろうか？</p>

<p>ブラウザで開くと</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>&lt;?php phpinfo();
</code></pre></div></div>

<p>がそのまま表示されている。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>Document Roots
By default, Ubuntu does not allow access through the web browser to any file apart of those located in /var/www, public_html directories (when enabled) and /usr/share (for web applications). If your site is using a web document root located elsewhere (such as in /srv) you may need to whitelist your document root directory in /etc/apache2/apache2.conf.
The default Ubuntu document root is /var/www/html. You can make your own virtual hosts under /var/www. This is different to previous releases which provides better security out of the box.
</code></pre></div></div>

<p>「PHPが実行されずコメントアウトになる」 (teratail)<br>
<a href="https://teratail.com/questions/34508" class="autolink" rel="nofollow noopener" target="_blank">https://teratail.com/questions/34508</a></p>

<p>じゃあ、php5 を削除するか。</p>

<p>「php5.5とかphp5.6をインストールする」 (Qiita)<br>
<a href="http://qiita.com/ykyk1218/items/c859870ef8dac79f5e1c" class="autolink" id="reference-dec684ed05c7a300c4aa">http://qiita.com/ykyk1218/items/c859870ef8dac79f5e1c</a></p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>sudo yum remove php-*
</code></pre></div></div>

<p>一致しないようだ。</p>

<p>無料だと PHPは使えないとかないだろうか。</p>

<p>「UbuntuサーバからPHP5.6を完全に削除」 (エンジニア足立のコーディング日記)<br>
<a href="https://www.deep-deep.jp/blog_engineer/archives/4168" class="autolink" rel="nofollow noopener" target="_blank">https://www.deep-deep.jp/blog_engineer/archives/4168</a></p>

<p>完全に削除する場合</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>sudo apt-get –purge remove php5.6
E: Invalid operation –purge
</code></pre></div></div>

<p>動かない。</p>

<p>設定ファイルだけ残す場合</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>sudo apt-get remove php5.6
Reading package lists... Done
Building dependency tree
Reading state information... Done
Note, selecting 'php5.6-json' for regex 'php5.6'
Note, selecting 'php5.6-common' for regex 'php5.6'
Package 'php5.6-common' is not installed, so not removed
Package 'php5.6-json' is not installed, so not removed
The following packages were automatically installed and are no longer required:
  libssl-dev libssl-doc php-cli php-common php-pear php-xml php7.0-cli php7.0-common
  php7.0-json php7.0-opcache php7.0-readline php7.0-xml pkg-php-tools shtool
  zlib1g-dev
Use 'sudo apt autoremove' to remove them.
0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.
</code></pre></div></div>

<p>動いた。が、 0 ばっかりか。</p>

<p>コマンドラインからは php は動かせるので、apache の設定だと思うが。</p>

<h1>
<span id="apache-の設定ファイルで-php-を設定しよう" class="fragment"></span><a href="#apache-%E3%81%AE%E8%A8%AD%E5%AE%9A%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%A7-php-%E3%82%92%E8%A8%AD%E5%AE%9A%E3%81%97%E3%82%88%E3%81%86"><i class="fa fa-link"></i></a>Apache の設定ファイルで PHP を設定しよう</h1>

<p>「モジュール(php7_module)の追加と拡張子(.php)の登録」 (Admin Web)<br>
<a href="https://www.adminweb.jp/apache/php/index1.html" class="autolink" rel="nofollow noopener" target="_blank">https://www.adminweb.jp/apache/php/index1.html</a></p>

<p>httpd.conf が無いので、</p>

<p>/etc/apache2/apache2.conf を開いてみよう。</p>

<p>説明と全然ちがう。パス</p>

<p>「Ubuntu で apache の設定。まとめ。」 (freefielder.jp)<br>
<a href="http://freefielder.jp/blog/2012/12/ubuntu-apache.html" class="autolink" rel="nofollow noopener" target="_blank">http://freefielder.jp/blog/2012/12/ubuntu-apache.html</a></p>

<p>/etc/apache2/mods-available/php5.conf を探す。<br>
ある。<br>
あるんだが php5 という名前でいいのか。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>        php_admin_flag engine Off
</code></pre></div></div>

<p>と書いてあるところの頭に # を付け足すことにする。<br>
アパッチを再起動。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>sudo service apache2 restart
</code></pre></div></div>

<p>ブラウザに変化なし。</p>

<p>「ubuntu 16.04 インストール(6) apache, php」 (kashiの日記)<br>
<a href="http://verifiedby.me/adiary/086" class="autolink" rel="nofollow noopener" target="_blank">http://verifiedby.me/adiary/086</a></p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>/etc/apache2/sites-available# ls
000-default.conf  000-default.conf.bak  default-ssl.conf
</code></pre></div></div>

<p>うーむ、関係なさげ。</p>

<p>「【Ubuntu】PHP 5.6 を PHP 7 へアップグレード」 (Sukohi's tech blog!!)<br>
<a href="http://sukohi.blogspot.jp/2016/01/ubuntuphp-56-php-7.html" class="autolink" rel="nofollow noopener" target="_blank">http://sukohi.blogspot.jp/2016/01/ubuntuphp-56-php-7.html</a></p>

<p>移動。</p>

<p>/etc/apache2/mods-enabled</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>ls -an
total 8
drwxr-xr-x 2 0 0 4096 Mar  4 21:09 .
drwxr-xr-x 8 0 0 4096 Mar  4 21:13 ..
lrwxrwxrwx 1 0 0   36 Sep 12  2015 access_compat.load -&gt; ../mods-available/access_compat.load
lrwxrwxrwx 1 0 0   28 Sep 12  2015 alias.conf -&gt; ../mods-available/alias.conf
lrwxrwxrwx 1 0 0   28 Sep 12  2015 alias.load -&gt; ../mods-available/alias.load
lrwxrwxrwx 1 0 0   33 Sep 12  2015 auth_basic.load -&gt; ../mods-available/auth_basic.load
lrwxrwxrwx 1 0 0   33 Sep 12  2015 authn_core.load -&gt; ../mods-available/authn_core.load
lrwxrwxrwx 1 0 0   33 Sep 12  2015 authn_file.load -&gt; ../mods-available/authn_file.load
lrwxrwxrwx 1 0 0   33 Sep 12  2015 authz_core.load -&gt; ../mods-available/authz_core.load
lrwxrwxrwx 1 0 0   33 Sep 12  2015 authz_host.load -&gt; ../mods-available/authz_host.load
lrwxrwxrwx 1 0 0   33 Sep 12  2015 authz_user.load -&gt; ../mods-available/authz_user.load
lrwxrwxrwx 1 0 0   32 Sep 12  2015 autoindex.conf -&gt; ../mods-available/autoindex.conf
lrwxrwxrwx 1 0 0   32 Sep 12  2015 autoindex.load -&gt; ../mods-available/autoindex.load
lrwxrwxrwx 1 0 0   30 Sep 12  2015 deflate.conf -&gt; ../mods-available/deflate.conf
lrwxrwxrwx 1 0 0   30 Sep 12  2015 deflate.load -&gt; ../mods-available/deflate.load
lrwxrwxrwx 1 0 0   26 Sep 12  2015 dir.conf -&gt; ../mods-available/dir.conf
lrwxrwxrwx 1 0 0   26 Sep 12  2015 dir.load -&gt; ../mods-available/dir.load
lrwxrwxrwx 1 0 0   26 Sep 12  2015 env.load -&gt; ../mods-available/env.load
lrwxrwxrwx 1 0 0   29 Sep 12  2015 filter.load -&gt; ../mods-available/filter.load
lrwxrwxrwx 1 0 0   27 Sep 12  2015 mime.conf -&gt; ../mods-available/mime.conf
lrwxrwxrwx 1 0 0   27 Sep 12  2015 mime.load -&gt; ../mods-available/mime.load
lrwxrwxrwx 1 0 0   34 Sep 12  2015 mpm_prefork.conf -&gt; ../mods-available/mpm_prefork.conf
lrwxrwxrwx 1 0 0   34 Sep 12  2015 mpm_prefork.load -&gt; ../mods-available/mpm_prefork.load
lrwxrwxrwx 1 0 0   34 Sep 12  2015 negotiation.conf -&gt; ../mods-available/negotiation.conf
lrwxrwxrwx 1 0 0   34 Sep 12  2015 negotiation.load -&gt; ../mods-available/negotiation.load
lrwxrwxrwx 1 0 0   30 Sep 12  2015 rewrite.load -&gt; ../mods-available/rewrite.load
lrwxrwxrwx 1 0 0   31 Sep 12  2015 setenvif.conf -&gt; ../mods-available/setenvif.conf
lrwxrwxrwx 1 0 0   31 Sep 12  2015 setenvif.load -&gt; ../mods-available/setenvif.load
lrwxrwxrwx 1 0 0   29 Sep 12  2015 status.conf -&gt; ../mods-available/status.conf
lrwxrwxrwx 1 0 0   29 Sep 12  2015 status.load -&gt; ../mods-available/status.load
</code></pre></div></div>

<p>PHP5 関係は無さそう。</p>

<h1>
<span id="php5-ディレクトリを削除してみよう" class="fragment"></span><a href="#php5-%E3%83%87%E3%82%A3%E3%83%AC%E3%82%AF%E3%83%88%E3%83%AA%E3%82%92%E5%89%8A%E9%99%A4%E3%81%97%E3%81%A6%E3%81%BF%E3%82%88%E3%81%86"><i class="fa fa-link"></i></a>php5 ディレクトリを削除してみよう</h1>

<p>etc/php5 というディレクトリがある。削除する。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>rm -rf php5/
</code></pre></div></div>

<p>アパッチを再起動する。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>sudo service apache2 restart
</code></pre></div></div>

<p>これでもダメ。</p>

<p>httpd.conf はどこにあるんだろう。</p>

<p>「PHP7.0をApache2.4にインストール＠ウィンドウズ10」 (weblog)<br>
<a href="http://weblog.4141.biz/?p=359" class="autolink" rel="nofollow noopener" target="_blank">http://weblog.4141.biz/?p=359</a></p>

<p>Windows の設定なので合わない。</p>

<p>「ubuntu apatche２ でhttpd.confの内容はど」 (YAHOO!JAPAN知恵袋)<br>
<a href="http://detail.chiebukuro.yahoo.co.jp/qa/question_detail/q1419833899" class="autolink" rel="nofollow noopener" target="_blank">http://detail.chiebukuro.yahoo.co.jp/qa/question_detail/q1419833899</a></p>

<p>/etc/apache2/mods-available ディレクトリに、php5 のファイルがあるので削除してみる。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>rm php5.conf
rm php5.load
</code></pre></div></div>

<p>アパッチを再起動する。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>sudo service apache2 restart
</code></pre></div></div>

<p>これでもダメ。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>sudo apt-get remove php
Reading package lists... Done
Building dependency tree
Reading state information... Done
Package 'php' is not installed, so not removed
The following packages were automatically installed and are no longer required:
  libssl-dev libssl-doc php-cli php-common php-pear php-xml php7.0-cli php7.0-common php7.0-json
  php7.0-opcache php7.0-readline php7.0-xml pkg-php-tools shtool zlib1g-dev
Use 'sudo apt autoremove' to remove them.
0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.
</code></pre></div></div>

<p>ダメ。</p>

<p>「Apache 2.x (Unixシステム用)」 (PHPドキュメント)<br>
<a href="http://php.net/manual/ja/install.unix.apache2.php" class="autolink" rel="nofollow noopener" target="_blank">http://php.net/manual/ja/install.unix.apache2.php</a></p>

<p>違う。</p>

<p>「Debian GNU/Linux へのインストール」 (PHPドキュメント)<br>
<a href="http://php.net/manual/ja/install.unix.debian.php" class="autolink" rel="nofollow noopener" target="_blank">http://php.net/manual/ja/install.unix.debian.php</a></p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>apt-get install php5-common libapache2-mod-php5 php5-cli
Reading package lists... Done
Building dependency tree
Reading state information... Done
Package libapache2-mod-php5 is not available, but is referred to by another package.
This may mean that the package is missing, has been obsoleted, or
is only available from another source

Package php5-cli is not available, but is referred to by another package.
This may mean that the package is missing, has been obsoleted, or
is only available from another source
However the following packages replace it:
  php7.0-cli:i386 php7.0-cli

Package php5-common is not available, but is referred to by another package.
This may mean that the package is missing, has been obsoleted, or
is only available from another source

E: Package 'php5-common' has no installation candidate
E: Package 'libapache2-mod-php5' has no installation candidate
E: Package 'php5-cli' has no installation candidate
</code></pre></div></div>

<p>うーむ、何かエラーが出ている。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>/etc/init.d/apache2 stop
[ ok ] Stopping apache2 (via systemctl): apache2.service.
</code></pre></div></div>

<p>アパッチを止めると、サイトにアクセスできなくなっている。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>/etc/init.d/apache2 start
[ ok ] Starting apache2 (via systemctl): apache2.service.
</code></pre></div></div>

<p>アパッチを再開させると、サイトにはアクセスできるが、PHPはソースがそのまま出力されている。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>apt-cache search php5
bluefish - advanced Gtk+ text editor for web and software development
phing - PHP5 project build system based on Apache Ant
php-auth - Creating an authentication system
php-doc - Documentation for PHP5
php-http-request2 - Provides an easy way to perform HTTP requests
php-letodms-lucene - Document management system - Fulltext search
php-memcache - memcache extension module for PHP5
php-memcached - memcached extension module for PHP5, uses libmemcached
php-net-dns2 - PHP5 Resolver library used to communicate with a DNS server
phpunit - Unit testing suite for PHP5
</code></pre></div></div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>aptitude search php5
The program 'aptitude' is currently not installed. You can install it by typing:
apt install aptitude
</code></pre></div></div>

<p>「PHPスクリプトを利用する」 (server world)<br>
<a href="https://www.server-world.info/query?os=Debian_8&amp;p=httpd&amp;f=3" class="autolink" rel="nofollow noopener" target="_blank">https://www.server-world.info/query?os=Debian_8&amp;p=httpd&amp;f=3</a></p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>aptitude -y install php5 php5-cgi libapache2-mod-php5 php5-common php-pear
The program 'aptitude' is currently not installed. You can install it by typing:
apt install aptitude
</code></pre></div></div>

<h2>
<span id="aptitude-をインストールしよう" class="fragment"></span><a href="#aptitude-%E3%82%92%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%97%E3%82%88%E3%81%86"><i class="fa fa-link"></i></a>aptitude をインストールしよう</h2>

<p>「aptitudeをインストールする(Ubuntu 10.10 11.04 64bit)」 (upp)<br>
<a href="http://www005.upp.so-net.ne.jp/develop-tom/ub/aptitude-ub.html" class="autolink" rel="nofollow noopener" target="_blank">http://www005.upp.so-net.ne.jp/develop-tom/ub/aptitude-ub.html</a></p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>sudo apt-get install aptitude
</code></pre></div></div>

<p>インストールできただろうか？</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>aptitude -y install php5 php5-cgi libapache2-mod-php5 php5-common php-pear
</code></pre></div></div>

<p>今度は動いている。</p>

<h2>
<span id="apacheの設定でphpの拡張子を紐付けよう" class="fragment"></span><a href="#apache%E3%81%AE%E8%A8%AD%E5%AE%9A%E3%81%A7php%E3%81%AE%E6%8B%A1%E5%BC%B5%E5%AD%90%E3%82%92%E7%B4%90%E4%BB%98%E3%81%91%E3%82%88%E3%81%86"><i class="fa fa-link"></i></a>Apacheの設定で、PHPの拡張子を紐付けよう</h2>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>nano /etc/apache2/mods-enabled/mime.conf
</code></pre></div></div>

<p>220行目あたりに追記とのこと。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code># PHP extension
AddHandler php5-script .php
</code></pre></div></div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>systemctl restart apache2 
</code></pre></div></div>

<p>ダメ。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>apt-get install php5-common libapache2-mod-php5 php5-cli
Reading package lists... Done
Building dependency tree
Reading state information... Done
Package libapache2-mod-php5 is not available, but is referred to by another package.
This may mean that the package is missing, has been obsoleted, or
is only available from another source

Package php5-cli is not available, but is referred to by another package.
This may mean that the package is missing, has been obsoleted, or
is only available from another source
However the following packages replace it:
  php7.0-cli:i386 php7.0-cli

Package php5-common is not available, but is referred to by another package.
This may mean that the package is missing, has been obsoleted, or
is only available from another source

E: Package 'php5-common' has no installation candidate
E: Package 'libapache2-mod-php5' has no installation candidate
E: Package 'php5-cli' has no installation candidate
</code></pre></div></div>

<p>エラーが出ている。</p>

<p>「PHP + Apacheのインストール - Debian」 (Linux入門)<br>
<a href="http://webkaru.net/linux/debian-php-apache-install/" class="autolink" rel="nofollow noopener" target="_blank">http://webkaru.net/linux/debian-php-apache-install/</a></p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>apt-get install apache2 php5
Reading package lists... Done
Building dependency tree
Reading state information... Done
Package php5 is not available, but is referred to by another package.
This may mean that the package is missing, has been obsoleted, or
is only available from another source

E: Package 'php5' has no installation candidate
</code></pre></div></div>

<p>エラーが出ている。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>php -v
-su: /usr/bin/php: No such file or directory
</code></pre></div></div>

<p>エラーが出ている。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>php info.php
-su: /usr/bin/php: No such file or directory
</code></pre></div></div>

<p>PHP が無いということか。</p>

<h1>
<span id="php7-をインストールしよう" class="fragment"></span><a href="#php7-%E3%82%92%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%97%E3%82%88%E3%81%86"><i class="fa fa-link"></i></a>PHP7 をインストールしよう</h1>

<p>「Debian（jessie）にPHP 7をインストールする方法」 (約束の地)<br>
<a href="http://obel.hatenablog.jp/entry/20160311/1457644814" class="autolink" rel="nofollow noopener" target="_blank">http://obel.hatenablog.jp/entry/20160311/1457644814</a></p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>apt-get install php
</code></pre></div></div>

<p>インストールする。php 指定で PHP7 相当らしい。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>php -v
PHP 7.0.15-0ubuntu0.16.04.4 (cli) ( NTS )
Copyright (c) 1997-2017 The PHP Group
Zend Engine v3.0.0, Copyright (c) 1998-2017 Zend Technologies
    with Zend OPcache v7.0.15-0ubuntu0.16.04.4, Copyright (c) 1999-2017, by Zend Technologies
</code></pre></div></div>

<p>ひとまず PHP7 はインストールした。</p>

<h1>
<span id="apache-と-php-をアンインストールするには" class="fragment"></span><a href="#apache-%E3%81%A8-php-%E3%82%92%E3%82%A2%E3%83%B3%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%99%E3%82%8B%E3%81%AB%E3%81%AF"><i class="fa fa-link"></i></a>Apache と PHP をアンインストールするには？</h1>

<p>「Debian 完全にApache2をアンインストールし、再インストールする」 (SE'S BOOK)<br>
<a href="https://viewse.blogspot.jp/2011/02/debian-apache2.html" class="autolink" rel="nofollow noopener" target="_blank">https://viewse.blogspot.jp/2011/02/debian-apache2.html</a></p>

<p>まず、関連するパッケージを文字列検索する。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>dpkg --get-selections | grep apache
apache2                                         install
apache2-bin                                     install
apache2-data                                    install
apache2-utils                                   install
libapache2-mod-php5                             install
</code></pre></div></div>

<p>見つけたパッケージを削除する</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>apt-get remove --purge apache2 apache2-bin apache2-data apache2-utils libapache2-mod-php5
Reading package lists... Done
Building dependency tree
Reading state information... Done
The following packages were automatically installed and are no longer required:
  libapr1 libaprutil1 libaprutil1-dbd-sqlite3 libaprutil1-ldap liblua5.1-0 ssl-cert
Use 'apt autoremove' to remove them.
The following packages will be REMOVED:
  apache2* apache2-bin* apache2-data* apache2-utils* libapache2-mod-php5*
0 upgraded, 0 newly installed, 5 to remove and 0 not upgraded.
After this operation, 5,383 kB disk space will be freed.
Do you want to continue? [Y/n] y
(Reading database ... 45809 files and directories currently installed.)
Removing apache2 (2.4.18-2ubuntu3.1) ...
Purging configuration files for apache2 (2.4.18-2ubuntu3.1) ...
dpkg: warning: while removing apache2, directory '/var/www/html' not empty so not removed
Removing apache2-bin (2.4.18-2ubuntu3.1) ...
Removing apache2-data (2.4.18-2ubuntu3.1) ...
Removing apache2-utils (2.4.18-2ubuntu3.1) ...
Removing libapache2-mod-php5 (5.5.9+dfsg-1ubuntu4.21) ...
Purging configuration files for libapache2-mod-php5 (5.5.9+dfsg-1ubuntu4.21) ...
Processing triggers for man-db (2.7.5-1) ...
Processing triggers for ufw (0.35-0ubuntu2) ...
</code></pre></div></div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>dpkg --get-selections | grep apache
</code></pre></div></div>

<p>これで apache 関連のパッケージを削除した。<br>
次に PHPに関連するパッケージを文字列検索する。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>dpkg --get-selections | grep php
php                                             install
php-common                                      install
php-pear                                        deinstall
php5-cli                                        deinstall
php5-common                                     install
php5-json                                       deinstall
php5-memcached                                  deinstall
php5-mysql                                      deinstall
php5-readline                                   deinstall
php7.0                                          install
php7.0-cli                                      install
php7.0-common                                   install
php7.0-fpm                                      install
php7.0-json                                     install
php7.0-opcache                                  install
php7.0-readline                                 install
php7.0-xml                                      deinstall
</code></pre></div></div>

<p>見つけたパッケージを削除する</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>apt-get remove --purge php php-common php-pear php5-cli php5-common php5-json php5-memcached php5-mysql php5-readline php7.0 php7.0-cli php7.0-common php7.0-fpm php7.0-json php7.0-opcache php7.0-readline php7.0-xml
Reading package lists... Done
Building dependency tree
Reading state information... Done
The following packages were automatically installed and are no longer required:
  libapr1 libaprutil1 libaprutil1-dbd-sqlite3 libaprutil1-ldap liblua5.1-0 ssl-cert
Use 'apt autoremove' to remove them.
The following packages will be REMOVED:
  php* php-common* php-pear* php5-cli* php5-common* php5-json* php5-memcached* php5-mysql* php5-readline*
  php7.0* php7.0-cli* php7.0-common* php7.0-fpm* php7.0-json* php7.0-opcache* php7.0-readline* php7.0-xml*
0 upgraded, 0 newly installed, 17 to remove and 0 not upgraded.
After this operation, 14.1 MB disk space will be freed.
Do you want to continue? [Y/n] y
(Reading database ... 45161 files and directories currently installed.)
Removing php (1:7.0+35ubuntu6) ...
Removing php7.0 (7.0.15-0ubuntu0.16.04.4) ...
Removing php7.0-fpm (7.0.15-0ubuntu0.16.04.4) ...
Purging configuration files for php7.0-fpm (7.0.15-0ubuntu0.16.04.4) ...
dpkg: warning: while removing php7.0-fpm, directory '/etc/php/7.0/fpm/conf.d' not empty so not removed
Removing php7.0-cli (7.0.15-0ubuntu0.16.04.4) ...
Purging configuration files for php7.0-cli (7.0.15-0ubuntu0.16.04.4) ...
dpkg: warning: while removing php7.0-cli, directory '/etc/php/7.0/cli/conf.d' not empty so not removed
Removing php7.0-readline (7.0.15-0ubuntu0.16.04.4) ...
Purging configuration files for php7.0-readline (7.0.15-0ubuntu0.16.04.4) ...
Removing php7.0-opcache (7.0.15-0ubuntu0.16.04.4) ...
Purging configuration files for php7.0-opcache (7.0.15-0ubuntu0.16.04.4) ...
Removing php-pear (1:1.10.1+submodules+notgz-6) ...
Purging configuration files for php-pear (1:1.10.1+submodules+notgz-6) ...
Removing php5-cli (5.5.9+dfsg-1ubuntu4.21) ...
Purging configuration files for php5-cli (5.5.9+dfsg-1ubuntu4.21) ...
Removing php5-common (5.5.9+dfsg-1ubuntu4.21) ...
Purging configuration files for php5-common (5.5.9+dfsg-1ubuntu4.21) ...
dpkg: warning: while removing php5-common, directory '/usr/share/doc/php5-common' not empty so not removed
Removing php5-json (1.3.2-2build1) ...
Purging configuration files for php5-json (1.3.2-2build1) ...
dpkg: warning: while removing php5-json, directory '/usr/lib/php5/20121212' not empty so not removed
Removing php5-memcached (2.1.0-6build1) ...
Purging configuration files for php5-memcached (2.1.0-6build1) ...
dpkg: warning: while removing php5-memcached, directory '/usr/share/php/.registry/.channel.pecl.php.net' not empty so not removed
Removing php5-mysql (5.5.9+dfsg-1ubuntu4.21) ...
Purging configuration files for php5-mysql (5.5.9+dfsg-1ubuntu4.21) ...
Removing php5-readline (5.5.9+dfsg-1ubuntu4.21) ...
Purging configuration files for php5-readline (5.5.9+dfsg-1ubuntu4.21) ...
Removing php7.0-json (7.0.15-0ubuntu0.16.04.4) ...
Purging configuration files for php7.0-json (7.0.15-0ubuntu0.16.04.4) ...
Removing php7.0-common (7.0.15-0ubuntu0.16.04.4) ...
Purging configuration files for php7.0-common (7.0.15-0ubuntu0.16.04.4) ...
dpkg: warning: while removing php7.0-common, directory '/etc/php/7.0/mods-available' not empty so not removed
Removing php7.0-xml (7.0.15-0ubuntu0.16.04.4) ...
Purging configuration files for php7.0-xml (7.0.15-0ubuntu0.16.04.4) ...
Removing php-common (1:35ubuntu6) ...
Purging configuration files for php-common (1:35ubuntu6) ...
Processing triggers for man-db (2.7.5-1) ...
</code></pre></div></div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>dpkg --get-selections | grep php
</code></pre></div></div>

<p>これで apache 関連のパッケージを削除した。</p>

<p>次に再インストールする。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>apt-get install apache2 php
</code></pre></div></div>

<p>アパッチを起動させてみる。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>/etc/init.d/apache2 start
[ ok ] Starting apache2 (via systemctl): apache2.service.
</code></pre></div></div>

<p>404 Not Found になったが、代わりに html フォルダーではなく、その上の階層にアクセスすると<br>
It works! のページが出た。</p>

<p>index.php は相変わらずソースがそのまま出ている。</p>

<h2>
<span id="また設定" class="fragment"></span><a href="#%E3%81%BE%E3%81%9F%E8%A8%AD%E5%AE%9A"><i class="fa fa-link"></i></a>また設定</h2>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>nano /etc/apache2/mods-enabled/mime.conf
</code></pre></div></div>

<p>220行目あたりに追記とのこと。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code># PHP extension
AddHandler php5-script .php
</code></pre></div></div>

<p>アパッチを再起動する。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>/etc/init.d/apache2 start
[ ok ] Starting apache2 (via systemctl): apache2.service.
</code></pre></div></div>

<p>PHP はソースのまま出ている。</p>

<p>「PHPスクリプトを利用する」 (Server World)<br>
<a href="https://www.server-world.info/query?os=Ubuntu_16.04&amp;p=httpd&amp;f=3" class="autolink" rel="nofollow noopener" target="_blank">https://www.server-world.info/query?os=Ubuntu_16.04&amp;p=httpd&amp;f=3</a></p>

<p>PHP をインストールする。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>apt-get -y install php php-cgi libapache2-mod-php php-common php-pear php-mbstring
</code></pre></div></div>

<p>アパッチを再起動する。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>sudo /etc/init.d/apache2 restart
[ ok ] Restarting apache2 (via systemctl): apache2.service.
</code></pre></div></div>

<h1>
<span id="おや-phpinfo-が効いた" class="fragment"></span><a href="#%E3%81%8A%E3%82%84-phpinfo-%E3%81%8C%E5%8A%B9%E3%81%84%E3%81%9F"><i class="fa fa-link"></i></a>おや？ phpinfo() が効いた</h1>

<p>じゃあ決め手は、</p>

<ul>
<li>アパッチ　アンインストール</li>
<li>PHP アンインストール</li>
<li>アパッチとPHPを同時にインストール</li>
<li>apt-get -y install php php-cgi libapache2-mod-php php-common php-pear php-mbstring</li>
<li>アパッチ再起動「sudo /etc/init.d/apache2 restart」</li>
</ul>

<p>このあたりか。途中でディレクトリ階層も変わった。</p>

<h1>
<span id="ブラウザでurlでアクセスして-getクエリー文字列を-プログラムに渡せるだろうか" class="fragment"></span><a href="#%E3%83%96%E3%83%A9%E3%82%A6%E3%82%B6%E3%81%A7url%E3%81%A7%E3%82%A2%E3%82%AF%E3%82%BB%E3%82%B9%E3%81%97%E3%81%A6-get%E3%82%AF%E3%82%A8%E3%83%AA%E3%83%BC%E6%96%87%E5%AD%97%E5%88%97%E3%82%92-%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%A0%E3%81%AB%E6%B8%A1%E3%81%9B%E3%82%8B%E3%81%A0%E3%82%8D%E3%81%86%E3%81%8B"><i class="fa fa-link"></i></a>ブラウザでURLでアクセスして GETクエリー文字列を プログラムに渡せるだろうか？</h1>

<p>「HTTPを使うソケット通信」 (rsch)<br>
<a href="http://www.rsch.tuis.ac.jp/~mizutani/online/software-basic2002/socket-http.html" class="autolink" rel="nofollow noopener" target="_blank">http://www.rsch.tuis.ac.jp/~mizutani/online/software-basic2002/socket-http.html</a></p>

<p>サーバー側が欲しいんだが。</p>

<p>「【CakePHP】リクエストの取得方法」 (Qiita)<br>
<a href="http://qiita.com/kazu56/items/7d344ccef56deef66a7a" class="autolink" id="reference-6c0d007076504f74893b">http://qiita.com/kazu56/items/7d344ccef56deef66a7a</a></p>

<p>ひとまず PHP でGETクエリー文字列を取得してみるか。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>    http://a.b.c.d/html/?shogi=sfen 3/1p1/1P1/3 w - 1 moves
</code></pre></div></div>

<p>みたいな感じで。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>$shogi = $this-&gt;request-&gt;query('shogi');
</code></pre></div></div>

<p>なんだこれ、ダメだぜ。</p>

<p>「クエリ文字列の全体を取得する。」 (php pro)<br>
<a href="http://www.phppro.jp/qa/1572" class="autolink" rel="nofollow noopener" target="_blank">http://www.phppro.jp/qa/1572</a></p>

<p>「urldecode」 (PHPマニュアル)<br>
<a href="http://php.net/manual/ja/function.urldecode.php" class="autolink" rel="nofollow noopener" target="_blank">http://php.net/manual/ja/function.urldecode.php</a></p>

<p>例えばこんな感じ。</p>

<p>tamesi1.php</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>&lt;?php
$query = urldecode($_SERVER['QUERY_STRING']);
echo '（＾ｑ＾）' . $query . '&lt;br /&gt;';
echo 'クリックしろだぜ☆ｍ９（＾～＾）！&lt;br /&gt;';
echo '&lt;a href="http://999.999.999.999/tamesi1.php?shogi=sfen 3/1p1/1P1/3 w - 1 moves"&gt;http://999.999.999.999/?shogi=sfen 3/1p1/1P1/3 w - 1 moves&lt;/a&gt;&lt;br /&gt;';
</code></pre></div></div>

<p>で、サーバー側でプログラムが動いているとして、どうやって　この文字列を渡すのか？<br>
ポート番号が開いているとして、書き込めばいいのか？ PHP でできるだろうか？</p>

<p>「exeからphpにデータを渡す」 (teratail)<br>
<a href="https://teratail.com/questions/55331" class="autolink" rel="nofollow noopener" target="_blank">https://teratail.com/questions/55331</a></p>

<p>プロセス間通信を調べてみるか。</p>

<p>「メッセージキューの使い方(CとPHPでプロセス間通信)」 (Linux Install Memo)<br>
<a href="https://linux.yebisu.jp/memo/630" class="autolink" rel="nofollow noopener" target="_blank">https://linux.yebisu.jp/memo/630</a></p>

<p>メッセージ・キューというのもあるのか。</p>

<h1>
<span id="メッセージキュー" class="fragment"></span><a href="#%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%AD%E3%83%A5%E3%83%BC"><i class="fa fa-link"></i></a>メッセージ・キュー</h1>

<p>とりあえず C# 側から調べてみよう。</p>

<p>「C# メッセージキューにメッセージを送信する」 (ITLAB51.COM)<br>
<a href="http://www.itlab51.com/?p=4111" class="autolink" rel="nofollow noopener" target="_blank">http://www.itlab51.com/?p=4111</a></p>

<p>ウィンドウズの検索ボックスに「コンピューターの管理」と入れる。</p>

<p>[サービスとアプリケーション] - [メッセージ キュー] - [専用キュー]</p>

<p>今は空だが、ここに　メッセージを置けるらしい。<br>
あとで使ってみよう。</p>

<p>「C# メッセージキューからメッセージを受信する」 (ITLAB51.COM)<br>
<a href="http://www.itlab51.com/?p=4173" class="autolink" rel="nofollow noopener" target="_blank">http://www.itlab51.com/?p=4173</a></p>

<p>先に　メッセージ・キューを作成しないとダメみたいだ。</p>

<p>「C# メッセージキューに専用キューを作成する」 (ITLAB51.COM)<br>
<a href="http://www.itlab51.com/?p=2322" class="autolink" rel="nofollow noopener" target="_blank">http://www.itlab51.com/?p=2322</a></p>

<p>よし、Windowsでは確認できた。</p>

<p>C# サンプルプログラム</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>using System;
using System.Messaging; // [References] - [Add Reference]

namespace MsgQueue
{
    /// &lt;summary&gt;
    /// キュー（メッセージ箱）に送り込んだ情報があるか確認する方法。
    /// (1) Windowsの検索ボックスに「コンピューターの管理」と入力。
    /// (2) [サービスとアプリケーション] - [メッセージ キュー] を開く。
    /// (3) [F5]キーで更新。
    /// &lt;/summary&gt;
    class Program
    {
        public const string QUEUE_NAME = @".\Private$\testqueue";

        static void Main(string[] args)
        {
            for (;;)
            {
                Console.WriteLine(@"選べだぜ☆（＾～＾）
1   : メッセージ箱 作成
2   : メッセージ   送信
3   : メッセージ   受信
4   : メッセージ箱 削除
quit: 終了
");

                int category = 0;
                for (;;)
                {
                    string line = Console.ReadLine();
                    switch (line)
                    {
                        case "1": category = 1; goto gt_EndLoop1;
                        case "2": category = 2; goto gt_EndLoop1;
                        case "3": category = 3; goto gt_EndLoop1;
                        case "4": category = 4; goto gt_EndLoop1;
                        case "quit": goto gt_Quit;
                        default: break;
                    }
                }
                gt_EndLoop1:
                ;

                switch (category)
                {
                    case 1:
                        {
                            if (MessageQueue.Exists(QUEUE_NAME))
                            {
                                Console.WriteLine("キュー["+ QUEUE_NAME + "]は既存だぜ☆（＾～＾）");
                            }
                            else
                            {
                                // キュー名は、大文字で指定しても小文字になる
                                MessageQueue.Create(QUEUE_NAME);
                            }
                        }
                        break;
                    case 2:
                        {
                            MessageQueue mq = new MessageQueue((@".\Private$\testqueue"));
                            Message msg = new Message();
                            msg.Body = "テストメッセージだぜ☆（＾▽＾）";
                            msg.Label = "テストだぜ☆（＾～＾）";
                            mq.Send(msg);
                        }
                        break;
                    case 3:
                        {
                            MessageQueue mq = new MessageQueue((@".\Private$\testqueue"));
                            System.Messaging.Message msg = new System.Messaging.Message();
                            msg = mq.Receive();
                            msg.Formatter = new XmlMessageFormatter(new string[] { "System.String, mscorlib" });
                            Console.WriteLine(msg.Body.ToString());
                        }
                        break;
                    case 4:
                        {
                            if (MessageQueue.Exists(QUEUE_NAME))
                            {
                                MessageQueue.Delete(QUEUE_NAME);
                            }
                            else
                            {
                                Console.WriteLine("キュー[" + QUEUE_NAME + "]なんか無いぜ☆（＾～＾）");
                            }
                        }
                        break;
                }
            }
            gt_Quit:
            ;
        }
    }
}
</code></pre></div></div>

<p>Ubuntu でも試してみよう。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>nano MsgQueue.cs
</code></pre></div></div>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>mcs MsgQueue.cs
MsgQueue.cs(2,14): error CS0234: The type or namespace name `Messaging' does not exist in the namespace `System'. Are you missing an assembly reference?
Compilation failed: 1 error(s), 0 warnings
</code></pre></div></div>

<h2>
<span id="どうやって-systemmessaging-の参照を追加するんだ" class="fragment"></span><a href="#%E3%81%A9%E3%81%86%E3%82%84%E3%81%A3%E3%81%A6-systemmessaging-%E3%81%AE%E5%8F%82%E7%85%A7%E3%82%92%E8%BF%BD%E5%8A%A0%E3%81%99%E3%82%8B%E3%82%93%E3%81%A0"><i class="fa fa-link"></i></a>どうやって System.Messaging の参照を追加するんだ？</h2>

<p>「「○○○.dllを参照に追加します」の意味は？」 (DOBON.NET)<br>
<a href="http://dobon.net/vb/dotnet/help/addreference.html" class="autolink" rel="nofollow noopener" target="_blank">http://dobon.net/vb/dotnet/help/addreference.html</a></p>

<p>「/reference」 (MSDN)<br>
<a href="https://msdn.microsoft.com/ja-jp/library/2b07fd84(v=vs.100).aspx" class="autolink" rel="nofollow noopener" target="_blank">https://msdn.microsoft.com/ja-jp/library/2b07fd84(v=vs.100).aspx</a></p>

<p>じゃあ、こんな感じでいいのか？</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>mcs /reference:messaging.dll MsgQueue.cs
error CS0006: Metadata file `messaging.dll' could not be found
Compilation failed: 1 error(s), 0 warnings
</code></pre></div></div>

<p>まあ、 .dll 無いよな。どうするのか……。</p>

<p>「System messaging dll missing?」 (stack overflow)<br>
<a href="http://stackoverflow.com/questions/13409342/system-messaging-dll-missing" class="autolink" rel="nofollow noopener" target="_blank">http://stackoverflow.com/questions/13409342/system-messaging-dll-missing</a></p>

<p>こうか。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>mcs /reference:System.Messaging.dll MsgQueue.cs
</code></pre></div></div>

<p><strong>行けた！？</strong></p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>./MsgQueue.exe
選べだぜ☆（＾～＾）
1   : メッセージ箱 作成
2   : メッセージ   送信
3   : メッセージ   受信
4   : メッセージ箱 削除
quit: 終了

1
選べだぜ☆（＾～＾）
1   : メッセージ箱 作成
2   : メッセージ   送信
3   : メッセージ   受信
4   : メッセージ箱 削除
quit: 終了

2
Insert: Mono.Messaging.RabbitMQ.MessagingContext

Unhandled Exception:
System.Messaging.MessageQueueException: Unable to connect to Queue: localhost\private$\testqueue, Error: None of the specified endpoints were reachable
  at System.Messaging.MessageQueue.Send (System.Object obj) &lt;0x40f79d90 + 0x00227&gt; in &lt;filename unknown&gt;:0
  at (wrapper remoting-invoke-with-check) System.Messaging.MessageQueue:Send (object)
  at MsgQueue.Program.Main (System.String[] args) &lt;0x40f46d50 + 0x00233&gt; in &lt;filename unknown&gt;:0
[ERROR] FATAL UNHANDLED EXCEPTION: System.Messaging.MessageQueueException: Unable to connect to Queue: localhost\private$\testqueue, Error: None of the specified endpoints were reachable
  at System.Messaging.MessageQueue.Send (System.Object obj) &lt;0x40f79d90 + 0x00227&gt; in &lt;filename unknown&gt;:0
  at (wrapper remoting-invoke-with-check) System.Messaging.MessageQueue:Send (object)
  at MsgQueue.Program.Main (System.String[] args) &lt;0x40f46d50 + 0x00233&gt; in &lt;filename unknown&gt;:0
</code></pre></div></div>

<p>なんのこっちゃ～。</p>

<p>「None of the specified endpoints were reachable」 (stack overflow)<br>
<a href="http://stackoverflow.com/questions/32432018/none-of-the-specified-endpoints-were-reachable" class="autolink" rel="nofollow noopener" target="_blank">http://stackoverflow.com/questions/32432018/none-of-the-specified-endpoints-were-reachable</a></p>

<p>シングルトンで解決するのか？</p>

<p>「Linux のメッセージキュー (IPC)」 (楽吾楽, Repeat myself)<br>
<a href="http://blogs.yahoo.co.jp/ichi0346/34314386.html" class="autolink" rel="nofollow noopener" target="_blank">http://blogs.yahoo.co.jp/ichi0346/34314386.html</a></p>

<p>うーむ、エラーが出るぜ。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>cat /proc/sys/fs/mqueue/msg_max
10
cat /proc/sys/fs/mqueue/msgsize_max
8192
cat /proc/sys/fs/mqueue/queues_max
256
</code></pre></div></div>

<h1>
<span id="qiitaのゲートウェイがタイムアウトした記事を変えよう" class="fragment"></span><a href="#qiita%E3%81%AE%E3%82%B2%E3%83%BC%E3%83%88%E3%82%A6%E3%82%A7%E3%82%A4%E3%81%8C%E3%82%BF%E3%82%A4%E3%83%A0%E3%82%A2%E3%82%A6%E3%83%88%E3%81%97%E3%81%9F%E8%A8%98%E4%BA%8B%E3%82%92%E5%A4%89%E3%81%88%E3%82%88%E3%81%86"><i class="fa fa-link"></i></a>Qiitaのゲートウェイがタイムアウトした。記事を変えよう。</h1>

<p>＜その２＞へ</p>
</div></div></section><div class="css-1yzj1fm"><div class="css-1uv1qiv"><span class="fa fa-twitter"></span></div><div class="css-1uv1qiv"><span class="fa fa-facebook"></span></div></div><div class="apm-Content"><div class="apm-Content_title">Why not register and get more from Qiita?</div><ol class="apm-Content_list"><li>We will deliver articles that match you<div class="description">By following users and tags, you can catch up information on technical fields that you are interested in as a whole</div></li><li>you can read useful information later efficiently<div class="description">By &quot;stocking&quot; the articles you like, you can search right away</div></li><div><a class="apm-Content_help" href="https://help.qiita.com/ja/articles/qiita-login-user" target="_blank"><i class="fa fa-fw fa-arrow-circle-right"></i>What you can do with signing up</a></div></ol><a href="/signup?callback_action=login_or_signup&amp;redirect_to=%2Fmuzudho1%2Fitems%2Faf3537d36f16c063a572&amp;realm=qiita" class="apm-Content_button apm-Content_button-signup">Sign up</a><a href="/login?callback_action=login_or_signup&amp;redirect_to=%2Fmuzudho1%2Fitems%2Faf3537d36f16c063a572&amp;realm=qiita" class="apm-Content_button apm-Content_button-signin">Login</a></div></div><div class="css-helsa7"></div></div></div></div><div class="css-109dbrr"><div class="css-5jpx49"><div class="css-mnxgyc"><button class=" css-1vlpknv"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/muzudho1/items/af3537d36f16c063a572/likers" class="css-1iupg5d">8</a></div><div class="css-fsjkhv"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-1b17vb0">10</span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-7i7f4d"><div class="css-1gj7nt">Improve article</div><a href="/drafts/af3537d36f16c063a572/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/muzudho1/items/af3537d36f16c063a572/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/muzudho1/items/af3537d36f16c063a572/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/muzudho1/items/af3537d36f16c063a572/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/muzudho1/items/af3537d36f16c063a572.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="PersonalArticlePage" data-dom-id="PersonalArticlePage-react-component-34bbc1fb-8228-4edb-b1eb-b805df130ef6">{"authorAnalyticsTrackingId":null,"organizationAnalyticsTrackingId":null}</script>
      
<footer id="globalFooter" class="st-Footer"><div class="st-Footer_container"><div class="st-Footer_start"><div class="st-Footer_logo"><svg viewbox="0 0 426.57 130" xmlns="http://www.w3.org/2000/svg"><circle cx="167.08" cy="21.4" r="12.28" /><path d="M250.81 29.66h23.48v18.9h-23.48z" /><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z" /><circle cx="216.33" cy="21.4" r="12.28" /></svg></div><div class="st-Footer_catchcopy">How developers code is here.</div><div class="st-Footer_socials"><a class="fa fa-twitter" href="https://twitter.com/qiita"></a><a class="fa fa-facebook-square" href="https://www.facebook.com/qiita/"></a></div></div><div class="st-Footer_end"><div class="st-Footer_qiita"><div class="st-Footer_label">Qiita</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="/about">About</a><a href="/terms">Terms</a><a href="/privacy">Privacy</a><a target="_blank" href="http://help.qiita.com/ja/articles/qiita-community-guideline">Guideline</a><a target="_blank" href="https://help.qiita.com/ja/articles/others-brand-guideline">Design Guideline</a></div><div class="st-Footer_column"><a href="/release-notes">Release</a><a href="/api/v2/docs">API</a><a href="/feedback/new">ご意見</a><a href="https://help.qiita.com">Help</a><a target="_blank" href="https://qiita.com/ads?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Advertisement</a></div></div></div><div class="st-Footer_increments"><div class="st-Footer_label">Increments</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="https://increments.co.jp/company/">About</a><a href="https://increments.co.jp/jobs/">採用情報</a><a href="https://blog.qiita.com">Blog</a></div><div class="st-Footer_column"><a href="https://teams.qiita.com/">Qiita Team</a><a href="https://jobs.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Jobs</a><a href="https://zine.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Zine</a></div></div></div></div></div><div class="st-Footer_copyright">© 2011-2021 Increments Inc.</div></footer><div id="Snackbar-react-component-2212001c-b7ab-4f1b-8eeb-0b2ea28835da"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="Snackbar" data-dom-id="Snackbar-react-component-2212001c-b7ab-4f1b-8eeb-0b2ea28835da">{}</script>
      
<div id="LoginModal-react-component-e613fe35-2f87-4798-9743-14d530e0a02b"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="LoginModal" data-dom-id="LoginModal-react-component-e613fe35-2f87-4798-9743-14d530e0a02b">{}</script>
      
<div id="StockModal-react-component-cf46b12e-eb71-44a1-830e-534f4a4b4001"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="StockModal" data-dom-id="StockModal-react-component-cf46b12e-eb71-44a1-830e-534f4a4b4001">{}</script>
      
</div><div id="dataContainer" style="display: none;" data-config="{&quot;actionPath&quot;:&quot;public/items#show&quot;,&quot;settings&quot;:{&quot;analyticsTrackingId&quot;:&quot;UA-24675221-12&quot;,&quot;assetsMap&quot;:{},&quot;csrfToken&quot;:&quot;4WlN2yJJAouY+CCmFnsFOLcVORAMN3Br1eykAEUIfGPGKHJvf0ah8kztJbtLUmW3AwN2KIblQjRCi5DAIUlWnA==&quot;,&quot;locale&quot;:&quot;en&quot;},&quot;currentUser&quot;:null}" /></body></html><script type="application/json" data-js-react-on-rails-store="AppStoreWithReactOnRails">{"snackbar":{"type":"","body":"","isActive":false},"article":{"article":{"body":"\u003cp\u003e１時間前まで　コンピュータ囲碁やってた気もするんだが、コンピュータ将棋ソフトに切り替えよう。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"要件定義\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e要件定義\u003c/h1\u003e\n\n\u003cul\u003e\n\u003cli\u003eURL叩いたら指し手を返してほしい。1秒以内で。\u003c/li\u003e\n\u003cli\u003e環境\n\n\u003cul\u003e\n\u003cli\u003eレンタルサーバーは用意される\u003c/li\u003e\n\u003cli\u003eLinux\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eなるほど……、最近どんな騒ぎがあったのか知らないのかツッコミたいところだが　わたしには関係ない。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"思いついてみよう\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%80%9D%E3%81%84%E3%81%A4%E3%81%84%E3%81%A6%E3%81%BF%E3%82%88%E3%81%86\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e思いついてみよう\u003c/h1\u003e\n\n\u003cp\u003eまず　わたしの環境なんだが\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eWindows 10\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eぱっと思いつくところでは\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e浮かむ瀬\u003c/li\u003e\n\u003cli\u003eUbuntu ※第４回電王トーナメントでも大人気だ。USBに入れて突きさしてセットアップされる。\n\n\u003cul\u003e\n\u003cli\u003e(追記)(初期インストール済み) 14.04.5 LTS (GNU/Linux 3.13.0-63-generic x86_64)\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cdel\u003eGCC\u003c/del\u003e g++-4.8以上\u003c/li\u003e\n\u003cli\u003e\n\u003cdel\u003eteratarm\u003c/del\u003e PuTTY\u003c/li\u003e\n\u003cli\u003e(追記) mono ※将棋所を使う場合\u003c/li\u003e\n\u003cli\u003e(追記) FileZilla\u003c/li\u003e\n\u003cli\u003e(追記)(初期インストール済み) nano ※テキストエディター\u003c/li\u003e\n\u003cli\u003e(追記)(初期インストール済み) bash ※シェル・スクリプト\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eだが Webサーバー を立てないといけない気もする。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eApache\u003c/li\u003e\n\u003cli\u003ePHP\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eがあればいいんだろうか？　将棋ソフトって　マルチユーザーに対応しているのか？キューとか要るんじゃないか？とりあえず１人用でいいか。\u003c/p\u003e\n\n\u003cp\u003eローカル環境でテストもしたいし、Windows上でLinux を動かすバーチャルなあれなんて名前だったか……。思い出せないや、ググって出てくる バーチャルボックスを調べておこう。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"テスト環境を作ろう\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%86%E3%82%B9%E3%83%88%E7%92%B0%E5%A2%83%E3%82%92%E4%BD%9C%E3%82%8D%E3%81%86\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eテスト環境を作ろう\u003c/h1\u003e\n\n\u003cp\u003eまず　ローカルに　テスト環境を構築しよう。\u003c/p\u003e\n\n\u003cp\u003eあとで記事を続ける。\u003c/p\u003e\n\n\u003cp\u003eWindows 10 で Virtual Box を導入できるだろうか。ググって読んでおこう。\u003c/p\u003e\n\n\u003cp\u003e参照 : 「WindowsでVirtualBoxを使用してLinux（Ubuntu）を動作させる手順と設定」 (俺の開発研究所) \u003ca href=\"http://itmemo.net-luck.com/virtualbox-ubuntu/\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://itmemo.net-luck.com/virtualbox-ubuntu/\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eとりあえず　浮かむ瀬　のソースはダウンロードしておこう。\u003c/p\u003e\n\n\u003cp\u003e参照 : 「第4回将棋電王トーナメント version (for Windows 64bit) (出場ソフト名「浮かむ瀬」)」 (Apery\u003c/p\u003e\n\n\u003cp\u003eopen source shogi engine) \u003ca href=\"http://hiraokatakuya.github.io/apery/\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://hiraokatakuya.github.io/apery/\u003c/a\u003e\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"biosが起動しないぜ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#bios%E3%81%8C%E8%B5%B7%E5%8B%95%E3%81%97%E3%81%AA%E3%81%84%E3%81%9C\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eBIOSが起動しないぜ\u003c/h1\u003e\n\n\u003cp\u003eAntec の CORE i3 なんだが、[F2][F10][F12][F8][Del] で BIOS が出てこなかった。\u003cbr\u003e\nUSBポートを左上の方に挿してみて [Del][F6] もやってみたが BIOS は出てこなかった。\u003c/p\u003e\n\n\u003cp\u003eもうちょっと調べてみる。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"ローカルテスト環境-構築できなかったぜ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%AD%E3%83%BC%E3%82%AB%E3%83%AB%E3%83%86%E3%82%B9%E3%83%88%E7%92%B0%E5%A2%83-%E6%A7%8B%E7%AF%89%E3%81%A7%E3%81%8D%E3%81%AA%E3%81%8B%E3%81%A3%E3%81%9F%E3%81%9C\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eローカルテスト環境 構築できなかったぜ。\u003c/h1\u003e\n\n\u003cp\u003e無ければ無いで……。\u003c/p\u003e\n\n\u003cp\u003eそういえば、自宅の開発PCのBIOS　今まで見たことないな。\u003c/p\u003e\n\n\u003cp\u003e用意された さくらVPS 物理サーバー1台 の 2週間無料 ページを見る。\u003cbr\u003e\n\u003ca href=\"http://vps.sakura.ad.jp/\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://vps.sakura.ad.jp/\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e標準OSが「Ubuntu14.04 amd64 / Ubuntu16.04 amd64」か。じゃあもう Ubuntu インストールされてるや。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"コンピューターとセキュリティ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%B3%E3%83%B3%E3%83%94%E3%83%A5%E3%83%BC%E3%82%BF%E3%83%BC%E3%81%A8%E3%82%BB%E3%82%AD%E3%83%A5%E3%83%AA%E3%83%86%E3%82%A3\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eコンピューターとセキュリティ\u003c/h2\u003e\n\n\u003cp\u003eざっくり言って、コンピューターと言うのは　無制限に使うことより　制限して使う方に　発展している。\u003cbr\u003e\nそれもこれも　人類はガイア理論のような超個体ではなく、群集生物で１個体が利己的にリソースを使うからだが……。\u003c/p\u003e\n\n\u003cp\u003eで、コンピューターのリソースを使う人は　ユーザー・アカウント　を開設する。直訳すると口座でこの日本語はお金の出入り口の場所ぐらいの意味で分かりやすいんだが、account も何か count という語が入ってるし、接頭辞 ac- って何かと調べると「～の方へ」ぐらいの意味のようだ。\u003c/p\u003e\n\n\u003cp\u003eユーザー・アカウントはもう用意されていた。\u003cbr\u003e\n掴みどころとしては\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eネットワーク上の住所 (IPアドレス)\u003c/li\u003e\n\u003cli\u003eその住所にあるコンピュータ内で使われる自分の氏名 (ユーザー名)\u003c/li\u003e\n\u003cli\u003e本人確認をするもの (パスワード)\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eの\u003cstrong\u003e３つを聞いて控えておく\u003c/strong\u003eと、コンピューターに入る（ログイン）こともできるし、ファイル（データ）を送ることもできる。\u003cbr\u003e\n家に入って　送った荷物が届くようなものだ。\u003c/p\u003e\n\n\u003cp\u003eそういえば　ログ　というのは足跡のようなもので、いつコンピューター（家）に入ったかとか、コンピューターに入って何をしたかとか、最後にファイルを開いたのは誰か、とか残されていくんだが、コンピューターに入ることを　ログイン　と呼ぶのも興味深い。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"そういえばルートユーザーというのがあったな\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%9D%E3%81%86%E3%81%84%E3%81%88%E3%81%B0%E3%83%AB%E3%83%BC%E3%83%88%E3%83%A6%E3%83%BC%E3%82%B6%E3%83%BC%E3%81%A8%E3%81%84%E3%81%86%E3%81%AE%E3%81%8C%E3%81%82%E3%81%A3%E3%81%9F%E3%81%AA\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eそういえばルート・ユーザーというのがあったな\u003c/h2\u003e\n\n\u003cp\u003eTeratarm という寺さんが作ったターミナルでログインしようかと思ったんだが、（へぇ、今はコミュニティが開発を後継しているのか）\u003cbr\u003e\n開発PCのランチャーに PuTTY のアイコンがあったので PuTTY で接続してしまった。\u003c/p\u003e\n\n\u003cp\u003e接続プロトコルのタイプは SSH だ。なんかセキュリティーが高いんだろうぐらいしか分からないが「SSHだ」と言われたら SSH を選ぶしかない。こっちが好きなものを選べます、というやつじゃない。\u003c/p\u003e\n\n\u003cp\u003ePuTTYがなんかセキュリティ警告を出しているが気にせず [はい(Y)] を選んで入る。\u003c/p\u003e\n\n\u003cp\u003eユーザー名に root と入れてパスワード叩いて Linux に入れね、とか思ってたんだが　聞いてみると ルート・ユーザーでは入れないらしい。\u003cbr\u003e\nそういえばなんか su コマンドとかあった気もする。Windows 10 だって 自分のアカウントで入ってから右クリックして「管理者権限で実行」を選んだりもする。\u003c/p\u003e\n\n\u003cp\u003eなんかもう就活で Linuxの実務経験があります というのは止めておこう。ぜんぜんダメだ。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"コマンドラインだ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89%E3%83%A9%E3%82%A4%E3%83%B3%E3%81%A0\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eコマンドラインだ\u003c/h2\u003e\n\n\u003cp\u003els ぐらいしか覚えてないんだが　ぶーたれていると\u003c/p\u003e\n\n\u003cp\u003esudo su -\u003c/p\u003e\n\n\u003cp\u003eというコマンドを教えてくれたので使ってみる。\u003cbr\u003e\nパスワードを聞かれるので入れる。\u003c/p\u003e\n\n\u003cp\u003eとりあえず root ユーザーになったんじゃないか。これで \u003cstrong\u003e権限\u003c/strong\u003e というのが大きくなったので、何か役立つだろう。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003els\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eと叩く。何にも出ねー。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003els -an\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eと叩く。\u003c/p\u003e\n\n\u003cp\u003e. で始まる名前のファイルがいっぱい出てくる。隠しファイルばっかりか。\u003cbr\u003e\nフォルダーや、隠しじゃないファイルは無いようだ。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003emkdir shogi\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eとか適当にフォルダーを切ってみる。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003els -an\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eshogi フォルダー無ぇ～。\u003c/p\u003e\n\n\u003cp\u003eここは　どこなんだ。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003ecd ../\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eうわ、どこにいたのか分からなくなった。 home フォルダーにいたのかと思ったんだがなんかおかしい。root フォルダーにいたんじゃないか？\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003ecd root\nls\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eふむ……。 shogi フォルダーがあるな。\u003cbr\u003e\nこんな root とかいう分けわかんないとこにフォルダーは要らないや。消しとこ……。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003ermdir shogi/\nls\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eよし。\u003c/p\u003e\n\n\u003cp\u003e将棋ソフトはどこに デプロイメント（すぐ使えるように用意しておくこと。引っ越しでダンボール箱を引っ越し先に届けて箱を開けるところまで全部やろうという気分に似ている）すればいいんだ？\u003c/p\u003e\n\n\u003cp\u003e「各ディレクトリの役割を知ろう（ルートディレクトリ編） (1/2)」 (@ IT)\u003cbr\u003e\n\u003ca href=\"http://www.atmarkit.co.jp/ait/articles/0108/07/news002.html\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://www.atmarkit.co.jp/ait/articles/0108/07/news002.html\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003ebin に入れるにしては　将棋ソフトはコマンドな気はしない。なんか機能が巨大な気もするし、\u003cbr\u003e\nroot フォルダーなんか外からバンバン利用されるものを置いてていいのか分からんし、\u003cbr\u003e\nlib というには　共有するソフトという気分でもない。\u003cbr\u003e\nじゃあ etc か。設定ファイルじゃないし……。\u003c/p\u003e\n\n\u003cp\u003eじゃあ無難に home へ。\u003c/p\u003e\n\n\u003cp\u003ehome ディレクトリの下に 自分のアカウント名のフォルダーがあるのでさらにその下へ。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"パーミッション\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%91%E3%83%BC%E3%83%9F%E3%83%83%E3%82%B7%E3%83%A7%E3%83%B3\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eパーミッション\u003c/h2\u003e\n\n\u003cp\u003e\u003cstrong\u003eファイルの転送に失敗した、ぶーたれていると教えてくれた。そうだ Linux にはパーミッションがあったんだ！\u003c/strong\u003e\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003els -an\ndrwxr-xr-x ～略～ 01:37 shogi\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eパーミッション（ファイルの利用許可範囲の設定）は d:ディレクトリ の rwx、r-x、r-xで、\u003cbr\u003e\nr:読取、w:書込、x:実行、-:権限なし　という権限で、３つ並んでるんだが何だったか。\u003c/p\u003e\n\n\u003cp\u003e「第2回 「パーミッションの意味と使い分け」」 (MdN Design Interactive)\u003cbr\u003e\n\u003ca href=\"http://www.mdn.co.jp/di/articles/2104/?page=2\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://www.mdn.co.jp/di/articles/2104/?page=2\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e「所有者」「グループ」「その他」の３つが並んでるらしい。グループなんて使ったことないな。\u003cbr\u003e\nうーむ、外からファイルを転送してこようと思ったら「その他」に書き込み権限 w を付けた方がいいんだろうか？\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003echmod 757 shogi/\nls -an\ndrwxr-xrwx ～略～ 01:37 shogi\n        ~\n        ここが変わった\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eはい、おっけ。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"ファイルを転送しよう\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%E8%BB%A2%E9%80%81%E3%81%97%E3%82%88%E3%81%86\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eファイルを転送しよう\u003c/h2\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eFileZilla を使って Windows 10 から Linux へ Apery を転送しよう。\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e\u003cstrong\u003eあれ？　日本語の抽象度がおかしいぜ。\u003c/strong\u003eもう一度。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eファイル転送ソフトを使って Windows から Linux へコンピュータ将棋ソフトを転送しよう。\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eよし。\u003cbr\u003e\n具体的には、\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eFileZilla を使って Windows 10 から Ubuntu へ 浮かむ瀬 を転送する。\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eよし。\u003cbr\u003e\nなんか　この日本語の抽象性と具体性の使い分けができないと、会話をしている相手が　ファミコンのスーパーマリオが谷間に転落したあとに　飛び出してきたときのような　反応をすることがある。\u003c/p\u003e\n\n\u003cp\u003eもちろん　わたしには　そんな会話力なんか無いぜ。\u003c/p\u003e\n\n\u003cp\u003eあ、そうそう。サーバーからログアウトしよう。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eexit\nlogout\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eなんか２回打たないとダメだった。\u003cbr\u003e\n（※2017-03-06 追記: サーバーからexitして、PuTTYからexitしているようだ。コマンドは exit 2連打でOK)\u003c/p\u003e\n\n\u003cp\u003eここで　用事でおでかけだ。帰ってから記事を続ける。\u003c/p\u003e\n\n\u003cp\u003e続き。\u003c/p\u003e\n\n\u003cp\u003eログイン後の画面を見ると\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eWelcome to Ubuntu 14.04.5 LTS (GNU/Linux 3.13.0-63-generic x86_64)\n\n * Documentation:  https://help.ubuntu.com/\nNew release '16.04.2 LTS' available.\nRun 'do-release-upgrade' to upgrade to it.\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eと書いてある。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003edo-release-upgrade\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eと打ち込んだらいいのだろうか。\u003cbr\u003e\nなんかパスワードを尋ねられたり、[yN] の入力を促されたりする。\u003c/p\u003e\n\n\u003cp\u003eなんか ポートを '1022' にしろ、みたいに書いてるけど無視して進める。\u003c/p\u003e\n\n\u003cp\u003e更新には several hour かかる、とか書いてある……、だったら　お出かけ前に更新しておけばよかった……。\u003c/p\u003e\n\n\u003cp\u003eと思ったら　[yN] をよく尋ねられるし　ＰＣから離れられない。\u003cbr\u003e\nそして　system will be restarted. という文字を見かけるが　システムが再起動される様子もない。\u003cbr\u003e\nどうもタイムアウトして接続が切れたらしい。\u003c/p\u003e\n\n\u003cp\u003e接続しなおすと　メッセージが変わっていた。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e * Documentation:  https://help.ubuntu.com\n * Management:     https://landscape.canonical.com\n * Support:        https://ubuntu.com/advantage\nLast login: Sat Mar  4 20:59:46 2017 from ～略～\nTo run a command as administrator (user \"root\"), use \"sudo \u0026lt;command\u0026gt;\".\nSee \"man sudo_root\" for details.\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eじゃあ　更新は終わったのだろうか。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003esudo su -\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eでパスワード入力して rootユーザーに切り替える。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003ecd ../\nls\ncd home\nls\ncd アカウント名\nls\ncd shogi\nls\napery-SDT4.tar.gz  apery-SDT4.zip\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eふむ。どっちかがソースで、どっちかがバイナリだ。\u003c/p\u003e\n\n\u003cp\u003eどっちもソースじゃないか？　よくわからん。\u003c/p\u003e\n\n\u003cp\u003etar.gz の方を解凍できないだろうか。\u003c/p\u003e\n\n\u003cp\u003eunzip コマンドはインストールされてないか、パスが通ってないみたいなので、\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eapt install unzip\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eコマンドを試してみる。今度は unzip コマンドを叩けるようだ。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eEnd-of-central-directory ～略～\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eと何かエラーらしきメッセージが返ってきている。じゃあ .zip の方を unzip してみる。\u003cbr\u003e\n何か動いているようだ。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003els\napery-SDT4 ～以下略～\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eapery-SDT4 ディレクトリーが作られたのか。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003ecd apery-SDT4\nls\nbin  Copying.txt  Readme.txt  src  utils\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e多分、ソースが展開されたのではないか。このソースをコンパイルできないか。\u003c/p\u003e\n\n\u003cp\u003eg++4.8以上というのが何なのか調べてみよう。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"g\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#g\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eg++\u003c/h1\u003e\n\n\u003cp\u003e「g++」(C++)\u003cbr\u003e\n\u003ca href=\"http://kaworu.jpn.org/cpp/g++\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://kaworu.jpn.org/cpp/g++\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eややこしい名前だ……。\u003c/p\u003e\n\n\u003cp\u003eまず ubuntu に g++ が入っているか検索する。\u003cbr\u003e\n上記Ｗｅｂサイトから\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eapt-cache search g++\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eをマウスのドラッグでコピーして、PuTTY へ右クリックで貼り付け。\u003cbr\u003e\nなんか文字がいっぱい出力されて流れていった。なんなのかわからない。\u003c/p\u003e\n\n\u003cp\u003e「g++をUbuntuへインストールする」 (C++)\u003cbr\u003e\n\u003ca href=\"http://kaworu.jpn.org/cpp/g++%E3%82%92Ubuntu%E3%81%B8%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%99%E3%82%8B\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://kaworu.jpn.org/cpp/g++%E3%82%92Ubuntu%E3%81%B8%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%99%E3%82%8B\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e一番新しいバージョンに飛びつくぜ。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003esudo apt install g++-4.9\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eインストールは終わったのだろうか。コマンドを打ってみる。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eg++ --version\n\ng++ (Ubuntu 5.4.0-6ubuntu1~16.04.4) 5.4.0 20160609\nCopyright (C) 2015 Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions.  There is NO\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eもう g++ はインストールできたんじゃないか。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"apery-のソースコードをコンパイルしよう\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#apery-%E3%81%AE%E3%82%BD%E3%83%BC%E3%82%B9%E3%82%B3%E3%83%BC%E3%83%89%E3%82%92%E3%82%B3%E3%83%B3%E3%83%91%E3%82%A4%E3%83%AB%E3%81%97%E3%82%88%E3%81%86\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eapery のソースコードをコンパイルしよう\u003c/h1\u003e\n\n\u003cp\u003eC言語はコンパイルの手続きを Makefile に書くと思うんだが g++ はどうか。\u003c/p\u003e\n\n\u003cp\u003e「Makefileの書き方」 (Web就活日記)\u003cbr\u003e\n\u003ca href=\"http://yut.hatenablog.com/entry/20120702/1341185909\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://yut.hatenablog.com/entry/20120702/1341185909\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e浮かむ瀬 の Makefile は apery-SDT4/src/Makefile にあるようだ。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003ecd apery-SDT4/src/\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eMakefile のあるディレクトリまで　カレントを移動。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003egmake\n\nNo command 'gmake' found, did you mean:\n～略～\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e違うのか……。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eman -k g++\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eコマンドが多すぎて分からん。\u003c/p\u003e\n\n\u003cp\u003e「自動化のためのGNU Make入門講座 - Makefileの基本：ルール\u003cbr\u003e\nDocument 」 (オブラブ)\u003cbr\u003e\n\u003ca href=\"http://objectclub.jp/community/memorial/homepage3.nifty.com/masarl/article/gnu-make/rule.html\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://objectclub.jp/community/memorial/homepage3.nifty.com/masarl/article/gnu-make/rule.html\u003c/a\u003e\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003emake\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eなんか動き出した。\u003cbr\u003e\n出力の一部分を見てみると、\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eg++ -o apery ../obj/main.o ../obj/bitboard.o ../obj/init.o ../obj/mt64bit.o ../o\nbj/position.o ../obj/evalList.o ../obj/move.o ../obj/movePicker.o ../obj/square.\no ../obj/usi.o ../obj/generateMoves.o ../obj/evaluate.o ../obj/search.o ../obj/h\nand.o ../obj/tt.o ../obj/timeManager.o ../obj/book.o ../obj/benchmark.o ../obj/t\nhread.o ../obj/common.o ../obj/pieceScore.o -lpthread  -std=c++11 -fno-exception\ns -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eと書いているので、ディレクトリを１つ上がったところの obj ディレクトリに　中間ファイル（.o）はできているのだろう。ところで Linux って .exe ファイルの代わりに何ができるのか？ コマンド？\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"黄緑色の-apery\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E9%BB%84%E7%B7%91%E8%89%B2%E3%81%AE-apery\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e黄緑色の apery\u003c/h1\u003e\n\n\u003cp\u003e\u003cstrong\u003eうん？\u003c/strong\u003e\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003els\napery           evaluate.cpp       move.hpp                   search.hpp\nbenchmark.cpp   evaluate.hpp       movePicker.cpp             square.cpp\nbenchmark.hpp   generateMoves.cpp  movePicker.hpp             square.hpp\nbenchmark.sfen  generateMoves.hpp  mt64bit.cpp                thread.cpp\nbitboard.cpp    hand.cpp           mt64bit.hpp                thread.hpp\nbitboard.hpp    hand.hpp           overloadEnumOperators.hpp  timeManager.cpp\nbook.cpp        ifdef.hpp          piece.hpp                  timeManager.hpp\nbook.hpp        init.cpp           pieceScore.cpp             tt.cpp\ncolor.hpp       init.hpp           pieceScore.hpp             tt.hpp\ncommon.cpp      learner.hpp        position.cpp               usi.cpp\ncommon.hpp      main.cpp           position.hpp               usi.hpp\nevalList.cpp    Makefile           score.hpp\nevalList.hpp    move.cpp           search.cpp\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eリストの先頭にある apery、あれ、フォルダーじゃなくて 実行ファイルなんじゃないか？\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003els -an\n-rwxr-xr-x 1 0 0 444728 Mar  4 22:16 apery\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eパーミッションに x が付いている。実行できるんじゃないか？\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eapery\napery: command not found\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e何がダメなのか……。\u003c/p\u003e\n\n\u003cp\u003e「lsっぽいコマンドを作る」 (碧色工房)\u003cbr\u003e\n\u003ca href=\"http://www.mm2d.net/main/prog/linux/ls-08.html\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://www.mm2d.net/main/prog/linux/ls-08.html\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e実行可能なファイルなんじゃないのか……。\u003c/p\u003e\n\n\u003cp\u003e「ubuntu初心者です。 端末でプログラムの実行を」 (YAHOO!JAPAN知恵袋)\u003cbr\u003e\n\u003ca href=\"http://detail.chiebukuro.yahoo.co.jp/qa/question_detail/q1356985753\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://detail.chiebukuro.yahoo.co.jp/qa/question_detail/q1356985753\u003c/a\u003e\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e./apery\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eおっ、なんか処理が返ってこずにブロックされたぜ。バックグラウンドで動かせばいいんじゃないか？\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"プログラムを強制終了させよう\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%A0%E3%82%92%E5%BC%B7%E5%88%B6%E7%B5%82%E4%BA%86%E3%81%95%E3%81%9B%E3%82%88%E3%81%86\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eプログラムを強制終了させよう\u003c/h1\u003e\n\n\u003cp\u003e[Ctrl] + [C] でも押しとけば止まるんじゃないか。止まった。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"プログラムをバックグラウンドで実行させよう\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%A0%E3%82%92%E3%83%90%E3%83%83%E3%82%AF%E3%82%B0%E3%83%A9%E3%82%A6%E3%83%B3%E3%83%89%E3%81%A7%E5%AE%9F%E8%A1%8C%E3%81%95%E3%81%9B%E3%82%88%E3%81%86\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eプログラムをバックグラウンドで実行させよう\u003c/h1\u003e\n\n\u003cp\u003eじゃあ、バックグラウンドで実行するには。\u003c/p\u003e\n\n\u003cp\u003e「【Linux】ジョブのバックグラウンド実行」 (Qiita)\u003cbr\u003e\n\u003ca href=\"http://qiita.com/fujitetsu/items/665413e0dc8b0cc3b6ed\" class=\"autolink\" id=\"reference-c537da6274e12cfaa192\"\u003ehttp://qiita.com/fujitetsu/items/665413e0dc8b0cc3b6ed\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eQiitaからQiitaへの記事ぐらい　なんか　WordPress みたいに　かっこいいリンクに差し替えてくれたらいいのにｗｗｗｗｗ\u003cbr\u003e\nコマンドの末尾に \u0026amp; を付けるといいらしい。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e./apery \u0026amp;\n[1] 1692\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eほう。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"aperyに標準入力で入力しよう\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#apery%E3%81%AB%E6%A8%99%E6%BA%96%E5%85%A5%E5%8A%9B%E3%81%A7%E5%85%A5%E5%8A%9B%E3%81%97%E3%82%88%E3%81%86\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eAperyに標準入力で入力しよう\u003c/h1\u003e\n\n\u003cp\u003eじゃあ、apery に話しかけれるのだろうか？ 牛とか。\u003c/p\u003e\n\n\u003cp\u003e「図解：標準入力、標準出力、標準エラー出力、パイプとは ?」 (Linux)\u003cbr\u003e\n\u003ca href=\"http://www.creatology.jp/unix/outin.html\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://www.creatology.jp/unix/outin.html\u003c/a\u003e\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eecho 'usi' \u0026gt; ./apery\n-su: ./apery: Text file busy\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e違うのか。\u003c/p\u003e\n\n\u003cp\u003e「（２−５）複数のコマンド間で標準入出力を共有し，連携するためには，パイプを用いる。」 (Linux上でシェルが実行される仕組みを，体系的に理解しよう　（bash 中級者への道）)\u003cbr\u003e\n\u003ca href=\"http://language-and-engineering.hatenablog.jp/entry/20110617/p1\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://language-and-engineering.hatenablog.jp/entry/20110617/p1\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eじゃあ　パイプ（縦棒）でつないでみよう。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eecho 'usi' | ./apery\nid name Apery Debug Build\nid author Hiraoka Takuya\n\noption name Best_Book_Move type check default false\noption name Book_File type string default book/20150503/book.bin\noption name Byoyomi_Margin type spin default 500 min 0 max 2147483647\noption name Clear_Hash type button\noption name Draw_Ply type spin default 256 min 1 max 2147483647\noption name Engine_Name type string default Apery Debug Build\noption name Max_Book_Ply type spin default 32767 min 0 max 32767\noption name Max_Random_Score_Diff type spin default 0 min 0 max 32600\noption name Max_Random_Score_Diff_Ply type spin default 32767 min 0 max 32767\noption name Min_Book_Ply type spin default 32767 min 0 max 32767\noption name Min_Book_Score type spin default -180 min -32601 max 32601\noption name Minimum_Thinking_Time type spin default 20 min 0 max 2147483647\noption name Move_Overhead type spin default 30 min 0 max 5000\noption name MultiPV type spin default 1 min 1 max 594\noption name OwnBook type check default true\noption name Slow_Mover type spin default 89 min 1 max 1000\noption name Slow_Mover_10 type spin default 10 min 1 max 1000\noption name Slow_Mover_16 type spin default 20 min 1 max 1000\noption name Slow_Mover_20 type spin default 40 min 1 max 1000\noption name Threads type spin default 2 min 1 max 256\noption name Time_Margin type spin default 4500 min 0 max 2147483647\noption name USI_Hash type spin default 256 min 1 max 1048576\noption name USI_Ponder type check default true\nusiok\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e\u003cstrong\u003eおっ！\u003c/strong\u003e Apery と会話でけたな！\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"デバッグビルドとリリースビルド\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%87%E3%83%90%E3%83%83%E3%82%B0%E3%83%93%E3%83%AB%E3%83%89%E3%81%A8%E3%83%AA%E3%83%AA%E3%83%BC%E3%82%B9%E3%83%93%E3%83%AB%E3%83%89\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eデバッグ・ビルド　と　リリース・ビルド\u003c/h1\u003e\n\n\u003cp\u003eだが　ちょっと待ってほしい。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eid name Apery Debug Build\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eとても気になるぜ。これって、デバッグ・モードでコンパイルしたエイプリーなんじゃないか？\u003cbr\u003e\nデバッグ・モードでない方法でコンパイルしてくれる方法を調べよう……。\u003c/p\u003e\n\n\u003cp\u003eapery-SDT4 の usi.cpp を見ると、\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e#ifdef NDEBUG\n    (*this)[\"Engine_Name\"]                 = USIOption(\"ukamuse_SDT4\");\n#else\n    (*this)[\"Engine_Name\"]                 = USIOption(\"Apery Debug Build\");\n#endif\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eと書いている。 NDEBUG というプリプロセッサ・マクロ を make に指定できれば ukamuse_SDT4 君になってくれると思うんだが……。\u003cbr\u003e\nMakefile ファイルには\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e-DNDEBUG\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eという記述を　よく見かける。 -D と NDEBUG なのだろう。どうやって利用するのか？\u003c/p\u003e\n\n\u003cp\u003e「Makefileの書き方」 (Web就活日記)\u003cbr\u003e\n\u003ca href=\"http://yut.hatenablog.com/entry/20120702/1341185909\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://yut.hatenablog.com/entry/20120702/1341185909\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eじゃあ、こうか。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003emake bmi2\nmake CFLAGS='-std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopen\nmp -DNDEBUG -DHAVE_SSE4 -DHAVE_SSE42 -DHAVE_BMI2 -msse4.2 -mbmi2 -DHAVE_AVX2 -ma\nvx2' LDFLAGS='-lpthread  -flto' apery\nmake[1]: Entering directory '/home/csg10/shogi/apery-SDT4/src'\nmake[1]: 'apery' is up to date.\nmake[1]: Leaving directory '/home/csg10/shogi/apery-SDT4/src'\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eうーむ。何が起こったのか。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"バックグラウンドのプロセスを止めよう\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%90%E3%83%83%E3%82%AF%E3%82%B0%E3%83%A9%E3%82%A6%E3%83%B3%E3%83%89%E3%81%AE%E3%83%97%E3%83%AD%E3%82%BB%E3%82%B9%E3%82%92%E6%AD%A2%E3%82%81%E3%82%88%E3%81%86\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eバックグラウンドのプロセスを止めよう\u003c/h1\u003e\n\n\u003cp\u003eそういえば　Apery Debug Build 君をバックグラウンドで起動しっぱなしだったな。\u003c/p\u003e\n\n\u003cp\u003e「【 stop 】 バックグラウンドのジョブを停止する」 (ITPro)\u003cbr\u003e\n\u003ca href=\"http://itpro.nikkeibp.co.jp/article/COLUMN/20060227/230891/\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://itpro.nikkeibp.co.jp/article/COLUMN/20060227/230891/\u003c/a\u003e\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e%1692\n-su: fg: %1692: no such job\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eあらー。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003ejobs\n[1]+  Stopped                 ./apery\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eいつのまに止まっていたのか。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"ファイルを削除してもう一回-make-すると\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%E5%89%8A%E9%99%A4%E3%81%97%E3%81%A6%E3%82%82%E3%81%86%E4%B8%80%E5%9B%9E-make-%E3%81%99%E3%82%8B%E3%81%A8\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eファイルを削除してもう一回 make すると？\u003c/h1\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003erm apery\nls\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eよし。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003emake bmi2\nmake CFLAGS='-std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopen\nmp -DNDEBUG -DHAVE_SSE4 -DHAVE_SSE42 -DHAVE_BMI2 -msse4.2 -mbmi2 -DHAVE_AVX2 -ma\nvx2' LDFLAGS='-lpthread  -flto' apery\nmake[1]: Entering directory '/home/csg10/shogi/apery-SDT4/src'\ng++ -o apery ../obj/main.o ../obj/bitboard.o ../obj/init.o ../obj/mt64bit.o ../o\nbj/position.o ../obj/evalList.o ../obj/move.o ../obj/movePicker.o ../obj/square.\no ../obj/usi.o ../obj/generateMoves.o ../obj/evaluate.o ../obj/search.o ../obj/h\nand.o ../obj/tt.o ../obj/timeManager.o ../obj/book.o ../obj/benchmark.o ../obj/t\nhread.o ../obj/common.o ../obj/pieceScore.o -lpthread  -flto -std=c++11 -fno-exc\neptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -DNDEBUG -DHAVE_SSE4 -DHAVE_S\nSE42 -DHAVE_BMI2 -msse4.2 -mbmi2 -DHAVE_AVX2 -mavx2\nmake[1]: Leaving directory '/home/csg10/shogi/apery-SDT4/src'\n\nls\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eよし。作り直した。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eecho 'usi' | ./apery\nid name Apery Debug Build\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eダメじゃないかｗｗｗｗ\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003emake publish\n～中略～\necho 'usi' | ./apery\nid name ukamuse_SDT4\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eこれなら　いけるのか。しかしベンチマークが走り出して時間がかかりすぎる。あるいは　最適化のために、わざと走らせているのか。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"クリーンしよう\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%81%97%E3%82%88%E3%81%86\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eクリーンしよう\u003c/h1\u003e\n\n\u003cp\u003e2回目の make publish をしようとしたら\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eIllegal instruction\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eとか言われて止まってしまう。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003emake clean\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eとでもすればいいのか？\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003ecd ..\nls obj\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eobjディレクトリの中を空っぽにしてくれたみたいだ。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003emake publish\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eよし、またコンパイルが走り出した。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"イリーガルインストラクション\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%A4%E3%83%AA%E3%83%BC%E3%82%AC%E3%83%AB%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%A9%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eイリーガル　インストラクション\u003c/h1\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e./apery\nIllegal instruction\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eうまくいかないものだ。\u003c/p\u003e\n\n\u003cp\u003eapery を bin フォルダーに移動するとどうだろうか？\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003emv apery ../bin/apery\nls\nls ../bin\napery\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eよし。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e../bin/apery\nIllegal instruction\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eどこか壊してしまったのか、評価ファイルが無いかなのだろうか？\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"makefile-と-make-publish\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#makefile-%E3%81%A8-make-publish\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eMakefile と make publish\u003c/h1\u003e\n\n\u003cp\u003e\u003cstrong\u003eうん？\u003c/strong\u003e Makefile に何か書いてるぞ。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e#CFLAGS   += -march=native # make publish の時はここをコメントアウトする必要がある。\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eコメントアウトしてるよなあ。頭に # が付いてるし。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003emake publish\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003emake profgen\nmake[1]: Entering directory '/home/csg10/shogi/apery-SDT4/src'\nmake CFLAGS='-std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov' LDFLAGS='-lpthread  -fprofile-generate -lgcov' bmi2\nmake[2]: Entering directory '/home/csg10/shogi/apery-SDT4/src'\nmake CFLAGS='-std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE4 -DHAVE_SSE42 -DHAVE_BMI2 -msse4.2 -mbmi2 -DHAVE_AVX2 -mavx2' LDFLAGS='-lpthread  -fprofile-generate -lgcov -flto' apery\nmake[3]: Entering directory '/home/csg10/shogi/apery-SDT4/src'\ng++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE4 -DHAVE_SSE42 -DHAVE_BMI2 -msse4.2 -mbmi2 -DHAVE_AVX2 -mavx2  -o ../obj/main.o -c main.cpp\ng++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE4 -DHAVE_SSE42 -DHAVE_BMI2 -msse4.2 -mbmi2 -DHAVE_AVX2 -mavx2  -o ../obj/bitboard.o -c bitboard.cpp\ng++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE4 -DHAVE_SSE42 -DHAVE_BMI2 -msse4.2 -mbmi2 -DHAVE_AVX2 -mavx2  -o ../obj/init.o -c init.cpp\ng++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE4 -DHAVE_SSE42 -DHAVE_BMI2 -msse4.2 -mbmi2 -DHAVE_AVX2 -mavx2  -o ../obj/mt64bit.o -c mt64bit.cpp\ng++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE4 -DHAVE_SSE42 -DHAVE_BMI2 -msse4.2 -mbmi2 -DHAVE_AVX2 -mavx2  -o ../obj/position.o -c position.cpp\ng++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE4 -DHAVE_SSE42 -DHAVE_BMI2 -msse4.2 -mbmi2 -DHAVE_AVX2 -mavx2  -o ../obj/evalList.o -c evalList.cpp\ng++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE4 -DHAVE_SSE42 -DHAVE_BMI2 -msse4.2 -mbmi2 -DHAVE_AVX2 -mavx2  -o ../obj/move.o -c move.cpp\ng++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE4 -DHAVE_SSE42 -DHAVE_BMI2 -msse4.2 -mbmi2 -DHAVE_AVX2 -mavx2  -o ../obj/movePicker.o -c movePicker.cpp\ng++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE4 -DHAVE_SSE42 -DHAVE_BMI2 -msse4.2 -mbmi2 -DHAVE_AVX2 -mavx2  -o ../obj/square.o -c square.cpp\ng++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE4 -DHAVE_SSE42 -DHAVE_BMI2 -msse4.2 -mbmi2 -DHAVE_AVX2 -mavx2  -o ../obj/usi.o -c usi.cpp\ng++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE4 -DHAVE_SSE42 -DHAVE_BMI2 -msse4.2 -mbmi2 -DHAVE_AVX2 -mavx2  -o ../obj/generateMoves.o -c generateMoves.cpp\ng++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE4 -DHAVE_SSE42 -DHAVE_BMI2 -msse4.2 -mbmi2 -DHAVE_AVX2 -mavx2  -o ../obj/evaluate.o -c evaluate.cpp\ng++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE4 -DHAVE_SSE42 -DHAVE_BMI2 -msse4.2 -mbmi2 -DHAVE_AVX2 -mavx2  -o ../obj/search.o -c search.cpp\ng++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE4 -DHAVE_SSE42 -DHAVE_BMI2 -msse4.2 -mbmi2 -DHAVE_AVX2 -mavx2  -o ../obj/hand.o -c hand.cpp\ng++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE4 -DHAVE_SSE42 -DHAVE_BMI2 -msse4.2 -mbmi2 -DHAVE_AVX2 -mavx2  -o ../obj/tt.o -c tt.cpp\ng++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE4 -DHAVE_SSE42 -DHAVE_BMI2 -msse4.2 -mbmi2 -DHAVE_AVX2 -mavx2  -o ../obj/timeManager.o -c timeManager.cpp\ng++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE4 -DHAVE_SSE42 -DHAVE_BMI2 -msse4.2 -mbmi2 -DHAVE_AVX2 -mavx2  -o ../obj/book.o -c book.cpp\ng++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE4 -DHAVE_SSE42 -DHAVE_BMI2 -msse4.2 -mbmi2 -DHAVE_AVX2 -mavx2  -o ../obj/benchmark.o -c benchmark.cpp\ng++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE4 -DHAVE_SSE42 -DHAVE_BMI2 -msse4.2 -mbmi2 -DHAVE_AVX2 -mavx2  -o ../obj/thread.o -c thread.cpp\ng++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE4 -DHAVE_SSE42 -DHAVE_BMI2 -msse4.2 -mbmi2 -DHAVE_AVX2 -mavx2  -o ../obj/common.o -c common.cpp\ng++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE4 -DHAVE_SSE42 -DHAVE_BMI2 -msse4.2 -mbmi2 -DHAVE_AVX2 -mavx2  -o ../obj/pieceScore.o -c pieceScore.cpp\ng++ -o apery ../obj/main.o ../obj/bitboard.o ../obj/init.o ../obj/mt64bit.o ../obj/position.o ../obj/evalList.o ../obj/move.o ../obj/movePicker.o ../obj/square.o ../obj/usi.o ../obj/generateMoves.o ../obj/evaluate.o ../obj/search.o ../obj/hand.o ../obj/tt.o ../obj/timeManager.o ../obj/book.o ../obj/benchmark.o ../obj/thread.o ../obj/common.o ../obj/pieceScore.o -lpthread  -fprofile-generate -lgcov -flto -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE4 -DHAVE_SSE42 -DHAVE_BMI2 -msse4.2 -mbmi2 -DHAVE_AVX2 -mavx2\nmake[3]: Leaving directory '/home/csg10/shogi/apery-SDT4/src'\nmake[2]: Leaving directory '/home/csg10/shogi/apery-SDT4/src'\nmake[1]: Leaving directory '/home/csg10/shogi/apery-SDT4/src'\nMakefile:86: recipe for target 'publish' failed\nmake: *** [publish] Illegal instruction\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eじゃあ、\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003emake clean\nmake profgen_sse\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eこんどはコンパイルできたか？\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003els\n～略～\necho 'usi' | ./apery\nid name ukamuse_SDT4\nid author Hiraoka Takuya\n\noption name Best_Book_Move type check default false\noption name Book_File type string default book/20150503/book.bin\noption name Byoyomi_Margin type spin default 500 min 0 max 2147483647\noption name Clear_Hash type button\noption name Draw_Ply type spin default 256 min 1 max 2147483647\noption name Engine_Name type string default ukamuse_SDT4\noption name Max_Book_Ply type spin default 32767 min 0 max 32767\noption name Max_Random_Score_Diff type spin default 0 min 0 max 32600\noption name Max_Random_Score_Diff_Ply type spin default 32767 min 0 max 32767\noption name Min_Book_Ply type spin default 32767 min 0 max 32767\noption name Min_Book_Score type spin default -180 min -32601 max 32601\noption name Minimum_Thinking_Time type spin default 20 min 0 max 2147483647\noption name Move_Overhead type spin default 30 min 0 max 5000\noption name MultiPV type spin default 1 min 1 max 594\noption name OwnBook type check default true\noption name Slow_Mover type spin default 89 min 1 max 1000\noption name Slow_Mover_10 type spin default 10 min 1 max 1000\noption name Slow_Mover_16 type spin default 20 min 1 max 1000\noption name Slow_Mover_20 type spin default 40 min 1 max 1000\noption name Threads type spin default 2 min 1 max 256\noption name Time_Margin type spin default 4500 min 0 max 2147483647\noption name USI_Hash type spin default 256 min 1 max 1048576\noption name USI_Ponder type check default true\nusiok\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eよし！\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"ベンチマークを取ってみよう\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%99%E3%83%B3%E3%83%81%E3%83%9E%E3%83%BC%E3%82%AF%E3%82%92%E5%8F%96%E3%81%A3%E3%81%A6%E3%81%BF%E3%82%88%E3%81%86\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eベンチマークを取ってみよう\u003c/h1\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e./apery \u0026amp;\n[3] 2508\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eどうも　このとき、私はコピペをしようとして [Ctrl] + [C] を押していて、プロセスを落としている気がする。\u003cbr\u003e\nやりなおし。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e./apery \u0026amp;\n[4] 2511\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003ePuTTYでは、マウスドラッグでなぞるだけで　コピーはできるのだ。\u003cbr\u003e\n左ボタンクリックで貼り付け。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eecho 'bench' | ./apery\n\n[4]+  Stopped                 ./apery\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eうーむ、こういう使い方じゃないのか？\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e./apery bench\nKilled\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eこれも違う。\u003c/p\u003e\n\n\u003cp\u003eソースコードを読んでいるんだが、そういや、きふわらぷりーを作っているとき、.exe と一緒のフォルダーに benchmark.sfen ファイルが無かったら落ちてたなあ。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003els\napery           evaluate.cpp       move.hpp                   search.hpp\nbenchmark.cpp   evaluate.hpp       movePicker.cpp             square.cpp\nbenchmark.hpp   generateMoves.cpp  movePicker.hpp             square.hpp\nbenchmark.sfen  generateMoves.hpp  mt64bit.cpp                thread.cpp\nbitboard.cpp    hand.cpp           mt64bit.hpp                thread.hpp\nbitboard.hpp    hand.hpp           overloadEnumOperators.hpp  timeManager.cpp\nbook.cpp        ifdef.hpp          piece.hpp                  timeManager.hpp\nbook.hpp        init.cpp           pieceScore.cpp             tt.cpp\ncolor.hpp       init.hpp           pieceScore.hpp             tt.hpp\ncommon.cpp      learner.hpp        position.cpp               usi.cpp\ncommon.hpp      main.cpp           position.hpp               usi.hpp\nevalList.cpp    Makefile           score.hpp\nevalList.hpp    move.cpp           search.cpp\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eある。じゃあ、apery と benchmark.sfen を bin フォルダーに持っていけばいいのだろうか？\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003emv apery ../bin/apery\nmv benchmark.sfen ../bin/benchmark.sfen\nls ../bin\napery  benchmark.sfen\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eこれでどうか？\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e../bin/apery bench\nKilled\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eだめなのか。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e../bin/apery bench \u0026amp;\n[5] 2571\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e[1]   Stopped                 ./apery\n[2]   Stopped                 ./apery\n[3]-  Stopped                 ./apery\n[4]+  Stopped                 ./apery\n[5]   Killed                  ../bin/apery bench\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eKilled と Stopped の違いはなんだろうか。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"きふわらぷりーで-bench\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%8D%E3%81%B5%E3%82%8F%E3%82%89%E3%81%B7%E3%82%8A%E3%83%BC%E3%81%A7-bench\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eきふわらぷりーで bench\u003c/h1\u003e\n\n\u003cp\u003e大樹の枝を改悪した　きふわらぷりー　だと、まず Kifuwarapery.exe をダブルクリックしてコマンドプロンプトを出し、\u003cbr\u003e\nしばらく待って入力できる状態になってから bench と入力して[Enter]キーを押すとベンチマークが走り出す。\u003c/p\u003e\n\n\u003cp\u003e浮かむ瀬も同じかと思うんだが……。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e./apery\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eのあと、すぐ Killed になっているんじゃないだろうか？\u003c/p\u003e\n\n\u003cp\u003eaperyのmain.cppにあるmain関数は\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e// 将棋を指すソフト\nint main(int argc, char* argv[]) {\n    initTable();\n    Position::initZobrist();\n    HuffmanCodedPos::init();\n    auto s = std::unique_ptr\u0026lt;Searcher\u0026gt;(new Searcher);\n    s-\u0026gt;init();\n    s-\u0026gt;doUSICommandLoop(argc, argv);\n    s-\u0026gt;threads.exit();\n}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eなので、 コマンド・ループで止まっていてくれると思うんだが……、調べてみるか。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C++\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"kt\"\u003evoid\u003c/span\u003e \u003cspan class=\"n\"\u003eSearcher\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003edoUSICommandLoop\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003eargc\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003echar\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003eargv\u003c/span\u003e\u003cspan class=\"p\"\u003e[])\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"n\"\u003eevalTableIsRead\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nb\"\u003efalse\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"n\"\u003ePosition\u003c/span\u003e \u003cspan class=\"n\"\u003epos\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eDefaultStartPositionSFEN\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ethreads\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003emain\u003c/span\u003e\u003cspan class=\"p\"\u003e(),\u003c/span\u003e \u003cspan class=\"n\"\u003ethisptr\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n    \u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003ecmd\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003etoken\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"n\"\u003eargc\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"o\"\u003e++\u003c/span\u003e\u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"n\"\u003ecmd\u003c/span\u003e \u003cspan class=\"o\"\u003e+=\u003c/span\u003e \u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eargv\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e])\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"s\"\u003e\" \"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003edo\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eargc\u003c/span\u003e \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e \u003cspan class=\"o\"\u003e!\u003c/span\u003e\u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003egetline\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003ecin\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ecmd\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n            \u003cspan class=\"n\"\u003ecmd\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"quit\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n        \u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eistringstream\u003c/span\u003e \u003cspan class=\"n\"\u003essCmd\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ecmd\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n        \u003cspan class=\"n\"\u003essCmd\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026gt;\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eskipws\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026gt;\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003etoken\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003etoken\u003c/span\u003e \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"s\"\u003e\"quit\"\u003c/span\u003e \u003cspan class=\"o\"\u003e||\u003c/span\u003e \u003cspan class=\"n\"\u003etoken\u003c/span\u003e \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"s\"\u003e\"stop\"\u003c/span\u003e \u003cspan class=\"o\"\u003e||\u003c/span\u003e \u003cspan class=\"n\"\u003etoken\u003c/span\u003e \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"s\"\u003e\"ponderhit\"\u003c/span\u003e \u003cspan class=\"o\"\u003e||\u003c/span\u003e \u003cspan class=\"n\"\u003etoken\u003c/span\u003e \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"s\"\u003e\"gameover\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003etoken\u003c/span\u003e \u003cspan class=\"o\"\u003e!=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"ponderhit\"\u003c/span\u003e \u003cspan class=\"o\"\u003e||\u003c/span\u003e \u003cspan class=\"n\"\u003esignals\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003estopOnPonderHit\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"n\"\u003esignals\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003estop\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nb\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n                \u003cspan class=\"n\"\u003ethreads\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003emain\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003estartSearching\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nb\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eelse\u003c/span\u003e\n                \u003cspan class=\"n\"\u003elimits\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eponder\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nb\"\u003efalse\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003etoken\u003c/span\u003e \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"s\"\u003e\"ponderhit\"\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e \u003cspan class=\"n\"\u003elimits\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003emoveTime\u003c/span\u003e \u003cspan class=\"o\"\u003e!=\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n                \u003cspan class=\"n\"\u003elimits\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003emoveTime\u003c/span\u003e \u003cspan class=\"o\"\u003e+=\u003c/span\u003e \u003cspan class=\"n\"\u003etimeManager\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eelapsed\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eelse\u003c/span\u003e \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003etoken\u003c/span\u003e \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"s\"\u003e\"go\"\u003c/span\u003e       \u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"n\"\u003ego\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003epos\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003essCmd\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eelse\u003c/span\u003e \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003etoken\u003c/span\u003e \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"s\"\u003e\"position\"\u003c/span\u003e \u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"n\"\u003esetPosition\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003epos\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003essCmd\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eelse\u003c/span\u003e \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003etoken\u003c/span\u003e \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"s\"\u003e\"usinewgame\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e \u003cspan class=\"c1\"\u003e// isready で準備は出来たので、対局開始時に特にする事はない。\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eelse\u003c/span\u003e \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003etoken\u003c/span\u003e \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"s\"\u003e\"usi\"\u003c/span\u003e      \u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"n\"\u003eSYNCCOUT\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e \u003cspan class=\"s\"\u003e\"id name \"\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e \u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eoptions\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Engine_Name\"\u003c/span\u003e\u003cspan class=\"p\"\u003e])\u003c/span\u003e\n                                                \u003cspan class=\"o\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e \u003cspan class=\"s\"\u003e\"\u003c/span\u003e\u003cspan class=\"se\"\u003e\\n\u003c/span\u003e\u003cspan class=\"s\"\u003eid author Hiraoka Takuya\"\u003c/span\u003e\n                                                \u003cspan class=\"o\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e \u003cspan class=\"s\"\u003e\"\u003c/span\u003e\u003cspan class=\"se\"\u003e\\n\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e \u003cspan class=\"n\"\u003eoptions\u003c/span\u003e\n                                                \u003cspan class=\"o\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e \u003cspan class=\"s\"\u003e\"\u003c/span\u003e\u003cspan class=\"se\"\u003e\\n\u003c/span\u003e\u003cspan class=\"s\"\u003eusiok\"\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e \u003cspan class=\"n\"\u003eSYNCENDL\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eelse\u003c/span\u003e \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003etoken\u003c/span\u003e \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"s\"\u003e\"isready\"\u003c/span\u003e  \u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"c1\"\u003e// 対局開始前の準備。\u003c/span\u003e\n            \u003cspan class=\"n\"\u003ett\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eclear\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n            \u003cspan class=\"n\"\u003ethreads\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003emain\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003epreviousScore\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eScoreInfinite\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"o\"\u003e!\u003c/span\u003e\u003cspan class=\"n\"\u003eevalTableIsRead\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"c1\"\u003e// 一時オブジェクトを生成して Evaluator::init() を呼んだ直後にオブジェクトを破棄する。\u003c/span\u003e\n                \u003cspan class=\"c1\"\u003e// 評価関数の次元下げをしたデータを格納する分のメモリが無駄な為、\u003c/span\u003e\n                \u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eunique_ptr\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eEvaluator\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eEvaluator\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003einit\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eEvaluator\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eevalDir\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nb\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n                \u003cspan class=\"n\"\u003eevalTableIsRead\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nb\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eSYNCCOUT\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e \u003cspan class=\"s\"\u003e\"readyok\"\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e \u003cspan class=\"n\"\u003eSYNCENDL\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eelse\u003c/span\u003e \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003etoken\u003c/span\u003e \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"s\"\u003e\"setoption\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"n\"\u003esetOption\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003essCmd\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eelse\u003c/span\u003e \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003etoken\u003c/span\u003e \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"s\"\u003e\"write_eval\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"c1\"\u003e// 対局で使う為の評価関数バイナリをファイルに書き出す。\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"o\"\u003e!\u003c/span\u003e\u003cspan class=\"n\"\u003eevalTableIsRead\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n                \u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eunique_ptr\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eEvaluator\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eEvaluator\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003einit\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eEvaluator\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eevalDir\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nb\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eEvaluator\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003ewriteSynthesized\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eEvaluator\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eevalDir\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"cp\"\u003e#if defined LEARN\n\u003c/span\u003e        \u003cspan class=\"k\"\u003eelse\u003c/span\u003e \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003etoken\u003c/span\u003e \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"s\"\u003e\"l\"\u003c/span\u003e        \u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eauto\u003c/span\u003e \u003cspan class=\"n\"\u003elearner\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eunique_ptr\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eLearner\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eLearner\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n            \u003cspan class=\"n\"\u003elearner\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003elearn\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003epos\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003essCmd\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eelse\u003c/span\u003e \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003etoken\u003c/span\u003e \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"s\"\u003e\"make_teacher\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"o\"\u003e!\u003c/span\u003e\u003cspan class=\"n\"\u003eevalTableIsRead\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eunique_ptr\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eEvaluator\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eEvaluator\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003einit\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eEvaluator\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eevalDir\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nb\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n                \u003cspan class=\"n\"\u003eevalTableIsRead\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nb\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n            \u003cspan class=\"n\"\u003emake_teacher\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003essCmd\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eelse\u003c/span\u003e \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003etoken\u003c/span\u003e \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"s\"\u003e\"use_teacher\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"o\"\u003e!\u003c/span\u003e\u003cspan class=\"n\"\u003eevalTableIsRead\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eunique_ptr\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eEvaluator\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eEvaluator\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003einit\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eEvaluator\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eevalDir\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nb\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n                \u003cspan class=\"n\"\u003eevalTableIsRead\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nb\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n            \u003cspan class=\"n\"\u003euse_teacher\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003epos\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003essCmd\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eelse\u003c/span\u003e \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003etoken\u003c/span\u003e \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"s\"\u003e\"check_teacher\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"n\"\u003echeck_teacher\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003essCmd\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eelse\u003c/span\u003e \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003etoken\u003c/span\u003e \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"s\"\u003e\"print\"\u003c/span\u003e    \u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"n\"\u003eprintEvalTable\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eSQ88\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ef_gold\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"n\"\u003eSQ78\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ef_gold\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nb\"\u003efalse\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"cp\"\u003e#endif\n#if !defined MINIMUL\n\u003c/span\u003e        \u003cspan class=\"c1\"\u003e// 以下、デバッグ用\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eelse\u003c/span\u003e \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003etoken\u003c/span\u003e \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"s\"\u003e\"bench\"\u003c/span\u003e    \u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"o\"\u003e!\u003c/span\u003e\u003cspan class=\"n\"\u003eevalTableIsRead\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eunique_ptr\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eEvaluator\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eEvaluator\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003einit\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eEvaluator\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eevalDir\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nb\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n                \u003cspan class=\"n\"\u003eevalTableIsRead\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nb\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n            \u003cspan class=\"n\"\u003ebenchmark\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003epos\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eelse\u003c/span\u003e \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003etoken\u003c/span\u003e \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"s\"\u003e\"key\"\u003c/span\u003e      \u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"n\"\u003eSYNCCOUT\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e \u003cspan class=\"n\"\u003epos\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003egetKey\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e \u003cspan class=\"n\"\u003eSYNCENDL\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eelse\u003c/span\u003e \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003etoken\u003c/span\u003e \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"s\"\u003e\"tosfen\"\u003c/span\u003e   \u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"n\"\u003eSYNCCOUT\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e \u003cspan class=\"n\"\u003epos\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003etoSFEN\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e \u003cspan class=\"n\"\u003eSYNCENDL\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eelse\u003c/span\u003e \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003etoken\u003c/span\u003e \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"s\"\u003e\"eval\"\u003c/span\u003e     \u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003ecout\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e \u003cspan class=\"n\"\u003eevaluateUnUseDiff\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003epos\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e/\u003c/span\u003e \u003cspan class=\"n\"\u003eFVScale\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e \u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eendl\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eelse\u003c/span\u003e \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003etoken\u003c/span\u003e \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"s\"\u003e\"d\"\u003c/span\u003e        \u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"n\"\u003epos\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eprint\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eelse\u003c/span\u003e \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003etoken\u003c/span\u003e \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"s\"\u003e\"s\"\u003c/span\u003e        \u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"n\"\u003emeasureGenerateMoves\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003epos\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eelse\u003c/span\u003e \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003etoken\u003c/span\u003e \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"s\"\u003e\"t\"\u003c/span\u003e        \u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003ecout\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e \u003cspan class=\"n\"\u003epos\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003emateMoveIn1Ply\u003c/span\u003e\u003cspan class=\"p\"\u003e().\u003c/span\u003e\u003cspan class=\"n\"\u003etoCSA\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e \u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eendl\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eelse\u003c/span\u003e \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003etoken\u003c/span\u003e \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"s\"\u003e\"b\"\u003c/span\u003e        \u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"n\"\u003emakeBook\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003epos\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003essCmd\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"cp\"\u003e#endif\n\u003c/span\u003e        \u003cspan class=\"k\"\u003eelse\u003c/span\u003e                           \u003cspan class=\"n\"\u003eSYNCCOUT\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e \u003cspan class=\"s\"\u003e\"unknown command: \"\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e \u003cspan class=\"n\"\u003ecmd\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e \u003cspan class=\"n\"\u003eSYNCENDL\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e \u003cspan class=\"k\"\u003ewhile\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003etoken\u003c/span\u003e \u003cspan class=\"o\"\u003e!=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"quit\"\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e \u003cspan class=\"n\"\u003eargc\u003c/span\u003e \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n    \u003cspan class=\"n\"\u003ethreads\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003emain\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003ewaitForSearchFinished\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eうーむ。Windowsの実行と、Linuxの実行に違いはあるのだろうか。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eMakefile:86: recipe for target 'publish' failed\nmake: *** [publish] Killed\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eうーむ。よく Killed が出てくるようになった。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003ejobs\n[1]   Stopped                 ./apery\n[2]   Stopped                 ./apery\n[3]   Stopped                 ./apery\n[4]   Stopped                 ./apery\n[5]-  Stopped                 ./apery  (wd: /home/csg10/shogi/apery-SDT4/bin)\n[6]+  Stopped                 ./apery  (wd: /home/csg10/shogi/apery-SDT4/bin)\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eこの Stopped が溜まっているのはいいのだろうか？\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"killコマンドを使ってみよう\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#kill%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E3%81%BF%E3%82%88%E3%81%86\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003ekillコマンドを使ってみよう\u003c/h1\u003e\n\n\u003cp\u003e「バックグラウンドプロセス(ジョブ)の管理Add Star」 （satake7’s memo）\u003cbr\u003e\n\u003ca href=\"http://d.hatena.ne.jp/satake7/20080606/p1\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://d.hatena.ne.jp/satake7/20080606/p1\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eこうだろうか。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003ekill %1\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003ejobs\n[1]   Terminated              ./apery\n[2]   Stopped                 ./apery\n[3]   Stopped                 ./apery\n[4]   Stopped                 ./apery\n[5]-  Stopped                 ./apery  (wd: /home/csg10/shogi/apery-SDT4/bin)\n[6]+  Stopped                 ./apery  (wd: /home/csg10/shogi/apery-SDT4/bin)\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eStopped が Terminated に変わったが、なんのこっちゃ。\u003cbr\u003e\nこの調子で全部のジョブをkillした。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003ejobs\nmake clean\nmake publish\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eだめか。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"profgen_sse2\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#profgen_sse2\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eprofgen_sse2\u003c/h1\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e    make clean\n    make profgen_sse2\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003emake CFLAGS='-std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov' LDFLAGS='-lpthread  -fprofile-generate -lgcov' sse2\nmake[1]: Entering directory '/home/csg10/shogi/apery-SDT4/src'\nmake CFLAGS='-std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE2 -msse2' LDFLAGS='-lpthread  -fprofile-generate -lgcov -flto' apery\nmake[2]: Entering directory '/home/csg10/shogi/apery-SDT4/src'\ng++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE2 -msse2  -o ../obj/main.o -c main.cpp\ng++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE2 -msse2  -o ../obj/bitboard.o -c bitboard.cpp\ng++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE2 -msse2  -o ../obj/init.o -c init.cpp\ng++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE2 -msse2  -o ../obj/mt64bit.o -c mt64bit.cpp\ng++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE2 -msse2  -o ../obj/position.o -c position.cpp\ng++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE2 -msse2  -o ../obj/evalList.o -c evalList.cpp\ng++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE2 -msse2  -o ../obj/move.o -c move.cpp\ng++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE2 -msse2  -o ../obj/movePicker.o -c movePicker.cpp\ng++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE2 -msse2  -o ../obj/square.o -c square.cpp\ng++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE2 -msse2  -o ../obj/usi.o -c usi.cpp\ng++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE2 -msse2  -o ../obj/generateMoves.o -c generateMoves.cpp\ng++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE2 -msse2  -o ../obj/evaluate.o -c evaluate.cpp\ng++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE2 -msse2  -o ../obj/search.o -c search.cpp\ng++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE2 -msse2  -o ../obj/hand.o -c hand.cpp\ng++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE2 -msse2  -o ../obj/tt.o -c tt.cpp\ng++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE2 -msse2  -o ../obj/timeManager.o -c timeManager.cpp\ng++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE2 -msse2  -o ../obj/book.o -c book.cpp\ng++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE2 -msse2  -o ../obj/benchmark.o -c benchmark.cpp\ng++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE2 -msse2  -o ../obj/thread.o -c thread.cpp\ng++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE2 -msse2  -o ../obj/common.o -c common.cpp\ng++ -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE2 -msse2  -o ../obj/pieceScore.o -c pieceScore.cpp\ng++ -o apery ../obj/main.o ../obj/bitboard.o ../obj/init.o ../obj/mt64bit.o ../obj/position.o ../obj/evalList.o ../obj/move.o ../obj/movePicker.o ../obj/square.o ../obj/usi.o ../obj/generateMoves.o ../obj/evaluate.o ../obj/search.o ../obj/hand.o ../obj/tt.o ../obj/timeManager.o ../obj/book.o ../obj/benchmark.o ../obj/thread.o ../obj/common.o ../obj/pieceScore.o -lpthread  -fprofile-generate -lgcov -flto -std=c++11 -fno-exceptions -fno-rtti -Wextra -Ofast -MMD -MP -fopenmp -fprofile-generate -lgcov -DNDEBUG -DHAVE_SSE2 -msse2\nmake[2]: Leaving directory '/home/csg10/shogi/apery-SDT4/src'\nmake[1]: Leaving directory '/home/csg10/shogi/apery-SDT4/src'\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eこれは　うまくいったんじゃないか？\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e./apery \u0026amp;\n[1] 3144\njobs\n[1]+  Stopped                 ./apery\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eだめか。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e./apery bench\ninfo string start setting eval table\ninfo string end setting eval table\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eなんのこっちゃ。今までよりは　反応があるだけマシか。\u003c/p\u003e\n\n\u003cp\u003eどうも、メインループからすぐ抜けてしまうのか、Stopped になってしまうようだ。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"評価関数ファイルが無いんじゃないか\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%A9%95%E4%BE%A1%E9%96%A2%E6%95%B0%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%8C%E7%84%A1%E3%81%84%E3%82%93%E3%81%98%E3%82%83%E3%81%AA%E3%81%84%E3%81%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e評価関数ファイルが無いんじゃないか？\u003c/h1\u003e\n\n\u003cp\u003eきふわらぷりーは　どうやって動いてるのか　調べてみよう……。\u003c/p\u003e\n\n\u003cp\u003e評価ファイルを作る make_synthesized_eval.sh みたいなファイルを .bat に書き直して 20151105 フォルダーに KPP_synthesized.bin、KK_synthesized.bin、KKP_synthesized.bin の３つのバイナリを生成している。\u003c/p\u003e\n\n\u003cp\u003e調べよう。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"ukamuse_sdt4zip\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#ukamuse_sdt4zip\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eukamuse_sdt4.zip\u003c/h1\u003e\n\n\u003cp\u003eukamuse_sdt4.zip というバイナリもあるみたいだ。なんだこれ。FileZilla で Linuxサーバー へ転送して unzip してみよう。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eunzip ukamuse_sdt4.zip\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003einflating:\u003cbr\u003e\nとか\u003cbr\u003e\ncreating:\u003cbr\u003e\nとか出てくるが何だろうか。\u003c/p\u003e\n\n\u003cp\u003eあら、ukamuse_sdt4 にも src が入っている。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003els\n20161007  ukamuse_sdt4_bmi2.exe  ukamuse_sdt4_sse2.exe  ukamuse_sdt4_sse41.exe  ukamuse_sdt4_sse42.exe\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eそして .bin の中には exe も入っているが、Linux で使うのだろうか？\u003c/p\u003e\n\n\u003cp\u003e20161007 フォルダーの中には\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003els\nKKP_synthesized.bin  KPP_synthesized.bin  log_v1.10.0.txt  log_v1.1.1.txt   log_v1.13.0.txt  log_v1.2.0_2.txt  log_v1.3.0.txt  log_v1.5.0.txt  log_v1.7.0.txt\nKK_synthesized.bin   log_v1.0.3.txt       log_v1.11.0.txt  log_v1.12.0.txt  log_v1.14.0.txt  log_v1.2.0.txt    log_v1.4.0.txt  log_v1.6.0.txt  log_v1.8.1.txt\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eと、いろいろ入っている。じゃあ ukamuse_sdt4 フォルダーの中で Linux用にコンパイルし直したらいいのだろうか？\u003c/p\u003e\n\n\u003cp\u003eじゃあ src ディレクトリーで\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003emake publish\n～中略～\nMakefile:86: recipe for target 'publish' failed\nmake: *** [publish] Illegal instruction\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eなんか CPU が対応してないんじゃないか。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003emake clean\nmake profgen_sse2\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eこれならコンパイルが通る。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003emv apery ../bin/apery\nls\n20161007  apery  ukamuse_sdt4_bmi2.exe  ukamuse_sdt4_sse2.exe  ukamuse_sdt4_sse41.exe  ukamuse_sdt4_sse42.exe\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eこれでどうか。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e./apery\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eよし、ループでブロック（ループを抜けない）されてる感じがする。[Ctrl]+[C]で抜ける。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e./apery bench\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e数秒でループを抜けたようだ。よく分からない。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e./apery\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eこれでしばらく待つ。\u003cbr\u003e\nなんも起こらない。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e./apery \u0026amp;\n[1] 3459\njobs\n[1]+  Stopped                 ./apery\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eだめか。\u003c/p\u003e\n\n\u003cp\u003esrc/evaluate.cpp ファイルには \u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003estd::string Evaluator::evalDir = \"20161007\";\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eと書いているので、フォルダー名は合っているのだろう。\u003cbr\u003e\nじゃあ次は src ディレクトリで\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003ecp benchmark.sfen ../bin/benchmark.sfen\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eを実行。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"あっbench-動いた\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%82%E3%81%A3bench-%E5%8B%95%E3%81%84%E3%81%9F\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eあっ、bench 動いた。\u003c/h1\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e./apery bench\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e今度は bench が実行された。テスト用の局面に対して　読み筋がどんどん並んでいる。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003einfo depth 16 seldepth 37 multipv 1 score cp -562 upperbound nodes 1866534 nps 206978 time 9018 pv 6g6h+ 5h4i 6h6g S*5b 3a4b 5b4c+ 4b4c 6f6e 6g5g 6e7d B*6g 4i3h 6g5f+ 7d6d 5g4g 3h2g 2b5e R*5a\ninfo nodes 1950370 time 9518\nbestmove 6g6h+ ponder 5h4i\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"じゃあ対局はどうか\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%98%E3%82%83%E3%81%82%E5%AF%BE%E5%B1%80%E3%81%AF%E3%81%A9%E3%81%86%E3%81%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eじゃあ対局はどうか？\u003c/h1\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e./apery usi \u0026amp;\n[2] 3510\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eid name ukamuse_SDT4\nid author Hiraoka Takuya\n\noption name Best_Book_Move type check default false\noption name Book_File type string default book/20150503/book.bin\noption name Byoyomi_Margin type spin default 500 min 0 max 2147483647\noption name Clear_Hash type button\noption name Draw_Ply type spin default 256 min 1 max 2147483647\noption name Engine_Name type string default ukamuse_SDT4\noption name Max_Book_Ply type spin default 32767 min 0 max 32767\noption name Max_Random_Score_Diff type spin default 0 min 0 max 32600\noption name Max_Random_Score_Diff_Ply type spin default 32767 min 0 max 32767\noption name Min_Book_Ply type spin default 32767 min 0 max 32767\noption name Min_Book_Score type spin default -180 min -32601 max 32601\noption name Minimum_Thinking_Time type spin default 20 min 0 max 2147483647\noption name Move_Overhead type spin default 30 min 0 max 5000\noption name MultiPV type spin default 1 min 1 max 594\noption name OwnBook type check default true\noption name Slow_Mover type spin default 89 min 1 max 1000\noption name Slow_Mover_10 type spin default 10 min 1 max 1000\noption name Slow_Mover_16 type spin default 20 min 1 max 1000\noption name Slow_Mover_20 type spin default 40 min 1 max 1000\noption name Threads type spin default 2 min 1 max 256\noption name Time_Margin type spin default 4500 min 0 max 2147483647\noption name USI_Hash type spin default 256 min 1 max 1048576\noption name USI_Ponder type check default true\nusiok\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003ejobs\n[1]+  Stopped                 ./apery\n[2]-  Done                    ./apery usi\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e jobs\n[1]+  Stopped                 ./apery\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eDone じゃないんだが……。常駐してほしいんだが……。\u003c/p\u003e\n\n\u003cp\u003e「○自作プログラムをデーモンとして起動させる」\u003cbr\u003e\n\u003ca href=\"http://7ujm.net/linux/daemon.html\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://7ujm.net/linux/daemon.html\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e将棋プログラムは　デーモンなのか？\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"メインループに入っているのでは\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%A1%E3%82%A4%E3%83%B3%E3%83%AB%E3%83%BC%E3%83%97%E3%81%AB%E5%85%A5%E3%81%A3%E3%81%A6%E3%81%84%E3%82%8B%E3%81%AE%E3%81%A7%E3%81%AF\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eメインループに入っているのでは？\u003c/h1\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e./apery\nbench\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eのあと 右キーか何か押したら bench が走った。どういうことなのか。\u003c/p\u003e\n\n\u003cp\u003ebench と入れると bench が走るんだが、usi と入れても走らない。何が違うのか。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eunknown command:       usi\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eeval\n-243\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eeval はオッケーなのか。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eprint\nunknown command: print\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eprint はダメなのか。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003ekey\n4543979467506711947\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003ekey はオッケーなのか。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003etosfen\nsfen l5knl/7b1/p3pg1gp/1pr3Pp1/5pS2/1PpGP4/2gpBPS1P/4K2R1/LN5NL w 2Sn5p 74\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003etosfen はオッケーなのか。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003ed\n'  9  8  7  6  5  4  3  2  1\nP1-KY *  *  *  *  * -OU-KE-KY\nP2 *  *  *  *  *  *  * -KA *\nP3-FU *  *  * -FU-KI * -KI-FU\nP4 * -FU-HI *  *  * +FU-FU *\nP5 *  *  *  *  * -FU+GI *  *\nP6 * +FU-FU+KI+FU *  *  *  *\nP7 *  * -KI-FU+KA+FU+GI * +FU\nP8 *  *  *  * +OU *  * +HI *\nP9+KY+KE *  *  *  *  * +KE+KY\nP+00GI00GI\nP-00FU00FU00FU00FU00FU\nP-00KE\n-\n\nkey = 4543979467506711947\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003ed もオッケーなのか。printはダメなのに。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003es\n'  9  8  7  6  5  4  3  2  1\nP1-KY *  *  *  *  * -OU-KE-KY\nP2 *  *  *  *  *  *  * -KA *\nP3-FU *  *  * -FU-KI * -KI-FU\nP4 * -FU-HI *  *  * +FU-FU *\nP5 *  *  *  *  * -FU+GI *  *\nP6 * +FU-FU+KI+FU *  *  *  *\nP7 *  * -KI-FU+KA+FU+GI * +FU\nP8 *  *  *  * +OU *  * +HI *\nP9+KY+KE *  *  *  *  * +KE+KY\nP+00GI00GI\nP-00FU00FU00FU00FU00FU\nP-00KE\n-\n\nkey = 4543979467506711947\nelapsed = 2870 [msec]\ntimes/s = 1742160 [times/sec]\nnum of moves = 78\n6768TO, 2266KA, 7434HI, 2334KI, 4334KI, 1314FU, 2425FU, 4546FU, 5354FU, 8485FU, 9394FU, 1112KY, 9192KY, 2133KE, 2233KA, 2244KA, 2255KA, 7444HI, 7454HI, 7464HI, 7471HI, 7472HI, 7473HI, 7475HI, 2314KI, 2333KI, 4333KI, 4342KI, 4344KI, 4354KI, 7768KI, 7778KI, 7787KI, 7788KI, 3132OU, 3141OU, 3142OU, 0032FU, 0033FU, 0036FU, 0038FU, 0012KE, 0014KE, 0015KE, 0016KE, 0025KE, 0026KE, 0027KE, 0032KE, 0033KE, 0036KE, 0041KE, 0042KE, 0044KE, 0046KE, 0051KE, 0052KE, 0054KE, 0055KE, 0061KE, 0062KE, 0063KE, 0064KE, 0065KE, 0071KE, 0072KE, 0073KE, 0075KE, 0081KE, 0082KE, 0083KE, 0085KE, 0087KE, 0092KE, 0094KE, 0095KE, 0096KE, 0097KE,\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003es もいける。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003et\nNone\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003et もいける。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eb\nI cannot open\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eb もいける。\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003eあーっ\u003c/strong\u003e。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C++\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"cp\"\u003e#if defined LEARN\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eprint は 学習用のコマンドか。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003ewrite_eval\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eあっ、時間かかりそう。 [Ctrl]+[C]。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003esetoption\nNo such option:\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003esetoption もいけてそう。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eisready\nreadyok\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eisready もいけてるじゃないか。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eusi\nid name ukamuse_SDT4\nid author Hiraoka Takuya\n\noption name Best_Book_Move type check default false\noption name Book_File type string default book/20150503/book.bin\noption name Byoyomi_Margin type spin default 500 min 0 max 2147483647\noption name Clear_Hash type button\noption name Draw_Ply type spin default 256 min 1 max 2147483647\noption name Engine_Name type string default ukamuse_SDT4\noption name Max_Book_Ply type spin default 32767 min 0 max 32767\noption name Max_Random_Score_Diff type spin default 0 min 0 max 32600\noption name Max_Random_Score_Diff_Ply type spin default 32767 min 0 max 32767\noption name Min_Book_Ply type spin default 32767 min 0 max 32767\noption name Min_Book_Score type spin default -180 min -32601 max 32601\noption name Minimum_Thinking_Time type spin default 20 min 0 max 2147483647\noption name Move_Overhead type spin default 30 min 0 max 5000\noption name MultiPV type spin default 1 min 1 max 594\noption name OwnBook type check default true\noption name Slow_Mover type spin default 89 min 1 max 1000\noption name Slow_Mover_10 type spin default 10 min 1 max 1000\noption name Slow_Mover_16 type spin default 20 min 1 max 1000\noption name Slow_Mover_20 type spin default 40 min 1 max 1000\noption name Threads type spin default 2 min 1 max 256\noption name Time_Margin type spin default 4500 min 0 max 2147483647\noption name USI_Hash type spin default 256 min 1 max 1048576\noption name USI_Ponder type check default true\nusiok\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eusi もいけてるじゃないか。\u003c/p\u003e\n\n\u003cp\u003eじゃあ、手動で対局できるか調べてみるか。もう一度最初から。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"手動で対局しようぜ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%89%8B%E5%8B%95%E3%81%A7%E5%AF%BE%E5%B1%80%E3%81%97%E3%82%88%E3%81%86%E3%81%9C\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e手動で対局しようぜ\u003c/h1\u003e\n\n\u003cp\u003e私が打つ\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e./apery\nusi\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e次、浮かむ瀬が返してくる。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eid name ukamuse_SDT4\nid author Hiraoka Takuya\n\noption name Best_Book_Move type check default false\noption name Book_File type string default book/20150503/book.bin\noption name Byoyomi_Margin type spin default 500 min 0 max 2147483647\noption name Clear_Hash type button\noption name Draw_Ply type spin default 256 min 1 max 2147483647\noption name Engine_Name type string default ukamuse_SDT4\noption name Max_Book_Ply type spin default 32767 min 0 max 32767\noption name Max_Random_Score_Diff type spin default 0 min 0 max 32600\noption name Max_Random_Score_Diff_Ply type spin default 32767 min 0 max 32767\noption name Min_Book_Ply type spin default 32767 min 0 max 32767\noption name Min_Book_Score type spin default -180 min -32601 max 32601\noption name Minimum_Thinking_Time type spin default 20 min 0 max 2147483647\noption name Move_Overhead type spin default 30 min 0 max 5000\noption name MultiPV type spin default 1 min 1 max 594\noption name OwnBook type check default true\noption name Slow_Mover type spin default 89 min 1 max 1000\noption name Slow_Mover_10 type spin default 10 min 1 max 1000\noption name Slow_Mover_16 type spin default 20 min 1 max 1000\noption name Slow_Mover_20 type spin default 40 min 1 max 1000\noption name Threads type spin default 2 min 1 max 256\noption name Time_Margin type spin default 4500 min 0 max 2147483647\noption name USI_Hash type spin default 256 min 1 max 1048576\noption name USI_Ponder type check default true\nusiok\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e次、わたしが打つ。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eusinewgame\nposition startpos moves\ngo\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e次、浮かむ瀬が返してくる。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003einfo string optimum_time = 20\ninfo string maximum_time = 20\ninfo string book_ply 32767\ninfo depth 1 seldepth 1 multipv 1 score cp 0 nodes 67 nps 1367 time 49 pv 1g1f\nbestmove 1g1f\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e脳内で将棋盤をいじくる。1g1f というのは　１六歩　だが、なんで端歩を突くのか。\u003cbr\u003e\nじゃあ　１四歩　としよう。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eposition sfen lnsgkgsnl/1b5r1/pppppppp1/8p/9/8P/PPPPPPPP1/1B5R1/LNSGKGSNL b - 1 moves 1g1f 1c1d\ngo\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eなんか 浮かむ瀬がノータイムで返してくる。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003einfo string optimum_time = 20\ninfo string maximum_time = 20\ninfo string book_ply 32767\ninfo depth 1 seldepth 1 multipv 1 score cp 0 nodes 72 nps 3272 time 22 pv 2g2f\ninfo depth 2 seldepth 2 multipv 1 score cp 0 nodes 195 nps 4062 time 48 pv 2g2f 2c2d\nbestmove 2g2f ponder 2c2d\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eなぜ　ノータイムなのか。とりあえず　浮かむ瀬とは指せるようだ。\u003cbr\u003e\nじゃあ終了しよ……。\u003cbr\u003e\n私が打つ。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003egameover\nquit\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eあとは設定をいじろう。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"設定を見てみよう\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%A8%AD%E5%AE%9A%E3%82%92%E8%A6%8B%E3%81%A6%E3%81%BF%E3%82%88%E3%81%86\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e設定を見てみよう\u003c/h1\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eoption name Minimum_Thinking_Time type spin default 20 min 0 max 2147483647\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e学習の用途とかで 0.02 秒で返すようにしてあるんだろうか。\u003cbr\u003e\nコンピューターに１秒で指させるんなら、\u003cstrong\u003e通信にかかる時間に３秒ぐらいとっておきたいが要件定義を満たさないので\u003c/strong\u003e、0.5 秒ぐらい思考させるか。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003esetoption name Minimum_Thinking_Time value 500\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eこれを usinewgame の前に思考エンジンに送ってやればいいんだろうか？\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e./apery\nusi\nid name ukamuse_SDT4\nid author Hiraoka Takuya\n\noption name Best_Book_Move type check default false\noption name Book_File type string default book/20150503/book.bin\noption name Byoyomi_Margin type spin default 500 min 0 max 2147483647\noption name Clear_Hash type button\noption name Draw_Ply type spin default 256 min 1 max 2147483647\noption name Engine_Name type string default ukamuse_SDT4\noption name Max_Book_Ply type spin default 32767 min 0 max 32767\noption name Max_Random_Score_Diff type spin default 0 min 0 max 32600\noption name Max_Random_Score_Diff_Ply type spin default 32767 min 0 max 32767\noption name Min_Book_Ply type spin default 32767 min 0 max 32767\noption name Min_Book_Score type spin default -180 min -32601 max 32601\noption name Minimum_Thinking_Time type spin default 20 min 0 max 2147483647\noption name Move_Overhead type spin default 30 min 0 max 5000\noption name MultiPV type spin default 1 min 1 max 594\noption name OwnBook type check default true\noption name Slow_Mover type spin default 89 min 1 max 1000\noption name Slow_Mover_10 type spin default 10 min 1 max 1000\noption name Slow_Mover_16 type spin default 20 min 1 max 1000\noption name Slow_Mover_20 type spin default 40 min 1 max 1000\noption name Threads type spin default 2 min 1 max 256\noption name Time_Margin type spin default 4500 min 0 max 2147483647\noption name USI_Hash type spin default 256 min 1 max 1048576\noption name USI_Ponder type check default true\nusiok\nisready\nreadyok\nsetoption name Minimum_Thinking_Time value 500\nusinewgame\nposition startpos moves\ngo\ninfo string optimum_time = 500\ninfo string maximum_time = 500\ninfo string book_ply 32767\ninfo depth 1 seldepth 1 multipv 1 score cp 63 nodes 64 nps 1230 time 52 pv 2g2f\ninfo depth 2 seldepth 2 multipv 1 score cp 173 nodes 108 nps 1611 time 67 pv 2g2f 1c1d\ninfo depth 3 seldepth 3 multipv 1 score cp 155 nodes 229 nps 2462 time 93 pv 2g2f 3c3d 2f2e\ninfo depth 4 seldepth 4 multipv 1 score cp 291 nodes 341 nps 2772 time 123 pv 2g2f 3c3d 2f2e 1c1d 2e2d\ninfo depth 5 seldepth 5 multipv 1 score cp 252 nodes 1781 nps 6720 time 265 pv 2g2f 8c8d 2f2e 8d8e 2e2d 2c2d 2h2d\ninfo depth 6 seldepth 6 multipv 1 score cp 252 nodes 2047 nps 6603 time 310 pv 2g2f 8c8d 2f2e 8d8e 2e2d 2c2d 2h2d\ninfo depth 7 seldepth 7 multipv 1 score cp 252 nodes 2653 nps 6615 time 401 pv 2g2f 8c8d 2f2e 8d8e 2e2d 2c2d 2h2d 8e8f\ninfo depth 8 seldepth 9 multipv 1 score cp 22 nodes 6478 nps 6733 time 962 pv 2g2f 8c8d 2f2e 8d8e 6i7h 8e8f 8g8f 8b8f\nbestmove 2g2f ponder 8c8d\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eうむ、0.5秒以上は考えているようだ、飛車先の歩を伸ばしているから　大丈夫そうだ。これだけ見ると……。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"次はシェルスクリプトか\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%AC%A1%E3%81%AF%E3%82%B7%E3%82%A7%E3%83%AB%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%97%E3%83%88%E3%81%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e次はシェル・スクリプトか？\u003c/h1\u003e\n\n\u003cp\u003eループ待機している浮かむ瀬の、標準入力をシェル・スクリプトか何かに、標準出力を同じくシェル・スクリプトか何かにして、キャッチボールができればいいんだが、将棋所にできるんだし、やる方法はあるんだろう……。\u003c/p\u003e\n\n\u003cp\u003eあるいはそれこそ C++ でもいいのかもしれないが……、できれば PHP と連携したい。\u003c/p\u003e\n\n\u003cp\u003eどういう方法があるかは　また今度考えよう。\u003c/p\u003e\n\n\u003cp\u003e打鍵で 浮かむ瀬と 標準入出力通信ができたのだから、シェルにもできるだろう。\u003cbr\u003e\n調べよう。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"どのシェルを使う\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%A9%E3%81%AE%E3%82%B7%E3%82%A7%E3%83%AB%E3%82%92%E4%BD%BF%E3%81%86\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eどのシェルを使う？\u003c/h1\u003e\n\n\u003cp\u003eググると　ぱっと見　bash　しか出てこない。じゃあ bash で。\u003c/p\u003e\n\n\u003cp\u003eエディターは Ubuntu には gedit が最初からインストールされているので、という説もあったが わたしのにはインストールされていなかったので、わたしの環境で最初からインストールされている nano でいいや……。\u003c/p\u003e\n\n\u003cp\u003e「シェルスクリプト入門 書き方のまとめ」 (Memo on the Web)\u003cbr\u003e\n\u003ca href=\"http://motw.mods.jp/shellscript/tutorial.html\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://motw.mods.jp/shellscript/tutorial.html\u003c/a\u003e\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003emkdir jikken\ncd jikken\nnano tamesi1\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e#!/bin/sh\necho \"hello, world\"\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e[Ctrl]+[O]\u003c/p\u003e\n\n\u003cp\u003etamesi1 で名前を付けて保存。\u003c/p\u003e\n\n\u003cp\u003eおっ、テキストに色が付いた。\u003c/p\u003e\n\n\u003cp\u003e[Ctrl]+[X]\u003c/p\u003e\n\n\u003cp\u003eで nano エディターを終了。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e./tamesi1\n-bash: ./tamesi1: Permission denied\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eパーミッションがあるのか。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003els -an\ntotal 12\ndrwxrwxr-x 2 1000 1000 4096 Mar  5 16:30 .\ndrwxr-xr-x 6 1000 1000 4096 Mar  5 16:28 ..\n-rw-rw-r-- 1 1000 1000   30 Mar  5 16:30 tamesi1\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eじゃあ\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003echmod 765 tamesi1\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eとかでいいんだろうか？ 無理。ルート権限がいるのか。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003esudo su -\n～パスワード入力～\nchmod 765 tamesi1\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003els -an\ntotal 12\ndrwxrwxr-x 2 1000 1000 4096 Mar  5 16:30 .\ndrwxr-xr-x 6 1000 1000 4096 Mar  5 16:28 ..\n-rwxrw-r-x 1 1000 1000   30 Mar  5 16:30 tamesi1\n   ~     ~\n   ※ここが変わった\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e./tamesi1\nhello, world\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eおっ、いけた。\u003cbr\u003e\nじゃあ bin フォルダーの中でシェル・スクリプトを書くか。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003ecd ../shogi/apery-SDT4/bin\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eあっ！　こっちじゃないや。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003ecd ../../ukamuse_sdt4/bin\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e.exe ファイルとか置いてあるんだが、Ubuntu じゃ使わないだろ……、消しておくか。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003erm ukamuse_sdt4_bmi2.exe\nrm ukamuse_sdt4_sse2.exe\nrm ukamuse_sdt4_sse41.exe\nrm ukamuse_sdt4_sse42.exe\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eテキストエディタに書いてコピー、PuTTY で左クリックで貼り付け、[Enter]キー１回で全部終わり。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"シェルスクリプトを書こう\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%B7%E3%82%A7%E3%83%AB%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%97%E3%83%88%E3%82%92%E6%9B%B8%E3%81%93%E3%81%86\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eシェル・スクリプトを書こう\u003c/h1\u003e\n\n\u003cp\u003eじゃあ、こんな風に書けばいいんだろうか？\u003c/p\u003e\n\n\u003cp\u003eまずは bench で試し。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003enano tamesi1\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e#!/bin/sh\n./apery\nbench\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eこれも PuTTY へ右クリックで貼り付け。保存して nano 終了。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e./tamesi1\n-su: ./tamesi1: Permission denied\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003els -an\ntotal 852\ndrwxr-xr-x 3 0 0   4096 Mar  5 16:44 .\ndrwxr-xr-x 6 0 0   4096 Mar  5 02:33 ..\ndrwxr-xr-x 2 0 0   4096 Oct  7 11:05 20161007\n-rwxr-xr-x 1 0 0 848120 Mar  5 02:47 apery\n-rw-r--r-- 1 0 0   1531 Mar  5 03:04 benchmark.sfen\n-rw-r--r-- 1 0 0     24 Mar  5 16:44 tamesi1\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003echmod 744 tamesi1\nls -n\ntotal 844\ndrwxr-xr-x 2 0 0   4096 Oct  7 11:05 20161007\n-rwxr-xr-x 1 0 0 848120 Mar  5 02:47 apery\n-rw-r--r-- 1 0 0   1531 Mar  5 03:04 benchmark.sfen\n-rwxr--r-- 1 0 0     24 Mar  5 16:44 tamesi1\n   ~\n   ※ここが変わった\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e./tamesi1\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e待機ループに入ったようだが、bench を入力するのが早すぎるのだろうか？\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003ebench\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e手入力すると行ける。数秒待機してから bench を入力するようにした方がいいのか？\u003c/p\u003e\n\n\u003cp\u003e[Ctrl]+[C] でブロックを抜ける。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"数秒待ってから入力しよう\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%95%B0%E7%A7%92%E5%BE%85%E3%81%A3%E3%81%A6%E3%81%8B%E3%82%89%E5%85%A5%E5%8A%9B%E3%81%97%E3%82%88%E3%81%86\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e数秒待ってから入力しよう\u003c/h1\u003e\n\n\u003cp\u003e「【 sleep 】 指定された時間，停止する」 (ITPro)\u003cbr\u003e\n\u003ca href=\"http://itpro.nikkeibp.co.jp/article/COLUMN/20060227/230884/?rt=nocnt\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://itpro.nikkeibp.co.jp/article/COLUMN/20060227/230884/?rt=nocnt\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eじゃあ、浮かむ瀬起動から 10秒待ってから bench と入力するようにしよう。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e#!/bin/sh\n./apery\nsleep 10s\nbench\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003enano で編集して、コマンドラインで実行。\u003c/p\u003e\n\n\u003cp\u003eブロックされている。じゃあ、書き方が違うのか。こうか。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e#!/bin/sh\n./apery\nsleep 10s\necho 'bench'\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eブロックされたままだが……。 ./apery の行でブロックしているんじゃないか？　だったら。\u003cbr\u003e\nこれでどうか？\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e#!/bin/sh\n./apery \u0026amp;\nsleep 3s\necho 'bench' | ./apery\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eビンゴ！　いけた。\u003cbr\u003e\nじゃあ、sleep とか要るのだろうか？\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e#!/bin/sh\n./apery \u0026amp;\necho 'bench' | ./apery\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eこれでもいけた。じゃあ、bench はこれで。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"対局もシェルスクリプトで書いてみよう\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AF%BE%E5%B1%80%E3%82%82%E3%82%B7%E3%82%A7%E3%83%AB%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%97%E3%83%88%E3%81%A7%E6%9B%B8%E3%81%84%E3%81%A6%E3%81%BF%E3%82%88%E3%81%86\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e対局も、シェル・スクリプトで書いてみよう\u003c/h1\u003e\n\n\u003cp\u003eお出かけのあと追記する。\u003c/p\u003e\n\n\u003cp\u003ePuTTY に IPアドレスを入れて SSHプロトコルでログイン。\u003cbr\u003e\nユーザー名とパスワードを入れる。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003esudo su -\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eまたパスワードを入れる。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003ecd ../home/ユーザー名/shogi/ukamuse_sdt4/bin\nls\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eよし。\u003c/p\u003e\n\n\u003cp\u003etamesi2 ファイルを作ってみよう。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003enano tamesi2\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e#!/bin/sh\n./apery \u0026amp;\necho 'usi' | ./apery\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003els -n\n～略～\n-rw-r--r-- 1 0 0     41 Mar  5 18:25 tamesi2\nchmod 744 tamesi2\nls -n\n～略～\n-rwxr--r-- 1 0 0     41 Mar  5 18:25 tamesi2\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e./tamesi2\nid name ukamuse_SDT4\n～略～\nusiok\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"コマンドの出力をシェルの変数で受け取ろう\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89%E3%81%AE%E5%87%BA%E5%8A%9B%E3%82%92%E3%82%B7%E3%82%A7%E3%83%AB%E3%81%AE%E5%A4%89%E6%95%B0%E3%81%A7%E5%8F%97%E3%81%91%E5%8F%96%E3%82%8D%E3%81%86\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eコマンドの出力を、シェルの変数で受け取ろう\u003c/h1\u003e\n\n\u003cp\u003eこの　浮かむ瀬　の出力を　シェル・スクリプトで受け取るには　どうすればいいのか？\u003cbr\u003e\nテキスト・ファイルを経由すれば、それはできそうだが……？\u003c/p\u003e\n\n\u003cp\u003e「関数の使用方法」 (UNIX \u0026amp; Linux コマンド・シェルスクリプト リファレンス)\u003cbr\u003e\n\u003ca href=\"http://shellscript.sunone.me/function.html\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://shellscript.sunone.me/function.html\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eこれは関数の例か。リダイレクトで変数に渡せないものか。\u003c/p\u003e\n\n\u003cp\u003e「コマンドの実行結果を変数に設定する」 (UNIX \u0026amp; Linux コマンド・シェルスクリプト リファレンス)\u003cbr\u003e\n\u003ca href=\"http://shellscript.sunone.me/variable.html#%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89%E3%81%AE%E5%AE%9F%E8%A1%8C%E7%B5%90%E6%9E%9C%E3%82%92%E5%A4%89%E6%95%B0%E3%81%AB%E8%A8%AD%E5%AE%9A%E3%81%99%E3%82%8B\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://shellscript.sunone.me/variable.html#コマンドの実行結果を変数に設定する\u003c/a\u003e\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eVAR=`command`\necho $VAR\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eへぇ。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eVAR=$(command)\necho $VAR\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eほう。$( ) の方はネストも可能らしい。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003evar=$(expr $(expr $(date '+%Y') + $(date '+%m')) + $(date '+%d'))\necho $VAR\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eなんのこっちゃ分からんが　使うこともあるかもしれない。\u003cbr\u003e\nじゃあ　こうか。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003enano tamesi3\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e#!/bin/sh\n./apery \u0026amp;\nVAR=$(echo 'usi' | ./apery)\necho '(^o^)$VAR'\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003echmod 744 tamesi3\n./tamesi3\n(^o^)$VAR\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eうーむ。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e#!/bin/sh\n./apery \u0026amp;\nVAR=$(echo 'usi' | ./apery)\necho '(^o^)${VAR}'\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e./tamesi3\n(^o^)${VAR}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eうーむ。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e#!/bin/sh\n./apery \u0026amp;\nVAR=$(echo 'usi' | ./apery)\necho '(^o^)$(VAR)'\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e./tamesi3\n(^o^)$(VAR)\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eうーむ。\u003c/p\u003e\n\n\u003cp\u003e「【 複数の変数を連結する 】」 (ITPro)\u003cbr\u003e\n\u003ca href=\"http://itpro.nikkeibp.co.jp/article/COLUMN/20060228/231154/\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://itpro.nikkeibp.co.jp/article/COLUMN/20060228/231154/\u003c/a\u003e\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e#!/bin/sh\n./apery \u0026amp;\nVAR=$(echo 'usi' | ./apery)\necho \"(^o^)${VAR}\"\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e./tamesi3\n(^o^)id name ukamuse_SDT4\n～略～\nusiok\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e\u003cstrong\u003eおーっ！\u003c/strong\u003e\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"bash-で複数行テキストを１行毎に分割し各行に対して対応する処理を書こう\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#bash-%E3%81%A7%E8%A4%87%E6%95%B0%E8%A1%8C%E3%83%86%E3%82%AD%E3%82%B9%E3%83%88%E3%82%92%EF%BC%91%E8%A1%8C%E6%AF%8E%E3%81%AB%E5%88%86%E5%89%B2%E3%81%97%E5%90%84%E8%A1%8C%E3%81%AB%E5%AF%BE%E3%81%97%E3%81%A6%E5%AF%BE%E5%BF%9C%E3%81%99%E3%82%8B%E5%87%A6%E7%90%86%E3%82%92%E6%9B%B8%E3%81%93%E3%81%86\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003ebash で複数行テキストを１行毎に分割し、各行に対して　対応する処理を書こう\u003c/h1\u003e\n\n\u003cp\u003eC#言語とかなら簡単なのに……。bashスクリプトではどうやるんだ。\u003c/p\u003e\n\n\u003cp\u003e「【bash】行ごとに処理する」 (Qiita)\u003cbr\u003e\n\u003ca href=\"http://qiita.com/kazu56/items/83340a2e284298b9e237\" class=\"autolink\" id=\"reference-1c40d9b03e24d0ea77f1\"\u003ehttp://qiita.com/kazu56/items/83340a2e284298b9e237\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003ecat コマンドって何だ？\u003c/p\u003e\n\n\u003cp\u003e「【Linuxコマンド集】3分でわかるcat コマンドの使い方」 (エンジニアの入り口)\u003cbr\u003e\n\u003ca href=\"http://eng-entrance.com/linux_command_cat\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://eng-entrance.com/linux_command_cat\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eふーん。引数で指定したファイルの内容を標準出力へ１行ずつ出力するのか。\u003cbr\u003e\nじゃあ、試しに。\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003eあれ！\u003c/strong\u003e せっかく変数で受け取ったのに、ファイル経由だと意味ないじゃないか。\u003cbr\u003e\nじゃあ、これでどうか？\u003c/p\u003e\n\n\u003cp\u003etamesi4\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e#!/bin/sh\n./apery \u0026amp;\nVAR=$(echo 'usi' | ./apery)\n\n# 区切り文字は NewLine で。\nIFS=$'\\n'\nfor line in $VAR\ndo\necho \"(^o^)$line\"\ndone\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eやっべ、PuTTY での日本語フォント表示が怪しいぜ。読めるからいいか……。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003echmod 744 tamesi4\n./tamesi4\n(^o^)id\n(^o^)ame ukamuse_SDT4\nid author Hiraoka Takuya\n\noptio\n(^o^)\n(^o^)ame Best_Book_Move type check default false\noptio\n(^o^)\n(^o^)ame Book_File type stri\n(^o^)g default book/20150503/book.bi\n(^o^)\noptio\n(^o^)\n(^o^)ame Byoyomi_Margi\n(^o^) type spi\n(^o^) default 500 mi\n(^o^) 0 max 2147483647\noptio\n(^o^)\n(^o^)ame Clear_Hash type butto\n(^o^)\noptio\n(^o^)\n(^o^)ame Draw_Ply type spi\n(^o^) default 256 mi\n(^o^) 1 max 2147483647\noptio\n(^o^)\n(^o^)ame E\n(^o^)gi\n(^o^)e_Name type stri\n(^o^)g default ukamuse_SDT4\noptio\n(^o^)\n(^o^)ame Max_Book_Ply type spi\n(^o^) default 32767 mi\n(^o^) 0 max 32767\noptio\n(^o^)\n(^o^)ame Max_Ra\n(^o^)dom_Score_Diff type spi\n(^o^) default 0 mi\n(^o^) 0 max 32600\noptio\n(^o^)\n(^o^)ame Max_Ra\n(^o^)dom_Score_Diff_Ply type spi\n(^o^) default 32767 mi\n(^o^) 0 max 32767\noptio\n(^o^)\n(^o^)ame Mi\n(^o^)_Book_Ply type spi\n(^o^) default 32767 mi\n(^o^) 0 max 32767\noptio\n(^o^)\n(^o^)ame Mi\n(^o^)_Book_Score type spi\n(^o^) default -180 mi\n(^o^) -32601 max 32601\noptio\n(^o^)\n(^o^)ame Mi\n(^o^)imum_Thi\n(^o^)ki\n(^o^)g_Time type spi\n(^o^) default 20 mi\n(^o^) 0 max 2147483647\noptio\n(^o^)\n(^o^)ame Move_Overhead type spi\n(^o^) default 30 mi\n(^o^) 0 max 5000\noptio\n(^o^)\n(^o^)ame MultiPV type spi\n(^o^) default 1 mi\n(^o^) 1 max 594\noptio\n(^o^)\n(^o^)ame Ow\n(^o^)Book type check default true\noptio\n(^o^)\n(^o^)ame Slow_Mover type spi\n(^o^) default 89 mi\n(^o^) 1 max 1000\noptio\n(^o^)\n(^o^)ame Slow_Mover_10 type spi\n(^o^) default 10 mi\n(^o^) 1 max 1000\noptio\n(^o^)\n(^o^)ame Slow_Mover_16 type spi\n(^o^) default 20 mi\n(^o^) 1 max 1000\noptio\n(^o^)\n(^o^)ame Slow_Mover_20 type spi\n(^o^) default 40 mi\n(^o^) 1 max 1000\noptio\n(^o^)\n(^o^)ame Threads type spi\n(^o^) default 2 mi\n(^o^) 1 max 256\noptio\n(^o^)\n(^o^)ame Time_Margi\n(^o^) type spi\n(^o^) default 4500 mi\n(^o^) 0 max 2147483647\noptio\n(^o^)\n(^o^)ame USI_Hash type spi\n(^o^) default 256 mi\n(^o^) 1 max 1048576\noptio\n(^o^)\n(^o^)ame USI_Po\n(^o^)der type check default true\nusiok\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eなんだこりゃ。\u003c/p\u003e\n\n\u003cp\u003e文字 n で改行されているのでは……？\u003cbr\u003e\n区切り文字の行頭に # を付けて、いったんコメントアウトしてみよう。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e#!/bin/sh\n./apery \u0026amp;\nVAR=$(echo 'usi' | ./apery)\n\n# 区切り文字は NewLine で。\n# IFS=$'\\n'\nfor line in $VAR\ndo\necho \"(^o^)$line\"\ndone\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e./tamesi4\n(^o^)id\n(^o^)name\n(^o^)ukamuse_SDT4\n(^o^)id\n(^o^)author\n(^o^)Hiraoka\n(^o^)Takuya\n(^o^)option\n(^o^)name\n(^o^)Best_Book_Move\n(^o^)type\n(^o^)check\n(^o^)default\n(^o^)false\n(^o^)option\n(^o^)name\n～以下略～\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eホワイトスペース全部　区切り文字なのか。\u003c/p\u003e\n\n\u003cp\u003e試しに \\n をダブルクォーテーションで囲んでみよう。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eIFS=$\"\\n\"\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eだめ。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eIFS=$\"\\n\"\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eだめ。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eIFS=$'\\t\\n'\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eだめ。文字 t まで消えた。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eIFS=$'\\\\n'\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eだめ。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eIFS=$\"\\\\n\"\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eだめ。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eIFS=\"\\\\n\"\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eだめ。\u003c/p\u003e\n\n\u003cp\u003e「bashのIFSに改行のみを設定するには」 (計算機と戯れる日々)\u003cbr\u003e\n\u003ca href=\"http://d.hatena.ne.jp/n9d/20090313/1236912316\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://d.hatena.ne.jp/n9d/20090313/1236912316\u003c/a\u003e\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eIFS='\n'\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eいけた。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e./tamesi4\n(^o^)id name ukamuse_SDT4\n(^o^)id author Hiraoka Takuya\n(^o^)option name Best_Book_Move type check default false\n(^o^)option name Book_File type string default book/20150503/book.bin\n(^o^)option name Byoyomi_Margin type spin default 500 min 0 max 2147483647\n～以下略～\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eじゃあ、ひとまず１行ずつには区切れた。\u003cbr\u003e\n次は、区切った１行を　半角スペースで区切りたい。\u003c/p\u003e\n\n\u003cp\u003eループをネストすると　区切り文字指定　のリセットの手間が増えそうなので、\u003cbr\u003e\n行分割した結果は配列に入れて　別ループにしたい。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"配列を使うには\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E9%85%8D%E5%88%97%E3%82%92%E4%BD%BF%E3%81%86%E3%81%AB%E3%81%AF\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e配列を使うには？\u003c/h1\u003e\n\n\u003cp\u003e「bash 配列まとめ」 (Qiita)\u003cbr\u003e\n\u003ca href=\"http://qiita.com/b4b4r07/items/e56a8e3471fb45df2f59\" class=\"autolink\" id=\"reference-f6c50ae78decdcc8773c\"\u003ehttp://qiita.com/b4b4r07/items/e56a8e3471fb45df2f59\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eなんだこの、ややこしいの。\u003cbr\u003e\n可変長配列の作り方が分からない。\u003cbr\u003e\n分割すると同時に、配列で取得することはできるだろうか？\u003c/p\u003e\n\n\u003cp\u003e「BashでStringから配列に変換してfor文で回す」 (くらげになりたい。)\u003cbr\u003e\n\u003ca href=\"http://wannabe-jellyfish.hatenablog.com/entry/2015/01/10/004554\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://wannabe-jellyfish.hatenablog.com/entry/2015/01/10/004554\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e'''\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"配列に変換\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E9%85%8D%E5%88%97%E3%81%AB%E5%A4%89%E6%8F%9B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e配列に変換\u003c/h2\u003e\n\n\u003cp\u003earray_text=(\u003ccode\u003eecho $text\u003c/code\u003e)\u003cbr\u003e\n'''\u003c/p\u003e\n\n\u003cp\u003eやってみよう。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003enano tamesi5\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e#!/bin/sh\n./apery \u0026amp;\nVAR=$(echo 'usi' | ./apery)\n\n# 改行で分割して配列に入れる\nLINES=(`echo $VAR`)\nfor line in $LINES\ndo\necho \"(^o^)$line\"\ndone\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e\u003cstrong\u003eあれ？\u003c/strong\u003e 今まで　シングル・クォーテーションと　バック・クォーテーションを間違えていたのだろうか？\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003echmod 744 tamesi5\n./tamesi5\n./tamesi5: 6: ./tamesi5: Syntax error: \"(\" unexpected\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eこれの間違いなんじゃないか？\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eLINES=$(\"echo $VAR\")\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eうわ、なんか　出力がおかしい。こうか。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eLINES=$(echo $VAR)\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e./tamesi5\n(^o^)id\n(^o^)name\n(^o^)ukamuse_SDT4\n(^o^)id\n(^o^)author\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e区切り文字は echo でも設定しないといけないのか……？\u003c/p\u003e\n\n\u003cp\u003eあれ、tamesi5 が掴まれたままみたいだ。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003ekill %1\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e止めてはみたが。うーむ。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003els -an\n～中略～\n-rwxr--r-- 1 0 0    156 Mar  5 20:01 tamesi5\n-rw-r--r-- 1 0 0   1024 Mar  5 20:01 .tamesi5.swp\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eロック・ファイルが残っているんじゃないか？　消していいのだろうか。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003erm .tamesi5.swp\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003etamesi5 編集。これでどうか。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e# 区切り文字IFSは改行だけで分割して配列に入れる\nIFS='\n'\nLINES=$(echo $VAR)\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eなんか出力結果が１行につながってしまった。\u003cbr\u003e\nじゃあ、配列への要素追加を使ってみよう。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e#!/bin/sh\n./apery \u0026amp;\nVAR=$(echo 'usi' | ./apery)\n\n# 行分割して配列に入れる\nLINES=()\n# 区切り文字は 改行だけで。\nIFS='\n'\nfor line in $VAR\ndo\nLINES=(\"${LINES[@]}\" $line)\ndone\n\nfor line in $LINES\ndo\necho \"(^o^)$line\"\ndone\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e./tamesi5\n./tamesi5: 6: ./tamesi5: Syntax error: \"(\" unexpected\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eうーむ。\u003c/p\u003e\n\n\u003cp\u003e「bashとかshで配列を扱う。」 (自分の仕事を憎むには人生は余りにも短い)\u003cbr\u003e\n\u003ca href=\"http://garapon.hatenablog.com/entry/20100129/1264780520\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://garapon.hatenablog.com/entry/20100129/1264780520\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003esh には配列が無いので、 bash を使うのがいいらしい。\u003cbr\u003e\nじゃあファイルの冒頭を\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e#!/bin/sh\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eから\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e#!/bin/bash\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eに変更する。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e./tamesi5\n(^o^)id name ukamuse_SDT4\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e１行だけ返ってきた。\u003cbr\u003e\n配列の要素数を確認しよう。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eecho ${#array[@]}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e./tamesi5\n0\n(^o^)id name ukamuse_SDT4\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eうーむ。\u003cbr\u003e\nこうか。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eecho ${#LINES[@]}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e./tamesi5\n26\n(^o^)id name ukamuse_SDT4\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e配列に分割するところまではいけたのだろうか。\u003c/p\u003e\n\n\u003cp\u003e「配列のデータを参照する」 (Qiita)\u003cbr\u003e\n\u003ca href=\"http://qiita.com/b4b4r07/items/e56a8e3471fb45df2f59\" class=\"autolink\"\u003ehttp://qiita.com/b4b4r07/items/e56a8e3471fb45df2f59\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eじゃあ、こうか。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003ei=0\nfor line in ${LINES[@]}\ndo\n    echo \"(^q^)[$i] = $line\"\n    let i++\ndone\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e./tamesi5\n26\n(^q^)[0] = id name ukamuse_SDT4\n(^q^)[1] = id author Hiraoka Takuya\n(^q^)[2] = option name Best_Book_Move type check default false\n(^q^)[3] = option name Book_File type string default book/20150503/book.bin\n(^q^)[4] = option name Byoyomi_Margin type spin default 500 min 0 max 2147483647\n(^q^)[5] = option name Clear_Hash type button\n(^q^)[6] = option name Draw_Ply type spin default 256 min 1 max 2147483647\n(^q^)[7] = option name Engine_Name type string default ukamuse_SDT4\n(^q^)[8] = option name Max_Book_Ply type spin default 32767 min 0 max 32767\n(^q^)[9] = option name Max_Random_Score_Diff type spin default 0 min 0 max 32600\n(^q^)[10] = option name Max_Random_Score_Diff_Ply type spin default 32767 min 0 max 32767\n(^q^)[11] = option name Min_Book_Ply type spin default 32767 min 0 max 32767\n(^q^)[12] = option name Min_Book_Score type spin default -180 min -32601 max 32601\n(^q^)[13] = option name Minimum_Thinking_Time type spin default 20 min 0 max 2147483647\n(^q^)[14] = option name Move_Overhead type spin default 30 min 0 max 5000\n(^q^)[15] = option name MultiPV type spin default 1 min 1 max 594\n(^q^)[16] = option name OwnBook type check default true\n(^q^)[17] = option name Slow_Mover type spin default 89 min 1 max 1000\n(^q^)[18] = option name Slow_Mover_10 type spin default 10 min 1 max 1000\n(^q^)[19] = option name Slow_Mover_16 type spin default 20 min 1 max 1000\n(^q^)[20] = option name Slow_Mover_20 type spin default 40 min 1 max 1000\n(^q^)[21] = option name Threads type spin default 2 min 1 max 256\n(^q^)[22] = option name Time_Margin type spin default 4500 min 0 max 2147483647\n(^q^)[23] = option name USI_Hash type spin default 256 min 1 max 1048576\n(^q^)[24] = option name USI_Ponder type check default true\n(^q^)[25] = usiok\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eよし！\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"配列の要素の中身をスペース区切りにしよう\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E9%85%8D%E5%88%97%E3%81%AE%E8%A6%81%E7%B4%A0%E3%81%AE%E4%B8%AD%E8%BA%AB%E3%82%92%E3%82%B9%E3%83%9A%E3%83%BC%E3%82%B9%E5%8C%BA%E5%88%87%E3%82%8A%E3%81%AB%E3%81%97%E3%82%88%E3%81%86\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e配列の要素の中身を、スペース区切りにしよう\u003c/h1\u003e\n\n\u003cp\u003eこれでどうか？\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003enano tamesi6\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e#!/bin/bash\n./apery \u0026amp;\nVAR=$(echo 'usi' | ./apery)\n\n# 行分割して配列に入れる\nLINES=()\n# 区切り文字は 改行だけで\nIFS='\n'\nfor line in $VAR\ndo\nLINES=(\"${LINES[@]}\" $line)\ndone\n# echo ${#LINES[@]}\n\niLine=0\nfor line in ${LINES[@]}\ndo\n    echo \"(^q^)[$iLine] = $line\"\n\n    # 行分割して配列に入れる\n    TOKENS=()\n    # 区切り文字は 半角スペースだけで\n    IFS=' '\n\n    iToken=0\n    for token in $line\n    do\n        TOKENS=(\"${TOKENS[@]}\" $token)\n        echo \"(^q^)[$iLine][$iToken] = $token\"\n        let iToken++\n    done\n\n    let iLine++\ndone\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003echmod 744 tamesi6\n./tamesi6\n(^q^)[0] = id name ukamuse_SDT4\n(^q^)[0][0] = id\n(^q^)[0][1] = name\n(^q^)[0][2] = ukamuse_SDT4\n(^q^)[1] = id author Hiraoka Takuya\n(^q^)[1][0] = id\n(^q^)[1][1] = author\n(^q^)[1][2] = Hiraoka\n(^q^)[1][3] = Takuya\n(^q^)[2] = option name Best_Book_Move type check default false\n(^q^)[2][0] = option\n(^q^)[2][1] = name\n(^q^)[2][2] = Best_Book_Move\n(^q^)[2][3] = type\n(^q^)[2][4] = check\n(^q^)[2][5] = default\n(^q^)[2][6] = false\n(^q^)[3] = option name Book_File type string default book/20150503/book.bin\n(^q^)[3][0] = option\n(^q^)[3][1] = name\n(^q^)[3][2] = Book_File\n(^q^)[3][3] = type\n(^q^)[3][4] = string\n(^q^)[3][5] = default\n(^q^)[3][6] = book/20150503/book.bin\n(^q^)[4] = option name Byoyomi_Margin type spin default 500 min 0 max 2147483647\n(^q^)[4][0] = option\n(^q^)[4][1] = name\n(^q^)[4][2] = Byoyomi_Margin\n(^q^)[4][3] = type\n(^q^)[4][4] = spin\n(^q^)[4][5] = default\n(^q^)[4][6] = 500\n(^q^)[4][7] = min\n(^q^)[4][8] = 0\n(^q^)[4][9] = max\n(^q^)[4][10] = 2147483647\n(^q^)[5] = option name Clear_Hash type button\n(^q^)[5][0] = option\n(^q^)[5][1] = name\n(^q^)[5][2] = Clear_Hash\n(^q^)[5][3] = type\n(^q^)[5][4] = button\n(^q^)[6] = option name Draw_Ply type spin default 256 min 1 max 2147483647\n(^q^)[6][0] = option\n(^q^)[6][1] = name\n(^q^)[6][2] = Draw_Ply\n(^q^)[6][3] = type\n(^q^)[6][4] = spin\n(^q^)[6][5] = default\n(^q^)[6][6] = 256\n(^q^)[6][7] = min\n(^q^)[6][8] = 1\n(^q^)[6][9] = max\n(^q^)[6][10] = 2147483647\n(^q^)[7] = option name Engine_Name type string default ukamuse_SDT4\n(^q^)[7][0] = option\n(^q^)[7][1] = name\n(^q^)[7][2] = Engine_Name\n(^q^)[7][3] = type\n(^q^)[7][4] = string\n(^q^)[7][5] = default\n(^q^)[7][6] = ukamuse_SDT4\n(^q^)[8] = option name Max_Book_Ply type spin default 32767 min 0 max 32767\n(^q^)[8][0] = option\n(^q^)[8][1] = name\n(^q^)[8][2] = Max_Book_Ply\n(^q^)[8][3] = type\n(^q^)[8][4] = spin\n(^q^)[8][5] = default\n(^q^)[8][6] = 32767\n(^q^)[8][7] = min\n(^q^)[8][8] = 0\n(^q^)[8][9] = max\n(^q^)[8][10] = 32767\n(^q^)[9] = option name Max_Random_Score_Diff type spin default 0 min 0 max 32600\n(^q^)[9][0] = option\n(^q^)[9][1] = name\n(^q^)[9][2] = Max_Random_Score_Diff\n(^q^)[9][3] = type\n(^q^)[9][4] = spin\n(^q^)[9][5] = default\n(^q^)[9][6] = 0\n(^q^)[9][7] = min\n(^q^)[9][8] = 0\n(^q^)[9][9] = max\n(^q^)[9][10] = 32600\n(^q^)[10] = option name Max_Random_Score_Diff_Ply type spin default 32767 min 0 max 32767\n(^q^)[10][0] = option\n(^q^)[10][1] = name\n(^q^)[10][2] = Max_Random_Score_Diff_Ply\n(^q^)[10][3] = type\n(^q^)[10][4] = spin\n(^q^)[10][5] = default\n(^q^)[10][6] = 32767\n(^q^)[10][7] = min\n(^q^)[10][8] = 0\n(^q^)[10][9] = max\n(^q^)[10][10] = 32767\n(^q^)[11] = option name Min_Book_Ply type spin default 32767 min 0 max 32767\n(^q^)[11][0] = option\n(^q^)[11][1] = name\n(^q^)[11][2] = Min_Book_Ply\n(^q^)[11][3] = type\n(^q^)[11][4] = spin\n(^q^)[11][5] = default\n(^q^)[11][6] = 32767\n(^q^)[11][7] = min\n(^q^)[11][8] = 0\n(^q^)[11][9] = max\n(^q^)[11][10] = 32767\n(^q^)[12] = option name Min_Book_Score type spin default -180 min -32601 max 32601\n(^q^)[12][0] = option\n(^q^)[12][1] = name\n(^q^)[12][2] = Min_Book_Score\n(^q^)[12][3] = type\n(^q^)[12][4] = spin\n(^q^)[12][5] = default\n(^q^)[12][6] = -180\n(^q^)[12][7] = min\n(^q^)[12][8] = -32601\n(^q^)[12][9] = max\n(^q^)[12][10] = 32601\n(^q^)[13] = option name Minimum_Thinking_Time type spin default 20 min 0 max 2147483647\n(^q^)[13][0] = option\n(^q^)[13][1] = name\n(^q^)[13][2] = Minimum_Thinking_Time\n(^q^)[13][3] = type\n(^q^)[13][4] = spin\n(^q^)[13][5] = default\n(^q^)[13][6] = 20\n(^q^)[13][7] = min\n(^q^)[13][8] = 0\n(^q^)[13][9] = max\n(^q^)[13][10] = 2147483647\n(^q^)[14] = option name Move_Overhead type spin default 30 min 0 max 5000\n(^q^)[14][0] = option\n(^q^)[14][1] = name\n(^q^)[14][2] = Move_Overhead\n(^q^)[14][3] = type\n(^q^)[14][4] = spin\n(^q^)[14][5] = default\n(^q^)[14][6] = 30\n(^q^)[14][7] = min\n(^q^)[14][8] = 0\n(^q^)[14][9] = max\n(^q^)[14][10] = 5000\n(^q^)[15] = option name MultiPV type spin default 1 min 1 max 594\n(^q^)[15][0] = option\n(^q^)[15][1] = name\n(^q^)[15][2] = MultiPV\n(^q^)[15][3] = type\n(^q^)[15][4] = spin\n(^q^)[15][5] = default\n(^q^)[15][6] = 1\n(^q^)[15][7] = min\n(^q^)[15][8] = 1\n(^q^)[15][9] = max\n(^q^)[15][10] = 594\n(^q^)[16] = option name OwnBook type check default true\n(^q^)[16][0] = option\n(^q^)[16][1] = name\n(^q^)[16][2] = OwnBook\n(^q^)[16][3] = type\n(^q^)[16][4] = check\n(^q^)[16][5] = default\n(^q^)[16][6] = true\n(^q^)[17] = option name Slow_Mover type spin default 89 min 1 max 1000\n(^q^)[17][0] = option\n(^q^)[17][1] = name\n(^q^)[17][2] = Slow_Mover\n(^q^)[17][3] = type\n(^q^)[17][4] = spin\n(^q^)[17][5] = default\n(^q^)[17][6] = 89\n(^q^)[17][7] = min\n(^q^)[17][8] = 1\n(^q^)[17][9] = max\n(^q^)[17][10] = 1000\n(^q^)[18] = option name Slow_Mover_10 type spin default 10 min 1 max 1000\n(^q^)[18][0] = option\n(^q^)[18][1] = name\n(^q^)[18][2] = Slow_Mover_10\n(^q^)[18][3] = type\n(^q^)[18][4] = spin\n(^q^)[18][5] = default\n(^q^)[18][6] = 10\n(^q^)[18][7] = min\n(^q^)[18][8] = 1\n(^q^)[18][9] = max\n(^q^)[18][10] = 1000\n(^q^)[19] = option name Slow_Mover_16 type spin default 20 min 1 max 1000\n(^q^)[19][0] = option\n(^q^)[19][1] = name\n(^q^)[19][2] = Slow_Mover_16\n(^q^)[19][3] = type\n(^q^)[19][4] = spin\n(^q^)[19][5] = default\n(^q^)[19][6] = 20\n(^q^)[19][7] = min\n(^q^)[19][8] = 1\n(^q^)[19][9] = max\n(^q^)[19][10] = 1000\n(^q^)[20] = option name Slow_Mover_20 type spin default 40 min 1 max 1000\n(^q^)[20][0] = option\n(^q^)[20][1] = name\n(^q^)[20][2] = Slow_Mover_20\n(^q^)[20][3] = type\n(^q^)[20][4] = spin\n(^q^)[20][5] = default\n(^q^)[20][6] = 40\n(^q^)[20][7] = min\n(^q^)[20][8] = 1\n(^q^)[20][9] = max\n(^q^)[20][10] = 1000\n(^q^)[21] = option name Threads type spin default 2 min 1 max 256\n(^q^)[21][0] = option\n(^q^)[21][1] = name\n(^q^)[21][2] = Threads\n(^q^)[21][3] = type\n(^q^)[21][4] = spin\n(^q^)[21][5] = default\n(^q^)[21][6] = 2\n(^q^)[21][7] = min\n(^q^)[21][8] = 1\n(^q^)[21][9] = max\n(^q^)[21][10] = 256\n(^q^)[22] = option name Time_Margin type spin default 4500 min 0 max 2147483647\n(^q^)[22][0] = option\n(^q^)[22][1] = name\n(^q^)[22][2] = Time_Margin\n(^q^)[22][3] = type\n(^q^)[22][4] = spin\n(^q^)[22][5] = default\n(^q^)[22][6] = 4500\n(^q^)[22][7] = min\n(^q^)[22][8] = 0\n(^q^)[22][9] = max\n(^q^)[22][10] = 2147483647\n(^q^)[23] = option name USI_Hash type spin default 256 min 1 max 1048576\n(^q^)[23][0] = option\n(^q^)[23][1] = name\n(^q^)[23][2] = USI_Hash\n(^q^)[23][3] = type\n(^q^)[23][4] = spin\n(^q^)[23][5] = default\n(^q^)[23][6] = 256\n(^q^)[23][7] = min\n(^q^)[23][8] = 1\n(^q^)[23][9] = max\n(^q^)[23][10] = 1048576\n(^q^)[24] = option name USI_Ponder type check default true\n(^q^)[24][0] = option\n(^q^)[24][1] = name\n(^q^)[24][2] = USI_Ponder\n(^q^)[24][3] = type\n(^q^)[24][4] = check\n(^q^)[24][5] = default\n(^q^)[24][6] = true\n(^q^)[25] = usiok\n(^q^)[25][0] = usiok\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e\u003cstrong\u003eいけてるか。\u003c/strong\u003e\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"サブルーチンにしよう\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%B5%E3%83%96%E3%83%AB%E3%83%BC%E3%83%81%E3%83%B3%E3%81%AB%E3%81%97%E3%82%88%E3%81%86\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eサブルーチンにしよう\u003c/h1\u003e\n\n\u003cp\u003e１行を分割して配列に入れる部分は　サブルーチンにして切り出そう。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003enano tamesi7\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e#!/bin/bash\n\n# 一行をトークン区切り配列へ\n# $1...line\nLine_To_Tokens(){\n    TOKENS=()\n    # 区切り文字は 半角スペースだけで\n    IFS=' '\n\n    iToken=0\n    for token in $1\n    do\n        TOKENS=(\"${TOKENS[@]}\" $token)\n        let iToken++\n    done\n\n    # せっかく配列にいれても標準出力へ返すのか……\n    echo ${TOKENS[@]}\n}\n\n./apery \u0026amp;\nVAR=$(echo 'usi' | ./apery)\n\n# 行分割して配列に入れる\nLINES=()\n# 区切り文字は 改行だけで\nIFS='\n'\nfor line in $VAR\ndo\nLINES=(\"${LINES[@]}\" $line)\ndone\n\niLine=0\nfor line in ${LINES[@]}\ndo\n    # 行分割して配列に入れる\n    TOKENS=(`Line_To_Tokens $line`)\n\n    echo \"(^q^)[$iLine] = ${TOKENS[@]}\"\n\n    let iLine++\ndone\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003echmod 744 tamesi7\n./tamesi7\n(^q^)[0] = id name ukamuse_SDT4\n(^q^)[1] = id author Hiraoka Takuya\n(^q^)[2] = option name Best_Book_Move type check default false\n(^q^)[3] = option name Book_File type string default book/20150503/book.bin\n(^q^)[4] = option name Byoyomi_Margin type spin default 500 min 0 max 2147483647\n(^q^)[5] = option name Clear_Hash type button\n(^q^)[6] = option name Draw_Ply type spin default 256 min 1 max 2147483647\n(^q^)[7] = option name Engine_Name type string default ukamuse_SDT4\n(^q^)[8] = option name Max_Book_Ply type spin default 32767 min 0 max 32767\n(^q^)[9] = option name Max_Random_Score_Diff type spin default 0 min 0 max 32600\n(^q^)[10] = option name Max_Random_Score_Diff_Ply type spin default 32767 min 0 max 32767\n(^q^)[11] = option name Min_Book_Ply type spin default 32767 min 0 max 32767\n(^q^)[12] = option name Min_Book_Score type spin default -180 min -32601 max 32601\n(^q^)[13] = option name Minimum_Thinking_Time type spin default 20 min 0 max 2147483647\n(^q^)[14] = option name Move_Overhead type spin default 30 min 0 max 5000\n(^q^)[15] = option name MultiPV type spin default 1 min 1 max 594\n(^q^)[16] = option name OwnBook type check default true\n(^q^)[17] = option name Slow_Mover type spin default 89 min 1 max 1000\n(^q^)[18] = option name Slow_Mover_10 type spin default 10 min 1 max 1000\n(^q^)[19] = option name Slow_Mover_16 type spin default 20 min 1 max 1000\n(^q^)[20] = option name Slow_Mover_20 type spin default 40 min 1 max 1000\n(^q^)[21] = option name Threads type spin default 2 min 1 max 256\n(^q^)[22] = option name Time_Margin type spin default 4500 min 0 max 2147483647\n(^q^)[23] = option name USI_Hash type spin default 256 min 1 max 1048576\n(^q^)[24] = option name USI_Ponder type check default true\n(^q^)[25] = usiok\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eよし、意図した通りには動いてるだろ。サブルーチン化した嬉しみが少ないが……。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"仕分けしよう\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E4%BB%95%E5%88%86%E3%81%91%E3%81%97%E3%82%88%E3%81%86\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e仕分けしよう\u003c/h1\u003e\n\n\u003cp\u003eここで、各行の１単語目（１トークン目）を見ると\u003c/p\u003e\n\n\u003cp\u003e-id\u003cbr\u003e\n-option\u003cbr\u003e\n-usiok\u003c/p\u003e\n\n\u003cp\u003eのいずれかであることが分かるだろう。ここで取り合えず id と option は無視して、usiok があるかどうかだけ調べるルーチンを書こう。\u003c/p\u003e\n\n\u003cp\u003eusiok があれば、浮かむ瀬に isready という文字列を送るものとする。\u003c/p\u003e\n\n\u003cp\u003eテキストの 1行目を取得するには、\u003c/p\u003e\n\n\u003cp\u003e「How do I read first line using cat」 (stack overflow)\u003cbr\u003e\n\u003ca href=\"http://stackoverflow.com/questions/6114119/how-do-i-read-first-line-using-cat\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://stackoverflow.com/questions/6114119/how-do-i-read-first-line-using-cat\u003c/a\u003e\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003ehead -n 1 file.txt\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eを使えばいいのだろうか。head コマンドの動作確認をしてみよう。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eFIRST_TOKEN=(`head -n 1 ${TOKENS[@]}`)\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e(^q^)[1] =\nhead: cannot open 'option name Best_Book_Move type check default false' for reading: No such file or directory\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eファイルじゃないとダメなんじゃないだろうか？\u003c/p\u003e\n\n\u003cp\u003e「【 文字列を抜き出す「cut」 】」 (ITPro)\u003cbr\u003e\n\u003ca href=\"http://itpro.nikkeibp.co.jp/article/COLUMN/20060228/231159/\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://itpro.nikkeibp.co.jp/article/COLUMN/20060228/231159/\u003c/a\u003e\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eFIRST_TOKEN=(`echo ${TOKENS[@]} | cut -d \"\n\"`)\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e(^q^)[0] =\ncut: you must specify a list of bytes, characters, or fields\nTry 'cut --help' for more information.\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eうーむ。\u003cbr\u003e\nシェルのコマンドは　ほとんど　標準入出力　を介すのだろうか。\u003cbr\u003e\nだったら　素直に　ファイルを経由した方がいいのか？\u003cbr\u003e\n書き直してみよう。\u003c/p\u003e\n\n\u003cp\u003eecho は複数行は出力してくれないんだろうか？\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003enano tamesi8\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e#!/bin/bash\n\n# 引数1をスペース区切りにし、最初のトークンを出力\n# $1...line\nLine_To_FirstToken(){\n    TOKENS=()\n    # 区切り文字は 半角スペースだけで\n    IFS=' '\n\n    for token in $1\n    do\n        echo $token\n        return 0\n    done\n}\n\n./apery \u0026amp;\nVAR=$(echo 'usi' | ./apery)\n\n# 行分割して配列に入れる\nLINES=()\n# 区切り文字は 改行だけで\nIFS='\n'\nfor line in $VAR\ndo\nLINES=(\"${LINES[@]}\" $line)\ndone\n\niLine=0\nfor line in ${LINES[@]}\ndo\n    # 行分割して配列に入れる\n    FIRST_TOKEN=(`Line_To_FirstToken $line`)\n\n    echo \"(^q^)[$iLine] = $FIRST_TOKEN\"\n\n    let iLine++\ndone\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003echmod 744 tamesi8\n./tamesi8\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e./tamesi8\n(^q^)[0] = id\n(^q^)[1] = id\n(^q^)[2] = option\n(^q^)[3] = option\n(^q^)[4] = option\n(^q^)[5] = option\n(^q^)[6] = option\n(^q^)[7] = option\n(^q^)[8] = option\n(^q^)[9] = option\n(^q^)[10] = option\n(^q^)[11] = option\n(^q^)[12] = option\n(^q^)[13] = option\n(^q^)[14] = option\n(^q^)[15] = option\n(^q^)[16] = option\n(^q^)[17] = option\n(^q^)[18] = option\n(^q^)[19] = option\n(^q^)[20] = option\n(^q^)[21] = option\n(^q^)[22] = option\n(^q^)[23] = option\n(^q^)[24] = option\n(^q^)[25] = usiok\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eとりあえず 最初のトークンは取れるものの、すっきりしない。\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003ebash じゃなくて、将棋所相当のプログラムを C# で書いて 浮かむ瀬 は別プロセスで動かして通信したらいいんじゃないか。\u003c/strong\u003e\u003c/p\u003e\n\n\u003cp\u003eじゃあ、mono をインストールした方がいいのか？\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"ubuntu-に-mono-をインストールしよう\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#ubuntu-%E3%81%AB-mono-%E3%82%92%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%97%E3%82%88%E3%81%86\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eUbuntu に mono をインストールしよう\u003c/h1\u003e\n\n\u003cp\u003eLinuxではC#は人気ないのか。\u003c/p\u003e\n\n\u003cp\u003e「Compiling Mono on Linux」 (Mono)\u003cbr\u003e\n\u003ca href=\"http://www.mono-project.com/docs/compiling-mono/linux/\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://www.mono-project.com/docs/compiling-mono/linux/\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eこんなコマンド叩いたらいいんだろうか？\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003esudo apt-get install git autoconf libtool automake build-essential mono-devel gettext cmake\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eなんか動いた。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eAfter this operation, 132 MB of additional disk space will be used.\nDo you want to continue? [Y/n]\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eじゃあ、どんどん進んでいこう。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003edone.\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eもうインストール終わった。\u003cbr\u003e\nじゃあ C#言語で ハローワールドを書いてみるか。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003enano ShogiServer.cs\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003enamespace\u003c/span\u003e \u003cspan class=\"nn\"\u003eShogiServer\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eProgram\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003estatic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eMain\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e[]\u003c/span\u003e \u003cspan class=\"n\"\u003eargs\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eConsole\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWriteLine\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"hello, world\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003enano は C# 書いても色ついてくれないのか。\u003c/p\u003e\n\n\u003cp\u003eどうやってコンパイルするんだ。\u003cbr\u003e\nというか　いつまで　コマンドラインなんだ。GUI は入れるべきか。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eman mono\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eだめだ、行数が多すぎる。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003emono --version\nMono JIT compiler version 4.2.1 (Debian 4.2.1.102+dfsg2-7ubuntu4)\nCopyright (C) 2002-2014 Novell, Inc, Xamarin Inc and Contributors. www.mono-project.com\n        TLS:           __thread\n        SIGSEGV:       altstack\n        Notifications: epoll\n        Architecture:  amd64\n        Disabled:      none\n        Misc:          softdebug\n        LLVM:          supported, not enabled.\n        GC:            sgen\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eおっ、バージョン 4 が入ったぜ。助かるぜ。\u003c/p\u003e\n\n\u003cp\u003e「csc.exe を使用したコマンド ラインからのビルド」 (MSDN)\u003cbr\u003e\n\u003ca href=\"https://msdn.microsoft.com/ja-jp/library/78f4aasd.aspx\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://msdn.microsoft.com/ja-jp/library/78f4aasd.aspx\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eC# のコンパイラは csc なのだろうか？\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003ecsc ShogiServer.cs\nThe program 'csc' is currently not installed. You can install it by typing:\napt install chicken-bin\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e入ってないし……。\u003c/p\u003e\n\n\u003cp\u003e「Xamarinの基盤となっている「Mono」と、C#コンパイラー「mcs」」 (buildinsider)\u003cbr\u003e\n\u003ca href=\"http://www.buildinsider.net/mobile/insidexamarin/02\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://www.buildinsider.net/mobile/insidexamarin/02\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eC# のコンパイラは mcs なのだろうか？\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003emcs ShogiServer.cs\nls\n～略～\nShogiServer.cs\nShogiServer.exe\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e.exe なんかできているが、Linuxで動くのか？\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e./ShogiServer.exe\nhello, world\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e\u003cstrong\u003eへぇ！\u003c/strong\u003e\u003c/p\u003e\n\n\u003cp\u003eC#のMakefile とか書けるのだろうか……。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"サンプルプログラムを作ろう\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%A0%E3%82%92%E4%BD%9C%E3%82%8D%E3%81%86\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eサンプル・プログラムを作ろう\u003c/h2\u003e\n\n\u003cp\u003eじゃあ、ひとまず、標準入力で \"usi\" が飛んできて、\"usiok\" を返すというサンプル・プログラムを組んでみるか。\u003c/p\u003e\n\n\u003cp\u003etamesi9\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eusing System;\n\nnamespace ShogiServer\n{\n    class Program\n    {\n        static void Main(string[] args)\n        {\n            Console.WriteLine(\"hello, world\");\n            Console.WriteLine(\"args.Length=\" + args.Length);\n            int i = 0;\n            foreach (string arg in args)\n            {\n                Console.WriteLine(\"args[i]=\" + args[i]);\n                i++;\n            }\n        }\n    }\n}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003emcs tamesi9\n./tamesi9.exe\nhello, world\nargs.Length=0\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eじゃあ、\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eecho 'usi' | ./tamesi9.exe\nhello, world\nargs.Length=0\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eあー、コマンドライン引数と　標準入力は　違うのか。\u003cbr\u003e\nじゃあ、\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e./tamesi9.exe abc def ghi\nhello, world\nargs.Length=3\nargs[i]=abc\nargs[i]=def\nargs[i]=ghi\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eそうか。\u003cbr\u003e\nじゃあ、こうか。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003enano tamesi10\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eusing System;\n\nnamespace ShogiServer\n{\n    class Program\n    {\n        static void Main(string[] args)\n        {\n            Console.WriteLine(\"start a loop.\");\n            for (;;)\n            {\n                string line = Console.ReadLine();\n                switch (line)\n                {\n                    case \"quit\": break;\n                    default: Console.WriteLine(\"(^q^)\"+line); break;\n                }\n            }\n        }\n    }\n}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003emcs tamesi10\n./tamesi10.exe\nstart a loop.\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eよし。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eabc\n(^q^)abc\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eよし。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003equit\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eあらっ。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eabc\n(^q^)\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eあらら。\u003cbr\u003e\n[Ctrl]+[C]\u003c/p\u003e\n\n\u003cp\u003eあーそうか、switch文 で break しても switch文 を抜けるだけで for文 を抜けないんだ。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003erm tamesi10\nnano tamesi10\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eこう。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eusing System;\n\nnamespace ShogiServer\n{\n    class Program\n    {\n        static void Main(string[] args)\n        {\n            Console.WriteLine(\"start a loop.\");\n            for (;;)\n            {\n                string line = Console.ReadLine();\n                switch (line)\n                {\n                    case \"quit\": goto gt_EndLoop;\n                    default: Console.WriteLine(\"(^q^)\"+line); break;\n                }\n            }\n            gt_EndLoop:\n            Console.WriteLine(\"finished a loop.\");\n        }\n    }\n}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003emcs tamesi10\n./tamesi10.exe\nstart a loop.\nabc\n(^q^)abc\nquit\nfinished a loop.\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eこんどは　うまくいった。じゃあ、このプログラムをバックグラウンドで走らせられるだろうか。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e./tamesi10.exe \u0026amp;\n[1] 14279\nstart a loop.\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003ejobs\n[1]+  Stopped                 ./tamesi10.exe\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eこの、Stopped というのが分からない。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eecho 'usi' | ./tamesi10.exe\n(^q^)\n(^q^)\n(^q^)\n(^q^)\n(^q^)\n(^q^)\n(^q^)\n(^q^)\n(^q^)\n(^q^)\n(^q^)\n(^q^)\n(^q^)\n(^q^)\n(^q^)\n～略～\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e[Ctrl]+[C]\u003c/p\u003e\n\n\u003cp\u003eなんということだ。\u003c/p\u003e\n\n\u003cp\u003eどういう理屈だ。\u003c/p\u003e\n\n\u003cp\u003eswitch文に次の１行を足してはどうか？\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003ecase \"\": break;\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e./tamesi10.exe \u0026amp;\n[3] 14317\nstart a loop.\njobs\n[1]   Stopped                 ./tamesi10.exe\n[2]-  Stopped                 nano tamesi10\n[3]+  Stopped                 ./tamesi10.exe\nkill %1\njobs\n[1]   Terminated              ./tamesi10.exe\n[2]-  Stopped                 nano tamesi10\n[3]+  Stopped                 ./tamesi10.exe\necho 'usi' | ./tamesi10.exe\n(^q^)\n(^q^)\n(^q^)\n(^q^)\n(^q^)\n(^q^)\n(^q^)\n(^q^)\n(^q^)\n(^q^)\n(^q^)\n(^q^)\n～中略～\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eだめか。\u003c/p\u003e\n\n\u003cp\u003eReadLine() を止めて、Read() にしてみる。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eusing System;\n\nnamespace ShogiServer\n{\n    class Program\n    {\n        static void Main(string[] args)\n        {\n            Console.WriteLine(\"start a loop.\");\n            for (;;)\n            {\n                int ch = Console.Read();\n                Console.WriteLine(\"(^q^)ch=\" + ch);\n            }\n            Console.WriteLine(\"finished a loop.\");\n        }\n    }\n}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003emcs tamesi10\ntamesi10(15,13): warning CS0162: Unreachable code detected\nCompilation succeeded - 1 warning(s)\n./tamesi10.exe \u0026amp;\n[3] 14482\nstart a loop.\necho 'usi' | ./tamesi10.exe\n(^q^)ch=-1\n(^q^)ch=-1\n(^q^)ch=-1\n(^q^)ch=-1\n(^q^)ch=-1\n(^q^)ch=-1\n(^q^)ch=-1\n(^q^)ch=-1\n(^q^)ch=-1\n(^q^)ch=-1\n(^q^)ch=-1\n(^q^)ch=-1\n(^q^)ch=-1\n(^q^)ch=-1\n(^q^)ch=-1\n(^q^)ch=-1\n(^q^)ch=-1\n(^q^)ch=-1\n(^q^)ch=-1\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eうーむ、-1 って何だ。\u003cbr\u003e\nじゃあ、-1 は省いて。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eusing System;\n\nnamespace ShogiServer\n{\n    class Program\n    {\n        static void Main(string[] args)\n        {\n            Console.WriteLine(\"start a loop.\");\n            for (;;)\n            {\n                int ch = Console.Read();\n                if (-1 != ch)\n                {\n                    Console.WriteLine(\"(^q^)ch=\" + ch);\n                }\n            }\n            Console.WriteLine(\"finished a loop.\");\n        }\n    }\n}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eところでいままで、出力が入力と被っているところがあった。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eroot@tk2-217-18401:/home/アカウント名/shogi/ukamuse_sdt4/bin# start a loop.\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eこれ　だめなんじゃないだろうか。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eecho 'usi' | ./tamesi10.exe\nstart a loop.\n(^q^)ch=117\n(^q^)ch=115\n(^q^)ch=105\n(^q^)ch=10\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eさて、今度はどうか。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eecho 'abc' | ./tamesi10.exe\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e反応が返ってこない。\u003cbr\u003e\nどういう待機状態なのか。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eecho 'abc' | ./tamesi10.exe\nstart a loop.\n(^q^)ch=97\n(^q^)ch=98\n(^q^)ch=99\n(^q^)ch=10\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eどうも、標準入力は１回しか効かないのか？ \u003cstrong\u003e１回出力すると、２回目の入力は効かないとかルールでもあるのだろうか？\u003c/strong\u003e \u003c/p\u003e\n\n\u003cp\u003e別のメソッドを使ってみよう。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eusing System;\n\nnamespace ShogiServer\n{\n    class Program\n    {\n        static void Main(string[] args)\n        {\n            Console.WriteLine(\"start a loop.\");\n            for (;;)\n            {\n                string line = Console.In.ReadLine();\n                switch (line)\n                {\n                    case \"quit\": goto gt_EndLoop;\n                    default: Console.WriteLine(\"(^q^)line=\" + line); break;\n                }\n            }\n            gt_EndLoop:\n            Console.WriteLine(\"finished a loop.\");\n        }\n    }\n}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e./tamesi10.exe \u0026amp;\necho 'usi' | ./tamesi10.exe\n(^q^)line=\n(^q^)line=\n(^q^)line=\n(^q^)line=\n(^q^)line=\n(^q^)line=\n(^q^)line=\n～中略～\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eうーむ。null を弾くとどうか？\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003erm tamesi10\nnano tamesi10\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eusing System;\n\nnamespace ShogiServer\n{\n    class Program\n    {\n        static void Main(string[] args)\n        {\n            Console.WriteLine(\"start a loop.\");\n            for (;;)\n            {\n                string line = Console.In.ReadLine();\n                if (null != line)\n                {\n                    switch (line)\n                    {\n                        case \"quit\": goto gt_EndLoop;\n                        default: Console.WriteLine(\"(^q^)line=\" + line); break;\n                    }\n                }\n            }\n            gt_EndLoop:\n            Console.WriteLine(\"finished a loop.\");\n        }\n    }\n}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003emcs tamesi10\necho 'usi' | ./tamesi10.exe\nstart a loop.\n(^q^)line=usi\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eabc\ndef\nghi\necho 'usi' | ./tamesi10.exe\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eもう入力は効かない。無限ループで待機できないのだろうか？\u003cbr\u003e\n別の書き方も試してみる。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eusing System;\n\nnamespace ShogiServer\n{\n    class Program\n    {\n        static void Main(string[] args)\n        {\n            char[] buffer = new char[256];\n\n            Console.WriteLine(\"start a loop.\");\n            for (;;)\n            {\n                int result = Console.In.ReadBlock(buffer, 0, 255);\n                Console.WriteLine(\"(^q^)result=\" + result);\n                Console.Write(\"(^q^)buffer=\");\n                foreach (char ch in buffer)\n                {\n                    Console.Write(ch);\n                }\n                Console.WriteLine(\"(^_^)\");\n            }\n            Console.WriteLine(\"finished a loop.\");\n        }\n    }\n}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e./tamesi10.exe \u0026amp;\necho 'usi' | ./tamesi10.exe\n(^q^)result=0\n(^q^)buffer=usi\n(^_^)\n(^q^)result=0\n(^q^)buffer=usi\n(^_^)\n(^q^)result=0\n(^q^)buffer=usi\n(^_^)\n(^q^)result=0\n(^q^)buffer=usi\n(^_^)\n(^q^)result=0\n(^q^)buffer=usi\n(^_^)\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"ubuntuc-では入力側のバッファーがフラッシュされてないのか\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#ubuntuc-%E3%81%A7%E3%81%AF%E5%85%A5%E5%8A%9B%E5%81%B4%E3%81%AE%E3%83%90%E3%83%83%E3%83%95%E3%82%A1%E3%83%BC%E3%81%8C%E3%83%95%E3%83%A9%E3%83%83%E3%82%B7%E3%83%A5%E3%81%95%E3%82%8C%E3%81%A6%E3%81%AA%E3%81%84%E3%81%AE%E3%81%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eUbuntu/C# では、入力側のバッファーがフラッシュされてないのか。\u003c/h2\u003e\n\n\u003cp\u003e入力側のバッファーがフラッシュされてないのか。\u003c/p\u003e\n\n\u003cp\u003e「自プロセスの標準入出力」 (SMDN)\u003cbr\u003e\n\u003ca href=\"http://smdn.jp/programming/netfx/standard_streams/0_console/\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://smdn.jp/programming/netfx/standard_streams/0_console/\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e「C#で競技プログラミングをし続ける人のためのTips」 (Qiita)\u003cbr\u003e\n\u003ca href=\"http://qiita.com/Camypaper/items/de6d576fe5513743a50e\" class=\"autolink\" id=\"reference-bd1927f924e7e197f00a\"\u003ehttp://qiita.com/Camypaper/items/de6d576fe5513743a50e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eじゃあ、異なる入力があるまで無視するように書き換えてみよう。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eusing System;\n\nnamespace ShogiServer\n{\n    class Program\n    {\n        static void Main(string[] args)\n        {\n            string line_old = \"\";\n\n            Console.WriteLine(\"start a loop.\");\n            for (;;)\n            {\n                string line = Console.ReadLine(); // Ubuntuでは入力がフラッシュされなかった。\n                if (line!=line_old)\n                {\n                    Console.WriteLine(\"(^q^)line=\" + line);\n                    line_old = line;\n                    switch (line)\n                    {\n                        case \"quit\": goto gt_EndLoop;\n                        default: break;\n                    }\n                }\n            }\n            gt_EndLoop:\n            Console.WriteLine(\"finished a loop.\");\n        }\n    }\n}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e./tamesi10.exe\nstart a loop.\na\n(^q^)line=a\nb\n(^q^)line=b\nc\n(^q^)line=c\nusi\n(^q^)line=usi\nquit\n(^q^)line=quit\nfinished a loop.\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eはいっ、\u003cstrong\u003eビンゴ\u003c/strong\u003e！ えーっ！ なんでそんなバグ残ってんだ。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"mono-complete-をインストールしましたか\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#mono-complete-%E3%82%92%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%97%E3%81%BE%E3%81%97%E3%81%9F%E3%81%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003emono-complete をインストールしましたか？\u003c/h2\u003e\n\n\u003cp\u003e何それ！\u003c/p\u003e\n\n\u003cp\u003e「How to install mono on ubuntu 64-bit v14.04?」 (Ubuntu)\u003cbr\u003e\n\u003ca href=\"http://askubuntu.com/questions/497358/how-to-install-mono-on-ubuntu-64-bit-v14-04\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://askubuntu.com/questions/497358/how-to-install-mono-on-ubuntu-64-bit-v14-04\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eこれやってみるか。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003esudo apt-get install mono-complete\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eインストールが終わると、挙動が変わったｗｗｗｗ\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eusing System;\n\nnamespace ShogiServer\n{\n    class Program\n    {\n        static void Main(string[] args)\n        {\n            Console.WriteLine(\"start a loop.\");\n            for (;;)\n            {\n                string line = Console.ReadLine();\n                Console.WriteLine(\"(^q^)line=\" + line);\n                switch (line)\n                {\n                    case \"quit\": goto gt_EndLoop;\n                    default: break;\n                }\n            }\n            gt_EndLoop:\n            Console.WriteLine(\"finished a loop.\");\n        }\n    }\n}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eひとまずこれで。コンパイルしなおして、フォア・グラウンドで実行すると、想定した挙動になる。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e./tamesi10.exe\nstart a loop.\na\n(^q^)line=a\nb\n(^q^)line=b\nc\n(^q^)line=c\nquit\n(^q^)line=quit\nfinished a loop.\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eこれを、バックグラウンドで待機させておいて、バックグラウンドで動いているプロセスの標準入力に向かって文字を投げれないだろうか。\u003c/p\u003e\n\n\u003cp\u003eそんなことをしたら [Ctrl]+[C] も効かなくなって　入力は将棋サーバーに吸い込まれていくようになってしまった。PuTTY を強制終了させてセッションを落としてもいいのだろうか？\u003c/p\u003e\n\n\u003cp\u003e何ごともなく　静かなコンソール画面に再ログインすることができた。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"出力をリダイレクトするといいのだろうか\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%87%BA%E5%8A%9B%E3%82%92%E3%83%AA%E3%83%80%E3%82%A4%E3%83%AC%E3%82%AF%E3%83%88%E3%81%99%E3%82%8B%E3%81%A8%E3%81%84%E3%81%84%E3%81%AE%E3%81%A0%E3%82%8D%E3%81%86%E3%81%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e出力をリダイレクトするといいのだろうか？\u003c/h2\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eecho 'usi' | ./tamesi10.exe \u0026gt; log1 \u0026amp;\njobs\n[1]+  Running                 echo 'usi' | ./tamesi10.exe \u0026gt; log1 \u0026amp;\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eおっ、\u003cstrong\u003eRunning\u003c/strong\u003e なんか初めて見た。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003els\nnano log1\n\n[ Reading File ]\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eまた　固まったんだが。画面に\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e[ Reading File ]\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eと表示されてるだけで、キー入力はできるのか。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eecho 'quit' | ./tamesi10.exe\nstart a loop.\n(^q^)line=quit\nfinished a loop.\njobs\n[1]+  Running                 echo 'usi' | ./tamesi10.exe \u0026gt; log1 \u0026amp;\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e今 Running している方の ./tamesi10.exe に標準入力を送れないものか。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"ctrlz\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#ctrlz\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e[Ctrl]+[Z]\u003c/h2\u003e\n\n\u003cp\u003eなんか分からないがやってみよう。\u003c/p\u003e\n\n\u003cp\u003e「What is the difference between Ctrl-z and Ctrl-c in the shell?」 (ask ubuntu)\u003cbr\u003e\n\u003ca href=\"http://askubuntu.com/questions/510811/what-is-the-difference-between-ctrl-z-and-ctrl-c-in-the-shell\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://askubuntu.com/questions/510811/what-is-the-difference-between-ctrl-z-and-ctrl-c-in-the-shell\u003c/a\u003e\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e./tamesi10.exe\nstart a loop.\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e[Ctrl]+[Z]\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\n[1]+  Stopped                 ./tamesi10.exe\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eストップして　コマンド・プロンプトが戻ってきたぜ。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003ebg 1\n[1]+ ./tamesi10.exe \u0026amp;\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eほう。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003efg 1\n./tamesi10.exe\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e戻ってきた。\u003c/p\u003e\n\n\u003cp\u003e[Ctrl]+[Z]\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\n[1]+  Stopped                 ./tamesi10.exe\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eほう。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003efg 1\n./tamesi10.exe\nusi\n(^q^)line=usi\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eジョブID が分かってるんだったら手動で「fg 番号」して入力できるが……。\u003cbr\u003e\nわたしが通信したいんじゃなくて、コンピューター同士に双方向通信させたいんだが、\u003cbr\u003e\n２つのプロセスを起動させておいて、シェル・スクリプトで fg と bg を使えばいいのだろうか？\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"標準入出力通信はむずかしいのでは\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%A8%99%E6%BA%96%E5%85%A5%E5%87%BA%E5%8A%9B%E9%80%9A%E4%BF%A1%E3%81%AF%E3%82%80%E3%81%9A%E3%81%8B%E3%81%97%E3%81%84%E3%81%AE%E3%81%A7%E3%81%AF\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e標準入出力通信は　むずかしいのでは？\u003c/h1\u003e\n\n\u003cp\u003e\u003cstrong\u003eポートを開いてソケット通信したらダメなのか……？\u003c/strong\u003e　なんだろう、この難しい操作。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"シェルスクリプトよりソケットプログラムの方が簡単なんじゃないか\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%B7%E3%82%A7%E3%83%AB%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%97%E3%83%88%E3%82%88%E3%82%8A%E3%82%BD%E3%82%B1%E3%83%83%E3%83%88%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%A0%E3%81%AE%E6%96%B9%E3%81%8C%E7%B0%A1%E5%8D%98%E3%81%AA%E3%82%93%E3%81%98%E3%82%83%E3%81%AA%E3%81%84%E3%81%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eシェル・スクリプトより、ソケット・プログラムの方が簡単なんじゃないか？\u003c/h1\u003e\n\n\u003cp\u003eとりあえず　将棋サーバーは　ポートを開いてバックグラウンドで走らせておいたらいいんじゃないか。\u003c/p\u003e\n\n\u003cp\u003eじゃあ、ウェブ・アプリケーション・サーバーは、ポートを開いている実行プログラムに向かって、文字列を投げる方法があるのか調べてみよう。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"php-とかでソケット通信できるんだろうか\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#php-%E3%81%A8%E3%81%8B%E3%81%A7%E3%82%BD%E3%82%B1%E3%83%83%E3%83%88%E9%80%9A%E4%BF%A1%E3%81%A7%E3%81%8D%E3%82%8B%E3%82%93%E3%81%A0%E3%82%8D%E3%81%86%E3%81%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003ePHP とかでソケット通信できるんだろうか？\u003c/h1\u003e\n\n\u003cp\u003e「socket_create_listen」 (PHPマニュアル)\u003cbr\u003e\n\u003ca href=\"http://php.net/manual/ja/function.socket-create-listen.php\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://php.net/manual/ja/function.socket-create-listen.php\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eソケットの接続を確立したあとの処理はどうするのか？\u003c/p\u003e\n\n\u003cp\u003e「fsockopen」 (PHPマニュアル)\u003cbr\u003e\n\u003ca href=\"http://php.net/manual/ja/function.fsockopen.php\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://php.net/manual/ja/function.fsockopen.php\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eつなぎに行く方は　これでいいんだが。\u003c/p\u003e\n\n\u003cp\u003e「PHP でサーバソケットプログラミング (1)」 (Rainy Day Codings)\u003cbr\u003e\n\u003ca href=\"http://rainyday.blog.so-net.ne.jp/2007-02-17\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://rainyday.blog.so-net.ne.jp/2007-02-17\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eサーバーの待ち受け側は　これでいいか。\u003c/p\u003e\n\n\u003cp\u003eじゃあ、PHPが動くようにセットアップするか。\u003cbr\u003e\nレンタル・サーバーの環境は　どうなってたっけ。\u003c/p\u003e\n\n\u003cp\u003e「料金・サービス仕様」 (SAKURA internet)\u003cbr\u003e\n\u003ca href=\"http://solution.sakura.ad.jp/windows_vps/specification.html\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://solution.sakura.ad.jp/windows_vps/specification.html\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eApache や PHP のバージョンは自分で調べろということか。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003ephp --version\nPHP 7.0.15-0ubuntu0.16.04.4 (cli) ( NTS )\nCopyright (c) 1997-2017 The PHP Group\nZend Engine v3.0.0, Copyright (c) 1998-2017 Zend Technologies\n    with Zend OPcache v7.0.15-0ubuntu0.16.04.4, Copyright (c) 1999-2017, by Zend Technologies\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eおおっ、PHP 7 だ。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eapache2 --version\n[Mon Mar 06 02:17:27.188336 2017] [core:warn] [pid 19747] AH00111: Config variable ${APACHE_LOCK_DIR} is not defined\n[Mon Mar 06 02:17:27.188706 2017] [core:warn] [pid 19747] AH00111: Config variable ${APACHE_PID_FILE} is not defined\n[Mon Mar 06 02:17:27.188743 2017] [core:warn] [pid 19747] AH00111: Config variable ${APACHE_RUN_USER} is not defined\n[Mon Mar 06 02:17:27.188765 2017] [core:warn] [pid 19747] AH00111: Config variable ${APACHE_RUN_GROUP} is not defined\n[Mon Mar 06 02:17:27.188801 2017] [core:warn] [pid 19747] AH00111: Config variable ${APACHE_LOG_DIR} is not defined\n[Mon Mar 06 02:17:27.195871 2017] [core:warn] [pid 19747] AH00111: Config variable ${APACHE_LOG_DIR} is not defined\n[Mon Mar 06 02:17:27.196170 2017] [core:warn] [pid 19747] AH00111: Config variable ${APACHE_LOG_DIR} is not defined\n[Mon Mar 06 02:17:27.197322 2017] [core:warn] [pid 19747] AH00111: Config variable ${APACHE_LOG_DIR} is not defined\nAH00526: Syntax error on line 74 of /etc/apache2/apache2.conf:\nInvalid Mutex directory in argument file:${APACHE_LOCK_DIR}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eなんか --version という引数は無さげ。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eman apache2\napache2 -v\nServer version: Apache/2.4.18 (Ubuntu)\nServer built:   2016-07-14T12:32:26\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eapache2 は 2.4.18 か。\u003c/p\u003e\n\n\u003cp\u003eじゃあ、PHPの設定とか　もう終わってんの？ 試してみるか。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"php-を試そうぜ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#php-%E3%82%92%E8%A9%A6%E3%81%9D%E3%81%86%E3%81%9C\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003ePHP を試そうぜ\u003c/h1\u003e\n\n\u003cp\u003eブラウザで開いて URLでアクセスすればいいわけなんだが、外に開かれているんだろうか？\u003cbr\u003e\nブラウザのURL欄に入れてみる。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003ehttp://数字.数字.数字.数字\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eでた。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eIndex of /\n\n[ICO]   Name    Last modified   Size    Description\n[   ]   gpskick.php 2015-09-12 03:07    351  \n[DIR]   html/   2015-09-12 02:40    -    \n[   ]   la.php  2015-09-12 03:14    241  \n[DIR]   tumecheck/  2015-09-12 03:15    -    \n[DIR]   vscom/  2015-09-12 03:03    -    \n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eこのフォルダーはどこなのか？ Linux のフォルダ構成はよく分からんが、ググろう。\u003c/p\u003e\n\n\u003cp\u003e「Ubuntu serverApache」 (Yamamoto's Laboratory)\u003cbr\u003e\n\u003ca href=\"http://www.yamamo10.jp/yamamoto/comp/home_server/ubuntu_server/apache/index.php\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://www.yamamo10.jp/yamamoto/comp/home_server/ubuntu_server/apache/index.php\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eページは /var/www/index.html みたいな感じであるんだろうか？調べてみよう。\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003eひゅーっ！\u003c/strong\u003e\u003c/p\u003e\n\n\u003cp\u003e/var/www/html/index.html\u003c/p\u003e\n\n\u003cp\u003e何かある。\u003cbr\u003e\nソースの中身をみたんだが　気に入らないタグ打ちだぜｗｗｗｗｗ\u003c/p\u003e\n\n\u003cp\u003eどうも　これは　トップ階層じゃないみたいだ。\u003c/p\u003e\n\n\u003cp\u003eなんか　外からは FileZilla で転送できない。パーミッションを w に変えていいのだろうか？\u003cbr\u003e\n変えないと作業が進まない。chmod する。\u003c/p\u003e\n\n\u003cp\u003eで、ブラウザで開いても PHP は効いてないみたいだ。未設定なのか。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"php-を設定しよう\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#php-%E3%82%92%E8%A8%AD%E5%AE%9A%E3%81%97%E3%82%88%E3%81%86\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003ePHP を設定しよう\u003c/h1\u003e\n\n\u003cp\u003e「【PHP】PHPをインストールしたらやっておきたい設定」 (Qiita)\u003cbr\u003e\n\u003ca href=\"http://qiita.com/knife0125/items/0e1af52255e9879f9332\" class=\"autolink\" id=\"reference-eaf74ee8ae9ddad93739\"\u003ehttp://qiita.com/knife0125/items/0e1af52255e9879f9332\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eetc フォルダーに設定ファイルが入っているのか。\u003c/p\u003e\n\n\u003cp\u003eetc フォルダーの下には php と php5 ディレクトリがある。 php5 ではないと思うが。\u003c/p\u003e\n\n\u003cp\u003e/etc/php/7.0/cli ディレクトリの中に php.ini があった。\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003eあれっ？\u003c/strong\u003e\u003c/p\u003e\n\n\u003cp\u003e「PHPの設定」 (Sakura VPS マニュアル)\u003cbr\u003e\n\u003ca href=\"http://www.xn--vps-073b3a72a.com/10.html\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://www.xn--vps-073b3a72a.com/10.html\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eわたしの渡されたフォルダー構成と異なるぜ。設定したあとで渡されたんだろうか。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eservice httpd restart\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eと叩けば httpデーモンが開始されるのだろうか。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eservice httpd restart\nFailed to restart httpd.service: Unit httpd.service not found.\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eいろいろ　さっぱり状況が分からんな……。\u003c/p\u003e\n\n\u003cp\u003e「7.　WEBサーバーの設定」 (Sakura VPS マニュアル)\u003cbr\u003e\n\u003ca href=\"http://www.xn--vps-073b3a72a.com/7.html\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://www.xn--vps-073b3a72a.com/7.html\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e「STEP.3：WEBページをアップしよう」 (Sakura VPS マニュアル)\u003cbr\u003e\n\u003ca href=\"http://www.xn--vps-073b3a72a.com/8.html\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://www.xn--vps-073b3a72a.com/8.html\u003c/a\u003e\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"varwwwhtml\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#varwwwhtml\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003evar/www/html\u003c/h1\u003e\n\n\u003cblockquote\u003e\n\u003cp\u003eさくらVPSのホームページのデフォルトの階層は var/www/html になります。\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003cp\u003e\u003cstrong\u003eあれま！\u003c/strong\u003e\u003c/p\u003e\n\n\u003cp\u003eいじったところを　元に戻そう。\u003c/p\u003e\n\n\u003cp\u003e多分、なんか、わたしに渡された状態では apache2 と php7.0 は入ってたけど、全然　設定されてない気がする。\u003cbr\u003e\nかといって　アン・インストール／再インストール　したら　なんか設定されているのが　消えてしまうかもしれない。現状を知らない。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"apache-を再起動しよう\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#apache-%E3%82%92%E5%86%8D%E8%B5%B7%E5%8B%95%E3%81%97%E3%82%88%E3%81%86\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eApache を再起動しよう\u003c/h1\u003e\n\n\u003cp\u003eApache 入ってるんだが、リスタート掛けてみるか。\u003c/p\u003e\n\n\u003cp\u003e「UbuntuでApacheを再起動する方法・コマンド」 (MiuxMiu)\u003cbr\u003e\n\u003ca href=\"http://www.miuxmiu.com/archives/2010/03/03/ubuntu_apache_restart_command.html\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://www.miuxmiu.com/archives/2010/03/03/ubuntu_apache_restart_command.html\u003c/a\u003e\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003esudo /etc/init.d/apache2 restart\n[ ok ] Restarting apache2 (via systemctl): apache2.service.\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eなんか　すぐ再起動したな。Apache はいて、PHP とは連携してないのだろう。\u003c/p\u003e\n\n\u003cp\u003eApacheの It's works とかいうデフォルトページは html フォルダーの下に見えるんだが、そうか、DNS 設定してないから　こんなサブ・ディレクトリでページを見ているんだった。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"phpini-を設定しよう\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#phpini-%E3%82%92%E8%A8%AD%E5%AE%9A%E3%81%97%E3%82%88%E3%81%86\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003ephp.ini を設定しよう\u003c/h1\u003e\n\n\u003cp\u003eいろいろ　コメントアウトされているので、そのコメントを解除していく作業だ。\u003c/p\u003e\n\n\u003cp\u003ephp.ini のバックアップを取っておく。名前は適当に php.ini.original としておいた。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e;error_log = php_errors.log\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eを、頭のセミコロンを外して、ディレクトリも次のように変えた。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eerror_log = /var/log/php_errors.log\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e次に、\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e;mbstring.language = Japanese\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eは、頭のセミコロンを外した。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003embstring.language = Japanese\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e次に、\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e;mbstring.internal_encoding =\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eは、次のように変えた。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003embstring.internal_encoding = UTF-8\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e次に、\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e;mbstring.http_input =\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eは、次のように変えた。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003embstring.http_input = auto\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e次に、\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e;mbstring.detect_order = auto\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eは、次のように変えた。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003embstring.detect_order = auto\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e次に、\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eexpose_php = On\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eを、次のように変えた。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eexpose_php = Off\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e「「expose_php = off」の設定」（エンジニア足立のコーディング日記）\u003cbr\u003e\n\u003ca href=\"https://www.deep-deep.jp/blog_engineer/archives/3793\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://www.deep-deep.jp/blog_engineer/archives/3793\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eこのあと、FileZilla で設定ファイルをサーバーに転送し……パーミッションはその都度ルート・ユーザーで変えて、\u003cbr\u003e\nPuTTY で次のようにコマンドを叩く。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eservice httpd restart\nFailed to restart httpd.service: Unit httpd.service not found.\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e何か　インストールされていないなあ。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"apache-はインストールされているけどインストールしてみよう\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#apache-%E3%81%AF%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%95%E3%82%8C%E3%81%A6%E3%81%84%E3%82%8B%E3%81%91%E3%81%A9%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%97%E3%81%A6%E3%81%BF%E3%82%88%E3%81%86\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eApache はインストールされているけど、インストールしてみよう\u003c/h1\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eyum -y install httpd\nThe program 'yum' is currently not installed. You can install it by typing:\napt install yum\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e説明と全然一致しない。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"yum-をインストールしよう\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#yum-%E3%82%92%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%97%E3%82%88%E3%81%86\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eyum をインストールしよう\u003c/h1\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eapt install yum\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eインストールした。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eyum -y install httpd\nThere are no enabled repos.\n Run \"yum repolist all\" to see the repos you have.\n You can enable repos with yum-config-manager --enable \u0026lt;repo\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e分からん。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eyum repolist all\nrepolist: 0\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eApache を再起動するのは、\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003esudo /etc/init.d/apache2 restart\n[ ok ] Restarting apache2 (via systemctl): apache2.service.\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eできるんだが。じゃあ次のように叩くと？\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003esudo /etc/init.d/httpd restart\nsudo: /etc/init.d/httpd: command not found\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003einit.d ディレクトリに httpd コマンドはあるのだろうか？\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e/etc/init.d# ls\napache2                 halt                   networking    single\napache-htcacheclean     hostname.sh            ondemand      skeleton\napparmor                hwclock.sh             plymouth      ssh\nbinfmt-support          irqbalance             plymouth-log  thermald\nbootmisc.sh             keyboard-setup         pppd-dns      udev\ncgmanager               killprocs              procps        ufw\ncgproxy                 kmod                   rc            umountfs\ncheckfs.sh              memcached              rc.local      umountnfs.sh\ncheckroot-bootclean.sh  mountall-bootclean.sh  rcS           umountroot\ncheckroot.sh            mountall.sh            README        urandom\nconsole-setup           mountdevsubfs.sh       reboot        uuidd\ncron                    mountkernfs.sh         resolvconf    x11-common\ndbus                    mountnfs-bootclean.sh  rsync\ndns-clean               mountnfs.sh            rsyslog\ngrub-common             mysql                  sendsigs\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e無い。ハイパー・テキスト・トランスファー・プロトコル無い。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"httpd-なんで無いの\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#httpd-%E3%81%AA%E3%82%93%E3%81%A7%E7%84%A1%E3%81%84%E3%81%AE\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003ehttpd なんで無いの？\u003c/h1\u003e\n\n\u003cp\u003e「Can't find httpd.conf」 (ask ubuntu)\u003cbr\u003e\n\u003ca href=\"http://askubuntu.com/questions/652095/cant-find-httpd-conf\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://askubuntu.com/questions/652095/cant-find-httpd-conf\u003c/a\u003e\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e/etc/apache2# ls\napache2.conf    conf-enabled  magic           mods-enabled  sites-available\nconf-available  envvars       mods-available  ports.conf    sites-enabled\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003esudo /etc/apache2/apache2.conf restart\nsudo: /etc/apache2/apache2.conf: command not found\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eダメー。\u003c/p\u003e\n\n\u003cp\u003eindex.php\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u0026lt;?php\necho 'hello, shogi world1';\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eこの内容がそのまま表示されてしまう。じゃあ、HTMLならどうなのか？ HTML は表示されている。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eecho \"\u0026lt;?php phpinfo();\"\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eとコマンドラインに打っても何も起こらない。\u003c/p\u003e\n\n\u003cp\u003e現状の環境が使い物にならないので　インストールからやり直そう。\u003c/p\u003e\n\n\u003cp\u003e「PHPの設定」 (さくらのVPS 設定マニュアル)\u003cbr\u003e\n\u003ca href=\"http://www.sakura-vps.net/php-settings-for-sakura-vps/\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://www.sakura-vps.net/php-settings-for-sakura-vps/\u003c/a\u003e\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eyum -y install php php-mbstring php-mysql\nThere are no enabled repos.\n Run \"yum repolist all\" to see the repos you have.\n You can enable repos with yum-config-manager --enable \u0026lt;repo\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e「【初心者向け】PHPがブラウザで正しく表示されない時の対処」 (n2p blog)\u003cbr\u003e\n\u003ca href=\"https://n2p.co.jp/blog/tech/serverside/php-donot-display/\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://n2p.co.jp/blog/tech/serverside/php-donot-display/\u003c/a\u003e\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003ephp index.php\nhello, shogi world1\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eこれは動いている。じゃあ、phpinfo() を実行してみよう。\u003cbr\u003e\n表示されるようだ。\u003c/p\u003e\n\n\u003cp\u003eじゃあ、パーミッションか？\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003els -an\n-rw-r--r-- 1    0    0 11510 Sep 12  2015 index.html\n-rw-rw-r-- 1 1000 1000    21 Mar  6 04:04 index.php\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003ehtml は見れるしなあ。\u003c/p\u003e\n\n\u003cp\u003eapache の設定に php が書かれていないのだろうか？\u003c/p\u003e\n\n\u003cp\u003eブラウザで開くと\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u0026lt;?php phpinfo();\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eがそのまま表示されている。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eDocument Roots\nBy default, Ubuntu does not allow access through the web browser to any file apart of those located in /var/www, public_html directories (when enabled) and /usr/share (for web applications). If your site is using a web document root located elsewhere (such as in /srv) you may need to whitelist your document root directory in /etc/apache2/apache2.conf.\nThe default Ubuntu document root is /var/www/html. You can make your own virtual hosts under /var/www. This is different to previous releases which provides better security out of the box.\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e「PHPが実行されずコメントアウトになる」 (teratail)\u003cbr\u003e\n\u003ca href=\"https://teratail.com/questions/34508\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://teratail.com/questions/34508\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eじゃあ、php5 を削除するか。\u003c/p\u003e\n\n\u003cp\u003e「php5.5とかphp5.6をインストールする」 (Qiita)\u003cbr\u003e\n\u003ca href=\"http://qiita.com/ykyk1218/items/c859870ef8dac79f5e1c\" class=\"autolink\" id=\"reference-dec684ed05c7a300c4aa\"\u003ehttp://qiita.com/ykyk1218/items/c859870ef8dac79f5e1c\u003c/a\u003e\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003esudo yum remove php-*\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e一致しないようだ。\u003c/p\u003e\n\n\u003cp\u003e無料だと PHPは使えないとかないだろうか。\u003c/p\u003e\n\n\u003cp\u003e「UbuntuサーバからPHP5.6を完全に削除」 (エンジニア足立のコーディング日記)\u003cbr\u003e\n\u003ca href=\"https://www.deep-deep.jp/blog_engineer/archives/4168\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://www.deep-deep.jp/blog_engineer/archives/4168\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e完全に削除する場合\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003esudo apt-get –purge remove php5.6\nE: Invalid operation –purge\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e動かない。\u003c/p\u003e\n\n\u003cp\u003e設定ファイルだけ残す場合\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003esudo apt-get remove php5.6\nReading package lists... Done\nBuilding dependency tree\nReading state information... Done\nNote, selecting 'php5.6-json' for regex 'php5.6'\nNote, selecting 'php5.6-common' for regex 'php5.6'\nPackage 'php5.6-common' is not installed, so not removed\nPackage 'php5.6-json' is not installed, so not removed\nThe following packages were automatically installed and are no longer required:\n  libssl-dev libssl-doc php-cli php-common php-pear php-xml php7.0-cli php7.0-common\n  php7.0-json php7.0-opcache php7.0-readline php7.0-xml pkg-php-tools shtool\n  zlib1g-dev\nUse 'sudo apt autoremove' to remove them.\n0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e動いた。が、 0 ばっかりか。\u003c/p\u003e\n\n\u003cp\u003eコマンドラインからは php は動かせるので、apache の設定だと思うが。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"apache-の設定ファイルで-php-を設定しよう\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#apache-%E3%81%AE%E8%A8%AD%E5%AE%9A%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%A7-php-%E3%82%92%E8%A8%AD%E5%AE%9A%E3%81%97%E3%82%88%E3%81%86\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eApache の設定ファイルで PHP を設定しよう\u003c/h1\u003e\n\n\u003cp\u003e「モジュール(php7_module)の追加と拡張子(.php)の登録」 (Admin Web)\u003cbr\u003e\n\u003ca href=\"https://www.adminweb.jp/apache/php/index1.html\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://www.adminweb.jp/apache/php/index1.html\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003ehttpd.conf が無いので、\u003c/p\u003e\n\n\u003cp\u003e/etc/apache2/apache2.conf を開いてみよう。\u003c/p\u003e\n\n\u003cp\u003e説明と全然ちがう。パス\u003c/p\u003e\n\n\u003cp\u003e「Ubuntu で apache の設定。まとめ。」 (freefielder.jp)\u003cbr\u003e\n\u003ca href=\"http://freefielder.jp/blog/2012/12/ubuntu-apache.html\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://freefielder.jp/blog/2012/12/ubuntu-apache.html\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e/etc/apache2/mods-available/php5.conf を探す。\u003cbr\u003e\nある。\u003cbr\u003e\nあるんだが php5 という名前でいいのか。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e        php_admin_flag engine Off\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eと書いてあるところの頭に # を付け足すことにする。\u003cbr\u003e\nアパッチを再起動。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003esudo service apache2 restart\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eブラウザに変化なし。\u003c/p\u003e\n\n\u003cp\u003e「ubuntu 16.04 インストール(6) apache, php」 (kashiの日記)\u003cbr\u003e\n\u003ca href=\"http://verifiedby.me/adiary/086\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://verifiedby.me/adiary/086\u003c/a\u003e\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e/etc/apache2/sites-available# ls\n000-default.conf  000-default.conf.bak  default-ssl.conf\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eうーむ、関係なさげ。\u003c/p\u003e\n\n\u003cp\u003e「【Ubuntu】PHP 5.6 を PHP 7 へアップグレード」 (Sukohi's tech blog!!)\u003cbr\u003e\n\u003ca href=\"http://sukohi.blogspot.jp/2016/01/ubuntuphp-56-php-7.html\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://sukohi.blogspot.jp/2016/01/ubuntuphp-56-php-7.html\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e移動。\u003c/p\u003e\n\n\u003cp\u003e/etc/apache2/mods-enabled\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003els -an\ntotal 8\ndrwxr-xr-x 2 0 0 4096 Mar  4 21:09 .\ndrwxr-xr-x 8 0 0 4096 Mar  4 21:13 ..\nlrwxrwxrwx 1 0 0   36 Sep 12  2015 access_compat.load -\u0026gt; ../mods-available/access_compat.load\nlrwxrwxrwx 1 0 0   28 Sep 12  2015 alias.conf -\u0026gt; ../mods-available/alias.conf\nlrwxrwxrwx 1 0 0   28 Sep 12  2015 alias.load -\u0026gt; ../mods-available/alias.load\nlrwxrwxrwx 1 0 0   33 Sep 12  2015 auth_basic.load -\u0026gt; ../mods-available/auth_basic.load\nlrwxrwxrwx 1 0 0   33 Sep 12  2015 authn_core.load -\u0026gt; ../mods-available/authn_core.load\nlrwxrwxrwx 1 0 0   33 Sep 12  2015 authn_file.load -\u0026gt; ../mods-available/authn_file.load\nlrwxrwxrwx 1 0 0   33 Sep 12  2015 authz_core.load -\u0026gt; ../mods-available/authz_core.load\nlrwxrwxrwx 1 0 0   33 Sep 12  2015 authz_host.load -\u0026gt; ../mods-available/authz_host.load\nlrwxrwxrwx 1 0 0   33 Sep 12  2015 authz_user.load -\u0026gt; ../mods-available/authz_user.load\nlrwxrwxrwx 1 0 0   32 Sep 12  2015 autoindex.conf -\u0026gt; ../mods-available/autoindex.conf\nlrwxrwxrwx 1 0 0   32 Sep 12  2015 autoindex.load -\u0026gt; ../mods-available/autoindex.load\nlrwxrwxrwx 1 0 0   30 Sep 12  2015 deflate.conf -\u0026gt; ../mods-available/deflate.conf\nlrwxrwxrwx 1 0 0   30 Sep 12  2015 deflate.load -\u0026gt; ../mods-available/deflate.load\nlrwxrwxrwx 1 0 0   26 Sep 12  2015 dir.conf -\u0026gt; ../mods-available/dir.conf\nlrwxrwxrwx 1 0 0   26 Sep 12  2015 dir.load -\u0026gt; ../mods-available/dir.load\nlrwxrwxrwx 1 0 0   26 Sep 12  2015 env.load -\u0026gt; ../mods-available/env.load\nlrwxrwxrwx 1 0 0   29 Sep 12  2015 filter.load -\u0026gt; ../mods-available/filter.load\nlrwxrwxrwx 1 0 0   27 Sep 12  2015 mime.conf -\u0026gt; ../mods-available/mime.conf\nlrwxrwxrwx 1 0 0   27 Sep 12  2015 mime.load -\u0026gt; ../mods-available/mime.load\nlrwxrwxrwx 1 0 0   34 Sep 12  2015 mpm_prefork.conf -\u0026gt; ../mods-available/mpm_prefork.conf\nlrwxrwxrwx 1 0 0   34 Sep 12  2015 mpm_prefork.load -\u0026gt; ../mods-available/mpm_prefork.load\nlrwxrwxrwx 1 0 0   34 Sep 12  2015 negotiation.conf -\u0026gt; ../mods-available/negotiation.conf\nlrwxrwxrwx 1 0 0   34 Sep 12  2015 negotiation.load -\u0026gt; ../mods-available/negotiation.load\nlrwxrwxrwx 1 0 0   30 Sep 12  2015 rewrite.load -\u0026gt; ../mods-available/rewrite.load\nlrwxrwxrwx 1 0 0   31 Sep 12  2015 setenvif.conf -\u0026gt; ../mods-available/setenvif.conf\nlrwxrwxrwx 1 0 0   31 Sep 12  2015 setenvif.load -\u0026gt; ../mods-available/setenvif.load\nlrwxrwxrwx 1 0 0   29 Sep 12  2015 status.conf -\u0026gt; ../mods-available/status.conf\nlrwxrwxrwx 1 0 0   29 Sep 12  2015 status.load -\u0026gt; ../mods-available/status.load\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003ePHP5 関係は無さそう。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"php5-ディレクトリを削除してみよう\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#php5-%E3%83%87%E3%82%A3%E3%83%AC%E3%82%AF%E3%83%88%E3%83%AA%E3%82%92%E5%89%8A%E9%99%A4%E3%81%97%E3%81%A6%E3%81%BF%E3%82%88%E3%81%86\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003ephp5 ディレクトリを削除してみよう\u003c/h1\u003e\n\n\u003cp\u003eetc/php5 というディレクトリがある。削除する。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003erm -rf php5/\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eアパッチを再起動する。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003esudo service apache2 restart\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eこれでもダメ。\u003c/p\u003e\n\n\u003cp\u003ehttpd.conf はどこにあるんだろう。\u003c/p\u003e\n\n\u003cp\u003e「PHP7.0をApache2.4にインストール＠ウィンドウズ10」 (weblog)\u003cbr\u003e\n\u003ca href=\"http://weblog.4141.biz/?p=359\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://weblog.4141.biz/?p=359\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eWindows の設定なので合わない。\u003c/p\u003e\n\n\u003cp\u003e「ubuntu apatche２ でhttpd.confの内容はど」 (YAHOO!JAPAN知恵袋)\u003cbr\u003e\n\u003ca href=\"http://detail.chiebukuro.yahoo.co.jp/qa/question_detail/q1419833899\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://detail.chiebukuro.yahoo.co.jp/qa/question_detail/q1419833899\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e/etc/apache2/mods-available ディレクトリに、php5 のファイルがあるので削除してみる。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003erm php5.conf\nrm php5.load\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eアパッチを再起動する。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003esudo service apache2 restart\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eこれでもダメ。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003esudo apt-get remove php\nReading package lists... Done\nBuilding dependency tree\nReading state information... Done\nPackage 'php' is not installed, so not removed\nThe following packages were automatically installed and are no longer required:\n  libssl-dev libssl-doc php-cli php-common php-pear php-xml php7.0-cli php7.0-common php7.0-json\n  php7.0-opcache php7.0-readline php7.0-xml pkg-php-tools shtool zlib1g-dev\nUse 'sudo apt autoremove' to remove them.\n0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eダメ。\u003c/p\u003e\n\n\u003cp\u003e「Apache 2.x (Unixシステム用)」 (PHPドキュメント)\u003cbr\u003e\n\u003ca href=\"http://php.net/manual/ja/install.unix.apache2.php\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://php.net/manual/ja/install.unix.apache2.php\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e違う。\u003c/p\u003e\n\n\u003cp\u003e「Debian GNU/Linux へのインストール」 (PHPドキュメント)\u003cbr\u003e\n\u003ca href=\"http://php.net/manual/ja/install.unix.debian.php\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://php.net/manual/ja/install.unix.debian.php\u003c/a\u003e\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eapt-get install php5-common libapache2-mod-php5 php5-cli\nReading package lists... Done\nBuilding dependency tree\nReading state information... Done\nPackage libapache2-mod-php5 is not available, but is referred to by another package.\nThis may mean that the package is missing, has been obsoleted, or\nis only available from another source\n\nPackage php5-cli is not available, but is referred to by another package.\nThis may mean that the package is missing, has been obsoleted, or\nis only available from another source\nHowever the following packages replace it:\n  php7.0-cli:i386 php7.0-cli\n\nPackage php5-common is not available, but is referred to by another package.\nThis may mean that the package is missing, has been obsoleted, or\nis only available from another source\n\nE: Package 'php5-common' has no installation candidate\nE: Package 'libapache2-mod-php5' has no installation candidate\nE: Package 'php5-cli' has no installation candidate\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eうーむ、何かエラーが出ている。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e/etc/init.d/apache2 stop\n[ ok ] Stopping apache2 (via systemctl): apache2.service.\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eアパッチを止めると、サイトにアクセスできなくなっている。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e/etc/init.d/apache2 start\n[ ok ] Starting apache2 (via systemctl): apache2.service.\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eアパッチを再開させると、サイトにはアクセスできるが、PHPはソースがそのまま出力されている。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eapt-cache search php5\nbluefish - advanced Gtk+ text editor for web and software development\nphing - PHP5 project build system based on Apache Ant\nphp-auth - Creating an authentication system\nphp-doc - Documentation for PHP5\nphp-http-request2 - Provides an easy way to perform HTTP requests\nphp-letodms-lucene - Document management system - Fulltext search\nphp-memcache - memcache extension module for PHP5\nphp-memcached - memcached extension module for PHP5, uses libmemcached\nphp-net-dns2 - PHP5 Resolver library used to communicate with a DNS server\nphpunit - Unit testing suite for PHP5\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eaptitude search php5\nThe program 'aptitude' is currently not installed. You can install it by typing:\napt install aptitude\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e「PHPスクリプトを利用する」 (server world)\u003cbr\u003e\n\u003ca href=\"https://www.server-world.info/query?os=Debian_8\u0026amp;p=httpd\u0026amp;f=3\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://www.server-world.info/query?os=Debian_8\u0026amp;p=httpd\u0026amp;f=3\u003c/a\u003e\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eaptitude -y install php5 php5-cgi libapache2-mod-php5 php5-common php-pear\nThe program 'aptitude' is currently not installed. You can install it by typing:\napt install aptitude\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"aptitude-をインストールしよう\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#aptitude-%E3%82%92%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%97%E3%82%88%E3%81%86\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eaptitude をインストールしよう\u003c/h2\u003e\n\n\u003cp\u003e「aptitudeをインストールする(Ubuntu 10.10 11.04 64bit)」 (upp)\u003cbr\u003e\n\u003ca href=\"http://www005.upp.so-net.ne.jp/develop-tom/ub/aptitude-ub.html\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://www005.upp.so-net.ne.jp/develop-tom/ub/aptitude-ub.html\u003c/a\u003e\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003esudo apt-get install aptitude\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eインストールできただろうか？\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eaptitude -y install php5 php5-cgi libapache2-mod-php5 php5-common php-pear\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e今度は動いている。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"apacheの設定でphpの拡張子を紐付けよう\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#apache%E3%81%AE%E8%A8%AD%E5%AE%9A%E3%81%A7php%E3%81%AE%E6%8B%A1%E5%BC%B5%E5%AD%90%E3%82%92%E7%B4%90%E4%BB%98%E3%81%91%E3%82%88%E3%81%86\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eApacheの設定で、PHPの拡張子を紐付けよう\u003c/h2\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003enano /etc/apache2/mods-enabled/mime.conf\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e220行目あたりに追記とのこと。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e# PHP extension\nAddHandler php5-script .php\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003esystemctl restart apache2 \n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eダメ。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eapt-get install php5-common libapache2-mod-php5 php5-cli\nReading package lists... Done\nBuilding dependency tree\nReading state information... Done\nPackage libapache2-mod-php5 is not available, but is referred to by another package.\nThis may mean that the package is missing, has been obsoleted, or\nis only available from another source\n\nPackage php5-cli is not available, but is referred to by another package.\nThis may mean that the package is missing, has been obsoleted, or\nis only available from another source\nHowever the following packages replace it:\n  php7.0-cli:i386 php7.0-cli\n\nPackage php5-common is not available, but is referred to by another package.\nThis may mean that the package is missing, has been obsoleted, or\nis only available from another source\n\nE: Package 'php5-common' has no installation candidate\nE: Package 'libapache2-mod-php5' has no installation candidate\nE: Package 'php5-cli' has no installation candidate\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eエラーが出ている。\u003c/p\u003e\n\n\u003cp\u003e「PHP + Apacheのインストール - Debian」 (Linux入門)\u003cbr\u003e\n\u003ca href=\"http://webkaru.net/linux/debian-php-apache-install/\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://webkaru.net/linux/debian-php-apache-install/\u003c/a\u003e\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eapt-get install apache2 php5\nReading package lists... Done\nBuilding dependency tree\nReading state information... Done\nPackage php5 is not available, but is referred to by another package.\nThis may mean that the package is missing, has been obsoleted, or\nis only available from another source\n\nE: Package 'php5' has no installation candidate\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eエラーが出ている。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003ephp -v\n-su: /usr/bin/php: No such file or directory\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eエラーが出ている。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003ephp info.php\n-su: /usr/bin/php: No such file or directory\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003ePHP が無いということか。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"php7-をインストールしよう\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#php7-%E3%82%92%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%97%E3%82%88%E3%81%86\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003ePHP7 をインストールしよう\u003c/h1\u003e\n\n\u003cp\u003e「Debian（jessie）にPHP 7をインストールする方法」 (約束の地)\u003cbr\u003e\n\u003ca href=\"http://obel.hatenablog.jp/entry/20160311/1457644814\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://obel.hatenablog.jp/entry/20160311/1457644814\u003c/a\u003e\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eapt-get install php\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eインストールする。php 指定で PHP7 相当らしい。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003ephp -v\nPHP 7.0.15-0ubuntu0.16.04.4 (cli) ( NTS )\nCopyright (c) 1997-2017 The PHP Group\nZend Engine v3.0.0, Copyright (c) 1998-2017 Zend Technologies\n    with Zend OPcache v7.0.15-0ubuntu0.16.04.4, Copyright (c) 1999-2017, by Zend Technologies\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eひとまず PHP7 はインストールした。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"apache-と-php-をアンインストールするには\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#apache-%E3%81%A8-php-%E3%82%92%E3%82%A2%E3%83%B3%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%99%E3%82%8B%E3%81%AB%E3%81%AF\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eApache と PHP をアンインストールするには？\u003c/h1\u003e\n\n\u003cp\u003e「Debian 完全にApache2をアンインストールし、再インストールする」 (SE'S BOOK)\u003cbr\u003e\n\u003ca href=\"https://viewse.blogspot.jp/2011/02/debian-apache2.html\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://viewse.blogspot.jp/2011/02/debian-apache2.html\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eまず、関連するパッケージを文字列検索する。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003edpkg --get-selections | grep apache\napache2                                         install\napache2-bin                                     install\napache2-data                                    install\napache2-utils                                   install\nlibapache2-mod-php5                             install\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e見つけたパッケージを削除する\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eapt-get remove --purge apache2 apache2-bin apache2-data apache2-utils libapache2-mod-php5\nReading package lists... Done\nBuilding dependency tree\nReading state information... Done\nThe following packages were automatically installed and are no longer required:\n  libapr1 libaprutil1 libaprutil1-dbd-sqlite3 libaprutil1-ldap liblua5.1-0 ssl-cert\nUse 'apt autoremove' to remove them.\nThe following packages will be REMOVED:\n  apache2* apache2-bin* apache2-data* apache2-utils* libapache2-mod-php5*\n0 upgraded, 0 newly installed, 5 to remove and 0 not upgraded.\nAfter this operation, 5,383 kB disk space will be freed.\nDo you want to continue? [Y/n] y\n(Reading database ... 45809 files and directories currently installed.)\nRemoving apache2 (2.4.18-2ubuntu3.1) ...\nPurging configuration files for apache2 (2.4.18-2ubuntu3.1) ...\ndpkg: warning: while removing apache2, directory '/var/www/html' not empty so not removed\nRemoving apache2-bin (2.4.18-2ubuntu3.1) ...\nRemoving apache2-data (2.4.18-2ubuntu3.1) ...\nRemoving apache2-utils (2.4.18-2ubuntu3.1) ...\nRemoving libapache2-mod-php5 (5.5.9+dfsg-1ubuntu4.21) ...\nPurging configuration files for libapache2-mod-php5 (5.5.9+dfsg-1ubuntu4.21) ...\nProcessing triggers for man-db (2.7.5-1) ...\nProcessing triggers for ufw (0.35-0ubuntu2) ...\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003edpkg --get-selections | grep apache\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eこれで apache 関連のパッケージを削除した。\u003cbr\u003e\n次に PHPに関連するパッケージを文字列検索する。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003edpkg --get-selections | grep php\nphp                                             install\nphp-common                                      install\nphp-pear                                        deinstall\nphp5-cli                                        deinstall\nphp5-common                                     install\nphp5-json                                       deinstall\nphp5-memcached                                  deinstall\nphp5-mysql                                      deinstall\nphp5-readline                                   deinstall\nphp7.0                                          install\nphp7.0-cli                                      install\nphp7.0-common                                   install\nphp7.0-fpm                                      install\nphp7.0-json                                     install\nphp7.0-opcache                                  install\nphp7.0-readline                                 install\nphp7.0-xml                                      deinstall\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e見つけたパッケージを削除する\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eapt-get remove --purge php php-common php-pear php5-cli php5-common php5-json php5-memcached php5-mysql php5-readline php7.0 php7.0-cli php7.0-common php7.0-fpm php7.0-json php7.0-opcache php7.0-readline php7.0-xml\nReading package lists... Done\nBuilding dependency tree\nReading state information... Done\nThe following packages were automatically installed and are no longer required:\n  libapr1 libaprutil1 libaprutil1-dbd-sqlite3 libaprutil1-ldap liblua5.1-0 ssl-cert\nUse 'apt autoremove' to remove them.\nThe following packages will be REMOVED:\n  php* php-common* php-pear* php5-cli* php5-common* php5-json* php5-memcached* php5-mysql* php5-readline*\n  php7.0* php7.0-cli* php7.0-common* php7.0-fpm* php7.0-json* php7.0-opcache* php7.0-readline* php7.0-xml*\n0 upgraded, 0 newly installed, 17 to remove and 0 not upgraded.\nAfter this operation, 14.1 MB disk space will be freed.\nDo you want to continue? [Y/n] y\n(Reading database ... 45161 files and directories currently installed.)\nRemoving php (1:7.0+35ubuntu6) ...\nRemoving php7.0 (7.0.15-0ubuntu0.16.04.4) ...\nRemoving php7.0-fpm (7.0.15-0ubuntu0.16.04.4) ...\nPurging configuration files for php7.0-fpm (7.0.15-0ubuntu0.16.04.4) ...\ndpkg: warning: while removing php7.0-fpm, directory '/etc/php/7.0/fpm/conf.d' not empty so not removed\nRemoving php7.0-cli (7.0.15-0ubuntu0.16.04.4) ...\nPurging configuration files for php7.0-cli (7.0.15-0ubuntu0.16.04.4) ...\ndpkg: warning: while removing php7.0-cli, directory '/etc/php/7.0/cli/conf.d' not empty so not removed\nRemoving php7.0-readline (7.0.15-0ubuntu0.16.04.4) ...\nPurging configuration files for php7.0-readline (7.0.15-0ubuntu0.16.04.4) ...\nRemoving php7.0-opcache (7.0.15-0ubuntu0.16.04.4) ...\nPurging configuration files for php7.0-opcache (7.0.15-0ubuntu0.16.04.4) ...\nRemoving php-pear (1:1.10.1+submodules+notgz-6) ...\nPurging configuration files for php-pear (1:1.10.1+submodules+notgz-6) ...\nRemoving php5-cli (5.5.9+dfsg-1ubuntu4.21) ...\nPurging configuration files for php5-cli (5.5.9+dfsg-1ubuntu4.21) ...\nRemoving php5-common (5.5.9+dfsg-1ubuntu4.21) ...\nPurging configuration files for php5-common (5.5.9+dfsg-1ubuntu4.21) ...\ndpkg: warning: while removing php5-common, directory '/usr/share/doc/php5-common' not empty so not removed\nRemoving php5-json (1.3.2-2build1) ...\nPurging configuration files for php5-json (1.3.2-2build1) ...\ndpkg: warning: while removing php5-json, directory '/usr/lib/php5/20121212' not empty so not removed\nRemoving php5-memcached (2.1.0-6build1) ...\nPurging configuration files for php5-memcached (2.1.0-6build1) ...\ndpkg: warning: while removing php5-memcached, directory '/usr/share/php/.registry/.channel.pecl.php.net' not empty so not removed\nRemoving php5-mysql (5.5.9+dfsg-1ubuntu4.21) ...\nPurging configuration files for php5-mysql (5.5.9+dfsg-1ubuntu4.21) ...\nRemoving php5-readline (5.5.9+dfsg-1ubuntu4.21) ...\nPurging configuration files for php5-readline (5.5.9+dfsg-1ubuntu4.21) ...\nRemoving php7.0-json (7.0.15-0ubuntu0.16.04.4) ...\nPurging configuration files for php7.0-json (7.0.15-0ubuntu0.16.04.4) ...\nRemoving php7.0-common (7.0.15-0ubuntu0.16.04.4) ...\nPurging configuration files for php7.0-common (7.0.15-0ubuntu0.16.04.4) ...\ndpkg: warning: while removing php7.0-common, directory '/etc/php/7.0/mods-available' not empty so not removed\nRemoving php7.0-xml (7.0.15-0ubuntu0.16.04.4) ...\nPurging configuration files for php7.0-xml (7.0.15-0ubuntu0.16.04.4) ...\nRemoving php-common (1:35ubuntu6) ...\nPurging configuration files for php-common (1:35ubuntu6) ...\nProcessing triggers for man-db (2.7.5-1) ...\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003edpkg --get-selections | grep php\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eこれで apache 関連のパッケージを削除した。\u003c/p\u003e\n\n\u003cp\u003e次に再インストールする。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eapt-get install apache2 php\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eアパッチを起動させてみる。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e/etc/init.d/apache2 start\n[ ok ] Starting apache2 (via systemctl): apache2.service.\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e404 Not Found になったが、代わりに html フォルダーではなく、その上の階層にアクセスすると\u003cbr\u003e\nIt works! のページが出た。\u003c/p\u003e\n\n\u003cp\u003eindex.php は相変わらずソースがそのまま出ている。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"また設定\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%BE%E3%81%9F%E8%A8%AD%E5%AE%9A\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eまた設定\u003c/h2\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003enano /etc/apache2/mods-enabled/mime.conf\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e220行目あたりに追記とのこと。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e# PHP extension\nAddHandler php5-script .php\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eアパッチを再起動する。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e/etc/init.d/apache2 start\n[ ok ] Starting apache2 (via systemctl): apache2.service.\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003ePHP はソースのまま出ている。\u003c/p\u003e\n\n\u003cp\u003e「PHPスクリプトを利用する」 (Server World)\u003cbr\u003e\n\u003ca href=\"https://www.server-world.info/query?os=Ubuntu_16.04\u0026amp;p=httpd\u0026amp;f=3\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://www.server-world.info/query?os=Ubuntu_16.04\u0026amp;p=httpd\u0026amp;f=3\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003ePHP をインストールする。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eapt-get -y install php php-cgi libapache2-mod-php php-common php-pear php-mbstring\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eアパッチを再起動する。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003esudo /etc/init.d/apache2 restart\n[ ok ] Restarting apache2 (via systemctl): apache2.service.\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"おや-phpinfo-が効いた\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%8A%E3%82%84-phpinfo-%E3%81%8C%E5%8A%B9%E3%81%84%E3%81%9F\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eおや？ phpinfo() が効いた\u003c/h1\u003e\n\n\u003cp\u003eじゃあ決め手は、\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eアパッチ　アンインストール\u003c/li\u003e\n\u003cli\u003ePHP アンインストール\u003c/li\u003e\n\u003cli\u003eアパッチとPHPを同時にインストール\u003c/li\u003e\n\u003cli\u003eapt-get -y install php php-cgi libapache2-mod-php php-common php-pear php-mbstring\u003c/li\u003e\n\u003cli\u003eアパッチ再起動「sudo /etc/init.d/apache2 restart」\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eこのあたりか。途中でディレクトリ階層も変わった。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"ブラウザでurlでアクセスして-getクエリー文字列を-プログラムに渡せるだろうか\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%96%E3%83%A9%E3%82%A6%E3%82%B6%E3%81%A7url%E3%81%A7%E3%82%A2%E3%82%AF%E3%82%BB%E3%82%B9%E3%81%97%E3%81%A6-get%E3%82%AF%E3%82%A8%E3%83%AA%E3%83%BC%E6%96%87%E5%AD%97%E5%88%97%E3%82%92-%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%A0%E3%81%AB%E6%B8%A1%E3%81%9B%E3%82%8B%E3%81%A0%E3%82%8D%E3%81%86%E3%81%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eブラウザでURLでアクセスして GETクエリー文字列を プログラムに渡せるだろうか？\u003c/h1\u003e\n\n\u003cp\u003e「HTTPを使うソケット通信」 (rsch)\u003cbr\u003e\n\u003ca href=\"http://www.rsch.tuis.ac.jp/~mizutani/online/software-basic2002/socket-http.html\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://www.rsch.tuis.ac.jp/~mizutani/online/software-basic2002/socket-http.html\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eサーバー側が欲しいんだが。\u003c/p\u003e\n\n\u003cp\u003e「【CakePHP】リクエストの取得方法」 (Qiita)\u003cbr\u003e\n\u003ca href=\"http://qiita.com/kazu56/items/7d344ccef56deef66a7a\" class=\"autolink\" id=\"reference-6c0d007076504f74893b\"\u003ehttp://qiita.com/kazu56/items/7d344ccef56deef66a7a\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eひとまず PHP でGETクエリー文字列を取得してみるか。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e    http://a.b.c.d/html/?shogi=sfen 3/1p1/1P1/3 w - 1 moves\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eみたいな感じで。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e$shogi = $this-\u0026gt;request-\u0026gt;query('shogi');\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eなんだこれ、ダメだぜ。\u003c/p\u003e\n\n\u003cp\u003e「クエリ文字列の全体を取得する。」 (php pro)\u003cbr\u003e\n\u003ca href=\"http://www.phppro.jp/qa/1572\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://www.phppro.jp/qa/1572\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e「urldecode」 (PHPマニュアル)\u003cbr\u003e\n\u003ca href=\"http://php.net/manual/ja/function.urldecode.php\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://php.net/manual/ja/function.urldecode.php\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e例えばこんな感じ。\u003c/p\u003e\n\n\u003cp\u003etamesi1.php\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u0026lt;?php\n$query = urldecode($_SERVER['QUERY_STRING']);\necho '（＾ｑ＾）' . $query . '\u0026lt;br /\u0026gt;';\necho 'クリックしろだぜ☆ｍ９（＾～＾）！\u0026lt;br /\u0026gt;';\necho '\u0026lt;a href=\"http://999.999.999.999/tamesi1.php?shogi=sfen 3/1p1/1P1/3 w - 1 moves\"\u0026gt;http://999.999.999.999/?shogi=sfen 3/1p1/1P1/3 w - 1 moves\u0026lt;/a\u0026gt;\u0026lt;br /\u0026gt;';\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eで、サーバー側でプログラムが動いているとして、どうやって　この文字列を渡すのか？\u003cbr\u003e\nポート番号が開いているとして、書き込めばいいのか？ PHP でできるだろうか？\u003c/p\u003e\n\n\u003cp\u003e「exeからphpにデータを渡す」 (teratail)\u003cbr\u003e\n\u003ca href=\"https://teratail.com/questions/55331\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://teratail.com/questions/55331\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eプロセス間通信を調べてみるか。\u003c/p\u003e\n\n\u003cp\u003e「メッセージキューの使い方(CとPHPでプロセス間通信)」 (Linux Install Memo)\u003cbr\u003e\n\u003ca href=\"https://linux.yebisu.jp/memo/630\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://linux.yebisu.jp/memo/630\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eメッセージ・キューというのもあるのか。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"メッセージキュー\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%AD%E3%83%A5%E3%83%BC\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eメッセージ・キュー\u003c/h1\u003e\n\n\u003cp\u003eとりあえず C# 側から調べてみよう。\u003c/p\u003e\n\n\u003cp\u003e「C# メッセージキューにメッセージを送信する」 (ITLAB51.COM)\u003cbr\u003e\n\u003ca href=\"http://www.itlab51.com/?p=4111\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://www.itlab51.com/?p=4111\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eウィンドウズの検索ボックスに「コンピューターの管理」と入れる。\u003c/p\u003e\n\n\u003cp\u003e[サービスとアプリケーション] - [メッセージ キュー] - [専用キュー]\u003c/p\u003e\n\n\u003cp\u003e今は空だが、ここに　メッセージを置けるらしい。\u003cbr\u003e\nあとで使ってみよう。\u003c/p\u003e\n\n\u003cp\u003e「C# メッセージキューからメッセージを受信する」 (ITLAB51.COM)\u003cbr\u003e\n\u003ca href=\"http://www.itlab51.com/?p=4173\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://www.itlab51.com/?p=4173\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e先に　メッセージ・キューを作成しないとダメみたいだ。\u003c/p\u003e\n\n\u003cp\u003e「C# メッセージキューに専用キューを作成する」 (ITLAB51.COM)\u003cbr\u003e\n\u003ca href=\"http://www.itlab51.com/?p=2322\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://www.itlab51.com/?p=2322\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eよし、Windowsでは確認できた。\u003c/p\u003e\n\n\u003cp\u003eC# サンプルプログラム\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eusing System;\nusing System.Messaging; // [References] - [Add Reference]\n\nnamespace MsgQueue\n{\n    /// \u0026lt;summary\u0026gt;\n    /// キュー（メッセージ箱）に送り込んだ情報があるか確認する方法。\n    /// (1) Windowsの検索ボックスに「コンピューターの管理」と入力。\n    /// (2) [サービスとアプリケーション] - [メッセージ キュー] を開く。\n    /// (3) [F5]キーで更新。\n    /// \u0026lt;/summary\u0026gt;\n    class Program\n    {\n        public const string QUEUE_NAME = @\".\\Private$\\testqueue\";\n\n        static void Main(string[] args)\n        {\n            for (;;)\n            {\n                Console.WriteLine(@\"選べだぜ☆（＾～＾）\n1   : メッセージ箱 作成\n2   : メッセージ   送信\n3   : メッセージ   受信\n4   : メッセージ箱 削除\nquit: 終了\n\");\n\n                int category = 0;\n                for (;;)\n                {\n                    string line = Console.ReadLine();\n                    switch (line)\n                    {\n                        case \"1\": category = 1; goto gt_EndLoop1;\n                        case \"2\": category = 2; goto gt_EndLoop1;\n                        case \"3\": category = 3; goto gt_EndLoop1;\n                        case \"4\": category = 4; goto gt_EndLoop1;\n                        case \"quit\": goto gt_Quit;\n                        default: break;\n                    }\n                }\n                gt_EndLoop1:\n                ;\n\n                switch (category)\n                {\n                    case 1:\n                        {\n                            if (MessageQueue.Exists(QUEUE_NAME))\n                            {\n                                Console.WriteLine(\"キュー[\"+ QUEUE_NAME + \"]は既存だぜ☆（＾～＾）\");\n                            }\n                            else\n                            {\n                                // キュー名は、大文字で指定しても小文字になる\n                                MessageQueue.Create(QUEUE_NAME);\n                            }\n                        }\n                        break;\n                    case 2:\n                        {\n                            MessageQueue mq = new MessageQueue((@\".\\Private$\\testqueue\"));\n                            Message msg = new Message();\n                            msg.Body = \"テストメッセージだぜ☆（＾▽＾）\";\n                            msg.Label = \"テストだぜ☆（＾～＾）\";\n                            mq.Send(msg);\n                        }\n                        break;\n                    case 3:\n                        {\n                            MessageQueue mq = new MessageQueue((@\".\\Private$\\testqueue\"));\n                            System.Messaging.Message msg = new System.Messaging.Message();\n                            msg = mq.Receive();\n                            msg.Formatter = new XmlMessageFormatter(new string[] { \"System.String, mscorlib\" });\n                            Console.WriteLine(msg.Body.ToString());\n                        }\n                        break;\n                    case 4:\n                        {\n                            if (MessageQueue.Exists(QUEUE_NAME))\n                            {\n                                MessageQueue.Delete(QUEUE_NAME);\n                            }\n                            else\n                            {\n                                Console.WriteLine(\"キュー[\" + QUEUE_NAME + \"]なんか無いぜ☆（＾～＾）\");\n                            }\n                        }\n                        break;\n                }\n            }\n            gt_Quit:\n            ;\n        }\n    }\n}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eUbuntu でも試してみよう。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003enano MsgQueue.cs\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003emcs MsgQueue.cs\nMsgQueue.cs(2,14): error CS0234: The type or namespace name `Messaging' does not exist in the namespace `System'. Are you missing an assembly reference?\nCompilation failed: 1 error(s), 0 warnings\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"どうやって-systemmessaging-の参照を追加するんだ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%A9%E3%81%86%E3%82%84%E3%81%A3%E3%81%A6-systemmessaging-%E3%81%AE%E5%8F%82%E7%85%A7%E3%82%92%E8%BF%BD%E5%8A%A0%E3%81%99%E3%82%8B%E3%82%93%E3%81%A0\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eどうやって System.Messaging の参照を追加するんだ？\u003c/h2\u003e\n\n\u003cp\u003e「「○○○.dllを参照に追加します」の意味は？」 (DOBON.NET)\u003cbr\u003e\n\u003ca href=\"http://dobon.net/vb/dotnet/help/addreference.html\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://dobon.net/vb/dotnet/help/addreference.html\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e「/reference」 (MSDN)\u003cbr\u003e\n\u003ca href=\"https://msdn.microsoft.com/ja-jp/library/2b07fd84(v=vs.100).aspx\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://msdn.microsoft.com/ja-jp/library/2b07fd84(v=vs.100).aspx\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eじゃあ、こんな感じでいいのか？\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003emcs /reference:messaging.dll MsgQueue.cs\nerror CS0006: Metadata file `messaging.dll' could not be found\nCompilation failed: 1 error(s), 0 warnings\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eまあ、 .dll 無いよな。どうするのか……。\u003c/p\u003e\n\n\u003cp\u003e「System messaging dll missing?」 (stack overflow)\u003cbr\u003e\n\u003ca href=\"http://stackoverflow.com/questions/13409342/system-messaging-dll-missing\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://stackoverflow.com/questions/13409342/system-messaging-dll-missing\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eこうか。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003emcs /reference:System.Messaging.dll MsgQueue.cs\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e\u003cstrong\u003e行けた！？\u003c/strong\u003e\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e./MsgQueue.exe\n選べだぜ☆（＾～＾）\n1   : メッセージ箱 作成\n2   : メッセージ   送信\n3   : メッセージ   受信\n4   : メッセージ箱 削除\nquit: 終了\n\n1\n選べだぜ☆（＾～＾）\n1   : メッセージ箱 作成\n2   : メッセージ   送信\n3   : メッセージ   受信\n4   : メッセージ箱 削除\nquit: 終了\n\n2\nInsert: Mono.Messaging.RabbitMQ.MessagingContext\n\nUnhandled Exception:\nSystem.Messaging.MessageQueueException: Unable to connect to Queue: localhost\\private$\\testqueue, Error: None of the specified endpoints were reachable\n  at System.Messaging.MessageQueue.Send (System.Object obj) \u0026lt;0x40f79d90 + 0x00227\u0026gt; in \u0026lt;filename unknown\u0026gt;:0\n  at (wrapper remoting-invoke-with-check) System.Messaging.MessageQueue:Send (object)\n  at MsgQueue.Program.Main (System.String[] args) \u0026lt;0x40f46d50 + 0x00233\u0026gt; in \u0026lt;filename unknown\u0026gt;:0\n[ERROR] FATAL UNHANDLED EXCEPTION: System.Messaging.MessageQueueException: Unable to connect to Queue: localhost\\private$\\testqueue, Error: None of the specified endpoints were reachable\n  at System.Messaging.MessageQueue.Send (System.Object obj) \u0026lt;0x40f79d90 + 0x00227\u0026gt; in \u0026lt;filename unknown\u0026gt;:0\n  at (wrapper remoting-invoke-with-check) System.Messaging.MessageQueue:Send (object)\n  at MsgQueue.Program.Main (System.String[] args) \u0026lt;0x40f46d50 + 0x00233\u0026gt; in \u0026lt;filename unknown\u0026gt;:0\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eなんのこっちゃ～。\u003c/p\u003e\n\n\u003cp\u003e「None of the specified endpoints were reachable」 (stack overflow)\u003cbr\u003e\n\u003ca href=\"http://stackoverflow.com/questions/32432018/none-of-the-specified-endpoints-were-reachable\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://stackoverflow.com/questions/32432018/none-of-the-specified-endpoints-were-reachable\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eシングルトンで解決するのか？\u003c/p\u003e\n\n\u003cp\u003e「Linux のメッセージキュー (IPC)」 (楽吾楽, Repeat myself)\u003cbr\u003e\n\u003ca href=\"http://blogs.yahoo.co.jp/ichi0346/34314386.html\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://blogs.yahoo.co.jp/ichi0346/34314386.html\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eうーむ、エラーが出るぜ。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003ecat /proc/sys/fs/mqueue/msg_max\n10\ncat /proc/sys/fs/mqueue/msgsize_max\n8192\ncat /proc/sys/fs/mqueue/queues_max\n256\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"qiitaのゲートウェイがタイムアウトした記事を変えよう\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#qiita%E3%81%AE%E3%82%B2%E3%83%BC%E3%83%88%E3%82%A6%E3%82%A7%E3%82%A4%E3%81%8C%E3%82%BF%E3%82%A4%E3%83%A0%E3%82%A2%E3%82%A6%E3%83%88%E3%81%97%E3%81%9F%E8%A8%98%E4%BA%8B%E3%82%92%E5%A4%89%E3%81%88%E3%82%88%E3%81%86\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eQiitaのゲートウェイがタイムアウトした。記事を変えよう。\u003c/h1\u003e\n\n\u003cp\u003e＜その２＞へ\u003c/p\u003e\n","createdAt":"2017-03-03T15:02:47Z","elapsedYearsFromLastModifiedAt":4,"encryptedId":"5JPpRS+Z3yrGK6llfoY3Ob5JzPRElcCW--Sw6yg0x3f7VPzB2U--xmEi2sJJ91hOZWW5a4iafA==","isBanned":false,"isDeprecated":true,"isDestroyableByViewer":false,"isEditRequestReadableByViewer":true,"isEditRequestSendableByViewer":true,"isLikableByViewer":true,"isLikedByViewer":false,"isPublic":true,"isSlide":false,"isStockableByViewer":true,"isStockedByViewer":false,"isSubscribableByViewer":false,"isSubscribedByViewer":false,"isUpdatableByViewer":false,"isUpdated":true,"lastModifiedAt":"2017-03-24T14:13:32Z","likesCount":8,"linkUrl":"https://qiita.com/muzudho1/items/af3537d36f16c063a572","organization":null,"originalId":473511,"stockedCount":10,"title":"コンピュータ将棋ソフトとの対局サーバーを立てよう＜その１＞","toc":"\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E8%A6%81%E4%BB%B6%E5%AE%9A%E7%BE%A9\"\u003e要件定義\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E6%80%9D%E3%81%84%E3%81%A4%E3%81%84%E3%81%A6%E3%81%BF%E3%82%88%E3%81%86\"\u003e思いついてみよう\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%86%E3%82%B9%E3%83%88%E7%92%B0%E5%A2%83%E3%82%92%E4%BD%9C%E3%82%8D%E3%81%86\"\u003eテスト環境を作ろう\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#bios%E3%81%8C%E8%B5%B7%E5%8B%95%E3%81%97%E3%81%AA%E3%81%84%E3%81%9C\"\u003eBIOSが起動しないぜ\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%AD%E3%83%BC%E3%82%AB%E3%83%AB%E3%83%86%E3%82%B9%E3%83%88%E7%92%B0%E5%A2%83-%E6%A7%8B%E7%AF%89%E3%81%A7%E3%81%8D%E3%81%AA%E3%81%8B%E3%81%A3%E3%81%9F%E3%81%9C\"\u003eローカルテスト環境 構築できなかったぜ。\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%B3%E3%83%B3%E3%83%94%E3%83%A5%E3%83%BC%E3%82%BF%E3%83%BC%E3%81%A8%E3%82%BB%E3%82%AD%E3%83%A5%E3%83%AA%E3%83%86%E3%82%A3\"\u003eコンピューターとセキュリティ\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%81%9D%E3%81%86%E3%81%84%E3%81%88%E3%81%B0%E3%83%AB%E3%83%BC%E3%83%88%E3%83%A6%E3%83%BC%E3%82%B6%E3%83%BC%E3%81%A8%E3%81%84%E3%81%86%E3%81%AE%E3%81%8C%E3%81%82%E3%81%A3%E3%81%9F%E3%81%AA\"\u003eそういえばルート・ユーザーというのがあったな\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89%E3%83%A9%E3%82%A4%E3%83%B3%E3%81%A0\"\u003eコマンドラインだ\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%91%E3%83%BC%E3%83%9F%E3%83%83%E3%82%B7%E3%83%A7%E3%83%B3\"\u003eパーミッション\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%E8%BB%A2%E9%80%81%E3%81%97%E3%82%88%E3%81%86\"\u003eファイルを転送しよう\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#g\"\u003eg++\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#apery-%E3%81%AE%E3%82%BD%E3%83%BC%E3%82%B9%E3%82%B3%E3%83%BC%E3%83%89%E3%82%92%E3%82%B3%E3%83%B3%E3%83%91%E3%82%A4%E3%83%AB%E3%81%97%E3%82%88%E3%81%86\"\u003eapery のソースコードをコンパイルしよう\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E9%BB%84%E7%B7%91%E8%89%B2%E3%81%AE-apery\"\u003e黄緑色の apery\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%A0%E3%82%92%E5%BC%B7%E5%88%B6%E7%B5%82%E4%BA%86%E3%81%95%E3%81%9B%E3%82%88%E3%81%86\"\u003eプログラムを強制終了させよう\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%A0%E3%82%92%E3%83%90%E3%83%83%E3%82%AF%E3%82%B0%E3%83%A9%E3%82%A6%E3%83%B3%E3%83%89%E3%81%A7%E5%AE%9F%E8%A1%8C%E3%81%95%E3%81%9B%E3%82%88%E3%81%86\"\u003eプログラムをバックグラウンドで実行させよう\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#apery%E3%81%AB%E6%A8%99%E6%BA%96%E5%85%A5%E5%8A%9B%E3%81%A7%E5%85%A5%E5%8A%9B%E3%81%97%E3%82%88%E3%81%86\"\u003eAperyに標準入力で入力しよう\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%87%E3%83%90%E3%83%83%E3%82%B0%E3%83%93%E3%83%AB%E3%83%89%E3%81%A8%E3%83%AA%E3%83%AA%E3%83%BC%E3%82%B9%E3%83%93%E3%83%AB%E3%83%89\"\u003eデバッグ・ビルド　と　リリース・ビルド\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%90%E3%83%83%E3%82%AF%E3%82%B0%E3%83%A9%E3%82%A6%E3%83%B3%E3%83%89%E3%81%AE%E3%83%97%E3%83%AD%E3%82%BB%E3%82%B9%E3%82%92%E6%AD%A2%E3%82%81%E3%82%88%E3%81%86\"\u003eバックグラウンドのプロセスを止めよう\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%E5%89%8A%E9%99%A4%E3%81%97%E3%81%A6%E3%82%82%E3%81%86%E4%B8%80%E5%9B%9E-make-%E3%81%99%E3%82%8B%E3%81%A8\"\u003eファイルを削除してもう一回 make すると？\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%81%97%E3%82%88%E3%81%86\"\u003eクリーンしよう\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%A4%E3%83%AA%E3%83%BC%E3%82%AC%E3%83%AB%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%A9%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3\"\u003eイリーガル　インストラクション\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#makefile-%E3%81%A8-make-publish\"\u003eMakefile と make publish\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%99%E3%83%B3%E3%83%81%E3%83%9E%E3%83%BC%E3%82%AF%E3%82%92%E5%8F%96%E3%81%A3%E3%81%A6%E3%81%BF%E3%82%88%E3%81%86\"\u003eベンチマークを取ってみよう\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%81%8D%E3%81%B5%E3%82%8F%E3%82%89%E3%81%B7%E3%82%8A%E3%83%BC%E3%81%A7-bench\"\u003eきふわらぷりーで bench\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#kill%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E3%81%BF%E3%82%88%E3%81%86\"\u003ekillコマンドを使ってみよう\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#profgen_sse2\"\u003eprofgen_sse2\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E8%A9%95%E4%BE%A1%E9%96%A2%E6%95%B0%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%8C%E7%84%A1%E3%81%84%E3%82%93%E3%81%98%E3%82%83%E3%81%AA%E3%81%84%E3%81%8B\"\u003e評価関数ファイルが無いんじゃないか？\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#ukamuse_sdt4zip\"\u003eukamuse_sdt4.zip\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%81%82%E3%81%A3bench-%E5%8B%95%E3%81%84%E3%81%9F\"\u003eあっ、bench 動いた。\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%81%98%E3%82%83%E3%81%82%E5%AF%BE%E5%B1%80%E3%81%AF%E3%81%A9%E3%81%86%E3%81%8B\"\u003eじゃあ対局はどうか？\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%A1%E3%82%A4%E3%83%B3%E3%83%AB%E3%83%BC%E3%83%97%E3%81%AB%E5%85%A5%E3%81%A3%E3%81%A6%E3%81%84%E3%82%8B%E3%81%AE%E3%81%A7%E3%81%AF\"\u003eメインループに入っているのでは？\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E6%89%8B%E5%8B%95%E3%81%A7%E5%AF%BE%E5%B1%80%E3%81%97%E3%82%88%E3%81%86%E3%81%9C\"\u003e手動で対局しようぜ\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E8%A8%AD%E5%AE%9A%E3%82%92%E8%A6%8B%E3%81%A6%E3%81%BF%E3%82%88%E3%81%86\"\u003e設定を見てみよう\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E6%AC%A1%E3%81%AF%E3%82%B7%E3%82%A7%E3%83%AB%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%97%E3%83%88%E3%81%8B\"\u003e次はシェル・スクリプトか？\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%81%A9%E3%81%AE%E3%82%B7%E3%82%A7%E3%83%AB%E3%82%92%E4%BD%BF%E3%81%86\"\u003eどのシェルを使う？\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%B7%E3%82%A7%E3%83%AB%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%97%E3%83%88%E3%82%92%E6%9B%B8%E3%81%93%E3%81%86\"\u003eシェル・スクリプトを書こう\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E6%95%B0%E7%A7%92%E5%BE%85%E3%81%A3%E3%81%A6%E3%81%8B%E3%82%89%E5%85%A5%E5%8A%9B%E3%81%97%E3%82%88%E3%81%86\"\u003e数秒待ってから入力しよう\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AF%BE%E5%B1%80%E3%82%82%E3%82%B7%E3%82%A7%E3%83%AB%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%97%E3%83%88%E3%81%A7%E6%9B%B8%E3%81%84%E3%81%A6%E3%81%BF%E3%82%88%E3%81%86\"\u003e対局も、シェル・スクリプトで書いてみよう\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89%E3%81%AE%E5%87%BA%E5%8A%9B%E3%82%92%E3%82%B7%E3%82%A7%E3%83%AB%E3%81%AE%E5%A4%89%E6%95%B0%E3%81%A7%E5%8F%97%E3%81%91%E5%8F%96%E3%82%8D%E3%81%86\"\u003eコマンドの出力を、シェルの変数で受け取ろう\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#bash-%E3%81%A7%E8%A4%87%E6%95%B0%E8%A1%8C%E3%83%86%E3%82%AD%E3%82%B9%E3%83%88%E3%82%92%EF%BC%91%E8%A1%8C%E6%AF%8E%E3%81%AB%E5%88%86%E5%89%B2%E3%81%97%E5%90%84%E8%A1%8C%E3%81%AB%E5%AF%BE%E3%81%97%E3%81%A6%E5%AF%BE%E5%BF%9C%E3%81%99%E3%82%8B%E5%87%A6%E7%90%86%E3%82%92%E6%9B%B8%E3%81%93%E3%81%86\"\u003ebash で複数行テキストを１行毎に分割し、各行に対して　対応する処理を書こう\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E9%85%8D%E5%88%97%E3%82%92%E4%BD%BF%E3%81%86%E3%81%AB%E3%81%AF\"\u003e配列を使うには？\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E9%85%8D%E5%88%97%E3%81%AB%E5%A4%89%E6%8F%9B\"\u003e配列に変換\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E9%85%8D%E5%88%97%E3%81%AE%E8%A6%81%E7%B4%A0%E3%81%AE%E4%B8%AD%E8%BA%AB%E3%82%92%E3%82%B9%E3%83%9A%E3%83%BC%E3%82%B9%E5%8C%BA%E5%88%87%E3%82%8A%E3%81%AB%E3%81%97%E3%82%88%E3%81%86\"\u003e配列の要素の中身を、スペース区切りにしよう\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%B5%E3%83%96%E3%83%AB%E3%83%BC%E3%83%81%E3%83%B3%E3%81%AB%E3%81%97%E3%82%88%E3%81%86\"\u003eサブルーチンにしよう\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E4%BB%95%E5%88%86%E3%81%91%E3%81%97%E3%82%88%E3%81%86\"\u003e仕分けしよう\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#ubuntu-%E3%81%AB-mono-%E3%82%92%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%97%E3%82%88%E3%81%86\"\u003eUbuntu に mono をインストールしよう\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%A0%E3%82%92%E4%BD%9C%E3%82%8D%E3%81%86\"\u003eサンプル・プログラムを作ろう\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#ubuntuc-%E3%81%A7%E3%81%AF%E5%85%A5%E5%8A%9B%E5%81%B4%E3%81%AE%E3%83%90%E3%83%83%E3%83%95%E3%82%A1%E3%83%BC%E3%81%8C%E3%83%95%E3%83%A9%E3%83%83%E3%82%B7%E3%83%A5%E3%81%95%E3%82%8C%E3%81%A6%E3%81%AA%E3%81%84%E3%81%AE%E3%81%8B\"\u003eUbuntu/C# では、入力側のバッファーがフラッシュされてないのか。\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#mono-complete-%E3%82%92%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%97%E3%81%BE%E3%81%97%E3%81%9F%E3%81%8B\"\u003emono-complete をインストールしましたか？\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%87%BA%E5%8A%9B%E3%82%92%E3%83%AA%E3%83%80%E3%82%A4%E3%83%AC%E3%82%AF%E3%83%88%E3%81%99%E3%82%8B%E3%81%A8%E3%81%84%E3%81%84%E3%81%AE%E3%81%A0%E3%82%8D%E3%81%86%E3%81%8B\"\u003e出力をリダイレクトするといいのだろうか？\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#ctrlz\"\u003e[Ctrl]+[Z]\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E6%A8%99%E6%BA%96%E5%85%A5%E5%87%BA%E5%8A%9B%E9%80%9A%E4%BF%A1%E3%81%AF%E3%82%80%E3%81%9A%E3%81%8B%E3%81%97%E3%81%84%E3%81%AE%E3%81%A7%E3%81%AF\"\u003e標準入出力通信は　むずかしいのでは？\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%B7%E3%82%A7%E3%83%AB%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%97%E3%83%88%E3%82%88%E3%82%8A%E3%82%BD%E3%82%B1%E3%83%83%E3%83%88%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%A0%E3%81%AE%E6%96%B9%E3%81%8C%E7%B0%A1%E5%8D%98%E3%81%AA%E3%82%93%E3%81%98%E3%82%83%E3%81%AA%E3%81%84%E3%81%8B\"\u003eシェル・スクリプトより、ソケット・プログラムの方が簡単なんじゃないか？\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#php-%E3%81%A8%E3%81%8B%E3%81%A7%E3%82%BD%E3%82%B1%E3%83%83%E3%83%88%E9%80%9A%E4%BF%A1%E3%81%A7%E3%81%8D%E3%82%8B%E3%82%93%E3%81%A0%E3%82%8D%E3%81%86%E3%81%8B\"\u003ePHP とかでソケット通信できるんだろうか？\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#php-%E3%82%92%E8%A9%A6%E3%81%9D%E3%81%86%E3%81%9C\"\u003ePHP を試そうぜ\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#php-%E3%82%92%E8%A8%AD%E5%AE%9A%E3%81%97%E3%82%88%E3%81%86\"\u003ePHP を設定しよう\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#varwwwhtml\"\u003evar/www/html\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#apache-%E3%82%92%E5%86%8D%E8%B5%B7%E5%8B%95%E3%81%97%E3%82%88%E3%81%86\"\u003eApache を再起動しよう\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#phpini-%E3%82%92%E8%A8%AD%E5%AE%9A%E3%81%97%E3%82%88%E3%81%86\"\u003ephp.ini を設定しよう\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#apache-%E3%81%AF%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%95%E3%82%8C%E3%81%A6%E3%81%84%E3%82%8B%E3%81%91%E3%81%A9%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%97%E3%81%A6%E3%81%BF%E3%82%88%E3%81%86\"\u003eApache はインストールされているけど、インストールしてみよう\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#yum-%E3%82%92%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%97%E3%82%88%E3%81%86\"\u003eyum をインストールしよう\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#httpd-%E3%81%AA%E3%82%93%E3%81%A7%E7%84%A1%E3%81%84%E3%81%AE\"\u003ehttpd なんで無いの？\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#apache-%E3%81%AE%E8%A8%AD%E5%AE%9A%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%A7-php-%E3%82%92%E8%A8%AD%E5%AE%9A%E3%81%97%E3%82%88%E3%81%86\"\u003eApache の設定ファイルで PHP を設定しよう\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#php5-%E3%83%87%E3%82%A3%E3%83%AC%E3%82%AF%E3%83%88%E3%83%AA%E3%82%92%E5%89%8A%E9%99%A4%E3%81%97%E3%81%A6%E3%81%BF%E3%82%88%E3%81%86\"\u003ephp5 ディレクトリを削除してみよう\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#aptitude-%E3%82%92%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%97%E3%82%88%E3%81%86\"\u003eaptitude をインストールしよう\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#apache%E3%81%AE%E8%A8%AD%E5%AE%9A%E3%81%A7php%E3%81%AE%E6%8B%A1%E5%BC%B5%E5%AD%90%E3%82%92%E7%B4%90%E4%BB%98%E3%81%91%E3%82%88%E3%81%86\"\u003eApacheの設定で、PHPの拡張子を紐付けよう\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#php7-%E3%82%92%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%97%E3%82%88%E3%81%86\"\u003ePHP7 をインストールしよう\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#apache-%E3%81%A8-php-%E3%82%92%E3%82%A2%E3%83%B3%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%99%E3%82%8B%E3%81%AB%E3%81%AF\"\u003eApache と PHP をアンインストールするには？\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%81%BE%E3%81%9F%E8%A8%AD%E5%AE%9A\"\u003eまた設定\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%81%8A%E3%82%84-phpinfo-%E3%81%8C%E5%8A%B9%E3%81%84%E3%81%9F\"\u003eおや？ phpinfo() が効いた\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%96%E3%83%A9%E3%82%A6%E3%82%B6%E3%81%A7url%E3%81%A7%E3%82%A2%E3%82%AF%E3%82%BB%E3%82%B9%E3%81%97%E3%81%A6-get%E3%82%AF%E3%82%A8%E3%83%AA%E3%83%BC%E6%96%87%E5%AD%97%E5%88%97%E3%82%92-%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%A0%E3%81%AB%E6%B8%A1%E3%81%9B%E3%82%8B%E3%81%A0%E3%82%8D%E3%81%86%E3%81%8B\"\u003eブラウザでURLでアクセスして GETクエリー文字列を プログラムに渡せるだろうか？\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%AD%E3%83%A5%E3%83%BC\"\u003eメッセージ・キュー\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%81%A9%E3%81%86%E3%82%84%E3%81%A3%E3%81%A6-systemmessaging-%E3%81%AE%E5%8F%82%E7%85%A7%E3%82%92%E8%BF%BD%E5%8A%A0%E3%81%99%E3%82%8B%E3%82%93%E3%81%A0\"\u003eどうやって System.Messaging の参照を追加するんだ？\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#qiita%E3%81%AE%E3%82%B2%E3%83%BC%E3%83%88%E3%82%A6%E3%82%A7%E3%82%A4%E3%81%8C%E3%82%BF%E3%82%A4%E3%83%A0%E3%82%A2%E3%82%A6%E3%83%88%E3%81%97%E3%81%9F%E8%A8%98%E4%BA%8B%E3%82%92%E5%A4%89%E3%81%88%E3%82%88%E3%81%86\"\u003eQiitaのゲートウェイがタイムアウトした。記事を変えよう。\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n","totalPv":4623,"uuid":"af3537d36f16c063a572","banReason":null,"adventCalendarItem":null,"author":{"encryptedId":"EkV1y26wQOZO8YHhHnJZHnrUah4Y--0+MfIb4wfcUDsTp6--YhhgYNhh754XhKqB88UZYg==","originalId":159417,"description":"（＾～＾）","facebookUrl":null,"githubUrl":"https://github.com/muzudho","isBlockingViewer":false,"isFollowableByViewer":true,"isFollowedByViewer":false,"isTweetWebNotificationReceivable":true,"linkedinUrl":null,"name":"むずでょ","profileImageUrl":"https://pbs.twimg.com/profile_images/378800000224959199/109762cc48c6e63fad3fbe01065cf862_normal.png","profileImageUrlW48":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fpbs.twimg.com%2Fprofile_images%2F378800000224959199%2F109762cc48c6e63fad3fbe01065cf862_normal.png?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=48\u0026s=ac753dd2bb5cdc1f7b4a59405a8d431d","profileImageUrlW75":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fpbs.twimg.com%2Fprofile_images%2F378800000224959199%2F109762cc48c6e63fad3fbe01065cf862_normal.png?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=3ed9df1f72e7b42b01bc26234820b49f","urlName":"muzudho1","websiteUrl":"http://kifuwarabe.warabenture.com/","twitterUrl":"https://twitter.com/muzudho1","twitterUrlName":"muzudho1","revealedOrganizations":{"edges":[]}},"tags":[{"name":"Bash","urlName":"bash"},{"name":"Ubuntu","urlName":"ubuntu"},{"name":"C#","urlName":"csharp"},{"name":"mono","urlName":"mono"},{"name":"コンピュータ将棋","urlName":"%e3%82%b3%e3%83%b3%e3%83%94%e3%83%a5%e3%83%bc%e3%82%bf%e5%b0%86%e6%a3%8b"}],"followingLikers":{"edges":[]},"comments":{"totalCount":0}},"comments":[],"client":null,"ads_event_emitter":null}}</script>
