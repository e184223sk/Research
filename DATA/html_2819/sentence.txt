More than 1 year has passed since last update.クライアント側にVue.jsをSPA（シングルページアプリケーション）ではない方法で利用することについて記述していきます。全体
　・Vue.jsとblumaの設定
　・cssをblumaに変更
　・バリデーションの変更（本稿）
　・Vue.jsでのコンポーネントの利用「ASp.Net Core でPostgreSQLを利用してIdentityで認証を使えるようにする」で作成した環境にVue.jsを組み込み、cssフレームワークをblumaに変更します。
- VisualStudio2019 Ver.16.2.3
- ASP.NET Core 2.2
- PostgreSQL 9.6 インストール済み、接続用のアカウント作成済み
- EntityFramework
- Vue.js 2.6.10
- bluma 0.7.5　前回までの作業でページから「Bootstrap」と「JQuery」を外して「bluma」を利用するまでを作りました。その結果、もともとJQueryで作られていたと思われるバリデーション機能が動作しなくなっています。
　クライアントでHTML5の機能で実行してもいいかと思っていたのですが、画面から操作している分には問題が無くとも「POST」を直接実行することがあるかもしれないので、サーバーと同じバリデーションが実行できるようにHTML5用のデータアノテーションを追加することにしました。　プロジェクト配下に「Authorization」を作成し、そこに以下のクラスを作ります。
　ちなみに既存の「Required」と区別するために「RequiredH5」としています。　クライアントの操作をするには以前はアダプターを作ってサービスに追加するような作業が必要だった様ですが、今は「IClientModelValidator」を継承して「AddValidation」を実装するといいようです。
　コンストラクタはデフォルトのメッセージを表示する引数無のコンストラクタと、エラーメッセージを引数とするコンストラクタを作っています。
　サーバー側のバリデーションは「IsValid」をオーバーライドして作成します。
　クライアント側のバリデーションというか、属性の追加は「AddValidation」で行います。「required」属性に「required」を設定し、「required-err-msg」にエラーメッセージを設定しています。「required」はHTML5の属性ですが、「required-err-msg」は独自の属性です。HTML5では残念ながらエラーメッセージは属性として設定できず、後述するjavascriptの「setCustomValidity」メソッドで設定する必要があります。　HTML5のバリデーションは、制約自身は属性で追加できますが、メッセージの変更にはJavaScriptの利用が必要になります。
　「wwwroot/js/vaidationH5.js」を以下のように作成します。　フォーム読み込み完了時に「input」タグのすべてに対して、「invalid」イベントのハンドラーを設定しています。現在Requiredのみ記述していますが、残りのバリデーションの対応は同じようにできるはずです。ちなみにバリデーションの条件（validityのメンバ）は以下のようになっているようです。　「asp-validation-summary」の対応もこの中で行っていて、サマリーが有れば表示しなければ非表示にしています。ただ、この処理はもう少し修正が必要かもしれません。　最終的にできたものはいずれGitHubに公開するつもりです。この処理を追加するのに「Pages/Shared/_Layout.cshtml」の最後にスクリプトを追加しておきます。　これで「RequiredH5」データアノテーションが完成です。　ログイン画面のデータモデル（Areas/Identity/Account/Login.cshtml.cs）に作成した「RequiredH5」データバリデーションを設定します。これで実行すると、以下のようにエラーメッセージが表示されるようになります。
　以上でバリデーションの対応は終わりです。（2019/10/15：「ASP.Net Core でjQuery無しでHTML5のバリデーションを利用する」にもう少し書き込んでいます。サンプルソースはGitHubに公開しています。）　これでようやくVue.jsについての作業に入ります。最初に記述したようにSPA（Single Page Application）にするつもりはなく、基本的にRazor Pageを利用したページを作成するのにVue.jsをクライアント側のコンポーネントの作成に利用したいのです。JQueryはよくできたライブラリだとは思いますが、動作の重さやセレクタの独自感が合わないんです。
　この計画に挫折したらこの先の記述は無くなっちゃいますけど。


