More than 1 year has passed since last update.サーバレスアーキテクチャでアプリを作る中で、Azure Functions上にてMecabを実行するにあたりちょっと面倒だったので手段について投稿します。ググればいくらでもありますがとりあえず以下参照。
【技術解説】形態素解析とは？MeCabインストール手順からPythonでの実行例までMecabの辞書はファイルパスを指定する方式なのでTMPに書き出す必要がありました。Logic Appsのデザイナーで見ると以下のような感じ
Azure Functionsでtemp fileを使うにて挙動を調査していた記事がありました。(以下引用)インスタンス間では共有されない
kuduのdebug consoleでは関数で作ったtemp fileは見えない
再起動すれば消える
同一Function App内であれば他関数とTMPディレクトリは共通（他関数が作ったファイルが参照できる）
再起動しなければ結構残ってる（いつ消えるか検証中。再デプロイくらいでは消えない）
容量は５００MBまで。実際に初回の起動は25秒程度かかりましたが即座に二回目を起動すると4秒程度でした。
もちろん、TMPに存在していたらファイルを生成しない、とかしてます。
ユーザー辞書は毎回置き直してます。そこはなんともです。頻度とかユーザー辞書の大きさによるかなと思っています。等々いくつか手段は考えられます。他に良い方法ありましたらご教示願います。githubに上げたいんですけどまだ整ってないので抜粋です。必要なところだけ抜いただけでこの状態で動かしていないので動かなかったらごめんなさい。環境という風に埋め込みリソースがあるとしてしたらとできました。


