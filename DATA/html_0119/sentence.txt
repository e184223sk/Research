2つのObservableCollectionを双方向に同期させたいことがあります。
以下のGIFは、左にObservableCollection&lt;int&gt;、右にObservableCollection&lt;string&gt;がBindingされています。2つのObservableCollectionを双方向に同期させて、どちらを変更しても、もう片方に反映されるデモです。デモはWPFで作成しましたが、ObservableCollection自体はWPFには依存しないので、UWPでもコンソールでも使えます。2つのObservableCollectionを同期するために、両方のCollectionChangedイベントを購読して、相手側を変更しています。
無限ループを避けるため、ローカル変数のisChangingで既に変更中かの状態を保持しています。使用方法は単純で元となるなるObservableCollectionから拡張メソッドで呼ぶだけです。その際に双方向の要素変換のデリゲートを引数に指定します。
ここではSource-&gt;Targetは数字を文字列にして固定文字列を足したもの、Target-&gt;Sourceは文字列の3文字目以降を数字に変換したもの、になっています。デモではViewを直接変更するため、あえてコードビハインドで変更しています。デモではわかりやすくするため、ObservableCollectionを両方ともViewにBindingしていましたが、この用途なら、どちらかのListBoxに双方向の変換のConverterを挟んだほうがよいです。
実際はModel層とViewModel層のObservableCollectionを同期したい、といった用途が多いと思います。ColletionChangedイベントの購読を解除する方法は無いため、2つのObservableCollectionの寿命が違う場合はメモリリークします。以下の場所においておきます。
https://github.com/soi013/ObservableColletionSyncedTest/VisualStudio 2019 Version 16.8.3
.NET Core 3.1
C#8


