More than 3 years have passed since last update.※環境はUnity2017.3.1p4でC#6.0を使っています。といったルールを決めてComponent（MonoBehaviour）を作ることは結構あると思います。でもPrefabやSceneを変更しているうちに、このルールが守られていないPrefabやSceneが作られてしまうことも結構あると思います。結果、Null Referenceを出したり、表示がおかしくなったりします。Componentを作った本人がPrefab変更している場合は、気がついてすぐ修正できるからまだ良い方です。ルールを知らないor忘れてる別の人が変更した場合、意図しない表示のまましばらく残っていたりします。
　開発規模が大きいと全部ルールが守られているかを確認するのは無理、というわけで自動化しましょう。各Componentにルールチェック処理を記述して、それを全部自動実行できるようにします。　まず、ルールチェックするComponentに同じinterfaceを継承させます。今回はinterface名をIAutomaticCheckerとしています。そしてCheck関数にルールを記述します。例えば以下のような記述をします。　ルールチェックだけでなく、自動修正までしてしまうとなお良し。　すべてのPrefabとSceneをOpenして、IAutomaticCheckerを探します。見つかったらルールチェック処理を実行してPrefab/Sceneを保存します。保存の際には、Dirtyフラグを使ってPrefab/Sceneが変更されたことをUnityに通知してあげる必要があります。　Assets以下を全部チェックする関数と、選択したファイルだけチェックする関数を用意しました。全ファイルが対象だと処理時間長すぎるということもありそうです。「実機ビルド前に実行する」とか「変更した人が変更分だけ毎回チェックする」とか色々運用方法はあると思います。


