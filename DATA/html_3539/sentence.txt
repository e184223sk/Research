More than 1 year has passed since last update.n-way弾とはシューティングでよくある扇状に弾が出るショットのことです。
はじめてUnityをさわりシューティングゲームを作ってたころ、3way弾の作成においてプレイヤーに弾を出す子オブジェクトを3つ付け、それぞれの角度を3方向に向けることで3way弾にするというかなりのごり押しなことをやってました。
ので今回はちゃんとfor文つかってのn-way弾作成です。前回の斜方投射のとこからコードを流用してるところが多いです。いろいろ試せるようpublicな変数でパラメータを調整できるようにしたのですが、ぱっとみじゃよくわからない感じになったので事前説明をしておきます。Degree
:扇状に出る弾の端から端までの角度Angle_Split
:角度の分割数。Degreeで決めた角度の範囲内に入る弾の数

相変わらずにイラストですみません。絵的にはこんな感じになります。インスペクター上

上二つは前回でも使ってた弾オジェクト入れと初速度の設定です。見てほしいのは下二つで、この場合だと45度の範囲に6way弾を出す設定になります。BulletSc.csは前回のと変わってないです。
あと、一応n-way弾として作ってるためあまり意味はないですが、Angle_Splitが1だった場合0割が発生してエラーがでるため、_thetaの下に対応の処理を入れてます。45度で6-way弾

90度で4-way弾

180度で18-way弾
Degreeを360にすれば全方位弾も放てます
360度で18-way弾
今回は上から敵が降ってくる体での設計なので、コードの中にいくつかマジックナンバー的なのがまぎれてしまってます。横シューに対応するにはいくつか角度の取り方を変える必要が在ります。
後いまさらながら変数名はAngle_Splitとかへんな名前にせず、普通にn_wayとかにしておけばよかったと思ってます。45度で6-way弾

_thetaの計算のとこを上記のように書き換えると右方向に進む横シュー用にはなりました。


