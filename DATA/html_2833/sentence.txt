More than 1 year has passed since last update.Meshは以下のようなデータを元に構成されています．結構おおいですねぇ，，でもこれらすべてを必ずしも設定せずともMeshを使うことは可能です．サンプルコードを見ながら説明していきます．頂点にはそれぞれindexが登録した順番に与えられます．なぜそのようなindexが与えられるかというと三角形を作る際に必要になります．「何番と何番と何番の点で三角形になってください～」って感じです．indexが付与されたことで識別が簡単になりますもんね．そこで重要なことがもう１つあります，それは番号を呼ぶ順番です．なんと呼ぶ順番によって表裏が変わってしまうのです．
Unityの座標系は左手座標系です(x，y，zそれぞれが右，上，奥が正の座標系).ポリゴンは左手座標系の場合，+Zの方向に視点を向けた際の時計まわりに頂点のインデックスを指定してあげると+zにを向いているカメラに向かって表向きとなって表示されます．これを反時計周りに登録してしまうとカリング（処理を軽くするために必要としない面の描画をしない最適化手法）の対象になってしまいカメラに向かって面が描画されない場合がありますので注意．Polygonは複数の点が集まった多角形のことを示します．それに対してMeshは4点ごと結んだ四角形のポリゴン(2つ三角形ポリゴンで構成された物)を扱っていくことを指します．sharedMeshはMeshFilterが持つメッシュを返し，meshの場合はまだメッシュが作成されていない場合(nullのとき)新しくメッシュをインスタンス化し返します．なので以下のコードのように初めはメッシュを持っていないが，meshを呼ぶことにとってインスタンス化されていることが確認できます．カリングの種類はsubShader内でレンダリングステートのカスタマイズ時に設定することが出来ます．
- Cull Back : 裏面を描画しない(一般的)
- Cull Front : 表面を描画しない
- Cull Off : どちらの面も描画するmaterialを作成して是非Sceneビューなどで確認してみてください．初めのサンプルコードの中で頂点に色の属性を持たせていましたが実際に反映はされていませんでした．マテリアル本来の性質を無効にし，頂点の色属性を最優先にするshaderのサンプルを載せておきます．
ColorMaterialを用いると，マテリアルにて設定された色の代わりに頂点ごとの色を使用します．AmbientAndDiffuse は、マテリアルの Ambient，Diffuse 値を置き換えます. Emission はマテリアルの Emission 値を置き換えます．つまりこの状態ではライティングなどの効果も受けません．1つのメッシュに対して一部分だけ異なるMaterialを適応させることも可能です．こんな感じ↓

全体のソースは後にあげます，重要な部分から先に説明します．
subMeshCountはメッシュに適応させるマテリアルの数を指定することが出来ます．今回の場合は2種類のマテリアルを適応させてあげたいので2を代入してあげています．またMeshRendererのmaterial.Sizeを2に増やしてあげてください．その後，setTriangleを呼ぶのですが第1引数には三角形を構成するインデックスのリスト，第2引数には何番目のマテリアルを使用するかを指定してあげます．（今回の場合は先にインデックスを作っておき，3の倍数の時に区切ってあげています．何故3の倍数かというと三角形を構成するインデックスなので3つごとに区切りが来るからです．）複数マテリアルをアタッチできる円柱をMeshを生成するソース↓


