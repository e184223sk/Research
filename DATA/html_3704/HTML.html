<!DOCTYPE html><html><head><meta charset="utf-8" /><title>Monobit Unity Networking 2.0(MUN)を使ってみた話 - Qiita</title><meta content="width=device-width,initial-scale=1,shrink-to-fit=no,viewport-fit=cover" name="viewport" /><meta content="#55c500" name="theme-color" /><meta content="XWpkTG32-_C4joZoJ_UsmDUi-zaH-hcrjF6ZC_FoFbk" name="google-site-verification" /><meta content="telephone=no" name="format-detection" /><link rel="canonical" href="https://qiita.com/publicClassMain/items/efb7cd2d6adaaa3582f8" /><link href="/manifest.json" rel="manifest" /><link href="/opensearch.xml" rel="search" title="Qiita" type="application/opensearchdescription+xml" /><link as="script" href="https://www.googletagservices.com/tag/js/gpt.js" rel="preload" /><link href="https://securepubads.g.doubleclick.net" rel="preconnect" /><script async="" src="https://www.googletagservices.com/tag/js/gpt.js"></script><meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="/Q9vyn7jpv7eT5N5sBvoTdG4YcJ9aj4IRFdcyAHAWMVGAWjdoswdrfDGkrPaHfUEJC50sz0lLM1rJtPxk3Tz1Q==" /><link rel="shortcut icon" type="image/x-icon" href="https://cdn.qiita.com/assets/favicons/public/production-c620d3e403342b1022967ba5e3db1aaa.ico" /><link rel="apple-touch-icon" type="image/png" href="https://cdn.qiita.com/assets/favicons/public/apple-touch-icon-ec5ba42a24ae923f16825592efdc356f.png" /><link rel="stylesheet" media="all" href="https://cdn.qiita.com/assets/public/article-2eaa7dbedc42a8ea65c722cda46d0ebb.min.css" /><script src="https://cdn.qiita.com/assets/public/v3-article-bundle-63de2d91fef827269d3f6b958db2335b.min.js" defer="defer"></script><meta name="twitter:card" content="summary_large_image"><meta content="@Qiita" name="twitter:site" /><meta property="og:type" content="article"><meta property="og:title" content="Monobit Unity Networking 2.0(MUN)を使ってみた話 - Qiita"><meta property="og:image" content="https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0&amp;w=1200&amp;mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND1UVzl1YjJKcGRDQlZibWwwZVNCT1pYUjNiM0pyYVc1bklESXVNQ2hOVlU0cDQ0S1M1TDJfNDRHajQ0R200NEdfNDRHZjZLbXgmdHh0LWNvbG9yPSUyMzMzMyZ0eHQtZm9udD1IaXJhZ2lubyUyMFNhbnMlMjBXNiZ0eHQtc2l6ZT01NCZ0eHQtY2xpcD1lbGxpcHNpcyZ0eHQtYWxpZ249Y2VudGVyJTJDbWlkZGxlJnM9NDYwMjIzNjExMWMxMzliNTk1ZjJkZDMwOTJlOTRiMDU&amp;mark-align=center%2Cmiddle&amp;blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RSEIxWW14cFkwTnNZWE56VFdGcGJnJnR4dC1jb2xvcj0lMjMzMzMmdHh0LWZvbnQ9SGlyYWdpbm8lMjBTYW5zJTIwVzYmdHh0LXNpemU9NDUmdHh0LWFsaWduPXJpZ2h0JTJDYm90dG9tJnM9NDQ5MGRmMDdkMjIwYjc4ZTc2MTA1MjNkMDc4NjE1ZmE&amp;blend-align=center%2Cmiddle&amp;blend-mode=normal&amp;s=eaf84601b79f27092996dd20b866f3de"><meta property="og:description" content="

はじめに

仕事でMonobit Unity Networkingについて調べる機会があったので，備忘録がてら記事にしました。
チュートリアルの内容のまとめと，ちょっと使うときに便利かなと思った実装法を中心に書きます。
サーバとか..."><meta content="https://qiita.com/publicClassMain/items/efb7cd2d6adaaa3582f8" property="og:url" /><meta content="Qiita" property="og:site_name" /><meta content="564524038" property="fb:admins" /><meta content="Network,C#,Unity,備忘録,MonobitUnityNetworking" name="keywords" /><script>!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window, document,'script',
'https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '668972150489891');
fbq('track', 'PageView');</script><style data-emotion-css="17jxvjw 11t2ec1 1dvr2p8 18lkoru 1g4cku8 1iupg5d ijvq0v 15cocm3 12rp90f 115f4t 1b8uj5v 79elbk 16hhh7b fcbn8c 1gj7nt 154zy0m yikrym 1jqivyb 1ode1bp le4d8r 1hbd3g7 helsa7 8qb8m4 2imjyh he5w1s 70qvj9 3ojehk 100alwu 1dtnjt5 10ougpm 1ay9vb9 m19uds cgzq40 1wa99t2 1l3zk9f 4czcte 1yzj1fm 1uv1qiv 109dbrr 5jpx49 mnxgyc 1vlpknv fsjkhv 1b17vb0 7i7f4d"}>.css-17jxvjw{display:grid;display:-ms-grid;grid-template-columns:80px minmax(0,1fr) 300px;-ms-grid-columns:80px minmax(0,1fr) 300px;grid-template-rows:minmax(270px,auto) 1fr;-ms-grid-rows:minmax(270px,auto) 1fr;max-width:1280px;margin-right:auto;margin-left:auto;padding-top:24px;padding-right:24px;padding-left:24px;}@media (max-width:1200px){.css-17jxvjw{padding-bottom:0;padding-left:0;padding-right:0;}}@media (max-width:992px){.css-17jxvjw{grid-template-columns:80px 452px 300px;-ms-grid-columns:80px 452px 300px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}}@media (max-width:770px){.css-17jxvjw{display:block;}}@media (max-width:480px){.css-17jxvjw{padding-top:0;}}.css-11t2ec1{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;z-index:5;position:-webkit-sticky;position:sticky;top:calc(56px + 24px + 16px + 32px - 16px);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:16px;width:80px;}.css-11t2ec1:after{content:'';display:table;}.css-11t2ec1:before{content:'';display:table;}@media (max-width:770px){.css-11t2ec1{display:none;}}.css-1dvr2p8{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-18lkoru{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;background-color:#FFFFFF;}.css-1g4cku8{display:inline-block;vertical-align:middle;height:20px;width:20px;fill:#55C500;}.css-1iupg5d{color:#55C500;cursor:pointer;font-size:14px;font-weight:bold;}.css-ijvq0v{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-15cocm3{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#FFFFFF;border:2px solid #6E6F70;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:2px 0px 0px;width:40px;}.css-12rp90f{display:inline-block;vertical-align:bottom;height:17.77777777777778px;width:16px;fill:#6E6F70;}.css-115f4t{color:#6E6F70;font-size:14px;font-weight:bold;}.css-1b8uj5v{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;margin-bottom:16px;padding:0;}.css-79elbk{position:relative;}.css-16hhh7b{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;padding:0;}.css-fcbn8c{display:none;bottom:initial;left:initial;right:initial;top:initial;left:100%;top:calc(-8px - (14px * 1.8) - 16px - 4px);}.css-1gj7nt{color:rgba(0,0,0,0.6);font-size:14px;font-weight:bold;line-height:1.8;padding:8px 16px;}.css-154zy0m{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.87);cursor:pointer;font-size:16px;font-weight:normal;line-height:1.8;padding:4px 16px;}.css-154zy0m:hover{-webkit-text-decoration:none;text-decoration:none;background-color:#F2F2F2;}.css-yikrym{width:20px;}.css-1jqivyb{color:rgba(0,0,0,0.6);font-size:13px;}.css-1ode1bp{background-color:rgba(0,0,0,0.12);height:1px;width:100%;margin:8px 0;}.css-le4d8r{display:inline-block;vertical-align:middle;height:13px;width:13px;fill:rgba(0,0,0,0.6);}.css-1hbd3g7{height:250px;}.css-helsa7{background-color:#FFFFFF;padding:32px;margin-bottom:24px;}@media (max-width:992px){.css-helsa7{margin:0 auto 40px;}}@media (max-width:480px){.css-helsa7{margin:0 0 40px;padding:32px 16px;}}.css-8qb8m4{margin-bottom:48px;}.css-2imjyh{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-he5w1s{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;width:100%;}@media (max-width:770px){.css-he5w1s{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}}.css-70qvj9{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.css-3ojehk{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;margin-right:4px;}.css-100alwu{display:inline-block;border-radius:50%;line-height:1;overflow:hidden;vertical-align:middle;}.css-1dtnjt5{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-10ougpm{color:rgba(0,0,0,0.87);font-size:14px;font-weight:600;line-height:1.8;margin-right:4px;text-wrap:break-word;word-break:break-all;}.css-1ay9vb9{margin-right:16px;}.css-m19uds{color:rgba(0,0,0,0.6);font-size:14px;line-height:1.8;}.css-cgzq40{color:rgba(0,0,0,0.87);font-size:32px;font-weight:bold;line-height:1.4;margin-top:8px;text-wrap:break-word;word-break:break-all;}.css-1wa99t2{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.6);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:8px;}.css-1l3zk9f{color:rgba(0,0,0,0.6);font-size:20px;margin-right:8px;}.css-4czcte{margin-right:4px;color:inherit;font-size:14px;line-height:1.8;}.css-4czcte:not(:last-child)::after{content:',';margin-right:4px;}.css-1yzj1fm{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:32px;}.css-1uv1qiv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-size:20px;height:32px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin-right:16px;outline:none;padding:0;width:32px;}.css-109dbrr{background-color:#F9F9F9;border-top:1px solid rgba(0,0,0,0.12);bottom:0;box-shadow:0px 1px 4px rgba(0,0,0,0.14);display:none;height:calc(env(safe-area-inset-bottom,0px) + 56px);-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding-bottom:env(safe-area-inset-bottom);position:-webkit-sticky;position:sticky;width:100%;z-index:2000;}@media (max-width:770px){.css-109dbrr{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}.css-5jpx49{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:space-evenly;-webkit-justify-content:space-evenly;-ms-flex-pack:space-evenly;justify-content:space-evenly;width:100%;}.css-mnxgyc{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1vlpknv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;margin-right:4px;background-color:#FFFFFF;}.css-fsjkhv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1b17vb0{color:#6E6F70;font-size:14px;font-weight:bold;margin-left:4px;}.css-7i7f4d{display:none;bottom:initial;left:initial;right:initial;top:initial;bottom:32px;right:0;}</style></head><body><div class="allWrapper"><div><div id="GlobalHeader-react-component-216d3c55-0142-4d37-85c2-c0be1f4ff2c1"><div class="st-Header"><div class="st-Header_container"><div class="st-Header_start"><a href="/" class="st-Header_logo"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 426.57 130"><circle cx="167.08" cy="21.4" r="12.28"></circle><path d="M250.81 29.66h23.48v18.9h-23.48z"></path><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z"></path><circle cx="216.33" cy="21.4" r="12.28"></circle></svg></a><div class="st-Header_communitySelector" tabindex="0"><span class="fa fa-caret-down"></span></div><div class="st-Header_dropdown"><div class="st-Header_dropdownHeading">Qiita Teams that are logged in</div><div class="st-Header_dropdownItemNote">You are not logged in to any team</div><hr class="st-Header_dropdownDivider st-Header_dropdownDivider-shrink"/><a href="https://teams-center.qiita.com/find_team" class="st-Header_dropdownItem"><span class="fa fa-fw fa-sign-in st-Header_dropdownItemIcon"></span><div>Log in to Qiita Team</div></a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Community</div><a href="/organizations" class="st-Header_dropdownItem">Organization</a><a href="/official-events/open" class="st-Header_dropdownItem">Event</a><a href="/advent-calendar" class="st-Header_dropdownItem">Advent Calendar</a><a href="https://qiitadon.com/" class="st-Header_dropdownItem" target="_blank">Qiitadon (β)</a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Service</div><a href="https://jobs.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Jobs</a><a href="https://zine.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Zine</a><a href="https://blog.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Blog</a></div><form class="st-Header_search" action="/search" method="get"><span class="fa fa-search st-Header_searchIcon"></span><input type="search" class="st-Header_searchInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form><form class="st-Header_searchModal" action="/search" method="get"><input type="text" class="st-Header_searchModalInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form></div><div class="st-Header_end"><div class="st-Header_searchButton"><span class="fa fa-search"></span></div><a class="st-Header_signupButton" href="/signup?redirect_to=%2FpublicClassMain%2Fitems%2Fefb7cd2d6adaaa3582f8">Signup</a><a class="st-Header_loginLink" href="/login?redirect_to=%2FpublicClassMain%2Fitems%2Fefb7cd2d6adaaa3582f8">Login</a></div><div class="st-Header_overlay"></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="GlobalHeader" data-dom-id="GlobalHeader-react-component-216d3c55-0142-4d37-85c2-c0be1f4ff2c1">{"unreadNotificationsCount":null,"realms":[{"humanName":"Qiita","isCurrentRealm":true,"isQiita":true,"isQiitaTeam":false,"loggedInUser":null,"teamId":null,"url":"https://qiita.com/"}],"teamFindUrl":"https://teams-center.qiita.com/find_team","isTeamOnlyUser":null,"currentUser":null}</script>
      
</div><div class="st-HeaderAlert st-HeaderAlert-warning"><div class="st-HeaderAlert_body"></div></div><script type="application/ld+json">{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"/","name":"Qiita"}},{"@type":"ListItem","position":2,"item":{"@id":"/tags/network","name":"Network"}}]}</script><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","datePublished":"2021-05-01T00:24:56.000+09:00","dateModified":"2021-05-01T19:01:17.000+09:00","headline":"Monobit Unity Networking 2.0(MUN)を使ってみた話","image":"https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0\u0026w=1200\u0026mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND1UVzl1YjJKcGRDQlZibWwwZVNCT1pYUjNiM0pyYVc1bklESXVNQ2hOVlU0cDQ0S1M1TDJfNDRHajQ0R200NEdfNDRHZjZLbXgmdHh0LWNvbG9yPSUyMzMzMyZ0eHQtZm9udD1IaXJhZ2lubyUyMFNhbnMlMjBXNiZ0eHQtc2l6ZT01NCZ0eHQtY2xpcD1lbGxpcHNpcyZ0eHQtYWxpZ249Y2VudGVyJTJDbWlkZGxlJnM9NDYwMjIzNjExMWMxMzliNTk1ZjJkZDMwOTJlOTRiMDU\u0026mark-align=center%2Cmiddle\u0026blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RSEIxWW14cFkwTnNZWE56VFdGcGJnJnR4dC1jb2xvcj0lMjMzMzMmdHh0LWZvbnQ9SGlyYWdpbm8lMjBTYW5zJTIwVzYmdHh0LXNpemU9NDUmdHh0LWFsaWduPXJpZ2h0JTJDYm90dG9tJnM9NDQ5MGRmMDdkMjIwYjc4ZTc2MTA1MjNkMDc4NjE1ZmE\u0026blend-align=center%2Cmiddle\u0026blend-mode=normal\u0026s=eaf84601b79f27092996dd20b866f3de","mainEntityOfPage":"https://qiita.com/publicClassMain/items/efb7cd2d6adaaa3582f8","author":{"@type":"Person","address":"","email":null,"identifier":"publicClassMain","name":"publicClassMain","image":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fpbs.twimg.com%2Fprofile_images%2F1220993521823277057%2F6KHCOQ03_bigger.jpg?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=21ab0ca1d62061f5a82afeec09ac9db3","url":"https://qiita.com/publicClassMain","description":"気ままにものづくりをする大学\r\n\r\nLang: C/C++, Java, C#, Python, Arudino, Unity, Vue.js, React\r\nInterests: IoT, 機械学習, VR/AR, マイコン制御, オブジェクト指向","memberOf":[]},"publisher":{"@type":"Organization","name":"Qiita","logo":{"@type":"ImageObject","url":"//cdn.qiita.com/assets/public/qiita-logo-c39ded593afa388e2e1ba435b110554e.png"}}}</script><style type="text/css">.wb-CampaignLink {
  background-color: #333333;
  width: 100%;
}

.wb-CampaignLink_container {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  max-width: 1100px;
  margin: 0 auto;
  font-size: 13px;
  padding: 0.8em;
}
.wb-CampaignLink_container > a {
  color: #fff;
}

.wb-CampaignLink_container > a:hover {
  text-decoration: underline;
}</style><div class="wb-CampaignLink"><div class="wb-CampaignLink_container"><a target="_blank" id="header_text_message_1" href="https://increments.connpass.com/event/211948/">Qiita創業者海野氏登壇！Qiita エンジニアフェスタ 2021 Online Meetupを9/9(木)に開催</a><a target="_blank" id="header_text_message_2" href="https://increments.connpass.com/event/211948/">詳しくはこちら</a></div><script>td.trackEvent(
  'front_events',
  {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"publicClassMain","type":"items","id":"efb7cd2d6adaaa3582f8"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Show","data":{"message":"Qiita創業者海野氏登壇！Qiita エンジニアフェスタ 2021 Online Meetupを9/9(木)に開催","url":"https://increments.connpass.com/event/211948/","sub_message":"詳しくはこちら"}}
)</script><script>document.getElementById('header_text_message_1').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"publicClassMain","type":"items","id":"efb7cd2d6adaaa3582f8"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":1,"pos_id":"header_text_message_1","message":"Qiita創業者海野氏登壇！Qiita エンジニアフェスタ 2021 Online Meetupを9/9(木)に開催","url":"https://increments.connpass.com/event/211948/","sub_message":"詳しくはこちら"}}
  )
})</script><script>document.getElementById('header_text_message_2').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"publicClassMain","type":"items","id":"efb7cd2d6adaaa3582f8"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":1,"pos_id":"header_text_message_2","message":"Qiita創業者海野氏登壇！Qiita エンジニアフェスタ 2021 Online Meetupを9/9(木)に開催","url":"https://increments.connpass.com/event/211948/","sub_message":"詳しくはこちら"}}
  )
})</script></div><script type="application/json" id="js-react-on-rails-context">{"railsEnv":"production","inMailer":false,"i18nLocale":"en","i18nDefaultLocale":"en","href":"https://qiita.com/publicClassMain/items/efb7cd2d6adaaa3582f8","location":"/publicClassMain/items/efb7cd2d6adaaa3582f8","scheme":"https","host":"qiita.com","port":null,"pathname":"/publicClassMain/items/efb7cd2d6adaaa3582f8","search":null,"httpAcceptLanguage":null,"actionPath":"public/items#show","settings":{"analyticsTrackingId":"UA-24675221-12","assetsMap":{},"csrfToken":"AzpQTpY2rgcEsZt/U83wwIj2p8gGh8yMuEBaNVBH2vK4NFdZShkVVCo4mrU5y+2JfWCyuUbI3kmXMdUMwvNx4g==","locale":"en"},"currentUser":null,"isLoggedIn":false,"recaptchaSiteKey":"6LfNkiQTAAAAAM3UGnSquBy2akTITGNMO_QDxMw6","serverSide":false}</script>
<div id="PersonalArticlePage-react-component-629a0dbf-56d3-4f0e-9bb0-14b95c0ba853"><div class="p-items_wrapper"><div class=" css-17jxvjw"><div class="css-11t2ec1"><div class="css-1dvr2p8"><button class=" css-18lkoru"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/publicClassMain/items/efb7cd2d6adaaa3582f8/likers" class="css-1iupg5d">2</a></div><div class="css-ijvq0v"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-115f4t">2</span></div><div class="css-1b8uj5v"><span class="fa fa-twitter"></span></div><div class="css-1b8uj5v"><span class="fa fa-facebook"></span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-fcbn8c"><div class="css-1gj7nt">Improve article</div><a href="/drafts/efb7cd2d6adaaa3582f8/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/publicClassMain/items/efb7cd2d6adaaa3582f8/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/publicClassMain/items/efb7cd2d6adaaa3582f8/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/publicClassMain/items/efb7cd2d6adaaa3582f8/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/publicClassMain/items/efb7cd2d6adaaa3582f8.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div><div class="p-items_options"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_toc"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_main"><div class="css-helsa7"><div class="css-8qb8m4"><div class="css-2imjyh"><div class="css-he5w1s"><div class="css-70qvj9"><div class="css-3ojehk"><a href="/publicClassMain"><img class="css-100alwu eyfquo10" src="https://pbs.twimg.com/profile_images/1220993521823277057/6KHCOQ03_bigger.jpg" width="24" height="24" loading="lazy"/></a></div><div class="css-1dtnjt5"><a href="/publicClassMain" class="css-10ougpm">@<!-- -->publicClassMain</a><div class="css-1ay9vb9"><span><meta content="2021-04-30T15:24:56Z"/><time dateTime="2021-05-01T10:01:17Z" class="css-m19uds">updated at 2021-05-01</time></span></div></div></div></div></div><h1 class="css-cgzq40">Monobit Unity Networking 2.0(MUN)を使ってみた話</h1><div class="css-1wa99t2"><span class="fa fa-tags mr-1of2 css-1l3zk9f" aria-hidden="true"></span><a href="/tags/network" class="css-4czcte">Network</a><a href="/tags/csharp" class="css-4czcte">C#</a><a href="/tags/unity" class="css-4czcte">Unity</a><a href="/tags/%e5%82%99%e5%bf%98%e9%8c%b2" class="css-4czcte">備忘録</a><a href="/tags/monobitunitynetworking" class="css-4czcte">MonobitUnityNetworking</a></div></div><section class="it-MdContent"><div id="personal-public-article-body"><div>
<h1>
<span id="はじめに" class="fragment"></span><a href="#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB"><i class="fa fa-link"></i></a>はじめに</h1>

<p>仕事でMonobit Unity Networkingについて調べる機会があったので，備忘録がてら記事にしました。<br>
チュートリアルの内容のまとめと，ちょっと使うときに便利かなと思った実装法を中心に書きます。<br>
サーバとかの設定は公式が結構ちゃんとドキュメント出してくれてるので（<a href="http://www.monobitengine.com/doc/mun/" rel="nofollow noopener" target="_blank">参考</a>），この記事では基本的にコードとかの実装方面をまとめていきます。<br>
かなりふわふわしてる記事なので，間違い等あればコメントで指摘していただけると幸いです。<br>
あと掲載コードについては申し訳ないんですが，全部について動くかの検証はしてないです。動いたコードに近いコードを載せるように努力してますが，動かなかったら文句言ってください。気力や時間があったら検証します。</p>

<h1>
<span id="monobit-unity-networking-とは" class="fragment"></span><a href="#monobit-unity-networking-%E3%81%A8%E3%81%AF"><i class="fa fa-link"></i></a>Monobit Unity Networking とは</h1>

<p>Monobit Unity Networking(MUN)とは，モノビットエンジンが提供する国産Unity用通信ミドルウェアです。つまりUnityでマルチプレイとか通信とかをやるためのアセットです。<br>
通信量に合わせて課金されるタイプなので，全機能を使うのにお金はかかりません。<br>
基本的にはUnityで作ったクライアント間のP2P通信で，この記事では取り上げませんが，オンプレミス版も提供されています。<br>
詳しくは<a href="https://www.monobitengine.com/" rel="nofollow noopener" target="_blank">ここ</a></p>

<h1>
<span id="前提環境" class="fragment"></span><a href="#%E5%89%8D%E6%8F%90%E7%92%B0%E5%A2%83"><i class="fa fa-link"></i></a>前提環境</h1>

<p>Unity 2020.3.5f<br>
MUN 2.8.0</p>

<h1>
<span id="基本的な機能と実装" class="fragment"></span><a href="#%E5%9F%BA%E6%9C%AC%E7%9A%84%E3%81%AA%E6%A9%9F%E8%83%BD%E3%81%A8%E5%AE%9F%E8%A3%85"><i class="fa fa-link"></i></a>基本的な機能と実装</h1>

<h2>
<span id="基礎的な用語" class="fragment"></span><a href="#%E5%9F%BA%E7%A4%8E%E7%9A%84%E3%81%AA%E7%94%A8%E8%AA%9E"><i class="fa fa-link"></i></a>基礎的な用語</h2>

<p>ルーム：プレイヤーが実際に通信している部屋<br>
ロビー：ルームの集まり，ここではプレイヤー間の通信はできない</p>

<h2>
<span id="monobehaviorの上書き" class="fragment"></span><a href="#monobehavior%E3%81%AE%E4%B8%8A%E6%9B%B8%E3%81%8D"><i class="fa fa-link"></i></a>MonoBehaviorの上書き</h2>

<p>Munを使う上で，<code>MonoBehavior</code>の代替クラスがあります。主に<code>MonobitEngine.MonoBehavior</code>と<code>MonobitEngine.MunMonoBehavior</code>があります。後者は接続やルームの入室のコールバックが定義されてます。<br>
<code>MonobitEngine.MonoBehavior</code>は<code>MonobitEngine.MunMonoBehavior</code>を含めた大体のMonobitで定義されるコンポーネントの基底クラスになってるという特徴がありますが，多分ユーザで使う分には<code>MonobitEngine.MunMonoBehavior</code>を継承しとけば十分だと思います。だって継承されてるから<code>MonobitEngine.MonoBehavior</code>の全機能使えるし。</p>

<h2>
<span id="サーバへの接続ルーム入室" class="fragment"></span><a href="#%E3%82%B5%E3%83%BC%E3%83%90%E3%81%B8%E3%81%AE%E6%8E%A5%E7%B6%9A%E3%83%AB%E3%83%BC%E3%83%A0%E5%85%A5%E5%AE%A4"><i class="fa fa-link"></i></a>サーバへの接続〜ルーム入室</h2>

<p>ちなみにちょくちょく出てくる<code>MonobitEngine.MonobitNetwork</code>は静的クラスなのでMunを導入しておけばどこでも呼べます。</p>

<h3>
<span id="サーバへの接続切断" class="fragment"></span><a href="#%E3%82%B5%E3%83%BC%E3%83%90%E3%81%B8%E3%81%AE%E6%8E%A5%E7%B6%9A%E5%88%87%E6%96%AD"><i class="fa fa-link"></i></a>サーバへの接続・切断</h3>

<p><a href="http://www.monobitengine.com/doc/mun/contents/FeatureClient/ConnectToServer.htm" rel="nofollow noopener" target="_blank">公式記事（サーバへの接続）</a><br>
<a href="http://www.monobitengine.com/doc/mun/contents/FeatureClient/DisconnectFromServer.htm" rel="nofollow noopener" target="_blank">公式記事（サーバからの切断）</a></p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="c1">//サーバへの接続</span>
<span class="c1">//gameVersion:ゲームのバージョンを表す文字列</span>
<span class="n">MonobitEngine</span><span class="p">.</span><span class="n">MonobitNetwork</span><span class="p">.</span><span class="nf">ConnectServer</span><span class="p">(</span><span class="kt">string</span> <span class="n">gameVersion</span><span class="p">)</span>

<span class="c1">//サーバからの切断</span>
<span class="n">MonobitEngine</span><span class="p">.</span><span class="n">MonobitNetwork</span><span class="p">.</span><span class="nf">DisconnectServer</span><span class="p">()</span>
</code></pre></div></div>

<p>この際，<code>MonobitEngine.MonobitNetwork.autoJoinLobby</code>を<strong>事前に</strong><code>true</code>にしておくとデフォルトのロビーに入ってくれます。</p>

<h3>
<span id="ロビーへの入室退出ほか操作" class="fragment"></span><a href="#%E3%83%AD%E3%83%93%E3%83%BC%E3%81%B8%E3%81%AE%E5%85%A5%E5%AE%A4%E9%80%80%E5%87%BA%E3%81%BB%E3%81%8B%E6%93%8D%E4%BD%9C"><i class="fa fa-link"></i></a>ロビーへの入室・退出・ほか操作</h3>

<p><a href="http://www.monobitengine.com/doc/mun/contents/FeatureClient/CreateAndJoinLobby.htm" rel="nofollow noopener" target="_blank">公式記事（ロビー入室）</a><br>
<a href="http://www.monobitengine.com/doc/mun/contents/FeatureClient/LeaveLobby.htm" rel="nofollow noopener" target="_blank">公式記事（ロビー退出）</a><br>
前述した<code>MonobitEngine.MonobitNetwork.autoJoinLobby</code>のフラグを立てて入室してやるとここら辺の処理は省略できます。</p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="c1">//デフォルトロビーへの入室</span>
<span class="n">MonobitEngine</span><span class="p">.</span><span class="n">MonobitNetwork</span><span class="p">.</span><span class="nf">JoinLobby</span><span class="p">()</span>

<span class="c1">//指定したロビーへの入室</span>
<span class="c1">//lobbyInfo:ロビー設定とか</span>
<span class="c1">//ロビーがなかったら勝手に作るので注意</span>
<span class="n">MonobitEngine</span><span class="p">.</span><span class="n">MonobitNetwork</span><span class="p">.</span><span class="nf">JoinLobby</span><span class="p">(</span><span class="n">MonobitEngine</span><span class="p">.</span><span class="n">LobbyInfo</span> <span class="n">lobbyInfo</span><span class="p">)</span>

<span class="c1">//ロビーからの退出</span>
<span class="n">MonobitEngine</span><span class="p">.</span><span class="n">MonobitNetwork</span><span class="p">.</span><span class="nf">LeaveLobby</span><span class="p">()</span>
</code></pre></div></div>

<p><code>LobbyInfo</code>には<code>Name</code>と<code>Kind</code>のプロパティがありますが，<code>Kind</code>はドキュメントにも詳しい仕様が書いてなかったので正直よくわかりません。誰か見つけたら教えてください（他力本願）</p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="c1">//lobbyInfoの実装例</span>
<span class="kt">var</span> <span class="n">info</span> <span class="p">=</span> <span class="k">new</span> <span class="n">MonobitEngine</span><span class="p">.</span><span class="nf">MonobitNetwork</span><span class="p">();</span>
<span class="n">info</span><span class="p">.</span><span class="n">Kind</span> <span class="p">=</span> <span class="n">LobbyKind</span><span class="p">.</span><span class="n">Default</span><span class="p">;</span>
<span class="n">lobby</span><span class="p">.</span><span class="n">Name</span> <span class="p">=</span> <span class="s">"MyLobby"</span><span class="p">;</span>
<span class="n">MonobitEngine</span><span class="p">.</span><span class="n">MonobitNetwork</span><span class="p">.</span><span class="nf">JoinLobby</span><span class="p">(</span><span class="n">info</span><span class="p">);</span>
</code></pre></div></div>

<p><a href="http://www.monobitengine.com/doc/mun/contents/FeatureClient/GetRoomData.htm" rel="nofollow noopener" target="_blank">公式記事（ルーム一覧の取得）</a><br>
また，ロビーの中からは公開ルームの一覧を取得できます。</p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="c1">//公開ルームを全取得</span>
<span class="c1">//RoomData[]で帰ってきます</span>
<span class="n">MonobitEngine</span><span class="p">.</span><span class="n">MonobitNetwork</span><span class="p">.</span><span class="nf">GetRoomData</span><span class="p">()</span>
</code></pre></div></div>

<h3>
<span id="ルーム作成入室退出" class="fragment"></span><a href="#%E3%83%AB%E3%83%BC%E3%83%A0%E4%BD%9C%E6%88%90%E5%85%A5%E5%AE%A4%E9%80%80%E5%87%BA"><i class="fa fa-link"></i></a>ルーム作成・入室・退出</h3>

<p><a href="http://www.monobitengine.com/doc/mun/contents/FeatureClient/CreateRoom.htm" rel="nofollow noopener" target="_blank">公式記事（ルーム作成）</a><br>
<a href="http://www.monobitengine.com/doc/mun/contents/FeatureClient/JoinRoom.htm" rel="nofollow noopener" target="_blank">公式記事（ルーム入室）</a><br>
<a href="http://www.monobitengine.com/doc/mun/contents/FeatureClient/LeaveRoom.htm" rel="nofollow noopener" target="_blank">公式記事（ルーム退出）</a></p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="c1">//ルーム作成</span>
<span class="c1">//roomName: ルーム名</span>
<span class="c1">//roomSettings: ルームの設定</span>
<span class="c1">//lobbyInfo:属するロビー</span>
<span class="n">MonobitEngine</span><span class="p">.</span><span class="n">MonobitNetwork</span><span class="p">.</span><span class="nf">CreateRoom</span><span class="p">(</span><span class="kt">string</span> <span class="n">roomName</span><span class="p">,</span> <span class="n">MonobitEngine</span><span class="p">.</span><span class="n">RoomSettings</span> <span class="n">roomSettings</span><span class="p">,</span> <span class="n">MonobitEngine</span><span class="p">.</span><span class="n">LobbyInfo</span> <span class="n">lobbyInfo</span><span class="p">)</span>

<span class="c1">//ルーム入室</span>
<span class="c1">//なかったらfalseが帰ってきます</span>
<span class="c1">//roomName: 入りたいルーム名</span>
<span class="n">MonobitEngine</span><span class="p">.</span><span class="n">MonobitNetwork</span><span class="p">.</span><span class="nf">JoinRoom</span><span class="p">(</span><span class="kt">string</span> <span class="n">roomName</span><span class="p">)</span>

<span class="c1">//ルーム入室，なかったら作成</span>
<span class="c1">//roomName: ルーム名</span>
<span class="c1">//roomSettings: ルームの設定</span>
<span class="c1">//lobbyInfo:属するロビー</span>
<span class="n">MonobitEngine</span><span class="p">.</span><span class="n">MonobitNetwork</span><span class="p">.</span><span class="nf">JoinOrCreateRoom</span><span class="p">(</span><span class="kt">string</span> <span class="n">roomName</span><span class="p">,</span> <span class="n">MonobitEngine</span><span class="p">.</span><span class="n">RoomSettings</span> <span class="n">roomSettings</span><span class="p">,</span> <span class="n">MonobitEngine</span><span class="p">.</span><span class="n">LobbyInfo</span> <span class="n">lobbyInfo</span><span class="p">)</span>

<span class="c1">//ランダム入室</span>
<span class="n">MonobitEngine</span><span class="p">.</span><span class="n">MonobitNetwork</span><span class="p">.</span><span class="nf">JoinRandomRoom</span><span class="p">()</span>

<span class="c1">//条件に合うルームにランダム入室</span>
<span class="c1">//expectedCustomRoomProperties: 検索したいカスタムパラメータ，ルーム作成側はroomSettings.customParametersで設定できる（後述）</span>
<span class="c1">//expectedMaxPlayers: 検索したいルームの入室人数を指定，0なら考慮しない</span>
<span class="n">MonobitEngine</span><span class="p">.</span><span class="n">MonobitNetwork</span><span class="p">.</span><span class="nf">JoinRandomRoom</span><span class="p">(</span><span class="n">Hashtable</span> <span class="n">expectedCustomRoomProperties</span><span class="p">,</span> <span class="kt">byte</span> <span class="n">expectedMaxPlayers</span><span class="p">)</span>

<span class="c1">//ルーム退出</span>
<span class="n">MonobitEngine</span><span class="p">.</span><span class="n">MonobitNetwork</span><span class="p">.</span><span class="nf">LeaveRoom</span><span class="p">()</span>
</code></pre></div></div>

<p><code>roomSettings</code>周りが結構複雑です。これには次のプロパティを設定できます。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>byte maxPlayers : 入室可能人数
bool isVisible : trueならロビーから検索用メソッド呼ぶと検索できる
bool isOpen : 他プレイヤーの入室の可否
Hashtable customRoomParameters: カスタムパラメータ，JoinRandomRoomとかの検索条件に指定できる
string[] customRoomParametersForLobby: ここに指定したカスタムパラメータはロビーから見えるようになり，検索用メソッドの条件に指定できる
</code></pre></div></div>

<p>特に<code>customRoomParameters</code>がよーわからないと思います。これはつまり<code>Hashtable</code>型のいろんなタグパラメータをつけられるっていう感じで，<code>JoinRandomRoom</code>とかの絞り込みに影響します。<br>
<a href="http://www.monobitengine.com/doc/mun/contents/FeatureClient/RoomCustomParameter.htm" rel="nofollow noopener" target="_blank">詳しくはこちら（公式記事）</a><br>
例を示します。</p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="kt">var</span> <span class="n">hashTable</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Hashtable</span><span class="p">();</span>
<span class="n">hashTable</span><span class="p">[</span><span class="s">"tag"</span><span class="p">]</span> <span class="p">=</span> <span class="s">"Unity"</span><span class="p">;</span>

<span class="kt">var</span> <span class="n">settings</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">RoomSettings</span><span class="p">();</span>
<span class="n">settings</span><span class="p">.</span><span class="n">roomParameters</span> <span class="p">=</span> <span class="n">hashTable</span><span class="p">;</span>
<span class="n">MonobitNetwork</span><span class="p">.</span><span class="nf">CreateRoom</span><span class="p">(</span><span class="s">"RoomFoo"</span><span class="p">,</span> <span class="n">settings</span><span class="p">,</span> <span class="n">LobbyInfo</span><span class="p">.</span><span class="n">Default</span><span class="p">);</span>
</code></pre></div></div>

<p>というルームを作ると，</p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="kt">var</span> <span class="n">hashTable</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Hashtable</span><span class="p">();</span>
<span class="n">hashTable</span><span class="p">[</span><span class="s">"tag"</span><span class="p">]</span> <span class="p">=</span> <span class="s">"Unity"</span><span class="p">;</span>

<span class="n">MonobitEngine</span><span class="p">.</span><span class="n">MonobitNetwork</span><span class="p">.</span><span class="nf">JoinRandomRoom</span><span class="p">(</span><span class="n">hashTable</span><span class="p">,</span> <span class="m">0</span><span class="p">);</span>
</code></pre></div></div>

<p>でそのルームにマッチングできるようになるはずです。<br>
公式記事では<code>roomParameters</code>に対してインデックスを指定して書き込む方法で例が示されていますが，自分の環境ではそれをやると「<code>roomParameters</code>の中身なんもねぇよ！」って怒られたので，こちらでは自分で作った<code>Hashtable</code>で上書きしています。こちらだと通ることも確認しています。</p>

<h2>
<span id="オブジェクトの位置とアニメーションの同期" class="fragment"></span><a href="#%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E4%BD%8D%E7%BD%AE%E3%81%A8%E3%82%A2%E3%83%8B%E3%83%A1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%AE%E5%90%8C%E6%9C%9F"><i class="fa fa-link"></i></a>オブジェクトの位置とアニメーションの同期</h2>

<p><a href="http://www.monobitengine.com/doc/mun/contents/Tutorial/AddSynchronizedComponent.htm" rel="nofollow noopener" target="_blank">参考公式記事</a><br>
こちらはほぼスクリプトなしで実装できます。</p>

<p>同期したいオブジェクトに<code>Monobit View</code>を追加し，<br>
<a href="https://camo.qiitausercontent.com/635a8d0a709ac2c9fe72f147a2823dfce13d96ea/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3733313934302f66623264306532382d393931392d313631642d343063652d6430353462336534303130362e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F731940%2Ffb2d0e28-9919-161d-40ce-d054b3e40106.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=a68874436af43566d64f42730f82cbf5" alt="MonoView.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/731940/fb2d0e28-9919-161d-40ce-d054b3e40106.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F731940%2Ffb2d0e28-9919-161d-40ce-d054b3e40106.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=2e1406e7573a5da27512eb8505888a05 1x" loading="lazy"></a></p>

<p>位置ならば<code>Monobit Transform View</code>，アニメーションなら<code>Monobit Animation View</code>のスクリプトを追加して，<br>
<a href="https://camo.qiitausercontent.com/48bc8b6bbefba7037416a9c0a9fa687b4ea5333d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3733313934302f34393765333930352d663163302d333863662d636136392d3032363634623739303231612e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F731940%2F497e3905-f1c0-38cf-ca69-02664b79021a.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=7e1f968620a62208760b38a514f25a9f" alt="MTAV.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/731940/497e3905-f1c0-38cf-ca69-02664b79021a.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F731940%2F497e3905-f1c0-38cf-ca69-02664b79021a.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=db96de6c29c6c1b27efcbd2574539267 1x" loading="lazy"></a></p>

<p><code>Monobit View</code>の<code>Observed Component Registration List</code>に<code>Monobit Transform View</code>や<code>Monobit Animation View</code>を追加します。<br>
<a href="https://camo.qiitausercontent.com/e613178b8f9eddf8e256bbb40d6f9b71a16f82ed/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3733313934302f33383437346439302d353834652d346364622d643439362d6233333435343465396634612e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F731940%2F38474d90-584e-4cdb-d496-b334544e9f4a.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=de0eba53fa160d8799a5041ae69fc5f4" alt="OCRL.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/731940/38474d90-584e-4cdb-d496-b334544e9f4a.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F731940%2F38474d90-584e-4cdb-d496-b334544e9f4a.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=fb16cd964bcdeeb4906940bcc40a1557 1x" loading="lazy"></a></p>

<p>これでとりあえず位置の同期は完了です。</p>

<h2>
<span id="ネットワーク越しのオブジェクト生成破棄" class="fragment"></span><a href="#%E3%83%8D%E3%83%83%E3%83%88%E3%83%AF%E3%83%BC%E3%82%AF%E8%B6%8A%E3%81%97%E3%81%AE%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E7%94%9F%E6%88%90%E7%A0%B4%E6%A3%84"><i class="fa fa-link"></i></a>ネットワーク越しのオブジェクト生成・破棄</h2>

<p><a href="http://www.monobitengine.com/doc/mun/contents/FeatureClient/Instantiate.htm" rel="nofollow noopener" target="_blank">公式記事（オブジェクト生成）</a><br>
<a href="http://www.monobitengine.com/doc/mun/contents/FeatureClient/Destroy.htm" rel="nofollow noopener" target="_blank">公式記事（オブジェクト破棄）</a><br>
ネットワーク越しで生成や破棄を同期させたいオブジェクトに関しては，<code>UnityEngine.Instantiate</code>するとうまくいきません。（どううまくいかないかは検証して追記するかもしれないです）</p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="c1">//ネットワーク越しにオブジェクト生成</span>
<span class="c1">//string prefabName: プレファブ名（内部的にはResources.Loadしてるので正確にはパス名？要検証）</span>
<span class="c1">//positionとrotationはUnityEngine.Instantiateと同じなので略</span>
<span class="c1">//int group: 所属するグループ名（なんかわかったら追記します）</span>
<span class="n">MonobitEngine</span><span class="p">.</span><span class="n">MonobitNetwork</span><span class="p">.</span><span class="nf">Instantiate</span><span class="p">(</span><span class="kt">string</span> <span class="n">prefabName</span><span class="p">,</span> <span class="n">Vector3</span> <span class="n">position</span><span class="p">,</span> <span class="n">Quaternion</span> <span class="n">rotation</span><span class="p">,</span> <span class="kt">int</span> <span class="k">group</span><span class="p">)</span>

<span class="c1">//ネットワーク越しに対象viewに所属するオブジェクトを全部破棄</span>
<span class="c1">//MonobitView monoView: 破棄する対象のMonobitView</span>
<span class="n">MonobitEngine</span><span class="p">.</span><span class="n">MonobitNetwork</span><span class="p">.</span><span class="nf">Destroy</span><span class="p">(</span><span class="n">MonobitView</span> <span class="n">monoView</span><span class="p">)</span>

<span class="c1">//ネットワーク越しに対象オブジェクト破棄</span>
<span class="c1">//引数gameObjectは技術ドキュメントだとMonobitView型ですがGameObject型です。（検証済み，あとAPIリファレンスはそうなっています）</span>
<span class="n">MonobitEngine</span><span class="p">.</span><span class="n">MonobitNetwork</span><span class="p">.</span><span class="nf">Destroy</span><span class="p">(</span><span class="n">GameObject</span> <span class="n">gameObject</span><span class="p">)</span>
</code></pre></div></div>

<p><code>MonobitEngine.MonobitNetwork.Instantiate</code>は<code>Resources.Load</code>を使ってるようなので，<strong>生成するプレファブは<code>Resources</code>フォルダにないといけません</strong>。あと指定するのがプレファブの<code>GameObject</code>ではなく<strong>プレファブ名</strong>なのも注意。</p>

<h2>
<span id="操作キャラの位置同期オブジェクトの所有権の処理" class="fragment"></span><a href="#%E6%93%8D%E4%BD%9C%E3%82%AD%E3%83%A3%E3%83%A9%E3%81%AE%E4%BD%8D%E7%BD%AE%E5%90%8C%E6%9C%9F%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E6%89%80%E6%9C%89%E6%A8%A9%E3%81%AE%E5%87%A6%E7%90%86"><i class="fa fa-link"></i></a>操作キャラの位置同期（オブジェクトの所有権の処理）</h2>

<p><a href="http://www.monobitengine.com/doc/mun/contents/FeatureClient/IsMine.htm" rel="nofollow noopener" target="_blank">公式記事（オブジェクトの所有権）</a><br>
<a href="http://www.monobitengine.com/doc/mun/contents/Tutorial/TestFailedMultiPlay.htm" rel="nofollow noopener" target="_blank">参考公式記事</a><br>
さて，ここまでの作業でとりあえずオブジェクトの生成と位置やアニメーションの同期はできますが，操作キャラだけはもうちょっと作業が要ります。というのも，同期された相手のオブジェクトはこちらのシーンに召喚される都合上，何も対策をしないと同期されてきた相手のオブジェクトも操作できてしまうため，位置の同期とこちらの操作で干渉してなんか変なことになります。<br>
そのため，自分が所有権をもつオブジェクト以外は操作しないというスクリプトを書いてやらないといけなくなります。<br>
具体的には，自分がオブジェクトの所有権をもつかは，<code>MonobitEngine.MonoBehavior</code>（または<code>MunMonoBehavior</code>）内の<code>monobitView.isMine</code>プロパティで判定できます。これを使って操作スクリプトを無効化してやればいいです。実装例は下の方にあります。</p>

<h2>
<span id="ネットワーク越しのメソッド呼び出し" class="fragment"></span><a href="#%E3%83%8D%E3%83%83%E3%83%88%E3%83%AF%E3%83%BC%E3%82%AF%E8%B6%8A%E3%81%97%E3%81%AE%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E5%91%BC%E3%81%B3%E5%87%BA%E3%81%97"><i class="fa fa-link"></i></a>ネットワーク越しのメソッド呼び出し</h2>

<p><a href="http://www.monobitengine.com/doc/mun/contents/FeatureClient/Destroy.htm" rel="nofollow noopener" target="_blank">公式記事</a><br>
<code>MonobitEngine.MonoBehavior</code>（または<code>MunMonoBehavior</code>）なら，ネットワーク越しでRPCという手法によってメソッドを呼び出してやれます。<br>
まず，呼び出したいメソッドに<code>[MunRPC]</code>を指定します。<br>
<code>MonobitView</code>を適当なオブジェクトにアタッチしてやり，<code>MonobitViewID</code>を0以外の適当な正の整数値にしてやります。<br>
それを<code>[SerializedField]</code>なり<code>GetComponent</code>なりで取得してやって，<code>MonobitView</code>の<code>RPC()</code>メソッドを呼べばOKです。<br>
なんのこっちゃってなってると思うので例を示します。</p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="p">[</span><span class="n">MunRPC</span><span class="p">]</span>
<span class="k">void</span> <span class="nf">targetMethod</span><span class="p">(</span><span class="kt">string</span> <span class="n">message</span><span class="p">,</span> <span class="kt">int</span> <span class="n">id</span><span class="p">){</span>
    <span class="n">Debug</span><span class="p">.</span><span class="nf">Log</span><span class="p">(</span><span class="n">id</span> <span class="p">+</span> <span class="s">" says "</span> <span class="p">+</span> <span class="n">message</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">void</span> <span class="nf">callRpc</span><span class="p">(){</span>

    <span class="kt">var</span> <span class="n">view</span> <span class="p">=</span> <span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">MonobitView</span><span class="p">&gt;();</span>

    <span class="n">view</span><span class="p">.</span><span class="nf">RPC</span><span class="p">(</span>
        <span class="k">nameof</span><span class="p">(</span><span class="n">targetMethod</span><span class="p">)</span> <span class="c1">//関数の名前(string)</span>
        <span class="p">,</span> <span class="n">MonobitTargets</span><span class="p">.</span><span class="n">All</span> <span class="c1">//呼び出しの対象，公式ドキュメント参照</span>
                             <span class="c1">//(ここから呼び出し先の引数)</span>
        <span class="p">,</span> <span class="s">"Hi!"</span>              <span class="c1">//message</span>
        <span class="p">,</span> <span class="m">0</span>                  <span class="c1">//id        </span>
        <span class="p">);</span>
<span class="p">}</span>

</code></pre></div></div>

<h2>
<span id="コールバック" class="fragment"></span><a href="#%E3%82%B3%E3%83%BC%E3%83%AB%E3%83%90%E3%83%83%E3%82%AF"><i class="fa fa-link"></i></a>コールバック</h2>

<p>サーバに繋いだ時や，ルームに入った時など，いろんな時に対してコールバックが用意されています。数が多いのでここでは紹介せず<a href="http://www.monobitengine.com/doc/mun/contents/FeatureClient/CallbackFunction.htm" rel="nofollow noopener" target="_blank">こちら</a>を参照していただきたいですが，一つだけハマりそうな部分なんですが，<strong>コールバックの利用は<code>MunMonoBehavior</code>を継承する必要があります。</strong>逆に言うと，<strong><code>MonobitEngine.MonoBehavior</code>ではコールバックが利用できません。</strong><br>
理由はコールバックは<code>MunMonoBehavior</code>のメソッドをオーバーライドする形で実装されてるため，<code>MonobitEngine.MonoBehavior</code>ではそもそものメソッドが定義されてないんですよね。もう<code>MunMonoBehavior</code>だけでいいんじゃないかな。</p>

<h1>
<span id="ちょっと一工夫" class="fragment"></span><a href="#%E3%81%A1%E3%82%87%E3%81%A3%E3%81%A8%E4%B8%80%E5%B7%A5%E5%A4%AB"><i class="fa fa-link"></i></a>ちょっと一工夫</h1>

<h2>
<span id="オブジェクトの所有権の処理" class="fragment"></span><a href="#%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E6%89%80%E6%9C%89%E6%A8%A9%E3%81%AE%E5%87%A6%E7%90%86"><i class="fa fa-link"></i></a>オブジェクトの所有権の処理</h2>

<p><a href="http://www.monobitengine.com/doc/mun/contents/Tutorial/EnableIsMineControl.htm" rel="nofollow noopener" target="_blank">公式のチュートリアル</a>では操作スクリプトに直接所有権の判定を組み込んでいますが，操作スクリプト一個一個に組み込んでるとキリがないですし，基本的にゲーム自体の開発してる時は通信のことなんて考えたくないと思うので，個別に管理してくれるコンポーネントを作った方が管理しやすいと思います。</p>

<div class="code-frame" data-lang="C#">
<div class="code-lang"><span class="bold">OwnerHandler.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="cm">/*
OwnerHandler.cs

Copyright (c) 2021 Dango

This software is released under the MIT License.
http://opensource.org/licenses/mit-license.php
*/</span>

<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">MonobitEngine</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UnityEngine</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">MonoBehaviour</span> <span class="p">=</span> <span class="n">UnityEngine</span><span class="p">.</span><span class="n">MonoBehaviour</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">MunCommunication</span> <span class="p">{</span>
    <span class="c1">/// &lt;summary&gt;</span>
    <span class="c1">/// Configure MonoBehavior.enabled by ownership of attached object.</span>
    <span class="c1">/// &lt;/summary&gt;</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">OwnerHandler</span> <span class="p">:</span> <span class="n">MunMonoBehaviour</span> <span class="p">{</span>
        <span class="p">[</span><span class="n">SerializeField</span><span class="p">]</span> <span class="k">private</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">MonoBehaviour</span><span class="p">&gt;</span> <span class="n">enableIfOwner</span><span class="p">;</span>
        <span class="p">[</span><span class="n">SerializeField</span><span class="p">]</span> <span class="k">private</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">MonoBehaviour</span><span class="p">&gt;</span> <span class="n">disableIfOwner</span><span class="p">;</span>

        <span class="c1">// Start is called before the first frame update</span>
        <span class="k">void</span> <span class="nf">Start</span><span class="p">()</span> <span class="p">{</span>
            <span class="nf">configComponents</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="c1">/// &lt;summary&gt;</span>
        <span class="c1">/// Check ownership, and configure "enabled" property.</span>
        <span class="c1">/// &lt;/summary&gt;</span>
        <span class="k">void</span> <span class="nf">configComponents</span><span class="p">()</span> <span class="p">{</span>
            <span class="kt">bool</span> <span class="n">isOwner</span> <span class="p">=</span> <span class="n">monobitView</span><span class="p">.</span><span class="n">isMine</span><span class="p">;</span>
            <span class="n">enableIfOwner</span><span class="p">.</span><span class="nf">ForEach</span><span class="p">(</span><span class="n">behaviour</span> <span class="p">=&gt;</span> <span class="p">{</span> <span class="n">behaviour</span><span class="p">.</span><span class="n">enabled</span> <span class="p">=</span> <span class="n">isOwner</span><span class="p">;});</span>
            <span class="n">disableIfOwner</span><span class="p">.</span><span class="nf">ForEach</span><span class="p">(</span><span class="n">behaviour</span> <span class="p">=&gt;</span> <span class="p">{</span> <span class="n">behaviour</span><span class="p">.</span><span class="n">enabled</span> <span class="p">=</span> <span class="p">!</span><span class="n">isOwner</span><span class="p">;});</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

</code></pre></div>
</div>

<p>これでインスペクタに所有権があるときに有効/無効にするリストができてくれるので設定してやればいいです。</p>

<h2>
<span id="パスワードの設定" class="fragment"></span><a href="#%E3%83%91%E3%82%B9%E3%83%AF%E3%83%BC%E3%83%89%E3%81%AE%E8%A8%AD%E5%AE%9A"><i class="fa fa-link"></i></a>パスワードの設定</h2>

<p>MUNはルームに対してパスワードを設定できたりはしないんですが，<a href="https://support.photonengine.jp/hc/ja/articles/218961187-%E6%8B%9B%E5%BE%85%E8%80%85%E3%81%AE%E3%81%BF%E3%83%AB%E3%83%BC%E3%83%A0%E3%81%B8%E5%85%A5%E5%AE%A4%E3%82%92%E8%A8%B1%E5%8F%AF%E3%81%99%E3%82%8B%E6%96%B9%E6%B3%95" rel="nofollow noopener" target="_blank">こちらのPhotonの記事のように</a>カスタムパラメータをつけて，RandomJoinをやってやればそれに近いことをできます。<br>
<strong>簡易的な</strong>実装例</p>

<div class="code-frame" data-lang="C#">
<div class="code-lang"><span class="bold">RoomSelector.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="cm">/*
RoomSelector.cs

Copyright (c) 2021 Dango

This software is released under the MIT License.
http://opensource.org/licenses/mit-license.php
*/</span>

<span class="k">using</span> <span class="nn">System.Collections</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">MonobitEngine</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UnityEngine</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UnityEngine.Events</span><span class="p">;</span>

<span class="k">using</span> <span class="nn">MonobitNetwork</span> <span class="p">=</span> <span class="n">MonobitEngine</span><span class="p">.</span><span class="n">MonobitNetwork</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">MunCommunication</span> <span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">RoomSelector</span> <span class="p">:</span> <span class="n">MunMonoBehaviour</span> <span class="p">{</span>

        <span class="n">Hashtable</span> <span class="nf">generateAuthTable</span><span class="p">(</span><span class="kt">string</span> <span class="n">roomName</span><span class="p">,</span> <span class="kt">string</span> <span class="n">password</span><span class="p">)</span> <span class="p">{</span>
            <span class="kt">var</span> <span class="n">customParam</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Hashtable</span><span class="p">();</span>

            <span class="n">customParam</span><span class="p">[</span><span class="s">"name"</span><span class="p">]</span> <span class="p">=</span> <span class="n">roomName</span><span class="p">;</span>
            <span class="n">customParam</span><span class="p">[</span><span class="s">"password"</span><span class="p">]</span> <span class="p">=</span> <span class="n">password</span><span class="p">;</span>

            <span class="k">return</span> <span class="n">customParam</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">public</span> <span class="k">void</span> <span class="nf">createAuthorizedRoom</span><span class="p">(</span><span class="kt">string</span> <span class="n">roomName</span><span class="p">,</span> <span class="kt">string</span> <span class="n">password</span><span class="p">)</span> <span class="p">{</span>
            <span class="kt">var</span> <span class="n">setting</span> <span class="p">=</span> <span class="nf">generateAuthTable</span><span class="p">(</span><span class="n">roomName</span><span class="p">,</span> <span class="n">password</span><span class="p">);</span>

            <span class="kt">var</span> <span class="n">roomSetting</span> <span class="p">=</span> <span class="k">new</span> <span class="n">RoomSettings</span> <span class="p">{</span>
                <span class="n">roomParameters</span> <span class="p">=</span> <span class="n">setting</span>
                <span class="p">,</span> <span class="n">isVisible</span> <span class="p">=</span> <span class="k">false</span>
            <span class="p">};</span>

            <span class="c1">//ランダム文字列生成</span>
            <span class="kt">string</span> <span class="n">randomLine</span> <span class="p">=</span> <span class="n">Guid</span><span class="p">.</span><span class="nf">NewGuid</span><span class="p">().</span><span class="nf">ToString</span><span class="p">(</span><span class="s">"N"</span><span class="p">).</span><span class="nf">Substring</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">10</span><span class="p">);</span>

            <span class="n">MonobitNetwork</span><span class="p">.</span><span class="nf">CreateRoom</span><span class="p">(</span><span class="n">randomLine</span><span class="p">,</span> <span class="n">roomSetting</span><span class="p">,</span> <span class="n">LobbyInfo</span><span class="p">.</span><span class="n">Default</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">public</span> <span class="k">void</span> <span class="nf">joinAuthorizedRoom</span><span class="p">(</span><span class="kt">string</span> <span class="n">roomName</span><span class="p">,</span> <span class="kt">string</span> <span class="n">password</span><span class="p">)</span> <span class="p">{</span>
            <span class="kt">var</span> <span class="n">setting</span> <span class="p">=</span> <span class="nf">generateAuthTable</span><span class="p">(</span><span class="n">roomName</span><span class="p">,</span> <span class="n">password</span><span class="p">);</span>

            <span class="n">MonobitNetwork</span><span class="p">.</span><span class="nf">JoinRandomRoom</span><span class="p">(</span><span class="n">setting</span><span class="p">,</span> <span class="m">0</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>


</code></pre></div>
</div>

<p>ただ，これだと同じルーム名・パスワードが同時に発生した場合に対応ができないので，外部に認証サーバを設けてルーム名を管理してやらないと実用に足るものはおそらく作れないと思います。</p>

<h1>
<span id="まとめ" class="fragment"></span><a href="#%E3%81%BE%E3%81%A8%E3%82%81"><i class="fa fa-link"></i></a>まとめ</h1>

<p>MUNでできること<br>
・ネットワーク越しのオブジェクトの位置やアニメーションの同期<br>
・ネットワーク越しでのメソッド呼び出し<br>
ちょっとよくわからない部分がなくもないですが，使ってる感じは問題ないような感じがします。</p>

<h1>
<span id="参考" class="fragment"></span><a href="#%E5%8F%82%E8%80%83"><i class="fa fa-link"></i></a>参考</h1>

<p><a href="http://www.monobitengine.com/doc/mun/" rel="nofollow noopener" target="_blank">MUNチュートリアル</a><br>
<a href="http://www.monobitengine.com/doc/doxygen/client/html/index.html" rel="nofollow noopener" target="_blank">MUNのAPIリファレンス</a><br>
<a href="https://support.photonengine.jp/hc/ja/articles/218961187-%E6%8B%9B%E5%BE%85%E8%80%85%E3%81%AE%E3%81%BF%E3%83%AB%E3%83%BC%E3%83%A0%E3%81%B8%E5%85%A5%E5%AE%A4%E3%82%92%E8%A8%B1%E5%8F%AF%E3%81%99%E3%82%8B%E6%96%B9%E6%B3%95" rel="nofollow noopener" target="_blank">パスワードのかけかたとか：Photonのドキュメント</a><br>
<a href="https://kagasu.hatenablog.com/entry/20150621/1434866124" rel="nofollow noopener" target="_blank">ランダム文字列</a></p>
</div></div></section><div class="css-1yzj1fm"><div class="css-1uv1qiv"><span class="fa fa-twitter"></span></div><div class="css-1uv1qiv"><span class="fa fa-facebook"></span></div></div><div class="apm-Content"><div class="apm-Content_title">Why not register and get more from Qiita?</div><ol class="apm-Content_list"><li>We will deliver articles that match you<div class="description">By following users and tags, you can catch up information on technical fields that you are interested in as a whole</div></li><li>you can read useful information later efficiently<div class="description">By &quot;stocking&quot; the articles you like, you can search right away</div></li><div><a class="apm-Content_help" href="https://help.qiita.com/ja/articles/qiita-login-user" target="_blank"><i class="fa fa-fw fa-arrow-circle-right"></i>What you can do with signing up</a></div></ol><a href="/signup?callback_action=login_or_signup&amp;redirect_to=%2FpublicClassMain%2Fitems%2Fefb7cd2d6adaaa3582f8&amp;realm=qiita" class="apm-Content_button apm-Content_button-signup">Sign up</a><a href="/login?callback_action=login_or_signup&amp;redirect_to=%2FpublicClassMain%2Fitems%2Fefb7cd2d6adaaa3582f8&amp;realm=qiita" class="apm-Content_button apm-Content_button-signin">Login</a></div></div><div class="css-helsa7"></div></div></div></div><div class="css-109dbrr"><div class="css-5jpx49"><div class="css-mnxgyc"><button class=" css-1vlpknv"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/publicClassMain/items/efb7cd2d6adaaa3582f8/likers" class="css-1iupg5d">2</a></div><div class="css-fsjkhv"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-1b17vb0">2</span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-7i7f4d"><div class="css-1gj7nt">Improve article</div><a href="/drafts/efb7cd2d6adaaa3582f8/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/publicClassMain/items/efb7cd2d6adaaa3582f8/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/publicClassMain/items/efb7cd2d6adaaa3582f8/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/publicClassMain/items/efb7cd2d6adaaa3582f8/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/publicClassMain/items/efb7cd2d6adaaa3582f8.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="PersonalArticlePage" data-dom-id="PersonalArticlePage-react-component-629a0dbf-56d3-4f0e-9bb0-14b95c0ba853">{"authorAnalyticsTrackingId":null,"organizationAnalyticsTrackingId":null}</script>
      
<footer id="globalFooter" class="st-Footer"><div class="st-Footer_container"><div class="st-Footer_start"><div class="st-Footer_logo"><svg viewbox="0 0 426.57 130" xmlns="http://www.w3.org/2000/svg"><circle cx="167.08" cy="21.4" r="12.28" /><path d="M250.81 29.66h23.48v18.9h-23.48z" /><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z" /><circle cx="216.33" cy="21.4" r="12.28" /></svg></div><div class="st-Footer_catchcopy">How developers code is here.</div><div class="st-Footer_socials"><a class="fa fa-twitter" href="https://twitter.com/qiita"></a><a class="fa fa-facebook-square" href="https://www.facebook.com/qiita/"></a></div></div><div class="st-Footer_end"><div class="st-Footer_qiita"><div class="st-Footer_label">Qiita</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="/about">About</a><a href="/terms">Terms</a><a href="/privacy">Privacy</a><a target="_blank" href="http://help.qiita.com/ja/articles/qiita-community-guideline">Guideline</a><a target="_blank" href="https://help.qiita.com/ja/articles/others-brand-guideline">Design Guideline</a></div><div class="st-Footer_column"><a href="/release-notes">Release</a><a href="/api/v2/docs">API</a><a href="/feedback/new">ご意見</a><a href="https://help.qiita.com">Help</a><a target="_blank" href="https://qiita.com/ads?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Advertisement</a></div></div></div><div class="st-Footer_increments"><div class="st-Footer_label">Increments</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="https://increments.co.jp/company/">About</a><a href="https://increments.co.jp/jobs/">採用情報</a><a href="https://blog.qiita.com">Blog</a></div><div class="st-Footer_column"><a href="https://teams.qiita.com/">Qiita Team</a><a href="https://jobs.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Jobs</a><a href="https://zine.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Zine</a></div></div></div></div></div><div class="st-Footer_copyright">© 2011-2021 Increments Inc.</div></footer><div id="Snackbar-react-component-f16714d8-4fe0-404d-96d6-1586d6ab75d8"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="Snackbar" data-dom-id="Snackbar-react-component-f16714d8-4fe0-404d-96d6-1586d6ab75d8">{}</script>
      
<div id="LoginModal-react-component-c6a60371-b069-4af2-89b7-f2a70351c680"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="LoginModal" data-dom-id="LoginModal-react-component-c6a60371-b069-4af2-89b7-f2a70351c680">{}</script>
      
<div id="StockModal-react-component-09fb0a84-a1a0-4792-b2e2-3fc8d3155e08"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="StockModal" data-dom-id="StockModal-react-component-09fb0a84-a1a0-4792-b2e2-3fc8d3155e08">{}</script>
      
</div><div id="dataContainer" style="display: none;" data-config="{&quot;actionPath&quot;:&quot;public/items#show&quot;,&quot;settings&quot;:{&quot;analyticsTrackingId&quot;:&quot;UA-24675221-12&quot;,&quot;assetsMap&quot;:{},&quot;csrfToken&quot;:&quot;woPSxNe5tQtMWoltXMSDtBtdD/9ZUGFHLAYaeuS7cgt5jdXTC5YOWGLTiKc2wp797ssajhkfc4IDd5VDdg/ZGw==&quot;,&quot;locale&quot;:&quot;en&quot;},&quot;currentUser&quot;:null}" /></body></html><script type="application/json" data-js-react-on-rails-store="AppStoreWithReactOnRails">{"snackbar":{"type":"","body":"","isActive":false},"article":{"article":{"body":"\n\u003ch1\u003e\n\u003cspan id=\"はじめに\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eはじめに\u003c/h1\u003e\n\n\u003cp\u003e仕事でMonobit Unity Networkingについて調べる機会があったので，備忘録がてら記事にしました。\u003cbr\u003e\nチュートリアルの内容のまとめと，ちょっと使うときに便利かなと思った実装法を中心に書きます。\u003cbr\u003e\nサーバとかの設定は公式が結構ちゃんとドキュメント出してくれてるので（\u003ca href=\"http://www.monobitengine.com/doc/mun/\" rel=\"nofollow noopener\" target=\"_blank\"\u003e参考\u003c/a\u003e），この記事では基本的にコードとかの実装方面をまとめていきます。\u003cbr\u003e\nかなりふわふわしてる記事なので，間違い等あればコメントで指摘していただけると幸いです。\u003cbr\u003e\nあと掲載コードについては申し訳ないんですが，全部について動くかの検証はしてないです。動いたコードに近いコードを載せるように努力してますが，動かなかったら文句言ってください。気力や時間があったら検証します。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"monobit-unity-networking-とは\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#monobit-unity-networking-%E3%81%A8%E3%81%AF\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eMonobit Unity Networking とは\u003c/h1\u003e\n\n\u003cp\u003eMonobit Unity Networking(MUN)とは，モノビットエンジンが提供する国産Unity用通信ミドルウェアです。つまりUnityでマルチプレイとか通信とかをやるためのアセットです。\u003cbr\u003e\n通信量に合わせて課金されるタイプなので，全機能を使うのにお金はかかりません。\u003cbr\u003e\n基本的にはUnityで作ったクライアント間のP2P通信で，この記事では取り上げませんが，オンプレミス版も提供されています。\u003cbr\u003e\n詳しくは\u003ca href=\"https://www.monobitengine.com/\" rel=\"nofollow noopener\" target=\"_blank\"\u003eここ\u003c/a\u003e\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"前提環境\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%89%8D%E6%8F%90%E7%92%B0%E5%A2%83\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e前提環境\u003c/h1\u003e\n\n\u003cp\u003eUnity 2020.3.5f\u003cbr\u003e\nMUN 2.8.0\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"基本的な機能と実装\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%9F%BA%E6%9C%AC%E7%9A%84%E3%81%AA%E6%A9%9F%E8%83%BD%E3%81%A8%E5%AE%9F%E8%A3%85\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e基本的な機能と実装\u003c/h1\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"基礎的な用語\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%9F%BA%E7%A4%8E%E7%9A%84%E3%81%AA%E7%94%A8%E8%AA%9E\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e基礎的な用語\u003c/h2\u003e\n\n\u003cp\u003eルーム：プレイヤーが実際に通信している部屋\u003cbr\u003e\nロビー：ルームの集まり，ここではプレイヤー間の通信はできない\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"monobehaviorの上書き\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#monobehavior%E3%81%AE%E4%B8%8A%E6%9B%B8%E3%81%8D\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eMonoBehaviorの上書き\u003c/h2\u003e\n\n\u003cp\u003eMunを使う上で，\u003ccode\u003eMonoBehavior\u003c/code\u003eの代替クラスがあります。主に\u003ccode\u003eMonobitEngine.MonoBehavior\u003c/code\u003eと\u003ccode\u003eMonobitEngine.MunMonoBehavior\u003c/code\u003eがあります。後者は接続やルームの入室のコールバックが定義されてます。\u003cbr\u003e\n\u003ccode\u003eMonobitEngine.MonoBehavior\u003c/code\u003eは\u003ccode\u003eMonobitEngine.MunMonoBehavior\u003c/code\u003eを含めた大体のMonobitで定義されるコンポーネントの基底クラスになってるという特徴がありますが，多分ユーザで使う分には\u003ccode\u003eMonobitEngine.MunMonoBehavior\u003c/code\u003eを継承しとけば十分だと思います。だって継承されてるから\u003ccode\u003eMonobitEngine.MonoBehavior\u003c/code\u003eの全機能使えるし。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"サーバへの接続ルーム入室\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%B5%E3%83%BC%E3%83%90%E3%81%B8%E3%81%AE%E6%8E%A5%E7%B6%9A%E3%83%AB%E3%83%BC%E3%83%A0%E5%85%A5%E5%AE%A4\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eサーバへの接続〜ルーム入室\u003c/h2\u003e\n\n\u003cp\u003eちなみにちょくちょく出てくる\u003ccode\u003eMonobitEngine.MonobitNetwork\u003c/code\u003eは静的クラスなのでMunを導入しておけばどこでも呼べます。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"サーバへの接続切断\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%B5%E3%83%BC%E3%83%90%E3%81%B8%E3%81%AE%E6%8E%A5%E7%B6%9A%E5%88%87%E6%96%AD\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eサーバへの接続・切断\u003c/h3\u003e\n\n\u003cp\u003e\u003ca href=\"http://www.monobitengine.com/doc/mun/contents/FeatureClient/ConnectToServer.htm\" rel=\"nofollow noopener\" target=\"_blank\"\u003e公式記事（サーバへの接続）\u003c/a\u003e\u003cbr\u003e\n\u003ca href=\"http://www.monobitengine.com/doc/mun/contents/FeatureClient/DisconnectFromServer.htm\" rel=\"nofollow noopener\" target=\"_blank\"\u003e公式記事（サーバからの切断）\u003c/a\u003e\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"c1\"\u003e//サーバへの接続\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e//gameVersion:ゲームのバージョンを表す文字列\u003c/span\u003e\n\u003cspan class=\"n\"\u003eMonobitEngine\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eMonobitNetwork\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eConnectServer\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003egameVersion\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e//サーバからの切断\u003c/span\u003e\n\u003cspan class=\"n\"\u003eMonobitEngine\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eMonobitNetwork\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eDisconnectServer\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eこの際，\u003ccode\u003eMonobitEngine.MonobitNetwork.autoJoinLobby\u003c/code\u003eを\u003cstrong\u003e事前に\u003c/strong\u003e\u003ccode\u003etrue\u003c/code\u003eにしておくとデフォルトのロビーに入ってくれます。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"ロビーへの入室退出ほか操作\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%AD%E3%83%93%E3%83%BC%E3%81%B8%E3%81%AE%E5%85%A5%E5%AE%A4%E9%80%80%E5%87%BA%E3%81%BB%E3%81%8B%E6%93%8D%E4%BD%9C\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eロビーへの入室・退出・ほか操作\u003c/h3\u003e\n\n\u003cp\u003e\u003ca href=\"http://www.monobitengine.com/doc/mun/contents/FeatureClient/CreateAndJoinLobby.htm\" rel=\"nofollow noopener\" target=\"_blank\"\u003e公式記事（ロビー入室）\u003c/a\u003e\u003cbr\u003e\n\u003ca href=\"http://www.monobitengine.com/doc/mun/contents/FeatureClient/LeaveLobby.htm\" rel=\"nofollow noopener\" target=\"_blank\"\u003e公式記事（ロビー退出）\u003c/a\u003e\u003cbr\u003e\n前述した\u003ccode\u003eMonobitEngine.MonobitNetwork.autoJoinLobby\u003c/code\u003eのフラグを立てて入室してやるとここら辺の処理は省略できます。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"c1\"\u003e//デフォルトロビーへの入室\u003c/span\u003e\n\u003cspan class=\"n\"\u003eMonobitEngine\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eMonobitNetwork\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eJoinLobby\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e//指定したロビーへの入室\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e//lobbyInfo:ロビー設定とか\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e//ロビーがなかったら勝手に作るので注意\u003c/span\u003e\n\u003cspan class=\"n\"\u003eMonobitEngine\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eMonobitNetwork\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eJoinLobby\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eMonobitEngine\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eLobbyInfo\u003c/span\u003e \u003cspan class=\"n\"\u003elobbyInfo\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e//ロビーからの退出\u003c/span\u003e\n\u003cspan class=\"n\"\u003eMonobitEngine\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eMonobitNetwork\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eLeaveLobby\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e\u003ccode\u003eLobbyInfo\u003c/code\u003eには\u003ccode\u003eName\u003c/code\u003eと\u003ccode\u003eKind\u003c/code\u003eのプロパティがありますが，\u003ccode\u003eKind\u003c/code\u003eはドキュメントにも詳しい仕様が書いてなかったので正直よくわかりません。誰か見つけたら教えてください（他力本願）\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"c1\"\u003e//lobbyInfoの実装例\u003c/span\u003e\n\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003einfo\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eMonobitEngine\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eMonobitNetwork\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\u003cspan class=\"n\"\u003einfo\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eKind\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eLobbyKind\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eDefault\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"n\"\u003elobby\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eName\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"MyLobby\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"n\"\u003eMonobitEngine\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eMonobitNetwork\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eJoinLobby\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003einfo\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e\u003ca href=\"http://www.monobitengine.com/doc/mun/contents/FeatureClient/GetRoomData.htm\" rel=\"nofollow noopener\" target=\"_blank\"\u003e公式記事（ルーム一覧の取得）\u003c/a\u003e\u003cbr\u003e\nまた，ロビーの中からは公開ルームの一覧を取得できます。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"c1\"\u003e//公開ルームを全取得\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e//RoomData[]で帰ってきます\u003c/span\u003e\n\u003cspan class=\"n\"\u003eMonobitEngine\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eMonobitNetwork\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eGetRoomData\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"ルーム作成入室退出\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%AB%E3%83%BC%E3%83%A0%E4%BD%9C%E6%88%90%E5%85%A5%E5%AE%A4%E9%80%80%E5%87%BA\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eルーム作成・入室・退出\u003c/h3\u003e\n\n\u003cp\u003e\u003ca href=\"http://www.monobitengine.com/doc/mun/contents/FeatureClient/CreateRoom.htm\" rel=\"nofollow noopener\" target=\"_blank\"\u003e公式記事（ルーム作成）\u003c/a\u003e\u003cbr\u003e\n\u003ca href=\"http://www.monobitengine.com/doc/mun/contents/FeatureClient/JoinRoom.htm\" rel=\"nofollow noopener\" target=\"_blank\"\u003e公式記事（ルーム入室）\u003c/a\u003e\u003cbr\u003e\n\u003ca href=\"http://www.monobitengine.com/doc/mun/contents/FeatureClient/LeaveRoom.htm\" rel=\"nofollow noopener\" target=\"_blank\"\u003e公式記事（ルーム退出）\u003c/a\u003e\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"c1\"\u003e//ルーム作成\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e//roomName: ルーム名\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e//roomSettings: ルームの設定\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e//lobbyInfo:属するロビー\u003c/span\u003e\n\u003cspan class=\"n\"\u003eMonobitEngine\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eMonobitNetwork\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eCreateRoom\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003eroomName\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eMonobitEngine\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eRoomSettings\u003c/span\u003e \u003cspan class=\"n\"\u003eroomSettings\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eMonobitEngine\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eLobbyInfo\u003c/span\u003e \u003cspan class=\"n\"\u003elobbyInfo\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e//ルーム入室\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e//なかったらfalseが帰ってきます\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e//roomName: 入りたいルーム名\u003c/span\u003e\n\u003cspan class=\"n\"\u003eMonobitEngine\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eMonobitNetwork\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eJoinRoom\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003eroomName\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e//ルーム入室，なかったら作成\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e//roomName: ルーム名\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e//roomSettings: ルームの設定\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e//lobbyInfo:属するロビー\u003c/span\u003e\n\u003cspan class=\"n\"\u003eMonobitEngine\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eMonobitNetwork\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eJoinOrCreateRoom\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003eroomName\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eMonobitEngine\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eRoomSettings\u003c/span\u003e \u003cspan class=\"n\"\u003eroomSettings\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eMonobitEngine\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eLobbyInfo\u003c/span\u003e \u003cspan class=\"n\"\u003elobbyInfo\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e//ランダム入室\u003c/span\u003e\n\u003cspan class=\"n\"\u003eMonobitEngine\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eMonobitNetwork\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eJoinRandomRoom\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e//条件に合うルームにランダム入室\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e//expectedCustomRoomProperties: 検索したいカスタムパラメータ，ルーム作成側はroomSettings.customParametersで設定できる（後述）\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e//expectedMaxPlayers: 検索したいルームの入室人数を指定，0なら考慮しない\u003c/span\u003e\n\u003cspan class=\"n\"\u003eMonobitEngine\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eMonobitNetwork\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eJoinRandomRoom\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eHashtable\u003c/span\u003e \u003cspan class=\"n\"\u003eexpectedCustomRoomProperties\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003ebyte\u003c/span\u003e \u003cspan class=\"n\"\u003eexpectedMaxPlayers\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e//ルーム退出\u003c/span\u003e\n\u003cspan class=\"n\"\u003eMonobitEngine\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eMonobitNetwork\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eLeaveRoom\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e\u003ccode\u003eroomSettings\u003c/code\u003e周りが結構複雑です。これには次のプロパティを設定できます。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003ebyte maxPlayers : 入室可能人数\nbool isVisible : trueならロビーから検索用メソッド呼ぶと検索できる\nbool isOpen : 他プレイヤーの入室の可否\nHashtable customRoomParameters: カスタムパラメータ，JoinRandomRoomとかの検索条件に指定できる\nstring[] customRoomParametersForLobby: ここに指定したカスタムパラメータはロビーから見えるようになり，検索用メソッドの条件に指定できる\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e特に\u003ccode\u003ecustomRoomParameters\u003c/code\u003eがよーわからないと思います。これはつまり\u003ccode\u003eHashtable\u003c/code\u003e型のいろんなタグパラメータをつけられるっていう感じで，\u003ccode\u003eJoinRandomRoom\u003c/code\u003eとかの絞り込みに影響します。\u003cbr\u003e\n\u003ca href=\"http://www.monobitengine.com/doc/mun/contents/FeatureClient/RoomCustomParameter.htm\" rel=\"nofollow noopener\" target=\"_blank\"\u003e詳しくはこちら（公式記事）\u003c/a\u003e\u003cbr\u003e\n例を示します。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003ehashTable\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eHashtable\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\u003cspan class=\"n\"\u003ehashTable\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s\"\u003e\"tag\"\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"Unity\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003esettings\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eRoomSettings\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\u003cspan class=\"n\"\u003esettings\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eroomParameters\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ehashTable\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"n\"\u003eMonobitNetwork\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eCreateRoom\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"RoomFoo\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003esettings\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eLobbyInfo\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eDefault\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eというルームを作ると，\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003ehashTable\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eHashtable\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\u003cspan class=\"n\"\u003ehashTable\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s\"\u003e\"tag\"\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"Unity\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"n\"\u003eMonobitEngine\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eMonobitNetwork\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eJoinRandomRoom\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ehashTable\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eでそのルームにマッチングできるようになるはずです。\u003cbr\u003e\n公式記事では\u003ccode\u003eroomParameters\u003c/code\u003eに対してインデックスを指定して書き込む方法で例が示されていますが，自分の環境ではそれをやると「\u003ccode\u003eroomParameters\u003c/code\u003eの中身なんもねぇよ！」って怒られたので，こちらでは自分で作った\u003ccode\u003eHashtable\u003c/code\u003eで上書きしています。こちらだと通ることも確認しています。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"オブジェクトの位置とアニメーションの同期\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E4%BD%8D%E7%BD%AE%E3%81%A8%E3%82%A2%E3%83%8B%E3%83%A1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%AE%E5%90%8C%E6%9C%9F\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eオブジェクトの位置とアニメーションの同期\u003c/h2\u003e\n\n\u003cp\u003e\u003ca href=\"http://www.monobitengine.com/doc/mun/contents/Tutorial/AddSynchronizedComponent.htm\" rel=\"nofollow noopener\" target=\"_blank\"\u003e参考公式記事\u003c/a\u003e\u003cbr\u003e\nこちらはほぼスクリプトなしで実装できます。\u003c/p\u003e\n\n\u003cp\u003e同期したいオブジェクトに\u003ccode\u003eMonobit View\u003c/code\u003eを追加し，\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/635a8d0a709ac2c9fe72f147a2823dfce13d96ea/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3733313934302f66623264306532382d393931392d313631642d343063652d6430353462336534303130362e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F731940%2Ffb2d0e28-9919-161d-40ce-d054b3e40106.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=a68874436af43566d64f42730f82cbf5\" alt=\"MonoView.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/731940/fb2d0e28-9919-161d-40ce-d054b3e40106.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F731940%2Ffb2d0e28-9919-161d-40ce-d054b3e40106.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=2e1406e7573a5da27512eb8505888a05 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e位置ならば\u003ccode\u003eMonobit Transform View\u003c/code\u003e，アニメーションなら\u003ccode\u003eMonobit Animation View\u003c/code\u003eのスクリプトを追加して，\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/48bc8b6bbefba7037416a9c0a9fa687b4ea5333d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3733313934302f34393765333930352d663163302d333863662d636136392d3032363634623739303231612e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F731940%2F497e3905-f1c0-38cf-ca69-02664b79021a.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=7e1f968620a62208760b38a514f25a9f\" alt=\"MTAV.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/731940/497e3905-f1c0-38cf-ca69-02664b79021a.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F731940%2F497e3905-f1c0-38cf-ca69-02664b79021a.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=db96de6c29c6c1b27efcbd2574539267 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003ccode\u003eMonobit View\u003c/code\u003eの\u003ccode\u003eObserved Component Registration List\u003c/code\u003eに\u003ccode\u003eMonobit Transform View\u003c/code\u003eや\u003ccode\u003eMonobit Animation View\u003c/code\u003eを追加します。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/e613178b8f9eddf8e256bbb40d6f9b71a16f82ed/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3733313934302f33383437346439302d353834652d346364622d643439362d6233333435343465396634612e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F731940%2F38474d90-584e-4cdb-d496-b334544e9f4a.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=de0eba53fa160d8799a5041ae69fc5f4\" alt=\"OCRL.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/731940/38474d90-584e-4cdb-d496-b334544e9f4a.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F731940%2F38474d90-584e-4cdb-d496-b334544e9f4a.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=fb16cd964bcdeeb4906940bcc40a1557 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eこれでとりあえず位置の同期は完了です。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"ネットワーク越しのオブジェクト生成破棄\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%8D%E3%83%83%E3%83%88%E3%83%AF%E3%83%BC%E3%82%AF%E8%B6%8A%E3%81%97%E3%81%AE%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E7%94%9F%E6%88%90%E7%A0%B4%E6%A3%84\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eネットワーク越しのオブジェクト生成・破棄\u003c/h2\u003e\n\n\u003cp\u003e\u003ca href=\"http://www.monobitengine.com/doc/mun/contents/FeatureClient/Instantiate.htm\" rel=\"nofollow noopener\" target=\"_blank\"\u003e公式記事（オブジェクト生成）\u003c/a\u003e\u003cbr\u003e\n\u003ca href=\"http://www.monobitengine.com/doc/mun/contents/FeatureClient/Destroy.htm\" rel=\"nofollow noopener\" target=\"_blank\"\u003e公式記事（オブジェクト破棄）\u003c/a\u003e\u003cbr\u003e\nネットワーク越しで生成や破棄を同期させたいオブジェクトに関しては，\u003ccode\u003eUnityEngine.Instantiate\u003c/code\u003eするとうまくいきません。（どううまくいかないかは検証して追記するかもしれないです）\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"c1\"\u003e//ネットワーク越しにオブジェクト生成\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e//string prefabName: プレファブ名（内部的にはResources.Loadしてるので正確にはパス名？要検証）\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e//positionとrotationはUnityEngine.Instantiateと同じなので略\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e//int group: 所属するグループ名（なんかわかったら追記します）\u003c/span\u003e\n\u003cspan class=\"n\"\u003eMonobitEngine\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eMonobitNetwork\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eInstantiate\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003eprefabName\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eVector3\u003c/span\u003e \u003cspan class=\"n\"\u003eposition\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eQuaternion\u003c/span\u003e \u003cspan class=\"n\"\u003erotation\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"k\"\u003egroup\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e//ネットワーク越しに対象viewに所属するオブジェクトを全部破棄\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e//MonobitView monoView: 破棄する対象のMonobitView\u003c/span\u003e\n\u003cspan class=\"n\"\u003eMonobitEngine\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eMonobitNetwork\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eDestroy\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eMonobitView\u003c/span\u003e \u003cspan class=\"n\"\u003emonoView\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e//ネットワーク越しに対象オブジェクト破棄\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e//引数gameObjectは技術ドキュメントだとMonobitView型ですがGameObject型です。（検証済み，あとAPIリファレンスはそうなっています）\u003c/span\u003e\n\u003cspan class=\"n\"\u003eMonobitEngine\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eMonobitNetwork\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eDestroy\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eGameObject\u003c/span\u003e \u003cspan class=\"n\"\u003egameObject\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e\u003ccode\u003eMonobitEngine.MonobitNetwork.Instantiate\u003c/code\u003eは\u003ccode\u003eResources.Load\u003c/code\u003eを使ってるようなので，\u003cstrong\u003e生成するプレファブは\u003ccode\u003eResources\u003c/code\u003eフォルダにないといけません\u003c/strong\u003e。あと指定するのがプレファブの\u003ccode\u003eGameObject\u003c/code\u003eではなく\u003cstrong\u003eプレファブ名\u003c/strong\u003eなのも注意。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"操作キャラの位置同期オブジェクトの所有権の処理\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%93%8D%E4%BD%9C%E3%82%AD%E3%83%A3%E3%83%A9%E3%81%AE%E4%BD%8D%E7%BD%AE%E5%90%8C%E6%9C%9F%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E6%89%80%E6%9C%89%E6%A8%A9%E3%81%AE%E5%87%A6%E7%90%86\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e操作キャラの位置同期（オブジェクトの所有権の処理）\u003c/h2\u003e\n\n\u003cp\u003e\u003ca href=\"http://www.monobitengine.com/doc/mun/contents/FeatureClient/IsMine.htm\" rel=\"nofollow noopener\" target=\"_blank\"\u003e公式記事（オブジェクトの所有権）\u003c/a\u003e\u003cbr\u003e\n\u003ca href=\"http://www.monobitengine.com/doc/mun/contents/Tutorial/TestFailedMultiPlay.htm\" rel=\"nofollow noopener\" target=\"_blank\"\u003e参考公式記事\u003c/a\u003e\u003cbr\u003e\nさて，ここまでの作業でとりあえずオブジェクトの生成と位置やアニメーションの同期はできますが，操作キャラだけはもうちょっと作業が要ります。というのも，同期された相手のオブジェクトはこちらのシーンに召喚される都合上，何も対策をしないと同期されてきた相手のオブジェクトも操作できてしまうため，位置の同期とこちらの操作で干渉してなんか変なことになります。\u003cbr\u003e\nそのため，自分が所有権をもつオブジェクト以外は操作しないというスクリプトを書いてやらないといけなくなります。\u003cbr\u003e\n具体的には，自分がオブジェクトの所有権をもつかは，\u003ccode\u003eMonobitEngine.MonoBehavior\u003c/code\u003e（または\u003ccode\u003eMunMonoBehavior\u003c/code\u003e）内の\u003ccode\u003emonobitView.isMine\u003c/code\u003eプロパティで判定できます。これを使って操作スクリプトを無効化してやればいいです。実装例は下の方にあります。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"ネットワーク越しのメソッド呼び出し\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%8D%E3%83%83%E3%83%88%E3%83%AF%E3%83%BC%E3%82%AF%E8%B6%8A%E3%81%97%E3%81%AE%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E5%91%BC%E3%81%B3%E5%87%BA%E3%81%97\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eネットワーク越しのメソッド呼び出し\u003c/h2\u003e\n\n\u003cp\u003e\u003ca href=\"http://www.monobitengine.com/doc/mun/contents/FeatureClient/Destroy.htm\" rel=\"nofollow noopener\" target=\"_blank\"\u003e公式記事\u003c/a\u003e\u003cbr\u003e\n\u003ccode\u003eMonobitEngine.MonoBehavior\u003c/code\u003e（または\u003ccode\u003eMunMonoBehavior\u003c/code\u003e）なら，ネットワーク越しでRPCという手法によってメソッドを呼び出してやれます。\u003cbr\u003e\nまず，呼び出したいメソッドに\u003ccode\u003e[MunRPC]\u003c/code\u003eを指定します。\u003cbr\u003e\n\u003ccode\u003eMonobitView\u003c/code\u003eを適当なオブジェクトにアタッチしてやり，\u003ccode\u003eMonobitViewID\u003c/code\u003eを0以外の適当な正の整数値にしてやります。\u003cbr\u003e\nそれを\u003ccode\u003e[SerializedField]\u003c/code\u003eなり\u003ccode\u003eGetComponent\u003c/code\u003eなりで取得してやって，\u003ccode\u003eMonobitView\u003c/code\u003eの\u003ccode\u003eRPC()\u003c/code\u003eメソッドを呼べばOKです。\u003cbr\u003e\nなんのこっちゃってなってると思うので例を示します。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eMunRPC\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n\u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003etargetMethod\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003emessage\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003eid\u003c/span\u003e\u003cspan class=\"p\"\u003e){\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eDebug\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eLog\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eid\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"s\"\u003e\" says \"\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"n\"\u003emessage\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003ecallRpc\u003c/span\u003e\u003cspan class=\"p\"\u003e(){\u003c/span\u003e\n\n    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eview\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eGetComponent\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eMonobitView\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;();\u003c/span\u003e\n\n    \u003cspan class=\"n\"\u003eview\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eRPC\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n        \u003cspan class=\"k\"\u003enameof\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003etargetMethod\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"c1\"\u003e//関数の名前(string)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eMonobitTargets\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eAll\u003c/span\u003e \u003cspan class=\"c1\"\u003e//呼び出しの対象，公式ドキュメント参照\u003c/span\u003e\n                             \u003cspan class=\"c1\"\u003e//(ここから呼び出し先の引数)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\"Hi!\"\u003c/span\u003e              \u003cspan class=\"c1\"\u003e//message\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e                  \u003cspan class=\"c1\"\u003e//id        \u003c/span\u003e\n        \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"コールバック\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%B3%E3%83%BC%E3%83%AB%E3%83%90%E3%83%83%E3%82%AF\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eコールバック\u003c/h2\u003e\n\n\u003cp\u003eサーバに繋いだ時や，ルームに入った時など，いろんな時に対してコールバックが用意されています。数が多いのでここでは紹介せず\u003ca href=\"http://www.monobitengine.com/doc/mun/contents/FeatureClient/CallbackFunction.htm\" rel=\"nofollow noopener\" target=\"_blank\"\u003eこちら\u003c/a\u003eを参照していただきたいですが，一つだけハマりそうな部分なんですが，\u003cstrong\u003eコールバックの利用は\u003ccode\u003eMunMonoBehavior\u003c/code\u003eを継承する必要があります。\u003c/strong\u003e逆に言うと，\u003cstrong\u003e\u003ccode\u003eMonobitEngine.MonoBehavior\u003c/code\u003eではコールバックが利用できません。\u003c/strong\u003e\u003cbr\u003e\n理由はコールバックは\u003ccode\u003eMunMonoBehavior\u003c/code\u003eのメソッドをオーバーライドする形で実装されてるため，\u003ccode\u003eMonobitEngine.MonoBehavior\u003c/code\u003eではそもそものメソッドが定義されてないんですよね。もう\u003ccode\u003eMunMonoBehavior\u003c/code\u003eだけでいいんじゃないかな。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"ちょっと一工夫\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%A1%E3%82%87%E3%81%A3%E3%81%A8%E4%B8%80%E5%B7%A5%E5%A4%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eちょっと一工夫\u003c/h1\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"オブジェクトの所有権の処理\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E6%89%80%E6%9C%89%E6%A8%A9%E3%81%AE%E5%87%A6%E7%90%86\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eオブジェクトの所有権の処理\u003c/h2\u003e\n\n\u003cp\u003e\u003ca href=\"http://www.monobitengine.com/doc/mun/contents/Tutorial/EnableIsMineControl.htm\" rel=\"nofollow noopener\" target=\"_blank\"\u003e公式のチュートリアル\u003c/a\u003eでは操作スクリプトに直接所有権の判定を組み込んでいますが，操作スクリプト一個一個に組み込んでるとキリがないですし，基本的にゲーム自体の開発してる時は通信のことなんて考えたくないと思うので，個別に管理してくれるコンポーネントを作った方が管理しやすいと思います。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eOwnerHandler.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"cm\"\u003e/*\nOwnerHandler.cs\n\nCopyright (c) 2021 Dango\n\nThis software is released under the MIT License.\nhttp://opensource.org/licenses/mit-license.php\n*/\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem.Collections.Generic\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eMonobitEngine\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eUnityEngine\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eMonoBehaviour\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eUnityEngine\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eMonoBehaviour\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003enamespace\u003c/span\u003e \u003cspan class=\"nn\"\u003eMunCommunication\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e/// \u0026lt;summary\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e/// Configure MonoBehavior.enabled by ownership of attached object.\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e/// \u0026lt;/summary\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eOwnerHandler\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eMunMonoBehaviour\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eSerializeField\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003eList\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eMonoBehaviour\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eenableIfOwner\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eSerializeField\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003eList\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eMonoBehaviour\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003edisableIfOwner\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n        \u003cspan class=\"c1\"\u003e// Start is called before the first frame update\u003c/span\u003e\n        \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eStart\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"nf\"\u003econfigComponents\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"c1\"\u003e/// \u0026lt;summary\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e/// Check ownership, and configure \"enabled\" property.\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e/// \u0026lt;/summary\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003econfigComponents\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"n\"\u003eisOwner\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003emonobitView\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eisMine\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eenableIfOwner\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eForEach\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ebehaviour\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"n\"\u003ebehaviour\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eenabled\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eisOwner\u003c/span\u003e\u003cspan class=\"p\"\u003e;});\u003c/span\u003e\n            \u003cspan class=\"n\"\u003edisableIfOwner\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eForEach\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ebehaviour\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"n\"\u003ebehaviour\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eenabled\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e!\u003c/span\u003e\u003cspan class=\"n\"\u003eisOwner\u003c/span\u003e\u003cspan class=\"p\"\u003e;});\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003eこれでインスペクタに所有権があるときに有効/無効にするリストができてくれるので設定してやればいいです。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"パスワードの設定\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%91%E3%82%B9%E3%83%AF%E3%83%BC%E3%83%89%E3%81%AE%E8%A8%AD%E5%AE%9A\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eパスワードの設定\u003c/h2\u003e\n\n\u003cp\u003eMUNはルームに対してパスワードを設定できたりはしないんですが，\u003ca href=\"https://support.photonengine.jp/hc/ja/articles/218961187-%E6%8B%9B%E5%BE%85%E8%80%85%E3%81%AE%E3%81%BF%E3%83%AB%E3%83%BC%E3%83%A0%E3%81%B8%E5%85%A5%E5%AE%A4%E3%82%92%E8%A8%B1%E5%8F%AF%E3%81%99%E3%82%8B%E6%96%B9%E6%B3%95\" rel=\"nofollow noopener\" target=\"_blank\"\u003eこちらのPhotonの記事のように\u003c/a\u003eカスタムパラメータをつけて，RandomJoinをやってやればそれに近いことをできます。\u003cbr\u003e\n\u003cstrong\u003e簡易的な\u003c/strong\u003e実装例\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eRoomSelector.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"cm\"\u003e/*\nRoomSelector.cs\n\nCopyright (c) 2021 Dango\n\nThis software is released under the MIT License.\nhttp://opensource.org/licenses/mit-license.php\n*/\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem.Collections\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem.Collections.Generic\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eMonobitEngine\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eUnityEngine\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eUnityEngine.Events\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eMonobitNetwork\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eMonobitEngine\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eMonobitNetwork\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003enamespace\u003c/span\u003e \u003cspan class=\"nn\"\u003eMunCommunication\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eRoomSelector\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eMunMonoBehaviour\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\n        \u003cspan class=\"n\"\u003eHashtable\u003c/span\u003e \u003cspan class=\"nf\"\u003egenerateAuthTable\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003eroomName\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003epassword\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003ecustomParam\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eHashtable\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n            \u003cspan class=\"n\"\u003ecustomParam\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s\"\u003e\"name\"\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eroomName\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"n\"\u003ecustomParam\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s\"\u003e\"password\"\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003epassword\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n            \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003ecustomParam\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003ecreateAuthorizedRoom\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003eroomName\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003epassword\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003esetting\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nf\"\u003egenerateAuthTable\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eroomName\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003epassword\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n            \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eroomSetting\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eRoomSettings\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"n\"\u003eroomParameters\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003esetting\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eisVisible\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003efalse\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e};\u003c/span\u003e\n\n            \u003cspan class=\"c1\"\u003e//ランダム文字列生成\u003c/span\u003e\n            \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003erandomLine\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eGuid\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eNewGuid\u003c/span\u003e\u003cspan class=\"p\"\u003e().\u003c/span\u003e\u003cspan class=\"nf\"\u003eToString\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"N\"\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nf\"\u003eSubstring\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"m\"\u003e10\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n            \u003cspan class=\"n\"\u003eMonobitNetwork\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eCreateRoom\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003erandomLine\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eroomSetting\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eLobbyInfo\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eDefault\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003ejoinAuthorizedRoom\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003eroomName\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003epassword\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003esetting\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nf\"\u003egenerateAuthTable\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eroomName\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003epassword\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n            \u003cspan class=\"n\"\u003eMonobitNetwork\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eJoinRandomRoom\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003esetting\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003eただ，これだと同じルーム名・パスワードが同時に発生した場合に対応ができないので，外部に認証サーバを設けてルーム名を管理してやらないと実用に足るものはおそらく作れないと思います。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"まとめ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%BE%E3%81%A8%E3%82%81\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eまとめ\u003c/h1\u003e\n\n\u003cp\u003eMUNでできること\u003cbr\u003e\n・ネットワーク越しのオブジェクトの位置やアニメーションの同期\u003cbr\u003e\n・ネットワーク越しでのメソッド呼び出し\u003cbr\u003e\nちょっとよくわからない部分がなくもないですが，使ってる感じは問題ないような感じがします。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"参考\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%8F%82%E8%80%83\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e参考\u003c/h1\u003e\n\n\u003cp\u003e\u003ca href=\"http://www.monobitengine.com/doc/mun/\" rel=\"nofollow noopener\" target=\"_blank\"\u003eMUNチュートリアル\u003c/a\u003e\u003cbr\u003e\n\u003ca href=\"http://www.monobitengine.com/doc/doxygen/client/html/index.html\" rel=\"nofollow noopener\" target=\"_blank\"\u003eMUNのAPIリファレンス\u003c/a\u003e\u003cbr\u003e\n\u003ca href=\"https://support.photonengine.jp/hc/ja/articles/218961187-%E6%8B%9B%E5%BE%85%E8%80%85%E3%81%AE%E3%81%BF%E3%83%AB%E3%83%BC%E3%83%A0%E3%81%B8%E5%85%A5%E5%AE%A4%E3%82%92%E8%A8%B1%E5%8F%AF%E3%81%99%E3%82%8B%E6%96%B9%E6%B3%95\" rel=\"nofollow noopener\" target=\"_blank\"\u003eパスワードのかけかたとか：Photonのドキュメント\u003c/a\u003e\u003cbr\u003e\n\u003ca href=\"https://kagasu.hatenablog.com/entry/20150621/1434866124\" rel=\"nofollow noopener\" target=\"_blank\"\u003eランダム文字列\u003c/a\u003e\u003c/p\u003e\n","createdAt":"2021-04-30T15:24:56Z","elapsedYearsFromLastModifiedAt":0,"encryptedId":"pTKpaxOxxRUkn77Mz/ASBAHqjRGidQ4q6A==--j0Jz4pMFgWBIuu15--MT5u0Fkc8vpJO7g5hMQvPw==","isBanned":false,"isDeprecated":false,"isDestroyableByViewer":false,"isEditRequestReadableByViewer":true,"isEditRequestSendableByViewer":true,"isLikableByViewer":true,"isLikedByViewer":false,"isPublic":true,"isSlide":false,"isStockableByViewer":true,"isStockedByViewer":false,"isSubscribableByViewer":false,"isSubscribedByViewer":false,"isUpdatableByViewer":false,"isUpdated":true,"lastModifiedAt":"2021-05-01T10:01:17Z","likesCount":2,"linkUrl":"https://qiita.com/publicClassMain/items/efb7cd2d6adaaa3582f8","organization":null,"originalId":1428635,"stockedCount":2,"title":"Monobit Unity Networking 2.0(MUN)を使ってみた話","toc":"\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB\"\u003eはじめに\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#monobit-unity-networking-%E3%81%A8%E3%81%AF\"\u003eMonobit Unity Networking とは\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%89%8D%E6%8F%90%E7%92%B0%E5%A2%83\"\u003e前提環境\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%9F%BA%E6%9C%AC%E7%9A%84%E3%81%AA%E6%A9%9F%E8%83%BD%E3%81%A8%E5%AE%9F%E8%A3%85\"\u003e基本的な機能と実装\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%9F%BA%E7%A4%8E%E7%9A%84%E3%81%AA%E7%94%A8%E8%AA%9E\"\u003e基礎的な用語\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#monobehavior%E3%81%AE%E4%B8%8A%E6%9B%B8%E3%81%8D\"\u003eMonoBehaviorの上書き\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%B5%E3%83%BC%E3%83%90%E3%81%B8%E3%81%AE%E6%8E%A5%E7%B6%9A%E3%83%AB%E3%83%BC%E3%83%A0%E5%85%A5%E5%AE%A4\"\u003eサーバへの接続〜ルーム入室\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%B5%E3%83%BC%E3%83%90%E3%81%B8%E3%81%AE%E6%8E%A5%E7%B6%9A%E5%88%87%E6%96%AD\"\u003eサーバへの接続・切断\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%AD%E3%83%93%E3%83%BC%E3%81%B8%E3%81%AE%E5%85%A5%E5%AE%A4%E9%80%80%E5%87%BA%E3%81%BB%E3%81%8B%E6%93%8D%E4%BD%9C\"\u003eロビーへの入室・退出・ほか操作\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%AB%E3%83%BC%E3%83%A0%E4%BD%9C%E6%88%90%E5%85%A5%E5%AE%A4%E9%80%80%E5%87%BA\"\u003eルーム作成・入室・退出\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E4%BD%8D%E7%BD%AE%E3%81%A8%E3%82%A2%E3%83%8B%E3%83%A1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%AE%E5%90%8C%E6%9C%9F\"\u003eオブジェクトの位置とアニメーションの同期\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%8D%E3%83%83%E3%83%88%E3%83%AF%E3%83%BC%E3%82%AF%E8%B6%8A%E3%81%97%E3%81%AE%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E7%94%9F%E6%88%90%E7%A0%B4%E6%A3%84\"\u003eネットワーク越しのオブジェクト生成・破棄\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E6%93%8D%E4%BD%9C%E3%82%AD%E3%83%A3%E3%83%A9%E3%81%AE%E4%BD%8D%E7%BD%AE%E5%90%8C%E6%9C%9F%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E6%89%80%E6%9C%89%E6%A8%A9%E3%81%AE%E5%87%A6%E7%90%86\"\u003e操作キャラの位置同期（オブジェクトの所有権の処理）\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%8D%E3%83%83%E3%83%88%E3%83%AF%E3%83%BC%E3%82%AF%E8%B6%8A%E3%81%97%E3%81%AE%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E5%91%BC%E3%81%B3%E5%87%BA%E3%81%97\"\u003eネットワーク越しのメソッド呼び出し\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%B3%E3%83%BC%E3%83%AB%E3%83%90%E3%83%83%E3%82%AF\"\u003eコールバック\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%81%A1%E3%82%87%E3%81%A3%E3%81%A8%E4%B8%80%E5%B7%A5%E5%A4%AB\"\u003eちょっと一工夫\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E6%89%80%E6%9C%89%E6%A8%A9%E3%81%AE%E5%87%A6%E7%90%86\"\u003eオブジェクトの所有権の処理\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%91%E3%82%B9%E3%83%AF%E3%83%BC%E3%83%89%E3%81%AE%E8%A8%AD%E5%AE%9A\"\u003eパスワードの設定\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%81%BE%E3%81%A8%E3%82%81\"\u003eまとめ\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%8F%82%E8%80%83\"\u003e参考\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n","totalPv":1072,"uuid":"efb7cd2d6adaaa3582f8","banReason":null,"adventCalendarItem":null,"author":{"encryptedId":"AoHR5tZanc5vcP2mHrbAn1jrT1Cv--xG++hLWCnjpx56W+--g5nWKLlNv1IFxkFTXBkqqQ==","originalId":731940,"description":"気ままにものづくりをする大学\r\n\r\nLang: C/C++, Java, C#, Python, Arudino, Unity, Vue.js, React\r\nInterests: IoT, 機械学習, VR/AR, マイコン制御, オブジェクト指向","facebookUrl":null,"githubUrl":"https://github.com/NV7150","isBlockingViewer":false,"isFollowableByViewer":true,"isFollowedByViewer":false,"isTweetWebNotificationReceivable":true,"linkedinUrl":null,"name":"Dan Go","profileImageUrl":"https://pbs.twimg.com/profile_images/1220993521823277057/6KHCOQ03_bigger.jpg","profileImageUrlW48":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fpbs.twimg.com%2Fprofile_images%2F1220993521823277057%2F6KHCOQ03_bigger.jpg?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=48\u0026s=246436e31d2256bf4ac64d760f744b25","profileImageUrlW75":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fpbs.twimg.com%2Fprofile_images%2F1220993521823277057%2F6KHCOQ03_bigger.jpg?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=21ab0ca1d62061f5a82afeec09ac9db3","urlName":"publicClassMain","websiteUrl":"","twitterUrl":null,"twitterUrlName":null,"revealedOrganizations":{"edges":[]}},"tags":[{"name":"Network","urlName":"network"},{"name":"C#","urlName":"csharp"},{"name":"Unity","urlName":"unity"},{"name":"備忘録","urlName":"%e5%82%99%e5%bf%98%e9%8c%b2"},{"name":"MonobitUnityNetworking","urlName":"monobitunitynetworking"}],"followingLikers":{"edges":[]},"comments":{"totalCount":0}},"comments":[],"client":null,"ads_event_emitter":null}}</script>
