More than 3 years have passed since last update.ちょっと遊んでいたら、MandelbroをUnityで動かしているひとがいた。そして、Terrainを動かしている人がいる。
これはOculusGoで動くMandelbroが見られるかなと思いやってみました。今回は以下の三つの参考の通りです。
【参考】
①【Unity】terrainを繰り返して、無限に続く地面を作る
②UnityのTerrainでマンデルブロしてみた
③Pythonでカオス・フラクタルを見よう！今回のコードは以下に置いた
MuAuan/Unity （１）Mandelbro集合
（２）Unityで見る
（３）Terrainを動かすpythonだと参考③から以下のとおりWikipediaによれば
次の漸化式で定義される複素数列 {zn}n∈N∪{0} が n → ∞ の極限で無限大に発散しないという条件を満たす複素数 c 全体が作る集合がマンデルブロ集合である。
マンデルブロ集合を複素数を使わずに書き直すには、zn を点 (xn, yn) に、c を点 (a, b) にそれぞれ置き代えて、とすればよい。ということで、上記のPythonコードでよいことが分かる。上記コードはReturnが秀逸だ。以下蛇足。。
「上式で z0 を 0 以外の複素数にした場合、マンデルブロ集合の周が変形し、ジュリア集合に似たフラクタル状の曲線が現れる。」
確かに絵は変わるけど。。。オリジナルの方が綺麗。因みにコードはこれはまずは参考②のまんまです。コードも公開されているのでそのままで動くと思います。しかし、ウワンが独自にやってみた感じだと、Terrainの性質が少し異なってしまいました。

上の絵のように、二つのマンデルブロが見えますが、一つは公開されているassetsを使っています。何が異なるかというと、ウワンのは表示されているマンデルブロの高さを調整していますが、公開版は無調整でこの高さになっています。
一応、以下にウワンのコードを公開しておきます。
※元のコードは参考②を見てくださいちなみにマンデルブロの部分は元コードのままで以下の通りです。このコードでは発散するというか４を超えたときの次数の最大回数との比を返しており、超えない場合１を返しているので、場所により高さが異なります。
ちなみにこれを見るのはその大きさが最初大きすぎて何を見ているのかわからずカメラの位置などに苦労しました。
Terainは初めて使いましたが、hierarchyの３Dの下にあり、hierarchyに張り付けました。あとは用意したスクリプトMandelbrotTerrainを貼り付けます。しかしここで、terraindataにMandelbroTerrainを指定するとTerrainColliderのところでエラーが出てしまいます。まあ、ここはNewTerrainのまま動きました。もう一方のMandelbrotCalculatorは前者から呼ばれているだけで特に何もしません。
以下、３連結した絵です。
こうしてほぼまんまでマンデルブロがUnityの中で動きます。
しかし、もっとダイナミックな絵を見たいということで、Terrainを動かすというのを追加してみました。
こちらは、以下のコードをUpdateに追加するだけ。。のはずでした。しかし、float size = 2000;  //NOTE!がTerrainの大きさなんだけど、これウワンのは５００でした。ということで、ここ変更しました。
それでもなんとなく動かしている方向が異なるらしく、結局以下のコードで連続する大地というか連続するマンデルブロができました。ということで、最初の５００の符号と不等号が異なっています。さて、OculusGoで見てみると。。。あれ？？なぜか見えません。
ということで、動画は無しです。
残念。。。

上記は二連結した場合のシーンです。三連結は迫力さらにアップしました。
【追記】認証で失敗していたようです。OculusGoで見えました！
【OculusGo】Mandelbroの大地が動く♪

 
※画像をクリックするとYouTube動画につながります・Terrainにマンデルブロを貼り付けて動かしてみた。
・さらにTerrainを動かして複数マンデルブロが続々出てくる無限ループを作成した・OculusGoではマンデルブロ（Terrain）が見えない
・同じように動くがパラメータ（TerrainColliderのTerrainData）が参考サイトのものと異なるが設定しようとするとTerrainにエラーが出る
・Gameの中に入って（その視線で）Terrainを散歩したい


