<!DOCTYPE html><html><head><meta charset="utf-8" /><title>【C#】パスワードを動的生成しローカルデータ管理の安全性を高めてみる - Qiita</title><meta content="width=device-width,initial-scale=1,shrink-to-fit=no,viewport-fit=cover" name="viewport" /><meta content="#55c500" name="theme-color" /><meta content="XWpkTG32-_C4joZoJ_UsmDUi-zaH-hcrjF6ZC_FoFbk" name="google-site-verification" /><meta content="telephone=no" name="format-detection" /><link rel="canonical" href="https://qiita.com/yoship1639/items/c03d33662acf639f8619" /><link href="/manifest.json" rel="manifest" /><link href="/opensearch.xml" rel="search" title="Qiita" type="application/opensearchdescription+xml" /><link as="script" href="https://www.googletagservices.com/tag/js/gpt.js" rel="preload" /><link href="https://securepubads.g.doubleclick.net" rel="preconnect" /><script async="" src="https://www.googletagservices.com/tag/js/gpt.js"></script><meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="o0Wc+p1+hPrqTdVD6/LEGV9/dEX8YucgNbD2MDdS5nR3lP7czBCfvLs2kVxLImYZoi6RYC6b43fQkrtG68tC/w==" /><link rel="shortcut icon" type="image/x-icon" href="https://cdn.qiita.com/assets/favicons/public/production-c620d3e403342b1022967ba5e3db1aaa.ico" /><link rel="apple-touch-icon" type="image/png" href="https://cdn.qiita.com/assets/favicons/public/apple-touch-icon-ec5ba42a24ae923f16825592efdc356f.png" /><link rel="stylesheet" media="all" href="https://cdn.qiita.com/assets/public/article-2eaa7dbedc42a8ea65c722cda46d0ebb.min.css" /><script src="https://cdn.qiita.com/assets/public/v3-article-bundle-63de2d91fef827269d3f6b958db2335b.min.js" defer="defer"></script><meta name="twitter:card" content="summary_large_image"><meta content="@Qiita" name="twitter:site" /><meta content="@yoship1639" name="twitter:creator" /><meta property="og:type" content="article"><meta property="og:title" content="【C#】パスワードを動的生成しローカルデータ管理の安全性を高めてみる - Qiita"><meta property="og:image" content="https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0&amp;w=1200&amp;mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND00NENRUXlQamdKSGpnNUhqZ3Juamc2X2pnN3pqZzRuamdwTGxpNVhubW9UbmxKX21pSkRqZ1pmamc2M2pnN3pqZ3F2amc2dmpnNGZqZzd6amdyX25ycUhua0liamdhN2xyb25saGFqbWdLZmpncExwcTVqamdvSGpnYWJqZ2JfamdvcyZ0eHQtY29sb3I9JTIzMzMzJnR4dC1mb250PUhpcmFnaW5vJTIwU2FucyUyMFc2JnR4dC1zaXplPTU0JnR4dC1jbGlwPWVsbGlwc2lzJnR4dC1hbGlnbj1jZW50ZXIlMkNtaWRkbGUmcz00NDVlMzEwNmNhMTJiZGQxMzZhMWNlNDc5Y2UxYTQ5NA&amp;mark-align=center%2Cmiddle&amp;blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RSGx2YzJocGNERTJNemsmdHh0LWNvbG9yPSUyMzMzMyZ0eHQtZm9udD1IaXJhZ2lubyUyMFNhbnMlMjBXNiZ0eHQtc2l6ZT00NSZ0eHQtYWxpZ249cmlnaHQlMkNib3R0b20mcz1mZjIzNDk4ZWU2OGQ2ZWJjMDdhYThjOTBjYTYwODY0MQ&amp;blend-align=center%2Cmiddle&amp;blend-mode=normal&amp;s=03b468777e6c8b09ebaf8c148998c3e0"><meta property="og:description" content="本記事は C# その2 Advent Calender2018 12日目の記事です。


はじめに

こんにちは、@yoship1639です。
普段は、ゲームエンジンを用いない個人ゲーム開発を行っています。

皆様は、「ゲームのセーブ..."><meta content="https://qiita.com/yoship1639/items/c03d33662acf639f8619" property="og:url" /><meta content="Qiita" property="og:site_name" /><meta content="564524038" property="fb:admins" /><meta content="C#,セキュリティ,ゲーム制作,暗号,パスワード管理" name="keywords" /><script>!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window, document,'script',
'https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '668972150489891');
fbq('track', 'PageView');</script><style data-emotion-css="17jxvjw 11t2ec1 1dvr2p8 18lkoru 1g4cku8 1iupg5d ijvq0v 15cocm3 12rp90f 115f4t 1b8uj5v 79elbk 16hhh7b fcbn8c 1gj7nt 154zy0m yikrym 1jqivyb 1ode1bp le4d8r 1hbd3g7 1nzh4zz 38fzdi helsa7 8qb8m4 2imjyh he5w1s 70qvj9 3ojehk 100alwu 1dtnjt5 10ougpm 1ay9vb9 m19uds cgzq40 1wa99t2 1l3zk9f 4czcte 1yzj1fm 1uv1qiv 109dbrr 5jpx49 mnxgyc 1vlpknv fsjkhv 1b17vb0 7i7f4d"}>.css-17jxvjw{display:grid;display:-ms-grid;grid-template-columns:80px minmax(0,1fr) 300px;-ms-grid-columns:80px minmax(0,1fr) 300px;grid-template-rows:minmax(270px,auto) 1fr;-ms-grid-rows:minmax(270px,auto) 1fr;max-width:1280px;margin-right:auto;margin-left:auto;padding-top:24px;padding-right:24px;padding-left:24px;}@media (max-width:1200px){.css-17jxvjw{padding-bottom:0;padding-left:0;padding-right:0;}}@media (max-width:992px){.css-17jxvjw{grid-template-columns:80px 452px 300px;-ms-grid-columns:80px 452px 300px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}}@media (max-width:770px){.css-17jxvjw{display:block;}}@media (max-width:480px){.css-17jxvjw{padding-top:0;}}.css-11t2ec1{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;z-index:5;position:-webkit-sticky;position:sticky;top:calc(56px + 24px + 16px + 32px - 16px);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:16px;width:80px;}.css-11t2ec1:after{content:'';display:table;}.css-11t2ec1:before{content:'';display:table;}@media (max-width:770px){.css-11t2ec1{display:none;}}.css-1dvr2p8{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-18lkoru{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;background-color:#FFFFFF;}.css-1g4cku8{display:inline-block;vertical-align:middle;height:20px;width:20px;fill:#55C500;}.css-1iupg5d{color:#55C500;cursor:pointer;font-size:14px;font-weight:bold;}.css-ijvq0v{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-15cocm3{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#FFFFFF;border:2px solid #6E6F70;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:2px 0px 0px;width:40px;}.css-12rp90f{display:inline-block;vertical-align:bottom;height:17.77777777777778px;width:16px;fill:#6E6F70;}.css-115f4t{color:#6E6F70;font-size:14px;font-weight:bold;}.css-1b8uj5v{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;margin-bottom:16px;padding:0;}.css-79elbk{position:relative;}.css-16hhh7b{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;padding:0;}.css-fcbn8c{display:none;bottom:initial;left:initial;right:initial;top:initial;left:100%;top:calc(-8px - (14px * 1.8) - 16px - 4px);}.css-1gj7nt{color:rgba(0,0,0,0.6);font-size:14px;font-weight:bold;line-height:1.8;padding:8px 16px;}.css-154zy0m{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.87);cursor:pointer;font-size:16px;font-weight:normal;line-height:1.8;padding:4px 16px;}.css-154zy0m:hover{-webkit-text-decoration:none;text-decoration:none;background-color:#F2F2F2;}.css-yikrym{width:20px;}.css-1jqivyb{color:rgba(0,0,0,0.6);font-size:13px;}.css-1ode1bp{background-color:rgba(0,0,0,0.12);height:1px;width:100%;margin:8px 0;}.css-le4d8r{display:inline-block;vertical-align:middle;height:13px;width:13px;fill:rgba(0,0,0,0.6);}.css-1hbd3g7{height:250px;}.css-1nzh4zz{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:16px 32px;background-color:#FBE69E;color:rgba(0,0,0,0.87);line-height:1.5;font-weight:600;}@media (max-width:770px){.css-1nzh4zz{padding:16px;}}.css-38fzdi{color:#CA832A;margin-right:4px;}.css-helsa7{background-color:#FFFFFF;padding:32px;margin-bottom:24px;}@media (max-width:992px){.css-helsa7{margin:0 auto 40px;}}@media (max-width:480px){.css-helsa7{margin:0 0 40px;padding:32px 16px;}}.css-8qb8m4{margin-bottom:48px;}.css-2imjyh{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-he5w1s{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;width:100%;}@media (max-width:770px){.css-he5w1s{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}}.css-70qvj9{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.css-3ojehk{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;margin-right:4px;}.css-100alwu{display:inline-block;border-radius:50%;line-height:1;overflow:hidden;vertical-align:middle;}.css-1dtnjt5{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-10ougpm{color:rgba(0,0,0,0.87);font-size:14px;font-weight:600;line-height:1.8;margin-right:4px;text-wrap:break-word;word-break:break-all;}.css-1ay9vb9{margin-right:16px;}.css-m19uds{color:rgba(0,0,0,0.6);font-size:14px;line-height:1.8;}.css-cgzq40{color:rgba(0,0,0,0.87);font-size:32px;font-weight:bold;line-height:1.4;margin-top:8px;text-wrap:break-word;word-break:break-all;}.css-1wa99t2{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.6);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:8px;}.css-1l3zk9f{color:rgba(0,0,0,0.6);font-size:20px;margin-right:8px;}.css-4czcte{margin-right:4px;color:inherit;font-size:14px;line-height:1.8;}.css-4czcte:not(:last-child)::after{content:',';margin-right:4px;}.css-1yzj1fm{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:32px;}.css-1uv1qiv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-size:20px;height:32px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin-right:16px;outline:none;padding:0;width:32px;}.css-109dbrr{background-color:#F9F9F9;border-top:1px solid rgba(0,0,0,0.12);bottom:0;box-shadow:0px 1px 4px rgba(0,0,0,0.14);display:none;height:calc(env(safe-area-inset-bottom,0px) + 56px);-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding-bottom:env(safe-area-inset-bottom);position:-webkit-sticky;position:sticky;width:100%;z-index:2000;}@media (max-width:770px){.css-109dbrr{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}.css-5jpx49{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:space-evenly;-webkit-justify-content:space-evenly;-ms-flex-pack:space-evenly;justify-content:space-evenly;width:100%;}.css-mnxgyc{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1vlpknv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;margin-right:4px;background-color:#FFFFFF;}.css-fsjkhv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1b17vb0{color:#6E6F70;font-size:14px;font-weight:bold;margin-left:4px;}.css-7i7f4d{display:none;bottom:initial;left:initial;right:initial;top:initial;bottom:32px;right:0;}</style></head><body><div class="allWrapper"><div><div id="GlobalHeader-react-component-79b74dfc-e5eb-47ea-8720-cfefe0beb4fb"><div class="st-Header"><div class="st-Header_container"><div class="st-Header_start"><a href="/" class="st-Header_logo"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 426.57 130"><circle cx="167.08" cy="21.4" r="12.28"></circle><path d="M250.81 29.66h23.48v18.9h-23.48z"></path><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z"></path><circle cx="216.33" cy="21.4" r="12.28"></circle></svg></a><div class="st-Header_communitySelector" tabindex="0"><span class="fa fa-caret-down"></span></div><div class="st-Header_dropdown"><div class="st-Header_dropdownHeading">Qiita Teams that are logged in</div><div class="st-Header_dropdownItemNote">You are not logged in to any team</div><hr class="st-Header_dropdownDivider st-Header_dropdownDivider-shrink"/><a href="https://teams-center.qiita.com/find_team" class="st-Header_dropdownItem"><span class="fa fa-fw fa-sign-in st-Header_dropdownItemIcon"></span><div>Log in to Qiita Team</div></a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Community</div><a href="/organizations" class="st-Header_dropdownItem">Organization</a><a href="/official-events/open" class="st-Header_dropdownItem">Event</a><a href="/advent-calendar" class="st-Header_dropdownItem">Advent Calendar</a><a href="https://qiitadon.com/" class="st-Header_dropdownItem" target="_blank">Qiitadon (β)</a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Service</div><a href="https://jobs.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Jobs</a><a href="https://zine.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Zine</a><a href="https://blog.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Blog</a></div><form class="st-Header_search" action="/search" method="get"><span class="fa fa-search st-Header_searchIcon"></span><input type="search" class="st-Header_searchInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form><form class="st-Header_searchModal" action="/search" method="get"><input type="text" class="st-Header_searchModalInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form></div><div class="st-Header_end"><div class="st-Header_searchButton"><span class="fa fa-search"></span></div><a class="st-Header_signupButton" href="/signup?redirect_to=%2Fyoship1639%2Fitems%2Fc03d33662acf639f8619">Signup</a><a class="st-Header_loginLink" href="/login?redirect_to=%2Fyoship1639%2Fitems%2Fc03d33662acf639f8619">Login</a></div><div class="st-Header_overlay"></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="GlobalHeader" data-dom-id="GlobalHeader-react-component-79b74dfc-e5eb-47ea-8720-cfefe0beb4fb">{"unreadNotificationsCount":null,"realms":[{"humanName":"Qiita","isCurrentRealm":true,"isQiita":true,"isQiitaTeam":false,"loggedInUser":null,"teamId":null,"url":"https://qiita.com/"}],"teamFindUrl":"https://teams-center.qiita.com/find_team","isTeamOnlyUser":null,"currentUser":null}</script>
      
</div><div class="st-HeaderAlert st-HeaderAlert-warning"><div class="st-HeaderAlert_body"></div></div><script type="application/ld+json">{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"/","name":"Qiita"}},{"@type":"ListItem","position":2,"item":{"@id":"/tags/csharp","name":"C#"}}]}</script><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","datePublished":"2018-11-05T23:43:28.000+09:00","dateModified":"2018-12-12T23:35:23.000+09:00","headline":"【C#】パスワードを動的生成しローカルデータ管理の安全性を高めてみる","image":"https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0\u0026w=1200\u0026mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND00NENRUXlQamdKSGpnNUhqZ3Juamc2X2pnN3pqZzRuamdwTGxpNVhubW9UbmxKX21pSkRqZ1pmamc2M2pnN3pqZ3F2amc2dmpnNGZqZzd6amdyX25ycUhua0liamdhN2xyb25saGFqbWdLZmpncExwcTVqamdvSGpnYWJqZ2JfamdvcyZ0eHQtY29sb3I9JTIzMzMzJnR4dC1mb250PUhpcmFnaW5vJTIwU2FucyUyMFc2JnR4dC1zaXplPTU0JnR4dC1jbGlwPWVsbGlwc2lzJnR4dC1hbGlnbj1jZW50ZXIlMkNtaWRkbGUmcz00NDVlMzEwNmNhMTJiZGQxMzZhMWNlNDc5Y2UxYTQ5NA\u0026mark-align=center%2Cmiddle\u0026blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RSGx2YzJocGNERTJNemsmdHh0LWNvbG9yPSUyMzMzMyZ0eHQtZm9udD1IaXJhZ2lubyUyMFNhbnMlMjBXNiZ0eHQtc2l6ZT00NSZ0eHQtYWxpZ249cmlnaHQlMkNib3R0b20mcz1mZjIzNDk4ZWU2OGQ2ZWJjMDdhYThjOTBjYTYwODY0MQ\u0026blend-align=center%2Cmiddle\u0026blend-mode=normal\u0026s=03b468777e6c8b09ebaf8c148998c3e0","mainEntityOfPage":"https://qiita.com/yoship1639/items/c03d33662acf639f8619","author":{"@type":"Person","address":"","email":"yoship1639@gmail.com","identifier":"yoship1639","name":"yoship1639","image":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F113595%2Fprofile-images%2F1594732889?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=716c2b13f79841ad7658dcce03a19ac2","url":"https://qiita.com/yoship1639","description":"ゲームエンジニア。C#er。バックエンドも触る。ゲーム、ゲームエンジン、仮想通貨等を自作していました。フロントエンドから物理ベースシェーダまで幅広く対応可能。理解しやすく正しい記事を記述することを心がけます。","memberOf":[{"@type":"Organization","address":"オンライン@Slack","legalName":"Unityゲーム開発者ギルド","image":"https://s3-ap-northeast-1.amazonaws.com/qiita-organization-image/5e3ba3bb442371003e6b5d4618ef627b9b478357/original.jpg?1570216541","logo":"https://s3-ap-northeast-1.amazonaws.com/qiita-organization-image/f7eb993765ddcdb2c5e6890556c43ea3de8fbfb7/original.jpg?1570215690","identifier":"unity-game-dev-guild","description":"趣味・仕事問わずUnityでゲームを作っている開発者のみで構成されるオンラインコミュニティです。Unityでゲームを開発・運用するにあたって必要なあらゆる知見を共有することを目的とします。"}]},"publisher":{"@type":"Organization","name":"Qiita","logo":{"@type":"ImageObject","url":"//cdn.qiita.com/assets/public/qiita-logo-c39ded593afa388e2e1ba435b110554e.png"}}}</script><style type="text/css">.wb-CampaignLink {
  background-color: #333333;
  width: 100%;
}

.wb-CampaignLink_container {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  max-width: 1100px;
  margin: 0 auto;
  font-size: 13px;
  padding: 0.8em;
}
.wb-CampaignLink_container > a {
  color: #fff;
}

.wb-CampaignLink_container > a:hover {
  text-decoration: underline;
}</style><div class="wb-CampaignLink"><div class="wb-CampaignLink_container"><a target="_blank" id="header_text_message_1" href="https://zine.qiita.com/interview/202107-line-growth-technology/?utm_source=qiita&amp;utm_medium=header-banner">運用ではなくサービス運営の課題解決。LINE Growth Technologyに聞くGrowth開発</a><a target="_blank" id="header_text_message_2" href="https://zine.qiita.com/interview/202107-line-growth-technology/?utm_source=qiita&amp;utm_medium=header-banner">詳しくはこちら</a></div><script>td.trackEvent(
  'front_events',
  {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"yoship1639","type":"items","id":"c03d33662acf639f8619"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Show","data":{"message":"運用ではなくサービス運営の課題解決。LINE Growth Technologyに聞くGrowth開発","url":"https://zine.qiita.com/interview/202107-line-growth-technology/?utm_source=qiita\u0026utm_medium=header-banner","sub_message":"詳しくはこちら"}}
)</script><script>document.getElementById('header_text_message_1').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"yoship1639","type":"items","id":"c03d33662acf639f8619"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":0,"pos_id":"header_text_message_1","message":"運用ではなくサービス運営の課題解決。LINE Growth Technologyに聞くGrowth開発","url":"https://zine.qiita.com/interview/202107-line-growth-technology/?utm_source=qiita\u0026utm_medium=header-banner","sub_message":"詳しくはこちら"}}
  )
})</script><script>document.getElementById('header_text_message_2').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"yoship1639","type":"items","id":"c03d33662acf639f8619"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":0,"pos_id":"header_text_message_2","message":"運用ではなくサービス運営の課題解決。LINE Growth Technologyに聞くGrowth開発","url":"https://zine.qiita.com/interview/202107-line-growth-technology/?utm_source=qiita\u0026utm_medium=header-banner","sub_message":"詳しくはこちら"}}
  )
})</script></div><script type="application/json" id="js-react-on-rails-context">{"railsEnv":"production","inMailer":false,"i18nLocale":"en","i18nDefaultLocale":"en","href":"https://qiita.com/yoship1639/items/c03d33662acf639f8619","location":"/yoship1639/items/c03d33662acf639f8619","scheme":"https","host":"qiita.com","port":null,"pathname":"/yoship1639/items/c03d33662acf639f8619","search":null,"httpAcceptLanguage":null,"actionPath":"public/items#show","settings":{"analyticsTrackingId":"UA-24675221-12","assetsMap":{},"csrfToken":"93JdUshFAIpJp/GVoXyiX+AdB7Z+S3QgxksjqFL8tF0joz90mSsbzBjctYoBrABfHUzik6yycHcjaW7ejmUQ1g==","locale":"en"},"currentUser":null,"isLoggedIn":false,"recaptchaSiteKey":"6LfNkiQTAAAAAM3UGnSquBy2akTITGNMO_QDxMw6","serverSide":false}</script>
<div id="PersonalArticlePage-react-component-77587726-256d-4925-9449-c48d315b5d7e"><div class="p-items_wrapper"><div class=" css-17jxvjw"><div class="css-11t2ec1"><div class="css-1dvr2p8"><button class=" css-18lkoru"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/yoship1639/items/c03d33662acf639f8619/likers" class="css-1iupg5d">17</a></div><div class="css-ijvq0v"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-115f4t">7</span></div><div class="css-1b8uj5v"><span class="fa fa-twitter"></span></div><div class="css-1b8uj5v"><span class="fa fa-facebook"></span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-fcbn8c"><div class="css-1gj7nt">Improve article</div><a href="/drafts/c03d33662acf639f8619/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/yoship1639/items/c03d33662acf639f8619/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/yoship1639/items/c03d33662acf639f8619/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/yoship1639/items/c03d33662acf639f8619/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/yoship1639/items/c03d33662acf639f8619.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div><div class="p-items_options"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_toc"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_main"><div class="css-1nzh4zz"><span class="fa fa-fw fa-warning css-38fzdi"></span><p>More than 1 year has passed since last update.</p></div><div class="css-helsa7"><div class="css-8qb8m4"><div class="it-AdcalRibbon"><span><a href="/advent-calendar/2018/c-sharp-2" class="it-AdcalRibbon_title">C# その2 <!-- --> Advent Calendar<!-- --> <!-- -->2018</a>Day 12</span></div><div class="css-2imjyh"><div class="css-he5w1s"><div class="css-70qvj9"><div class="css-3ojehk"><a href="/yoship1639"><img class="css-100alwu eyfquo10" src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/113595/profile-images/1594732889" width="24" height="24" loading="lazy"/></a></div><div class="css-1dtnjt5"><a href="/yoship1639" class="css-10ougpm">@<!-- -->yoship1639</a><div class="css-1ay9vb9"><span><meta content="2018-11-05T14:43:28Z"/><time dateTime="2018-12-12T14:35:23Z" class="css-m19uds">updated at 2018-12-12</time></span></div></div></div></div></div><h1 class="css-cgzq40">【C#】パスワードを動的生成しローカルデータ管理の安全性を高めてみる</h1><div class="css-1wa99t2"><span class="fa fa-tags mr-1of2 css-1l3zk9f" aria-hidden="true"></span><a href="/tags/csharp" class="css-4czcte">C#</a><a href="/tags/%e3%82%bb%e3%82%ad%e3%83%a5%e3%83%aa%e3%83%86%e3%82%a3" class="css-4czcte">セキュリティ</a><a href="/tags/%e3%82%b2%e3%83%bc%e3%83%a0%e5%88%b6%e4%bd%9c" class="css-4czcte">ゲーム制作</a><a href="/tags/%e6%9a%97%e5%8f%b7" class="css-4czcte">暗号</a><a href="/tags/%e3%83%91%e3%82%b9%e3%83%af%e3%83%bc%e3%83%89%e7%ae%a1%e7%90%86" class="css-4czcte">パスワード管理</a></div></div><section class="it-MdContent"><div id="personal-public-article-body"><div><p>本記事は <a href="https://qiita.com/advent-calendar/2018/c-sharp-2">C# その2 Advent Calender2018</a> 12日目の記事です。</p>

<h1>
<span id="はじめに" class="fragment"></span><a href="#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB"><i class="fa fa-link"></i></a>はじめに</h1>

<p>こんにちは、<a href="https://twitter.com/yoship1639" rel="nofollow noopener" target="_blank">@yoship1639</a>です。<br>
普段は、ゲームエンジンを用いない個人ゲーム開発を行っています。</p>

<p>皆様は、「ゲームのセーブデータを改ざん出来ない様にしろ」と言われたらどう対処しますか？一番簡単なのは、セーブデータをサーバに丸投げして暗号化してもらうのがベストですね。暗号化に用いた手法もパスワードも分からないので、安全です。</p>

<p>しかし、それができない状況ではどうすれば良いでしょうか。つまり、ローカル環境でセーブデータを安全に管理する方法ですね。</p>

<p>さらに、今回は以下の制約付きです。</p>

<ul>
<li>C#オンリー (c++のdllは不可)</li>
<li>難読化ツール(dotfuscator等)が利用できない</li>
</ul>

<p>こんな状況だとどうすればいいかを考えてみたいと思います。</p>

<h1>
<span id="ローカルデータ管理方法" class="fragment"></span><a href="#%E3%83%AD%E3%83%BC%E3%82%AB%E3%83%AB%E3%83%87%E3%83%BC%E3%82%BF%E7%AE%A1%E7%90%86%E6%96%B9%E6%B3%95"><i class="fa fa-link"></i></a>ローカルデータ管理方法</h1>

<p>まず、ローカルデータの管理方法はどの様なものがあるのかを見てみます。<br>
上から順に安全性が高くなります。</p>

<h4>
<span id="1-ファイルにテキストとして書き出し" class="fragment"></span><a href="#1-%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AB%E3%83%86%E3%82%AD%E3%82%B9%E3%83%88%E3%81%A8%E3%81%97%E3%81%A6%E6%9B%B8%E3%81%8D%E5%87%BA%E3%81%97"><i class="fa fa-link"></i></a>1. ファイルにテキストとして書き出し</h4>

<p>一番簡単なのはファイルにテキストデータとして直接書き出してしまうことですね。ご想像通り、一番イケないやつです。簡単にデータを改ざん出来てしまいます。</p>

<h4>
<span id="2-ファイルにバイナリとして書き出し" class="fragment"></span><a href="#2-%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AB%E3%83%90%E3%82%A4%E3%83%8A%E3%83%AA%E3%81%A8%E3%81%97%E3%81%A6%E6%9B%B8%E3%81%8D%E5%87%BA%E3%81%97"><i class="fa fa-link"></i></a>2. ファイルにバイナリとして書き出し</h4>

<p>次に考えるのは、テキストとしてではなく、バイナリデータとして書き出してしまうやり方です。こうすると、ファイルを開いてもバイナリが並んでるだけで何のデータか解り難くなります。しかし、改ざんは容易にできてしまいます。何のデータか解らなくても適当に値を書き換えることができてしまいます。</p>

<h4>
<span id="3-暗号化してパスワードを設定ファイルに記述" class="fragment"></span><a href="#3-%E6%9A%97%E5%8F%B7%E5%8C%96%E3%81%97%E3%81%A6%E3%83%91%E3%82%B9%E3%83%AF%E3%83%BC%E3%83%89%E3%82%92%E8%A8%AD%E5%AE%9A%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AB%E8%A8%98%E8%BF%B0"><i class="fa fa-link"></i></a>3. 暗号化して、パスワードを設定ファイルに記述</h4>

<p>バイナリでも駄目だとすると、次に考えるのはデータの暗号化です。バイナリデータに暗号処理を施すことで、改ざん検知が可能となりセキュリティが高くなります。そして、暗号化にはパスワードが必要です。複合化のために同じパスワードが必要だからです。<br>
しかし、パスワードを設定ファイルに保存すると、パスワードが設定ファイルから丸見えです。簡単に改ざんは出来なくなりましたが、仕組みが分かれば複合は簡単です。</p>

<h4>
<span id="4-暗号化してパスワードをコード内に記述" class="fragment"></span><a href="#4-%E6%9A%97%E5%8F%B7%E5%8C%96%E3%81%97%E3%81%A6%E3%83%91%E3%82%B9%E3%83%AF%E3%83%BC%E3%83%89%E3%82%92%E3%82%B3%E3%83%BC%E3%83%89%E5%86%85%E3%81%AB%E8%A8%98%E8%BF%B0"><i class="fa fa-link"></i></a>4. 暗号化して、パスワードをコード内に記述</h4>

<p>パスワードを設定ファイルに保存するのが駄目だとすると、今度はコード内にパスワードを埋め込んでしまうという手法を取ります。これで、簡単にはパスワードが解らなくなるので、セキュリティが更に高くなります。<br>
しかし、逆アセンブルを知っている場合は話は別です。C#は中間言語にコンパイルされますが、中間言語を元のコードに比較的簡単に戻すことができてしまいます。コード内のパスワードが発見されたら、アウトです。</p>

<h4>
<span id="5-暗号化してパスワードをコード内に記述し難読化を施す" class="fragment"></span><a href="#5-%E6%9A%97%E5%8F%B7%E5%8C%96%E3%81%97%E3%81%A6%E3%83%91%E3%82%B9%E3%83%AF%E3%83%BC%E3%83%89%E3%82%92%E3%82%B3%E3%83%BC%E3%83%89%E5%86%85%E3%81%AB%E8%A8%98%E8%BF%B0%E3%81%97%E9%9B%A3%E8%AA%AD%E5%8C%96%E3%82%92%E6%96%BD%E3%81%99"><i class="fa fa-link"></i></a>5. 暗号化して、パスワードをコード内に記述し、難読化を施す</h4>

<p>中間言語から元のコードに戻すときに何の処理高解り難くしてしまうのが難読化です。基本はdotfuscatorという難読化ツールを利用します。こうすることで、パスワードが解り難くなります。<br>
ですが、今回は制約により利用できません。</p>

<h4>
<span id="6-暗号化複合化パスワードをネイティブdllcに記述する" class="fragment"></span><a href="#6-%E6%9A%97%E5%8F%B7%E5%8C%96%E8%A4%87%E5%90%88%E5%8C%96%E3%83%91%E3%82%B9%E3%83%AF%E3%83%BC%E3%83%89%E3%82%92%E3%83%8D%E3%82%A4%E3%83%86%E3%82%A3%E3%83%96dllc%E3%81%AB%E8%A8%98%E8%BF%B0%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>6. 暗号化、複合化、パスワードをネイティブDLL(c++)に記述する</h4>

<p>ローカルデータ保存の最終形態は、ネイティブDLLに任せてしまうことです。こうすることで、機械語に変換されるので、普通の人では到底解読できなくなります。しかし、中には解読できてしまう人もいます。こうなったらもうお手上げです。<br>
今回は、制約によりネイティブDLLも利用できません。</p>

<h2>
<span id="6手法の安全性を知る" class="fragment"></span><a href="#6%E6%89%8B%E6%B3%95%E3%81%AE%E5%AE%89%E5%85%A8%E6%80%A7%E3%82%92%E7%9F%A5%E3%82%8B"><i class="fa fa-link"></i></a>6手法の安全性を知る</h2>

<p>先ほどの6手法のパスワード管理だとどのくらいの安全性があるのかを知ってもらうために、逆にどのくらいの手順を踏めばデータの取得にたどり着くことができるのかをご紹介します。</p>

<h4>
<span id="1-ファイルにテキストとして書き出し-1" class="fragment"></span><a href="#1-%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AB%E3%83%86%E3%82%AD%E3%82%B9%E3%83%88%E3%81%A8%E3%81%97%E3%81%A6%E6%9B%B8%E3%81%8D%E5%87%BA%E3%81%97-1"><i class="fa fa-link"></i></a>1. ファイルにテキストとして書き出し</h4>

<ol>
<li>ファイルを開き、目的の値を見つける</li>
</ol>

<h4>
<span id="2-ファイルにバイナリとして書き出し-1" class="fragment"></span><a href="#2-%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AB%E3%83%90%E3%82%A4%E3%83%8A%E3%83%AA%E3%81%A8%E3%81%97%E3%81%A6%E6%9B%B8%E3%81%8D%E5%87%BA%E3%81%97-1"><i class="fa fa-link"></i></a>2. ファイルにバイナリとして書き出し</h4>

<ol>
<li>バイナリを解読する</li>
</ol>

<h4>
<span id="3-暗号化してパスワードを設定ファイルに記述-1" class="fragment"></span><a href="#3-%E6%9A%97%E5%8F%B7%E5%8C%96%E3%81%97%E3%81%A6%E3%83%91%E3%82%B9%E3%83%AF%E3%83%BC%E3%83%89%E3%82%92%E8%A8%AD%E5%AE%9A%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AB%E8%A8%98%E8%BF%B0-1"><i class="fa fa-link"></i></a>3. 暗号化して、パスワードを設定ファイルに記述</h4>

<ol>
<li>設定ファイルからパスワードを取得</li>
<li>暗号化手法を見つけ出す</li>
<li>複合化しバイナリを解読する</li>
</ol>

<h4>
<span id="4-暗号化してパスワードをコード内に記述-1" class="fragment"></span><a href="#4-%E6%9A%97%E5%8F%B7%E5%8C%96%E3%81%97%E3%81%A6%E3%83%91%E3%82%B9%E3%83%AF%E3%83%BC%E3%83%89%E3%82%92%E3%82%B3%E3%83%BC%E3%83%89%E5%86%85%E3%81%AB%E8%A8%98%E8%BF%B0-1"><i class="fa fa-link"></i></a>4. 暗号化して、パスワードをコード内に記述</h4>

<ol>
<li>逆アセンブルする</li>
<li>パスワードが記述されている箇所を見つけ出す</li>
<li>暗号化手法を見つけ出す</li>
<li>複合化しバイナリを解読する</li>
</ol>

<h4>
<span id="5-暗号化してパスワードをコード内に記述し難読化を施す-1" class="fragment"></span><a href="#5-%E6%9A%97%E5%8F%B7%E5%8C%96%E3%81%97%E3%81%A6%E3%83%91%E3%82%B9%E3%83%AF%E3%83%BC%E3%83%89%E3%82%92%E3%82%B3%E3%83%BC%E3%83%89%E5%86%85%E3%81%AB%E8%A8%98%E8%BF%B0%E3%81%97%E9%9B%A3%E8%AA%AD%E5%8C%96%E3%82%92%E6%96%BD%E3%81%99-1"><i class="fa fa-link"></i></a>5. 暗号化して、パスワードをコード内に記述し、難読化を施す</h4>

<ol>
<li>逆アセンブルする</li>
<li>難読化されたパスワードが記述されている箇所を見つけ出す</li>
<li>難読化された暗号化手法を見つけ出す</li>
<li>複合化しバイナリを解読する</li>
</ol>

<h4>
<span id="6-暗号化複合化パスワードをネイティブdllcに記述する-1" class="fragment"></span><a href="#6-%E6%9A%97%E5%8F%B7%E5%8C%96%E8%A4%87%E5%90%88%E5%8C%96%E3%83%91%E3%82%B9%E3%83%AF%E3%83%BC%E3%83%89%E3%82%92%E3%83%8D%E3%82%A4%E3%83%86%E3%82%A3%E3%83%96dllc%E3%81%AB%E8%A8%98%E8%BF%B0%E3%81%99%E3%82%8B-1"><i class="fa fa-link"></i></a>6. 暗号化、複合化、パスワードをネイティブDLL(c++)に記述する</h4>

<ol>
<li>機械語を読み解き、パスワード部分を解析する</li>
<li>機械語を読み解き、暗号化手法を解析する</li>
<li>複合化しバイナリを解読する</li>
</ol>

<p>1に関しては説明不要のセキュリティのガバガバさです。2はバイナリ解読に時間がかかりますが、適当に書き換えて確認するという手法がとれるのでセキュリティは低めです。3は暗号化してあるので改ざん検知が可能ですが、暗号化の手法さえ分かってしまえばパスワードが設定ファイルからする解ってしまうので2と同等のセキュリティレベルになります。4は3のパスワードを通常じゃ見られなくしてしまう手法なので更に安全性は高まりますが、逆アセンブルという手法さえとられてしまうとパスワードが見つかってしまうという危険性もあります。5以降に関してはそこら辺のエンジニアでは手を出そうとは思わないレベルの解読難易度です。絶対に安全とは言い切れませんが、相当セキュリティレベルは高いと思っていただいて大丈夫でしょう。</p>

<p>正直、3,4でもそこそこは安全性はあると思ってもいいと思います。しかし、そこそこなのでパスワードと暗号化手法さえ当てられてしまうと一発アウトです。なので、そのパスワードを動的に生成する様にしたらどうなるでしょう。</p>

<h1>
<span id="パスワードを動的生成する" class="fragment"></span><a href="#%E3%83%91%E3%82%B9%E3%83%AF%E3%83%BC%E3%83%89%E3%82%92%E5%8B%95%E7%9A%84%E7%94%9F%E6%88%90%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>パスワードを動的生成する</h1>

<p>難読化、ネイティブDLLの利用不可の場合、現段階でセキュリティが一番高いのは、「暗号化して、パスワードをコード内に記述」することです。しかし、逆アセンブルによりパスワードが見つかってしまうというリスクがあります。</p>

<p>そこで、そのリスクを避けるために<strong>パスワードをプログラムで動的に作成してしまう</strong>という手法をとってみたいと思います。</p>

<p>「暗号化して、パスワードをコード内に記述」の場合、以下のようなコードでデータを保存します。</p>

<div class="code-frame" data-lang="csharp"><div class="highlight"><pre class="with-code"><code><span class="k">class</span> <span class="nc">Test</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="k">static</span> <span class="k">readonly</span> <span class="kt">string</span> <span class="n">Password</span> <span class="p">=</span> <span class="s">"password"</span><span class="p">;</span>   

    <span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="kt">var</span> <span class="n">saveData</span> <span class="p">=</span> <span class="k">new</span> <span class="kt">byte</span><span class="p">[</span><span class="m">32</span><span class="p">];</span> <span class="c1">//保存するデータとして仮定</span>

        <span class="c1">// 暗号化する処理</span>
        <span class="kt">var</span> <span class="n">encryptData</span> <span class="p">=</span> <span class="nf">Encrypt</span><span class="p">(</span><span class="n">saveData</span><span class="p">,</span> <span class="n">Password</span><span class="p">);</span>

        <span class="c1">// ファイルに保存する処理</span>
        <span class="nf">SaveFile</span><span class="p">(</span><span class="n">encryptData</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>この場合、<em>Password = "password";</em>が逆アセンブルにより発見されてしまうと困ってしまいます。<br>
なので、パスワードを動的に生成する方法で発見を回避してみようと思います。</p>

<p>こうです。</p>

<div class="code-frame" data-lang="csharp"><div class="highlight"><pre class="with-code"><code><span class="k">class</span> <span class="nc">Test</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="kt">var</span> <span class="n">saveData</span> <span class="p">=</span> <span class="k">new</span> <span class="kt">byte</span><span class="p">[</span><span class="m">32</span><span class="p">];</span> <span class="c1">//保存するデータとして仮定</span>

        <span class="kt">var</span> <span class="n">pass</span> <span class="p">=</span> <span class="s">"hoge"</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">var</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="m">8</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
        <span class="p">{</span>
            <span class="n">pass</span> <span class="p">=</span> <span class="nf">Sha256</span><span class="p">(</span><span class="n">pass</span><span class="p">)</span> <span class="p">+</span> <span class="s">"poyo"</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="c1">// 暗号化する処理</span>
        <span class="kt">var</span> <span class="n">encryptData</span> <span class="p">=</span> <span class="nf">Encrypt</span><span class="p">(</span><span class="n">saveData</span><span class="p">,</span> <span class="n">pass</span><span class="p">);</span>

        <span class="c1">// ファイルに保存する処理</span>
        <span class="nf">SaveFile</span><span class="p">(</span><span class="n">encryptData</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>意味のない処理をかませて、パスワードをコードを見ただけではわからなくしてしまいます。実際にコードを動かさないと何がパスワードの文字列かわかりません。<em>Sha256</em>は引数からSHA-256ハッシュ文字列を生成する関数であると仮定してください。</p>

<p>しかし、まだです。<em>pass</em>という変数はすぐにパスワードだと分かってしまいますし、そのあとに続く処理がパスワード生成であるという事も解ってしまいます。</p>

<p>なので、passを別の文字に変えてみます。</p>

<div class="code-frame" data-lang="csharp"><div class="highlight"><pre class="with-code"><code><span class="k">class</span> <span class="nc">Test</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="kt">var</span> <span class="n">saveData</span> <span class="p">=</span> <span class="k">new</span> <span class="kt">byte</span><span class="p">[</span><span class="m">32</span><span class="p">];</span> <span class="c1">//保存するデータとして仮定</span>

        <span class="kt">var</span> <span class="n">buf</span> <span class="p">=</span> <span class="s">"hoge"</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">var</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="m">8</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
        <span class="p">{</span>
            <span class="n">buf</span> <span class="p">=</span> <span class="nf">Sha256</span><span class="p">(</span><span class="n">buf</span><span class="p">)</span> <span class="p">+</span> <span class="s">"poyo"</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="c1">// 暗号化する処理</span>
        <span class="kt">var</span> <span class="n">encryptData</span> <span class="p">=</span> <span class="nf">Encrypt</span><span class="p">(</span><span class="n">saveData</span><span class="p">,</span> <span class="n">buf</span><span class="p">);</span>

        <span class="c1">// ファイルに保存する処理</span>
        <span class="nf">SaveFile</span><span class="p">(</span><span class="n">encryptData</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p><em>pass</em>を<em>buf</em>というパスワードとは一見わからない変数名にしました。<br>
bufという名前が良いかどうかはこの程度のプログラムではわかりません。しかし、規模がもっと大きく具体的なプログラムだと更に効果を発揮します。パスワードの文字列を、周りにある変数名と似た名前にし紛れ込ませることが出来るのです。こうすると、改ざんを試みる人は以下の手順を踏まなくてはいけません。</p>

<ol>
<li>逆アセンブルする</li>
<li>パスワード生成処理と思わしき箇所を特定する</li>
<li>パスワード生成処理を抽出し、自前で処理を回しパスワードを入手する</li>
<li>暗号化手法を見つけ出す</li>
<li>複合化しバイナリを解読する</li>
</ol>

<p>これだけ面倒になれば、そうそう手を出そうとは思わなくなります。</p>

<h2>
<span id="注意点" class="fragment"></span><a href="#%E6%B3%A8%E6%84%8F%E7%82%B9"><i class="fa fa-link"></i></a>注意点</h2>

<p>ここで注意点です。この手法を用いる場合は<strong>以下の事をしてはいけません</strong>。</p>

<h3>
<span id="パスワード生成部分のみを関数化してしまう" class="fragment"></span><a href="#%E3%83%91%E3%82%B9%E3%83%AF%E3%83%BC%E3%83%89%E7%94%9F%E6%88%90%E9%83%A8%E5%88%86%E3%81%AE%E3%81%BF%E3%82%92%E9%96%A2%E6%95%B0%E5%8C%96%E3%81%97%E3%81%A6%E3%81%97%E3%81%BE%E3%81%86"><i class="fa fa-link"></i></a>パスワード生成部分のみを関数化してしまう</h3>

<p>これでは実は意味がありません。なぜなら、その関数さえ掘り当て再現できればパスワードが一発でわかってしまうからです。関数化せずに直接インラインでコードにしてください。インラインならば周りのコードに紛れるので隠密になりますが、関数の場合は私はここですよと言っているのと同じになってしまします。</p>

<h3>
<span id="暗号化と複合化のパスワード生成ロジックを別のものにしてしまう" class="fragment"></span><a href="#%E6%9A%97%E5%8F%B7%E5%8C%96%E3%81%A8%E8%A4%87%E5%90%88%E5%8C%96%E3%81%AE%E3%83%91%E3%82%B9%E3%83%AF%E3%83%BC%E3%83%89%E7%94%9F%E6%88%90%E3%83%AD%E3%82%B8%E3%83%83%E3%82%AF%E3%82%92%E5%88%A5%E3%81%AE%E3%82%82%E3%81%AE%E3%81%AB%E3%81%97%E3%81%A6%E3%81%97%E3%81%BE%E3%81%86"><i class="fa fa-link"></i></a>暗号化と複合化のパスワード生成ロジックを別のものにしてしまう</h3>

<p>当たり前と言えば当たり前ですが、暗号キーと複合キーは同一でなければ共通暗号方式である今回の手法は成り立ちませんので、パスワード生成プロセスは暗号時と複合時で同じ処理のものを用意する必要があります。</p>

<h3>
<span id="パスワードの長さを短くしてしまう" class="fragment"></span><a href="#%E3%83%91%E3%82%B9%E3%83%AF%E3%83%BC%E3%83%89%E3%81%AE%E9%95%B7%E3%81%95%E3%82%92%E7%9F%AD%E3%81%8F%E3%81%97%E3%81%A6%E3%81%97%E3%81%BE%E3%81%86"><i class="fa fa-link"></i></a>パスワードの長さを短くしてしまう</h3>

<p>これは、今回の手法に限ったことではないのですが、パスワードの長さは十分に長くする必要があります。そうでないとブルートフォースアタック（総当たり攻撃）でパスワードが当てられてしまい今回の手法が意味をなさなくなります。パスワードの長さには十分気を付けてください。</p>

<h3>
<span id="自分書いたパスワードのロジックを忘れる" class="fragment"></span><a href="#%E8%87%AA%E5%88%86%E6%9B%B8%E3%81%84%E3%81%9F%E3%83%91%E3%82%B9%E3%83%AF%E3%83%BC%E3%83%89%E3%81%AE%E3%83%AD%E3%82%B8%E3%83%83%E3%82%AF%E3%82%92%E5%BF%98%E3%82%8C%E3%82%8B"><i class="fa fa-link"></i></a>自分書いたパスワードのロジックを忘れる</h3>

<p>１か月前に書いた自分のコードが読み返せない方は注意が必要です。ロジックを忘れる、見失うと自分で探し当てるしかなくなります。</p>

<p>以上、上記4つを気を付ければ、セキュリティの上がったファイルの保存が可能となるでしょう。</p>

<h1>
<span id="まとめ" class="fragment"></span><a href="#%E3%81%BE%E3%81%A8%E3%82%81"><i class="fa fa-link"></i></a>まとめ</h1>

<p>パスワードを動的に生成することで、ローカルデータのセキュリティを高めてみました。一見意味のない処理をもっと冗長化したり変数名をうまい事プログラムになじませる事が出来れば、そうそうパスワードは見つかるものではなくなります。</p>

<p>当然、難読化ツールを使ったり、ネイティブなDLLを利用した方がセキュリティは上がりますが、それらが扱えない状況下では、今回のやり方は有効になるのではないかと思います。</p>

<p>ありがとうございました。</p>
</div></div></section><div class="css-1yzj1fm"><div class="css-1uv1qiv"><span class="fa fa-twitter"></span></div><div class="css-1uv1qiv"><span class="fa fa-facebook"></span></div></div><div class="apm-Content"><div class="apm-Content_title">Why not register and get more from Qiita?</div><ol class="apm-Content_list"><li>We will deliver articles that match you<div class="description">By following users and tags, you can catch up information on technical fields that you are interested in as a whole</div></li><li>you can read useful information later efficiently<div class="description">By &quot;stocking&quot; the articles you like, you can search right away</div></li><div><a class="apm-Content_help" href="https://help.qiita.com/ja/articles/qiita-login-user" target="_blank"><i class="fa fa-fw fa-arrow-circle-right"></i>What you can do with signing up</a></div></ol><a href="/signup?callback_action=login_or_signup&amp;redirect_to=%2Fyoship1639%2Fitems%2Fc03d33662acf639f8619&amp;realm=qiita" class="apm-Content_button apm-Content_button-signup">Sign up</a><a href="/login?callback_action=login_or_signup&amp;redirect_to=%2Fyoship1639%2Fitems%2Fc03d33662acf639f8619&amp;realm=qiita" class="apm-Content_button apm-Content_button-signin">Login</a></div></div><div class="css-helsa7"></div></div></div></div><div class="css-109dbrr"><div class="css-5jpx49"><div class="css-mnxgyc"><button class=" css-1vlpknv"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/yoship1639/items/c03d33662acf639f8619/likers" class="css-1iupg5d">17</a></div><div class="css-fsjkhv"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-1b17vb0">7</span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-7i7f4d"><div class="css-1gj7nt">Improve article</div><a href="/drafts/c03d33662acf639f8619/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/yoship1639/items/c03d33662acf639f8619/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/yoship1639/items/c03d33662acf639f8619/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/yoship1639/items/c03d33662acf639f8619/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/yoship1639/items/c03d33662acf639f8619.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="PersonalArticlePage" data-dom-id="PersonalArticlePage-react-component-77587726-256d-4925-9449-c48d315b5d7e">{"authorAnalyticsTrackingId":null,"organizationAnalyticsTrackingId":null}</script>
      
<footer id="globalFooter" class="st-Footer"><div class="st-Footer_container"><div class="st-Footer_start"><div class="st-Footer_logo"><svg viewbox="0 0 426.57 130" xmlns="http://www.w3.org/2000/svg"><circle cx="167.08" cy="21.4" r="12.28" /><path d="M250.81 29.66h23.48v18.9h-23.48z" /><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z" /><circle cx="216.33" cy="21.4" r="12.28" /></svg></div><div class="st-Footer_catchcopy">How developers code is here.</div><div class="st-Footer_socials"><a class="fa fa-twitter" href="https://twitter.com/qiita"></a><a class="fa fa-facebook-square" href="https://www.facebook.com/qiita/"></a></div></div><div class="st-Footer_end"><div class="st-Footer_qiita"><div class="st-Footer_label">Qiita</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="/about">About</a><a href="/terms">Terms</a><a href="/privacy">Privacy</a><a target="_blank" href="http://help.qiita.com/ja/articles/qiita-community-guideline">Guideline</a><a target="_blank" href="https://help.qiita.com/ja/articles/others-brand-guideline">Design Guideline</a></div><div class="st-Footer_column"><a href="/release-notes">Release</a><a href="/api/v2/docs">API</a><a href="/feedback/new">ご意見</a><a href="https://help.qiita.com">Help</a><a target="_blank" href="https://qiita.com/ads?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Advertisement</a></div></div></div><div class="st-Footer_increments"><div class="st-Footer_label">Increments</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="https://increments.co.jp/company/">About</a><a href="https://increments.co.jp/jobs/">採用情報</a><a href="https://blog.qiita.com">Blog</a></div><div class="st-Footer_column"><a href="https://teams.qiita.com/">Qiita Team</a><a href="https://jobs.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Jobs</a><a href="https://zine.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Zine</a></div></div></div></div></div><div class="st-Footer_copyright">© 2011-2021 Increments Inc.</div></footer><div id="Snackbar-react-component-e0e0b6ee-26d1-4098-95fe-586f908afa4c"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="Snackbar" data-dom-id="Snackbar-react-component-e0e0b6ee-26d1-4098-95fe-586f908afa4c">{}</script>
      
<div id="LoginModal-react-component-92383e5c-dfec-4a66-91c7-61b4e3b58ac2"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="LoginModal" data-dom-id="LoginModal-react-component-92383e5c-dfec-4a66-91c7-61b4e3b58ac2">{}</script>
      
<div id="StockModal-react-component-01cc70dd-ebe5-480c-be9a-88e31e882cf2"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="StockModal" data-dom-id="StockModal-react-component-01cc70dd-ebe5-480c-be9a-88e31e882cf2">{}</script>
      
</div><div id="dataContainer" style="display: none;" data-config="{&quot;actionPath&quot;:&quot;public/items#show&quot;,&quot;settings&quot;:{&quot;analyticsTrackingId&quot;:&quot;UA-24675221-12&quot;,&quot;assetsMap&quot;:{},&quot;csrfToken&quot;:&quot;gK/kSp6phItXegFKsGqYIOkiZE6BrPRuJJ+FOktV/Z5UfoZsz8efzQYBRVUQujogFHOBa1NV8DnBvchMl8xZFQ==&quot;,&quot;locale&quot;:&quot;en&quot;},&quot;currentUser&quot;:null}" /></body></html><script type="application/json" data-js-react-on-rails-store="AppStoreWithReactOnRails">{"snackbar":{"type":"","body":"","isActive":false},"article":{"article":{"body":"\u003cp\u003e本記事は \u003ca href=\"https://qiita.com/advent-calendar/2018/c-sharp-2\"\u003eC# その2 Advent Calender2018\u003c/a\u003e 12日目の記事です。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"はじめに\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eはじめに\u003c/h1\u003e\n\n\u003cp\u003eこんにちは、\u003ca href=\"https://twitter.com/yoship1639\" rel=\"nofollow noopener\" target=\"_blank\"\u003e@yoship1639\u003c/a\u003eです。\u003cbr\u003e\n普段は、ゲームエンジンを用いない個人ゲーム開発を行っています。\u003c/p\u003e\n\n\u003cp\u003e皆様は、「ゲームのセーブデータを改ざん出来ない様にしろ」と言われたらどう対処しますか？一番簡単なのは、セーブデータをサーバに丸投げして暗号化してもらうのがベストですね。暗号化に用いた手法もパスワードも分からないので、安全です。\u003c/p\u003e\n\n\u003cp\u003eしかし、それができない状況ではどうすれば良いでしょうか。つまり、ローカル環境でセーブデータを安全に管理する方法ですね。\u003c/p\u003e\n\n\u003cp\u003eさらに、今回は以下の制約付きです。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eC#オンリー (c++のdllは不可)\u003c/li\u003e\n\u003cli\u003e難読化ツール(dotfuscator等)が利用できない\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eこんな状況だとどうすればいいかを考えてみたいと思います。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"ローカルデータ管理方法\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%AD%E3%83%BC%E3%82%AB%E3%83%AB%E3%83%87%E3%83%BC%E3%82%BF%E7%AE%A1%E7%90%86%E6%96%B9%E6%B3%95\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eローカルデータ管理方法\u003c/h1\u003e\n\n\u003cp\u003eまず、ローカルデータの管理方法はどの様なものがあるのかを見てみます。\u003cbr\u003e\n上から順に安全性が高くなります。\u003c/p\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"1-ファイルにテキストとして書き出し\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#1-%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AB%E3%83%86%E3%82%AD%E3%82%B9%E3%83%88%E3%81%A8%E3%81%97%E3%81%A6%E6%9B%B8%E3%81%8D%E5%87%BA%E3%81%97\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e1. ファイルにテキストとして書き出し\u003c/h4\u003e\n\n\u003cp\u003e一番簡単なのはファイルにテキストデータとして直接書き出してしまうことですね。ご想像通り、一番イケないやつです。簡単にデータを改ざん出来てしまいます。\u003c/p\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"2-ファイルにバイナリとして書き出し\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#2-%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AB%E3%83%90%E3%82%A4%E3%83%8A%E3%83%AA%E3%81%A8%E3%81%97%E3%81%A6%E6%9B%B8%E3%81%8D%E5%87%BA%E3%81%97\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e2. ファイルにバイナリとして書き出し\u003c/h4\u003e\n\n\u003cp\u003e次に考えるのは、テキストとしてではなく、バイナリデータとして書き出してしまうやり方です。こうすると、ファイルを開いてもバイナリが並んでるだけで何のデータか解り難くなります。しかし、改ざんは容易にできてしまいます。何のデータか解らなくても適当に値を書き換えることができてしまいます。\u003c/p\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"3-暗号化してパスワードを設定ファイルに記述\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#3-%E6%9A%97%E5%8F%B7%E5%8C%96%E3%81%97%E3%81%A6%E3%83%91%E3%82%B9%E3%83%AF%E3%83%BC%E3%83%89%E3%82%92%E8%A8%AD%E5%AE%9A%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AB%E8%A8%98%E8%BF%B0\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e3. 暗号化して、パスワードを設定ファイルに記述\u003c/h4\u003e\n\n\u003cp\u003eバイナリでも駄目だとすると、次に考えるのはデータの暗号化です。バイナリデータに暗号処理を施すことで、改ざん検知が可能となりセキュリティが高くなります。そして、暗号化にはパスワードが必要です。複合化のために同じパスワードが必要だからです。\u003cbr\u003e\nしかし、パスワードを設定ファイルに保存すると、パスワードが設定ファイルから丸見えです。簡単に改ざんは出来なくなりましたが、仕組みが分かれば複合は簡単です。\u003c/p\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"4-暗号化してパスワードをコード内に記述\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#4-%E6%9A%97%E5%8F%B7%E5%8C%96%E3%81%97%E3%81%A6%E3%83%91%E3%82%B9%E3%83%AF%E3%83%BC%E3%83%89%E3%82%92%E3%82%B3%E3%83%BC%E3%83%89%E5%86%85%E3%81%AB%E8%A8%98%E8%BF%B0\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e4. 暗号化して、パスワードをコード内に記述\u003c/h4\u003e\n\n\u003cp\u003eパスワードを設定ファイルに保存するのが駄目だとすると、今度はコード内にパスワードを埋め込んでしまうという手法を取ります。これで、簡単にはパスワードが解らなくなるので、セキュリティが更に高くなります。\u003cbr\u003e\nしかし、逆アセンブルを知っている場合は話は別です。C#は中間言語にコンパイルされますが、中間言語を元のコードに比較的簡単に戻すことができてしまいます。コード内のパスワードが発見されたら、アウトです。\u003c/p\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"5-暗号化してパスワードをコード内に記述し難読化を施す\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#5-%E6%9A%97%E5%8F%B7%E5%8C%96%E3%81%97%E3%81%A6%E3%83%91%E3%82%B9%E3%83%AF%E3%83%BC%E3%83%89%E3%82%92%E3%82%B3%E3%83%BC%E3%83%89%E5%86%85%E3%81%AB%E8%A8%98%E8%BF%B0%E3%81%97%E9%9B%A3%E8%AA%AD%E5%8C%96%E3%82%92%E6%96%BD%E3%81%99\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e5. 暗号化して、パスワードをコード内に記述し、難読化を施す\u003c/h4\u003e\n\n\u003cp\u003e中間言語から元のコードに戻すときに何の処理高解り難くしてしまうのが難読化です。基本はdotfuscatorという難読化ツールを利用します。こうすることで、パスワードが解り難くなります。\u003cbr\u003e\nですが、今回は制約により利用できません。\u003c/p\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"6-暗号化複合化パスワードをネイティブdllcに記述する\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#6-%E6%9A%97%E5%8F%B7%E5%8C%96%E8%A4%87%E5%90%88%E5%8C%96%E3%83%91%E3%82%B9%E3%83%AF%E3%83%BC%E3%83%89%E3%82%92%E3%83%8D%E3%82%A4%E3%83%86%E3%82%A3%E3%83%96dllc%E3%81%AB%E8%A8%98%E8%BF%B0%E3%81%99%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e6. 暗号化、複合化、パスワードをネイティブDLL(c++)に記述する\u003c/h4\u003e\n\n\u003cp\u003eローカルデータ保存の最終形態は、ネイティブDLLに任せてしまうことです。こうすることで、機械語に変換されるので、普通の人では到底解読できなくなります。しかし、中には解読できてしまう人もいます。こうなったらもうお手上げです。\u003cbr\u003e\n今回は、制約によりネイティブDLLも利用できません。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"6手法の安全性を知る\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#6%E6%89%8B%E6%B3%95%E3%81%AE%E5%AE%89%E5%85%A8%E6%80%A7%E3%82%92%E7%9F%A5%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e6手法の安全性を知る\u003c/h2\u003e\n\n\u003cp\u003e先ほどの6手法のパスワード管理だとどのくらいの安全性があるのかを知ってもらうために、逆にどのくらいの手順を踏めばデータの取得にたどり着くことができるのかをご紹介します。\u003c/p\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"1-ファイルにテキストとして書き出し-1\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#1-%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AB%E3%83%86%E3%82%AD%E3%82%B9%E3%83%88%E3%81%A8%E3%81%97%E3%81%A6%E6%9B%B8%E3%81%8D%E5%87%BA%E3%81%97-1\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e1. ファイルにテキストとして書き出し\u003c/h4\u003e\n\n\u003col\u003e\n\u003cli\u003eファイルを開き、目的の値を見つける\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"2-ファイルにバイナリとして書き出し-1\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#2-%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AB%E3%83%90%E3%82%A4%E3%83%8A%E3%83%AA%E3%81%A8%E3%81%97%E3%81%A6%E6%9B%B8%E3%81%8D%E5%87%BA%E3%81%97-1\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e2. ファイルにバイナリとして書き出し\u003c/h4\u003e\n\n\u003col\u003e\n\u003cli\u003eバイナリを解読する\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"3-暗号化してパスワードを設定ファイルに記述-1\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#3-%E6%9A%97%E5%8F%B7%E5%8C%96%E3%81%97%E3%81%A6%E3%83%91%E3%82%B9%E3%83%AF%E3%83%BC%E3%83%89%E3%82%92%E8%A8%AD%E5%AE%9A%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AB%E8%A8%98%E8%BF%B0-1\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e3. 暗号化して、パスワードを設定ファイルに記述\u003c/h4\u003e\n\n\u003col\u003e\n\u003cli\u003e設定ファイルからパスワードを取得\u003c/li\u003e\n\u003cli\u003e暗号化手法を見つけ出す\u003c/li\u003e\n\u003cli\u003e複合化しバイナリを解読する\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"4-暗号化してパスワードをコード内に記述-1\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#4-%E6%9A%97%E5%8F%B7%E5%8C%96%E3%81%97%E3%81%A6%E3%83%91%E3%82%B9%E3%83%AF%E3%83%BC%E3%83%89%E3%82%92%E3%82%B3%E3%83%BC%E3%83%89%E5%86%85%E3%81%AB%E8%A8%98%E8%BF%B0-1\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e4. 暗号化して、パスワードをコード内に記述\u003c/h4\u003e\n\n\u003col\u003e\n\u003cli\u003e逆アセンブルする\u003c/li\u003e\n\u003cli\u003eパスワードが記述されている箇所を見つけ出す\u003c/li\u003e\n\u003cli\u003e暗号化手法を見つけ出す\u003c/li\u003e\n\u003cli\u003e複合化しバイナリを解読する\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"5-暗号化してパスワードをコード内に記述し難読化を施す-1\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#5-%E6%9A%97%E5%8F%B7%E5%8C%96%E3%81%97%E3%81%A6%E3%83%91%E3%82%B9%E3%83%AF%E3%83%BC%E3%83%89%E3%82%92%E3%82%B3%E3%83%BC%E3%83%89%E5%86%85%E3%81%AB%E8%A8%98%E8%BF%B0%E3%81%97%E9%9B%A3%E8%AA%AD%E5%8C%96%E3%82%92%E6%96%BD%E3%81%99-1\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e5. 暗号化して、パスワードをコード内に記述し、難読化を施す\u003c/h4\u003e\n\n\u003col\u003e\n\u003cli\u003e逆アセンブルする\u003c/li\u003e\n\u003cli\u003e難読化されたパスワードが記述されている箇所を見つけ出す\u003c/li\u003e\n\u003cli\u003e難読化された暗号化手法を見つけ出す\u003c/li\u003e\n\u003cli\u003e複合化しバイナリを解読する\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"6-暗号化複合化パスワードをネイティブdllcに記述する-1\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#6-%E6%9A%97%E5%8F%B7%E5%8C%96%E8%A4%87%E5%90%88%E5%8C%96%E3%83%91%E3%82%B9%E3%83%AF%E3%83%BC%E3%83%89%E3%82%92%E3%83%8D%E3%82%A4%E3%83%86%E3%82%A3%E3%83%96dllc%E3%81%AB%E8%A8%98%E8%BF%B0%E3%81%99%E3%82%8B-1\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e6. 暗号化、複合化、パスワードをネイティブDLL(c++)に記述する\u003c/h4\u003e\n\n\u003col\u003e\n\u003cli\u003e機械語を読み解き、パスワード部分を解析する\u003c/li\u003e\n\u003cli\u003e機械語を読み解き、暗号化手法を解析する\u003c/li\u003e\n\u003cli\u003e複合化しバイナリを解読する\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003cp\u003e1に関しては説明不要のセキュリティのガバガバさです。2はバイナリ解読に時間がかかりますが、適当に書き換えて確認するという手法がとれるのでセキュリティは低めです。3は暗号化してあるので改ざん検知が可能ですが、暗号化の手法さえ分かってしまえばパスワードが設定ファイルからする解ってしまうので2と同等のセキュリティレベルになります。4は3のパスワードを通常じゃ見られなくしてしまう手法なので更に安全性は高まりますが、逆アセンブルという手法さえとられてしまうとパスワードが見つかってしまうという危険性もあります。5以降に関してはそこら辺のエンジニアでは手を出そうとは思わないレベルの解読難易度です。絶対に安全とは言い切れませんが、相当セキュリティレベルは高いと思っていただいて大丈夫でしょう。\u003c/p\u003e\n\n\u003cp\u003e正直、3,4でもそこそこは安全性はあると思ってもいいと思います。しかし、そこそこなのでパスワードと暗号化手法さえ当てられてしまうと一発アウトです。なので、そのパスワードを動的に生成する様にしたらどうなるでしょう。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"パスワードを動的生成する\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%91%E3%82%B9%E3%83%AF%E3%83%BC%E3%83%89%E3%82%92%E5%8B%95%E7%9A%84%E7%94%9F%E6%88%90%E3%81%99%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eパスワードを動的生成する\u003c/h1\u003e\n\n\u003cp\u003e難読化、ネイティブDLLの利用不可の場合、現段階でセキュリティが一番高いのは、「暗号化して、パスワードをコード内に記述」することです。しかし、逆アセンブルによりパスワードが見つかってしまうというリスクがあります。\u003c/p\u003e\n\n\u003cp\u003eそこで、そのリスクを避けるために\u003cstrong\u003eパスワードをプログラムで動的に作成してしまう\u003c/strong\u003eという手法をとってみたいと思います。\u003c/p\u003e\n\n\u003cp\u003e「暗号化して、パスワードをコード内に記述」の場合、以下のようなコードでデータを保存します。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eTest\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003estatic\u003c/span\u003e \u003cspan class=\"k\"\u003ereadonly\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003ePassword\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"password\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e   \n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003estatic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eMain\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003esaveData\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"kt\"\u003ebyte\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"m\"\u003e32\u003c/span\u003e\u003cspan class=\"p\"\u003e];\u003c/span\u003e \u003cspan class=\"c1\"\u003e//保存するデータとして仮定\u003c/span\u003e\n\n        \u003cspan class=\"c1\"\u003e// 暗号化する処理\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eencryptData\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nf\"\u003eEncrypt\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003esaveData\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ePassword\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n        \u003cspan class=\"c1\"\u003e// ファイルに保存する処理\u003c/span\u003e\n        \u003cspan class=\"nf\"\u003eSaveFile\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eencryptData\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eこの場合、\u003cem\u003ePassword = \"password\";\u003c/em\u003eが逆アセンブルにより発見されてしまうと困ってしまいます。\u003cbr\u003e\nなので、パスワードを動的に生成する方法で発見を回避してみようと思います。\u003c/p\u003e\n\n\u003cp\u003eこうです。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eTest\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003estatic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eMain\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003esaveData\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"kt\"\u003ebyte\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"m\"\u003e32\u003c/span\u003e\u003cspan class=\"p\"\u003e];\u003c/span\u003e \u003cspan class=\"c1\"\u003e//保存するデータとして仮定\u003c/span\u003e\n\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003epass\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"hoge\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"m\"\u003e8\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e++)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"n\"\u003epass\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nf\"\u003eSha256\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003epass\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"s\"\u003e\"poyo\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"c1\"\u003e// 暗号化する処理\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eencryptData\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nf\"\u003eEncrypt\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003esaveData\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003epass\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n        \u003cspan class=\"c1\"\u003e// ファイルに保存する処理\u003c/span\u003e\n        \u003cspan class=\"nf\"\u003eSaveFile\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eencryptData\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e意味のない処理をかませて、パスワードをコードを見ただけではわからなくしてしまいます。実際にコードを動かさないと何がパスワードの文字列かわかりません。\u003cem\u003eSha256\u003c/em\u003eは引数からSHA-256ハッシュ文字列を生成する関数であると仮定してください。\u003c/p\u003e\n\n\u003cp\u003eしかし、まだです。\u003cem\u003epass\u003c/em\u003eという変数はすぐにパスワードだと分かってしまいますし、そのあとに続く処理がパスワード生成であるという事も解ってしまいます。\u003c/p\u003e\n\n\u003cp\u003eなので、passを別の文字に変えてみます。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eTest\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003estatic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eMain\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003esaveData\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"kt\"\u003ebyte\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"m\"\u003e32\u003c/span\u003e\u003cspan class=\"p\"\u003e];\u003c/span\u003e \u003cspan class=\"c1\"\u003e//保存するデータとして仮定\u003c/span\u003e\n\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003ebuf\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"hoge\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"m\"\u003e8\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e++)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"n\"\u003ebuf\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nf\"\u003eSha256\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ebuf\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"s\"\u003e\"poyo\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"c1\"\u003e// 暗号化する処理\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eencryptData\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nf\"\u003eEncrypt\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003esaveData\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ebuf\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n        \u003cspan class=\"c1\"\u003e// ファイルに保存する処理\u003c/span\u003e\n        \u003cspan class=\"nf\"\u003eSaveFile\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eencryptData\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e\u003cem\u003epass\u003c/em\u003eを\u003cem\u003ebuf\u003c/em\u003eというパスワードとは一見わからない変数名にしました。\u003cbr\u003e\nbufという名前が良いかどうかはこの程度のプログラムではわかりません。しかし、規模がもっと大きく具体的なプログラムだと更に効果を発揮します。パスワードの文字列を、周りにある変数名と似た名前にし紛れ込ませることが出来るのです。こうすると、改ざんを試みる人は以下の手順を踏まなくてはいけません。\u003c/p\u003e\n\n\u003col\u003e\n\u003cli\u003e逆アセンブルする\u003c/li\u003e\n\u003cli\u003eパスワード生成処理と思わしき箇所を特定する\u003c/li\u003e\n\u003cli\u003eパスワード生成処理を抽出し、自前で処理を回しパスワードを入手する\u003c/li\u003e\n\u003cli\u003e暗号化手法を見つけ出す\u003c/li\u003e\n\u003cli\u003e複合化しバイナリを解読する\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003cp\u003eこれだけ面倒になれば、そうそう手を出そうとは思わなくなります。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"注意点\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%B3%A8%E6%84%8F%E7%82%B9\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e注意点\u003c/h2\u003e\n\n\u003cp\u003eここで注意点です。この手法を用いる場合は\u003cstrong\u003e以下の事をしてはいけません\u003c/strong\u003e。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"パスワード生成部分のみを関数化してしまう\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%91%E3%82%B9%E3%83%AF%E3%83%BC%E3%83%89%E7%94%9F%E6%88%90%E9%83%A8%E5%88%86%E3%81%AE%E3%81%BF%E3%82%92%E9%96%A2%E6%95%B0%E5%8C%96%E3%81%97%E3%81%A6%E3%81%97%E3%81%BE%E3%81%86\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eパスワード生成部分のみを関数化してしまう\u003c/h3\u003e\n\n\u003cp\u003eこれでは実は意味がありません。なぜなら、その関数さえ掘り当て再現できればパスワードが一発でわかってしまうからです。関数化せずに直接インラインでコードにしてください。インラインならば周りのコードに紛れるので隠密になりますが、関数の場合は私はここですよと言っているのと同じになってしまします。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"暗号化と複合化のパスワード生成ロジックを別のものにしてしまう\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%9A%97%E5%8F%B7%E5%8C%96%E3%81%A8%E8%A4%87%E5%90%88%E5%8C%96%E3%81%AE%E3%83%91%E3%82%B9%E3%83%AF%E3%83%BC%E3%83%89%E7%94%9F%E6%88%90%E3%83%AD%E3%82%B8%E3%83%83%E3%82%AF%E3%82%92%E5%88%A5%E3%81%AE%E3%82%82%E3%81%AE%E3%81%AB%E3%81%97%E3%81%A6%E3%81%97%E3%81%BE%E3%81%86\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e暗号化と複合化のパスワード生成ロジックを別のものにしてしまう\u003c/h3\u003e\n\n\u003cp\u003e当たり前と言えば当たり前ですが、暗号キーと複合キーは同一でなければ共通暗号方式である今回の手法は成り立ちませんので、パスワード生成プロセスは暗号時と複合時で同じ処理のものを用意する必要があります。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"パスワードの長さを短くしてしまう\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%91%E3%82%B9%E3%83%AF%E3%83%BC%E3%83%89%E3%81%AE%E9%95%B7%E3%81%95%E3%82%92%E7%9F%AD%E3%81%8F%E3%81%97%E3%81%A6%E3%81%97%E3%81%BE%E3%81%86\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eパスワードの長さを短くしてしまう\u003c/h3\u003e\n\n\u003cp\u003eこれは、今回の手法に限ったことではないのですが、パスワードの長さは十分に長くする必要があります。そうでないとブルートフォースアタック（総当たり攻撃）でパスワードが当てられてしまい今回の手法が意味をなさなくなります。パスワードの長さには十分気を付けてください。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"自分書いたパスワードのロジックを忘れる\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%87%AA%E5%88%86%E6%9B%B8%E3%81%84%E3%81%9F%E3%83%91%E3%82%B9%E3%83%AF%E3%83%BC%E3%83%89%E3%81%AE%E3%83%AD%E3%82%B8%E3%83%83%E3%82%AF%E3%82%92%E5%BF%98%E3%82%8C%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e自分書いたパスワードのロジックを忘れる\u003c/h3\u003e\n\n\u003cp\u003e１か月前に書いた自分のコードが読み返せない方は注意が必要です。ロジックを忘れる、見失うと自分で探し当てるしかなくなります。\u003c/p\u003e\n\n\u003cp\u003e以上、上記4つを気を付ければ、セキュリティの上がったファイルの保存が可能となるでしょう。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"まとめ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%BE%E3%81%A8%E3%82%81\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eまとめ\u003c/h1\u003e\n\n\u003cp\u003eパスワードを動的に生成することで、ローカルデータのセキュリティを高めてみました。一見意味のない処理をもっと冗長化したり変数名をうまい事プログラムになじませる事が出来れば、そうそうパスワードは見つかるものではなくなります。\u003c/p\u003e\n\n\u003cp\u003e当然、難読化ツールを使ったり、ネイティブなDLLを利用した方がセキュリティは上がりますが、それらが扱えない状況下では、今回のやり方は有効になるのではないかと思います。\u003c/p\u003e\n\n\u003cp\u003eありがとうございました。\u003c/p\u003e\n","createdAt":"2018-11-05T14:43:28Z","elapsedYearsFromLastModifiedAt":2,"encryptedId":"B2gxeSNuLVwOplsqqpPRc5mjJeA2EbWJ--lweTeoYZBVA+yUdy--zu9ROZkNK7jKKFa0x8lTUA==","isBanned":false,"isDeprecated":true,"isDestroyableByViewer":false,"isEditRequestReadableByViewer":true,"isEditRequestSendableByViewer":true,"isLikableByViewer":true,"isLikedByViewer":false,"isPublic":true,"isSlide":false,"isStockableByViewer":true,"isStockedByViewer":false,"isSubscribableByViewer":false,"isSubscribedByViewer":false,"isUpdatableByViewer":false,"isUpdated":true,"lastModifiedAt":"2018-12-12T14:35:23Z","likesCount":17,"linkUrl":"https://qiita.com/yoship1639/items/c03d33662acf639f8619","organization":null,"originalId":718683,"stockedCount":7,"title":"【C#】パスワードを動的生成しローカルデータ管理の安全性を高めてみる","toc":"\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB\"\u003eはじめに\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%AD%E3%83%BC%E3%82%AB%E3%83%AB%E3%83%87%E3%83%BC%E3%82%BF%E7%AE%A1%E7%90%86%E6%96%B9%E6%B3%95\"\u003eローカルデータ管理方法\u003c/a\u003e\n\u003cul\u003e\n\u003cul\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#1-%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AB%E3%83%86%E3%82%AD%E3%82%B9%E3%83%88%E3%81%A8%E3%81%97%E3%81%A6%E6%9B%B8%E3%81%8D%E5%87%BA%E3%81%97\"\u003e1. ファイルにテキストとして書き出し\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#2-%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AB%E3%83%90%E3%82%A4%E3%83%8A%E3%83%AA%E3%81%A8%E3%81%97%E3%81%A6%E6%9B%B8%E3%81%8D%E5%87%BA%E3%81%97\"\u003e2. ファイルにバイナリとして書き出し\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#3-%E6%9A%97%E5%8F%B7%E5%8C%96%E3%81%97%E3%81%A6%E3%83%91%E3%82%B9%E3%83%AF%E3%83%BC%E3%83%89%E3%82%92%E8%A8%AD%E5%AE%9A%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AB%E8%A8%98%E8%BF%B0\"\u003e3. 暗号化して、パスワードを設定ファイルに記述\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#4-%E6%9A%97%E5%8F%B7%E5%8C%96%E3%81%97%E3%81%A6%E3%83%91%E3%82%B9%E3%83%AF%E3%83%BC%E3%83%89%E3%82%92%E3%82%B3%E3%83%BC%E3%83%89%E5%86%85%E3%81%AB%E8%A8%98%E8%BF%B0\"\u003e4. 暗号化して、パスワードをコード内に記述\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#5-%E6%9A%97%E5%8F%B7%E5%8C%96%E3%81%97%E3%81%A6%E3%83%91%E3%82%B9%E3%83%AF%E3%83%BC%E3%83%89%E3%82%92%E3%82%B3%E3%83%BC%E3%83%89%E5%86%85%E3%81%AB%E8%A8%98%E8%BF%B0%E3%81%97%E9%9B%A3%E8%AA%AD%E5%8C%96%E3%82%92%E6%96%BD%E3%81%99\"\u003e5. 暗号化して、パスワードをコード内に記述し、難読化を施す\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#6-%E6%9A%97%E5%8F%B7%E5%8C%96%E8%A4%87%E5%90%88%E5%8C%96%E3%83%91%E3%82%B9%E3%83%AF%E3%83%BC%E3%83%89%E3%82%92%E3%83%8D%E3%82%A4%E3%83%86%E3%82%A3%E3%83%96dllc%E3%81%AB%E8%A8%98%E8%BF%B0%E3%81%99%E3%82%8B\"\u003e6. 暗号化、複合化、パスワードをネイティブDLL(c++)に記述する\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/ul\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cli\u003e\n\u003ca href=\"#6%E6%89%8B%E6%B3%95%E3%81%AE%E5%AE%89%E5%85%A8%E6%80%A7%E3%82%92%E7%9F%A5%E3%82%8B\"\u003e6手法の安全性を知る\u003c/a\u003e\n\u003cul\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#1-%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AB%E3%83%86%E3%82%AD%E3%82%B9%E3%83%88%E3%81%A8%E3%81%97%E3%81%A6%E6%9B%B8%E3%81%8D%E5%87%BA%E3%81%97-1\"\u003e1. ファイルにテキストとして書き出し\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#2-%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AB%E3%83%90%E3%82%A4%E3%83%8A%E3%83%AA%E3%81%A8%E3%81%97%E3%81%A6%E6%9B%B8%E3%81%8D%E5%87%BA%E3%81%97-1\"\u003e2. ファイルにバイナリとして書き出し\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#3-%E6%9A%97%E5%8F%B7%E5%8C%96%E3%81%97%E3%81%A6%E3%83%91%E3%82%B9%E3%83%AF%E3%83%BC%E3%83%89%E3%82%92%E8%A8%AD%E5%AE%9A%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AB%E8%A8%98%E8%BF%B0-1\"\u003e3. 暗号化して、パスワードを設定ファイルに記述\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#4-%E6%9A%97%E5%8F%B7%E5%8C%96%E3%81%97%E3%81%A6%E3%83%91%E3%82%B9%E3%83%AF%E3%83%BC%E3%83%89%E3%82%92%E3%82%B3%E3%83%BC%E3%83%89%E5%86%85%E3%81%AB%E8%A8%98%E8%BF%B0-1\"\u003e4. 暗号化して、パスワードをコード内に記述\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#5-%E6%9A%97%E5%8F%B7%E5%8C%96%E3%81%97%E3%81%A6%E3%83%91%E3%82%B9%E3%83%AF%E3%83%BC%E3%83%89%E3%82%92%E3%82%B3%E3%83%BC%E3%83%89%E5%86%85%E3%81%AB%E8%A8%98%E8%BF%B0%E3%81%97%E9%9B%A3%E8%AA%AD%E5%8C%96%E3%82%92%E6%96%BD%E3%81%99-1\"\u003e5. 暗号化して、パスワードをコード内に記述し、難読化を施す\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#6-%E6%9A%97%E5%8F%B7%E5%8C%96%E8%A4%87%E5%90%88%E5%8C%96%E3%83%91%E3%82%B9%E3%83%AF%E3%83%BC%E3%83%89%E3%82%92%E3%83%8D%E3%82%A4%E3%83%86%E3%82%A3%E3%83%96dllc%E3%81%AB%E8%A8%98%E8%BF%B0%E3%81%99%E3%82%8B-1\"\u003e6. 暗号化、複合化、パスワードをネイティブDLL(c++)に記述する\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\n\n\n\n\u003cli\u003e\n\u003ca href=\"#%E3%83%91%E3%82%B9%E3%83%AF%E3%83%BC%E3%83%89%E3%82%92%E5%8B%95%E7%9A%84%E7%94%9F%E6%88%90%E3%81%99%E3%82%8B\"\u003eパスワードを動的生成する\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E6%B3%A8%E6%84%8F%E7%82%B9\"\u003e注意点\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%91%E3%82%B9%E3%83%AF%E3%83%BC%E3%83%89%E7%94%9F%E6%88%90%E9%83%A8%E5%88%86%E3%81%AE%E3%81%BF%E3%82%92%E9%96%A2%E6%95%B0%E5%8C%96%E3%81%97%E3%81%A6%E3%81%97%E3%81%BE%E3%81%86\"\u003eパスワード生成部分のみを関数化してしまう\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E6%9A%97%E5%8F%B7%E5%8C%96%E3%81%A8%E8%A4%87%E5%90%88%E5%8C%96%E3%81%AE%E3%83%91%E3%82%B9%E3%83%AF%E3%83%BC%E3%83%89%E7%94%9F%E6%88%90%E3%83%AD%E3%82%B8%E3%83%83%E3%82%AF%E3%82%92%E5%88%A5%E3%81%AE%E3%82%82%E3%81%AE%E3%81%AB%E3%81%97%E3%81%A6%E3%81%97%E3%81%BE%E3%81%86\"\u003e暗号化と複合化のパスワード生成ロジックを別のものにしてしまう\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%91%E3%82%B9%E3%83%AF%E3%83%BC%E3%83%89%E3%81%AE%E9%95%B7%E3%81%95%E3%82%92%E7%9F%AD%E3%81%8F%E3%81%97%E3%81%A6%E3%81%97%E3%81%BE%E3%81%86\"\u003eパスワードの長さを短くしてしまう\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E8%87%AA%E5%88%86%E6%9B%B8%E3%81%84%E3%81%9F%E3%83%91%E3%82%B9%E3%83%AF%E3%83%BC%E3%83%89%E3%81%AE%E3%83%AD%E3%82%B8%E3%83%83%E3%82%AF%E3%82%92%E5%BF%98%E3%82%8C%E3%82%8B\"\u003e自分書いたパスワードのロジックを忘れる\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%81%BE%E3%81%A8%E3%82%81\"\u003eまとめ\u003c/a\u003e\n\u003c/li\u003e\n\n","totalPv":4106,"uuid":"c03d33662acf639f8619","banReason":null,"adventCalendarItem":{"day":12,"calendar":{"name":"C# その2 ","urlName":"c-sharp-2","year":2018,"organization":null}},"author":{"encryptedId":"49a8d2P+yCKuTSaV65XyP2Yf8TG6--3eBfZCoBj4XmVfxx--zxo9d7d1PO2AdR/V/70GUQ==","originalId":113595,"description":"ゲームエンジニア。C#er。バックエンドも触る。ゲーム、ゲームエンジン、仮想通貨等を自作していました。フロントエンドから物理ベースシェーダまで幅広く対応可能。理解しやすく正しい記事を記述することを心がけます。","facebookUrl":null,"githubUrl":"https://github.com/yoship1639","isBlockingViewer":false,"isFollowableByViewer":true,"isFollowedByViewer":false,"isTweetWebNotificationReceivable":true,"linkedinUrl":null,"name":"Yoshihiro Ito","profileImageUrl":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/113595/profile-images/1594732889","profileImageUrlW48":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F113595%2Fprofile-images%2F1594732889?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=48\u0026s=a965ad82da9feffcce9cef12a92425a3","profileImageUrlW75":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F113595%2Fprofile-images%2F1594732889?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=716c2b13f79841ad7658dcce03a19ac2","urlName":"yoship1639","websiteUrl":"https://twitter.com/yoship1639","twitterUrl":"https://twitter.com/yoship1639","twitterUrlName":"yoship1639","revealedOrganizations":{"edges":[{"node":{"encryptedId":"BD1DIY2rI3tO4VoLarMuX8FjkLn7vM9Z1WE=--c0mOO0AVu0EcoDR2--QsEO3LKj7CwMC9IBffwhwQ==","isBetaReleaseEnabled":false,"isFollowableByViewer":false,"isFollowedByViewer":false,"name":"Unityゲーム開発者ギルド","logoUrl":"https://s3-ap-northeast-1.amazonaws.com/qiita-organization-image/f7eb993765ddcdb2c5e6890556c43ea3de8fbfb7/original.jpg?1570215690","urlName":"unity-game-dev-guild","description":"趣味・仕事問わずUnityでゲームを作っている開発者のみで構成されるオンラインコミュニティです。Unityでゲームを開発・運用するにあたって必要なあらゆる知見を共有することを目的とします。","url":"https://unity-game-dev-guild.github.io/"}}]}},"tags":[{"name":"C#","urlName":"csharp"},{"name":"セキュリティ","urlName":"%e3%82%bb%e3%82%ad%e3%83%a5%e3%83%aa%e3%83%86%e3%82%a3"},{"name":"ゲーム制作","urlName":"%e3%82%b2%e3%83%bc%e3%83%a0%e5%88%b6%e4%bd%9c"},{"name":"暗号","urlName":"%e6%9a%97%e5%8f%b7"},{"name":"パスワード管理","urlName":"%e3%83%91%e3%82%b9%e3%83%af%e3%83%bc%e3%83%89%e7%ae%a1%e7%90%86"}],"followingLikers":{"edges":[]},"comments":{"totalCount":2}},"comments":[],"client":null,"ads_event_emitter":null}}</script>
