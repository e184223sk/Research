More than 1 year has passed since last update.「宴」とはビジュアルノベルや会話シーンを手軽に作成するためのUnityアセットです。
この記事ではUnityの別シーン上のC#スクリプトから宴のシナリオの中の特定のラベルを呼び出す方法を記述します。具体的にどのようなことに応用できるかというと…
・キャラクターセレクト
・画像によるチャプターセレクト
・購入済みのシナリオのみを選択できるようにする
など応用範囲の広いテクニックです。・Windows 10
・Unity 2019.3.0f6
・「宴」3.8.0ここでは最初に上げた「キャラクターセレクト」をイメージした手順を記述します。
1．「宴」のセットアップ(プロジェクトの作成)を行ってください。
ここでは「Main」という名前のプロジェクトの作成を行ったと仮定します。
セットアップ(プロジェクトの作成)方法は「宴」の公式サイトのチュートリアルを参照してください。2．「宴」用シナリオスクリプト(Excelファイル)を用意する
今回は以下のようなテスト用シナリオスクリプトを用意しました。
シナリオスクリプトの詳細な記述方法は「宴」の公式サイトを参照してください。
3．以下の3つのC#スクリプトを用意してください。
C#スクリプトを置く場所はどこでもいいです。4．Mainシーンのヒエラルキーの中に「SelectScenario」という名前の空のオブジェクトを作成して「SelectScenario.cs」スクリプトをアタッチします。5． 作成した「SelectScenario」コンポーネントのプロパティに以下のオブジェクトを設定します。
6．「Main」シーンを保存してください。7．Unityでキャラクターセレクトを行うシーンを作成してください。
ここでは「Title」という名前のシーンを作ったと仮定します。8．今回はキャラクターセレクトということでキャラクターの画像が載ったButtonUIを設置しました。
このボタンに「ExecuteUtage.cs」スクリプトをアタッチします。
これで「宴」のラベルを呼び出す準備ができました。9．この「ExecuteUtage」コンポーネントの...関数を呼び出せば「宴」シナリオスクリプト内のラベルが呼び出せます。10．今回はサンプルとして以下のC#スクリプトを用意しました。
このC#スクリプトを各ボタンにアタッチしてください。11．各ボタンの「On Click ()」を以下の画像のように設定してください。
これでボタンを押すと「宴」のラベルが呼び出されます。
13．以上で完了です。
シーンが変わる際に「メニュー」画面がちらっと見えることがありますが「宴」のシーンの「Canvas-AdvUI/Title」にUIが配置されていますので非表示にするなりローディング画面を出すなり好きにしてください。


