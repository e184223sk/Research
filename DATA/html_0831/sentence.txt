Windowsアプリ開発の中でHTTPクライアント周りを調べていたのですが、標準ではHttpClientクラスが用意されています。
HttpClient クラス (System.Net.Http) | Microsoft Docsが、このクラスが結構曲者らしいのです。（実際使ったことがないのでわかりませんが）
Qiitaで調べてみても結構出てきて、これは使いたくないな、、と正直思いました。HttpClientをusingで囲わないでください - Qiita
.NET(Framework)のHttpClientの取り扱いには要注意という話 - Qiitaさらに調べたところ、RestSharpというREST APIクライアントライブラリがあることを知り、割と良さそうだと思ったので、Digest認証で試してみることにしました。NuGetパッケージの管理から以下のパッケージをインストールします。例えばAPIがGETメソッドで、レスポンスとして以下のJSONデータを返してくるものとします。まず、JSONデータを受け取るためのデータクラスを作成します。そして、以下のようにリクエスト＆レスポンスからJSONデータをデシリアライズします。大まかにはRestClientクラスのインスタンスを生成し、認証方式やJSONシリアライザーの設定をして、RestRequestクラスのインスタンスをclient.Getメソッドの引数に渡すことでできます。
そして、変数responseに結果が入っているので、あとはJSONデータをデシリアライズします。また、以下のように非同期呼び出しにして、デシリアライズをまとめることもできます。


