More than 1 year has passed since last update.WPFのDispatcherTimerクラスを使い、簡単なアナログ時計のサンプルコードです。概要は以下のとおり。以下に、作成したアプリのスクリーンショットを示します。秒針は１秒おきに動いていきます。XAMLを示します。
Canvasの中に、3つのLine（時針、分針、秒針）を定義しています。RotateTransformのAngleプロパティを変化させることで、それぞれの針を動かします。絵心のない僕は、時針、分針、秒針の描画にLineオブジェクトを使いましたが、PolygonやPathを使ってもうすこし時計らしい針にし、背景に文字盤を加えれば、見栄えも良くなると思います。その際、C#のコードでは、RotateTransform の名前に対して、値を設定していますので、C#側は一切手を入れる必要はないはずです。C#のコードは、オブジェクトの回転角度を変えるだけですので、とても単純なコードになっています。 WindowのLoadedイベントで、DispatcherTimerオブジェクトを生成し、タイマーをスタートさせます。Tickイベントが１秒おきに発生しますので、 そのイベントハンドラで、Updateメソッドを呼び出しています。 Updateメソッドでは、現在の時刻を取得し、秒針、分針、時針の針の角度を求め、 それぞれの針に対応するLineオブジェクトの回転角度を更新しています。このコードは、GitHubで公開しています。


