More than 3 years have passed since last update.渡された配列なりListなりの中身を標準出力に全部出力するDebug用メソッドを用意したとして、とりあえずはこうなると思うんですよね引数をIEnumerable&lt;T&gt;にしておけば配列でもListでも対応できるって寸法です。ここで辞めておけばよかったんですが、さらに欲をかいて可変長引数対応もしたいな、ってなるわけです。
ちょっと追加してこんな感じこうしておけばみたいな感じ可変長引数も対応！　便利！ところが、これには罠が。このDebugUtil.ListDump(list);はSystem.Collections.Generic.List`1[System.String]と出力されてしまうようになってしまいました。まぁ、当たり前っちゃぁ当たり前なのかもですが、params T[]を引数に取るListDumpの方が先に処理されちゃったわけです。すると、T=List&lt;string&gt; という事になり、List&lt;string&gt;の配列 がdatasに入った形に。
ぐぬぬー。というわけで、目的通りの処理にするためにはのように、明示的にキャストしてあげる必要がある。というわけでした。めでたし・めでたくもなし。Genericsを辞めて、こんな感じで作ると、また挙動が変わって、DebugUtil.ListDump(list);はListDump(IEnumerable datas)に処理されるので思った通りの挙動になったりします。これはobjectへのキャストよりもIEnumrableへのアップキャストの方が階層が浅い（って言っていいのかな？）からだと思われます。さらに、なんとなく適当に作ってみましたが、こんな感じで再起で行ったり来たりすると、配列の配列の配列のList みたいな変態的な構造も中身が全部表示される…かも。（あまりテストしてないです）
にしたって、もうちょっとマシな方法があるはず・・・。


