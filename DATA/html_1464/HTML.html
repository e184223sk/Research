<!DOCTYPE html><html><head><meta charset="utf-8" /><title>Google Cloud Text-To-Speechを利用してUnityでキャラクターをフルボイスに！ - Qiita</title><meta content="width=device-width,initial-scale=1,shrink-to-fit=no,viewport-fit=cover" name="viewport" /><meta content="#55c500" name="theme-color" /><meta content="XWpkTG32-_C4joZoJ_UsmDUi-zaH-hcrjF6ZC_FoFbk" name="google-site-verification" /><meta content="telephone=no" name="format-detection" /><link rel="canonical" href="https://qiita.com/Asalato/items/6aa23c40ff31d9d3f13d" /><link href="/manifest.json" rel="manifest" /><link href="/opensearch.xml" rel="search" title="Qiita" type="application/opensearchdescription+xml" /><link as="script" href="https://www.googletagservices.com/tag/js/gpt.js" rel="preload" /><link href="https://securepubads.g.doubleclick.net" rel="preconnect" /><script async="" src="https://www.googletagservices.com/tag/js/gpt.js"></script><meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="v0yDv2IiGO0tXJJJhHrIGmt7sCN5258dgDk15eP7UWBGfy/UITf3xDG88UP4FNiqBUNJ68mFCpjDowK594iiGg==" /><link rel="shortcut icon" type="image/x-icon" href="https://cdn.qiita.com/assets/favicons/public/production-c620d3e403342b1022967ba5e3db1aaa.ico" /><link rel="apple-touch-icon" type="image/png" href="https://cdn.qiita.com/assets/favicons/public/apple-touch-icon-ec5ba42a24ae923f16825592efdc356f.png" /><link rel="stylesheet" media="all" href="https://cdn.qiita.com/assets/public/article-2eaa7dbedc42a8ea65c722cda46d0ebb.min.css" /><script src="https://cdn.qiita.com/assets/public/v3-article-bundle-63de2d91fef827269d3f6b958db2335b.min.js" defer="defer"></script><meta name="twitter:card" content="summary_large_image"><meta content="@Qiita" name="twitter:site" /><meta content="@Ac_313" name="twitter:creator" /><meta property="og:type" content="article"><meta property="og:title" content="Google Cloud Text-To-Speechを利用してUnityでキャラクターをフルボイスに！ - Qiita"><meta property="og:image" content="https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0&amp;w=1200&amp;mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND1SMjl2WjJ4bElFTnNiM1ZrSUZSbGVIUXRWRzh0VTNCbFpXTm80NEtTNVlpcDU1U280NEdYNDRHbVZXNXBkSG5qZ2FmamdxM2pnNlBqZzZuamdxX2pncl9qZzd6amdwTGpnNVhqZzZ2amc1empncVRqZ3JuamdhdnZ2SUUmdHh0LWNvbG9yPSUyMzMzMyZ0eHQtZm9udD1IaXJhZ2lubyUyMFNhbnMlMjBXNiZ0eHQtc2l6ZT01NCZ0eHQtY2xpcD1lbGxpcHNpcyZ0eHQtYWxpZ249Y2VudGVyJTJDbWlkZGxlJnM9ZDE2ODc0Y2E0YmYyYjk5ODc3NTFhZGMzMDUwNGY1ZTA&amp;mark-align=center%2Cmiddle&amp;blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RRUZ6WVd4aGRHOCZ0eHQtY29sb3I9JTIzMzMzJnR4dC1mb250PUhpcmFnaW5vJTIwU2FucyUyMFc2JnR4dC1zaXplPTQ1JnR4dC1hbGlnbj1yaWdodCUyQ2JvdHRvbSZzPWM2NDY1YjAyYjZhZGJhOGE5NTZmNjUzNTBlZjljZjgz&amp;blend-align=center%2Cmiddle&amp;blend-mode=normal&amp;s=2ffbe5285e3aa786f34f0de89268dfec"><meta property="og:description" content="タイトルの通りです．
UnityでもGoogle CloudのAPIを利用することで（簡単に）音声合成を行うことができます．

（追記：本記事はWindowsを対象にしています．Mac環境ではランタイムで利用するライブラリをインポート..."><meta content="https://qiita.com/Asalato/items/6aa23c40ff31d9d3f13d" property="og:url" /><meta content="Qiita" property="og:site_name" /><meta content="564524038" property="fb:admins" /><meta content="C#,.NET,Unity,GoogleCloudPlatform,TextToSpeech" name="keywords" /><script>!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window, document,'script',
'https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '668972150489891');
fbq('track', 'PageView');</script><style data-emotion-css="17jxvjw 11t2ec1 1dvr2p8 18lkoru 1g4cku8 1iupg5d ijvq0v 15cocm3 12rp90f 115f4t 1b8uj5v 79elbk 16hhh7b fcbn8c 1gj7nt 154zy0m yikrym 1jqivyb 1ode1bp le4d8r 1hbd3g7 helsa7 8qb8m4 2imjyh he5w1s 70qvj9 3ojehk 100alwu 1dtnjt5 10ougpm 1ay9vb9 m19uds cgzq40 1wa99t2 1l3zk9f 4czcte 1yzj1fm 1uv1qiv 109dbrr 5jpx49 mnxgyc 1vlpknv fsjkhv 1b17vb0 7i7f4d"}>.css-17jxvjw{display:grid;display:-ms-grid;grid-template-columns:80px minmax(0,1fr) 300px;-ms-grid-columns:80px minmax(0,1fr) 300px;grid-template-rows:minmax(270px,auto) 1fr;-ms-grid-rows:minmax(270px,auto) 1fr;max-width:1280px;margin-right:auto;margin-left:auto;padding-top:24px;padding-right:24px;padding-left:24px;}@media (max-width:1200px){.css-17jxvjw{padding-bottom:0;padding-left:0;padding-right:0;}}@media (max-width:992px){.css-17jxvjw{grid-template-columns:80px 452px 300px;-ms-grid-columns:80px 452px 300px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}}@media (max-width:770px){.css-17jxvjw{display:block;}}@media (max-width:480px){.css-17jxvjw{padding-top:0;}}.css-11t2ec1{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;z-index:5;position:-webkit-sticky;position:sticky;top:calc(56px + 24px + 16px + 32px - 16px);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:16px;width:80px;}.css-11t2ec1:after{content:'';display:table;}.css-11t2ec1:before{content:'';display:table;}@media (max-width:770px){.css-11t2ec1{display:none;}}.css-1dvr2p8{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-18lkoru{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;background-color:#FFFFFF;}.css-1g4cku8{display:inline-block;vertical-align:middle;height:20px;width:20px;fill:#55C500;}.css-1iupg5d{color:#55C500;cursor:pointer;font-size:14px;font-weight:bold;}.css-ijvq0v{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-15cocm3{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#FFFFFF;border:2px solid #6E6F70;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:2px 0px 0px;width:40px;}.css-12rp90f{display:inline-block;vertical-align:bottom;height:17.77777777777778px;width:16px;fill:#6E6F70;}.css-115f4t{color:#6E6F70;font-size:14px;font-weight:bold;}.css-1b8uj5v{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;margin-bottom:16px;padding:0;}.css-79elbk{position:relative;}.css-16hhh7b{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;padding:0;}.css-fcbn8c{display:none;bottom:initial;left:initial;right:initial;top:initial;left:100%;top:calc(-8px - (14px * 1.8) - 16px - 4px);}.css-1gj7nt{color:rgba(0,0,0,0.6);font-size:14px;font-weight:bold;line-height:1.8;padding:8px 16px;}.css-154zy0m{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.87);cursor:pointer;font-size:16px;font-weight:normal;line-height:1.8;padding:4px 16px;}.css-154zy0m:hover{-webkit-text-decoration:none;text-decoration:none;background-color:#F2F2F2;}.css-yikrym{width:20px;}.css-1jqivyb{color:rgba(0,0,0,0.6);font-size:13px;}.css-1ode1bp{background-color:rgba(0,0,0,0.12);height:1px;width:100%;margin:8px 0;}.css-le4d8r{display:inline-block;vertical-align:middle;height:13px;width:13px;fill:rgba(0,0,0,0.6);}.css-1hbd3g7{height:250px;}.css-helsa7{background-color:#FFFFFF;padding:32px;margin-bottom:24px;}@media (max-width:992px){.css-helsa7{margin:0 auto 40px;}}@media (max-width:480px){.css-helsa7{margin:0 0 40px;padding:32px 16px;}}.css-8qb8m4{margin-bottom:48px;}.css-2imjyh{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-he5w1s{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;width:100%;}@media (max-width:770px){.css-he5w1s{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}}.css-70qvj9{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.css-3ojehk{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;margin-right:4px;}.css-100alwu{display:inline-block;border-radius:50%;line-height:1;overflow:hidden;vertical-align:middle;}.css-1dtnjt5{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-10ougpm{color:rgba(0,0,0,0.87);font-size:14px;font-weight:600;line-height:1.8;margin-right:4px;text-wrap:break-word;word-break:break-all;}.css-1ay9vb9{margin-right:16px;}.css-m19uds{color:rgba(0,0,0,0.6);font-size:14px;line-height:1.8;}.css-cgzq40{color:rgba(0,0,0,0.87);font-size:32px;font-weight:bold;line-height:1.4;margin-top:8px;text-wrap:break-word;word-break:break-all;}.css-1wa99t2{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.6);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:8px;}.css-1l3zk9f{color:rgba(0,0,0,0.6);font-size:20px;margin-right:8px;}.css-4czcte{margin-right:4px;color:inherit;font-size:14px;line-height:1.8;}.css-4czcte:not(:last-child)::after{content:',';margin-right:4px;}.css-1yzj1fm{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:32px;}.css-1uv1qiv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-size:20px;height:32px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin-right:16px;outline:none;padding:0;width:32px;}.css-109dbrr{background-color:#F9F9F9;border-top:1px solid rgba(0,0,0,0.12);bottom:0;box-shadow:0px 1px 4px rgba(0,0,0,0.14);display:none;height:calc(env(safe-area-inset-bottom,0px) + 56px);-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding-bottom:env(safe-area-inset-bottom);position:-webkit-sticky;position:sticky;width:100%;z-index:2000;}@media (max-width:770px){.css-109dbrr{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}.css-5jpx49{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:space-evenly;-webkit-justify-content:space-evenly;-ms-flex-pack:space-evenly;justify-content:space-evenly;width:100%;}.css-mnxgyc{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1vlpknv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;margin-right:4px;background-color:#FFFFFF;}.css-fsjkhv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1b17vb0{color:#6E6F70;font-size:14px;font-weight:bold;margin-left:4px;}.css-7i7f4d{display:none;bottom:initial;left:initial;right:initial;top:initial;bottom:32px;right:0;}</style></head><body><div class="allWrapper"><div><div id="GlobalHeader-react-component-17dfaa30-b075-4a2a-8c95-58a90fe4bfc1"><div class="st-Header"><div class="st-Header_container"><div class="st-Header_start"><a href="/" class="st-Header_logo"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 426.57 130"><circle cx="167.08" cy="21.4" r="12.28"></circle><path d="M250.81 29.66h23.48v18.9h-23.48z"></path><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z"></path><circle cx="216.33" cy="21.4" r="12.28"></circle></svg></a><div class="st-Header_communitySelector" tabindex="0"><span class="fa fa-caret-down"></span></div><div class="st-Header_dropdown"><div class="st-Header_dropdownHeading">Qiita Teams that are logged in</div><div class="st-Header_dropdownItemNote">You are not logged in to any team</div><hr class="st-Header_dropdownDivider st-Header_dropdownDivider-shrink"/><a href="https://teams-center.qiita.com/find_team" class="st-Header_dropdownItem"><span class="fa fa-fw fa-sign-in st-Header_dropdownItemIcon"></span><div>Log in to Qiita Team</div></a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Community</div><a href="/organizations" class="st-Header_dropdownItem">Organization</a><a href="/official-events/open" class="st-Header_dropdownItem">Event</a><a href="/advent-calendar" class="st-Header_dropdownItem">Advent Calendar</a><a href="https://qiitadon.com/" class="st-Header_dropdownItem" target="_blank">Qiitadon (β)</a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Service</div><a href="https://jobs.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Jobs</a><a href="https://zine.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Zine</a><a href="https://blog.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Blog</a></div><form class="st-Header_search" action="/search" method="get"><span class="fa fa-search st-Header_searchIcon"></span><input type="search" class="st-Header_searchInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form><form class="st-Header_searchModal" action="/search" method="get"><input type="text" class="st-Header_searchModalInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form></div><div class="st-Header_end"><div class="st-Header_searchButton"><span class="fa fa-search"></span></div><a class="st-Header_signupButton" href="/signup?redirect_to=%2FAsalato%2Fitems%2F6aa23c40ff31d9d3f13d">Signup</a><a class="st-Header_loginLink" href="/login?redirect_to=%2FAsalato%2Fitems%2F6aa23c40ff31d9d3f13d">Login</a></div><div class="st-Header_overlay"></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="GlobalHeader" data-dom-id="GlobalHeader-react-component-17dfaa30-b075-4a2a-8c95-58a90fe4bfc1">{"unreadNotificationsCount":null,"realms":[{"humanName":"Qiita","isCurrentRealm":true,"isQiita":true,"isQiitaTeam":false,"loggedInUser":null,"teamId":null,"url":"https://qiita.com/"}],"teamFindUrl":"https://teams-center.qiita.com/find_team","isTeamOnlyUser":null,"currentUser":null}</script>
      
</div><div class="st-HeaderAlert st-HeaderAlert-warning"><div class="st-HeaderAlert_body"></div></div><script type="application/ld+json">{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"/","name":"Qiita"}},{"@type":"ListItem","position":2,"item":{"@id":"/tags/csharp","name":"C#"}}]}</script><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","datePublished":"2020-04-30T19:27:35.000+09:00","dateModified":"2020-09-14T22:23:47.000+09:00","headline":"Google Cloud Text-To-Speechを利用してUnityでキャラクターをフルボイスに！","image":"https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0\u0026w=1200\u0026mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND1SMjl2WjJ4bElFTnNiM1ZrSUZSbGVIUXRWRzh0VTNCbFpXTm80NEtTNVlpcDU1U280NEdYNDRHbVZXNXBkSG5qZ2FmamdxM2pnNlBqZzZuamdxX2pncl9qZzd6amdwTGpnNVhqZzZ2amc1empncVRqZ3JuamdhdnZ2SUUmdHh0LWNvbG9yPSUyMzMzMyZ0eHQtZm9udD1IaXJhZ2lubyUyMFNhbnMlMjBXNiZ0eHQtc2l6ZT01NCZ0eHQtY2xpcD1lbGxpcHNpcyZ0eHQtYWxpZ249Y2VudGVyJTJDbWlkZGxlJnM9ZDE2ODc0Y2E0YmYyYjk5ODc3NTFhZGMzMDUwNGY1ZTA\u0026mark-align=center%2Cmiddle\u0026blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RRUZ6WVd4aGRHOCZ0eHQtY29sb3I9JTIzMzMzJnR4dC1mb250PUhpcmFnaW5vJTIwU2FucyUyMFc2JnR4dC1zaXplPTQ1JnR4dC1hbGlnbj1yaWdodCUyQ2JvdHRvbSZzPWM2NDY1YjAyYjZhZGJhOGE5NTZmNjUzNTBlZjljZjgz\u0026blend-align=center%2Cmiddle\u0026blend-mode=normal\u0026s=2ffbe5285e3aa786f34f0de89268dfec","mainEntityOfPage":"https://qiita.com/Asalato/items/6aa23c40ff31d9d3f13d","author":{"@type":"Person","address":"Miyagi","email":null,"identifier":"Asalato","name":"Asalato","image":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F433211%2Fprofile-images%2F1559966308?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=cc1ab6586821b8c88896e57598f58a68","url":"https://qiita.com/Asalato","description":"UnityでCG作ったりフロントやったり基幹システムやったりしています。あとハードウェアとかWeb開発とかも。\r\n世界で自分くらいにしか需要がなさそうな記事を投稿することでウェブの多様性に貢献していき","memberOf":[]},"publisher":{"@type":"Organization","name":"Qiita","logo":{"@type":"ImageObject","url":"//cdn.qiita.com/assets/public/qiita-logo-c39ded593afa388e2e1ba435b110554e.png"}}}</script><style type="text/css">.wb-CampaignLink {
  background-color: #333333;
  width: 100%;
}

.wb-CampaignLink_container {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  max-width: 1100px;
  margin: 0 auto;
  font-size: 13px;
  padding: 0.8em;
}
.wb-CampaignLink_container > a {
  color: #fff;
}

.wb-CampaignLink_container > a:hover {
  text-decoration: underline;
}</style><div class="wb-CampaignLink"><div class="wb-CampaignLink_container"><a target="_blank" id="header_text_message_1" href="https://zine.qiita.com/interview/202104-ga-technologies/?utm_source=qiita&amp;utm_medium=header-banner">社内改善＝業界革新。GA technologiesの一石三鳥な社内プロダクト開発とは</a><a target="_blank" id="header_text_message_2" href="https://zine.qiita.com/interview/202104-ga-technologies/?utm_source=qiita&amp;utm_medium=header-banner">詳しくはこちら</a></div><script>td.trackEvent(
  'front_events',
  {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"Asalato","type":"items","id":"6aa23c40ff31d9d3f13d"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Show","data":{"message":"社内改善＝業界革新。GA technologiesの一石三鳥な社内プロダクト開発とは","url":"https://zine.qiita.com/interview/202104-ga-technologies/?utm_source=qiita\u0026utm_medium=header-banner","sub_message":"詳しくはこちら"}}
)</script><script>document.getElementById('header_text_message_1').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"Asalato","type":"items","id":"6aa23c40ff31d9d3f13d"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":1,"pos_id":"header_text_message_1","message":"社内改善＝業界革新。GA technologiesの一石三鳥な社内プロダクト開発とは","url":"https://zine.qiita.com/interview/202104-ga-technologies/?utm_source=qiita\u0026utm_medium=header-banner","sub_message":"詳しくはこちら"}}
  )
})</script><script>document.getElementById('header_text_message_2').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"Asalato","type":"items","id":"6aa23c40ff31d9d3f13d"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":1,"pos_id":"header_text_message_2","message":"社内改善＝業界革新。GA technologiesの一石三鳥な社内プロダクト開発とは","url":"https://zine.qiita.com/interview/202104-ga-technologies/?utm_source=qiita\u0026utm_medium=header-banner","sub_message":"詳しくはこちら"}}
  )
})</script></div><script type="application/json" id="js-react-on-rails-context">{"railsEnv":"production","inMailer":false,"i18nLocale":"en","i18nDefaultLocale":"en","href":"https://qiita.com/Asalato/items/6aa23c40ff31d9d3f13d","location":"/Asalato/items/6aa23c40ff31d9d3f13d","scheme":"https","host":"qiita.com","port":null,"pathname":"/Asalato/items/6aa23c40ff31d9d3f13d","search":null,"httpAcceptLanguage":null,"actionPath":"public/items#show","settings":{"analyticsTrackingId":"UA-24675221-12","assetsMap":{},"csrfToken":"EHX8osk9a27Q/jbDkrhVgRKrhi42zDK5zq+5B+8IyF/pRlDJiiiER8weVcnu1kUxfJN/5oaSpzyNNY5b+3s7JQ==","locale":"en"},"currentUser":null,"isLoggedIn":false,"recaptchaSiteKey":"6LfNkiQTAAAAAM3UGnSquBy2akTITGNMO_QDxMw6","serverSide":false}</script>
<div id="PersonalArticlePage-react-component-7045e8e9-75dc-434a-bab9-5c0f1de8e8e8"><div class="p-items_wrapper"><div class=" css-17jxvjw"><div class="css-11t2ec1"><div class="css-1dvr2p8"><button class=" css-18lkoru"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/Asalato/items/6aa23c40ff31d9d3f13d/likers" class="css-1iupg5d">16</a></div><div class="css-ijvq0v"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-115f4t">7</span></div><div class="css-1b8uj5v"><span class="fa fa-twitter"></span></div><div class="css-1b8uj5v"><span class="fa fa-facebook"></span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-fcbn8c"><div class="css-1gj7nt">Improve article</div><a href="/drafts/6aa23c40ff31d9d3f13d/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/Asalato/items/6aa23c40ff31d9d3f13d/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/Asalato/items/6aa23c40ff31d9d3f13d/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/Asalato/items/6aa23c40ff31d9d3f13d/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/Asalato/items/6aa23c40ff31d9d3f13d.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div><div class="p-items_options"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_toc"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_main"><div class="css-helsa7"><div class="css-8qb8m4"><div class="css-2imjyh"><div class="css-he5w1s"><div class="css-70qvj9"><div class="css-3ojehk"><a href="/Asalato"><img class="css-100alwu eyfquo10" src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/433211/profile-images/1559966308" width="24" height="24" loading="lazy"/></a></div><div class="css-1dtnjt5"><a href="/Asalato" class="css-10ougpm">@<!-- -->Asalato</a><div class="css-1ay9vb9"><span><meta content="2020-04-30T10:27:35Z"/><time dateTime="2020-09-14T13:23:47Z" class="css-m19uds">updated at 2020-09-14</time></span></div></div></div></div></div><h1 class="css-cgzq40">Google Cloud Text-To-Speechを利用してUnityでキャラクターをフルボイスに！</h1><div class="css-1wa99t2"><span class="fa fa-tags mr-1of2 css-1l3zk9f" aria-hidden="true"></span><a href="/tags/csharp" class="css-4czcte">C#</a><a href="/tags/.net" class="css-4czcte">.NET</a><a href="/tags/unity" class="css-4czcte">Unity</a><a href="/tags/googlecloudplatform" class="css-4czcte">GoogleCloudPlatform</a><a href="/tags/texttospeech" class="css-4czcte">TextToSpeech</a></div></div><section class="it-MdContent"><div id="personal-public-article-body"><div><p>タイトルの通りです．<br>
UnityでもGoogle CloudのAPIを利用することで（簡単に）音声合成を行うことができます．</p>

<p>（追記：本記事はWindowsを対象にしています．Mac環境では<a href="https://qiita.com/Asalato/items/6aa23c40ff31d9d3f13d#%E3%83%A9%E3%83%B3%E3%82%BF%E3%82%A4%E3%83%A0%E3%81%A7%E5%88%A9%E7%94%A8%E3%81%99%E3%82%8B%E3%83%A9%E3%82%A4%E3%83%96%E3%83%A9%E3%83%AA%E3%82%92%E3%82%A4%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%88%E3%81%99%E3%82%8B">ランタイムで利用するライブラリをインポートする</a>の項目で導入しなければいけないライブラリが異なるため，異なる方法で用意する必要があります）</p>

<h1>
<span id="余談" class="fragment"></span><a href="#%E4%BD%99%E8%AB%87"><i class="fa fa-link"></i></a>余談</h1>

<p>Google CloudのText-To-Speech APIを利用することで誰でも手軽に音声合成を行うことができます．<br>
しかし，これを利用した記事は現状あまり公開されていません．</p>

<p>特にC#(.NET)環境での動作については，<a href="https://cloud.google.com/text-to-speech/docs/samples" rel="nofollow noopener" target="_blank">Google Cloudのドキュメンテーションページ</a>でも<br>
<a href="https://camo.qiitausercontent.com/b38011795065867aa13d69ca23934c0caabb575d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3433333231312f33623037613666642d336561652d666465332d623765312d6661323630653736383534612e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F433211%2F3b07a6fd-3eae-fde3-b7e1-fa260e76854a.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=a230eef84a9954a157784aacc6bdc8bc" alt="図1.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/433211/3b07a6fd-3eae-fde3-b7e1-fa260e76854a.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F433211%2F3b07a6fd-3eae-fde3-b7e1-fa260e76854a.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=705fcb9cf7a00fe16aefe8246add2d8d 1x" loading="lazy"></a><br>
と非常に残念な感じです．</p>

<p>今回これを触る機会があり，動くようにするために結構苦労しました．<br>
実装の際特に詰まった部分について解説しながら動くサンプルを示したいと思います．</p>

<h1>
<span id="準備" class="fragment"></span><a href="#%E6%BA%96%E5%82%99"><i class="fa fa-link"></i></a>準備</h1>

<p>Unityプロジェクトに導入するためにあらかじめ行う作業があります．</p>

<h2>
<span id="google-cloud-platformの利用登録" class="fragment"></span><a href="#google-cloud-platform%E3%81%AE%E5%88%A9%E7%94%A8%E7%99%BB%E9%8C%B2"><i class="fa fa-link"></i></a>Google Cloud Platformの利用登録</h2>

<p>まず，Google Cloudに開発者申請を行い，APIリクエストを送る際の認証情報を取得する必要があります．<br>
<a href="https://cloud.google.com/" rel="nofollow noopener" target="_blank">Google Cloud Platform</a>のページにアクセスし，利用者登録を行います．<br>
住所，名前，電話番号，クレジットカード番号を入力する欄がありますが，個人開発者であれば基本的に無料で利用できます．</p>

<p><a href="https://cloud.google.com/text-to-speech/pricing" rel="nofollow noopener" target="_blank">料金ページ</a>に利用料の記載があります．<br>
Text-To-Speechの場合，クラウドに送信した文字数に応じて料金が変動します．<br>
通常の音声合成とWaveNet音声（ちょっとリアルな声）で値段が変わり，以下のように無料枠と有料の場合の値段が定められています．<br>
<a href="https://camo.qiitausercontent.com/5fbb1446b648d1b2c069fdb66adbb850616b6632/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3433333231312f34663662373765632d643639332d356130622d613661372d6365313862643364356461312e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F433211%2F4f6b77ec-d693-5a0b-a6a7-ce18bd3d5da1.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=898cb56a094c56c5070eecd34b2de8c6" alt="image.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/433211/4f6b77ec-d693-5a0b-a6a7-ce18bd3d5da1.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F433211%2F4f6b77ec-d693-5a0b-a6a7-ce18bd3d5da1.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=056cfa905b1006481da636d713237a94 1x" loading="lazy"></a></p>

<p>利用者登録を行った後は分かりやすい名前を付けてプロジェクトを作成します．<br>
<a href="https://camo.qiitausercontent.com/6a1042d86c1a090bb01274d877a15a2c774aa9bc/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3433333231312f65666630356265662d323733392d343164352d353038382d3439386366326334303533662e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F433211%2Feff05bef-2739-41d5-5088-498cf2c4053f.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=6e6846ce72064ee8f03e49401595efd1" alt="image.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/433211/eff05bef-2739-41d5-5088-498cf2c4053f.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F433211%2Feff05bef-2739-41d5-5088-498cf2c4053f.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=25ff9cfca66bfe0d1d9e6f6f22b70515 1x" loading="lazy"></a><br>
その後プロジェクトでCloud Text-To-Speech APIを有効にします．<br>
左上のHamburgerタブからメニューを開き，「APIとサービス」から「ライブラリ」を選びます．<br>
<a href="https://camo.qiitausercontent.com/9db7cf2dd55e3201b55f0929f7e7fd49dc3a5dd3/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3433333231312f61373834643435322d666333392d353239622d616530312d3166653763393066356239642e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F433211%2Fa784d452-fc39-529b-ae01-1fe7c90f5b9d.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=91103d3578a4b1325467d43d4eec7398" alt="image.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/433211/a784d452-fc39-529b-ae01-1fe7c90f5b9d.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F433211%2Fa784d452-fc39-529b-ae01-1fe7c90f5b9d.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=2e4cf6c9d68adcd883c4f0bd9c994d2d 1x" loading="lazy"></a><br>
そこでCloud Text-To-Speechを選択し，APIを有効化します<br>
<a href="https://camo.qiitausercontent.com/694f629882a44b0be27751e9c178f33e19531198/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3433333231312f32326632653834632d373335612d653237372d623363342d6539353162356262333263392e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F433211%2F22f2e84c-735a-e277-b3c4-e951b5bb32c9.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=8572de62718898e78db694f0665dfc27" alt="image.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/433211/22f2e84c-735a-e277-b3c4-e951b5bb32c9.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F433211%2F22f2e84c-735a-e277-b3c4-e951b5bb32c9.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=84118a5db37d4c3ad431140c295d9f37 1x" loading="lazy"></a></p>

<p>次に実際に利用するAPIキーを作成します．<br>
左上のHamburgerタブからメニューを開き，「IAMの管理」から「サービスアカウント」を選択し，サービスアカウントの作成を行います．<br>
<a href="https://camo.qiitausercontent.com/a6da7c606fe3fb8497003b2e7970b847d42dc82b/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3433333231312f65623962306237662d643165662d666161652d616131362d6139383866663030333865632e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F433211%2Feb9b0b7f-d1ef-faae-aa16-a988ff0038ec.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=31a941c189048b02e407b8e806f109e4" alt="image.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/433211/eb9b0b7f-d1ef-faae-aa16-a988ff0038ec.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F433211%2Feb9b0b7f-d1ef-faae-aa16-a988ff0038ec.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=ad1c7093cd8356616d60eb5c87f82bf3 1x" loading="lazy"></a><br>
「作成」を選択し，次に出る組織の選択はスルーして大丈夫です．<br>
次の「キーの作成」は必須です．<br>
Json形式でキーを作成し，保存します．（このキーは厳重に管理してください）<br>
<a href="https://camo.qiitausercontent.com/f0a14dcb6d9bc2ca96541da603e87e72632be809/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3433333231312f37373961616539652d366330332d633732312d373631612d3436343237393138646463312e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F433211%2F779aae9e-6c03-c721-761a-46427918ddc1.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=d238582fca4bd7af4d17a3b53f86cfbf" alt="image.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/433211/779aae9e-6c03-c721-761a-46427918ddc1.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F433211%2F779aae9e-6c03-c721-761a-46427918ddc1.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=20ad11a2ab912e8dc0cf7161b3a396af 1x" loading="lazy"></a><br>
これでGoogle Could Platform側での作業は終わりです．</p>

<h2>
<span id="unityにライブラリをインポートする" class="fragment"></span><a href="#unity%E3%81%AB%E3%83%A9%E3%82%A4%E3%83%96%E3%83%A9%E3%83%AA%E3%82%92%E3%82%A4%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%88%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>Unityにライブラリをインポートする</h2>

<p>現在Google Cloud Text-To-SpeechをUnityで利用できるようなライブラリは存在しません．<br>
なので自分で利用するライブラリ（dll）をインポートする必要があります．</p>

<h3>
<span id="nugetからライブラリをインポートする" class="fragment"></span><a href="#nuget%E3%81%8B%E3%82%89%E3%83%A9%E3%82%A4%E3%83%96%E3%83%A9%E3%83%AA%E3%82%92%E3%82%A4%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%88%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>NuGetからライブラリをインポートする</h3>

<p>Google Cloud APIはNuGetで.Net用ライブラリが公開されており，それを利用します．<br>
UnityにNuGetライブラリをインポートするための便利なツールに「<a href="https://github.com/GlitchEnzo/NuGetForUnity" rel="nofollow noopener" target="_blank"><code>NuGetForUnity</code></a>」というものがあるので，これを利用しUnityに導入していきます．<br>
これを利用することで依存するライブラリをまとめてインポートできるので便利です．</p>

<p>検索窓に「Cloud TextToSpeech」と入力することで目的のAPIが見つかるのでこれをインストールします．<br>
<a href="https://camo.qiitausercontent.com/9711994568ceaa101f10af4b6c7038217d10948d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3433333231312f66353935653833652d626434332d653239352d333865362d3539636134653038626630332e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F433211%2Ff595e83e-bd43-e295-38e6-59ca4e08bf03.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=e01029ff8b1a29782d41fe10a292ae74" alt="image.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/433211/f595e83e-bd43-e295-38e6-59ca4e08bf03.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F433211%2Ff595e83e-bd43-e295-38e6-59ca4e08bf03.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=923caba41d0d84f3cff1e97b80f8dbc0 1x" loading="lazy"></a></p>

<p>これでAssetフォルダに利用するdllがインポートできましたが，このままでは<code>unload broken assembly</code>というエラーが出ます．<br>
これはdll間で依存するライブラリを見つけられていないためで，これを回避するためにはいろいろ方法がありますが，今回は一番単純な「<b>すべてのdllを同じディレクトリに置く</b>」という手段を取ります．結構めんどくさいです．</p>

<p>インポートを行った後<code>NuGetForUnity</code>はもう不要なので，Assetのディレクトリから該当するフォルダを削除します．（<b>dllの入っているPackagesフォルダは消さない！</b>）<br>
そしてpackages以下に存在するdllを全てpackagesの先頭フォルダに移し，纏めます．<br>
これでエラーは出なくなったはずです．</p>

<h3>
<span id="ランタイムで利用するライブラリをインポートする" class="fragment"></span><a href="#%E3%83%A9%E3%83%B3%E3%82%BF%E3%82%A4%E3%83%A0%E3%81%A7%E5%88%A9%E7%94%A8%E3%81%99%E3%82%8B%E3%83%A9%E3%82%A4%E3%83%96%E3%83%A9%E3%83%AA%E3%82%92%E3%82%A4%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%88%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>ランタイムで利用するライブラリをインポートする</h3>

<p>NuGetからライブラリをインポートすることでエディタ上ではエラーが出なくなりますが，このままでは実行時に<code>DllNotFoundException: grpc_csharp_ext</code>や<code>EntryPointNotFoundException: grpcsharp_native_callback_dispatcher_init</code>といったエラーが出てしまいます．</p>

<p>ランタイム（実行時）で利用するライブラリは<a href="https://github.com/jsmouret/grpc-unity-package" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/jsmouret/grpc-unity-package</a> からお借りします．<br>
<a href="https://github.com/jsmouret/grpc-unity-package/releases" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/jsmouret/grpc-unity-package/releases</a> から最新のgrpc-unity-package.zipをダウンロードし，Plugins/Grpc.Core/runtimes/win（利用環境によって変えてください）/x64/grpc_csharp_ex.dllをコピーし，先ほどNuGetからインポートしたフォルダに貼り付けます．</p>

<p>これで実行時のエラーもなくなります．</p>

<h1>
<span id="スクリプトの用意" class="fragment"></span><a href="#%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%97%E3%83%88%E3%81%AE%E7%94%A8%E6%84%8F"><i class="fa fa-link"></i></a>スクリプトの用意</h1>

<p>TextToSpeechSampleというC#スクリプトを新たに作成し，以下のスクリプトを貼り付けます．</p>

<div class="code-frame" data-lang="csharp"><div class="highlight"><pre class="with-code"><code><span class="k">using</span> <span class="nn">System.Diagnostics</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Threading</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Threading.Tasks</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Google.Apis.Auth.OAuth2</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Google.Cloud.TextToSpeech.V1</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Grpc.Auth</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Grpc.Core</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UnityEngine</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UnityEngine.UI</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">WWUtils.Audio</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Debug</span> <span class="p">=</span> <span class="n">UnityEngine</span><span class="p">.</span><span class="n">Debug</span><span class="p">;</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">TextToSpeechSample</span> <span class="p">:</span> <span class="n">MonoBehaviour</span>
<span class="p">{</span>
    <span class="p">[</span><span class="n">SerializeField</span><span class="p">]</span> <span class="k">private</span> <span class="n">InputField</span> <span class="n">inputField</span><span class="p">;</span>
    <span class="p">[</span><span class="n">SerializeField</span><span class="p">]</span> <span class="k">private</span> <span class="n">Button</span> <span class="n">button</span><span class="p">;</span>
    <span class="p">[</span><span class="n">SerializeField</span><span class="p">]</span> <span class="k">private</span> <span class="n">AudioSource</span> <span class="n">audioSource</span><span class="p">;</span>
    <span class="p">[</span><span class="n">SerializeField</span><span class="p">]</span> <span class="k">private</span> <span class="kt">string</span> <span class="n">credential</span><span class="p">;</span>

    <span class="k">private</span> <span class="k">const</span> <span class="kt">string</span> <span class="n">GcpUrl</span> <span class="p">=</span> <span class="s">"https://www.googleapis.com/auth/cloud-platform"</span><span class="p">;</span>
    <span class="k">private</span> <span class="k">const</span> <span class="kt">string</span> <span class="n">ChannelTarget</span> <span class="p">=</span> <span class="s">"texttospeech.googleapis.com:443"</span><span class="p">;</span>

    <span class="k">private</span> <span class="n">TextToSpeechClient</span> <span class="n">_client</span><span class="p">;</span>
    <span class="k">private</span> <span class="n">AudioConfig</span> <span class="n">_audioConfig</span><span class="p">;</span>
    <span class="k">private</span> <span class="n">VoiceSelectionParams</span> <span class="n">_voiceSelectionParams</span><span class="p">;</span>

    <span class="k">private</span> <span class="n">ChannelCredentials</span> <span class="n">_credentials</span><span class="p">;</span>

    <span class="k">private</span> <span class="n">SynchronizationContext</span> <span class="n">_context</span><span class="p">;</span>

    <span class="k">private</span> <span class="n">Stopwatch</span> <span class="n">_stopwatch</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Stopwatch</span><span class="p">();</span>

    <span class="k">private</span> <span class="k">void</span> <span class="nf">Start</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// ボタンを押したときのイベントを追加</span>
        <span class="n">button</span><span class="p">.</span><span class="n">onClick</span><span class="p">.</span><span class="nf">AddListener</span><span class="p">(()</span> <span class="p">=&gt;</span>
        <span class="p">{</span>
            <span class="kt">var</span> <span class="n">str</span> <span class="p">=</span> <span class="n">inputField</span><span class="p">.</span><span class="n">text</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="kt">string</span><span class="p">.</span><span class="nf">IsNullOrEmpty</span><span class="p">(</span><span class="n">str</span><span class="p">))</span> <span class="k">return</span><span class="p">;</span>
            <span class="n">inputField</span><span class="p">.</span><span class="n">text</span> <span class="p">=</span> <span class="s">""</span><span class="p">;</span>

            <span class="nf">CreateRequest</span><span class="p">(</span><span class="n">str</span><span class="p">);</span>
            <span class="n">Debug</span><span class="p">.</span><span class="nf">Log</span><span class="p">(</span><span class="s">$"Send Request: </span><span class="p">{</span><span class="n">str</span><span class="p">}</span><span class="s">"</span><span class="p">);</span>
        <span class="p">});</span>

        <span class="c1">// 認証情報をResourceから読み込む</span>
        <span class="kt">var</span> <span class="n">credentialStr</span> <span class="p">=</span> <span class="n">Resources</span><span class="p">.</span><span class="n">Load</span><span class="p">&lt;</span><span class="n">TextAsset</span><span class="p">&gt;(</span><span class="n">credential</span><span class="p">).</span><span class="n">text</span><span class="p">;</span>
        <span class="kt">var</span> <span class="n">googleCredential</span> <span class="p">=</span> <span class="n">GoogleCredential</span><span class="p">.</span><span class="nf">FromJson</span><span class="p">(</span><span class="n">credentialStr</span><span class="p">);</span>
        <span class="n">_credentials</span> <span class="p">=</span> <span class="n">googleCredential</span><span class="p">.</span><span class="nf">CreateScoped</span><span class="p">(</span><span class="n">GcpUrl</span><span class="p">).</span><span class="nf">ToChannelCredentials</span><span class="p">();</span>

        <span class="kt">var</span> <span class="n">channel</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Channel</span><span class="p">(</span><span class="n">ChannelTarget</span><span class="p">,</span> <span class="n">_credentials</span><span class="p">);</span>
        <span class="n">_client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">TextToSpeechClientImpl</span><span class="p">(</span><span class="k">new</span> <span class="n">TextToSpeech</span><span class="p">.</span><span class="nf">TextToSpeechClient</span><span class="p">(</span><span class="n">channel</span><span class="p">),</span> <span class="k">new</span> <span class="nf">TextToSpeechSettings</span><span class="p">());</span>

        <span class="c1">// オプションを記述</span>
        <span class="n">_audioConfig</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">AudioConfig</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="n">AudioEncoding</span> <span class="p">=</span> <span class="n">AudioEncoding</span><span class="p">.</span><span class="n">Linear16</span><span class="p">,</span>
            <span class="n">SampleRateHertz</span> <span class="p">=</span> <span class="m">44100</span>
        <span class="p">};</span>

        <span class="c1">// 声のパラメータを指定</span>
        <span class="c1">// https://cloud.google.com/text-to-speech/docs/voices?hl=jaに記載されているものから選択できます</span>
        <span class="n">_voiceSelectionParams</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">VoiceSelectionParams</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="n">SsmlGender</span> <span class="p">=</span> <span class="n">SsmlVoiceGender</span><span class="p">.</span><span class="n">Female</span><span class="p">,</span>
            <span class="n">LanguageCode</span> <span class="p">=</span> <span class="s">"ja-JP"</span>
        <span class="p">};</span>

        <span class="n">_context</span> <span class="p">=</span> <span class="n">SynchronizationContext</span><span class="p">.</span><span class="n">Current</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">/// &lt;summary&gt;</span>
    <span class="c1">/// リクエストを送信する</span>
    <span class="c1">/// &lt;/summary&gt;</span>
    <span class="c1">/// &lt;param name="text"&gt;音声合成を行う対象の文&lt;/param&gt;</span>
    <span class="k">public</span> <span class="k">void</span> <span class="nf">CreateRequest</span><span class="p">(</span><span class="kt">string</span> <span class="n">text</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">var</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="n">SynthesizeSpeechRequest</span>
        <span class="p">{</span>
            <span class="n">Input</span> <span class="p">=</span> <span class="k">new</span> <span class="n">SynthesisInput</span> <span class="p">{</span><span class="n">Text</span> <span class="p">=</span> <span class="n">text</span><span class="p">},</span>
            <span class="n">AudioConfig</span> <span class="p">=</span> <span class="n">_audioConfig</span><span class="p">,</span>
            <span class="n">Voice</span> <span class="p">=</span> <span class="n">_voiceSelectionParams</span>
        <span class="p">};</span>

        <span class="n">_stopwatch</span><span class="p">.</span><span class="nf">Restart</span><span class="p">();</span>

        <span class="c1">// リクエストを非同期で送信し，返ってきた後に再生するメソッドに投げる</span>
        <span class="n">Task</span><span class="p">.</span><span class="nf">Run</span><span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span> <span class="nf">SetAudioClip</span><span class="p">(</span><span class="k">await</span> <span class="n">_client</span><span class="p">.</span><span class="nf">SynthesizeSpeechAsync</span><span class="p">(</span><span class="n">request</span><span class="p">));</span> <span class="p">});</span>
    <span class="p">}</span>

    <span class="c1">/// &lt;summary&gt;</span>
    <span class="c1">/// Google CloudからのレスポンスをAudioClipに書き出し，再生する</span>
    <span class="c1">/// &lt;/summary&gt;</span>
    <span class="c1">/// &lt;param name="response"&gt;Google Cloudからのレスポンス&lt;/param&gt;</span>
    <span class="k">private</span> <span class="k">void</span> <span class="nf">SetAudioClip</span><span class="p">(</span><span class="n">SynthesizeSpeechResponse</span> <span class="n">response</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">var</span> <span class="n">bytes</span> <span class="p">=</span> <span class="n">response</span><span class="p">.</span><span class="n">AudioContent</span><span class="p">.</span><span class="nf">ToByteArray</span><span class="p">();</span>

        <span class="c1">// byte[]をAudioClipで利用できる形に変換する</span>
        <span class="kt">var</span> <span class="n">wav</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">WAV</span><span class="p">(</span><span class="n">bytes</span><span class="p">);</span>
        <span class="n">Debug</span><span class="p">.</span><span class="nf">Log</span><span class="p">(</span><span class="s">"Get Response: Elapsed time "</span> <span class="p">+</span> <span class="n">_stopwatch</span><span class="p">.</span><span class="n">ElapsedMilliseconds</span> <span class="p">+</span> <span class="s">"ms.\nData Length: "</span> <span class="p">+</span>
                  <span class="p">(</span><span class="n">wav</span><span class="p">.</span><span class="n">SampleCount</span> <span class="p">*</span> <span class="p">(</span><span class="m">1f</span> <span class="p">/</span> <span class="n">wav</span><span class="p">.</span><span class="n">Frequency</span><span class="p">)</span> <span class="p">*</span> <span class="m">1000f</span><span class="p">).</span><span class="nf">ToString</span><span class="p">(</span><span class="s">"F0"</span><span class="p">)</span> <span class="p">+</span> <span class="s">"ms."</span><span class="p">);</span>
        <span class="n">_context</span><span class="p">.</span><span class="nf">Post</span><span class="p">(</span><span class="n">_</span> <span class="p">=&gt;</span>
        <span class="p">{</span>
            <span class="c1">// AudioSourceに新しいAudioClipを貼り付ける</span>
            <span class="n">audioSource</span><span class="p">.</span><span class="n">clip</span> <span class="p">=</span> <span class="n">AudioClip</span><span class="p">.</span><span class="nf">Create</span><span class="p">(</span><span class="s">"TextToSpeech"</span><span class="p">,</span> <span class="n">wav</span><span class="p">.</span><span class="n">SampleCount</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="n">wav</span><span class="p">.</span><span class="n">Frequency</span><span class="p">,</span> <span class="k">false</span><span class="p">);</span>
            <span class="n">audioSource</span><span class="p">.</span><span class="n">clip</span><span class="p">.</span><span class="nf">SetData</span><span class="p">(</span><span class="n">wav</span><span class="p">.</span><span class="n">LeftChannel</span><span class="p">,</span> <span class="m">0</span><span class="p">);</span>

            <span class="c1">// AudioClipを再生</span>
            <span class="n">audioSource</span><span class="p">.</span><span class="nf">Play</span><span class="p">();</span>
        <span class="p">},</span> <span class="k">null</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>このスクリプトでは以下の処理を記述しています</p>

<ul>
<li>ButtonとInputFieldのイベントを追加</li>
<li>認証キー（Json）を読みこむ</li>
<li>Google Cloudとの接続を行うクライアントの作成</li>
<li>リクエストを送信する</li>
<li>リクエストの返信からAudioClipを作成し，再生する</li>
</ul>

<p>Google Cloudからのレスポンスはbyte[]で送られてくるので，それをAudioClipで利用できるようfloat[]に変換する必要があります．<br>
そのために<a href="https://answers.unity.com/questions/737002/wav-byte-to-audioclip.html" rel="nofollow noopener" target="_blank">ここ</a>で示されているWAVクラスを導入します．</p>

<p>新しいスクリプトを作成し，記述されているスクリプトを新しいC#スクリプトに貼り付けます．</p>

<h1>
<span id="sceneの用意" class="fragment"></span><a href="#scene%E3%81%AE%E7%94%A8%E6%84%8F"><i class="fa fa-link"></i></a>Sceneの用意</h1>

<p>これで完成です．<br>
以下のようにInputFieldとButtonを持つ新しいシーンを作成します．<br>
<a href="https://camo.qiitausercontent.com/0ec846f839b05ba16d87816a7c1ed3f8e4442bed/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3433333231312f34343338353530662d653861382d383531352d633531342d6233313965323866373962622e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F433211%2F4438550f-e8a8-8515-c514-b319e28f79bb.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=c998782a3b30f7cb637ff7333e57c693" alt="image.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/433211/4438550f-e8a8-8515-c514-b319e28f79bb.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F433211%2F4438550f-e8a8-8515-c514-b319e28f79bb.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=46e4d4be76305d5b1c88975ed7398e6c 1x" loading="lazy"></a><br>
空のGameObjectを作成し，<code>AudioSource</code>と先ほど作成した<code>TextToSpeechSample</code>をアタッチします．</p>

<p>先の<b>Google Cloud Platformの利用登録</b>で取得したJsonの認証情報をResourcesのフォルダ内に置きます．<br>
<code>TextToSpeechSample</code>にInputFieldとButton，AudioSourceを登録し，"Credential"にResource以下のJsonファイルのディレクトリを指定します．（例：<code>Assets/Resources/Credentials/credential.json</code>に格納した場合，<code>Credentials/credential</code>と記述）</p>

<p>これで完成です．</p>

<h1>
<span id="実行する" class="fragment"></span><a href="#%E5%AE%9F%E8%A1%8C%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>実行する</h1>

<p>実行し，InputFieldに発言させたい文を記述し，"Send"ボタンを押すことでリクエストが送られ，少し待つと合成された音声が再生されます．<br>
細かくは調べていませんが，リクエスト最初の一回は少し時間がかかり，二回目以降は「こんにちは」といった短い文であれば0.3秒ほどで再生されます．</p>

<p>今回のスクリプトでは応答にかかった時間，文を読み上げるのにかかる再生のログ表示も併せて行われます．<br>
<a href="https://camo.qiitausercontent.com/663be12462f24cb68bd4d7db4218e400e393199c/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3433333231312f34316462666531312d323365362d656463342d313837312d6464633237343938636461392e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F433211%2F41dbfe11-23e6-edc4-1871-ddc27498cda9.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=d5da2562491837e74d63388c245ba8e7" alt="image.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/433211/41dbfe11-23e6-edc4-1871-ddc27498cda9.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F433211%2F41dbfe11-23e6-edc4-1871-ddc27498cda9.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=827a16f33fafa6f55284bb7c0ff7d054 1x" loading="lazy"></a></p>

<h1>
<span id="終わりに" class="fragment"></span><a href="#%E7%B5%82%E3%82%8F%E3%82%8A%E3%81%AB"><i class="fa fa-link"></i></a>終わりに</h1>

<p>Google Cloud Text-To-Speechを利用することで，簡単に<del>（記事を書いてて思いましたが，結構大変でした）</del>Unityで音声合成を行うことができます．</p>

<p><a href="https://qiita.com/yaegashi0852/items/3173e768484104c6ef96" id="reference-8f9ee793e51fc9b60ad3">【Unity】自分の声をテキスト化する方法【Google Cloud Speech Recognition 】</a>など，Google Cloud Speech Recognitionを利用した音声認識に関する記事は結構存在するので，少し調べればUnity上で音声認識もできます．<br>
同じGoogle Cloudを利用することで今回冒頭のGoogle Cloud Platform利用者登録の大変な部分を次回以降はなくせるので比較的楽に実装できるかと思います．</p>

<p>これを利用したチャットボットなど作成するのも面白そうです．</p>
</div></div></section><div class="css-1yzj1fm"><div class="css-1uv1qiv"><span class="fa fa-twitter"></span></div><div class="css-1uv1qiv"><span class="fa fa-facebook"></span></div></div><div class="apm-Content"><div class="apm-Content_title">Why not register and get more from Qiita?</div><ol class="apm-Content_list"><li>We will deliver articles that match you<div class="description">By following users and tags, you can catch up information on technical fields that you are interested in as a whole</div></li><li>you can read useful information later efficiently<div class="description">By &quot;stocking&quot; the articles you like, you can search right away</div></li><div><a class="apm-Content_help" href="https://help.qiita.com/ja/articles/qiita-login-user" target="_blank"><i class="fa fa-fw fa-arrow-circle-right"></i>What you can do with signing up</a></div></ol><a href="/signup?callback_action=login_or_signup&amp;redirect_to=%2FAsalato%2Fitems%2F6aa23c40ff31d9d3f13d&amp;realm=qiita" class="apm-Content_button apm-Content_button-signup">Sign up</a><a href="/login?callback_action=login_or_signup&amp;redirect_to=%2FAsalato%2Fitems%2F6aa23c40ff31d9d3f13d&amp;realm=qiita" class="apm-Content_button apm-Content_button-signin">Login</a></div></div><div class="css-helsa7"></div></div></div></div><div class="css-109dbrr"><div class="css-5jpx49"><div class="css-mnxgyc"><button class=" css-1vlpknv"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/Asalato/items/6aa23c40ff31d9d3f13d/likers" class="css-1iupg5d">16</a></div><div class="css-fsjkhv"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-1b17vb0">7</span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-7i7f4d"><div class="css-1gj7nt">Improve article</div><a href="/drafts/6aa23c40ff31d9d3f13d/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/Asalato/items/6aa23c40ff31d9d3f13d/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/Asalato/items/6aa23c40ff31d9d3f13d/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/Asalato/items/6aa23c40ff31d9d3f13d/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/Asalato/items/6aa23c40ff31d9d3f13d.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="PersonalArticlePage" data-dom-id="PersonalArticlePage-react-component-7045e8e9-75dc-434a-bab9-5c0f1de8e8e8">{"authorAnalyticsTrackingId":null,"organizationAnalyticsTrackingId":null}</script>
      
<footer id="globalFooter" class="st-Footer"><div class="st-Footer_container"><div class="st-Footer_start"><div class="st-Footer_logo"><svg viewbox="0 0 426.57 130" xmlns="http://www.w3.org/2000/svg"><circle cx="167.08" cy="21.4" r="12.28" /><path d="M250.81 29.66h23.48v18.9h-23.48z" /><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z" /><circle cx="216.33" cy="21.4" r="12.28" /></svg></div><div class="st-Footer_catchcopy">How developers code is here.</div><div class="st-Footer_socials"><a class="fa fa-twitter" href="https://twitter.com/qiita"></a><a class="fa fa-facebook-square" href="https://www.facebook.com/qiita/"></a></div></div><div class="st-Footer_end"><div class="st-Footer_qiita"><div class="st-Footer_label">Qiita</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="/about">About</a><a href="/terms">Terms</a><a href="/privacy">Privacy</a><a target="_blank" href="http://help.qiita.com/ja/articles/qiita-community-guideline">Guideline</a><a target="_blank" href="https://help.qiita.com/ja/articles/others-brand-guideline">Design Guideline</a></div><div class="st-Footer_column"><a href="/release-notes">Release</a><a href="/api/v2/docs">API</a><a href="/feedback/new">ご意見</a><a href="https://help.qiita.com">Help</a><a target="_blank" href="https://qiita.com/ads?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Advertisement</a></div></div></div><div class="st-Footer_increments"><div class="st-Footer_label">Increments</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="https://increments.co.jp/company/">About</a><a href="https://increments.co.jp/jobs/">採用情報</a><a href="https://blog.qiita.com">Blog</a></div><div class="st-Footer_column"><a href="https://teams.qiita.com/">Qiita Team</a><a href="https://jobs.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Jobs</a><a href="https://zine.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Zine</a></div></div></div></div></div><div class="st-Footer_copyright">© 2011-2021 Increments Inc.</div></footer><div id="Snackbar-react-component-27465f10-91fc-4168-b0e8-b2aac8ddf099"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="Snackbar" data-dom-id="Snackbar-react-component-27465f10-91fc-4168-b0e8-b2aac8ddf099">{}</script>
      
<div id="LoginModal-react-component-fc2234c5-e97e-45d5-b645-2f56245846c0"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="LoginModal" data-dom-id="LoginModal-react-component-fc2234c5-e97e-45d5-b645-2f56245846c0">{}</script>
      
<div id="StockModal-react-component-775e8ec1-81bc-411a-983d-eabac2e78965"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="StockModal" data-dom-id="StockModal-react-component-775e8ec1-81bc-411a-983d-eabac2e78965">{}</script>
      
</div><div id="dataContainer" style="display: none;" data-config="{&quot;actionPath&quot;:&quot;public/items#show&quot;,&quot;settings&quot;:{&quot;analyticsTrackingId&quot;:&quot;UA-24675221-12&quot;,&quot;assetsMap&quot;:{},&quot;csrfToken&quot;:&quot;6XJrZ3ip/awD5KVTs5j/gcVcsxeyW/g0zg1k2crJahgQQccMO7wShR8ExlnP9u8xq2RK3wIFbbGNl1OF3rqZYg==&quot;,&quot;locale&quot;:&quot;en&quot;},&quot;currentUser&quot;:null}" /></body></html><script type="application/json" data-js-react-on-rails-store="AppStoreWithReactOnRails">{"snackbar":{"type":"","body":"","isActive":false},"article":{"article":{"body":"\u003cp\u003eタイトルの通りです．\u003cbr\u003e\nUnityでもGoogle CloudのAPIを利用することで（簡単に）音声合成を行うことができます．\u003c/p\u003e\n\n\u003cp\u003e（追記：本記事はWindowsを対象にしています．Mac環境では\u003ca href=\"https://qiita.com/Asalato/items/6aa23c40ff31d9d3f13d#%E3%83%A9%E3%83%B3%E3%82%BF%E3%82%A4%E3%83%A0%E3%81%A7%E5%88%A9%E7%94%A8%E3%81%99%E3%82%8B%E3%83%A9%E3%82%A4%E3%83%96%E3%83%A9%E3%83%AA%E3%82%92%E3%82%A4%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%88%E3%81%99%E3%82%8B\"\u003eランタイムで利用するライブラリをインポートする\u003c/a\u003eの項目で導入しなければいけないライブラリが異なるため，異なる方法で用意する必要があります）\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"余談\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E4%BD%99%E8%AB%87\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e余談\u003c/h1\u003e\n\n\u003cp\u003eGoogle CloudのText-To-Speech APIを利用することで誰でも手軽に音声合成を行うことができます．\u003cbr\u003e\nしかし，これを利用した記事は現状あまり公開されていません．\u003c/p\u003e\n\n\u003cp\u003e特にC#(.NET)環境での動作については，\u003ca href=\"https://cloud.google.com/text-to-speech/docs/samples\" rel=\"nofollow noopener\" target=\"_blank\"\u003eGoogle Cloudのドキュメンテーションページ\u003c/a\u003eでも\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/b38011795065867aa13d69ca23934c0caabb575d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3433333231312f33623037613666642d336561652d666465332d623765312d6661323630653736383534612e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F433211%2F3b07a6fd-3eae-fde3-b7e1-fa260e76854a.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=a230eef84a9954a157784aacc6bdc8bc\" alt=\"図1.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/433211/3b07a6fd-3eae-fde3-b7e1-fa260e76854a.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F433211%2F3b07a6fd-3eae-fde3-b7e1-fa260e76854a.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=705fcb9cf7a00fe16aefe8246add2d8d 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003cbr\u003e\nと非常に残念な感じです．\u003c/p\u003e\n\n\u003cp\u003e今回これを触る機会があり，動くようにするために結構苦労しました．\u003cbr\u003e\n実装の際特に詰まった部分について解説しながら動くサンプルを示したいと思います．\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"準備\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%BA%96%E5%82%99\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e準備\u003c/h1\u003e\n\n\u003cp\u003eUnityプロジェクトに導入するためにあらかじめ行う作業があります．\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"google-cloud-platformの利用登録\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#google-cloud-platform%E3%81%AE%E5%88%A9%E7%94%A8%E7%99%BB%E9%8C%B2\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eGoogle Cloud Platformの利用登録\u003c/h2\u003e\n\n\u003cp\u003eまず，Google Cloudに開発者申請を行い，APIリクエストを送る際の認証情報を取得する必要があります．\u003cbr\u003e\n\u003ca href=\"https://cloud.google.com/\" rel=\"nofollow noopener\" target=\"_blank\"\u003eGoogle Cloud Platform\u003c/a\u003eのページにアクセスし，利用者登録を行います．\u003cbr\u003e\n住所，名前，電話番号，クレジットカード番号を入力する欄がありますが，個人開発者であれば基本的に無料で利用できます．\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://cloud.google.com/text-to-speech/pricing\" rel=\"nofollow noopener\" target=\"_blank\"\u003e料金ページ\u003c/a\u003eに利用料の記載があります．\u003cbr\u003e\nText-To-Speechの場合，クラウドに送信した文字数に応じて料金が変動します．\u003cbr\u003e\n通常の音声合成とWaveNet音声（ちょっとリアルな声）で値段が変わり，以下のように無料枠と有料の場合の値段が定められています．\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/5fbb1446b648d1b2c069fdb66adbb850616b6632/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3433333231312f34663662373765632d643639332d356130622d613661372d6365313862643364356461312e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F433211%2F4f6b77ec-d693-5a0b-a6a7-ce18bd3d5da1.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=898cb56a094c56c5070eecd34b2de8c6\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/433211/4f6b77ec-d693-5a0b-a6a7-ce18bd3d5da1.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F433211%2F4f6b77ec-d693-5a0b-a6a7-ce18bd3d5da1.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=056cfa905b1006481da636d713237a94 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e利用者登録を行った後は分かりやすい名前を付けてプロジェクトを作成します．\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/6a1042d86c1a090bb01274d877a15a2c774aa9bc/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3433333231312f65666630356265662d323733392d343164352d353038382d3439386366326334303533662e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F433211%2Feff05bef-2739-41d5-5088-498cf2c4053f.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=6e6846ce72064ee8f03e49401595efd1\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/433211/eff05bef-2739-41d5-5088-498cf2c4053f.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F433211%2Feff05bef-2739-41d5-5088-498cf2c4053f.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=25ff9cfca66bfe0d1d9e6f6f22b70515 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003cbr\u003e\nその後プロジェクトでCloud Text-To-Speech APIを有効にします．\u003cbr\u003e\n左上のHamburgerタブからメニューを開き，「APIとサービス」から「ライブラリ」を選びます．\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/9db7cf2dd55e3201b55f0929f7e7fd49dc3a5dd3/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3433333231312f61373834643435322d666333392d353239622d616530312d3166653763393066356239642e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F433211%2Fa784d452-fc39-529b-ae01-1fe7c90f5b9d.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=91103d3578a4b1325467d43d4eec7398\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/433211/a784d452-fc39-529b-ae01-1fe7c90f5b9d.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F433211%2Fa784d452-fc39-529b-ae01-1fe7c90f5b9d.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=2e4cf6c9d68adcd883c4f0bd9c994d2d 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003cbr\u003e\nそこでCloud Text-To-Speechを選択し，APIを有効化します\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/694f629882a44b0be27751e9c178f33e19531198/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3433333231312f32326632653834632d373335612d653237372d623363342d6539353162356262333263392e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F433211%2F22f2e84c-735a-e277-b3c4-e951b5bb32c9.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=8572de62718898e78db694f0665dfc27\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/433211/22f2e84c-735a-e277-b3c4-e951b5bb32c9.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F433211%2F22f2e84c-735a-e277-b3c4-e951b5bb32c9.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=84118a5db37d4c3ad431140c295d9f37 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e次に実際に利用するAPIキーを作成します．\u003cbr\u003e\n左上のHamburgerタブからメニューを開き，「IAMの管理」から「サービスアカウント」を選択し，サービスアカウントの作成を行います．\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/a6da7c606fe3fb8497003b2e7970b847d42dc82b/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3433333231312f65623962306237662d643165662d666161652d616131362d6139383866663030333865632e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F433211%2Feb9b0b7f-d1ef-faae-aa16-a988ff0038ec.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=31a941c189048b02e407b8e806f109e4\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/433211/eb9b0b7f-d1ef-faae-aa16-a988ff0038ec.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F433211%2Feb9b0b7f-d1ef-faae-aa16-a988ff0038ec.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=ad1c7093cd8356616d60eb5c87f82bf3 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003cbr\u003e\n「作成」を選択し，次に出る組織の選択はスルーして大丈夫です．\u003cbr\u003e\n次の「キーの作成」は必須です．\u003cbr\u003e\nJson形式でキーを作成し，保存します．（このキーは厳重に管理してください）\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/f0a14dcb6d9bc2ca96541da603e87e72632be809/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3433333231312f37373961616539652d366330332d633732312d373631612d3436343237393138646463312e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F433211%2F779aae9e-6c03-c721-761a-46427918ddc1.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=d238582fca4bd7af4d17a3b53f86cfbf\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/433211/779aae9e-6c03-c721-761a-46427918ddc1.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F433211%2F779aae9e-6c03-c721-761a-46427918ddc1.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=20ad11a2ab912e8dc0cf7161b3a396af 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003cbr\u003e\nこれでGoogle Could Platform側での作業は終わりです．\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"unityにライブラリをインポートする\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#unity%E3%81%AB%E3%83%A9%E3%82%A4%E3%83%96%E3%83%A9%E3%83%AA%E3%82%92%E3%82%A4%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%88%E3%81%99%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eUnityにライブラリをインポートする\u003c/h2\u003e\n\n\u003cp\u003e現在Google Cloud Text-To-SpeechをUnityで利用できるようなライブラリは存在しません．\u003cbr\u003e\nなので自分で利用するライブラリ（dll）をインポートする必要があります．\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"nugetからライブラリをインポートする\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#nuget%E3%81%8B%E3%82%89%E3%83%A9%E3%82%A4%E3%83%96%E3%83%A9%E3%83%AA%E3%82%92%E3%82%A4%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%88%E3%81%99%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eNuGetからライブラリをインポートする\u003c/h3\u003e\n\n\u003cp\u003eGoogle Cloud APIはNuGetで.Net用ライブラリが公開されており，それを利用します．\u003cbr\u003e\nUnityにNuGetライブラリをインポートするための便利なツールに「\u003ca href=\"https://github.com/GlitchEnzo/NuGetForUnity\" rel=\"nofollow noopener\" target=\"_blank\"\u003e\u003ccode\u003eNuGetForUnity\u003c/code\u003e\u003c/a\u003e」というものがあるので，これを利用しUnityに導入していきます．\u003cbr\u003e\nこれを利用することで依存するライブラリをまとめてインポートできるので便利です．\u003c/p\u003e\n\n\u003cp\u003e検索窓に「Cloud TextToSpeech」と入力することで目的のAPIが見つかるのでこれをインストールします．\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/9711994568ceaa101f10af4b6c7038217d10948d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3433333231312f66353935653833652d626434332d653239352d333865362d3539636134653038626630332e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F433211%2Ff595e83e-bd43-e295-38e6-59ca4e08bf03.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=e01029ff8b1a29782d41fe10a292ae74\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/433211/f595e83e-bd43-e295-38e6-59ca4e08bf03.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F433211%2Ff595e83e-bd43-e295-38e6-59ca4e08bf03.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=923caba41d0d84f3cff1e97b80f8dbc0 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eこれでAssetフォルダに利用するdllがインポートできましたが，このままでは\u003ccode\u003eunload broken assembly\u003c/code\u003eというエラーが出ます．\u003cbr\u003e\nこれはdll間で依存するライブラリを見つけられていないためで，これを回避するためにはいろいろ方法がありますが，今回は一番単純な「\u003cb\u003eすべてのdllを同じディレクトリに置く\u003c/b\u003e」という手段を取ります．結構めんどくさいです．\u003c/p\u003e\n\n\u003cp\u003eインポートを行った後\u003ccode\u003eNuGetForUnity\u003c/code\u003eはもう不要なので，Assetのディレクトリから該当するフォルダを削除します．（\u003cb\u003edllの入っているPackagesフォルダは消さない！\u003c/b\u003e）\u003cbr\u003e\nそしてpackages以下に存在するdllを全てpackagesの先頭フォルダに移し，纏めます．\u003cbr\u003e\nこれでエラーは出なくなったはずです．\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"ランタイムで利用するライブラリをインポートする\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%A9%E3%83%B3%E3%82%BF%E3%82%A4%E3%83%A0%E3%81%A7%E5%88%A9%E7%94%A8%E3%81%99%E3%82%8B%E3%83%A9%E3%82%A4%E3%83%96%E3%83%A9%E3%83%AA%E3%82%92%E3%82%A4%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%88%E3%81%99%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eランタイムで利用するライブラリをインポートする\u003c/h3\u003e\n\n\u003cp\u003eNuGetからライブラリをインポートすることでエディタ上ではエラーが出なくなりますが，このままでは実行時に\u003ccode\u003eDllNotFoundException: grpc_csharp_ext\u003c/code\u003eや\u003ccode\u003eEntryPointNotFoundException: grpcsharp_native_callback_dispatcher_init\u003c/code\u003eといったエラーが出てしまいます．\u003c/p\u003e\n\n\u003cp\u003eランタイム（実行時）で利用するライブラリは\u003ca href=\"https://github.com/jsmouret/grpc-unity-package\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://github.com/jsmouret/grpc-unity-package\u003c/a\u003e からお借りします．\u003cbr\u003e\n\u003ca href=\"https://github.com/jsmouret/grpc-unity-package/releases\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://github.com/jsmouret/grpc-unity-package/releases\u003c/a\u003e から最新のgrpc-unity-package.zipをダウンロードし，Plugins/Grpc.Core/runtimes/win（利用環境によって変えてください）/x64/grpc_csharp_ex.dllをコピーし，先ほどNuGetからインポートしたフォルダに貼り付けます．\u003c/p\u003e\n\n\u003cp\u003eこれで実行時のエラーもなくなります．\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"スクリプトの用意\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%97%E3%83%88%E3%81%AE%E7%94%A8%E6%84%8F\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eスクリプトの用意\u003c/h1\u003e\n\n\u003cp\u003eTextToSpeechSampleというC#スクリプトを新たに作成し，以下のスクリプトを貼り付けます．\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem.Diagnostics\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem.Threading\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem.Threading.Tasks\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eGoogle.Apis.Auth.OAuth2\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eGoogle.Cloud.TextToSpeech.V1\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eGrpc.Auth\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eGrpc.Core\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eUnityEngine\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eUnityEngine.UI\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eWWUtils.Audio\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eDebug\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eUnityEngine\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eDebug\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eTextToSpeechSample\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eMonoBehaviour\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eSerializeField\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003eInputField\u003c/span\u003e \u003cspan class=\"n\"\u003einputField\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eSerializeField\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003eButton\u003c/span\u003e \u003cspan class=\"n\"\u003ebutton\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eSerializeField\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003eAudioSource\u003c/span\u003e \u003cspan class=\"n\"\u003eaudioSource\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eSerializeField\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003ecredential\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003econst\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003eGcpUrl\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"https://www.googleapis.com/auth/cloud-platform\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003econst\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003eChannelTarget\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"texttospeech.googleapis.com:443\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003eTextToSpeechClient\u003c/span\u003e \u003cspan class=\"n\"\u003e_client\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003eAudioConfig\u003c/span\u003e \u003cspan class=\"n\"\u003e_audioConfig\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003eVoiceSelectionParams\u003c/span\u003e \u003cspan class=\"n\"\u003e_voiceSelectionParams\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003eChannelCredentials\u003c/span\u003e \u003cspan class=\"n\"\u003e_credentials\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003eSynchronizationContext\u003c/span\u003e \u003cspan class=\"n\"\u003e_context\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003eStopwatch\u003c/span\u003e \u003cspan class=\"n\"\u003e_stopwatch\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eStopwatch\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eStart\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e// ボタンを押したときのイベントを追加\u003c/span\u003e\n        \u003cspan class=\"n\"\u003ebutton\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eonClick\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAddListener\u003c/span\u003e\u003cspan class=\"p\"\u003e(()\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003estr\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003einputField\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003etext\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eIsNullOrEmpty\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003estr\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"n\"\u003einputField\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003etext\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n            \u003cspan class=\"nf\"\u003eCreateRequest\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003estr\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eDebug\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eLog\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e$\"Send Request: \u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003estr\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e});\u003c/span\u003e\n\n        \u003cspan class=\"c1\"\u003e// 認証情報をResourceから読み込む\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003ecredentialStr\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eResources\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eLoad\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eTextAsset\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"n\"\u003ecredential\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"n\"\u003etext\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003egoogleCredential\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eGoogleCredential\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eFromJson\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ecredentialStr\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"n\"\u003e_credentials\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003egoogleCredential\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eCreateScoped\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eGcpUrl\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nf\"\u003eToChannelCredentials\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003echannel\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eChannel\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eChannelTarget\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003e_credentials\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"n\"\u003e_client\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eTextToSpeechClientImpl\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eTextToSpeech\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eTextToSpeechClient\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003echannel\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eTextToSpeechSettings\u003c/span\u003e\u003cspan class=\"p\"\u003e());\u003c/span\u003e\n\n        \u003cspan class=\"c1\"\u003e// オプションを記述\u003c/span\u003e\n        \u003cspan class=\"n\"\u003e_audioConfig\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eAudioConfig\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eAudioEncoding\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eAudioEncoding\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eLinear16\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eSampleRateHertz\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e44100\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e};\u003c/span\u003e\n\n        \u003cspan class=\"c1\"\u003e// 声のパラメータを指定\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e// https://cloud.google.com/text-to-speech/docs/voices?hl=jaに記載されているものから選択できます\u003c/span\u003e\n        \u003cspan class=\"n\"\u003e_voiceSelectionParams\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eVoiceSelectionParams\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eSsmlGender\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eSsmlVoiceGender\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eFemale\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eLanguageCode\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"ja-JP\"\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e};\u003c/span\u003e\n\n        \u003cspan class=\"n\"\u003e_context\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eSynchronizationContext\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eCurrent\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e/// \u0026lt;summary\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e/// リクエストを送信する\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e/// \u0026lt;/summary\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e/// \u0026lt;param name=\"text\"\u0026gt;音声合成を行う対象の文\u0026lt;/param\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eCreateRequest\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003etext\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003erequest\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eSynthesizeSpeechRequest\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eInput\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eSynthesisInput\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003eText\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003etext\u003c/span\u003e\u003cspan class=\"p\"\u003e},\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eAudioConfig\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003e_audioConfig\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eVoice\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003e_voiceSelectionParams\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e};\u003c/span\u003e\n\n        \u003cspan class=\"n\"\u003e_stopwatch\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eRestart\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n        \u003cspan class=\"c1\"\u003e// リクエストを非同期で送信し，返ってきた後に再生するメソッドに投げる\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eTask\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eRun\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003easync\u003c/span\u003e \u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"nf\"\u003eSetAudioClip\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003eawait\u003c/span\u003e \u003cspan class=\"n\"\u003e_client\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSynthesizeSpeechAsync\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003erequest\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e \u003cspan class=\"p\"\u003e});\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e/// \u0026lt;summary\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e/// Google CloudからのレスポンスをAudioClipに書き出し，再生する\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e/// \u0026lt;/summary\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e/// \u0026lt;param name=\"response\"\u0026gt;Google Cloudからのレスポンス\u0026lt;/param\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eSetAudioClip\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eSynthesizeSpeechResponse\u003c/span\u003e \u003cspan class=\"n\"\u003eresponse\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003ebytes\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eresponse\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eAudioContent\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eToByteArray\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n        \u003cspan class=\"c1\"\u003e// byte[]をAudioClipで利用できる形に変換する\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003ewav\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eWAV\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ebytes\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eDebug\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eLog\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Get Response: Elapsed time \"\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"n\"\u003e_stopwatch\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eElapsedMilliseconds\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"s\"\u003e\"ms.\\nData Length: \"\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e\n                  \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ewav\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eSampleCount\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e1f\u003c/span\u003e \u003cspan class=\"p\"\u003e/\u003c/span\u003e \u003cspan class=\"n\"\u003ewav\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eFrequency\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"m\"\u003e1000f\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nf\"\u003eToString\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"F0\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"s\"\u003e\"ms.\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"n\"\u003e_context\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003ePost\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003e_\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"c1\"\u003e// AudioSourceに新しいAudioClipを貼り付ける\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eaudioSource\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eclip\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eAudioClip\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eCreate\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"TextToSpeech\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ewav\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eSampleCount\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ewav\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eFrequency\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003efalse\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eaudioSource\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eclip\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSetData\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ewav\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eLeftChannel\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n            \u003cspan class=\"c1\"\u003e// AudioClipを再生\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eaudioSource\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003ePlay\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e},\u003c/span\u003e \u003cspan class=\"k\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eこのスクリプトでは以下の処理を記述しています\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eButtonとInputFieldのイベントを追加\u003c/li\u003e\n\u003cli\u003e認証キー（Json）を読みこむ\u003c/li\u003e\n\u003cli\u003eGoogle Cloudとの接続を行うクライアントの作成\u003c/li\u003e\n\u003cli\u003eリクエストを送信する\u003c/li\u003e\n\u003cli\u003eリクエストの返信からAudioClipを作成し，再生する\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eGoogle Cloudからのレスポンスはbyte[]で送られてくるので，それをAudioClipで利用できるようfloat[]に変換する必要があります．\u003cbr\u003e\nそのために\u003ca href=\"https://answers.unity.com/questions/737002/wav-byte-to-audioclip.html\" rel=\"nofollow noopener\" target=\"_blank\"\u003eここ\u003c/a\u003eで示されているWAVクラスを導入します．\u003c/p\u003e\n\n\u003cp\u003e新しいスクリプトを作成し，記述されているスクリプトを新しいC#スクリプトに貼り付けます．\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"sceneの用意\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#scene%E3%81%AE%E7%94%A8%E6%84%8F\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eSceneの用意\u003c/h1\u003e\n\n\u003cp\u003eこれで完成です．\u003cbr\u003e\n以下のようにInputFieldとButtonを持つ新しいシーンを作成します．\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/0ec846f839b05ba16d87816a7c1ed3f8e4442bed/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3433333231312f34343338353530662d653861382d383531352d633531342d6233313965323866373962622e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F433211%2F4438550f-e8a8-8515-c514-b319e28f79bb.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=c998782a3b30f7cb637ff7333e57c693\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/433211/4438550f-e8a8-8515-c514-b319e28f79bb.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F433211%2F4438550f-e8a8-8515-c514-b319e28f79bb.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=46e4d4be76305d5b1c88975ed7398e6c 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003cbr\u003e\n空のGameObjectを作成し，\u003ccode\u003eAudioSource\u003c/code\u003eと先ほど作成した\u003ccode\u003eTextToSpeechSample\u003c/code\u003eをアタッチします．\u003c/p\u003e\n\n\u003cp\u003e先の\u003cb\u003eGoogle Cloud Platformの利用登録\u003c/b\u003eで取得したJsonの認証情報をResourcesのフォルダ内に置きます．\u003cbr\u003e\n\u003ccode\u003eTextToSpeechSample\u003c/code\u003eにInputFieldとButton，AudioSourceを登録し，\"Credential\"にResource以下のJsonファイルのディレクトリを指定します．（例：\u003ccode\u003eAssets/Resources/Credentials/credential.json\u003c/code\u003eに格納した場合，\u003ccode\u003eCredentials/credential\u003c/code\u003eと記述）\u003c/p\u003e\n\n\u003cp\u003eこれで完成です．\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"実行する\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AE%9F%E8%A1%8C%E3%81%99%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e実行する\u003c/h1\u003e\n\n\u003cp\u003e実行し，InputFieldに発言させたい文を記述し，\"Send\"ボタンを押すことでリクエストが送られ，少し待つと合成された音声が再生されます．\u003cbr\u003e\n細かくは調べていませんが，リクエスト最初の一回は少し時間がかかり，二回目以降は「こんにちは」といった短い文であれば0.3秒ほどで再生されます．\u003c/p\u003e\n\n\u003cp\u003e今回のスクリプトでは応答にかかった時間，文を読み上げるのにかかる再生のログ表示も併せて行われます．\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/663be12462f24cb68bd4d7db4218e400e393199c/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3433333231312f34316462666531312d323365362d656463342d313837312d6464633237343938636461392e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F433211%2F41dbfe11-23e6-edc4-1871-ddc27498cda9.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=d5da2562491837e74d63388c245ba8e7\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/433211/41dbfe11-23e6-edc4-1871-ddc27498cda9.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F433211%2F41dbfe11-23e6-edc4-1871-ddc27498cda9.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=827a16f33fafa6f55284bb7c0ff7d054 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"終わりに\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E7%B5%82%E3%82%8F%E3%82%8A%E3%81%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e終わりに\u003c/h1\u003e\n\n\u003cp\u003eGoogle Cloud Text-To-Speechを利用することで，簡単に\u003cdel\u003e（記事を書いてて思いましたが，結構大変でした）\u003c/del\u003eUnityで音声合成を行うことができます．\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://qiita.com/yaegashi0852/items/3173e768484104c6ef96\" id=\"reference-8f9ee793e51fc9b60ad3\"\u003e【Unity】自分の声をテキスト化する方法【Google Cloud Speech Recognition 】\u003c/a\u003eなど，Google Cloud Speech Recognitionを利用した音声認識に関する記事は結構存在するので，少し調べればUnity上で音声認識もできます．\u003cbr\u003e\n同じGoogle Cloudを利用することで今回冒頭のGoogle Cloud Platform利用者登録の大変な部分を次回以降はなくせるので比較的楽に実装できるかと思います．\u003c/p\u003e\n\n\u003cp\u003eこれを利用したチャットボットなど作成するのも面白そうです．\u003c/p\u003e\n","createdAt":"2020-04-30T10:27:35Z","elapsedYearsFromLastModifiedAt":0,"encryptedId":"RvRfdbxsrsmHwzhn8MP+wQGKxJf2VL/9cg==--de3xMPQtzotxunB8--Mv4PCbDvDJi3jSuIEVl58w==","isBanned":false,"isDeprecated":false,"isDestroyableByViewer":false,"isEditRequestReadableByViewer":true,"isEditRequestSendableByViewer":true,"isLikableByViewer":true,"isLikedByViewer":false,"isPublic":true,"isSlide":false,"isStockableByViewer":true,"isStockedByViewer":false,"isSubscribableByViewer":false,"isSubscribedByViewer":false,"isUpdatableByViewer":false,"isUpdated":true,"lastModifiedAt":"2020-09-14T13:23:47Z","likesCount":16,"linkUrl":"https://qiita.com/Asalato/items/6aa23c40ff31d9d3f13d","organization":null,"originalId":1213549,"stockedCount":7,"title":"Google Cloud Text-To-Speechを利用してUnityでキャラクターをフルボイスに！","toc":"\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E4%BD%99%E8%AB%87\"\u003e余談\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E6%BA%96%E5%82%99\"\u003e準備\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#google-cloud-platform%E3%81%AE%E5%88%A9%E7%94%A8%E7%99%BB%E9%8C%B2\"\u003eGoogle Cloud Platformの利用登録\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#unity%E3%81%AB%E3%83%A9%E3%82%A4%E3%83%96%E3%83%A9%E3%83%AA%E3%82%92%E3%82%A4%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%88%E3%81%99%E3%82%8B\"\u003eUnityにライブラリをインポートする\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#nuget%E3%81%8B%E3%82%89%E3%83%A9%E3%82%A4%E3%83%96%E3%83%A9%E3%83%AA%E3%82%92%E3%82%A4%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%88%E3%81%99%E3%82%8B\"\u003eNuGetからライブラリをインポートする\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%A9%E3%83%B3%E3%82%BF%E3%82%A4%E3%83%A0%E3%81%A7%E5%88%A9%E7%94%A8%E3%81%99%E3%82%8B%E3%83%A9%E3%82%A4%E3%83%96%E3%83%A9%E3%83%AA%E3%82%92%E3%82%A4%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%88%E3%81%99%E3%82%8B\"\u003eランタイムで利用するライブラリをインポートする\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%97%E3%83%88%E3%81%AE%E7%94%A8%E6%84%8F\"\u003eスクリプトの用意\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#scene%E3%81%AE%E7%94%A8%E6%84%8F\"\u003eSceneの用意\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AE%9F%E8%A1%8C%E3%81%99%E3%82%8B\"\u003e実行する\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E7%B5%82%E3%82%8F%E3%82%8A%E3%81%AB\"\u003e終わりに\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n","totalPv":3680,"uuid":"6aa23c40ff31d9d3f13d","banReason":null,"adventCalendarItem":null,"author":{"encryptedId":"ff841w8wJTeZGLH8P0ykf8tw4nQD--TRgNvQS/td/2rSJ8--xGf3p/2eyFgoWpA3ojX8Xg==","originalId":433211,"description":"UnityでCG作ったりフロントやったり基幹システムやったりしています。あとハードウェアとかWeb開発とかも。\r\n世界で自分くらいにしか需要がなさそうな記事を投稿することでウェブの多様性に貢献していき","facebookUrl":null,"githubUrl":null,"isBlockingViewer":false,"isFollowableByViewer":true,"isFollowedByViewer":false,"isTweetWebNotificationReceivable":true,"linkedinUrl":null,"name":"","profileImageUrl":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/433211/profile-images/1559966308","profileImageUrlW48":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F433211%2Fprofile-images%2F1559966308?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=48\u0026s=9894287d655ed3304f711dc66ee9a67b","profileImageUrlW75":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F433211%2Fprofile-images%2F1559966308?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=cc1ab6586821b8c88896e57598f58a68","urlName":"Asalato","websiteUrl":"https://portfolio.asalato.net","twitterUrl":"https://twitter.com/Ac_313","twitterUrlName":"Ac_313","revealedOrganizations":{"edges":[]}},"tags":[{"name":"C#","urlName":"csharp"},{"name":".NET","urlName":".net"},{"name":"Unity","urlName":"unity"},{"name":"GoogleCloudPlatform","urlName":"googlecloudplatform"},{"name":"TextToSpeech","urlName":"texttospeech"}],"followingLikers":{"edges":[]},"comments":{"totalCount":5}},"comments":[],"client":null,"ads_event_emitter":null}}</script>
