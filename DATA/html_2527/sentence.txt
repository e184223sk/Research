かつてはコマンドライン引数の解析も自前でやる必要があったりログ出力も苦労して作ってたりするけど、今時はそういうパッケージがあるのでガンガン利用すべし。というわけで今時のコンソールアプリを作るための初期構造。System.CommandLine はまだプレビュー版だけれども自前で解析するよりまし。
GenericHost 使わないのはバッチ処理とかちょっとしたコマンドとかには過剰なので。program.csServiceコマンドラインオプション設定ファイルマッピングクラス設定ファイルjson 設定ファイルの読み込みやらDI設定やらコマンドライン解析やら、だいたいこんな感じ。設定ファイルの内容とコマンドライン引数はそれぞれのクラスにマッピングされる。`git log' みたいなコマンドのコマンドとかRootCommandにCommandを追加すればよい。
DIはAutofacでもDryIocでも Unity Container でも何でもよい。最終的には Microsoft.Extensions.DependencyInjection を通して使う。System.CommandLine
https://docs.microsoft.com/ja-jp/archive/msdn-magazine/2019/march/net-parse-the-command-line-with-system-commandlineDryIoc
https://github.com/dadhi/DryIocNLog
https://nlog-project.org/


