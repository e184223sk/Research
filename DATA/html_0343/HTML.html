<!DOCTYPE html><html><head><meta charset="utf-8" /><title>Blazor Tutorialまとめ(EP06～09) - Qiita</title><meta content="width=device-width,initial-scale=1,shrink-to-fit=no,viewport-fit=cover" name="viewport" /><meta content="#55c500" name="theme-color" /><meta content="XWpkTG32-_C4joZoJ_UsmDUi-zaH-hcrjF6ZC_FoFbk" name="google-site-verification" /><meta content="telephone=no" name="format-detection" /><link rel="canonical" href="https://qiita.com/NAVE/items/124d6a9e7a4e2cdb580b" /><link href="/manifest.json" rel="manifest" /><link href="/opensearch.xml" rel="search" title="Qiita" type="application/opensearchdescription+xml" /><link as="script" href="https://www.googletagservices.com/tag/js/gpt.js" rel="preload" /><link href="https://securepubads.g.doubleclick.net" rel="preconnect" /><script async="" src="https://www.googletagservices.com/tag/js/gpt.js"></script><meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="GO/kXmmYsA5emRujX+gzBgXRRa5Cq3UQ/w/suEpBrDliiDUrZGQxO3BLK52lGGYPgB1FVAmFDVb312NfJk1h/Q==" /><link rel="shortcut icon" type="image/x-icon" href="https://cdn.qiita.com/assets/favicons/public/production-c620d3e403342b1022967ba5e3db1aaa.ico" /><link rel="apple-touch-icon" type="image/png" href="https://cdn.qiita.com/assets/favicons/public/apple-touch-icon-ec5ba42a24ae923f16825592efdc356f.png" /><link rel="stylesheet" media="all" href="https://cdn.qiita.com/assets/public/article-2eaa7dbedc42a8ea65c722cda46d0ebb.min.css" /><script src="https://cdn.qiita.com/assets/public/v3-article-bundle-63de2d91fef827269d3f6b958db2335b.min.js" defer="defer"></script><meta name="twitter:card" content="summary_large_image"><meta content="@Qiita" name="twitter:site" /><meta property="og:type" content="article"><meta property="og:title" content="Blazor Tutorialまとめ(EP06～09) - Qiita"><meta property="og:image" content="https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0&amp;w=1200&amp;mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND1RbXhoZW05eUlGUjFkRzl5YVdGczQ0Ry00NEdvNDRLQktFVlFNRGJ2dlo0d09TayZ0eHQtY29sb3I9JTIzMzMzJnR4dC1mb250PUhpcmFnaW5vJTIwU2FucyUyMFc2JnR4dC1zaXplPTU0JnR4dC1jbGlwPWVsbGlwc2lzJnR4dC1hbGlnbj1jZW50ZXIlMkNtaWRkbGUmcz0zYjQwYTc0YTJlYTBjNDJmZTFhNmY0NzhjMTQ4ZDA1MQ&amp;mark-align=center%2Cmiddle&amp;blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RRTVCVmtVJnR4dC1jb2xvcj0lMjMzMzMmdHh0LWZvbnQ9SGlyYWdpbm8lMjBTYW5zJTIwVzYmdHh0LXNpemU9NDUmdHh0LWFsaWduPXJpZ2h0JTJDYm90dG9tJnM9NjMxYmI4ZjczYWI4NTYwOGQ1MGViYmQ0NjFhYjY5MWU&amp;blend-align=center%2Cmiddle&amp;blend-mode=normal&amp;s=c9e0b12379dc26d13e4dcf58d479814d"><meta property="og:description" content="本家動画はこちら
EP01～05はこちら
番外×2 + EP10～はこちら


EP06:JavaScriptとの相互運用


razorページでJavaScriptを使うには、まずは@inject IJSRuntime JSRunt..."><meta content="https://qiita.com/NAVE/items/124d6a9e7a4e2cdb580b" property="og:url" /><meta content="Qiita" property="og:site_name" /><meta content="564524038" property="fb:admins" /><meta content="C#,Razor,Blazor" name="keywords" /><script>!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window, document,'script',
'https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '668972150489891');
fbq('track', 'PageView');</script><style data-emotion-css="17jxvjw 11t2ec1 1dvr2p8 18lkoru 1g4cku8 1iupg5d ijvq0v 15cocm3 12rp90f 115f4t 1b8uj5v 79elbk 16hhh7b fcbn8c 1gj7nt 154zy0m yikrym 1jqivyb 1ode1bp le4d8r 1hbd3g7 helsa7 8qb8m4 2imjyh he5w1s 70qvj9 3ojehk 100alwu 1dtnjt5 10ougpm 1ay9vb9 m19uds cgzq40 1wa99t2 1l3zk9f 4czcte 1yzj1fm 1uv1qiv 109dbrr 5jpx49 mnxgyc 1vlpknv fsjkhv 1b17vb0 7i7f4d"}>.css-17jxvjw{display:grid;display:-ms-grid;grid-template-columns:80px minmax(0,1fr) 300px;-ms-grid-columns:80px minmax(0,1fr) 300px;grid-template-rows:minmax(270px,auto) 1fr;-ms-grid-rows:minmax(270px,auto) 1fr;max-width:1280px;margin-right:auto;margin-left:auto;padding-top:24px;padding-right:24px;padding-left:24px;}@media (max-width:1200px){.css-17jxvjw{padding-bottom:0;padding-left:0;padding-right:0;}}@media (max-width:992px){.css-17jxvjw{grid-template-columns:80px 452px 300px;-ms-grid-columns:80px 452px 300px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}}@media (max-width:770px){.css-17jxvjw{display:block;}}@media (max-width:480px){.css-17jxvjw{padding-top:0;}}.css-11t2ec1{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;z-index:5;position:-webkit-sticky;position:sticky;top:calc(56px + 24px + 16px + 32px - 16px);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:16px;width:80px;}.css-11t2ec1:after{content:'';display:table;}.css-11t2ec1:before{content:'';display:table;}@media (max-width:770px){.css-11t2ec1{display:none;}}.css-1dvr2p8{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-18lkoru{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;background-color:#FFFFFF;}.css-1g4cku8{display:inline-block;vertical-align:middle;height:20px;width:20px;fill:#55C500;}.css-1iupg5d{color:#55C500;cursor:pointer;font-size:14px;font-weight:bold;}.css-ijvq0v{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-15cocm3{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#FFFFFF;border:2px solid #6E6F70;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:2px 0px 0px;width:40px;}.css-12rp90f{display:inline-block;vertical-align:bottom;height:17.77777777777778px;width:16px;fill:#6E6F70;}.css-115f4t{color:#6E6F70;font-size:14px;font-weight:bold;}.css-1b8uj5v{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;margin-bottom:16px;padding:0;}.css-79elbk{position:relative;}.css-16hhh7b{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;padding:0;}.css-fcbn8c{display:none;bottom:initial;left:initial;right:initial;top:initial;left:100%;top:calc(-8px - (14px * 1.8) - 16px - 4px);}.css-1gj7nt{color:rgba(0,0,0,0.6);font-size:14px;font-weight:bold;line-height:1.8;padding:8px 16px;}.css-154zy0m{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.87);cursor:pointer;font-size:16px;font-weight:normal;line-height:1.8;padding:4px 16px;}.css-154zy0m:hover{-webkit-text-decoration:none;text-decoration:none;background-color:#F2F2F2;}.css-yikrym{width:20px;}.css-1jqivyb{color:rgba(0,0,0,0.6);font-size:13px;}.css-1ode1bp{background-color:rgba(0,0,0,0.12);height:1px;width:100%;margin:8px 0;}.css-le4d8r{display:inline-block;vertical-align:middle;height:13px;width:13px;fill:rgba(0,0,0,0.6);}.css-1hbd3g7{height:250px;}.css-helsa7{background-color:#FFFFFF;padding:32px;margin-bottom:24px;}@media (max-width:992px){.css-helsa7{margin:0 auto 40px;}}@media (max-width:480px){.css-helsa7{margin:0 0 40px;padding:32px 16px;}}.css-8qb8m4{margin-bottom:48px;}.css-2imjyh{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-he5w1s{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;width:100%;}@media (max-width:770px){.css-he5w1s{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}}.css-70qvj9{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.css-3ojehk{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;margin-right:4px;}.css-100alwu{display:inline-block;border-radius:50%;line-height:1;overflow:hidden;vertical-align:middle;}.css-1dtnjt5{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-10ougpm{color:rgba(0,0,0,0.87);font-size:14px;font-weight:600;line-height:1.8;margin-right:4px;text-wrap:break-word;word-break:break-all;}.css-1ay9vb9{margin-right:16px;}.css-m19uds{color:rgba(0,0,0,0.6);font-size:14px;line-height:1.8;}.css-cgzq40{color:rgba(0,0,0,0.87);font-size:32px;font-weight:bold;line-height:1.4;margin-top:8px;text-wrap:break-word;word-break:break-all;}.css-1wa99t2{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.6);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:8px;}.css-1l3zk9f{color:rgba(0,0,0,0.6);font-size:20px;margin-right:8px;}.css-4czcte{margin-right:4px;color:inherit;font-size:14px;line-height:1.8;}.css-4czcte:not(:last-child)::after{content:',';margin-right:4px;}.css-1yzj1fm{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:32px;}.css-1uv1qiv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-size:20px;height:32px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin-right:16px;outline:none;padding:0;width:32px;}.css-109dbrr{background-color:#F9F9F9;border-top:1px solid rgba(0,0,0,0.12);bottom:0;box-shadow:0px 1px 4px rgba(0,0,0,0.14);display:none;height:calc(env(safe-area-inset-bottom,0px) + 56px);-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding-bottom:env(safe-area-inset-bottom);position:-webkit-sticky;position:sticky;width:100%;z-index:2000;}@media (max-width:770px){.css-109dbrr{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}.css-5jpx49{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:space-evenly;-webkit-justify-content:space-evenly;-ms-flex-pack:space-evenly;justify-content:space-evenly;width:100%;}.css-mnxgyc{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1vlpknv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;margin-right:4px;background-color:#FFFFFF;}.css-fsjkhv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1b17vb0{color:#6E6F70;font-size:14px;font-weight:bold;margin-left:4px;}.css-7i7f4d{display:none;bottom:initial;left:initial;right:initial;top:initial;bottom:32px;right:0;}</style></head><body><div class="allWrapper"><div><div id="GlobalHeader-react-component-43a82515-fc0e-472f-b675-62c6caf61393"><div class="st-Header"><div class="st-Header_container"><div class="st-Header_start"><a href="/" class="st-Header_logo"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 426.57 130"><circle cx="167.08" cy="21.4" r="12.28"></circle><path d="M250.81 29.66h23.48v18.9h-23.48z"></path><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z"></path><circle cx="216.33" cy="21.4" r="12.28"></circle></svg></a><div class="st-Header_communitySelector" tabindex="0"><span class="fa fa-caret-down"></span></div><div class="st-Header_dropdown"><div class="st-Header_dropdownHeading">Qiita Teams that are logged in</div><div class="st-Header_dropdownItemNote">You are not logged in to any team</div><hr class="st-Header_dropdownDivider st-Header_dropdownDivider-shrink"/><a href="https://teams-center.qiita.com/find_team" class="st-Header_dropdownItem"><span class="fa fa-fw fa-sign-in st-Header_dropdownItemIcon"></span><div>Log in to Qiita Team</div></a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Community</div><a href="/organizations" class="st-Header_dropdownItem">Organization</a><a href="/official-events/open" class="st-Header_dropdownItem">Event</a><a href="/advent-calendar" class="st-Header_dropdownItem">Advent Calendar</a><a href="https://qiitadon.com/" class="st-Header_dropdownItem" target="_blank">Qiitadon (β)</a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Service</div><a href="https://jobs.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Jobs</a><a href="https://zine.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Zine</a><a href="https://blog.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Blog</a></div><form class="st-Header_search" action="/search" method="get"><span class="fa fa-search st-Header_searchIcon"></span><input type="search" class="st-Header_searchInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form><form class="st-Header_searchModal" action="/search" method="get"><input type="text" class="st-Header_searchModalInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form></div><div class="st-Header_end"><div class="st-Header_searchButton"><span class="fa fa-search"></span></div><a class="st-Header_signupButton" href="/signup?redirect_to=%2FNAVE%2Fitems%2F124d6a9e7a4e2cdb580b">Signup</a><a class="st-Header_loginLink" href="/login?redirect_to=%2FNAVE%2Fitems%2F124d6a9e7a4e2cdb580b">Login</a></div><div class="st-Header_overlay"></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="GlobalHeader" data-dom-id="GlobalHeader-react-component-43a82515-fc0e-472f-b675-62c6caf61393">{"unreadNotificationsCount":null,"realms":[{"humanName":"Qiita","isCurrentRealm":true,"isQiita":true,"isQiitaTeam":false,"loggedInUser":null,"teamId":null,"url":"https://qiita.com/"}],"teamFindUrl":"https://teams-center.qiita.com/find_team","isTeamOnlyUser":null,"currentUser":null}</script>
      
</div><div class="st-HeaderAlert st-HeaderAlert-warning"><div class="st-HeaderAlert_body"></div></div><script type="application/ld+json">{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"/","name":"Qiita"}},{"@type":"ListItem","position":2,"item":{"@id":"/tags/csharp","name":"C#"}}]}</script><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","datePublished":"2020-12-06T11:50:46.000+09:00","dateModified":"2021-01-09T11:59:46.000+09:00","headline":"Blazor Tutorialまとめ(EP06～09)","image":"https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0\u0026w=1200\u0026mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND1RbXhoZW05eUlGUjFkRzl5YVdGczQ0Ry00NEdvNDRLQktFVlFNRGJ2dlo0d09TayZ0eHQtY29sb3I9JTIzMzMzJnR4dC1mb250PUhpcmFnaW5vJTIwU2FucyUyMFc2JnR4dC1zaXplPTU0JnR4dC1jbGlwPWVsbGlwc2lzJnR4dC1hbGlnbj1jZW50ZXIlMkNtaWRkbGUmcz0zYjQwYTc0YTJlYTBjNDJmZTFhNmY0NzhjMTQ4ZDA1MQ\u0026mark-align=center%2Cmiddle\u0026blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RRTVCVmtVJnR4dC1jb2xvcj0lMjMzMzMmdHh0LWZvbnQ9SGlyYWdpbm8lMjBTYW5zJTIwVzYmdHh0LXNpemU9NDUmdHh0LWFsaWduPXJpZ2h0JTJDYm90dG9tJnM9NjMxYmI4ZjczYWI4NTYwOGQ1MGViYmQ0NjFhYjY5MWU\u0026blend-align=center%2Cmiddle\u0026blend-mode=normal\u0026s=c9e0b12379dc26d13e4dcf58d479814d","mainEntityOfPage":"https://qiita.com/NAVE/items/124d6a9e7a4e2cdb580b","author":{"@type":"Person","address":"","email":null,"identifier":"NAVE","name":"NAVE","image":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F65842%2Fprofile-images%2F1473697011?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=145fb26db3907978141d316a5648c29e","url":"https://qiita.com/NAVE","description":"","memberOf":[]},"publisher":{"@type":"Organization","name":"Qiita","logo":{"@type":"ImageObject","url":"//cdn.qiita.com/assets/public/qiita-logo-c39ded593afa388e2e1ba435b110554e.png"}}}</script><style type="text/css">.wb-CampaignLink {
  background-color: #333333;
  width: 100%;
}

.wb-CampaignLink_container {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  max-width: 1100px;
  margin: 0 auto;
  font-size: 13px;
  padding: 0.8em;
}
.wb-CampaignLink_container > a {
  color: #fff;
}

.wb-CampaignLink_container > a:hover {
  text-decoration: underline;
}</style><div class="wb-CampaignLink"><div class="wb-CampaignLink_container"><a target="_blank" id="header_text_message_1" href="https://zine.qiita.com/interview/202107-line-growth-technology/?utm_source=qiita&amp;utm_medium=header-banner">LINEグループの成長を担うLINE Growth Technologyのこれまでとこれから</a><a target="_blank" id="header_text_message_2" href="https://zine.qiita.com/interview/202107-line-growth-technology/?utm_source=qiita&amp;utm_medium=header-banner">詳しくはこちら</a></div><script>td.trackEvent(
  'front_events',
  {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"NAVE","type":"items","id":"124d6a9e7a4e2cdb580b"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Show","data":{"message":"LINEグループの成長を担うLINE Growth Technologyのこれまでとこれから","url":"https://zine.qiita.com/interview/202107-line-growth-technology/?utm_source=qiita\u0026utm_medium=header-banner","sub_message":"詳しくはこちら"}}
)</script><script>document.getElementById('header_text_message_1').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"NAVE","type":"items","id":"124d6a9e7a4e2cdb580b"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":1,"pos_id":"header_text_message_1","message":"LINEグループの成長を担うLINE Growth Technologyのこれまでとこれから","url":"https://zine.qiita.com/interview/202107-line-growth-technology/?utm_source=qiita\u0026utm_medium=header-banner","sub_message":"詳しくはこちら"}}
  )
})</script><script>document.getElementById('header_text_message_2').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"NAVE","type":"items","id":"124d6a9e7a4e2cdb580b"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":1,"pos_id":"header_text_message_2","message":"LINEグループの成長を担うLINE Growth Technologyのこれまでとこれから","url":"https://zine.qiita.com/interview/202107-line-growth-technology/?utm_source=qiita\u0026utm_medium=header-banner","sub_message":"詳しくはこちら"}}
  )
})</script></div><script type="application/json" id="js-react-on-rails-context">{"railsEnv":"production","inMailer":false,"i18nLocale":"en","i18nDefaultLocale":"en","href":"https://qiita.com/NAVE/items/124d6a9e7a4e2cdb580b","location":"/NAVE/items/124d6a9e7a4e2cdb580b","scheme":"https","host":"qiita.com","port":null,"pathname":"/NAVE/items/124d6a9e7a4e2cdb580b","search":null,"httpAcceptLanguage":null,"actionPath":"public/items#show","settings":{"analyticsTrackingId":"UA-24675221-12","assetsMap":{},"csrfToken":"zYFb7ShI0fAzLc03Nt9YK2KaLM0lAlRWeb0OCsUHhWa35oqYJbRQxR3//QnMLw0i51YsN24sLBBxZYHtqQtIog==","locale":"en"},"currentUser":null,"isLoggedIn":false,"recaptchaSiteKey":"6LfNkiQTAAAAAM3UGnSquBy2akTITGNMO_QDxMw6","serverSide":false}</script>
<div id="PersonalArticlePage-react-component-0f8d0218-4e55-47f5-8ed6-250d32bc8813"><div class="p-items_wrapper"><div class=" css-17jxvjw"><div class="css-11t2ec1"><div class="css-1dvr2p8"><button class=" css-18lkoru"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/NAVE/items/124d6a9e7a4e2cdb580b/likers" class="css-1iupg5d">0</a></div><div class="css-ijvq0v"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-115f4t">0</span></div><div class="css-1b8uj5v"><span class="fa fa-twitter"></span></div><div class="css-1b8uj5v"><span class="fa fa-facebook"></span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-fcbn8c"><div class="css-1gj7nt">Improve article</div><a href="/drafts/124d6a9e7a4e2cdb580b/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/NAVE/items/124d6a9e7a4e2cdb580b/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/NAVE/items/124d6a9e7a4e2cdb580b/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/NAVE/items/124d6a9e7a4e2cdb580b/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/NAVE/items/124d6a9e7a4e2cdb580b.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div><div class="p-items_options"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_toc"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_main"><div class="css-helsa7"><div class="css-8qb8m4"><div class="css-2imjyh"><div class="css-he5w1s"><div class="css-70qvj9"><div class="css-3ojehk"><a href="/NAVE"><img class="css-100alwu eyfquo10" src="https://qiita-image-store.s3.amazonaws.com/0/65842/profile-images/1473697011" width="24" height="24" loading="lazy"/></a></div><div class="css-1dtnjt5"><a href="/NAVE" class="css-10ougpm">@<!-- -->NAVE</a><div class="css-1ay9vb9"><span><meta content="2020-12-06T02:50:46Z"/><time dateTime="2021-01-09T02:59:46Z" class="css-m19uds">updated at 2021-01-09</time></span></div></div></div></div></div><h1 class="css-cgzq40">Blazor Tutorialまとめ(EP06～09)</h1><div class="css-1wa99t2"><span class="fa fa-tags mr-1of2 css-1l3zk9f" aria-hidden="true"></span><a href="/tags/csharp" class="css-4czcte">C#</a><a href="/tags/razor" class="css-4czcte">Razor</a><a href="/tags/blazor" class="css-4czcte">Blazor</a></div></div><section class="it-MdContent"><div id="personal-public-article-body"><div><p><a href="https://www.youtube.com/watch?v=xr56fmgLl74&amp;list=PL4WEkbdagHIR0RBe_P4bai64UDqZEbQap" rel="nofollow noopener" target="_blank">本家動画はこちら</a><br>
<a href="https://qiita.com/NAVE/items/1e9d44ea2c0b43dcd9b7" id="reference-2c4b4e5c2b72ce26e9e6">EP01～05はこちら</a><br>
<a href="https://qiita.com/NAVE/items/e3831c73adaaf56211e2" id="reference-c860b9b0a6f12ba28728">番外×2 + EP10～はこちら</a></p>

<h1>
<span id="ep06javascriptとの相互運用" class="fragment"></span><a href="#ep06javascript%E3%81%A8%E3%81%AE%E7%9B%B8%E4%BA%92%E9%81%8B%E7%94%A8"><i class="fa fa-link"></i></a>EP06:JavaScriptとの相互運用</h1>

<ul>
<li>razorページでJavaScriptを使うには、まずは<code>@inject IJSRuntime JSRuntime;</code>を追加する必要があるよ。</li>
<li>jsフォルダ内の「<strong>site.js</strong>」を追加して、同ファイルに以下の関数を追加したのでそれを呼んでみよう。</li>
</ul>

<div class="code-frame" data-lang="javascript"><div class="highlight"><pre class="with-code"><code><span class="kd">function</span> <span class="nx">saveMessage</span><span class="p">(){</span>
    <span class="nx">alert</span><span class="p">(</span><span class="dl">'</span><span class="s1">レコードの保存が完了しました。</span><span class="dl">'</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<ul>
<li>「<strong>_Host.cshtml</strong>」の <code>blazor.server.js</code> の下に <code>&lt;script src="~/js/site.js"&gt;&lt;/script&gt;</code> を追加しよう。</li>
<li>Saveボタン押下時の処理(SaveAuthorメソッド)に追加したいので、同メソッドに <code>await JSRuntime.InvokeVoidAsync("saveMessage");</code> を追加しよう。</li>
<li>あとこの関数は非同期なので予備元のSaveAuthorメソッドも<code>private async Task SaveAuthor()</code>としておこう。</li>
<li>この手のテストは検証があると面倒なので<code>@*&lt;DataAnnotationsValidator /&gt;*@</code> と <code>@* *@</code> で括って検証を無効にしておこう。</li>
<li>動かしてみるとちゃんとダイアログが表示されたね。</li>
<li>それじゃ次にJavaScriptに引数を渡してみよう。まずはJavaScriptに引数を足すよ。</li>
</ul>

<div class="code-frame" data-lang="javascript"><div class="highlight"><pre class="with-code"><code><span class="kd">function</span> <span class="nx">saveMessage</span><span class="p">(</span><span class="nx">firstName</span><span class="p">,</span> <span class="nx">lastName</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">alert</span><span class="p">(</span><span class="nx">firstName</span> <span class="o">+</span> <span class="dl">"</span><span class="s2"> </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">lastName</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">のレコードの保存が完了しました。</span><span class="dl">'</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<ul>
<li>次に<code>InvokeVoidAsync</code>にも引数を足すよ。<code>InvokeVoidAsync</code>は可変個数の引数を指定できるよ。</li>
</ul>

<div class="code-frame" data-lang="c#"><div class="highlight"><pre class="with-code"><code><span class="k">await</span> <span class="n">JSRuntime</span><span class="p">.</span><span class="nf">InvokeVoidAsync</span><span class="p">(</span><span class="s">"saveMessage"</span><span class="p">,</span> <span class="n">author</span><span class="p">.</span><span class="n">FirstName</span><span class="p">,</span> <span class="n">author</span><span class="p">.</span><span class="n">LastName</span><span class="p">);</span>
</code></pre></div></div>

<p>(動画じゃauthor.FirstName, author.LastNameを渡さずに、直接一回変数に入れてるけどなんか意味あるんかな？)</p>

<ul>
<li>続いてJavaScriptでDOMを操作してみよう。まずはJavaScriptを修正するよ。</li>
</ul>

<div class="code-frame" data-lang="javascript"><div class="highlight"><pre class="with-code"><code><span class="kd">function</span> <span class="nx">saveMessage</span><span class="p">(</span><span class="nx">firstName</span><span class="p">,</span> <span class="nx">lastName</span><span class="p">)</span> <span class="p">{</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">divServiceValidations</span><span class="dl">'</span><span class="p">).</span><span class="nx">innerText</span> <span class="o">=</span> <span class="nx">firstName</span> <span class="o">+</span> <span class="dl">"</span><span class="s2"> </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">lastName</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">のレコードの保存が完了しました。</span><span class="dl">'</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>(ローカルで動かしてたら「<strong>innerTest</strong>」ってタイポしてて動かんかった・・・VisualStudioならTypeScript簡単に使えるし(必要なものはNugetで勝手にとってきてくれる)トランスパイルの時にエラー出してくれるTypeScript使おう。型もあるしほぼ書き方変わらんし)</p>

<div class="code-frame" data-lang="typescript"><div class="highlight"><pre class="with-code"><code><span class="kd">function</span> <span class="nx">saveMessage</span><span class="p">(</span><span class="nx">firstName</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="nx">lastName</span><span class="p">:</span> <span class="kr">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">divServiceValidations</span><span class="dl">'</span><span class="p">).</span><span class="nx">innerText</span> <span class="o">=</span> <span class="nx">firstName</span> <span class="o">+</span> <span class="dl">"</span><span class="s2"> </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">lastName</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">のレコードの保存が完了しました。</span><span class="dl">'</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<ul>
<li>操作対象の<code>&lt;div id="divServiceValidations" class="col-10 alert alert-info"&gt;&lt;/div&gt;</code>を「<strong>Authors.razor</strong>」の<code>&lt;EditForm&gt;</code>の前に追加するよ。</li>
<li>動かしてみるとメッセージが追加した<code>&lt;div id="divServiceValidations"&gt;</code>に表示されるね。</li>
<li>次は「<strong>Save</strong>」を押すと「<strong>first name</strong>」にフォーカスが映るようにしてみよう。</li>
<li>まずは<code>@ref</code>属性を「<strong>first name</strong>」の<code>&lt;InputText&gt;</code>に追加するよ。</li>
</ul>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>&lt;InputText @ref="firstnameText" class="form-control col-3" @bind-Value="author.FirstName" placeholder="first name" /&gt;
</code></pre></div></div>

<ul>
<li>続いてコード部に<code>ElementReference firstnameText;</code>を追加するよ。</li>
<li>ここで一旦コンパイルしてみよう。コンポーネントを変換できない、みたいなエラーが出るね。</li>
<li>
<code>@ref</code>はRazorコンポーネントには指定できないので、<code>&lt;InputText&gt;</code>を<code>&lt;input&gt;</code>に変えてやる必要があるよ。</li>
<li>
<code>@bind-Value</code>も<code>@bind</code>に変える必要があるので以下のようになるよ。</li>
</ul>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>&lt;input @ref="firstnameText" class="form-control col-3" @bind="author.FirstName" placeholder="first name" /&gt;
</code></pre></div></div>

<p>(<code>ElementReference firstnameText;</code>だとエラーになるけど<code>InputText firstnameText;</code>だとエラーにならんな。この辺は型チェックしてるってことか)</p>

<ul>
<li>それじゃフォーカスをセットするスクリプトを書いて、</li>
</ul>

<div class="code-frame" data-lang="typescript"><div class="highlight"><pre class="with-code"><code><span class="kd">function</span> <span class="nx">setFocusOnElement</span><span class="p">(</span><span class="nx">element</span><span class="p">:</span> <span class="nx">HTMLElement</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">element</span><span class="p">.</span><span class="nx">focus</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div></div>

<p>(動画ではJavaScriptだからもちろん「: HTMLElement」は無いよ)</p>

<ul>
<li>あとはメッセージ表示の時と同じように関数を呼ぶだけだよ。動かしてみるとちゃんとフォーカスが移動してるね。</li>
</ul>

<div class="code-frame" data-lang="c#"><div class="highlight"><pre class="with-code"><code><span class="k">await</span> <span class="n">JSRuntime</span><span class="p">.</span><span class="nf">InvokeVoidAsync</span><span class="p">(</span><span class="s">"setFocusOnElement"</span><span class="p">,</span> <span class="n">firstnameText</span><span class="p">);</span>
</code></pre></div></div>

<p>(一々JS使わんといかんの面倒だな。WebForm時代みたいにSetFocus関数呼ぶだけ、とかにならんかなぁ・・・。以下みたいな感じ)</p>

<div class="code-frame" data-lang="c#"><div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="n">InputText</span> <span class="n">lastnameText</span><span class="p">;</span>
<span class="k">private</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">SaveAuthor</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">lastnameText</span><span class="p">.</span><span class="nf">SetFocus</span><span class="p">();</span><span class="c1">//今のところそんなメソッドはない。</span>
<span class="p">}</span>
</code></pre></div></div>

<p>(ID指定すればInputTextのままでもいけるな)</p>

<div class="code-frame" data-lang="html"><div class="highlight"><pre class="with-code"><code><span class="nt">&lt;InputText</span> <span class="na">id=</span><span class="s">"firstnameText"</span> <span class="err">@</span><span class="na">ref=</span><span class="s">"firstnameText"</span> <span class="na">class=</span><span class="s">"form-control col-3"</span> <span class="err">@</span><span class="na">bind-Value=</span><span class="s">"author.FirstName"</span> <span class="na">placeholder=</span><span class="s">"first name"</span> <span class="nt">/&gt;</span>
</code></pre></div></div>

<div class="code-frame" data-lang="c#"><div class="highlight"><pre class="with-code"><code><span class="n">@code</span> <span class="p">{</span>
    <span class="k">public</span> <span class="n">InputText</span> <span class="n">lastnameText</span><span class="p">;</span>

    <span class="k">private</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">SaveAuthor</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">await</span> <span class="n">JSRuntime</span><span class="p">.</span><span class="nf">InvokeVoidAsync</span><span class="p">(</span><span class="s">"setFocusOnID"</span><span class="p">,</span> <span class="n">lastnameText</span><span class="p">.</span><span class="n">AdditionalAttributes</span><span class="p">[</span><span class="s">"id"</span><span class="p">]);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="code-frame" data-lang="typescript"><div class="highlight"><pre class="with-code"><code><span class="kd">function</span> <span class="nx">setFocusOnID</span><span class="p">(</span><span class="nx">element</span><span class="p">:</span> <span class="kr">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="nx">element</span><span class="p">).</span><span class="nx">focus</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div></div>

<ul>
<li>次はJavaScriptからとった配列でリストボックスの一覧を初期化してみよう。JavaScriptは以下のようなのだよ。</li>
</ul>

<div class="code-frame" data-lang="typescript"><div class="highlight"><pre class="with-code"><code><span class="kd">function</span> <span class="nx">getCities</span><span class="p">():</span> <span class="kr">string</span><span class="p">[]</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">cities</span><span class="p">:</span> <span class="kr">string</span><span class="p">[]</span> <span class="o">=</span> <span class="p">[</span><span class="dl">'</span><span class="s1">New York</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Los Angeles</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Chicago</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Houston</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Phoenix</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Philadelphia</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">San Antonio</span><span class="dl">'</span><span class="p">,</span>
        <span class="dl">'</span><span class="s1">San Diego</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Dallas</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">San Jose</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Austin</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Jacksonville</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Fort Worth</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Columbus</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">San Francisco</span><span class="dl">'</span><span class="p">,</span>
        <span class="dl">'</span><span class="s1">Charlotte</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Indianapolis</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Seattle</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Denver</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Washington</span><span class="dl">'</span><span class="p">];</span>
    <span class="k">return</span> <span class="nx">cities</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>(動画では(ry)</p>

<ul>
<li>あとは<code>string[] Cities</code>プロパティを追加して、描画後に実行される「<strong>OnAfterRenderAsync</strong>」に初回かつ<code>Cities</code>がnullの時にJavaScriptから値を取ってきて <code>StateHasChanged();</code>で反映させるよ。</li>
<li>コード見ればわかるけど、戻り値なしのときは<code>InvokeVoidAsync</code>、戻り値ありの時は<code>InvokeAsync&lt;TValue&gt;</code>でTValueに型を指定するんだね。</li>
</ul>

<div class="code-frame" data-lang="c#"><div class="highlight"><pre class="with-code"><code><span class="k">protected</span> <span class="k">override</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">OnAfterRenderAsync</span><span class="p">(</span><span class="kt">bool</span> <span class="n">firstRender</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">firstRender</span> <span class="p">&amp;&amp;</span> <span class="n">Cities</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">Cities</span> <span class="p">=</span> <span class="k">await</span> <span class="n">JSRuntime</span><span class="p">.</span><span class="n">InvokeAsync</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">[</span><span class="k">]&gt;</span><span class="p">(</span><span class="s">"getCities"</span><span class="p">);</span>
        <span class="nf">StateHasChanged</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<ul>
<li>あとはforeachでoption追加を回せば追加されるね。</li>
</ul>

<div class="code-frame" data-lang="html"><div class="highlight"><pre class="with-code"><code><span class="nt">&lt;select</span> <span class="na">class=</span><span class="s">"form-control col-3"</span><span class="nt">&gt;</span>
    @if (@Cities != null){
        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">""</span><span class="nt">&gt;</span>select city..<span class="nt">&lt;/option&gt;</span>
        @foreach (var city in Cities){
            <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"@city"</span><span class="nt">&gt;</span>@city<span class="nt">&lt;/option&gt;</span>
        }
    }
<span class="nt">&lt;/select&gt;</span>
</code></pre></div></div>

<p>(実アプリじゃあんまり使わないパターンかなぁ。選択とかEnumとか固定配列とかDBからとるパターンしか使わなそう)</p>

<h1>
<span id="ep07razorコンポーネントの再利用" class="fragment"></span><a href="#ep07razor%E3%82%B3%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%8D%E3%83%B3%E3%83%88%E3%81%AE%E5%86%8D%E5%88%A9%E7%94%A8"><i class="fa fa-link"></i></a>EP07:Razorコンポーネントの再利用</h1>

<ul>
<li>今回はRazorコンポーネントの再利用について話すよ。</li>
<li>Razorコンポーネントは2種類あって、一つ目は「<strong>ページ</strong>」。</li>
<li>今までにも出てきた頭に<code>@page</code>って書いてあるやつだね。ブラウザからこれらのコンポーネントに移動してWebページとして利用できるよ。</li>
<li>もう一つは共有可能なコンポーネントでページに組み込んで利用できるよ。今回はこの共有可能なコンポーネントの話だよ。</li>
<li>さて、今まで「著者(Author)の名前とかの情報を入力して保存する」っていうページを作ってきたけど、これと似たようなので「出版社(Publisher)の名前とかの情報を入力して保存する」というのを作ったよ。</li>
<li>ここでコードを見てみるとどっちのページにも<code>&lt;div id="divServerValidations"&gt;</code>っていうタグがあるね。</li>
<li>いわゆる<a href="https://ja.wikipedia.org/wiki/%E9%87%8D%E8%A4%87%E3%82%B3%E3%83%BC%E3%83%89" rel="nofollow noopener" target="_blank">重複コード</a>だけど、Razorコンポーネントの再利用をすると、こういうのことが起きないようにできるよ。</li>
<li>では早速ソリューションエクスプローラ右クリックからRazorコンポーネントを追加してみよう。名前は「<strong>ServerValidations.razor</strong>」にしよう。</li>
<li>とりあえずここには<code>&lt;div id="divServerValidations"&gt;</code>とメッセージだけを追加してみよう。</li>
</ul>

<div class="code-frame" data-lang="html">
<div class="code-lang"><span class="bold">ServerValidations.razor</span></div>
<div class="highlight"><pre class="with-code"><code><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"divServiceValidations"</span> <span class="na">class=</span><span class="s">"col-10 alert alert-info"</span><span class="nt">&gt;</span>
    保存完了
<span class="nt">&lt;/div&gt;</span>
@code {
}
</code></pre></div>
</div>

<ul>
<li>呼び出すのは簡単で<code>&lt;ServerValidations&gt;&lt;/ServerValidations&gt;</code>って書くだけだよ。実行してみるとちゃんとページに組み込まれてるのがわかるね。</li>
<li>それじゃ次はパラメーターでメッセージの表示/非表示を切り変えてみよう。コンポーネント側(子)はこんな感じでパラメーターを追加できるよ。</li>
</ul>

<div class="code-frame" data-lang="html">
<div class="code-lang"><span class="bold">ServerValidations.razor</span></div>
<div class="highlight"><pre class="with-code"><code>@if (IsVisible) {
    <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"divServiceValidations"</span> <span class="na">class=</span><span class="s">"col-10 alert alert-info"</span><span class="nt">&gt;</span>
        保存完了
    <span class="nt">&lt;/div&gt;</span>
}

@code {
    [Parameter]
    public bool IsVisible { get; set; }
}
</code></pre></div>
</div>

<ul>
<li>呼び出し側(親)でも変数を宣言して、コンポーネントのタグにプロパティとの対応を書いてあげるよ。</li>
</ul>

<div class="code-frame" data-lang="html">
<div class="code-lang"><span class="bold">Author.razor</span></div>
<div class="highlight"><pre class="with-code"><code>@page "/authors"
<span class="nt">&lt;ServerValidations</span> <span class="na">IsVisible=</span><span class="s">"IsVisible"</span><span class="nt">&gt;&lt;/ServerValidations&gt;</span>

@code {
    public bool IsVisible { get; set; }

    private async Task SaveAuthor() {
        IsVisible = true;
(以下略)
</code></pre></div>
</div>

<ul>
<li>動かしてみると、ちゃんと「<strong>Save</strong>」ボタンを押したら<code>&lt;div id="divServiceValidations"&gt;</code>の内容が表示されるね。</li>
<li>今度は「親の方で書いたHTMLを子の方に表示させる」というのをやってみよう。</li>
<li>まず「<strong>ServerValidations.razor</strong>」の方は<code>RenderFragment</code>型のプロパティを追加してHTML部に表示させるよ。</li>
</ul>

<div class="code-frame" data-lang="html">
<div class="code-lang"><span class="bold">ServerValidations.razor</span></div>
<div class="highlight"><pre class="with-code"><code>@if (IsVisible)
{
    <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"divServiceValidations"</span> <span class="na">class=</span><span class="s">"col-10 alert alert-info"</span><span class="nt">&gt;</span>
        @ChildContent : 保存完了
    <span class="nt">&lt;/div&gt;</span>
}

@code {
    [Parameter]
    public bool IsVisible { get; set; }

    [Parameter]
    public RenderFragment ChildContent { get;  set; }
}
</code></pre></div>
</div>

<ul>
<li>呼び出し側(親)の方は<code>&lt;ServerValidations&gt;</code>のタグの中に「<strong>ServerValidations.razor</strong>」の<code>@ClildContent</code>で表示したいものを書くよ。HTMLとかも書けるよ。</li>
</ul>

<p>(<del>なんかわからんけど↓のコードだと実行エラーになる・・・</del>)<br>
→「<strong>ServerValidations.razor</strong>」の<code>ChildContent</code>を<code>ClildContent</code>って打ってたのが原因だった。このプロパティ名って固定なのな。</p>

<div class="code-frame" data-lang="html">
<div class="code-lang"><span class="bold">Author.razor</span></div>
<div class="highlight"><pre class="with-code"><code>@page "/authors"
<span class="nt">&lt;ServerValidations</span> <span class="na">IsVisible=</span><span class="s">"IsVisible"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;span&gt;</span>著者：<span class="nt">&lt;/span&gt;</span>@RecordName 
<span class="nt">&lt;/ServerValidations&gt;</span>

@code {
    public bool IsVisible { get; set; }
    public string RecordName { get; set; }

    private async Task SaveAuthor() {
        IsVisible = true;
        RecordName = author.FirstName + " " + author.LastName;
(以下略)
</code></pre></div>
</div>

<ul>
<li>動かしてみると呼び出し側(親)の方で<code>&lt;ServerValidations&gt;</code>のタグの中に書いた内容がコンポーネント側(子)の方に表示されテルルがわかるね。</li>
<li>パラメータに<code>bool Result</code>とかを足してやればエラー表示もできるね。</li>
</ul>

<p>(動画では styleとか指定してるけど省略)</p>

<div class="code-frame" data-lang="html"><div class="highlight"><pre class="with-code"><code>@if (IsVisible)
{
    @if (Result){
        <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"divServiceValidations"</span> <span class="na">class=</span><span class="s">"col-10 alert alert-info"</span><span class="nt">&gt;</span>
            @ChildContent  保存完了
        <span class="nt">&lt;/div&gt;</span>
    }else{
        <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"divServiceValidations"</span> <span class="na">class=</span><span class="s">"col-10 alert alert-danger"</span><span class="nt">&gt;</span>
            サーバーエラーです。管理者に問い合わせてください。
        <span class="nt">&lt;/div&gt;</span>
    }
}

@code {
    [Parameter]
    public bool IsVisible { get; set; }

    [Parameter]
    public bool Result { get; set; }

    [Parameter]
    public RenderFragment ChildContent { get; set; }
}
</code></pre></div></div>

<ul>
<li>あとこのメッセージを×で閉じれるようにしてみよう。ページと同じようにイベントを記述できるよ。</li>
</ul>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>@if (IsVisible){
    @if (Result){
        &lt;div id="divValidationMessage" class="col-10 alert alert-danger row"&gt;
            &lt;div class="col-11" style="text-align:left"&gt;
                @ChildContent  保存完了
            &lt;/div&gt;
            &lt;div class="col-1" style="text-align:right"&gt;
                &lt;a style="text-underline-position:below; cursor:pointer" @onclick="CloseValidation"&gt;x&lt;/a&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    }else{
        &lt;div id="divValidationMessage" class="col-10 alert alert-danger row"&gt;
            &lt;div class="col-11" style="text-align:left"&gt;
                サーバーエラーです。管理者に問い合わせてください。
            &lt;/div&gt;
            &lt;div class="col-1" style="text-align:right"&gt;
                &lt;a style="text-underline-position:below; cursor:pointer" @onclick="CloseValidation"&gt;x&lt;/a&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    }
}

@code {
    [Parameter]
    public bool IsVisible { get; set; }

    [Parameter]
    public bool Result { get; set; }

    [Parameter]
    public RenderFragment ChildContent { get; set; }

    public void CloseValidation(){
        IsVisible = false;
    }
}
</code></pre></div></div>

<p>(そういやこれ、タグに全部プロパティを一個一個書くより<code>@ref</code>使ったほうがいいな)<br>
(<code>IsVisible</code>とかの<code>[Parameter]</code>は消さないと「パラメータ指定してねーぞ」って警告が出た)</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>(略)
&lt;ServerValidations @ref="ServerValidationsCtrl"&gt;
    &lt;span&gt;著者：@RecordName&lt;/span&gt;
&lt;/ServerValidations&gt;
(中略)
@code {
    public ServerValidations ServerValidationsCtrl;

    public void SaveAuthor(){
        RecordName = author.FirstName + " " + author.LastName;
        ServerValidationsCtrl.IsVisible = true;
        ServerValidationsCtrl.Result = false;
    }
(略)
</code></pre></div></div>

<ul>
<li>実際に再利用してみよう。簡単だね。</li>
</ul>

<h1>
<span id="ep08razorコンポーネントのライフサイクル" class="fragment"></span><a href="#ep08razor%E3%82%B3%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%8D%E3%83%B3%E3%83%88%E3%81%AE%E3%83%A9%E3%82%A4%E3%83%95%E3%82%B5%E3%82%A4%E3%82%AF%E3%83%AB"><i class="fa fa-link"></i></a>EP08:Razorコンポーネントのライフサイクル</h1>

<ul>
<li><p>今回はRazorコンポーネントのライフサイクルについて話すよ。<br>
(この章、自動翻訳が微妙過ぎて何言ってんのかわからん・・・、他のWebサイトも含めてまとめていこ)<br>
<a href="https://blog.piyosi.com/entry/2019/10/01/190532" rel="nofollow noopener" target="_blank">BlazorのLifecycleとShouldRenderの挙動について</a><br>
<a href="https://github.com/dotnet/AspNetCore.Docs.ja-jp/blob/live/aspnetcore/blazor/components/lifecycle.md" rel="nofollow noopener" target="_blank">AspNetCore.Docs.ja-jp - lifecycle.md/GitHub</a></p></li>
<li><p>初期化イベントだけど次の順で発生するよ</p></li>
<li><p><code>OnInitialized</code> <code>OnInitializedAsync</code>：アプリの設定とかタイトルとか設定するといいね。<code>OnInitializedAsync</code>は非同期だからDB読んだりしてもいいね。</p></li>
<li><p><code>SetParametersAsync</code>(動画では言ってないけど↑にあったので追加)Razorコンポーネントにパラメーターがセットされる前に呼ばれるよ。渡されたパラメーターのチェックができるね。セットされたプロパティの値は<code>parameters.GetValueOrDefault&lt;プロパティの型&gt;("プロパティ名")</code>で取れるよ。<code>await base.SetParametersAsync(parameters);</code>を呼ばないようにすれば値は反映されないよ。他と違って非同期しかないっぽいよ。</p></li>
<li><p><code>OnParametersSet</code> <code>OnParametersSetAsync</code>：Razorコンポーネントにパラメーターがセットされたあとに呼ばれるよ。渡されたパラメーターを元に何か処理するならここだね。</p></li>
<li><p><code>OnAfterRender</code> <code>OnAfterRenderAsync</code>：画面がレンダリングされた後に呼ばれるよ。DOMも作られてるからJavaScript呼ぶならここだね。初期化の流れで何かするならここが最後のチャンスだね。例えばDBから値を取れなかった時のリトライ処理とか。</p></li>
<li><p>言わずもがなだけど、Asyncってついてる奴は非同期メソッドだね。</p></li>
<li><p>あと一回表示したあとは画面更新前に<code>ShouldRender</code>っていうイベントが起きて、ここでfalseを返すと画面更新をやめるよ。</p></li>
<li><p>デフォルトではないけど<code>IDisposable</code>を継承して<code>Dispose</code>を実装すればページ遷移時の後処理を実装できるよ。<br>
　<del>(Razorコンポーネントに<code>IDisposable</code>継承させるってどうやるんやろ？)</del><br>
　→<a href="https://blazor-university.com/components/component-lifecycles/" rel="nofollow noopener" target="_blank">Component lifecycles - Blazor University</a>にあった。</p></li>
</ul>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>@implements IDisposable
&lt;h1&gt;This is MyComponent&lt;/h1&gt;
@code {
  void IDisposable.Dispose(){
    // Code here
  }
}
</code></pre></div></div>

<ul>
<li>それじゃ実際に動かしてみよう。コードはこんな感じだよ。</li>
</ul>

<div class="code-frame" data-lang="C#">
<div class="code-lang"><span class="bold">Authors.razor</span></div>
<div class="highlight"><pre class="with-code"><code><span class="n">@page</span> <span class="s">"/authors"</span>
<span class="n">@implements</span> <span class="n">IDisposable</span>
<span class="p">&lt;</span><span class="n">h3</span><span class="p">&gt;</span><span class="n">Authors</span><span class="p">&lt;/</span><span class="n">h3</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="n">ServerValidations</span> <span class="n">@ref</span><span class="p">=</span><span class="s">"ServerValidationsCtrl"</span> <span class="n">IsVisible</span><span class="p">=</span><span class="s">"IsVisible"</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="n">span</span><span class="p">&gt;</span><span class="err">著者：</span><span class="n">@RecordName</span><span class="p">&lt;/</span><span class="n">span</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="n">ServerValidations</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="n">EditForm</span> <span class="n">Model</span><span class="p">=</span><span class="s">"@author"</span> <span class="n">OnValidSubmit</span><span class="p">=</span><span class="s">"@SaveAuthor"</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="n">div</span> <span class="k">class</span><span class="err">="</span><span class="nc">col</span><span class="p">-</span><span class="m">12</span> <span class="n">row</span><span class="s">"&gt;
</span>        <span class="p">&lt;</span><span class="n">label</span> <span class="k">class</span><span class="err">="</span><span class="nc">col</span><span class="p">-</span><span class="m">2</span> <span class="n">font</span><span class="p">-</span><span class="n">weight</span><span class="p">-</span><span class="n">bold</span><span class="s">"&gt;first name :&lt;/label&gt;
</span>        <span class="p">&lt;</span><span class="n">input</span> <span class="n">@ref</span><span class="p">=</span><span class="s">"firstnameText"</span> <span class="k">class</span><span class="err">="</span><span class="nc">form</span><span class="p">-</span><span class="n">control</span> <span class="n">col</span><span class="p">-</span><span class="m">3</span><span class="s">" @bind="</span><span class="n">author</span><span class="p">.</span><span class="n">FirstName</span><span class="s">" placeholder="</span><span class="n">first</span> <span class="n">name</span><span class="s">" /&gt;
</span>        <span class="p">&amp;</span><span class="n">nbsp</span><span class="p">;&lt;</span><span class="n">ValidationMessage</span> <span class="n">For</span><span class="p">=</span><span class="s">"@(()=&gt;author.FirstName)"</span> <span class="p">/&gt;</span>
    <span class="p">&lt;/</span><span class="n">div</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="n">div</span> <span class="k">class</span><span class="err">="</span><span class="nc">col</span><span class="p">-</span><span class="m">12</span> <span class="n">row</span><span class="s">"&gt;
</span>        <span class="p">&lt;</span><span class="n">label</span> <span class="k">class</span><span class="err">="</span><span class="nc">col</span><span class="p">-</span><span class="m">2</span> <span class="n">font</span><span class="p">-</span><span class="n">weight</span><span class="p">-</span><span class="n">bold</span><span class="s">"&gt;last name :&lt;/label&gt;
</span>        <span class="p">&lt;</span><span class="n">InputText</span> <span class="n">id</span><span class="p">=</span><span class="s">"lastnameText"</span> <span class="n">@ref</span><span class="p">=</span><span class="s">"lastnameText"</span> <span class="k">class</span><span class="err">="</span><span class="nc">form</span><span class="p">-</span><span class="n">control</span> <span class="n">col</span><span class="p">-</span><span class="m">3</span><span class="s">" @bind-Value="</span><span class="n">author</span><span class="p">.</span><span class="n">LastName</span><span class="s">" placeholder="</span><span class="n">last</span> <span class="n">name</span><span class="s">" /&gt;
</span>        <span class="p">&amp;</span><span class="n">nbsp</span><span class="p">;&lt;</span><span class="n">ValidationMessage</span> <span class="n">For</span><span class="p">=</span><span class="s">"@(()=&gt;author.LastName)"</span> <span class="p">/&gt;</span>
    <span class="p">&lt;/</span><span class="n">div</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="n">div</span> <span class="k">class</span><span class="err">="</span><span class="nc">col</span><span class="p">-</span><span class="m">12</span> <span class="n">row</span><span class="s">"&gt;
</span>        <span class="p">&lt;</span><span class="n">label</span> <span class="k">class</span><span class="err">="</span><span class="nc">col</span><span class="p">-</span><span class="m">2</span> <span class="n">font</span><span class="p">-</span><span class="n">weight</span><span class="p">-</span><span class="n">bold</span><span class="s">"&gt;city :&lt;/label&gt;
</span>        <span class="p">&lt;</span><span class="n">InputSelect</span> <span class="n">@ref</span><span class="p">=</span><span class="s">"CitiesSelect"</span> <span class="n">@bind</span><span class="p">-</span><span class="n">Value</span><span class="p">=</span><span class="s">"author.City"</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="n">option</span> <span class="k">value</span><span class="p">=</span><span class="s">"none"</span><span class="p">&gt;</span><span class="err">選んでね</span><span class="p">&lt;/</span><span class="n">option</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="n">option</span> <span class="k">value</span><span class="p">=</span><span class="s">"A"</span><span class="p">&gt;</span><span class="n">A</span><span class="p">&lt;/</span><span class="n">option</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="n">option</span> <span class="k">value</span><span class="p">=</span><span class="s">"B"</span><span class="p">&gt;</span><span class="n">B</span><span class="p">&lt;/</span><span class="n">option</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="n">option</span> <span class="k">value</span><span class="p">=</span><span class="s">"C"</span><span class="p">&gt;</span><span class="n">C</span><span class="p">&lt;/</span><span class="n">option</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="n">InputSelect</span><span class="p">&gt;</span>
        <span class="p">&amp;</span><span class="n">nbsp</span><span class="p">;&lt;</span><span class="n">ValidationMessage</span> <span class="n">For</span><span class="p">=</span><span class="s">"@(()=&gt;author.City)"</span> <span class="p">/&gt;</span>
    <span class="p">&lt;/</span><span class="n">div</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="n">div</span> <span class="k">class</span><span class="err">="</span><span class="nc">col</span><span class="p">-</span><span class="m">12</span> <span class="n">row</span><span class="s">"&gt;
</span>        <span class="p">&lt;</span><span class="n">label</span> <span class="k">class</span><span class="err">="</span><span class="nc">col</span><span class="p">-</span><span class="m">2</span> <span class="n">font</span><span class="p">-</span><span class="n">weight</span><span class="p">-</span><span class="n">bold</span><span class="s">"&gt;email address :&lt;/label&gt;
</span>        <span class="p">&lt;</span><span class="n">InputText</span> <span class="k">class</span><span class="err">="</span><span class="nc">form</span><span class="p">-</span><span class="n">control</span> <span class="n">col</span><span class="p">-</span><span class="m">3</span><span class="s">" @bind-Value="</span><span class="n">author</span><span class="p">.</span><span class="n">EmailAddress</span><span class="s">" placeholder="</span><span class="n">email</span> <span class="n">address</span><span class="s">" /&gt;
</span>        <span class="p">&amp;</span><span class="n">nbsp</span><span class="p">;&lt;</span><span class="n">ValidationMessage</span> <span class="n">For</span><span class="p">=</span><span class="s">"@(()=&gt;author.EmailAddress)"</span> <span class="p">/&gt;</span>
    <span class="p">&lt;/</span><span class="n">div</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="n">div</span> <span class="k">class</span><span class="err">="</span><span class="nc">col</span><span class="p">-</span><span class="m">12</span> <span class="n">row</span><span class="s">"&gt;
</span>        <span class="p">&lt;</span><span class="n">label</span> <span class="k">class</span><span class="err">="</span><span class="nc">col</span><span class="p">-</span><span class="m">2</span> <span class="n">font</span><span class="p">-</span><span class="n">weight</span><span class="p">-</span><span class="n">bold</span><span class="s">"&gt;email address :&lt;/label&gt;
</span>        <span class="p">&lt;</span><span class="n">InputNumber</span> <span class="k">class</span><span class="err">="</span><span class="nc">form</span><span class="p">-</span><span class="n">control</span> <span class="n">col</span><span class="p">-</span><span class="m">3</span><span class="s">" @bind-Value="</span><span class="n">author</span><span class="p">.</span><span class="n">Salary</span><span class="s">" placeholder="</span><span class="n">email</span> <span class="n">address</span><span class="s">" /&gt;
</span>        <span class="p">&amp;</span><span class="n">nbsp</span><span class="p">;&lt;</span><span class="n">ValidationMessage</span> <span class="n">For</span><span class="p">=</span><span class="s">"@(()=&gt;author.Salary)"</span> <span class="p">/&gt;</span>
    <span class="p">&lt;/</span><span class="n">div</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="n">div</span> <span class="k">class</span><span class="err">="</span><span class="nc">col</span><span class="p">-</span><span class="m">12</span> <span class="n">row</span><span class="s">"&gt;
</span>        <span class="p">&lt;</span><span class="n">span</span> <span class="k">class</span><span class="err">="</span><span class="nc">col</span><span class="p">-</span><span class="m">2</span><span class="s">"&gt;&lt;/span&gt;
</span>        <span class="p">&lt;</span><span class="n">input</span> <span class="n">type</span><span class="p">=</span><span class="s">"submit"</span> <span class="n">name</span><span class="p">=</span><span class="s">"btnSave"</span> <span class="k">class</span><span class="err">="</span><span class="nc">form</span><span class="p">-</span><span class="n">control</span> <span class="n">col</span><span class="p">-</span><span class="m">1</span> <span class="n">btn</span> <span class="n">btn</span><span class="p">-</span><span class="n">primary</span><span class="s">" value="</span><span class="n">Save</span><span class="s">" /&gt;
</span>        <span class="p">&lt;</span><span class="n">span</span><span class="p">&gt;&amp;</span><span class="n">nbsp</span><span class="p">;&lt;/</span><span class="n">span</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="n">input</span> <span class="n">type</span><span class="p">=</span><span class="s">"reset"</span> <span class="n">name</span><span class="p">=</span><span class="s">"btnClear"</span> <span class="k">class</span><span class="err">="</span><span class="nc">form</span><span class="p">-</span><span class="n">control</span> <span class="n">col</span><span class="p">-</span><span class="m">1</span> <span class="n">btn</span> <span class="n">btn</span><span class="p">-</span><span class="n">primary</span><span class="s">" @onclick="</span><span class="n">Clear</span><span class="s">" value="</span><span class="n">Clear</span><span class="s">" /&gt;
</span>    <span class="p">&lt;/</span><span class="n">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="n">EditForm</span><span class="p">&gt;</span>

<span class="p">}</span>
</code></pre></div>
</div>

<div class="code-frame" data-lang="c#">
<div class="code-lang"><span class="bold">ServerValidations.razor</span></div>
<div class="highlight"><pre class="with-code"><code><span class="n">@implements</span> <span class="n">IDisposable</span>

<span class="nf">@if</span> <span class="p">(</span><span class="n">IsVisible</span><span class="p">){</span>
    <span class="nf">@if</span> <span class="p">(</span><span class="n">Result</span><span class="p">){</span>
        <span class="p">&lt;</span><span class="n">div</span> <span class="n">id</span><span class="p">=</span><span class="s">"divValidationMessage"</span> <span class="k">class</span><span class="err">="</span><span class="nc">col</span><span class="p">-</span><span class="m">10</span> <span class="n">alert</span> <span class="n">alert</span><span class="p">-</span><span class="n">danger</span> <span class="n">row</span><span class="s">"&gt;
</span>            <span class="p">&lt;</span><span class="n">div</span> <span class="k">class</span><span class="err">="</span><span class="nc">col</span><span class="p">-</span><span class="m">11</span><span class="s">" style="</span><span class="n">text</span><span class="p">-</span><span class="n">align</span><span class="p">:</span><span class="n">left</span><span class="s">"&gt;
</span>                <span class="n">@ChildContent</span>  <span class="err">保存完了</span>
            <span class="p">&lt;/</span><span class="n">div</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="n">div</span> <span class="k">class</span><span class="err">="</span><span class="nc">col</span><span class="p">-</span><span class="m">1</span><span class="s">" style="</span><span class="n">text</span><span class="p">-</span><span class="n">align</span><span class="p">:</span><span class="n">right</span><span class="s">"&gt;
</span>                <span class="p">&lt;</span><span class="n">a</span> <span class="n">style</span><span class="p">=</span><span class="s">"text-underline-position:below; cursor:pointer"</span> <span class="n">@onclick</span><span class="p">=</span><span class="s">"CloseValidation"</span><span class="p">&gt;</span><span class="n">x</span><span class="p">&lt;/</span><span class="n">a</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="n">div</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="n">div</span><span class="p">&gt;</span>
    <span class="p">}</span><span class="k">else</span><span class="p">{</span>
        <span class="p">&lt;</span><span class="n">div</span> <span class="n">id</span><span class="p">=</span><span class="s">"divValidationMessage"</span> <span class="k">class</span><span class="err">="</span><span class="nc">col</span><span class="p">-</span><span class="m">10</span> <span class="n">alert</span> <span class="n">alert</span><span class="p">-</span><span class="n">danger</span> <span class="n">row</span><span class="s">"&gt;
</span>            <span class="p">&lt;</span><span class="n">div</span> <span class="k">class</span><span class="err">="</span><span class="nc">col</span><span class="p">-</span><span class="m">11</span><span class="s">" style="</span><span class="n">text</span><span class="p">-</span><span class="n">align</span><span class="p">:</span><span class="n">left</span><span class="s">"&gt;
</span>                <span class="err">サーバーエラーです。管理者に問い合わせてください。</span>
            <span class="p">&lt;/</span><span class="n">div</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="n">div</span> <span class="k">class</span><span class="err">="</span><span class="nc">col</span><span class="p">-</span><span class="m">1</span><span class="s">" style="</span><span class="n">text</span><span class="p">-</span><span class="n">align</span><span class="p">:</span><span class="n">right</span><span class="s">"&gt;
</span>                <span class="p">&lt;</span><span class="n">a</span> <span class="n">style</span><span class="p">=</span><span class="s">"text-underline-position:below; cursor:pointer"</span> <span class="n">@onclick</span><span class="p">=</span><span class="s">"CloseValidation"</span><span class="p">&gt;</span><span class="n">x</span><span class="p">&lt;/</span><span class="n">a</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="n">div</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="n">div</span><span class="p">&gt;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="n">@code</span> <span class="p">{</span>
    <span class="p">[</span><span class="n">Parameter</span><span class="p">]</span>
    <span class="k">public</span> <span class="kt">bool</span> <span class="n">IsVisible</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>

    <span class="k">public</span> <span class="kt">bool</span> <span class="n">Result</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>

    <span class="p">[</span><span class="n">Parameter</span><span class="p">]</span>
    <span class="k">public</span> <span class="n">RenderFragment</span> <span class="n">ChildContent</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>

    <span class="k">protected</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">OnInitialized</span><span class="p">(){</span>
        <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"ServerValidations - OnInitialized"</span><span class="p">);</span>
        <span class="k">base</span><span class="p">.</span><span class="nf">OnInitialized</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="k">protected</span> <span class="k">override</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">OnInitializedAsync</span><span class="p">(){</span>
        <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"ServerValidations - OnInitializedAsync"</span><span class="p">);</span>
        <span class="k">await</span> <span class="k">base</span><span class="p">.</span><span class="nf">OnInitializedAsync</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">override</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">SetParametersAsync</span><span class="p">(</span><span class="n">ParameterView</span> <span class="n">parameters</span><span class="p">){</span>
        <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"ServerValidations - SetParametersAsync / IsVisible="</span> <span class="p">+</span> <span class="n">IsVisible</span><span class="p">.</span><span class="nf">ToString</span><span class="p">()</span> <span class="p">+</span> <span class="s">" / parameters.GetValueOrDefault&lt;bool&gt;(\"IsVisible\")="</span> <span class="p">+</span> <span class="n">parameters</span><span class="p">.</span><span class="n">GetValueOrDefault</span><span class="p">&lt;</span><span class="kt">bool</span><span class="p">&gt;(</span><span class="s">"IsVisible"</span><span class="p">).</span><span class="nf">ToString</span><span class="p">());</span>
        <span class="k">await</span> <span class="k">base</span><span class="p">.</span><span class="nf">SetParametersAsync</span><span class="p">(</span><span class="n">parameters</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">protected</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">OnParametersSet</span><span class="p">(){</span>
        <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"ServerValidations - OnParametersSet / IsVisible="</span> <span class="p">+</span> <span class="n">IsVisible</span><span class="p">.</span><span class="nf">ToString</span><span class="p">());</span>
        <span class="k">base</span><span class="p">.</span><span class="nf">OnParametersSet</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="k">protected</span> <span class="k">override</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">OnParametersSetAsync</span><span class="p">(){</span>
        <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"ServerValidations - OnParametersSetAsync / IsVisible="</span> <span class="p">+</span> <span class="n">IsVisible</span><span class="p">.</span><span class="nf">ToString</span><span class="p">());</span>
        <span class="k">await</span> <span class="k">base</span><span class="p">.</span><span class="nf">OnParametersSetAsync</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="k">protected</span> <span class="k">override</span> <span class="kt">bool</span> <span class="nf">ShouldRender</span><span class="p">(){</span>
        <span class="k">base</span><span class="p">.</span><span class="nf">ShouldRender</span><span class="p">();</span>
        <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"ServerValidations - ShouldRender"</span><span class="p">);</span>
        <span class="k">return</span> <span class="k">true</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">protected</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">OnAfterRender</span><span class="p">(</span><span class="kt">bool</span> <span class="n">firstRender</span><span class="p">){</span>
        <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"ServerValidations - OnAfterRender - firstRender = "</span> <span class="p">+</span> <span class="n">firstRender</span><span class="p">);</span>
        <span class="k">base</span><span class="p">.</span><span class="nf">OnAfterRender</span><span class="p">(</span><span class="n">firstRender</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">protected</span> <span class="k">override</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">OnAfterRenderAsync</span><span class="p">(</span><span class="kt">bool</span> <span class="n">firstRender</span><span class="p">){</span>
        <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"ServerValidations - OnAfterRenderAsync - firstRender = "</span> <span class="p">+</span> <span class="n">firstRender</span><span class="p">);</span>
        <span class="k">await</span> <span class="k">base</span><span class="p">.</span><span class="nf">OnAfterRenderAsync</span><span class="p">(</span><span class="n">firstRender</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">void</span> <span class="n">IDisposable</span><span class="p">.</span><span class="nf">Dispose</span><span class="p">(){</span>
        <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"ServerValidations - Dispose"</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">void</span> <span class="nf">CloseValidation</span><span class="p">(){</span>
        <span class="n">IsVisible</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

</code></pre></div>
</div>

<ul>
<li>アプリを立ち上げただけでは初期化処理が呼ばれてないのがわかるね。</li>
<li>ページを「<strong>Author</strong>」遷移してみると</li>
</ul>

<p>Authors - OnInitialized<br>
Authors - OnInitializedAsync<br>
Authors - OnParametersSet<br>
Authors - OnParametersSetAsync<br>
ServerValidations - SetParametersAsync / IsVisible=False / parameters.GetValueOrDefault("IsVisible")=False<br>
ServerValidations - OnInitialized<br>
ServerValidations - OnInitializedAsync<br>
ServerValidations - OnParametersSet / IsVisible=False<br>
ServerValidations - OnParametersSetAsync / IsVisible=False<br>
Authors - OnAfterRender - firstRender = True<br>
Authors - OnAfterRenderAsync - firstRender = True<br>
ServerValidations - OnAfterRender - firstRender = True<br>
ServerValidations - OnAfterRenderAsync - firstRender = True</p>

<ul>
<li>とコンソールに出力されて一気に初期化されていることがわかるね。</li>
<li>次に「<strong>Save</strong>」ボタンをクリックしてみよう。</li>
</ul>

<p>Authors - ShouldRender<br>
ServerValidations - SetParametersAsync / IsVisible=False / parameters.GetValueOrDefault("IsVisible")=True<br>
ServerValidations - OnParametersSet / IsVisible=True<br>
ServerValidations - OnParametersSetAsync / IsVisible=True<br>
ServerValidations - ShouldRender<br>
Authors - OnAfterRender - firstRender = False<br>
Authors - OnAfterRenderAsync - firstRender = False<br>
ServerValidations - OnAfterRender - firstRender = False<br>
ServerValidations - OnAfterRenderAsync - firstRender = False</p>

<ul>
<li>
<code>ShouldRender</code>から始まって描画関係の処理化が呼ばれてるのがわかるね。</li>
<li>あと2回目の描画だから<code>firstRender</code>はfalseになってるね。</li>
<li>(動画ではやってないけど)別のページに切り替えるとDisposeが呼ばれてるのがわかるね。</li>
<li>ちなみに今はクリック時にエラーを表示してるけど、サーバー接続エラーみたいなのは画面表示時にチェックしたいよね。</li>
<li>それじゃ<code>OnParametersSetAsync</code>にDB接続エラーチェックを追加してみよう。といっても今回はテストだから接続は失敗したものとして<code>Result</code>にはfalseを設定するよ。</li>
<li>動かしてみるとページ遷移したタイミングでエラーが出てるのがわかるね。こうやってあげればユーザーに無駄な手間を取らせなくて良いよね。</li>
<li>前の章でやった<code>OnAfterRenderAsync</code>にJavaScriptを入れた時の動きを見てみよう。</li>
<li>
<code>StateHasChanged()</code>を呼んでるせいでページ全体の再描画が走ってるね。</li>
<li>こういうのを効率化するにもRazorコンポーネントが有効だよ。</li>
<li>「<strong>SelectCity.razor</strong>」を作ってさっきのJavaScriptで一覧を取ってくる処理とかを入れてやってコンポーネント化して動きを見てみよう。</li>
<li>さっきと違って全体の再描画が起きてないのがわかるね。再利用するだけでなく、こんな風にRazorコンポーネントは処理の軽量化にも有用だよ。</li>
</ul>

<p>(<code>Dispose</code>の話、ないと思ったら最後にあった)</p>

<h1>
<span id="ep09razorコンポーネントライブラリ" class="fragment"></span><a href="#ep09razor%E3%82%B3%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%8D%E3%83%B3%E3%83%88%E3%83%A9%E3%82%A4%E3%83%96%E3%83%A9%E3%83%AA"><i class="fa fa-link"></i></a>EP09:Razorコンポーネントライブラリ</h1>

<ul>
<li>今回はRazorコンポーネントライブラリの話だよ</li>
<li>ライブラリ化すると再利用がはかどるよ</li>
<li>MatBlazorとかフリーのコンポーネントも紹介するよ</li>
<li>Telerikとか有償コンポーネントもあるよ</li>
<li>それじゃ前回作成したメッセージとドロップダウンボックスのRazorコンポーネントをライブラリ化してみよう。</li>
<li>まずは新しいプロジェクトとして「<strong>Razorクラスライブラリ</strong>」を選択するよ。名前は「<strong>CuriousDriveRazorLibrary</strong>」にしようか。</li>
<li>とりあえずリリースモードでビルドして、呼び出し方を見てみよう。</li>
<li>呼び出す方のBlazor Webアプリのプロジェクトを開いてソリューションエクスプローラのプロジェクトを右クリック→「<strong>追加</strong>」→「<strong>プロジェクト参照</strong>」を選択して、表示されたダイアログの「<strong>参照</strong>」ボタンからさっきビルドした「<strong>CuriousDriveRazorLibrary</strong>」のDLL(プロジェクトフォルダの<code>bin\Release\net5.0</code>。<code>net5.0</code>は.NET Coreを選択してたら<code>netstandard2.0</code>とかになるよ)を追加するよ。</li>
<li>「<strong>Index.razor</strong>」にコンポーネントを追加してみよう。頭に<code>@using CuriousDriveRazorLibrary</code>を追加して<code>&lt;Component1&gt;&lt;/Component1&gt;</code>と入れるだけだよ。</li>
<li>実行してみるとちゃんとライブラリのコンポーネントが表示されてるのがわかるね。</li>
<li>それじゃ今度は前章で作った「<strong>SelectCity.razor</strong>」と「<strong>ServerValidations.razor</strong>」をライブラリに移して呼んでみよう。</li>
<li><p>エクスプローラーで「<strong>SelectCity.razor</strong>」と「<strong>ServerValidations.razor</strong>」を切り取って「<strong>CuriousDriveRazorLibrary</strong>」のプロジェクトフォルダに張り付けるよ。そしたらソリューションエクスプローラーを見てみると追加されてるのがわかるね。<br>
(昔のVisualStudioと違ってプロジェクトにファイルの追加とかせんでええんや)</p></li>
<li><p>ファイルを変更したらもちろんリビルドが必要だよ。</p></li>
<li><p>呼び出す側だけど、一々全部のページに<code>@using</code>書いていくは面倒だよね。</p></li>
<li><p>そこで「<strong>_Imports.razor</strong>」に<code>@using CuriousDriveRazorLibrary</code>を追加するよ。こうすることで全てのページで<code>@using</code>を書いたのと同じになるよ。</p></li>
<li><p>ソースで<code>&lt;ServerValidations&gt;</code>とかにカーソルを合わせてみると<code>CuriousDriveRazorLibrary.ServerValidations</code>となってライブラリから呼ばれているようになっているのがわかるね。</p></li>
<li><p>動かしてみるとちゃんと移す前と同じように動いてるのがわかるね。</p></li>
<li><p>OSSのコンポーネントとかもあるよ。MatBlazorについて紹介しよう。</p></li>
<li><p>これはマテリアルデザインUIのコンポーネントでOSSだよ。ググってプロジェクトのページを見てみるとたくさんのコンポーネントがあるのがわかるね。</p></li>
<li><p>追加して使ってみよう。プロジェクトを右クリックして「Nugetパッケージの管理」を選択してMatBlazorを検索して「インストール」をクリックするだけだよ。</p></li>
<li><p>実は既にこのプロジェクトにはMtBlazorは組み込んでいて、Publishersのテーブルで使ってるよ、</p></li>
<li><p>コードを見てみよう。この例では<code>MatTable</code>っていうコンポーネントを使ってるね。HTMLのテーブルタグと似たような感じで書けるようになってるよ。</p></li>
<li><p>有償コンポーネントならTelerikとかがあるよ。Bootstrapとかも使えてグラフなんかのコンポーネントもあるよ。</p></li>
<li><p>ちなみに＄1,300ほどかかるよ。かっこいいし選択肢としては十分ありだね。</p></li>
</ul>
</div></div></section><div class="css-1yzj1fm"><div class="css-1uv1qiv"><span class="fa fa-twitter"></span></div><div class="css-1uv1qiv"><span class="fa fa-facebook"></span></div></div><div class="apm-Content"><div class="apm-Content_title">Why not register and get more from Qiita?</div><ol class="apm-Content_list"><li>We will deliver articles that match you<div class="description">By following users and tags, you can catch up information on technical fields that you are interested in as a whole</div></li><li>you can read useful information later efficiently<div class="description">By &quot;stocking&quot; the articles you like, you can search right away</div></li><div><a class="apm-Content_help" href="https://help.qiita.com/ja/articles/qiita-login-user" target="_blank"><i class="fa fa-fw fa-arrow-circle-right"></i>What you can do with signing up</a></div></ol><a href="/signup?callback_action=login_or_signup&amp;redirect_to=%2FNAVE%2Fitems%2F124d6a9e7a4e2cdb580b&amp;realm=qiita" class="apm-Content_button apm-Content_button-signup">Sign up</a><a href="/login?callback_action=login_or_signup&amp;redirect_to=%2FNAVE%2Fitems%2F124d6a9e7a4e2cdb580b&amp;realm=qiita" class="apm-Content_button apm-Content_button-signin">Login</a></div></div><div class="css-helsa7"></div></div></div></div><div class="css-109dbrr"><div class="css-5jpx49"><div class="css-mnxgyc"><button class=" css-1vlpknv"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/NAVE/items/124d6a9e7a4e2cdb580b/likers" class="css-1iupg5d">0</a></div><div class="css-fsjkhv"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-1b17vb0">0</span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-7i7f4d"><div class="css-1gj7nt">Improve article</div><a href="/drafts/124d6a9e7a4e2cdb580b/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/NAVE/items/124d6a9e7a4e2cdb580b/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/NAVE/items/124d6a9e7a4e2cdb580b/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/NAVE/items/124d6a9e7a4e2cdb580b/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/NAVE/items/124d6a9e7a4e2cdb580b.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="PersonalArticlePage" data-dom-id="PersonalArticlePage-react-component-0f8d0218-4e55-47f5-8ed6-250d32bc8813">{"authorAnalyticsTrackingId":null,"organizationAnalyticsTrackingId":null}</script>
      
<footer id="globalFooter" class="st-Footer"><div class="st-Footer_container"><div class="st-Footer_start"><div class="st-Footer_logo"><svg viewbox="0 0 426.57 130" xmlns="http://www.w3.org/2000/svg"><circle cx="167.08" cy="21.4" r="12.28" /><path d="M250.81 29.66h23.48v18.9h-23.48z" /><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z" /><circle cx="216.33" cy="21.4" r="12.28" /></svg></div><div class="st-Footer_catchcopy">How developers code is here.</div><div class="st-Footer_socials"><a class="fa fa-twitter" href="https://twitter.com/qiita"></a><a class="fa fa-facebook-square" href="https://www.facebook.com/qiita/"></a></div></div><div class="st-Footer_end"><div class="st-Footer_qiita"><div class="st-Footer_label">Qiita</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="/about">About</a><a href="/terms">Terms</a><a href="/privacy">Privacy</a><a target="_blank" href="http://help.qiita.com/ja/articles/qiita-community-guideline">Guideline</a><a target="_blank" href="https://help.qiita.com/ja/articles/others-brand-guideline">Design Guideline</a></div><div class="st-Footer_column"><a href="/release-notes">Release</a><a href="/api/v2/docs">API</a><a href="/feedback/new">ご意見</a><a href="https://help.qiita.com">Help</a><a target="_blank" href="https://qiita.com/ads?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Advertisement</a></div></div></div><div class="st-Footer_increments"><div class="st-Footer_label">Increments</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="https://increments.co.jp/company/">About</a><a href="https://increments.co.jp/jobs/">採用情報</a><a href="https://blog.qiita.com">Blog</a></div><div class="st-Footer_column"><a href="https://teams.qiita.com/">Qiita Team</a><a href="https://jobs.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Jobs</a><a href="https://zine.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Zine</a></div></div></div></div></div><div class="st-Footer_copyright">© 2011-2021 Increments Inc.</div></footer><div id="Snackbar-react-component-4ad7952e-bbd8-4ba4-9650-885254c7118a"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="Snackbar" data-dom-id="Snackbar-react-component-4ad7952e-bbd8-4ba4-9650-885254c7118a">{}</script>
      
<div id="LoginModal-react-component-819f1deb-f309-4224-8d7a-0134be5d9a99"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="LoginModal" data-dom-id="LoginModal-react-component-819f1deb-f309-4224-8d7a-0134be5d9a99">{}</script>
      
<div id="StockModal-react-component-e700dacf-5cf2-4f6c-bfc9-5beb233f2aac"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="StockModal" data-dom-id="StockModal-react-component-e700dacf-5cf2-4f6c-bfc9-5beb233f2aac">{}</script>
      
</div><div id="dataContainer" style="display: none;" data-config="{&quot;actionPath&quot;:&quot;public/items#show&quot;,&quot;settings&quot;:{&quot;analyticsTrackingId&quot;:&quot;UA-24675221-12&quot;,&quot;assetsMap&quot;:{},&quot;csrfToken&quot;:&quot;AhI2/EC/ErTWHE2lSfyeKOR67zjaE24U0nmMT5LSWBl4deeJTUOTgfjOfZuzDMshYbbvwpE9FlLaoQOo/t6V3Q==&quot;,&quot;locale&quot;:&quot;en&quot;},&quot;currentUser&quot;:null}" /></body></html><script type="application/json" data-js-react-on-rails-store="AppStoreWithReactOnRails">{"snackbar":{"type":"","body":"","isActive":false},"article":{"article":{"body":"\u003cp\u003e\u003ca href=\"https://www.youtube.com/watch?v=xr56fmgLl74\u0026amp;list=PL4WEkbdagHIR0RBe_P4bai64UDqZEbQap\" rel=\"nofollow noopener\" target=\"_blank\"\u003e本家動画はこちら\u003c/a\u003e\u003cbr\u003e\n\u003ca href=\"https://qiita.com/NAVE/items/1e9d44ea2c0b43dcd9b7\" id=\"reference-2c4b4e5c2b72ce26e9e6\"\u003eEP01～05はこちら\u003c/a\u003e\u003cbr\u003e\n\u003ca href=\"https://qiita.com/NAVE/items/e3831c73adaaf56211e2\" id=\"reference-c860b9b0a6f12ba28728\"\u003e番外×2 + EP10～はこちら\u003c/a\u003e\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"ep06javascriptとの相互運用\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#ep06javascript%E3%81%A8%E3%81%AE%E7%9B%B8%E4%BA%92%E9%81%8B%E7%94%A8\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eEP06:JavaScriptとの相互運用\u003c/h1\u003e\n\n\u003cul\u003e\n\u003cli\u003erazorページでJavaScriptを使うには、まずは\u003ccode\u003e@inject IJSRuntime JSRuntime;\u003c/code\u003eを追加する必要があるよ。\u003c/li\u003e\n\u003cli\u003ejsフォルダ内の「\u003cstrong\u003esite.js\u003c/strong\u003e」を追加して、同ファイルに以下の関数を追加したのでそれを呼んでみよう。\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"javascript\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"kd\"\u003efunction\u003c/span\u003e \u003cspan class=\"nx\"\u003esaveMessage\u003c/span\u003e\u003cspan class=\"p\"\u003e(){\u003c/span\u003e\n    \u003cspan class=\"nx\"\u003ealert\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003eレコードの保存が完了しました。\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cul\u003e\n\u003cli\u003e「\u003cstrong\u003e_Host.cshtml\u003c/strong\u003e」の \u003ccode\u003eblazor.server.js\u003c/code\u003e の下に \u003ccode\u003e\u0026lt;script src=\"~/js/site.js\"\u0026gt;\u0026lt;/script\u0026gt;\u003c/code\u003e を追加しよう。\u003c/li\u003e\n\u003cli\u003eSaveボタン押下時の処理(SaveAuthorメソッド)に追加したいので、同メソッドに \u003ccode\u003eawait JSRuntime.InvokeVoidAsync(\"saveMessage\");\u003c/code\u003e を追加しよう。\u003c/li\u003e\n\u003cli\u003eあとこの関数は非同期なので予備元のSaveAuthorメソッドも\u003ccode\u003eprivate async Task SaveAuthor()\u003c/code\u003eとしておこう。\u003c/li\u003e\n\u003cli\u003eこの手のテストは検証があると面倒なので\u003ccode\u003e@*\u0026lt;DataAnnotationsValidator /\u0026gt;*@\u003c/code\u003e と \u003ccode\u003e@* *@\u003c/code\u003e で括って検証を無効にしておこう。\u003c/li\u003e\n\u003cli\u003e動かしてみるとちゃんとダイアログが表示されたね。\u003c/li\u003e\n\u003cli\u003eそれじゃ次にJavaScriptに引数を渡してみよう。まずはJavaScriptに引数を足すよ。\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"javascript\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"kd\"\u003efunction\u003c/span\u003e \u003cspan class=\"nx\"\u003esaveMessage\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003efirstName\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003elastName\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"nx\"\u003ealert\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003efirstName\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003e \u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"nx\"\u003elastName\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003eのレコードの保存が完了しました。\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cul\u003e\n\u003cli\u003e次に\u003ccode\u003eInvokeVoidAsync\u003c/code\u003eにも引数を足すよ。\u003ccode\u003eInvokeVoidAsync\u003c/code\u003eは可変個数の引数を指定できるよ。\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eawait\u003c/span\u003e \u003cspan class=\"n\"\u003eJSRuntime\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eInvokeVoidAsync\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"saveMessage\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eauthor\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eFirstName\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eauthor\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eLastName\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e(動画じゃauthor.FirstName, author.LastNameを渡さずに、直接一回変数に入れてるけどなんか意味あるんかな？)\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e続いてJavaScriptでDOMを操作してみよう。まずはJavaScriptを修正するよ。\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"javascript\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"kd\"\u003efunction\u003c/span\u003e \u003cspan class=\"nx\"\u003esaveMessage\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003efirstName\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003elastName\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"nb\"\u003edocument\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003egetElementById\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003edivServiceValidations\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nx\"\u003einnerText\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003efirstName\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003e \u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"nx\"\u003elastName\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003eのレコードの保存が完了しました。\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e(ローカルで動かしてたら「\u003cstrong\u003einnerTest\u003c/strong\u003e」ってタイポしてて動かんかった・・・VisualStudioならTypeScript簡単に使えるし(必要なものはNugetで勝手にとってきてくれる)トランスパイルの時にエラー出してくれるTypeScript使おう。型もあるしほぼ書き方変わらんし)\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"typescript\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"kd\"\u003efunction\u003c/span\u003e \u003cspan class=\"nx\"\u003esaveMessage\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003efirstName\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"kr\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003elastName\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"kr\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"nb\"\u003edocument\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003egetElementById\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003edivServiceValidations\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nx\"\u003einnerText\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003efirstName\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003e \u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"nx\"\u003elastName\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003eのレコードの保存が完了しました。\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cul\u003e\n\u003cli\u003e操作対象の\u003ccode\u003e\u0026lt;div id=\"divServiceValidations\" class=\"col-10 alert alert-info\"\u0026gt;\u0026lt;/div\u0026gt;\u003c/code\u003eを「\u003cstrong\u003eAuthors.razor\u003c/strong\u003e」の\u003ccode\u003e\u0026lt;EditForm\u0026gt;\u003c/code\u003eの前に追加するよ。\u003c/li\u003e\n\u003cli\u003e動かしてみるとメッセージが追加した\u003ccode\u003e\u0026lt;div id=\"divServiceValidations\"\u0026gt;\u003c/code\u003eに表示されるね。\u003c/li\u003e\n\u003cli\u003e次は「\u003cstrong\u003eSave\u003c/strong\u003e」を押すと「\u003cstrong\u003efirst name\u003c/strong\u003e」にフォーカスが映るようにしてみよう。\u003c/li\u003e\n\u003cli\u003eまずは\u003ccode\u003e@ref\u003c/code\u003e属性を「\u003cstrong\u003efirst name\u003c/strong\u003e」の\u003ccode\u003e\u0026lt;InputText\u0026gt;\u003c/code\u003eに追加するよ。\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u0026lt;InputText @ref=\"firstnameText\" class=\"form-control col-3\" @bind-Value=\"author.FirstName\" placeholder=\"first name\" /\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cul\u003e\n\u003cli\u003e続いてコード部に\u003ccode\u003eElementReference firstnameText;\u003c/code\u003eを追加するよ。\u003c/li\u003e\n\u003cli\u003eここで一旦コンパイルしてみよう。コンポーネントを変換できない、みたいなエラーが出るね。\u003c/li\u003e\n\u003cli\u003e\n\u003ccode\u003e@ref\u003c/code\u003eはRazorコンポーネントには指定できないので、\u003ccode\u003e\u0026lt;InputText\u0026gt;\u003c/code\u003eを\u003ccode\u003e\u0026lt;input\u0026gt;\u003c/code\u003eに変えてやる必要があるよ。\u003c/li\u003e\n\u003cli\u003e\n\u003ccode\u003e@bind-Value\u003c/code\u003eも\u003ccode\u003e@bind\u003c/code\u003eに変える必要があるので以下のようになるよ。\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u0026lt;input @ref=\"firstnameText\" class=\"form-control col-3\" @bind=\"author.FirstName\" placeholder=\"first name\" /\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e(\u003ccode\u003eElementReference firstnameText;\u003c/code\u003eだとエラーになるけど\u003ccode\u003eInputText firstnameText;\u003c/code\u003eだとエラーにならんな。この辺は型チェックしてるってことか)\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eそれじゃフォーカスをセットするスクリプトを書いて、\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"typescript\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"kd\"\u003efunction\u003c/span\u003e \u003cspan class=\"nx\"\u003esetFocusOnElement\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eelement\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nx\"\u003eHTMLElement\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"nx\"\u003eelement\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003efocus\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e(動画ではJavaScriptだからもちろん「: HTMLElement」は無いよ)\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eあとはメッセージ表示の時と同じように関数を呼ぶだけだよ。動かしてみるとちゃんとフォーカスが移動してるね。\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eawait\u003c/span\u003e \u003cspan class=\"n\"\u003eJSRuntime\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eInvokeVoidAsync\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"setFocusOnElement\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003efirstnameText\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e(一々JS使わんといかんの面倒だな。WebForm時代みたいにSetFocus関数呼ぶだけ、とかにならんかなぁ・・・。以下みたいな感じ)\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eInputText\u003c/span\u003e \u003cspan class=\"n\"\u003elastnameText\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003easync\u003c/span\u003e \u003cspan class=\"n\"\u003eTask\u003c/span\u003e \u003cspan class=\"nf\"\u003eSaveAuthor\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"n\"\u003elastnameText\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSetFocus\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\u003cspan class=\"c1\"\u003e//今のところそんなメソッドはない。\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e(ID指定すればInputTextのままでもいけるな)\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"html\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"nt\"\u003e\u0026lt;InputText\u003c/span\u003e \u003cspan class=\"na\"\u003eid=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"firstnameText\"\u003c/span\u003e \u003cspan class=\"err\"\u003e@\u003c/span\u003e\u003cspan class=\"na\"\u003eref=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"firstnameText\"\u003c/span\u003e \u003cspan class=\"na\"\u003eclass=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"form-control col-3\"\u003c/span\u003e \u003cspan class=\"err\"\u003e@\u003c/span\u003e\u003cspan class=\"na\"\u003ebind-Value=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"author.FirstName\"\u003c/span\u003e \u003cspan class=\"na\"\u003eplaceholder=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"first name\"\u003c/span\u003e \u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"n\"\u003e@code\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eInputText\u003c/span\u003e \u003cspan class=\"n\"\u003elastnameText\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003easync\u003c/span\u003e \u003cspan class=\"n\"\u003eTask\u003c/span\u003e \u003cspan class=\"nf\"\u003eSaveAuthor\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eawait\u003c/span\u003e \u003cspan class=\"n\"\u003eJSRuntime\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eInvokeVoidAsync\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"setFocusOnID\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003elastnameText\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eAdditionalAttributes\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s\"\u003e\"id\"\u003c/span\u003e\u003cspan class=\"p\"\u003e]);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"typescript\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"kd\"\u003efunction\u003c/span\u003e \u003cspan class=\"nx\"\u003esetFocusOnID\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eelement\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"kr\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"nb\"\u003edocument\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003egetElementById\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eelement\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nx\"\u003efocus\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cul\u003e\n\u003cli\u003e次はJavaScriptからとった配列でリストボックスの一覧を初期化してみよう。JavaScriptは以下のようなのだよ。\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"typescript\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"kd\"\u003efunction\u003c/span\u003e \u003cspan class=\"nx\"\u003egetCities\u003c/span\u003e\u003cspan class=\"p\"\u003e():\u003c/span\u003e \u003cspan class=\"kr\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e[]\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"kd\"\u003evar\u003c/span\u003e \u003cspan class=\"nx\"\u003ecities\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"kr\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e[]\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003eNew York\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003eLos Angeles\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003eChicago\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003eHouston\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003ePhoenix\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003ePhiladelphia\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003eSan Antonio\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003eSan Diego\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003eDallas\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003eSan Jose\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003eAustin\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003eJacksonville\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003eFort Worth\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003eColumbus\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003eSan Francisco\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003eCharlotte\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003eIndianapolis\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003eSeattle\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003eDenver\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003eWashington\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e];\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"nx\"\u003ecities\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e(動画では(ry)\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eあとは\u003ccode\u003estring[] Cities\u003c/code\u003eプロパティを追加して、描画後に実行される「\u003cstrong\u003eOnAfterRenderAsync\u003c/strong\u003e」に初回かつ\u003ccode\u003eCities\u003c/code\u003eがnullの時にJavaScriptから値を取ってきて \u003ccode\u003eStateHasChanged();\u003c/code\u003eで反映させるよ。\u003c/li\u003e\n\u003cli\u003eコード見ればわかるけど、戻り値なしのときは\u003ccode\u003eInvokeVoidAsync\u003c/code\u003e、戻り値ありの時は\u003ccode\u003eInvokeAsync\u0026lt;TValue\u0026gt;\u003c/code\u003eでTValueに型を指定するんだね。\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eprotected\u003c/span\u003e \u003cspan class=\"k\"\u003eoverride\u003c/span\u003e \u003cspan class=\"k\"\u003easync\u003c/span\u003e \u003cspan class=\"n\"\u003eTask\u003c/span\u003e \u003cspan class=\"nf\"\u003eOnAfterRenderAsync\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"n\"\u003efirstRender\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003efirstRender\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e \u003cspan class=\"n\"\u003eCities\u003c/span\u003e \u003cspan class=\"p\"\u003e==\u003c/span\u003e \u003cspan class=\"k\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eCities\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003eawait\u003c/span\u003e \u003cspan class=\"n\"\u003eJSRuntime\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eInvokeAsync\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"k\"\u003e]\u0026gt;\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"getCities\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"nf\"\u003eStateHasChanged\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cul\u003e\n\u003cli\u003eあとはforeachでoption追加を回せば追加されるね。\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"html\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"nt\"\u003e\u0026lt;select\u003c/span\u003e \u003cspan class=\"na\"\u003eclass=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"form-control col-3\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e\n    @if (@Cities != null){\n        \u003cspan class=\"nt\"\u003e\u0026lt;option\u003c/span\u003e \u003cspan class=\"na\"\u003evalue=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003eselect city..\u003cspan class=\"nt\"\u003e\u0026lt;/option\u0026gt;\u003c/span\u003e\n        @foreach (var city in Cities){\n            \u003cspan class=\"nt\"\u003e\u0026lt;option\u003c/span\u003e \u003cspan class=\"na\"\u003evalue=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"@city\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e@city\u003cspan class=\"nt\"\u003e\u0026lt;/option\u0026gt;\u003c/span\u003e\n        }\n    }\n\u003cspan class=\"nt\"\u003e\u0026lt;/select\u0026gt;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e(実アプリじゃあんまり使わないパターンかなぁ。選択とかEnumとか固定配列とかDBからとるパターンしか使わなそう)\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"ep07razorコンポーネントの再利用\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#ep07razor%E3%82%B3%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%8D%E3%83%B3%E3%83%88%E3%81%AE%E5%86%8D%E5%88%A9%E7%94%A8\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eEP07:Razorコンポーネントの再利用\u003c/h1\u003e\n\n\u003cul\u003e\n\u003cli\u003e今回はRazorコンポーネントの再利用について話すよ。\u003c/li\u003e\n\u003cli\u003eRazorコンポーネントは2種類あって、一つ目は「\u003cstrong\u003eページ\u003c/strong\u003e」。\u003c/li\u003e\n\u003cli\u003e今までにも出てきた頭に\u003ccode\u003e@page\u003c/code\u003eって書いてあるやつだね。ブラウザからこれらのコンポーネントに移動してWebページとして利用できるよ。\u003c/li\u003e\n\u003cli\u003eもう一つは共有可能なコンポーネントでページに組み込んで利用できるよ。今回はこの共有可能なコンポーネントの話だよ。\u003c/li\u003e\n\u003cli\u003eさて、今まで「著者(Author)の名前とかの情報を入力して保存する」っていうページを作ってきたけど、これと似たようなので「出版社(Publisher)の名前とかの情報を入力して保存する」というのを作ったよ。\u003c/li\u003e\n\u003cli\u003eここでコードを見てみるとどっちのページにも\u003ccode\u003e\u0026lt;div id=\"divServerValidations\"\u0026gt;\u003c/code\u003eっていうタグがあるね。\u003c/li\u003e\n\u003cli\u003eいわゆる\u003ca href=\"https://ja.wikipedia.org/wiki/%E9%87%8D%E8%A4%87%E3%82%B3%E3%83%BC%E3%83%89\" rel=\"nofollow noopener\" target=\"_blank\"\u003e重複コード\u003c/a\u003eだけど、Razorコンポーネントの再利用をすると、こういうのことが起きないようにできるよ。\u003c/li\u003e\n\u003cli\u003eでは早速ソリューションエクスプローラ右クリックからRazorコンポーネントを追加してみよう。名前は「\u003cstrong\u003eServerValidations.razor\u003c/strong\u003e」にしよう。\u003c/li\u003e\n\u003cli\u003eとりあえずここには\u003ccode\u003e\u0026lt;div id=\"divServerValidations\"\u0026gt;\u003c/code\u003eとメッセージだけを追加してみよう。\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"html\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eServerValidations.razor\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"nt\"\u003e\u0026lt;div\u003c/span\u003e \u003cspan class=\"na\"\u003eid=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"divServiceValidations\"\u003c/span\u003e \u003cspan class=\"na\"\u003eclass=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"col-10 alert alert-info\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e\n    保存完了\n\u003cspan class=\"nt\"\u003e\u0026lt;/div\u0026gt;\u003c/span\u003e\n@code {\n}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cul\u003e\n\u003cli\u003e呼び出すのは簡単で\u003ccode\u003e\u0026lt;ServerValidations\u0026gt;\u0026lt;/ServerValidations\u0026gt;\u003c/code\u003eって書くだけだよ。実行してみるとちゃんとページに組み込まれてるのがわかるね。\u003c/li\u003e\n\u003cli\u003eそれじゃ次はパラメーターでメッセージの表示/非表示を切り変えてみよう。コンポーネント側(子)はこんな感じでパラメーターを追加できるよ。\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"html\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eServerValidations.razor\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e@if (IsVisible) {\n    \u003cspan class=\"nt\"\u003e\u0026lt;div\u003c/span\u003e \u003cspan class=\"na\"\u003eid=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"divServiceValidations\"\u003c/span\u003e \u003cspan class=\"na\"\u003eclass=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"col-10 alert alert-info\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e\n        保存完了\n    \u003cspan class=\"nt\"\u003e\u0026lt;/div\u0026gt;\u003c/span\u003e\n}\n\n@code {\n    [Parameter]\n    public bool IsVisible { get; set; }\n}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cul\u003e\n\u003cli\u003e呼び出し側(親)でも変数を宣言して、コンポーネントのタグにプロパティとの対応を書いてあげるよ。\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"html\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eAuthor.razor\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e@page \"/authors\"\n\u003cspan class=\"nt\"\u003e\u0026lt;ServerValidations\u003c/span\u003e \u003cspan class=\"na\"\u003eIsVisible=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"IsVisible\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u0026lt;/ServerValidations\u0026gt;\u003c/span\u003e\n\n@code {\n    public bool IsVisible { get; set; }\n\n    private async Task SaveAuthor() {\n        IsVisible = true;\n(以下略)\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cul\u003e\n\u003cli\u003e動かしてみると、ちゃんと「\u003cstrong\u003eSave\u003c/strong\u003e」ボタンを押したら\u003ccode\u003e\u0026lt;div id=\"divServiceValidations\"\u0026gt;\u003c/code\u003eの内容が表示されるね。\u003c/li\u003e\n\u003cli\u003e今度は「親の方で書いたHTMLを子の方に表示させる」というのをやってみよう。\u003c/li\u003e\n\u003cli\u003eまず「\u003cstrong\u003eServerValidations.razor\u003c/strong\u003e」の方は\u003ccode\u003eRenderFragment\u003c/code\u003e型のプロパティを追加してHTML部に表示させるよ。\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"html\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eServerValidations.razor\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e@if (IsVisible)\n{\n    \u003cspan class=\"nt\"\u003e\u0026lt;div\u003c/span\u003e \u003cspan class=\"na\"\u003eid=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"divServiceValidations\"\u003c/span\u003e \u003cspan class=\"na\"\u003eclass=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"col-10 alert alert-info\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e\n        @ChildContent : 保存完了\n    \u003cspan class=\"nt\"\u003e\u0026lt;/div\u0026gt;\u003c/span\u003e\n}\n\n@code {\n    [Parameter]\n    public bool IsVisible { get; set; }\n\n    [Parameter]\n    public RenderFragment ChildContent { get;  set; }\n}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cul\u003e\n\u003cli\u003e呼び出し側(親)の方は\u003ccode\u003e\u0026lt;ServerValidations\u0026gt;\u003c/code\u003eのタグの中に「\u003cstrong\u003eServerValidations.razor\u003c/strong\u003e」の\u003ccode\u003e@ClildContent\u003c/code\u003eで表示したいものを書くよ。HTMLとかも書けるよ。\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e(\u003cdel\u003eなんかわからんけど↓のコードだと実行エラーになる・・・\u003c/del\u003e)\u003cbr\u003e\n→「\u003cstrong\u003eServerValidations.razor\u003c/strong\u003e」の\u003ccode\u003eChildContent\u003c/code\u003eを\u003ccode\u003eClildContent\u003c/code\u003eって打ってたのが原因だった。このプロパティ名って固定なのな。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"html\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eAuthor.razor\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e@page \"/authors\"\n\u003cspan class=\"nt\"\u003e\u0026lt;ServerValidations\u003c/span\u003e \u003cspan class=\"na\"\u003eIsVisible=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"IsVisible\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;span\u0026gt;\u003c/span\u003e著者：\u003cspan class=\"nt\"\u003e\u0026lt;/span\u0026gt;\u003c/span\u003e@RecordName \n\u003cspan class=\"nt\"\u003e\u0026lt;/ServerValidations\u0026gt;\u003c/span\u003e\n\n@code {\n    public bool IsVisible { get; set; }\n    public string RecordName { get; set; }\n\n    private async Task SaveAuthor() {\n        IsVisible = true;\n        RecordName = author.FirstName + \" \" + author.LastName;\n(以下略)\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cul\u003e\n\u003cli\u003e動かしてみると呼び出し側(親)の方で\u003ccode\u003e\u0026lt;ServerValidations\u0026gt;\u003c/code\u003eのタグの中に書いた内容がコンポーネント側(子)の方に表示されテルルがわかるね。\u003c/li\u003e\n\u003cli\u003eパラメータに\u003ccode\u003ebool Result\u003c/code\u003eとかを足してやればエラー表示もできるね。\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e(動画では styleとか指定してるけど省略)\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"html\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e@if (IsVisible)\n{\n    @if (Result){\n        \u003cspan class=\"nt\"\u003e\u0026lt;div\u003c/span\u003e \u003cspan class=\"na\"\u003eid=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"divServiceValidations\"\u003c/span\u003e \u003cspan class=\"na\"\u003eclass=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"col-10 alert alert-info\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e\n            @ChildContent  保存完了\n        \u003cspan class=\"nt\"\u003e\u0026lt;/div\u0026gt;\u003c/span\u003e\n    }else{\n        \u003cspan class=\"nt\"\u003e\u0026lt;div\u003c/span\u003e \u003cspan class=\"na\"\u003eid=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"divServiceValidations\"\u003c/span\u003e \u003cspan class=\"na\"\u003eclass=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"col-10 alert alert-danger\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e\n            サーバーエラーです。管理者に問い合わせてください。\n        \u003cspan class=\"nt\"\u003e\u0026lt;/div\u0026gt;\u003c/span\u003e\n    }\n}\n\n@code {\n    [Parameter]\n    public bool IsVisible { get; set; }\n\n    [Parameter]\n    public bool Result { get; set; }\n\n    [Parameter]\n    public RenderFragment ChildContent { get; set; }\n}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cul\u003e\n\u003cli\u003eあとこのメッセージを×で閉じれるようにしてみよう。ページと同じようにイベントを記述できるよ。\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e@if (IsVisible){\n    @if (Result){\n        \u0026lt;div id=\"divValidationMessage\" class=\"col-10 alert alert-danger row\"\u0026gt;\n            \u0026lt;div class=\"col-11\" style=\"text-align:left\"\u0026gt;\n                @ChildContent  保存完了\n            \u0026lt;/div\u0026gt;\n            \u0026lt;div class=\"col-1\" style=\"text-align:right\"\u0026gt;\n                \u0026lt;a style=\"text-underline-position:below; cursor:pointer\" @onclick=\"CloseValidation\"\u0026gt;x\u0026lt;/a\u0026gt;\n            \u0026lt;/div\u0026gt;\n        \u0026lt;/div\u0026gt;\n    }else{\n        \u0026lt;div id=\"divValidationMessage\" class=\"col-10 alert alert-danger row\"\u0026gt;\n            \u0026lt;div class=\"col-11\" style=\"text-align:left\"\u0026gt;\n                サーバーエラーです。管理者に問い合わせてください。\n            \u0026lt;/div\u0026gt;\n            \u0026lt;div class=\"col-1\" style=\"text-align:right\"\u0026gt;\n                \u0026lt;a style=\"text-underline-position:below; cursor:pointer\" @onclick=\"CloseValidation\"\u0026gt;x\u0026lt;/a\u0026gt;\n            \u0026lt;/div\u0026gt;\n        \u0026lt;/div\u0026gt;\n    }\n}\n\n@code {\n    [Parameter]\n    public bool IsVisible { get; set; }\n\n    [Parameter]\n    public bool Result { get; set; }\n\n    [Parameter]\n    public RenderFragment ChildContent { get; set; }\n\n    public void CloseValidation(){\n        IsVisible = false;\n    }\n}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e(そういやこれ、タグに全部プロパティを一個一個書くより\u003ccode\u003e@ref\u003c/code\u003e使ったほうがいいな)\u003cbr\u003e\n(\u003ccode\u003eIsVisible\u003c/code\u003eとかの\u003ccode\u003e[Parameter]\u003c/code\u003eは消さないと「パラメータ指定してねーぞ」って警告が出た)\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e(略)\n\u0026lt;ServerValidations @ref=\"ServerValidationsCtrl\"\u0026gt;\n    \u0026lt;span\u0026gt;著者：@RecordName\u0026lt;/span\u0026gt;\n\u0026lt;/ServerValidations\u0026gt;\n(中略)\n@code {\n    public ServerValidations ServerValidationsCtrl;\n\n    public void SaveAuthor(){\n        RecordName = author.FirstName + \" \" + author.LastName;\n        ServerValidationsCtrl.IsVisible = true;\n        ServerValidationsCtrl.Result = false;\n    }\n(略)\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cul\u003e\n\u003cli\u003e実際に再利用してみよう。簡単だね。\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"ep08razorコンポーネントのライフサイクル\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#ep08razor%E3%82%B3%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%8D%E3%83%B3%E3%83%88%E3%81%AE%E3%83%A9%E3%82%A4%E3%83%95%E3%82%B5%E3%82%A4%E3%82%AF%E3%83%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eEP08:Razorコンポーネントのライフサイクル\u003c/h1\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003cp\u003e今回はRazorコンポーネントのライフサイクルについて話すよ。\u003cbr\u003e\n(この章、自動翻訳が微妙過ぎて何言ってんのかわからん・・・、他のWebサイトも含めてまとめていこ)\u003cbr\u003e\n\u003ca href=\"https://blog.piyosi.com/entry/2019/10/01/190532\" rel=\"nofollow noopener\" target=\"_blank\"\u003eBlazorのLifecycleとShouldRenderの挙動について\u003c/a\u003e\u003cbr\u003e\n\u003ca href=\"https://github.com/dotnet/AspNetCore.Docs.ja-jp/blob/live/aspnetcore/blazor/components/lifecycle.md\" rel=\"nofollow noopener\" target=\"_blank\"\u003eAspNetCore.Docs.ja-jp - lifecycle.md/GitHub\u003c/a\u003e\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e初期化イベントだけど次の順で発生するよ\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e\u003ccode\u003eOnInitialized\u003c/code\u003e \u003ccode\u003eOnInitializedAsync\u003c/code\u003e：アプリの設定とかタイトルとか設定するといいね。\u003ccode\u003eOnInitializedAsync\u003c/code\u003eは非同期だからDB読んだりしてもいいね。\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e\u003ccode\u003eSetParametersAsync\u003c/code\u003e(動画では言ってないけど↑にあったので追加)Razorコンポーネントにパラメーターがセットされる前に呼ばれるよ。渡されたパラメーターのチェックができるね。セットされたプロパティの値は\u003ccode\u003eparameters.GetValueOrDefault\u0026lt;プロパティの型\u0026gt;(\"プロパティ名\")\u003c/code\u003eで取れるよ。\u003ccode\u003eawait base.SetParametersAsync(parameters);\u003c/code\u003eを呼ばないようにすれば値は反映されないよ。他と違って非同期しかないっぽいよ。\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e\u003ccode\u003eOnParametersSet\u003c/code\u003e \u003ccode\u003eOnParametersSetAsync\u003c/code\u003e：Razorコンポーネントにパラメーターがセットされたあとに呼ばれるよ。渡されたパラメーターを元に何か処理するならここだね。\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e\u003ccode\u003eOnAfterRender\u003c/code\u003e \u003ccode\u003eOnAfterRenderAsync\u003c/code\u003e：画面がレンダリングされた後に呼ばれるよ。DOMも作られてるからJavaScript呼ぶならここだね。初期化の流れで何かするならここが最後のチャンスだね。例えばDBから値を取れなかった時のリトライ処理とか。\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e言わずもがなだけど、Asyncってついてる奴は非同期メソッドだね。\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eあと一回表示したあとは画面更新前に\u003ccode\u003eShouldRender\u003c/code\u003eっていうイベントが起きて、ここでfalseを返すと画面更新をやめるよ。\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eデフォルトではないけど\u003ccode\u003eIDisposable\u003c/code\u003eを継承して\u003ccode\u003eDispose\u003c/code\u003eを実装すればページ遷移時の後処理を実装できるよ。\u003cbr\u003e\n　\u003cdel\u003e(Razorコンポーネントに\u003ccode\u003eIDisposable\u003c/code\u003e継承させるってどうやるんやろ？)\u003c/del\u003e\u003cbr\u003e\n　→\u003ca href=\"https://blazor-university.com/components/component-lifecycles/\" rel=\"nofollow noopener\" target=\"_blank\"\u003eComponent lifecycles - Blazor University\u003c/a\u003eにあった。\u003c/p\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e@implements IDisposable\n\u0026lt;h1\u0026gt;This is MyComponent\u0026lt;/h1\u0026gt;\n@code {\n  void IDisposable.Dispose(){\n    // Code here\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cul\u003e\n\u003cli\u003eそれじゃ実際に動かしてみよう。コードはこんな感じだよ。\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eAuthors.razor\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"n\"\u003e@page\u003c/span\u003e \u003cspan class=\"s\"\u003e\"/authors\"\u003c/span\u003e\n\u003cspan class=\"n\"\u003e@implements\u003c/span\u003e \u003cspan class=\"n\"\u003eIDisposable\u003c/span\u003e\n\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eh3\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003eAuthors\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"n\"\u003eh3\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eServerValidations\u003c/span\u003e \u003cspan class=\"n\"\u003e@ref\u003c/span\u003e\u003cspan class=\"p\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"ServerValidationsCtrl\"\u003c/span\u003e \u003cspan class=\"n\"\u003eIsVisible\u003c/span\u003e\u003cspan class=\"p\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"IsVisible\"\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003espan\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"err\"\u003e著者：\u003c/span\u003e\u003cspan class=\"n\"\u003e@RecordName\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"n\"\u003espan\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"n\"\u003eServerValidations\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n\n\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eEditForm\u003c/span\u003e \u003cspan class=\"n\"\u003eModel\u003c/span\u003e\u003cspan class=\"p\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"@author\"\u003c/span\u003e \u003cspan class=\"n\"\u003eOnValidSubmit\u003c/span\u003e\u003cspan class=\"p\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"@SaveAuthor\"\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003ediv\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e\u003cspan class=\"err\"\u003e=\"\u003c/span\u003e\u003cspan class=\"nc\"\u003ecol\u003c/span\u003e\u003cspan class=\"p\"\u003e-\u003c/span\u003e\u003cspan class=\"m\"\u003e12\u003c/span\u003e \u003cspan class=\"n\"\u003erow\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u0026gt;\n\u003c/span\u003e        \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003elabel\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e\u003cspan class=\"err\"\u003e=\"\u003c/span\u003e\u003cspan class=\"nc\"\u003ecol\u003c/span\u003e\u003cspan class=\"p\"\u003e-\u003c/span\u003e\u003cspan class=\"m\"\u003e2\u003c/span\u003e \u003cspan class=\"n\"\u003efont\u003c/span\u003e\u003cspan class=\"p\"\u003e-\u003c/span\u003e\u003cspan class=\"n\"\u003eweight\u003c/span\u003e\u003cspan class=\"p\"\u003e-\u003c/span\u003e\u003cspan class=\"n\"\u003ebold\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u0026gt;first name :\u0026lt;/label\u0026gt;\n\u003c/span\u003e        \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003einput\u003c/span\u003e \u003cspan class=\"n\"\u003e@ref\u003c/span\u003e\u003cspan class=\"p\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"firstnameText\"\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e\u003cspan class=\"err\"\u003e=\"\u003c/span\u003e\u003cspan class=\"nc\"\u003eform\u003c/span\u003e\u003cspan class=\"p\"\u003e-\u003c/span\u003e\u003cspan class=\"n\"\u003econtrol\u003c/span\u003e \u003cspan class=\"n\"\u003ecol\u003c/span\u003e\u003cspan class=\"p\"\u003e-\u003c/span\u003e\u003cspan class=\"m\"\u003e3\u003c/span\u003e\u003cspan class=\"s\"\u003e\" @bind=\"\u003c/span\u003e\u003cspan class=\"n\"\u003eauthor\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eFirstName\u003c/span\u003e\u003cspan class=\"s\"\u003e\" placeholder=\"\u003c/span\u003e\u003cspan class=\"n\"\u003efirst\u003c/span\u003e \u003cspan class=\"n\"\u003ename\u003c/span\u003e\u003cspan class=\"s\"\u003e\" /\u0026gt;\n\u003c/span\u003e        \u003cspan class=\"p\"\u003e\u0026amp;\u003c/span\u003e\u003cspan class=\"n\"\u003enbsp\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eValidationMessage\u003c/span\u003e \u003cspan class=\"n\"\u003eFor\u003c/span\u003e\u003cspan class=\"p\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"@(()=\u0026gt;author.FirstName)\"\u003c/span\u003e \u003cspan class=\"p\"\u003e/\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"n\"\u003ediv\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003ebr\u003c/span\u003e \u003cspan class=\"p\"\u003e/\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003ediv\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e\u003cspan class=\"err\"\u003e=\"\u003c/span\u003e\u003cspan class=\"nc\"\u003ecol\u003c/span\u003e\u003cspan class=\"p\"\u003e-\u003c/span\u003e\u003cspan class=\"m\"\u003e12\u003c/span\u003e \u003cspan class=\"n\"\u003erow\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u0026gt;\n\u003c/span\u003e        \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003elabel\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e\u003cspan class=\"err\"\u003e=\"\u003c/span\u003e\u003cspan class=\"nc\"\u003ecol\u003c/span\u003e\u003cspan class=\"p\"\u003e-\u003c/span\u003e\u003cspan class=\"m\"\u003e2\u003c/span\u003e \u003cspan class=\"n\"\u003efont\u003c/span\u003e\u003cspan class=\"p\"\u003e-\u003c/span\u003e\u003cspan class=\"n\"\u003eweight\u003c/span\u003e\u003cspan class=\"p\"\u003e-\u003c/span\u003e\u003cspan class=\"n\"\u003ebold\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u0026gt;last name :\u0026lt;/label\u0026gt;\n\u003c/span\u003e        \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eInputText\u003c/span\u003e \u003cspan class=\"n\"\u003eid\u003c/span\u003e\u003cspan class=\"p\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"lastnameText\"\u003c/span\u003e \u003cspan class=\"n\"\u003e@ref\u003c/span\u003e\u003cspan class=\"p\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"lastnameText\"\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e\u003cspan class=\"err\"\u003e=\"\u003c/span\u003e\u003cspan class=\"nc\"\u003eform\u003c/span\u003e\u003cspan class=\"p\"\u003e-\u003c/span\u003e\u003cspan class=\"n\"\u003econtrol\u003c/span\u003e \u003cspan class=\"n\"\u003ecol\u003c/span\u003e\u003cspan class=\"p\"\u003e-\u003c/span\u003e\u003cspan class=\"m\"\u003e3\u003c/span\u003e\u003cspan class=\"s\"\u003e\" @bind-Value=\"\u003c/span\u003e\u003cspan class=\"n\"\u003eauthor\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eLastName\u003c/span\u003e\u003cspan class=\"s\"\u003e\" placeholder=\"\u003c/span\u003e\u003cspan class=\"n\"\u003elast\u003c/span\u003e \u003cspan class=\"n\"\u003ename\u003c/span\u003e\u003cspan class=\"s\"\u003e\" /\u0026gt;\n\u003c/span\u003e        \u003cspan class=\"p\"\u003e\u0026amp;\u003c/span\u003e\u003cspan class=\"n\"\u003enbsp\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eValidationMessage\u003c/span\u003e \u003cspan class=\"n\"\u003eFor\u003c/span\u003e\u003cspan class=\"p\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"@(()=\u0026gt;author.LastName)\"\u003c/span\u003e \u003cspan class=\"p\"\u003e/\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"n\"\u003ediv\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003ebr\u003c/span\u003e \u003cspan class=\"p\"\u003e/\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003ediv\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e\u003cspan class=\"err\"\u003e=\"\u003c/span\u003e\u003cspan class=\"nc\"\u003ecol\u003c/span\u003e\u003cspan class=\"p\"\u003e-\u003c/span\u003e\u003cspan class=\"m\"\u003e12\u003c/span\u003e \u003cspan class=\"n\"\u003erow\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u0026gt;\n\u003c/span\u003e        \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003elabel\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e\u003cspan class=\"err\"\u003e=\"\u003c/span\u003e\u003cspan class=\"nc\"\u003ecol\u003c/span\u003e\u003cspan class=\"p\"\u003e-\u003c/span\u003e\u003cspan class=\"m\"\u003e2\u003c/span\u003e \u003cspan class=\"n\"\u003efont\u003c/span\u003e\u003cspan class=\"p\"\u003e-\u003c/span\u003e\u003cspan class=\"n\"\u003eweight\u003c/span\u003e\u003cspan class=\"p\"\u003e-\u003c/span\u003e\u003cspan class=\"n\"\u003ebold\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u0026gt;city :\u0026lt;/label\u0026gt;\n\u003c/span\u003e        \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eInputSelect\u003c/span\u003e \u003cspan class=\"n\"\u003e@ref\u003c/span\u003e\u003cspan class=\"p\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"CitiesSelect\"\u003c/span\u003e \u003cspan class=\"n\"\u003e@bind\u003c/span\u003e\u003cspan class=\"p\"\u003e-\u003c/span\u003e\u003cspan class=\"n\"\u003eValue\u003c/span\u003e\u003cspan class=\"p\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"author.City\"\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eoption\u003c/span\u003e \u003cspan class=\"k\"\u003evalue\u003c/span\u003e\u003cspan class=\"p\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"none\"\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"err\"\u003e選んでね\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"n\"\u003eoption\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eoption\u003c/span\u003e \u003cspan class=\"k\"\u003evalue\u003c/span\u003e\u003cspan class=\"p\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"A\"\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"n\"\u003eoption\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eoption\u003c/span\u003e \u003cspan class=\"k\"\u003evalue\u003c/span\u003e\u003cspan class=\"p\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"B\"\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003eB\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"n\"\u003eoption\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eoption\u003c/span\u003e \u003cspan class=\"k\"\u003evalue\u003c/span\u003e\u003cspan class=\"p\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"C\"\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003eC\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"n\"\u003eoption\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"n\"\u003eInputSelect\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e\u0026amp;\u003c/span\u003e\u003cspan class=\"n\"\u003enbsp\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eValidationMessage\u003c/span\u003e \u003cspan class=\"n\"\u003eFor\u003c/span\u003e\u003cspan class=\"p\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"@(()=\u0026gt;author.City)\"\u003c/span\u003e \u003cspan class=\"p\"\u003e/\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"n\"\u003ediv\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003ebr\u003c/span\u003e \u003cspan class=\"p\"\u003e/\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003ediv\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e\u003cspan class=\"err\"\u003e=\"\u003c/span\u003e\u003cspan class=\"nc\"\u003ecol\u003c/span\u003e\u003cspan class=\"p\"\u003e-\u003c/span\u003e\u003cspan class=\"m\"\u003e12\u003c/span\u003e \u003cspan class=\"n\"\u003erow\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u0026gt;\n\u003c/span\u003e        \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003elabel\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e\u003cspan class=\"err\"\u003e=\"\u003c/span\u003e\u003cspan class=\"nc\"\u003ecol\u003c/span\u003e\u003cspan class=\"p\"\u003e-\u003c/span\u003e\u003cspan class=\"m\"\u003e2\u003c/span\u003e \u003cspan class=\"n\"\u003efont\u003c/span\u003e\u003cspan class=\"p\"\u003e-\u003c/span\u003e\u003cspan class=\"n\"\u003eweight\u003c/span\u003e\u003cspan class=\"p\"\u003e-\u003c/span\u003e\u003cspan class=\"n\"\u003ebold\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u0026gt;email address :\u0026lt;/label\u0026gt;\n\u003c/span\u003e        \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eInputText\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e\u003cspan class=\"err\"\u003e=\"\u003c/span\u003e\u003cspan class=\"nc\"\u003eform\u003c/span\u003e\u003cspan class=\"p\"\u003e-\u003c/span\u003e\u003cspan class=\"n\"\u003econtrol\u003c/span\u003e \u003cspan class=\"n\"\u003ecol\u003c/span\u003e\u003cspan class=\"p\"\u003e-\u003c/span\u003e\u003cspan class=\"m\"\u003e3\u003c/span\u003e\u003cspan class=\"s\"\u003e\" @bind-Value=\"\u003c/span\u003e\u003cspan class=\"n\"\u003eauthor\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eEmailAddress\u003c/span\u003e\u003cspan class=\"s\"\u003e\" placeholder=\"\u003c/span\u003e\u003cspan class=\"n\"\u003eemail\u003c/span\u003e \u003cspan class=\"n\"\u003eaddress\u003c/span\u003e\u003cspan class=\"s\"\u003e\" /\u0026gt;\n\u003c/span\u003e        \u003cspan class=\"p\"\u003e\u0026amp;\u003c/span\u003e\u003cspan class=\"n\"\u003enbsp\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eValidationMessage\u003c/span\u003e \u003cspan class=\"n\"\u003eFor\u003c/span\u003e\u003cspan class=\"p\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"@(()=\u0026gt;author.EmailAddress)\"\u003c/span\u003e \u003cspan class=\"p\"\u003e/\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"n\"\u003ediv\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003ebr\u003c/span\u003e \u003cspan class=\"p\"\u003e/\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003ediv\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e\u003cspan class=\"err\"\u003e=\"\u003c/span\u003e\u003cspan class=\"nc\"\u003ecol\u003c/span\u003e\u003cspan class=\"p\"\u003e-\u003c/span\u003e\u003cspan class=\"m\"\u003e12\u003c/span\u003e \u003cspan class=\"n\"\u003erow\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u0026gt;\n\u003c/span\u003e        \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003elabel\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e\u003cspan class=\"err\"\u003e=\"\u003c/span\u003e\u003cspan class=\"nc\"\u003ecol\u003c/span\u003e\u003cspan class=\"p\"\u003e-\u003c/span\u003e\u003cspan class=\"m\"\u003e2\u003c/span\u003e \u003cspan class=\"n\"\u003efont\u003c/span\u003e\u003cspan class=\"p\"\u003e-\u003c/span\u003e\u003cspan class=\"n\"\u003eweight\u003c/span\u003e\u003cspan class=\"p\"\u003e-\u003c/span\u003e\u003cspan class=\"n\"\u003ebold\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u0026gt;email address :\u0026lt;/label\u0026gt;\n\u003c/span\u003e        \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eInputNumber\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e\u003cspan class=\"err\"\u003e=\"\u003c/span\u003e\u003cspan class=\"nc\"\u003eform\u003c/span\u003e\u003cspan class=\"p\"\u003e-\u003c/span\u003e\u003cspan class=\"n\"\u003econtrol\u003c/span\u003e \u003cspan class=\"n\"\u003ecol\u003c/span\u003e\u003cspan class=\"p\"\u003e-\u003c/span\u003e\u003cspan class=\"m\"\u003e3\u003c/span\u003e\u003cspan class=\"s\"\u003e\" @bind-Value=\"\u003c/span\u003e\u003cspan class=\"n\"\u003eauthor\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eSalary\u003c/span\u003e\u003cspan class=\"s\"\u003e\" placeholder=\"\u003c/span\u003e\u003cspan class=\"n\"\u003eemail\u003c/span\u003e \u003cspan class=\"n\"\u003eaddress\u003c/span\u003e\u003cspan class=\"s\"\u003e\" /\u0026gt;\n\u003c/span\u003e        \u003cspan class=\"p\"\u003e\u0026amp;\u003c/span\u003e\u003cspan class=\"n\"\u003enbsp\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eValidationMessage\u003c/span\u003e \u003cspan class=\"n\"\u003eFor\u003c/span\u003e\u003cspan class=\"p\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"@(()=\u0026gt;author.Salary)\"\u003c/span\u003e \u003cspan class=\"p\"\u003e/\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"n\"\u003ediv\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003ebr\u003c/span\u003e \u003cspan class=\"p\"\u003e/\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003ediv\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e\u003cspan class=\"err\"\u003e=\"\u003c/span\u003e\u003cspan class=\"nc\"\u003ecol\u003c/span\u003e\u003cspan class=\"p\"\u003e-\u003c/span\u003e\u003cspan class=\"m\"\u003e12\u003c/span\u003e \u003cspan class=\"n\"\u003erow\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u0026gt;\n\u003c/span\u003e        \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003espan\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e\u003cspan class=\"err\"\u003e=\"\u003c/span\u003e\u003cspan class=\"nc\"\u003ecol\u003c/span\u003e\u003cspan class=\"p\"\u003e-\u003c/span\u003e\u003cspan class=\"m\"\u003e2\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u0026gt;\u0026lt;/span\u0026gt;\n\u003c/span\u003e        \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003einput\u003c/span\u003e \u003cspan class=\"n\"\u003etype\u003c/span\u003e\u003cspan class=\"p\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"submit\"\u003c/span\u003e \u003cspan class=\"n\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"btnSave\"\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e\u003cspan class=\"err\"\u003e=\"\u003c/span\u003e\u003cspan class=\"nc\"\u003eform\u003c/span\u003e\u003cspan class=\"p\"\u003e-\u003c/span\u003e\u003cspan class=\"n\"\u003econtrol\u003c/span\u003e \u003cspan class=\"n\"\u003ecol\u003c/span\u003e\u003cspan class=\"p\"\u003e-\u003c/span\u003e\u003cspan class=\"m\"\u003e1\u003c/span\u003e \u003cspan class=\"n\"\u003ebtn\u003c/span\u003e \u003cspan class=\"n\"\u003ebtn\u003c/span\u003e\u003cspan class=\"p\"\u003e-\u003c/span\u003e\u003cspan class=\"n\"\u003eprimary\u003c/span\u003e\u003cspan class=\"s\"\u003e\" value=\"\u003c/span\u003e\u003cspan class=\"n\"\u003eSave\u003c/span\u003e\u003cspan class=\"s\"\u003e\" /\u0026gt;\n\u003c/span\u003e        \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003espan\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026amp;\u003c/span\u003e\u003cspan class=\"n\"\u003enbsp\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u0026lt;/\u003c/span\u003e\u003cspan class=\"n\"\u003espan\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003einput\u003c/span\u003e \u003cspan class=\"n\"\u003etype\u003c/span\u003e\u003cspan class=\"p\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"reset\"\u003c/span\u003e \u003cspan class=\"n\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"btnClear\"\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e\u003cspan class=\"err\"\u003e=\"\u003c/span\u003e\u003cspan class=\"nc\"\u003eform\u003c/span\u003e\u003cspan class=\"p\"\u003e-\u003c/span\u003e\u003cspan class=\"n\"\u003econtrol\u003c/span\u003e \u003cspan class=\"n\"\u003ecol\u003c/span\u003e\u003cspan class=\"p\"\u003e-\u003c/span\u003e\u003cspan class=\"m\"\u003e1\u003c/span\u003e \u003cspan class=\"n\"\u003ebtn\u003c/span\u003e \u003cspan class=\"n\"\u003ebtn\u003c/span\u003e\u003cspan class=\"p\"\u003e-\u003c/span\u003e\u003cspan class=\"n\"\u003eprimary\u003c/span\u003e\u003cspan class=\"s\"\u003e\" @onclick=\"\u003c/span\u003e\u003cspan class=\"n\"\u003eClear\u003c/span\u003e\u003cspan class=\"s\"\u003e\" value=\"\u003c/span\u003e\u003cspan class=\"n\"\u003eClear\u003c/span\u003e\u003cspan class=\"s\"\u003e\" /\u0026gt;\n\u003c/span\u003e    \u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"n\"\u003ediv\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"n\"\u003eEditForm\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eServerValidations.razor\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"n\"\u003e@implements\u003c/span\u003e \u003cspan class=\"n\"\u003eIDisposable\u003c/span\u003e\n\n\u003cspan class=\"nf\"\u003e@if\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eIsVisible\u003c/span\u003e\u003cspan class=\"p\"\u003e){\u003c/span\u003e\n    \u003cspan class=\"nf\"\u003e@if\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eResult\u003c/span\u003e\u003cspan class=\"p\"\u003e){\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003ediv\u003c/span\u003e \u003cspan class=\"n\"\u003eid\u003c/span\u003e\u003cspan class=\"p\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"divValidationMessage\"\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e\u003cspan class=\"err\"\u003e=\"\u003c/span\u003e\u003cspan class=\"nc\"\u003ecol\u003c/span\u003e\u003cspan class=\"p\"\u003e-\u003c/span\u003e\u003cspan class=\"m\"\u003e10\u003c/span\u003e \u003cspan class=\"n\"\u003ealert\u003c/span\u003e \u003cspan class=\"n\"\u003ealert\u003c/span\u003e\u003cspan class=\"p\"\u003e-\u003c/span\u003e\u003cspan class=\"n\"\u003edanger\u003c/span\u003e \u003cspan class=\"n\"\u003erow\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u0026gt;\n\u003c/span\u003e            \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003ediv\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e\u003cspan class=\"err\"\u003e=\"\u003c/span\u003e\u003cspan class=\"nc\"\u003ecol\u003c/span\u003e\u003cspan class=\"p\"\u003e-\u003c/span\u003e\u003cspan class=\"m\"\u003e11\u003c/span\u003e\u003cspan class=\"s\"\u003e\" style=\"\u003c/span\u003e\u003cspan class=\"n\"\u003etext\u003c/span\u003e\u003cspan class=\"p\"\u003e-\u003c/span\u003e\u003cspan class=\"n\"\u003ealign\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"n\"\u003eleft\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u0026gt;\n\u003c/span\u003e                \u003cspan class=\"n\"\u003e@ChildContent\u003c/span\u003e  \u003cspan class=\"err\"\u003e保存完了\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"n\"\u003ediv\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003ediv\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e\u003cspan class=\"err\"\u003e=\"\u003c/span\u003e\u003cspan class=\"nc\"\u003ecol\u003c/span\u003e\u003cspan class=\"p\"\u003e-\u003c/span\u003e\u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"s\"\u003e\" style=\"\u003c/span\u003e\u003cspan class=\"n\"\u003etext\u003c/span\u003e\u003cspan class=\"p\"\u003e-\u003c/span\u003e\u003cspan class=\"n\"\u003ealign\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"n\"\u003eright\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u0026gt;\n\u003c/span\u003e                \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003ea\u003c/span\u003e \u003cspan class=\"n\"\u003estyle\u003c/span\u003e\u003cspan class=\"p\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"text-underline-position:below; cursor:pointer\"\u003c/span\u003e \u003cspan class=\"n\"\u003e@onclick\u003c/span\u003e\u003cspan class=\"p\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"CloseValidation\"\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"n\"\u003ea\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"n\"\u003ediv\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"n\"\u003ediv\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"k\"\u003eelse\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003ediv\u003c/span\u003e \u003cspan class=\"n\"\u003eid\u003c/span\u003e\u003cspan class=\"p\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"divValidationMessage\"\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e\u003cspan class=\"err\"\u003e=\"\u003c/span\u003e\u003cspan class=\"nc\"\u003ecol\u003c/span\u003e\u003cspan class=\"p\"\u003e-\u003c/span\u003e\u003cspan class=\"m\"\u003e10\u003c/span\u003e \u003cspan class=\"n\"\u003ealert\u003c/span\u003e \u003cspan class=\"n\"\u003ealert\u003c/span\u003e\u003cspan class=\"p\"\u003e-\u003c/span\u003e\u003cspan class=\"n\"\u003edanger\u003c/span\u003e \u003cspan class=\"n\"\u003erow\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u0026gt;\n\u003c/span\u003e            \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003ediv\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e\u003cspan class=\"err\"\u003e=\"\u003c/span\u003e\u003cspan class=\"nc\"\u003ecol\u003c/span\u003e\u003cspan class=\"p\"\u003e-\u003c/span\u003e\u003cspan class=\"m\"\u003e11\u003c/span\u003e\u003cspan class=\"s\"\u003e\" style=\"\u003c/span\u003e\u003cspan class=\"n\"\u003etext\u003c/span\u003e\u003cspan class=\"p\"\u003e-\u003c/span\u003e\u003cspan class=\"n\"\u003ealign\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"n\"\u003eleft\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u0026gt;\n\u003c/span\u003e                \u003cspan class=\"err\"\u003eサーバーエラーです。管理者に問い合わせてください。\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"n\"\u003ediv\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003ediv\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e\u003cspan class=\"err\"\u003e=\"\u003c/span\u003e\u003cspan class=\"nc\"\u003ecol\u003c/span\u003e\u003cspan class=\"p\"\u003e-\u003c/span\u003e\u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"s\"\u003e\" style=\"\u003c/span\u003e\u003cspan class=\"n\"\u003etext\u003c/span\u003e\u003cspan class=\"p\"\u003e-\u003c/span\u003e\u003cspan class=\"n\"\u003ealign\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"n\"\u003eright\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u0026gt;\n\u003c/span\u003e                \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003ea\u003c/span\u003e \u003cspan class=\"n\"\u003estyle\u003c/span\u003e\u003cspan class=\"p\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"text-underline-position:below; cursor:pointer\"\u003c/span\u003e \u003cspan class=\"n\"\u003e@onclick\u003c/span\u003e\u003cspan class=\"p\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"CloseValidation\"\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"n\"\u003ea\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"n\"\u003ediv\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e\u0026lt;/\u003c/span\u003e\u003cspan class=\"n\"\u003ediv\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"n\"\u003e@code\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eParameter\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"n\"\u003eIsVisible\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"k\"\u003eset\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"n\"\u003eResult\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"k\"\u003eset\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eParameter\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eRenderFragment\u003c/span\u003e \u003cspan class=\"n\"\u003eChildContent\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"k\"\u003eset\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003eprotected\u003c/span\u003e \u003cspan class=\"k\"\u003eoverride\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eOnInitialized\u003c/span\u003e\u003cspan class=\"p\"\u003e(){\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eConsole\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWriteLine\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"ServerValidations - OnInitialized\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ebase\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eOnInitialized\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003eprotected\u003c/span\u003e \u003cspan class=\"k\"\u003eoverride\u003c/span\u003e \u003cspan class=\"k\"\u003easync\u003c/span\u003e \u003cspan class=\"n\"\u003eTask\u003c/span\u003e \u003cspan class=\"nf\"\u003eOnInitializedAsync\u003c/span\u003e\u003cspan class=\"p\"\u003e(){\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eConsole\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWriteLine\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"ServerValidations - OnInitializedAsync\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eawait\u003c/span\u003e \u003cspan class=\"k\"\u003ebase\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eOnInitializedAsync\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eoverride\u003c/span\u003e \u003cspan class=\"k\"\u003easync\u003c/span\u003e \u003cspan class=\"n\"\u003eTask\u003c/span\u003e \u003cspan class=\"nf\"\u003eSetParametersAsync\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eParameterView\u003c/span\u003e \u003cspan class=\"n\"\u003eparameters\u003c/span\u003e\u003cspan class=\"p\"\u003e){\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eConsole\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWriteLine\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"ServerValidations - SetParametersAsync / IsVisible=\"\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"n\"\u003eIsVisible\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eToString\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"s\"\u003e\" / parameters.GetValueOrDefault\u0026lt;bool\u0026gt;(\\\"IsVisible\\\")=\"\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"n\"\u003eparameters\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eGetValueOrDefault\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003ebool\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"IsVisible\"\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nf\"\u003eToString\u003c/span\u003e\u003cspan class=\"p\"\u003e());\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eawait\u003c/span\u003e \u003cspan class=\"k\"\u003ebase\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSetParametersAsync\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eparameters\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003eprotected\u003c/span\u003e \u003cspan class=\"k\"\u003eoverride\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eOnParametersSet\u003c/span\u003e\u003cspan class=\"p\"\u003e(){\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eConsole\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWriteLine\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"ServerValidations - OnParametersSet / IsVisible=\"\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"n\"\u003eIsVisible\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eToString\u003c/span\u003e\u003cspan class=\"p\"\u003e());\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ebase\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eOnParametersSet\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003eprotected\u003c/span\u003e \u003cspan class=\"k\"\u003eoverride\u003c/span\u003e \u003cspan class=\"k\"\u003easync\u003c/span\u003e \u003cspan class=\"n\"\u003eTask\u003c/span\u003e \u003cspan class=\"nf\"\u003eOnParametersSetAsync\u003c/span\u003e\u003cspan class=\"p\"\u003e(){\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eConsole\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWriteLine\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"ServerValidations - OnParametersSetAsync / IsVisible=\"\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"n\"\u003eIsVisible\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eToString\u003c/span\u003e\u003cspan class=\"p\"\u003e());\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eawait\u003c/span\u003e \u003cspan class=\"k\"\u003ebase\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eOnParametersSetAsync\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003eprotected\u003c/span\u003e \u003cspan class=\"k\"\u003eoverride\u003c/span\u003e \u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"nf\"\u003eShouldRender\u003c/span\u003e\u003cspan class=\"p\"\u003e(){\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ebase\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eShouldRender\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eConsole\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWriteLine\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"ServerValidations - ShouldRender\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003eprotected\u003c/span\u003e \u003cspan class=\"k\"\u003eoverride\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eOnAfterRender\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"n\"\u003efirstRender\u003c/span\u003e\u003cspan class=\"p\"\u003e){\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eConsole\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWriteLine\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"ServerValidations - OnAfterRender - firstRender = \"\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"n\"\u003efirstRender\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ebase\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eOnAfterRender\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003efirstRender\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003eprotected\u003c/span\u003e \u003cspan class=\"k\"\u003eoverride\u003c/span\u003e \u003cspan class=\"k\"\u003easync\u003c/span\u003e \u003cspan class=\"n\"\u003eTask\u003c/span\u003e \u003cspan class=\"nf\"\u003eOnAfterRenderAsync\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"n\"\u003efirstRender\u003c/span\u003e\u003cspan class=\"p\"\u003e){\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eConsole\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWriteLine\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"ServerValidations - OnAfterRenderAsync - firstRender = \"\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"n\"\u003efirstRender\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eawait\u003c/span\u003e \u003cspan class=\"k\"\u003ebase\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eOnAfterRenderAsync\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003efirstRender\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"n\"\u003eIDisposable\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eDispose\u003c/span\u003e\u003cspan class=\"p\"\u003e(){\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eConsole\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWriteLine\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"ServerValidations - Dispose\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eCloseValidation\u003c/span\u003e\u003cspan class=\"p\"\u003e(){\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eIsVisible\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003efalse\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cul\u003e\n\u003cli\u003eアプリを立ち上げただけでは初期化処理が呼ばれてないのがわかるね。\u003c/li\u003e\n\u003cli\u003eページを「\u003cstrong\u003eAuthor\u003c/strong\u003e」遷移してみると\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eAuthors - OnInitialized\u003cbr\u003e\nAuthors - OnInitializedAsync\u003cbr\u003e\nAuthors - OnParametersSet\u003cbr\u003e\nAuthors - OnParametersSetAsync\u003cbr\u003e\nServerValidations - SetParametersAsync / IsVisible=False / parameters.GetValueOrDefault(\"IsVisible\")=False\u003cbr\u003e\nServerValidations - OnInitialized\u003cbr\u003e\nServerValidations - OnInitializedAsync\u003cbr\u003e\nServerValidations - OnParametersSet / IsVisible=False\u003cbr\u003e\nServerValidations - OnParametersSetAsync / IsVisible=False\u003cbr\u003e\nAuthors - OnAfterRender - firstRender = True\u003cbr\u003e\nAuthors - OnAfterRenderAsync - firstRender = True\u003cbr\u003e\nServerValidations - OnAfterRender - firstRender = True\u003cbr\u003e\nServerValidations - OnAfterRenderAsync - firstRender = True\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eとコンソールに出力されて一気に初期化されていることがわかるね。\u003c/li\u003e\n\u003cli\u003e次に「\u003cstrong\u003eSave\u003c/strong\u003e」ボタンをクリックしてみよう。\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eAuthors - ShouldRender\u003cbr\u003e\nServerValidations - SetParametersAsync / IsVisible=False / parameters.GetValueOrDefault(\"IsVisible\")=True\u003cbr\u003e\nServerValidations - OnParametersSet / IsVisible=True\u003cbr\u003e\nServerValidations - OnParametersSetAsync / IsVisible=True\u003cbr\u003e\nServerValidations - ShouldRender\u003cbr\u003e\nAuthors - OnAfterRender - firstRender = False\u003cbr\u003e\nAuthors - OnAfterRenderAsync - firstRender = False\u003cbr\u003e\nServerValidations - OnAfterRender - firstRender = False\u003cbr\u003e\nServerValidations - OnAfterRenderAsync - firstRender = False\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\n\u003ccode\u003eShouldRender\u003c/code\u003eから始まって描画関係の処理化が呼ばれてるのがわかるね。\u003c/li\u003e\n\u003cli\u003eあと2回目の描画だから\u003ccode\u003efirstRender\u003c/code\u003eはfalseになってるね。\u003c/li\u003e\n\u003cli\u003e(動画ではやってないけど)別のページに切り替えるとDisposeが呼ばれてるのがわかるね。\u003c/li\u003e\n\u003cli\u003eちなみに今はクリック時にエラーを表示してるけど、サーバー接続エラーみたいなのは画面表示時にチェックしたいよね。\u003c/li\u003e\n\u003cli\u003eそれじゃ\u003ccode\u003eOnParametersSetAsync\u003c/code\u003eにDB接続エラーチェックを追加してみよう。といっても今回はテストだから接続は失敗したものとして\u003ccode\u003eResult\u003c/code\u003eにはfalseを設定するよ。\u003c/li\u003e\n\u003cli\u003e動かしてみるとページ遷移したタイミングでエラーが出てるのがわかるね。こうやってあげればユーザーに無駄な手間を取らせなくて良いよね。\u003c/li\u003e\n\u003cli\u003e前の章でやった\u003ccode\u003eOnAfterRenderAsync\u003c/code\u003eにJavaScriptを入れた時の動きを見てみよう。\u003c/li\u003e\n\u003cli\u003e\n\u003ccode\u003eStateHasChanged()\u003c/code\u003eを呼んでるせいでページ全体の再描画が走ってるね。\u003c/li\u003e\n\u003cli\u003eこういうのを効率化するにもRazorコンポーネントが有効だよ。\u003c/li\u003e\n\u003cli\u003e「\u003cstrong\u003eSelectCity.razor\u003c/strong\u003e」を作ってさっきのJavaScriptで一覧を取ってくる処理とかを入れてやってコンポーネント化して動きを見てみよう。\u003c/li\u003e\n\u003cli\u003eさっきと違って全体の再描画が起きてないのがわかるね。再利用するだけでなく、こんな風にRazorコンポーネントは処理の軽量化にも有用だよ。\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e(\u003ccode\u003eDispose\u003c/code\u003eの話、ないと思ったら最後にあった)\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"ep09razorコンポーネントライブラリ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#ep09razor%E3%82%B3%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%8D%E3%83%B3%E3%83%88%E3%83%A9%E3%82%A4%E3%83%96%E3%83%A9%E3%83%AA\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eEP09:Razorコンポーネントライブラリ\u003c/h1\u003e\n\n\u003cul\u003e\n\u003cli\u003e今回はRazorコンポーネントライブラリの話だよ\u003c/li\u003e\n\u003cli\u003eライブラリ化すると再利用がはかどるよ\u003c/li\u003e\n\u003cli\u003eMatBlazorとかフリーのコンポーネントも紹介するよ\u003c/li\u003e\n\u003cli\u003eTelerikとか有償コンポーネントもあるよ\u003c/li\u003e\n\u003cli\u003eそれじゃ前回作成したメッセージとドロップダウンボックスのRazorコンポーネントをライブラリ化してみよう。\u003c/li\u003e\n\u003cli\u003eまずは新しいプロジェクトとして「\u003cstrong\u003eRazorクラスライブラリ\u003c/strong\u003e」を選択するよ。名前は「\u003cstrong\u003eCuriousDriveRazorLibrary\u003c/strong\u003e」にしようか。\u003c/li\u003e\n\u003cli\u003eとりあえずリリースモードでビルドして、呼び出し方を見てみよう。\u003c/li\u003e\n\u003cli\u003e呼び出す方のBlazor Webアプリのプロジェクトを開いてソリューションエクスプローラのプロジェクトを右クリック→「\u003cstrong\u003e追加\u003c/strong\u003e」→「\u003cstrong\u003eプロジェクト参照\u003c/strong\u003e」を選択して、表示されたダイアログの「\u003cstrong\u003e参照\u003c/strong\u003e」ボタンからさっきビルドした「\u003cstrong\u003eCuriousDriveRazorLibrary\u003c/strong\u003e」のDLL(プロジェクトフォルダの\u003ccode\u003ebin\\Release\\net5.0\u003c/code\u003e。\u003ccode\u003enet5.0\u003c/code\u003eは.NET Coreを選択してたら\u003ccode\u003enetstandard2.0\u003c/code\u003eとかになるよ)を追加するよ。\u003c/li\u003e\n\u003cli\u003e「\u003cstrong\u003eIndex.razor\u003c/strong\u003e」にコンポーネントを追加してみよう。頭に\u003ccode\u003e@using CuriousDriveRazorLibrary\u003c/code\u003eを追加して\u003ccode\u003e\u0026lt;Component1\u0026gt;\u0026lt;/Component1\u0026gt;\u003c/code\u003eと入れるだけだよ。\u003c/li\u003e\n\u003cli\u003e実行してみるとちゃんとライブラリのコンポーネントが表示されてるのがわかるね。\u003c/li\u003e\n\u003cli\u003eそれじゃ今度は前章で作った「\u003cstrong\u003eSelectCity.razor\u003c/strong\u003e」と「\u003cstrong\u003eServerValidations.razor\u003c/strong\u003e」をライブラリに移して呼んでみよう。\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eエクスプローラーで「\u003cstrong\u003eSelectCity.razor\u003c/strong\u003e」と「\u003cstrong\u003eServerValidations.razor\u003c/strong\u003e」を切り取って「\u003cstrong\u003eCuriousDriveRazorLibrary\u003c/strong\u003e」のプロジェクトフォルダに張り付けるよ。そしたらソリューションエクスプローラーを見てみると追加されてるのがわかるね。\u003cbr\u003e\n(昔のVisualStudioと違ってプロジェクトにファイルの追加とかせんでええんや)\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eファイルを変更したらもちろんリビルドが必要だよ。\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e呼び出す側だけど、一々全部のページに\u003ccode\u003e@using\u003c/code\u003e書いていくは面倒だよね。\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eそこで「\u003cstrong\u003e_Imports.razor\u003c/strong\u003e」に\u003ccode\u003e@using CuriousDriveRazorLibrary\u003c/code\u003eを追加するよ。こうすることで全てのページで\u003ccode\u003e@using\u003c/code\u003eを書いたのと同じになるよ。\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eソースで\u003ccode\u003e\u0026lt;ServerValidations\u0026gt;\u003c/code\u003eとかにカーソルを合わせてみると\u003ccode\u003eCuriousDriveRazorLibrary.ServerValidations\u003c/code\u003eとなってライブラリから呼ばれているようになっているのがわかるね。\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e動かしてみるとちゃんと移す前と同じように動いてるのがわかるね。\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eOSSのコンポーネントとかもあるよ。MatBlazorについて紹介しよう。\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eこれはマテリアルデザインUIのコンポーネントでOSSだよ。ググってプロジェクトのページを見てみるとたくさんのコンポーネントがあるのがわかるね。\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e追加して使ってみよう。プロジェクトを右クリックして「Nugetパッケージの管理」を選択してMatBlazorを検索して「インストール」をクリックするだけだよ。\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e実は既にこのプロジェクトにはMtBlazorは組み込んでいて、Publishersのテーブルで使ってるよ、\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eコードを見てみよう。この例では\u003ccode\u003eMatTable\u003c/code\u003eっていうコンポーネントを使ってるね。HTMLのテーブルタグと似たような感じで書けるようになってるよ。\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e有償コンポーネントならTelerikとかがあるよ。Bootstrapとかも使えてグラフなんかのコンポーネントもあるよ。\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eちなみに＄1,300ほどかかるよ。かっこいいし選択肢としては十分ありだね。\u003c/p\u003e\u003c/li\u003e\n\u003c/ul\u003e\n","createdAt":"2020-12-06T02:50:46Z","elapsedYearsFromLastModifiedAt":0,"encryptedId":"r5iWQukgWx2A3EVFDwgc9xUL3QP5AUBBvw==--jN6ueEm3orP+3Ex4--Hc3HhwsvgXpl5vVEM9L3Vg==","isBanned":false,"isDeprecated":false,"isDestroyableByViewer":false,"isEditRequestReadableByViewer":true,"isEditRequestSendableByViewer":true,"isLikableByViewer":true,"isLikedByViewer":false,"isPublic":true,"isSlide":false,"isStockableByViewer":true,"isStockedByViewer":false,"isSubscribableByViewer":false,"isSubscribedByViewer":false,"isUpdatableByViewer":false,"isUpdated":true,"lastModifiedAt":"2021-01-09T02:59:46Z","likesCount":0,"linkUrl":"https://qiita.com/NAVE/items/124d6a9e7a4e2cdb580b","organization":null,"originalId":1351174,"stockedCount":0,"title":"Blazor Tutorialまとめ(EP06～09)","toc":"\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#ep06javascript%E3%81%A8%E3%81%AE%E7%9B%B8%E4%BA%92%E9%81%8B%E7%94%A8\"\u003eEP06:JavaScriptとの相互運用\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#ep07razor%E3%82%B3%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%8D%E3%83%B3%E3%83%88%E3%81%AE%E5%86%8D%E5%88%A9%E7%94%A8\"\u003eEP07:Razorコンポーネントの再利用\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#ep08razor%E3%82%B3%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%8D%E3%83%B3%E3%83%88%E3%81%AE%E3%83%A9%E3%82%A4%E3%83%95%E3%82%B5%E3%82%A4%E3%82%AF%E3%83%AB\"\u003eEP08:Razorコンポーネントのライフサイクル\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#ep09razor%E3%82%B3%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%8D%E3%83%B3%E3%83%88%E3%83%A9%E3%82%A4%E3%83%96%E3%83%A9%E3%83%AA\"\u003eEP09:Razorコンポーネントライブラリ\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n","totalPv":1185,"uuid":"124d6a9e7a4e2cdb580b","banReason":null,"adventCalendarItem":null,"author":{"encryptedId":"rGKxEO8LMP18U3MWPnI5M8w38C8=--QUaBwHQIKOBJi8LP--ID8mPh/9F/2krvSEZvmPsg==","originalId":65842,"description":"","facebookUrl":null,"githubUrl":null,"isBlockingViewer":false,"isFollowableByViewer":true,"isFollowedByViewer":false,"isTweetWebNotificationReceivable":true,"linkedinUrl":null,"name":"NAVE NAVE","profileImageUrl":"https://qiita-image-store.s3.amazonaws.com/0/65842/profile-images/1473697011","profileImageUrlW48":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F65842%2Fprofile-images%2F1473697011?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=48\u0026s=9dbe547aacb61358726808f696e1447a","profileImageUrlW75":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F65842%2Fprofile-images%2F1473697011?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=145fb26db3907978141d316a5648c29e","urlName":"NAVE","websiteUrl":"","twitterUrl":null,"twitterUrlName":null,"revealedOrganizations":{"edges":[]}},"tags":[{"name":"C#","urlName":"csharp"},{"name":"Razor","urlName":"razor"},{"name":"Blazor","urlName":"blazor"}],"followingLikers":{"edges":[]},"comments":{"totalCount":0}},"comments":[],"client":null,"ads_event_emitter":null}}</script>
