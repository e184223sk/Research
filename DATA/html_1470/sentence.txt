More than 1 year has passed since last update..net coreでコンパイル時の自動コード生成をする上で、Roslyn APIに触る必要がある。
その手始めとして、Roslynが吐くASTを除いて見たメモ。今回の実験環境コンソールアプリとして作成Roslyn APIのパッケージを加える例として、以下のインターフェースのASTを覗くASTの作成は、Microsoft.CodeAnalysis.CSharp名前空間のCSharpSyntaxTreeクラスのParseTextメソッドを使用する。see: CSharpSyntaxTree.ParseText MethodASTのルートツリーは、CSharpSyntaxTreeのGetCompilationUnitRootメソッドで取得可能。see: CSharpSyntaxTree.GetCompilationUnitRoot(CancellationToken) Methodusingで取り込んだ名前空間の情報は、Usingsプロパティから辿る。
その他クラスユニット等は、Membersプロパティから辿る。ASTのノードは、Microsoft.CodeAnalysis.CSharp.Syntax名前空間で定義されている。
適宜キャストして扱う。see: Microsoft.CodeAnalysis.CSharp.Syntax今回お世話になったのは、実行結果は以下の通り


