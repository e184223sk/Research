<!DOCTYPE html><html><head><meta charset="utf-8" /><title>XamarinでAndroid WearのWatch Faceアプリを作ってみよう！（Vol.2 : プログラム作成編（Page-1）） - Qiita</title><meta content="width=device-width,initial-scale=1,shrink-to-fit=no,viewport-fit=cover" name="viewport" /><meta content="#55c500" name="theme-color" /><meta content="XWpkTG32-_C4joZoJ_UsmDUi-zaH-hcrjF6ZC_FoFbk" name="google-site-verification" /><meta content="telephone=no" name="format-detection" /><link rel="canonical" href="https://qiita.com/nia_tn1012/items/1a4e712c1c0284fd5f49" /><link href="/manifest.json" rel="manifest" /><link href="/opensearch.xml" rel="search" title="Qiita" type="application/opensearchdescription+xml" /><link as="script" href="https://www.googletagservices.com/tag/js/gpt.js" rel="preload" /><link href="https://securepubads.g.doubleclick.net" rel="preconnect" /><script async="" src="https://www.googletagservices.com/tag/js/gpt.js"></script><meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="jNWEIwO6FYUHaKWrMyUsKxbXyfrm5g4nRch4yqEJkjTVd9vOBwT7CNUFkhd9DZSYuhn+RqMBuhtGififcwgvAg==" /><link rel="shortcut icon" type="image/x-icon" href="https://cdn.qiita.com/assets/favicons/public/production-c620d3e403342b1022967ba5e3db1aaa.ico" /><link rel="apple-touch-icon" type="image/png" href="https://cdn.qiita.com/assets/favicons/public/apple-touch-icon-ec5ba42a24ae923f16825592efdc356f.png" /><link rel="stylesheet" media="all" href="https://cdn.qiita.com/assets/public/article-2eaa7dbedc42a8ea65c722cda46d0ebb.min.css" /><script src="https://cdn.qiita.com/assets/public/v3-article-bundle-63de2d91fef827269d3f6b958db2335b.min.js" defer="defer"></script><meta name="twitter:card" content="summary_large_image"><meta content="@Qiita" name="twitter:site" /><meta content="@nia_tn1012" name="twitter:creator" /><meta property="og:type" content="article"><meta property="og:title" content="XamarinでAndroid WearのWatch Faceアプリを作ってみよう！（Vol.2 : プログラム作成編（Page-1）） - Qiita"><meta property="og:image" content="https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0&amp;w=1200&amp;mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND1XR0Z0WVhKcGJ1T0JwMEZ1WkhKdmFXUWdWMlZoY3VPQnJsZGhkR05vSUVaaFkyWGpncUxqZzVmamc2cmpncExrdlp6amdhUGpnYWJqZ2JfamdvampnWWJ2dklIdnZJaFdiMnd1TWlBNklPT0RsLU9EcmVPQ3NPT0RxZU9Eb09TOW5PYUlrT2UzcU8tOGlGQmhaMlV0TWUtOGllLThpUSZ0eHQtY29sb3I9JTIzMzMzJnR4dC1mb250PUhpcmFnaW5vJTIwU2FucyUyMFc2JnR4dC1zaXplPTU0JnR4dC1jbGlwPWVsbGlwc2lzJnR4dC1hbGlnbj1jZW50ZXIlMkNtaWRkbGUmcz03YTU5Y2Q2ODVhYjk2MDY2OGE1YzU1ZDBhZjkxYTliNw&amp;mark-align=center%2Cmiddle&amp;blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RRzVwWVY5MGJqRXdNVEkmdHh0LWNvbG9yPSUyMzMzMyZ0eHQtZm9udD1IaXJhZ2lubyUyMFNhbnMlMjBXNiZ0eHQtc2l6ZT00NSZ0eHQtYWxpZ249cmlnaHQlMkNib3R0b20mcz02MGU0MGQ4NTc4OTgzODQ0YjhhZWMzMzk2YzI2N2Q2Zg&amp;blend-align=center%2Cmiddle&amp;blend-mode=normal&amp;s=f71782298b7d6d830893af454cc5bee0"><meta property="og:description" content="こんにちはー！ニアです。
今回はWatch Faceアプリのプログラムをコーディングしていきます。


※Vol.2はコンテンツの量が多いので、2記事に分割しています。



前のセクション : Vol.1 : プロジェクト作成編

..."><meta content="https://qiita.com/nia_tn1012/items/1a4e712c1c0284fd5f49" property="og:url" /><meta content="Qiita" property="og:site_name" /><meta content="564524038" property="fb:admins" /><meta content="C#,Xamarin,Xamarin.Android,AndroidWear,WatchFace" name="keywords" /><script>!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window, document,'script',
'https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '668972150489891');
fbq('track', 'PageView');</script><style data-emotion-css="17jxvjw 11t2ec1 1dvr2p8 18lkoru 1g4cku8 1iupg5d ijvq0v 15cocm3 12rp90f 115f4t 1b8uj5v 79elbk 16hhh7b fcbn8c 1gj7nt 154zy0m yikrym 1jqivyb 1ode1bp le4d8r 1hbd3g7 1nzh4zz 38fzdi helsa7 8qb8m4 2imjyh he5w1s 70qvj9 3ojehk 100alwu 1dtnjt5 10ougpm 1ay9vb9 m19uds cgzq40 1wa99t2 1l3zk9f 4czcte 1yzj1fm 1uv1qiv 109dbrr 5jpx49 mnxgyc 1vlpknv fsjkhv 1b17vb0 7i7f4d"}>.css-17jxvjw{display:grid;display:-ms-grid;grid-template-columns:80px minmax(0,1fr) 300px;-ms-grid-columns:80px minmax(0,1fr) 300px;grid-template-rows:minmax(270px,auto) 1fr;-ms-grid-rows:minmax(270px,auto) 1fr;max-width:1280px;margin-right:auto;margin-left:auto;padding-top:24px;padding-right:24px;padding-left:24px;}@media (max-width:1200px){.css-17jxvjw{padding-bottom:0;padding-left:0;padding-right:0;}}@media (max-width:992px){.css-17jxvjw{grid-template-columns:80px 452px 300px;-ms-grid-columns:80px 452px 300px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}}@media (max-width:770px){.css-17jxvjw{display:block;}}@media (max-width:480px){.css-17jxvjw{padding-top:0;}}.css-11t2ec1{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;z-index:5;position:-webkit-sticky;position:sticky;top:calc(56px + 24px + 16px + 32px - 16px);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:16px;width:80px;}.css-11t2ec1:after{content:'';display:table;}.css-11t2ec1:before{content:'';display:table;}@media (max-width:770px){.css-11t2ec1{display:none;}}.css-1dvr2p8{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-18lkoru{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;background-color:#FFFFFF;}.css-1g4cku8{display:inline-block;vertical-align:middle;height:20px;width:20px;fill:#55C500;}.css-1iupg5d{color:#55C500;cursor:pointer;font-size:14px;font-weight:bold;}.css-ijvq0v{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-15cocm3{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#FFFFFF;border:2px solid #6E6F70;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:2px 0px 0px;width:40px;}.css-12rp90f{display:inline-block;vertical-align:bottom;height:17.77777777777778px;width:16px;fill:#6E6F70;}.css-115f4t{color:#6E6F70;font-size:14px;font-weight:bold;}.css-1b8uj5v{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;margin-bottom:16px;padding:0;}.css-79elbk{position:relative;}.css-16hhh7b{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;padding:0;}.css-fcbn8c{display:none;bottom:initial;left:initial;right:initial;top:initial;left:100%;top:calc(-8px - (14px * 1.8) - 16px - 4px);}.css-1gj7nt{color:rgba(0,0,0,0.6);font-size:14px;font-weight:bold;line-height:1.8;padding:8px 16px;}.css-154zy0m{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.87);cursor:pointer;font-size:16px;font-weight:normal;line-height:1.8;padding:4px 16px;}.css-154zy0m:hover{-webkit-text-decoration:none;text-decoration:none;background-color:#F2F2F2;}.css-yikrym{width:20px;}.css-1jqivyb{color:rgba(0,0,0,0.6);font-size:13px;}.css-1ode1bp{background-color:rgba(0,0,0,0.12);height:1px;width:100%;margin:8px 0;}.css-le4d8r{display:inline-block;vertical-align:middle;height:13px;width:13px;fill:rgba(0,0,0,0.6);}.css-1hbd3g7{height:250px;}.css-1nzh4zz{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:16px 32px;background-color:#FBE69E;color:rgba(0,0,0,0.87);line-height:1.5;font-weight:600;}@media (max-width:770px){.css-1nzh4zz{padding:16px;}}.css-38fzdi{color:#CA832A;margin-right:4px;}.css-helsa7{background-color:#FFFFFF;padding:32px;margin-bottom:24px;}@media (max-width:992px){.css-helsa7{margin:0 auto 40px;}}@media (max-width:480px){.css-helsa7{margin:0 0 40px;padding:32px 16px;}}.css-8qb8m4{margin-bottom:48px;}.css-2imjyh{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-he5w1s{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;width:100%;}@media (max-width:770px){.css-he5w1s{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}}.css-70qvj9{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.css-3ojehk{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;margin-right:4px;}.css-100alwu{display:inline-block;border-radius:50%;line-height:1;overflow:hidden;vertical-align:middle;}.css-1dtnjt5{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-10ougpm{color:rgba(0,0,0,0.87);font-size:14px;font-weight:600;line-height:1.8;margin-right:4px;text-wrap:break-word;word-break:break-all;}.css-1ay9vb9{margin-right:16px;}.css-m19uds{color:rgba(0,0,0,0.6);font-size:14px;line-height:1.8;}.css-cgzq40{color:rgba(0,0,0,0.87);font-size:32px;font-weight:bold;line-height:1.4;margin-top:8px;text-wrap:break-word;word-break:break-all;}.css-1wa99t2{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.6);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:8px;}.css-1l3zk9f{color:rgba(0,0,0,0.6);font-size:20px;margin-right:8px;}.css-4czcte{margin-right:4px;color:inherit;font-size:14px;line-height:1.8;}.css-4czcte:not(:last-child)::after{content:',';margin-right:4px;}.css-1yzj1fm{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:32px;}.css-1uv1qiv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-size:20px;height:32px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin-right:16px;outline:none;padding:0;width:32px;}.css-109dbrr{background-color:#F9F9F9;border-top:1px solid rgba(0,0,0,0.12);bottom:0;box-shadow:0px 1px 4px rgba(0,0,0,0.14);display:none;height:calc(env(safe-area-inset-bottom,0px) + 56px);-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding-bottom:env(safe-area-inset-bottom);position:-webkit-sticky;position:sticky;width:100%;z-index:2000;}@media (max-width:770px){.css-109dbrr{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}.css-5jpx49{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:space-evenly;-webkit-justify-content:space-evenly;-ms-flex-pack:space-evenly;justify-content:space-evenly;width:100%;}.css-mnxgyc{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1vlpknv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;margin-right:4px;background-color:#FFFFFF;}.css-fsjkhv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1b17vb0{color:#6E6F70;font-size:14px;font-weight:bold;margin-left:4px;}.css-7i7f4d{display:none;bottom:initial;left:initial;right:initial;top:initial;bottom:32px;right:0;}</style></head><body><div class="allWrapper"><div><div id="GlobalHeader-react-component-2fc3e07f-ca82-42f9-87df-0b32ec6d5f04"><div class="st-Header"><div class="st-Header_container"><div class="st-Header_start"><a href="/" class="st-Header_logo"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 426.57 130"><circle cx="167.08" cy="21.4" r="12.28"></circle><path d="M250.81 29.66h23.48v18.9h-23.48z"></path><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z"></path><circle cx="216.33" cy="21.4" r="12.28"></circle></svg></a><div class="st-Header_communitySelector" tabindex="0"><span class="fa fa-caret-down"></span></div><div class="st-Header_dropdown"><div class="st-Header_dropdownHeading">Qiita Teams that are logged in</div><div class="st-Header_dropdownItemNote">You are not logged in to any team</div><hr class="st-Header_dropdownDivider st-Header_dropdownDivider-shrink"/><a href="https://teams-center.qiita.com/find_team" class="st-Header_dropdownItem"><span class="fa fa-fw fa-sign-in st-Header_dropdownItemIcon"></span><div>Log in to Qiita Team</div></a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Community</div><a href="/organizations" class="st-Header_dropdownItem">Organization</a><a href="/official-events/open" class="st-Header_dropdownItem">Event</a><a href="/advent-calendar" class="st-Header_dropdownItem">Advent Calendar</a><a href="https://qiitadon.com/" class="st-Header_dropdownItem" target="_blank">Qiitadon (β)</a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Service</div><a href="https://jobs.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Jobs</a><a href="https://zine.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Zine</a><a href="https://blog.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Blog</a></div><form class="st-Header_search" action="/search" method="get"><span class="fa fa-search st-Header_searchIcon"></span><input type="search" class="st-Header_searchInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form><form class="st-Header_searchModal" action="/search" method="get"><input type="text" class="st-Header_searchModalInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form></div><div class="st-Header_end"><div class="st-Header_searchButton"><span class="fa fa-search"></span></div><a class="st-Header_signupButton" href="/signup?redirect_to=%2Fnia_tn1012%2Fitems%2F1a4e712c1c0284fd5f49">Signup</a><a class="st-Header_loginLink" href="/login?redirect_to=%2Fnia_tn1012%2Fitems%2F1a4e712c1c0284fd5f49">Login</a></div><div class="st-Header_overlay"></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="GlobalHeader" data-dom-id="GlobalHeader-react-component-2fc3e07f-ca82-42f9-87df-0b32ec6d5f04">{"unreadNotificationsCount":null,"realms":[{"humanName":"Qiita","isCurrentRealm":true,"isQiita":true,"isQiitaTeam":false,"loggedInUser":null,"teamId":null,"url":"https://qiita.com/"}],"teamFindUrl":"https://teams-center.qiita.com/find_team","isTeamOnlyUser":null,"currentUser":null}</script>
      
</div><div class="st-HeaderAlert st-HeaderAlert-warning"><div class="st-HeaderAlert_body"></div></div><script type="application/ld+json">{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"/","name":"Qiita"}},{"@type":"ListItem","position":2,"item":{"@id":"/tags/csharp","name":"C#"}}]}</script><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","datePublished":"2016-12-20T16:43:10.000+09:00","dateModified":"2016-12-20T23:18:09.000+09:00","headline":"XamarinでAndroid WearのWatch Faceアプリを作ってみよう！（Vol.2 : プログラム作成編（Page-1））","image":"https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0\u0026w=1200\u0026mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND1XR0Z0WVhKcGJ1T0JwMEZ1WkhKdmFXUWdWMlZoY3VPQnJsZGhkR05vSUVaaFkyWGpncUxqZzVmamc2cmpncExrdlp6amdhUGpnYWJqZ2JfamdvampnWWJ2dklIdnZJaFdiMnd1TWlBNklPT0RsLU9EcmVPQ3NPT0RxZU9Eb09TOW5PYUlrT2UzcU8tOGlGQmhaMlV0TWUtOGllLThpUSZ0eHQtY29sb3I9JTIzMzMzJnR4dC1mb250PUhpcmFnaW5vJTIwU2FucyUyMFc2JnR4dC1zaXplPTU0JnR4dC1jbGlwPWVsbGlwc2lzJnR4dC1hbGlnbj1jZW50ZXIlMkNtaWRkbGUmcz03YTU5Y2Q2ODVhYjk2MDY2OGE1YzU1ZDBhZjkxYTliNw\u0026mark-align=center%2Cmiddle\u0026blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RRzVwWVY5MGJqRXdNVEkmdHh0LWNvbG9yPSUyMzMzMyZ0eHQtZm9udD1IaXJhZ2lubyUyMFNhbnMlMjBXNiZ0eHQtc2l6ZT00NSZ0eHQtYWxpZ249cmlnaHQlMkNib3R0b20mcz02MGU0MGQ4NTc4OTgzODQ0YjhhZWMzMzk2YzI2N2Q2Zg\u0026blend-align=center%2Cmiddle\u0026blend-mode=normal\u0026s=f71782298b7d6d830893af454cc5bee0","mainEntityOfPage":"https://qiita.com/nia_tn1012/items/1a4e712c1c0284fd5f49","author":{"@type":"Person","address":"Kanagawa, Japan","email":null,"identifier":"nia_tn1012","name":"nia_tn1012","image":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F78881%2Fprofile-images%2F1629634397?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=061a85fe142ddfa4ed861b7ac57c74a9","url":"https://qiita.com/nia_tn1012","description":"湘南生まれのITエンジニア（サーバー・フロント・DB・インフラ（クラウド））です。主にC#、PHP、TypeScript、GO言語、Docker、gRPCを使っています。好物は紅茶とコーヒー、シラス丼、趣味は写真撮影と音ゲーです。よろしくお願いします！","memberOf":[]},"publisher":{"@type":"Organization","name":"Qiita","logo":{"@type":"ImageObject","url":"//cdn.qiita.com/assets/public/qiita-logo-c39ded593afa388e2e1ba435b110554e.png"}}}</script><style type="text/css">.wb-CampaignLink {
  background-color: #333333;
  width: 100%;
}

.wb-CampaignLink_container {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  max-width: 1100px;
  margin: 0 auto;
  font-size: 13px;
  padding: 0.8em;
}
.wb-CampaignLink_container > a {
  color: #fff;
}

.wb-CampaignLink_container > a:hover {
  text-decoration: underline;
}</style><div class="wb-CampaignLink"><div class="wb-CampaignLink_container"><a target="_blank" id="header_text_message_1" href="https://increments.connpass.com/event/211948/">Qiita創業者海野氏登壇！Qiita エンジニアフェスタ 2021 Online Meetupを9/9(木)に開催</a><a target="_blank" id="header_text_message_2" href="https://increments.connpass.com/event/211948/">詳しくはこちら</a></div><script>td.trackEvent(
  'front_events',
  {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"nia_tn1012","type":"items","id":"1a4e712c1c0284fd5f49"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Show","data":{"message":"Qiita創業者海野氏登壇！Qiita エンジニアフェスタ 2021 Online Meetupを9/9(木)に開催","url":"https://increments.connpass.com/event/211948/","sub_message":"詳しくはこちら"}}
)</script><script>document.getElementById('header_text_message_1').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"nia_tn1012","type":"items","id":"1a4e712c1c0284fd5f49"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":1,"pos_id":"header_text_message_1","message":"Qiita創業者海野氏登壇！Qiita エンジニアフェスタ 2021 Online Meetupを9/9(木)に開催","url":"https://increments.connpass.com/event/211948/","sub_message":"詳しくはこちら"}}
  )
})</script><script>document.getElementById('header_text_message_2').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"nia_tn1012","type":"items","id":"1a4e712c1c0284fd5f49"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":1,"pos_id":"header_text_message_2","message":"Qiita創業者海野氏登壇！Qiita エンジニアフェスタ 2021 Online Meetupを9/9(木)に開催","url":"https://increments.connpass.com/event/211948/","sub_message":"詳しくはこちら"}}
  )
})</script></div><script type="application/json" id="js-react-on-rails-context">{"railsEnv":"production","inMailer":false,"i18nLocale":"en","i18nDefaultLocale":"en","href":"https://qiita.com/nia_tn1012/items/1a4e712c1c0284fd5f49","location":"/nia_tn1012/items/1a4e712c1c0284fd5f49","scheme":"https","host":"qiita.com","port":null,"pathname":"/nia_tn1012/items/1a4e712c1c0284fd5f49","search":null,"httpAcceptLanguage":null,"actionPath":"public/items#show","settings":{"analyticsTrackingId":"UA-24675221-12","assetsMap":{},"csrfToken":"mLKT2YiSzLCpAzlwYruz1ryOX0IVjdCtC2bGIjf7i77BEMw0jCwiPXtuDswskwtlEEBo/lBqZJEIJ0Z35fo2iA==","locale":"en"},"currentUser":null,"isLoggedIn":false,"recaptchaSiteKey":"6LfNkiQTAAAAAM3UGnSquBy2akTITGNMO_QDxMw6","serverSide":false}</script>
<div id="PersonalArticlePage-react-component-b2c5074b-388c-4198-94f7-de4f6aef226d"><div class="p-items_wrapper"><div class=" css-17jxvjw"><div class="css-11t2ec1"><div class="css-1dvr2p8"><button class=" css-18lkoru"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/nia_tn1012/items/1a4e712c1c0284fd5f49/likers" class="css-1iupg5d">0</a></div><div class="css-ijvq0v"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-115f4t">1</span></div><div class="css-1b8uj5v"><span class="fa fa-twitter"></span></div><div class="css-1b8uj5v"><span class="fa fa-facebook"></span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-fcbn8c"><div class="css-1gj7nt">Improve article</div><a href="/drafts/1a4e712c1c0284fd5f49/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/nia_tn1012/items/1a4e712c1c0284fd5f49/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/nia_tn1012/items/1a4e712c1c0284fd5f49/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/nia_tn1012/items/1a4e712c1c0284fd5f49/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/nia_tn1012/items/1a4e712c1c0284fd5f49.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div><div class="p-items_options"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_toc"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_main"><div class="css-1nzh4zz"><span class="fa fa-fw fa-warning css-38fzdi"></span><p>More than 3 years have passed since last update.</p></div><div class="css-helsa7"><div class="css-8qb8m4"><div class="css-2imjyh"><div class="css-he5w1s"><div class="css-70qvj9"><div class="css-3ojehk"><a href="/nia_tn1012"><img class="css-100alwu eyfquo10" src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/78881/profile-images/1629634397" width="24" height="24" loading="lazy"/></a></div><div class="css-1dtnjt5"><a href="/nia_tn1012" class="css-10ougpm">@<!-- -->nia_tn1012</a><div class="css-1ay9vb9"><span><meta content="2016-12-20T07:43:10Z"/><time dateTime="2016-12-20T14:18:09Z" class="css-m19uds">updated at 2016-12-20</time></span></div></div></div></div></div><h1 class="css-cgzq40">XamarinでAndroid WearのWatch Faceアプリを作ってみよう！（Vol.2 : プログラム作成編（Page-1））</h1><div class="css-1wa99t2"><span class="fa fa-tags mr-1of2 css-1l3zk9f" aria-hidden="true"></span><a href="/tags/csharp" class="css-4czcte">C#</a><a href="/tags/xamarin" class="css-4czcte">Xamarin</a><a href="/tags/xamarin.android" class="css-4czcte">Xamarin.Android</a><a href="/tags/androidwear" class="css-4czcte">AndroidWear</a><a href="/tags/watchface" class="css-4czcte">WatchFace</a></div></div><section class="it-MdContent"><div id="personal-public-article-body"><div><p>こんにちはー！ニアです。<br>
今回はWatch Faceアプリのプログラムをコーディングしていきます。</p>

<blockquote>
<p>※Vol.2はコンテンツの量が多いので、2記事に分割しています。</p>
</blockquote>

<ul>
<li>前のセクション : <a href="http://qiita.com/nia_tn1012/items/2f790ca52ee839303952" id="reference-701543084c8028c099b5">Vol.1 : プロジェクト作成編</a>
</li>
</ul>

<h1>
<span id="1-watch-faceアプリのクラス構成" class="fragment"></span><a href="#1-watch-face%E3%82%A2%E3%83%97%E3%83%AA%E3%81%AE%E3%82%AF%E3%83%A9%E3%82%B9%E6%A7%8B%E6%88%90"><i class="fa fa-link"></i></a>1. Watch Faceアプリのクラス構成</h1>

<p>Watch Faceアプリのクラスは、<strong><a href="https://developer.android.com/reference/android/support/wearable/watchface/CanvasWatchFaceService.html" rel="nofollow noopener" target="_blank">CanvasWatchFaceService</a></strong>クラスを継承し、<strong><a href="https://developer.android.com/reference/android/support/wearable/watchface/CanvasWatchFaceService.Engine.html" rel="nofollow noopener" target="_blank">CanvasWatchFaceService.Engine</a></strong>の派生クラスの定義と、<strong><a href="https://developer.android.com/reference/android/support/wearable/watchface/WatchFaceService.Engine.html" rel="nofollow noopener" target="_blank">WallpaperService.Engine</a></strong>を作成するメソッドをオーバーライドしたもので構成されています。</p>

<div class="code-frame" data-lang="csharp">
<div class="code-lang"><span class="bold">クラス構成</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">MyWatchFaceService</span> <span class="p">:</span> <span class="n">CanvasWatchFaceService</span> <span class="p">{</span>

    <span class="k">public</span> <span class="k">override</span> <span class="n">WallpaperService</span><span class="p">.</span><span class="n">Engine</span> <span class="nf">OnCreateEngine</span><span class="p">();</span>

    <span class="k">private</span> <span class="k">class</span> <span class="nc">MyWatchFaceEngine</span> <span class="p">:</span> <span class="n">CanvasWatchFaceService</span><span class="p">.</span><span class="n">Engine</span> <span class="p">{</span>

        <span class="k">public</span> <span class="nf">MyWatchFaceEngine</span><span class="p">(</span> <span class="n">CanvasWatchFaceService</span> <span class="n">owner</span> <span class="p">);</span>

        <span class="k">public</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">OnCreate</span><span class="p">(</span> <span class="n">ISurfaceHolder</span> <span class="n">holder</span> <span class="p">);</span>

        <span class="k">public</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">OnDestroy</span><span class="p">();</span>

        <span class="k">public</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">OnApplyWindowInsets</span><span class="p">(</span> <span class="n">WindowInsets</span> <span class="n">insets</span> <span class="p">);</span>

        <span class="k">public</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">OnPropertiesChanged</span><span class="p">(</span> <span class="n">Bundle</span> <span class="n">properties</span> <span class="p">);</span>

        <span class="k">public</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">OnTimeTick</span><span class="p">();</span>

        <span class="k">public</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">OnAmbientModeChanged</span><span class="p">(</span> <span class="kt">bool</span> <span class="n">inAmbientMode</span> <span class="p">);</span>

        <span class="k">public</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">OnInterruptionFilterChanged</span><span class="p">(</span> <span class="kt">int</span> <span class="n">interruptionFilter</span> <span class="p">);</span>

        <span class="k">public</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">OnTapCommand</span><span class="p">(</span> <span class="kt">int</span> <span class="n">tapType</span><span class="p">,</span> <span class="kt">int</span> <span class="n">xValue</span><span class="p">,</span> <span class="kt">int</span> <span class="n">yValue</span><span class="p">,</span> <span class="kt">long</span> <span class="n">eventTime</span> <span class="p">);</span>

        <span class="k">public</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">OnDraw</span><span class="p">(</span> <span class="n">Canvas</span> <span class="n">canvas</span><span class="p">,</span> <span class="n">Rect</span> <span class="n">bounds</span> <span class="p">);</span>

        <span class="k">public</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">OnVisibilityChanged</span><span class="p">(</span> <span class="kt">bool</span> <span class="n">visible</span> <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<h2>
<span id="11-watch-faceアプリのプログラム作成でよく使用する名前空間" class="fragment"></span><a href="#11-watch-face%E3%82%A2%E3%83%97%E3%83%AA%E3%81%AE%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%A0%E4%BD%9C%E6%88%90%E3%81%A7%E3%82%88%E3%81%8F%E4%BD%BF%E7%94%A8%E3%81%99%E3%82%8B%E5%90%8D%E5%89%8D%E7%A9%BA%E9%96%93"><i class="fa fa-link"></i></a>1.1. Watch Faceアプリのプログラム作成でよく使用する名前空間</h2>

<p>以下に、今回作成するプログラムでよく使用する名前空間を示します。よく使用する名前空間は<strong>using</strong>ディレクティブを利用すると、コードを短く記述することができ、便利です。</p>

<div class="code-frame" data-lang="csharp">
<div class="code-lang"><span class="bold">WatchFaceアプリのプログラム作成でよく使用する名前空間</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>

<span class="k">using</span> <span class="nn">Android.App</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Android.Content</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Android.Graphics</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Android.Graphics.Drawables</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Android.OS</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Android.Service.Wallpaper</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Android.Support.V4.Content</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Android.Support.Wearable.Watchface</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Android.Text.Format</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Android.Views</span><span class="p">;</span>
</code></pre></div>
</div>

<h1>
<span id="2-watch-faceのserviceクラスの作成" class="fragment"></span><a href="#2-watch-face%E3%81%AEservice%E3%82%AF%E3%83%A9%E3%82%B9%E3%81%AE%E4%BD%9C%E6%88%90"><i class="fa fa-link"></i></a>2. Watch FaceのServiceクラスの作成</h1>

<p>まず、Watch Faceのサービスクラスを定義します。</p>

<div class="code-frame" data-lang="csharp">
<div class="code-lang"><span class="bold">Serviceクラスの宣言</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">AnalogWatchFaceService</span> <span class="p">:</span> <span class="n">CanvasWatchFaceService</span> <span class="p">{</span>
    <span class="c1">// 中略</span>
<span class="p">}</span>
</code></pre></div>
</div>

<blockquote>
<p>※本記事では「AnalogWatchFaceService」と名付けています。</p>
</blockquote>

<h2>
<span id="21-クラスの属性でandroidのマニフェストのservice要素を構成" class="fragment"></span><a href="#21-%E3%82%AF%E3%83%A9%E3%82%B9%E3%81%AE%E5%B1%9E%E6%80%A7%E3%81%A7android%E3%81%AE%E3%83%9E%E3%83%8B%E3%83%95%E3%82%A7%E3%82%B9%E3%83%88%E3%81%AEservice%E8%A6%81%E7%B4%A0%E3%82%92%E6%A7%8B%E6%88%90"><i class="fa fa-link"></i></a>2.1. クラスの属性で、AndroidのマニフェストのService要素を構成</h2>

<p>先ほど宣言したAnalogWatchFaceServiceクラスに、クラスの属性を追加して、AndroidのマニフェストのService要素を構成します。</p>

<h3>
<span id="211-サービスの名前を設定" class="fragment"></span><a href="#211-%E3%82%B5%E3%83%BC%E3%83%93%E3%82%B9%E3%81%AE%E5%90%8D%E5%89%8D%E3%82%92%E8%A8%AD%E5%AE%9A"><i class="fa fa-link"></i></a>2.1.1. サービスの名前を設定</h3>

<p>「<strong>Service</strong>」属性を追加し、LabelフィールドにWatch Faceの名前を、Permissionフィールドに「<strong>android.permission.BIND_WALLPAPER</strong>」<sup id="fnref1"><a href="#fn1" title="WallpaperServiceクラスを利用する時に必要です。">1</a></sup>を設定します。</p>

<div class="code-frame" data-lang="csharp">
<div class="code-lang"><span class="bold">サービスの名前を設定</span></div>
<div class="highlight"><pre class="with-code"><code><span class="p">[</span><span class="nf">Service</span><span class="p">(</span> <span class="n">Label</span> <span class="p">=</span> <span class="s">"@string/my_watch_name"</span><span class="p">,</span> <span class="n">Permission</span> <span class="p">=</span> <span class="s">"android.permission.BIND_WALLPAPER"</span> <span class="p">)]</span>
</code></pre></div>
</div>

<h3>
<span id="212-メタデータを設定" class="fragment"></span><a href="#212-%E3%83%A1%E3%82%BF%E3%83%87%E3%83%BC%E3%82%BF%E3%82%92%E8%A8%AD%E5%AE%9A"><i class="fa fa-link"></i></a>2.1.2. メタデータを設定</h3>

<p>「<strong>MetaData</strong>」属性を3つ追加します。</p>

<p>1つは、引数に「<strong>android.service.wallpaper</strong>」を、Resourceフィールドに「<strong>@xml/watch_face</strong>」（※Vol2.で作成した、Resources/<strong>xml/watch_face.xml</strong>が参照されます。）を指定します。</p>

<div class="code-frame" data-lang="csharp"><div class="highlight"><pre class="with-code"><code><span class="p">[</span><span class="nf">MetaData</span><span class="p">(</span> <span class="s">"android.service.wallpaper"</span><span class="p">,</span> <span class="n">Resource</span> <span class="p">=</span> <span class="s">"@xml/watch_face"</span> <span class="p">)]</span>
</code></pre></div></div>

<p>残りの2つは、プレビュー画面に表示する画像のパスを指定します。</p>

<div class="code-frame" data-lang="csharp">
<div class="code-lang"><span class="bold">プレビュー画面用の画像を指定</span></div>
<div class="highlight"><pre class="with-code"><code><span class="c1">// 四角形</span>
<span class="p">[</span><span class="nf">MetaData</span><span class="p">(</span> <span class="s">"com.google.android.wearable.watchface.preview"</span><span class="p">,</span> <span class="n">Resource</span> <span class="p">=</span> <span class="s">"@drawable/preview"</span> <span class="p">)]</span>
<span class="c1">// 丸形</span>
<span class="p">[</span><span class="nf">MetaData</span><span class="p">(</span> <span class="s">"com.google.android.wearable.watchface.preview_circular"</span><span class="p">,</span> <span class="n">Resource</span> <span class="p">=</span> <span class="s">"@drawable/preview_circular"</span> <span class="p">)]</span>
</code></pre></div>
</div>

<blockquote>
<p>※リソースのパスを指定する時、「-nodpi」などの修飾子は不要です。</p>
</blockquote>

<h3>
<span id="213-追加のintentフィルターを設定" class="fragment"></span><a href="#213-%E8%BF%BD%E5%8A%A0%E3%81%AEintent%E3%83%95%E3%82%A3%E3%83%AB%E3%82%BF%E3%83%BC%E3%82%92%E8%A8%AD%E5%AE%9A"><i class="fa fa-link"></i></a>2.1.3. 追加のIntentフィルターを設定</h3>

<p>WallpaperServiceクラスに、1つのIntentフィルターを追加します。</p>

<div class="code-frame" data-lang="csharp">
<div class="code-lang"><span class="bold">WallpaperServiceクラスにIntentフィルターを追加</span></div>
<div class="highlight"><pre class="with-code"><code><span class="p">[</span><span class="nf">IntentFilter</span><span class="p">(</span> <span class="k">new</span><span class="p">[]</span> <span class="p">{</span> <span class="s">"android.service.wallpaper.WallpaperService"</span> <span class="p">},</span> <span class="n">Categories</span> <span class="p">=</span> <span class="k">new</span><span class="p">[]</span> <span class="p">{</span> <span class="s">"com.google.android.wearable.watchface.category.WATCH_FACE"</span> <span class="p">}</span> <span class="p">)]</span>
</code></pre></div>
</div>

<h3>
<span id="214-クラス属性のまとめ" class="fragment"></span><a href="#214-%E3%82%AF%E3%83%A9%E3%82%B9%E5%B1%9E%E6%80%A7%E3%81%AE%E3%81%BE%E3%81%A8%E3%82%81"><i class="fa fa-link"></i></a>2.1.4. クラス属性のまとめ</h3>

<p>2.1.1.～2.1.3.のクラス属性をまとめると、以下のようなコードになります。</p>

<div class="code-frame" data-lang="csharp">
<div class="code-lang"><span class="bold">Androidのマニフェスト、Service要素を構成</span></div>
<div class="highlight"><pre class="with-code"><code><span class="p">[</span><span class="nf">Service</span><span class="p">(</span> <span class="n">Label</span> <span class="p">=</span> <span class="s">"@string/watch_name"</span><span class="p">,</span> <span class="n">Permission</span> <span class="p">=</span> <span class="s">"android.permission.BIND_WALLPAPER"</span> <span class="p">)]</span>
<span class="p">[</span><span class="nf">MetaData</span><span class="p">(</span> <span class="s">"android.service.wallpaper"</span><span class="p">,</span> <span class="n">Resource</span> <span class="p">=</span> <span class="s">"@xml/watch_face"</span> <span class="p">)]</span>
<span class="p">[</span><span class="nf">MetaData</span><span class="p">(</span> <span class="s">"com.google.android.wearable.watchface.preview"</span><span class="p">,</span> <span class="n">Resource</span> <span class="p">=</span> <span class="s">"@drawable/preview"</span> <span class="p">)]</span>
<span class="p">[</span><span class="nf">MetaData</span><span class="p">(</span> <span class="s">"com.google.android.wearable.watchface.preview_circular"</span><span class="p">,</span> <span class="n">Resource</span> <span class="p">=</span> <span class="s">"@drawable/preview_circular"</span> <span class="p">)]</span>
<span class="p">[</span><span class="nf">IntentFilter</span><span class="p">(</span> <span class="k">new</span><span class="p">[]</span> <span class="p">{</span> <span class="s">"android.service.wallpaper.WallpaperService"</span> <span class="p">},</span> <span class="n">Categories</span> <span class="p">=</span> <span class="k">new</span><span class="p">[]</span> <span class="p">{</span> <span class="s">"com.google.android.wearable.watchface.category.WATCH_FACE"</span> <span class="p">}</span> <span class="p">)]</span>
<span class="k">public</span> <span class="k">class</span> <span class="nc">AnalogWatchFaceService</span> <span class="p">:</span> <span class="n">CanvasWatchFaceService</span> <span class="p">{</span>
    <span class="c1">// 中略</span>
<span class="p">}</span>
</code></pre></div>
</div>

<p>設定したクラスの属性は、ビルド時にAndroidManufest.xmlへ統合されます。</p>

<div class="code-frame" data-lang="xml">
<div class="code-lang"><span class="bold">AndroidManufest.xml（ビルド時）</span></div>
<div class="highlight"><pre class="with-code"><code><span class="nt">&lt;manufest&gt;</span>
<span class="c">&lt;!-- 中略 --&gt;</span>
  <span class="nt">&lt;application</span> <span class="na">android:label=</span><span class="s">"@string/app_name"</span> <span class="na">android:allowEmbedded=</span><span class="s">"true"</span> <span class="na">android:taskAffinity=</span><span class="s">""</span> <span class="na">android:allowBackup=</span><span class="s">"true"</span> <span class="na">android:supportsRtl=</span><span class="s">"true"</span> <span class="na">android:theme=</span><span class="s">"@android:style/Theme.DeviceDefault"</span> <span class="na">android:name=</span><span class="s">"android.app.Application"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;service</span> <span class="na">android:label=</span><span class="s">"@string/watch_name"</span> <span class="na">android:permission=</span><span class="s">"android.permission.BIND_WALLPAPER"</span> <span class="na">android:name=</span><span class="s">"md[GUID].AnalogWatchFaceService"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;meta-data</span> <span class="na">android:name=</span><span class="s">"android.service.wallpaper"</span> <span class="na">android:resource=</span><span class="s">"@xml/watch_face"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;meta-data</span> <span class="na">android:name=</span><span class="s">"com.google.android.wearable.watchface.preview"</span> <span class="na">android:resource=</span><span class="s">"@drawable/preview"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;meta-data</span> <span class="na">android:name=</span><span class="s">"com.google.android.wearable.watchface.preview_circular"</span> <span class="na">android:resource=</span><span class="s">"@drawable/preview_circular"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;intent-filter&gt;</span>
        <span class="nt">&lt;action</span> <span class="na">android:name=</span><span class="s">"android.service.wallpaper.WallpaperService"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;category</span> <span class="na">android:name=</span><span class="s">"com.google.android.wearable.watchface.category.WATCH_FACE"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/intent-filter&gt;</span>
    <span class="nt">&lt;/service&gt;</span>
    <span class="nt">&lt;provider</span> <span class="na">android:name=</span><span class="s">"mono.MonoRuntimeProvider"</span> <span class="na">android:exported=</span><span class="s">"false"</span> <span class="na">android:initOrder=</span><span class="s">"2147483647"</span> <span class="na">android:authorities=</span><span class="s">"[パッケージ名].mono.MonoRuntimeProvider.__mono_init__"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/application&gt;</span>
<span class="nt">&lt;/manufest&gt;</span>
</code></pre></div>
</div>

<h2>
<span id="22-メンバーを定義" class="fragment"></span><a href="#22-%E3%83%A1%E3%83%B3%E3%83%90%E3%83%BC%E3%82%92%E5%AE%9A%E7%BE%A9"><i class="fa fa-link"></i></a>2.2. メンバーを定義</h2>

<p>AnalogWatchFaceServiceクラスに、以下のようにメンバーを定義します。</p>

<div class="code-frame" data-lang="csharp">
<div class="code-lang"><span class="bold">AnalogWatchFaceServiceクラスのメンバーを定義</span></div>
<div class="highlight"><pre class="with-code"><code><span class="c1">// 中略</span>
<span class="k">public</span> <span class="k">class</span> <span class="nc">AnalogWatchFaceService</span> <span class="p">:</span> <span class="n">CanvasWatchFaceService</span> <span class="p">{</span>

    <span class="c1">// インタラクティブモードにおける更新間隔（ミリ秒単位）を表します。</span>
    <span class="c1">// Java.Util.Concurrent.TimeUnit.Seconds.ToMillisメソッドは、指定した秒の値をミリ秒に変換します。（※）</span>
    <span class="k">private</span> <span class="k">static</span> <span class="k">readonly</span> <span class="kt">long</span> <span class="n">InteractiveUpdateRateMilliseconds</span> <span class="p">=</span> <span class="n">Java</span><span class="p">.</span><span class="n">Util</span><span class="p">.</span><span class="n">Concurrent</span><span class="p">.</span><span class="n">TimeUnit</span><span class="p">.</span><span class="n">Seconds</span><span class="p">.</span><span class="nf">ToMillis</span><span class="p">(</span> <span class="m">1</span> <span class="p">);</span>

    <span class="c1">// インタラクティブモードにて、定期的に時刻を更新するための、ハンドラー用のメッセージのIDを表します。</span>
    <span class="c1">// 値は何でもOKです。</span>
    <span class="k">private</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">MessageUpdateTime</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span>

    <span class="c1">// 中略</span>
<span class="p">}</span>
</code></pre></div>
</div>

<div class="code-frame" data-lang="csharp">
<div class="code-lang"><span class="bold">（※）JavaのTimeUnitクラスの代わりに、.NETのTimeSpan構造体を利用する場合</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">private</span> <span class="k">static</span> <span class="k">readonly</span> <span class="kt">long</span> <span class="n">InteractiveUpdateRateMilliseconds</span> <span class="p">=</span> <span class="p">(</span> <span class="kt">long</span> <span class="p">)</span><span class="n">TimeSpan</span><span class="p">.</span><span class="nf">FromSeconds</span><span class="p">(</span> <span class="m">1</span> <span class="p">).</span><span class="n">TotalMilliseconds</span><span class="p">;</span>
</code></pre></div>
</div>

<h1>
<span id="3-watch-faceのengineクラスを作成" class="fragment"></span><a href="#3-watch-face%E3%81%AEengine%E3%82%AF%E3%83%A9%E3%82%B9%E3%82%92%E4%BD%9C%E6%88%90"><i class="fa fa-link"></i></a>3. Watch FaceのEngineクラスを作成</h1>

<p>次に、Watch Faceの動作の要となるEngineクラスをAnalogWatchFaceServiceクラスの中に定義し、作成していきます。</p>

<div class="code-frame" data-lang="csharp">
<div class="code-lang"><span class="bold">Engineクラスの宣言</span></div>
<div class="highlight"><pre class="with-code"><code><span class="c1">// 中略</span>
<span class="k">public</span> <span class="k">class</span> <span class="nc">AnalogWatchFaceService</span> <span class="p">:</span> <span class="n">CanvasWatchFaceService</span> <span class="p">{</span>
    <span class="c1">// 中略</span>

    <span class="k">private</span> <span class="k">class</span> <span class="nc">AnalogWatchFaceEngine</span> <span class="p">:</span> <span class="n">CanvasWatchFaceService</span><span class="p">.</span><span class="n">Engine</span> <span class="p">{</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<blockquote>
<p>※本記事では「AnalogWatchFaceEngine」と名付けています。</p>
</blockquote>

<h2>
<span id="31-oncreateengineメソッドをオーバーライド" class="fragment"></span><a href="#31-oncreateengine%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E3%82%92%E3%82%AA%E3%83%BC%E3%83%90%E3%83%BC%E3%83%A9%E3%82%A4%E3%83%89"><i class="fa fa-link"></i></a>3.1. OnCreateEngineメソッドをオーバーライド</h2>

<p>CanvasWatchFaceServiceクラスの<strong><a href="https://developer.android.com/reference/android/service/wallpaper/WallpaperService.html#onCreateEngine()" rel="nofollow noopener" target="_blank">OnCreateEngine</a></strong>メソッドを、AnalogWatchFaceServiceクラスでオーバーライドします。メソッド内では、AnalogWatchFaceEngineクラスのコンストラクター（※）を呼び出し、生成したインスタンスを返します<sup id="fnref2"><a href="#fn2" title="CanvasWatchFaceService.Engineクラスは、WallpaperService.Engineを継承しています。">2</a></sup>。</p>

<div class="code-frame" data-lang="csharp">
<div class="code-lang"><span class="bold">OnCreateEngineメソッドをオーバーライド</span></div>
<div class="highlight"><pre class="with-code"><code><span class="c1">// 中略</span>
<span class="k">public</span> <span class="k">class</span> <span class="nc">AnalogWatchFaceService</span> <span class="p">:</span> <span class="n">CanvasWatchFaceService</span> <span class="p">{</span>
    <span class="c1">// 中略</span>

    <span class="k">public</span> <span class="k">override</span> <span class="n">WallpaperService</span><span class="p">.</span><span class="n">Engine</span> <span class="nf">OnCreateEngine</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">AnalogWatchFaceEngine</span><span class="p">(</span> <span class="k">this</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="k">private</span> <span class="k">class</span> <span class="nc">AnalogWatchFaceEngine</span> <span class="p">:</span> <span class="n">CanvasWatchFaceService</span><span class="p">.</span><span class="n">Engine</span> <span class="p">{</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<blockquote>
<p>※コンストラクターは3.4節で作成します。</p>
</blockquote>

<h2>
<span id="32-メンバー変数を定義" class="fragment"></span><a href="#32-%E3%83%A1%E3%83%B3%E3%83%90%E3%83%BC%E5%A4%89%E6%95%B0%E3%82%92%E5%AE%9A%E7%BE%A9"><i class="fa fa-link"></i></a>3.2. メンバー変数を定義</h2>

<p>AnalogWatchFaceEngineクラスに、以下のようにメンバーを定義します。</p>

<div class="code-frame" data-lang="csharp">
<div class="code-lang"><span class="bold">AnalogWatchFaceEngineクラスのメンバーを定義</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">private</span> <span class="k">class</span> <span class="nc">AnalogWatchFaceEngine</span> <span class="p">:</span> <span class="n">CanvasWatchFaceService</span><span class="p">.</span><span class="n">Engine</span> <span class="p">{</span>

    <span class="c1">// CanvasWatchFaceServiceオブジェクトの参照を格納します。</span>
    <span class="k">private</span> <span class="n">CanvasWatchFaceService</span> <span class="n">owner</span><span class="p">;</span>

    <span class="c1">// 時刻を更新する時の処理を行うハンドラーを表します。</span>
    <span class="k">private</span> <span class="k">readonly</span> <span class="n">Handler</span> <span class="n">updateTimeHandler</span><span class="p">;</span>

    <span class="c1">// 現在時刻を表します。</span>
    <span class="k">private</span> <span class="n">Java</span><span class="p">.</span><span class="n">Util</span><span class="p">.</span><span class="n">Calendar</span> <span class="n">nowTime</span><span class="p">;</span>

    <span class="c1">// 背景用のペイントオブジェクトを表します。</span>
    <span class="k">private</span> <span class="n">Paint</span> <span class="n">backgroundPaint</span><span class="p">;</span>

    <span class="c1">// 時針、分針、秒針用のオブジェクトを表します。</span>
    <span class="k">private</span> <span class="n">Paint</span> <span class="n">hourHandPaint</span><span class="p">;</span>
    <span class="k">private</span> <span class="n">Paint</span> <span class="n">minuteHandPaint</span><span class="p">;</span>
    <span class="k">private</span> <span class="n">Paint</span> <span class="n">secondHandPaint</span><span class="p">;</span>

    <span class="c1">// アンビエントモードであるかどうかを表します。</span>
    <span class="k">private</span> <span class="kt">bool</span> <span class="n">isAmbient</span><span class="p">;</span>

    <span class="c1">// アンビエントモード時、デバイスがLow-Bitの制限を必要としているかどうかを表します。</span>
    <span class="k">private</span> <span class="kt">bool</span> <span class="n">isRequiredLowBitAmbient</span><span class="p">;</span>

    <span class="c1">// アンビエントモード時、デバイスが焼き付け防止を必要としているかどうかを表します。</span>
    <span class="k">private</span> <span class="kt">bool</span> <span class="n">isReqiredBurnInProtection</span><span class="p">;</span>

    <span class="c1">// ミュート状態であるかどうかを表します。</span>
    <span class="k">private</span> <span class="kt">bool</span> <span class="n">isMute</span><span class="p">;</span>

    <span class="c1">// タイムゾーンを変更した時に通知を受け取るレシーバーを表します。（※）</span>
    <span class="k">private</span> <span class="n">TimeZoneReceiver</span> <span class="n">timeZoneReceiver</span><span class="p">;</span>

    <span class="c1">// 中略</span>
<span class="p">}</span>
</code></pre></div>
</div>

<blockquote>
<p>※TimeZoneReceiverクラスは3.3節で作成します。</p>
</blockquote>

<h3>
<span id="321-xamarinandroidで利用できる日付時刻クラス" class="fragment"></span><a href="#321-xamarinandroid%E3%81%A7%E5%88%A9%E7%94%A8%E3%81%A7%E3%81%8D%E3%82%8B%E6%97%A5%E4%BB%98%E6%99%82%E5%88%BB%E3%82%AF%E3%83%A9%E3%82%B9"><i class="fa fa-link"></i></a>3.2.1. Xamarin.Androidで利用できる、日付・時刻クラス</h3>

<p>Xamarin.Androidでは、以下の3つの日付・時刻のクラス及び構造体を利用できます。</p>

<ul>
<li>
<strong>Android.Text.Format.<a href="https://developer.android.com/reference/android/text/format/Time.html" rel="nofollow noopener" target="_blank">Time</a></strong>クラス（Androidのライブラリ）</li>
<li>
<strong>Java.Util.<a href="https://developer.android.com/reference/java/util/Calendar.html" rel="nofollow noopener" target="_blank">Calendar</a></strong>クラス（Javaのライブラリ）</li>
<li>
<strong>System.<a href="https://developer.xamarin.com/api/type/System.DateTime/" rel="nofollow noopener" target="_blank">DateTime</a></strong>構造体（.NET（Mono.Android）のライブラリ）</li>
</ul>

<p>但し、<strong>Android.Text.Format.TimeクラスはAndroid API Level 22以降では非推奨<sup id="fnref3"><a href="#fn3" title="Android.Text.Format.Timeクラスでは、2032年までしか扱えないためです。">3</a></sup></strong>となっているので、後者2つのいずれかを利用することをオススメします。</p>

<h3>
<span id="322-android-wearのモード" class="fragment"></span><a href="#322-android-wear%E3%81%AE%E3%83%A2%E3%83%BC%E3%83%89"><i class="fa fa-link"></i></a>3.2.2. Android Wearのモード</h3>

<p>Android Wearには「<strong>インタラクティブモード（Interactive mode）</strong>」と「<strong>アンビエントモード（Ambient mode）</strong>」の2つのモードがあります。</p>

<h4>
<span id="-インタラクティブモード" class="fragment"></span><a href="#-%E3%82%A4%E3%83%B3%E3%82%BF%E3%83%A9%E3%82%AF%E3%83%86%E3%82%A3%E3%83%96%E3%83%A2%E3%83%BC%E3%83%89"><i class="fa fa-link"></i></a>◆ インタラクティブモード</h4>

<p>インタラクティブモードは、Android Wearにおける通常のモードで、画面に触れたり、デバイスを傾けたりするとこのモードに移行します。</p>

<ul>
<li>Watch Faceのすべての機能を利用できます。</li>
<li>すべての色を利用できます。</li>
</ul>

<h4>
<span id="-アンビエントモード" class="fragment"></span><a href="#-%E3%82%A2%E3%83%B3%E3%83%93%E3%82%A8%E3%83%B3%E3%83%88%E3%83%A2%E3%83%BC%E3%83%89"><i class="fa fa-link"></i></a>◆ アンビエントモード</h4>

<p>アンビエントモードは、いわゆる省電力モードで、インタラクティブモードの状態から一定時間が経つとこのモードに移行します。</p>

<ul>
<li>更新間隔は<strong>1分</strong>となります。</li>
<li>色はグレースケールのみを利用します。</li>
</ul>

<h3>
<span id="323-low-bitの制限と焼き付き防止" class="fragment"></span><a href="#323-low-bit%E3%81%AE%E5%88%B6%E9%99%90%E3%81%A8%E7%84%BC%E3%81%8D%E4%BB%98%E3%81%8D%E9%98%B2%E6%AD%A2"><i class="fa fa-link"></i></a>3.2.3. Low-Bitの制限と焼き付き防止</h3>

<p>Android Wearのデバイスによっては、アンビエントモード時にアンチエイリアスを無効にしたり、焼き付き防止の工夫をしたりする必要があります。</p>

<h4>
<span id="-low-bitの制限を必要とする時" class="fragment"></span><a href="#-low-bit%E3%81%AE%E5%88%B6%E9%99%90%E3%82%92%E5%BF%85%E8%A6%81%E3%81%A8%E3%81%99%E3%82%8B%E6%99%82"><i class="fa fa-link"></i></a>◆ Low-Bitの制限を必要とする時</h4>

<ul>
<li>色はグレースケールではなく、白黒のみとします。</li>
<li>アンチエイリアスを無効にします</li>
</ul>

<h4>
<span id="-焼き付き防止を必要とする時" class="fragment"></span><a href="#-%E7%84%BC%E3%81%8D%E4%BB%98%E3%81%8D%E9%98%B2%E6%AD%A2%E3%82%92%E5%BF%85%E8%A6%81%E3%81%A8%E3%81%99%E3%82%8B%E6%99%82"><i class="fa fa-link"></i></a>◆ 焼き付き防止を必要とする時</h4>

<ul>
<li>画像はなるべく輪郭のみに（黒の領域を可能な限り多く占めるように）します。</li>
<li>ディスプレイの端から数ピクセルにはなるべく描画しないようにします。</li>
</ul>

<h2>
<span id="33-タイムゾーンが変更された時の処理を行うbroadcastreceiverの派生クラスを作成" class="fragment"></span><a href="#33-%E3%82%BF%E3%82%A4%E3%83%A0%E3%82%BE%E3%83%BC%E3%83%B3%E3%81%8C%E5%A4%89%E6%9B%B4%E3%81%95%E3%82%8C%E3%81%9F%E6%99%82%E3%81%AE%E5%87%A6%E7%90%86%E3%82%92%E8%A1%8C%E3%81%86broadcastreceiver%E3%81%AE%E6%B4%BE%E7%94%9F%E3%82%AF%E3%83%A9%E3%82%B9%E3%82%92%E4%BD%9C%E6%88%90"><i class="fa fa-link"></i></a>3.3. タイムゾーンが変更された時の処理を行う、BroadcastReceiverの派生クラスを作成</h2>

<p><strong><a href="https://developer.android.com/reference/android/content/BroadcastReceiver.html" rel="nofollow noopener" target="_blank">BroadcastReceiver</a></strong>クラスを継承した派生クラスを、AnalogWatchFaceServiceクラスの外で作成します。<br>
<strong><a href="https://developer.xamarin.com/api/type/System.Action%3CT%3E/" rel="nofollow noopener" target="_blank">Action&lt;Intent&gt;</a></strong>型のデリゲート1つを定義し、オーバーライドした<strong><a href="https://developer.android.com/reference/android/content/BroadcastReceiver.html#onReceive(android.content.Context,%20android.content.Intent)" rel="nofollow noopener" target="_blank">OnReceive</a></strong>メソッドで呼び出すように構成します。</p>

<div class="code-frame" data-lang="csharp">
<div class="code-lang"><span class="bold">TimeZoneRecieverクラスの定義</span></div>
<div class="highlight"><pre class="with-code"><code><span class="c1">// タイムゾーンを変更した時に通知を受け取るレシーバーを提供します。</span>
<span class="k">public</span> <span class="k">class</span> <span class="nc">TimeZoneReceiver</span> <span class="p">:</span> <span class="n">BroadcastReceiver</span> <span class="p">{</span>

    <span class="c1">// タイムゾーンを変更した通知を受け取った時に実行するデリゲートを表します。</span>
    <span class="k">private</span> <span class="n">Action</span><span class="p">&lt;</span><span class="n">Intent</span><span class="p">&gt;</span> <span class="n">receiver</span><span class="p">;</span>

    <span class="c1">// OnReceiveメソッドで実行する処理を</span>
    <span class="k">public</span> <span class="nf">TimeZoneReceiver</span><span class="p">(</span> <span class="n">Action</span><span class="p">&lt;</span><span class="n">Intent</span><span class="p">&gt;</span> <span class="n">_receiver</span> <span class="p">)</span> <span class="p">{</span>
        <span class="n">receiver</span> <span class="p">=</span> <span class="n">_receiver</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// タイムゾーンを変更した通知を受け取った時に実行します。</span>
    <span class="k">public</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">OnReceive</span><span class="p">(</span> <span class="n">Context</span> <span class="n">context</span><span class="p">,</span> <span class="n">Intent</span> <span class="n">intent</span> <span class="p">)</span> <span class="p">{</span>
        <span class="n">receiver</span><span class="p">?.</span><span class="nf">Invoke</span><span class="p">(</span> <span class="n">intent</span> <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<h2>
<span id="34-コンストラクターを定義" class="fragment"></span><a href="#34-%E3%82%B3%E3%83%B3%E3%82%B9%E3%83%88%E3%83%A9%E3%82%AF%E3%82%BF%E3%83%BC%E3%82%92%E5%AE%9A%E7%BE%A9"><i class="fa fa-link"></i></a>3.4. コンストラクターを定義</h2>

<p>AnalogWatchFaceEngineクラスのコンストラクターを定義します。CanvasWatchFaceService型1つを引数<sup id="fnref4"><a href="#fn4" title="Watch Faceアプリにて、実際に受け取っているのは、AnalogWatchFaceServiceクラスのインスタンスです。">4</a></sup>にとり、基底クラスのコンストラクターの引数に渡します。</p>

<p>コンストラクターの中では、時刻を更新する時の処理を行うハンドラーと、タイムゾーンを変更した時に通知を受け取るレシーバーの初期化をします。</p>

<div class="code-frame" data-lang="csharp">
<div class="code-lang"><span class="bold">AnalogWatchFaceEngineクラスのコンストラクター</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="nf">AnalogWatchFaceEngine</span><span class="p">(</span> <span class="n">CanvasWatchFaceService</span> <span class="n">owner</span> <span class="p">)</span> <span class="p">:</span> <span class="k">base</span><span class="p">(</span> <span class="n">owner</span> <span class="p">)</span> <span class="p">{</span>

    <span class="c1">// CanvasWatchFaceServiceクラスを継承したオブジェクトの参照をセットします。</span>
    <span class="k">this</span><span class="p">.</span><span class="n">owner</span> <span class="p">=</span> <span class="n">owner</span><span class="p">;</span>
    <span class="c1">// 時刻を更新する時の処理を構成します。</span>
    <span class="n">updateTimeHandler</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Handler</span><span class="p">(</span>
        <span class="n">message</span> <span class="p">=&gt;</span> <span class="p">{</span>
            <span class="c1">// Whatプロパティでメッセージを判別します。</span>
            <span class="k">switch</span><span class="p">(</span> <span class="n">message</span><span class="p">.</span><span class="n">What</span> <span class="p">)</span> <span class="p">{</span>
                <span class="k">case</span> <span class="n">MessageUpdateTime</span><span class="p">:</span>
                    <span class="c1">// TODO : 時刻の更新のメッセージの時の処理を入れます。</span>
                    <span class="c1">// ウォッチフェイスを再描画します。</span>
                    <span class="nf">Invalidate</span><span class="p">();</span>
                    <span class="c1">// UpdateTimeHandlerを動作させるかどうかを判別します。</span>
                    <span class="k">if</span><span class="p">(</span> <span class="n">ShouldTimerBeRunning</span> <span class="p">)</span> <span class="p">{</span>
                        <span class="kt">long</span> <span class="n">timeMillseconds</span> <span class="p">=</span> <span class="n">DateTime</span><span class="p">.</span><span class="n">UtcNow</span><span class="p">.</span><span class="n">Ticks</span> <span class="p">/</span> <span class="n">TimeSpan</span><span class="p">.</span><span class="n">TicksPerMillisecond</span><span class="p">;</span>
                        <span class="c1">// delayMs = 更新間隔 - ( 現在時刻（ミリ秒） % 更新間隔) -&gt; 更新間隔との差</span>
                        <span class="kt">long</span> <span class="n">delayMilliseconds</span> <span class="p">=</span> <span class="n">InteractiveUpdateRateMilliseconds</span> <span class="p">-</span> <span class="p">(</span> <span class="n">timeMillseconds</span> <span class="p">%</span> <span class="n">InteractiveUpdateRateMilliseconds</span> <span class="p">);</span>
                        <span class="c1">// UpdateTimeHandlerにメッセージをセットします。</span>
                        <span class="c1">// SendEmptyMessageDelayedメソッドは指定した時間後にメッセージを発行します。</span>
                        <span class="n">updateTimeHandler</span><span class="p">.</span><span class="nf">SendEmptyMessageDelayed</span><span class="p">(</span> <span class="n">MessageUpdateTime</span><span class="p">,</span> <span class="n">delayMilliseconds</span> <span class="p">);</span>
                    <span class="p">}</span>
                    <span class="k">break</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">);</span>

    <span class="c1">// TimeZoneReceiverのインスタンスを生成します。</span>
    <span class="n">timeZoneReceiver</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">TimeZoneReceiver</span><span class="p">(</span>
        <span class="c1">// BroadcastReceiver.OnReceiveメソッドの実行時に実行します。</span>
        <span class="n">intent</span> <span class="p">=&gt;</span> <span class="p">{</span>
            <span class="c1">// 新しいタイムゾーンを設定します。</span>
            <span class="n">nowTime</span><span class="p">.</span><span class="n">TimeZone</span> <span class="p">=</span> <span class="n">Java</span><span class="p">.</span><span class="n">Util</span><span class="p">.</span><span class="n">TimeZone</span><span class="p">.</span><span class="n">Default</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
</div>

<div class="code-frame" data-lang="csharp">
<div class="code-lang"><span class="bold">ShouldTimerBeRunningプロパティの定義</span></div>
<div class="highlight"><pre class="with-code"><code><span class="c1">// UpdateTimeHandlerを動作させるかどうかを表す値を取得します。</span>
<span class="k">private</span> <span class="kt">bool</span> <span class="n">ShouldTimerBeRunning</span> <span class="p">=&gt;</span>
    <span class="n">IsVisible</span> <span class="p">&amp;&amp;</span> <span class="p">!</span><span class="n">IsInAmbientMode</span><span class="p">;</span>
</code></pre></div>
</div>

<h3>
<span id="341-タイムゾーンの変更方法" class="fragment"></span><a href="#341-%E3%82%BF%E3%82%A4%E3%83%A0%E3%82%BE%E3%83%BC%E3%83%B3%E3%81%AE%E5%A4%89%E6%9B%B4%E6%96%B9%E6%B3%95"><i class="fa fa-link"></i></a>3.4.1. タイムゾーンの変更方法</h3>

<p>※変数名は「nowTime」であるとします。</p>

<div class="code-frame" data-lang="csharp">
<div class="code-lang"><span class="bold">AndroidのTimeクラスの場合</span></div>
<div class="highlight"><pre class="with-code"><code><span class="n">timeZoneReceiver</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">TimeZoneReceiver</span><span class="p">(</span>
    <span class="n">intent</span> <span class="p">=&gt;</span> <span class="p">{</span>
        <span class="c1">// GetStringExtraメソッドで、Android Wearとペアリングしているスマートフォンで設定したタイムゾーンのIDを取得します。</span>
        <span class="n">nowTime</span><span class="p">.</span><span class="nf">Clear</span><span class="p">(</span> <span class="n">intent</span><span class="p">.</span><span class="nf">GetStringExtra</span><span class="p">(</span> <span class="s">"time-zone"</span> <span class="p">)</span> <span class="p">);</span>
        <span class="n">nowTime</span><span class="p">.</span><span class="nf">SetToNow</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">);</span>
</code></pre></div>
</div>

<div class="code-frame" data-lang="csharp">
<div class="code-lang"><span class="bold">JavaのCalendarクラスの場合</span></div>
<div class="highlight"><pre class="with-code"><code><span class="n">timeZoneReceiver</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">TimeZoneReceiver</span><span class="p">(</span>
    <span class="n">intent</span> <span class="p">=&gt;</span> <span class="p">{</span>
        <span class="c1">// TimeZone.Defaultプロパティは、Android Wearとペアリングしているスマートフォンで設定しているタイムゾーンのIDを取得します。</span>
        <span class="c1">// もちろん、AndroidのTimeクラスのように、GetStringExtraメソッドで取得したタイムゾーンのIDを設定してもOK</span>
        <span class="n">nowTime</span><span class="p">.</span><span class="n">TimeZone</span> <span class="p">=</span> <span class="n">Java</span><span class="p">.</span><span class="n">Util</span><span class="p">.</span><span class="n">TimeZone</span><span class="p">.</span><span class="n">Default</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">);</span>
</code></pre></div>
</div>

<div class="code-frame" data-lang="csharp">
<div class="code-lang"><span class="bold">.NETのDateTime構造体の場合</span></div>
<div class="highlight"><pre class="with-code"><code><span class="n">timeZoneReceiver</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">TimeZoneReceiver</span><span class="p">(</span>
    <span class="n">intent</span> <span class="p">=&gt;</span> <span class="p">{</span>
        <span class="c1">// DateTime.Nowプロパティで取得する時刻は、Android Wearとペアリングしているスマートフォンで</span>
        <span class="c1">// 設定しているタイムゾーンが適用されています。</span>
        <span class="n">nowTime</span> <span class="p">=</span> <span class="n">DateTime</span><span class="p">.</span><span class="n">Now</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">);</span>
</code></pre></div>
</div>

<h1>
<span id="engineクラスでメソッドのオーバーライド" class="fragment"></span><a href="#engine%E3%82%AF%E3%83%A9%E3%82%B9%E3%81%A7%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E3%81%AE%E3%82%AA%E3%83%BC%E3%83%90%E3%83%BC%E3%83%A9%E3%82%A4%E3%83%89"><i class="fa fa-link"></i></a>Engineクラスでメソッドのオーバーライド</h1>

<p><a href="http://qiita.com/nia_tn1012/items/52b25bfa86c91baee16d" id="reference-c5e14ed3e2794adf091b">Vol.2 : プログラム作成編（Page-2）</a>に続きます。</p>

<h1>
<span id="参考サイト" class="fragment"></span><a href="#%E5%8F%82%E8%80%83%E3%82%B5%E3%82%A4%E3%83%88"><i class="fa fa-link"></i></a>参考サイト</h1>

<ul>
<li><a href="https://firespeed.org/diary.php?diary=kenz-1834" rel="nofollow noopener" target="_blank">Watch Faceを作る サンプルのコードを読み解く - FireSpeed</a></li>
<li>
<a href="http://qiita.com/eoppp/items/e6f2a0783810026e4d56" id="reference-f41338febedf16298ce2">Android Studioを使用して、とりあえず動くWatch faceを作る - Qiita</a> by <a href="/eoppp" class="user-mention js-hovercard" title="eoppp" data-hovercard-target-type="user" data-hovercard-target-name="eoppp">@eoppp</a>
</li>
<li>
<a href="https://github.com/googlesamples/android-wear-xamarin-watchface" rel="nofollow noopener" target="_blank">Xamarin Android WatchFace Sample - GitHub</a> by peterfriese, Redth</li>
</ul>

<h1>
<span id="xamarinでandroid-wearのwatch-faceアプリを作ってみようシリーズ一覧" class="fragment"></span><a href="#xamarin%E3%81%A7android-wear%E3%81%AEwatch-face%E3%82%A2%E3%83%97%E3%83%AA%E3%82%92%E4%BD%9C%E3%81%A3%E3%81%A6%E3%81%BF%E3%82%88%E3%81%86%E3%82%B7%E3%83%AA%E3%83%BC%E3%82%BA%E4%B8%80%E8%A6%A7"><i class="fa fa-link"></i></a>「XamarinでAndroid WearのWatch Faceアプリを作ってみよう！」シリーズ一覧</h1>

<ul>
<li><a href="http://qiita.com/nia_tn1012/items/fc5d7b2b263c73d8e0e5" id="reference-84a71f0e14f6cbdeba30">Vol. 0 : 準備編</a></li>
<li>
<a href="http://qiita.com/nia_tn1012/items/2f790ca52ee839303952">Vol. 1 : プロジェクト作成編</a>

<ul>
<li>（<a href="http://qiita.com/nia_tn1012/items/5f407f0a0b180482bb6c" id="reference-a8ad2c00402ecded3410">Vol.1x: Xamarin Studio向け</a>）</li>
</ul>
</li>
<li><strong>Vol.2 : プログラム作成編（ Page-1 / <a href="http://qiita.com/nia_tn1012/items/52b25bfa86c91baee16d">Page-2</a> ）</strong></li>
</ul>

<div class="footnotes">
<hr>
<ol>

<li id="fn1">
<p>WallpaperServiceクラスを利用する時に必要です。 <a href="#fnref1">↩</a></p>
</li>

<li id="fn2">
<p>CanvasWatchFaceService.Engineクラスは、WallpaperService.Engineを継承しています。 <a href="#fnref2">↩</a></p>
</li>

<li id="fn3">
<p>Android.Text.Format.Timeクラスでは、2032年までしか扱えないためです。 <a href="#fnref3">↩</a></p>
</li>

<li id="fn4">
<p>Watch Faceアプリにて、実際に受け取っているのは、AnalogWatchFaceServiceクラスのインスタンスです。 <a href="#fnref4">↩</a></p>
</li>

</ol>
</div>
</div></div></section><div class="css-1yzj1fm"><div class="css-1uv1qiv"><span class="fa fa-twitter"></span></div><div class="css-1uv1qiv"><span class="fa fa-facebook"></span></div></div><div class="apm-Content"><div class="apm-Content_title">Why not register and get more from Qiita?</div><ol class="apm-Content_list"><li>We will deliver articles that match you<div class="description">By following users and tags, you can catch up information on technical fields that you are interested in as a whole</div></li><li>you can read useful information later efficiently<div class="description">By &quot;stocking&quot; the articles you like, you can search right away</div></li><div><a class="apm-Content_help" href="https://help.qiita.com/ja/articles/qiita-login-user" target="_blank"><i class="fa fa-fw fa-arrow-circle-right"></i>What you can do with signing up</a></div></ol><a href="/signup?callback_action=login_or_signup&amp;redirect_to=%2Fnia_tn1012%2Fitems%2F1a4e712c1c0284fd5f49&amp;realm=qiita" class="apm-Content_button apm-Content_button-signup">Sign up</a><a href="/login?callback_action=login_or_signup&amp;redirect_to=%2Fnia_tn1012%2Fitems%2F1a4e712c1c0284fd5f49&amp;realm=qiita" class="apm-Content_button apm-Content_button-signin">Login</a></div></div><div class="css-helsa7"></div></div></div></div><div class="css-109dbrr"><div class="css-5jpx49"><div class="css-mnxgyc"><button class=" css-1vlpknv"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/nia_tn1012/items/1a4e712c1c0284fd5f49/likers" class="css-1iupg5d">0</a></div><div class="css-fsjkhv"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-1b17vb0">1</span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-7i7f4d"><div class="css-1gj7nt">Improve article</div><a href="/drafts/1a4e712c1c0284fd5f49/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/nia_tn1012/items/1a4e712c1c0284fd5f49/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/nia_tn1012/items/1a4e712c1c0284fd5f49/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/nia_tn1012/items/1a4e712c1c0284fd5f49/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/nia_tn1012/items/1a4e712c1c0284fd5f49.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="PersonalArticlePage" data-dom-id="PersonalArticlePage-react-component-b2c5074b-388c-4198-94f7-de4f6aef226d">{"authorAnalyticsTrackingId":null,"organizationAnalyticsTrackingId":null}</script>
      
<footer id="globalFooter" class="st-Footer"><div class="st-Footer_container"><div class="st-Footer_start"><div class="st-Footer_logo"><svg viewbox="0 0 426.57 130" xmlns="http://www.w3.org/2000/svg"><circle cx="167.08" cy="21.4" r="12.28" /><path d="M250.81 29.66h23.48v18.9h-23.48z" /><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z" /><circle cx="216.33" cy="21.4" r="12.28" /></svg></div><div class="st-Footer_catchcopy">How developers code is here.</div><div class="st-Footer_socials"><a class="fa fa-twitter" href="https://twitter.com/qiita"></a><a class="fa fa-facebook-square" href="https://www.facebook.com/qiita/"></a></div></div><div class="st-Footer_end"><div class="st-Footer_qiita"><div class="st-Footer_label">Qiita</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="/about">About</a><a href="/terms">Terms</a><a href="/privacy">Privacy</a><a target="_blank" href="http://help.qiita.com/ja/articles/qiita-community-guideline">Guideline</a><a target="_blank" href="https://help.qiita.com/ja/articles/others-brand-guideline">Design Guideline</a></div><div class="st-Footer_column"><a href="/release-notes">Release</a><a href="/api/v2/docs">API</a><a href="/feedback/new">ご意見</a><a href="https://help.qiita.com">Help</a><a target="_blank" href="https://qiita.com/ads?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Advertisement</a></div></div></div><div class="st-Footer_increments"><div class="st-Footer_label">Increments</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="https://increments.co.jp/company/">About</a><a href="https://increments.co.jp/jobs/">採用情報</a><a href="https://blog.qiita.com">Blog</a></div><div class="st-Footer_column"><a href="https://teams.qiita.com/">Qiita Team</a><a href="https://jobs.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Jobs</a><a href="https://zine.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Zine</a></div></div></div></div></div><div class="st-Footer_copyright">© 2011-2021 Increments Inc.</div></footer><div id="Snackbar-react-component-12205421-01a4-459f-aa19-03d7f3b69102"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="Snackbar" data-dom-id="Snackbar-react-component-12205421-01a4-459f-aa19-03d7f3b69102">{}</script>
      
<div id="LoginModal-react-component-687e6184-f226-4a55-9465-1d5b07c6b7be"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="LoginModal" data-dom-id="LoginModal-react-component-687e6184-f226-4a55-9465-1d5b07c6b7be">{}</script>
      
<div id="StockModal-react-component-a7555fb7-4765-4527-8ade-d740c7854352"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="StockModal" data-dom-id="StockModal-react-component-a7555fb7-4765-4527-8ade-d740c7854352">{}</script>
      
</div><div id="dataContainer" style="display: none;" data-config="{&quot;actionPath&quot;:&quot;public/items#show&quot;,&quot;settings&quot;:{&quot;analyticsTrackingId&quot;:&quot;UA-24675221-12&quot;,&quot;assetsMap&quot;:{},&quot;csrfToken&quot;:&quot;o8ysWFLcMaYGpWICcwicpzf/8QjvNezgKyq1l++G2pD6bvO1VmLfK9TIVb49ICQUmzHGtKrSWNwoazXCPYdnpg==&quot;,&quot;locale&quot;:&quot;en&quot;},&quot;currentUser&quot;:null}" /></body></html><script type="application/json" data-js-react-on-rails-store="AppStoreWithReactOnRails">{"snackbar":{"type":"","body":"","isActive":false},"article":{"article":{"body":"\u003cp\u003eこんにちはー！ニアです。\u003cbr\u003e\n今回はWatch Faceアプリのプログラムをコーディングしていきます。\u003c/p\u003e\n\n\u003cblockquote\u003e\n\u003cp\u003e※Vol.2はコンテンツの量が多いので、2記事に分割しています。\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003cul\u003e\n\u003cli\u003e前のセクション : \u003ca href=\"http://qiita.com/nia_tn1012/items/2f790ca52ee839303952\" id=\"reference-701543084c8028c099b5\"\u003eVol.1 : プロジェクト作成編\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"1-watch-faceアプリのクラス構成\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#1-watch-face%E3%82%A2%E3%83%97%E3%83%AA%E3%81%AE%E3%82%AF%E3%83%A9%E3%82%B9%E6%A7%8B%E6%88%90\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e1. Watch Faceアプリのクラス構成\u003c/h1\u003e\n\n\u003cp\u003eWatch Faceアプリのクラスは、\u003cstrong\u003e\u003ca href=\"https://developer.android.com/reference/android/support/wearable/watchface/CanvasWatchFaceService.html\" rel=\"nofollow noopener\" target=\"_blank\"\u003eCanvasWatchFaceService\u003c/a\u003e\u003c/strong\u003eクラスを継承し、\u003cstrong\u003e\u003ca href=\"https://developer.android.com/reference/android/support/wearable/watchface/CanvasWatchFaceService.Engine.html\" rel=\"nofollow noopener\" target=\"_blank\"\u003eCanvasWatchFaceService.Engine\u003c/a\u003e\u003c/strong\u003eの派生クラスの定義と、\u003cstrong\u003e\u003ca href=\"https://developer.android.com/reference/android/support/wearable/watchface/WatchFaceService.Engine.html\" rel=\"nofollow noopener\" target=\"_blank\"\u003eWallpaperService.Engine\u003c/a\u003e\u003c/strong\u003eを作成するメソッドをオーバーライドしたもので構成されています。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eクラス構成\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eMyWatchFaceService\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eCanvasWatchFaceService\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eoverride\u003c/span\u003e \u003cspan class=\"n\"\u003eWallpaperService\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eEngine\u003c/span\u003e \u003cspan class=\"nf\"\u003eOnCreateEngine\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eMyWatchFaceEngine\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eCanvasWatchFaceService\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eEngine\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003eMyWatchFaceEngine\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"n\"\u003eCanvasWatchFaceService\u003c/span\u003e \u003cspan class=\"n\"\u003eowner\u003c/span\u003e \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eoverride\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eOnCreate\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"n\"\u003eISurfaceHolder\u003c/span\u003e \u003cspan class=\"n\"\u003eholder\u003c/span\u003e \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eoverride\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eOnDestroy\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eoverride\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eOnApplyWindowInsets\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"n\"\u003eWindowInsets\u003c/span\u003e \u003cspan class=\"n\"\u003einsets\u003c/span\u003e \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eoverride\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eOnPropertiesChanged\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"n\"\u003eBundle\u003c/span\u003e \u003cspan class=\"n\"\u003eproperties\u003c/span\u003e \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eoverride\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eOnTimeTick\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eoverride\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eOnAmbientModeChanged\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"n\"\u003einAmbientMode\u003c/span\u003e \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eoverride\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eOnInterruptionFilterChanged\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003einterruptionFilter\u003c/span\u003e \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eoverride\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eOnTapCommand\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003etapType\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003exValue\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003eyValue\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003elong\u003c/span\u003e \u003cspan class=\"n\"\u003eeventTime\u003c/span\u003e \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eoverride\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eOnDraw\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"n\"\u003eCanvas\u003c/span\u003e \u003cspan class=\"n\"\u003ecanvas\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eRect\u003c/span\u003e \u003cspan class=\"n\"\u003ebounds\u003c/span\u003e \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eoverride\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eOnVisibilityChanged\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"n\"\u003evisible\u003c/span\u003e \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"11-watch-faceアプリのプログラム作成でよく使用する名前空間\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#11-watch-face%E3%82%A2%E3%83%97%E3%83%AA%E3%81%AE%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%A0%E4%BD%9C%E6%88%90%E3%81%A7%E3%82%88%E3%81%8F%E4%BD%BF%E7%94%A8%E3%81%99%E3%82%8B%E5%90%8D%E5%89%8D%E7%A9%BA%E9%96%93\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e1.1. Watch Faceアプリのプログラム作成でよく使用する名前空間\u003c/h2\u003e\n\n\u003cp\u003e以下に、今回作成するプログラムでよく使用する名前空間を示します。よく使用する名前空間は\u003cstrong\u003eusing\u003c/strong\u003eディレクティブを利用すると、コードを短く記述することができ、便利です。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eWatchFaceアプリのプログラム作成でよく使用する名前空間\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eAndroid.App\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eAndroid.Content\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eAndroid.Graphics\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eAndroid.Graphics.Drawables\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eAndroid.OS\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eAndroid.Service.Wallpaper\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eAndroid.Support.V4.Content\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eAndroid.Support.Wearable.Watchface\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eAndroid.Text.Format\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eAndroid.Views\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"2-watch-faceのserviceクラスの作成\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#2-watch-face%E3%81%AEservice%E3%82%AF%E3%83%A9%E3%82%B9%E3%81%AE%E4%BD%9C%E6%88%90\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e2. Watch FaceのServiceクラスの作成\u003c/h1\u003e\n\n\u003cp\u003eまず、Watch Faceのサービスクラスを定義します。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eServiceクラスの宣言\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eAnalogWatchFaceService\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eCanvasWatchFaceService\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e// 中略\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cblockquote\u003e\n\u003cp\u003e※本記事では「AnalogWatchFaceService」と名付けています。\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"21-クラスの属性でandroidのマニフェストのservice要素を構成\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#21-%E3%82%AF%E3%83%A9%E3%82%B9%E3%81%AE%E5%B1%9E%E6%80%A7%E3%81%A7android%E3%81%AE%E3%83%9E%E3%83%8B%E3%83%95%E3%82%A7%E3%82%B9%E3%83%88%E3%81%AEservice%E8%A6%81%E7%B4%A0%E3%82%92%E6%A7%8B%E6%88%90\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e2.1. クラスの属性で、AndroidのマニフェストのService要素を構成\u003c/h2\u003e\n\n\u003cp\u003e先ほど宣言したAnalogWatchFaceServiceクラスに、クラスの属性を追加して、AndroidのマニフェストのService要素を構成します。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"211-サービスの名前を設定\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#211-%E3%82%B5%E3%83%BC%E3%83%93%E3%82%B9%E3%81%AE%E5%90%8D%E5%89%8D%E3%82%92%E8%A8%AD%E5%AE%9A\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e2.1.1. サービスの名前を設定\u003c/h3\u003e\n\n\u003cp\u003e「\u003cstrong\u003eService\u003c/strong\u003e」属性を追加し、LabelフィールドにWatch Faceの名前を、Permissionフィールドに「\u003cstrong\u003eandroid.permission.BIND_WALLPAPER\u003c/strong\u003e」\u003csup id=\"fnref1\"\u003e\u003ca href=\"#fn1\" title=\"WallpaperServiceクラスを利用する時に必要です。\"\u003e1\u003c/a\u003e\u003c/sup\u003eを設定します。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eサービスの名前を設定\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nf\"\u003eService\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"n\"\u003eLabel\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"@string/my_watch_name\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ePermission\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"android.permission.BIND_WALLPAPER\"\u003c/span\u003e \u003cspan class=\"p\"\u003e)]\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"212-メタデータを設定\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#212-%E3%83%A1%E3%82%BF%E3%83%87%E3%83%BC%E3%82%BF%E3%82%92%E8%A8%AD%E5%AE%9A\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e2.1.2. メタデータを設定\u003c/h3\u003e\n\n\u003cp\u003e「\u003cstrong\u003eMetaData\u003c/strong\u003e」属性を3つ追加します。\u003c/p\u003e\n\n\u003cp\u003e1つは、引数に「\u003cstrong\u003eandroid.service.wallpaper\u003c/strong\u003e」を、Resourceフィールドに「\u003cstrong\u003e@xml/watch_face\u003c/strong\u003e」（※Vol2.で作成した、Resources/\u003cstrong\u003exml/watch_face.xml\u003c/strong\u003eが参照されます。）を指定します。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nf\"\u003eMetaData\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"s\"\u003e\"android.service.wallpaper\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eResource\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"@xml/watch_face\"\u003c/span\u003e \u003cspan class=\"p\"\u003e)]\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e残りの2つは、プレビュー画面に表示する画像のパスを指定します。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eプレビュー画面用の画像を指定\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"c1\"\u003e// 四角形\u003c/span\u003e\n\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nf\"\u003eMetaData\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"s\"\u003e\"com.google.android.wearable.watchface.preview\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eResource\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"@drawable/preview\"\u003c/span\u003e \u003cspan class=\"p\"\u003e)]\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e// 丸形\u003c/span\u003e\n\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nf\"\u003eMetaData\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"s\"\u003e\"com.google.android.wearable.watchface.preview_circular\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eResource\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"@drawable/preview_circular\"\u003c/span\u003e \u003cspan class=\"p\"\u003e)]\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cblockquote\u003e\n\u003cp\u003e※リソースのパスを指定する時、「-nodpi」などの修飾子は不要です。\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"213-追加のintentフィルターを設定\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#213-%E8%BF%BD%E5%8A%A0%E3%81%AEintent%E3%83%95%E3%82%A3%E3%83%AB%E3%82%BF%E3%83%BC%E3%82%92%E8%A8%AD%E5%AE%9A\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e2.1.3. 追加のIntentフィルターを設定\u003c/h3\u003e\n\n\u003cp\u003eWallpaperServiceクラスに、1つのIntentフィルターを追加します。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eWallpaperServiceクラスにIntentフィルターを追加\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nf\"\u003eIntentFilter\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e\u003cspan class=\"p\"\u003e[]\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"s\"\u003e\"android.service.wallpaper.WallpaperService\"\u003c/span\u003e \u003cspan class=\"p\"\u003e},\u003c/span\u003e \u003cspan class=\"n\"\u003eCategories\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e\u003cspan class=\"p\"\u003e[]\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"s\"\u003e\"com.google.android.wearable.watchface.category.WATCH_FACE\"\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e \u003cspan class=\"p\"\u003e)]\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"214-クラス属性のまとめ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#214-%E3%82%AF%E3%83%A9%E3%82%B9%E5%B1%9E%E6%80%A7%E3%81%AE%E3%81%BE%E3%81%A8%E3%82%81\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e2.1.4. クラス属性のまとめ\u003c/h3\u003e\n\n\u003cp\u003e2.1.1.～2.1.3.のクラス属性をまとめると、以下のようなコードになります。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eAndroidのマニフェスト、Service要素を構成\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nf\"\u003eService\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"n\"\u003eLabel\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"@string/watch_name\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ePermission\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"android.permission.BIND_WALLPAPER\"\u003c/span\u003e \u003cspan class=\"p\"\u003e)]\u003c/span\u003e\n\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nf\"\u003eMetaData\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"s\"\u003e\"android.service.wallpaper\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eResource\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"@xml/watch_face\"\u003c/span\u003e \u003cspan class=\"p\"\u003e)]\u003c/span\u003e\n\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nf\"\u003eMetaData\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"s\"\u003e\"com.google.android.wearable.watchface.preview\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eResource\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"@drawable/preview\"\u003c/span\u003e \u003cspan class=\"p\"\u003e)]\u003c/span\u003e\n\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nf\"\u003eMetaData\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"s\"\u003e\"com.google.android.wearable.watchface.preview_circular\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eResource\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"@drawable/preview_circular\"\u003c/span\u003e \u003cspan class=\"p\"\u003e)]\u003c/span\u003e\n\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nf\"\u003eIntentFilter\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e\u003cspan class=\"p\"\u003e[]\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"s\"\u003e\"android.service.wallpaper.WallpaperService\"\u003c/span\u003e \u003cspan class=\"p\"\u003e},\u003c/span\u003e \u003cspan class=\"n\"\u003eCategories\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e\u003cspan class=\"p\"\u003e[]\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"s\"\u003e\"com.google.android.wearable.watchface.category.WATCH_FACE\"\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e \u003cspan class=\"p\"\u003e)]\u003c/span\u003e\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eAnalogWatchFaceService\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eCanvasWatchFaceService\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e// 中略\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e設定したクラスの属性は、ビルド時にAndroidManufest.xmlへ統合されます。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"xml\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eAndroidManufest.xml（ビルド時）\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"nt\"\u003e\u0026lt;manufest\u0026gt;\u003c/span\u003e\n\u003cspan class=\"c\"\u003e\u0026lt;!-- 中略 --\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"nt\"\u003e\u0026lt;application\u003c/span\u003e \u003cspan class=\"na\"\u003eandroid:label=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"@string/app_name\"\u003c/span\u003e \u003cspan class=\"na\"\u003eandroid:allowEmbedded=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"true\"\u003c/span\u003e \u003cspan class=\"na\"\u003eandroid:taskAffinity=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\"\u003c/span\u003e \u003cspan class=\"na\"\u003eandroid:allowBackup=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"true\"\u003c/span\u003e \u003cspan class=\"na\"\u003eandroid:supportsRtl=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"true\"\u003c/span\u003e \u003cspan class=\"na\"\u003eandroid:theme=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"@android:style/Theme.DeviceDefault\"\u003c/span\u003e \u003cspan class=\"na\"\u003eandroid:name=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"android.app.Application\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;service\u003c/span\u003e \u003cspan class=\"na\"\u003eandroid:label=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"@string/watch_name\"\u003c/span\u003e \u003cspan class=\"na\"\u003eandroid:permission=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"android.permission.BIND_WALLPAPER\"\u003c/span\u003e \u003cspan class=\"na\"\u003eandroid:name=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"md[GUID].AnalogWatchFaceService\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"nt\"\u003e\u0026lt;meta-data\u003c/span\u003e \u003cspan class=\"na\"\u003eandroid:name=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"android.service.wallpaper\"\u003c/span\u003e \u003cspan class=\"na\"\u003eandroid:resource=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"@xml/watch_face\"\u003c/span\u003e \u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"nt\"\u003e\u0026lt;meta-data\u003c/span\u003e \u003cspan class=\"na\"\u003eandroid:name=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"com.google.android.wearable.watchface.preview\"\u003c/span\u003e \u003cspan class=\"na\"\u003eandroid:resource=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"@drawable/preview\"\u003c/span\u003e \u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"nt\"\u003e\u0026lt;meta-data\u003c/span\u003e \u003cspan class=\"na\"\u003eandroid:name=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"com.google.android.wearable.watchface.preview_circular\"\u003c/span\u003e \u003cspan class=\"na\"\u003eandroid:resource=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"@drawable/preview_circular\"\u003c/span\u003e \u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"nt\"\u003e\u0026lt;intent-filter\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"nt\"\u003e\u0026lt;action\u003c/span\u003e \u003cspan class=\"na\"\u003eandroid:name=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"android.service.wallpaper.WallpaperService\"\u003c/span\u003e \u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"nt\"\u003e\u0026lt;category\u003c/span\u003e \u003cspan class=\"na\"\u003eandroid:name=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"com.google.android.wearable.watchface.category.WATCH_FACE\"\u003c/span\u003e \u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"nt\"\u003e\u0026lt;/intent-filter\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;/service\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;provider\u003c/span\u003e \u003cspan class=\"na\"\u003eandroid:name=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"mono.MonoRuntimeProvider\"\u003c/span\u003e \u003cspan class=\"na\"\u003eandroid:exported=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"false\"\u003c/span\u003e \u003cspan class=\"na\"\u003eandroid:initOrder=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"2147483647\"\u003c/span\u003e \u003cspan class=\"na\"\u003eandroid:authorities=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"[パッケージ名].mono.MonoRuntimeProvider.__mono_init__\"\u003c/span\u003e \u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"nt\"\u003e\u0026lt;/application\u0026gt;\u003c/span\u003e\n\u003cspan class=\"nt\"\u003e\u0026lt;/manufest\u0026gt;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"22-メンバーを定義\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#22-%E3%83%A1%E3%83%B3%E3%83%90%E3%83%BC%E3%82%92%E5%AE%9A%E7%BE%A9\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e2.2. メンバーを定義\u003c/h2\u003e\n\n\u003cp\u003eAnalogWatchFaceServiceクラスに、以下のようにメンバーを定義します。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eAnalogWatchFaceServiceクラスのメンバーを定義\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"c1\"\u003e// 中略\u003c/span\u003e\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eAnalogWatchFaceService\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eCanvasWatchFaceService\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e// インタラクティブモードにおける更新間隔（ミリ秒単位）を表します。\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e// Java.Util.Concurrent.TimeUnit.Seconds.ToMillisメソッドは、指定した秒の値をミリ秒に変換します。（※）\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003estatic\u003c/span\u003e \u003cspan class=\"k\"\u003ereadonly\u003c/span\u003e \u003cspan class=\"kt\"\u003elong\u003c/span\u003e \u003cspan class=\"n\"\u003eInteractiveUpdateRateMilliseconds\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eJava\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eUtil\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eConcurrent\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eTimeUnit\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eSeconds\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eToMillis\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"m\"\u003e1\u003c/span\u003e \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e// インタラクティブモードにて、定期的に時刻を更新するための、ハンドラー用のメッセージのIDを表します。\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e// 値は何でもOKです。\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003econst\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003eMessageUpdateTime\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e// 中略\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003e（※）JavaのTimeUnitクラスの代わりに、.NETのTimeSpan構造体を利用する場合\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003estatic\u003c/span\u003e \u003cspan class=\"k\"\u003ereadonly\u003c/span\u003e \u003cspan class=\"kt\"\u003elong\u003c/span\u003e \u003cspan class=\"n\"\u003eInteractiveUpdateRateMilliseconds\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"kt\"\u003elong\u003c/span\u003e \u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"n\"\u003eTimeSpan\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eFromSeconds\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"m\"\u003e1\u003c/span\u003e \u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"n\"\u003eTotalMilliseconds\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"3-watch-faceのengineクラスを作成\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#3-watch-face%E3%81%AEengine%E3%82%AF%E3%83%A9%E3%82%B9%E3%82%92%E4%BD%9C%E6%88%90\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e3. Watch FaceのEngineクラスを作成\u003c/h1\u003e\n\n\u003cp\u003e次に、Watch Faceの動作の要となるEngineクラスをAnalogWatchFaceServiceクラスの中に定義し、作成していきます。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eEngineクラスの宣言\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"c1\"\u003e// 中略\u003c/span\u003e\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eAnalogWatchFaceService\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eCanvasWatchFaceService\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e// 中略\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eAnalogWatchFaceEngine\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eCanvasWatchFaceService\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eEngine\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cblockquote\u003e\n\u003cp\u003e※本記事では「AnalogWatchFaceEngine」と名付けています。\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"31-oncreateengineメソッドをオーバーライド\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#31-oncreateengine%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E3%82%92%E3%82%AA%E3%83%BC%E3%83%90%E3%83%BC%E3%83%A9%E3%82%A4%E3%83%89\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e3.1. OnCreateEngineメソッドをオーバーライド\u003c/h2\u003e\n\n\u003cp\u003eCanvasWatchFaceServiceクラスの\u003cstrong\u003e\u003ca href=\"https://developer.android.com/reference/android/service/wallpaper/WallpaperService.html#onCreateEngine()\" rel=\"nofollow noopener\" target=\"_blank\"\u003eOnCreateEngine\u003c/a\u003e\u003c/strong\u003eメソッドを、AnalogWatchFaceServiceクラスでオーバーライドします。メソッド内では、AnalogWatchFaceEngineクラスのコンストラクター（※）を呼び出し、生成したインスタンスを返します\u003csup id=\"fnref2\"\u003e\u003ca href=\"#fn2\" title=\"CanvasWatchFaceService.Engineクラスは、WallpaperService.Engineを継承しています。\"\u003e2\u003c/a\u003e\u003c/sup\u003e。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eOnCreateEngineメソッドをオーバーライド\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"c1\"\u003e// 中略\u003c/span\u003e\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eAnalogWatchFaceService\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eCanvasWatchFaceService\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e// 中略\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eoverride\u003c/span\u003e \u003cspan class=\"n\"\u003eWallpaperService\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eEngine\u003c/span\u003e \u003cspan class=\"nf\"\u003eOnCreateEngine\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eAnalogWatchFaceEngine\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eAnalogWatchFaceEngine\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eCanvasWatchFaceService\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eEngine\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cblockquote\u003e\n\u003cp\u003e※コンストラクターは3.4節で作成します。\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"32-メンバー変数を定義\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#32-%E3%83%A1%E3%83%B3%E3%83%90%E3%83%BC%E5%A4%89%E6%95%B0%E3%82%92%E5%AE%9A%E7%BE%A9\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e3.2. メンバー変数を定義\u003c/h2\u003e\n\n\u003cp\u003eAnalogWatchFaceEngineクラスに、以下のようにメンバーを定義します。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eAnalogWatchFaceEngineクラスのメンバーを定義\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eAnalogWatchFaceEngine\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eCanvasWatchFaceService\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eEngine\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e// CanvasWatchFaceServiceオブジェクトの参照を格納します。\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003eCanvasWatchFaceService\u003c/span\u003e \u003cspan class=\"n\"\u003eowner\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e// 時刻を更新する時の処理を行うハンドラーを表します。\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003ereadonly\u003c/span\u003e \u003cspan class=\"n\"\u003eHandler\u003c/span\u003e \u003cspan class=\"n\"\u003eupdateTimeHandler\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e// 現在時刻を表します。\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003eJava\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eUtil\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eCalendar\u003c/span\u003e \u003cspan class=\"n\"\u003enowTime\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e// 背景用のペイントオブジェクトを表します。\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003ePaint\u003c/span\u003e \u003cspan class=\"n\"\u003ebackgroundPaint\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e// 時針、分針、秒針用のオブジェクトを表します。\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003ePaint\u003c/span\u003e \u003cspan class=\"n\"\u003ehourHandPaint\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003ePaint\u003c/span\u003e \u003cspan class=\"n\"\u003eminuteHandPaint\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003ePaint\u003c/span\u003e \u003cspan class=\"n\"\u003esecondHandPaint\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e// アンビエントモードであるかどうかを表します。\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"n\"\u003eisAmbient\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e// アンビエントモード時、デバイスがLow-Bitの制限を必要としているかどうかを表します。\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"n\"\u003eisRequiredLowBitAmbient\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e// アンビエントモード時、デバイスが焼き付け防止を必要としているかどうかを表します。\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"n\"\u003eisReqiredBurnInProtection\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e// ミュート状態であるかどうかを表します。\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"n\"\u003eisMute\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e// タイムゾーンを変更した時に通知を受け取るレシーバーを表します。（※）\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003eTimeZoneReceiver\u003c/span\u003e \u003cspan class=\"n\"\u003etimeZoneReceiver\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e// 中略\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cblockquote\u003e\n\u003cp\u003e※TimeZoneReceiverクラスは3.3節で作成します。\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"321-xamarinandroidで利用できる日付時刻クラス\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#321-xamarinandroid%E3%81%A7%E5%88%A9%E7%94%A8%E3%81%A7%E3%81%8D%E3%82%8B%E6%97%A5%E4%BB%98%E6%99%82%E5%88%BB%E3%82%AF%E3%83%A9%E3%82%B9\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e3.2.1. Xamarin.Androidで利用できる、日付・時刻クラス\u003c/h3\u003e\n\n\u003cp\u003eXamarin.Androidでは、以下の3つの日付・時刻のクラス及び構造体を利用できます。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\n\u003cstrong\u003eAndroid.Text.Format.\u003ca href=\"https://developer.android.com/reference/android/text/format/Time.html\" rel=\"nofollow noopener\" target=\"_blank\"\u003eTime\u003c/a\u003e\u003c/strong\u003eクラス（Androidのライブラリ）\u003c/li\u003e\n\u003cli\u003e\n\u003cstrong\u003eJava.Util.\u003ca href=\"https://developer.android.com/reference/java/util/Calendar.html\" rel=\"nofollow noopener\" target=\"_blank\"\u003eCalendar\u003c/a\u003e\u003c/strong\u003eクラス（Javaのライブラリ）\u003c/li\u003e\n\u003cli\u003e\n\u003cstrong\u003eSystem.\u003ca href=\"https://developer.xamarin.com/api/type/System.DateTime/\" rel=\"nofollow noopener\" target=\"_blank\"\u003eDateTime\u003c/a\u003e\u003c/strong\u003e構造体（.NET（Mono.Android）のライブラリ）\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e但し、\u003cstrong\u003eAndroid.Text.Format.TimeクラスはAndroid API Level 22以降では非推奨\u003csup id=\"fnref3\"\u003e\u003ca href=\"#fn3\" title=\"Android.Text.Format.Timeクラスでは、2032年までしか扱えないためです。\"\u003e3\u003c/a\u003e\u003c/sup\u003e\u003c/strong\u003eとなっているので、後者2つのいずれかを利用することをオススメします。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"322-android-wearのモード\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#322-android-wear%E3%81%AE%E3%83%A2%E3%83%BC%E3%83%89\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e3.2.2. Android Wearのモード\u003c/h3\u003e\n\n\u003cp\u003eAndroid Wearには「\u003cstrong\u003eインタラクティブモード（Interactive mode）\u003c/strong\u003e」と「\u003cstrong\u003eアンビエントモード（Ambient mode）\u003c/strong\u003e」の2つのモードがあります。\u003c/p\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"-インタラクティブモード\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#-%E3%82%A4%E3%83%B3%E3%82%BF%E3%83%A9%E3%82%AF%E3%83%86%E3%82%A3%E3%83%96%E3%83%A2%E3%83%BC%E3%83%89\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e◆ インタラクティブモード\u003c/h4\u003e\n\n\u003cp\u003eインタラクティブモードは、Android Wearにおける通常のモードで、画面に触れたり、デバイスを傾けたりするとこのモードに移行します。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eWatch Faceのすべての機能を利用できます。\u003c/li\u003e\n\u003cli\u003eすべての色を利用できます。\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"-アンビエントモード\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#-%E3%82%A2%E3%83%B3%E3%83%93%E3%82%A8%E3%83%B3%E3%83%88%E3%83%A2%E3%83%BC%E3%83%89\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e◆ アンビエントモード\u003c/h4\u003e\n\n\u003cp\u003eアンビエントモードは、いわゆる省電力モードで、インタラクティブモードの状態から一定時間が経つとこのモードに移行します。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e更新間隔は\u003cstrong\u003e1分\u003c/strong\u003eとなります。\u003c/li\u003e\n\u003cli\u003e色はグレースケールのみを利用します。\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"323-low-bitの制限と焼き付き防止\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#323-low-bit%E3%81%AE%E5%88%B6%E9%99%90%E3%81%A8%E7%84%BC%E3%81%8D%E4%BB%98%E3%81%8D%E9%98%B2%E6%AD%A2\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e3.2.3. Low-Bitの制限と焼き付き防止\u003c/h3\u003e\n\n\u003cp\u003eAndroid Wearのデバイスによっては、アンビエントモード時にアンチエイリアスを無効にしたり、焼き付き防止の工夫をしたりする必要があります。\u003c/p\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"-low-bitの制限を必要とする時\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#-low-bit%E3%81%AE%E5%88%B6%E9%99%90%E3%82%92%E5%BF%85%E8%A6%81%E3%81%A8%E3%81%99%E3%82%8B%E6%99%82\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e◆ Low-Bitの制限を必要とする時\u003c/h4\u003e\n\n\u003cul\u003e\n\u003cli\u003e色はグレースケールではなく、白黒のみとします。\u003c/li\u003e\n\u003cli\u003eアンチエイリアスを無効にします\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"-焼き付き防止を必要とする時\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#-%E7%84%BC%E3%81%8D%E4%BB%98%E3%81%8D%E9%98%B2%E6%AD%A2%E3%82%92%E5%BF%85%E8%A6%81%E3%81%A8%E3%81%99%E3%82%8B%E6%99%82\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e◆ 焼き付き防止を必要とする時\u003c/h4\u003e\n\n\u003cul\u003e\n\u003cli\u003e画像はなるべく輪郭のみに（黒の領域を可能な限り多く占めるように）します。\u003c/li\u003e\n\u003cli\u003eディスプレイの端から数ピクセルにはなるべく描画しないようにします。\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"33-タイムゾーンが変更された時の処理を行うbroadcastreceiverの派生クラスを作成\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#33-%E3%82%BF%E3%82%A4%E3%83%A0%E3%82%BE%E3%83%BC%E3%83%B3%E3%81%8C%E5%A4%89%E6%9B%B4%E3%81%95%E3%82%8C%E3%81%9F%E6%99%82%E3%81%AE%E5%87%A6%E7%90%86%E3%82%92%E8%A1%8C%E3%81%86broadcastreceiver%E3%81%AE%E6%B4%BE%E7%94%9F%E3%82%AF%E3%83%A9%E3%82%B9%E3%82%92%E4%BD%9C%E6%88%90\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e3.3. タイムゾーンが変更された時の処理を行う、BroadcastReceiverの派生クラスを作成\u003c/h2\u003e\n\n\u003cp\u003e\u003cstrong\u003e\u003ca href=\"https://developer.android.com/reference/android/content/BroadcastReceiver.html\" rel=\"nofollow noopener\" target=\"_blank\"\u003eBroadcastReceiver\u003c/a\u003e\u003c/strong\u003eクラスを継承した派生クラスを、AnalogWatchFaceServiceクラスの外で作成します。\u003cbr\u003e\n\u003cstrong\u003e\u003ca href=\"https://developer.xamarin.com/api/type/System.Action%3CT%3E/\" rel=\"nofollow noopener\" target=\"_blank\"\u003eAction\u0026lt;Intent\u0026gt;\u003c/a\u003e\u003c/strong\u003e型のデリゲート1つを定義し、オーバーライドした\u003cstrong\u003e\u003ca href=\"https://developer.android.com/reference/android/content/BroadcastReceiver.html#onReceive(android.content.Context,%20android.content.Intent)\" rel=\"nofollow noopener\" target=\"_blank\"\u003eOnReceive\u003c/a\u003e\u003c/strong\u003eメソッドで呼び出すように構成します。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eTimeZoneRecieverクラスの定義\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"c1\"\u003e// タイムゾーンを変更した時に通知を受け取るレシーバーを提供します。\u003c/span\u003e\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eTimeZoneReceiver\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eBroadcastReceiver\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e// タイムゾーンを変更した通知を受け取った時に実行するデリゲートを表します。\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003eAction\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eIntent\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ereceiver\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e// OnReceiveメソッドで実行する処理を\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003eTimeZoneReceiver\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"n\"\u003eAction\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eIntent\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003e_receiver\u003c/span\u003e \u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003ereceiver\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003e_receiver\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e// タイムゾーンを変更した通知を受け取った時に実行します。\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eoverride\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eOnReceive\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"n\"\u003eContext\u003c/span\u003e \u003cspan class=\"n\"\u003econtext\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eIntent\u003c/span\u003e \u003cspan class=\"n\"\u003eintent\u003c/span\u003e \u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003ereceiver\u003c/span\u003e\u003cspan class=\"p\"\u003e?.\u003c/span\u003e\u003cspan class=\"nf\"\u003eInvoke\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"n\"\u003eintent\u003c/span\u003e \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"34-コンストラクターを定義\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#34-%E3%82%B3%E3%83%B3%E3%82%B9%E3%83%88%E3%83%A9%E3%82%AF%E3%82%BF%E3%83%BC%E3%82%92%E5%AE%9A%E7%BE%A9\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e3.4. コンストラクターを定義\u003c/h2\u003e\n\n\u003cp\u003eAnalogWatchFaceEngineクラスのコンストラクターを定義します。CanvasWatchFaceService型1つを引数\u003csup id=\"fnref4\"\u003e\u003ca href=\"#fn4\" title=\"Watch Faceアプリにて、実際に受け取っているのは、AnalogWatchFaceServiceクラスのインスタンスです。\"\u003e4\u003c/a\u003e\u003c/sup\u003eにとり、基底クラスのコンストラクターの引数に渡します。\u003c/p\u003e\n\n\u003cp\u003eコンストラクターの中では、時刻を更新する時の処理を行うハンドラーと、タイムゾーンを変更した時に通知を受け取るレシーバーの初期化をします。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eAnalogWatchFaceEngineクラスのコンストラクター\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003eAnalogWatchFaceEngine\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"n\"\u003eCanvasWatchFaceService\u003c/span\u003e \u003cspan class=\"n\"\u003eowner\u003c/span\u003e \u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"k\"\u003ebase\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"n\"\u003eowner\u003c/span\u003e \u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e// CanvasWatchFaceServiceクラスを継承したオブジェクトの参照をセットします。\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eowner\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eowner\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e// 時刻を更新する時の処理を構成します。\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eupdateTimeHandler\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eHandler\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n        \u003cspan class=\"n\"\u003emessage\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"c1\"\u003e// Whatプロパティでメッセージを判別します。\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eswitch\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"n\"\u003emessage\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eWhat\u003c/span\u003e \u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"k\"\u003ecase\u003c/span\u003e \u003cspan class=\"n\"\u003eMessageUpdateTime\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n                    \u003cspan class=\"c1\"\u003e// TODO : 時刻の更新のメッセージの時の処理を入れます。\u003c/span\u003e\n                    \u003cspan class=\"c1\"\u003e// ウォッチフェイスを再描画します。\u003c/span\u003e\n                    \u003cspan class=\"nf\"\u003eInvalidate\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n                    \u003cspan class=\"c1\"\u003e// UpdateTimeHandlerを動作させるかどうかを判別します。\u003c/span\u003e\n                    \u003cspan class=\"k\"\u003eif\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"n\"\u003eShouldTimerBeRunning\u003c/span\u003e \u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                        \u003cspan class=\"kt\"\u003elong\u003c/span\u003e \u003cspan class=\"n\"\u003etimeMillseconds\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eDateTime\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eUtcNow\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eTicks\u003c/span\u003e \u003cspan class=\"p\"\u003e/\u003c/span\u003e \u003cspan class=\"n\"\u003eTimeSpan\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eTicksPerMillisecond\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n                        \u003cspan class=\"c1\"\u003e// delayMs = 更新間隔 - ( 現在時刻（ミリ秒） % 更新間隔) -\u0026gt; 更新間隔との差\u003c/span\u003e\n                        \u003cspan class=\"kt\"\u003elong\u003c/span\u003e \u003cspan class=\"n\"\u003edelayMilliseconds\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eInteractiveUpdateRateMilliseconds\u003c/span\u003e \u003cspan class=\"p\"\u003e-\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"n\"\u003etimeMillseconds\u003c/span\u003e \u003cspan class=\"p\"\u003e%\u003c/span\u003e \u003cspan class=\"n\"\u003eInteractiveUpdateRateMilliseconds\u003c/span\u003e \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n                        \u003cspan class=\"c1\"\u003e// UpdateTimeHandlerにメッセージをセットします。\u003c/span\u003e\n                        \u003cspan class=\"c1\"\u003e// SendEmptyMessageDelayedメソッドは指定した時間後にメッセージを発行します。\u003c/span\u003e\n                        \u003cspan class=\"n\"\u003eupdateTimeHandler\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSendEmptyMessageDelayed\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"n\"\u003eMessageUpdateTime\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003edelayMilliseconds\u003c/span\u003e \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n                    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n                    \u003cspan class=\"k\"\u003ebreak\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e// TimeZoneReceiverのインスタンスを生成します。\u003c/span\u003e\n    \u003cspan class=\"n\"\u003etimeZoneReceiver\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eTimeZoneReceiver\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e// BroadcastReceiver.OnReceiveメソッドの実行時に実行します。\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eintent\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"c1\"\u003e// 新しいタイムゾーンを設定します。\u003c/span\u003e\n            \u003cspan class=\"n\"\u003enowTime\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eTimeZone\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eJava\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eUtil\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eTimeZone\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eDefault\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eShouldTimerBeRunningプロパティの定義\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"c1\"\u003e// UpdateTimeHandlerを動作させるかどうかを表す値を取得します。\u003c/span\u003e\n\u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"n\"\u003eShouldTimerBeRunning\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eIsVisible\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e \u003cspan class=\"p\"\u003e!\u003c/span\u003e\u003cspan class=\"n\"\u003eIsInAmbientMode\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"341-タイムゾーンの変更方法\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#341-%E3%82%BF%E3%82%A4%E3%83%A0%E3%82%BE%E3%83%BC%E3%83%B3%E3%81%AE%E5%A4%89%E6%9B%B4%E6%96%B9%E6%B3%95\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e3.4.1. タイムゾーンの変更方法\u003c/h3\u003e\n\n\u003cp\u003e※変数名は「nowTime」であるとします。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eAndroidのTimeクラスの場合\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"n\"\u003etimeZoneReceiver\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eTimeZoneReceiver\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eintent\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e// GetStringExtraメソッドで、Android Wearとペアリングしているスマートフォンで設定したタイムゾーンのIDを取得します。\u003c/span\u003e\n        \u003cspan class=\"n\"\u003enowTime\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eClear\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"n\"\u003eintent\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eGetStringExtra\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"s\"\u003e\"time-zone\"\u003c/span\u003e \u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"n\"\u003enowTime\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSetToNow\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eJavaのCalendarクラスの場合\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"n\"\u003etimeZoneReceiver\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eTimeZoneReceiver\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eintent\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e// TimeZone.Defaultプロパティは、Android Wearとペアリングしているスマートフォンで設定しているタイムゾーンのIDを取得します。\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e// もちろん、AndroidのTimeクラスのように、GetStringExtraメソッドで取得したタイムゾーンのIDを設定してもOK\u003c/span\u003e\n        \u003cspan class=\"n\"\u003enowTime\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eTimeZone\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eJava\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eUtil\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eTimeZone\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eDefault\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003e.NETのDateTime構造体の場合\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"n\"\u003etimeZoneReceiver\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eTimeZoneReceiver\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eintent\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e// DateTime.Nowプロパティで取得する時刻は、Android Wearとペアリングしているスマートフォンで\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e// 設定しているタイムゾーンが適用されています。\u003c/span\u003e\n        \u003cspan class=\"n\"\u003enowTime\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eDateTime\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eNow\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"engineクラスでメソッドのオーバーライド\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#engine%E3%82%AF%E3%83%A9%E3%82%B9%E3%81%A7%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E3%81%AE%E3%82%AA%E3%83%BC%E3%83%90%E3%83%BC%E3%83%A9%E3%82%A4%E3%83%89\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eEngineクラスでメソッドのオーバーライド\u003c/h1\u003e\n\n\u003cp\u003e\u003ca href=\"http://qiita.com/nia_tn1012/items/52b25bfa86c91baee16d\" id=\"reference-c5e14ed3e2794adf091b\"\u003eVol.2 : プログラム作成編（Page-2）\u003c/a\u003eに続きます。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"参考サイト\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%8F%82%E8%80%83%E3%82%B5%E3%82%A4%E3%83%88\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e参考サイト\u003c/h1\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://firespeed.org/diary.php?diary=kenz-1834\" rel=\"nofollow noopener\" target=\"_blank\"\u003eWatch Faceを作る サンプルのコードを読み解く - FireSpeed\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"http://qiita.com/eoppp/items/e6f2a0783810026e4d56\" id=\"reference-f41338febedf16298ce2\"\u003eAndroid Studioを使用して、とりあえず動くWatch faceを作る - Qiita\u003c/a\u003e by \u003ca href=\"/eoppp\" class=\"user-mention js-hovercard\" title=\"eoppp\" data-hovercard-target-type=\"user\" data-hovercard-target-name=\"eoppp\"\u003e@eoppp\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"https://github.com/googlesamples/android-wear-xamarin-watchface\" rel=\"nofollow noopener\" target=\"_blank\"\u003eXamarin Android WatchFace Sample - GitHub\u003c/a\u003e by peterfriese, Redth\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"xamarinでandroid-wearのwatch-faceアプリを作ってみようシリーズ一覧\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#xamarin%E3%81%A7android-wear%E3%81%AEwatch-face%E3%82%A2%E3%83%97%E3%83%AA%E3%82%92%E4%BD%9C%E3%81%A3%E3%81%A6%E3%81%BF%E3%82%88%E3%81%86%E3%82%B7%E3%83%AA%E3%83%BC%E3%82%BA%E4%B8%80%E8%A6%A7\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e「XamarinでAndroid WearのWatch Faceアプリを作ってみよう！」シリーズ一覧\u003c/h1\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"http://qiita.com/nia_tn1012/items/fc5d7b2b263c73d8e0e5\" id=\"reference-84a71f0e14f6cbdeba30\"\u003eVol. 0 : 準備編\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"http://qiita.com/nia_tn1012/items/2f790ca52ee839303952\"\u003eVol. 1 : プロジェクト作成編\u003c/a\u003e\n\n\u003cul\u003e\n\u003cli\u003e（\u003ca href=\"http://qiita.com/nia_tn1012/items/5f407f0a0b180482bb6c\" id=\"reference-a8ad2c00402ecded3410\"\u003eVol.1x: Xamarin Studio向け\u003c/a\u003e）\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eVol.2 : プログラム作成編（ Page-1 / \u003ca href=\"http://qiita.com/nia_tn1012/items/52b25bfa86c91baee16d\"\u003ePage-2\u003c/a\u003e ）\u003c/strong\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cdiv class=\"footnotes\"\u003e\n\u003chr\u003e\n\u003col\u003e\n\n\u003cli id=\"fn1\"\u003e\n\u003cp\u003eWallpaperServiceクラスを利用する時に必要です。 \u003ca href=\"#fnref1\"\u003e↩\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\n\u003cli id=\"fn2\"\u003e\n\u003cp\u003eCanvasWatchFaceService.Engineクラスは、WallpaperService.Engineを継承しています。 \u003ca href=\"#fnref2\"\u003e↩\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\n\u003cli id=\"fn3\"\u003e\n\u003cp\u003eAndroid.Text.Format.Timeクラスでは、2032年までしか扱えないためです。 \u003ca href=\"#fnref3\"\u003e↩\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\n\u003cli id=\"fn4\"\u003e\n\u003cp\u003eWatch Faceアプリにて、実際に受け取っているのは、AnalogWatchFaceServiceクラスのインスタンスです。 \u003ca href=\"#fnref4\"\u003e↩\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\n\u003c/ol\u003e\n\u003c/div\u003e\n","createdAt":"2016-12-20T07:43:10Z","elapsedYearsFromLastModifiedAt":4,"encryptedId":"7kUleNrzhcO9bCaUvMQT1rGaS9dzFAVg--B4m70tf0HvcyjZyX--8tSXxUNRGhv5hDR9XqBiHQ==","isBanned":false,"isDeprecated":true,"isDestroyableByViewer":false,"isEditRequestReadableByViewer":true,"isEditRequestSendableByViewer":true,"isLikableByViewer":true,"isLikedByViewer":false,"isPublic":true,"isSlide":false,"isStockableByViewer":true,"isStockedByViewer":false,"isSubscribableByViewer":false,"isSubscribedByViewer":false,"isUpdatableByViewer":false,"isUpdated":true,"lastModifiedAt":"2016-12-20T14:18:09Z","likesCount":0,"linkUrl":"https://qiita.com/nia_tn1012/items/1a4e712c1c0284fd5f49","organization":null,"originalId":452745,"stockedCount":1,"title":"XamarinでAndroid WearのWatch Faceアプリを作ってみよう！（Vol.2 : プログラム作成編（Page-1））","toc":"\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#1-watch-face%E3%82%A2%E3%83%97%E3%83%AA%E3%81%AE%E3%82%AF%E3%83%A9%E3%82%B9%E6%A7%8B%E6%88%90\"\u003e1. Watch Faceアプリのクラス構成\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#11-watch-face%E3%82%A2%E3%83%97%E3%83%AA%E3%81%AE%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%A0%E4%BD%9C%E6%88%90%E3%81%A7%E3%82%88%E3%81%8F%E4%BD%BF%E7%94%A8%E3%81%99%E3%82%8B%E5%90%8D%E5%89%8D%E7%A9%BA%E9%96%93\"\u003e1.1. Watch Faceアプリのプログラム作成でよく使用する名前空間\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#2-watch-face%E3%81%AEservice%E3%82%AF%E3%83%A9%E3%82%B9%E3%81%AE%E4%BD%9C%E6%88%90\"\u003e2. Watch FaceのServiceクラスの作成\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#21-%E3%82%AF%E3%83%A9%E3%82%B9%E3%81%AE%E5%B1%9E%E6%80%A7%E3%81%A7android%E3%81%AE%E3%83%9E%E3%83%8B%E3%83%95%E3%82%A7%E3%82%B9%E3%83%88%E3%81%AEservice%E8%A6%81%E7%B4%A0%E3%82%92%E6%A7%8B%E6%88%90\"\u003e2.1. クラスの属性で、AndroidのマニフェストのService要素を構成\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#211-%E3%82%B5%E3%83%BC%E3%83%93%E3%82%B9%E3%81%AE%E5%90%8D%E5%89%8D%E3%82%92%E8%A8%AD%E5%AE%9A\"\u003e2.1.1. サービスの名前を設定\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#212-%E3%83%A1%E3%82%BF%E3%83%87%E3%83%BC%E3%82%BF%E3%82%92%E8%A8%AD%E5%AE%9A\"\u003e2.1.2. メタデータを設定\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#213-%E8%BF%BD%E5%8A%A0%E3%81%AEintent%E3%83%95%E3%82%A3%E3%83%AB%E3%82%BF%E3%83%BC%E3%82%92%E8%A8%AD%E5%AE%9A\"\u003e2.1.3. 追加のIntentフィルターを設定\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#214-%E3%82%AF%E3%83%A9%E3%82%B9%E5%B1%9E%E6%80%A7%E3%81%AE%E3%81%BE%E3%81%A8%E3%82%81\"\u003e2.1.4. クラス属性のまとめ\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#22-%E3%83%A1%E3%83%B3%E3%83%90%E3%83%BC%E3%82%92%E5%AE%9A%E7%BE%A9\"\u003e2.2. メンバーを定義\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#3-watch-face%E3%81%AEengine%E3%82%AF%E3%83%A9%E3%82%B9%E3%82%92%E4%BD%9C%E6%88%90\"\u003e3. Watch FaceのEngineクラスを作成\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#31-oncreateengine%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E3%82%92%E3%82%AA%E3%83%BC%E3%83%90%E3%83%BC%E3%83%A9%E3%82%A4%E3%83%89\"\u003e3.1. OnCreateEngineメソッドをオーバーライド\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#32-%E3%83%A1%E3%83%B3%E3%83%90%E3%83%BC%E5%A4%89%E6%95%B0%E3%82%92%E5%AE%9A%E7%BE%A9\"\u003e3.2. メンバー変数を定義\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#321-xamarinandroid%E3%81%A7%E5%88%A9%E7%94%A8%E3%81%A7%E3%81%8D%E3%82%8B%E6%97%A5%E4%BB%98%E6%99%82%E5%88%BB%E3%82%AF%E3%83%A9%E3%82%B9\"\u003e3.2.1. Xamarin.Androidで利用できる、日付・時刻クラス\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#322-android-wear%E3%81%AE%E3%83%A2%E3%83%BC%E3%83%89\"\u003e3.2.2. Android Wearのモード\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#-%E3%82%A4%E3%83%B3%E3%82%BF%E3%83%A9%E3%82%AF%E3%83%86%E3%82%A3%E3%83%96%E3%83%A2%E3%83%BC%E3%83%89\"\u003e◆ インタラクティブモード\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#-%E3%82%A2%E3%83%B3%E3%83%93%E3%82%A8%E3%83%B3%E3%83%88%E3%83%A2%E3%83%BC%E3%83%89\"\u003e◆ アンビエントモード\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#323-low-bit%E3%81%AE%E5%88%B6%E9%99%90%E3%81%A8%E7%84%BC%E3%81%8D%E4%BB%98%E3%81%8D%E9%98%B2%E6%AD%A2\"\u003e3.2.3. Low-Bitの制限と焼き付き防止\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#-low-bit%E3%81%AE%E5%88%B6%E9%99%90%E3%82%92%E5%BF%85%E8%A6%81%E3%81%A8%E3%81%99%E3%82%8B%E6%99%82\"\u003e◆ Low-Bitの制限を必要とする時\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#-%E7%84%BC%E3%81%8D%E4%BB%98%E3%81%8D%E9%98%B2%E6%AD%A2%E3%82%92%E5%BF%85%E8%A6%81%E3%81%A8%E3%81%99%E3%82%8B%E6%99%82\"\u003e◆ 焼き付き防止を必要とする時\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#33-%E3%82%BF%E3%82%A4%E3%83%A0%E3%82%BE%E3%83%BC%E3%83%B3%E3%81%8C%E5%A4%89%E6%9B%B4%E3%81%95%E3%82%8C%E3%81%9F%E6%99%82%E3%81%AE%E5%87%A6%E7%90%86%E3%82%92%E8%A1%8C%E3%81%86broadcastreceiver%E3%81%AE%E6%B4%BE%E7%94%9F%E3%82%AF%E3%83%A9%E3%82%B9%E3%82%92%E4%BD%9C%E6%88%90\"\u003e3.3. タイムゾーンが変更された時の処理を行う、BroadcastReceiverの派生クラスを作成\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#34-%E3%82%B3%E3%83%B3%E3%82%B9%E3%83%88%E3%83%A9%E3%82%AF%E3%82%BF%E3%83%BC%E3%82%92%E5%AE%9A%E7%BE%A9\"\u003e3.4. コンストラクターを定義\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#341-%E3%82%BF%E3%82%A4%E3%83%A0%E3%82%BE%E3%83%BC%E3%83%B3%E3%81%AE%E5%A4%89%E6%9B%B4%E6%96%B9%E6%B3%95\"\u003e3.4.1. タイムゾーンの変更方法\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#engine%E3%82%AF%E3%83%A9%E3%82%B9%E3%81%A7%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E3%81%AE%E3%82%AA%E3%83%BC%E3%83%90%E3%83%BC%E3%83%A9%E3%82%A4%E3%83%89\"\u003eEngineクラスでメソッドのオーバーライド\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%8F%82%E8%80%83%E3%82%B5%E3%82%A4%E3%83%88\"\u003e参考サイト\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#xamarin%E3%81%A7android-wear%E3%81%AEwatch-face%E3%82%A2%E3%83%97%E3%83%AA%E3%82%92%E4%BD%9C%E3%81%A3%E3%81%A6%E3%81%BF%E3%82%88%E3%81%86%E3%82%B7%E3%83%AA%E3%83%BC%E3%82%BA%E4%B8%80%E8%A6%A7\"\u003e「XamarinでAndroid WearのWatch Faceアプリを作ってみよう！」シリーズ一覧\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n","totalPv":2447,"uuid":"1a4e712c1c0284fd5f49","banReason":null,"adventCalendarItem":null,"author":{"encryptedId":"TCX+GgCbgge3jW+wogGm+mevkr4=--fukVSO18PsmdXRGu--fcrbnFX/mCZ2T+T7QDfT0Q==","originalId":78881,"description":"湘南生まれのITエンジニア（サーバー・フロント・DB・インフラ（クラウド））です。主にC#、PHP、TypeScript、GO言語、Docker、gRPCを使っています。好物は紅茶とコーヒー、シラス丼、趣味は写真撮影と音ゲーです。よろしくお願いします！","facebookUrl":null,"githubUrl":"https://github.com/Nia-TN1012","isBlockingViewer":false,"isFollowableByViewer":true,"isFollowedByViewer":false,"isTweetWebNotificationReceivable":true,"linkedinUrl":null,"name":"Nia Tomonaka","profileImageUrl":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/78881/profile-images/1629634397","profileImageUrlW48":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F78881%2Fprofile-images%2F1629634397?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=48\u0026s=3c7c69a0ded103615f6c84b391e17997","profileImageUrlW75":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F78881%2Fprofile-images%2F1629634397?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=061a85fe142ddfa4ed861b7ac57c74a9","urlName":"nia_tn1012","websiteUrl":"https://chronoir.net/","twitterUrl":"https://twitter.com/nia_tn1012","twitterUrlName":"nia_tn1012","revealedOrganizations":{"edges":[]}},"tags":[{"name":"C#","urlName":"csharp"},{"name":"Xamarin","urlName":"xamarin"},{"name":"Xamarin.Android","urlName":"xamarin.android"},{"name":"AndroidWear","urlName":"androidwear"},{"name":"WatchFace","urlName":"watchface"}],"followingLikers":{"edges":[]},"comments":{"totalCount":0}},"comments":[],"client":null,"ads_event_emitter":null}}</script>
