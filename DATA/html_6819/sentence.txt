More than 3 years have passed since last update.Code FirstでSQLServerに型にdecimalを指定したとき、自動的にdecimal(18,2)になってしまう。
Add-Migration後に作成されるファイルを修正すると変更できるけど、そんなことは大変めんどくさい。
Add-Migrationした段階で、すでに設定した桁数になってたらいいのに。このデフォルトをうまいこと制御できないか模索してみる。http://stackoverflow.com/questions/3504660/decimal-precision-and-scale-in-ef-code-first
だいたい書いてあったので試してみる。しかしたくさんあるなあ。
斜め読みした感じ、DBContextのOnModelCreatingをoverrideしてmodelBuilder.Conventionsに作った規約をAddしてやると。
何かよくわからんがやってみましょう。DecimalPrecisionAttributeConventionが規約になるのかな。
ではOnModelCreatingのmodelBuilder.ConventionsにAddしましょう。その上で定義してやって…いざAdd-Migration！おー！できてるじゃん！ConventionPrimitivePropertyConfiguration見てたら他にも設定できる項目いくつかあったので結構いろんなことできそうですね。
Null許容にするとか順序とか型とか最大長とか、まあ普通に設定できるものだったんで使うかは置いといて。もうちょっとがんばったらデフォルト値変更できないかなー。
という訳で次回はデフォルト値の設定の予定。書きました。
Entitiy Framework Code Firstでデフォルト値の設定


