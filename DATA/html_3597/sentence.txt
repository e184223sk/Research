More than 1 year has passed since last update.Googleの検索候補、IMEなど、入力中に表示される予測変換の機能は便利ですよね。
今回紹介する XamMultiColumnComboEditor は、同様の機能が実装でき、さらにオプション機能の設定により様々な表現が可能です。
例えば、後ほど紹介するサンプルアプリケーションでは、都道府県の検索を例に、漢字での検索、ひらがなでの検索、ローマ字での予測入力を同時に対応することが可能です。都道府県の入力を例に、漢字、ひらがな、ローマ字。いずれの入力でも選択候補が表示されるサンプルをご用意しました。
漢字、ひらがな、ローマ字のいずれでもフィルタリングができ、また選択候補から選択された場合に採用されるのは漢字の都道府県となります。（フィルタの対象や、採用される項目の変更などはオプションで選択可能です。）
GitHub
https://github.com/furugen/wpf-samples-keyboard-tips/tree/sample1まず都道府県を例にサンプルのデータを作成しています。これらの要素をXamMultiColumnComboEditorで下記のように指定して表示しています。テキストボックスで表示するプロパティパスを指定してます。表示される場所は下記の画像の赤枠部分。
Nameを指定、SampleData.Nameのプロパティが採用され、例えば、北海道のデータの場合は"北海道"と表示されます。
選択候補として表示する一覧を指定します。選択候補に表示している列がフィルタリングの候補となります。今回のサンプルでは、都道府県名の漢字、ひらがな、ローマ字が検索対象ですね。
プライマリ列のみフィルタリング対象とするFilterOnPrimaryColumnOnlyの列挙値もあります。
https://jp.infragistics.com/help/wpf/xammulticee-configuring-item-filteringColumsnにて表示したいプロパティのカラム列を記載しています。
今回は、SampleDataのName(漢字),Hiragana(ひらがな),Romaji(ローマ字)の３つの要素を表示したいので３つのカラムを定義しています。Keyにはバインディング対象のプロパティを、HeaderTextには列の先頭に表示するヘッダーの文字列を記載しています。如何でしたでしょうか。今回のサンプルアプリケーションのように、フィルタリングは複数候補(漢字、ひらがな、ローマ字)だけど最終的に採用する文字列は１つだけ(都道府県の漢字)などは日本のソフトウェアではよくあるシナリオですが、対応しているコントロールはなかなか少ないかと思います。この記事が参考になれば幸いでございます。次は、今回の記事で紹介した要素や、入力機能のノウハウをふんだんに取り入れた、快適な入力画面のサンプルをご紹介したいと思います！


