More than 3 years have passed since last update.ASP.NET Core 2.1 への移行 という記事を書きましたが、Visual Studio から、ASP.NET Core MVC アプリケーションを新規作成した際に作成されるコード ベースも変更されているようです。ざっと確認した感じでは、おもにセキュリティ系の変更となっていました。ここでは、ASP.NET Core 2.0 MVC から、ASP.NET Core 2.1 MVC のコード ベースの変更を説明します。詳しくは、以下に記載がありますので、こちらも参考にしてください。以下に、変更点を記載します。コメントされているコードが古いコードベースです。UseHttpsRedirection により、強制的に HTTP 要求を HTTPS へリダイレクトします。ただし、HTTPS のポートの定義がある場合のみリダイレクトが行われます。ポートの定義がない場合は、以下のような警告が出力されます。Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware:Warning: Failed to determine the https port for redirect.コードでポートの定義をする場合は、ConfigureServices　メソッドに以下のように記載します。Visual Studio + IIS Express の環境の場合は、launchSettings.json の iisSettings.iisExpress.sslPort の値が参照されます。また、環境変数 ASPNETCORE_HTTPS_PORT により、ポート番号を定義することもできます。Migrate from ASP.NET Core 2.0 to 2.1
 にもその他の変更点の詳細の記載があります。その他の変更点も認証などセキュリティ系の更新がほとんどとなっています。他の個所は、今後、徐々に移行をすすめていこうと考えていますので、その際は、記載を行う予定です。


