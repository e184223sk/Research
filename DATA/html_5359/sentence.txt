More than 3 years have passed since last update.ミニゲームを作ってUnityを学ぶ！[3Dマインスイーパー編]3Dマインスイーパーを作るにあたって、まずはプロジェクトに必要な土台部分を先に用意していきます。Unityプロジェクトを新しく作成します。
3Dにチェックが入っていることを確認したら名前を決めて新規プロジェクトを作成。↑このあたりは自分の使いやすいように変更してください。プロジェクトに必要なアセットを予めインポートしておきます。
今回はタンクウォーズ編でも利用した以下の無料アセットをマスのテクスチャとして使用します。UnityのAssetStoreウインドウからインポートする場合は以下のように行ってください。新しいフォルダ「_MyFolder」を作成した後、その中にさらに「Scenes」というフォルダを作成し、そこに現在のシーンを「main」という名前で保存します。以後、上の画像のように自作したスクリプトやマテリアルなどは_MyFolderの中にそれぞれ対応したフォルダを作成して格納していきますが、これは単純にこの方が使いやすいという個人的な好みですので他の方法に慣れている場合はそちらを優先してください。プロジェクト全体を管理するためのスクリプトを作成します。GameControllerは特殊なクラスで、プロジェクト全体を通して1つしかインスタンスを生成することができません。
また同時に、その唯一のインスタンスをプロジェクト内の全てのスクリプトから呼び出すことができます。この特性を利用することで本来はシーンが切り替わる際に破棄されてしまう値やクラスを残したり、複数のスクリプトから呼び出される定数などを一元管理することが主な役割です。続いて、先ほど保存したmainシーンを制御するためのスクリプトを作成します。SceneMainはフィールドmStateを持ち、このmStateの値によってUpdate()での処理を分岐させています。
今はまだDEFAULTという値しかありませんが、これに例えばPLAYやRESULTといった新しい状態を追加していくことでゲームの進行状況にあった処理を実行できるようになります。またゲーム起動直後の処理としてAwake()でGameControllerのインスタンスを取得してInit()を呼び出すことでゲームのフレームレートを30に設定しています。
これによって各スクリプトに実装されたUpdate()が1秒間に30回だけ呼び出されるようになります。GameControllerは初めて呼び出されたこのタイミングで自分のインスタンスを生成します。
オブジェクトにアタッチされているわけではないのでシーンの切り替わりで破棄されず、プロジェクトが終了するまで同じインスタンスを利用することができます。次のページに進む
イントロダクションに戻る



