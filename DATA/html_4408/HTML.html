<!DOCTYPE html><html><head><meta charset="utf-8" /><title>Alexaスキル（C#）からDynamoDBにアクセスするには？（テーブル作成まで） - Qiita</title><meta content="width=device-width,initial-scale=1,shrink-to-fit=no,viewport-fit=cover" name="viewport" /><meta content="#55c500" name="theme-color" /><meta content="XWpkTG32-_C4joZoJ_UsmDUi-zaH-hcrjF6ZC_FoFbk" name="google-site-verification" /><meta content="telephone=no" name="format-detection" /><link rel="canonical" href="https://qiita.com/shuhey/items/cb73812986614af629b3" /><link href="/manifest.json" rel="manifest" /><link href="/opensearch.xml" rel="search" title="Qiita" type="application/opensearchdescription+xml" /><link as="script" href="https://www.googletagservices.com/tag/js/gpt.js" rel="preload" /><link href="https://securepubads.g.doubleclick.net" rel="preconnect" /><script async="" src="https://www.googletagservices.com/tag/js/gpt.js"></script><meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="+8fyYzRaPNLhL2oukYEWt/YjFM/nCYgndp7trNTgJ0LHgW3zHfn6iC4MwYLpLe0WQ9pC63K+KbuIr2kJnWf60A==" /><link rel="shortcut icon" type="image/x-icon" href="https://cdn.qiita.com/assets/favicons/public/production-c620d3e403342b1022967ba5e3db1aaa.ico" /><link rel="apple-touch-icon" type="image/png" href="https://cdn.qiita.com/assets/favicons/public/apple-touch-icon-ec5ba42a24ae923f16825592efdc356f.png" /><link rel="stylesheet" media="all" href="https://cdn.qiita.com/assets/public/article-2eaa7dbedc42a8ea65c722cda46d0ebb.min.css" /><script src="https://cdn.qiita.com/assets/public/v3-article-bundle-63de2d91fef827269d3f6b958db2335b.min.js" defer="defer"></script><meta name="twitter:card" content="summary_large_image"><meta content="@Qiita" name="twitter:site" /><meta content="@shuhey_commu" name="twitter:creator" /><meta property="og:type" content="article"><meta property="og:title" content="Alexaスキル（C#）からDynamoDBにアクセスするには？（テーブル作成まで） - Qiita"><meta property="og:image" content="https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0&amp;w=1200&amp;mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND1RV3hsZUdIamdybmpncTNqZzZ2dnZJaERJLS04aWVPQmktT0NpVVI1Ym1GdGIwUkM0NEdyNDRLaTQ0S3Y0NEs3NDRLNTQ0R1o0NEtMNDRHcjQ0R3Y3N3lmNzd5STQ0T0c0NE84NDRPVzQ0T3I1TDJjNW9pUTQ0Ry00NEduNzd5SiZ0eHQtY29sb3I9JTIzMzMzJnR4dC1mb250PUhpcmFnaW5vJTIwU2FucyUyMFc2JnR4dC1zaXplPTU0JnR4dC1jbGlwPWVsbGlwc2lzJnR4dC1hbGlnbj1jZW50ZXIlMkNtaWRkbGUmcz0zMDkwNWUyOGE4ZjMzM2RhOWNkZmJhMGQ1NTNhMzQ0Mg&amp;mark-align=center%2Cmiddle&amp;blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RSE5vZFdobGVRJnR4dC1jb2xvcj0lMjMzMzMmdHh0LWZvbnQ9SGlyYWdpbm8lMjBTYW5zJTIwVzYmdHh0LXNpemU9NDUmdHh0LWFsaWduPXJpZ2h0JTJDYm90dG9tJnM9YmUwNTA0ZDI0YjVmYWQ2NDJiZDg3OTQyOWRlYzdmNjU&amp;blend-align=center%2Cmiddle&amp;blend-mode=normal&amp;s=58b229e205fae34035fad81d8f962743"><meta property="og:description" content="

2018年11月9日追記

Waitメソッドによって非同期メソッド（CreateTableAsync）の完了を待機することでDynamoDBへテーブル作成処理をちゃんと完了させるようにしました。
が、こちらの方の非同期処理に関する..."><meta content="https://qiita.com/shuhey/items/cb73812986614af629b3" property="og:url" /><meta content="Qiita" property="og:site_name" /><meta content="564524038" property="fb:admins" /><meta content="C#,DynamoDB,Alexa" name="keywords" /><script>!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window, document,'script',
'https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '668972150489891');
fbq('track', 'PageView');</script><style data-emotion-css="17jxvjw 11t2ec1 1dvr2p8 18lkoru 1g4cku8 1iupg5d ijvq0v 15cocm3 12rp90f 115f4t 1b8uj5v 79elbk 16hhh7b fcbn8c 1gj7nt 154zy0m yikrym 1jqivyb 1ode1bp le4d8r 1hbd3g7 1nzh4zz 38fzdi helsa7 8qb8m4 2imjyh he5w1s 70qvj9 3ojehk 100alwu 1dtnjt5 10ougpm 1ay9vb9 m19uds cgzq40 1wa99t2 1l3zk9f 4czcte 1yzj1fm 1uv1qiv 109dbrr 5jpx49 mnxgyc 1vlpknv fsjkhv 1b17vb0 7i7f4d"}>.css-17jxvjw{display:grid;display:-ms-grid;grid-template-columns:80px minmax(0,1fr) 300px;-ms-grid-columns:80px minmax(0,1fr) 300px;grid-template-rows:minmax(270px,auto) 1fr;-ms-grid-rows:minmax(270px,auto) 1fr;max-width:1280px;margin-right:auto;margin-left:auto;padding-top:24px;padding-right:24px;padding-left:24px;}@media (max-width:1200px){.css-17jxvjw{padding-bottom:0;padding-left:0;padding-right:0;}}@media (max-width:992px){.css-17jxvjw{grid-template-columns:80px 452px 300px;-ms-grid-columns:80px 452px 300px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}}@media (max-width:770px){.css-17jxvjw{display:block;}}@media (max-width:480px){.css-17jxvjw{padding-top:0;}}.css-11t2ec1{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;z-index:5;position:-webkit-sticky;position:sticky;top:calc(56px + 24px + 16px + 32px - 16px);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:16px;width:80px;}.css-11t2ec1:after{content:'';display:table;}.css-11t2ec1:before{content:'';display:table;}@media (max-width:770px){.css-11t2ec1{display:none;}}.css-1dvr2p8{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-18lkoru{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;background-color:#FFFFFF;}.css-1g4cku8{display:inline-block;vertical-align:middle;height:20px;width:20px;fill:#55C500;}.css-1iupg5d{color:#55C500;cursor:pointer;font-size:14px;font-weight:bold;}.css-ijvq0v{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-15cocm3{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#FFFFFF;border:2px solid #6E6F70;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:2px 0px 0px;width:40px;}.css-12rp90f{display:inline-block;vertical-align:bottom;height:17.77777777777778px;width:16px;fill:#6E6F70;}.css-115f4t{color:#6E6F70;font-size:14px;font-weight:bold;}.css-1b8uj5v{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;margin-bottom:16px;padding:0;}.css-79elbk{position:relative;}.css-16hhh7b{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;padding:0;}.css-fcbn8c{display:none;bottom:initial;left:initial;right:initial;top:initial;left:100%;top:calc(-8px - (14px * 1.8) - 16px - 4px);}.css-1gj7nt{color:rgba(0,0,0,0.6);font-size:14px;font-weight:bold;line-height:1.8;padding:8px 16px;}.css-154zy0m{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.87);cursor:pointer;font-size:16px;font-weight:normal;line-height:1.8;padding:4px 16px;}.css-154zy0m:hover{-webkit-text-decoration:none;text-decoration:none;background-color:#F2F2F2;}.css-yikrym{width:20px;}.css-1jqivyb{color:rgba(0,0,0,0.6);font-size:13px;}.css-1ode1bp{background-color:rgba(0,0,0,0.12);height:1px;width:100%;margin:8px 0;}.css-le4d8r{display:inline-block;vertical-align:middle;height:13px;width:13px;fill:rgba(0,0,0,0.6);}.css-1hbd3g7{height:250px;}.css-1nzh4zz{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:16px 32px;background-color:#FBE69E;color:rgba(0,0,0,0.87);line-height:1.5;font-weight:600;}@media (max-width:770px){.css-1nzh4zz{padding:16px;}}.css-38fzdi{color:#CA832A;margin-right:4px;}.css-helsa7{background-color:#FFFFFF;padding:32px;margin-bottom:24px;}@media (max-width:992px){.css-helsa7{margin:0 auto 40px;}}@media (max-width:480px){.css-helsa7{margin:0 0 40px;padding:32px 16px;}}.css-8qb8m4{margin-bottom:48px;}.css-2imjyh{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-he5w1s{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;width:100%;}@media (max-width:770px){.css-he5w1s{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}}.css-70qvj9{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.css-3ojehk{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;margin-right:4px;}.css-100alwu{display:inline-block;border-radius:50%;line-height:1;overflow:hidden;vertical-align:middle;}.css-1dtnjt5{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-10ougpm{color:rgba(0,0,0,0.87);font-size:14px;font-weight:600;line-height:1.8;margin-right:4px;text-wrap:break-word;word-break:break-all;}.css-1ay9vb9{margin-right:16px;}.css-m19uds{color:rgba(0,0,0,0.6);font-size:14px;line-height:1.8;}.css-cgzq40{color:rgba(0,0,0,0.87);font-size:32px;font-weight:bold;line-height:1.4;margin-top:8px;text-wrap:break-word;word-break:break-all;}.css-1wa99t2{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.6);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:8px;}.css-1l3zk9f{color:rgba(0,0,0,0.6);font-size:20px;margin-right:8px;}.css-4czcte{margin-right:4px;color:inherit;font-size:14px;line-height:1.8;}.css-4czcte:not(:last-child)::after{content:',';margin-right:4px;}.css-1yzj1fm{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:32px;}.css-1uv1qiv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-size:20px;height:32px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin-right:16px;outline:none;padding:0;width:32px;}.css-109dbrr{background-color:#F9F9F9;border-top:1px solid rgba(0,0,0,0.12);bottom:0;box-shadow:0px 1px 4px rgba(0,0,0,0.14);display:none;height:calc(env(safe-area-inset-bottom,0px) + 56px);-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding-bottom:env(safe-area-inset-bottom);position:-webkit-sticky;position:sticky;width:100%;z-index:2000;}@media (max-width:770px){.css-109dbrr{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}.css-5jpx49{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:space-evenly;-webkit-justify-content:space-evenly;-ms-flex-pack:space-evenly;justify-content:space-evenly;width:100%;}.css-mnxgyc{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1vlpknv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;margin-right:4px;background-color:#FFFFFF;}.css-fsjkhv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1b17vb0{color:#6E6F70;font-size:14px;font-weight:bold;margin-left:4px;}.css-7i7f4d{display:none;bottom:initial;left:initial;right:initial;top:initial;bottom:32px;right:0;}</style></head><body><div class="allWrapper"><div><div id="GlobalHeader-react-component-4d045425-fc17-4253-972a-9abb3d372dff"><div class="st-Header"><div class="st-Header_container"><div class="st-Header_start"><a href="/" class="st-Header_logo"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 426.57 130"><circle cx="167.08" cy="21.4" r="12.28"></circle><path d="M250.81 29.66h23.48v18.9h-23.48z"></path><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z"></path><circle cx="216.33" cy="21.4" r="12.28"></circle></svg></a><div class="st-Header_communitySelector" tabindex="0"><span class="fa fa-caret-down"></span></div><div class="st-Header_dropdown"><div class="st-Header_dropdownHeading">Qiita Teams that are logged in</div><div class="st-Header_dropdownItemNote">You are not logged in to any team</div><hr class="st-Header_dropdownDivider st-Header_dropdownDivider-shrink"/><a href="https://teams-center.qiita.com/find_team" class="st-Header_dropdownItem"><span class="fa fa-fw fa-sign-in st-Header_dropdownItemIcon"></span><div>Log in to Qiita Team</div></a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Community</div><a href="/organizations" class="st-Header_dropdownItem">Organization</a><a href="/official-events/open" class="st-Header_dropdownItem">Event</a><a href="/advent-calendar" class="st-Header_dropdownItem">Advent Calendar</a><a href="https://qiitadon.com/" class="st-Header_dropdownItem" target="_blank">Qiitadon (β)</a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Service</div><a href="https://jobs.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Jobs</a><a href="https://zine.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Zine</a><a href="https://blog.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Blog</a></div><form class="st-Header_search" action="/search" method="get"><span class="fa fa-search st-Header_searchIcon"></span><input type="search" class="st-Header_searchInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form><form class="st-Header_searchModal" action="/search" method="get"><input type="text" class="st-Header_searchModalInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form></div><div class="st-Header_end"><div class="st-Header_searchButton"><span class="fa fa-search"></span></div><a class="st-Header_signupButton" href="/signup?redirect_to=%2Fshuhey%2Fitems%2Fcb73812986614af629b3">Signup</a><a class="st-Header_loginLink" href="/login?redirect_to=%2Fshuhey%2Fitems%2Fcb73812986614af629b3">Login</a></div><div class="st-Header_overlay"></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="GlobalHeader" data-dom-id="GlobalHeader-react-component-4d045425-fc17-4253-972a-9abb3d372dff">{"unreadNotificationsCount":null,"realms":[{"humanName":"Qiita","isCurrentRealm":true,"isQiita":true,"isQiitaTeam":false,"loggedInUser":null,"teamId":null,"url":"https://qiita.com/"}],"teamFindUrl":"https://teams-center.qiita.com/find_team","isTeamOnlyUser":null,"currentUser":null}</script>
      
</div><div class="st-HeaderAlert st-HeaderAlert-warning"><div class="st-HeaderAlert_body"></div></div><script type="application/ld+json">{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"/","name":"Qiita"}},{"@type":"ListItem","position":2,"item":{"@id":"/tags/csharp","name":"C#"}}]}</script><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","datePublished":"2018-11-09T11:22:03.000+09:00","dateModified":"2018-11-09T14:30:03.000+09:00","headline":"Alexaスキル（C#）からDynamoDBにアクセスするには？（テーブル作成まで）","image":"https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0\u0026w=1200\u0026mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND1RV3hsZUdIamdybmpncTNqZzZ2dnZJaERJLS04aWVPQmktT0NpVVI1Ym1GdGIwUkM0NEdyNDRLaTQ0S3Y0NEs3NDRLNTQ0R1o0NEtMNDRHcjQ0R3Y3N3lmNzd5STQ0T0c0NE84NDRPVzQ0T3I1TDJjNW9pUTQ0Ry00NEduNzd5SiZ0eHQtY29sb3I9JTIzMzMzJnR4dC1mb250PUhpcmFnaW5vJTIwU2FucyUyMFc2JnR4dC1zaXplPTU0JnR4dC1jbGlwPWVsbGlwc2lzJnR4dC1hbGlnbj1jZW50ZXIlMkNtaWRkbGUmcz0zMDkwNWUyOGE4ZjMzM2RhOWNkZmJhMGQ1NTNhMzQ0Mg\u0026mark-align=center%2Cmiddle\u0026blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RSE5vZFdobGVRJnR4dC1jb2xvcj0lMjMzMzMmdHh0LWZvbnQ9SGlyYWdpbm8lMjBTYW5zJTIwVzYmdHh0LXNpemU9NDUmdHh0LWFsaWduPXJpZ2h0JTJDYm90dG9tJnM9YmUwNTA0ZDI0YjVmYWQ2NDJiZDg3OTQyOWRlYzdmNjU\u0026blend-align=center%2Cmiddle\u0026blend-mode=normal\u0026s=58b229e205fae34035fad81d8f962743","mainEntityOfPage":"https://qiita.com/shuhey/items/cb73812986614af629b3","author":{"@type":"Person","address":"","email":null,"identifier":"shuhey","name":"shuhey","image":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F245438%2Fprofile-images%2F1531297829?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=aa564931c8d2f750f4ea78e0caa8eb36","url":"https://qiita.com/shuhey","description":"候補にC#があるならC#でやりたい。","memberOf":[]},"publisher":{"@type":"Organization","name":"Qiita","logo":{"@type":"ImageObject","url":"//cdn.qiita.com/assets/public/qiita-logo-c39ded593afa388e2e1ba435b110554e.png"}}}</script><style type="text/css">.wb-CampaignLink {
  background-color: #333333;
  width: 100%;
}

.wb-CampaignLink_container {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  max-width: 1100px;
  margin: 0 auto;
  font-size: 13px;
  padding: 0.8em;
}
.wb-CampaignLink_container > a {
  color: #fff;
}

.wb-CampaignLink_container > a:hover {
  text-decoration: underline;
}</style><div class="wb-CampaignLink"><div class="wb-CampaignLink_container"><a target="_blank" id="header_text_message_1" href="https://increments.connpass.com/event/211948/">【9/9(木)開催】Qiitaの過去と未来についてお話しします！Qiita エンジニアフェスタ 2021 Online Meetup</a><a target="_blank" id="header_text_message_2" href="https://increments.connpass.com/event/211948/">詳しくはこちら</a></div><script>td.trackEvent(
  'front_events',
  {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"shuhey","type":"items","id":"cb73812986614af629b3"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Show","data":{"message":"【9/9(木)開催】Qiitaの過去と未来についてお話しします！Qiita エンジニアフェスタ 2021 Online Meetup","url":"https://increments.connpass.com/event/211948/","sub_message":"詳しくはこちら"}}
)</script><script>document.getElementById('header_text_message_1').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"shuhey","type":"items","id":"cb73812986614af629b3"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":2,"pos_id":"header_text_message_1","message":"【9/9(木)開催】Qiitaの過去と未来についてお話しします！Qiita エンジニアフェスタ 2021 Online Meetup","url":"https://increments.connpass.com/event/211948/","sub_message":"詳しくはこちら"}}
  )
})</script><script>document.getElementById('header_text_message_2').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"shuhey","type":"items","id":"cb73812986614af629b3"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":2,"pos_id":"header_text_message_2","message":"【9/9(木)開催】Qiitaの過去と未来についてお話しします！Qiita エンジニアフェスタ 2021 Online Meetup","url":"https://increments.connpass.com/event/211948/","sub_message":"詳しくはこちら"}}
  )
})</script></div><script type="application/json" id="js-react-on-rails-context">{"railsEnv":"production","inMailer":false,"i18nLocale":"en","i18nDefaultLocale":"en","href":"https://qiita.com/shuhey/items/cb73812986614af629b3","location":"/shuhey/items/cb73812986614af629b3","scheme":"https","host":"qiita.com","port":null,"pathname":"/shuhey/items/cb73812986614af629b3","search":null,"httpAcceptLanguage":null,"actionPath":"public/items#show","settings":{"analyticsTrackingId":"UA-24675221-12","assetsMap":{},"csrfToken":"C4gJjNiISSI7orrTdDtWWyEHywyfxbuZe5M+UyZ4eRo3zpYc8SuPePSBEX8Ml636lP6dKApyGgWForr2b/+kiA==","locale":"en"},"currentUser":null,"isLoggedIn":false,"recaptchaSiteKey":"6LfNkiQTAAAAAM3UGnSquBy2akTITGNMO_QDxMw6","serverSide":false}</script>
<div id="PersonalArticlePage-react-component-cb0f4101-c6ba-40b4-8791-2d899206ec27"><div class="p-items_wrapper"><div class=" css-17jxvjw"><div class="css-11t2ec1"><div class="css-1dvr2p8"><button class=" css-18lkoru"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/shuhey/items/cb73812986614af629b3/likers" class="css-1iupg5d">2</a></div><div class="css-ijvq0v"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-115f4t">1</span></div><div class="css-1b8uj5v"><span class="fa fa-twitter"></span></div><div class="css-1b8uj5v"><span class="fa fa-facebook"></span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-fcbn8c"><div class="css-1gj7nt">Improve article</div><a href="/drafts/cb73812986614af629b3/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/shuhey/items/cb73812986614af629b3/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/shuhey/items/cb73812986614af629b3/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/shuhey/items/cb73812986614af629b3/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/shuhey/items/cb73812986614af629b3.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div><div class="p-items_options"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_toc"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_main"><div class="css-1nzh4zz"><span class="fa fa-fw fa-warning css-38fzdi"></span><p>More than 1 year has passed since last update.</p></div><div class="css-helsa7"><div class="css-8qb8m4"><div class="css-2imjyh"><div class="css-he5w1s"><div class="css-70qvj9"><div class="css-3ojehk"><a href="/shuhey"><img class="css-100alwu eyfquo10" src="https://qiita-image-store.s3.amazonaws.com/0/245438/profile-images/1531297829" width="24" height="24" loading="lazy"/></a></div><div class="css-1dtnjt5"><a href="/shuhey" class="css-10ougpm">@<!-- -->shuhey</a><div class="css-1ay9vb9"><span><meta content="2018-11-09T02:22:03Z"/><time dateTime="2018-11-09T05:30:03Z" class="css-m19uds">updated at 2018-11-09</time></span></div></div></div></div></div><h1 class="css-cgzq40">Alexaスキル（C#）からDynamoDBにアクセスするには？（テーブル作成まで）</h1><div class="css-1wa99t2"><span class="fa fa-tags mr-1of2 css-1l3zk9f" aria-hidden="true"></span><a href="/tags/csharp" class="css-4czcte">C#</a><a href="/tags/dynamodb" class="css-4czcte">DynamoDB</a><a href="/tags/alexa" class="css-4czcte">Alexa</a></div></div><section class="it-MdContent"><div id="personal-public-article-body"><div>
<h4>
<span id="2018年11月9日追記" class="fragment"></span><a href="#2018%E5%B9%B411%E6%9C%889%E6%97%A5%E8%BF%BD%E8%A8%98"><i class="fa fa-link"></i></a>2018年11月9日追記</h4>

<p>Waitメソッドによって非同期メソッド（CreateTableAsync）の完了を待機することでDynamoDBへテーブル作成処理をちゃんと完了させるようにしました。<br>
が、<a href="https://qiita.com/takutoy/items/d45aa736ced25a8158b3" id="reference-f57448de0785bc6b7f30">こちらの方の非同期処理に関する記事</a>を読んで、Resultプロパティを使って非同期メソッドの結果も取得した方が汎用的と思い、Waitメソッドではなく、Resultプロパティを使うように修正しました。<br>
ありがとうございました。</p>

<h4>
<span id="2018年11月9日追記2" class="fragment"></span><a href="#2018%E5%B9%B411%E6%9C%889%E6%97%A5%E8%BF%BD%E8%A8%982"><i class="fa fa-link"></i></a>2018年11月9日追記2</h4>

<p>CreateTableしたときに、同名のテーブルが存在すると例外が発生してしまいます。<br>
これを回避するために、CreateTableの前にテーブルの存在確認をするようにしました。<br>
テーブルの存在確認は、<code>ListTablesAsync</code>メソッドによってテーブルの一覧を取得し、指定した名前のテーブルが存在するかをLinqのExistsメソッドを使って確認しているだけのシンプルなものです。</p>

<h1>
<span id="はじめに" class="fragment"></span><a href="#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB"><i class="fa fa-link"></i></a>はじめに</h1>

<p><a href="https://qiita.com/shuhey/items/b777117713c0c5e15a17" id="reference-9399ae1cb84a92051812">この記事</a>で、<a href="https://developer.amazon.com/ja/blogs/alexa/post/cddf2434-42ee-422f-886d-5be9c36dba14/jp-training-chapter3" rel="nofollow noopener" target="_blank">公式Alexaチュートリアル第3回</a>の内容をC#で実装しました。</p>

<p>次は第4回になるわけですが、第4回は永続的なデータの保持ということでデータをDynamoDBに保存する、という内容になっています。</p>

<p>そこでまずはC#からDynamoDBにアクセスする方法を学ばなければなりません。<br>
今回はそういう内容です。</p>

<h1>
<span id="準備" class="fragment"></span><a href="#%E6%BA%96%E5%82%99"><i class="fa fa-link"></i></a>準備</h1>

<p><a href="https://developer.amazon.com/ja/blogs/alexa/post/4144a8ea-7549-4c44-a4bd-e94cb93807ea/chapter4-jp" rel="nofollow noopener" target="_blank">公式Alexaチュートリアル第4回</a>を完了しておいてください。Node.jsでそのままやってくださってOKです。<br>
なぜかというと、チュートリアルではSDK for Node.jsが提供している<code>setPersistentAttributes</code>メソッドを使ってDynamoDBにデータを保存しているのですが、どのような情報がどのような形で保存されるのかを確認するためです。</p>

<p>SDK for Node.jsのメソッドを使えばDynamoDBにデータを保存するときのあれやこれやをよろしくやってくれるので、開発者はメソッド一発でデータをDynamoDBに保存することができます。</p>

<p>しかし、C#の場合、それを自分でやる必要があるため、こうして確認し、そのとおりにデータを保存してみようという考えです。</p>

<h1>
<span id="dynamodb上でのデータの形式を確認" class="fragment"></span><a href="#dynamodb%E4%B8%8A%E3%81%A7%E3%81%AE%E3%83%87%E3%83%BC%E3%82%BF%E3%81%AE%E5%BD%A2%E5%BC%8F%E3%82%92%E7%A2%BA%E8%AA%8D"><i class="fa fa-link"></i></a>DynamoDB上でのデータの形式を確認</h1>

<p>公式チュートリアル第4回を完了して、スキルをひととおり動かすとDynamoDBにはユーザーの星座データが保存されます。<br>
AWSのウェブコンソールでDynamoDB内のデータを見てみましょう。<br>
DynamoDBを選択して、左側の一覧から「テーブル」を選択すると、おそらく「HoroscopeSkillTable」かもしくはスキル名を冠したテーブルが表示されると思います。<br>
<a href="https://camo.qiitausercontent.com/c966c995949bcad5a8e7982dd935a2982773866c/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3234353433382f30343337643631372d646333332d363630612d326464372d3433303431613137666266632e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F245438%2F0437d617-dc33-660a-2dd7-43041a17fbfc.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=eeb20c369f46e7a9b8d34f482e2eb6bf" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/245438/0437d617-dc33-660a-2dd7-43041a17fbfc.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F245438%2F0437d617-dc33-660a-2dd7-43041a17fbfc.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=3ea89c5cfb5f6417553dd64282173a7b 1x" loading="lazy"></a></p>

<p>このテーブルをクリックして開き、右側のタブから「項目」を選択すると、以下のようにテーブルの内容が表示されます。</p>

<p><a href="https://camo.qiitausercontent.com/cf489c5fd2c4b49af84bfb84778ac1a7275d6247/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3234353433382f38653163313061302d316633612d383264392d636333362d3233363235306436643632302e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F245438%2F8e1c10a0-1f3a-82d9-cc36-236250d6d620.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=1a36b026db33b47329e0ada366d5c619" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/245438/8e1c10a0-1f3a-82d9-cc36-236250d6d620.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F245438%2F8e1c10a0-1f3a-82d9-cc36-236250d6d620.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=71c212625cf4eb40a4c192b40d070f96 1x" loading="lazy"></a></p>

<p><code>id</code>と<code>attributes</code>という2つの列を持つテーブルです。</p>

<h2>
<span id="idって何" class="fragment"></span><a href="#id%E3%81%A3%E3%81%A6%E4%BD%95"><i class="fa fa-link"></i></a>idって何？</h2>

<p>このidというのはリクエストのJSONでいうところの<code>userId</code>項目になります。この<code>userId</code>は何かというと、<a href="https://developer.amazon.com/ja/docs/custom-skills/request-and-response-json-reference.html#request-body-syntax" rel="nofollow noopener" target="_blank">こちら</a>に説明のあるとおり、利用者のユニークなIDです。<br>
そのスキルが有効（インストール）にされたときに割り当てられ、そのスキルがいつか無効にされるまではそのスキルの利用において同じIDが使われます。<br>
<a href="https://camo.qiitausercontent.com/54ff8a25b7a5c448d46099616d6928690de6316e/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3234353433382f33343030383437372d343432662d653939662d656664352d6534353430336234386665352e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F245438%2F34008477-442f-e99f-efd5-e45403b48fe5.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=e3f63c240fa85ac777d405597e322a08" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/245438/34008477-442f-e99f-efd5-e45403b48fe5.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F245438%2F34008477-442f-e99f-efd5-e45403b48fe5.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=5e8dd9c5a7c9e1131d835e2af116da5e 1x" loading="lazy"></a></p>

<p>Alexaスキルのテストを行うと毎回違うIDになってしまいますが、実際には上記のとおりになるということです。</p>

<h2>
<span id="attributesは" class="fragment"></span><a href="#attributes%E3%81%AF"><i class="fa fa-link"></i></a>attributesは？</h2>

<p>テストのために、公式チュートリアル第4回のコードに、「test」というキーで整数「5」を追加しています。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>        //永続アトリビュートの取得
        const persistentAttributes = await attributesManager.getPersistentAttributes();//
        persistentAttributes.sign = sign;
        ///////////テスト用・追加////////////
        persistentAttributes.test=5;//整数を入れてみる
</code></pre></div></div>

<p>DynamoDBにはこんな感じでデータが保存されます。<br>
<a href="https://camo.qiitausercontent.com/c702a5f482c91f4e7fbb4fe88ce4ff249e3c4aad/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3234353433382f63653461656562372d303037302d366232302d303965342d6132636235643561643233352e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F245438%2Fce4aeeb7-0070-6b20-09e4-a2cb5d5ad235.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=bfa325613ba455f053e575b2f5e7229e" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/245438/ce4aeeb7-0070-6b20-09e4-a2cb5d5ad235.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F245438%2Fce4aeeb7-0070-6b20-09e4-a2cb5d5ad235.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=36c6b3a159a21368fb6005adb926ee46 1x" loading="lazy"></a></p>

<p>中はこんな感じと。<br>
<a href="https://camo.qiitausercontent.com/89cba035c1a1b45d9219c6dfc1693aaa82d06c1f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3234353433382f39396535316134312d626366632d343534372d373535632d6139376632326135643537312e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F245438%2F99e51a41-bcfc-4547-755c-a97f22a5d571.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=0db774be2801f35844d73b0f8fc7c2d4" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/245438/99e51a41-bcfc-4547-755c-a97f22a5d571.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F245438%2F99e51a41-bcfc-4547-755c-a97f22a5d571.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=1211c06618f07a9d7ca9cb25aba24005 1x" loading="lazy"></a></p>

<h1>
<span id="cでdynamodbにアクセスしよう" class="fragment"></span><a href="#c%E3%81%A7dynamodb%E3%81%AB%E3%82%A2%E3%82%AF%E3%82%BB%E3%82%B9%E3%81%97%E3%82%88%E3%81%86"><i class="fa fa-link"></i></a>C#でDynamoDBにアクセスしよう</h1>

<h2>
<span id="準備-1" class="fragment"></span><a href="#%E6%BA%96%E5%82%99-1"><i class="fa fa-link"></i></a>準備</h2>

<h3>
<span id="awssdkdynamodbv2のインストールnugetで" class="fragment"></span><a href="#awssdkdynamodbv2%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%ABnuget%E3%81%A7"><i class="fa fa-link"></i></a>AWSSDK.DynamoDBv2のインストール（Nugetで）</h3>

<p>C#からDynamoDBにアクセスするにはどうしたら良いのか調べてみると、AmazonさんがそのためのパッケージをNugetで配布してくれていました。<br>
それが「AWSSDK.DynamoDBv2」です。</p>

<p><a href="https://camo.qiitausercontent.com/2a4776dfe72c466e654f0299b5eac2bf5f3e11cf/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3234353433382f31326230616161612d366536322d356565372d336663332d3939613935333031303839642e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F245438%2F12b0aaaa-6e62-5ee7-3fc3-99a95301089d.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=62b200e288bc988176dd33c44696b062" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/245438/12b0aaaa-6e62-5ee7-3fc3-99a95301089d.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F245438%2F12b0aaaa-6e62-5ee7-3fc3-99a95301089d.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=d277eaeb239c322728cac830da4fa779 1x" loading="lazy"></a></p>

<p>これをインストールします。</p>

<h3>
<span id="テスト用のaws-lambdaプロジェクトを作成" class="fragment"></span><a href="#%E3%83%86%E3%82%B9%E3%83%88%E7%94%A8%E3%81%AEaws-lambda%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%82%92%E4%BD%9C%E6%88%90"><i class="fa fa-link"></i></a>テスト用のAWS Lambdaプロジェクトを作成</h3>

<p>次はAlexaスキルから呼び出してDynamoDBにテーブルを作るテストをするためだけのAWS Lambdaプロジェクトを作りましょう。<br>
テストするなら実際と同じ環境でテストしたいですからね。<br>
<a href="https://qiita.com/shuhey/items/30ade9a86262450feeee" id="reference-533c4a5cb48a2c06d1ca">こちら</a>の記事を読んでいただいて、プロジェクトの作成と「Alexa.NET」のインストールをしてください。<br>
そして、Function.csの内容は以下のようなリクエストを受け取ってレスポンスを返すだけのシンプルな状態にしておきます。</p>

<div class="code-frame" data-lang="csharp">
<div class="code-lang"><span class="bold">Function.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">using</span> <span class="nn">System.Threading.Tasks</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Amazon.Lambda.Core</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Alexa.NET.Request</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Alexa.NET.Response</span><span class="p">;</span>


<span class="c1">// Assembly attribute to enable the Lambda function's JSON input to be converted into a .NET class.</span>
<span class="p">[</span><span class="n">assembly</span><span class="p">:</span> <span class="nf">LambdaSerializer</span><span class="p">(</span><span class="k">typeof</span><span class="p">(</span><span class="n">Amazon</span><span class="p">.</span><span class="n">Lambda</span><span class="p">.</span><span class="n">Serialization</span><span class="p">.</span><span class="n">Json</span><span class="p">.</span><span class="n">JsonSerializer</span><span class="p">))]</span>

<span class="k">namespace</span> <span class="nn">DynamoDBTest</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">Function</span>
    <span class="p">{</span>

        <span class="c1">/// &lt;summary&gt;</span>
        <span class="c1">/// A simple function that takes a string and does a ToUpper</span>
        <span class="c1">/// &lt;/summary&gt;</span>
        <span class="c1">/// &lt;param name="input"&gt;&lt;/param&gt;</span>
        <span class="c1">/// &lt;param name="context"&gt;&lt;/param&gt;</span>
        <span class="c1">/// &lt;returns&gt;&lt;/returns&gt;</span>
        <span class="k">public</span> <span class="n">SkillResponse</span> <span class="nf">FunctionHandler</span><span class="p">(</span><span class="n">SkillRequest</span> <span class="n">input</span><span class="p">,</span> <span class="n">ILambdaContext</span> <span class="n">context</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="c1">//ここにDynamoDBにアクセスするコードを追加していく</span>

            <span class="k">return</span> <span class="k">new</span> <span class="n">SkillResponse</span>
            <span class="p">{</span>
                <span class="n">Version</span> <span class="p">=</span> <span class="s">"1.0"</span><span class="p">,</span>
                <span class="n">Response</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">ResponseBody</span><span class="p">()</span>
            <span class="p">};</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<h2>
<span id="まずはテーブル作成" class="fragment"></span><a href="#%E3%81%BE%E3%81%9A%E3%81%AF%E3%83%86%E3%83%BC%E3%83%96%E3%83%AB%E4%BD%9C%E6%88%90"><i class="fa fa-link"></i></a>まずはテーブル作成</h2>

<h3>
<span id="テーブルを作成するコードを追加します" class="fragment"></span><a href="#%E3%83%86%E3%83%BC%E3%83%96%E3%83%AB%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B%E3%82%B3%E3%83%BC%E3%83%89%E3%82%92%E8%BF%BD%E5%8A%A0%E3%81%97%E3%81%BE%E3%81%99"><i class="fa fa-link"></i></a>テーブルを作成するコードを追加します</h3>

<p><a href="https://docs.aws.amazon.com/ja_jp/amazondynamodb/latest/developerguide/LowLevelDotNetTableOperationsExample.html" rel="nofollow noopener" target="_blank">こちら</a>にC#からDynamoDBへアクセスするサンプルコードが掲載されています<br>
ので、これを参考にします。<br>
これはコマンドラインアプリケーションからDynamoDBにアクセスするサンプルコードなので、AWS Lambdaから利用する場合はいくらか調整する必要があります。</p>

<p>調整の結果が以下です。</p>

<div class="code-frame" data-lang="csharp">
<div class="code-lang"><span class="bold">Function.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Threading.Tasks</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Amazon.Lambda.Core</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Alexa.NET.Request</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Alexa.NET.Response</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Amazon.DynamoDBv2</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Amazon.DynamoDBv2.Model</span><span class="p">;</span>


<span class="c1">// Assembly attribute to enable the Lambda function's JSON input to be converted into a .NET class.</span>
<span class="p">[</span><span class="n">assembly</span><span class="p">:</span> <span class="nf">LambdaSerializer</span><span class="p">(</span><span class="k">typeof</span><span class="p">(</span><span class="n">Amazon</span><span class="p">.</span><span class="n">Lambda</span><span class="p">.</span><span class="n">Serialization</span><span class="p">.</span><span class="n">Json</span><span class="p">.</span><span class="n">JsonSerializer</span><span class="p">))]</span>

<span class="k">namespace</span> <span class="nn">DynamoDBTest</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">Function</span>
    <span class="p">{</span>
        <span class="c1">/// &lt;summary&gt;</span>
        <span class="c1">/// A simple function that takes a string and does a ToUpper</span>
        <span class="c1">/// &lt;/summary&gt;</span>
        <span class="c1">/// &lt;param name="input"&gt;&lt;/param&gt;</span>
        <span class="c1">/// &lt;param name="context"&gt;&lt;/param&gt;</span>
        <span class="c1">/// &lt;returns&gt;&lt;/returns&gt;</span>
        <span class="k">public</span> <span class="n">SkillResponse</span> <span class="nf">FunctionHandler</span><span class="p">(</span><span class="n">SkillRequest</span> <span class="n">input</span><span class="p">,</span> <span class="n">ILambdaContext</span> <span class="n">context</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="c1">//ここにDynamoDBにアクセスするコードを追加していく</span>
            <span class="kt">string</span> <span class="n">tableName</span> <span class="p">=</span> <span class="s">"TestTable"</span><span class="p">;</span><span class="c1">//テーブル名</span>
            <span class="n">AmazonDynamoDBClient</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">AmazonDynamoDBClient</span><span class="p">();</span><span class="c1">//主役。これを介してDynamoDBにアクセスする</span>

            <span class="c1">//同名テーブルの存在確認</span>
            <span class="k">if</span> <span class="p">(!</span><span class="nf">IsTableExist</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">tableName</span><span class="p">))</span>
            <span class="p">{</span>
                <span class="c1">//テーブルを作成</span>
                <span class="nf">CreateTable</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">tableName</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="k">return</span> <span class="k">new</span> <span class="n">SkillResponse</span>
            <span class="p">{</span>
                <span class="n">Version</span> <span class="p">=</span> <span class="s">"1.0"</span><span class="p">,</span>
                <span class="n">Response</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">ResponseBody</span><span class="p">()</span>
            <span class="p">};</span>
        <span class="p">}</span>


        <span class="c1">/// &lt;summary&gt;</span>
        <span class="c1">/// DynamoDBにテーブルを作成する</span>
        <span class="c1">/// &lt;/summary&gt;</span>
        <span class="c1">/// &lt;param name="client"&gt;&lt;/param&gt;</span>
        <span class="c1">/// &lt;param name="tableName"&gt;&lt;/param&gt;</span>
        <span class="k">private</span> <span class="k">void</span> <span class="nf">CreateTable</span><span class="p">(</span><span class="n">IAmazonDynamoDB</span> <span class="n">client</span><span class="p">,</span><span class="kt">string</span> <span class="n">tableName</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="c1">//リクエストを構築</span>
            <span class="kt">var</span> <span class="n">request</span> <span class="p">=</span> <span class="k">new</span> <span class="n">CreateTableRequest</span>
            <span class="p">{</span>
                <span class="c1">//テーブルの列情報を設定</span>
                <span class="c1">//「ThisIsId」と「ThisIsSomthing」という2つの列を持つテーブルを作る</span>
                <span class="n">AttributeDefinitions</span> <span class="p">=</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">AttributeDefinition</span><span class="p">&gt;()</span>
                <span class="p">{</span>
                    <span class="k">new</span> <span class="n">AttributeDefinition</span>
                    <span class="p">{</span>
                        <span class="n">AttributeName</span> <span class="p">=</span> <span class="s">"ThisIsId"</span><span class="p">,</span><span class="c1">//カラム名</span>
                        <span class="n">AttributeType</span> <span class="p">=</span> <span class="s">"N"</span>
                    <span class="p">},</span>
                    <span class="k">new</span> <span class="n">AttributeDefinition</span>
                    <span class="p">{</span>
                        <span class="n">AttributeName</span> <span class="p">=</span> <span class="s">"ThisIsSomething"</span><span class="p">,</span><span class="c1">//カラム名</span>
                        <span class="n">AttributeType</span> <span class="p">=</span> <span class="s">"N"</span>
                    <span class="p">}</span>
                <span class="p">},</span>
                <span class="c1">//勉強中</span>
                <span class="n">KeySchema</span> <span class="p">=</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">KeySchemaElement</span><span class="p">&gt;</span>
                <span class="p">{</span>
                    <span class="k">new</span> <span class="n">KeySchemaElement</span>
                    <span class="p">{</span>
                        <span class="n">AttributeName</span> <span class="p">=</span> <span class="s">"ThisIsId"</span><span class="p">,</span>
                        <span class="n">KeyType</span> <span class="p">=</span> <span class="s">"HASH"</span> <span class="c1">//Partition key</span>
                    <span class="p">},</span>
                    <span class="k">new</span> <span class="n">KeySchemaElement</span>
                    <span class="p">{</span>
                        <span class="n">AttributeName</span> <span class="p">=</span> <span class="s">"ThisIsSomething"</span><span class="p">,</span>
                        <span class="n">KeyType</span> <span class="p">=</span> <span class="s">"RANGE"</span> <span class="c1">//Sort key</span>
                    <span class="p">}</span>
                <span class="p">},</span>
                <span class="c1">//勉強中</span>
                <span class="n">ProvisionedThroughput</span> <span class="p">=</span> <span class="k">new</span> <span class="n">ProvisionedThroughput</span>
                <span class="p">{</span>
                    <span class="n">ReadCapacityUnits</span> <span class="p">=</span> <span class="m">5</span><span class="p">,</span>
                    <span class="n">WriteCapacityUnits</span> <span class="p">=</span> <span class="m">5</span>
                <span class="p">},</span>
                <span class="c1">//テーブル名</span>
                <span class="n">TableName</span> <span class="p">=</span> <span class="n">tableName</span>
            <span class="p">};</span>

            <span class="c1">//テーブル作成リクエストを投げる！</span>
            <span class="c1">//ただし、非同期メソッドの返りを待たねければならない。</span>
            <span class="c1">//待たないと先にこのLambdaが終了して、DynamoDBのテーブル作成処理を完了せずに終わる。</span>
            <span class="c1">//でもメソッドにasyncつけたら、最終的にスキルのレスポンスの型もTask&lt;SkillResponse&gt;にしなきゃいけなくなってだめ。</span>
            <span class="c1">//.Wait()メソッドで非同期メソッドを同期メソッドにしちゃえば、返り値も変えなくていいし、テーブル作成完了まで待つことができる。</span>
            <span class="c1">//一回完結のサーバー側の処理で非同期でなきゃいけない理由ないしね。</span>
            <span class="c1">//client.CreateTableAsync(request).Wait();</span>

            <span class="c1">//Waitメソッドではただ非同期メソッドの完了を待つだけでしたが、非同期メソッドの返り値を取得したい場合は、Resultプロパティを使いましょう。</span>
            <span class="c1">//Resultプロパティにアクセスすることで、非同期メソッドの完了を待った上で結果を取得することができます。</span>
            <span class="c1">//結果を使って何か処理を行いたい場合はこちらが良いのではないでしょうか。</span>
            <span class="kt">var</span> <span class="n">result</span><span class="p">=</span><span class="n">client</span><span class="p">.</span><span class="nf">CreateTableAsync</span><span class="p">(</span><span class="n">request</span><span class="p">).</span><span class="n">Result</span><span class="p">;</span>
        <span class="p">}</span>


        <span class="c1">/// &lt;summary&gt;</span>
        <span class="c1">/// 同名のテーブルが存在するかをチェックします。</span>
        <span class="c1">/// &lt;/summary&gt;</span>
        <span class="c1">/// &lt;param name="client"&gt;&lt;/param&gt;</span>
        <span class="c1">/// &lt;param name="tableName"&gt;&lt;/param&gt;</span>
        <span class="c1">/// &lt;returns&gt;&lt;/returns&gt;</span>
        <span class="k">private</span> <span class="kt">bool</span> <span class="nf">IsTableExist</span><span class="p">(</span><span class="n">IAmazonDynamoDB</span> <span class="n">client</span><span class="p">,</span><span class="kt">string</span> <span class="n">tableName</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="c1">//テーブル一覧を取得</span>
            <span class="kt">var</span> <span class="n">tableList</span><span class="p">=</span><span class="n">client</span><span class="p">.</span><span class="nf">ListTablesAsync</span><span class="p">().</span><span class="n">Result</span><span class="p">;</span>
            <span class="c1">//TableNamesプロパティをチェック</span>
            <span class="k">return</span> <span class="n">tableList</span><span class="p">.</span><span class="n">TableNames</span><span class="p">.</span><span class="nf">Exists</span><span class="p">(</span><span class="n">s</span> <span class="p">=&gt;</span> <span class="n">s</span><span class="p">.</span><span class="nf">Equals</span><span class="p">(</span><span class="n">tableName</span><span class="p">));</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<p>公式ページのサンプルコードでは同期メソッドの<code>CreateTable</code>メソッドが使用されていましたが、今は<code>CreateTableAsync</code>しか提供されていないんですかね？<br>
ともかく、スキルとしての返り値の制限からasync、awaitを使った非同期メソッドの利用はできないので、非同期メソッドを同期メソッドとして使えば問題はないということです。</p>

<h3>
<span id="aws-lambdaにデプロイします" class="fragment"></span><a href="#aws-lambda%E3%81%AB%E3%83%87%E3%83%97%E3%83%AD%E3%82%A4%E3%81%97%E3%81%BE%E3%81%99"><i class="fa fa-link"></i></a>AWS Lambdaにデプロイします</h3>

<p>デプロイの方法はこれまた<a href="https://qiita.com/shuhey/items/30ade9a86262450feeee">こちら</a>を参考にしていただくとして、一つ注意があります。<br>
それは「Role」についてです。<br>
今回はDynamoDBにアクセスするので、このプログラムにその権限を与える必要があります。<br>
AWSコンソールでIAMの設定から必要な権限（ポリシー）を持ったロールを作成するとよいのですが、とりあえずここではデプロイ時に選択できるロールとして「<strong>AWSLambdaFullAccess</strong>」というとても力強いポリシーのものを選びます。<br>
<a href="https://camo.qiitausercontent.com/cc5b80364f7c2251577a1ec75109c83d11df323d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3234353433382f39356365376336622d386265372d623134642d303463312d6137363962386235346161352e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F245438%2F95ce7c6b-8be7-b14d-04c1-a769b8b54aa5.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=8e22e625c22bb738e05a9bd683c0d304" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/245438/95ce7c6b-8be7-b14d-04c1-a769b8b54aa5.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F245438%2F95ce7c6b-8be7-b14d-04c1-a769b8b54aa5.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=a12cd1f534f28623faf770fc9f315b09 1x" loading="lazy"></a></p>

<h3>
<span id="動作確認" class="fragment"></span><a href="#%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D"><i class="fa fa-link"></i></a>動作確認</h3>

<p>デプロイが完了したら動作確認しましょう。<br>
サンプルリクエストとして「Alexa Start Session」を選択します。<br>
<a href="https://camo.qiitausercontent.com/0d933294edb73b177a80ecb78bb4a853087f82cf/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3234353433382f66653937396539362d653232312d383735352d393733352d3933313731653336353939642e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F245438%2Ffe979e96-e221-8755-9735-93171e36599d.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=d4b93c782670a51e0640c21c049b3c31" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/245438/fe979e96-e221-8755-9735-93171e36599d.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F245438%2Ffe979e96-e221-8755-9735-93171e36599d.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=b37b1d9302244c742a89ddee5552d8ab 1x" loading="lazy"></a></p>

<p>レスポンスが返ってきたら、AWSコンソールでDynamoDBにテーブルが追加されているか確認します。<br>
<a href="https://camo.qiitausercontent.com/65751cbccd8355db58437d89cc837b8c617fa6be/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3234353433382f35316136636263322d626431322d396234652d363261372d3339396532303465613062662e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F245438%2F51a6cbc2-bd12-9b4e-62a7-399e204ea0bf.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=7d530da911ebf7366d9c1a5388688fbf" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/245438/51a6cbc2-bd12-9b4e-62a7-399e204ea0bf.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F245438%2F51a6cbc2-bd12-9b4e-62a7-399e204ea0bf.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=a328f8e5023c7bc8d9c454198d1768d8 1x" loading="lazy"></a></p>

<p>「TestTable」が追加されています。やったね！<br>
ということで、これでC#を使ってAWS_LambdaからDynamoDBにアクセスする第一歩が踏み出せました。</p>

<h1>
<span id="課題" class="fragment"></span><a href="#%E8%AA%B2%E9%A1%8C"><i class="fa fa-link"></i></a>課題</h1>

<p>DynamoDBに送るリクエストの構築部分がよくわかっていません。<br>
カラム名の指定のところは見てわかるのですが、<code>KeyScheme</code>と<code>ProvisionedThroughput</code>がわかっていません。<br>
調べてわかったら追記します。</p>
</div></div></section><div class="css-1yzj1fm"><div class="css-1uv1qiv"><span class="fa fa-twitter"></span></div><div class="css-1uv1qiv"><span class="fa fa-facebook"></span></div></div><div class="apm-Content"><div class="apm-Content_title">Why not register and get more from Qiita?</div><ol class="apm-Content_list"><li>We will deliver articles that match you<div class="description">By following users and tags, you can catch up information on technical fields that you are interested in as a whole</div></li><li>you can read useful information later efficiently<div class="description">By &quot;stocking&quot; the articles you like, you can search right away</div></li><div><a class="apm-Content_help" href="https://help.qiita.com/ja/articles/qiita-login-user" target="_blank"><i class="fa fa-fw fa-arrow-circle-right"></i>What you can do with signing up</a></div></ol><a href="/signup?callback_action=login_or_signup&amp;redirect_to=%2Fshuhey%2Fitems%2Fcb73812986614af629b3&amp;realm=qiita" class="apm-Content_button apm-Content_button-signup">Sign up</a><a href="/login?callback_action=login_or_signup&amp;redirect_to=%2Fshuhey%2Fitems%2Fcb73812986614af629b3&amp;realm=qiita" class="apm-Content_button apm-Content_button-signin">Login</a></div></div><div class="css-helsa7"></div></div></div></div><div class="css-109dbrr"><div class="css-5jpx49"><div class="css-mnxgyc"><button class=" css-1vlpknv"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/shuhey/items/cb73812986614af629b3/likers" class="css-1iupg5d">2</a></div><div class="css-fsjkhv"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-1b17vb0">1</span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-7i7f4d"><div class="css-1gj7nt">Improve article</div><a href="/drafts/cb73812986614af629b3/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/shuhey/items/cb73812986614af629b3/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/shuhey/items/cb73812986614af629b3/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/shuhey/items/cb73812986614af629b3/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/shuhey/items/cb73812986614af629b3.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="PersonalArticlePage" data-dom-id="PersonalArticlePage-react-component-cb0f4101-c6ba-40b4-8791-2d899206ec27">{"authorAnalyticsTrackingId":null,"organizationAnalyticsTrackingId":null}</script>
      
<footer id="globalFooter" class="st-Footer"><div class="st-Footer_container"><div class="st-Footer_start"><div class="st-Footer_logo"><svg viewbox="0 0 426.57 130" xmlns="http://www.w3.org/2000/svg"><circle cx="167.08" cy="21.4" r="12.28" /><path d="M250.81 29.66h23.48v18.9h-23.48z" /><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z" /><circle cx="216.33" cy="21.4" r="12.28" /></svg></div><div class="st-Footer_catchcopy">How developers code is here.</div><div class="st-Footer_socials"><a class="fa fa-twitter" href="https://twitter.com/qiita"></a><a class="fa fa-facebook-square" href="https://www.facebook.com/qiita/"></a></div></div><div class="st-Footer_end"><div class="st-Footer_qiita"><div class="st-Footer_label">Qiita</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="/about">About</a><a href="/terms">Terms</a><a href="/privacy">Privacy</a><a target="_blank" href="http://help.qiita.com/ja/articles/qiita-community-guideline">Guideline</a><a target="_blank" href="https://help.qiita.com/ja/articles/others-brand-guideline">Design Guideline</a></div><div class="st-Footer_column"><a href="/release-notes">Release</a><a href="/api/v2/docs">API</a><a href="/feedback/new">ご意見</a><a href="https://help.qiita.com">Help</a><a target="_blank" href="https://qiita.com/ads?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Advertisement</a></div></div></div><div class="st-Footer_increments"><div class="st-Footer_label">Increments</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="https://increments.co.jp/company/">About</a><a href="https://increments.co.jp/jobs/">採用情報</a><a href="https://blog.qiita.com">Blog</a></div><div class="st-Footer_column"><a href="https://teams.qiita.com/">Qiita Team</a><a href="https://jobs.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Jobs</a><a href="https://zine.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Zine</a></div></div></div></div></div><div class="st-Footer_copyright">© 2011-2021 Increments Inc.</div></footer><div id="Snackbar-react-component-9dffe45c-665f-4326-aaf9-fde6f75a7604"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="Snackbar" data-dom-id="Snackbar-react-component-9dffe45c-665f-4326-aaf9-fde6f75a7604">{}</script>
      
<div id="LoginModal-react-component-aed58720-c512-4fb3-a01c-990e575e660a"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="LoginModal" data-dom-id="LoginModal-react-component-aed58720-c512-4fb3-a01c-990e575e660a">{}</script>
      
<div id="StockModal-react-component-2b9758e2-0897-4f7d-b899-4d8bb6360156"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="StockModal" data-dom-id="StockModal-react-component-2b9758e2-0897-4f7d-b899-4d8bb6360156">{}</script>
      
</div><div id="dataContainer" style="display: none;" data-config="{&quot;actionPath&quot;:&quot;public/items#show&quot;,&quot;settings&quot;:{&quot;analyticsTrackingId&quot;:&quot;UA-24675221-12&quot;,&quot;assetsMap&quot;:{},&quot;csrfToken&quot;:&quot;6PXzQq/M8eLyFxKvTeriL/EUeCzYWM+DzZNYAzCvPO/Us2zShm83uD00uQM1RhmORO0uCE3vbh8zotymeSjhfQ==&quot;,&quot;locale&quot;:&quot;en&quot;},&quot;currentUser&quot;:null}" /></body></html><script type="application/json" data-js-react-on-rails-store="AppStoreWithReactOnRails">{"snackbar":{"type":"","body":"","isActive":false},"article":{"article":{"body":"\n\u003ch4\u003e\n\u003cspan id=\"2018年11月9日追記\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#2018%E5%B9%B411%E6%9C%889%E6%97%A5%E8%BF%BD%E8%A8%98\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e2018年11月9日追記\u003c/h4\u003e\n\n\u003cp\u003eWaitメソッドによって非同期メソッド（CreateTableAsync）の完了を待機することでDynamoDBへテーブル作成処理をちゃんと完了させるようにしました。\u003cbr\u003e\nが、\u003ca href=\"https://qiita.com/takutoy/items/d45aa736ced25a8158b3\" id=\"reference-f57448de0785bc6b7f30\"\u003eこちらの方の非同期処理に関する記事\u003c/a\u003eを読んで、Resultプロパティを使って非同期メソッドの結果も取得した方が汎用的と思い、Waitメソッドではなく、Resultプロパティを使うように修正しました。\u003cbr\u003e\nありがとうございました。\u003c/p\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"2018年11月9日追記2\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#2018%E5%B9%B411%E6%9C%889%E6%97%A5%E8%BF%BD%E8%A8%982\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e2018年11月9日追記2\u003c/h4\u003e\n\n\u003cp\u003eCreateTableしたときに、同名のテーブルが存在すると例外が発生してしまいます。\u003cbr\u003e\nこれを回避するために、CreateTableの前にテーブルの存在確認をするようにしました。\u003cbr\u003e\nテーブルの存在確認は、\u003ccode\u003eListTablesAsync\u003c/code\u003eメソッドによってテーブルの一覧を取得し、指定した名前のテーブルが存在するかをLinqのExistsメソッドを使って確認しているだけのシンプルなものです。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"はじめに\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eはじめに\u003c/h1\u003e\n\n\u003cp\u003e\u003ca href=\"https://qiita.com/shuhey/items/b777117713c0c5e15a17\" id=\"reference-9399ae1cb84a92051812\"\u003eこの記事\u003c/a\u003eで、\u003ca href=\"https://developer.amazon.com/ja/blogs/alexa/post/cddf2434-42ee-422f-886d-5be9c36dba14/jp-training-chapter3\" rel=\"nofollow noopener\" target=\"_blank\"\u003e公式Alexaチュートリアル第3回\u003c/a\u003eの内容をC#で実装しました。\u003c/p\u003e\n\n\u003cp\u003e次は第4回になるわけですが、第4回は永続的なデータの保持ということでデータをDynamoDBに保存する、という内容になっています。\u003c/p\u003e\n\n\u003cp\u003eそこでまずはC#からDynamoDBにアクセスする方法を学ばなければなりません。\u003cbr\u003e\n今回はそういう内容です。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"準備\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%BA%96%E5%82%99\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e準備\u003c/h1\u003e\n\n\u003cp\u003e\u003ca href=\"https://developer.amazon.com/ja/blogs/alexa/post/4144a8ea-7549-4c44-a4bd-e94cb93807ea/chapter4-jp\" rel=\"nofollow noopener\" target=\"_blank\"\u003e公式Alexaチュートリアル第4回\u003c/a\u003eを完了しておいてください。Node.jsでそのままやってくださってOKです。\u003cbr\u003e\nなぜかというと、チュートリアルではSDK for Node.jsが提供している\u003ccode\u003esetPersistentAttributes\u003c/code\u003eメソッドを使ってDynamoDBにデータを保存しているのですが、どのような情報がどのような形で保存されるのかを確認するためです。\u003c/p\u003e\n\n\u003cp\u003eSDK for Node.jsのメソッドを使えばDynamoDBにデータを保存するときのあれやこれやをよろしくやってくれるので、開発者はメソッド一発でデータをDynamoDBに保存することができます。\u003c/p\u003e\n\n\u003cp\u003eしかし、C#の場合、それを自分でやる必要があるため、こうして確認し、そのとおりにデータを保存してみようという考えです。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"dynamodb上でのデータの形式を確認\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#dynamodb%E4%B8%8A%E3%81%A7%E3%81%AE%E3%83%87%E3%83%BC%E3%82%BF%E3%81%AE%E5%BD%A2%E5%BC%8F%E3%82%92%E7%A2%BA%E8%AA%8D\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eDynamoDB上でのデータの形式を確認\u003c/h1\u003e\n\n\u003cp\u003e公式チュートリアル第4回を完了して、スキルをひととおり動かすとDynamoDBにはユーザーの星座データが保存されます。\u003cbr\u003e\nAWSのウェブコンソールでDynamoDB内のデータを見てみましょう。\u003cbr\u003e\nDynamoDBを選択して、左側の一覧から「テーブル」を選択すると、おそらく「HoroscopeSkillTable」かもしくはスキル名を冠したテーブルが表示されると思います。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/c966c995949bcad5a8e7982dd935a2982773866c/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3234353433382f30343337643631372d646333332d363630612d326464372d3433303431613137666266632e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F245438%2F0437d617-dc33-660a-2dd7-43041a17fbfc.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=eeb20c369f46e7a9b8d34f482e2eb6bf\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/245438/0437d617-dc33-660a-2dd7-43041a17fbfc.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F245438%2F0437d617-dc33-660a-2dd7-43041a17fbfc.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=3ea89c5cfb5f6417553dd64282173a7b 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eこのテーブルをクリックして開き、右側のタブから「項目」を選択すると、以下のようにテーブルの内容が表示されます。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/cf489c5fd2c4b49af84bfb84778ac1a7275d6247/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3234353433382f38653163313061302d316633612d383264392d636333362d3233363235306436643632302e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F245438%2F8e1c10a0-1f3a-82d9-cc36-236250d6d620.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=1a36b026db33b47329e0ada366d5c619\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/245438/8e1c10a0-1f3a-82d9-cc36-236250d6d620.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F245438%2F8e1c10a0-1f3a-82d9-cc36-236250d6d620.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=71c212625cf4eb40a4c192b40d070f96 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003ccode\u003eid\u003c/code\u003eと\u003ccode\u003eattributes\u003c/code\u003eという2つの列を持つテーブルです。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"idって何\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#id%E3%81%A3%E3%81%A6%E4%BD%95\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eidって何？\u003c/h2\u003e\n\n\u003cp\u003eこのidというのはリクエストのJSONでいうところの\u003ccode\u003euserId\u003c/code\u003e項目になります。この\u003ccode\u003euserId\u003c/code\u003eは何かというと、\u003ca href=\"https://developer.amazon.com/ja/docs/custom-skills/request-and-response-json-reference.html#request-body-syntax\" rel=\"nofollow noopener\" target=\"_blank\"\u003eこちら\u003c/a\u003eに説明のあるとおり、利用者のユニークなIDです。\u003cbr\u003e\nそのスキルが有効（インストール）にされたときに割り当てられ、そのスキルがいつか無効にされるまではそのスキルの利用において同じIDが使われます。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/54ff8a25b7a5c448d46099616d6928690de6316e/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3234353433382f33343030383437372d343432662d653939662d656664352d6534353430336234386665352e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F245438%2F34008477-442f-e99f-efd5-e45403b48fe5.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=e3f63c240fa85ac777d405597e322a08\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/245438/34008477-442f-e99f-efd5-e45403b48fe5.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F245438%2F34008477-442f-e99f-efd5-e45403b48fe5.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=5e8dd9c5a7c9e1131d835e2af116da5e 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eAlexaスキルのテストを行うと毎回違うIDになってしまいますが、実際には上記のとおりになるということです。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"attributesは\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#attributes%E3%81%AF\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eattributesは？\u003c/h2\u003e\n\n\u003cp\u003eテストのために、公式チュートリアル第4回のコードに、「test」というキーで整数「5」を追加しています。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e        //永続アトリビュートの取得\n        const persistentAttributes = await attributesManager.getPersistentAttributes();//\n        persistentAttributes.sign = sign;\n        ///////////テスト用・追加////////////\n        persistentAttributes.test=5;//整数を入れてみる\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eDynamoDBにはこんな感じでデータが保存されます。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/c702a5f482c91f4e7fbb4fe88ce4ff249e3c4aad/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3234353433382f63653461656562372d303037302d366232302d303965342d6132636235643561643233352e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F245438%2Fce4aeeb7-0070-6b20-09e4-a2cb5d5ad235.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=bfa325613ba455f053e575b2f5e7229e\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/245438/ce4aeeb7-0070-6b20-09e4-a2cb5d5ad235.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F245438%2Fce4aeeb7-0070-6b20-09e4-a2cb5d5ad235.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=36c6b3a159a21368fb6005adb926ee46 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e中はこんな感じと。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/89cba035c1a1b45d9219c6dfc1693aaa82d06c1f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3234353433382f39396535316134312d626366632d343534372d373535632d6139376632326135643537312e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F245438%2F99e51a41-bcfc-4547-755c-a97f22a5d571.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=0db774be2801f35844d73b0f8fc7c2d4\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/245438/99e51a41-bcfc-4547-755c-a97f22a5d571.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F245438%2F99e51a41-bcfc-4547-755c-a97f22a5d571.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=1211c06618f07a9d7ca9cb25aba24005 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"cでdynamodbにアクセスしよう\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#c%E3%81%A7dynamodb%E3%81%AB%E3%82%A2%E3%82%AF%E3%82%BB%E3%82%B9%E3%81%97%E3%82%88%E3%81%86\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eC#でDynamoDBにアクセスしよう\u003c/h1\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"準備-1\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%BA%96%E5%82%99-1\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e準備\u003c/h2\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"awssdkdynamodbv2のインストールnugetで\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#awssdkdynamodbv2%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%ABnuget%E3%81%A7\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eAWSSDK.DynamoDBv2のインストール（Nugetで）\u003c/h3\u003e\n\n\u003cp\u003eC#からDynamoDBにアクセスするにはどうしたら良いのか調べてみると、AmazonさんがそのためのパッケージをNugetで配布してくれていました。\u003cbr\u003e\nそれが「AWSSDK.DynamoDBv2」です。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/2a4776dfe72c466e654f0299b5eac2bf5f3e11cf/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3234353433382f31326230616161612d366536322d356565372d336663332d3939613935333031303839642e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F245438%2F12b0aaaa-6e62-5ee7-3fc3-99a95301089d.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=62b200e288bc988176dd33c44696b062\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/245438/12b0aaaa-6e62-5ee7-3fc3-99a95301089d.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F245438%2F12b0aaaa-6e62-5ee7-3fc3-99a95301089d.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=d277eaeb239c322728cac830da4fa779 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eこれをインストールします。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"テスト用のaws-lambdaプロジェクトを作成\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%86%E3%82%B9%E3%83%88%E7%94%A8%E3%81%AEaws-lambda%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%82%92%E4%BD%9C%E6%88%90\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eテスト用のAWS Lambdaプロジェクトを作成\u003c/h3\u003e\n\n\u003cp\u003e次はAlexaスキルから呼び出してDynamoDBにテーブルを作るテストをするためだけのAWS Lambdaプロジェクトを作りましょう。\u003cbr\u003e\nテストするなら実際と同じ環境でテストしたいですからね。\u003cbr\u003e\n\u003ca href=\"https://qiita.com/shuhey/items/30ade9a86262450feeee\" id=\"reference-533c4a5cb48a2c06d1ca\"\u003eこちら\u003c/a\u003eの記事を読んでいただいて、プロジェクトの作成と「Alexa.NET」のインストールをしてください。\u003cbr\u003e\nそして、Function.csの内容は以下のようなリクエストを受け取ってレスポンスを返すだけのシンプルな状態にしておきます。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eFunction.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem.Threading.Tasks\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eAmazon.Lambda.Core\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eAlexa.NET.Request\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eAlexa.NET.Response\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\n\u003cspan class=\"c1\"\u003e// Assembly attribute to enable the Lambda function's JSON input to be converted into a .NET class.\u003c/span\u003e\n\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eassembly\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nf\"\u003eLambdaSerializer\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003etypeof\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eAmazon\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eLambda\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eSerialization\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eJson\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eJsonSerializer\u003c/span\u003e\u003cspan class=\"p\"\u003e))]\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003enamespace\u003c/span\u003e \u003cspan class=\"nn\"\u003eDynamoDBTest\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eFunction\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\n        \u003cspan class=\"c1\"\u003e/// \u0026lt;summary\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e/// A simple function that takes a string and does a ToUpper\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e/// \u0026lt;/summary\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e/// \u0026lt;param name=\"input\"\u0026gt;\u0026lt;/param\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e/// \u0026lt;param name=\"context\"\u0026gt;\u0026lt;/param\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e/// \u0026lt;returns\u0026gt;\u0026lt;/returns\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eSkillResponse\u003c/span\u003e \u003cspan class=\"nf\"\u003eFunctionHandler\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eSkillRequest\u003c/span\u003e \u003cspan class=\"n\"\u003einput\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eILambdaContext\u003c/span\u003e \u003cspan class=\"n\"\u003econtext\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"c1\"\u003e//ここにDynamoDBにアクセスするコードを追加していく\u003c/span\u003e\n\n            \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eSkillResponse\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"n\"\u003eVersion\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"1.0\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                \u003cspan class=\"n\"\u003eResponse\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eResponseBody\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e};\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"まずはテーブル作成\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%BE%E3%81%9A%E3%81%AF%E3%83%86%E3%83%BC%E3%83%96%E3%83%AB%E4%BD%9C%E6%88%90\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eまずはテーブル作成\u003c/h2\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"テーブルを作成するコードを追加します\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%86%E3%83%BC%E3%83%96%E3%83%AB%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B%E3%82%B3%E3%83%BC%E3%83%89%E3%82%92%E8%BF%BD%E5%8A%A0%E3%81%97%E3%81%BE%E3%81%99\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eテーブルを作成するコードを追加します\u003c/h3\u003e\n\n\u003cp\u003e\u003ca href=\"https://docs.aws.amazon.com/ja_jp/amazondynamodb/latest/developerguide/LowLevelDotNetTableOperationsExample.html\" rel=\"nofollow noopener\" target=\"_blank\"\u003eこちら\u003c/a\u003eにC#からDynamoDBへアクセスするサンプルコードが掲載されています\u003cbr\u003e\nので、これを参考にします。\u003cbr\u003e\nこれはコマンドラインアプリケーションからDynamoDBにアクセスするサンプルコードなので、AWS Lambdaから利用する場合はいくらか調整する必要があります。\u003c/p\u003e\n\n\u003cp\u003e調整の結果が以下です。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eFunction.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem.Collections.Generic\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem.Threading.Tasks\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eAmazon.Lambda.Core\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eAlexa.NET.Request\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eAlexa.NET.Response\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eAmazon.DynamoDBv2\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eAmazon.DynamoDBv2.Model\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\n\u003cspan class=\"c1\"\u003e// Assembly attribute to enable the Lambda function's JSON input to be converted into a .NET class.\u003c/span\u003e\n\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eassembly\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nf\"\u003eLambdaSerializer\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003etypeof\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eAmazon\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eLambda\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eSerialization\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eJson\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eJsonSerializer\u003c/span\u003e\u003cspan class=\"p\"\u003e))]\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003enamespace\u003c/span\u003e \u003cspan class=\"nn\"\u003eDynamoDBTest\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eFunction\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e/// \u0026lt;summary\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e/// A simple function that takes a string and does a ToUpper\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e/// \u0026lt;/summary\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e/// \u0026lt;param name=\"input\"\u0026gt;\u0026lt;/param\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e/// \u0026lt;param name=\"context\"\u0026gt;\u0026lt;/param\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e/// \u0026lt;returns\u0026gt;\u0026lt;/returns\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eSkillResponse\u003c/span\u003e \u003cspan class=\"nf\"\u003eFunctionHandler\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eSkillRequest\u003c/span\u003e \u003cspan class=\"n\"\u003einput\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eILambdaContext\u003c/span\u003e \u003cspan class=\"n\"\u003econtext\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"c1\"\u003e//ここにDynamoDBにアクセスするコードを追加していく\u003c/span\u003e\n            \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003etableName\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"TestTable\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\u003cspan class=\"c1\"\u003e//テーブル名\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eAmazonDynamoDBClient\u003c/span\u003e \u003cspan class=\"n\"\u003eclient\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eAmazonDynamoDBClient\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\u003cspan class=\"c1\"\u003e//主役。これを介してDynamoDBにアクセスする\u003c/span\u003e\n\n            \u003cspan class=\"c1\"\u003e//同名テーブルの存在確認\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(!\u003c/span\u003e\u003cspan class=\"nf\"\u003eIsTableExist\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eclient\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003etableName\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"c1\"\u003e//テーブルを作成\u003c/span\u003e\n                \u003cspan class=\"nf\"\u003eCreateTable\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eclient\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003etableName\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n            \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eSkillResponse\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"n\"\u003eVersion\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"1.0\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                \u003cspan class=\"n\"\u003eResponse\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eResponseBody\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e};\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\n        \u003cspan class=\"c1\"\u003e/// \u0026lt;summary\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e/// DynamoDBにテーブルを作成する\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e/// \u0026lt;/summary\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e/// \u0026lt;param name=\"client\"\u0026gt;\u0026lt;/param\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e/// \u0026lt;param name=\"tableName\"\u0026gt;\u0026lt;/param\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eCreateTable\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eIAmazonDynamoDB\u003c/span\u003e \u003cspan class=\"n\"\u003eclient\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003etableName\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"c1\"\u003e//リクエストを構築\u003c/span\u003e\n            \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003erequest\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eCreateTableRequest\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"c1\"\u003e//テーブルの列情報を設定\u003c/span\u003e\n                \u003cspan class=\"c1\"\u003e//「ThisIsId」と「ThisIsSomthing」という2つの列を持つテーブルを作る\u003c/span\u003e\n                \u003cspan class=\"n\"\u003eAttributeDefinitions\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eList\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eAttributeDefinition\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;()\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                    \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eAttributeDefinition\u003c/span\u003e\n                    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                        \u003cspan class=\"n\"\u003eAttributeName\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"ThisIsId\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"c1\"\u003e//カラム名\u003c/span\u003e\n                        \u003cspan class=\"n\"\u003eAttributeType\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"N\"\u003c/span\u003e\n                    \u003cspan class=\"p\"\u003e},\u003c/span\u003e\n                    \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eAttributeDefinition\u003c/span\u003e\n                    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                        \u003cspan class=\"n\"\u003eAttributeName\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"ThisIsSomething\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"c1\"\u003e//カラム名\u003c/span\u003e\n                        \u003cspan class=\"n\"\u003eAttributeType\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"N\"\u003c/span\u003e\n                    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e},\u003c/span\u003e\n                \u003cspan class=\"c1\"\u003e//勉強中\u003c/span\u003e\n                \u003cspan class=\"n\"\u003eKeySchema\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eList\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eKeySchemaElement\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                    \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eKeySchemaElement\u003c/span\u003e\n                    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                        \u003cspan class=\"n\"\u003eAttributeName\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"ThisIsId\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                        \u003cspan class=\"n\"\u003eKeyType\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"HASH\"\u003c/span\u003e \u003cspan class=\"c1\"\u003e//Partition key\u003c/span\u003e\n                    \u003cspan class=\"p\"\u003e},\u003c/span\u003e\n                    \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eKeySchemaElement\u003c/span\u003e\n                    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                        \u003cspan class=\"n\"\u003eAttributeName\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"ThisIsSomething\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                        \u003cspan class=\"n\"\u003eKeyType\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"RANGE\"\u003c/span\u003e \u003cspan class=\"c1\"\u003e//Sort key\u003c/span\u003e\n                    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e},\u003c/span\u003e\n                \u003cspan class=\"c1\"\u003e//勉強中\u003c/span\u003e\n                \u003cspan class=\"n\"\u003eProvisionedThroughput\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eProvisionedThroughput\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                    \u003cspan class=\"n\"\u003eReadCapacityUnits\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e5\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                    \u003cspan class=\"n\"\u003eWriteCapacityUnits\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e5\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e},\u003c/span\u003e\n                \u003cspan class=\"c1\"\u003e//テーブル名\u003c/span\u003e\n                \u003cspan class=\"n\"\u003eTableName\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003etableName\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e};\u003c/span\u003e\n\n            \u003cspan class=\"c1\"\u003e//テーブル作成リクエストを投げる！\u003c/span\u003e\n            \u003cspan class=\"c1\"\u003e//ただし、非同期メソッドの返りを待たねければならない。\u003c/span\u003e\n            \u003cspan class=\"c1\"\u003e//待たないと先にこのLambdaが終了して、DynamoDBのテーブル作成処理を完了せずに終わる。\u003c/span\u003e\n            \u003cspan class=\"c1\"\u003e//でもメソッドにasyncつけたら、最終的にスキルのレスポンスの型もTask\u0026lt;SkillResponse\u0026gt;にしなきゃいけなくなってだめ。\u003c/span\u003e\n            \u003cspan class=\"c1\"\u003e//.Wait()メソッドで非同期メソッドを同期メソッドにしちゃえば、返り値も変えなくていいし、テーブル作成完了まで待つことができる。\u003c/span\u003e\n            \u003cspan class=\"c1\"\u003e//一回完結のサーバー側の処理で非同期でなきゃいけない理由ないしね。\u003c/span\u003e\n            \u003cspan class=\"c1\"\u003e//client.CreateTableAsync(request).Wait();\u003c/span\u003e\n\n            \u003cspan class=\"c1\"\u003e//Waitメソッドではただ非同期メソッドの完了を待つだけでしたが、非同期メソッドの返り値を取得したい場合は、Resultプロパティを使いましょう。\u003c/span\u003e\n            \u003cspan class=\"c1\"\u003e//Resultプロパティにアクセスすることで、非同期メソッドの完了を待った上で結果を取得することができます。\u003c/span\u003e\n            \u003cspan class=\"c1\"\u003e//結果を使って何か処理を行いたい場合はこちらが良いのではないでしょうか。\u003c/span\u003e\n            \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003eclient\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eCreateTableAsync\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003erequest\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"n\"\u003eResult\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\n        \u003cspan class=\"c1\"\u003e/// \u0026lt;summary\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e/// 同名のテーブルが存在するかをチェックします。\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e/// \u0026lt;/summary\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e/// \u0026lt;param name=\"client\"\u0026gt;\u0026lt;/param\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e/// \u0026lt;param name=\"tableName\"\u0026gt;\u0026lt;/param\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e/// \u0026lt;returns\u0026gt;\u0026lt;/returns\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"nf\"\u003eIsTableExist\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eIAmazonDynamoDB\u003c/span\u003e \u003cspan class=\"n\"\u003eclient\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003etableName\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"c1\"\u003e//テーブル一覧を取得\u003c/span\u003e\n            \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003etableList\u003c/span\u003e\u003cspan class=\"p\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003eclient\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eListTablesAsync\u003c/span\u003e\u003cspan class=\"p\"\u003e().\u003c/span\u003e\u003cspan class=\"n\"\u003eResult\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"c1\"\u003e//TableNamesプロパティをチェック\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003etableList\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eTableNames\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eExists\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003es\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003es\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eEquals\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003etableName\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e公式ページのサンプルコードでは同期メソッドの\u003ccode\u003eCreateTable\u003c/code\u003eメソッドが使用されていましたが、今は\u003ccode\u003eCreateTableAsync\u003c/code\u003eしか提供されていないんですかね？\u003cbr\u003e\nともかく、スキルとしての返り値の制限からasync、awaitを使った非同期メソッドの利用はできないので、非同期メソッドを同期メソッドとして使えば問題はないということです。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"aws-lambdaにデプロイします\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#aws-lambda%E3%81%AB%E3%83%87%E3%83%97%E3%83%AD%E3%82%A4%E3%81%97%E3%81%BE%E3%81%99\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eAWS Lambdaにデプロイします\u003c/h3\u003e\n\n\u003cp\u003eデプロイの方法はこれまた\u003ca href=\"https://qiita.com/shuhey/items/30ade9a86262450feeee\"\u003eこちら\u003c/a\u003eを参考にしていただくとして、一つ注意があります。\u003cbr\u003e\nそれは「Role」についてです。\u003cbr\u003e\n今回はDynamoDBにアクセスするので、このプログラムにその権限を与える必要があります。\u003cbr\u003e\nAWSコンソールでIAMの設定から必要な権限（ポリシー）を持ったロールを作成するとよいのですが、とりあえずここではデプロイ時に選択できるロールとして「\u003cstrong\u003eAWSLambdaFullAccess\u003c/strong\u003e」というとても力強いポリシーのものを選びます。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/cc5b80364f7c2251577a1ec75109c83d11df323d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3234353433382f39356365376336622d386265372d623134642d303463312d6137363962386235346161352e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F245438%2F95ce7c6b-8be7-b14d-04c1-a769b8b54aa5.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=8e22e625c22bb738e05a9bd683c0d304\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/245438/95ce7c6b-8be7-b14d-04c1-a769b8b54aa5.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F245438%2F95ce7c6b-8be7-b14d-04c1-a769b8b54aa5.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=a12cd1f534f28623faf770fc9f315b09 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"動作確認\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e動作確認\u003c/h3\u003e\n\n\u003cp\u003eデプロイが完了したら動作確認しましょう。\u003cbr\u003e\nサンプルリクエストとして「Alexa Start Session」を選択します。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/0d933294edb73b177a80ecb78bb4a853087f82cf/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3234353433382f66653937396539362d653232312d383735352d393733352d3933313731653336353939642e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F245438%2Ffe979e96-e221-8755-9735-93171e36599d.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=d4b93c782670a51e0640c21c049b3c31\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/245438/fe979e96-e221-8755-9735-93171e36599d.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F245438%2Ffe979e96-e221-8755-9735-93171e36599d.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=b37b1d9302244c742a89ddee5552d8ab 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eレスポンスが返ってきたら、AWSコンソールでDynamoDBにテーブルが追加されているか確認します。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/65751cbccd8355db58437d89cc837b8c617fa6be/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3234353433382f35316136636263322d626431322d396234652d363261372d3339396532303465613062662e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F245438%2F51a6cbc2-bd12-9b4e-62a7-399e204ea0bf.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=7d530da911ebf7366d9c1a5388688fbf\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/245438/51a6cbc2-bd12-9b4e-62a7-399e204ea0bf.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F245438%2F51a6cbc2-bd12-9b4e-62a7-399e204ea0bf.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=a328f8e5023c7bc8d9c454198d1768d8 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e「TestTable」が追加されています。やったね！\u003cbr\u003e\nということで、これでC#を使ってAWS_LambdaからDynamoDBにアクセスする第一歩が踏み出せました。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"課題\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%AA%B2%E9%A1%8C\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e課題\u003c/h1\u003e\n\n\u003cp\u003eDynamoDBに送るリクエストの構築部分がよくわかっていません。\u003cbr\u003e\nカラム名の指定のところは見てわかるのですが、\u003ccode\u003eKeyScheme\u003c/code\u003eと\u003ccode\u003eProvisionedThroughput\u003c/code\u003eがわかっていません。\u003cbr\u003e\n調べてわかったら追記します。\u003c/p\u003e\n","createdAt":"2018-11-09T02:22:03Z","elapsedYearsFromLastModifiedAt":2,"encryptedId":"NI9A7OvsYvnk4hKl9MxJBed9YfIpAEGB--Vjfn+gL4o47WVtZd--MuALo6uHJ0dLykmrQM330A==","isBanned":false,"isDeprecated":true,"isDestroyableByViewer":false,"isEditRequestReadableByViewer":true,"isEditRequestSendableByViewer":true,"isLikableByViewer":true,"isLikedByViewer":false,"isPublic":true,"isSlide":false,"isStockableByViewer":true,"isStockedByViewer":false,"isSubscribableByViewer":false,"isSubscribedByViewer":false,"isUpdatableByViewer":false,"isUpdated":true,"lastModifiedAt":"2018-11-09T05:30:03Z","likesCount":2,"linkUrl":"https://qiita.com/shuhey/items/cb73812986614af629b3","organization":null,"originalId":720591,"stockedCount":1,"title":"Alexaスキル（C#）からDynamoDBにアクセスするには？（テーブル作成まで）","toc":"\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#2018%E5%B9%B411%E6%9C%889%E6%97%A5%E8%BF%BD%E8%A8%98\"\u003e2018年11月9日追記\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#2018%E5%B9%B411%E6%9C%889%E6%97%A5%E8%BF%BD%E8%A8%982\"\u003e2018年11月9日追記2\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB\"\u003eはじめに\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E6%BA%96%E5%82%99\"\u003e準備\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#dynamodb%E4%B8%8A%E3%81%A7%E3%81%AE%E3%83%87%E3%83%BC%E3%82%BF%E3%81%AE%E5%BD%A2%E5%BC%8F%E3%82%92%E7%A2%BA%E8%AA%8D\"\u003eDynamoDB上でのデータの形式を確認\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#id%E3%81%A3%E3%81%A6%E4%BD%95\"\u003eidって何？\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#attributes%E3%81%AF\"\u003eattributesは？\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#c%E3%81%A7dynamodb%E3%81%AB%E3%82%A2%E3%82%AF%E3%82%BB%E3%82%B9%E3%81%97%E3%82%88%E3%81%86\"\u003eC#でDynamoDBにアクセスしよう\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E6%BA%96%E5%82%99-1\"\u003e準備\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#awssdkdynamodbv2%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%ABnuget%E3%81%A7\"\u003eAWSSDK.DynamoDBv2のインストール（Nugetで）\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%86%E3%82%B9%E3%83%88%E7%94%A8%E3%81%AEaws-lambda%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%82%92%E4%BD%9C%E6%88%90\"\u003eテスト用のAWS Lambdaプロジェクトを作成\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%81%BE%E3%81%9A%E3%81%AF%E3%83%86%E3%83%BC%E3%83%96%E3%83%AB%E4%BD%9C%E6%88%90\"\u003eまずはテーブル作成\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%86%E3%83%BC%E3%83%96%E3%83%AB%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B%E3%82%B3%E3%83%BC%E3%83%89%E3%82%92%E8%BF%BD%E5%8A%A0%E3%81%97%E3%81%BE%E3%81%99\"\u003eテーブルを作成するコードを追加します\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#aws-lambda%E3%81%AB%E3%83%87%E3%83%97%E3%83%AD%E3%82%A4%E3%81%97%E3%81%BE%E3%81%99\"\u003eAWS Lambdaにデプロイします\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D\"\u003e動作確認\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E8%AA%B2%E9%A1%8C\"\u003e課題\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n","totalPv":1916,"uuid":"cb73812986614af629b3","banReason":null,"adventCalendarItem":null,"author":{"encryptedId":"oxCSHZhxdnFGPkQ8ujT0ld+B7E3z--h0EUfqrBWe8JbEJF--Ld43SiWA9La8wWdU8iopbw==","originalId":245438,"description":"候補にC#があるならC#でやりたい。","facebookUrl":null,"githubUrl":"https://github.com/shuheydev","isBlockingViewer":false,"isFollowableByViewer":true,"isFollowedByViewer":false,"isTweetWebNotificationReceivable":true,"linkedinUrl":null,"name":"shuhey","profileImageUrl":"https://qiita-image-store.s3.amazonaws.com/0/245438/profile-images/1531297829","profileImageUrlW48":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F245438%2Fprofile-images%2F1531297829?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=48\u0026s=c6fa6f53c0aff2e7b65019d5f495012f","profileImageUrlW75":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F245438%2Fprofile-images%2F1531297829?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=aa564931c8d2f750f4ea78e0caa8eb36","urlName":"shuhey","websiteUrl":"","twitterUrl":"https://twitter.com/shuhey_commu","twitterUrlName":"shuhey_commu","revealedOrganizations":{"edges":[]}},"tags":[{"name":"C#","urlName":"csharp"},{"name":"DynamoDB","urlName":"dynamodb"},{"name":"Alexa","urlName":"alexa"}],"followingLikers":{"edges":[]},"comments":{"totalCount":0}},"comments":[],"client":null,"ads_event_emitter":null}}</script>
