<!DOCTYPE html><html><head><meta charset="utf-8" /><title>やさしいチャットボットのつくりかた -4.Twitterからつぶやきをとってきてみよう！ - Qiita</title><meta content="width=device-width,initial-scale=1,shrink-to-fit=no,viewport-fit=cover" name="viewport" /><meta content="#55c500" name="theme-color" /><meta content="XWpkTG32-_C4joZoJ_UsmDUi-zaH-hcrjF6ZC_FoFbk" name="google-site-verification" /><meta content="telephone=no" name="format-detection" /><link rel="canonical" href="https://qiita.com/miokawa/items/eb9f16220a36f65d7098" /><link href="/manifest.json" rel="manifest" /><link href="/opensearch.xml" rel="search" title="Qiita" type="application/opensearchdescription+xml" /><link as="script" href="https://www.googletagservices.com/tag/js/gpt.js" rel="preload" /><link href="https://securepubads.g.doubleclick.net" rel="preconnect" /><script async="" src="https://www.googletagservices.com/tag/js/gpt.js"></script><meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="Wb8ri380f/POs44+FACN37VdyL67WiplXjhF7XJe75A8wkCLEcLKeRvLp/mnlqOz2CPqUlTH9i1xGVoC8H10jw==" /><link rel="shortcut icon" type="image/x-icon" href="https://cdn.qiita.com/assets/favicons/public/production-c620d3e403342b1022967ba5e3db1aaa.ico" /><link rel="apple-touch-icon" type="image/png" href="https://cdn.qiita.com/assets/favicons/public/apple-touch-icon-ec5ba42a24ae923f16825592efdc356f.png" /><link rel="stylesheet" media="all" href="https://cdn.qiita.com/assets/public/article-2eaa7dbedc42a8ea65c722cda46d0ebb.min.css" /><script src="https://cdn.qiita.com/assets/public/v3-article-bundle-63de2d91fef827269d3f6b958db2335b.min.js" defer="defer"></script><meta name="twitter:card" content="summary_large_image"><meta content="@Qiita" name="twitter:site" /><meta property="og:type" content="article"><meta property="og:title" content="やさしいチャットボットのつくりかた -4.Twitterからつぶやきをとってきてみよう！ - Qiita"><meta property="og:image" content="https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0&amp;w=1200&amp;mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND00NEtFNDRHVjQ0R1g0NEdFNDRPQjQ0T2o0NE9ENDRPSTQ0T2M0NE9ENDRPSTQ0R3U0NEdrNDRHUDQ0S0s0NEdMNDRHZklDMDBMbFIzYVhSMFpYTGpnWXZqZ29uamdhVGpnYmJqZ29UamdZM2pncExqZ2FqamdhUGpnYWJqZ1kzamdhYmpnYl9qZ29qamdZYnZ2SUUmdHh0LWNvbG9yPSUyMzMzMyZ0eHQtZm9udD1IaXJhZ2lubyUyMFNhbnMlMjBXNiZ0eHQtc2l6ZT01NCZ0eHQtY2xpcD1lbGxpcHNpcyZ0eHQtYWxpZ249Y2VudGVyJTJDbWlkZGxlJnM9YmM2MmY5Nzc1OWRjYzBmMDgzNDZhMDMyNTkwYzVlODc&amp;mark-align=center%2Cmiddle&amp;blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RRzFwYjJ0aGQyRSZ0eHQtY29sb3I9JTIzMzMzJnR4dC1mb250PUhpcmFnaW5vJTIwU2FucyUyMFc2JnR4dC1zaXplPTQ1JnR4dC1hbGlnbj1yaWdodCUyQ2JvdHRvbSZzPTFlY2IyYjM2MmVkYWYxNTc0OGY2ZjE1YjBmZDQwOGUw&amp;blend-align=center%2Cmiddle&amp;blend-mode=normal&amp;s=576402d844cb8990ae271c0304f2a91d"><meta property="og:description" content="

どういう記事？

Azure素人の自分がMicrosoft AzureのBot FrameworkとCognitive Serviceと触れ合いながら、難易度も人への接し方も“やさしい”チャットボットを作ってみた際の備忘録の第4部..."><meta content="https://qiita.com/miokawa/items/eb9f16220a36f65d7098" property="og:url" /><meta content="Qiita" property="og:site_name" /><meta content="564524038" property="fb:admins" /><meta content="C#,Twitter,Azure,初心者,BotFramework" name="keywords" /><script>!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window, document,'script',
'https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '668972150489891');
fbq('track', 'PageView');</script><style data-emotion-css="17jxvjw 11t2ec1 1dvr2p8 18lkoru 1g4cku8 1iupg5d ijvq0v 15cocm3 12rp90f 115f4t 1b8uj5v 79elbk 16hhh7b fcbn8c 1gj7nt 154zy0m yikrym 1jqivyb 1ode1bp le4d8r 1hbd3g7 1nzh4zz 38fzdi helsa7 8qb8m4 2imjyh he5w1s 70qvj9 3ojehk 100alwu 1dtnjt5 10ougpm 1ay9vb9 m19uds cgzq40 1wa99t2 1l3zk9f 4czcte 1yzj1fm 1uv1qiv 109dbrr 5jpx49 mnxgyc 1vlpknv fsjkhv 1b17vb0 7i7f4d"}>.css-17jxvjw{display:grid;display:-ms-grid;grid-template-columns:80px minmax(0,1fr) 300px;-ms-grid-columns:80px minmax(0,1fr) 300px;grid-template-rows:minmax(270px,auto) 1fr;-ms-grid-rows:minmax(270px,auto) 1fr;max-width:1280px;margin-right:auto;margin-left:auto;padding-top:24px;padding-right:24px;padding-left:24px;}@media (max-width:1200px){.css-17jxvjw{padding-bottom:0;padding-left:0;padding-right:0;}}@media (max-width:992px){.css-17jxvjw{grid-template-columns:80px 452px 300px;-ms-grid-columns:80px 452px 300px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}}@media (max-width:770px){.css-17jxvjw{display:block;}}@media (max-width:480px){.css-17jxvjw{padding-top:0;}}.css-11t2ec1{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;z-index:5;position:-webkit-sticky;position:sticky;top:calc(56px + 24px + 16px + 32px - 16px);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:16px;width:80px;}.css-11t2ec1:after{content:'';display:table;}.css-11t2ec1:before{content:'';display:table;}@media (max-width:770px){.css-11t2ec1{display:none;}}.css-1dvr2p8{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-18lkoru{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;background-color:#FFFFFF;}.css-1g4cku8{display:inline-block;vertical-align:middle;height:20px;width:20px;fill:#55C500;}.css-1iupg5d{color:#55C500;cursor:pointer;font-size:14px;font-weight:bold;}.css-ijvq0v{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-15cocm3{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#FFFFFF;border:2px solid #6E6F70;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:2px 0px 0px;width:40px;}.css-12rp90f{display:inline-block;vertical-align:bottom;height:17.77777777777778px;width:16px;fill:#6E6F70;}.css-115f4t{color:#6E6F70;font-size:14px;font-weight:bold;}.css-1b8uj5v{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;margin-bottom:16px;padding:0;}.css-79elbk{position:relative;}.css-16hhh7b{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;padding:0;}.css-fcbn8c{display:none;bottom:initial;left:initial;right:initial;top:initial;left:100%;top:calc(-8px - (14px * 1.8) - 16px - 4px);}.css-1gj7nt{color:rgba(0,0,0,0.6);font-size:14px;font-weight:bold;line-height:1.8;padding:8px 16px;}.css-154zy0m{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.87);cursor:pointer;font-size:16px;font-weight:normal;line-height:1.8;padding:4px 16px;}.css-154zy0m:hover{-webkit-text-decoration:none;text-decoration:none;background-color:#F2F2F2;}.css-yikrym{width:20px;}.css-1jqivyb{color:rgba(0,0,0,0.6);font-size:13px;}.css-1ode1bp{background-color:rgba(0,0,0,0.12);height:1px;width:100%;margin:8px 0;}.css-le4d8r{display:inline-block;vertical-align:middle;height:13px;width:13px;fill:rgba(0,0,0,0.6);}.css-1hbd3g7{height:250px;}.css-1nzh4zz{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:16px 32px;background-color:#FBE69E;color:rgba(0,0,0,0.87);line-height:1.5;font-weight:600;}@media (max-width:770px){.css-1nzh4zz{padding:16px;}}.css-38fzdi{color:#CA832A;margin-right:4px;}.css-helsa7{background-color:#FFFFFF;padding:32px;margin-bottom:24px;}@media (max-width:992px){.css-helsa7{margin:0 auto 40px;}}@media (max-width:480px){.css-helsa7{margin:0 0 40px;padding:32px 16px;}}.css-8qb8m4{margin-bottom:48px;}.css-2imjyh{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-he5w1s{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;width:100%;}@media (max-width:770px){.css-he5w1s{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}}.css-70qvj9{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.css-3ojehk{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;margin-right:4px;}.css-100alwu{display:inline-block;border-radius:50%;line-height:1;overflow:hidden;vertical-align:middle;}.css-1dtnjt5{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-10ougpm{color:rgba(0,0,0,0.87);font-size:14px;font-weight:600;line-height:1.8;margin-right:4px;text-wrap:break-word;word-break:break-all;}.css-1ay9vb9{margin-right:16px;}.css-m19uds{color:rgba(0,0,0,0.6);font-size:14px;line-height:1.8;}.css-cgzq40{color:rgba(0,0,0,0.87);font-size:32px;font-weight:bold;line-height:1.4;margin-top:8px;text-wrap:break-word;word-break:break-all;}.css-1wa99t2{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.6);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:8px;}.css-1l3zk9f{color:rgba(0,0,0,0.6);font-size:20px;margin-right:8px;}.css-4czcte{margin-right:4px;color:inherit;font-size:14px;line-height:1.8;}.css-4czcte:not(:last-child)::after{content:',';margin-right:4px;}.css-1yzj1fm{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:32px;}.css-1uv1qiv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-size:20px;height:32px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin-right:16px;outline:none;padding:0;width:32px;}.css-109dbrr{background-color:#F9F9F9;border-top:1px solid rgba(0,0,0,0.12);bottom:0;box-shadow:0px 1px 4px rgba(0,0,0,0.14);display:none;height:calc(env(safe-area-inset-bottom,0px) + 56px);-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding-bottom:env(safe-area-inset-bottom);position:-webkit-sticky;position:sticky;width:100%;z-index:2000;}@media (max-width:770px){.css-109dbrr{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}.css-5jpx49{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:space-evenly;-webkit-justify-content:space-evenly;-ms-flex-pack:space-evenly;justify-content:space-evenly;width:100%;}.css-mnxgyc{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1vlpknv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;margin-right:4px;background-color:#FFFFFF;}.css-fsjkhv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1b17vb0{color:#6E6F70;font-size:14px;font-weight:bold;margin-left:4px;}.css-7i7f4d{display:none;bottom:initial;left:initial;right:initial;top:initial;bottom:32px;right:0;}</style></head><body><div class="allWrapper"><div><div id="GlobalHeader-react-component-d7230ec6-c069-4338-b5d5-455c228a161a"><div class="st-Header"><div class="st-Header_container"><div class="st-Header_start"><a href="/" class="st-Header_logo"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 426.57 130"><circle cx="167.08" cy="21.4" r="12.28"></circle><path d="M250.81 29.66h23.48v18.9h-23.48z"></path><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z"></path><circle cx="216.33" cy="21.4" r="12.28"></circle></svg></a><div class="st-Header_communitySelector" tabindex="0"><span class="fa fa-caret-down"></span></div><div class="st-Header_dropdown"><div class="st-Header_dropdownHeading">Qiita Teams that are logged in</div><div class="st-Header_dropdownItemNote">You are not logged in to any team</div><hr class="st-Header_dropdownDivider st-Header_dropdownDivider-shrink"/><a href="https://teams-center.qiita.com/find_team" class="st-Header_dropdownItem"><span class="fa fa-fw fa-sign-in st-Header_dropdownItemIcon"></span><div>Log in to Qiita Team</div></a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Community</div><a href="/organizations" class="st-Header_dropdownItem">Organization</a><a href="/official-events/open" class="st-Header_dropdownItem">Event</a><a href="/advent-calendar" class="st-Header_dropdownItem">Advent Calendar</a><a href="https://qiitadon.com/" class="st-Header_dropdownItem" target="_blank">Qiitadon (β)</a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Service</div><a href="https://jobs.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Jobs</a><a href="https://zine.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Zine</a><a href="https://blog.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Blog</a></div><form class="st-Header_search" action="/search" method="get"><span class="fa fa-search st-Header_searchIcon"></span><input type="search" class="st-Header_searchInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form><form class="st-Header_searchModal" action="/search" method="get"><input type="text" class="st-Header_searchModalInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form></div><div class="st-Header_end"><div class="st-Header_searchButton"><span class="fa fa-search"></span></div><a class="st-Header_signupButton" href="/signup?redirect_to=%2Fmiokawa%2Fitems%2Feb9f16220a36f65d7098">Signup</a><a class="st-Header_loginLink" href="/login?redirect_to=%2Fmiokawa%2Fitems%2Feb9f16220a36f65d7098">Login</a></div><div class="st-Header_overlay"></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="GlobalHeader" data-dom-id="GlobalHeader-react-component-d7230ec6-c069-4338-b5d5-455c228a161a">{"unreadNotificationsCount":null,"realms":[{"humanName":"Qiita","isCurrentRealm":true,"isQiita":true,"isQiitaTeam":false,"loggedInUser":null,"teamId":null,"url":"https://qiita.com/"}],"teamFindUrl":"https://teams-center.qiita.com/find_team","isTeamOnlyUser":null,"currentUser":null}</script>
      
</div><div class="st-HeaderAlert st-HeaderAlert-warning"><div class="st-HeaderAlert_body"></div></div><script type="application/ld+json">{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"/","name":"Qiita"}},{"@type":"ListItem","position":2,"item":{"@id":"/tags/csharp","name":"C#"}}]}</script><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","datePublished":"2020-03-16T20:35:20.000+09:00","dateModified":"2020-07-01T13:15:02.000+09:00","headline":"やさしいチャットボットのつくりかた -4.Twitterからつぶやきをとってきてみよう！","image":"https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0\u0026w=1200\u0026mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND00NEtFNDRHVjQ0R1g0NEdFNDRPQjQ0T2o0NE9ENDRPSTQ0T2M0NE9ENDRPSTQ0R3U0NEdrNDRHUDQ0S0s0NEdMNDRHZklDMDBMbFIzYVhSMFpYTGpnWXZqZ29uamdhVGpnYmJqZ29UamdZM2pncExqZ2FqamdhUGpnYWJqZ1kzamdhYmpnYl9qZ29qamdZYnZ2SUUmdHh0LWNvbG9yPSUyMzMzMyZ0eHQtZm9udD1IaXJhZ2lubyUyMFNhbnMlMjBXNiZ0eHQtc2l6ZT01NCZ0eHQtY2xpcD1lbGxpcHNpcyZ0eHQtYWxpZ249Y2VudGVyJTJDbWlkZGxlJnM9YmM2MmY5Nzc1OWRjYzBmMDgzNDZhMDMyNTkwYzVlODc\u0026mark-align=center%2Cmiddle\u0026blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RRzFwYjJ0aGQyRSZ0eHQtY29sb3I9JTIzMzMzJnR4dC1mb250PUhpcmFnaW5vJTIwU2FucyUyMFc2JnR4dC1zaXplPTQ1JnR4dC1hbGlnbj1yaWdodCUyQ2JvdHRvbSZzPTFlY2IyYjM2MmVkYWYxNTc0OGY2ZjE1YjBmZDQwOGUw\u0026blend-align=center%2Cmiddle\u0026blend-mode=normal\u0026s=576402d844cb8990ae271c0304f2a91d","mainEntityOfPage":"https://qiita.com/miokawa/items/eb9f16220a36f65d7098","author":{"@type":"Person","address":"","email":null,"identifier":"miokawa","name":"miokawa","image":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fs3-ap-northeast-1.amazonaws.com%2Fqiita-image-store%2F0%2F596292%2F346cc83b2697e6eaa947a5915180be31b80cb7d8%2Fx_large.png%3F1585988714?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=5216fd04905579dff5d84d10686f7db3","url":"https://qiita.com/miokawa","description":"趣味でちょっとコードを書いたり、アプリを作ってみたりしています。","memberOf":[]},"publisher":{"@type":"Organization","name":"Qiita","logo":{"@type":"ImageObject","url":"//cdn.qiita.com/assets/public/qiita-logo-c39ded593afa388e2e1ba435b110554e.png"}}}</script><style type="text/css">.wb-CampaignLink {
  background-color: #333333;
  width: 100%;
}

.wb-CampaignLink_container {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  max-width: 1100px;
  margin: 0 auto;
  font-size: 13px;
  padding: 0.8em;
}
.wb-CampaignLink_container > a {
  color: #fff;
}

.wb-CampaignLink_container > a:hover {
  text-decoration: underline;
}</style><div class="wb-CampaignLink"><div class="wb-CampaignLink_container"><a target="_blank" id="header_text_message_1" href="https://increments.connpass.com/event/211948/">Qiita創業者海野氏登壇！Qiita エンジニアフェスタ 2021 Online Meetupを9/9(木)に開催</a><a target="_blank" id="header_text_message_2" href="https://increments.connpass.com/event/211948/">詳しくはこちら</a></div><script>td.trackEvent(
  'front_events',
  {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"miokawa","type":"items","id":"eb9f16220a36f65d7098"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Show","data":{"message":"Qiita創業者海野氏登壇！Qiita エンジニアフェスタ 2021 Online Meetupを9/9(木)に開催","url":"https://increments.connpass.com/event/211948/","sub_message":"詳しくはこちら"}}
)</script><script>document.getElementById('header_text_message_1').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"miokawa","type":"items","id":"eb9f16220a36f65d7098"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":1,"pos_id":"header_text_message_1","message":"Qiita創業者海野氏登壇！Qiita エンジニアフェスタ 2021 Online Meetupを9/9(木)に開催","url":"https://increments.connpass.com/event/211948/","sub_message":"詳しくはこちら"}}
  )
})</script><script>document.getElementById('header_text_message_2').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"miokawa","type":"items","id":"eb9f16220a36f65d7098"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":1,"pos_id":"header_text_message_2","message":"Qiita創業者海野氏登壇！Qiita エンジニアフェスタ 2021 Online Meetupを9/9(木)に開催","url":"https://increments.connpass.com/event/211948/","sub_message":"詳しくはこちら"}}
  )
})</script></div><script type="application/json" id="js-react-on-rails-context">{"railsEnv":"production","inMailer":false,"i18nLocale":"en","i18nDefaultLocale":"en","href":"https://qiita.com/miokawa/items/eb9f16220a36f65d7098","location":"/miokawa/items/eb9f16220a36f65d7098","scheme":"https","host":"qiita.com","port":null,"pathname":"/miokawa/items/eb9f16220a36f65d7098","search":null,"httpAcceptLanguage":null,"actionPath":"public/items#show","settings":{"analyticsTrackingId":"UA-24675221-12","assetsMap":{},"csrfToken":"vWU7LAzVgybdPXC2RNaKZRRZ/LaDfeno/VZFXWX5cQbYGFAsYiM2rAhFWXH3QKQJeSfeWmzgNaDSd1qy59rqGQ==","locale":"en"},"currentUser":null,"isLoggedIn":false,"recaptchaSiteKey":"6LfNkiQTAAAAAM3UGnSquBy2akTITGNMO_QDxMw6","serverSide":false}</script>
<div id="PersonalArticlePage-react-component-53e59a65-578b-4ef4-b949-caeed714d907"><div class="p-items_wrapper"><div class=" css-17jxvjw"><div class="css-11t2ec1"><div class="css-1dvr2p8"><button class=" css-18lkoru"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/miokawa/items/eb9f16220a36f65d7098/likers" class="css-1iupg5d">0</a></div><div class="css-ijvq0v"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-115f4t">0</span></div><div class="css-1b8uj5v"><span class="fa fa-twitter"></span></div><div class="css-1b8uj5v"><span class="fa fa-facebook"></span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-fcbn8c"><div class="css-1gj7nt">Improve article</div><a href="/drafts/eb9f16220a36f65d7098/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/miokawa/items/eb9f16220a36f65d7098/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/miokawa/items/eb9f16220a36f65d7098/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/miokawa/items/eb9f16220a36f65d7098/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/miokawa/items/eb9f16220a36f65d7098.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div><div class="p-items_options"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_toc"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_main"><div class="css-1nzh4zz"><span class="fa fa-fw fa-warning css-38fzdi"></span><p>More than 1 year has passed since last update.</p></div><div class="css-helsa7"><div class="css-8qb8m4"><div class="css-2imjyh"><div class="css-he5w1s"><div class="css-70qvj9"><div class="css-3ojehk"><a href="/miokawa"><img class="css-100alwu eyfquo10" src="https://s3-ap-northeast-1.amazonaws.com/qiita-image-store/0/596292/346cc83b2697e6eaa947a5915180be31b80cb7d8/x_large.png?1585988714" width="24" height="24" loading="lazy"/></a></div><div class="css-1dtnjt5"><a href="/miokawa" class="css-10ougpm">@<!-- -->miokawa</a><div class="css-1ay9vb9"><span><meta content="2020-03-16T11:35:20Z"/><time dateTime="2020-07-01T04:15:02Z" class="css-m19uds">updated at 2020-07-01</time></span></div></div></div></div></div><h1 class="css-cgzq40">やさしいチャットボットのつくりかた -4.Twitterからつぶやきをとってきてみよう！</h1><div class="css-1wa99t2"><span class="fa fa-tags mr-1of2 css-1l3zk9f" aria-hidden="true"></span><a href="/tags/csharp" class="css-4czcte">C#</a><a href="/tags/twitter" class="css-4czcte">Twitter</a><a href="/tags/azure" class="css-4czcte">Azure</a><a href="/tags/%e5%88%9d%e5%bf%83%e8%80%85" class="css-4czcte">初心者</a><a href="/tags/botframework" class="css-4czcte">BotFramework</a></div></div><section class="it-MdContent"><div id="personal-public-article-body"><div>
<h1>
<span id="どういう記事" class="fragment"></span><a href="#%E3%81%A9%E3%81%86%E3%81%84%E3%81%86%E8%A8%98%E4%BA%8B"><i class="fa fa-link"></i></a>どういう記事？</h1>

<p>Azure素人の自分がMicrosoft AzureのBot FrameworkとCognitive Serviceと触れ合いながら、難易度も人への接し方も<strong>“やさしい”</strong>チャットボットを作ってみた際の備忘録の第4部です。どんなチャットボットを作るのかを含め、これまでの手順は<a href="https://qiita.com/miokawa/private/6f1a3e480580e1e29abc" id="reference-87f9c8d59b5414902300">第1部</a>、<a href="https://qiita.com/miokawa/private/c71f9f4b62ce2b1c2864" id="reference-d076d6ae36b5c418aee6">第2部</a>、<a href="https://qiita.com/miokawa/private/cdb243401fe3c8d9d583" id="reference-2d9f4daf52265ecc44bd">第3部</a>にございます。<br>
PowerPointで記録していたものをQiita化してみたものになるので、そんな感じの画像が頻出します。<br>
Qiita初心者なので、書き方が下手でも広い心で許してほしいです。そして全体的にゆるいです。</p>

<h1>
<span id="アジェンダ" class="fragment"></span><a href="#%E3%82%A2%E3%82%B8%E3%82%A7%E3%83%B3%E3%83%80"><i class="fa fa-link"></i></a>アジェンダ</h1>

<p>以下の5部構成になります。この記事は第4部にあたります。</p>

<ol>
<li><a href="https://qiita.com/miokawa/private/6f1a3e480580e1e29abc">Bot Frameworkでチャットボットを作ってみよう！</a></li>
<li><a href="https://qiita.com/miokawa/private/c71f9f4b62ce2b1c2864">ボットをAzure（クラウド）にデプロイしてみよう！</a></li>
<li><a href="https://qiita.com/miokawa/private/cdb243401fe3c8d9d583">Cognitive Serviceでテキスト分析をしてみよう！</a></li>
<li>
<a href="https://qiita.com/miokawa/private/eb9f16220a36f65d7098">Twitterからつぶやきをとってきてみよう！</a><strong>←イマココ</strong>
</li>
<li><a href="https://qiita.com/miokawa/private/c6f0b550f8fa41a23228" id="reference-629e7017a66217292f5d">LINE経由でボットと話してみよう！</a></li>
</ol>

<p>なお、公式ドキュメントに沿って作りましたので、それらのリンクを張り付けつつ、辿った道筋通りに書いていきます。<br>
その筋の方からすると遠回りだったり野暮ったかったりすると思いますが、ご容赦ください。</p>

<h1>
<span id="2-twitterからつぶやきをとってきてみよう" class="fragment"></span><a href="#2-twitter%E3%81%8B%E3%82%89%E3%81%A4%E3%81%B6%E3%82%84%E3%81%8D%E3%82%92%E3%81%A8%E3%81%A3%E3%81%A6%E3%81%8D%E3%81%A6%E3%81%BF%E3%82%88%E3%81%86"><i class="fa fa-link"></i></a>2. Twitterからつぶやきをとってきてみよう！</h1>

<p>これまで、<a href="https://qiita.com/miokawa/private/6f1a3e480580e1e29abc">第1部</a>で作ったチャットボットのソースコードを、<a href="https://qiita.com/miokawa/private/c71f9f4b62ce2b1c2864">第2部</a>でAzure（クラウド）上へデプロイし、ユーザーから受け取ったコメントを<a>Azure Cognitive Service</a>の<a href="https://azure.microsoft.com/ja-jp/services/cognitive-services/text-analytics/" rel="nofollow noopener" target="_blank">Text Analytics</a>を使って、ネガティブorポジティブの判定をしてみました。今回は、図中の赤枠部分、Text Analyticsの判定結果がネガティブだった場合、Twitterで偉人さんのありがたいお言葉をつぶやく<a href="https://twitter.com/hagemasi1_bot" rel="nofollow noopener" target="_blank">励ましBotさん</a>のつぶやきをランダムに選択し、ユーザーに返してあげる部分を作っていこうと思います。<br>
<a href="https://camo.qiitausercontent.com/0c0aa696e9a37524ad1cb7a64ecc07b662e1ac44/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3539363239322f33346638383066392d643864652d623564302d343134332d3739303437386330626331632e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F596292%2F34f880f9-d8de-b5d0-4143-790478c0bc1c.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=3039d4ff64d6c0c4e4c345b3fb71cb87" alt="image.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/596292/34f880f9-d8de-b5d0-4143-790478c0bc1c.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F596292%2F34f880f9-d8de-b5d0-4143-790478c0bc1c.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=be1816811e2be2033c73b02bb44543f1 1x" loading="lazy"></a></p>

<h2>
<span id="21-事前準備" class="fragment"></span><a href="#21-%E4%BA%8B%E5%89%8D%E6%BA%96%E5%82%99"><i class="fa fa-link"></i></a>2.1 事前準備</h2>

<h4>
<span id="twitter-developer登録" class="fragment"></span><a href="#twitter-developer%E7%99%BB%E9%8C%B2"><i class="fa fa-link"></i></a>Twitter Developer登録</h4>

<p>Twitterの各種APIを使うためには、Developer登録が必要となります。審査に数日かかるようです。<br>
<a href="https://maipyon.net/twitter-developer-account/" rel="nofollow noopener" target="_blank">こちら</a>にDeveloper登録について、詳しく書かれているので参考にしてください。<br>
<font color="red">手順中で、Access tokenとaccess token secretが生成されますので、忘れずにメモをしておいてください。後々使います。</font></p>

<h4>
<span id="coretweetインストール" class="fragment"></span><a href="#coretweet%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB"><i class="fa fa-link"></i></a>CoreTweetインストール</h4>

<p>C#からTwitterAPI を扱うためのライブラリである、CoreTweetのインストールをします。<a href="https://qiita.com/miokawa/private/cdb243401fe3c8d9d583#23-text-analytics%E3%81%AE%E8%A8%AD%E5%AE%9A" id="reference-2d9f4daf52265ecc44bd">第3部のTextAnalyticsの設定</a>でも実施したパッケージのインストールをします。検索ボックスで<code>CoreTweet</code>と検索して、インストールを実行します。</p>

<p><a href="https://camo.qiitausercontent.com/b40361b598ca6010e80fedd617e50d5a5cc04dd3/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3539363239322f65356633346532642d326432622d343035322d363439612d3462303362653831643737642e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F596292%2Fe5f34e2d-2d2b-4052-649a-4b03be81d77d.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=12eaacfc1f6f33811ab0212c9b98e980" alt="image.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/596292/e5f34e2d-2d2b-4052-649a-4b03be81d77d.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F596292%2Fe5f34e2d-2d2b-4052-649a-4b03be81d77d.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=6d3f0b0356e4ea56b189894fa4fb32c0 1x" loading="lazy"></a></p>

<h2>
<span id="22-sentimentanalysisexampleメソッドから分析スコアを返す" class="fragment"></span><a href="#22-sentimentanalysisexample%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E3%81%8B%E3%82%89%E5%88%86%E6%9E%90%E3%82%B9%E3%82%B3%E3%82%A2%E3%82%92%E8%BF%94%E3%81%99"><i class="fa fa-link"></i></a>2.2 sentimentAnalysisExampleメソッドから分析スコアを返す</h2>

<p><a href="https://qiita.com/miokawa/private/cdb243401fe3c8d9d583">第3部</a>で作成したソースコードを前提に、必要な変更を加えていきます。まずは、ユーザーのメッセージをText Analyticsリソースに投げて分析しているsentimentAnalysisExampleメソッドが、呼び出し元に分析結果のスコアを返すようにコードを変更します。</p>

<div class="code-frame" data-lang="cs">
<div class="code-lang"><span class="bold">EchoBot.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">static</span> <span class="kt">double</span> <span class="nf">sentimentAnalysisExample</span><span class="p">(</span><span class="n">ITextAnalyticsClient</span> <span class="n">client</span><span class="p">,</span> <span class="kt">string</span> <span class="n">message</span><span class="p">)</span><span class="c1">//戻り値をvoidからdouble型に変更</span>
<span class="p">{</span>
     <span class="kt">var</span> <span class="n">result</span> <span class="p">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">Sentiment</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="s">"ja"</span><span class="p">);</span><span class="c1">//引数messageを分析対象にし、言語は日本語に設定</span>
     <span class="n">Debug</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">$"User Message: </span><span class="p">{</span><span class="n">message</span><span class="p">}</span><span class="s">"</span><span class="p">);</span><span class="c1">//引数messageの内容を出力</span>
     <span class="n">Debug</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">$"Sentiment Score1: </span><span class="p">{</span><span class="n">result</span><span class="p">.</span><span class="n">Score</span><span class="p">:</span><span class="m">0.00</span><span class="p">}</span><span class="s">"</span><span class="p">);</span><span class="c1">//出力確認1</span>
     <span class="k">return</span> <span class="p">(</span><span class="kt">double</span><span class="p">)</span><span class="n">result</span><span class="p">.</span><span class="n">Score</span><span class="p">;</span><span class="c1">//分析スコアを返す</span>
<span class="p">}</span>
</code></pre></div>
</div>

<p>呼び出し側でも戻り値を格納する変数を用意する必要がありますので、OnMessageActivityAsync内でsentimentAnalysisExampleの部分に以下の通り変更を加えます。Debug.WriteLineは値の受け渡しが正常にできているかの確認のための出力です。</p>

<div class="code-frame" data-lang="cs">
<div class="code-lang"><span class="bold">EchoBot.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="kt">var</span> <span class="n">score</span> <span class="p">=</span> <span class="nf">sentimentAnalysisExample</span><span class="p">(</span><span class="n">client</span><span class="p">,</span><span class="n">turnContext</span><span class="p">.</span><span class="n">Activity</span><span class="p">.</span><span class="n">Text</span><span class="p">);</span><span class="c1">//戻り値を格納するためscoreを用意Debug.WriteLine($"Sentiment Score2: {score:0.00}");//出力確認2</span>
</code></pre></div>
</div>

<h2>
<span id="23-スコアを元に条件分岐をする" class="fragment"></span><a href="#23-%E3%82%B9%E3%82%B3%E3%82%A2%E3%82%92%E5%85%83%E3%81%AB%E6%9D%A1%E4%BB%B6%E5%88%86%E5%B2%90%E3%82%92%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>2.3 スコアを元に条件分岐をする</h2>

<p>Text Analyticsでは0~1の間の値を返します。1に近いほどポジティブで、0に近いほどネガティブな判定という意味となります。<br>
今回は、スコアが0.5以上の場合はポジティブとみなして塩対応し、0.5未満の場合はTwitterからありがたいお言葉をとってきたいと思いますので、OnMessageActivityAsync内で条件分岐をし、それぞれの場合でDebug.WriteLineで出力確認をしたいと思います。<br>
今までのOnMessageActivityAsyncに対する変更をまとめると以下の通りとなります。</p>

<div class="code-frame" data-lang="cs">
<div class="code-lang"><span class="bold">EchoBot.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">protected</span> <span class="k">override</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">OnMessageActivityAsync</span><span class="p">(</span><span class="n">ITurnContext</span><span class="p">&lt;</span><span class="n">IMessageActivity</span><span class="p">&gt;</span> <span class="n">turnContext</span><span class="p">,</span> <span class="n">CancellationToken</span> <span class="n">cancellationToken</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">var</span> <span class="n">replyText</span> <span class="p">=</span> <span class="s">$"Echo: </span><span class="p">{</span><span class="n">turnContext</span><span class="p">.</span><span class="n">Activity</span><span class="p">.</span><span class="n">Text</span><span class="p">}</span><span class="s">"</span><span class="p">;</span>
    <span class="k">await</span> <span class="n">turnContext</span><span class="p">.</span><span class="nf">SendActivityAsync</span><span class="p">(</span><span class="n">MessageFactory</span><span class="p">.</span><span class="nf">Text</span><span class="p">(</span><span class="n">replyText</span><span class="p">,</span> <span class="n">replyText</span><span class="p">),</span> <span class="n">cancellationToken</span><span class="p">);</span>

    <span class="c1">//for TextAnalytics</span>
    <span class="kt">var</span> <span class="n">client</span> <span class="p">=</span> <span class="nf">authenticateClient</span><span class="p">();</span>
    <span class="kt">var</span> <span class="n">score</span> <span class="p">=</span> <span class="nf">sentimentAnalysisExample</span><span class="p">(</span><span class="n">client</span><span class="p">,</span><span class="n">turnContext</span><span class="p">.</span><span class="n">Activity</span><span class="p">.</span><span class="n">Text</span><span class="p">);</span><span class="c1">//戻り値を格納するためscoreを用意</span>
    <span class="n">Debug</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">$"Sentiment Score2: </span><span class="p">{</span><span class="n">score</span><span class="p">:</span><span class="m">0.00</span><span class="p">}</span><span class="s">"</span><span class="p">);</span><span class="c1">//出力確認2</span>

    <span class="k">if</span><span class="p">(</span><span class="m">0.5</span> <span class="p">&lt;=</span> <span class="n">score</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">Debug</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">$"塩対応"</span><span class="p">);</span><span class="c1">//出力確認3</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="n">Debug</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">$"励まし対応"</span><span class="p">);</span><span class="c1">//出力確認4</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<p>一度実行して試してみましょう。ボットに話しかけたメッセージと、そのスコア（2回）、スコアに応じた対応内容が出力されていればOKです。<br>
<a href="https://camo.qiitausercontent.com/777420efc3df5c2bb307fab85c45c9c97e26cde8/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3539363239322f38376233303466652d396136312d643339662d366432362d3533636366393161333232632e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F596292%2F87b304fe-9a61-d39f-6d26-53ccf91a322c.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=1c9c71bda8e26820430534355e88a000" alt="image.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/596292/87b304fe-9a61-d39f-6d26-53ccf91a322c.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F596292%2F87b304fe-9a61-d39f-6d26-53ccf91a322c.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=265028371a1aa6a72cc13a9279cbc10c 1x" loading="lazy"></a></p>

<h2>
<span id="24-励まし対応twitter連携部分を作る" class="fragment"></span><a href="#24-%E5%8A%B1%E3%81%BE%E3%81%97%E5%AF%BE%E5%BF%9Ctwitter%E9%80%A3%E6%90%BA%E9%83%A8%E5%88%86%E3%82%92%E4%BD%9C%E3%82%8B"><i class="fa fa-link"></i></a>2.4 励まし対応（Twitter連携）部分を作る</h2>

<p>ちゃんとスコアを受け取り、条件分岐できていることが確認できたので、いよいよTwitterとの連携部分を作っていきます。<a href="#%E4%BA%8B%E5%89%8D%E6%BA%96%E5%82%99">事前準備</a>でインストールしたCoreTweetを使うので、以下の通りソースコードの上の方（usingほげほげがあるところ）に追加します。</p>

<div class="code-frame" data-lang="cs">
<div class="code-lang"><span class="bold">EchoBot.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">using</span> <span class="nn">CoreTweet</span><span class="p">;</span>
</code></pre></div>
</div>

<p>そしてpublic class EchoBotの中のsentimentAnalysisExampleと同じレベル（深さ）に、Twitterからツイートを取ってくるためのgetTweetメソッドを用意します。</p>

<div class="code-frame" data-lang="cs">
<div class="code-lang"><span class="bold">EchoBot.cs</span></div>
<div class="highlight"><pre class="with-code"><code> <span class="k">static</span> <span class="kt">string</span> <span class="nf">getTweet</span><span class="p">(</span><span class="kt">double</span> <span class="n">score</span><span class="p">)</span>
 <span class="p">{</span>
     <span class="n">Random</span> <span class="n">cRandom</span> <span class="p">=</span> <span class="k">new</span> <span class="n">System</span><span class="p">.</span><span class="nf">Random</span><span class="p">();</span> <span class="c1">//取得したツイートからランダムに1つ選択するための乱数</span>
     <span class="kt">var</span> <span class="n">tokens</span> <span class="p">=</span> <span class="n">Tokens</span><span class="p">.</span><span class="nf">Create</span><span class="p">(</span><span class="s">"&lt;API KEY&gt;"</span><span class="p">,</span> <span class="s">"&lt;API SECRET&gt;"</span><span class="p">,</span> <span class="s">"&lt;ACCESS TOKEN&gt;"</span><span class="p">,</span> <span class="s">"&lt;ACCESS TOKEN SECRET&gt;"</span><span class="p">);</span>  <span class="c1">//接続用トークン発行</span>
     <span class="kt">var</span> <span class="n">tweet</span> <span class="p">=</span> <span class="s">""</span><span class="p">;</span><span class="c1">//取得したツイートを格納する変数</span>

     <span class="kt">var</span> <span class="n">parm</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Dictionary</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">,</span> <span class="kt">object</span><span class="p">&gt;();</span>  <span class="c1">//条件指定用Dictionary</span>
     <span class="n">parm</span><span class="p">[</span><span class="s">"count"</span><span class="p">]</span> <span class="p">=</span> <span class="m">60</span><span class="p">;</span>  <span class="c1">//取得するツイート数</span>
     <span class="n">parm</span><span class="p">[</span><span class="s">"screen_name"</span><span class="p">]</span> <span class="p">=</span> <span class="s">"hagemasi1_bot"</span><span class="p">;</span>  <span class="c1">//取得したいユーザーID</span>


     <span class="n">Task</span> <span class="n">task</span> <span class="p">=</span> <span class="n">Task</span><span class="p">.</span><span class="n">Factory</span><span class="p">.</span><span class="nf">StartNew</span><span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="p">=&gt;</span>
     <span class="p">{</span>
          <span class="kt">var</span> <span class="n">tweets</span> <span class="p">=</span> <span class="k">await</span> <span class="n">tokens</span><span class="p">.</span><span class="n">Statuses</span><span class="p">.</span><span class="nf">UserTimelineAsync</span><span class="p">(</span><span class="n">parm</span><span class="p">);</span> <span class="c1">//parmの内容に従ってツイートを取得</span>

          <span class="kt">var</span> <span class="n">random</span> <span class="p">=</span> <span class="n">cRandom</span><span class="p">.</span><span class="nf">Next</span><span class="p">(</span><span class="m">61</span><span class="p">);</span> <span class="c1">//0～60の間の乱数を生成</span>
          <span class="n">tweet</span> <span class="p">=</span> <span class="n">tweets</span><span class="p">[</span><span class="n">random</span><span class="p">].</span><span class="n">Text</span><span class="p">;</span> <span class="c1">//取得した60ツイートからrandom番目のツイートを格納</span>

     <span class="p">}).</span><span class="nf">Unwrap</span><span class="p">();</span>

     <span class="n">task</span><span class="p">.</span><span class="nf">Wait</span><span class="p">();</span>

     <span class="k">return</span> <span class="n">tweet</span><span class="p">;</span><span class="err">　</span><span class="c1">//選んだツイートを戻り値として返す</span>
<span class="p">}</span>
</code></pre></div>
</div>

<p>それぞれ簡単に説明していきます。</p>

<ul>
<li><p><strong>Random cRandom = new System.Random();</strong><br>
一括でとってきたツイートたちから、どれか1つを選択する際に使う乱数です。</p></li>
<li><p><strong>var tokens = Tokens.Create()</strong><br>
Twitterに接続する際のトークンです。それぞれ以下の手順で確認して、正しいものを入れていきます。</p></li>
</ul>

<p><a href="https://developer.twitter.com/" rel="nofollow noopener" target="_blank">Twitter Developerサイト</a>にアクセスし、画面の右上で、自分のTwitterアカウントより、<strong>Apps</strong>を選択します。<br>
<a href="https://camo.qiitausercontent.com/002c7c4a3052141becbf79085a891efc109c4057/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3539363239322f39343232623835322d643536352d383465382d613635392d3138323333663532353536652e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F596292%2F9422b852-d565-84e8-a659-18233f52556e.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=f2bcece8218ba3d0545c4a69f8ef16df" alt="image.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/596292/9422b852-d565-84e8-a659-18233f52556e.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F596292%2F9422b852-d565-84e8-a659-18233f52556e.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=9044f7cc9fad4c802a7a811a05346a4e 1x" loading="lazy"></a></p>

<p>該当アプリの<strong>Details</strong>ボタンをクリックします。<br>
<a href="https://camo.qiitausercontent.com/38da0ff8c37e7d7588ffab57185e776e2ec37503/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3539363239322f35353466356233332d363037312d386363322d623637332d6166393439376137316638632e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F596292%2F554f5b33-6071-8cc2-b673-af9497a71f8c.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=4cfe3f58eeec7ce2d8f079713b1b0eb9" alt="image.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/596292/554f5b33-6071-8cc2-b673-af9497a71f8c.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F596292%2F554f5b33-6071-8cc2-b673-af9497a71f8c.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=11185f4dff0ff123e35b71aba151c74b 1x" loading="lazy"></a></p>

<p><strong>Keys and tokens</strong>タブをクリックします。API keyとAPI secret keyが表示されます。Access tokenとaccess token secretについては、事前準備の<a href="#Twitter%20Developer%E7%99%BB%E9%8C%B2">Twitter Developer登録</a>でメモしておいたものを使います。もしメモし損ねてしまっていたら、<strong>Regenerate</strong>ボタンで再作成してください。<br>
<a href="https://camo.qiitausercontent.com/83179f98aa8b887f5727bb3ecd2a2e50cf1bb7f5/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3539363239322f33336166393464342d303262372d376634302d333432622d3431353531633764333965392e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F596292%2F33af94d4-02b7-7f40-342b-41551c7d39e9.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=e5b5ae8bacf53b05da95beee9c6459b6" alt="image.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/596292/33af94d4-02b7-7f40-342b-41551c7d39e9.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F596292%2F33af94d4-02b7-7f40-342b-41551c7d39e9.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=7016b960ead5c632926ae6308aa22615 1x" loading="lazy"></a></p>

<ul>
<li><p><strong>var tweet = "";</strong><br>
取得してきたツイート群から、実際にユーザーに返すものを格納する変数です。</p></li>
<li><p><strong>var parm = new Dictionary();</strong><br>
取得するツイートの条件を指定するためのDictionaryクラスです。今回は取得してくる全ツイート数（60ツイート）と、取得対象のTwitterアカウントのID（hagemasi1_bot）を指定しています。Dictionaryクラスの公式リファレンスは<a href="https://docs.microsoft.com/ja-jp/dotnet/api/system.collections.generic.dictionary-2?redirectedfrom=MSDN&amp;view=netframework-4.8" rel="nofollow noopener" target="_blank">こちら</a></p></li>
<li><p><strong>var tweets = await tokens.Statuses.UserTimelineAsync(parm);</strong><br>
直前のDictionaryクラスで指定した内容を引数にして、hagemasi1_botのツイートを60ツイート取得してきています。戻り値は取得したツイートたちです。CoreTweetの公式リファレンスは<a href="http://coretweet.github.io/docs/classCoreTweet_1_1Rest_1_1Statuses.html#a355f15e598c63dfb2b218f75a8a4097f" rel="nofollow noopener" target="_blank">こちら</a></p></li>
<li><p><strong>var random = cRandom.Next(61);</strong><br>
取得した60個のツイートから、何番目のツイートをユーザーに返すか、乱数で決めています。randomには0~60の値のいずれかが入ります。</p></li>
<li><p><strong>tweet = tweets[random].Text;</strong><br>
取得した60個のツイートのうち、random番目のものを選んで、tweet変数に格納しています。これをユーザーに返します。</p></li>
<li><p><strong>return tweet;</strong><br>
tweet変数を呼び出し元に返します。</p></li>
</ul>

<p>Twitterからツイートを取得するメソッドができたので、OnMessageActivityAsync内の条件分岐で<strong>Debug.WriteLine($"励まし対応")</strong>としていた部分からgetTweetを呼び出して、結果を出力するようにします。</p>

<div class="code-frame" data-lang="cs">
<div class="code-lang"><span class="bold">EchoBot.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">if</span><span class="p">(</span><span class="m">0.5</span> <span class="p">&lt;=</span> <span class="n">score</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">Debug</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">$"塩対応"</span><span class="p">);</span><span class="c1">//出力確認3</span>
<span class="p">}</span>
<span class="k">else</span>
<span class="p">{</span>
    <span class="kt">var</span> <span class="n">res</span> <span class="p">=</span> <span class="nf">getTweet</span><span class="p">(</span><span class="n">score</span><span class="p">);</span>
    <span class="n">Debug</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">$"励まし対応:</span><span class="p">{</span><span class="n">res</span><span class="p">}</span><span class="s">"</span><span class="p">);</span><span class="c1">//出力確認4</span>
<span class="p">}</span>
</code></pre></div>
</div>

<p>ではここでまた、実行してみましょう。できるだけネガティブな発言をボットに投げかけてくださいね。<br>
<a href="https://camo.qiitausercontent.com/24890b8b99d58c121c0a2d5a8ad68e6c52f61121/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3539363239322f39326566633831302d633464302d383663632d386538372d3233663939633161343336332e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F596292%2F92efc810-c4d0-86cc-8e87-23f99c1a4363.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=7d199956addc81d28c53570c825f8ab7" alt="image.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/596292/92efc810-c4d0-86cc-8e87-23f99c1a4363.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F596292%2F92efc810-c4d0-86cc-8e87-23f99c1a4363.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=a9eaa58517389bc063e8dcdc5271748c 1x" loading="lazy"></a></p>

<p>ネガティブ判定され、Twitterから偉人さんのありがたいお言葉を取得してくることができました！</p>

<h2>
<span id="25-塩対応部分を作る" class="fragment"></span><a href="#25-%E5%A1%A9%E5%AF%BE%E5%BF%9C%E9%83%A8%E5%88%86%E3%82%92%E4%BD%9C%E3%82%8B"><i class="fa fa-link"></i></a>2.5 塩対応部分を作る</h2>

<p>TextAnalyticsの分析スコアが0.5以上だった場合の、塩対応用メソッドgetShioCommentを、OnMessageActivityAsync内、getTweetと同じレベル（深さ）に作っていきます。こちらは特に何かと連携はせずに、コード内に書いたいくつかの塩対応フレーズからランダムに選んで返すだけのものにします。励まし対応の部分と被る要素が多いので、説明は割愛します。</p>

<div class="code-frame" data-lang="cs">
<div class="code-lang"><span class="bold">EchoBot.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">static</span> <span class="kt">string</span> <span class="nf">getShioComment</span><span class="p">()</span>
<span class="p">{</span>
   <span class="n">Random</span> <span class="n">cRandom</span> <span class="p">=</span> <span class="k">new</span> <span class="n">System</span><span class="p">.</span><span class="nf">Random</span><span class="p">();</span> <span class="c1">//乱数</span>
   <span class="kt">string</span> <span class="n">res</span> <span class="p">=</span> <span class="s">""</span><span class="p">;</span>
   <span class="kt">var</span> <span class="n">shio</span> <span class="p">=</span> <span class="k">new</span> <span class="kt">string</span><span class="p">[]</span> <span class="p">{</span> <span class="s">"へー・・・。"</span><span class="p">,</span> <span class="s">"・・・だから？"</span><span class="p">,</span> <span class="s">"知らんわー。"</span><span class="p">,</span> <span class="s">"興味ないね。"</span><span class="p">,</span> <span class="s">"いや、聞いてないし。"</span><span class="p">,</span> <span class="s">"ふーん・・・。で？"</span><span class="p">,</span> <span class="s">"そういうのいいから。"</span><span class="p">,</span> <span class="s">"あーちょっと今忙しいからまた今度。"</span><span class="p">,</span> <span class="s">"・・・けっ！"</span><span class="p">,</span> <span class="s">"リア充乙。"</span> <span class="p">};</span>

   <span class="kt">var</span> <span class="n">random</span> <span class="p">=</span> <span class="n">cRandom</span><span class="p">.</span><span class="nf">Next</span><span class="p">(</span><span class="m">11</span><span class="p">);</span>
   <span class="n">res</span> <span class="p">=</span> <span class="n">shio</span><span class="p">[</span><span class="n">random</span><span class="p">];</span>
   <span class="k">return</span> <span class="n">res</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
</div>

<p>呼び出し側も以下の通り変更します。条件分岐の塩対応部分でgetShioCommentメソッドを呼び出し、結果を出力することと、条件分岐外でres変数を定義し、塩対応、励まし対応それぞれの戻り値をres変数に格納する形にしました。</p>

<div class="code-frame" data-lang="cs">
<div class="code-lang"><span class="bold">EchoBot.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="kt">var</span> <span class="n">client</span> <span class="p">=</span> <span class="nf">authenticateClient</span><span class="p">();</span>
<span class="kt">var</span> <span class="n">score</span> <span class="p">=</span> <span class="nf">sentimentAnalysisExample</span><span class="p">(</span><span class="n">client</span><span class="p">,</span><span class="n">turnContext</span><span class="p">.</span><span class="n">Activity</span><span class="p">.</span><span class="n">Text</span><span class="p">);</span><span class="c1">//戻り値を格納するためscoreを用意</span>
<span class="kt">var</span> <span class="n">res</span> <span class="p">=</span> <span class="s">""</span><span class="p">;</span><span class="c1">//返事格納用</span>
<span class="n">Debug</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">$"Sentiment Score2: </span><span class="p">{</span><span class="n">score</span><span class="p">:</span><span class="m">0.00</span><span class="p">}</span><span class="s">"</span><span class="p">);</span><span class="c1">//出力確認2</span>

<span class="k">if</span><span class="p">(</span><span class="m">0.5</span> <span class="p">&lt;=</span> <span class="n">score</span><span class="p">)</span>
<span class="p">{</span>
   <span class="n">res</span> <span class="p">=</span> <span class="nf">getShioComment</span><span class="p">();</span>
   <span class="n">Debug</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">$"塩対応:</span><span class="p">{</span><span class="n">res</span><span class="p">}</span><span class="s">"</span><span class="p">);</span><span class="c1">//出力確認3</span>
<span class="p">}</span>
<span class="k">else</span>
<span class="p">{</span>
   <span class="n">res</span> <span class="p">=</span> <span class="nf">getTweet</span><span class="p">();</span>
   <span class="n">Debug</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">$"励まし対応:</span><span class="p">{</span><span class="n">res</span><span class="p">}</span><span class="s">"</span><span class="p">);</span><span class="c1">//出力確認4</span>
<span class="p">}</span>
</code></pre></div>
</div>

<p>それではまたここで実行してみましょう。今度はできるだけポジティブな言葉を投げかけてください。<br>
<a href="https://camo.qiitausercontent.com/f2bdbb3cbf95cc61601a0f38bee2c67697d7a5ac/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3539363239322f32383463346234612d636230312d373135392d346462352d6162313631316636303133302e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F596292%2F284c4b4a-cb01-7159-4db5-ab1611f60130.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=885499ca23dd846a9b2a590788070dc9" alt="image.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/596292/284c4b4a-cb01-7159-4db5-ab1611f60130.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F596292%2F284c4b4a-cb01-7159-4db5-ab1611f60130.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=ac82ec3a7fc3265522d3a701cc1d1bb4 1x" loading="lazy"></a></p>

<p>0.5以上のスコアで塩対応されていれば成功です！</p>

<h2>
<span id="26-ボットに発言させる" class="fragment"></span><a href="#26-%E3%83%9C%E3%83%83%E3%83%88%E3%81%AB%E7%99%BA%E8%A8%80%E3%81%95%E3%81%9B%E3%82%8B"><i class="fa fa-link"></i></a>2.6 ボットに発言させる</h2>

<p>ここまできたら、後はもう少しです！今までデバッグとして出力させていたコメントを、ボットからユーザーに発言させるようにします。<br>
まず、せっかくですので、返事に分析スコアもつけるため、score変数（小数点以下2桁まで）とres変数を連結します。<code>Environment.NewLine</code>は間で改行をするために入れています。<br>
いよいよユーザーへの発言ですが、OnMessageActivityAsync内の<code>await turnContext.SendActivityAsync(MessageFactory.Text(replyText, replyText), cancellationToken);</code>部分で、ボットはオウム返しをしていますので、この部分を以下の通り変更して、塩対応/励まし対応の条件分岐後（返事をres変数に格納した後）に持ってきます。</p>

<div class="code-frame" data-lang="cs">
<div class="code-lang"><span class="bold">EchoBot.cs</span></div>
<div class="highlight"><pre class="with-code"><code> <span class="n">res</span> <span class="p">=</span> <span class="s">$"Score:</span><span class="p">{</span><span class="n">score</span><span class="p">:</span><span class="m">0.00</span><span class="p">}</span><span class="s">"</span> <span class="p">+</span> <span class="n">Environment</span><span class="p">.</span><span class="n">NewLine</span> <span class="p">+</span> <span class="n">res</span><span class="p">;</span>
 <span class="k">await</span> <span class="n">turnContext</span><span class="p">.</span><span class="nf">SendActivityAsync</span><span class="p">(</span><span class="n">MessageFactory</span><span class="p">.</span><span class="nf">Text</span><span class="p">(</span><span class="n">res</span><span class="p">),</span> <span class="n">cancellationToken</span><span class="p">);</span>
</code></pre></div>
</div>

<p>また、オウム返しのテキストを作っている<code>var replyText = $"Echo: {turnContext.Activity.Text}";</code>は不要になるので、削除します。</p>

<p>ここまでの全ソースコードはこちらです。</p>

<div class="code-frame" data-lang="cs">
<div class="code-lang"><span class="bold">EchoBot.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="c1">// Copyright (c) Microsoft Corporation. All rights reserved.</span>
<span class="c1">// Licensed under the MIT License.</span>
<span class="c1">//</span>
<span class="c1">// Generated with Bot Builder V4 SDK Template for Visual Studio EchoBot v4.6.2</span>

<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Threading</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Threading.Tasks</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Microsoft.Bot.Builder</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Microsoft.Bot.Schema</span><span class="p">;</span>

<span class="c1">//for TextAnalytics</span>
<span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Net.Http</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Microsoft.Azure.CognitiveServices.Language.TextAnalytics</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Microsoft.Azure.CognitiveServices.Language.TextAnalytics.Models</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Microsoft.Rest</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Diagnostics</span><span class="p">;</span>

<span class="c1">//for Twitter</span>
<span class="k">using</span> <span class="nn">CoreTweet</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">YasashiiBot.Bots</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">EchoBot</span> <span class="p">:</span> <span class="n">ActivityHandler</span>
    <span class="p">{</span>
        <span class="c1">//for TextAnalytics</span>
        <span class="k">private</span> <span class="k">static</span> <span class="k">readonly</span> <span class="kt">string</span> <span class="n">key</span> <span class="p">=</span> <span class="s">"&lt;replace-with-your-text-analytics-key-here&gt;;
</span>        <span class="k">private</span> <span class="k">static</span> <span class="k">readonly</span> <span class="kt">string</span> <span class="n">endpoint</span> <span class="p">=</span> <span class="s">"&lt;replace-with-your-text-analytics-endpoint-here&gt;"</span><span class="p">;</span>

        <span class="k">protected</span> <span class="k">override</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">OnMessageActivityAsync</span><span class="p">(</span><span class="n">ITurnContext</span><span class="p">&lt;</span><span class="n">IMessageActivity</span><span class="p">&gt;</span> <span class="n">turnContext</span><span class="p">,</span> <span class="n">CancellationToken</span> <span class="n">cancellationToken</span><span class="p">)</span>
        <span class="p">{</span>

            <span class="c1">//for TextAnalytics</span>
            <span class="kt">var</span> <span class="n">client</span> <span class="p">=</span> <span class="nf">authenticateClient</span><span class="p">();</span>
            <span class="kt">var</span> <span class="n">score</span> <span class="p">=</span> <span class="nf">sentimentAnalysisExample</span><span class="p">(</span><span class="n">client</span><span class="p">,</span><span class="n">turnContext</span><span class="p">.</span><span class="n">Activity</span><span class="p">.</span><span class="n">Text</span><span class="p">);</span><span class="c1">//戻り値を格納するためscoreを用意</span>
            <span class="kt">var</span> <span class="n">res</span> <span class="p">=</span> <span class="s">""</span><span class="p">;</span><span class="c1">//返事格納用</span>
            <span class="n">Debug</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">$"Sentiment Score2: </span><span class="p">{</span><span class="n">score</span><span class="p">:</span><span class="m">0.00</span><span class="p">}</span><span class="s">"</span><span class="p">);</span><span class="c1">//出力確認2</span>

            <span class="k">if</span><span class="p">(</span><span class="m">0.5</span> <span class="p">&lt;=</span> <span class="n">score</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">res</span> <span class="p">=</span> <span class="nf">getShioComment</span><span class="p">();</span>
                <span class="n">Debug</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">$"塩対応:</span><span class="p">{</span><span class="n">res</span><span class="p">}</span><span class="s">"</span><span class="p">);</span><span class="c1">//出力確認3</span>
            <span class="p">}</span>
            <span class="k">else</span>
            <span class="p">{</span>
                <span class="n">res</span> <span class="p">=</span> <span class="nf">getTweet</span><span class="p">();</span>
                <span class="n">Debug</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">$"励まし対応:</span><span class="p">{</span><span class="n">res</span><span class="p">}</span><span class="s">"</span><span class="p">);</span><span class="c1">//出力確認4</span>
            <span class="p">}</span>

            <span class="n">res</span> <span class="p">=</span> <span class="s">$"Score:</span><span class="p">{</span><span class="n">score</span><span class="p">:</span><span class="m">0.00</span><span class="p">}</span><span class="s">"</span> <span class="p">+</span> <span class="n">Environment</span><span class="p">.</span><span class="n">NewLine</span> <span class="p">+</span> <span class="n">res</span><span class="p">;</span>
            <span class="k">await</span> <span class="n">turnContext</span><span class="p">.</span><span class="nf">SendActivityAsync</span><span class="p">(</span><span class="n">MessageFactory</span><span class="p">.</span><span class="nf">Text</span><span class="p">(</span><span class="n">res</span><span class="p">),</span> <span class="n">cancellationToken</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">protected</span> <span class="k">override</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">OnMembersAddedAsync</span><span class="p">(</span><span class="n">IList</span><span class="p">&lt;</span><span class="n">ChannelAccount</span><span class="p">&gt;</span> <span class="n">membersAdded</span><span class="p">,</span> <span class="n">ITurnContext</span><span class="p">&lt;</span><span class="n">IConversationUpdateActivity</span><span class="p">&gt;</span> <span class="n">turnContext</span><span class="p">,</span> <span class="n">CancellationToken</span> <span class="n">cancellationToken</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="kt">var</span> <span class="n">welcomeText</span> <span class="p">=</span> <span class="s">"Hello and welcome!"</span><span class="p">;</span>
            <span class="k">foreach</span> <span class="p">(</span><span class="kt">var</span> <span class="n">member</span> <span class="k">in</span> <span class="n">membersAdded</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">member</span><span class="p">.</span><span class="n">Id</span> <span class="p">!=</span> <span class="n">turnContext</span><span class="p">.</span><span class="n">Activity</span><span class="p">.</span><span class="n">Recipient</span><span class="p">.</span><span class="n">Id</span><span class="p">)</span>
                <span class="p">{</span>
                    <span class="k">await</span> <span class="n">turnContext</span><span class="p">.</span><span class="nf">SendActivityAsync</span><span class="p">(</span><span class="n">MessageFactory</span><span class="p">.</span><span class="nf">Text</span><span class="p">(</span><span class="n">welcomeText</span><span class="p">,</span> <span class="n">welcomeText</span><span class="p">),</span> <span class="n">cancellationToken</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="c1">//for TextAnalytics</span>
        <span class="k">static</span> <span class="n">TextAnalyticsClient</span> <span class="nf">authenticateClient</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="n">ApiKeyServiceClientCredentials</span> <span class="n">credentials</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">ApiKeyServiceClientCredentials</span><span class="p">(</span><span class="n">key</span><span class="p">);</span>
            <span class="n">TextAnalyticsClient</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">TextAnalyticsClient</span><span class="p">(</span><span class="n">credentials</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">Endpoint</span> <span class="p">=</span> <span class="n">endpoint</span>
            <span class="p">};</span>
            <span class="k">return</span> <span class="n">client</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="c1">//for TextAnalytics</span>
        <span class="k">static</span> <span class="kt">double</span> <span class="nf">sentimentAnalysisExample</span><span class="p">(</span><span class="n">ITextAnalyticsClient</span> <span class="n">client</span><span class="p">,</span> <span class="kt">string</span> <span class="n">message</span><span class="p">)</span><span class="c1">//戻り値をdouble型に変更</span>
        <span class="p">{</span>
            <span class="kt">var</span> <span class="n">result</span> <span class="p">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">Sentiment</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="s">"ja"</span><span class="p">);</span><span class="c1">//引数messageを分析対象にし、言語は日本語に設定</span>
            <span class="n">Debug</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">$"User Message: </span><span class="p">{</span><span class="n">message</span><span class="p">}</span><span class="s">"</span><span class="p">);</span><span class="c1">//引数messageの内容を出力</span>
            <span class="n">Debug</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">$"Sentiment Score1: </span><span class="p">{</span><span class="n">result</span><span class="p">.</span><span class="n">Score</span><span class="p">:</span><span class="m">0.00</span><span class="p">}</span><span class="s">"</span><span class="p">);</span><span class="c1">//出力確認1</span>

            <span class="k">return</span> <span class="p">(</span><span class="kt">double</span><span class="p">)</span><span class="n">result</span><span class="p">.</span><span class="n">Score</span><span class="p">;</span><span class="c1">//分析スコアを返す</span>
        <span class="p">}</span>
        <span class="c1">//for Twitter</span>
        <span class="k">static</span> <span class="kt">string</span> <span class="nf">getTweet</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="n">Random</span> <span class="n">cRandom</span> <span class="p">=</span> <span class="k">new</span> <span class="n">System</span><span class="p">.</span><span class="nf">Random</span><span class="p">();</span> <span class="c1">//取得したツイートからランダムに1つ選択するための乱数</span>
            <span class="kt">var</span> <span class="n">tokens</span> <span class="p">=</span> <span class="n">Tokens</span><span class="p">.</span><span class="nf">Create</span><span class="p">(</span><span class="s">"&lt;API KEY&gt;"</span><span class="p">,</span> <span class="s">"&lt;API SECRET&gt;"</span><span class="p">,</span> <span class="s">"&lt;ACCESS TOKEN&gt;"</span><span class="p">,</span> <span class="s">"&lt;ACCESS TOKEN SECRET&gt;"</span><span class="p">);</span>  <span class="c1">//接続用トークン発行</span>
            <span class="kt">var</span> <span class="n">tweet</span> <span class="p">=</span> <span class="s">""</span><span class="p">;</span><span class="c1">//取得したツイートを格納する変数</span>

            <span class="kt">var</span> <span class="n">parm</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Dictionary</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">,</span> <span class="kt">object</span><span class="p">&gt;();</span>  <span class="c1">//条件指定用Dictionary</span>
            <span class="n">parm</span><span class="p">[</span><span class="s">"count"</span><span class="p">]</span> <span class="p">=</span> <span class="m">60</span><span class="p">;</span>  <span class="c1">//取得数</span>
            <span class="n">parm</span><span class="p">[</span><span class="s">"screen_name"</span><span class="p">]</span> <span class="p">=</span> <span class="s">"hagemasi1_bot"</span><span class="p">;</span>  <span class="c1">//取得したいユーザーID</span>


            <span class="n">Task</span> <span class="n">task</span> <span class="p">=</span> <span class="n">Task</span><span class="p">.</span><span class="n">Factory</span><span class="p">.</span><span class="nf">StartNew</span><span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="p">=&gt;</span>
            <span class="p">{</span>
                <span class="kt">var</span> <span class="n">tweets</span> <span class="p">=</span> <span class="k">await</span> <span class="n">tokens</span><span class="p">.</span><span class="n">Statuses</span><span class="p">.</span><span class="nf">UserTimelineAsync</span><span class="p">(</span><span class="n">parm</span><span class="p">);</span> <span class="c1">//parmの内容に従ってツイートを取得</span>

                <span class="kt">var</span> <span class="n">random</span> <span class="p">=</span> <span class="n">cRandom</span><span class="p">.</span><span class="nf">Next</span><span class="p">(</span><span class="m">61</span><span class="p">);</span> <span class="c1">//0～60の間の乱数を生成</span>
                <span class="n">tweet</span> <span class="p">=</span> <span class="n">tweets</span><span class="p">[</span><span class="n">random</span><span class="p">].</span><span class="n">Text</span><span class="p">;</span> <span class="c1">//取得した60ツイートからrandom番目のツイートを格納</span>

            <span class="p">}).</span><span class="nf">Unwrap</span><span class="p">();</span>

            <span class="n">task</span><span class="p">.</span><span class="nf">Wait</span><span class="p">();</span>

            <span class="k">return</span> <span class="n">tweet</span><span class="p">;</span> <span class="c1">//選んだツイートを戻り値として返す</span>

        <span class="p">}</span>

        <span class="k">static</span> <span class="kt">string</span> <span class="nf">getShioComment</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="n">Random</span> <span class="n">cRandom</span> <span class="p">=</span> <span class="k">new</span> <span class="n">System</span><span class="p">.</span><span class="nf">Random</span><span class="p">();</span> <span class="c1">//乱数</span>
            <span class="kt">string</span> <span class="n">res</span> <span class="p">=</span> <span class="s">""</span><span class="p">;</span>
            <span class="kt">var</span> <span class="n">shio</span> <span class="p">=</span> <span class="k">new</span> <span class="kt">string</span><span class="p">[]</span> <span class="p">{</span> <span class="s">"へー・・・。"</span><span class="p">,</span> <span class="s">"・・・だから？"</span><span class="p">,</span> <span class="s">"知らんわー。"</span><span class="p">,</span> <span class="s">"興味ないね。"</span><span class="p">,</span> <span class="s">"いや、聞いてないし。"</span><span class="p">,</span> <span class="s">"ふーん・・・。で？"</span><span class="p">,</span> <span class="s">"そういうのいいから。"</span><span class="p">,</span> <span class="s">"あーちょっと今忙しいからまた今度。"</span><span class="p">,</span> <span class="s">"・・・けっ！"</span><span class="p">,</span> <span class="s">"リア充乙。"</span> <span class="p">};</span>

            <span class="kt">var</span> <span class="n">random</span> <span class="p">=</span> <span class="n">cRandom</span><span class="p">.</span><span class="nf">Next</span><span class="p">(</span><span class="m">11</span><span class="p">);</span>
            <span class="n">res</span> <span class="p">=</span> <span class="n">shio</span><span class="p">[</span><span class="n">random</span><span class="p">];</span>
            <span class="k">return</span> <span class="n">res</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="c1">//for TextAnalytics</span>
    <span class="k">class</span> <span class="nc">ApiKeyServiceClientCredentials</span> <span class="p">:</span> <span class="n">ServiceClientCredentials</span>
    <span class="p">{</span>
        <span class="k">private</span> <span class="k">readonly</span> <span class="kt">string</span> <span class="n">apiKey</span><span class="p">;</span>

        <span class="k">public</span> <span class="nf">ApiKeyServiceClientCredentials</span><span class="p">(</span><span class="kt">string</span> <span class="n">apiKey</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="n">apiKey</span> <span class="p">=</span> <span class="n">apiKey</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">public</span> <span class="k">override</span> <span class="n">Task</span> <span class="nf">ProcessHttpRequestAsync</span><span class="p">(</span><span class="n">HttpRequestMessage</span> <span class="n">request</span><span class="p">,</span> <span class="n">CancellationToken</span> <span class="n">cancellationToken</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">request</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nf">ArgumentNullException</span><span class="p">(</span><span class="s">"request"</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="n">request</span><span class="p">.</span><span class="n">Headers</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"Ocp-Apim-Subscription-Key"</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="n">apiKey</span><span class="p">);</span>
            <span class="k">return</span> <span class="k">base</span><span class="p">.</span><span class="nf">ProcessHttpRequestAsync</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">cancellationToken</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<h1>
<span id="27-azureへ再デプロイする" class="fragment"></span><a href="#27-azure%E3%81%B8%E5%86%8D%E3%83%87%E3%83%97%E3%83%AD%E3%82%A4%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>2.7 Azureへ再デプロイする</h1>

<p>PC上（ローカル）でBot Framework Emulatorを使って十分にテストができたら、Azure上に再度更新版のアプリをデプロイしましょう。<br>
<a href="https://qiita.com/miokawa/private/c71f9f4b62ce2b1c2864">第2部</a>に公式ドキュメントに沿ったデプロイ方法の記載がありますが、ちょっと面倒な手順なので、今回はVisual Studioから直接デプロイしてみます。途中でAzureへのサインインを要求されたら、適宜サインインをお願いします。</p>

<p>まず、ソリューションエクスプローラーから、ソリューション名を右クリックし、<strong>発行</strong>を選択します。<br>
<a href="https://camo.qiitausercontent.com/bbe37ea4ae32c63f6eb3d6377b7e1f6cb97f1ea4/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3539363239322f39346465656261312d383635312d356337392d383066382d6535616436393437636364612e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F596292%2F94deeba1-8651-5c79-80f8-e5ad6947ccda.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=49a2918fb5e535f041c0b075798d9cd8" alt="image.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/596292/94deeba1-8651-5c79-80f8-e5ad6947ccda.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F596292%2F94deeba1-8651-5c79-80f8-e5ad6947ccda.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=8a15fdf1da30ded030fda6119618fb30 1x" loading="lazy"></a></p>

<p>次にデプロイ先のAzureリソースを選んでいきます。今回は<a href="https://qiita.com/miokawa/private/c71f9f4b62ce2b1c2864">第2部</a>で作成したAzureリソースに再デプロイするので、<strong>App Servive</strong>、<strong>既存のものを選択</strong>を選んで、<strong>プロファイルの作成</strong>をクリックします。<br>
<a href="https://camo.qiitausercontent.com/3473bba511642fa4b813d05cb4a19d3deadd81cb/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3539363239322f34633362623234642d666135382d623761312d356662632d3861336266353036343966622e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F596292%2F4c3bb24d-fa58-b7a1-5fbc-8a3bf50649fb.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=6ffea350261091abc59c9e797940580b" alt="image.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/596292/4c3bb24d-fa58-b7a1-5fbc-8a3bf50649fb.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F596292%2F4c3bb24d-fa58-b7a1-5fbc-8a3bf50649fb.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=be6ea75be023a75a779607e1cb36049c 1x" loading="lazy"></a></p>

<p>続いて、App Serviceの詳細を指定します。<strong>サブスクリプション</strong>の部分で、デプロイ先のAzureサブスクリプションを選びます。<strong>表示</strong>部分は<strong>リソースグループ</strong>を選択し、下のボックスでデプロイ対象のリソースグループ、WebAppリソースを選択して、OKをクリックします。<br>
<a href="https://camo.qiitausercontent.com/e81942f855500f83193c7518062eac9c69869936/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3539363239322f37353761366434612d613430352d366634302d323734382d6338363231633065626165332e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F596292%2F757a6d4a-a405-6f40-2748-c8621c0ebae3.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=0f7df9aee26edcaa7007199e51fbba49" alt="image.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/596292/757a6d4a-a405-6f40-2748-c8621c0ebae3.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F596292%2F757a6d4a-a405-6f40-2748-c8621c0ebae3.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=b09568a6a6ed475e4712bb0d06c85250 1x" loading="lazy"></a></p>

<p>最後に<strong>発行</strong>をクリックして、デプロイが終わるのを待ちます。<br>
<a href="https://camo.qiitausercontent.com/aca0bb1029864e2d709f6fbc5d7ccd854f817303/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3539363239322f65653736313065652d343139652d383339352d373232632d6537333531653938663765362e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F596292%2Fee7610ee-419e-8395-722c-e7351e98f7e6.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=1ab165f54bc537e35e7a71b9a6f501b4" alt="image.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/596292/ee7610ee-419e-8395-722c-e7351e98f7e6.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F596292%2Fee7610ee-419e-8395-722c-e7351e98f7e6.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=78e68ca06ecf02c9cf15f3a05435c774 1x" loading="lazy"></a></p>

<p>デプロイされたら、<a href="https://qiita.com/miokawa/private/c71f9f4b62ce2b1c2864#25-web%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%81%A7%E3%81%AE%E3%83%86%E3%82%B9%E3%83%88" id="reference-d076d6ae36b5c418aee6">第2部 Webチャットでのテスト</a>の手順を参考に、テストをします。<br>
<a href="https://camo.qiitausercontent.com/145d9e7238389375192e314516018b6dafcb098c/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3539363239322f37303035316639392d616238362d346366362d373564322d6661313766613632653163322e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F596292%2F70051f99-ab86-4cf6-75d2-fa17fa62e1c2.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=36db402b90223a616544cce6681507da" alt="image.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/596292/70051f99-ab86-4cf6-75d2-fa17fa62e1c2.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F596292%2F70051f99-ab86-4cf6-75d2-fa17fa62e1c2.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=613d71502fc3206c7512d2a31c75c49b 1x" loading="lazy"></a></p>

<p>ポジティブな発言とネガティブな発言をして、適切な返事が返ってきていれば成功です！</p>

<h1>
<span id="以降の工程について" class="fragment"></span><a href="#%E4%BB%A5%E9%99%8D%E3%81%AE%E5%B7%A5%E7%A8%8B%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>以降の工程について</h1>

<p>以降の工程はこのようになっています。<br>
次回はいよいよ、Azure上にあるボットアプリと、LINE経由でおしゃべりができるようにしてみたいと思います。</p>

<ol>
<li><a href="https://qiita.com/miokawa/private/6f1a3e480580e1e29abc">Bot Frameworkでチャットボットを作ってみよう！</a></li>
<li><a href="https://qiita.com/miokawa/private/c71f9f4b62ce2b1c2864">ボットをAzure（クラウド）にデプロイしてみよう！</a></li>
<li><a href="https://qiita.com/miokawa/private/cdb243401fe3c8d9d583">Cognitive Serviceでテキスト分析をしてみよう！</a></li>
<li>
<a href="https://qiita.com/miokawa/private/eb9f16220a36f65d7098">Twitterからつぶやきをとってきてみよう！</a><strong>←イマココ</strong>
</li>
<li><a href="https://qiita.com/miokawa/private/c6f0b550f8fa41a23228">LINE経由でボットと話してみよう！</a></li>
</ol>
</div></div></section><div class="css-1yzj1fm"><div class="css-1uv1qiv"><span class="fa fa-twitter"></span></div><div class="css-1uv1qiv"><span class="fa fa-facebook"></span></div></div><div class="apm-Content"><div class="apm-Content_title">Why not register and get more from Qiita?</div><ol class="apm-Content_list"><li>We will deliver articles that match you<div class="description">By following users and tags, you can catch up information on technical fields that you are interested in as a whole</div></li><li>you can read useful information later efficiently<div class="description">By &quot;stocking&quot; the articles you like, you can search right away</div></li><div><a class="apm-Content_help" href="https://help.qiita.com/ja/articles/qiita-login-user" target="_blank"><i class="fa fa-fw fa-arrow-circle-right"></i>What you can do with signing up</a></div></ol><a href="/signup?callback_action=login_or_signup&amp;redirect_to=%2Fmiokawa%2Fitems%2Feb9f16220a36f65d7098&amp;realm=qiita" class="apm-Content_button apm-Content_button-signup">Sign up</a><a href="/login?callback_action=login_or_signup&amp;redirect_to=%2Fmiokawa%2Fitems%2Feb9f16220a36f65d7098&amp;realm=qiita" class="apm-Content_button apm-Content_button-signin">Login</a></div></div><div class="css-helsa7"></div></div></div></div><div class="css-109dbrr"><div class="css-5jpx49"><div class="css-mnxgyc"><button class=" css-1vlpknv"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/miokawa/items/eb9f16220a36f65d7098/likers" class="css-1iupg5d">0</a></div><div class="css-fsjkhv"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-1b17vb0">0</span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-7i7f4d"><div class="css-1gj7nt">Improve article</div><a href="/drafts/eb9f16220a36f65d7098/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/miokawa/items/eb9f16220a36f65d7098/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/miokawa/items/eb9f16220a36f65d7098/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/miokawa/items/eb9f16220a36f65d7098/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/miokawa/items/eb9f16220a36f65d7098.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="PersonalArticlePage" data-dom-id="PersonalArticlePage-react-component-53e59a65-578b-4ef4-b949-caeed714d907">{"authorAnalyticsTrackingId":null,"organizationAnalyticsTrackingId":null}</script>
      
<footer id="globalFooter" class="st-Footer"><div class="st-Footer_container"><div class="st-Footer_start"><div class="st-Footer_logo"><svg viewbox="0 0 426.57 130" xmlns="http://www.w3.org/2000/svg"><circle cx="167.08" cy="21.4" r="12.28" /><path d="M250.81 29.66h23.48v18.9h-23.48z" /><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z" /><circle cx="216.33" cy="21.4" r="12.28" /></svg></div><div class="st-Footer_catchcopy">How developers code is here.</div><div class="st-Footer_socials"><a class="fa fa-twitter" href="https://twitter.com/qiita"></a><a class="fa fa-facebook-square" href="https://www.facebook.com/qiita/"></a></div></div><div class="st-Footer_end"><div class="st-Footer_qiita"><div class="st-Footer_label">Qiita</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="/about">About</a><a href="/terms">Terms</a><a href="/privacy">Privacy</a><a target="_blank" href="http://help.qiita.com/ja/articles/qiita-community-guideline">Guideline</a><a target="_blank" href="https://help.qiita.com/ja/articles/others-brand-guideline">Design Guideline</a></div><div class="st-Footer_column"><a href="/release-notes">Release</a><a href="/api/v2/docs">API</a><a href="/feedback/new">ご意見</a><a href="https://help.qiita.com">Help</a><a target="_blank" href="https://qiita.com/ads?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Advertisement</a></div></div></div><div class="st-Footer_increments"><div class="st-Footer_label">Increments</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="https://increments.co.jp/company/">About</a><a href="https://increments.co.jp/jobs/">採用情報</a><a href="https://blog.qiita.com">Blog</a></div><div class="st-Footer_column"><a href="https://teams.qiita.com/">Qiita Team</a><a href="https://jobs.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Jobs</a><a href="https://zine.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Zine</a></div></div></div></div></div><div class="st-Footer_copyright">© 2011-2021 Increments Inc.</div></footer><div id="Snackbar-react-component-199c1987-9e2c-4ed6-bb57-00506a6f46d9"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="Snackbar" data-dom-id="Snackbar-react-component-199c1987-9e2c-4ed6-bb57-00506a6f46d9">{}</script>
      
<div id="LoginModal-react-component-da9ed76b-892d-4721-8eb4-47c1d7d7fe8e"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="LoginModal" data-dom-id="LoginModal-react-component-da9ed76b-892d-4721-8eb4-47c1d7d7fe8e">{}</script>
      
<div id="StockModal-react-component-6beb3626-6f28-40de-8230-9419ef2c1f9b"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="StockModal" data-dom-id="StockModal-react-component-6beb3626-6f28-40de-8230-9419ef2c1f9b">{}</script>
      
</div><div id="dataContainer" style="display: none;" data-config="{&quot;actionPath&quot;:&quot;public/items#show&quot;,&quot;settings&quot;:{&quot;analyticsTrackingId&quot;:&quot;UA-24675221-12&quot;,&quot;assetsMap&quot;:{},&quot;csrfToken&quot;:&quot;z/FbnNipio/ZoVaKI380w1G2nldJLWLEHZsdGg18Dk6qjDCctl8/BQzZf02Q6RqvPMi8u6awvowyugL1j1+VUQ==&quot;,&quot;locale&quot;:&quot;en&quot;},&quot;currentUser&quot;:null}" /></body></html><script type="application/json" data-js-react-on-rails-store="AppStoreWithReactOnRails">{"snackbar":{"type":"","body":"","isActive":false},"article":{"article":{"body":"\n\u003ch1\u003e\n\u003cspan id=\"どういう記事\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%A9%E3%81%86%E3%81%84%E3%81%86%E8%A8%98%E4%BA%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eどういう記事？\u003c/h1\u003e\n\n\u003cp\u003eAzure素人の自分がMicrosoft AzureのBot FrameworkとCognitive Serviceと触れ合いながら、難易度も人への接し方も\u003cstrong\u003e“やさしい”\u003c/strong\u003eチャットボットを作ってみた際の備忘録の第4部です。どんなチャットボットを作るのかを含め、これまでの手順は\u003ca href=\"https://qiita.com/miokawa/private/6f1a3e480580e1e29abc\" id=\"reference-87f9c8d59b5414902300\"\u003e第1部\u003c/a\u003e、\u003ca href=\"https://qiita.com/miokawa/private/c71f9f4b62ce2b1c2864\" id=\"reference-d076d6ae36b5c418aee6\"\u003e第2部\u003c/a\u003e、\u003ca href=\"https://qiita.com/miokawa/private/cdb243401fe3c8d9d583\" id=\"reference-2d9f4daf52265ecc44bd\"\u003e第3部\u003c/a\u003eにございます。\u003cbr\u003e\nPowerPointで記録していたものをQiita化してみたものになるので、そんな感じの画像が頻出します。\u003cbr\u003e\nQiita初心者なので、書き方が下手でも広い心で許してほしいです。そして全体的にゆるいです。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"アジェンダ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%A2%E3%82%B8%E3%82%A7%E3%83%B3%E3%83%80\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eアジェンダ\u003c/h1\u003e\n\n\u003cp\u003e以下の5部構成になります。この記事は第4部にあたります。\u003c/p\u003e\n\n\u003col\u003e\n\u003cli\u003e\u003ca href=\"https://qiita.com/miokawa/private/6f1a3e480580e1e29abc\"\u003eBot Frameworkでチャットボットを作ってみよう！\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://qiita.com/miokawa/private/c71f9f4b62ce2b1c2864\"\u003eボットをAzure（クラウド）にデプロイしてみよう！\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://qiita.com/miokawa/private/cdb243401fe3c8d9d583\"\u003eCognitive Serviceでテキスト分析をしてみよう！\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"https://qiita.com/miokawa/private/eb9f16220a36f65d7098\"\u003eTwitterからつぶやきをとってきてみよう！\u003c/a\u003e\u003cstrong\u003e←イマココ\u003c/strong\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://qiita.com/miokawa/private/c6f0b550f8fa41a23228\" id=\"reference-629e7017a66217292f5d\"\u003eLINE経由でボットと話してみよう！\u003c/a\u003e\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003cp\u003eなお、公式ドキュメントに沿って作りましたので、それらのリンクを張り付けつつ、辿った道筋通りに書いていきます。\u003cbr\u003e\nその筋の方からすると遠回りだったり野暮ったかったりすると思いますが、ご容赦ください。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"2-twitterからつぶやきをとってきてみよう\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#2-twitter%E3%81%8B%E3%82%89%E3%81%A4%E3%81%B6%E3%82%84%E3%81%8D%E3%82%92%E3%81%A8%E3%81%A3%E3%81%A6%E3%81%8D%E3%81%A6%E3%81%BF%E3%82%88%E3%81%86\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e2. Twitterからつぶやきをとってきてみよう！\u003c/h1\u003e\n\n\u003cp\u003eこれまで、\u003ca href=\"https://qiita.com/miokawa/private/6f1a3e480580e1e29abc\"\u003e第1部\u003c/a\u003eで作ったチャットボットのソースコードを、\u003ca href=\"https://qiita.com/miokawa/private/c71f9f4b62ce2b1c2864\"\u003e第2部\u003c/a\u003eでAzure（クラウド）上へデプロイし、ユーザーから受け取ったコメントを\u003ca\u003eAzure Cognitive Service\u003c/a\u003eの\u003ca href=\"https://azure.microsoft.com/ja-jp/services/cognitive-services/text-analytics/\" rel=\"nofollow noopener\" target=\"_blank\"\u003eText Analytics\u003c/a\u003eを使って、ネガティブorポジティブの判定をしてみました。今回は、図中の赤枠部分、Text Analyticsの判定結果がネガティブだった場合、Twitterで偉人さんのありがたいお言葉をつぶやく\u003ca href=\"https://twitter.com/hagemasi1_bot\" rel=\"nofollow noopener\" target=\"_blank\"\u003e励ましBotさん\u003c/a\u003eのつぶやきをランダムに選択し、ユーザーに返してあげる部分を作っていこうと思います。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/0c0aa696e9a37524ad1cb7a64ecc07b662e1ac44/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3539363239322f33346638383066392d643864652d623564302d343134332d3739303437386330626331632e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F596292%2F34f880f9-d8de-b5d0-4143-790478c0bc1c.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=3039d4ff64d6c0c4e4c345b3fb71cb87\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/596292/34f880f9-d8de-b5d0-4143-790478c0bc1c.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F596292%2F34f880f9-d8de-b5d0-4143-790478c0bc1c.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=be1816811e2be2033c73b02bb44543f1 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"21-事前準備\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#21-%E4%BA%8B%E5%89%8D%E6%BA%96%E5%82%99\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e2.1 事前準備\u003c/h2\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"twitter-developer登録\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#twitter-developer%E7%99%BB%E9%8C%B2\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eTwitter Developer登録\u003c/h4\u003e\n\n\u003cp\u003eTwitterの各種APIを使うためには、Developer登録が必要となります。審査に数日かかるようです。\u003cbr\u003e\n\u003ca href=\"https://maipyon.net/twitter-developer-account/\" rel=\"nofollow noopener\" target=\"_blank\"\u003eこちら\u003c/a\u003eにDeveloper登録について、詳しく書かれているので参考にしてください。\u003cbr\u003e\n\u003cfont color=\"red\"\u003e手順中で、Access tokenとaccess token secretが生成されますので、忘れずにメモをしておいてください。後々使います。\u003c/font\u003e\u003c/p\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"coretweetインストール\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#coretweet%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eCoreTweetインストール\u003c/h4\u003e\n\n\u003cp\u003eC#からTwitterAPI を扱うためのライブラリである、CoreTweetのインストールをします。\u003ca href=\"https://qiita.com/miokawa/private/cdb243401fe3c8d9d583#23-text-analytics%E3%81%AE%E8%A8%AD%E5%AE%9A\" id=\"reference-2d9f4daf52265ecc44bd\"\u003e第3部のTextAnalyticsの設定\u003c/a\u003eでも実施したパッケージのインストールをします。検索ボックスで\u003ccode\u003eCoreTweet\u003c/code\u003eと検索して、インストールを実行します。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/b40361b598ca6010e80fedd617e50d5a5cc04dd3/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3539363239322f65356633346532642d326432622d343035322d363439612d3462303362653831643737642e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F596292%2Fe5f34e2d-2d2b-4052-649a-4b03be81d77d.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=12eaacfc1f6f33811ab0212c9b98e980\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/596292/e5f34e2d-2d2b-4052-649a-4b03be81d77d.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F596292%2Fe5f34e2d-2d2b-4052-649a-4b03be81d77d.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=6d3f0b0356e4ea56b189894fa4fb32c0 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"22-sentimentanalysisexampleメソッドから分析スコアを返す\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#22-sentimentanalysisexample%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E3%81%8B%E3%82%89%E5%88%86%E6%9E%90%E3%82%B9%E3%82%B3%E3%82%A2%E3%82%92%E8%BF%94%E3%81%99\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e2.2 sentimentAnalysisExampleメソッドから分析スコアを返す\u003c/h2\u003e\n\n\u003cp\u003e\u003ca href=\"https://qiita.com/miokawa/private/cdb243401fe3c8d9d583\"\u003e第3部\u003c/a\u003eで作成したソースコードを前提に、必要な変更を加えていきます。まずは、ユーザーのメッセージをText Analyticsリソースに投げて分析しているsentimentAnalysisExampleメソッドが、呼び出し元に分析結果のスコアを返すようにコードを変更します。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"cs\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eEchoBot.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003estatic\u003c/span\u003e \u003cspan class=\"kt\"\u003edouble\u003c/span\u003e \u003cspan class=\"nf\"\u003esentimentAnalysisExample\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eITextAnalyticsClient\u003c/span\u003e \u003cspan class=\"n\"\u003eclient\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003emessage\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"c1\"\u003e//戻り値をvoidからdouble型に変更\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n     \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eresult\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eclient\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSentiment\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003emessage\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\"ja\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\u003cspan class=\"c1\"\u003e//引数messageを分析対象にし、言語は日本語に設定\u003c/span\u003e\n     \u003cspan class=\"n\"\u003eDebug\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWriteLine\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e$\"User Message: \u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003emessage\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\u003cspan class=\"c1\"\u003e//引数messageの内容を出力\u003c/span\u003e\n     \u003cspan class=\"n\"\u003eDebug\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWriteLine\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e$\"Sentiment Score1: \u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eScore\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"m\"\u003e0.00\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\u003cspan class=\"c1\"\u003e//出力確認1\u003c/span\u003e\n     \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003edouble\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"n\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eScore\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\u003cspan class=\"c1\"\u003e//分析スコアを返す\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e呼び出し側でも戻り値を格納する変数を用意する必要がありますので、OnMessageActivityAsync内でsentimentAnalysisExampleの部分に以下の通り変更を加えます。Debug.WriteLineは値の受け渡しが正常にできているかの確認のための出力です。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"cs\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eEchoBot.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003escore\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nf\"\u003esentimentAnalysisExample\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eclient\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003eturnContext\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eActivity\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eText\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\u003cspan class=\"c1\"\u003e//戻り値を格納するためscoreを用意Debug.WriteLine($\"Sentiment Score2: {score:0.00}\");//出力確認2\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"23-スコアを元に条件分岐をする\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#23-%E3%82%B9%E3%82%B3%E3%82%A2%E3%82%92%E5%85%83%E3%81%AB%E6%9D%A1%E4%BB%B6%E5%88%86%E5%B2%90%E3%82%92%E3%81%99%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e2.3 スコアを元に条件分岐をする\u003c/h2\u003e\n\n\u003cp\u003eText Analyticsでは0~1の間の値を返します。1に近いほどポジティブで、0に近いほどネガティブな判定という意味となります。\u003cbr\u003e\n今回は、スコアが0.5以上の場合はポジティブとみなして塩対応し、0.5未満の場合はTwitterからありがたいお言葉をとってきたいと思いますので、OnMessageActivityAsync内で条件分岐をし、それぞれの場合でDebug.WriteLineで出力確認をしたいと思います。\u003cbr\u003e\n今までのOnMessageActivityAsyncに対する変更をまとめると以下の通りとなります。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"cs\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eEchoBot.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eprotected\u003c/span\u003e \u003cspan class=\"k\"\u003eoverride\u003c/span\u003e \u003cspan class=\"k\"\u003easync\u003c/span\u003e \u003cspan class=\"n\"\u003eTask\u003c/span\u003e \u003cspan class=\"nf\"\u003eOnMessageActivityAsync\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eITurnContext\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eIMessageActivity\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eturnContext\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eCancellationToken\u003c/span\u003e \u003cspan class=\"n\"\u003ecancellationToken\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003ereplyText\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e$\"Echo: \u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003eturnContext\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eActivity\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eText\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eawait\u003c/span\u003e \u003cspan class=\"n\"\u003eturnContext\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSendActivityAsync\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eMessageFactory\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eText\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ereplyText\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ereplyText\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"n\"\u003ecancellationToken\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e//for TextAnalytics\u003c/span\u003e\n    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eclient\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nf\"\u003eauthenticateClient\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003escore\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nf\"\u003esentimentAnalysisExample\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eclient\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003eturnContext\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eActivity\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eText\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\u003cspan class=\"c1\"\u003e//戻り値を格納するためscoreを用意\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eDebug\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWriteLine\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e$\"Sentiment Score2: \u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003escore\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"m\"\u003e0.00\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\u003cspan class=\"c1\"\u003e//出力確認2\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003eif\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e0.5\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026lt;=\u003c/span\u003e \u003cspan class=\"n\"\u003escore\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eDebug\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWriteLine\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e$\"塩対応\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\u003cspan class=\"c1\"\u003e//出力確認3\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eelse\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eDebug\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWriteLine\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e$\"励まし対応\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\u003cspan class=\"c1\"\u003e//出力確認4\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e一度実行して試してみましょう。ボットに話しかけたメッセージと、そのスコア（2回）、スコアに応じた対応内容が出力されていればOKです。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/777420efc3df5c2bb307fab85c45c9c97e26cde8/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3539363239322f38376233303466652d396136312d643339662d366432362d3533636366393161333232632e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F596292%2F87b304fe-9a61-d39f-6d26-53ccf91a322c.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=1c9c71bda8e26820430534355e88a000\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/596292/87b304fe-9a61-d39f-6d26-53ccf91a322c.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F596292%2F87b304fe-9a61-d39f-6d26-53ccf91a322c.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=265028371a1aa6a72cc13a9279cbc10c 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"24-励まし対応twitter連携部分を作る\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#24-%E5%8A%B1%E3%81%BE%E3%81%97%E5%AF%BE%E5%BF%9Ctwitter%E9%80%A3%E6%90%BA%E9%83%A8%E5%88%86%E3%82%92%E4%BD%9C%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e2.4 励まし対応（Twitter連携）部分を作る\u003c/h2\u003e\n\n\u003cp\u003eちゃんとスコアを受け取り、条件分岐できていることが確認できたので、いよいよTwitterとの連携部分を作っていきます。\u003ca href=\"#%E4%BA%8B%E5%89%8D%E6%BA%96%E5%82%99\"\u003e事前準備\u003c/a\u003eでインストールしたCoreTweetを使うので、以下の通りソースコードの上の方（usingほげほげがあるところ）に追加します。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"cs\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eEchoBot.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eCoreTweet\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003eそしてpublic class EchoBotの中のsentimentAnalysisExampleと同じレベル（深さ）に、Twitterからツイートを取ってくるためのgetTweetメソッドを用意します。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"cs\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eEchoBot.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e \u003cspan class=\"k\"\u003estatic\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"nf\"\u003egetTweet\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003edouble\u003c/span\u003e \u003cspan class=\"n\"\u003escore\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n     \u003cspan class=\"n\"\u003eRandom\u003c/span\u003e \u003cspan class=\"n\"\u003ecRandom\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eSystem\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eRandom\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e \u003cspan class=\"c1\"\u003e//取得したツイートからランダムに1つ選択するための乱数\u003c/span\u003e\n     \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003etokens\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eTokens\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eCreate\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u0026lt;API KEY\u0026gt;\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\"\u0026lt;API SECRET\u0026gt;\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\"\u0026lt;ACCESS TOKEN\u0026gt;\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\"\u0026lt;ACCESS TOKEN SECRET\u0026gt;\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e  \u003cspan class=\"c1\"\u003e//接続用トークン発行\u003c/span\u003e\n     \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003etweet\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\u003cspan class=\"c1\"\u003e//取得したツイートを格納する変数\u003c/span\u003e\n\n     \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eparm\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eDictionary\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003eobject\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;();\u003c/span\u003e  \u003cspan class=\"c1\"\u003e//条件指定用Dictionary\u003c/span\u003e\n     \u003cspan class=\"n\"\u003eparm\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s\"\u003e\"count\"\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e60\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e  \u003cspan class=\"c1\"\u003e//取得するツイート数\u003c/span\u003e\n     \u003cspan class=\"n\"\u003eparm\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s\"\u003e\"screen_name\"\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"hagemasi1_bot\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e  \u003cspan class=\"c1\"\u003e//取得したいユーザーID\u003c/span\u003e\n\n\n     \u003cspan class=\"n\"\u003eTask\u003c/span\u003e \u003cspan class=\"n\"\u003etask\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eTask\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eFactory\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eStartNew\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003easync\u003c/span\u003e \u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e\n     \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n          \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003etweets\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003eawait\u003c/span\u003e \u003cspan class=\"n\"\u003etokens\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eStatuses\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eUserTimelineAsync\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eparm\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e \u003cspan class=\"c1\"\u003e//parmの内容に従ってツイートを取得\u003c/span\u003e\n\n          \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003erandom\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ecRandom\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eNext\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e61\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e \u003cspan class=\"c1\"\u003e//0～60の間の乱数を生成\u003c/span\u003e\n          \u003cspan class=\"n\"\u003etweet\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003etweets\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003erandom\u003c/span\u003e\u003cspan class=\"p\"\u003e].\u003c/span\u003e\u003cspan class=\"n\"\u003eText\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"c1\"\u003e//取得した60ツイートからrandom番目のツイートを格納\u003c/span\u003e\n\n     \u003cspan class=\"p\"\u003e}).\u003c/span\u003e\u003cspan class=\"nf\"\u003eUnwrap\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n     \u003cspan class=\"n\"\u003etask\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWait\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n     \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003etweet\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\u003cspan class=\"err\"\u003e　\u003c/span\u003e\u003cspan class=\"c1\"\u003e//選んだツイートを戻り値として返す\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003eそれぞれ簡単に説明していきます。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003cp\u003e\u003cstrong\u003eRandom cRandom = new System.Random();\u003c/strong\u003e\u003cbr\u003e\n一括でとってきたツイートたちから、どれか1つを選択する際に使う乱数です。\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e\u003cstrong\u003evar tokens = Tokens.Create()\u003c/strong\u003e\u003cbr\u003e\nTwitterに接続する際のトークンです。それぞれ以下の手順で確認して、正しいものを入れていきます。\u003c/p\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e\u003ca href=\"https://developer.twitter.com/\" rel=\"nofollow noopener\" target=\"_blank\"\u003eTwitter Developerサイト\u003c/a\u003eにアクセスし、画面の右上で、自分のTwitterアカウントより、\u003cstrong\u003eApps\u003c/strong\u003eを選択します。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/002c7c4a3052141becbf79085a891efc109c4057/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3539363239322f39343232623835322d643536352d383465382d613635392d3138323333663532353536652e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F596292%2F9422b852-d565-84e8-a659-18233f52556e.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=f2bcece8218ba3d0545c4a69f8ef16df\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/596292/9422b852-d565-84e8-a659-18233f52556e.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F596292%2F9422b852-d565-84e8-a659-18233f52556e.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=9044f7cc9fad4c802a7a811a05346a4e 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e該当アプリの\u003cstrong\u003eDetails\u003c/strong\u003eボタンをクリックします。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/38da0ff8c37e7d7588ffab57185e776e2ec37503/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3539363239322f35353466356233332d363037312d386363322d623637332d6166393439376137316638632e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F596292%2F554f5b33-6071-8cc2-b673-af9497a71f8c.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=4cfe3f58eeec7ce2d8f079713b1b0eb9\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/596292/554f5b33-6071-8cc2-b673-af9497a71f8c.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F596292%2F554f5b33-6071-8cc2-b673-af9497a71f8c.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=11185f4dff0ff123e35b71aba151c74b 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003eKeys and tokens\u003c/strong\u003eタブをクリックします。API keyとAPI secret keyが表示されます。Access tokenとaccess token secretについては、事前準備の\u003ca href=\"#Twitter%20Developer%E7%99%BB%E9%8C%B2\"\u003eTwitter Developer登録\u003c/a\u003eでメモしておいたものを使います。もしメモし損ねてしまっていたら、\u003cstrong\u003eRegenerate\u003c/strong\u003eボタンで再作成してください。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/83179f98aa8b887f5727bb3ecd2a2e50cf1bb7f5/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3539363239322f33336166393464342d303262372d376634302d333432622d3431353531633764333965392e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F596292%2F33af94d4-02b7-7f40-342b-41551c7d39e9.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=e5b5ae8bacf53b05da95beee9c6459b6\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/596292/33af94d4-02b7-7f40-342b-41551c7d39e9.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F596292%2F33af94d4-02b7-7f40-342b-41551c7d39e9.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=7016b960ead5c632926ae6308aa22615 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003cp\u003e\u003cstrong\u003evar tweet = \"\";\u003c/strong\u003e\u003cbr\u003e\n取得してきたツイート群から、実際にユーザーに返すものを格納する変数です。\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e\u003cstrong\u003evar parm = new Dictionary();\u003c/strong\u003e\u003cbr\u003e\n取得するツイートの条件を指定するためのDictionaryクラスです。今回は取得してくる全ツイート数（60ツイート）と、取得対象のTwitterアカウントのID（hagemasi1_bot）を指定しています。Dictionaryクラスの公式リファレンスは\u003ca href=\"https://docs.microsoft.com/ja-jp/dotnet/api/system.collections.generic.dictionary-2?redirectedfrom=MSDN\u0026amp;view=netframework-4.8\" rel=\"nofollow noopener\" target=\"_blank\"\u003eこちら\u003c/a\u003e\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e\u003cstrong\u003evar tweets = await tokens.Statuses.UserTimelineAsync(parm);\u003c/strong\u003e\u003cbr\u003e\n直前のDictionaryクラスで指定した内容を引数にして、hagemasi1_botのツイートを60ツイート取得してきています。戻り値は取得したツイートたちです。CoreTweetの公式リファレンスは\u003ca href=\"http://coretweet.github.io/docs/classCoreTweet_1_1Rest_1_1Statuses.html#a355f15e598c63dfb2b218f75a8a4097f\" rel=\"nofollow noopener\" target=\"_blank\"\u003eこちら\u003c/a\u003e\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e\u003cstrong\u003evar random = cRandom.Next(61);\u003c/strong\u003e\u003cbr\u003e\n取得した60個のツイートから、何番目のツイートをユーザーに返すか、乱数で決めています。randomには0~60の値のいずれかが入ります。\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e\u003cstrong\u003etweet = tweets[random].Text;\u003c/strong\u003e\u003cbr\u003e\n取得した60個のツイートのうち、random番目のものを選んで、tweet変数に格納しています。これをユーザーに返します。\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e\u003cstrong\u003ereturn tweet;\u003c/strong\u003e\u003cbr\u003e\ntweet変数を呼び出し元に返します。\u003c/p\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eTwitterからツイートを取得するメソッドができたので、OnMessageActivityAsync内の条件分岐で\u003cstrong\u003eDebug.WriteLine($\"励まし対応\")\u003c/strong\u003eとしていた部分からgetTweetを呼び出して、結果を出力するようにします。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"cs\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eEchoBot.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eif\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e0.5\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026lt;=\u003c/span\u003e \u003cspan class=\"n\"\u003escore\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eDebug\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWriteLine\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e$\"塩対応\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\u003cspan class=\"c1\"\u003e//出力確認3\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"k\"\u003eelse\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eres\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nf\"\u003egetTweet\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003escore\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eDebug\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWriteLine\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e$\"励まし対応:\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003eres\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\u003cspan class=\"c1\"\u003e//出力確認4\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003eではここでまた、実行してみましょう。できるだけネガティブな発言をボットに投げかけてくださいね。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/24890b8b99d58c121c0a2d5a8ad68e6c52f61121/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3539363239322f39326566633831302d633464302d383663632d386538372d3233663939633161343336332e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F596292%2F92efc810-c4d0-86cc-8e87-23f99c1a4363.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=7d199956addc81d28c53570c825f8ab7\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/596292/92efc810-c4d0-86cc-8e87-23f99c1a4363.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F596292%2F92efc810-c4d0-86cc-8e87-23f99c1a4363.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=a9eaa58517389bc063e8dcdc5271748c 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eネガティブ判定され、Twitterから偉人さんのありがたいお言葉を取得してくることができました！\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"25-塩対応部分を作る\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#25-%E5%A1%A9%E5%AF%BE%E5%BF%9C%E9%83%A8%E5%88%86%E3%82%92%E4%BD%9C%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e2.5 塩対応部分を作る\u003c/h2\u003e\n\n\u003cp\u003eTextAnalyticsの分析スコアが0.5以上だった場合の、塩対応用メソッドgetShioCommentを、OnMessageActivityAsync内、getTweetと同じレベル（深さ）に作っていきます。こちらは特に何かと連携はせずに、コード内に書いたいくつかの塩対応フレーズからランダムに選んで返すだけのものにします。励まし対応の部分と被る要素が多いので、説明は割愛します。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"cs\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eEchoBot.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003estatic\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"nf\"\u003egetShioComment\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n   \u003cspan class=\"n\"\u003eRandom\u003c/span\u003e \u003cspan class=\"n\"\u003ecRandom\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eSystem\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eRandom\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e \u003cspan class=\"c1\"\u003e//乱数\u003c/span\u003e\n   \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003eres\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n   \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eshio\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e[]\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"s\"\u003e\"へー・・・。\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\"・・・だから？\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\"知らんわー。\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\"興味ないね。\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\"いや、聞いてないし。\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\"ふーん・・・。で？\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\"そういうのいいから。\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\"あーちょっと今忙しいからまた今度。\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\"・・・けっ！\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\"リア充乙。\"\u003c/span\u003e \u003cspan class=\"p\"\u003e};\u003c/span\u003e\n\n   \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003erandom\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ecRandom\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eNext\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e11\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n   \u003cspan class=\"n\"\u003eres\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eshio\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003erandom\u003c/span\u003e\u003cspan class=\"p\"\u003e];\u003c/span\u003e\n   \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003eres\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e呼び出し側も以下の通り変更します。条件分岐の塩対応部分でgetShioCommentメソッドを呼び出し、結果を出力することと、条件分岐外でres変数を定義し、塩対応、励まし対応それぞれの戻り値をres変数に格納する形にしました。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"cs\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eEchoBot.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eclient\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nf\"\u003eauthenticateClient\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003escore\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nf\"\u003esentimentAnalysisExample\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eclient\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003eturnContext\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eActivity\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eText\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\u003cspan class=\"c1\"\u003e//戻り値を格納するためscoreを用意\u003c/span\u003e\n\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eres\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\u003cspan class=\"c1\"\u003e//返事格納用\u003c/span\u003e\n\u003cspan class=\"n\"\u003eDebug\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWriteLine\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e$\"Sentiment Score2: \u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003escore\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"m\"\u003e0.00\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\u003cspan class=\"c1\"\u003e//出力確認2\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003eif\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e0.5\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026lt;=\u003c/span\u003e \u003cspan class=\"n\"\u003escore\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n   \u003cspan class=\"n\"\u003eres\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nf\"\u003egetShioComment\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n   \u003cspan class=\"n\"\u003eDebug\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWriteLine\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e$\"塩対応:\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003eres\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\u003cspan class=\"c1\"\u003e//出力確認3\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"k\"\u003eelse\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n   \u003cspan class=\"n\"\u003eres\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nf\"\u003egetTweet\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n   \u003cspan class=\"n\"\u003eDebug\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWriteLine\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e$\"励まし対応:\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003eres\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\u003cspan class=\"c1\"\u003e//出力確認4\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003eそれではまたここで実行してみましょう。今度はできるだけポジティブな言葉を投げかけてください。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/f2bdbb3cbf95cc61601a0f38bee2c67697d7a5ac/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3539363239322f32383463346234612d636230312d373135392d346462352d6162313631316636303133302e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F596292%2F284c4b4a-cb01-7159-4db5-ab1611f60130.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=885499ca23dd846a9b2a590788070dc9\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/596292/284c4b4a-cb01-7159-4db5-ab1611f60130.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F596292%2F284c4b4a-cb01-7159-4db5-ab1611f60130.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=ac82ec3a7fc3265522d3a701cc1d1bb4 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e0.5以上のスコアで塩対応されていれば成功です！\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"26-ボットに発言させる\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#26-%E3%83%9C%E3%83%83%E3%83%88%E3%81%AB%E7%99%BA%E8%A8%80%E3%81%95%E3%81%9B%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e2.6 ボットに発言させる\u003c/h2\u003e\n\n\u003cp\u003eここまできたら、後はもう少しです！今までデバッグとして出力させていたコメントを、ボットからユーザーに発言させるようにします。\u003cbr\u003e\nまず、せっかくですので、返事に分析スコアもつけるため、score変数（小数点以下2桁まで）とres変数を連結します。\u003ccode\u003eEnvironment.NewLine\u003c/code\u003eは間で改行をするために入れています。\u003cbr\u003e\nいよいよユーザーへの発言ですが、OnMessageActivityAsync内の\u003ccode\u003eawait turnContext.SendActivityAsync(MessageFactory.Text(replyText, replyText), cancellationToken);\u003c/code\u003e部分で、ボットはオウム返しをしていますので、この部分を以下の通り変更して、塩対応/励まし対応の条件分岐後（返事をres変数に格納した後）に持ってきます。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"cs\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eEchoBot.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e \u003cspan class=\"n\"\u003eres\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e$\"Score:\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003escore\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"m\"\u003e0.00\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"n\"\u003eEnvironment\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eNewLine\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"n\"\u003eres\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n \u003cspan class=\"k\"\u003eawait\u003c/span\u003e \u003cspan class=\"n\"\u003eturnContext\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSendActivityAsync\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eMessageFactory\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eText\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eres\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"n\"\u003ecancellationToken\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003eまた、オウム返しのテキストを作っている\u003ccode\u003evar replyText = $\"Echo: {turnContext.Activity.Text}\";\u003c/code\u003eは不要になるので、削除します。\u003c/p\u003e\n\n\u003cp\u003eここまでの全ソースコードはこちらです。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"cs\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eEchoBot.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"c1\"\u003e// Copyright (c) Microsoft Corporation. All rights reserved.\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e// Licensed under the MIT License.\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e//\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e// Generated with Bot Builder V4 SDK Template for Visual Studio EchoBot v4.6.2\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem.Collections.Generic\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem.Threading\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem.Threading.Tasks\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eMicrosoft.Bot.Builder\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eMicrosoft.Bot.Schema\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e//for TextAnalytics\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem.Net.Http\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eMicrosoft.Azure.CognitiveServices.Language.TextAnalytics\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eMicrosoft.Azure.CognitiveServices.Language.TextAnalytics.Models\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eMicrosoft.Rest\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem.Diagnostics\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e//for Twitter\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eCoreTweet\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003enamespace\u003c/span\u003e \u003cspan class=\"nn\"\u003eYasashiiBot.Bots\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eEchoBot\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eActivityHandler\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e//for TextAnalytics\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003estatic\u003c/span\u003e \u003cspan class=\"k\"\u003ereadonly\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003ekey\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"\u0026lt;replace-with-your-text-analytics-key-here\u0026gt;;\n\u003c/span\u003e        \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003estatic\u003c/span\u003e \u003cspan class=\"k\"\u003ereadonly\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003eendpoint\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"\u0026lt;replace-with-your-text-analytics-endpoint-here\u0026gt;\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003eprotected\u003c/span\u003e \u003cspan class=\"k\"\u003eoverride\u003c/span\u003e \u003cspan class=\"k\"\u003easync\u003c/span\u003e \u003cspan class=\"n\"\u003eTask\u003c/span\u003e \u003cspan class=\"nf\"\u003eOnMessageActivityAsync\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eITurnContext\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eIMessageActivity\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eturnContext\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eCancellationToken\u003c/span\u003e \u003cspan class=\"n\"\u003ecancellationToken\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\n            \u003cspan class=\"c1\"\u003e//for TextAnalytics\u003c/span\u003e\n            \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eclient\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nf\"\u003eauthenticateClient\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n            \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003escore\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nf\"\u003esentimentAnalysisExample\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eclient\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003eturnContext\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eActivity\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eText\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\u003cspan class=\"c1\"\u003e//戻り値を格納するためscoreを用意\u003c/span\u003e\n            \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eres\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\u003cspan class=\"c1\"\u003e//返事格納用\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eDebug\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWriteLine\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e$\"Sentiment Score2: \u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003escore\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"m\"\u003e0.00\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\u003cspan class=\"c1\"\u003e//出力確認2\u003c/span\u003e\n\n            \u003cspan class=\"k\"\u003eif\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e0.5\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026lt;=\u003c/span\u003e \u003cspan class=\"n\"\u003escore\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"n\"\u003eres\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nf\"\u003egetShioComment\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n                \u003cspan class=\"n\"\u003eDebug\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWriteLine\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e$\"塩対応:\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003eres\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\u003cspan class=\"c1\"\u003e//出力確認3\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eelse\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"n\"\u003eres\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nf\"\u003egetTweet\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n                \u003cspan class=\"n\"\u003eDebug\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWriteLine\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e$\"励まし対応:\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003eres\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\u003cspan class=\"c1\"\u003e//出力確認4\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n            \u003cspan class=\"n\"\u003eres\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e$\"Score:\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003escore\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"m\"\u003e0.00\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"n\"\u003eEnvironment\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eNewLine\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"n\"\u003eres\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eawait\u003c/span\u003e \u003cspan class=\"n\"\u003eturnContext\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSendActivityAsync\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eMessageFactory\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eText\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eres\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"n\"\u003ecancellationToken\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003eprotected\u003c/span\u003e \u003cspan class=\"k\"\u003eoverride\u003c/span\u003e \u003cspan class=\"k\"\u003easync\u003c/span\u003e \u003cspan class=\"n\"\u003eTask\u003c/span\u003e \u003cspan class=\"nf\"\u003eOnMembersAddedAsync\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eIList\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eChannelAccount\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003emembersAdded\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eITurnContext\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eIConversationUpdateActivity\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eturnContext\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eCancellationToken\u003c/span\u003e \u003cspan class=\"n\"\u003ecancellationToken\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003ewelcomeText\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"Hello and welcome!\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eforeach\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003emember\u003c/span\u003e \u003cspan class=\"k\"\u003ein\u003c/span\u003e \u003cspan class=\"n\"\u003emembersAdded\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003emember\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eId\u003c/span\u003e \u003cspan class=\"p\"\u003e!=\u003c/span\u003e \u003cspan class=\"n\"\u003eturnContext\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eActivity\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eRecipient\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eId\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                    \u003cspan class=\"k\"\u003eawait\u003c/span\u003e \u003cspan class=\"n\"\u003eturnContext\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSendActivityAsync\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eMessageFactory\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eText\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ewelcomeText\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ewelcomeText\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"n\"\u003ecancellationToken\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"c1\"\u003e//for TextAnalytics\u003c/span\u003e\n        \u003cspan class=\"k\"\u003estatic\u003c/span\u003e \u003cspan class=\"n\"\u003eTextAnalyticsClient\u003c/span\u003e \u003cspan class=\"nf\"\u003eauthenticateClient\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eApiKeyServiceClientCredentials\u003c/span\u003e \u003cspan class=\"n\"\u003ecredentials\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eApiKeyServiceClientCredentials\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ekey\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eTextAnalyticsClient\u003c/span\u003e \u003cspan class=\"n\"\u003eclient\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eTextAnalyticsClient\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ecredentials\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"n\"\u003eEndpoint\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eendpoint\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e};\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003eclient\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"c1\"\u003e//for TextAnalytics\u003c/span\u003e\n        \u003cspan class=\"k\"\u003estatic\u003c/span\u003e \u003cspan class=\"kt\"\u003edouble\u003c/span\u003e \u003cspan class=\"nf\"\u003esentimentAnalysisExample\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eITextAnalyticsClient\u003c/span\u003e \u003cspan class=\"n\"\u003eclient\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003emessage\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"c1\"\u003e//戻り値をdouble型に変更\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eresult\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eclient\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSentiment\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003emessage\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\"ja\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\u003cspan class=\"c1\"\u003e//引数messageを分析対象にし、言語は日本語に設定\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eDebug\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWriteLine\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e$\"User Message: \u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003emessage\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\u003cspan class=\"c1\"\u003e//引数messageの内容を出力\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eDebug\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWriteLine\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e$\"Sentiment Score1: \u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eScore\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"m\"\u003e0.00\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\u003cspan class=\"c1\"\u003e//出力確認1\u003c/span\u003e\n\n            \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003edouble\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"n\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eScore\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\u003cspan class=\"c1\"\u003e//分析スコアを返す\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e//for Twitter\u003c/span\u003e\n        \u003cspan class=\"k\"\u003estatic\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"nf\"\u003egetTweet\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eRandom\u003c/span\u003e \u003cspan class=\"n\"\u003ecRandom\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eSystem\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eRandom\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e \u003cspan class=\"c1\"\u003e//取得したツイートからランダムに1つ選択するための乱数\u003c/span\u003e\n            \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003etokens\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eTokens\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eCreate\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u0026lt;API KEY\u0026gt;\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\"\u0026lt;API SECRET\u0026gt;\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\"\u0026lt;ACCESS TOKEN\u0026gt;\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\"\u0026lt;ACCESS TOKEN SECRET\u0026gt;\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e  \u003cspan class=\"c1\"\u003e//接続用トークン発行\u003c/span\u003e\n            \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003etweet\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\u003cspan class=\"c1\"\u003e//取得したツイートを格納する変数\u003c/span\u003e\n\n            \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eparm\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eDictionary\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003eobject\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;();\u003c/span\u003e  \u003cspan class=\"c1\"\u003e//条件指定用Dictionary\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eparm\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s\"\u003e\"count\"\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e60\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e  \u003cspan class=\"c1\"\u003e//取得数\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eparm\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s\"\u003e\"screen_name\"\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"hagemasi1_bot\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e  \u003cspan class=\"c1\"\u003e//取得したいユーザーID\u003c/span\u003e\n\n\n            \u003cspan class=\"n\"\u003eTask\u003c/span\u003e \u003cspan class=\"n\"\u003etask\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eTask\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eFactory\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eStartNew\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003easync\u003c/span\u003e \u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003etweets\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003eawait\u003c/span\u003e \u003cspan class=\"n\"\u003etokens\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eStatuses\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eUserTimelineAsync\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eparm\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e \u003cspan class=\"c1\"\u003e//parmの内容に従ってツイートを取得\u003c/span\u003e\n\n                \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003erandom\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ecRandom\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eNext\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e61\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e \u003cspan class=\"c1\"\u003e//0～60の間の乱数を生成\u003c/span\u003e\n                \u003cspan class=\"n\"\u003etweet\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003etweets\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003erandom\u003c/span\u003e\u003cspan class=\"p\"\u003e].\u003c/span\u003e\u003cspan class=\"n\"\u003eText\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"c1\"\u003e//取得した60ツイートからrandom番目のツイートを格納\u003c/span\u003e\n\n            \u003cspan class=\"p\"\u003e}).\u003c/span\u003e\u003cspan class=\"nf\"\u003eUnwrap\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n            \u003cspan class=\"n\"\u003etask\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWait\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n            \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003etweet\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"c1\"\u003e//選んだツイートを戻り値として返す\u003c/span\u003e\n\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003estatic\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"nf\"\u003egetShioComment\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eRandom\u003c/span\u003e \u003cspan class=\"n\"\u003ecRandom\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eSystem\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eRandom\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e \u003cspan class=\"c1\"\u003e//乱数\u003c/span\u003e\n            \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003eres\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eshio\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e[]\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"s\"\u003e\"へー・・・。\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\"・・・だから？\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\"知らんわー。\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\"興味ないね。\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\"いや、聞いてないし。\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\"ふーん・・・。で？\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\"そういうのいいから。\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\"あーちょっと今忙しいからまた今度。\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\"・・・けっ！\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\"リア充乙。\"\u003c/span\u003e \u003cspan class=\"p\"\u003e};\u003c/span\u003e\n\n            \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003erandom\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ecRandom\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eNext\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e11\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eres\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eshio\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003erandom\u003c/span\u003e\u003cspan class=\"p\"\u003e];\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003eres\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e//for TextAnalytics\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eApiKeyServiceClientCredentials\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eServiceClientCredentials\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003ereadonly\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003eapiKey\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003eApiKeyServiceClientCredentials\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003eapiKey\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eapiKey\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eapiKey\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eoverride\u003c/span\u003e \u003cspan class=\"n\"\u003eTask\u003c/span\u003e \u003cspan class=\"nf\"\u003eProcessHttpRequestAsync\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eHttpRequestMessage\u003c/span\u003e \u003cspan class=\"n\"\u003erequest\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eCancellationToken\u003c/span\u003e \u003cspan class=\"n\"\u003ecancellationToken\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003erequest\u003c/span\u003e \u003cspan class=\"p\"\u003e==\u003c/span\u003e \u003cspan class=\"k\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"k\"\u003ethrow\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eArgumentNullException\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"request\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n            \u003cspan class=\"n\"\u003erequest\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eHeaders\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAdd\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Ocp-Apim-Subscription-Key\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eapiKey\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003ebase\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eProcessHttpRequestAsync\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003erequest\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ecancellationToken\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"27-azureへ再デプロイする\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#27-azure%E3%81%B8%E5%86%8D%E3%83%87%E3%83%97%E3%83%AD%E3%82%A4%E3%81%99%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e2.7 Azureへ再デプロイする\u003c/h1\u003e\n\n\u003cp\u003ePC上（ローカル）でBot Framework Emulatorを使って十分にテストができたら、Azure上に再度更新版のアプリをデプロイしましょう。\u003cbr\u003e\n\u003ca href=\"https://qiita.com/miokawa/private/c71f9f4b62ce2b1c2864\"\u003e第2部\u003c/a\u003eに公式ドキュメントに沿ったデプロイ方法の記載がありますが、ちょっと面倒な手順なので、今回はVisual Studioから直接デプロイしてみます。途中でAzureへのサインインを要求されたら、適宜サインインをお願いします。\u003c/p\u003e\n\n\u003cp\u003eまず、ソリューションエクスプローラーから、ソリューション名を右クリックし、\u003cstrong\u003e発行\u003c/strong\u003eを選択します。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/bbe37ea4ae32c63f6eb3d6377b7e1f6cb97f1ea4/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3539363239322f39346465656261312d383635312d356337392d383066382d6535616436393437636364612e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F596292%2F94deeba1-8651-5c79-80f8-e5ad6947ccda.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=49a2918fb5e535f041c0b075798d9cd8\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/596292/94deeba1-8651-5c79-80f8-e5ad6947ccda.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F596292%2F94deeba1-8651-5c79-80f8-e5ad6947ccda.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=8a15fdf1da30ded030fda6119618fb30 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e次にデプロイ先のAzureリソースを選んでいきます。今回は\u003ca href=\"https://qiita.com/miokawa/private/c71f9f4b62ce2b1c2864\"\u003e第2部\u003c/a\u003eで作成したAzureリソースに再デプロイするので、\u003cstrong\u003eApp Servive\u003c/strong\u003e、\u003cstrong\u003e既存のものを選択\u003c/strong\u003eを選んで、\u003cstrong\u003eプロファイルの作成\u003c/strong\u003eをクリックします。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/3473bba511642fa4b813d05cb4a19d3deadd81cb/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3539363239322f34633362623234642d666135382d623761312d356662632d3861336266353036343966622e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F596292%2F4c3bb24d-fa58-b7a1-5fbc-8a3bf50649fb.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=6ffea350261091abc59c9e797940580b\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/596292/4c3bb24d-fa58-b7a1-5fbc-8a3bf50649fb.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F596292%2F4c3bb24d-fa58-b7a1-5fbc-8a3bf50649fb.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=be6ea75be023a75a779607e1cb36049c 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e続いて、App Serviceの詳細を指定します。\u003cstrong\u003eサブスクリプション\u003c/strong\u003eの部分で、デプロイ先のAzureサブスクリプションを選びます。\u003cstrong\u003e表示\u003c/strong\u003e部分は\u003cstrong\u003eリソースグループ\u003c/strong\u003eを選択し、下のボックスでデプロイ対象のリソースグループ、WebAppリソースを選択して、OKをクリックします。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/e81942f855500f83193c7518062eac9c69869936/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3539363239322f37353761366434612d613430352d366634302d323734382d6338363231633065626165332e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F596292%2F757a6d4a-a405-6f40-2748-c8621c0ebae3.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=0f7df9aee26edcaa7007199e51fbba49\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/596292/757a6d4a-a405-6f40-2748-c8621c0ebae3.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F596292%2F757a6d4a-a405-6f40-2748-c8621c0ebae3.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=b09568a6a6ed475e4712bb0d06c85250 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e最後に\u003cstrong\u003e発行\u003c/strong\u003eをクリックして、デプロイが終わるのを待ちます。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/aca0bb1029864e2d709f6fbc5d7ccd854f817303/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3539363239322f65653736313065652d343139652d383339352d373232632d6537333531653938663765362e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F596292%2Fee7610ee-419e-8395-722c-e7351e98f7e6.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=1ab165f54bc537e35e7a71b9a6f501b4\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/596292/ee7610ee-419e-8395-722c-e7351e98f7e6.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F596292%2Fee7610ee-419e-8395-722c-e7351e98f7e6.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=78e68ca06ecf02c9cf15f3a05435c774 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eデプロイされたら、\u003ca href=\"https://qiita.com/miokawa/private/c71f9f4b62ce2b1c2864#25-web%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%81%A7%E3%81%AE%E3%83%86%E3%82%B9%E3%83%88\" id=\"reference-d076d6ae36b5c418aee6\"\u003e第2部 Webチャットでのテスト\u003c/a\u003eの手順を参考に、テストをします。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/145d9e7238389375192e314516018b6dafcb098c/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3539363239322f37303035316639392d616238362d346366362d373564322d6661313766613632653163322e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F596292%2F70051f99-ab86-4cf6-75d2-fa17fa62e1c2.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=36db402b90223a616544cce6681507da\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/596292/70051f99-ab86-4cf6-75d2-fa17fa62e1c2.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F596292%2F70051f99-ab86-4cf6-75d2-fa17fa62e1c2.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=613d71502fc3206c7512d2a31c75c49b 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eポジティブな発言とネガティブな発言をして、適切な返事が返ってきていれば成功です！\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"以降の工程について\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E4%BB%A5%E9%99%8D%E3%81%AE%E5%B7%A5%E7%A8%8B%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e以降の工程について\u003c/h1\u003e\n\n\u003cp\u003e以降の工程はこのようになっています。\u003cbr\u003e\n次回はいよいよ、Azure上にあるボットアプリと、LINE経由でおしゃべりができるようにしてみたいと思います。\u003c/p\u003e\n\n\u003col\u003e\n\u003cli\u003e\u003ca href=\"https://qiita.com/miokawa/private/6f1a3e480580e1e29abc\"\u003eBot Frameworkでチャットボットを作ってみよう！\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://qiita.com/miokawa/private/c71f9f4b62ce2b1c2864\"\u003eボットをAzure（クラウド）にデプロイしてみよう！\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://qiita.com/miokawa/private/cdb243401fe3c8d9d583\"\u003eCognitive Serviceでテキスト分析をしてみよう！\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"https://qiita.com/miokawa/private/eb9f16220a36f65d7098\"\u003eTwitterからつぶやきをとってきてみよう！\u003c/a\u003e\u003cstrong\u003e←イマココ\u003c/strong\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://qiita.com/miokawa/private/c6f0b550f8fa41a23228\"\u003eLINE経由でボットと話してみよう！\u003c/a\u003e\u003c/li\u003e\n\u003c/ol\u003e\n","createdAt":"2020-03-16T11:35:20Z","elapsedYearsFromLastModifiedAt":1,"encryptedId":"kAsdOc62CzBO+4pvp6ByFxKCi2roFTXXlA==--Kqu2H+2FNom2miWj--8wMm5rP+uNIz+36D8ve99w==","isBanned":false,"isDeprecated":true,"isDestroyableByViewer":false,"isEditRequestReadableByViewer":true,"isEditRequestSendableByViewer":true,"isLikableByViewer":true,"isLikedByViewer":false,"isPublic":true,"isSlide":false,"isStockableByViewer":true,"isStockedByViewer":false,"isSubscribableByViewer":false,"isSubscribedByViewer":false,"isUpdatableByViewer":false,"isUpdated":true,"lastModifiedAt":"2020-07-01T04:15:02Z","likesCount":0,"linkUrl":"https://qiita.com/miokawa/items/eb9f16220a36f65d7098","organization":null,"originalId":1187237,"stockedCount":0,"title":"やさしいチャットボットのつくりかた -4.Twitterからつぶやきをとってきてみよう！","toc":"\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%81%A9%E3%81%86%E3%81%84%E3%81%86%E8%A8%98%E4%BA%8B\"\u003eどういう記事？\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%A2%E3%82%B8%E3%82%A7%E3%83%B3%E3%83%80\"\u003eアジェンダ\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#2-twitter%E3%81%8B%E3%82%89%E3%81%A4%E3%81%B6%E3%82%84%E3%81%8D%E3%82%92%E3%81%A8%E3%81%A3%E3%81%A6%E3%81%8D%E3%81%A6%E3%81%BF%E3%82%88%E3%81%86\"\u003e2. Twitterからつぶやきをとってきてみよう！\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#21-%E4%BA%8B%E5%89%8D%E6%BA%96%E5%82%99\"\u003e2.1 事前準備\u003c/a\u003e\n\u003cul\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#twitter-developer%E7%99%BB%E9%8C%B2\"\u003eTwitter Developer登録\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#coretweet%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB\"\u003eCoreTweetインストール\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#22-sentimentanalysisexample%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E3%81%8B%E3%82%89%E5%88%86%E6%9E%90%E3%82%B9%E3%82%B3%E3%82%A2%E3%82%92%E8%BF%94%E3%81%99\"\u003e2.2 sentimentAnalysisExampleメソッドから分析スコアを返す\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#23-%E3%82%B9%E3%82%B3%E3%82%A2%E3%82%92%E5%85%83%E3%81%AB%E6%9D%A1%E4%BB%B6%E5%88%86%E5%B2%90%E3%82%92%E3%81%99%E3%82%8B\"\u003e2.3 スコアを元に条件分岐をする\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#24-%E5%8A%B1%E3%81%BE%E3%81%97%E5%AF%BE%E5%BF%9Ctwitter%E9%80%A3%E6%90%BA%E9%83%A8%E5%88%86%E3%82%92%E4%BD%9C%E3%82%8B\"\u003e2.4 励まし対応（Twitter連携）部分を作る\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#25-%E5%A1%A9%E5%AF%BE%E5%BF%9C%E9%83%A8%E5%88%86%E3%82%92%E4%BD%9C%E3%82%8B\"\u003e2.5 塩対応部分を作る\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#26-%E3%83%9C%E3%83%83%E3%83%88%E3%81%AB%E7%99%BA%E8%A8%80%E3%81%95%E3%81%9B%E3%82%8B\"\u003e2.6 ボットに発言させる\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cli\u003e\n\u003ca href=\"#27-azure%E3%81%B8%E5%86%8D%E3%83%87%E3%83%97%E3%83%AD%E3%82%A4%E3%81%99%E3%82%8B\"\u003e2.7 Azureへ再デプロイする\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E4%BB%A5%E9%99%8D%E3%81%AE%E5%B7%A5%E7%A8%8B%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6\"\u003e以降の工程について\u003c/a\u003e\n\u003c/li\u003e\n\n","totalPv":1997,"uuid":"eb9f16220a36f65d7098","banReason":null,"adventCalendarItem":null,"author":{"encryptedId":"hwWcRnhq4IOMKvcQPSjbNp2h7IAS--2vjPmJAR/VJFa0wZ--ndtSjmXvUyCjZU3QqCyCDA==","originalId":596292,"description":"趣味でちょっとコードを書いたり、アプリを作ってみたりしています。","facebookUrl":null,"githubUrl":"https://github.com/miookawa","isBlockingViewer":false,"isFollowableByViewer":true,"isFollowedByViewer":false,"isTweetWebNotificationReceivable":true,"linkedinUrl":null,"name":"","profileImageUrl":"https://s3-ap-northeast-1.amazonaws.com/qiita-image-store/0/596292/346cc83b2697e6eaa947a5915180be31b80cb7d8/x_large.png?1585988714","profileImageUrlW48":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fs3-ap-northeast-1.amazonaws.com%2Fqiita-image-store%2F0%2F596292%2F346cc83b2697e6eaa947a5915180be31b80cb7d8%2Fx_large.png%3F1585988714?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=48\u0026s=27c087c96f2814e8aa88c024f5235b99","profileImageUrlW75":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fs3-ap-northeast-1.amazonaws.com%2Fqiita-image-store%2F0%2F596292%2F346cc83b2697e6eaa947a5915180be31b80cb7d8%2Fx_large.png%3F1585988714?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=5216fd04905579dff5d84d10686f7db3","urlName":"miokawa","websiteUrl":"","twitterUrl":null,"twitterUrlName":null,"revealedOrganizations":{"edges":[]}},"tags":[{"name":"C#","urlName":"csharp"},{"name":"Twitter","urlName":"twitter"},{"name":"Azure","urlName":"azure"},{"name":"初心者","urlName":"%e5%88%9d%e5%bf%83%e8%80%85"},{"name":"BotFramework","urlName":"botframework"}],"followingLikers":{"edges":[]},"comments":{"totalCount":0}},"comments":[],"client":null,"ads_event_emitter":null}}</script>
