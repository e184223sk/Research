この記事はUnityゲーム開発者ギルド Advent Calendar 2020の25日目です。タイトルはTrailRendererに当たり判定を与えるための手法です。以前に別のアプローチとして、
TrailRendererの頂点座標に当たり判定用のオブジェクトを生成する
という記事を書きました。【参考リンク】：【Unity(C#)】TrailRendererの頂点座標を取得する方法しかし、数が多いと処理がカクつく原因になるので今回の手法もメモしておきます。ロジックとしてはまずTrailRendererを持つオブジェクトの子に
MeshColliderのみを持つオブジェクトを生成します。次に、TrailRendererのBakeMeshメソッドを使用し、
描画したTrailRendererと同じ形状のメッシュを生成します。最後に、MeshColliderに先ほど生成したメッシュを適用すれば完了です。ちなみに、子にコライダーだけ持つオブジェクトを作成している理由は
オフセット(座標)が0でないとコライダーの生成位置がずれるからです。
下記GIFがわかりやすいです。TrailRendererを持つオブジェクトにMeshColliderを直接付与すると、
生成したTrailRendererの座標分だけMeshColliderの位置がずれてしまいます。以上を踏まえてのデモです。
今回は2Dで平面的にTrailRendererを動かしているのでコライダーがいびつですが、
三次元な動きならさらにきれいなMeshColliderが生成されます。TrailRenderer.BakeMesh


