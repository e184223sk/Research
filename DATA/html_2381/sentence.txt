More than 1 year has passed since last update.EntityFrameworkCoreで、業務で何も考えずに名前を決めたせいで外部キー(以下、「FK」)で困ったので、テーブル名や定義名がどう設定されるのか確認した。結論
DbContextクラスのプロパティ名がそのままテーブル名になるこの場合だと、UserとCompanysのクラスが単数形に、
UserDetailとCompanyDetailsのクラスが複数形になる。結論
クラス名＋"Id"で自動生成される上記のように親テーブルから子テーブルに対してプロパティを実装した場合、EntityFrameworkCoreではシャドウプロパティとしてFKが自動的に設定され、テーブルにも実装される。
上の場合だと、データベースのCompanyDetailテーブルにはCompanysIdのカラムが実装される。クラスやプロパティの命名は昔からきちんと決めることが大事と言われていたけど、それを痛感した。
私がやってしまったのはFKのほうで、明示的にFKのプロパティを考えなしに実装した結果、CompanyIdとCompanysIdの両方がテーブルに実装されてしまった。EntityFrameworkCore シャドウ プロパティ
EntityFrameworkCore リレーションシップ


