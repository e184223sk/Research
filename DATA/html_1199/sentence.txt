More than 1 year has passed since last update.もくじ
⇒https://qiita.com/tera1707/items/4fda73d86eded283ec4f自分で作ったユーザーコントロールには依存関係プロパティがあり、そいつに画面側のプロパティをバインドして使う、というのは何となくわかったが、下記の動きの理解がいまひとつ足りてないせいで、作れなくはないがなんとなくしっくり来てない。⇒MSのドキュメントとか見てもこれ以上理解できそうにないので、実際に動かしてみて、動きを目で見てどういう動きをするのか確かめたい。.NET Framework 4.7.2を使用して下記を作成した。画面は下図のようになる。赤で囲ったところがユーザーコントロール。

ログのイメージ
画面側プロパティのバインディングのModeの違いで、画面側プロパティとユーザーコントロール側プロパティの値の変化時に、お互いがどのように変化するかを試す。見た目(xaml)コードビハインド見た目(xaml)コードビハインド当たり前の結果だが、
画面側とユーザーコントロール側の両方のプロパティの値の変化がお互いにリンクするのは、ModeがTwoWayの時のみ。
(リンク＝画面側プロパティが変化したら、ユーザーコントロール側のプロパティも一緒に変化(++)する、ということ)TwoWayにしておくと、画面とユーザーコントロールで、バインドしたお互いのプロパティを通して、同じ値を共有できるイメージになる。自分でいろいろ試してみた結果、下記のようなクセがあった。画面側のプロパティに値を代入すると、画面側のsetterを通るので、ユーザーコントロール側のプロパティのsetterも通るのかなと思っていたら、これが通らない。
(参考)画面側でプロパティに入れた値を、ユーザーコントロール側のプロパティで、下記のように値のチェックとか丸めとかをしようと思ってもできない。(setter通らない。上の参考サイトによると「直接SetValueを呼んでいるのでsetterは通らない」とのこと。)なぜか、今回のサンプル実験アプリだとそういう風になる。(なにか、実装方法がまずいのかも？)具体的には、下記の画面で、
「画面側で数字を＋＋」を5回押した後に、
「UserControl側で数字を＋＋する」を1回押すと、
そのあと「画面側で数字を＋＋」を5回押しても、TwoWayでバインドした数字は上がるのに、OneWayでバインドした数字は上がらなくなる。
なぜ？？逆流？のようなことをすると、バインドが何かおかしくなるのか？？


