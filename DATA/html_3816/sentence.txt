MagicOnion で個人的に気になってる Cysharp さんからバッチ用のフレームワークがリリースさたみたいです。とりあえず、ドキュメント読みながら hello world 的なものを動かしたいと思います。前と同じようにmacで開発していきます。とりあえずReadMeにある一番シンプルなコードを動かしてみます。まず、dotnetコマンドを使って新規プロジェクトを作成します。試しにちゃんと動くかdotnet runで確認してみます。
問題がなければ「Hello World!」と表示されます。次にパッケージを導入します。の.NET CLIにあるものをコピペします。これ以外にも複数のパッケージを使うので導入します。また、今回のコードではasyncを使うので、C#のバージョンを7.1以上にする必要があります。
.Net CoreプロジェクトでC#のバージョンを変更する方法
こちらの記事を参考に.csprojファイルに&lt;LangVersion&gt;7.3&lt;/LangVersion&gt;を追加します。
7.3にしたのはsandboxにあるサンプルの.csprojで7.3が指定されていたからです。最後にProgram.csを編集します。
これはReadMeに書いてあるまんまをコピペします。あとはdotnet runで実行します。ついでにpublishも試してみました。こちらも問題なく動きます。完成品はこちらのリポジトリに上げておきます。csproj ファイルの ConsoleAppFramework の Version を変更します。dotnet restore でパッケージの依存関係を復元します。
問題なく復元されたら、OKです。まだ動かしただけなので、わかっていませんがかなり簡単に導入できました。
引数をパースしたり、helpを作ったり意外とやろうとなると面倒なので、非常にありがたいですね！


