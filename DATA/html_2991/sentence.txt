More than 1 year has passed since last update.C#でイベント関連の処理を書く場合に、
簡単な処理を行うだけなのにわざわざ関数を用意するのが手間だったので
ラムダ式で書いてみたのでその際の覚書。この記述の問題点としてはイベント解除が出来ないこと。
まぁ実際はボタン押下イベントとかは動的に登録/解除することはあんまりないと思うんだけど。で、その場合にどうするかというと、以下のように書けばOK。要するにイベント解除する時は登録時と同じものを指定する必要があるので
EventHandlerを用意しておこう、ということ。個人的にこの手法で便利だったのは、
ローカル変数をイベント処理内で参照出来る点。具体的には元々ファイル検索みたいな処理を別スレッドで実行して、
処理が終わったらイベントが発行されるクラスがあって、
それを流用する際に同期的に使用する必要があったケース。
処理が終わったイベントで終了フラグをOnにして、
メインスレッド側ではその終了フラグがOnになるまで待機、みたいな処理を組む場合に
関数内て定義した情報だけで完結出来る。従来通りに関数を用意していた場合は処理完了フラグをクラスのメンバとして持つ必要がある。
でもこの処理でしか使わないのであればローカルに留めておきたいので
この書き方は有りだと思います。


