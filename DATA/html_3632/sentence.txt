More than 1 year has passed since last update.プロ生ちゃんを脱がしつつ。
モデルの材質ひとつひとつに対して透明度を0にするモーフを追加し、MMD上で個々を表示・非表示操作できるようにする。透明化方法が画一的でアクセサリごとに手動で追加するのは面倒そうだったのでまとめて作って要らないものは消す方式に。パーツ消すごとにpmxファイルが増えるのも微妙なのでボーンを考えなければ非表示はお手軽な方法なのかな。透明化しても中身がなければスカスカですし、中身があるなら最初からモーフが用意されていると思うので、ネクタイや髪留めなど表面上のアクセサリ用ですね。簡易実行用foreach(IPXMaterial ma in material) {
で材質をひとつずつ参照し、その材質のみを操作するモーフを新規作成。材質モーフIPXMaterialMorphOffset o = bdx.MaterialMorphOffset();
のうち、アルファ値を持つV4(vector4)ベクトルの最後のアルファ値を、今回は乗算なので0にセット。(加算タイプの場合は全部0のアルファ値を-1で非表示にする)という単純なスクリプト。アルファ値を0にするだけのスクリプトですがC#未経験、pmxの知識無しでもつくれるよーという優良環境。なんとなく実行環境が付いているなということが分かればOK。CSScript.txtの説明に習い、とりあえずサンプルスクリプトを読めば雰囲気はつかめるはず。エディターから 表示 → サンプルスクリプトすぐに書き始められるというものの、何が使えるのかがわからない。
唐突に始まるIPXMorph m = morph[0];のmorphなどはどこから来るのか。
その確認はヘッダーで。これらがヘッダーとして毎回実行されているのでグローバル変数的なものとしてなんとなく覚えておく。(解説の読み落としにより遠回り)使える変数や使い方の例は分かったが、それぞれがどんなメンバを持っているのかわからない。APIドキュメントのようなものはないかと問われたら、
(メニュー上で)サンプルプログラムの上にある「プラグインデータ一覧」(F2)がそれ。メンバのリストと簡単な説明が付いているので、どんな機能を持っていてどれを操作すればいいのか分かるはず。ただし、無から探すのは少し大変なので似ているスクリプトを探してどのクラスを操作すれば同系統の処理が出来そうかの目安を付けたほうがいいかも。すくなくともこの存在に気づかずType.GetMembersを使ったプリントデバックなんてしないように……明るさ調整モーフ追加スクリプトver 1.1 - BowlRoll
モーフの追加方法がわかるありがたいスクリプトPMD(X)エディタでの材質モーフ追加手順(パーツ透明化編):ニーナ（ひんぬー党P(neana)のブロマガ - ブロマガPMDEditorのCSScript開発に関する覚書１ | Ledの日記 | スラドPMDEditorのCSScript開発に関する覚書２ | Ledの日記 | スラドPMDEプラグインの作り方　モーフ操作編１:T0R0のブロマガ - ブロマガ無名関数 - Wikipedia#C#の無名関数Func , Action デリゲートとは？ (C#プログラミング)  C# 今更ですが、ラムダ式 - Qiitaプロ生ちゃん MMD 向け新モデル (Ver. 3) 公開！　Tシャツ・SD 版を追加 – プログラミング生放送型（クラス、構造体など）のすべてのメンバを取得する - .NET Tips (VB.NET,C#...)透明化してもパーツは残るので、剛体や影に影響が残る？
材質ごとのパーツのサイズ？頂点を操作して点程度に縮小するモーフにすれば？剛体判定は別っぽい？とここらへんは知識がないと難しい。


