More than 1 year has passed since last update.VRのFPS調整って大変ですよね。特にStandaloneデバイスしんどいですよね。ライティング調節して、頑張って作ったエフェクト泣く泣く消して、
オブジェクトの数もゴリゴリ削って、Shader最適化して、ポストエフェクト切って、
「よっしゃこれでFPSいいかんじでしょ！」って確認したら50とかだったら泣いちゃいます。「PCVRをスタンドアロンにコンバートしてよ！一回作って素材あるから楽勝でしょ！」
なんて言われた日には男泣きです。エディタ上のStatsで確認できるんですが、
Standaloneデバイスおよび、実行形式で書きだした場合の確認はHMD越しにしかFPSを確認することはできません。なので、スクリプト貼り付けたら勝手に画面にFPSが出現するってのを作りました。何番煎じなんだよお前、パクリ乙って感じだと思いますが、
せっかく作ったんで書かせてください。2019/08/14 追記
下記のコードだとカメラを余分に１つ増やしたことによる余計なレンダリング処理(?)か何かで
FPSを調べるためのスクリプトでFPSが低下するという漫談みたいな状態になっていました。実際にprofilerをチェックすると一目瞭然です。(ガクッとレンダリングの負荷が低下した瞬間が、FPSの表示をオフにした瞬間です)canvas_G.transform.localPosition = new Vector3(0,0,0.3f);の箇所で
カメラの30cm前方にワールドキャンバスを設置しています。最前面には表示されませんが、負荷は大幅に軽減されているはずです。空のゲームオブジェクトを生成してそれにアタッチするだけです。
オンオフはそのゲームオブジェクトのActiveを切り替えるだけです。下記箇所でアタッチするだけでリネームされるようになってます。FPSの計算自体はよくある1秒間記録ではなく0.5秒間記録して精度上げましょう1っていう計算方法のやつです。また、ここにあるやり方で、実装しているので最前面に描画されます。fpsText.font = Resources.GetBuiltinResource(typeof(Font), "Arial.ttf") as Font;
の部分です。何度やってもテキストをScriptから生成した場合はFontが設定されていない状態2になってしまいました。(私だけ?)
なのでフォントを引っ張ってきてます。テキストが表示されないだけでエラーは出なかったので見つけるのに時間がかかりました。自分でインポートしたフォントを利用する場合は、
インポートしたフォントをResources直下にぶち込んで
Font font = Resources.Load&lt;Font&gt;("Resourcesより下階層のパス名);
といった感じで取得できるそうです。3参考リンク ↩Unityのバージョンは2018.4.1f1 ↩参考リンク ↩


