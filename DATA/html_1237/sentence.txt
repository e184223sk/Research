More than 1 year has passed since last update.MVVMをマイルドにしてくれるフレームワークCaliburn.Microの紹介動画をもとに、だいたいの使い方を追体験してみる。ソリューションの作成～空ウィンドウを表示するところまでをやってみる。
c#初心者でもあるワイ君が2020年にもなってWPFに入門しようとしたが、どこから手をつけていいのか迷いつつQiita等をみていた。
むずかしくないWPF を見ると、WPFはMVVMパターンで構築するのが筋で、WinFormsのときのように 'コントロール.Text="はにゃーん"' のように直接ビューを操作するのは禁じ手らしい。
XAMLというXML派生言語（ビルド時にC#コード生成されるらしい）で外観設定して、ViewModelを介して描画やイベント処理するとのことで、そのあたりの作法をマイルドにするフレームワークがいくつかあるらしい。ふむふむ。WebとかVue.jsでいうとdata()を、computed()で表示するとかそういうかんじ？と雑な考えのもと、調査。MVVMまわりを楽にしてくれるフレームワークは色々あって迷った。
ググるとLivetなんかが日本初で歴史もあってよさそうな雰囲気だったけど、現在はほぼメンテナンスモードで.Net Core追従等の維持はされつつも新機能追加はしない方向性のようだった。
後発らしい Caliburn.Micro はどうだ？と思ったら、Qiitaに記事は少ないけど、YouTubeで使い方をレクチャしてくれるおじさんがいたので、そちらをなぞってみることにした。
動画のTimおじさんに従ってデモスタート。「新規作成」→「プロジェクト」で「WPFアプリ (.NET Framework)」を選択する。

チュートリアルということでプロジェクト名は「WOFtut01」とした。ソリューションエクスプローラで右クリックするメニューから「NuGetパッケージの管理」を選択。

参照から「Caliburn.Micro」（途中までタイピングすると2020年6月時点では3.2.0が候補ででてくるはず）を選択し、「インストール」する。MainWindows.xamlを削除する。削除したファイルの記述　StartupUri="MainWindow.xaml　を除去し、かわりに描画を担当する部分の記述を追加する。
動画を参考に直接編集する。xamlのタグは途中までタイプすると補完候補がでてくる。ソリューションエクスプローラで「追加」→「クラス」を選択。
名前を「Bootstrapper.cs」とする。
publicにして、BootstapperBaseを継承。継承させる部分をタイプしたところでVS2019が警告と提案をだしてくれるので、提案を受け入れる。

→自動的に using が入力される続いてコンストラクタを作る。中身は Initialize();のみ。
つづいてStartup用関数を作成する。
'ctor'とタイプしてタブを2回押すとsnippet展開される。動画のとおりにOnStartupを書き換える。DisplayRootViewFor部分が、削除したMainView.xamlの代わりになる部分。ソリューションエクスプローラで Models, Views, ViewModels の3フォルダを「新しいフォルダー」で追加。
ソリューションエクスプローラのViewModelsに、Bootstrapを作成したとき同様にクラス（ファイル）を追加。
ファイル名はShellViewModel.csとする（後述：命名規則が重要、ここではShellという内容のViewModelを表すとおもっておけばよい）
生成されたファイルは次の内容に修正する（publicにして、Screenを継承）ソリューションエクスプローラでViews下で、「追加」→「ウィンドウ(WPF)」を選択。
空のウィンドウが作成される。ウィンドウが出来たので、いざ実行！とすると次のようにエラーがでる。この時点で、Bootstrapper.csを開くと、() 部分に警告がでているままになっている。
Usingが不足しているので、次の2行を追加する（本記事の例ではnamespace がWPFtut01だが、途中までタイプすると補完され、ピリオドをうつと更に補完候補がでてくるので ViewModelsを追加する）これでエラーが消え、実行すると空のShellViewが表示できるようになった。正しくShellViewがよばれてることを実感する動画ではこのあたりウィンドウ表示のあたりで、命名規則について概説してくれる。
Caliburn.MicroではRoR等のCoCのように名前に基づいた紐づけが行われる（らしい）。
（ex: 'ほにゃViewModel.cs'に対し、'ほにゃView.xaml'）


