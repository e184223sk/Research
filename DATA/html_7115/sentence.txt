More than 5 years have passed since last update.どうも、初投稿です。AiginaCoderです。
さっそく本題に入っていきますこんな感じでシーン遷移をしてらっしゃる方が多いと思いますこれには以下の様な問題があります存在しないシーン名文字列を指定しまう可能性がある実行時にしかエラーが起きないので間違いが気が付きにくいシーン名を途中で変更したい場合、変更箇所が多くなる可能性があるこれは引数がstring型だから起きている問題です以下の様に、引数がenum型のシーン遷移関数を自分で作れば問題が解決できますこれで問題は解決されたわけですが、シーンが追加するたびに自分で正確にそのシーン名をenumに定義してやる必要がありますなんと実はBuildSetteingsに追加したScene名を取得する方法がありますこれを使い、enumで宣言していきたいですが動的にenumを宣言はできないので「シーン遷移をするためのクラスファイルを出力する」方向で解決します
ファイル出力なら、先ほどのシーン名配列を使用してenumを宣言したクラスファイルが作れます私はUnityの拡張エディタで作成した独自メニューを選んだら、シーン遷移をおこなうためのラッパークラスを出力するようにしました「BuildSettingsにシーンを追加した」というイベントが取得できれば完全な自動化が可能なのですが、自分が調べた限り方法がわかりませんでした。知っている方がいれば教えていただきたいですメニューを選んだら、シーン遷移をおこなうためのラッパークラスを出力するソースファイルはgithubにあげておきました
良ければお使いください
https://github.com/AiginaCoder/UnityTools/blob/master/SampleProject/Assets/Editor/CreateSceneTransitionManagerScriptEditor.cs使い方はCreateSceneTransitionManagerScriptEditor.csをAssets/Editorに入れてメニューに追加されたAiginaCoder/Create/MakeSceneTransitionManagerScriptを選択してOKを選ぶとScene遷移クラスがScriptsフォルダに出力されます
シーンをBuildSettingsに追加するたびにこの操作が必要です
あとはシーン遷移したいところでという感じです
自動でシーンID候補が出てくれるので簡単にシーン遷移ができますなにかありましたらコメントお願いします


