<!DOCTYPE html><html><head><meta charset="utf-8" /><title>.NET 5での嬉しい変更点 - Qiita</title><meta content="width=device-width,initial-scale=1,shrink-to-fit=no,viewport-fit=cover" name="viewport" /><meta content="#55c500" name="theme-color" /><meta content="XWpkTG32-_C4joZoJ_UsmDUi-zaH-hcrjF6ZC_FoFbk" name="google-site-verification" /><meta content="telephone=no" name="format-detection" /><link rel="canonical" href="https://qiita.com/SKKbySSK_TC/items/bdf2b4395bf3a74ab4c0" /><link href="/manifest.json" rel="manifest" /><link href="/opensearch.xml" rel="search" title="Qiita" type="application/opensearchdescription+xml" /><link as="script" href="https://www.googletagservices.com/tag/js/gpt.js" rel="preload" /><link href="https://securepubads.g.doubleclick.net" rel="preconnect" /><script async="" src="https://www.googletagservices.com/tag/js/gpt.js"></script><meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="o0Wsisya8u0L3AIJ/fc7ZcOQs8Do0SeQAnXZPAo9QLX4jzkVDOnEKLy1KQfAh5UREZfRAovOjtccSu++Rg6eKg==" /><link rel="shortcut icon" type="image/x-icon" href="https://cdn.qiita.com/assets/favicons/public/production-c620d3e403342b1022967ba5e3db1aaa.ico" /><link rel="apple-touch-icon" type="image/png" href="https://cdn.qiita.com/assets/favicons/public/apple-touch-icon-ec5ba42a24ae923f16825592efdc356f.png" /><link rel="stylesheet" media="all" href="https://cdn.qiita.com/assets/public/article-2eaa7dbedc42a8ea65c722cda46d0ebb.min.css" /><script src="https://cdn.qiita.com/assets/public/v3-article-bundle-63de2d91fef827269d3f6b958db2335b.min.js" defer="defer"></script><meta name="twitter:card" content="summary_large_image"><meta content="@Qiita" name="twitter:site" /><meta content="@SKKbySSK_TC" name="twitter:creator" /><meta property="og:type" content="article"><meta property="og:title" content=".NET 5での嬉しい変更点 - Qiita"><meta property="og:image" content="https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0&amp;w=1200&amp;mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND1MazVGVkNBMTQ0R240NEd1NWF5SjQ0R1g0NEdFNWFTSjVwdTA1NEs1JnR4dC1jb2xvcj0lMjMzMzMmdHh0LWZvbnQ9SGlyYWdpbm8lMjBTYW5zJTIwVzYmdHh0LXNpemU9NTQmdHh0LWNsaXA9ZWxsaXBzaXMmdHh0LWFsaWduPWNlbnRlciUyQ21pZGRsZSZzPWQ3ZjdkZWE3ZWM0YWYxNmI4ZjMxM2U2MTlhZWQ2YmQ4&amp;mark-align=center%2Cmiddle&amp;blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RRk5MUzJKNVUxTkxYMVJEJnR4dC1jb2xvcj0lMjMzMzMmdHh0LWZvbnQ9SGlyYWdpbm8lMjBTYW5zJTIwVzYmdHh0LXNpemU9NDUmdHh0LWFsaWduPXJpZ2h0JTJDYm90dG9tJnM9MTNiZGI5YTlkYWJhNjEzNGUyNWZmZDljNzc5MDI5ZGY&amp;blend-align=center%2Cmiddle&amp;blend-mode=normal&amp;s=9036a1a8bddee26975a5aaaa5a253139"><meta property="og:description" content="こちらはDeNA 21 新卒 Advent Calendar 2020の10日目の記事です。

正式リリースされたばかりの.NET 5についての情報を自分の中でまとめたかったため、今回の記事を書きました。
主にAnnouncing ...."><meta content="https://qiita.com/SKKbySSK_TC/items/bdf2b4395bf3a74ab4c0" property="og:url" /><meta content="Qiita" property="og:site_name" /><meta content="564524038" property="fb:admins" /><meta content="C#,.NET,.NETFramework,.NETCore" name="keywords" /><script>!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window, document,'script',
'https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '668972150489891');
fbq('track', 'PageView');</script><style data-emotion-css="17jxvjw 11t2ec1 1dvr2p8 18lkoru 1g4cku8 1iupg5d ijvq0v 15cocm3 12rp90f 115f4t 1b8uj5v 79elbk 16hhh7b fcbn8c 1gj7nt 154zy0m yikrym 1jqivyb 1ode1bp le4d8r 1hbd3g7 helsa7 8qb8m4 2imjyh he5w1s 70qvj9 3ojehk 100alwu 1dtnjt5 10ougpm 1ay9vb9 m19uds ne2zqn k008qs 1lbjcyg cgzq40 1wa99t2 1l3zk9f 4czcte 1yzj1fm 1uv1qiv 109dbrr 5jpx49 mnxgyc 1vlpknv fsjkhv 1b17vb0 7i7f4d"}>.css-17jxvjw{display:grid;display:-ms-grid;grid-template-columns:80px minmax(0,1fr) 300px;-ms-grid-columns:80px minmax(0,1fr) 300px;grid-template-rows:minmax(270px,auto) 1fr;-ms-grid-rows:minmax(270px,auto) 1fr;max-width:1280px;margin-right:auto;margin-left:auto;padding-top:24px;padding-right:24px;padding-left:24px;}@media (max-width:1200px){.css-17jxvjw{padding-bottom:0;padding-left:0;padding-right:0;}}@media (max-width:992px){.css-17jxvjw{grid-template-columns:80px 452px 300px;-ms-grid-columns:80px 452px 300px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}}@media (max-width:770px){.css-17jxvjw{display:block;}}@media (max-width:480px){.css-17jxvjw{padding-top:0;}}.css-11t2ec1{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;z-index:5;position:-webkit-sticky;position:sticky;top:calc(56px + 24px + 16px + 32px - 16px);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:16px;width:80px;}.css-11t2ec1:after{content:'';display:table;}.css-11t2ec1:before{content:'';display:table;}@media (max-width:770px){.css-11t2ec1{display:none;}}.css-1dvr2p8{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-18lkoru{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;background-color:#FFFFFF;}.css-1g4cku8{display:inline-block;vertical-align:middle;height:20px;width:20px;fill:#55C500;}.css-1iupg5d{color:#55C500;cursor:pointer;font-size:14px;font-weight:bold;}.css-ijvq0v{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-15cocm3{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#FFFFFF;border:2px solid #6E6F70;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:2px 0px 0px;width:40px;}.css-12rp90f{display:inline-block;vertical-align:bottom;height:17.77777777777778px;width:16px;fill:#6E6F70;}.css-115f4t{color:#6E6F70;font-size:14px;font-weight:bold;}.css-1b8uj5v{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;margin-bottom:16px;padding:0;}.css-79elbk{position:relative;}.css-16hhh7b{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;padding:0;}.css-fcbn8c{display:none;bottom:initial;left:initial;right:initial;top:initial;left:100%;top:calc(-8px - (14px * 1.8) - 16px - 4px);}.css-1gj7nt{color:rgba(0,0,0,0.6);font-size:14px;font-weight:bold;line-height:1.8;padding:8px 16px;}.css-154zy0m{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.87);cursor:pointer;font-size:16px;font-weight:normal;line-height:1.8;padding:4px 16px;}.css-154zy0m:hover{-webkit-text-decoration:none;text-decoration:none;background-color:#F2F2F2;}.css-yikrym{width:20px;}.css-1jqivyb{color:rgba(0,0,0,0.6);font-size:13px;}.css-1ode1bp{background-color:rgba(0,0,0,0.12);height:1px;width:100%;margin:8px 0;}.css-le4d8r{display:inline-block;vertical-align:middle;height:13px;width:13px;fill:rgba(0,0,0,0.6);}.css-1hbd3g7{height:250px;}.css-helsa7{background-color:#FFFFFF;padding:32px;margin-bottom:24px;}@media (max-width:992px){.css-helsa7{margin:0 auto 40px;}}@media (max-width:480px){.css-helsa7{margin:0 0 40px;padding:32px 16px;}}.css-8qb8m4{margin-bottom:48px;}.css-2imjyh{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-he5w1s{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;width:100%;}@media (max-width:770px){.css-he5w1s{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}}.css-70qvj9{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.css-3ojehk{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;margin-right:4px;}.css-100alwu{display:inline-block;border-radius:50%;line-height:1;overflow:hidden;vertical-align:middle;}.css-1dtnjt5{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-10ougpm{color:rgba(0,0,0,0.87);font-size:14px;font-weight:600;line-height:1.8;margin-right:4px;text-wrap:break-word;word-break:break-all;}.css-1ay9vb9{margin-right:16px;}.css-m19uds{color:rgba(0,0,0,0.6);font-size:14px;line-height:1.8;}@media (max-width:770px){.css-ne2zqn{margin-top:4px;}}.css-k008qs{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}.css-1lbjcyg{box-shadow:0 0 0 1px rgba(0,0,0,0.12) inset;color:rgba(0,0,0,0.6);font-size:14px;font-weight:bold;line-height:180%;padding:0px 4px;}.css-cgzq40{color:rgba(0,0,0,0.87);font-size:32px;font-weight:bold;line-height:1.4;margin-top:8px;text-wrap:break-word;word-break:break-all;}.css-1wa99t2{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.6);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:8px;}.css-1l3zk9f{color:rgba(0,0,0,0.6);font-size:20px;margin-right:8px;}.css-4czcte{margin-right:4px;color:inherit;font-size:14px;line-height:1.8;}.css-4czcte:not(:last-child)::after{content:',';margin-right:4px;}.css-1yzj1fm{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:32px;}.css-1uv1qiv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-size:20px;height:32px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin-right:16px;outline:none;padding:0;width:32px;}.css-109dbrr{background-color:#F9F9F9;border-top:1px solid rgba(0,0,0,0.12);bottom:0;box-shadow:0px 1px 4px rgba(0,0,0,0.14);display:none;height:calc(env(safe-area-inset-bottom,0px) + 56px);-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding-bottom:env(safe-area-inset-bottom);position:-webkit-sticky;position:sticky;width:100%;z-index:2000;}@media (max-width:770px){.css-109dbrr{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}.css-5jpx49{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:space-evenly;-webkit-justify-content:space-evenly;-ms-flex-pack:space-evenly;justify-content:space-evenly;width:100%;}.css-mnxgyc{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1vlpknv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;margin-right:4px;background-color:#FFFFFF;}.css-fsjkhv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1b17vb0{color:#6E6F70;font-size:14px;font-weight:bold;margin-left:4px;}.css-7i7f4d{display:none;bottom:initial;left:initial;right:initial;top:initial;bottom:32px;right:0;}</style></head><body><div class="allWrapper"><div><div id="GlobalHeader-react-component-2f7cb29e-a68c-4c44-a61f-ad62ddde79f9"><div class="st-Header"><div class="st-Header_container"><div class="st-Header_start"><a href="/" class="st-Header_logo"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 426.57 130"><circle cx="167.08" cy="21.4" r="12.28"></circle><path d="M250.81 29.66h23.48v18.9h-23.48z"></path><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z"></path><circle cx="216.33" cy="21.4" r="12.28"></circle></svg></a><div class="st-Header_communitySelector" tabindex="0"><span class="fa fa-caret-down"></span></div><div class="st-Header_dropdown"><div class="st-Header_dropdownHeading">Qiita Teams that are logged in</div><div class="st-Header_dropdownItemNote">You are not logged in to any team</div><hr class="st-Header_dropdownDivider st-Header_dropdownDivider-shrink"/><a href="https://teams-center.qiita.com/find_team" class="st-Header_dropdownItem"><span class="fa fa-fw fa-sign-in st-Header_dropdownItemIcon"></span><div>Log in to Qiita Team</div></a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Community</div><a href="/organizations" class="st-Header_dropdownItem">Organization</a><a href="/official-events/open" class="st-Header_dropdownItem">Event</a><a href="/advent-calendar" class="st-Header_dropdownItem">Advent Calendar</a><a href="https://qiitadon.com/" class="st-Header_dropdownItem" target="_blank">Qiitadon (β)</a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Service</div><a href="https://jobs.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Jobs</a><a href="https://zine.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Zine</a><a href="https://blog.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Blog</a></div><form class="st-Header_search" action="/search" method="get"><span class="fa fa-search st-Header_searchIcon"></span><input type="search" class="st-Header_searchInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form><form class="st-Header_searchModal" action="/search" method="get"><input type="text" class="st-Header_searchModalInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form></div><div class="st-Header_end"><div class="st-Header_searchButton"><span class="fa fa-search"></span></div><a class="st-Header_signupButton" href="/signup?redirect_to=%2FSKKbySSK_TC%2Fitems%2Fbdf2b4395bf3a74ab4c0">Signup</a><a class="st-Header_loginLink" href="/login?redirect_to=%2FSKKbySSK_TC%2Fitems%2Fbdf2b4395bf3a74ab4c0">Login</a></div><div class="st-Header_overlay"></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="GlobalHeader" data-dom-id="GlobalHeader-react-component-2f7cb29e-a68c-4c44-a61f-ad62ddde79f9">{"unreadNotificationsCount":null,"realms":[{"humanName":"Qiita","isCurrentRealm":true,"isQiita":true,"isQiitaTeam":false,"loggedInUser":null,"teamId":null,"url":"https://qiita.com/"}],"teamFindUrl":"https://teams-center.qiita.com/find_team","isTeamOnlyUser":null,"currentUser":null}</script>
      
</div><div class="st-HeaderAlert st-HeaderAlert-warning"><div class="st-HeaderAlert_body"></div></div><script type="application/ld+json">{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"/","name":"Qiita"}},{"@type":"ListItem","position":2,"item":{"@id":"/tags/csharp","name":"C#"}}]}</script><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","datePublished":"2020-12-07T12:39:52.000+09:00","dateModified":"2020-12-10T07:00:37.000+09:00","headline":".NET 5での嬉しい変更点","image":"https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0\u0026w=1200\u0026mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND1MazVGVkNBMTQ0R240NEd1NWF5SjQ0R1g0NEdFNWFTSjVwdTA1NEs1JnR4dC1jb2xvcj0lMjMzMzMmdHh0LWZvbnQ9SGlyYWdpbm8lMjBTYW5zJTIwVzYmdHh0LXNpemU9NTQmdHh0LWNsaXA9ZWxsaXBzaXMmdHh0LWFsaWduPWNlbnRlciUyQ21pZGRsZSZzPWQ3ZjdkZWE3ZWM0YWYxNmI4ZjMxM2U2MTlhZWQ2YmQ4\u0026mark-align=center%2Cmiddle\u0026blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RRk5MUzJKNVUxTkxYMVJEJnR4dC1jb2xvcj0lMjMzMzMmdHh0LWZvbnQ9SGlyYWdpbm8lMjBTYW5zJTIwVzYmdHh0LXNpemU9NDUmdHh0LWFsaWduPXJpZ2h0JTJDYm90dG9tJnM9MTNiZGI5YTlkYWJhNjEzNGUyNWZmZDljNzc5MDI5ZGY\u0026blend-align=center%2Cmiddle\u0026blend-mode=normal\u0026s=9036a1a8bddee26975a5aaaa5a253139","mainEntityOfPage":"https://qiita.com/SKKbySSK_TC/items/bdf2b4395bf3a74ab4c0","author":{"@type":"Person","address":"","email":null,"identifier":"SKKbySSK_TC","name":"SKKbySSK_TC","image":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F240790%2Fprofile-images%2F1604539312?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=deaaed03711a3ffbcac2ae1715bfb834","url":"https://qiita.com/SKKbySSK_TC","description":"","memberOf":[{"@type":"Organization","address":"東京都渋谷区渋谷二丁目24番12号 渋谷スクランブルスクエア40F","legalName":"株式会社ディー・エヌ・エー","image":"https://s3-ap-northeast-1.amazonaws.com/qiita-organization-image/2d269c3551c6ad1f3e5bc4be0b507dcb5ab31318/original.jpg?1630536428","logo":"https://s3-ap-northeast-1.amazonaws.com/qiita-organization-image/77fe0bc145892664d307e63dcfbc7a381345ca47/original.jpg?1539161148","identifier":"dena_coltd","description":"We delight people beyond their wildest dreams."}]},"publisher":{"@type":"Organization","name":"Qiita","logo":{"@type":"ImageObject","url":"//cdn.qiita.com/assets/public/qiita-logo-c39ded593afa388e2e1ba435b110554e.png"}}}</script><style type="text/css">.wb-CampaignLink {
  background-color: #333333;
  width: 100%;
}

.wb-CampaignLink_container {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  max-width: 1100px;
  margin: 0 auto;
  font-size: 13px;
  padding: 0.8em;
}
.wb-CampaignLink_container > a {
  color: #fff;
}

.wb-CampaignLink_container > a:hover {
  text-decoration: underline;
}</style><div class="wb-CampaignLink"><div class="wb-CampaignLink_container"><a target="_blank" id="header_text_message_1" href="https://zine.qiita.com/interview/202105-uzabase/?utm_source=qiita&amp;utm_medium=header-banner">CTO業務を積極的に権限移譲するユーザベースの開発組織とは</a><a target="_blank" id="header_text_message_2" href="https://zine.qiita.com/interview/202105-uzabase/?utm_source=qiita&amp;utm_medium=header-banner">詳しくはこちら</a></div><script>td.trackEvent(
  'front_events',
  {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"SKKbySSK_TC","type":"items","id":"bdf2b4395bf3a74ab4c0"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Show","data":{"message":"CTO業務を積極的に権限移譲するユーザベースの開発組織とは","url":"https://zine.qiita.com/interview/202105-uzabase/?utm_source=qiita\u0026utm_medium=header-banner","sub_message":"詳しくはこちら"}}
)</script><script>document.getElementById('header_text_message_1').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"SKKbySSK_TC","type":"items","id":"bdf2b4395bf3a74ab4c0"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":2,"pos_id":"header_text_message_1","message":"CTO業務を積極的に権限移譲するユーザベースの開発組織とは","url":"https://zine.qiita.com/interview/202105-uzabase/?utm_source=qiita\u0026utm_medium=header-banner","sub_message":"詳しくはこちら"}}
  )
})</script><script>document.getElementById('header_text_message_2').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"SKKbySSK_TC","type":"items","id":"bdf2b4395bf3a74ab4c0"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":2,"pos_id":"header_text_message_2","message":"CTO業務を積極的に権限移譲するユーザベースの開発組織とは","url":"https://zine.qiita.com/interview/202105-uzabase/?utm_source=qiita\u0026utm_medium=header-banner","sub_message":"詳しくはこちら"}}
  )
})</script></div><script type="application/json" id="js-react-on-rails-context">{"railsEnv":"production","inMailer":false,"i18nLocale":"en","i18nDefaultLocale":"en","href":"https://qiita.com/SKKbySSK_TC/items/bdf2b4395bf3a74ab4c0","location":"/SKKbySSK_TC/items/bdf2b4395bf3a74ab4c0","scheme":"https","host":"qiita.com","port":null,"pathname":"/SKKbySSK_TC/items/bdf2b4395bf3a74ab4c0","search":null,"httpAcceptLanguage":null,"actionPath":"public/items#show","settings":{"analyticsTrackingId":"UA-24675221-12","assetsMap":{},"csrfToken":"uZu3p1vhwcdXCthxmehfd1TAqFtFWR6KcBZ4aB6Q7TjiUSI4m5L3AuBj83+kmPEDhsfKmSZGt81uKU7qUqMzpw==","locale":"en"},"currentUser":null,"isLoggedIn":false,"recaptchaSiteKey":"6LfNkiQTAAAAAM3UGnSquBy2akTITGNMO_QDxMw6","serverSide":false}</script>
<div id="PersonalArticlePage-react-component-4f87807b-6597-4693-818d-9b4ac0b91454"><div class="p-items_wrapper"><div class=" css-17jxvjw"><div class="css-11t2ec1"><div class="css-1dvr2p8"><button class=" css-18lkoru"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/SKKbySSK_TC/items/bdf2b4395bf3a74ab4c0/likers" class="css-1iupg5d">26</a></div><div class="css-ijvq0v"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-115f4t">12</span></div><div class="css-1b8uj5v"><span class="fa fa-twitter"></span></div><div class="css-1b8uj5v"><span class="fa fa-facebook"></span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-fcbn8c"><div class="css-1gj7nt">Improve article</div><a href="/drafts/bdf2b4395bf3a74ab4c0/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/SKKbySSK_TC/items/bdf2b4395bf3a74ab4c0/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/SKKbySSK_TC/items/bdf2b4395bf3a74ab4c0/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/SKKbySSK_TC/items/bdf2b4395bf3a74ab4c0/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/SKKbySSK_TC/items/bdf2b4395bf3a74ab4c0.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div><div class="p-items_options"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_toc"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_main"><div class="css-helsa7"><div class="css-8qb8m4"><div class="it-AdcalRibbon"><a href="/organizations/dena_coltd"><img src="https://s3-ap-northeast-1.amazonaws.com/qiita-organization-image/77fe0bc145892664d307e63dcfbc7a381345ca47/original.jpg?1539161148" class="it-AdcalRibbon_orgImage"/></a><span><a href="/advent-calendar/2020/dena-21-shinsotsu" class="it-AdcalRibbon_title">DeNA 21 新卒<!-- --> Advent Calendar<!-- --> <!-- -->2020</a>Day 10</span></div><div class="css-2imjyh"><div class="css-he5w1s"><div class="css-70qvj9"><div class="css-3ojehk"><a href="/SKKbySSK_TC"><img class="css-100alwu eyfquo10" src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/240790/profile-images/1604539312" width="24" height="24" loading="lazy"/></a></div><div class="css-1dtnjt5"><a href="/SKKbySSK_TC" class="css-10ougpm">@<!-- -->SKKbySSK_TC</a><a href="/organizations/dena_coltd" class="css-10ougpm">(<!-- -->株式会社ディー・エヌ・エー<!-- -->)</a><div class="css-1ay9vb9"><span><meta content="2020-12-07T03:39:52Z"/><time dateTime="2020-12-09T22:00:37Z" class="css-m19uds">updated at 2020-12-09</time></span></div></div></div><div class="css-ne2zqn"><div class="css-k008qs"><div class="css-1lbjcyg">Organization</div></div></div></div></div><h1 class="css-cgzq40">.NET 5での嬉しい変更点</h1><div class="css-1wa99t2"><span class="fa fa-tags mr-1of2 css-1l3zk9f" aria-hidden="true"></span><a href="/tags/csharp" class="css-4czcte">C#</a><a href="/tags/.net" class="css-4czcte">.NET</a><a href="/tags/.netframework" class="css-4czcte">.NETFramework</a><a href="/tags/.netcore" class="css-4czcte">.NETCore</a></div></div><section class="it-MdContent"><div id="personal-public-article-body"><div><p>こちらは<a href="https://qiita.com/advent-calendar/2020/dena-21-shinsotsu">DeNA 21 新卒 Advent Calendar 2020</a>の10日目の記事です。</p>

<p>正式リリースされたばかりの.NET 5についての情報を自分の中でまとめたかったため、今回の記事を書きました。<br>
主に<a href="https://devblogs.microsoft.com/dotnet/announcing-net-5-0/" rel="nofollow noopener" target="_blank">Announcing .NET 5.0</a>の中から個人的に嬉しい変更点を紹介・説明していきます。</p>

<h2>
<span id="net-5について" class="fragment"></span><a href="#net-5%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>.NET 5について</h2>

<p>2020/11/20に.NET 5.0が正式リリースされました。</p>

<p>.NET系について簡単に整理すると、</p>

<ul>
<li>今後、.NET Frameworkにはバグ修正とセキュリティ修正が行われる

<ul>
<li>明記されていないが、新機能は恐らく追加されない

<ul>
<li><a href="https://devblogs.microsoft.com/dotnet/net-core-is-the-future-of-net/" rel="nofollow noopener" target="_blank">.NET Core is the Future of .NET</a></li>
</ul>
</li>
</ul>
</li>
<li>.NET Core 3.0の次期バージョンが.NET 5.0となる</li>
</ul>

<p>となっています。</p>

<p>.NET Coreがバージョン4を飛ばした理由は、<a href="https://devblogs.microsoft.com/dotnet/introducing-net-5/" rel="nofollow noopener" target="_blank">Introducing .NET 5</a>に明記されています。</p>

<blockquote>
<p>We’re skipping the version 4 because it would confuse users that are familiar with the .NET Framework, which has been using the 4.x series for a long time. Additionally, we wanted to clearly communicate that .NET 5 is the future for the .NET platform.</p>
</blockquote>

<p>要約すると「長年使われている.NET Framework 4.x系と混同しちゃうかもしれないから」ということのようです。</p>

<p>.NET 5.0では、主にパフォーマンス向上が重点的に行われました。加えて、いくつか新機能も追加されたようです。<br>
今回は、その中でも個人的に嬉しかった変更点についてピックアップしたいと思います。</p>

<h2>
<span id="httpclientにjson拡張メソッド追加" class="fragment"></span><a href="#httpclient%E3%81%ABjson%E6%8B%A1%E5%BC%B5%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E8%BF%BD%E5%8A%A0"><i class="fa fa-link"></i></a>HttpClientにJSON拡張メソッド追加</h2>

<p><a href="https://devblogs.microsoft.com/dotnet/announcing-net-5-0/#httpclient-extension-methods" rel="nofollow noopener" target="_blank">HttpClient extension methods</a></p>

<p>C#でhttp経由の通信を行う際に、よくHttpClientが使われます。<br>
いままで、JSON形式のレスポンスを取得する際は、以下のように3ステップに分けて実装を行う必要がありました。</p>

<div class="code-frame" data-lang="cs"><div class="highlight"><pre class="with-code"><code><span class="c1">// .NET Core 3以前</span>
<span class="kt">var</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">HttpClient</span><span class="p">();</span>
<span class="kt">var</span> <span class="n">response</span> <span class="p">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="nf">GetAsync</span><span class="p">(</span><span class="s">"https://example.com/example.json"</span><span class="p">);</span> <span class="c1">// 1.レスポンスを受け取る</span>
<span class="kt">var</span> <span class="n">jsonBody</span> <span class="p">=</span> <span class="k">await</span> <span class="n">response</span><span class="p">.</span><span class="n">content</span><span class="p">.</span><span class="nf">ReadAsStringAsync</span><span class="p">();</span> <span class="c1">// 2.コンテンツを文字列として読み出し</span>
<span class="kt">var</span> <span class="n">data</span> <span class="p">=</span> <span class="n">JsonSerializer</span><span class="p">.</span><span class="n">Deserialize</span><span class="p">&lt;</span><span class="n">Message</span><span class="p">&gt;(</span><span class="n">jsonBody</span><span class="p">);</span> <span class="c1">// 3.デシリアライズ</span>
</code></pre></div></div>

<p>これだと、API通信をよく行うアプリでは、書き方が冗長で非常に面倒です。<br>
.NET 5.0では、上記の実装がよりシンプルになりました。</p>

<div class="code-frame" data-lang="cs"><div class="highlight"><pre class="with-code"><code><span class="c1">// .NET 5.0</span>
<span class="k">using</span> <span class="nn">System.Net.Http.Json</span><span class="p">;</span>

<span class="kt">var</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">HttpClient</span><span class="p">();</span>
<span class="kt">var</span> <span class="n">data</span> <span class="p">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">GetFromJsonAsync</span><span class="p">&lt;</span><span class="n">Message</span><span class="p">&gt;(</span><span class="s">"https://example.com/example.json"</span><span class="p">);</span>
</code></pre></div></div>

<p>たったこれだけです。すごい！</p>

<p>加えて、忘れがちな以下の処理が実装されています。</p>

<ul>
<li>ステータスコードの判別

<ul>
<li>Success(200~299)以外では<code>HttpRequestException</code>が発生</li>
</ul>
</li>
<li>文字コードの自動解析

<ul>
<li>デフォルトではUTF-8</li>
<li>
<code>Content-Type</code>に<code>charset</code>が含まれる場合は、その文字コードでデコード</li>
</ul>
</li>
</ul>

<p>ただし、レスポンスの<code>Content-Type</code>が<code>application/json</code>になっているかは判定していない模様です。<code>text/plain</code>で試したところ、エラー無しでJSONとしてパースされました。（3/31時点の<a href="https://www.stevejgordon.co.uk/sending-and-receiving-json-using-httpclient-with-system-net-http-json" rel="nofollow noopener" target="_blank">記事</a>では判定していたようですが、その後削除された？）</p>

<p>上記では、<code>GET</code>メソッドを例として書きましたが、<code>POST</code>と<code>PUT</code>でも同様の拡張メソッドが追加されました。(<code>PATCH</code>や<code>DELETE</code>などには追加されていない模様です)<br>
もちろん、<code>POST</code>と<code>PUT</code>では引数に何らかのオブジェクトを渡すとJSONシリアライズして送信してくれます。</p>

<h3>
<span id="httpcontent拡張メソッド" class="fragment"></span><a href="#httpcontent%E6%8B%A1%E5%BC%B5%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89"><i class="fa fa-link"></i></a>HttpContent拡張メソッド</h3>

<p>HttpContentクラスに拡張メソッドとして<code>ReadFromJsonAsync</code>が追加されました。<br>
こちらを使うことで、任意のHttpContentからJSONデータを扱えるようになります。</p>

<p>使用する場面としては、以下が挙げられます。</p>

<ul>
<li>
<code>PATCH</code>や<code>DELETE</code>リクエストのレスポンスをJSONとして扱いたい</li>
<li>Success(200~299)以外のステータスコードでも、レスポンス内容をJSONとして扱いたい</li>
</ul>

<div class="code-frame" data-lang="cs"><div class="highlight"><pre class="with-code"><code><span class="kt">var</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">HttpClient</span><span class="p">();</span>
<span class="kt">var</span> <span class="n">response</span> <span class="p">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="nf">GetAsync</span><span class="p">(</span><span class="s">"https://example.com/example.json"</span><span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">IsSuccessStatusCode</span><span class="p">)</span>
<span class="p">{</span>
  <span class="c1">// OK処理</span>
  <span class="kt">var</span> <span class="n">data</span> <span class="p">=</span> <span class="k">await</span> <span class="n">response</span><span class="p">.</span><span class="n">content</span><span class="p">.</span><span class="n">ReadFromJsonAsync</span><span class="p">&lt;</span><span class="n">Message</span><span class="p">&gt;();</span>
<span class="p">}</span>
<span class="k">else</span>
<span class="p">{</span>
  <span class="c1">// NG処理</span>
  <span class="kt">var</span> <span class="n">data</span> <span class="p">=</span> <span class="k">await</span> <span class="n">response</span><span class="p">.</span><span class="n">content</span><span class="p">.</span><span class="n">ReadFromJsonAsync</span><span class="p">&lt;</span><span class="n">ErrorInfo</span><span class="p">&gt;();</span>
<span class="p">}</span>
</code></pre></div></div>

<h3>
<span id="jsoncontent" class="fragment"></span><a href="#jsoncontent"><i class="fa fa-link"></i></a>JsonContent</h3>

<p>HttpContentを継承した<a href="https://docs.microsoft.com/ja-jp/dotnet/api/system.net.http.json.jsoncontent?view=net-5.0" rel="nofollow noopener" target="_blank">JsonContent</a>クラスが、拡張メソッドの追加に伴って追加されました。</p>

<p>以下のようなコードを書くことで、<code>Content-Type: application/json</code>を設定済みのJsonContentを生成できます。(<code>charset</code>に応じてエンコードしてくれます。デフォルトではUTF-8)</p>

<div class="code-frame" data-lang="cs"><div class="highlight"><pre class="with-code"><code><span class="kt">var</span> <span class="n">content</span> <span class="p">=</span> <span class="n">JsonContent</span><span class="p">.</span><span class="n">Create</span><span class="p">&lt;</span><span class="n">Message</span><span class="p">&gt;(</span><span class="n">message</span><span class="p">);</span> <span class="c1">// Content-Type: application/json; charset=utf-8</span>
</code></pre></div></div>

<h3>
<span id="net-50以前でも使いたい" class="fragment"></span><a href="#net-50%E4%BB%A5%E5%89%8D%E3%81%A7%E3%82%82%E4%BD%BF%E3%81%84%E3%81%9F%E3%81%84"><i class="fa fa-link"></i></a>.NET 5.0以前でも使いたい！</h3>

<p>.NET 5.0に変更せずとも、.NET Core 2.0または.NET Framework 4.6.1以上であれば<a href="https://www.nuget.org/packages/System.Net.Http.Json/" rel="nofollow noopener" target="_blank">System.Net.Http.Json</a>パッケージを追加すれば、同様の機能が使用できます。</p>

<h2>
<span id="windows-arm64対応" class="fragment"></span><a href="#windows-arm64%E5%AF%BE%E5%BF%9C"><i class="fa fa-link"></i></a>Windows ARM64対応</h2>

<p><a href="https://devblogs.microsoft.com/dotnet/announcing-net-5-0/#windows-arm64" rel="nofollow noopener" target="_blank">Windows Arm64</a></p>

<p>ARM64環境において、いままでの.NET Coreと.NET Frameworkはx86エミュレーション環境で動作していました。<br>
.NET 5.0では、ARM64にネイティブ対応するため、より高速に動作するようになるようです。</p>

<p>ただし、Windows Forms及びWPFに関する機能は対応しておらず、.NET 5.0の今後のアップデートで提供するかもしれないみたいです。</p>

<h3>
<span id="m1-macapple-silicon対応は" class="fragment"></span><a href="#m1-macapple-silicon%E5%AF%BE%E5%BF%9C%E3%81%AF"><i class="fa fa-link"></i></a>M1 Mac(Apple Silicon)対応は？</h3>

<p>Apple Siliconには、現状ネイティブ対応していません。ネイティブ対応は.NET 6で提供予定とのことです。(<a href="https://github.com/dotnet/runtime/issues/43313" rel="nofollow noopener" target="_blank">該当Issue</a>)<br>
加えて、Rosetta 2でのデバッグにも対応しておらず、コンパイルはできますがデバッグすると以下のエラーで落ちます。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>Stack overflow.
   at System.Collections.HashHelpers.GetPrime(Int32)
   at System.Collections.Generic.Dictionary`2[[System.__Canon, System.Private.CoreLib, Version=5.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.__Canon, System.Private.CoreLib, Version=5.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]].Initialize(Int32)
   at System.Collections.Generic.Dictionary`2[[System.__Canon, System.Private.CoreLib, Version=5.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.__Canon, System.Private.CoreLib, Version=5.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]..ctor(Int32, System.Collections.Generic.IEqualityComparer`1&lt;System.__Canon&gt;)
   at System.AppContext.Setup(Char**, Char**, Int32)
</code></pre></div></div>

<p>既に<a href="https://github.com/dotnet/runtime/issues/44897" rel="nofollow noopener" target="_blank">Issue</a>は上がっており、.NET 5のうちにRosetta 2上で対応する予定のようです。<br>
手元の環境（M1 Mac mini）でもデバッグできませんでした。（デバッグなしで実行すれば動作しました）</p>

<h2>
<span id="シングルファイルアプリケーション" class="fragment"></span><a href="#%E3%82%B7%E3%83%B3%E3%82%B0%E3%83%AB%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3"><i class="fa fa-link"></i></a>シングルファイルアプリケーション</h2>

<p><a href="https://devblogs.microsoft.com/dotnet/announcing-net-5-0/#single-file-applications" rel="nofollow noopener" target="_blank">Single file applications</a></p>

<p>シングルファイルアプリケーションとは、その名の通り単一の実行ファイルで動くアプリのことです。</p>

<p>いままでは、各種バイナリを一つのファイルに圧縮し、実行時にそれらを一時ディレクトリに展開することで、単一ファイルを実現していました。ですが、.NET 5.0から一時ディレクトリに展開せずとも動作するようになります。<br>
ただし、.NET 5.0からは単一ファイルと言いつつ複数ファイルが出力されるパターンがあります。以下の表に構成とファイル数を記しておきます。</p>

<table>
<thead>
<tr>
<th></th>
<th>Windows x64</th>
<th>Linux x64</th>
<th>macOS x64</th>
</tr>
</thead>
<tbody>
<tr>
<td>Self-Contained<sup id="fnref1"><a href="#fn1" title="パブリッシュ方法。Self-Containedは.NETランタイムも含める。Framework-Dependentは.NETランタイムを除く。">1</a></sup>
</td>
<td>5</td>
<td>1</td>
<td>8</td>
</tr>
<tr>
<td>Framework-Dependent<sup id="fnref1"><a href="#fn1" title="パブリッシュ方法。Self-Containedは.NETランタイムも含める。Framework-Dependentは.NETランタイムを除く。">1</a></sup>
</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
</tbody>
</table>

<p>複数ファイルが出力される原因は、CLRなどのネイティブバイナリが別で出力されてしまうためです。これを解決するためには、ネイティブバイナリも含めて出力する必要があります。<br>
これにはプロジェクトファイルの<code>IncludeNativeLibrariesForSelfExtract</code>を<code>true</code>に設定することで実現できます。ただし、この方法を用いると.NET Core 3.1と同じように一時ディレクトリに展開してから実行されるようになります。(<a href="https://github.com/dotnet/designs/blob/main/accepted/2020/single-file/design.md#optional-settings" rel="nofollow noopener" target="_blank">参考</a>)</p>

<div class="code-frame" data-lang="XML"><div class="highlight"><pre class="with-code"><code><span class="nt">&lt;Project</span> <span class="na">Sdk=</span><span class="s">"Microsoft.NET.Sdk"</span><span class="nt">&gt;</span>

  <span class="nt">&lt;PropertyGroup&gt;</span>
    <span class="nt">&lt;OutputType&gt;</span>Exe<span class="nt">&lt;/OutputType&gt;</span>
    <span class="nt">&lt;TargetFramework&gt;</span>net5.0<span class="nt">&lt;/TargetFramework&gt;</span>
    <span class="nt">&lt;IncludeNativeLibrariesForSelfExtract&gt;</span>true<span class="nt">&lt;/IncludeNativeLibrariesForSelfExtract&gt;</span>
  <span class="nt">&lt;/PropertyGroup&gt;</span>

<span class="nt">&lt;/Project&gt;</span>
</code></pre></div></div>

<h2>
<span id="終わりに" class="fragment"></span><a href="#%E7%B5%82%E3%82%8F%E3%82%8A%E3%81%AB"><i class="fa fa-link"></i></a>終わりに</h2>

<p>.NET 5.0では、上述した機能の追加が行われました。加えて、パフォーマンスもかなり改善されました。RyuJITやGCレベルでのパフォーマンス改善のため、利用者側としては.NET 5.0に切り替えるだけでパフォーマンス向上が期待できます。<br>
Apple Siliconにネイティブ対応するであろう.NET 6も楽しみです！</p>

<p>この記事を読んで「面白かった」「学びがあった」と思っていただけた方、よろしければ LGTM、Twitter や Facebook、はてなブックマークにてコメントをお願いします！</p>

<p>また <a href="https://twitter.com/DeNAxTech" rel="nofollow noopener" target="_blank">DeNA 公式 Twitter アカウント @DeNAxTech</a> では、 Blog 記事だけでなく色々な勉強会での登壇資料も発信しています。ぜひフォローして下さい！<br>
<a href="https://twitter.com/DeNAxTech?ref_src=twsrc%5Etfw" class="" rel="nofollow noopener" target="_blank">Follow @DeNAxTech</a><script async src="https://platform.twitter.com/widgets.js"></script></p>

<div class="footnotes">
<hr>
<ol>

<li id="fn1">
<p>パブリッシュ方法。Self-Containedは.NETランタイムも含める。Framework-Dependentは.NETランタイムを除く。 <a href="#fnref1">↩</a></p>
</li>

</ol>
</div>
</div></div></section><div class="css-1yzj1fm"><div class="css-1uv1qiv"><span class="fa fa-twitter"></span></div><div class="css-1uv1qiv"><span class="fa fa-facebook"></span></div></div><div class="apm-Content"><div class="apm-Content_title">Why not register and get more from Qiita?</div><ol class="apm-Content_list"><li>We will deliver articles that match you<div class="description">By following users and tags, you can catch up information on technical fields that you are interested in as a whole</div></li><li>you can read useful information later efficiently<div class="description">By &quot;stocking&quot; the articles you like, you can search right away</div></li><div><a class="apm-Content_help" href="https://help.qiita.com/ja/articles/qiita-login-user" target="_blank"><i class="fa fa-fw fa-arrow-circle-right"></i>What you can do with signing up</a></div></ol><a href="/signup?callback_action=login_or_signup&amp;redirect_to=%2FSKKbySSK_TC%2Fitems%2Fbdf2b4395bf3a74ab4c0&amp;realm=qiita" class="apm-Content_button apm-Content_button-signup">Sign up</a><a href="/login?callback_action=login_or_signup&amp;redirect_to=%2FSKKbySSK_TC%2Fitems%2Fbdf2b4395bf3a74ab4c0&amp;realm=qiita" class="apm-Content_button apm-Content_button-signin">Login</a></div></div><div class="css-helsa7"></div></div></div></div><div class="css-109dbrr"><div class="css-5jpx49"><div class="css-mnxgyc"><button class=" css-1vlpknv"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/SKKbySSK_TC/items/bdf2b4395bf3a74ab4c0/likers" class="css-1iupg5d">26</a></div><div class="css-fsjkhv"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-1b17vb0">12</span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-7i7f4d"><div class="css-1gj7nt">Improve article</div><a href="/drafts/bdf2b4395bf3a74ab4c0/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/SKKbySSK_TC/items/bdf2b4395bf3a74ab4c0/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/SKKbySSK_TC/items/bdf2b4395bf3a74ab4c0/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/SKKbySSK_TC/items/bdf2b4395bf3a74ab4c0/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/SKKbySSK_TC/items/bdf2b4395bf3a74ab4c0.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="PersonalArticlePage" data-dom-id="PersonalArticlePage-react-component-4f87807b-6597-4693-818d-9b4ac0b91454">{"authorAnalyticsTrackingId":null,"organizationAnalyticsTrackingId":null}</script>
      
<footer id="globalFooter" class="st-Footer"><div class="st-Footer_container"><div class="st-Footer_start"><div class="st-Footer_logo"><svg viewbox="0 0 426.57 130" xmlns="http://www.w3.org/2000/svg"><circle cx="167.08" cy="21.4" r="12.28" /><path d="M250.81 29.66h23.48v18.9h-23.48z" /><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z" /><circle cx="216.33" cy="21.4" r="12.28" /></svg></div><div class="st-Footer_catchcopy">How developers code is here.</div><div class="st-Footer_socials"><a class="fa fa-twitter" href="https://twitter.com/qiita"></a><a class="fa fa-facebook-square" href="https://www.facebook.com/qiita/"></a></div></div><div class="st-Footer_end"><div class="st-Footer_qiita"><div class="st-Footer_label">Qiita</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="/about">About</a><a href="/terms">Terms</a><a href="/privacy">Privacy</a><a target="_blank" href="http://help.qiita.com/ja/articles/qiita-community-guideline">Guideline</a><a target="_blank" href="https://help.qiita.com/ja/articles/others-brand-guideline">Design Guideline</a></div><div class="st-Footer_column"><a href="/release-notes">Release</a><a href="/api/v2/docs">API</a><a href="/feedback/new">ご意見</a><a href="https://help.qiita.com">Help</a><a target="_blank" href="https://qiita.com/ads?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Advertisement</a></div></div></div><div class="st-Footer_increments"><div class="st-Footer_label">Increments</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="https://increments.co.jp/company/">About</a><a href="https://increments.co.jp/jobs/">採用情報</a><a href="https://blog.qiita.com">Blog</a></div><div class="st-Footer_column"><a href="https://teams.qiita.com/">Qiita Team</a><a href="https://jobs.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Jobs</a><a href="https://zine.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Zine</a></div></div></div></div></div><div class="st-Footer_copyright">© 2011-2021 Increments Inc.</div></footer><div id="Snackbar-react-component-ecb9e36d-8ad1-4582-9a1a-8f592d2e0670"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="Snackbar" data-dom-id="Snackbar-react-component-ecb9e36d-8ad1-4582-9a1a-8f592d2e0670">{}</script>
      
<div id="LoginModal-react-component-40817e26-d074-46f5-9a43-64419d93ccde"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="LoginModal" data-dom-id="LoginModal-react-component-40817e26-d074-46f5-9a43-64419d93ccde">{}</script>
      
<div id="StockModal-react-component-a489fdf5-918e-4b91-9919-0c7b7aa41d58"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="StockModal" data-dom-id="StockModal-react-component-a489fdf5-918e-4b91-9919-0c7b7aa41d58">{}</script>
      
</div><div id="dataContainer" style="display: none;" data-config="{&quot;actionPath&quot;:&quot;public/items#show&quot;,&quot;settings&quot;:{&quot;analyticsTrackingId&quot;:&quot;UA-24675221-12&quot;,&quot;assetsMap&quot;:{},&quot;csrfToken&quot;:&quot;IKZJ8Os/q7vz7d58RPgeMhcMkQrOM/q28RaQVFMJUON7bNxvK0ydfkSE9XJ5iLBGxQvzyK0sU/HvKabWHzqOfA==&quot;,&quot;locale&quot;:&quot;en&quot;},&quot;currentUser&quot;:null}" /></body></html><script type="application/json" data-js-react-on-rails-store="AppStoreWithReactOnRails">{"snackbar":{"type":"","body":"","isActive":false},"article":{"article":{"body":"\u003cp\u003eこちらは\u003ca href=\"https://qiita.com/advent-calendar/2020/dena-21-shinsotsu\"\u003eDeNA 21 新卒 Advent Calendar 2020\u003c/a\u003eの10日目の記事です。\u003c/p\u003e\n\n\u003cp\u003e正式リリースされたばかりの.NET 5についての情報を自分の中でまとめたかったため、今回の記事を書きました。\u003cbr\u003e\n主に\u003ca href=\"https://devblogs.microsoft.com/dotnet/announcing-net-5-0/\" rel=\"nofollow noopener\" target=\"_blank\"\u003eAnnouncing .NET 5.0\u003c/a\u003eの中から個人的に嬉しい変更点を紹介・説明していきます。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"net-5について\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#net-5%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e.NET 5について\u003c/h2\u003e\n\n\u003cp\u003e2020/11/20に.NET 5.0が正式リリースされました。\u003c/p\u003e\n\n\u003cp\u003e.NET系について簡単に整理すると、\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e今後、.NET Frameworkにはバグ修正とセキュリティ修正が行われる\n\n\u003cul\u003e\n\u003cli\u003e明記されていないが、新機能は恐らく追加されない\n\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://devblogs.microsoft.com/dotnet/net-core-is-the-future-of-net/\" rel=\"nofollow noopener\" target=\"_blank\"\u003e.NET Core is the Future of .NET\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e.NET Core 3.0の次期バージョンが.NET 5.0となる\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eとなっています。\u003c/p\u003e\n\n\u003cp\u003e.NET Coreがバージョン4を飛ばした理由は、\u003ca href=\"https://devblogs.microsoft.com/dotnet/introducing-net-5/\" rel=\"nofollow noopener\" target=\"_blank\"\u003eIntroducing .NET 5\u003c/a\u003eに明記されています。\u003c/p\u003e\n\n\u003cblockquote\u003e\n\u003cp\u003eWe’re skipping the version 4 because it would confuse users that are familiar with the .NET Framework, which has been using the 4.x series for a long time. Additionally, we wanted to clearly communicate that .NET 5 is the future for the .NET platform.\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003cp\u003e要約すると「長年使われている.NET Framework 4.x系と混同しちゃうかもしれないから」ということのようです。\u003c/p\u003e\n\n\u003cp\u003e.NET 5.0では、主にパフォーマンス向上が重点的に行われました。加えて、いくつか新機能も追加されたようです。\u003cbr\u003e\n今回は、その中でも個人的に嬉しかった変更点についてピックアップしたいと思います。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"httpclientにjson拡張メソッド追加\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#httpclient%E3%81%ABjson%E6%8B%A1%E5%BC%B5%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E8%BF%BD%E5%8A%A0\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eHttpClientにJSON拡張メソッド追加\u003c/h2\u003e\n\n\u003cp\u003e\u003ca href=\"https://devblogs.microsoft.com/dotnet/announcing-net-5-0/#httpclient-extension-methods\" rel=\"nofollow noopener\" target=\"_blank\"\u003eHttpClient extension methods\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eC#でhttp経由の通信を行う際に、よくHttpClientが使われます。\u003cbr\u003e\nいままで、JSON形式のレスポンスを取得する際は、以下のように3ステップに分けて実装を行う必要がありました。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"cs\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"c1\"\u003e// .NET Core 3以前\u003c/span\u003e\n\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eclient\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eHttpClient\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eresponse\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003eawait\u003c/span\u003e \u003cspan class=\"n\"\u003eclient\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eGetAsync\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"https://example.com/example.json\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e \u003cspan class=\"c1\"\u003e// 1.レスポンスを受け取る\u003c/span\u003e\n\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003ejsonBody\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003eawait\u003c/span\u003e \u003cspan class=\"n\"\u003eresponse\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003econtent\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eReadAsStringAsync\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e \u003cspan class=\"c1\"\u003e// 2.コンテンツを文字列として読み出し\u003c/span\u003e\n\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003edata\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eJsonSerializer\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eDeserialize\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eMessage\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"n\"\u003ejsonBody\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e \u003cspan class=\"c1\"\u003e// 3.デシリアライズ\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eこれだと、API通信をよく行うアプリでは、書き方が冗長で非常に面倒です。\u003cbr\u003e\n.NET 5.0では、上記の実装がよりシンプルになりました。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"cs\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"c1\"\u003e// .NET 5.0\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem.Net.Http.Json\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eclient\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eHttpClient\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003edata\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003eawait\u003c/span\u003e \u003cspan class=\"n\"\u003eclient\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eGetFromJsonAsync\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eMessage\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"https://example.com/example.json\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eたったこれだけです。すごい！\u003c/p\u003e\n\n\u003cp\u003e加えて、忘れがちな以下の処理が実装されています。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eステータスコードの判別\n\n\u003cul\u003e\n\u003cli\u003eSuccess(200~299)以外では\u003ccode\u003eHttpRequestException\u003c/code\u003eが発生\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e文字コードの自動解析\n\n\u003cul\u003e\n\u003cli\u003eデフォルトではUTF-8\u003c/li\u003e\n\u003cli\u003e\n\u003ccode\u003eContent-Type\u003c/code\u003eに\u003ccode\u003echarset\u003c/code\u003eが含まれる場合は、その文字コードでデコード\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eただし、レスポンスの\u003ccode\u003eContent-Type\u003c/code\u003eが\u003ccode\u003eapplication/json\u003c/code\u003eになっているかは判定していない模様です。\u003ccode\u003etext/plain\u003c/code\u003eで試したところ、エラー無しでJSONとしてパースされました。（3/31時点の\u003ca href=\"https://www.stevejgordon.co.uk/sending-and-receiving-json-using-httpclient-with-system-net-http-json\" rel=\"nofollow noopener\" target=\"_blank\"\u003e記事\u003c/a\u003eでは判定していたようですが、その後削除された？）\u003c/p\u003e\n\n\u003cp\u003e上記では、\u003ccode\u003eGET\u003c/code\u003eメソッドを例として書きましたが、\u003ccode\u003ePOST\u003c/code\u003eと\u003ccode\u003ePUT\u003c/code\u003eでも同様の拡張メソッドが追加されました。(\u003ccode\u003ePATCH\u003c/code\u003eや\u003ccode\u003eDELETE\u003c/code\u003eなどには追加されていない模様です)\u003cbr\u003e\nもちろん、\u003ccode\u003ePOST\u003c/code\u003eと\u003ccode\u003ePUT\u003c/code\u003eでは引数に何らかのオブジェクトを渡すとJSONシリアライズして送信してくれます。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"httpcontent拡張メソッド\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#httpcontent%E6%8B%A1%E5%BC%B5%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eHttpContent拡張メソッド\u003c/h3\u003e\n\n\u003cp\u003eHttpContentクラスに拡張メソッドとして\u003ccode\u003eReadFromJsonAsync\u003c/code\u003eが追加されました。\u003cbr\u003e\nこちらを使うことで、任意のHttpContentからJSONデータを扱えるようになります。\u003c/p\u003e\n\n\u003cp\u003e使用する場面としては、以下が挙げられます。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\n\u003ccode\u003ePATCH\u003c/code\u003eや\u003ccode\u003eDELETE\u003c/code\u003eリクエストのレスポンスをJSONとして扱いたい\u003c/li\u003e\n\u003cli\u003eSuccess(200~299)以外のステータスコードでも、レスポンス内容をJSONとして扱いたい\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"cs\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eclient\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eHttpClient\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eresponse\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003eawait\u003c/span\u003e \u003cspan class=\"n\"\u003eclient\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eGetAsync\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"https://example.com/example.json\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eresponse\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eIsSuccessStatusCode\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"c1\"\u003e// OK処理\u003c/span\u003e\n  \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003edata\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003eawait\u003c/span\u003e \u003cspan class=\"n\"\u003eresponse\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003econtent\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eReadFromJsonAsync\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eMessage\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;();\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"k\"\u003eelse\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"c1\"\u003e// NG処理\u003c/span\u003e\n  \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003edata\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003eawait\u003c/span\u003e \u003cspan class=\"n\"\u003eresponse\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003econtent\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eReadFromJsonAsync\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eErrorInfo\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;();\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"jsoncontent\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#jsoncontent\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eJsonContent\u003c/h3\u003e\n\n\u003cp\u003eHttpContentを継承した\u003ca href=\"https://docs.microsoft.com/ja-jp/dotnet/api/system.net.http.json.jsoncontent?view=net-5.0\" rel=\"nofollow noopener\" target=\"_blank\"\u003eJsonContent\u003c/a\u003eクラスが、拡張メソッドの追加に伴って追加されました。\u003c/p\u003e\n\n\u003cp\u003e以下のようなコードを書くことで、\u003ccode\u003eContent-Type: application/json\u003c/code\u003eを設定済みのJsonContentを生成できます。(\u003ccode\u003echarset\u003c/code\u003eに応じてエンコードしてくれます。デフォルトではUTF-8)\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"cs\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003econtent\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eJsonContent\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eCreate\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eMessage\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"n\"\u003emessage\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e \u003cspan class=\"c1\"\u003e// Content-Type: application/json; charset=utf-8\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"net-50以前でも使いたい\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#net-50%E4%BB%A5%E5%89%8D%E3%81%A7%E3%82%82%E4%BD%BF%E3%81%84%E3%81%9F%E3%81%84\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e.NET 5.0以前でも使いたい！\u003c/h3\u003e\n\n\u003cp\u003e.NET 5.0に変更せずとも、.NET Core 2.0または.NET Framework 4.6.1以上であれば\u003ca href=\"https://www.nuget.org/packages/System.Net.Http.Json/\" rel=\"nofollow noopener\" target=\"_blank\"\u003eSystem.Net.Http.Json\u003c/a\u003eパッケージを追加すれば、同様の機能が使用できます。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"windows-arm64対応\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#windows-arm64%E5%AF%BE%E5%BF%9C\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eWindows ARM64対応\u003c/h2\u003e\n\n\u003cp\u003e\u003ca href=\"https://devblogs.microsoft.com/dotnet/announcing-net-5-0/#windows-arm64\" rel=\"nofollow noopener\" target=\"_blank\"\u003eWindows Arm64\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eARM64環境において、いままでの.NET Coreと.NET Frameworkはx86エミュレーション環境で動作していました。\u003cbr\u003e\n.NET 5.0では、ARM64にネイティブ対応するため、より高速に動作するようになるようです。\u003c/p\u003e\n\n\u003cp\u003eただし、Windows Forms及びWPFに関する機能は対応しておらず、.NET 5.0の今後のアップデートで提供するかもしれないみたいです。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"m1-macapple-silicon対応は\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#m1-macapple-silicon%E5%AF%BE%E5%BF%9C%E3%81%AF\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eM1 Mac(Apple Silicon)対応は？\u003c/h3\u003e\n\n\u003cp\u003eApple Siliconには、現状ネイティブ対応していません。ネイティブ対応は.NET 6で提供予定とのことです。(\u003ca href=\"https://github.com/dotnet/runtime/issues/43313\" rel=\"nofollow noopener\" target=\"_blank\"\u003e該当Issue\u003c/a\u003e)\u003cbr\u003e\n加えて、Rosetta 2でのデバッグにも対応しておらず、コンパイルはできますがデバッグすると以下のエラーで落ちます。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003eStack overflow.\n   at System.Collections.HashHelpers.GetPrime(Int32)\n   at System.Collections.Generic.Dictionary`2[[System.__Canon, System.Private.CoreLib, Version=5.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.__Canon, System.Private.CoreLib, Version=5.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]].Initialize(Int32)\n   at System.Collections.Generic.Dictionary`2[[System.__Canon, System.Private.CoreLib, Version=5.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.__Canon, System.Private.CoreLib, Version=5.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]..ctor(Int32, System.Collections.Generic.IEqualityComparer`1\u0026lt;System.__Canon\u0026gt;)\n   at System.AppContext.Setup(Char**, Char**, Int32)\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e既に\u003ca href=\"https://github.com/dotnet/runtime/issues/44897\" rel=\"nofollow noopener\" target=\"_blank\"\u003eIssue\u003c/a\u003eは上がっており、.NET 5のうちにRosetta 2上で対応する予定のようです。\u003cbr\u003e\n手元の環境（M1 Mac mini）でもデバッグできませんでした。（デバッグなしで実行すれば動作しました）\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"シングルファイルアプリケーション\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%B7%E3%83%B3%E3%82%B0%E3%83%AB%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eシングルファイルアプリケーション\u003c/h2\u003e\n\n\u003cp\u003e\u003ca href=\"https://devblogs.microsoft.com/dotnet/announcing-net-5-0/#single-file-applications\" rel=\"nofollow noopener\" target=\"_blank\"\u003eSingle file applications\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eシングルファイルアプリケーションとは、その名の通り単一の実行ファイルで動くアプリのことです。\u003c/p\u003e\n\n\u003cp\u003eいままでは、各種バイナリを一つのファイルに圧縮し、実行時にそれらを一時ディレクトリに展開することで、単一ファイルを実現していました。ですが、.NET 5.0から一時ディレクトリに展開せずとも動作するようになります。\u003cbr\u003e\nただし、.NET 5.0からは単一ファイルと言いつつ複数ファイルが出力されるパターンがあります。以下の表に構成とファイル数を記しておきます。\u003c/p\u003e\n\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003e\u003c/th\u003e\n\u003cth\u003eWindows x64\u003c/th\u003e\n\u003cth\u003eLinux x64\u003c/th\u003e\n\u003cth\u003emacOS x64\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003eSelf-Contained\u003csup id=\"fnref1\"\u003e\u003ca href=\"#fn1\" title=\"パブリッシュ方法。Self-Containedは.NETランタイムも含める。Framework-Dependentは.NETランタイムを除く。\"\u003e1\u003c/a\u003e\u003c/sup\u003e\n\u003c/td\u003e\n\u003ctd\u003e5\u003c/td\u003e\n\u003ctd\u003e1\u003c/td\u003e\n\u003ctd\u003e8\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eFramework-Dependent\u003csup id=\"fnref1\"\u003e\u003ca href=\"#fn1\" title=\"パブリッシュ方法。Self-Containedは.NETランタイムも含める。Framework-Dependentは.NETランタイムを除く。\"\u003e1\u003c/a\u003e\u003c/sup\u003e\n\u003c/td\u003e\n\u003ctd\u003e1\u003c/td\u003e\n\u003ctd\u003e1\u003c/td\u003e\n\u003ctd\u003e1\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\n\u003cp\u003e複数ファイルが出力される原因は、CLRなどのネイティブバイナリが別で出力されてしまうためです。これを解決するためには、ネイティブバイナリも含めて出力する必要があります。\u003cbr\u003e\nこれにはプロジェクトファイルの\u003ccode\u003eIncludeNativeLibrariesForSelfExtract\u003c/code\u003eを\u003ccode\u003etrue\u003c/code\u003eに設定することで実現できます。ただし、この方法を用いると.NET Core 3.1と同じように一時ディレクトリに展開してから実行されるようになります。(\u003ca href=\"https://github.com/dotnet/designs/blob/main/accepted/2020/single-file/design.md#optional-settings\" rel=\"nofollow noopener\" target=\"_blank\"\u003e参考\u003c/a\u003e)\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"XML\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"nt\"\u003e\u0026lt;Project\u003c/span\u003e \u003cspan class=\"na\"\u003eSdk=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Microsoft.NET.Sdk\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e\n\n  \u003cspan class=\"nt\"\u003e\u0026lt;PropertyGroup\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;OutputType\u0026gt;\u003c/span\u003eExe\u003cspan class=\"nt\"\u003e\u0026lt;/OutputType\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;TargetFramework\u0026gt;\u003c/span\u003enet5.0\u003cspan class=\"nt\"\u003e\u0026lt;/TargetFramework\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;IncludeNativeLibrariesForSelfExtract\u0026gt;\u003c/span\u003etrue\u003cspan class=\"nt\"\u003e\u0026lt;/IncludeNativeLibrariesForSelfExtract\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"nt\"\u003e\u0026lt;/PropertyGroup\u0026gt;\u003c/span\u003e\n\n\u003cspan class=\"nt\"\u003e\u0026lt;/Project\u0026gt;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"終わりに\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E7%B5%82%E3%82%8F%E3%82%8A%E3%81%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e終わりに\u003c/h2\u003e\n\n\u003cp\u003e.NET 5.0では、上述した機能の追加が行われました。加えて、パフォーマンスもかなり改善されました。RyuJITやGCレベルでのパフォーマンス改善のため、利用者側としては.NET 5.0に切り替えるだけでパフォーマンス向上が期待できます。\u003cbr\u003e\nApple Siliconにネイティブ対応するであろう.NET 6も楽しみです！\u003c/p\u003e\n\n\u003cp\u003eこの記事を読んで「面白かった」「学びがあった」と思っていただけた方、よろしければ LGTM、Twitter や Facebook、はてなブックマークにてコメントをお願いします！\u003c/p\u003e\n\n\u003cp\u003eまた \u003ca href=\"https://twitter.com/DeNAxTech\" rel=\"nofollow noopener\" target=\"_blank\"\u003eDeNA 公式 Twitter アカウント @DeNAxTech\u003c/a\u003e では、 Blog 記事だけでなく色々な勉強会での登壇資料も発信しています。ぜひフォローして下さい！\u003cbr\u003e\n\u003ca href=\"https://twitter.com/DeNAxTech?ref_src=twsrc%5Etfw\" class=\"\" rel=\"nofollow noopener\" target=\"_blank\"\u003eFollow @DeNAxTech\u003c/a\u003e\u003cscript async src=\"https://platform.twitter.com/widgets.js\"\u003e\u003c/script\u003e\u003c/p\u003e\n\n\u003cdiv class=\"footnotes\"\u003e\n\u003chr\u003e\n\u003col\u003e\n\n\u003cli id=\"fn1\"\u003e\n\u003cp\u003eパブリッシュ方法。Self-Containedは.NETランタイムも含める。Framework-Dependentは.NETランタイムを除く。 \u003ca href=\"#fnref1\"\u003e↩\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\n\u003c/ol\u003e\n\u003c/div\u003e\n","createdAt":"2020-12-07T03:39:52Z","elapsedYearsFromLastModifiedAt":0,"encryptedId":"fkCe40sO4DKG73PBZNTxjdrCNOTentzTlw==--84QxRCgi/o4eV9jt--1h2ikIP1w3HDgpsZ05Oejg==","isBanned":false,"isDeprecated":false,"isDestroyableByViewer":false,"isEditRequestReadableByViewer":true,"isEditRequestSendableByViewer":true,"isLikableByViewer":true,"isLikedByViewer":false,"isPublic":true,"isSlide":false,"isStockableByViewer":true,"isStockedByViewer":false,"isSubscribableByViewer":false,"isSubscribedByViewer":false,"isUpdatableByViewer":false,"isUpdated":true,"lastModifiedAt":"2020-12-09T22:00:37Z","likesCount":26,"linkUrl":"https://qiita.com/SKKbySSK_TC/items/bdf2b4395bf3a74ab4c0","organization":{"description":"We delight people beyond their wildest dreams.","encryptedId":"ZW8l9h2cd+cAEdoc8U0gnH+1BtWs76Wravg=--8J+oBLmB+6ze/I9p--+kz/nh2moOXIHhV7GpKArw==","isBetaReleaseEnabled":true,"isFollowableByViewer":true,"isFollowedByViewer":false,"logoUrl":"https://s3-ap-northeast-1.amazonaws.com/qiita-organization-image/77fe0bc145892664d307e63dcfbc7a381345ca47/original.jpg?1539161148","name":"株式会社ディー・エヌ・エー","url":"https://dena.com/jp/","urlName":"dena_coltd"},"originalId":1352097,"stockedCount":12,"title":".NET 5での嬉しい変更点","toc":"\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#net-5%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6\"\u003e.NET 5について\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#httpclient%E3%81%ABjson%E6%8B%A1%E5%BC%B5%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E8%BF%BD%E5%8A%A0\"\u003eHttpClientにJSON拡張メソッド追加\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#httpcontent%E6%8B%A1%E5%BC%B5%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89\"\u003eHttpContent拡張メソッド\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#jsoncontent\"\u003eJsonContent\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#net-50%E4%BB%A5%E5%89%8D%E3%81%A7%E3%82%82%E4%BD%BF%E3%81%84%E3%81%9F%E3%81%84\"\u003e.NET 5.0以前でも使いたい！\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#windows-arm64%E5%AF%BE%E5%BF%9C\"\u003eWindows ARM64対応\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#m1-macapple-silicon%E5%AF%BE%E5%BF%9C%E3%81%AF\"\u003eM1 Mac(Apple Silicon)対応は？\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%B7%E3%83%B3%E3%82%B0%E3%83%AB%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3\"\u003eシングルファイルアプリケーション\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E7%B5%82%E3%82%8F%E3%82%8A%E3%81%AB\"\u003e終わりに\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n","totalPv":2547,"uuid":"bdf2b4395bf3a74ab4c0","banReason":null,"adventCalendarItem":{"day":10,"calendar":{"name":"DeNA 21 新卒","urlName":"dena-21-shinsotsu","year":2020,"organization":{"logoUrl":"https://s3-ap-northeast-1.amazonaws.com/qiita-organization-image/77fe0bc145892664d307e63dcfbc7a381345ca47/original.jpg?1539161148","urlName":"dena_coltd"}}},"author":{"encryptedId":"S8i4IX/9xCjRTwSD7Bt8FTWFqhFu--zySCLOBX13ffrORM--qzKzGdlaTXkinmw0Wxi5kQ==","originalId":240790,"description":"","facebookUrl":null,"githubUrl":"https://github.com/SKKbySSK","isBlockingViewer":false,"isFollowableByViewer":true,"isFollowedByViewer":false,"isTweetWebNotificationReceivable":true,"linkedinUrl":null,"name":"","profileImageUrl":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/240790/profile-images/1604539312","profileImageUrlW48":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F240790%2Fprofile-images%2F1604539312?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=48\u0026s=3688a4ed5cdcb69e653024cb4360511c","profileImageUrlW75":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F240790%2Fprofile-images%2F1604539312?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=deaaed03711a3ffbcac2ae1715bfb834","urlName":"SKKbySSK_TC","websiteUrl":"https://kscafe.work/","twitterUrl":"https://twitter.com/SKKbySSK_TC","twitterUrlName":"SKKbySSK_TC","revealedOrganizations":{"edges":[{"node":{"encryptedId":"oN0YIB8DEYfXZAhlxZR3uzM+sAC4fSli0T0=--1l2JV9ZMUl1hWj4j--cFIb6EoVdYsOFJXccYLqTw==","isBetaReleaseEnabled":true,"isFollowableByViewer":true,"isFollowedByViewer":false,"name":"株式会社ディー・エヌ・エー","logoUrl":"https://s3-ap-northeast-1.amazonaws.com/qiita-organization-image/77fe0bc145892664d307e63dcfbc7a381345ca47/original.jpg?1539161148","urlName":"dena_coltd","description":"We delight people beyond their wildest dreams.","url":"https://dena.com/jp/"}}]}},"tags":[{"name":"C#","urlName":"csharp"},{"name":".NET","urlName":".net"},{"name":".NETFramework","urlName":".netframework"},{"name":".NETCore","urlName":".netcore"}],"followingLikers":{"edges":[]},"comments":{"totalCount":0}},"comments":[],"client":null,"ads_event_emitter":null}}</script>
