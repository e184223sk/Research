More than 3 years have passed since last update.Unityで、次の２つのコードでGCAllocが発生するものしないものとで差がでたので調査する。コードはプロファイラーで見やすいように毎フレーム処理が走るようにしている。1 毎フレームGCAllocが発生しないコード2 毎フレームGCAllocが発生するコード1 の結果2 の結果
1の結果では GC Alloc が0だが、2の結果は104B GC Alloc が発生しているのがわかる。それぞれのコードでできるILを比較する。必要なところだけ抜粋1 のコード2 のコード2のコードから先に見ていく。2のコードの方は処理の中で毎回Actionをnewしている。そのため
 GC Alloc を発生させている。
1のコードの方は lambda で定義されたコードが静的フィールドで保存されており、二回目以降はその保存されたコードが使われるようになっていた。ということは最初の一回目は同じく1のコードも同じ量だけ GC Alloc が発生してたりするのかな。なにわともあれ原因がわかったのでよしとする。Unity5.6.3p3
macOS Sierra 10.12.6


