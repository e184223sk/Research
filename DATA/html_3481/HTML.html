<!DOCTYPE html><html><head><meta charset="utf-8" /><title>C#でわかる値渡し、参照渡し - Qiita</title><meta content="width=device-width,initial-scale=1,shrink-to-fit=no,viewport-fit=cover" name="viewport" /><meta content="#55c500" name="theme-color" /><meta content="XWpkTG32-_C4joZoJ_UsmDUi-zaH-hcrjF6ZC_FoFbk" name="google-site-verification" /><meta content="telephone=no" name="format-detection" /><link rel="canonical" href="https://qiita.com/KageShiron/items/b74d9246aad3ca0854c2" /><link href="/manifest.json" rel="manifest" /><link href="/opensearch.xml" rel="search" title="Qiita" type="application/opensearchdescription+xml" /><link as="script" href="https://www.googletagservices.com/tag/js/gpt.js" rel="preload" /><link href="https://securepubads.g.doubleclick.net" rel="preconnect" /><script async="" src="https://www.googletagservices.com/tag/js/gpt.js"></script><meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="wHlzIz/y/P43ZfTbMqV6YuEHHzhR+z0p7QdiEUMPgOo4GMz76Iar+oyfg3UZEb5RmWuUI9Jtarn0RDvkT0a8jw==" /><link rel="shortcut icon" type="image/x-icon" href="https://cdn.qiita.com/assets/favicons/public/production-c620d3e403342b1022967ba5e3db1aaa.ico" /><link rel="apple-touch-icon" type="image/png" href="https://cdn.qiita.com/assets/favicons/public/apple-touch-icon-ec5ba42a24ae923f16825592efdc356f.png" /><link rel="stylesheet" media="all" href="https://cdn.qiita.com/assets/public/article-2eaa7dbedc42a8ea65c722cda46d0ebb.min.css" /><script src="https://cdn.qiita.com/assets/public/v3-article-bundle-63de2d91fef827269d3f6b958db2335b.min.js" defer="defer"></script><meta name="twitter:card" content="summary_large_image"><meta content="@Qiita" name="twitter:site" /><meta content="@KageShiron" name="twitter:creator" /><meta property="og:type" content="article"><meta property="og:title" content="C#でわかる値渡し、参照渡し - Qiita"><meta property="og:image" content="https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0&amp;w=1200&amp;mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND1ReVBqZ2FmamdvX2pnWXZqZ292bGdLVG11S0hqZ1pmamdJSGxqNExuaGFmbXVLSGpnWmMmdHh0LWNvbG9yPSUyMzMzMyZ0eHQtZm9udD1IaXJhZ2lubyUyMFNhbnMlMjBXNiZ0eHQtc2l6ZT01NCZ0eHQtY2xpcD1lbGxpcHNpcyZ0eHQtYWxpZ249Y2VudGVyJTJDbWlkZGxlJnM9NjhkNTZjYWZkNzhkNWUzNjExMDU1MjZhYTc5MjMwZjM&amp;mark-align=center%2Cmiddle&amp;blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RRXRoWjJWVGFHbHliMjQmdHh0LWNvbG9yPSUyMzMzMyZ0eHQtZm9udD1IaXJhZ2lubyUyMFNhbnMlMjBXNiZ0eHQtc2l6ZT00NSZ0eHQtYWxpZ249cmlnaHQlMkNib3R0b20mcz1lMzM1YjQ0Mzc0NzExZjEyZjcxMWYyZGZlOTJkNGViYg&amp;blend-align=center%2Cmiddle&amp;blend-mode=normal&amp;s=a2809c2274c79c4d6aa03ca823cd9791"><meta property="og:description" content="

参照渡し、値渡しの定義とは

言語仕様を見よ 

　　終
制作・著作
━━━━━━
　  ⓃⒽⓀ


C#における参照渡し

C++やPHPといった他の言語も含めた参照渡しの説明としては「呼び出し元の変数に影響が伝搬する呼び出し」..."><meta content="https://qiita.com/KageShiron/items/b74d9246aad3ca0854c2" property="og:url" /><meta content="Qiita" property="og:site_name" /><meta content="564524038" property="fb:admins" /><meta content="C#,.NET,参照渡し,値渡し" name="keywords" /><script>!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window, document,'script',
'https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '668972150489891');
fbq('track', 'PageView');</script><style data-emotion-css="17jxvjw 11t2ec1 1dvr2p8 18lkoru 1g4cku8 1iupg5d ijvq0v 15cocm3 12rp90f 115f4t 1b8uj5v 79elbk 16hhh7b fcbn8c 1gj7nt 154zy0m yikrym 1jqivyb 1ode1bp le4d8r 1hbd3g7 helsa7 8qb8m4 2imjyh he5w1s 70qvj9 3ojehk 100alwu 1dtnjt5 10ougpm 1ay9vb9 m19uds cgzq40 1wa99t2 1l3zk9f 4czcte 1yzj1fm 1uv1qiv 109dbrr 5jpx49 mnxgyc 1vlpknv fsjkhv 1b17vb0 7i7f4d"}>.css-17jxvjw{display:grid;display:-ms-grid;grid-template-columns:80px minmax(0,1fr) 300px;-ms-grid-columns:80px minmax(0,1fr) 300px;grid-template-rows:minmax(270px,auto) 1fr;-ms-grid-rows:minmax(270px,auto) 1fr;max-width:1280px;margin-right:auto;margin-left:auto;padding-top:24px;padding-right:24px;padding-left:24px;}@media (max-width:1200px){.css-17jxvjw{padding-bottom:0;padding-left:0;padding-right:0;}}@media (max-width:992px){.css-17jxvjw{grid-template-columns:80px 452px 300px;-ms-grid-columns:80px 452px 300px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}}@media (max-width:770px){.css-17jxvjw{display:block;}}@media (max-width:480px){.css-17jxvjw{padding-top:0;}}.css-11t2ec1{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;z-index:5;position:-webkit-sticky;position:sticky;top:calc(56px + 24px + 16px + 32px - 16px);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:16px;width:80px;}.css-11t2ec1:after{content:'';display:table;}.css-11t2ec1:before{content:'';display:table;}@media (max-width:770px){.css-11t2ec1{display:none;}}.css-1dvr2p8{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-18lkoru{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;background-color:#FFFFFF;}.css-1g4cku8{display:inline-block;vertical-align:middle;height:20px;width:20px;fill:#55C500;}.css-1iupg5d{color:#55C500;cursor:pointer;font-size:14px;font-weight:bold;}.css-ijvq0v{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-15cocm3{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#FFFFFF;border:2px solid #6E6F70;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:2px 0px 0px;width:40px;}.css-12rp90f{display:inline-block;vertical-align:bottom;height:17.77777777777778px;width:16px;fill:#6E6F70;}.css-115f4t{color:#6E6F70;font-size:14px;font-weight:bold;}.css-1b8uj5v{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;margin-bottom:16px;padding:0;}.css-79elbk{position:relative;}.css-16hhh7b{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;padding:0;}.css-fcbn8c{display:none;bottom:initial;left:initial;right:initial;top:initial;left:100%;top:calc(-8px - (14px * 1.8) - 16px - 4px);}.css-1gj7nt{color:rgba(0,0,0,0.6);font-size:14px;font-weight:bold;line-height:1.8;padding:8px 16px;}.css-154zy0m{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.87);cursor:pointer;font-size:16px;font-weight:normal;line-height:1.8;padding:4px 16px;}.css-154zy0m:hover{-webkit-text-decoration:none;text-decoration:none;background-color:#F2F2F2;}.css-yikrym{width:20px;}.css-1jqivyb{color:rgba(0,0,0,0.6);font-size:13px;}.css-1ode1bp{background-color:rgba(0,0,0,0.12);height:1px;width:100%;margin:8px 0;}.css-le4d8r{display:inline-block;vertical-align:middle;height:13px;width:13px;fill:rgba(0,0,0,0.6);}.css-1hbd3g7{height:250px;}.css-helsa7{background-color:#FFFFFF;padding:32px;margin-bottom:24px;}@media (max-width:992px){.css-helsa7{margin:0 auto 40px;}}@media (max-width:480px){.css-helsa7{margin:0 0 40px;padding:32px 16px;}}.css-8qb8m4{margin-bottom:48px;}.css-2imjyh{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-he5w1s{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;width:100%;}@media (max-width:770px){.css-he5w1s{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}}.css-70qvj9{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.css-3ojehk{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;margin-right:4px;}.css-100alwu{display:inline-block;border-radius:50%;line-height:1;overflow:hidden;vertical-align:middle;}.css-1dtnjt5{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-10ougpm{color:rgba(0,0,0,0.87);font-size:14px;font-weight:600;line-height:1.8;margin-right:4px;text-wrap:break-word;word-break:break-all;}.css-1ay9vb9{margin-right:16px;}.css-m19uds{color:rgba(0,0,0,0.6);font-size:14px;line-height:1.8;}.css-cgzq40{color:rgba(0,0,0,0.87);font-size:32px;font-weight:bold;line-height:1.4;margin-top:8px;text-wrap:break-word;word-break:break-all;}.css-1wa99t2{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.6);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:8px;}.css-1l3zk9f{color:rgba(0,0,0,0.6);font-size:20px;margin-right:8px;}.css-4czcte{margin-right:4px;color:inherit;font-size:14px;line-height:1.8;}.css-4czcte:not(:last-child)::after{content:',';margin-right:4px;}.css-1yzj1fm{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:32px;}.css-1uv1qiv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-size:20px;height:32px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin-right:16px;outline:none;padding:0;width:32px;}.css-109dbrr{background-color:#F9F9F9;border-top:1px solid rgba(0,0,0,0.12);bottom:0;box-shadow:0px 1px 4px rgba(0,0,0,0.14);display:none;height:calc(env(safe-area-inset-bottom,0px) + 56px);-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding-bottom:env(safe-area-inset-bottom);position:-webkit-sticky;position:sticky;width:100%;z-index:2000;}@media (max-width:770px){.css-109dbrr{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}.css-5jpx49{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:space-evenly;-webkit-justify-content:space-evenly;-ms-flex-pack:space-evenly;justify-content:space-evenly;width:100%;}.css-mnxgyc{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1vlpknv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;margin-right:4px;background-color:#FFFFFF;}.css-fsjkhv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1b17vb0{color:#6E6F70;font-size:14px;font-weight:bold;margin-left:4px;}.css-7i7f4d{display:none;bottom:initial;left:initial;right:initial;top:initial;bottom:32px;right:0;}</style></head><body><div class="allWrapper"><div><div id="GlobalHeader-react-component-b3267f51-90ef-47a3-9f9e-1df6917e3c6d"><div class="st-Header"><div class="st-Header_container"><div class="st-Header_start"><a href="/" class="st-Header_logo"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 426.57 130"><circle cx="167.08" cy="21.4" r="12.28"></circle><path d="M250.81 29.66h23.48v18.9h-23.48z"></path><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z"></path><circle cx="216.33" cy="21.4" r="12.28"></circle></svg></a><div class="st-Header_communitySelector" tabindex="0"><span class="fa fa-caret-down"></span></div><div class="st-Header_dropdown"><div class="st-Header_dropdownHeading">Qiita Teams that are logged in</div><div class="st-Header_dropdownItemNote">You are not logged in to any team</div><hr class="st-Header_dropdownDivider st-Header_dropdownDivider-shrink"/><a href="https://teams-center.qiita.com/find_team" class="st-Header_dropdownItem"><span class="fa fa-fw fa-sign-in st-Header_dropdownItemIcon"></span><div>Log in to Qiita Team</div></a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Community</div><a href="/organizations" class="st-Header_dropdownItem">Organization</a><a href="/official-events/open" class="st-Header_dropdownItem">Event</a><a href="/advent-calendar" class="st-Header_dropdownItem">Advent Calendar</a><a href="https://qiitadon.com/" class="st-Header_dropdownItem" target="_blank">Qiitadon (β)</a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Service</div><a href="https://jobs.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Jobs</a><a href="https://zine.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Zine</a><a href="https://blog.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Blog</a></div><form class="st-Header_search" action="/search" method="get"><span class="fa fa-search st-Header_searchIcon"></span><input type="search" class="st-Header_searchInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form><form class="st-Header_searchModal" action="/search" method="get"><input type="text" class="st-Header_searchModalInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form></div><div class="st-Header_end"><div class="st-Header_searchButton"><span class="fa fa-search"></span></div><a class="st-Header_signupButton" href="/signup?redirect_to=%2FKageShiron%2Fitems%2Fb74d9246aad3ca0854c2">Signup</a><a class="st-Header_loginLink" href="/login?redirect_to=%2FKageShiron%2Fitems%2Fb74d9246aad3ca0854c2">Login</a></div><div class="st-Header_overlay"></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="GlobalHeader" data-dom-id="GlobalHeader-react-component-b3267f51-90ef-47a3-9f9e-1df6917e3c6d">{"unreadNotificationsCount":null,"realms":[{"humanName":"Qiita","isCurrentRealm":true,"isQiita":true,"isQiitaTeam":false,"loggedInUser":null,"teamId":null,"url":"https://qiita.com/"}],"teamFindUrl":"https://teams-center.qiita.com/find_team","isTeamOnlyUser":null,"currentUser":null}</script>
      
</div><div class="st-HeaderAlert st-HeaderAlert-warning"><div class="st-HeaderAlert_body"></div></div><script type="application/ld+json">{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"/","name":"Qiita"}},{"@type":"ListItem","position":2,"item":{"@id":"/tags/csharp","name":"C#"}}]}</script><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","datePublished":"2019-04-24T17:34:54.000+09:00","dateModified":"2020-10-24T11:38:54.000+09:00","headline":"C#でわかる値渡し、参照渡し","image":"https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0\u0026w=1200\u0026mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND1ReVBqZ2FmamdvX2pnWXZqZ292bGdLVG11S0hqZ1pmamdJSGxqNExuaGFmbXVLSGpnWmMmdHh0LWNvbG9yPSUyMzMzMyZ0eHQtZm9udD1IaXJhZ2lubyUyMFNhbnMlMjBXNiZ0eHQtc2l6ZT01NCZ0eHQtY2xpcD1lbGxpcHNpcyZ0eHQtYWxpZ249Y2VudGVyJTJDbWlkZGxlJnM9NjhkNTZjYWZkNzhkNWUzNjExMDU1MjZhYTc5MjMwZjM\u0026mark-align=center%2Cmiddle\u0026blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RRXRoWjJWVGFHbHliMjQmdHh0LWNvbG9yPSUyMzMzMyZ0eHQtZm9udD1IaXJhZ2lubyUyMFNhbnMlMjBXNiZ0eHQtc2l6ZT00NSZ0eHQtYWxpZ249cmlnaHQlMkNib3R0b20mcz1lMzM1YjQ0Mzc0NzExZjEyZjcxMWYyZGZlOTJkNGViYg\u0026blend-align=center%2Cmiddle\u0026blend-mode=normal\u0026s=a2809c2274c79c4d6aa03ca823cd9791","mainEntityOfPage":"https://qiita.com/KageShiron/items/b74d9246aad3ca0854c2","author":{"@type":"Person","address":"","email":null,"identifier":"KageShiron","name":"KageShiron","image":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F146669%2Fprofile-images%2F1546837817?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=fc1df55a2a3d0633d6f44f3e7da4b9d9","url":"https://qiita.com/KageShiron","description":"","memberOf":[]},"publisher":{"@type":"Organization","name":"Qiita","logo":{"@type":"ImageObject","url":"//cdn.qiita.com/assets/public/qiita-logo-c39ded593afa388e2e1ba435b110554e.png"}}}</script><style type="text/css">.wb-CampaignLink {
  background-color: #333333;
  width: 100%;
}

.wb-CampaignLink_container {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  max-width: 1100px;
  margin: 0 auto;
  font-size: 13px;
  padding: 0.8em;
}
.wb-CampaignLink_container > a {
  color: #fff;
}

.wb-CampaignLink_container > a:hover {
  text-decoration: underline;
}</style><div class="wb-CampaignLink"><div class="wb-CampaignLink_container"><a target="_blank" id="header_text_message_1" href="https://increments.connpass.com/event/211948/">【9/9(木)開催】Qiitaの過去と未来についてお話しします！Qiita エンジニアフェスタ 2021 Online Meetup</a><a target="_blank" id="header_text_message_2" href="https://increments.connpass.com/event/211948/">詳しくはこちら</a></div><script>td.trackEvent(
  'front_events',
  {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"KageShiron","type":"items","id":"b74d9246aad3ca0854c2"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Show","data":{"message":"【9/9(木)開催】Qiitaの過去と未来についてお話しします！Qiita エンジニアフェスタ 2021 Online Meetup","url":"https://increments.connpass.com/event/211948/","sub_message":"詳しくはこちら"}}
)</script><script>document.getElementById('header_text_message_1').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"KageShiron","type":"items","id":"b74d9246aad3ca0854c2"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":2,"pos_id":"header_text_message_1","message":"【9/9(木)開催】Qiitaの過去と未来についてお話しします！Qiita エンジニアフェスタ 2021 Online Meetup","url":"https://increments.connpass.com/event/211948/","sub_message":"詳しくはこちら"}}
  )
})</script><script>document.getElementById('header_text_message_2').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"KageShiron","type":"items","id":"b74d9246aad3ca0854c2"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":2,"pos_id":"header_text_message_2","message":"【9/9(木)開催】Qiitaの過去と未来についてお話しします！Qiita エンジニアフェスタ 2021 Online Meetup","url":"https://increments.connpass.com/event/211948/","sub_message":"詳しくはこちら"}}
  )
})</script></div><script type="application/json" id="js-react-on-rails-context">{"railsEnv":"production","inMailer":false,"i18nLocale":"en","i18nDefaultLocale":"en","href":"https://qiita.com/KageShiron/items/b74d9246aad3ca0854c2","location":"/KageShiron/items/b74d9246aad3ca0854c2","scheme":"https","host":"qiita.com","port":null,"pathname":"/KageShiron/items/b74d9246aad3ca0854c2","search":null,"httpAcceptLanguage":null,"actionPath":"public/items#show","settings":{"analyticsTrackingId":"UA-24675221-12","assetsMap":{},"csrfToken":"Sregge9B3+5ppBgEt4AC6N2iGGsszydNtdt6743meLmy1h9ZODWI6tJeb6qcNMbbpc6TcK9ZcN2smCMaga9E3A==","locale":"en"},"currentUser":null,"isLoggedIn":false,"recaptchaSiteKey":"6LfNkiQTAAAAAM3UGnSquBy2akTITGNMO_QDxMw6","serverSide":false}</script>
<div id="PersonalArticlePage-react-component-b4c88aeb-9811-4220-9d35-ded361eb3f69"><div class="p-items_wrapper"><div class=" css-17jxvjw"><div class="css-11t2ec1"><div class="css-1dvr2p8"><button class=" css-18lkoru"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/KageShiron/items/b74d9246aad3ca0854c2/likers" class="css-1iupg5d">109</a></div><div class="css-ijvq0v"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-115f4t">97</span></div><div class="css-1b8uj5v"><span class="fa fa-twitter"></span></div><div class="css-1b8uj5v"><span class="fa fa-facebook"></span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-fcbn8c"><div class="css-1gj7nt">Improve article</div><a href="/drafts/b74d9246aad3ca0854c2/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/KageShiron/items/b74d9246aad3ca0854c2/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/KageShiron/items/b74d9246aad3ca0854c2/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/KageShiron/items/b74d9246aad3ca0854c2/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/KageShiron/items/b74d9246aad3ca0854c2.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div><div class="p-items_options"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_toc"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_main"><div class="css-helsa7"><div class="css-8qb8m4"><div class="css-2imjyh"><div class="css-he5w1s"><div class="css-70qvj9"><div class="css-3ojehk"><a href="/KageShiron"><img class="css-100alwu eyfquo10" src="https://qiita-image-store.s3.amazonaws.com/0/146669/profile-images/1546837817" width="24" height="24" loading="lazy"/></a></div><div class="css-1dtnjt5"><a href="/KageShiron" class="css-10ougpm">@<!-- -->KageShiron</a><div class="css-1ay9vb9"><span><meta content="2019-04-24T08:34:54Z"/><time dateTime="2020-10-24T02:38:54Z" class="css-m19uds">updated at 2020-10-24</time></span></div></div></div></div></div><h1 class="css-cgzq40">C#でわかる値渡し、参照渡し</h1><div class="css-1wa99t2"><span class="fa fa-tags mr-1of2 css-1l3zk9f" aria-hidden="true"></span><a href="/tags/csharp" class="css-4czcte">C#</a><a href="/tags/.net" class="css-4czcte">.NET</a><a href="/tags/%e5%8f%82%e7%85%a7%e6%b8%a1%e3%81%97" class="css-4czcte">参照渡し</a><a href="/tags/%e5%80%a4%e6%b8%a1%e3%81%97" class="css-4czcte">値渡し</a></div></div><section class="it-MdContent"><div id="personal-public-article-body"><div>
<h1>
<span id="参照渡し値渡しの定義とは" class="fragment"></span><a href="#%E5%8F%82%E7%85%A7%E6%B8%A1%E3%81%97%E5%80%A4%E6%B8%A1%E3%81%97%E3%81%AE%E5%AE%9A%E7%BE%A9%E3%81%A8%E3%81%AF"><i class="fa fa-link"></i></a>参照渡し、値渡しの定義とは</h1>

<p><strong>言語仕様を見よ</strong> </p>

<p>　　終<br>
制作・著作<br>
━━━━━━<br>
　  ⓃⒽⓀ</p>

<h1>
<span id="cにおける参照渡し" class="fragment"></span><a href="#c%E3%81%AB%E3%81%8A%E3%81%91%E3%82%8B%E5%8F%82%E7%85%A7%E6%B8%A1%E3%81%97"><i class="fa fa-link"></i></a>C#における参照渡し</h1>

<p>C++やPHPといった他の言語も含めた<strong>参照渡し</strong>の説明としては「呼び出し元の変数に影響が伝搬する呼び出し」あたりが無難でしょうか。C#では引数の前に<code>ref</code>キーワードをつけると参照渡しとなります。</p>

<div class="code-frame" data-lang="cs"><div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="k">void</span> <span class="nf">sample</span><span class="p">()</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">5</span><span class="p">;</span>
    <span class="nf">value1</span><span class="p">(</span> <span class="n">i</span> <span class="p">);</span> <span class="c1">//値渡し</span>
    <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">i</span><span class="p">);</span> <span class="c1">//=&gt; 5</span>
    <span class="nf">value2</span><span class="p">(</span> <span class="k">ref</span> <span class="n">i</span> <span class="p">);</span> <span class="c1">//参照渡し</span>
    <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">i</span><span class="p">);</span> <span class="c1">//=&gt; 10</span>
<span class="p">}</span>

<span class="c1">// 値型の値渡し</span>
<span class="k">public</span> <span class="k">void</span> <span class="nf">value1</span><span class="p">(</span> <span class="kt">int</span> <span class="n">x</span> <span class="p">)</span> <span class="p">{</span>
    <span class="n">x</span> <span class="p">=</span> <span class="m">10</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// 値型の参照渡し</span>
<span class="k">public</span> <span class="k">void</span> <span class="nf">value2</span><span class="p">(</span> <span class="k">ref</span> <span class="kt">int</span> <span class="n">x</span> <span class="p">)</span> <span class="p">{</span>
    <span class="n">x</span> <span class="p">=</span> <span class="m">10</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>値渡しをしているときはsample関数のiは書き換わりませんでしたが、参照渡しをしているときは書き換わっていることがわかります。</p>

<p><a href="https://docs.microsoft.com/ja-jp/dotnet/csharp/language-reference/keywords/ref" rel="nofollow noopener" target="_blank">ref キーワード - C# リファレンス | Microsoft Docs</a></p>

<p>C#には<strong>値型</strong>、<strong>参照型</strong>、<strong>ポインタ型</strong>という概念が全部存在し、それぞれ<strong>値渡し</strong>と<strong>参照渡し</strong>を行えるため、参照という言葉を理解するのには便利です。もう少し詳しく見ていきます。</p>

<h2>
<span id="cの用語や言語仕様" class="fragment"></span><a href="#c%E3%81%AE%E7%94%A8%E8%AA%9E%E3%82%84%E8%A8%80%E8%AA%9E%E4%BB%95%E6%A7%98"><i class="fa fa-link"></i></a>C#の用語や言語仕様</h2>

<p>まず、C#に慣れていない方向けに、他言語と差異が出やすい用語や言語仕様を確認します。</p>

<h3>
<span id="値型-valut-type" class="fragment"></span><a href="#%E5%80%A4%E5%9E%8B-valut-type"><i class="fa fa-link"></i></a>値型 (valut type)</h3>

<p>構造体(struct)で宣言された型は<strong>値型</strong>となります。intやfloatといった整数型のほか、SizeとかRectangleといったもう少し複雑な方も値型です。値型はローカル変数の場合はスタックに値が置かれます。参照型と比べ、ヒープ確保やGCといったパフォーマンスへの影響を最小限にできるメリットがあります。</p>

<p>JavaやJavaScriptでいうところの、プリミティブ型に近いものです。</p>

<h3>
<span id="参照型reference-type" class="fragment"></span><a href="#%E5%8F%82%E7%85%A7%E5%9E%8Breference-type"><i class="fa fa-link"></i></a>参照型(reference type)</h3>

<p>クラス(class)で宣言された型は<strong>参照型</strong>になります。string、List、配列などは参照型です。ヒープ領域に実体(インスタンス)があり、スタックにはそこへの参照(reference)のみが入っています。巨大なオブジェクトを値渡しすると発生する大量のコピーが防げるのがパフォーマンス上のメリットです。</p>

<p>（厳密な話はしませんが、コンピュータ的には参照とポインタはだいたい同じものです）</p>

<h3>
<span id="ポインタ型pointer-type" class="fragment"></span><a href="#%E3%83%9D%E3%82%A4%E3%83%B3%E3%82%BF%E5%9E%8Bpointer-type"><i class="fa fa-link"></i></a>ポインタ型(pointer type)</h3>

<p>C#にはWin32APIやC言語のDLLとのやり取りを主な目的に、ポインタが存在します。ただし、セキュリティやGCの都合から、非常に厳しい制限がかけられています。<code>unsafe</code>で修飾したり、コンパイラオプションを別途指定せなばならず、参照型のポインタを取得することはさらに規制がかかります。</p>

<h3>
<span id="値渡しby-value" class="fragment"></span><a href="#%E5%80%A4%E6%B8%A1%E3%81%97by-value"><i class="fa fa-link"></i></a>値渡し(by Value)</h3>

<p>C#では何もつけていない関数の引数は<strong>値渡し</strong>になります。VB.NETでは<code>ByVal</code>をつけることもできます。</p>

<p>呼び出し先の関数で使うためににスタックに<strong>値自体</strong>をコピーします。</p>

<h3>
<span id="参照渡しby-reference" class="fragment"></span><a href="#%E5%8F%82%E7%85%A7%E6%B8%A1%E3%81%97by-reference"><i class="fa fa-link"></i></a>参照渡し(by Reference)</h3>

<p>C#では<code>ref</code> <code>out</code> <code>in</code>(C#7.2以降)を引数の前につけると<strong>参照渡し</strong>になります。VB.NETでは<code>ByRef</code>をつけます。</p>

<p>呼び出し先の関数で使うためにスタックに<strong>値への参照</strong>(値の場所のアドレス)を書き込みます。</p>

<h3>
<span id="そのほか用語統一用の話" class="fragment"></span><a href="#%E3%81%9D%E3%81%AE%E3%81%BB%E3%81%8B%E7%94%A8%E8%AA%9E%E7%B5%B1%E4%B8%80%E7%94%A8%E3%81%AE%E8%A9%B1"><i class="fa fa-link"></i></a>そのほか用語統一用の話</h3>

<h4>
<span id="プリミティブ型" class="fragment"></span><a href="#%E3%83%97%E3%83%AA%E3%83%9F%E3%83%86%E3%82%A3%E3%83%96%E5%9E%8B"><i class="fa fa-link"></i></a>プリミティブ型</h4>

<p>プリミティブ型はJavaなどでは重要な用語です。そして、「C#のプリミティブ型」と「CLR(共通言語ラインタイム)のプリミティブ型」も存在します。・・・が、Javaと違ってC#とCLRのプリミティブ型はあんまり深い意味のない用語です。最初期に定めたものの、値型と参照型の違いで事足りたのでしょう。</p>

<p>他の言語でも「プリミティブ型」の意味合いは仕様書やドキュメントで定義されている場合があるので、よく確認して使用してください。</p>

<p><a href="https://ufcpp.net/blog/2016/12/tipsprimitives/" rel="nofollow noopener" target="_blank">小ネタ プリミティブ型 | ++C++; // 未確認飛行 C ブログ</a></p>

<h4>
<span id="オブジェクト" class="fragment"></span><a href="#%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88"><i class="fa fa-link"></i></a>オブジェクト</h4>

<p>この単語は色々な意味合いで乱用される用語なので、この記事では使用を避けます。</p>

<h4>
<span id="ポインタ渡し" class="fragment"></span><a href="#%E3%83%9D%E3%82%A4%E3%83%B3%E3%82%BF%E6%B8%A1%E3%81%97"><i class="fa fa-link"></i></a>ポインタ渡し</h4>

<p>C#ではポインタを扱う事自体がレアケースなので、「ポインタ渡し」と呼ぶ場面はあまりなさそう。「ポインタの値渡し」と同義なので、この記事ではそう表記します。</p>

<h2>
<span id="コードと概念図" class="fragment"></span><a href="#%E3%82%B3%E3%83%BC%E3%83%89%E3%81%A8%E6%A6%82%E5%BF%B5%E5%9B%B3"><i class="fa fa-link"></i></a>コードと概念図</h2>

<p>概念図はスタックとヒープをイメージしたものです。スタックの下半分が呼び出し元、上半分が呼び出し先の引数やローカル変数をイメージしてます。</p>

<p>概念図なのでアドレスや細かいところは適当です。実際のC#のスタック構造とは異なるので注意してください。</p>

<h3>
<span id="値型" class="fragment"></span><a href="#%E5%80%A4%E5%9E%8B"><i class="fa fa-link"></i></a>値型</h3>

<div class="code-frame" data-lang="c#"><div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="k">void</span> <span class="nf">valueSample</span><span class="p">()</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">x</span> <span class="p">=</span> <span class="m">10</span><span class="p">;</span>
    <span class="nf">value1</span><span class="p">(</span> <span class="n">x</span> <span class="p">);</span>
    <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span> <span class="n">x</span> <span class="p">);</span> <span class="c1">//=&gt; 10</span>
    <span class="nf">value2</span><span class="p">(</span> <span class="k">ref</span> <span class="n">x</span> <span class="p">);</span>
    <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span> <span class="n">x</span> <span class="p">);</span> <span class="c1">//=&gt; 20</span>
<span class="p">}</span>

<span class="c1">//値型の値渡し</span>
<span class="k">public</span> <span class="k">void</span> <span class="nf">value1</span><span class="p">(</span> <span class="kt">int</span> <span class="n">y</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">y</span> <span class="p">=</span> <span class="m">20</span><span class="p">;</span>
<span class="p">}</span>
<span class="c1">//値型の参照渡し</span>
<span class="k">public</span> <span class="k">void</span> <span class="nf">value2</span><span class="p">(</span> <span class="k">ref</span> <span class="kt">int</span> <span class="n">y</span> <span class="p">)</span> <span class="p">{</span>
    <span class="n">y</span> <span class="p">=</span> <span class="m">20</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p><a href="https://camo.qiitausercontent.com/47125d8f67d5236fa9e203aa57c271ed7c64c2ed/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3134363636392f32346363353331312d643534622d663166372d343961362d3530303039396236366138642e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F146669%2F24cc5311-d54b-f1f7-49a6-500099b66a8d.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=e0dc9a72b0a63f828d5dc9e24e2f84f5" alt="byref.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/146669/24cc5311-d54b-f1f7-49a6-500099b66a8d.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F146669%2F24cc5311-d54b-f1f7-49a6-500099b66a8d.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=af24753356a5f1ae331967872a361806 1x" loading="lazy"></a><br>
value1ではxそのもの(10)がyにコピーされています。<br>
value2ではxのアドレスがyに書き込まれています。こちらではxの値を書き換えることができるのがわかります。</p>

<h1>
<span id="参照型" class="fragment"></span><a href="#%E5%8F%82%E7%85%A7%E5%9E%8B"><i class="fa fa-link"></i></a>参照型</h1>

<p>配列は参照型です。</p>

<div class="code-frame" data-lang="c#"><div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="k">void</span> <span class="nf">refSample</span><span class="p">()</span>
<span class="p">{</span>
    <span class="kt">int</span><span class="p">[]</span> <span class="n">x</span> <span class="p">=</span> <span class="k">new</span> <span class="kt">int</span><span class="p">[]</span> <span class="p">{</span><span class="m">10</span><span class="p">,</span><span class="m">20</span><span class="p">,</span><span class="m">30</span><span class="p">};</span>
    <span class="nf">ref1</span><span class="p">(</span> <span class="n">x</span> <span class="p">);</span>
    <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"[{0},{1},{2}]"</span><span class="p">,</span><span class="n">x</span><span class="p">[</span><span class="m">0</span><span class="p">],</span><span class="n">x</span><span class="p">[</span><span class="m">1</span><span class="p">],</span><span class="n">x</span><span class="p">[</span><span class="m">2</span><span class="p">]);</span> <span class="c1">//=&gt;[10,20,30]</span>
    <span class="nf">ref2</span><span class="p">(</span> <span class="k">ref</span> <span class="n">x</span> <span class="p">);</span>
    <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"[{0},{1},{2}]"</span><span class="p">,</span><span class="n">x</span><span class="p">[</span><span class="m">0</span><span class="p">],</span><span class="n">x</span><span class="p">[</span><span class="m">1</span><span class="p">],</span><span class="n">x</span><span class="p">[</span><span class="m">2</span><span class="p">]);</span> <span class="c1">//=&gt;[50,60,70]</span>
<span class="p">}</span>

<span class="c1">// 参照型の値渡し</span>
<span class="k">public</span> <span class="k">void</span> <span class="nf">ref1</span><span class="p">(</span> <span class="kt">int</span><span class="p">[]</span> <span class="n">y</span> <span class="p">)</span> <span class="p">{</span>
    <span class="n">y</span> <span class="p">=</span> <span class="k">new</span> <span class="kt">int</span><span class="p">[]</span> <span class="p">{</span><span class="m">50</span><span class="p">,</span><span class="m">60</span><span class="p">,</span><span class="m">70</span><span class="p">};</span>
<span class="p">}</span>
<span class="c1">// 参照型の参照渡し</span>
<span class="k">public</span> <span class="k">void</span> <span class="nf">ref2</span><span class="p">(</span> <span class="k">ref</span> <span class="kt">int</span><span class="p">[]</span> <span class="n">y</span> <span class="p">)</span> <span class="p">{</span>
    <span class="n">y</span> <span class="p">=</span> <span class="k">new</span> <span class="kt">int</span><span class="p">[]</span> <span class="p">{</span><span class="m">50</span><span class="p">,</span><span class="m">60</span><span class="p">,</span><span class="m">70</span><span class="p">};</span>
<span class="p">}</span>
</code></pre></div></div>

<p><a href="https://camo.qiitausercontent.com/0786bd36d53e56dffce5fdb44b0086be3cf6436c/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3134363636392f65666234653536362d353062632d383764612d336632642d3061373135626635303764632e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F146669%2Fefb4e566-50bc-87da-3f2d-0a715bf507dc.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=ab94c5f29091f7a8788f972b14a973af" alt="byref.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/146669/efb4e566-50bc-87da-3f2d-0a715bf507dc.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F146669%2Fefb4e566-50bc-87da-3f2d-0a715bf507dc.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=c27ce8088000f76b5ef0ccab396e5b18 1x" loading="lazy"></a></p>

<p>呼出後は以下のように変わります。スタックの書き換えられた位置を緑にしました。<br>
(なんか矢印の先っぽが変な形になってますが、気になさらず) </p>

<p><a href="https://camo.qiitausercontent.com/4a2433d56262f92c36cc8e6651992fe005c56d26/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3134363636392f36316630643438382d393539332d383734662d316439662d3035326532356130306262662e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F146669%2F61f0d488-9593-874f-1d9f-052e25a00bbf.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=87b62f09f44bf53f26d248c778607b31" alt="byref(1).png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/146669/61f0d488-9593-874f-1d9f-052e25a00bbf.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F146669%2F61f0d488-9593-874f-1d9f-052e25a00bbf.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=de79e0535928b8a32c6721834d33b58e 1x" loading="lazy"></a></p>

<p>ヒープに新たな配列を確保するのはどちらも同じですが、ref1ではrefSample関数のxには影響が及びません。一方で、ref2ではxの値が書き換わっているのがわかります。</p>

<p>【余談】<br>
クラスの参照渡しはほとんど使うことはありません。この文法が残されているのは、ダブルポインタを扱うWin32APIを自然に叩けるようにするためだと思われます。Win32ではトリプルポインタが出てくることはまずないので、ほとんどの場所で面倒なポインタ構文を使う必要が無くなります。</p>

<div class="code-frame" data-lang="C#"><div class="highlight"><pre class="with-code"><code><span class="c1">// C言語</span>
<span class="c1">// SHSTDAPI SHGetMalloc(</span>
<span class="c1">//  IMalloc **ppMalloc</span>
<span class="c1">// );</span>
<span class="p">[</span><span class="nf">DllImport</span><span class="p">(</span><span class="s">"shell32.dll"</span><span class="p">)]</span>
<span class="k">static</span> <span class="k">extern</span> <span class="kt">int</span> <span class="nf">SHGetMalloc</span><span class="p">(</span><span class="k">out</span> <span class="n">IMalloc</span> <span class="n">ppMalloc</span><span class="p">);</span>
</code></pre></div></div>

<h2>
<span id="ポインタ型" class="fragment"></span><a href="#%E3%83%9D%E3%82%A4%E3%83%B3%E3%82%BF%E5%9E%8B"><i class="fa fa-link"></i></a>ポインタ型</h2>

<p>繰り返しますが、C#のポインタは通常は使いませんが、説明のためにあえてやってるだけです。参照型のポインタは基本的に取れないので値型のポインタについての説明です。</p>

<div class="code-frame" data-lang="c#"><div class="highlight"><pre class="with-code"><code><span class="k">public</span> <span class="k">unsafe</span> <span class="k">void</span> <span class="nf">ptrSample</span><span class="p">()</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">x</span> <span class="p">=</span> <span class="m">10</span><span class="p">;</span>
    <span class="nf">ptr1</span><span class="p">(</span> <span class="p">&amp;</span><span class="n">x</span> <span class="p">);</span>
    <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span> <span class="n">x</span> <span class="p">);</span> <span class="c1">//=&gt; 20</span>
    <span class="kt">int</span> <span class="p">*</span><span class="n">p</span> <span class="p">=</span> <span class="p">&amp;</span><span class="n">x</span><span class="p">;</span>
    <span class="nf">ptr2</span><span class="p">(</span> <span class="k">ref</span> <span class="n">p</span> <span class="p">);</span>
    <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span> <span class="n">x</span> <span class="p">);</span> <span class="c1">//=&gt; Invalid(20を出す可能性が高い）</span>
<span class="p">}</span>
<span class="c1">//値型へのポインタの値渡し</span>
<span class="k">public</span> <span class="k">unsafe</span> <span class="k">void</span> <span class="nf">ptr1</span><span class="p">(</span> <span class="kt">int</span> <span class="p">*</span><span class="n">y</span> <span class="p">)</span> <span class="p">{</span>
    <span class="p">*</span><span class="n">y</span> <span class="p">=</span> <span class="m">20</span><span class="p">;</span>
<span class="p">}</span>
<span class="c1">//値型へのポインタの参照渡し</span>
<span class="k">public</span> <span class="k">unsafe</span> <span class="k">void</span> <span class="nf">ptr2</span><span class="p">(</span> <span class="k">ref</span> <span class="kt">int</span> <span class="p">*</span><span class="n">y</span> <span class="p">)</span> <span class="p">{</span>
   <span class="kt">int</span> <span class="n">z</span> <span class="p">=</span> <span class="m">20</span><span class="p">;</span>
    <span class="n">y</span> <span class="p">=</span> <span class="p">&amp;</span><span class="n">z</span><span class="p">;</span> <span class="c1">//注意！不適切な代入</span>
<span class="p">}</span>
</code></pre></div></div>

<p><a href="https://camo.qiitausercontent.com/d3a20c8e5886f8ad3165921acb0f343a0130f879/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3134363636392f33333833613465302d346365632d373564622d356332302d3939666266353033376263632e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F146669%2F3383a4e0-4cec-75db-5c20-99fbf5037bcc.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=a912b7569e09985146fca621e16f8531" alt="byref(2).png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/146669/3383a4e0-4cec-75db-5c20-99fbf5037bcc.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F146669%2F3383a4e0-4cec-75db-5c20-99fbf5037bcc.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=1788b43d2fd4e5867e304469c5ae9e83 1x" loading="lazy"></a></p>

<p>値型のポインタの値渡しは値型の参照渡しとメモリ構造的には完全に同一です。一方で、値型のポインタの値渡しは今回の例では見事に無効なスタック領域を指すようになってしまいました。もちろん、有効な領域を指すポインタにすることも可能ですが、ポインタを使う文脈では素直にダブルポインタを使えば良いので、ポインタを参照渡しするメリットはないと思います。というか、しないで。</p>

<h3>
<span id="補足参照とポインタは何が違う" class="fragment"></span><a href="#%E8%A3%9C%E8%B6%B3%E5%8F%82%E7%85%A7%E3%81%A8%E3%83%9D%E3%82%A4%E3%83%B3%E3%82%BF%E3%81%AF%E4%BD%95%E3%81%8C%E9%81%95%E3%81%86"><i class="fa fa-link"></i></a>[補足]参照とポインタは何が違う？</h3>

<p>図を見ると、参照とポインタは何が違うのか、と思うかもしれませんが、<strong>機械語レベルではだいたい同じ</strong>です。一方で、C#の参照は以下のような違いがあります。</p>

<ul>
<li>(言うまでもないですが)文法や使える機能が異なる</li>
<li>参照はGCが適切にメモリを管理してくれる</li>
<li>参照は安全である

<ul>
<li>unsafe以外では上のポインタのように無効な領域を指すと言った危険なことは基本起こらない</li>
<li>ポインタは危険なので<code>unsafe</code>の指定やコンパイル時に<code>/unsafe</code>を付ける必要があり、実行が制限される可能性がある</li>
</ul>
</li>
</ul>

<h1>
<span id="cにおける参照渡し2019" class="fragment"></span><a href="#c%E3%81%AB%E3%81%8A%E3%81%91%E3%82%8B%E5%8F%82%E7%85%A7%E6%B8%A1%E3%81%972019"><i class="fa fa-link"></i></a>C#における参照渡し2019</h1>

<p>人によっては、「参照渡しは時代遅れ」思っている方もいるようです。しかし、C#業界では参照渡しはかつてないほどのブームとなっています。</p>

<p>C#のコンパイラがC++製からC#製の<strong>Roslyn</strong>に変わったのですが、それによってパフォーマンス要求が大きくなりました。そこでスタックをうまく使い、遅くなる原因のヒープアロケートを極力避ける方向で文法の拡張が続いており、「安全なポインタ」のように参照渡しがうまく使われている場面があります。その他、スタック領域の配列確保を安全にできるようにしたり、ref戻り値や読み取り専用の参照渡しも登場しています。</p>

<p>JavaやJavaScriptと比べると、プログラマが能動的に最適化を行えるのがC#の面白いところです。一方で、JavaやJavaScriptのJITもかなり早いし、NumPyも丁寧に書かれているので、どの言語が有利！と簡単には言えないのがまた難しいところです。</p>

<p><a href="https://ufcpp.net/study/csharp/resource/span/" rel="nofollow noopener" target="_blank">Span構造体 - C# によるプログラミング入門 | ++C++; // 未確認飛行 C</a><br>
<a href="https://docs.microsoft.com/ja-jp/dotnet/csharp/programming-guide/classes-and-structs/ref-returns" rel="nofollow noopener" target="_blank">ref 戻り値と ref ローカル変数 (C# ガイド) | Microsoft Docs</a><br>
<a href="https://docs.microsoft.com/ja-jp/dotnet/csharp/language-reference/keywords/in-parameter-modifier" rel="nofollow noopener" target="_blank">in パラメーター修飾子 - C# リファレンス | Microsoft Docs</a></p>

<h1>
<span id="まとめ" class="fragment"></span><a href="#%E3%81%BE%E3%81%A8%E3%82%81"><i class="fa fa-link"></i></a>まとめ</h1>

<p>使い所の難しい参照渡しですが、メモリイメージを完全に理解すればそこまで難しいことはしていません。今後も重要な考え方なので、完全に理解してC#をばりばり書いて行きましょう！</p>

<p>一方で、これはあくまで「C#の参照渡し」のざっくりとした説明です。用語はそれぞれの言語や処理系で異なるので、しっかりと仕様書やドキュメントを確認することが大切です。</p>

<p>(なお、間違いや現在の処理系で異なってる部分があれば教えてください)</p>

<h1>
<span id="おまけ1参照の値渡しを参照渡しと呼ばない方が良い理由" class="fragment"></span><a href="#%E3%81%8A%E3%81%BE%E3%81%911%E5%8F%82%E7%85%A7%E3%81%AE%E5%80%A4%E6%B8%A1%E3%81%97%E3%82%92%E5%8F%82%E7%85%A7%E6%B8%A1%E3%81%97%E3%81%A8%E5%91%BC%E3%81%B0%E3%81%AA%E3%81%84%E6%96%B9%E3%81%8C%E8%89%AF%E3%81%84%E7%90%86%E7%94%B1"><i class="fa fa-link"></i></a>【おまけ1】「参照の値渡し」を「参照渡し」と呼ばない方が良い理由</h1>

<p>ところで、参照の値渡しを「参照渡し」と呼んでいる方をよく見かけます。そして、それを間違いとする意見もよく見かけます。</p>

<p>まず、「参照渡し(by reference)」が仕様書やドキュメントに用語として使われている言語(C++、.NET系言語、PHPなど)ではふさわしくないでしょう。ちゃんと言語仕様にある用語を使うべきです。</p>

<p>一方で、値渡ししかない言語(JavaScript、Pythonなど)はちゃんと挙動と他の言語での用法を理解していればもう止めてもしょうがない感はあります(私は言いませんがね。)しかし、以下のようなデメリットが生じる可能性があることは留意してください。</p>

<h2>
<span id="言語を跨ぐ際の混乱" class="fragment"></span><a href="#%E8%A8%80%E8%AA%9E%E3%82%92%E8%B7%A8%E3%81%90%E9%9A%9B%E3%81%AE%E6%B7%B7%E4%B9%B1"><i class="fa fa-link"></i></a>言語を跨ぐ際の混乱</h2>

<p>C++の影響力はなおも強く、JavaScriptを調べていて気がついたらV8のソースを読んでいたということは稀によくあるかと思います。また、Pythonの拡張ライブラリを書いたりgPRCの発展などで言語の壁が薄くなる展開があれば、言語仕様にない用語は誤った捉えられ方をするかもしれません。</p>

<h2>
<span id="microsoftやライブラリ用語の影響" class="fragment"></span><a href="#microsoft%E3%82%84%E3%83%A9%E3%82%A4%E3%83%96%E3%83%A9%E3%83%AA%E7%94%A8%E8%AA%9E%E3%81%AE%E5%BD%B1%E9%9F%BF"><i class="fa fa-link"></i></a>Microsoftやライブラリ用語の影響</h2>

<p>参照渡しは.NETやCOMの用語でもあります。.NETによるPythonの実装であるIronPython関連や、JavaScript(JScriptも含む)とWSH絡みでは「JScriptでは参照渡しができないため～」といった説明が現に存在します。近年JavaScript大好きなMicrosoftの展開次第では混乱が生じる場面もあるでしょう。</p>

<h2>
<span id="今後参照渡しが追加される可能性" class="fragment"></span><a href="#%E4%BB%8A%E5%BE%8C%E5%8F%82%E7%85%A7%E6%B8%A1%E3%81%97%E3%81%8C%E8%BF%BD%E5%8A%A0%E3%81%95%E3%82%8C%E3%82%8B%E5%8F%AF%E8%83%BD%E6%80%A7"><i class="fa fa-link"></i></a>今後「参照渡し」が追加される可能性</h2>

<p>今は参照渡しがない言語に将来「参照渡し」が実装される可能性はないのでしょうか? 例えば、JavaScriptにおいて5年後、10年後にChromeOS絡みやら、WebAssembly絡みの展開を私は全く予測できません。もしどこかに「by reference」という用語が出現したら、混乱や検索の邪魔になることはありえます。</p>

<h1>
<span id="おまけ2jit結果の逆アセンブルを見てみよう" class="fragment"></span><a href="#%E3%81%8A%E3%81%BE%E3%81%912jit%E7%B5%90%E6%9E%9C%E3%81%AE%E9%80%86%E3%82%A2%E3%82%BB%E3%83%B3%E3%83%96%E3%83%AB%E3%82%92%E8%A6%8B%E3%81%A6%E3%81%BF%E3%82%88%E3%81%86"><i class="fa fa-link"></i></a>【おまけ2】JIT結果の逆アセンブルを見てみよう！</h1>

<p>結局参照よくわからん！という人もいるでしょう。どういう時もとりあえず逆アセンブルを見ておけば安心です(実際はGCの関連などもあるので油断なりませんが)。</p>

<p><a href="https://sharplab.io/" class="autolink" rel="nofollow noopener" target="_blank">https://sharplab.io/</a> でブラウザから簡単に逆コンパイルを行えます。いい時代になりましたね。</p>

<div class="code-frame" data-lang="text"><div class="highlight"><pre class="with-code"><code>; value1( int y )
C.value1(Int32)
    L0000: ret

; value2( ref int y )
C.value2(Int32 ByRef)
    L0000: mov dword [rdx], 0x14
    L0006: ret

; ref1( int[] y )
; new int[] { 50 }に減らしてあります。
C.ref1(Int32[])
    L0000: sub rsp, 0x28
    L0004: mov rcx, 0x7ffdb726725a
    L000e: mov edx, 0x1
    L0013: call 0x7ffdb9a22630
    L0018: mov dword [rax+0x10], 0x32
    L001f: add rsp, 0x28
    L0023: ret

; ref2( ref int[] y )
; new int[] { 50 }に減らしてあります。
C.ref2(Int32[] ByRef)
    L0000: push rsi
    L0001: sub rsp, 0x20
    L0005: mov rsi, rdx
    L0008: mov rcx, 0x7ffdb726725a
    L0012: mov edx, 0x1
    L0017: call 0x7ffdb9a22630
    L001c: mov dword [rax+0x10], 0x32
    L0023: mov rcx, rsi
    L0026: mov rdx, rax
    L0029: call 0x7ffdb9a23fc0
    L002e: nop
    L002f: add rsp, 0x20
    L0033: pop rsi
    L0034: ret
</code></pre></div></div>

<p>LinuxとWindowsでは呼び出し規約が異なること、断片的なコードをJITした結果であることに注意してください。Windowsではrcx→rdx→r8→r9の順にレジスタが使われますが、rcxは基本はthisポインタです。</p>

<p>最適化でガッツリコードが消されてますが、value2のコードの扱いとかは見やすいですね！</p>
</div></div></section><div class="css-1yzj1fm"><div class="css-1uv1qiv"><span class="fa fa-twitter"></span></div><div class="css-1uv1qiv"><span class="fa fa-facebook"></span></div></div><div class="apm-Content"><div class="apm-Content_title">Why not register and get more from Qiita?</div><ol class="apm-Content_list"><li>We will deliver articles that match you<div class="description">By following users and tags, you can catch up information on technical fields that you are interested in as a whole</div></li><li>you can read useful information later efficiently<div class="description">By &quot;stocking&quot; the articles you like, you can search right away</div></li><div><a class="apm-Content_help" href="https://help.qiita.com/ja/articles/qiita-login-user" target="_blank"><i class="fa fa-fw fa-arrow-circle-right"></i>What you can do with signing up</a></div></ol><a href="/signup?callback_action=login_or_signup&amp;redirect_to=%2FKageShiron%2Fitems%2Fb74d9246aad3ca0854c2&amp;realm=qiita" class="apm-Content_button apm-Content_button-signup">Sign up</a><a href="/login?callback_action=login_or_signup&amp;redirect_to=%2FKageShiron%2Fitems%2Fb74d9246aad3ca0854c2&amp;realm=qiita" class="apm-Content_button apm-Content_button-signin">Login</a></div></div><div class="css-helsa7"></div></div></div></div><div class="css-109dbrr"><div class="css-5jpx49"><div class="css-mnxgyc"><button class=" css-1vlpknv"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/KageShiron/items/b74d9246aad3ca0854c2/likers" class="css-1iupg5d">109</a></div><div class="css-fsjkhv"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-1b17vb0">97</span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-7i7f4d"><div class="css-1gj7nt">Improve article</div><a href="/drafts/b74d9246aad3ca0854c2/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/KageShiron/items/b74d9246aad3ca0854c2/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/KageShiron/items/b74d9246aad3ca0854c2/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/KageShiron/items/b74d9246aad3ca0854c2/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/KageShiron/items/b74d9246aad3ca0854c2.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="PersonalArticlePage" data-dom-id="PersonalArticlePage-react-component-b4c88aeb-9811-4220-9d35-ded361eb3f69">{"authorAnalyticsTrackingId":null,"organizationAnalyticsTrackingId":null}</script>
      
<footer id="globalFooter" class="st-Footer"><div class="st-Footer_container"><div class="st-Footer_start"><div class="st-Footer_logo"><svg viewbox="0 0 426.57 130" xmlns="http://www.w3.org/2000/svg"><circle cx="167.08" cy="21.4" r="12.28" /><path d="M250.81 29.66h23.48v18.9h-23.48z" /><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z" /><circle cx="216.33" cy="21.4" r="12.28" /></svg></div><div class="st-Footer_catchcopy">How developers code is here.</div><div class="st-Footer_socials"><a class="fa fa-twitter" href="https://twitter.com/qiita"></a><a class="fa fa-facebook-square" href="https://www.facebook.com/qiita/"></a></div></div><div class="st-Footer_end"><div class="st-Footer_qiita"><div class="st-Footer_label">Qiita</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="/about">About</a><a href="/terms">Terms</a><a href="/privacy">Privacy</a><a target="_blank" href="http://help.qiita.com/ja/articles/qiita-community-guideline">Guideline</a><a target="_blank" href="https://help.qiita.com/ja/articles/others-brand-guideline">Design Guideline</a></div><div class="st-Footer_column"><a href="/release-notes">Release</a><a href="/api/v2/docs">API</a><a href="/feedback/new">ご意見</a><a href="https://help.qiita.com">Help</a><a target="_blank" href="https://qiita.com/ads?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Advertisement</a></div></div></div><div class="st-Footer_increments"><div class="st-Footer_label">Increments</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="https://increments.co.jp/company/">About</a><a href="https://increments.co.jp/jobs/">採用情報</a><a href="https://blog.qiita.com">Blog</a></div><div class="st-Footer_column"><a href="https://teams.qiita.com/">Qiita Team</a><a href="https://jobs.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Jobs</a><a href="https://zine.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Zine</a></div></div></div></div></div><div class="st-Footer_copyright">© 2011-2021 Increments Inc.</div></footer><div id="Snackbar-react-component-5a90e258-d4ee-4e66-947d-ab801d714d4e"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="Snackbar" data-dom-id="Snackbar-react-component-5a90e258-d4ee-4e66-947d-ab801d714d4e">{}</script>
      
<div id="LoginModal-react-component-b498b5bd-441f-4d30-a6f2-a2ea494a8811"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="LoginModal" data-dom-id="LoginModal-react-component-b498b5bd-441f-4d30-a6f2-a2ea494a8811">{}</script>
      
<div id="StockModal-react-component-f54d10f6-d85b-4cbc-bff7-0cddb7053c9a"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="StockModal" data-dom-id="StockModal-react-component-f54d10f6-d85b-4cbc-bff7-0cddb7053c9a">{}</script>
      
</div><div id="dataContainer" style="display: none;" data-config="{&quot;actionPath&quot;:&quot;public/items#show&quot;,&quot;settings&quot;:{&quot;analyticsTrackingId&quot;:&quot;UA-24675221-12&quot;,&quot;assetsMap&quot;:{},&quot;csrfToken&quot;:&quot;XExxsK1Ds3gFOVq7ZbaFPLynZVshI2RYb16CiIx7K3ekLc5oejfkfL7DLRVOAkEPxMvuQKK1M8h2Hdt9gDIXEg==&quot;,&quot;locale&quot;:&quot;en&quot;},&quot;currentUser&quot;:null}" /></body></html><script type="application/json" data-js-react-on-rails-store="AppStoreWithReactOnRails">{"snackbar":{"type":"","body":"","isActive":false},"article":{"article":{"body":"\n\u003ch1\u003e\n\u003cspan id=\"参照渡し値渡しの定義とは\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%8F%82%E7%85%A7%E6%B8%A1%E3%81%97%E5%80%A4%E6%B8%A1%E3%81%97%E3%81%AE%E5%AE%9A%E7%BE%A9%E3%81%A8%E3%81%AF\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e参照渡し、値渡しの定義とは\u003c/h1\u003e\n\n\u003cp\u003e\u003cstrong\u003e言語仕様を見よ\u003c/strong\u003e \u003c/p\u003e\n\n\u003cp\u003e　　終\u003cbr\u003e\n制作・著作\u003cbr\u003e\n━━━━━━\u003cbr\u003e\n　  ⓃⒽⓀ\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"cにおける参照渡し\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#c%E3%81%AB%E3%81%8A%E3%81%91%E3%82%8B%E5%8F%82%E7%85%A7%E6%B8%A1%E3%81%97\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eC#における参照渡し\u003c/h1\u003e\n\n\u003cp\u003eC++やPHPといった他の言語も含めた\u003cstrong\u003e参照渡し\u003c/strong\u003eの説明としては「呼び出し元の変数に影響が伝搬する呼び出し」あたりが無難でしょうか。C#では引数の前に\u003ccode\u003eref\u003c/code\u003eキーワードをつけると参照渡しとなります。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"cs\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003esample\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e5\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"nf\"\u003evalue1\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e \u003cspan class=\"p\"\u003e);\u003c/span\u003e \u003cspan class=\"c1\"\u003e//値渡し\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eConsole\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWriteLine\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e \u003cspan class=\"c1\"\u003e//=\u0026gt; 5\u003c/span\u003e\n    \u003cspan class=\"nf\"\u003evalue2\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"k\"\u003eref\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e \u003cspan class=\"p\"\u003e);\u003c/span\u003e \u003cspan class=\"c1\"\u003e//参照渡し\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eConsole\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWriteLine\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e \u003cspan class=\"c1\"\u003e//=\u0026gt; 10\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// 値型の値渡し\u003c/span\u003e\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003evalue1\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e10\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// 値型の参照渡し\u003c/span\u003e\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003evalue2\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"k\"\u003eref\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e10\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e値渡しをしているときはsample関数のiは書き換わりませんでしたが、参照渡しをしているときは書き換わっていることがわかります。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://docs.microsoft.com/ja-jp/dotnet/csharp/language-reference/keywords/ref\" rel=\"nofollow noopener\" target=\"_blank\"\u003eref キーワード - C# リファレンス | Microsoft Docs\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eC#には\u003cstrong\u003e値型\u003c/strong\u003e、\u003cstrong\u003e参照型\u003c/strong\u003e、\u003cstrong\u003eポインタ型\u003c/strong\u003eという概念が全部存在し、それぞれ\u003cstrong\u003e値渡し\u003c/strong\u003eと\u003cstrong\u003e参照渡し\u003c/strong\u003eを行えるため、参照という言葉を理解するのには便利です。もう少し詳しく見ていきます。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"cの用語や言語仕様\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#c%E3%81%AE%E7%94%A8%E8%AA%9E%E3%82%84%E8%A8%80%E8%AA%9E%E4%BB%95%E6%A7%98\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eC#の用語や言語仕様\u003c/h2\u003e\n\n\u003cp\u003eまず、C#に慣れていない方向けに、他言語と差異が出やすい用語や言語仕様を確認します。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"値型-valut-type\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%80%A4%E5%9E%8B-valut-type\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e値型 (valut type)\u003c/h3\u003e\n\n\u003cp\u003e構造体(struct)で宣言された型は\u003cstrong\u003e値型\u003c/strong\u003eとなります。intやfloatといった整数型のほか、SizeとかRectangleといったもう少し複雑な方も値型です。値型はローカル変数の場合はスタックに値が置かれます。参照型と比べ、ヒープ確保やGCといったパフォーマンスへの影響を最小限にできるメリットがあります。\u003c/p\u003e\n\n\u003cp\u003eJavaやJavaScriptでいうところの、プリミティブ型に近いものです。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"参照型reference-type\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%8F%82%E7%85%A7%E5%9E%8Breference-type\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e参照型(reference type)\u003c/h3\u003e\n\n\u003cp\u003eクラス(class)で宣言された型は\u003cstrong\u003e参照型\u003c/strong\u003eになります。string、List、配列などは参照型です。ヒープ領域に実体(インスタンス)があり、スタックにはそこへの参照(reference)のみが入っています。巨大なオブジェクトを値渡しすると発生する大量のコピーが防げるのがパフォーマンス上のメリットです。\u003c/p\u003e\n\n\u003cp\u003e（厳密な話はしませんが、コンピュータ的には参照とポインタはだいたい同じものです）\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"ポインタ型pointer-type\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%9D%E3%82%A4%E3%83%B3%E3%82%BF%E5%9E%8Bpointer-type\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eポインタ型(pointer type)\u003c/h3\u003e\n\n\u003cp\u003eC#にはWin32APIやC言語のDLLとのやり取りを主な目的に、ポインタが存在します。ただし、セキュリティやGCの都合から、非常に厳しい制限がかけられています。\u003ccode\u003eunsafe\u003c/code\u003eで修飾したり、コンパイラオプションを別途指定せなばならず、参照型のポインタを取得することはさらに規制がかかります。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"値渡しby-value\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%80%A4%E6%B8%A1%E3%81%97by-value\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e値渡し(by Value)\u003c/h3\u003e\n\n\u003cp\u003eC#では何もつけていない関数の引数は\u003cstrong\u003e値渡し\u003c/strong\u003eになります。VB.NETでは\u003ccode\u003eByVal\u003c/code\u003eをつけることもできます。\u003c/p\u003e\n\n\u003cp\u003e呼び出し先の関数で使うためににスタックに\u003cstrong\u003e値自体\u003c/strong\u003eをコピーします。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"参照渡しby-reference\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%8F%82%E7%85%A7%E6%B8%A1%E3%81%97by-reference\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e参照渡し(by Reference)\u003c/h3\u003e\n\n\u003cp\u003eC#では\u003ccode\u003eref\u003c/code\u003e \u003ccode\u003eout\u003c/code\u003e \u003ccode\u003ein\u003c/code\u003e(C#7.2以降)を引数の前につけると\u003cstrong\u003e参照渡し\u003c/strong\u003eになります。VB.NETでは\u003ccode\u003eByRef\u003c/code\u003eをつけます。\u003c/p\u003e\n\n\u003cp\u003e呼び出し先の関数で使うためにスタックに\u003cstrong\u003e値への参照\u003c/strong\u003e(値の場所のアドレス)を書き込みます。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"そのほか用語統一用の話\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%9D%E3%81%AE%E3%81%BB%E3%81%8B%E7%94%A8%E8%AA%9E%E7%B5%B1%E4%B8%80%E7%94%A8%E3%81%AE%E8%A9%B1\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eそのほか用語統一用の話\u003c/h3\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"プリミティブ型\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%97%E3%83%AA%E3%83%9F%E3%83%86%E3%82%A3%E3%83%96%E5%9E%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eプリミティブ型\u003c/h4\u003e\n\n\u003cp\u003eプリミティブ型はJavaなどでは重要な用語です。そして、「C#のプリミティブ型」と「CLR(共通言語ラインタイム)のプリミティブ型」も存在します。・・・が、Javaと違ってC#とCLRのプリミティブ型はあんまり深い意味のない用語です。最初期に定めたものの、値型と参照型の違いで事足りたのでしょう。\u003c/p\u003e\n\n\u003cp\u003e他の言語でも「プリミティブ型」の意味合いは仕様書やドキュメントで定義されている場合があるので、よく確認して使用してください。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://ufcpp.net/blog/2016/12/tipsprimitives/\" rel=\"nofollow noopener\" target=\"_blank\"\u003e小ネタ プリミティブ型 | ++C++; // 未確認飛行 C ブログ\u003c/a\u003e\u003c/p\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"オブジェクト\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eオブジェクト\u003c/h4\u003e\n\n\u003cp\u003eこの単語は色々な意味合いで乱用される用語なので、この記事では使用を避けます。\u003c/p\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"ポインタ渡し\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%9D%E3%82%A4%E3%83%B3%E3%82%BF%E6%B8%A1%E3%81%97\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eポインタ渡し\u003c/h4\u003e\n\n\u003cp\u003eC#ではポインタを扱う事自体がレアケースなので、「ポインタ渡し」と呼ぶ場面はあまりなさそう。「ポインタの値渡し」と同義なので、この記事ではそう表記します。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"コードと概念図\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%B3%E3%83%BC%E3%83%89%E3%81%A8%E6%A6%82%E5%BF%B5%E5%9B%B3\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eコードと概念図\u003c/h2\u003e\n\n\u003cp\u003e概念図はスタックとヒープをイメージしたものです。スタックの下半分が呼び出し元、上半分が呼び出し先の引数やローカル変数をイメージしてます。\u003c/p\u003e\n\n\u003cp\u003e概念図なのでアドレスや細かいところは適当です。実際のC#のスタック構造とは異なるので注意してください。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"値型\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%80%A4%E5%9E%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e値型\u003c/h3\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003evalueSample\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e10\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"nf\"\u003evalue1\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eConsole\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWriteLine\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"p\"\u003e);\u003c/span\u003e \u003cspan class=\"c1\"\u003e//=\u0026gt; 10\u003c/span\u003e\n    \u003cspan class=\"nf\"\u003evalue2\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"k\"\u003eref\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eConsole\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWriteLine\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"p\"\u003e);\u003c/span\u003e \u003cspan class=\"c1\"\u003e//=\u0026gt; 20\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e//値型の値渡し\u003c/span\u003e\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003evalue1\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"n\"\u003ey\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e20\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e//値型の参照渡し\u003c/span\u003e\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003evalue2\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"k\"\u003eref\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003ey\u003c/span\u003e \u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"n\"\u003ey\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e20\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/47125d8f67d5236fa9e203aa57c271ed7c64c2ed/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3134363636392f32346363353331312d643534622d663166372d343961362d3530303039396236366138642e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F146669%2F24cc5311-d54b-f1f7-49a6-500099b66a8d.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=e0dc9a72b0a63f828d5dc9e24e2f84f5\" alt=\"byref.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/146669/24cc5311-d54b-f1f7-49a6-500099b66a8d.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F146669%2F24cc5311-d54b-f1f7-49a6-500099b66a8d.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=af24753356a5f1ae331967872a361806 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003cbr\u003e\nvalue1ではxそのもの(10)がyにコピーされています。\u003cbr\u003e\nvalue2ではxのアドレスがyに書き込まれています。こちらではxの値を書き換えることができるのがわかります。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"参照型\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%8F%82%E7%85%A7%E5%9E%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e参照型\u003c/h1\u003e\n\n\u003cp\u003e配列は参照型です。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003erefSample\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e[]\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e[]\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"m\"\u003e10\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"m\"\u003e20\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"m\"\u003e30\u003c/span\u003e\u003cspan class=\"p\"\u003e};\u003c/span\u003e\n    \u003cspan class=\"nf\"\u003eref1\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eConsole\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWriteLine\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"[{0},{1},{2}]\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e],\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e],\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"m\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e]);\u003c/span\u003e \u003cspan class=\"c1\"\u003e//=\u0026gt;[10,20,30]\u003c/span\u003e\n    \u003cspan class=\"nf\"\u003eref2\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"k\"\u003eref\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eConsole\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWriteLine\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"[{0},{1},{2}]\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e],\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e],\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"m\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e]);\u003c/span\u003e \u003cspan class=\"c1\"\u003e//=\u0026gt;[50,60,70]\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// 参照型の値渡し\u003c/span\u003e\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eref1\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e[]\u003c/span\u003e \u003cspan class=\"n\"\u003ey\u003c/span\u003e \u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"n\"\u003ey\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e[]\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"m\"\u003e50\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"m\"\u003e60\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"m\"\u003e70\u003c/span\u003e\u003cspan class=\"p\"\u003e};\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e// 参照型の参照渡し\u003c/span\u003e\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eref2\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"k\"\u003eref\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e[]\u003c/span\u003e \u003cspan class=\"n\"\u003ey\u003c/span\u003e \u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"n\"\u003ey\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e[]\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"m\"\u003e50\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"m\"\u003e60\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"m\"\u003e70\u003c/span\u003e\u003cspan class=\"p\"\u003e};\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/0786bd36d53e56dffce5fdb44b0086be3cf6436c/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3134363636392f65666234653536362d353062632d383764612d336632642d3061373135626635303764632e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F146669%2Fefb4e566-50bc-87da-3f2d-0a715bf507dc.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=ab94c5f29091f7a8788f972b14a973af\" alt=\"byref.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/146669/efb4e566-50bc-87da-3f2d-0a715bf507dc.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F146669%2Fefb4e566-50bc-87da-3f2d-0a715bf507dc.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=c27ce8088000f76b5ef0ccab396e5b18 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e呼出後は以下のように変わります。スタックの書き換えられた位置を緑にしました。\u003cbr\u003e\n(なんか矢印の先っぽが変な形になってますが、気になさらず) \u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/4a2433d56262f92c36cc8e6651992fe005c56d26/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3134363636392f36316630643438382d393539332d383734662d316439662d3035326532356130306262662e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F146669%2F61f0d488-9593-874f-1d9f-052e25a00bbf.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=87b62f09f44bf53f26d248c778607b31\" alt=\"byref(1).png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/146669/61f0d488-9593-874f-1d9f-052e25a00bbf.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F146669%2F61f0d488-9593-874f-1d9f-052e25a00bbf.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=de79e0535928b8a32c6721834d33b58e 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eヒープに新たな配列を確保するのはどちらも同じですが、ref1ではrefSample関数のxには影響が及びません。一方で、ref2ではxの値が書き換わっているのがわかります。\u003c/p\u003e\n\n\u003cp\u003e【余談】\u003cbr\u003e\nクラスの参照渡しはほとんど使うことはありません。この文法が残されているのは、ダブルポインタを扱うWin32APIを自然に叩けるようにするためだと思われます。Win32ではトリプルポインタが出てくることはまずないので、ほとんどの場所で面倒なポインタ構文を使う必要が無くなります。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"c1\"\u003e// C言語\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e// SHSTDAPI SHGetMalloc(\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e//  IMalloc **ppMalloc\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e// );\u003c/span\u003e\n\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nf\"\u003eDllImport\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"shell32.dll\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)]\u003c/span\u003e\n\u003cspan class=\"k\"\u003estatic\u003c/span\u003e \u003cspan class=\"k\"\u003eextern\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"nf\"\u003eSHGetMalloc\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003eout\u003c/span\u003e \u003cspan class=\"n\"\u003eIMalloc\u003c/span\u003e \u003cspan class=\"n\"\u003eppMalloc\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"ポインタ型\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%9D%E3%82%A4%E3%83%B3%E3%82%BF%E5%9E%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eポインタ型\u003c/h2\u003e\n\n\u003cp\u003e繰り返しますが、C#のポインタは通常は使いませんが、説明のためにあえてやってるだけです。参照型のポインタは基本的に取れないので値型のポインタについての説明です。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"c#\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eunsafe\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eptrSample\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e10\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"nf\"\u003eptr1\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026amp;\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eConsole\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWriteLine\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"p\"\u003e);\u003c/span\u003e \u003cspan class=\"c1\"\u003e//=\u0026gt; 20\u003c/span\u003e\n    \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e\u003cspan class=\"n\"\u003ep\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026amp;\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"nf\"\u003eptr2\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"k\"\u003eref\u003c/span\u003e \u003cspan class=\"n\"\u003ep\u003c/span\u003e \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eConsole\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWriteLine\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"p\"\u003e);\u003c/span\u003e \u003cspan class=\"c1\"\u003e//=\u0026gt; Invalid(20を出す可能性が高い）\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e//値型へのポインタの値渡し\u003c/span\u003e\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eunsafe\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eptr1\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e\u003cspan class=\"n\"\u003ey\u003c/span\u003e \u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e*\u003c/span\u003e\u003cspan class=\"n\"\u003ey\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e20\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e//値型へのポインタの参照渡し\u003c/span\u003e\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eunsafe\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eptr2\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"k\"\u003eref\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e\u003cspan class=\"n\"\u003ey\u003c/span\u003e \u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n   \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003ez\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e20\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"n\"\u003ey\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026amp;\u003c/span\u003e\u003cspan class=\"n\"\u003ez\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"c1\"\u003e//注意！不適切な代入\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/d3a20c8e5886f8ad3165921acb0f343a0130f879/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3134363636392f33333833613465302d346365632d373564622d356332302d3939666266353033376263632e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F146669%2F3383a4e0-4cec-75db-5c20-99fbf5037bcc.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=a912b7569e09985146fca621e16f8531\" alt=\"byref(2).png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/146669/3383a4e0-4cec-75db-5c20-99fbf5037bcc.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F146669%2F3383a4e0-4cec-75db-5c20-99fbf5037bcc.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=1788b43d2fd4e5867e304469c5ae9e83 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e値型のポインタの値渡しは値型の参照渡しとメモリ構造的には完全に同一です。一方で、値型のポインタの値渡しは今回の例では見事に無効なスタック領域を指すようになってしまいました。もちろん、有効な領域を指すポインタにすることも可能ですが、ポインタを使う文脈では素直にダブルポインタを使えば良いので、ポインタを参照渡しするメリットはないと思います。というか、しないで。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"補足参照とポインタは何が違う\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%A3%9C%E8%B6%B3%E5%8F%82%E7%85%A7%E3%81%A8%E3%83%9D%E3%82%A4%E3%83%B3%E3%82%BF%E3%81%AF%E4%BD%95%E3%81%8C%E9%81%95%E3%81%86\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e[補足]参照とポインタは何が違う？\u003c/h3\u003e\n\n\u003cp\u003e図を見ると、参照とポインタは何が違うのか、と思うかもしれませんが、\u003cstrong\u003e機械語レベルではだいたい同じ\u003c/strong\u003eです。一方で、C#の参照は以下のような違いがあります。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e(言うまでもないですが)文法や使える機能が異なる\u003c/li\u003e\n\u003cli\u003e参照はGCが適切にメモリを管理してくれる\u003c/li\u003e\n\u003cli\u003e参照は安全である\n\n\u003cul\u003e\n\u003cli\u003eunsafe以外では上のポインタのように無効な領域を指すと言った危険なことは基本起こらない\u003c/li\u003e\n\u003cli\u003eポインタは危険なので\u003ccode\u003eunsafe\u003c/code\u003eの指定やコンパイル時に\u003ccode\u003e/unsafe\u003c/code\u003eを付ける必要があり、実行が制限される可能性がある\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"cにおける参照渡し2019\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#c%E3%81%AB%E3%81%8A%E3%81%91%E3%82%8B%E5%8F%82%E7%85%A7%E6%B8%A1%E3%81%972019\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eC#における参照渡し2019\u003c/h1\u003e\n\n\u003cp\u003e人によっては、「参照渡しは時代遅れ」思っている方もいるようです。しかし、C#業界では参照渡しはかつてないほどのブームとなっています。\u003c/p\u003e\n\n\u003cp\u003eC#のコンパイラがC++製からC#製の\u003cstrong\u003eRoslyn\u003c/strong\u003eに変わったのですが、それによってパフォーマンス要求が大きくなりました。そこでスタックをうまく使い、遅くなる原因のヒープアロケートを極力避ける方向で文法の拡張が続いており、「安全なポインタ」のように参照渡しがうまく使われている場面があります。その他、スタック領域の配列確保を安全にできるようにしたり、ref戻り値や読み取り専用の参照渡しも登場しています。\u003c/p\u003e\n\n\u003cp\u003eJavaやJavaScriptと比べると、プログラマが能動的に最適化を行えるのがC#の面白いところです。一方で、JavaやJavaScriptのJITもかなり早いし、NumPyも丁寧に書かれているので、どの言語が有利！と簡単には言えないのがまた難しいところです。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://ufcpp.net/study/csharp/resource/span/\" rel=\"nofollow noopener\" target=\"_blank\"\u003eSpan構造体 - C# によるプログラミング入門 | ++C++; // 未確認飛行 C\u003c/a\u003e\u003cbr\u003e\n\u003ca href=\"https://docs.microsoft.com/ja-jp/dotnet/csharp/programming-guide/classes-and-structs/ref-returns\" rel=\"nofollow noopener\" target=\"_blank\"\u003eref 戻り値と ref ローカル変数 (C# ガイド) | Microsoft Docs\u003c/a\u003e\u003cbr\u003e\n\u003ca href=\"https://docs.microsoft.com/ja-jp/dotnet/csharp/language-reference/keywords/in-parameter-modifier\" rel=\"nofollow noopener\" target=\"_blank\"\u003ein パラメーター修飾子 - C# リファレンス | Microsoft Docs\u003c/a\u003e\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"まとめ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%BE%E3%81%A8%E3%82%81\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eまとめ\u003c/h1\u003e\n\n\u003cp\u003e使い所の難しい参照渡しですが、メモリイメージを完全に理解すればそこまで難しいことはしていません。今後も重要な考え方なので、完全に理解してC#をばりばり書いて行きましょう！\u003c/p\u003e\n\n\u003cp\u003e一方で、これはあくまで「C#の参照渡し」のざっくりとした説明です。用語はそれぞれの言語や処理系で異なるので、しっかりと仕様書やドキュメントを確認することが大切です。\u003c/p\u003e\n\n\u003cp\u003e(なお、間違いや現在の処理系で異なってる部分があれば教えてください)\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"おまけ1参照の値渡しを参照渡しと呼ばない方が良い理由\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%8A%E3%81%BE%E3%81%911%E5%8F%82%E7%85%A7%E3%81%AE%E5%80%A4%E6%B8%A1%E3%81%97%E3%82%92%E5%8F%82%E7%85%A7%E6%B8%A1%E3%81%97%E3%81%A8%E5%91%BC%E3%81%B0%E3%81%AA%E3%81%84%E6%96%B9%E3%81%8C%E8%89%AF%E3%81%84%E7%90%86%E7%94%B1\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e【おまけ1】「参照の値渡し」を「参照渡し」と呼ばない方が良い理由\u003c/h1\u003e\n\n\u003cp\u003eところで、参照の値渡しを「参照渡し」と呼んでいる方をよく見かけます。そして、それを間違いとする意見もよく見かけます。\u003c/p\u003e\n\n\u003cp\u003eまず、「参照渡し(by reference)」が仕様書やドキュメントに用語として使われている言語(C++、.NET系言語、PHPなど)ではふさわしくないでしょう。ちゃんと言語仕様にある用語を使うべきです。\u003c/p\u003e\n\n\u003cp\u003e一方で、値渡ししかない言語(JavaScript、Pythonなど)はちゃんと挙動と他の言語での用法を理解していればもう止めてもしょうがない感はあります(私は言いませんがね。)しかし、以下のようなデメリットが生じる可能性があることは留意してください。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"言語を跨ぐ際の混乱\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%A8%80%E8%AA%9E%E3%82%92%E8%B7%A8%E3%81%90%E9%9A%9B%E3%81%AE%E6%B7%B7%E4%B9%B1\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e言語を跨ぐ際の混乱\u003c/h2\u003e\n\n\u003cp\u003eC++の影響力はなおも強く、JavaScriptを調べていて気がついたらV8のソースを読んでいたということは稀によくあるかと思います。また、Pythonの拡張ライブラリを書いたりgPRCの発展などで言語の壁が薄くなる展開があれば、言語仕様にない用語は誤った捉えられ方をするかもしれません。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"microsoftやライブラリ用語の影響\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#microsoft%E3%82%84%E3%83%A9%E3%82%A4%E3%83%96%E3%83%A9%E3%83%AA%E7%94%A8%E8%AA%9E%E3%81%AE%E5%BD%B1%E9%9F%BF\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eMicrosoftやライブラリ用語の影響\u003c/h2\u003e\n\n\u003cp\u003e参照渡しは.NETやCOMの用語でもあります。.NETによるPythonの実装であるIronPython関連や、JavaScript(JScriptも含む)とWSH絡みでは「JScriptでは参照渡しができないため～」といった説明が現に存在します。近年JavaScript大好きなMicrosoftの展開次第では混乱が生じる場面もあるでしょう。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"今後参照渡しが追加される可能性\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E4%BB%8A%E5%BE%8C%E5%8F%82%E7%85%A7%E6%B8%A1%E3%81%97%E3%81%8C%E8%BF%BD%E5%8A%A0%E3%81%95%E3%82%8C%E3%82%8B%E5%8F%AF%E8%83%BD%E6%80%A7\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e今後「参照渡し」が追加される可能性\u003c/h2\u003e\n\n\u003cp\u003e今は参照渡しがない言語に将来「参照渡し」が実装される可能性はないのでしょうか? 例えば、JavaScriptにおいて5年後、10年後にChromeOS絡みやら、WebAssembly絡みの展開を私は全く予測できません。もしどこかに「by reference」という用語が出現したら、混乱や検索の邪魔になることはありえます。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"おまけ2jit結果の逆アセンブルを見てみよう\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%8A%E3%81%BE%E3%81%912jit%E7%B5%90%E6%9E%9C%E3%81%AE%E9%80%86%E3%82%A2%E3%82%BB%E3%83%B3%E3%83%96%E3%83%AB%E3%82%92%E8%A6%8B%E3%81%A6%E3%81%BF%E3%82%88%E3%81%86\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e【おまけ2】JIT結果の逆アセンブルを見てみよう！\u003c/h1\u003e\n\n\u003cp\u003e結局参照よくわからん！という人もいるでしょう。どういう時もとりあえず逆アセンブルを見ておけば安心です(実際はGCの関連などもあるので油断なりませんが)。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://sharplab.io/\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://sharplab.io/\u003c/a\u003e でブラウザから簡単に逆コンパイルを行えます。いい時代になりましたね。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"text\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e; value1( int y )\nC.value1(Int32)\n    L0000: ret\n\n; value2( ref int y )\nC.value2(Int32 ByRef)\n    L0000: mov dword [rdx], 0x14\n    L0006: ret\n\n; ref1( int[] y )\n; new int[] { 50 }に減らしてあります。\nC.ref1(Int32[])\n    L0000: sub rsp, 0x28\n    L0004: mov rcx, 0x7ffdb726725a\n    L000e: mov edx, 0x1\n    L0013: call 0x7ffdb9a22630\n    L0018: mov dword [rax+0x10], 0x32\n    L001f: add rsp, 0x28\n    L0023: ret\n\n; ref2( ref int[] y )\n; new int[] { 50 }に減らしてあります。\nC.ref2(Int32[] ByRef)\n    L0000: push rsi\n    L0001: sub rsp, 0x20\n    L0005: mov rsi, rdx\n    L0008: mov rcx, 0x7ffdb726725a\n    L0012: mov edx, 0x1\n    L0017: call 0x7ffdb9a22630\n    L001c: mov dword [rax+0x10], 0x32\n    L0023: mov rcx, rsi\n    L0026: mov rdx, rax\n    L0029: call 0x7ffdb9a23fc0\n    L002e: nop\n    L002f: add rsp, 0x20\n    L0033: pop rsi\n    L0034: ret\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eLinuxとWindowsでは呼び出し規約が異なること、断片的なコードをJITした結果であることに注意してください。Windowsではrcx→rdx→r8→r9の順にレジスタが使われますが、rcxは基本はthisポインタです。\u003c/p\u003e\n\n\u003cp\u003e最適化でガッツリコードが消されてますが、value2のコードの扱いとかは見やすいですね！\u003c/p\u003e\n","createdAt":"2019-04-24T08:34:54Z","elapsedYearsFromLastModifiedAt":0,"encryptedId":"jG9Sqj92/lqKsf7PPdOi+XiT/w/oYUfn--AOV1vTRvKkWgrb/K--aa8MwnKFR0oDHrBJ62DSGg==","isBanned":false,"isDeprecated":false,"isDestroyableByViewer":false,"isEditRequestReadableByViewer":true,"isEditRequestSendableByViewer":true,"isLikableByViewer":true,"isLikedByViewer":false,"isPublic":true,"isSlide":false,"isStockableByViewer":true,"isStockedByViewer":false,"isSubscribableByViewer":false,"isSubscribedByViewer":false,"isUpdatableByViewer":false,"isUpdated":true,"lastModifiedAt":"2020-10-24T02:38:54Z","likesCount":109,"linkUrl":"https://qiita.com/KageShiron/items/b74d9246aad3ca0854c2","organization":null,"originalId":874576,"stockedCount":97,"title":"C#でわかる値渡し、参照渡し","toc":"\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%8F%82%E7%85%A7%E6%B8%A1%E3%81%97%E5%80%A4%E6%B8%A1%E3%81%97%E3%81%AE%E5%AE%9A%E7%BE%A9%E3%81%A8%E3%81%AF\"\u003e参照渡し、値渡しの定義とは\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#c%E3%81%AB%E3%81%8A%E3%81%91%E3%82%8B%E5%8F%82%E7%85%A7%E6%B8%A1%E3%81%97\"\u003eC#における参照渡し\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#c%E3%81%AE%E7%94%A8%E8%AA%9E%E3%82%84%E8%A8%80%E8%AA%9E%E4%BB%95%E6%A7%98\"\u003eC#の用語や言語仕様\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%80%A4%E5%9E%8B-valut-type\"\u003e値型 (valut type)\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%8F%82%E7%85%A7%E5%9E%8Breference-type\"\u003e参照型(reference type)\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%9D%E3%82%A4%E3%83%B3%E3%82%BF%E5%9E%8Bpointer-type\"\u003eポインタ型(pointer type)\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%80%A4%E6%B8%A1%E3%81%97by-value\"\u003e値渡し(by Value)\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%8F%82%E7%85%A7%E6%B8%A1%E3%81%97by-reference\"\u003e参照渡し(by Reference)\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%81%9D%E3%81%AE%E3%81%BB%E3%81%8B%E7%94%A8%E8%AA%9E%E7%B5%B1%E4%B8%80%E7%94%A8%E3%81%AE%E8%A9%B1\"\u003eそのほか用語統一用の話\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%97%E3%83%AA%E3%83%9F%E3%83%86%E3%82%A3%E3%83%96%E5%9E%8B\"\u003eプリミティブ型\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88\"\u003eオブジェクト\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%9D%E3%82%A4%E3%83%B3%E3%82%BF%E6%B8%A1%E3%81%97\"\u003eポインタ渡し\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%B3%E3%83%BC%E3%83%89%E3%81%A8%E6%A6%82%E5%BF%B5%E5%9B%B3\"\u003eコードと概念図\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%80%A4%E5%9E%8B\"\u003e値型\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%8F%82%E7%85%A7%E5%9E%8B\"\u003e参照型\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%9D%E3%82%A4%E3%83%B3%E3%82%BF%E5%9E%8B\"\u003eポインタ型\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E8%A3%9C%E8%B6%B3%E5%8F%82%E7%85%A7%E3%81%A8%E3%83%9D%E3%82%A4%E3%83%B3%E3%82%BF%E3%81%AF%E4%BD%95%E3%81%8C%E9%81%95%E3%81%86\"\u003e[補足]参照とポインタは何が違う？\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#c%E3%81%AB%E3%81%8A%E3%81%91%E3%82%8B%E5%8F%82%E7%85%A7%E6%B8%A1%E3%81%972019\"\u003eC#における参照渡し2019\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%81%BE%E3%81%A8%E3%82%81\"\u003eまとめ\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%81%8A%E3%81%BE%E3%81%911%E5%8F%82%E7%85%A7%E3%81%AE%E5%80%A4%E6%B8%A1%E3%81%97%E3%82%92%E5%8F%82%E7%85%A7%E6%B8%A1%E3%81%97%E3%81%A8%E5%91%BC%E3%81%B0%E3%81%AA%E3%81%84%E6%96%B9%E3%81%8C%E8%89%AF%E3%81%84%E7%90%86%E7%94%B1\"\u003e【おまけ1】「参照の値渡し」を「参照渡し」と呼ばない方が良い理由\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E8%A8%80%E8%AA%9E%E3%82%92%E8%B7%A8%E3%81%90%E9%9A%9B%E3%81%AE%E6%B7%B7%E4%B9%B1\"\u003e言語を跨ぐ際の混乱\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#microsoft%E3%82%84%E3%83%A9%E3%82%A4%E3%83%96%E3%83%A9%E3%83%AA%E7%94%A8%E8%AA%9E%E3%81%AE%E5%BD%B1%E9%9F%BF\"\u003eMicrosoftやライブラリ用語の影響\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E4%BB%8A%E5%BE%8C%E5%8F%82%E7%85%A7%E6%B8%A1%E3%81%97%E3%81%8C%E8%BF%BD%E5%8A%A0%E3%81%95%E3%82%8C%E3%82%8B%E5%8F%AF%E8%83%BD%E6%80%A7\"\u003e今後「参照渡し」が追加される可能性\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%81%8A%E3%81%BE%E3%81%912jit%E7%B5%90%E6%9E%9C%E3%81%AE%E9%80%86%E3%82%A2%E3%82%BB%E3%83%B3%E3%83%96%E3%83%AB%E3%82%92%E8%A6%8B%E3%81%A6%E3%81%BF%E3%82%88%E3%81%86\"\u003e【おまけ2】JIT結果の逆アセンブルを見てみよう！\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n","totalPv":91057,"uuid":"b74d9246aad3ca0854c2","banReason":null,"adventCalendarItem":null,"author":{"encryptedId":"zsiCHwwv0mmbDu77yFKxp0t77aI8--SuxGUaS+VrlMGkvt--dZd1LBvw8JQwGzdcqbdNFA==","originalId":146669,"description":"","facebookUrl":null,"githubUrl":"https://github.com/KageShiron","isBlockingViewer":false,"isFollowableByViewer":true,"isFollowedByViewer":false,"isTweetWebNotificationReceivable":true,"linkedinUrl":null,"name":"","profileImageUrl":"https://qiita-image-store.s3.amazonaws.com/0/146669/profile-images/1546837817","profileImageUrlW48":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F146669%2Fprofile-images%2F1546837817?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=48\u0026s=bb017475a5a4959db17a74579796974c","profileImageUrlW75":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F146669%2Fprofile-images%2F1546837817?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=fc1df55a2a3d0633d6f44f3e7da4b9d9","urlName":"KageShiron","websiteUrl":"","twitterUrl":"https://twitter.com/KageShiron","twitterUrlName":"KageShiron","revealedOrganizations":{"edges":[]}},"tags":[{"name":"C#","urlName":"csharp"},{"name":".NET","urlName":".net"},{"name":"参照渡し","urlName":"%e5%8f%82%e7%85%a7%e6%b8%a1%e3%81%97"},{"name":"値渡し","urlName":"%e5%80%a4%e6%b8%a1%e3%81%97"}],"followingLikers":{"edges":[]},"comments":{"totalCount":13}},"comments":[],"client":null,"ads_event_emitter":null}}</script>
