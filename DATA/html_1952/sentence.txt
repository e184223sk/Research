More than 1 year has passed since last update.MacとWinどちらも使用するplanckユーザーにとって全角半角切替は最初ぐらいの関門だと思います。
その一つの解決方法として以下に記載しておきます。MacとWin共に同じ操作方法が可能な全角半角切替キーを作成します。
ついでに切替キーだけだと勿体ないので長押しでRaise/Lowerレイヤーへの切替機能も付与します。
レイヤー切替の速度も任意で変更できるようにします。やることは単純で、MacとWinで切替ショートカットを同じにしてそれを実行する処理を書くだけです。
難点は端末側でこの処理を行う必要ことです。Mac元々の機能を使用して変更します。超簡単
1. 左上のリンゴマークからシステム環境変数を開く
2. "キーボード"を押下
3. "ショートカット"タブから"入力ソース"を選択
4. "前の入力ソースを選択"でCtrl + Spaceに設定
5. おわりこちらは普段使いのIMEの設定を変更する必要があるので各自調べてください。
…と言いたい所ですが説明にならないのでGoogle日本語入力を例に変更します。参考エントリ
Google 日本語入力でctrl spaceで半角全角の変更を出来るように変更したときのメモ行う事は下記の4点です
- 自作変換キーコードをRaiseとLowerの2種類定義
- 計測時間格納用の変数定義
- メインレイヤーキーマップへの自作キーコードの記述
- process_record_user()へのcaseの追加下記2行が追加したキーコードの定義(名前は適当)planck_keycodes{}の下辺りに記述します。追加した定義をキーボードのデフォルトのRaise、Lowerの位置に指定process_record_user()は既存のメソッドでこちらに追記する形になります。
caseに指定されたキーがrecord-&gt;event.pressedでキーが押されたか検知します。
押されると計測値がkey_timerに入り指定のレイヤーに切り替わります。else以下はキーを離すを処理でレイヤーもとに戻します.
ここでもし離すまでの時間が120ms以下ならCtrl + Spaceを送信します。
tap_code16()はプレスイベントとリリースイベントを両方送信します。
これで実装は終わりです。端末側に変更を加える必要がありますが、MacとWinで同じ操作で切替できるのは便利です。
良かったらためしてみてください。


