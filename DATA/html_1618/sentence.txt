More than 1 year has passed since last update.備忘録として、C# コンソールアプリで、WebAPI を呼び出し、レスポンスで得られた JSON の特定の値を取り出して出力する方法を記載します。今回は例として、天気予報を教えてくれる API OpenWeatherAPI を使用します。これは以下サイトで Sign Up すると無料で使用でき東京の天気予報も出力できるのでいろいろ試したいときに便利です。
参考情報 : OpenWeather

この API でフリーで使用できるものの中に今の天気を出力できる API があります。以下の様なリクエストで天気情報を得ることが来ます。この API で得られる JSON は以下のような形になります。ではこの出力結果を C# で処理してみます。特定の値を抜き出して文字列を作成し、Console に出力するサンプルコードは以下になります。出力結果は以下になります。

非常に単純なプログラムですが、JSON を扱いなれていないと以外と引っ掛かります。個人的な考えですが、WebAPI で 取得した JSON の特定の値を取り出す際は、まずは JSON 整形サイトで値のキーを確認するのが便利です。
例えば JSON 整形サイトは以下の様なものがあります。
参考情報 : JSON Pretty Linter Ver3
このサイトでは API で得られた JSON を読み込ませると、得られた値のキーを教えてくれます。例えば今回の API で得られた JSON を以下の様に貼り付けてみます。

すると、画面したの Viewer にキー付きの整形された JSON が出てきます。これは非常に便利です。

こういった JSON 整形 Website を使用すると、より分かりやすく JSON を扱うことができるのではないでしょうか。
以上、簡単な備忘録でした。


