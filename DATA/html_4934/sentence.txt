More than 3 years have passed since last update.VisualStudio2017のC#(C# Ver7.0)から本格的に組み込まれた、「タプル(Tuple)」。
大変便利で、拙作ソフトウェアでは結構多用しているが、まだあまりピンと来ない人がまだ多そうなので、東方っぽい例を出しながら紹介していきたいと思う。ちなみに、.NETFramework4.0以上ならタプルは使用可能。
7や8.1向けのアプリケーションにtupleを組み込みたい場合は、NuGetからSystem.ValueTupleをダウンロードすると良い。
「タプル」の原義については、Wikipedia先生が詳しいのでそちらに譲る事にする。簡単に言えば、複数の値をペアにして扱える構文である。という感じである。
簡易二次元配列とか簡易クラスと捉えるとしっくりくるかも。例えば、こういうアヤシイクラスがあったとしよう。そして、これまたアヤシイCharacterクラスのオブジェクトの配列がある。さて、ここからプライベートプロパティを取り出す実装をするという事を考えてみる。従来のやり方では、きっとこうだろう。タプルを使うと、こういうことができる。つまり、例の配列から雛ちゃんのスリーサイズを得るには、こうする。Getが出来るってことは、当然Setも出来る。
さっきのアヤシイクラスを拡張して、とすれば、髪の色、目の色、おぱんつの色をTupleでセットできるようになる。C#7.0以降では、タプルの値を簡単に分解できるようになった。値ってば最強ね
例えば、さっきの雛ちゃんのスリーサイズをint３つにバラすには、こうする。Listにもできる。工夫次第ではJavaのLinkedHashMapみたいなアレもできる。タプルの配列はLinqで抽出とかも簡単にできる。あれっ、もうDictionaryオワコンじゃね……？


