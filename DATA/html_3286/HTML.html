<!DOCTYPE html><html><head><meta charset="utf-8" /><title>【改訂版】PrismとReactivePropertyで簡単MVVM！ - Qiita</title><meta content="width=device-width,initial-scale=1,shrink-to-fit=no,viewport-fit=cover" name="viewport" /><meta content="#55c500" name="theme-color" /><meta content="XWpkTG32-_C4joZoJ_UsmDUi-zaH-hcrjF6ZC_FoFbk" name="google-site-verification" /><meta content="telephone=no" name="format-detection" /><link rel="canonical" href="https://qiita.com/hiki_neet_p/items/e04b5ac692aa18df0968" /><link href="/manifest.json" rel="manifest" /><link href="/opensearch.xml" rel="search" title="Qiita" type="application/opensearchdescription+xml" /><link as="script" href="https://www.googletagservices.com/tag/js/gpt.js" rel="preload" /><link href="https://securepubads.g.doubleclick.net" rel="preconnect" /><script async="" src="https://www.googletagservices.com/tag/js/gpt.js"></script><meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="dnnFmiw7cJX0xlGFR6/xO45yvexHD3XPS+hhv8BhUOX1lbi791x7syKNOu5H4KS/Ao2cByVD6JDYLoo9TobqBw==" /><link rel="shortcut icon" type="image/x-icon" href="https://cdn.qiita.com/assets/favicons/public/production-c620d3e403342b1022967ba5e3db1aaa.ico" /><link rel="apple-touch-icon" type="image/png" href="https://cdn.qiita.com/assets/favicons/public/apple-touch-icon-ec5ba42a24ae923f16825592efdc356f.png" /><link rel="stylesheet" media="all" href="https://cdn.qiita.com/assets/public/article-2eaa7dbedc42a8ea65c722cda46d0ebb.min.css" /><script src="https://cdn.qiita.com/assets/public/v3-article-bundle-63de2d91fef827269d3f6b958db2335b.min.js" defer="defer"></script><meta name="twitter:card" content="summary_large_image"><meta content="@Qiita" name="twitter:site" /><meta content="@hiki_neet_p" name="twitter:creator" /><meta property="og:type" content="article"><meta property="og:title" content="【改訂版】PrismとReactivePropertyで簡単MVVM！ - Qiita"><meta property="og:image" content="https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0&amp;w=1200&amp;mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND00NENRNXBTNTZLaUM1NG1JNDRDUlVISnBjMjNqZ2FoU1pXRmpkR2wyWlZCeWIzQmxjblI1NDRHbjU3Q2g1WTJZVFZaV1RlLThnUSZ0eHQtY29sb3I9JTIzMzMzJnR4dC1mb250PUhpcmFnaW5vJTIwU2FucyUyMFc2JnR4dC1zaXplPTU0JnR4dC1jbGlwPWVsbGlwc2lzJnR4dC1hbGlnbj1jZW50ZXIlMkNtaWRkbGUmcz0wMzgwZjQyZjI5M2EyYWY4NmY3Zjg4ZWI5YmNmMGJhMw&amp;mark-align=center%2Cmiddle&amp;blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RR2hwYTJsZmJtVmxkRjl3JnR4dC1jb2xvcj0lMjMzMzMmdHh0LWZvbnQ9SGlyYWdpbm8lMjBTYW5zJTIwVzYmdHh0LXNpemU9NDUmdHh0LWFsaWduPXJpZ2h0JTJDYm90dG9tJnM9N2U1MGI4OWM0YjlhNjBjMGFiYzRhYTJmMDg0YWIxZDY&amp;blend-align=center%2Cmiddle&amp;blend-mode=normal&amp;s=0b5a864ffa4cd5a39e35237bd55ddda6"><meta property="og:description" content="

はじめに

本記事は、3年前に書いた以下の記事を大幅に見直して書き改めたものです。

PrismとReactivePropertyで簡単MVVM！

上記の記事は、私の古い認識のもとに書き上げられました。
私の当時の認識で、Pri..."><meta content="https://qiita.com/hiki_neet_p/items/e04b5ac692aa18df0968" property="og:url" /><meta content="Qiita" property="og:site_name" /><meta content="564524038" property="fb:admins" /><meta content="C#,WPF,PRISM,ReactiveProperty,.NETCore" name="keywords" /><script>!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window, document,'script',
'https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '668972150489891');
fbq('track', 'PageView');</script><style data-emotion-css="17jxvjw 11t2ec1 1dvr2p8 18lkoru 1g4cku8 1iupg5d ijvq0v 15cocm3 12rp90f 115f4t 1b8uj5v 79elbk 16hhh7b fcbn8c 1gj7nt 154zy0m yikrym 1jqivyb 1ode1bp le4d8r 1hbd3g7 1nzh4zz 38fzdi helsa7 8qb8m4 2imjyh he5w1s 70qvj9 3ojehk 100alwu 1dtnjt5 10ougpm 1ay9vb9 m19uds cgzq40 1wa99t2 1l3zk9f 4czcte 1yzj1fm 1uv1qiv 109dbrr 5jpx49 mnxgyc 1vlpknv fsjkhv 1b17vb0 7i7f4d"}>.css-17jxvjw{display:grid;display:-ms-grid;grid-template-columns:80px minmax(0,1fr) 300px;-ms-grid-columns:80px minmax(0,1fr) 300px;grid-template-rows:minmax(270px,auto) 1fr;-ms-grid-rows:minmax(270px,auto) 1fr;max-width:1280px;margin-right:auto;margin-left:auto;padding-top:24px;padding-right:24px;padding-left:24px;}@media (max-width:1200px){.css-17jxvjw{padding-bottom:0;padding-left:0;padding-right:0;}}@media (max-width:992px){.css-17jxvjw{grid-template-columns:80px 452px 300px;-ms-grid-columns:80px 452px 300px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}}@media (max-width:770px){.css-17jxvjw{display:block;}}@media (max-width:480px){.css-17jxvjw{padding-top:0;}}.css-11t2ec1{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;z-index:5;position:-webkit-sticky;position:sticky;top:calc(56px + 24px + 16px + 32px - 16px);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:16px;width:80px;}.css-11t2ec1:after{content:'';display:table;}.css-11t2ec1:before{content:'';display:table;}@media (max-width:770px){.css-11t2ec1{display:none;}}.css-1dvr2p8{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-18lkoru{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;background-color:#FFFFFF;}.css-1g4cku8{display:inline-block;vertical-align:middle;height:20px;width:20px;fill:#55C500;}.css-1iupg5d{color:#55C500;cursor:pointer;font-size:14px;font-weight:bold;}.css-ijvq0v{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-15cocm3{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#FFFFFF;border:2px solid #6E6F70;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:2px 0px 0px;width:40px;}.css-12rp90f{display:inline-block;vertical-align:bottom;height:17.77777777777778px;width:16px;fill:#6E6F70;}.css-115f4t{color:#6E6F70;font-size:14px;font-weight:bold;}.css-1b8uj5v{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;margin-bottom:16px;padding:0;}.css-79elbk{position:relative;}.css-16hhh7b{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;padding:0;}.css-fcbn8c{display:none;bottom:initial;left:initial;right:initial;top:initial;left:100%;top:calc(-8px - (14px * 1.8) - 16px - 4px);}.css-1gj7nt{color:rgba(0,0,0,0.6);font-size:14px;font-weight:bold;line-height:1.8;padding:8px 16px;}.css-154zy0m{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.87);cursor:pointer;font-size:16px;font-weight:normal;line-height:1.8;padding:4px 16px;}.css-154zy0m:hover{-webkit-text-decoration:none;text-decoration:none;background-color:#F2F2F2;}.css-yikrym{width:20px;}.css-1jqivyb{color:rgba(0,0,0,0.6);font-size:13px;}.css-1ode1bp{background-color:rgba(0,0,0,0.12);height:1px;width:100%;margin:8px 0;}.css-le4d8r{display:inline-block;vertical-align:middle;height:13px;width:13px;fill:rgba(0,0,0,0.6);}.css-1hbd3g7{height:250px;}.css-1nzh4zz{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:16px 32px;background-color:#FBE69E;color:rgba(0,0,0,0.87);line-height:1.5;font-weight:600;}@media (max-width:770px){.css-1nzh4zz{padding:16px;}}.css-38fzdi{color:#CA832A;margin-right:4px;}.css-helsa7{background-color:#FFFFFF;padding:32px;margin-bottom:24px;}@media (max-width:992px){.css-helsa7{margin:0 auto 40px;}}@media (max-width:480px){.css-helsa7{margin:0 0 40px;padding:32px 16px;}}.css-8qb8m4{margin-bottom:48px;}.css-2imjyh{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-he5w1s{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;width:100%;}@media (max-width:770px){.css-he5w1s{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}}.css-70qvj9{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.css-3ojehk{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;margin-right:4px;}.css-100alwu{display:inline-block;border-radius:50%;line-height:1;overflow:hidden;vertical-align:middle;}.css-1dtnjt5{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-10ougpm{color:rgba(0,0,0,0.87);font-size:14px;font-weight:600;line-height:1.8;margin-right:4px;text-wrap:break-word;word-break:break-all;}.css-1ay9vb9{margin-right:16px;}.css-m19uds{color:rgba(0,0,0,0.6);font-size:14px;line-height:1.8;}.css-cgzq40{color:rgba(0,0,0,0.87);font-size:32px;font-weight:bold;line-height:1.4;margin-top:8px;text-wrap:break-word;word-break:break-all;}.css-1wa99t2{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.6);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:8px;}.css-1l3zk9f{color:rgba(0,0,0,0.6);font-size:20px;margin-right:8px;}.css-4czcte{margin-right:4px;color:inherit;font-size:14px;line-height:1.8;}.css-4czcte:not(:last-child)::after{content:',';margin-right:4px;}.css-1yzj1fm{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:32px;}.css-1uv1qiv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-size:20px;height:32px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin-right:16px;outline:none;padding:0;width:32px;}.css-109dbrr{background-color:#F9F9F9;border-top:1px solid rgba(0,0,0,0.12);bottom:0;box-shadow:0px 1px 4px rgba(0,0,0,0.14);display:none;height:calc(env(safe-area-inset-bottom,0px) + 56px);-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding-bottom:env(safe-area-inset-bottom);position:-webkit-sticky;position:sticky;width:100%;z-index:2000;}@media (max-width:770px){.css-109dbrr{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}.css-5jpx49{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:space-evenly;-webkit-justify-content:space-evenly;-ms-flex-pack:space-evenly;justify-content:space-evenly;width:100%;}.css-mnxgyc{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1vlpknv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;margin-right:4px;background-color:#FFFFFF;}.css-fsjkhv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1b17vb0{color:#6E6F70;font-size:14px;font-weight:bold;margin-left:4px;}.css-7i7f4d{display:none;bottom:initial;left:initial;right:initial;top:initial;bottom:32px;right:0;}</style></head><body><div class="allWrapper"><div><div id="GlobalHeader-react-component-f88f6005-7e7d-4d78-a368-59552127f300"><div class="st-Header"><div class="st-Header_container"><div class="st-Header_start"><a href="/" class="st-Header_logo"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 426.57 130"><circle cx="167.08" cy="21.4" r="12.28"></circle><path d="M250.81 29.66h23.48v18.9h-23.48z"></path><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z"></path><circle cx="216.33" cy="21.4" r="12.28"></circle></svg></a><div class="st-Header_communitySelector" tabindex="0"><span class="fa fa-caret-down"></span></div><div class="st-Header_dropdown"><div class="st-Header_dropdownHeading">Qiita Teams that are logged in</div><div class="st-Header_dropdownItemNote">You are not logged in to any team</div><hr class="st-Header_dropdownDivider st-Header_dropdownDivider-shrink"/><a href="https://teams-center.qiita.com/find_team" class="st-Header_dropdownItem"><span class="fa fa-fw fa-sign-in st-Header_dropdownItemIcon"></span><div>Log in to Qiita Team</div></a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Community</div><a href="/organizations" class="st-Header_dropdownItem">Organization</a><a href="/official-events/open" class="st-Header_dropdownItem">Event</a><a href="/advent-calendar" class="st-Header_dropdownItem">Advent Calendar</a><a href="https://qiitadon.com/" class="st-Header_dropdownItem" target="_blank">Qiitadon (β)</a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Service</div><a href="https://jobs.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Jobs</a><a href="https://zine.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Zine</a><a href="https://blog.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Blog</a></div><form class="st-Header_search" action="/search" method="get"><span class="fa fa-search st-Header_searchIcon"></span><input type="search" class="st-Header_searchInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form><form class="st-Header_searchModal" action="/search" method="get"><input type="text" class="st-Header_searchModalInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form></div><div class="st-Header_end"><div class="st-Header_searchButton"><span class="fa fa-search"></span></div><a class="st-Header_signupButton" href="/signup?redirect_to=%2Fhiki_neet_p%2Fitems%2Fe04b5ac692aa18df0968">Signup</a><a class="st-Header_loginLink" href="/login?redirect_to=%2Fhiki_neet_p%2Fitems%2Fe04b5ac692aa18df0968">Login</a></div><div class="st-Header_overlay"></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="GlobalHeader" data-dom-id="GlobalHeader-react-component-f88f6005-7e7d-4d78-a368-59552127f300">{"unreadNotificationsCount":null,"realms":[{"humanName":"Qiita","isCurrentRealm":true,"isQiita":true,"isQiitaTeam":false,"loggedInUser":null,"teamId":null,"url":"https://qiita.com/"}],"teamFindUrl":"https://teams-center.qiita.com/find_team","isTeamOnlyUser":null,"currentUser":null}</script>
      
</div><div class="st-HeaderAlert st-HeaderAlert-warning"><div class="st-HeaderAlert_body"></div></div><script type="application/ld+json">{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"/","name":"Qiita"}},{"@type":"ListItem","position":2,"item":{"@id":"/tags/csharp","name":"C#"}}]}</script><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","datePublished":"2019-06-02T12:43:50.000+09:00","dateModified":"2019-06-02T12:50:54.000+09:00","headline":"【改訂版】PrismとReactivePropertyで簡単MVVM！","image":"https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0\u0026w=1200\u0026mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND00NENRNXBTNTZLaUM1NG1JNDRDUlVISnBjMjNqZ2FoU1pXRmpkR2wyWlZCeWIzQmxjblI1NDRHbjU3Q2g1WTJZVFZaV1RlLThnUSZ0eHQtY29sb3I9JTIzMzMzJnR4dC1mb250PUhpcmFnaW5vJTIwU2FucyUyMFc2JnR4dC1zaXplPTU0JnR4dC1jbGlwPWVsbGlwc2lzJnR4dC1hbGlnbj1jZW50ZXIlMkNtaWRkbGUmcz0wMzgwZjQyZjI5M2EyYWY4NmY3Zjg4ZWI5YmNmMGJhMw\u0026mark-align=center%2Cmiddle\u0026blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RR2hwYTJsZmJtVmxkRjl3JnR4dC1jb2xvcj0lMjMzMzMmdHh0LWZvbnQ9SGlyYWdpbm8lMjBTYW5zJTIwVzYmdHh0LXNpemU9NDUmdHh0LWFsaWduPXJpZ2h0JTJDYm90dG9tJnM9N2U1MGI4OWM0YjlhNjBjMGFiYzRhYTJmMDg0YWIxZDY\u0026blend-align=center%2Cmiddle\u0026blend-mode=normal\u0026s=0b5a864ffa4cd5a39e35237bd55ddda6","mainEntityOfPage":"https://qiita.com/hiki_neet_p/items/e04b5ac692aa18df0968","author":{"@type":"Person","address":"","email":null,"identifier":"hiki_neet_p","name":"hiki_neet_p","image":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F53668%2Fprofile-images%2F1551575525?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=9bce97088c66ea2aecaab5dff0543fa0","url":"https://qiita.com/hiki_neet_p","description":"プログラミングは趣味でやっていますが、いずれは何かアプリをリリースしたいと思っています。","memberOf":[]},"publisher":{"@type":"Organization","name":"Qiita","logo":{"@type":"ImageObject","url":"//cdn.qiita.com/assets/public/qiita-logo-c39ded593afa388e2e1ba435b110554e.png"}}}</script><style type="text/css">.wb-CampaignLink {
  background-color: #333333;
  width: 100%;
}

.wb-CampaignLink_container {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  max-width: 1100px;
  margin: 0 auto;
  font-size: 13px;
  padding: 0.8em;
}
.wb-CampaignLink_container > a {
  color: #fff;
}

.wb-CampaignLink_container > a:hover {
  text-decoration: underline;
}</style><div class="wb-CampaignLink"><div class="wb-CampaignLink_container"><a target="_blank" id="header_text_message_1" href="https://zine.qiita.com/interview/202104-ga-technologies/?utm_source=qiita&amp;utm_medium=header-banner">「不動産取引をワンクリックで完結する」世界観へ。GA technologiesの取り組み</a><a target="_blank" id="header_text_message_2" href="https://zine.qiita.com/interview/202104-ga-technologies/?utm_source=qiita&amp;utm_medium=header-banner">詳しくはこちら</a></div><script>td.trackEvent(
  'front_events',
  {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"hiki_neet_p","type":"items","id":"e04b5ac692aa18df0968"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Show","data":{"message":"「不動産取引をワンクリックで完結する」世界観へ。GA technologiesの取り組み","url":"https://zine.qiita.com/interview/202104-ga-technologies/?utm_source=qiita\u0026utm_medium=header-banner","sub_message":"詳しくはこちら"}}
)</script><script>document.getElementById('header_text_message_1').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"hiki_neet_p","type":"items","id":"e04b5ac692aa18df0968"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":0,"pos_id":"header_text_message_1","message":"「不動産取引をワンクリックで完結する」世界観へ。GA technologiesの取り組み","url":"https://zine.qiita.com/interview/202104-ga-technologies/?utm_source=qiita\u0026utm_medium=header-banner","sub_message":"詳しくはこちら"}}
  )
})</script><script>document.getElementById('header_text_message_2').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"hiki_neet_p","type":"items","id":"e04b5ac692aa18df0968"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":0,"pos_id":"header_text_message_2","message":"「不動産取引をワンクリックで完結する」世界観へ。GA technologiesの取り組み","url":"https://zine.qiita.com/interview/202104-ga-technologies/?utm_source=qiita\u0026utm_medium=header-banner","sub_message":"詳しくはこちら"}}
  )
})</script></div><script type="application/json" id="js-react-on-rails-context">{"railsEnv":"production","inMailer":false,"i18nLocale":"en","i18nDefaultLocale":"en","href":"https://qiita.com/hiki_neet_p/items/e04b5ac692aa18df0968","location":"/hiki_neet_p/items/e04b5ac692aa18df0968","scheme":"https","host":"qiita.com","port":null,"pathname":"/hiki_neet_p/items/e04b5ac692aa18df0968","search":null,"httpAcceptLanguage":null,"actionPath":"public/items#show","settings":{"analyticsTrackingId":"UA-24675221-12","assetsMap":{},"csrfToken":"KL+oTiv2Lx3RTlbgg/Cgbp2YfWo+D/87MH0W+O2yAdCrU9Vv8JEkOwcFPYuDv/XqEWdcgVxDYmSju/16Y1W7Mg==","locale":"en"},"currentUser":null,"isLoggedIn":false,"recaptchaSiteKey":"6LfNkiQTAAAAAM3UGnSquBy2akTITGNMO_QDxMw6","serverSide":false}</script>
<div id="PersonalArticlePage-react-component-476bfa98-77ab-4869-bfa7-667c0166b2e5"><div class="p-items_wrapper"><div class=" css-17jxvjw"><div class="css-11t2ec1"><div class="css-1dvr2p8"><button class=" css-18lkoru"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/hiki_neet_p/items/e04b5ac692aa18df0968/likers" class="css-1iupg5d">169</a></div><div class="css-ijvq0v"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-115f4t">207</span></div><div class="css-1b8uj5v"><span class="fa fa-twitter"></span></div><div class="css-1b8uj5v"><span class="fa fa-facebook"></span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-fcbn8c"><div class="css-1gj7nt">Improve article</div><a href="/drafts/e04b5ac692aa18df0968/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/hiki_neet_p/items/e04b5ac692aa18df0968/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/hiki_neet_p/items/e04b5ac692aa18df0968/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/hiki_neet_p/items/e04b5ac692aa18df0968/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/hiki_neet_p/items/e04b5ac692aa18df0968.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div><div class="p-items_options"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_toc"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_main"><div class="css-1nzh4zz"><span class="fa fa-fw fa-warning css-38fzdi"></span><p>More than 1 year has passed since last update.</p></div><div class="css-helsa7"><div class="css-8qb8m4"><div class="css-2imjyh"><div class="css-he5w1s"><div class="css-70qvj9"><div class="css-3ojehk"><a href="/hiki_neet_p"><img class="css-100alwu eyfquo10" src="https://qiita-image-store.s3.amazonaws.com/0/53668/profile-images/1551575525" width="24" height="24" loading="lazy"/></a></div><div class="css-1dtnjt5"><a href="/hiki_neet_p" class="css-10ougpm">@<!-- -->hiki_neet_p</a><div class="css-1ay9vb9"><span><meta content="2019-06-02T03:43:50Z"/><time dateTime="2019-06-02T03:50:54Z" class="css-m19uds">updated at 2019-06-02</time></span></div></div></div></div></div><h1 class="css-cgzq40">【改訂版】PrismとReactivePropertyで簡単MVVM！</h1><div class="css-1wa99t2"><span class="fa fa-tags mr-1of2 css-1l3zk9f" aria-hidden="true"></span><a href="/tags/csharp" class="css-4czcte">C#</a><a href="/tags/wpf" class="css-4czcte">WPF</a><a href="/tags/prism" class="css-4czcte">PRISM</a><a href="/tags/reactiveproperty" class="css-4czcte">ReactiveProperty</a><a href="/tags/.netcore" class="css-4czcte">.NETCore</a></div></div><section class="it-MdContent"><div id="personal-public-article-body"><div>
<h1>
<span id="はじめに" class="fragment"></span><a href="#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB"><i class="fa fa-link"></i></a>はじめに</h1>

<p>本記事は、3年前に書いた以下の記事を大幅に見直して書き改めたものです。</p>

<p><a href="https://qiita.com/hiki_neet_p/items/e381c687b0644c0e4978" id="reference-ed3cc5801a966a31eaaa">PrismとReactivePropertyで簡単MVVM！</a></p>

<p>上記の記事は、私の古い認識のもとに書き上げられました。<br>
私の当時の認識で、<code>Prism</code>の機能のごく一部を使って<code>WPF</code>アプリケーションを構成することが「簡単」だと思っていましたが、時が過ぎ、その認識が変化しました。<br>
即ち、<code>Prism</code>の機能にもう少し乗っかった方が、結果的に「簡単」だと思い直したのです。<br>
また、当時の未熟さから、誤った考えのもとに書かれた部分も見受けられます。<br>
古い記事に「いいね」をいただく度、そのことをお伝えし直したいという気持ちになっていましたが、この度、執筆するやる気を確保できましたので、本記事を投稿するに至りました。</p>

<p><code>Prism</code>の機能は多彩ですが、本記事では覚えておくと開発が簡単になる、効果の高い部分のみをピックアップしてお伝えできればなと思います。</p>

<h2>
<span id="net-core-30" class="fragment"></span><a href="#net-core-30"><i class="fa fa-link"></i></a><code>.NET Core 3.0</code>
</h2>

<p>今まで、<code>WPF</code>は<code>.NET Framework</code>固有のものでした。<br>
しかし、2019年秋にリリースされるであろう<code>.NET Core 3.0</code>には、新たに<code>WPF</code>の機能が乗せられており、<code>.NET Framework</code>と同じように<code>WPF</code>アプリケーションを作成できるようになります。</p>

<p>世間では、<code>Javascript</code>を中心に、新たなGUIフレームワークが台頭しつつありますが、まだ<code>WPF</code>の人口も残っているのではないでしょうか。</p>

<p>本記事の執筆時点では正式リリースがまだですが、以下では<code>.NET Core 3.0-preview</code>を使用し、簡単な<code>WPF</code>のサンプルアプリの作成を通して、<code>Prism</code>と<code>ReactiveProperty</code>の使用方法をご紹介します。</p>

<h1>
<span id="本記事の開発環境" class="fragment"></span><a href="#%E6%9C%AC%E8%A8%98%E4%BA%8B%E3%81%AE%E9%96%8B%E7%99%BA%E7%92%B0%E5%A2%83"><i class="fa fa-link"></i></a>本記事の開発環境</h1>

<ul>
<li>Windows 10 Home</li>
<li>dotnetcore-sdk 3.0.100-preview5-011568</li>
<li>Prism.Unity 7.2.0.1233-pre</li>
<li>ReactiveProperty 5.5.1</li>
<li>Visual Studio Code</li>
</ul>

<h1>
<span id="github" class="fragment"></span><a href="#github"><i class="fa fa-link"></i></a>GitHub</h1>

<p><qiita-embed-ogp src="https://github.com/tana-gh/PrismSample"></qiita-embed-ogp></p>

<h1>
<span id="各ライブラリについて" class="fragment"></span><a href="#%E5%90%84%E3%83%A9%E3%82%A4%E3%83%96%E3%83%A9%E3%83%AA%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>各ライブラリについて</h1>

<h2>
<span id="prismについて" class="fragment"></span><a href="#prism%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a><code>Prism</code>について</h2>

<p><code>Nuget</code>を見ると、<code>Prism</code>関連のパッケージがたくさんあります。<br>
ここで、各パッケージの意味を見てみましょう。</p>

<table>
<thead>
<tr>
<th>パッケージ名</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td>Prism.Core</td>
<td>前提パッケージ</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td>Prism.Wpf</td>
<td>WPF用パッケージ</td>
</tr>
<tr>
<td>Prism.Forms</td>
<td>Xamarin用パッケージ</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td>Prism.Autofac</td>
<td>WPF用（Autofac使用）</td>
</tr>
<tr>
<td>Prism.DryIoc</td>
<td>WPF用（DryIoc使用）</td>
</tr>
<tr>
<td>Prism.Mef</td>
<td>WPF用（Mef使用）</td>
</tr>
<tr>
<td>Prism.Ninject</td>
<td>WPF用（Ninject使用）</td>
</tr>
<tr>
<td>Prism.StructureMap</td>
<td>WPF用（StructureMap使用）</td>
</tr>
<tr>
<td>Prism.Unity</td>
<td>WPF用（Unity使用）</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td>Prism.Autofac.Forms</td>
<td>Xamarin用（Autofac使用）</td>
</tr>
<tr>
<td>Prism.DryIoc.Forms</td>
<td>Xamarin用（DryIoc使用）</td>
</tr>
<tr>
<td>Prism.Unity.Forms</td>
<td>Xamarin用（Unity使用）</td>
</tr>
</tbody>
</table>

<p><code>Prism.Core</code>は前提パッケージで、プラットフォーム共通の機能が入っています。<br>
<code>Prism.Wpf</code>と<code>Prism.Forms</code>は、それぞれ<code>WPF</code>用と<code>Xamarin</code>用です。<br>
その下の6つのパッケージは<code>WPF</code>用で、DIコンテナとしてそれぞれの外部パッケージを使用するものです。<br>
最後の3つは<code>Xamarin</code>用で、DIコンテナとしてそれぞれの外部パッケージを使用します。</p>

<p><code>WPF</code>アプリを作るうえでは、<code>WPF</code>用でコンテナありの6つの中から選択することになります。<br>
今回は、<code>.NET Core</code>対応ありで公式サンプルにも使用されている、<code>Prism.Unity</code>を使用します。</p>

<p><code>Prism.Unity</code>は<code>Prism.Wpf</code>に依存し、<code>Prism.Wpf</code>は<code>Prism.Core</code>に依存するので、<code>Prism.Unity</code>だけインストールすれば大丈夫です。</p>

<h2>
<span id="unityについて" class="fragment"></span><a href="#unity%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a><code>Unity</code>について</h2>

<p><code>Unity</code>はDI（依存性の注入）ライブラリです。<br>
<code>Unity</code>という同名のゲームエンジンが存在しますが、全く関係はありません。<br>
DIライブラリは沢山ありますが、<code>C#</code>においてはこの<code>Unity</code>が有名どころです。</p>

<p><code>Prism.Unity</code>は<code>Unity</code>に依存するので、<code>Prism.Unity</code>だけインストールするようにしましょう。</p>

<h2>
<span id="prism-samples-wpf" class="fragment"></span><a href="#prism-samples-wpf"><i class="fa fa-link"></i></a><code>Prism-Samples-Wpf</code>
</h2>

<p><code>Prism.Unity</code>を使用した、公式サンプルです。</p>

<p><a href="https://github.com/PrismLibrary/Prism-Samples-Wpf" rel="nofollow noopener" target="_blank">Prism-Samples-Wpf</a></p>

<p>29種類のサンプルがあり、各サンプルは非常に小さなプロジェクトから構成されているので、簡単に機能の把握ができます。</p>

<p>正直、このサンプルを見れば本記事で説明することはあまりありませんが、本記事では、重要な機能をかいつまんでご紹介するようにします。</p>

<h2>
<span id="prismの機能概観" class="fragment"></span><a href="#prism%E3%81%AE%E6%A9%9F%E8%83%BD%E6%A6%82%E8%A6%B3"><i class="fa fa-link"></i></a><code>Prism</code>の機能概観</h2>

<table>
<thead>
<tr>
<th>機能</th>
<th>名前空間</th>
</tr>
</thead>
<tbody>
<tr>
<td>DIコンテナの補助</td>
<td>Prism.Ioc, Prism.Unity</td>
</tr>
<tr>
<td>Region</td>
<td>Prism.Regions</td>
</tr>
<tr>
<td>Navigation</td>
<td>Prism.Navigation</td>
</tr>
<tr>
<td>EventAggregator</td>
<td>Prism.Events</td>
</tr>
<tr>
<td>Dialog</td>
<td>Prism.Services.Dialogs</td>
</tr>
<tr>
<td>MVVMの補助</td>
<td>Prism.Mvvm</td>
</tr>
<tr>
<td>Module</td>
<td>Prism.Modularity</td>
</tr>
</tbody>
</table>

<ul>
<li>
<p>DIコンテナの補助</p>

<ul>
<li>外部のDIライブラリを使用し、自動的にクラスをコンテナに登録したり、コンストラクタインジェクション、セッターインジェクションを行ないます。</li>
</ul>
</li>
<li>
<p>Region</p>

<ul>
<li>名前をつけたViewの領域に、別のViewを追加するなどの管理ができます。</li>
</ul>
</li>
<li>
<p>Navigation</p>

<ul>
<li>Regionのヒストリ機能や、ライフサイクル管理ができます。</li>
<li>本記事では扱いません。</li>
</ul>
</li>
<li>
<p>EventAggregator</p>

<ul>
<li>ViewModelやViewのイベントをPubSubパターンで統合管理します。</li>
</ul>
</li>
<li>
<p>Dialog</p>

<ul>
<li>ダイアログの作成と呼び出しを行ないます。</li>
<li>
<code>Prism 7.2</code>からの機能です。</li>
<li>本記事では扱いません。</li>
</ul>
</li>
<li>
<p>MVVMの補助</p>

<ul>
<li>
<code>INotifyPropertyChanged</code>の実装補助、コマンドの実装補助、バリデーションの実装補助を行ないます。</li>
<li>本記事では扱いません（<code>BindableBase</code>クラスが登場するのみ）。</li>
</ul>
</li>
<li>
<p>Module</p>

<ul>
<li>別のアセンブリにあるクラスを<code>Prism</code>アプリケーションに含めるために使用します。</li>
<li>本記事では扱いません。</li>
</ul>
</li>
</ul>

<h2>
<span id="reactivepropertyについて" class="fragment"></span><a href="#reactiveproperty%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a><code>ReactiveProperty</code>について</h2>

<p>前章の「MVVMの補助」の部分は、<code>Prism</code>よりも<code>ReactiveProperty</code>に任せるほうが簡単だという認識です。</p>

<p>Reactiveとは、Observerパターンによる、時系列データ（イベントなど）の監視、およびそのデータ群に対する演算（LINQのような）を扱うものです。<br>
<code>System.Reactive</code>という外部ライブラリに依存しています。</p>

<p>GUIアプリはイベントに対処しなくてはならないので、このReactiveの考え方は有効です。<br>
<code>ReactiveProperty</code>は、主にMVVMにおけるViewModelのプロパティとコマンドを、Reactiveに扱うことを可能とします。</p>

<h1>
<span id="サンプルプロジェクトの概要" class="fragment"></span><a href="#%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E6%A6%82%E8%A6%81"><i class="fa fa-link"></i></a>サンプルプロジェクトの概要</h1>

<p>これから作るアプリの画面を以下に示します。<br>
数値を入力すると、2乗を計算するアプリです。</p>

<p><a href="https://camo.qiitausercontent.com/7edfd6d2e1c19dc15e3ba23c33d7eb5f924bcb21/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f35333636382f62316266393831352d633930612d383338392d666632382d6539643730653663353234632e6a706567" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F53668%2Fb1bf9815-c90a-8389-ff28-e9d70e6c524c.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=bc248451b7b97b8412a5e89fe7745c5f" alt="complete-window.jpg" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/53668/b1bf9815-c90a-8389-ff28-e9d70e6c524c.jpeg" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F53668%2Fb1bf9815-c90a-8389-ff28-e9d70e6c524c.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=3185dd4434fab18199cc8b5b9a1b0fd9 1x" loading="lazy"></a></p>

<p>入力は即座に反映されます。</p>

<p><a href="https://camo.qiitausercontent.com/9dd5332f3d0363646ee01168f092e10bbfa28600/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f35333636382f32396461656236362d633538652d386464332d336563392d6365636436336130633962392e6a706567" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F53668%2F29daeb66-c58e-8dd3-3ec9-cecd63a0c9b9.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=0aa7ce6e0e46a95b37af7f81df16a320" alt="complete-window2.jpg" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/53668/29daeb66-c58e-8dd3-3ec9-cecd63a0c9b9.jpeg" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F53668%2F29daeb66-c58e-8dd3-3ec9-cecd63a0c9b9.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=d1cc5509634149105facd360657629b8 1x" loading="lazy"></a></p>

<p>入力のバリデーションも行います。</p>

<p><a href="https://camo.qiitausercontent.com/d7c9c6050c9c611fa6d9fa5d25e2a3c6755201ba/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f35333636382f66376563646432372d656663372d613566392d376537622d3432613730366431323562612e6a706567" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F53668%2Ff7ecdd27-efc7-a5f9-7e7b-42a706d125ba.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=638d7e8e9074caeef5e36128287b22ff" alt="invalid-window.jpg" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/53668/f7ecdd27-efc7-a5f9-7e7b-42a706d125ba.jpeg" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F53668%2Ff7ecdd27-efc7-a5f9-7e7b-42a706d125ba.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=2de4baf8f780e2ee4b399686ed388097 1x" loading="lazy"></a></p>

<p>ボタンを押すと、ダイアログが表示されます。</p>

<p><a href="https://camo.qiitausercontent.com/7db0cb27c5be04cda50d9c564eeefede3cee7a25/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f35333636382f36653533396230392d633334322d613532312d393538342d6265396539653238633932632e6a706567" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F53668%2F6e539b09-c342-a521-9584-be9e9e28c92c.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=ebf6590b284968082bc44f120b7f249e" alt="dialog.jpg" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/53668/6e539b09-c342-a521-9584-be9e9e28c92c.jpeg" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F53668%2F6e539b09-c342-a521-9584-be9e9e28c92c.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=0f6f3f331655f30df1d80a47f246180a 1x" loading="lazy"></a></p>

<p><a href="https://camo.qiitausercontent.com/d75bcfa5170d7d1576766d04d8abadd8dd740b27/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f35333636382f37663464666166352d363331372d376234622d386362302d6431356338666563303037312e6a706567" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F53668%2F7f4dfaf5-6317-7b4b-8cb0-d15c8fec0071.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=efdeeda727bb5716766dfb1817660887" alt="dialog2.jpg" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/53668/7f4dfaf5-6317-7b4b-8cb0-d15c8fec0071.jpeg" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F53668%2F7f4dfaf5-6317-7b4b-8cb0-d15c8fec0071.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=695721d6984ae3dbcdfa98b6a484059c 1x" loading="lazy"></a></p>

<h1>
<span id="プロジェクトの構造" class="fragment"></span><a href="#%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E6%A7%8B%E9%80%A0"><i class="fa fa-link"></i></a>プロジェクトの構造</h1>

<p>プロジェクト群を以下のように作成しました。<br>
プロジェクトを小分けにしない方が作るのは簡単ですが、今回は分けて作成しました。</p>

<div class="code-frame" data-lang="powershell">
<div class="code-lang"><span class="bold">PowerShell</span></div>
<div class="highlight"><pre class="with-code"><code><span class="c"># ディレクトリの作成</span><span class="w">
</span><span class="err">&gt;</span><span class="w"> </span><span class="n">mkdir</span><span class="w"> </span><span class="nx">PrismSample</span><span class="w">
</span><span class="err">&gt;</span><span class="w"> </span><span class="n">cd</span><span class="w"> </span><span class="nx">PrismSample</span><span class="w">

</span><span class="c"># プロジェクト群の作成</span><span class="w">
</span><span class="err">&gt;</span><span class="w"> </span><span class="n">dotnet</span><span class="w"> </span><span class="nx">new</span><span class="w"> </span><span class="nx">sln</span><span class="w">
</span><span class="err">&gt;</span><span class="w"> </span><span class="n">dotnet</span><span class="w"> </span><span class="nx">new</span><span class="w"> </span><span class="nx">wpf</span><span class="w"> </span><span class="nt">-o</span><span class="w"> </span><span class="nx">PrismSample.App.Main</span><span class="w">
</span><span class="err">&gt;</span><span class="w"> </span><span class="n">dotnet</span><span class="w"> </span><span class="nx">new</span><span class="w"> </span><span class="nx">classlib</span><span class="w"> </span><span class="nt">-o</span><span class="w"> </span><span class="nx">PrismSample.Lib.Views</span><span class="w">
</span><span class="err">&gt;</span><span class="w"> </span><span class="n">dotnet</span><span class="w"> </span><span class="nx">new</span><span class="w"> </span><span class="nx">classlib</span><span class="w"> </span><span class="nt">-o</span><span class="w"> </span><span class="nx">PrismSample.Lib.ViewModels</span><span class="w">
</span><span class="err">&gt;</span><span class="w"> </span><span class="n">dotnet</span><span class="w"> </span><span class="nx">new</span><span class="w"> </span><span class="nx">classlib</span><span class="w"> </span><span class="nt">-o</span><span class="w"> </span><span class="nx">PrismSample.Lib.Models</span><span class="w">

</span><span class="c"># ソリューションへの追加</span><span class="w">
</span><span class="err">&gt;</span><span class="w"> </span><span class="n">dotnet</span><span class="w"> </span><span class="nx">sln</span><span class="w"> </span><span class="nx">add</span><span class="w"> </span><span class="o">.</span><span class="nx">\PrismSample.App.Main\</span><span class="w"> </span><span class="o">.</span><span class="nx">\PrismSample.Lib.Views\</span><span class="w"> </span><span class="o">.</span><span class="nx">\PrismSample.Lib.ViewModels\</span><span class="w"> </span><span class="o">.</span><span class="nx">\PrismSample.Lib.Models\</span><span class="w">

</span><span class="c"># プロジェクト参照の追加</span><span class="w">
</span><span class="err">&gt;</span><span class="w"> </span><span class="n">dotnet</span><span class="w"> </span><span class="nx">add</span><span class="w"> </span><span class="o">.</span><span class="nx">\PrismSample.App.Main\</span><span class="w"> </span><span class="nx">reference</span><span class="w"> </span><span class="o">.</span><span class="nx">\PrismSample.Lib.Views\</span><span class="w">
</span><span class="err">&gt;</span><span class="w"> </span><span class="n">dotnet</span><span class="w"> </span><span class="nx">add</span><span class="w"> </span><span class="o">.</span><span class="nx">\PrismSample.App.Main\</span><span class="w"> </span><span class="nx">reference</span><span class="w"> </span><span class="o">.</span><span class="nx">\PrismSample.Lib.ViewModels\</span><span class="w">
</span><span class="err">&gt;</span><span class="w"> </span><span class="n">dotnet</span><span class="w"> </span><span class="nx">add</span><span class="w"> </span><span class="o">.</span><span class="nx">\PrismSample.Lib.ViewModels\</span><span class="w"> </span><span class="nx">reference</span><span class="w"> </span><span class="o">.</span><span class="nx">\PrismSample.Lib.Views\</span><span class="w">
</span><span class="err">&gt;</span><span class="w"> </span><span class="n">dotnet</span><span class="w"> </span><span class="nx">add</span><span class="w"> </span><span class="o">.</span><span class="nx">\PrismSample.Lib.ViewModels\</span><span class="w"> </span><span class="nx">reference</span><span class="w"> </span><span class="o">.</span><span class="nx">\PrismSample.Lib.Models\</span><span class="w">

</span><span class="c"># パッケージの追加</span><span class="w">
</span><span class="err">&gt;</span><span class="w"> </span><span class="n">dotnet</span><span class="w"> </span><span class="nx">add</span><span class="w"> </span><span class="o">.</span><span class="nx">\PrismSample.App.Main\</span><span class="w"> </span><span class="nx">package</span><span class="w"> </span><span class="nx">Prism.Unity</span><span class="w"> </span><span class="nt">-v</span><span class="w"> </span><span class="nx">7.2.0.1233-pre</span><span class="w">
</span><span class="err">&gt;</span><span class="w"> </span><span class="n">dotnet</span><span class="w"> </span><span class="nx">add</span><span class="w"> </span><span class="o">.</span><span class="nx">\PrismSample.Lib.Views\</span><span class="w"> </span><span class="nx">package</span><span class="w"> </span><span class="nx">Prism.Unity</span><span class="w"> </span><span class="nt">-v</span><span class="w"> </span><span class="nx">7.2.0.1233-pre</span><span class="w">
</span><span class="err">&gt;</span><span class="w"> </span><span class="n">dotnet</span><span class="w"> </span><span class="nx">add</span><span class="w"> </span><span class="o">.</span><span class="nx">\PrismSample.Lib.ViewModels\</span><span class="w"> </span><span class="nx">package</span><span class="w"> </span><span class="nx">Prism.Unity</span><span class="w"> </span><span class="nt">-v</span><span class="w"> </span><span class="nx">7.2.0.1233-pre</span><span class="w">
</span><span class="err">&gt;</span><span class="w"> </span><span class="n">dotnet</span><span class="w"> </span><span class="nx">add</span><span class="w"> </span><span class="o">.</span><span class="nx">\PrismSample.Lib.ViewModels\</span><span class="w"> </span><span class="nx">package</span><span class="w"> </span><span class="nx">ReactiveProperty</span><span class="w">
</span></code></pre></div>
</div>

<p><a href="https://camo.qiitausercontent.com/6c1ed3c4e4c1d05eae726faa342354db778e3bda/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f35333636382f36303761623733652d323934612d376531382d643236372d3766383563666132656439332e6a706567" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F53668%2F607ab73e-294a-7e18-d267-7f85cfa2ed93.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=4e63e8aa192aaecaa17d5d936f83a85e" alt="initial-projects.jpg" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/53668/607ab73e-294a-7e18-d267-7f85cfa2ed93.jpeg" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F53668%2F607ab73e-294a-7e18-d267-7f85cfa2ed93.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=f70fe1af9e022a1e23474b0725110056 1x" loading="lazy"></a></p>

<h2>
<span id="csprojの修正" class="fragment"></span><a href="#csproj%E3%81%AE%E4%BF%AE%E6%AD%A3"><i class="fa fa-link"></i></a><code>.csproj</code>の修正</h2>

<p><code>.NET Core 3.0</code>に対応させるため、下記のように修正しました。</p>

<div class="code-frame" data-lang="xml">
<div class="code-lang"><span class="bold">PrismSample.Lib.Views.csproj</span></div>
<div class="highlight"><pre class="with-code"><code><span class="nt">&lt;Project</span> <span class="na">Sdk=</span><span class="s">"Microsoft.NET.Sdk.WindowsDesktop"</span><span class="nt">&gt;</span> <span class="c">&lt;!--修正--&gt;</span>

  <span class="c">&lt;!--修正--&gt;</span>
  <span class="nt">&lt;PropertyGroup&gt;</span>
    <span class="nt">&lt;TargetFramework&gt;</span>netcoreapp3.0<span class="nt">&lt;/TargetFramework&gt;</span>
    <span class="nt">&lt;UseWPF&gt;</span>true<span class="nt">&lt;/UseWPF&gt;</span>
  <span class="nt">&lt;/PropertyGroup&gt;</span>

  <span class="nt">&lt;ItemGroup&gt;</span>
    <span class="nt">&lt;PackageReference</span> <span class="na">Include=</span><span class="s">"Prism.Unity"</span> <span class="na">Version=</span><span class="s">"7.2.0.1233-pre"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/ItemGroup&gt;</span>

<span class="nt">&lt;/Project&gt;</span>
</code></pre></div>
</div>

<div class="code-frame" data-lang="xml">
<div class="code-lang"><span class="bold">PrismSample.Lib.ViewModels.csproj</span></div>
<div class="highlight"><pre class="with-code"><code><span class="nt">&lt;Project</span> <span class="na">Sdk=</span><span class="s">"Microsoft.NET.Sdk"</span><span class="nt">&gt;</span>

  <span class="c">&lt;!--修正--&gt;</span>
  <span class="nt">&lt;PropertyGroup&gt;</span>
    <span class="nt">&lt;TargetFramework&gt;</span>netcoreapp3.0<span class="nt">&lt;/TargetFramework&gt;</span>
  <span class="nt">&lt;/PropertyGroup&gt;</span>

  <span class="nt">&lt;ItemGroup&gt;</span>
    <span class="nt">&lt;PackageReference</span> <span class="na">Include=</span><span class="s">"Prism.Unity"</span> <span class="na">Version=</span><span class="s">"7.2.0.1233-pre"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;PackageReference</span> <span class="na">Include=</span><span class="s">"ReactiveProperty"</span> <span class="na">Version=</span><span class="s">"5.5.1"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/ItemGroup&gt;</span>

  <span class="nt">&lt;ItemGroup&gt;</span>
    <span class="nt">&lt;ProjectReference</span> <span class="na">Include=</span><span class="s">"..\PrismSample.Lib.Models\PrismSample.Lib.Models.csproj"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/ItemGroup&gt;</span>

<span class="nt">&lt;/Project&gt;</span>
</code></pre></div>
</div>

<div class="code-frame" data-lang="xml">
<div class="code-lang"><span class="bold">PrismSample.Lib.Models.csproj</span></div>
<div class="highlight"><pre class="with-code"><code><span class="nt">&lt;Project</span> <span class="na">Sdk=</span><span class="s">"Microsoft.NET.Sdk"</span><span class="nt">&gt;</span>

  <span class="c">&lt;!--修正--&gt;</span>
  <span class="nt">&lt;PropertyGroup&gt;</span>
    <span class="nt">&lt;TargetFramework&gt;</span>netcoreapp3.0<span class="nt">&lt;/TargetFramework&gt;</span>
  <span class="nt">&lt;/PropertyGroup&gt;</span>

<span class="nt">&lt;/Project&gt;</span>
</code></pre></div>
</div>

<h2>
<span id="実行方法" class="fragment"></span><a href="#%E5%AE%9F%E8%A1%8C%E6%96%B9%E6%B3%95"><i class="fa fa-link"></i></a>実行方法</h2>

<div class="code-frame" data-lang="powershell">
<div class="code-lang"><span class="bold">PowerShell</span></div>
<div class="highlight"><pre class="with-code"><code><span class="err">&gt;</span><span class="w"> </span><span class="n">dotnet</span><span class="w"> </span><span class="nx">run</span><span class="w"> </span><span class="nt">-p</span><span class="w"> </span><span class="o">.</span><span class="nx">\PrismSample.App.Main\</span><span class="w">
</span></code></pre></div>
</div>

<p>ビルドの警告が出なければ成功です。</p>

<h1>
<span id="prismアプリケーション" class="fragment"></span><a href="#prism%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3"><i class="fa fa-link"></i></a><code>Prism</code>アプリケーション</h1>

<p>以下では、Visual Studio Codeにより編集を行ないます。<br>
執筆時点では、<code>C#</code>の拡張機能に不具合があり、シンタックスエラーの赤が表示される場合がありますが、コンパイルが通れば問題ありません。<br>
また、<code>XAML</code>の編集機能は現時点で無いため、便利に開発したい場合はVisual Studioを使用した方が良いかもしれません。</p>

<h2>
<span id="appxamlの編集" class="fragment"></span><a href="#appxaml%E3%81%AE%E7%B7%A8%E9%9B%86"><i class="fa fa-link"></i></a><code>App.xaml</code>の編集</h2>

<div class="code-frame" data-lang="diff">
<div class="code-lang"><span class="bold">App.xaml</span></div>
<div class="highlight"><pre class="with-code"><code><span class="gd">- &lt;Application x:Class="PrismSample.App.Main.App"
</span><span class="gi">+ &lt;prism:PrismApplication x:Class="PrismSample.App.Main.App"
</span>             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
<span class="gi">+              xmlns:prism="http://prismlibrary.com/"
</span>             xmlns:local="clr-namespace:PrismSample.App.Main"
<span class="gd">-              StartupUri="MainWindow.xaml"&gt;
</span>    &lt;Application.Resources&gt;

    &lt;/Application.Resources&gt;
<span class="gd">- &lt;/Application&gt;
</span><span class="gi">+ &lt;/prism:PrismApplication&gt;
</span></code></pre></div>
</div>

<p>標準の<code>Application</code>クラスを<code>PrismApplication</code>クラスに置き換えています。<br>
また、<code>StartupUri</code>が不要になっています。</p>

<p>この作業により、ビルド時に自動生成される<code>App</code>クラスが<code>PrismApplication</code>を継承するように変化します。</p>

<h2>
<span id="appxamlcsの編集" class="fragment"></span><a href="#appxamlcs%E3%81%AE%E7%B7%A8%E9%9B%86"><i class="fa fa-link"></i></a><code>App.xaml.cs</code>の編集</h2>

<div class="code-frame" data-lang="diff">
<div class="code-lang"><span class="bold">App.xaml.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="gd">- using System;
- using System.Collections.Generic;
- using System.Configuration;
- using System.Data;
- using System.Linq;
- using System.Threading.Tasks;
</span><span class="p">using System.Windows;
</span><span class="gi">+ using Prism.Ioc;
+ using Prism.Unity;
</span>
namespace PrismSample.App.Main
<span class="err">{</span>
    /// &lt;summary&gt;
    /// Interaction logic for App.xaml
    /// &lt;/summary&gt;
<span class="gd">-     public partial class App : Application
</span><span class="gi">+     public partial class App : PrismApplication
</span>    {
<span class="gi">+         protected override Window CreateShell()
+         {
+             return Container.Resolve&lt;MainWindow&gt;();
+         }
+
+         protected override void RegisterTypes(IContainerRegistry containerRegistry)
+         {
+         }
</span>    }
<span class="err">}</span>
</code></pre></div>
</div>

<p>標準の<code>Application</code>ではなく、<code>Prism.Unity.PrismApplication</code>を継承します。</p>

<p><code>CreateShell</code>メソッドは、アプリケーション開始時に起動する<code>Window</code>を返す必要があります。<br>
コンテナから<code>MainWindow</code>を生成して返しておきます。<br>
ここで、何もしていないのに<code>MainWindow</code>がDIコンテナに登録されているのがポイントです。<br>
同じアセンブリ（プロジェクト）内のViewとViewModelが自動的に登録されるのです。<br>
<code>Prism</code>の便利さの本質はここに集約されるのではないでしょうか。</p>

<p>その下にある<code>RegisterTypes</code>メソッドは、コンテナに手動でクラスやインスタンスを登録する際に使用します。</p>

<h2>
<span id="実行" class="fragment"></span><a href="#%E5%AE%9F%E8%A1%8C"><i class="fa fa-link"></i></a>実行</h2>

<div class="code-frame" data-lang="powershell">
<div class="code-lang"><span class="bold">PowerShell</span></div>
<div class="highlight"><pre class="with-code"><code><span class="err">&gt;</span><span class="w"> </span><span class="n">dotnet</span><span class="w"> </span><span class="nx">run</span><span class="w"> </span><span class="nt">-p</span><span class="w"> </span><span class="o">.</span><span class="nx">\PrismSample.App.Main\</span><span class="w">
</span></code></pre></div>
</div>

<p><a href="https://camo.qiitausercontent.com/a6d3bcca4a9c8cf64b45c9e87527a0cc37a8fe65/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f35333636382f34653337643862362d313734352d346161642d363063642d3264646333623630613735382e6a706567" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F53668%2F4e37d8b6-1745-4aad-60cd-2ddc3b60a758.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=c9894cb90c3e4392a0871dcd92025d93" alt="initial-window.jpg" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/53668/4e37d8b6-1745-4aad-60cd-2ddc3b60a758.jpeg" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F53668%2F4e37d8b6-1745-4aad-60cd-2ddc3b60a758.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=9f78fe6765411c52f74b1cf3328c88c6 1x" loading="lazy"></a></p>

<p>うまく<code>MainWindow</code>が表示されました。</p>

<h1>
<span id="プロジェクトをまたいだクラスの登録" class="fragment"></span><a href="#%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%82%92%E3%81%BE%E3%81%9F%E3%81%84%E3%81%A0%E3%82%AF%E3%83%A9%E3%82%B9%E3%81%AE%E7%99%BB%E9%8C%B2"><i class="fa fa-link"></i></a>プロジェクトをまたいだクラスの登録</h1>

<h2>
<span id="view" class="fragment"></span><a href="#view"><i class="fa fa-link"></i></a>View</h2>

<p><code>PrismSample.App.Main</code>の<code>MainWindow.xaml</code>と<code>MainWindow.xaml.cs</code>を削除します。</p>

<p><code>PrismSample.Lib.Views</code>に、以下の<code>MainWindow.xaml</code>と<code>MainWindow.xaml.cs</code>を作成します。</p>

<div class="code-frame" data-lang="xml">
<div class="code-lang"><span class="bold">MainWindow.xaml</span></div>
<div class="highlight"><pre class="with-code"><code><span class="nt">&lt;Window</span> <span class="na">x:Class=</span><span class="s">"PrismSample.Lib.Views.MainWindow"</span>
        <span class="na">xmlns=</span><span class="s">"http://schemas.microsoft.com/winfx/2006/xaml/presentation"</span>
        <span class="na">xmlns:x=</span><span class="s">"http://schemas.microsoft.com/winfx/2006/xaml"</span>
        <span class="na">xmlns:d=</span><span class="s">"http://schemas.microsoft.com/expression/blend/2008"</span>
        <span class="na">xmlns:mc=</span><span class="s">"http://schemas.openxmlformats.org/markup-compatibility/2006"</span>
        <span class="na">xmlns:prism=</span><span class="s">"http://prismlibrary.com/"</span>
        <span class="na">xmlns:local=</span><span class="s">"clr-namespace:PrismSample.Lib.Views"</span>
        <span class="na">mc:Ignorable=</span><span class="s">"d"</span>
        <span class="na">prism:ViewModelLocator.AutoWireViewModel=</span><span class="s">"True"</span>
        <span class="na">Title=</span><span class="s">"MainWindow"</span> <span class="na">Width=</span><span class="s">"800"</span> <span class="na">Height=</span><span class="s">"450"</span> <span class="na">FontSize=</span><span class="s">"40"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;Grid&gt;</span>
        <span class="nt">&lt;TextBlock</span> <span class="na">Text=</span><span class="s">"{Binding Text.Value}"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/Grid&gt;</span>
<span class="nt">&lt;/Window&gt;</span>
</code></pre></div>
</div>

<div class="code-frame" data-lang="csharp">
<div class="code-lang"><span class="bold">MainWindow.xaml.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">using</span> <span class="nn">System.Windows</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">PrismSample.Lib.Views</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">partial</span> <span class="k">class</span> <span class="nc">MainWindow</span> <span class="p">:</span> <span class="n">Window</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="nf">MainWindow</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="nf">InitializeComponent</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<p>Viewの<code>prism:ViewModelLocator.AutoWireViewModel="True"</code>という記述は、関連付けられたViewModelがDIコンテナ内に存在する場合、自動的に<code>DataContext</code>として登録することを指定しています。<br>
これを行なうのは<code>ViewModelLocator</code>というものです。</p>

<p>Viewの<code>TextBlock.Text</code>のBindingを<code>Text.Value</code>としている点に注意してください。<br>
以下で登場する<code>ReactiveProperty</code>から値を取得するには、<code>Value</code>プロパティを参照する必要があります。</p>

<h2>
<span id="viewmodel" class="fragment"></span><a href="#viewmodel"><i class="fa fa-link"></i></a>ViewModel</h2>

<p><code>PrismSample.Lib.ViewModels</code>に、以下の<code>MainWindowViewModel.cs</code>を作成します。</p>

<div class="code-frame" data-lang="csharp">
<div class="code-lang"><span class="bold">MainWindowViewModel.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">using</span> <span class="nn">Prism.Mvvm</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Reactive.Bindings</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">PrismSample.Lib.ViewModels</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">MainWindowViewModel</span> <span class="p">:</span> <span class="n">BindableBase</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="n">ReactiveProperty</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span> <span class="n">Text</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span> <span class="p">=</span> <span class="k">new</span> <span class="n">ReactiveProperty</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;(</span><span class="s">"Hello, Prism!"</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<p>ViewModelには<code>Prism.Mvvm.BindableBase</code>を継承させるのを忘れないでください。</p>

<p><code>Text</code>は<code>Reactive.Bindings.ReactiveProperty</code>型にしています。<br>
<code>ReactiveProperty</code>は<code>INotifyPropertyChanged</code>を実装しているため、双方向バインディングが可能です。</p>

<h2>
<span id="app" class="fragment"></span><a href="#app"><i class="fa fa-link"></i></a>App</h2>

<p><code>App.xaml.cs</code>に以下の記述を追加します。</p>

<div class="code-frame" data-lang="diff">
<div class="code-lang"><span class="bold">App.xaml.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="p">using System.Windows;
using Prism.Ioc;
</span><span class="gi">+ using Prism.Mvvm;
</span><span class="p">using Prism.Unity;
</span><span class="gi">+ using PrismSample.Lib.Views;
+ using PrismSample.Lib.ViewModels;
</span>
namespace PrismSample.App.Main
<span class="err">{</span>
    public partial class App : PrismApplication
    {
        protected override Window CreateShell()
        {
            return Container.Resolve&lt;MainWindow&gt;();
        }

        protected override void RegisterTypes(IContainerRegistry containerRegistry)
        {
        }

+         protected override void ConfigureViewModelLocator()
<span class="gi">+         {
+             base.ConfigureViewModelLocator();
+ 
+             ViewModelLocationProvider.Register&lt;MainWindow , MainWindowViewModel&gt;();
+         }
</span>    }
<span class="err">}</span>
</code></pre></div>
</div>

<p><code>ConfigureViewModelLocator</code>メソッド内で、ViewとViewModelを関連付けています。</p>

<h2>
<span id="実行-1" class="fragment"></span><a href="#%E5%AE%9F%E8%A1%8C-1"><i class="fa fa-link"></i></a>実行</h2>

<div class="code-frame" data-lang="powershell">
<div class="code-lang"><span class="bold">PowerShell</span></div>
<div class="highlight"><pre class="with-code"><code><span class="err">&gt;</span><span class="w"> </span><span class="n">dotnet</span><span class="w"> </span><span class="nx">run</span><span class="w"> </span><span class="nt">-p</span><span class="w"> </span><span class="o">.</span><span class="nx">\PrismSample.App.Main\</span><span class="w">
</span></code></pre></div>
</div>

<p><a href="https://camo.qiitausercontent.com/3f90b74307f65e195906ea9a1036962f9ca77a7d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f35333636382f66366635353033382d643430652d316235612d316437362d3732343834636239623132362e6a706567" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F53668%2Ff6f55038-d40e-1b5a-1d76-72484cb9b126.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=643b22144b7008539be88595bfbf080a" alt="hello-window.jpg" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/53668/f6f55038-d40e-1b5a-1d76-72484cb9b126.jpeg" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F53668%2Ff6f55038-d40e-1b5a-1d76-72484cb9b126.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=bc2963658825ca0ce482211aaed14cb9 1x" loading="lazy"></a></p>

<p><code>MainWindow</code>と<code>MainWindowViewModel</code>が関連付けられています。</p>

<h1>
<span id="regionの表示" class="fragment"></span><a href="#region%E3%81%AE%E8%A1%A8%E7%A4%BA"><i class="fa fa-link"></i></a>Regionの表示</h1>

<h2>
<span id="view-1" class="fragment"></span><a href="#view-1"><i class="fa fa-link"></i></a>View</h2>

<p>前述の<code>N^2</code>を求めるための表示領域を用意します。<br>
<code>N</code>の値を入力するほうを<code>OperandView</code>、計算結果を表示するほうを<code>AnswerView</code>とします。</p>

<div class="code-frame" data-lang="xml">
<div class="code-lang"><span class="bold">OperandView.xaml</span></div>
<div class="highlight"><pre class="with-code"><code><span class="nt">&lt;UserControl</span> <span class="na">x:Class=</span><span class="s">"PrismSample.Lib.Views.OperandView"</span>
        <span class="na">xmlns=</span><span class="s">"http://schemas.microsoft.com/winfx/2006/xaml/presentation"</span>
        <span class="na">xmlns:x=</span><span class="s">"http://schemas.microsoft.com/winfx/2006/xaml"</span>
        <span class="na">xmlns:d=</span><span class="s">"http://schemas.microsoft.com/expression/blend/2008"</span>
        <span class="na">xmlns:mc=</span><span class="s">"http://schemas.openxmlformats.org/markup-compatibility/2006"</span>
        <span class="na">xmlns:prism=</span><span class="s">"http://prismlibrary.com/"</span>
        <span class="na">xmlns:local=</span><span class="s">"clr-namespace:PrismSample.Lib.Views"</span>
        <span class="na">mc:Ignorable=</span><span class="s">"d"</span>
        <span class="na">prism:ViewModelLocator.AutoWireViewModel=</span><span class="s">"True"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;Grid&gt;</span>
        <span class="nt">&lt;Grid.RowDefinitions&gt;</span>
            <span class="nt">&lt;RowDefinition/&gt;</span>
            <span class="nt">&lt;RowDefinition</span> <span class="na">Height=</span><span class="s">"Auto"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/Grid.RowDefinitions&gt;</span>
        <span class="nt">&lt;Grid</span> <span class="na">Grid.Row=</span><span class="s">"0"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;Grid.ColumnDefinitions&gt;</span>
                <span class="nt">&lt;ColumnDefinition</span> <span class="na">Width=</span><span class="s">"Auto"</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;ColumnDefinition/&gt;</span>
            <span class="nt">&lt;/Grid.ColumnDefinitions&gt;</span>
            <span class="nt">&lt;TextBlock</span> <span class="na">Grid.Column=</span><span class="s">"0"</span> <span class="na">Text=</span><span class="s">"N ="</span>
                <span class="na">HorizontalAlignment=</span><span class="s">"Left"</span> <span class="na">VerticalAlignment=</span><span class="s">"Center"</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;TextBox</span> <span class="na">Grid.Column=</span><span class="s">"1"</span>
                <span class="na">HorizontalAlignment=</span><span class="s">"Stretch"</span> <span class="na">VerticalAlignment=</span><span class="s">"Center"</span>
                <span class="na">Text=</span><span class="s">"{Binding Operand.Value, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/Grid&gt;</span>
        <span class="nt">&lt;Button</span> <span class="na">Grid.Row=</span><span class="s">"1"</span> <span class="na">Content=</span><span class="s">"Show Dialog"</span>
            <span class="na">Command=</span><span class="s">"{Binding ShowDialogCommand}"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/Grid&gt;</span>
<span class="nt">&lt;/UserControl&gt;</span>
</code></pre></div>
</div>

<div class="code-frame" data-lang="csharp">
<div class="code-lang"><span class="bold">OperandView.xaml.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">using</span> <span class="nn">System.Windows.Controls</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">PrismSample.Lib.Views</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">partial</span> <span class="k">class</span> <span class="nc">OperandView</span> <span class="p">:</span> <span class="n">UserControl</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="nf">OperandView</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="nf">InitializeComponent</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<div class="code-frame" data-lang="xml">
<div class="code-lang"><span class="bold">Answer.xaml</span></div>
<div class="highlight"><pre class="with-code"><code><span class="nt">&lt;UserControl</span> <span class="na">x:Class=</span><span class="s">"PrismSample.Lib.Views.AnswerView"</span>
        <span class="na">xmlns=</span><span class="s">"http://schemas.microsoft.com/winfx/2006/xaml/presentation"</span>
        <span class="na">xmlns:x=</span><span class="s">"http://schemas.microsoft.com/winfx/2006/xaml"</span>
        <span class="na">xmlns:d=</span><span class="s">"http://schemas.microsoft.com/expression/blend/2008"</span>
        <span class="na">xmlns:mc=</span><span class="s">"http://schemas.openxmlformats.org/markup-compatibility/2006"</span>
        <span class="na">xmlns:prism=</span><span class="s">"http://prismlibrary.com/"</span>
        <span class="na">xmlns:local=</span><span class="s">"clr-namespace:PrismSample.Lib.Views"</span>
        <span class="na">mc:Ignorable=</span><span class="s">"d"</span>
        <span class="na">prism:ViewModelLocator.AutoWireViewModel=</span><span class="s">"True"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;Grid&gt;</span>
        <span class="nt">&lt;Grid.RowDefinitions&gt;</span>
            <span class="nt">&lt;RowDefinition/&gt;</span>
            <span class="nt">&lt;RowDefinition</span> <span class="na">Height=</span><span class="s">"Auto"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/Grid.RowDefinitions&gt;</span>
        <span class="nt">&lt;Grid</span> <span class="na">Grid.Row=</span><span class="s">"0"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;Grid.ColumnDefinitions&gt;</span>
                <span class="nt">&lt;ColumnDefinition</span> <span class="na">Width=</span><span class="s">"Auto"</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;ColumnDefinition/&gt;</span>
            <span class="nt">&lt;/Grid.ColumnDefinitions&gt;</span>
            <span class="nt">&lt;TextBlock</span> <span class="na">Grid.Column=</span><span class="s">"0"</span> <span class="na">Text=</span><span class="s">"N^2 ="</span>
                <span class="na">HorizontalAlignment=</span><span class="s">"Left"</span> <span class="na">VerticalAlignment=</span><span class="s">"Center"</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;TextBlock</span> <span class="na">Grid.Column=</span><span class="s">"1"</span>
                <span class="na">HorizontalAlignment=</span><span class="s">"Left"</span> <span class="na">VerticalAlignment=</span><span class="s">"Center"</span>
                <span class="na">Text=</span><span class="s">"{Binding Answer.Value}"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/Grid&gt;</span>
        <span class="nt">&lt;Button</span> <span class="na">Grid.Row=</span><span class="s">"1"</span> <span class="na">Content=</span><span class="s">"Show Dialog"</span>
            <span class="na">Command=</span><span class="s">"{Binding ShowDialogCommand}"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/Grid&gt;</span>
<span class="nt">&lt;/UserControl&gt;</span>
</code></pre></div>
</div>

<div class="code-frame" data-lang="csharp">
<div class="code-lang"><span class="bold">AnswerView.xaml.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">using</span> <span class="nn">System.Windows.Controls</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">PrismSample.Lib.Views</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">partial</span> <span class="k">class</span> <span class="nc">AnswerView</span> <span class="p">:</span> <span class="n">UserControl</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="nf">AnswerView</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="nf">InitializeComponent</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<h2>
<span id="viewmodel-1" class="fragment"></span><a href="#viewmodel-1"><i class="fa fa-link"></i></a>ViewModel</h2>

<p>上で作成したViewに対応するViewModelを作成します。</p>

<div class="code-frame" data-lang="csharp">
<div class="code-lang"><span class="bold">OpearndViewModel.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.ComponentModel.DataAnnotations</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Prism.Mvvm</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Reactive.Bindings</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">PrismSample.Lib.ViewModels</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">OperandViewModel</span> <span class="p">:</span> <span class="n">BindableBase</span>
    <span class="p">{</span>
        <span class="p">[</span><span class="n">Required</span><span class="p">,</span> <span class="nf">Range</span><span class="p">(-</span><span class="m">10000</span><span class="p">,</span> <span class="m">10000</span><span class="p">)]</span>
        <span class="k">public</span> <span class="n">ReactiveProperty</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span> <span class="n">Operand</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>

        <span class="k">public</span> <span class="nf">OperandViewModel</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="n">Operand</span> <span class="p">=</span> <span class="k">new</span> <span class="n">ReactiveProperty</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;(</span><span class="s">"2"</span><span class="p">)</span>
                <span class="p">.</span><span class="nf">SetValidateAttribute</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="n">Operand</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<div class="code-frame" data-lang="csharp">
<div class="code-lang"><span class="bold">AnswerViewModel.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">using</span> <span class="nn">Prism.Mvvm</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Reactive.Bindings</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">PrismSample.Lib.ViewModels</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">AnswerViewModel</span> <span class="p">:</span> <span class="n">BindableBase</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="n">ReactiveProperty</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span> <span class="n">Answer</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>

        <span class="k">public</span> <span class="nf">AnswerViewModel</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="n">Answer</span> <span class="p">=</span> <span class="k">new</span> <span class="n">ReactiveProperty</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;(</span><span class="s">"4"</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<p>まだ計算機能はありません。<br>
<code>SetValidateAttribute</code>メソッドは、<code>System.ComponentModel.DataAnnotations</code>の属性から、対応するエラーが存在するかどうかを検出可能にします。</p>

<h2>
<span id="mainwindowにregionを確保" class="fragment"></span><a href="#mainwindow%E3%81%ABregion%E3%82%92%E7%A2%BA%E4%BF%9D"><i class="fa fa-link"></i></a>MainWindowにRegionを確保</h2>

<p>先程のViewを表示するためのRegionを<code>MainWindow</code>に作成します。</p>

<div class="code-frame" data-lang="xml">
<div class="code-lang"><span class="bold">MainWindow.xaml</span></div>
<div class="highlight"><pre class="with-code"><code><span class="nt">&lt;Window</span> <span class="na">x:Class=</span><span class="s">"PrismSample.Lib.Views.MainWindow"</span>
        <span class="na">xmlns=</span><span class="s">"http://schemas.microsoft.com/winfx/2006/xaml/presentation"</span>
        <span class="na">xmlns:x=</span><span class="s">"http://schemas.microsoft.com/winfx/2006/xaml"</span>
        <span class="na">xmlns:d=</span><span class="s">"http://schemas.microsoft.com/expression/blend/2008"</span>
        <span class="na">xmlns:mc=</span><span class="s">"http://schemas.openxmlformats.org/markup-compatibility/2006"</span>
        <span class="na">xmlns:prism=</span><span class="s">"http://prismlibrary.com/"</span>
        <span class="na">xmlns:local=</span><span class="s">"clr-namespace:PrismSample.Lib.Views"</span>
        <span class="na">mc:Ignorable=</span><span class="s">"d"</span>
        <span class="na">prism:ViewModelLocator.AutoWireViewModel=</span><span class="s">"True"</span>
        <span class="na">Title=</span><span class="s">"MainWindow"</span> <span class="na">Width=</span><span class="s">"800"</span> <span class="na">Height=</span><span class="s">"450"</span> <span class="na">FontSize=</span><span class="s">"40"</span>
        <span class="na">Loaded=</span><span class="s">"OnLoaded"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;Grid&gt;</span>
        <span class="nt">&lt;Grid.ColumnDefinitions&gt;</span>
            <span class="nt">&lt;ColumnDefinition/&gt;</span>
            <span class="nt">&lt;ColumnDefinition/&gt;</span>
        <span class="nt">&lt;/Grid.ColumnDefinitions&gt;</span>
        <span class="nt">&lt;ContentControl</span> <span class="na">Grid.Column=</span><span class="s">"0"</span> <span class="na">Margin=</span><span class="s">"20"</span>
            <span class="na">prism:RegionManager.RegionName=</span><span class="s">"OperandRegion"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;ContentControl</span> <span class="na">Grid.Column=</span><span class="s">"1"</span> <span class="na">Margin=</span><span class="s">"20"</span>
            <span class="na">prism:RegionManager.RegionName=</span><span class="s">"AnswerRegion"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/Grid&gt;</span>
<span class="nt">&lt;/Window&gt;</span>
</code></pre></div>
</div>

<p><code>prism:RegionManager.RegionName</code>にRegionの名前を指定します。</p>

<h2>
<span id="regionにviewを追加" class="fragment"></span><a href="#region%E3%81%ABview%E3%82%92%E8%BF%BD%E5%8A%A0"><i class="fa fa-link"></i></a>RegionにViewを追加</h2>

<p><code>MainWindow</code>のコードビハインドを修正します。</p>

<div class="code-frame" data-lang="csharp">
<div class="code-lang"><span class="bold">MainWindow.xaml.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">using</span> <span class="nn">System.Windows</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Prism.Ioc</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Prism.Regions</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Unity.Attributes</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">PrismSample.Lib.Views</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">partial</span> <span class="k">class</span> <span class="nc">MainWindow</span> <span class="p">:</span> <span class="n">Window</span>
    <span class="p">{</span>
        <span class="p">[</span><span class="n">Dependency</span><span class="p">]</span>
        <span class="k">public</span> <span class="n">IContainerExtension</span> <span class="n">ContainerExtension</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>

        <span class="p">[</span><span class="n">Dependency</span><span class="p">]</span>
        <span class="k">public</span> <span class="n">IRegionManager</span> <span class="n">RegionManager</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>

        <span class="k">public</span> <span class="nf">MainWindow</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="nf">InitializeComponent</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="k">public</span> <span class="k">void</span> <span class="nf">OnLoaded</span><span class="p">(</span><span class="kt">object</span> <span class="n">sender</span><span class="p">,</span> <span class="n">RoutedEventArgs</span> <span class="n">e</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">RegionManager</span><span class="p">.</span><span class="nf">AddToRegion</span><span class="p">(</span><span class="s">"OperandRegion"</span><span class="p">,</span> <span class="n">ContainerExtension</span><span class="p">.</span><span class="n">Resolve</span><span class="p">&lt;</span><span class="n">OperandView</span><span class="p">&gt;());</span>
            <span class="n">RegionManager</span><span class="p">.</span><span class="nf">AddToRegion</span><span class="p">(</span><span class="s">"AnswerRegion"</span> <span class="p">,</span> <span class="n">ContainerExtension</span><span class="p">.</span><span class="n">Resolve</span><span class="p">&lt;</span><span class="n">AnswerView</span><span class="p">&gt;());</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<p>Regionの追加に必要な<code>Prism.Ioc.IContainerExtension</code>と<code>Prism.Regions.IRegionManager</code>を、DIにより取得しています。<br>
これは、セッターインジェクションという手法で、<code>Unity.Attributes.Dependency</code>属性をセッターに付加することで実現します。</p>

<h2>
<span id="viewとviewmodelの関連付け" class="fragment"></span><a href="#view%E3%81%A8viewmodel%E3%81%AE%E9%96%A2%E9%80%A3%E4%BB%98%E3%81%91"><i class="fa fa-link"></i></a>ViewとViewModelの関連付け</h2>

<p>先程と同様に、<code>App.xaml.cs</code>の<code>ConfigureViewModelLocator</code>メソッドでViewとViewModelを関連付けを行ないます。</p>

<div class="code-frame" data-lang="diff">
<div class="code-lang"><span class="bold">App.xaml.cs</span></div>
<div class="highlight"><pre class="with-code"><code>        protected override void ConfigureViewModelLocator()
        {
            base.ConfigureViewModelLocator();

            ViewModelLocationProvider.Register&lt;MainWindow , MainWindowViewModel&gt;();
<span class="gi">+             ViewModelLocationProvider.Register&lt;OperandView, OperandViewModel   &gt;();
+             ViewModelLocationProvider.Register&lt;AnswerView , AnswerViewModel    &gt;();
</span>        }
</code></pre></div>
</div>

<h2>
<span id="実行-2" class="fragment"></span><a href="#%E5%AE%9F%E8%A1%8C-2"><i class="fa fa-link"></i></a>実行</h2>

<div class="code-frame" data-lang="powershell">
<div class="code-lang"><span class="bold">PowerShell</span></div>
<div class="highlight"><pre class="with-code"><code><span class="err">&gt;</span><span class="w"> </span><span class="n">dotnet</span><span class="w"> </span><span class="nx">run</span><span class="w"> </span><span class="nt">-p</span><span class="w"> </span><span class="o">.</span><span class="nx">\PrismSample.App.Main\</span><span class="w">
</span></code></pre></div>
</div>

<p><a href="https://camo.qiitausercontent.com/d738e437c584ddf364b06d8a963fad492b135380/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f35333636382f64393934623138392d633065612d616363362d366138662d6664633336313036656438622e6a706567" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F53668%2Fd994b189-c0ea-acc6-6a8f-fdc36106ed8b.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=42ba1c0e68d6790cc628ed7050ec53df" alt="complete-window.jpg" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/53668/d994b189-c0ea-acc6-6a8f-fdc36106ed8b.jpeg" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F53668%2Fd994b189-c0ea-acc6-6a8f-fdc36106ed8b.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=8d22ee9bee546ce1a4b0c3ffc9c06b62 1x" loading="lazy"></a></p>

<p>Regionに2つのViewが表示されました。</p>

<h1>
<span id="eventaggregatorによるviewmodel間通信" class="fragment"></span><a href="#eventaggregator%E3%81%AB%E3%82%88%E3%82%8Bviewmodel%E9%96%93%E9%80%9A%E4%BF%A1"><i class="fa fa-link"></i></a>EventAggregatorによるViewModel間通信</h1>

<h2>
<span id="viewmodel-2" class="fragment"></span><a href="#viewmodel-2"><i class="fa fa-link"></i></a>ViewModel</h2>

<p>EventAggregatorは、PubSubパターンでイベントの通知と購読を管理することで、ViewModel間の通信を実現します。<br>
EventAggregatorは、ViewModelが自動生成される際にDIにより取得可能です。<br>
先程と同様、セッターインジェクションで取得できますが、ここではコンストラクタインジェクションで取得してみましょう。</p>

<p><code>OperandViewModel</code>と<code>AnswerViewModel</code>を改変します。</p>

<div class="code-frame" data-lang="csharp">
<div class="code-lang"><span class="bold">OperandViewModel.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.ComponentModel.DataAnnotations</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Reactive.Linq</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Prism.Events</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Prism.Mvvm</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Reactive.Bindings</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">PrismSample.Lib.ViewModels</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">OperandViewModel</span> <span class="p">:</span> <span class="n">BindableBase</span>
    <span class="p">{</span>
        <span class="p">[</span><span class="n">Required</span><span class="p">,</span> <span class="nf">Range</span><span class="p">(-</span><span class="m">10000</span><span class="p">,</span> <span class="m">10000</span><span class="p">)]</span>
        <span class="k">public</span> <span class="n">ReactiveProperty</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span> <span class="n">Operand</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>

        <span class="k">public</span> <span class="nf">OperandViewModel</span><span class="p">(</span><span class="n">IEventAggregator</span> <span class="n">eventAggregator</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">Operand</span> <span class="p">=</span> <span class="k">new</span> <span class="n">ReactiveProperty</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;(</span><span class="s">"2"</span><span class="p">)</span>
                <span class="p">.</span><span class="nf">SetValidateAttribute</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="n">Operand</span><span class="p">);</span>

            <span class="n">Observable</span><span class="p">.</span><span class="nf">WithLatestFrom</span>
            <span class="p">(</span>
                <span class="n">Operand</span><span class="p">,</span>
                <span class="n">Operand</span><span class="p">.</span><span class="n">ObserveHasErrors</span><span class="p">,</span>
                <span class="p">(</span><span class="n">o</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">(</span><span class="n">o</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
            <span class="p">)</span>
            <span class="p">.</span><span class="nf">Where</span><span class="p">(</span><span class="n">z</span> <span class="p">=&gt;</span> <span class="p">!</span><span class="n">z</span><span class="p">.</span><span class="n">e</span><span class="p">)</span>
            <span class="p">.</span><span class="nf">Subscribe</span><span class="p">(</span><span class="n">z</span> <span class="p">=&gt;</span>
            <span class="p">{</span>
                <span class="n">eventAggregator</span>
                    <span class="p">.</span><span class="n">GetEvent</span><span class="p">&lt;</span><span class="n">PubSubEvent</span><span class="p">&lt;</span><span class="kt">double</span><span class="p">&gt;&gt;()</span>
                    <span class="p">.</span><span class="nf">Publish</span><span class="p">(</span><span class="kt">double</span><span class="p">.</span><span class="nf">Parse</span><span class="p">(</span><span class="n">z</span><span class="p">.</span><span class="n">o</span><span class="p">));</span>
            <span class="p">});</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<div class="code-frame" data-lang="csharp">
<div class="code-lang"><span class="bold">AnswerViewModel.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">using</span> <span class="nn">Prism.Events</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Prism.Mvvm</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Reactive.Bindings</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Unity.Attributes</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">PrismSample.Lib.ViewModels</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">AnswerViewModel</span> <span class="p">:</span> <span class="n">BindableBase</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="n">ReactiveProperty</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span> <span class="n">Answer</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>

        <span class="k">public</span> <span class="n">ReactiveCommand</span><span class="p">&lt;</span><span class="kt">object</span><span class="p">&gt;</span> <span class="n">ShowDialogCommand</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>

        <span class="k">public</span> <span class="nf">AnswerViewModel</span><span class="p">(</span><span class="n">IEventAggregator</span> <span class="n">eventAggregator</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">Answer</span> <span class="p">=</span> <span class="k">new</span> <span class="n">ReactiveProperty</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;(</span><span class="s">"4"</span><span class="p">);</span>

            <span class="n">eventAggregator</span>
                <span class="p">.</span><span class="n">GetEvent</span><span class="p">&lt;</span><span class="n">PubSubEvent</span><span class="p">&lt;</span><span class="kt">double</span><span class="p">&gt;&gt;()</span>
                <span class="p">.</span><span class="nf">Subscribe</span><span class="p">(</span><span class="n">CalculateAnswer</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">private</span> <span class="k">void</span> <span class="nf">CalculateAnswer</span><span class="p">(</span><span class="kt">double</span> <span class="n">operand</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">Answer</span><span class="p">.</span><span class="n">Value</span> <span class="p">=</span> <span class="p">(</span><span class="n">operand</span> <span class="p">*</span> <span class="n">operand</span><span class="p">).</span><span class="nf">ToString</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<p>コンストラクタの引数にEventAggregatorが注入されます。</p>

<p><code>GetEvent&lt;PubSubEvent&lt;double&gt;&gt;</code>メソッドにより、<code>double</code>型のイベントを取得し、<code>Publish</code>で値を発行、<code>Subscribe</code>で発行された値を購読します。<br>
ここでは<code>double</code>型を使用していますが、EventAggregatorは複数のViewModelで共有されるため、通信用に独自の型を定義した方が良いかもしれません。</p>

<p>この<code>Subscribe</code>はちょっとくせ者で、購読メソッドを<strong>弱参照</strong>するという特徴があります。<br>
なぜなら、強参照を持ってしまうと参照の依存関係が生じ、後々解放する必要が出てくるからです。<br>
弱参照にしておけば、その手間が省けるのですが、代わりに注意すべきことがあります。</p>

<p>以下のように、</p>

<div class="code-frame" data-lang="csharp"><div class="highlight"><pre class="with-code"><code><span class="n">eventAggregator</span>
    <span class="p">.</span><span class="n">GetEvent</span><span class="p">&lt;</span><span class="n">PubSubEvent</span><span class="p">&lt;</span><span class="kt">double</span><span class="p">&gt;&gt;()</span>
    <span class="p">.</span><span class="nf">Subscribe</span><span class="p">(</span><span class="n">o</span> <span class="p">=&gt;</span> <span class="n">Answer</span><span class="p">.</span><span class="n">Value</span> <span class="p">=</span> <span class="p">(</span><span class="n">o</span> <span class="p">*</span> <span class="n">o</span><span class="p">).</span><span class="nf">ToString</span><span class="p">(););</span>
</code></pre></div></div>

<p>と、ラムダ式を使って購読した場合、このラムダ式はこの場で生成され、誰も参照を持っていない宙ぶらりんの状態になります。<br>
そうすると、GCにより回収の対象になってしまいます。<br>
結果、イベントが通知されない！ ということになります。<br>
ですから、ここはラムダ式を使わず、メソッドへの参照を直接指定しましょう。</p>

<div class="code-frame" data-lang="csharp"><div class="highlight"><pre class="with-code"><code><span class="n">eventAggregator</span>
    <span class="p">.</span><span class="n">GetEvent</span><span class="p">&lt;</span><span class="n">PubSubEvent</span><span class="p">&lt;</span><span class="kt">double</span><span class="p">&gt;&gt;()</span>
    <span class="p">.</span><span class="nf">Subscribe</span><span class="p">(</span><span class="n">CalculateAnswer</span><span class="p">);</span>
</code></pre></div></div>

<h2>
<span id="実行-3" class="fragment"></span><a href="#%E5%AE%9F%E8%A1%8C-3"><i class="fa fa-link"></i></a>実行</h2>

<div class="code-frame" data-lang="powershell">
<div class="code-lang"><span class="bold">PowerShell</span></div>
<div class="highlight"><pre class="with-code"><code><span class="err">&gt;</span><span class="w"> </span><span class="n">dotnet</span><span class="w"> </span><span class="nx">run</span><span class="w"> </span><span class="nt">-p</span><span class="w"> </span><span class="o">.</span><span class="nx">\PrismSample.App.Main\</span><span class="w">
</span></code></pre></div>
</div>

<p><a href="https://camo.qiitausercontent.com/c8aac587a3f8c3dd0eb3f994a737b30456865889/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f35333636382f34353238353037352d653534342d323035362d653033382d3137623237663435613439392e6a706567" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F53668%2F45285075-e544-2056-e038-17b27f45a499.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=c39610e03feade851c0d34f281aa6080" alt="complete-window2.jpg" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/53668/45285075-e544-2056-e038-17b27f45a499.jpeg" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F53668%2F45285075-e544-2056-e038-17b27f45a499.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=ebcfe8f22019170e229084803da3a5b4 1x" loading="lazy"></a></p>

<p>ViewModel間で値のやり取りができています。</p>

<h1>
<span id="modelの追加" class="fragment"></span><a href="#model%E3%81%AE%E8%BF%BD%E5%8A%A0"><i class="fa fa-link"></i></a>Modelの追加</h1>

<h2>
<span id="model" class="fragment"></span><a href="#model"><i class="fa fa-link"></i></a>Model</h2>

<p><code>N^2</code>の計算をModelに持たせるようにしてみましょう。<br>
テスト可能なコードにするために、インターフェイスも用意しておきます。</p>

<div class="code-frame" data-lang="csharp">
<div class="code-lang"><span class="bold">IModel.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">namespace</span> <span class="nn">PrismSample.Lib.Models</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">interface</span> <span class="nc">IModel</span>
    <span class="p">{</span>
        <span class="kt">double</span> <span class="nf">Calculate</span><span class="p">(</span><span class="kt">double</span> <span class="n">operand</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<div class="code-frame" data-lang="csharp">
<div class="code-lang"><span class="bold">Model.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">namespace</span> <span class="nn">PrismSample.Lib.Models</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">Model</span> <span class="p">:</span> <span class="n">IModel</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="kt">double</span> <span class="nf">Calculate</span><span class="p">(</span><span class="kt">double</span> <span class="n">operand</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="n">operand</span> <span class="p">*</span> <span class="n">operand</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<h2>
<span id="app-1" class="fragment"></span><a href="#app-1"><i class="fa fa-link"></i></a>App</h2>

<p><code>IModel</code>と<code>Model</code>を関連付けておきましょう。</p>

<div class="code-frame" data-lang="diff">
<div class="code-lang"><span class="bold">App.xaml.cs</span></div>
<div class="highlight"><pre class="with-code"><code>        protected override void RegisterTypes(IContainerRegistry containerRegistry)
        {
<span class="gi">+             containerRegistry.Register&lt;IModel, Model&gt;();
</span>        }
</code></pre></div>
</div>

<h2>
<span id="viewmodel-3" class="fragment"></span><a href="#viewmodel-3"><i class="fa fa-link"></i></a>ViewModel</h2>

<p><code>IModel</code>をインジェクションします。</p>

<div class="code-frame" data-lang="diff">
<div class="code-lang"><span class="bold">AnswerViewModel.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="gi">+        [Dependency]
+        public IModel Model { get; set; }
</span>
+         private void CalculateAnswer(double operand)
<span class="gi">+         {
+             Answer.Value = Model.Calculate(operand).ToString();
+         }
</span></code></pre></div>
</div>

<h2>
<span id="実行-4" class="fragment"></span><a href="#%E5%AE%9F%E8%A1%8C-4"><i class="fa fa-link"></i></a>実行</h2>

<div class="code-frame" data-lang="powershell">
<div class="code-lang"><span class="bold">PowerShell</span></div>
<div class="highlight"><pre class="with-code"><code><span class="err">&gt;</span><span class="w"> </span><span class="n">dotnet</span><span class="w"> </span><span class="nx">run</span><span class="w"> </span><span class="nt">-p</span><span class="w"> </span><span class="o">.</span><span class="nx">\PrismSample.App.Main\</span><span class="w">
</span></code></pre></div>
</div>

<p><a href="https://camo.qiitausercontent.com/4eff0d2fa27492cd2be51325ae57eaa64f78062f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f35333636382f35363138346237622d623639622d383662622d353163322d3638656437353634323435662e6a706567" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F53668%2F56184b7b-b69b-86bb-51c2-68ed7564245f.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=1f9810d9857187a1427cd07eb1b8ebe0" alt="complete-window2.jpg" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/53668/56184b7b-b69b-86bb-51c2-68ed7564245f.jpeg" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F53668%2F56184b7b-b69b-86bb-51c2-68ed7564245f.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=16c9464f9e159887049c96893a6de71f 1x" loading="lazy"></a></p>

<p>Modelによる計算ができています。</p>

<h1>
<span id="dialog" class="fragment"></span><a href="#dialog"><i class="fa fa-link"></i></a>Dialog</h1>

<p>Dialogの表示に関しては、<code>Prism 7.2</code>以降では<code>Prism.Services.Dialogs.IDialogService</code>を使用します。<br>
しかし、メッセージダイアログをちょっと表示したいだけ、という場合、使い勝手は良くないです（DialgのViewとViewModelを自分で書かなくてはいけない）。</p>

<p>本記事では利便性を重視して、<code>WPF</code>標準の<code>MessageBox</code>を使用する方法をご紹介します。</p>

<h2>
<span id="view-2" class="fragment"></span><a href="#view-2"><i class="fa fa-link"></i></a>View</h2>

<div class="code-frame" data-lang="csharp">
<div class="code-lang"><span class="bold">IDialogHelper.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">using</span> <span class="nn">System.Windows</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">PrismSample.Lib.Views</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">enum</span> <span class="n">DialogButton</span>
    <span class="p">{</span>
        <span class="n">OK</span>          <span class="p">=</span> <span class="n">MessageBoxButton</span><span class="p">.</span><span class="n">OK</span><span class="p">,</span>
        <span class="n">OKCancel</span>    <span class="p">=</span> <span class="n">MessageBoxButton</span><span class="p">.</span><span class="n">OKCancel</span><span class="p">,</span>
        <span class="n">YesNo</span>       <span class="p">=</span> <span class="n">MessageBoxButton</span><span class="p">.</span><span class="n">YesNo</span><span class="p">,</span>
        <span class="n">YesNoCancel</span> <span class="p">=</span> <span class="n">MessageBoxButton</span><span class="p">.</span><span class="n">YesNoCancel</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">enum</span> <span class="n">DialogImage</span>
    <span class="p">{</span>
        <span class="n">None</span>        <span class="p">=</span> <span class="n">MessageBoxImage</span><span class="p">.</span><span class="n">None</span><span class="p">,</span>
        <span class="n">Information</span> <span class="p">=</span> <span class="n">MessageBoxImage</span><span class="p">.</span><span class="n">Information</span><span class="p">,</span>
        <span class="n">Question</span>    <span class="p">=</span> <span class="n">MessageBoxImage</span><span class="p">.</span><span class="n">Question</span><span class="p">,</span>
        <span class="n">Warning</span>     <span class="p">=</span> <span class="n">MessageBoxImage</span><span class="p">.</span><span class="n">Warning</span><span class="p">,</span>
        <span class="n">Error</span>       <span class="p">=</span> <span class="n">MessageBoxImage</span><span class="p">.</span><span class="n">Error</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">enum</span> <span class="n">DialogResult</span>
    <span class="p">{</span>
        <span class="n">None</span>   <span class="p">=</span> <span class="n">MessageBoxResult</span><span class="p">.</span><span class="n">None</span><span class="p">,</span>
        <span class="n">OK</span>     <span class="p">=</span> <span class="n">MessageBoxResult</span><span class="p">.</span><span class="n">OK</span><span class="p">,</span>
        <span class="n">Cancel</span> <span class="p">=</span> <span class="n">MessageBoxResult</span><span class="p">.</span><span class="n">Cancel</span><span class="p">,</span>
        <span class="n">Yes</span>    <span class="p">=</span> <span class="n">MessageBoxResult</span><span class="p">.</span><span class="n">Yes</span><span class="p">,</span>
        <span class="n">No</span>     <span class="p">=</span> <span class="n">MessageBoxResult</span><span class="p">.</span><span class="n">No</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">interface</span> <span class="nc">IDialogHelper</span>
    <span class="p">{</span>
        <span class="n">DialogResult</span> <span class="nf">ShowDialog</span>
        <span class="p">(</span>
            <span class="kt">string</span> <span class="n">message</span><span class="p">,</span>
            <span class="kt">string</span> <span class="n">caption</span>      <span class="p">=</span> <span class="s">"Information"</span><span class="p">,</span>
            <span class="n">DialogButton</span> <span class="n">button</span> <span class="p">=</span> <span class="n">DialogButton</span><span class="p">.</span><span class="n">OK</span><span class="p">,</span>
            <span class="n">DialogImage</span>  <span class="n">image</span>  <span class="p">=</span> <span class="n">DialogImage</span><span class="p">.</span><span class="n">None</span>
        <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<div class="code-frame" data-lang="csharp">
<div class="code-lang"><span class="bold">DialogHelper.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">using</span> <span class="nn">System.Windows</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">PrismSample.Lib.Views</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">DialogHelper</span> <span class="p">:</span> <span class="n">IDialogHelper</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="n">DialogResult</span> <span class="nf">ShowDialog</span>
        <span class="p">(</span>
            <span class="kt">string</span> <span class="n">message</span><span class="p">,</span>
            <span class="kt">string</span> <span class="n">caption</span><span class="p">,</span>
            <span class="n">DialogButton</span> <span class="n">button</span><span class="p">,</span>
            <span class="n">DialogImage</span>  <span class="n">image</span>
        <span class="p">)</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="p">(</span><span class="n">DialogResult</span><span class="p">)</span><span class="n">MessageBox</span><span class="p">.</span><span class="nf">Show</span>
            <span class="p">(</span>
                <span class="n">message</span><span class="p">,</span>
                <span class="n">caption</span><span class="p">,</span>
                <span class="p">(</span><span class="n">MessageBoxButton</span><span class="p">)</span><span class="n">button</span><span class="p">,</span>
                <span class="p">(</span><span class="n">MessageBoxImage</span> <span class="p">)</span><span class="n">image</span>
            <span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<p>Dialogの表示は思いっきり副作用なので、インターフェイスを定義しておきます。<br>
今回は<code>PrismSample.Lib.Views</code>内に上記2つを定義しましたが、インターフェイスを別プロジェクトに分けることで、<code>ViewModels</code>から<code>Views</code>への参照を無くすることもできます。</p>

<h2>
<span id="viewmodel-4" class="fragment"></span><a href="#viewmodel-4"><i class="fa fa-link"></i></a>ViewModel</h2>

<p>Dialogを表示するコマンドを、<code>Reactive.Bindings.ReactiveCommand</code>を使用して書きます。</p>

<div class="code-frame" data-lang="csharp">
<div class="code-lang"><span class="bold">OperandViewModel</span></div>
<div class="highlight"><pre class="with-code"><code>        <span class="p">[</span><span class="n">Dependency</span><span class="p">]</span>
        <span class="k">public</span> <span class="n">IDialogHelper</span> <span class="n">DialogHelper</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>

        <span class="k">public</span> <span class="n">ReactiveCommand</span><span class="p">&lt;</span><span class="kt">object</span><span class="p">&gt;</span> <span class="n">ShowDialogCommand</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>

        <span class="c1">// コンストラクタ内</span>
        <span class="n">ShowDialogCommand</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">ReactiveCommand</span><span class="p">(</span><span class="n">Operand</span><span class="p">.</span><span class="n">ObserveHasErrors</span><span class="p">.</span><span class="nf">Select</span><span class="p">(</span><span class="n">x</span> <span class="p">=&gt;</span> <span class="p">!</span><span class="n">x</span><span class="p">))</span>
                <span class="p">.</span><span class="nf">WithSubscribe</span><span class="p">(</span><span class="n">_</span> <span class="p">=&gt;</span> <span class="n">DialogHelper</span><span class="p">.</span><span class="nf">ShowDialog</span><span class="p">(</span><span class="s">$"N = </span><span class="p">{</span><span class="n">Operand</span><span class="p">.</span><span class="n">Value</span><span class="p">}</span><span class="s">"</span><span class="p">));</span>
</code></pre></div>
</div>

<div class="code-frame" data-lang="csharp">
<div class="code-lang"><span class="bold">AnswerViewModel</span></div>
<div class="highlight"><pre class="with-code"><code>        <span class="p">[</span><span class="n">Dependency</span><span class="p">]</span>
        <span class="k">public</span> <span class="n">IDialogHelper</span> <span class="n">DialogHelper</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>

        <span class="k">public</span> <span class="n">ReactiveCommand</span><span class="p">&lt;</span><span class="kt">object</span><span class="p">&gt;</span> <span class="n">ShowDialogCommand</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>

        <span class="c1">// コンストラクタ内</span>
        <span class="n">ShowDialogCommand</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">ReactiveCommand</span><span class="p">()</span>
                <span class="p">.</span><span class="nf">WithSubscribe</span><span class="p">(</span><span class="n">_</span> <span class="p">=&gt;</span> <span class="n">DialogHelper</span><span class="p">.</span><span class="nf">ShowDialog</span><span class="p">(</span><span class="s">$"N^2 = </span><span class="p">{</span><span class="n">Answer</span><span class="p">.</span><span class="n">Value</span><span class="p">}</span><span class="s">"</span><span class="p">));</span>
</code></pre></div>
</div>

<p><code>OperandViewModel</code>内で<code>ReactiveCommand</code>のコンストラクタに渡しているのは、<code>IObservable&lt;bool&gt;</code>です。<br>
これは、<code>WPF</code>の<code>ICommand</code>における<code>CanExecute</code>と<code>CanExecuteChanged</code>を制御し、コマンドが実行可能かどうかを自動的に反映するようにしてくれるものです。</p>

<p><code>AnswerViewModel</code>では、<code>ReactiveCommand</code>のコンストラクタに引数を渡していませんが、これは常に実行可能なコマンドを生成します。</p>

<h2>
<span id="app-2" class="fragment"></span><a href="#app-2"><i class="fa fa-link"></i></a>App</h2>

<p><code>IDialogHelper</code>と<code>DialogHelper</code>の関係性を登録します。</p>

<div class="code-frame" data-lang="diff">
<div class="code-lang"><span class="bold">App.xaml</span></div>
<div class="highlight"><pre class="with-code"><code>        protected override void RegisterTypes(IContainerRegistry containerRegistry)
        {
<span class="gi">+             containerRegistry.Register&lt;IDialogHelper, DialogHelper&gt;();
</span>            containerRegistry.Register&lt;IModel, Model&gt;();
        }
</code></pre></div>
</div>

<h2>
<span id="実行-5" class="fragment"></span><a href="#%E5%AE%9F%E8%A1%8C-5"><i class="fa fa-link"></i></a>実行</h2>

<div class="code-frame" data-lang="powershell">
<div class="code-lang"><span class="bold">PowerShell</span></div>
<div class="highlight"><pre class="with-code"><code><span class="err">&gt;</span><span class="w"> </span><span class="n">dotnet</span><span class="w"> </span><span class="nx">run</span><span class="w"> </span><span class="nt">-p</span><span class="w"> </span><span class="o">.</span><span class="nx">\PrismSample.App.Main\</span><span class="w">
</span></code></pre></div>
</div>

<p><a href="https://camo.qiitausercontent.com/5df9afbdddb366d2d3ab570eaab2578496ca6b62/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f35333636382f61336532353565642d653731642d326636392d323563622d3736363265333066383465312e6a706567" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F53668%2Fa3e255ed-e71d-2f69-25cb-7662e30f84e1.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=816a82967d0eeab0f3914aba23ed5ef5" alt="dialog.jpg" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/53668/a3e255ed-e71d-2f69-25cb-7662e30f84e1.jpeg" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F53668%2Fa3e255ed-e71d-2f69-25cb-7662e30f84e1.jpeg?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=16b293e1d43e45334c561fc0de50d2a2 1x" loading="lazy"></a></p>

<p>Dialogが表示できました。</p>

<h1>
<span id="まとめ" class="fragment"></span><a href="#%E3%81%BE%E3%81%A8%E3%82%81"><i class="fa fa-link"></i></a>まとめ</h1>

<p>無駄に長文になってしまいました。<br>
本記事の内容をまとめます。</p>

<ul>
<li>
<code>Prism.Unity</code>と<code>ReactiveProperty</code>をインストール。</li>
<li>
<code>App.xaml</code>を、<code>prism:PrismApplication</code>を使用するように変更。</li>
<li>
<code>App.xaml.cs</code>の<code>CreateShell</code>で<code>MainWindow</code>を返す。</li>
<li>
<code>App.xaml.cs</code>の<code>RegisterTypes</code>でDIコンテナに型を登録。</li>
<li>
<code>App.xaml.cs</code>の<code>ConfigureViewModelLocator</code>でViewとViewModelの関連を登録。</li>
<li>ViewModelには<code>BindableBase</code>を継承させる。</li>
<li>DIコンテナからインスタンスを生成する場合、コンストラクタインジェクションまたはセッターインジェクションで、登録された型のインスタンスを取得可能。</li>
<li>EventAggregatorを使用してViewModel間の通信が可能。</li>
<li>EventAggregatorは、コールバックを弱参照することに注意。</li>
<li>Dialogの表示を<code>Prism</code>でやるのは大変なので、ヘルパークラスを定義。</li>
<li>
<code>ReactiveProperty</code>と<code>ReactiveCommand</code>で、ViewModelのプロパティを便利に管理。</li>
</ul>

<p>以上です。<br>
ありがとうございました。</p>
</div></div></section><div class="css-1yzj1fm"><div class="css-1uv1qiv"><span class="fa fa-twitter"></span></div><div class="css-1uv1qiv"><span class="fa fa-facebook"></span></div></div><div class="apm-Content"><div class="apm-Content_title">Why not register and get more from Qiita?</div><ol class="apm-Content_list"><li>We will deliver articles that match you<div class="description">By following users and tags, you can catch up information on technical fields that you are interested in as a whole</div></li><li>you can read useful information later efficiently<div class="description">By &quot;stocking&quot; the articles you like, you can search right away</div></li><div><a class="apm-Content_help" href="https://help.qiita.com/ja/articles/qiita-login-user" target="_blank"><i class="fa fa-fw fa-arrow-circle-right"></i>What you can do with signing up</a></div></ol><a href="/signup?callback_action=login_or_signup&amp;redirect_to=%2Fhiki_neet_p%2Fitems%2Fe04b5ac692aa18df0968&amp;realm=qiita" class="apm-Content_button apm-Content_button-signup">Sign up</a><a href="/login?callback_action=login_or_signup&amp;redirect_to=%2Fhiki_neet_p%2Fitems%2Fe04b5ac692aa18df0968&amp;realm=qiita" class="apm-Content_button apm-Content_button-signin">Login</a></div></div><div class="css-helsa7"></div></div></div></div><div class="css-109dbrr"><div class="css-5jpx49"><div class="css-mnxgyc"><button class=" css-1vlpknv"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/hiki_neet_p/items/e04b5ac692aa18df0968/likers" class="css-1iupg5d">169</a></div><div class="css-fsjkhv"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-1b17vb0">207</span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-7i7f4d"><div class="css-1gj7nt">Improve article</div><a href="/drafts/e04b5ac692aa18df0968/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/hiki_neet_p/items/e04b5ac692aa18df0968/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/hiki_neet_p/items/e04b5ac692aa18df0968/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/hiki_neet_p/items/e04b5ac692aa18df0968/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/hiki_neet_p/items/e04b5ac692aa18df0968.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="PersonalArticlePage" data-dom-id="PersonalArticlePage-react-component-476bfa98-77ab-4869-bfa7-667c0166b2e5">{"authorAnalyticsTrackingId":null,"organizationAnalyticsTrackingId":null}</script>
      
<footer id="globalFooter" class="st-Footer"><div class="st-Footer_container"><div class="st-Footer_start"><div class="st-Footer_logo"><svg viewbox="0 0 426.57 130" xmlns="http://www.w3.org/2000/svg"><circle cx="167.08" cy="21.4" r="12.28" /><path d="M250.81 29.66h23.48v18.9h-23.48z" /><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z" /><circle cx="216.33" cy="21.4" r="12.28" /></svg></div><div class="st-Footer_catchcopy">How developers code is here.</div><div class="st-Footer_socials"><a class="fa fa-twitter" href="https://twitter.com/qiita"></a><a class="fa fa-facebook-square" href="https://www.facebook.com/qiita/"></a></div></div><div class="st-Footer_end"><div class="st-Footer_qiita"><div class="st-Footer_label">Qiita</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="/about">About</a><a href="/terms">Terms</a><a href="/privacy">Privacy</a><a target="_blank" href="http://help.qiita.com/ja/articles/qiita-community-guideline">Guideline</a><a target="_blank" href="https://help.qiita.com/ja/articles/others-brand-guideline">Design Guideline</a></div><div class="st-Footer_column"><a href="/release-notes">Release</a><a href="/api/v2/docs">API</a><a href="/feedback/new">ご意見</a><a href="https://help.qiita.com">Help</a><a target="_blank" href="https://qiita.com/ads?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Advertisement</a></div></div></div><div class="st-Footer_increments"><div class="st-Footer_label">Increments</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="https://increments.co.jp/company/">About</a><a href="https://increments.co.jp/jobs/">採用情報</a><a href="https://blog.qiita.com">Blog</a></div><div class="st-Footer_column"><a href="https://teams.qiita.com/">Qiita Team</a><a href="https://jobs.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Jobs</a><a href="https://zine.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Zine</a></div></div></div></div></div><div class="st-Footer_copyright">© 2011-2021 Increments Inc.</div></footer><div id="Snackbar-react-component-b75ef1ff-1acc-41f0-b62a-6f48d8a08eee"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="Snackbar" data-dom-id="Snackbar-react-component-b75ef1ff-1acc-41f0-b62a-6f48d8a08eee">{}</script>
      
<div id="LoginModal-react-component-06f81211-883c-4e2e-aa07-898ef1205388"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="LoginModal" data-dom-id="LoginModal-react-component-06f81211-883c-4e2e-aa07-898ef1205388">{}</script>
      
<div id="StockModal-react-component-71dbb68f-8734-468d-a66d-9ac23417d210"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="StockModal" data-dom-id="StockModal-react-component-71dbb68f-8734-468d-a66d-9ac23417d210">{}</script>
      
</div><div id="dataContainer" style="display: none;" data-config="{&quot;actionPath&quot;:&quot;public/items#show&quot;,&quot;settings&quot;:{&quot;analyticsTrackingId&quot;:&quot;UA-24675221-12&quot;,&quot;assetsMap&quot;:{},&quot;csrfToken&quot;:&quot;bBG24aQrIWk2HbnoySv2X1ciZ8N3BzjpyNE5/7wqaIrv/cvAf0wqT+BW0oPJZKPb291GKBVLpbZbF9J9Ms3SaA==&quot;,&quot;locale&quot;:&quot;en&quot;},&quot;currentUser&quot;:null}" /></body></html><script type="application/json" data-js-react-on-rails-store="AppStoreWithReactOnRails">{"snackbar":{"type":"","body":"","isActive":false},"article":{"article":{"body":"\n\u003ch1\u003e\n\u003cspan id=\"はじめに\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eはじめに\u003c/h1\u003e\n\n\u003cp\u003e本記事は、3年前に書いた以下の記事を大幅に見直して書き改めたものです。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://qiita.com/hiki_neet_p/items/e381c687b0644c0e4978\" id=\"reference-ed3cc5801a966a31eaaa\"\u003ePrismとReactivePropertyで簡単MVVM！\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e上記の記事は、私の古い認識のもとに書き上げられました。\u003cbr\u003e\n私の当時の認識で、\u003ccode\u003ePrism\u003c/code\u003eの機能のごく一部を使って\u003ccode\u003eWPF\u003c/code\u003eアプリケーションを構成することが「簡単」だと思っていましたが、時が過ぎ、その認識が変化しました。\u003cbr\u003e\n即ち、\u003ccode\u003ePrism\u003c/code\u003eの機能にもう少し乗っかった方が、結果的に「簡単」だと思い直したのです。\u003cbr\u003e\nまた、当時の未熟さから、誤った考えのもとに書かれた部分も見受けられます。\u003cbr\u003e\n古い記事に「いいね」をいただく度、そのことをお伝えし直したいという気持ちになっていましたが、この度、執筆するやる気を確保できましたので、本記事を投稿するに至りました。\u003c/p\u003e\n\n\u003cp\u003e\u003ccode\u003ePrism\u003c/code\u003eの機能は多彩ですが、本記事では覚えておくと開発が簡単になる、効果の高い部分のみをピックアップしてお伝えできればなと思います。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"net-core-30\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#net-core-30\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003ccode\u003e.NET Core 3.0\u003c/code\u003e\n\u003c/h2\u003e\n\n\u003cp\u003e今まで、\u003ccode\u003eWPF\u003c/code\u003eは\u003ccode\u003e.NET Framework\u003c/code\u003e固有のものでした。\u003cbr\u003e\nしかし、2019年秋にリリースされるであろう\u003ccode\u003e.NET Core 3.0\u003c/code\u003eには、新たに\u003ccode\u003eWPF\u003c/code\u003eの機能が乗せられており、\u003ccode\u003e.NET Framework\u003c/code\u003eと同じように\u003ccode\u003eWPF\u003c/code\u003eアプリケーションを作成できるようになります。\u003c/p\u003e\n\n\u003cp\u003e世間では、\u003ccode\u003eJavascript\u003c/code\u003eを中心に、新たなGUIフレームワークが台頭しつつありますが、まだ\u003ccode\u003eWPF\u003c/code\u003eの人口も残っているのではないでしょうか。\u003c/p\u003e\n\n\u003cp\u003e本記事の執筆時点では正式リリースがまだですが、以下では\u003ccode\u003e.NET Core 3.0-preview\u003c/code\u003eを使用し、簡単な\u003ccode\u003eWPF\u003c/code\u003eのサンプルアプリの作成を通して、\u003ccode\u003ePrism\u003c/code\u003eと\u003ccode\u003eReactiveProperty\u003c/code\u003eの使用方法をご紹介します。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"本記事の開発環境\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%9C%AC%E8%A8%98%E4%BA%8B%E3%81%AE%E9%96%8B%E7%99%BA%E7%92%B0%E5%A2%83\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e本記事の開発環境\u003c/h1\u003e\n\n\u003cul\u003e\n\u003cli\u003eWindows 10 Home\u003c/li\u003e\n\u003cli\u003edotnetcore-sdk 3.0.100-preview5-011568\u003c/li\u003e\n\u003cli\u003ePrism.Unity 7.2.0.1233-pre\u003c/li\u003e\n\u003cli\u003eReactiveProperty 5.5.1\u003c/li\u003e\n\u003cli\u003eVisual Studio Code\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"github\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#github\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eGitHub\u003c/h1\u003e\n\n\u003cp\u003e\u003cqiita-embed-ogp src=\"https://github.com/tana-gh/PrismSample\"\u003e\u003c/qiita-embed-ogp\u003e\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"各ライブラリについて\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%90%84%E3%83%A9%E3%82%A4%E3%83%96%E3%83%A9%E3%83%AA%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e各ライブラリについて\u003c/h1\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"prismについて\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#prism%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003ccode\u003ePrism\u003c/code\u003eについて\u003c/h2\u003e\n\n\u003cp\u003e\u003ccode\u003eNuget\u003c/code\u003eを見ると、\u003ccode\u003ePrism\u003c/code\u003e関連のパッケージがたくさんあります。\u003cbr\u003e\nここで、各パッケージの意味を見てみましょう。\u003c/p\u003e\n\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003eパッケージ名\u003c/th\u003e\n\u003cth\u003e説明\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003ePrism.Core\u003c/td\u003e\n\u003ctd\u003e前提パッケージ\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003c/td\u003e\n\u003ctd\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003ePrism.Wpf\u003c/td\u003e\n\u003ctd\u003eWPF用パッケージ\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003ePrism.Forms\u003c/td\u003e\n\u003ctd\u003eXamarin用パッケージ\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003c/td\u003e\n\u003ctd\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003ePrism.Autofac\u003c/td\u003e\n\u003ctd\u003eWPF用（Autofac使用）\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003ePrism.DryIoc\u003c/td\u003e\n\u003ctd\u003eWPF用（DryIoc使用）\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003ePrism.Mef\u003c/td\u003e\n\u003ctd\u003eWPF用（Mef使用）\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003ePrism.Ninject\u003c/td\u003e\n\u003ctd\u003eWPF用（Ninject使用）\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003ePrism.StructureMap\u003c/td\u003e\n\u003ctd\u003eWPF用（StructureMap使用）\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003ePrism.Unity\u003c/td\u003e\n\u003ctd\u003eWPF用（Unity使用）\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003c/td\u003e\n\u003ctd\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003ePrism.Autofac.Forms\u003c/td\u003e\n\u003ctd\u003eXamarin用（Autofac使用）\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003ePrism.DryIoc.Forms\u003c/td\u003e\n\u003ctd\u003eXamarin用（DryIoc使用）\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003ePrism.Unity.Forms\u003c/td\u003e\n\u003ctd\u003eXamarin用（Unity使用）\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\n\u003cp\u003e\u003ccode\u003ePrism.Core\u003c/code\u003eは前提パッケージで、プラットフォーム共通の機能が入っています。\u003cbr\u003e\n\u003ccode\u003ePrism.Wpf\u003c/code\u003eと\u003ccode\u003ePrism.Forms\u003c/code\u003eは、それぞれ\u003ccode\u003eWPF\u003c/code\u003e用と\u003ccode\u003eXamarin\u003c/code\u003e用です。\u003cbr\u003e\nその下の6つのパッケージは\u003ccode\u003eWPF\u003c/code\u003e用で、DIコンテナとしてそれぞれの外部パッケージを使用するものです。\u003cbr\u003e\n最後の3つは\u003ccode\u003eXamarin\u003c/code\u003e用で、DIコンテナとしてそれぞれの外部パッケージを使用します。\u003c/p\u003e\n\n\u003cp\u003e\u003ccode\u003eWPF\u003c/code\u003eアプリを作るうえでは、\u003ccode\u003eWPF\u003c/code\u003e用でコンテナありの6つの中から選択することになります。\u003cbr\u003e\n今回は、\u003ccode\u003e.NET Core\u003c/code\u003e対応ありで公式サンプルにも使用されている、\u003ccode\u003ePrism.Unity\u003c/code\u003eを使用します。\u003c/p\u003e\n\n\u003cp\u003e\u003ccode\u003ePrism.Unity\u003c/code\u003eは\u003ccode\u003ePrism.Wpf\u003c/code\u003eに依存し、\u003ccode\u003ePrism.Wpf\u003c/code\u003eは\u003ccode\u003ePrism.Core\u003c/code\u003eに依存するので、\u003ccode\u003ePrism.Unity\u003c/code\u003eだけインストールすれば大丈夫です。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"unityについて\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#unity%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003ccode\u003eUnity\u003c/code\u003eについて\u003c/h2\u003e\n\n\u003cp\u003e\u003ccode\u003eUnity\u003c/code\u003eはDI（依存性の注入）ライブラリです。\u003cbr\u003e\n\u003ccode\u003eUnity\u003c/code\u003eという同名のゲームエンジンが存在しますが、全く関係はありません。\u003cbr\u003e\nDIライブラリは沢山ありますが、\u003ccode\u003eC#\u003c/code\u003eにおいてはこの\u003ccode\u003eUnity\u003c/code\u003eが有名どころです。\u003c/p\u003e\n\n\u003cp\u003e\u003ccode\u003ePrism.Unity\u003c/code\u003eは\u003ccode\u003eUnity\u003c/code\u003eに依存するので、\u003ccode\u003ePrism.Unity\u003c/code\u003eだけインストールするようにしましょう。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"prism-samples-wpf\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#prism-samples-wpf\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003ccode\u003ePrism-Samples-Wpf\u003c/code\u003e\n\u003c/h2\u003e\n\n\u003cp\u003e\u003ccode\u003ePrism.Unity\u003c/code\u003eを使用した、公式サンプルです。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://github.com/PrismLibrary/Prism-Samples-Wpf\" rel=\"nofollow noopener\" target=\"_blank\"\u003ePrism-Samples-Wpf\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e29種類のサンプルがあり、各サンプルは非常に小さなプロジェクトから構成されているので、簡単に機能の把握ができます。\u003c/p\u003e\n\n\u003cp\u003e正直、このサンプルを見れば本記事で説明することはあまりありませんが、本記事では、重要な機能をかいつまんでご紹介するようにします。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"prismの機能概観\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#prism%E3%81%AE%E6%A9%9F%E8%83%BD%E6%A6%82%E8%A6%B3\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003ccode\u003ePrism\u003c/code\u003eの機能概観\u003c/h2\u003e\n\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003e機能\u003c/th\u003e\n\u003cth\u003e名前空間\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003eDIコンテナの補助\u003c/td\u003e\n\u003ctd\u003ePrism.Ioc, Prism.Unity\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eRegion\u003c/td\u003e\n\u003ctd\u003ePrism.Regions\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eNavigation\u003c/td\u003e\n\u003ctd\u003ePrism.Navigation\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eEventAggregator\u003c/td\u003e\n\u003ctd\u003ePrism.Events\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eDialog\u003c/td\u003e\n\u003ctd\u003ePrism.Services.Dialogs\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eMVVMの補助\u003c/td\u003e\n\u003ctd\u003ePrism.Mvvm\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eModule\u003c/td\u003e\n\u003ctd\u003ePrism.Modularity\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eDIコンテナの補助\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e外部のDIライブラリを使用し、自動的にクラスをコンテナに登録したり、コンストラクタインジェクション、セッターインジェクションを行ないます。\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eRegion\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e名前をつけたViewの領域に、別のViewを追加するなどの管理ができます。\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eNavigation\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eRegionのヒストリ機能や、ライフサイクル管理ができます。\u003c/li\u003e\n\u003cli\u003e本記事では扱いません。\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eEventAggregator\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eViewModelやViewのイベントをPubSubパターンで統合管理します。\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eDialog\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eダイアログの作成と呼び出しを行ないます。\u003c/li\u003e\n\u003cli\u003e\n\u003ccode\u003ePrism 7.2\u003c/code\u003eからの機能です。\u003c/li\u003e\n\u003cli\u003e本記事では扱いません。\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eMVVMの補助\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\n\u003ccode\u003eINotifyPropertyChanged\u003c/code\u003eの実装補助、コマンドの実装補助、バリデーションの実装補助を行ないます。\u003c/li\u003e\n\u003cli\u003e本記事では扱いません（\u003ccode\u003eBindableBase\u003c/code\u003eクラスが登場するのみ）。\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eModule\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e別のアセンブリにあるクラスを\u003ccode\u003ePrism\u003c/code\u003eアプリケーションに含めるために使用します。\u003c/li\u003e\n\u003cli\u003e本記事では扱いません。\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"reactivepropertyについて\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#reactiveproperty%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003ccode\u003eReactiveProperty\u003c/code\u003eについて\u003c/h2\u003e\n\n\u003cp\u003e前章の「MVVMの補助」の部分は、\u003ccode\u003ePrism\u003c/code\u003eよりも\u003ccode\u003eReactiveProperty\u003c/code\u003eに任せるほうが簡単だという認識です。\u003c/p\u003e\n\n\u003cp\u003eReactiveとは、Observerパターンによる、時系列データ（イベントなど）の監視、およびそのデータ群に対する演算（LINQのような）を扱うものです。\u003cbr\u003e\n\u003ccode\u003eSystem.Reactive\u003c/code\u003eという外部ライブラリに依存しています。\u003c/p\u003e\n\n\u003cp\u003eGUIアプリはイベントに対処しなくてはならないので、このReactiveの考え方は有効です。\u003cbr\u003e\n\u003ccode\u003eReactiveProperty\u003c/code\u003eは、主にMVVMにおけるViewModelのプロパティとコマンドを、Reactiveに扱うことを可能とします。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"サンプルプロジェクトの概要\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E6%A6%82%E8%A6%81\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eサンプルプロジェクトの概要\u003c/h1\u003e\n\n\u003cp\u003eこれから作るアプリの画面を以下に示します。\u003cbr\u003e\n数値を入力すると、2乗を計算するアプリです。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/7edfd6d2e1c19dc15e3ba23c33d7eb5f924bcb21/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f35333636382f62316266393831352d633930612d383338392d666632382d6539643730653663353234632e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F53668%2Fb1bf9815-c90a-8389-ff28-e9d70e6c524c.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=bc248451b7b97b8412a5e89fe7745c5f\" alt=\"complete-window.jpg\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/53668/b1bf9815-c90a-8389-ff28-e9d70e6c524c.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F53668%2Fb1bf9815-c90a-8389-ff28-e9d70e6c524c.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=3185dd4434fab18199cc8b5b9a1b0fd9 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e入力は即座に反映されます。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/9dd5332f3d0363646ee01168f092e10bbfa28600/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f35333636382f32396461656236362d633538652d386464332d336563392d6365636436336130633962392e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F53668%2F29daeb66-c58e-8dd3-3ec9-cecd63a0c9b9.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=0aa7ce6e0e46a95b37af7f81df16a320\" alt=\"complete-window2.jpg\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/53668/29daeb66-c58e-8dd3-3ec9-cecd63a0c9b9.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F53668%2F29daeb66-c58e-8dd3-3ec9-cecd63a0c9b9.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=d1cc5509634149105facd360657629b8 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e入力のバリデーションも行います。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/d7c9c6050c9c611fa6d9fa5d25e2a3c6755201ba/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f35333636382f66376563646432372d656663372d613566392d376537622d3432613730366431323562612e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F53668%2Ff7ecdd27-efc7-a5f9-7e7b-42a706d125ba.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=638d7e8e9074caeef5e36128287b22ff\" alt=\"invalid-window.jpg\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/53668/f7ecdd27-efc7-a5f9-7e7b-42a706d125ba.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F53668%2Ff7ecdd27-efc7-a5f9-7e7b-42a706d125ba.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=2de4baf8f780e2ee4b399686ed388097 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eボタンを押すと、ダイアログが表示されます。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/7db0cb27c5be04cda50d9c564eeefede3cee7a25/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f35333636382f36653533396230392d633334322d613532312d393538342d6265396539653238633932632e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F53668%2F6e539b09-c342-a521-9584-be9e9e28c92c.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=ebf6590b284968082bc44f120b7f249e\" alt=\"dialog.jpg\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/53668/6e539b09-c342-a521-9584-be9e9e28c92c.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F53668%2F6e539b09-c342-a521-9584-be9e9e28c92c.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=0f6f3f331655f30df1d80a47f246180a 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/d75bcfa5170d7d1576766d04d8abadd8dd740b27/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f35333636382f37663464666166352d363331372d376234622d386362302d6431356338666563303037312e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F53668%2F7f4dfaf5-6317-7b4b-8cb0-d15c8fec0071.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=efdeeda727bb5716766dfb1817660887\" alt=\"dialog2.jpg\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/53668/7f4dfaf5-6317-7b4b-8cb0-d15c8fec0071.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F53668%2F7f4dfaf5-6317-7b4b-8cb0-d15c8fec0071.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=695721d6984ae3dbcdfa98b6a484059c 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"プロジェクトの構造\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E6%A7%8B%E9%80%A0\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eプロジェクトの構造\u003c/h1\u003e\n\n\u003cp\u003eプロジェクト群を以下のように作成しました。\u003cbr\u003e\nプロジェクトを小分けにしない方が作るのは簡単ですが、今回は分けて作成しました。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"powershell\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003ePowerShell\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"c\"\u003e# ディレクトリの作成\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003cspan class=\"err\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"n\"\u003emkdir\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003ePrismSample\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003cspan class=\"err\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"n\"\u003ecd\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003ePrismSample\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\n\u003c/span\u003e\u003cspan class=\"c\"\u003e# プロジェクト群の作成\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003cspan class=\"err\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"n\"\u003edotnet\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003enew\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003esln\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003cspan class=\"err\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"n\"\u003edotnet\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003enew\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003ewpf\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nt\"\u003e-o\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003ePrismSample.App.Main\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003cspan class=\"err\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"n\"\u003edotnet\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003enew\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003eclasslib\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nt\"\u003e-o\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003ePrismSample.Lib.Views\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003cspan class=\"err\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"n\"\u003edotnet\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003enew\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003eclasslib\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nt\"\u003e-o\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003ePrismSample.Lib.ViewModels\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003cspan class=\"err\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"n\"\u003edotnet\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003enew\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003eclasslib\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nt\"\u003e-o\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003ePrismSample.Lib.Models\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\n\u003c/span\u003e\u003cspan class=\"c\"\u003e# ソリューションへの追加\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003cspan class=\"err\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"n\"\u003edotnet\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003esln\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003eadd\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e\\PrismSample.App.Main\\\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e\\PrismSample.Lib.Views\\\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e\\PrismSample.Lib.ViewModels\\\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e\\PrismSample.Lib.Models\\\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\n\u003c/span\u003e\u003cspan class=\"c\"\u003e# プロジェクト参照の追加\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003cspan class=\"err\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"n\"\u003edotnet\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003eadd\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e\\PrismSample.App.Main\\\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003ereference\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e\\PrismSample.Lib.Views\\\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003cspan class=\"err\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"n\"\u003edotnet\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003eadd\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e\\PrismSample.App.Main\\\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003ereference\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e\\PrismSample.Lib.ViewModels\\\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003cspan class=\"err\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"n\"\u003edotnet\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003eadd\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e\\PrismSample.Lib.ViewModels\\\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003ereference\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e\\PrismSample.Lib.Views\\\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003cspan class=\"err\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"n\"\u003edotnet\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003eadd\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e\\PrismSample.Lib.ViewModels\\\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003ereference\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e\\PrismSample.Lib.Models\\\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\n\u003c/span\u003e\u003cspan class=\"c\"\u003e# パッケージの追加\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003cspan class=\"err\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"n\"\u003edotnet\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003eadd\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e\\PrismSample.App.Main\\\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003epackage\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003ePrism.Unity\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nt\"\u003e-v\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003e7.2.0.1233-pre\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003cspan class=\"err\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"n\"\u003edotnet\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003eadd\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e\\PrismSample.Lib.Views\\\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003epackage\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003ePrism.Unity\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nt\"\u003e-v\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003e7.2.0.1233-pre\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003cspan class=\"err\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"n\"\u003edotnet\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003eadd\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e\\PrismSample.Lib.ViewModels\\\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003epackage\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003ePrism.Unity\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nt\"\u003e-v\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003e7.2.0.1233-pre\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003cspan class=\"err\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"n\"\u003edotnet\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003eadd\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e\\PrismSample.Lib.ViewModels\\\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003epackage\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003eReactiveProperty\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/6c1ed3c4e4c1d05eae726faa342354db778e3bda/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f35333636382f36303761623733652d323934612d376531382d643236372d3766383563666132656439332e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F53668%2F607ab73e-294a-7e18-d267-7f85cfa2ed93.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=4e63e8aa192aaecaa17d5d936f83a85e\" alt=\"initial-projects.jpg\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/53668/607ab73e-294a-7e18-d267-7f85cfa2ed93.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F53668%2F607ab73e-294a-7e18-d267-7f85cfa2ed93.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=f70fe1af9e022a1e23474b0725110056 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"csprojの修正\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#csproj%E3%81%AE%E4%BF%AE%E6%AD%A3\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003ccode\u003e.csproj\u003c/code\u003eの修正\u003c/h2\u003e\n\n\u003cp\u003e\u003ccode\u003e.NET Core 3.0\u003c/code\u003eに対応させるため、下記のように修正しました。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"xml\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003ePrismSample.Lib.Views.csproj\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"nt\"\u003e\u0026lt;Project\u003c/span\u003e \u003cspan class=\"na\"\u003eSdk=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Microsoft.NET.Sdk.WindowsDesktop\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"c\"\u003e\u0026lt;!--修正--\u0026gt;\u003c/span\u003e\n\n  \u003cspan class=\"c\"\u003e\u0026lt;!--修正--\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"nt\"\u003e\u0026lt;PropertyGroup\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;TargetFramework\u0026gt;\u003c/span\u003enetcoreapp3.0\u003cspan class=\"nt\"\u003e\u0026lt;/TargetFramework\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;UseWPF\u0026gt;\u003c/span\u003etrue\u003cspan class=\"nt\"\u003e\u0026lt;/UseWPF\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"nt\"\u003e\u0026lt;/PropertyGroup\u0026gt;\u003c/span\u003e\n\n  \u003cspan class=\"nt\"\u003e\u0026lt;ItemGroup\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;PackageReference\u003c/span\u003e \u003cspan class=\"na\"\u003eInclude=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Prism.Unity\"\u003c/span\u003e \u003cspan class=\"na\"\u003eVersion=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"7.2.0.1233-pre\"\u003c/span\u003e \u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"nt\"\u003e\u0026lt;/ItemGroup\u0026gt;\u003c/span\u003e\n\n\u003cspan class=\"nt\"\u003e\u0026lt;/Project\u0026gt;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"xml\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003ePrismSample.Lib.ViewModels.csproj\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"nt\"\u003e\u0026lt;Project\u003c/span\u003e \u003cspan class=\"na\"\u003eSdk=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Microsoft.NET.Sdk\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e\n\n  \u003cspan class=\"c\"\u003e\u0026lt;!--修正--\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"nt\"\u003e\u0026lt;PropertyGroup\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;TargetFramework\u0026gt;\u003c/span\u003enetcoreapp3.0\u003cspan class=\"nt\"\u003e\u0026lt;/TargetFramework\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"nt\"\u003e\u0026lt;/PropertyGroup\u0026gt;\u003c/span\u003e\n\n  \u003cspan class=\"nt\"\u003e\u0026lt;ItemGroup\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;PackageReference\u003c/span\u003e \u003cspan class=\"na\"\u003eInclude=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Prism.Unity\"\u003c/span\u003e \u003cspan class=\"na\"\u003eVersion=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"7.2.0.1233-pre\"\u003c/span\u003e \u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;PackageReference\u003c/span\u003e \u003cspan class=\"na\"\u003eInclude=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"ReactiveProperty\"\u003c/span\u003e \u003cspan class=\"na\"\u003eVersion=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"5.5.1\"\u003c/span\u003e \u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"nt\"\u003e\u0026lt;/ItemGroup\u0026gt;\u003c/span\u003e\n\n  \u003cspan class=\"nt\"\u003e\u0026lt;ItemGroup\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;ProjectReference\u003c/span\u003e \u003cspan class=\"na\"\u003eInclude=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"..\\PrismSample.Lib.Models\\PrismSample.Lib.Models.csproj\"\u003c/span\u003e \u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"nt\"\u003e\u0026lt;/ItemGroup\u0026gt;\u003c/span\u003e\n\n\u003cspan class=\"nt\"\u003e\u0026lt;/Project\u0026gt;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"xml\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003ePrismSample.Lib.Models.csproj\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"nt\"\u003e\u0026lt;Project\u003c/span\u003e \u003cspan class=\"na\"\u003eSdk=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Microsoft.NET.Sdk\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e\n\n  \u003cspan class=\"c\"\u003e\u0026lt;!--修正--\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"nt\"\u003e\u0026lt;PropertyGroup\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;TargetFramework\u0026gt;\u003c/span\u003enetcoreapp3.0\u003cspan class=\"nt\"\u003e\u0026lt;/TargetFramework\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"nt\"\u003e\u0026lt;/PropertyGroup\u0026gt;\u003c/span\u003e\n\n\u003cspan class=\"nt\"\u003e\u0026lt;/Project\u0026gt;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"実行方法\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AE%9F%E8%A1%8C%E6%96%B9%E6%B3%95\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e実行方法\u003c/h2\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"powershell\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003ePowerShell\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"err\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"n\"\u003edotnet\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003erun\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nt\"\u003e-p\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e\\PrismSample.App.Main\\\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003eビルドの警告が出なければ成功です。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"prismアプリケーション\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#prism%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003ccode\u003ePrism\u003c/code\u003eアプリケーション\u003c/h1\u003e\n\n\u003cp\u003e以下では、Visual Studio Codeにより編集を行ないます。\u003cbr\u003e\n執筆時点では、\u003ccode\u003eC#\u003c/code\u003eの拡張機能に不具合があり、シンタックスエラーの赤が表示される場合がありますが、コンパイルが通れば問題ありません。\u003cbr\u003e\nまた、\u003ccode\u003eXAML\u003c/code\u003eの編集機能は現時点で無いため、便利に開発したい場合はVisual Studioを使用した方が良いかもしれません。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"appxamlの編集\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#appxaml%E3%81%AE%E7%B7%A8%E9%9B%86\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003ccode\u003eApp.xaml\u003c/code\u003eの編集\u003c/h2\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"diff\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eApp.xaml\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"gd\"\u003e- \u0026lt;Application x:Class=\"PrismSample.App.Main.App\"\n\u003c/span\u003e\u003cspan class=\"gi\"\u003e+ \u0026lt;prism:PrismApplication x:Class=\"PrismSample.App.Main.App\"\n\u003c/span\u003e             xmlns=\"http://schemas.microsoft.com/winfx/2006/xaml/presentation\"\n             xmlns:x=\"http://schemas.microsoft.com/winfx/2006/xaml\"\n\u003cspan class=\"gi\"\u003e+              xmlns:prism=\"http://prismlibrary.com/\"\n\u003c/span\u003e             xmlns:local=\"clr-namespace:PrismSample.App.Main\"\n\u003cspan class=\"gd\"\u003e-              StartupUri=\"MainWindow.xaml\"\u0026gt;\n\u003c/span\u003e    \u0026lt;Application.Resources\u0026gt;\n\n    \u0026lt;/Application.Resources\u0026gt;\n\u003cspan class=\"gd\"\u003e- \u0026lt;/Application\u0026gt;\n\u003c/span\u003e\u003cspan class=\"gi\"\u003e+ \u0026lt;/prism:PrismApplication\u0026gt;\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e標準の\u003ccode\u003eApplication\u003c/code\u003eクラスを\u003ccode\u003ePrismApplication\u003c/code\u003eクラスに置き換えています。\u003cbr\u003e\nまた、\u003ccode\u003eStartupUri\u003c/code\u003eが不要になっています。\u003c/p\u003e\n\n\u003cp\u003eこの作業により、ビルド時に自動生成される\u003ccode\u003eApp\u003c/code\u003eクラスが\u003ccode\u003ePrismApplication\u003c/code\u003eを継承するように変化します。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"appxamlcsの編集\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#appxamlcs%E3%81%AE%E7%B7%A8%E9%9B%86\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003ccode\u003eApp.xaml.cs\u003c/code\u003eの編集\u003c/h2\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"diff\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eApp.xaml.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"gd\"\u003e- using System;\n- using System.Collections.Generic;\n- using System.Configuration;\n- using System.Data;\n- using System.Linq;\n- using System.Threading.Tasks;\n\u003c/span\u003e\u003cspan class=\"p\"\u003eusing System.Windows;\n\u003c/span\u003e\u003cspan class=\"gi\"\u003e+ using Prism.Ioc;\n+ using Prism.Unity;\n\u003c/span\u003e\nnamespace PrismSample.App.Main\n\u003cspan class=\"err\"\u003e{\u003c/span\u003e\n    /// \u0026lt;summary\u0026gt;\n    /// Interaction logic for App.xaml\n    /// \u0026lt;/summary\u0026gt;\n\u003cspan class=\"gd\"\u003e-     public partial class App : Application\n\u003c/span\u003e\u003cspan class=\"gi\"\u003e+     public partial class App : PrismApplication\n\u003c/span\u003e    {\n\u003cspan class=\"gi\"\u003e+         protected override Window CreateShell()\n+         {\n+             return Container.Resolve\u0026lt;MainWindow\u0026gt;();\n+         }\n+\n+         protected override void RegisterTypes(IContainerRegistry containerRegistry)\n+         {\n+         }\n\u003c/span\u003e    }\n\u003cspan class=\"err\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e標準の\u003ccode\u003eApplication\u003c/code\u003eではなく、\u003ccode\u003ePrism.Unity.PrismApplication\u003c/code\u003eを継承します。\u003c/p\u003e\n\n\u003cp\u003e\u003ccode\u003eCreateShell\u003c/code\u003eメソッドは、アプリケーション開始時に起動する\u003ccode\u003eWindow\u003c/code\u003eを返す必要があります。\u003cbr\u003e\nコンテナから\u003ccode\u003eMainWindow\u003c/code\u003eを生成して返しておきます。\u003cbr\u003e\nここで、何もしていないのに\u003ccode\u003eMainWindow\u003c/code\u003eがDIコンテナに登録されているのがポイントです。\u003cbr\u003e\n同じアセンブリ（プロジェクト）内のViewとViewModelが自動的に登録されるのです。\u003cbr\u003e\n\u003ccode\u003ePrism\u003c/code\u003eの便利さの本質はここに集約されるのではないでしょうか。\u003c/p\u003e\n\n\u003cp\u003eその下にある\u003ccode\u003eRegisterTypes\u003c/code\u003eメソッドは、コンテナに手動でクラスやインスタンスを登録する際に使用します。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"実行\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AE%9F%E8%A1%8C\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e実行\u003c/h2\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"powershell\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003ePowerShell\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"err\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"n\"\u003edotnet\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003erun\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nt\"\u003e-p\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e\\PrismSample.App.Main\\\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/a6d3bcca4a9c8cf64b45c9e87527a0cc37a8fe65/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f35333636382f34653337643862362d313734352d346161642d363063642d3264646333623630613735382e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F53668%2F4e37d8b6-1745-4aad-60cd-2ddc3b60a758.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=c9894cb90c3e4392a0871dcd92025d93\" alt=\"initial-window.jpg\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/53668/4e37d8b6-1745-4aad-60cd-2ddc3b60a758.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F53668%2F4e37d8b6-1745-4aad-60cd-2ddc3b60a758.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=9f78fe6765411c52f74b1cf3328c88c6 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eうまく\u003ccode\u003eMainWindow\u003c/code\u003eが表示されました。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"プロジェクトをまたいだクラスの登録\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%82%92%E3%81%BE%E3%81%9F%E3%81%84%E3%81%A0%E3%82%AF%E3%83%A9%E3%82%B9%E3%81%AE%E7%99%BB%E9%8C%B2\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eプロジェクトをまたいだクラスの登録\u003c/h1\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"view\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#view\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eView\u003c/h2\u003e\n\n\u003cp\u003e\u003ccode\u003ePrismSample.App.Main\u003c/code\u003eの\u003ccode\u003eMainWindow.xaml\u003c/code\u003eと\u003ccode\u003eMainWindow.xaml.cs\u003c/code\u003eを削除します。\u003c/p\u003e\n\n\u003cp\u003e\u003ccode\u003ePrismSample.Lib.Views\u003c/code\u003eに、以下の\u003ccode\u003eMainWindow.xaml\u003c/code\u003eと\u003ccode\u003eMainWindow.xaml.cs\u003c/code\u003eを作成します。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"xml\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eMainWindow.xaml\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"nt\"\u003e\u0026lt;Window\u003c/span\u003e \u003cspan class=\"na\"\u003ex:Class=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"PrismSample.Lib.Views.MainWindow\"\u003c/span\u003e\n        \u003cspan class=\"na\"\u003exmlns=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"http://schemas.microsoft.com/winfx/2006/xaml/presentation\"\u003c/span\u003e\n        \u003cspan class=\"na\"\u003exmlns:x=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"http://schemas.microsoft.com/winfx/2006/xaml\"\u003c/span\u003e\n        \u003cspan class=\"na\"\u003exmlns:d=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"http://schemas.microsoft.com/expression/blend/2008\"\u003c/span\u003e\n        \u003cspan class=\"na\"\u003exmlns:mc=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"http://schemas.openxmlformats.org/markup-compatibility/2006\"\u003c/span\u003e\n        \u003cspan class=\"na\"\u003exmlns:prism=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"http://prismlibrary.com/\"\u003c/span\u003e\n        \u003cspan class=\"na\"\u003exmlns:local=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"clr-namespace:PrismSample.Lib.Views\"\u003c/span\u003e\n        \u003cspan class=\"na\"\u003emc:Ignorable=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"d\"\u003c/span\u003e\n        \u003cspan class=\"na\"\u003eprism:ViewModelLocator.AutoWireViewModel=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"True\"\u003c/span\u003e\n        \u003cspan class=\"na\"\u003eTitle=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"MainWindow\"\u003c/span\u003e \u003cspan class=\"na\"\u003eWidth=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"800\"\u003c/span\u003e \u003cspan class=\"na\"\u003eHeight=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"450\"\u003c/span\u003e \u003cspan class=\"na\"\u003eFontSize=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"40\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;Grid\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"nt\"\u003e\u0026lt;TextBlock\u003c/span\u003e \u003cspan class=\"na\"\u003eText=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"{Binding Text.Value}\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;/Grid\u0026gt;\u003c/span\u003e\n\u003cspan class=\"nt\"\u003e\u0026lt;/Window\u0026gt;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eMainWindow.xaml.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem.Windows\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003enamespace\u003c/span\u003e \u003cspan class=\"nn\"\u003ePrismSample.Lib.Views\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003epartial\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eMainWindow\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eWindow\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003eMainWindow\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"nf\"\u003eInitializeComponent\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003eViewの\u003ccode\u003eprism:ViewModelLocator.AutoWireViewModel=\"True\"\u003c/code\u003eという記述は、関連付けられたViewModelがDIコンテナ内に存在する場合、自動的に\u003ccode\u003eDataContext\u003c/code\u003eとして登録することを指定しています。\u003cbr\u003e\nこれを行なうのは\u003ccode\u003eViewModelLocator\u003c/code\u003eというものです。\u003c/p\u003e\n\n\u003cp\u003eViewの\u003ccode\u003eTextBlock.Text\u003c/code\u003eのBindingを\u003ccode\u003eText.Value\u003c/code\u003eとしている点に注意してください。\u003cbr\u003e\n以下で登場する\u003ccode\u003eReactiveProperty\u003c/code\u003eから値を取得するには、\u003ccode\u003eValue\u003c/code\u003eプロパティを参照する必要があります。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"viewmodel\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#viewmodel\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eViewModel\u003c/h2\u003e\n\n\u003cp\u003e\u003ccode\u003ePrismSample.Lib.ViewModels\u003c/code\u003eに、以下の\u003ccode\u003eMainWindowViewModel.cs\u003c/code\u003eを作成します。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eMainWindowViewModel.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003ePrism.Mvvm\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eReactive.Bindings\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003enamespace\u003c/span\u003e \u003cspan class=\"nn\"\u003ePrismSample.Lib.ViewModels\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eMainWindowViewModel\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eBindableBase\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eReactiveProperty\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eText\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eReactiveProperty\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Hello, Prism!\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003eViewModelには\u003ccode\u003ePrism.Mvvm.BindableBase\u003c/code\u003eを継承させるのを忘れないでください。\u003c/p\u003e\n\n\u003cp\u003e\u003ccode\u003eText\u003c/code\u003eは\u003ccode\u003eReactive.Bindings.ReactiveProperty\u003c/code\u003e型にしています。\u003cbr\u003e\n\u003ccode\u003eReactiveProperty\u003c/code\u003eは\u003ccode\u003eINotifyPropertyChanged\u003c/code\u003eを実装しているため、双方向バインディングが可能です。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"app\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#app\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eApp\u003c/h2\u003e\n\n\u003cp\u003e\u003ccode\u003eApp.xaml.cs\u003c/code\u003eに以下の記述を追加します。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"diff\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eApp.xaml.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"p\"\u003eusing System.Windows;\nusing Prism.Ioc;\n\u003c/span\u003e\u003cspan class=\"gi\"\u003e+ using Prism.Mvvm;\n\u003c/span\u003e\u003cspan class=\"p\"\u003eusing Prism.Unity;\n\u003c/span\u003e\u003cspan class=\"gi\"\u003e+ using PrismSample.Lib.Views;\n+ using PrismSample.Lib.ViewModels;\n\u003c/span\u003e\nnamespace PrismSample.App.Main\n\u003cspan class=\"err\"\u003e{\u003c/span\u003e\n    public partial class App : PrismApplication\n    {\n        protected override Window CreateShell()\n        {\n            return Container.Resolve\u0026lt;MainWindow\u0026gt;();\n        }\n\n        protected override void RegisterTypes(IContainerRegistry containerRegistry)\n        {\n        }\n\n+         protected override void ConfigureViewModelLocator()\n\u003cspan class=\"gi\"\u003e+         {\n+             base.ConfigureViewModelLocator();\n+ \n+             ViewModelLocationProvider.Register\u0026lt;MainWindow , MainWindowViewModel\u0026gt;();\n+         }\n\u003c/span\u003e    }\n\u003cspan class=\"err\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e\u003ccode\u003eConfigureViewModelLocator\u003c/code\u003eメソッド内で、ViewとViewModelを関連付けています。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"実行-1\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AE%9F%E8%A1%8C-1\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e実行\u003c/h2\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"powershell\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003ePowerShell\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"err\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"n\"\u003edotnet\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003erun\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nt\"\u003e-p\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e\\PrismSample.App.Main\\\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/3f90b74307f65e195906ea9a1036962f9ca77a7d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f35333636382f66366635353033382d643430652d316235612d316437362d3732343834636239623132362e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F53668%2Ff6f55038-d40e-1b5a-1d76-72484cb9b126.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=643b22144b7008539be88595bfbf080a\" alt=\"hello-window.jpg\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/53668/f6f55038-d40e-1b5a-1d76-72484cb9b126.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F53668%2Ff6f55038-d40e-1b5a-1d76-72484cb9b126.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=bc2963658825ca0ce482211aaed14cb9 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003ccode\u003eMainWindow\u003c/code\u003eと\u003ccode\u003eMainWindowViewModel\u003c/code\u003eが関連付けられています。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"regionの表示\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#region%E3%81%AE%E8%A1%A8%E7%A4%BA\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eRegionの表示\u003c/h1\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"view-1\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#view-1\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eView\u003c/h2\u003e\n\n\u003cp\u003e前述の\u003ccode\u003eN^2\u003c/code\u003eを求めるための表示領域を用意します。\u003cbr\u003e\n\u003ccode\u003eN\u003c/code\u003eの値を入力するほうを\u003ccode\u003eOperandView\u003c/code\u003e、計算結果を表示するほうを\u003ccode\u003eAnswerView\u003c/code\u003eとします。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"xml\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eOperandView.xaml\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"nt\"\u003e\u0026lt;UserControl\u003c/span\u003e \u003cspan class=\"na\"\u003ex:Class=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"PrismSample.Lib.Views.OperandView\"\u003c/span\u003e\n        \u003cspan class=\"na\"\u003exmlns=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"http://schemas.microsoft.com/winfx/2006/xaml/presentation\"\u003c/span\u003e\n        \u003cspan class=\"na\"\u003exmlns:x=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"http://schemas.microsoft.com/winfx/2006/xaml\"\u003c/span\u003e\n        \u003cspan class=\"na\"\u003exmlns:d=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"http://schemas.microsoft.com/expression/blend/2008\"\u003c/span\u003e\n        \u003cspan class=\"na\"\u003exmlns:mc=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"http://schemas.openxmlformats.org/markup-compatibility/2006\"\u003c/span\u003e\n        \u003cspan class=\"na\"\u003exmlns:prism=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"http://prismlibrary.com/\"\u003c/span\u003e\n        \u003cspan class=\"na\"\u003exmlns:local=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"clr-namespace:PrismSample.Lib.Views\"\u003c/span\u003e\n        \u003cspan class=\"na\"\u003emc:Ignorable=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"d\"\u003c/span\u003e\n        \u003cspan class=\"na\"\u003eprism:ViewModelLocator.AutoWireViewModel=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"True\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;Grid\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"nt\"\u003e\u0026lt;Grid.RowDefinitions\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"nt\"\u003e\u0026lt;RowDefinition/\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"nt\"\u003e\u0026lt;RowDefinition\u003c/span\u003e \u003cspan class=\"na\"\u003eHeight=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Auto\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"nt\"\u003e\u0026lt;/Grid.RowDefinitions\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"nt\"\u003e\u0026lt;Grid\u003c/span\u003e \u003cspan class=\"na\"\u003eGrid.Row=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"0\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"nt\"\u003e\u0026lt;Grid.ColumnDefinitions\u0026gt;\u003c/span\u003e\n                \u003cspan class=\"nt\"\u003e\u0026lt;ColumnDefinition\u003c/span\u003e \u003cspan class=\"na\"\u003eWidth=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Auto\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n                \u003cspan class=\"nt\"\u003e\u0026lt;ColumnDefinition/\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"nt\"\u003e\u0026lt;/Grid.ColumnDefinitions\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"nt\"\u003e\u0026lt;TextBlock\u003c/span\u003e \u003cspan class=\"na\"\u003eGrid.Column=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"0\"\u003c/span\u003e \u003cspan class=\"na\"\u003eText=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"N =\"\u003c/span\u003e\n                \u003cspan class=\"na\"\u003eHorizontalAlignment=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Left\"\u003c/span\u003e \u003cspan class=\"na\"\u003eVerticalAlignment=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Center\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"nt\"\u003e\u0026lt;TextBox\u003c/span\u003e \u003cspan class=\"na\"\u003eGrid.Column=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"1\"\u003c/span\u003e\n                \u003cspan class=\"na\"\u003eHorizontalAlignment=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Stretch\"\u003c/span\u003e \u003cspan class=\"na\"\u003eVerticalAlignment=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Center\"\u003c/span\u003e\n                \u003cspan class=\"na\"\u003eText=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"{Binding Operand.Value, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"nt\"\u003e\u0026lt;/Grid\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"nt\"\u003e\u0026lt;Button\u003c/span\u003e \u003cspan class=\"na\"\u003eGrid.Row=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"1\"\u003c/span\u003e \u003cspan class=\"na\"\u003eContent=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Show Dialog\"\u003c/span\u003e\n            \u003cspan class=\"na\"\u003eCommand=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"{Binding ShowDialogCommand}\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;/Grid\u0026gt;\u003c/span\u003e\n\u003cspan class=\"nt\"\u003e\u0026lt;/UserControl\u0026gt;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eOperandView.xaml.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem.Windows.Controls\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003enamespace\u003c/span\u003e \u003cspan class=\"nn\"\u003ePrismSample.Lib.Views\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003epartial\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eOperandView\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eUserControl\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003eOperandView\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"nf\"\u003eInitializeComponent\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"xml\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eAnswer.xaml\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"nt\"\u003e\u0026lt;UserControl\u003c/span\u003e \u003cspan class=\"na\"\u003ex:Class=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"PrismSample.Lib.Views.AnswerView\"\u003c/span\u003e\n        \u003cspan class=\"na\"\u003exmlns=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"http://schemas.microsoft.com/winfx/2006/xaml/presentation\"\u003c/span\u003e\n        \u003cspan class=\"na\"\u003exmlns:x=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"http://schemas.microsoft.com/winfx/2006/xaml\"\u003c/span\u003e\n        \u003cspan class=\"na\"\u003exmlns:d=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"http://schemas.microsoft.com/expression/blend/2008\"\u003c/span\u003e\n        \u003cspan class=\"na\"\u003exmlns:mc=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"http://schemas.openxmlformats.org/markup-compatibility/2006\"\u003c/span\u003e\n        \u003cspan class=\"na\"\u003exmlns:prism=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"http://prismlibrary.com/\"\u003c/span\u003e\n        \u003cspan class=\"na\"\u003exmlns:local=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"clr-namespace:PrismSample.Lib.Views\"\u003c/span\u003e\n        \u003cspan class=\"na\"\u003emc:Ignorable=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"d\"\u003c/span\u003e\n        \u003cspan class=\"na\"\u003eprism:ViewModelLocator.AutoWireViewModel=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"True\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;Grid\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"nt\"\u003e\u0026lt;Grid.RowDefinitions\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"nt\"\u003e\u0026lt;RowDefinition/\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"nt\"\u003e\u0026lt;RowDefinition\u003c/span\u003e \u003cspan class=\"na\"\u003eHeight=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Auto\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"nt\"\u003e\u0026lt;/Grid.RowDefinitions\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"nt\"\u003e\u0026lt;Grid\u003c/span\u003e \u003cspan class=\"na\"\u003eGrid.Row=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"0\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"nt\"\u003e\u0026lt;Grid.ColumnDefinitions\u0026gt;\u003c/span\u003e\n                \u003cspan class=\"nt\"\u003e\u0026lt;ColumnDefinition\u003c/span\u003e \u003cspan class=\"na\"\u003eWidth=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Auto\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n                \u003cspan class=\"nt\"\u003e\u0026lt;ColumnDefinition/\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"nt\"\u003e\u0026lt;/Grid.ColumnDefinitions\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"nt\"\u003e\u0026lt;TextBlock\u003c/span\u003e \u003cspan class=\"na\"\u003eGrid.Column=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"0\"\u003c/span\u003e \u003cspan class=\"na\"\u003eText=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"N^2 =\"\u003c/span\u003e\n                \u003cspan class=\"na\"\u003eHorizontalAlignment=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Left\"\u003c/span\u003e \u003cspan class=\"na\"\u003eVerticalAlignment=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Center\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"nt\"\u003e\u0026lt;TextBlock\u003c/span\u003e \u003cspan class=\"na\"\u003eGrid.Column=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"1\"\u003c/span\u003e\n                \u003cspan class=\"na\"\u003eHorizontalAlignment=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Left\"\u003c/span\u003e \u003cspan class=\"na\"\u003eVerticalAlignment=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Center\"\u003c/span\u003e\n                \u003cspan class=\"na\"\u003eText=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"{Binding Answer.Value}\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"nt\"\u003e\u0026lt;/Grid\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"nt\"\u003e\u0026lt;Button\u003c/span\u003e \u003cspan class=\"na\"\u003eGrid.Row=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"1\"\u003c/span\u003e \u003cspan class=\"na\"\u003eContent=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Show Dialog\"\u003c/span\u003e\n            \u003cspan class=\"na\"\u003eCommand=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"{Binding ShowDialogCommand}\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;/Grid\u0026gt;\u003c/span\u003e\n\u003cspan class=\"nt\"\u003e\u0026lt;/UserControl\u0026gt;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eAnswerView.xaml.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem.Windows.Controls\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003enamespace\u003c/span\u003e \u003cspan class=\"nn\"\u003ePrismSample.Lib.Views\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003epartial\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eAnswerView\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eUserControl\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003eAnswerView\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"nf\"\u003eInitializeComponent\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"viewmodel-1\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#viewmodel-1\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eViewModel\u003c/h2\u003e\n\n\u003cp\u003e上で作成したViewに対応するViewModelを作成します。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eOpearndViewModel.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem.ComponentModel.DataAnnotations\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003ePrism.Mvvm\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eReactive.Bindings\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003enamespace\u003c/span\u003e \u003cspan class=\"nn\"\u003ePrismSample.Lib.ViewModels\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eOperandViewModel\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eBindableBase\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eRequired\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nf\"\u003eRange\u003c/span\u003e\u003cspan class=\"p\"\u003e(-\u003c/span\u003e\u003cspan class=\"m\"\u003e10000\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"m\"\u003e10000\u003c/span\u003e\u003cspan class=\"p\"\u003e)]\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eReactiveProperty\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eOperand\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003eOperandViewModel\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eOperand\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eReactiveProperty\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"2\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSetValidateAttribute\u003c/span\u003e\u003cspan class=\"p\"\u003e(()\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eOperand\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eAnswerViewModel.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003ePrism.Mvvm\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eReactive.Bindings\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003enamespace\u003c/span\u003e \u003cspan class=\"nn\"\u003ePrismSample.Lib.ViewModels\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eAnswerViewModel\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eBindableBase\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eReactiveProperty\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eAnswer\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003eAnswerViewModel\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eAnswer\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eReactiveProperty\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"4\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003eまだ計算機能はありません。\u003cbr\u003e\n\u003ccode\u003eSetValidateAttribute\u003c/code\u003eメソッドは、\u003ccode\u003eSystem.ComponentModel.DataAnnotations\u003c/code\u003eの属性から、対応するエラーが存在するかどうかを検出可能にします。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"mainwindowにregionを確保\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#mainwindow%E3%81%ABregion%E3%82%92%E7%A2%BA%E4%BF%9D\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eMainWindowにRegionを確保\u003c/h2\u003e\n\n\u003cp\u003e先程のViewを表示するためのRegionを\u003ccode\u003eMainWindow\u003c/code\u003eに作成します。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"xml\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eMainWindow.xaml\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"nt\"\u003e\u0026lt;Window\u003c/span\u003e \u003cspan class=\"na\"\u003ex:Class=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"PrismSample.Lib.Views.MainWindow\"\u003c/span\u003e\n        \u003cspan class=\"na\"\u003exmlns=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"http://schemas.microsoft.com/winfx/2006/xaml/presentation\"\u003c/span\u003e\n        \u003cspan class=\"na\"\u003exmlns:x=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"http://schemas.microsoft.com/winfx/2006/xaml\"\u003c/span\u003e\n        \u003cspan class=\"na\"\u003exmlns:d=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"http://schemas.microsoft.com/expression/blend/2008\"\u003c/span\u003e\n        \u003cspan class=\"na\"\u003exmlns:mc=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"http://schemas.openxmlformats.org/markup-compatibility/2006\"\u003c/span\u003e\n        \u003cspan class=\"na\"\u003exmlns:prism=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"http://prismlibrary.com/\"\u003c/span\u003e\n        \u003cspan class=\"na\"\u003exmlns:local=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"clr-namespace:PrismSample.Lib.Views\"\u003c/span\u003e\n        \u003cspan class=\"na\"\u003emc:Ignorable=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"d\"\u003c/span\u003e\n        \u003cspan class=\"na\"\u003eprism:ViewModelLocator.AutoWireViewModel=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"True\"\u003c/span\u003e\n        \u003cspan class=\"na\"\u003eTitle=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"MainWindow\"\u003c/span\u003e \u003cspan class=\"na\"\u003eWidth=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"800\"\u003c/span\u003e \u003cspan class=\"na\"\u003eHeight=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"450\"\u003c/span\u003e \u003cspan class=\"na\"\u003eFontSize=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"40\"\u003c/span\u003e\n        \u003cspan class=\"na\"\u003eLoaded=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"OnLoaded\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;Grid\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"nt\"\u003e\u0026lt;Grid.ColumnDefinitions\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"nt\"\u003e\u0026lt;ColumnDefinition/\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"nt\"\u003e\u0026lt;ColumnDefinition/\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"nt\"\u003e\u0026lt;/Grid.ColumnDefinitions\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"nt\"\u003e\u0026lt;ContentControl\u003c/span\u003e \u003cspan class=\"na\"\u003eGrid.Column=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"0\"\u003c/span\u003e \u003cspan class=\"na\"\u003eMargin=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"20\"\u003c/span\u003e\n            \u003cspan class=\"na\"\u003eprism:RegionManager.RegionName=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"OperandRegion\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"nt\"\u003e\u0026lt;ContentControl\u003c/span\u003e \u003cspan class=\"na\"\u003eGrid.Column=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"1\"\u003c/span\u003e \u003cspan class=\"na\"\u003eMargin=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"20\"\u003c/span\u003e\n            \u003cspan class=\"na\"\u003eprism:RegionManager.RegionName=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"AnswerRegion\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;/Grid\u0026gt;\u003c/span\u003e\n\u003cspan class=\"nt\"\u003e\u0026lt;/Window\u0026gt;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e\u003ccode\u003eprism:RegionManager.RegionName\u003c/code\u003eにRegionの名前を指定します。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"regionにviewを追加\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#region%E3%81%ABview%E3%82%92%E8%BF%BD%E5%8A%A0\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eRegionにViewを追加\u003c/h2\u003e\n\n\u003cp\u003e\u003ccode\u003eMainWindow\u003c/code\u003eのコードビハインドを修正します。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eMainWindow.xaml.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem.Windows\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003ePrism.Ioc\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003ePrism.Regions\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eUnity.Attributes\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003enamespace\u003c/span\u003e \u003cspan class=\"nn\"\u003ePrismSample.Lib.Views\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003epartial\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eMainWindow\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eWindow\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eDependency\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eIContainerExtension\u003c/span\u003e \u003cspan class=\"n\"\u003eContainerExtension\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"k\"\u003eset\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eDependency\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eIRegionManager\u003c/span\u003e \u003cspan class=\"n\"\u003eRegionManager\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"k\"\u003eset\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003eMainWindow\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"nf\"\u003eInitializeComponent\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eOnLoaded\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eobject\u003c/span\u003e \u003cspan class=\"n\"\u003esender\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eRoutedEventArgs\u003c/span\u003e \u003cspan class=\"n\"\u003ee\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eRegionManager\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAddToRegion\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"OperandRegion\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eContainerExtension\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eResolve\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eOperandView\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;());\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eRegionManager\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAddToRegion\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"AnswerRegion\"\u003c/span\u003e \u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eContainerExtension\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eResolve\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eAnswerView\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;());\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003eRegionの追加に必要な\u003ccode\u003ePrism.Ioc.IContainerExtension\u003c/code\u003eと\u003ccode\u003ePrism.Regions.IRegionManager\u003c/code\u003eを、DIにより取得しています。\u003cbr\u003e\nこれは、セッターインジェクションという手法で、\u003ccode\u003eUnity.Attributes.Dependency\u003c/code\u003e属性をセッターに付加することで実現します。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"viewとviewmodelの関連付け\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#view%E3%81%A8viewmodel%E3%81%AE%E9%96%A2%E9%80%A3%E4%BB%98%E3%81%91\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eViewとViewModelの関連付け\u003c/h2\u003e\n\n\u003cp\u003e先程と同様に、\u003ccode\u003eApp.xaml.cs\u003c/code\u003eの\u003ccode\u003eConfigureViewModelLocator\u003c/code\u003eメソッドでViewとViewModelを関連付けを行ないます。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"diff\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eApp.xaml.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e        protected override void ConfigureViewModelLocator()\n        {\n            base.ConfigureViewModelLocator();\n\n            ViewModelLocationProvider.Register\u0026lt;MainWindow , MainWindowViewModel\u0026gt;();\n\u003cspan class=\"gi\"\u003e+             ViewModelLocationProvider.Register\u0026lt;OperandView, OperandViewModel   \u0026gt;();\n+             ViewModelLocationProvider.Register\u0026lt;AnswerView , AnswerViewModel    \u0026gt;();\n\u003c/span\u003e        }\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"実行-2\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AE%9F%E8%A1%8C-2\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e実行\u003c/h2\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"powershell\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003ePowerShell\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"err\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"n\"\u003edotnet\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003erun\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nt\"\u003e-p\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e\\PrismSample.App.Main\\\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/d738e437c584ddf364b06d8a963fad492b135380/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f35333636382f64393934623138392d633065612d616363362d366138662d6664633336313036656438622e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F53668%2Fd994b189-c0ea-acc6-6a8f-fdc36106ed8b.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=42ba1c0e68d6790cc628ed7050ec53df\" alt=\"complete-window.jpg\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/53668/d994b189-c0ea-acc6-6a8f-fdc36106ed8b.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F53668%2Fd994b189-c0ea-acc6-6a8f-fdc36106ed8b.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=8d22ee9bee546ce1a4b0c3ffc9c06b62 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eRegionに2つのViewが表示されました。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"eventaggregatorによるviewmodel間通信\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#eventaggregator%E3%81%AB%E3%82%88%E3%82%8Bviewmodel%E9%96%93%E9%80%9A%E4%BF%A1\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eEventAggregatorによるViewModel間通信\u003c/h1\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"viewmodel-2\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#viewmodel-2\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eViewModel\u003c/h2\u003e\n\n\u003cp\u003eEventAggregatorは、PubSubパターンでイベントの通知と購読を管理することで、ViewModel間の通信を実現します。\u003cbr\u003e\nEventAggregatorは、ViewModelが自動生成される際にDIにより取得可能です。\u003cbr\u003e\n先程と同様、セッターインジェクションで取得できますが、ここではコンストラクタインジェクションで取得してみましょう。\u003c/p\u003e\n\n\u003cp\u003e\u003ccode\u003eOperandViewModel\u003c/code\u003eと\u003ccode\u003eAnswerViewModel\u003c/code\u003eを改変します。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eOperandViewModel.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem.ComponentModel.DataAnnotations\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem.Reactive.Linq\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003ePrism.Events\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003ePrism.Mvvm\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eReactive.Bindings\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003enamespace\u003c/span\u003e \u003cspan class=\"nn\"\u003ePrismSample.Lib.ViewModels\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eOperandViewModel\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eBindableBase\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eRequired\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nf\"\u003eRange\u003c/span\u003e\u003cspan class=\"p\"\u003e(-\u003c/span\u003e\u003cspan class=\"m\"\u003e10000\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"m\"\u003e10000\u003c/span\u003e\u003cspan class=\"p\"\u003e)]\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eReactiveProperty\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eOperand\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003eOperandViewModel\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eIEventAggregator\u003c/span\u003e \u003cspan class=\"n\"\u003eeventAggregator\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eOperand\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eReactiveProperty\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"2\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSetValidateAttribute\u003c/span\u003e\u003cspan class=\"p\"\u003e(()\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eOperand\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n            \u003cspan class=\"n\"\u003eObservable\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWithLatestFrom\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e(\u003c/span\u003e\n                \u003cspan class=\"n\"\u003eOperand\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                \u003cspan class=\"n\"\u003eOperand\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eObserveHasErrors\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eo\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ee\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eo\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ee\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWhere\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ez\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e!\u003c/span\u003e\u003cspan class=\"n\"\u003ez\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ee\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSubscribe\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ez\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"n\"\u003eeventAggregator\u003c/span\u003e\n                    \u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eGetEvent\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003ePubSubEvent\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003edouble\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026gt;()\u003c/span\u003e\n                    \u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003ePublish\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003edouble\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eParse\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ez\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eo\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e});\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eAnswerViewModel.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003ePrism.Events\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003ePrism.Mvvm\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eReactive.Bindings\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eUnity.Attributes\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003enamespace\u003c/span\u003e \u003cspan class=\"nn\"\u003ePrismSample.Lib.ViewModels\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eAnswerViewModel\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eBindableBase\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eReactiveProperty\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eAnswer\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eReactiveCommand\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eobject\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eShowDialogCommand\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003eAnswerViewModel\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eIEventAggregator\u003c/span\u003e \u003cspan class=\"n\"\u003eeventAggregator\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eAnswer\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eReactiveProperty\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"4\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n            \u003cspan class=\"n\"\u003eeventAggregator\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eGetEvent\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003ePubSubEvent\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003edouble\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026gt;()\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSubscribe\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eCalculateAnswer\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eCalculateAnswer\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003edouble\u003c/span\u003e \u003cspan class=\"n\"\u003eoperand\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eAnswer\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eValue\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eoperand\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003eoperand\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nf\"\u003eToString\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003eコンストラクタの引数にEventAggregatorが注入されます。\u003c/p\u003e\n\n\u003cp\u003e\u003ccode\u003eGetEvent\u0026lt;PubSubEvent\u0026lt;double\u0026gt;\u0026gt;\u003c/code\u003eメソッドにより、\u003ccode\u003edouble\u003c/code\u003e型のイベントを取得し、\u003ccode\u003ePublish\u003c/code\u003eで値を発行、\u003ccode\u003eSubscribe\u003c/code\u003eで発行された値を購読します。\u003cbr\u003e\nここでは\u003ccode\u003edouble\u003c/code\u003e型を使用していますが、EventAggregatorは複数のViewModelで共有されるため、通信用に独自の型を定義した方が良いかもしれません。\u003c/p\u003e\n\n\u003cp\u003eこの\u003ccode\u003eSubscribe\u003c/code\u003eはちょっとくせ者で、購読メソッドを\u003cstrong\u003e弱参照\u003c/strong\u003eするという特徴があります。\u003cbr\u003e\nなぜなら、強参照を持ってしまうと参照の依存関係が生じ、後々解放する必要が出てくるからです。\u003cbr\u003e\n弱参照にしておけば、その手間が省けるのですが、代わりに注意すべきことがあります。\u003c/p\u003e\n\n\u003cp\u003e以下のように、\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"n\"\u003eeventAggregator\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eGetEvent\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003ePubSubEvent\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003edouble\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026gt;()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSubscribe\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eo\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eAnswer\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eValue\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eo\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003eo\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nf\"\u003eToString\u003c/span\u003e\u003cspan class=\"p\"\u003e(););\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eと、ラムダ式を使って購読した場合、このラムダ式はこの場で生成され、誰も参照を持っていない宙ぶらりんの状態になります。\u003cbr\u003e\nそうすると、GCにより回収の対象になってしまいます。\u003cbr\u003e\n結果、イベントが通知されない！ ということになります。\u003cbr\u003e\nですから、ここはラムダ式を使わず、メソッドへの参照を直接指定しましょう。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"n\"\u003eeventAggregator\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eGetEvent\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003ePubSubEvent\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003edouble\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026gt;()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSubscribe\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eCalculateAnswer\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"実行-3\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AE%9F%E8%A1%8C-3\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e実行\u003c/h2\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"powershell\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003ePowerShell\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"err\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"n\"\u003edotnet\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003erun\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nt\"\u003e-p\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e\\PrismSample.App.Main\\\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/c8aac587a3f8c3dd0eb3f994a737b30456865889/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f35333636382f34353238353037352d653534342d323035362d653033382d3137623237663435613439392e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F53668%2F45285075-e544-2056-e038-17b27f45a499.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=c39610e03feade851c0d34f281aa6080\" alt=\"complete-window2.jpg\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/53668/45285075-e544-2056-e038-17b27f45a499.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F53668%2F45285075-e544-2056-e038-17b27f45a499.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=ebcfe8f22019170e229084803da3a5b4 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eViewModel間で値のやり取りができています。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"modelの追加\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#model%E3%81%AE%E8%BF%BD%E5%8A%A0\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eModelの追加\u003c/h1\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"model\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#model\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eModel\u003c/h2\u003e\n\n\u003cp\u003e\u003ccode\u003eN^2\u003c/code\u003eの計算をModelに持たせるようにしてみましょう。\u003cbr\u003e\nテスト可能なコードにするために、インターフェイスも用意しておきます。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eIModel.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003enamespace\u003c/span\u003e \u003cspan class=\"nn\"\u003ePrismSample.Lib.Models\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003einterface\u003c/span\u003e \u003cspan class=\"nc\"\u003eIModel\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003edouble\u003c/span\u003e \u003cspan class=\"nf\"\u003eCalculate\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003edouble\u003c/span\u003e \u003cspan class=\"n\"\u003eoperand\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eModel.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003enamespace\u003c/span\u003e \u003cspan class=\"nn\"\u003ePrismSample.Lib.Models\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eModel\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eIModel\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003edouble\u003c/span\u003e \u003cspan class=\"nf\"\u003eCalculate\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003edouble\u003c/span\u003e \u003cspan class=\"n\"\u003eoperand\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003eoperand\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003eoperand\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"app-1\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#app-1\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eApp\u003c/h2\u003e\n\n\u003cp\u003e\u003ccode\u003eIModel\u003c/code\u003eと\u003ccode\u003eModel\u003c/code\u003eを関連付けておきましょう。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"diff\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eApp.xaml.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e        protected override void RegisterTypes(IContainerRegistry containerRegistry)\n        {\n\u003cspan class=\"gi\"\u003e+             containerRegistry.Register\u0026lt;IModel, Model\u0026gt;();\n\u003c/span\u003e        }\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"viewmodel-3\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#viewmodel-3\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eViewModel\u003c/h2\u003e\n\n\u003cp\u003e\u003ccode\u003eIModel\u003c/code\u003eをインジェクションします。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"diff\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eAnswerViewModel.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"gi\"\u003e+        [Dependency]\n+        public IModel Model { get; set; }\n\u003c/span\u003e\n+         private void CalculateAnswer(double operand)\n\u003cspan class=\"gi\"\u003e+         {\n+             Answer.Value = Model.Calculate(operand).ToString();\n+         }\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"実行-4\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AE%9F%E8%A1%8C-4\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e実行\u003c/h2\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"powershell\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003ePowerShell\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"err\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"n\"\u003edotnet\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003erun\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nt\"\u003e-p\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e\\PrismSample.App.Main\\\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/4eff0d2fa27492cd2be51325ae57eaa64f78062f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f35333636382f35363138346237622d623639622d383662622d353163322d3638656437353634323435662e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F53668%2F56184b7b-b69b-86bb-51c2-68ed7564245f.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=1f9810d9857187a1427cd07eb1b8ebe0\" alt=\"complete-window2.jpg\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/53668/56184b7b-b69b-86bb-51c2-68ed7564245f.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F53668%2F56184b7b-b69b-86bb-51c2-68ed7564245f.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=16c9464f9e159887049c96893a6de71f 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eModelによる計算ができています。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"dialog\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#dialog\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eDialog\u003c/h1\u003e\n\n\u003cp\u003eDialogの表示に関しては、\u003ccode\u003ePrism 7.2\u003c/code\u003e以降では\u003ccode\u003ePrism.Services.Dialogs.IDialogService\u003c/code\u003eを使用します。\u003cbr\u003e\nしかし、メッセージダイアログをちょっと表示したいだけ、という場合、使い勝手は良くないです（DialgのViewとViewModelを自分で書かなくてはいけない）。\u003c/p\u003e\n\n\u003cp\u003e本記事では利便性を重視して、\u003ccode\u003eWPF\u003c/code\u003e標準の\u003ccode\u003eMessageBox\u003c/code\u003eを使用する方法をご紹介します。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"view-2\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#view-2\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eView\u003c/h2\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eIDialogHelper.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem.Windows\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003enamespace\u003c/span\u003e \u003cspan class=\"nn\"\u003ePrismSample.Lib.Views\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eenum\u003c/span\u003e \u003cspan class=\"n\"\u003eDialogButton\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eOK\u003c/span\u003e          \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eMessageBoxButton\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eOK\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eOKCancel\u003c/span\u003e    \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eMessageBoxButton\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eOKCancel\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eYesNo\u003c/span\u003e       \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eMessageBoxButton\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eYesNo\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eYesNoCancel\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eMessageBoxButton\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eYesNoCancel\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eenum\u003c/span\u003e \u003cspan class=\"n\"\u003eDialogImage\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eNone\u003c/span\u003e        \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eMessageBoxImage\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eNone\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eInformation\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eMessageBoxImage\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eInformation\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eQuestion\u003c/span\u003e    \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eMessageBoxImage\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eQuestion\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eWarning\u003c/span\u003e     \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eMessageBoxImage\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eWarning\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eError\u003c/span\u003e       \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eMessageBoxImage\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eError\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eenum\u003c/span\u003e \u003cspan class=\"n\"\u003eDialogResult\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eNone\u003c/span\u003e   \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eMessageBoxResult\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eNone\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eOK\u003c/span\u003e     \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eMessageBoxResult\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eOK\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eCancel\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eMessageBoxResult\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eCancel\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eYes\u003c/span\u003e    \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eMessageBoxResult\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eYes\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eNo\u003c/span\u003e     \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eMessageBoxResult\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eNo\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003einterface\u003c/span\u003e \u003cspan class=\"nc\"\u003eIDialogHelper\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eDialogResult\u003c/span\u003e \u003cspan class=\"nf\"\u003eShowDialog\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e(\u003c/span\u003e\n            \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003emessage\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003ecaption\u003c/span\u003e      \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"Information\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eDialogButton\u003c/span\u003e \u003cspan class=\"n\"\u003ebutton\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eDialogButton\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eOK\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eDialogImage\u003c/span\u003e  \u003cspan class=\"n\"\u003eimage\u003c/span\u003e  \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eDialogImage\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eNone\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eDialogHelper.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem.Windows\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003enamespace\u003c/span\u003e \u003cspan class=\"nn\"\u003ePrismSample.Lib.Views\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eDialogHelper\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eIDialogHelper\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eDialogResult\u003c/span\u003e \u003cspan class=\"nf\"\u003eShowDialog\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e(\u003c/span\u003e\n            \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003emessage\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003ecaption\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eDialogButton\u003c/span\u003e \u003cspan class=\"n\"\u003ebutton\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eDialogImage\u003c/span\u003e  \u003cspan class=\"n\"\u003eimage\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eDialogResult\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"n\"\u003eMessageBox\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eShow\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e(\u003c/span\u003e\n                \u003cspan class=\"n\"\u003emessage\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                \u003cspan class=\"n\"\u003ecaption\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eMessageBoxButton\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"n\"\u003ebutton\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eMessageBoxImage\u003c/span\u003e \u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"n\"\u003eimage\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003eDialogの表示は思いっきり副作用なので、インターフェイスを定義しておきます。\u003cbr\u003e\n今回は\u003ccode\u003ePrismSample.Lib.Views\u003c/code\u003e内に上記2つを定義しましたが、インターフェイスを別プロジェクトに分けることで、\u003ccode\u003eViewModels\u003c/code\u003eから\u003ccode\u003eViews\u003c/code\u003eへの参照を無くすることもできます。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"viewmodel-4\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#viewmodel-4\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eViewModel\u003c/h2\u003e\n\n\u003cp\u003eDialogを表示するコマンドを、\u003ccode\u003eReactive.Bindings.ReactiveCommand\u003c/code\u003eを使用して書きます。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eOperandViewModel\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e        \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eDependency\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eIDialogHelper\u003c/span\u003e \u003cspan class=\"n\"\u003eDialogHelper\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"k\"\u003eset\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eReactiveCommand\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eobject\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eShowDialogCommand\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"c1\"\u003e// コンストラクタ内\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eShowDialogCommand\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eReactiveCommand\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eOperand\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eObserveHasErrors\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSelect\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e!\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWithSubscribe\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003e_\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eDialogHelper\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eShowDialog\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e$\"N = \u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003eOperand\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eValue\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eAnswerViewModel\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e        \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eDependency\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eIDialogHelper\u003c/span\u003e \u003cspan class=\"n\"\u003eDialogHelper\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"k\"\u003eset\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eReactiveCommand\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eobject\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eShowDialogCommand\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"c1\"\u003e// コンストラクタ内\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eShowDialogCommand\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eReactiveCommand\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWithSubscribe\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003e_\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eDialogHelper\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eShowDialog\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e$\"N^2 = \u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003eAnswer\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eValue\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e\u003ccode\u003eOperandViewModel\u003c/code\u003e内で\u003ccode\u003eReactiveCommand\u003c/code\u003eのコンストラクタに渡しているのは、\u003ccode\u003eIObservable\u0026lt;bool\u0026gt;\u003c/code\u003eです。\u003cbr\u003e\nこれは、\u003ccode\u003eWPF\u003c/code\u003eの\u003ccode\u003eICommand\u003c/code\u003eにおける\u003ccode\u003eCanExecute\u003c/code\u003eと\u003ccode\u003eCanExecuteChanged\u003c/code\u003eを制御し、コマンドが実行可能かどうかを自動的に反映するようにしてくれるものです。\u003c/p\u003e\n\n\u003cp\u003e\u003ccode\u003eAnswerViewModel\u003c/code\u003eでは、\u003ccode\u003eReactiveCommand\u003c/code\u003eのコンストラクタに引数を渡していませんが、これは常に実行可能なコマンドを生成します。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"app-2\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#app-2\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eApp\u003c/h2\u003e\n\n\u003cp\u003e\u003ccode\u003eIDialogHelper\u003c/code\u003eと\u003ccode\u003eDialogHelper\u003c/code\u003eの関係性を登録します。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"diff\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eApp.xaml\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e        protected override void RegisterTypes(IContainerRegistry containerRegistry)\n        {\n\u003cspan class=\"gi\"\u003e+             containerRegistry.Register\u0026lt;IDialogHelper, DialogHelper\u0026gt;();\n\u003c/span\u003e            containerRegistry.Register\u0026lt;IModel, Model\u0026gt;();\n        }\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"実行-5\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AE%9F%E8%A1%8C-5\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e実行\u003c/h2\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"powershell\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003ePowerShell\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"err\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"n\"\u003edotnet\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003erun\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nt\"\u003e-p\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003e\\PrismSample.App.Main\\\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/5df9afbdddb366d2d3ab570eaab2578496ca6b62/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f35333636382f61336532353565642d653731642d326636392d323563622d3736363265333066383465312e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F53668%2Fa3e255ed-e71d-2f69-25cb-7662e30f84e1.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=816a82967d0eeab0f3914aba23ed5ef5\" alt=\"dialog.jpg\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/53668/a3e255ed-e71d-2f69-25cb-7662e30f84e1.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F53668%2Fa3e255ed-e71d-2f69-25cb-7662e30f84e1.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=16b293e1d43e45334c561fc0de50d2a2 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eDialogが表示できました。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"まとめ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%BE%E3%81%A8%E3%82%81\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eまとめ\u003c/h1\u003e\n\n\u003cp\u003e無駄に長文になってしまいました。\u003cbr\u003e\n本記事の内容をまとめます。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\n\u003ccode\u003ePrism.Unity\u003c/code\u003eと\u003ccode\u003eReactiveProperty\u003c/code\u003eをインストール。\u003c/li\u003e\n\u003cli\u003e\n\u003ccode\u003eApp.xaml\u003c/code\u003eを、\u003ccode\u003eprism:PrismApplication\u003c/code\u003eを使用するように変更。\u003c/li\u003e\n\u003cli\u003e\n\u003ccode\u003eApp.xaml.cs\u003c/code\u003eの\u003ccode\u003eCreateShell\u003c/code\u003eで\u003ccode\u003eMainWindow\u003c/code\u003eを返す。\u003c/li\u003e\n\u003cli\u003e\n\u003ccode\u003eApp.xaml.cs\u003c/code\u003eの\u003ccode\u003eRegisterTypes\u003c/code\u003eでDIコンテナに型を登録。\u003c/li\u003e\n\u003cli\u003e\n\u003ccode\u003eApp.xaml.cs\u003c/code\u003eの\u003ccode\u003eConfigureViewModelLocator\u003c/code\u003eでViewとViewModelの関連を登録。\u003c/li\u003e\n\u003cli\u003eViewModelには\u003ccode\u003eBindableBase\u003c/code\u003eを継承させる。\u003c/li\u003e\n\u003cli\u003eDIコンテナからインスタンスを生成する場合、コンストラクタインジェクションまたはセッターインジェクションで、登録された型のインスタンスを取得可能。\u003c/li\u003e\n\u003cli\u003eEventAggregatorを使用してViewModel間の通信が可能。\u003c/li\u003e\n\u003cli\u003eEventAggregatorは、コールバックを弱参照することに注意。\u003c/li\u003e\n\u003cli\u003eDialogの表示を\u003ccode\u003ePrism\u003c/code\u003eでやるのは大変なので、ヘルパークラスを定義。\u003c/li\u003e\n\u003cli\u003e\n\u003ccode\u003eReactiveProperty\u003c/code\u003eと\u003ccode\u003eReactiveCommand\u003c/code\u003eで、ViewModelのプロパティを便利に管理。\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e以上です。\u003cbr\u003e\nありがとうございました。\u003c/p\u003e\n","createdAt":"2019-06-02T03:43:50Z","elapsedYearsFromLastModifiedAt":2,"encryptedId":"+MYvh9UlVVYRlLjNzLaxgjIOkx7HIyvh--MCrDqs5F5IITwWJA--rCgs1D2uip3fkwUSimIj8Q==","isBanned":false,"isDeprecated":true,"isDestroyableByViewer":false,"isEditRequestReadableByViewer":true,"isEditRequestSendableByViewer":true,"isLikableByViewer":true,"isLikedByViewer":false,"isPublic":true,"isSlide":false,"isStockableByViewer":true,"isStockedByViewer":false,"isSubscribableByViewer":false,"isSubscribedByViewer":false,"isUpdatableByViewer":false,"isUpdated":true,"lastModifiedAt":"2019-06-02T03:50:54Z","likesCount":169,"linkUrl":"https://qiita.com/hiki_neet_p/items/e04b5ac692aa18df0968","organization":null,"originalId":913821,"stockedCount":207,"title":"【改訂版】PrismとReactivePropertyで簡単MVVM！","toc":"\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB\"\u003eはじめに\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#net-core-30\"\u003e.NET Core 3.0\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E6%9C%AC%E8%A8%98%E4%BA%8B%E3%81%AE%E9%96%8B%E7%99%BA%E7%92%B0%E5%A2%83\"\u003e本記事の開発環境\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#github\"\u003eGitHub\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%90%84%E3%83%A9%E3%82%A4%E3%83%96%E3%83%A9%E3%83%AA%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6\"\u003e各ライブラリについて\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#prism%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6\"\u003ePrismについて\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#unity%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6\"\u003eUnityについて\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#prism-samples-wpf\"\u003ePrism-Samples-Wpf\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#prism%E3%81%AE%E6%A9%9F%E8%83%BD%E6%A6%82%E8%A6%B3\"\u003ePrismの機能概観\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#reactiveproperty%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6\"\u003eReactivePropertyについて\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E6%A6%82%E8%A6%81\"\u003eサンプルプロジェクトの概要\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E6%A7%8B%E9%80%A0\"\u003eプロジェクトの構造\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#csproj%E3%81%AE%E4%BF%AE%E6%AD%A3\"\u003e.csprojの修正\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AE%9F%E8%A1%8C%E6%96%B9%E6%B3%95\"\u003e実行方法\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#prism%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3\"\u003ePrismアプリケーション\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#appxaml%E3%81%AE%E7%B7%A8%E9%9B%86\"\u003eApp.xamlの編集\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#appxamlcs%E3%81%AE%E7%B7%A8%E9%9B%86\"\u003eApp.xaml.csの編集\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AE%9F%E8%A1%8C\"\u003e実行\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%82%92%E3%81%BE%E3%81%9F%E3%81%84%E3%81%A0%E3%82%AF%E3%83%A9%E3%82%B9%E3%81%AE%E7%99%BB%E9%8C%B2\"\u003eプロジェクトをまたいだクラスの登録\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#view\"\u003eView\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#viewmodel\"\u003eViewModel\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#app\"\u003eApp\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AE%9F%E8%A1%8C-1\"\u003e実行\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#region%E3%81%AE%E8%A1%A8%E7%A4%BA\"\u003eRegionの表示\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#view-1\"\u003eView\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#viewmodel-1\"\u003eViewModel\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#mainwindow%E3%81%ABregion%E3%82%92%E7%A2%BA%E4%BF%9D\"\u003eMainWindowにRegionを確保\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#region%E3%81%ABview%E3%82%92%E8%BF%BD%E5%8A%A0\"\u003eRegionにViewを追加\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#view%E3%81%A8viewmodel%E3%81%AE%E9%96%A2%E9%80%A3%E4%BB%98%E3%81%91\"\u003eViewとViewModelの関連付け\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AE%9F%E8%A1%8C-2\"\u003e実行\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#eventaggregator%E3%81%AB%E3%82%88%E3%82%8Bviewmodel%E9%96%93%E9%80%9A%E4%BF%A1\"\u003eEventAggregatorによるViewModel間通信\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#viewmodel-2\"\u003eViewModel\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AE%9F%E8%A1%8C-3\"\u003e実行\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#model%E3%81%AE%E8%BF%BD%E5%8A%A0\"\u003eModelの追加\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#model\"\u003eModel\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#app-1\"\u003eApp\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#viewmodel-3\"\u003eViewModel\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AE%9F%E8%A1%8C-4\"\u003e実行\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#dialog\"\u003eDialog\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#view-2\"\u003eView\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#viewmodel-4\"\u003eViewModel\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#app-2\"\u003eApp\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AE%9F%E8%A1%8C-5\"\u003e実行\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%81%BE%E3%81%A8%E3%82%81\"\u003eまとめ\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n","totalPv":43105,"uuid":"e04b5ac692aa18df0968","banReason":null,"adventCalendarItem":null,"author":{"encryptedId":"nERX97v1U6XBRbSWml2VtqLU1YA=--R358H66BLfKvXmqb--CDfKpxFr3pZjAhMLmpGVvQ==","originalId":53668,"description":"プログラミングは趣味でやっていますが、いずれは何かアプリをリリースしたいと思っています。","facebookUrl":null,"githubUrl":"https://github.com/tana-gh","isBlockingViewer":false,"isFollowableByViewer":true,"isFollowedByViewer":false,"isTweetWebNotificationReceivable":true,"linkedinUrl":null,"name":"","profileImageUrl":"https://qiita-image-store.s3.amazonaws.com/0/53668/profile-images/1551575525","profileImageUrlW48":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F53668%2Fprofile-images%2F1551575525?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=48\u0026s=a5800eda5f39f10b753ac3c7e66e8650","profileImageUrlW75":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F53668%2Fprofile-images%2F1551575525?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=9bce97088c66ea2aecaab5dff0543fa0","urlName":"hiki_neet_p","websiteUrl":"","twitterUrl":"https://twitter.com/hiki_neet_p","twitterUrlName":"hiki_neet_p","revealedOrganizations":{"edges":[]}},"tags":[{"name":"C#","urlName":"csharp"},{"name":"WPF","urlName":"wpf"},{"name":"PRISM","urlName":"prism"},{"name":"ReactiveProperty","urlName":"reactiveproperty"},{"name":".NETCore","urlName":".netcore"}],"followingLikers":{"edges":[]},"comments":{"totalCount":1}},"comments":[],"client":null,"ads_event_emitter":null}}</script>
