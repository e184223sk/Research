More than 1 year has passed since last update.すべての検証属性の基本クラスとして機能します。
ValidationAttribute クラス - docs.microsoft.comMSのドキュメントを引用しましたが、これだけではよくわかりませんね。ValidationAttribute とはフォームからの入力値やモデルオブジェクトのプロパティが正しいかどうかの検証を強制し、また正しさを定義する属性の基底クラスです。
カスタム検証属性を定義する場合はこれを継承していきます。参考によく使われる検証属性を以下に記載します。System.ComponentModel.DataAnnotations には標準で複数の検証属性が実装されています。しかし、開始時刻と終了時刻のように他のプロパティに依存する検証属性はありません1。そのためカスタム検証属性を作る必要があります。結果として、検証属性を4種類作りました。
どれもほぼ内容が同じなので「AよりBが大きい」を検証する GreaterThanAttribute 2のソースコードを添付します。カスタム検証属性を使用するモデル側は以下の通りです。開始時刻 &lt; 終了時刻 であることを検証したい場合、 StartDateTime に [LessThan] 属性、 EndDateTime に [GreaterThan] 属性を付けます。引数には比較対象のプロパティを string で指定します。Compare 属性と似ていますね。属性をつけることでASP.NET MVCのモデル検証やBlazorのフォーム検証時に大小関係が正しいか検証されます。大小関係を満たさない場合、「StartDateTimeはEndDateTimeより小さい値を指定してください。」や「EndDateTimeはStartDateTimeより大きい値を指定してください。」がエラーメッセージとして表示されます。もっと良い書き方があるような気もしますが、一旦ここで切り上げます。型の分岐とかもっとイケてる書き方3ができそうですね。元気があるときに書き直したいと思います。Compare 属性がありますが、これは同値のみを検証するため今回のような大小関係を検証する用途では使用できません。 ↩シェルの gt よりこの名称を採用。他には GreaterThanOrEqual LessThan LessThanOrEqual を定義。それぞれ ge lt leから。 ↩C# 8.0ではswitch式が使えるのでこのあたりをうまくやれば・・・ ↩


