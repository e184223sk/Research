More than 1 year has passed since last update.Google が提供する音声合成サービス「Cloud Text-to-Speech」の導入メモです。APIサービスの有効化から、認証ファイルの取得、自作プログラム（C#またはPython）から呼び出して利用するまでの流れをできるだけ詳しく説明しました。基本的には公式の「クイックスタート：クライアント ライブラリの使用」の内容をスクリーンショット付きで解説したものです（なお、不要と思われるステップは飛ばしています）。Cloud Text-to-Speech は、テキストデータ（日本語OK）から、読みあげ音声データ (.mp3) を生成してくるクラウドサービスです。かなり人間に近い自然な音声出力が可能です。品質については こちら から、任意のテキスト（日本語もOK）を与えて確認することができます。Google Cloud ( https://cloud.google.com/?hl=ja ) からユーザー登録します。お手持ちの Googleカウント を使って無料トライアル利用が可能です。ただし、登録時にクレジットカードが必要です。とはいえ、期間終了後に、有料アカウントに自動移行されることもないので、また、有料カウントに移行しても料金は（個人的には）非常にリーズナブルだと思いますので、あまり構えずに登録しましょう。以下、Google Cloud に登録済みとして説明を進めていきます。Google Cloud Platform にアクセして、ログインします。ダイアログが表示されるので「新しいプロジェクト」を選択します。適当なプロジェクト名（ここでは Text To Speech 20xxx とします）を入力して「作成」をクリックします。ダッシュボードに戻ってくるので、いま作成したプロジェクトに切り替えます。左上のメニューをクリックして「APIとサービス」、「ダッシュボード」に進みます。「APIとサービスを有効化」を選択します。テキストボックスに「Text to Speech」と入力します。「Cloud Text-to-Speech API」を選択します。
「有効にする」を選択します。自作のプログラムからサービスを利用するために必要となる「認証情報を作成」を選択します。「プロジェクトへの認証情報の追加」という画面に移動するので、下記のドロップダウンリストから「Cloud Text-to-Speech API」を選択してから「必要な認証情報」をクリックします。※ この画面は「APIとサービス」、「認証情報」、「認証情報を作成」、「＋認証情報を作成」、「ウィザードで選択」と選択していっても呼び出すことができます。
表示が切り替わるので「いいえ、使用していません」を選択して、再度「必要な認証情報」をクリックします。適当なサービスアカウント名を入力します（ここでは test としました）。ロールは特に選択しません。また「サービスアカウントID」は自動で生成されます。「次へ」を選択します。次のようなダイアログが表示されますが「ロールなしで作成」を選択します。次のようなダイアログが表示されて、認証情報が入ったJSONファイルが、PCにダウンロードされます。このファイルの名前を「credentials.json」に変更して「C:\Users\xxx\Desktop」に配置するものとします。なお、公式のクイックスタート では、このファイルのパスを 環境変数 GOOGLE_APPLICATION_CREDENTIALS として登録し、プログラムでは環境変数経由で情報を参照するという方法を説明しています。一方、ここでは環境変数には登録せず、プログラムから直接パスを指定して情報を参照する方法をとります。VisualStudio を起動し［ファイル］－［新規作成］－［プロジェクト］で、「Visual C#」の「コンソールアプリ（.NET Core）」を選択します。メニューの［ツール］－［NuGetパッケージマネージャ］－［パッケージ マネージャー コンソール］を選択します。コンソールに Install-Package Google.Cloud.TextToSpeech.V1 -Pre を入力して実行します。Program.cs の内容を以下に書き換えます。実行すると「もくてきちは、にほんばしです。」という MP3 ファイルが生成されます。なお、音声合成マークアップ言語（SSML）にも対応しており、以下のように変更すると
「もくてきちは、にほんばしではなく、にっぽんばしです。」と読み上げてくれます。また、&lt;break time="200ms"/&gt; などにより 間 を挿入することもできます。


