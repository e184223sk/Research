More than 3 years have passed since last update.FizzBuzz問題が話題になってから、すでに10年以上経過するわけですが、 C#でFizzBuzz問題について考えてみたいと思います。まずは、FizzBizz問題とは、以下のような問題です。1から100までの数をプリントするプログラムを書け。ただし3の倍数のときは数の代わりに｢Fizz｣と、5の倍数のときは｢Buzz｣とプリントし、3と5両方の倍数の場合には｢FizzBuzz｣とプリントすること。どうしてプログラマに・・・プログラムが書けないのか?から引用ロジックの中に、出力のコード(Console.WriteLine)が入るのは嫌なので、FizzBuzzというメソッドを定義しました。上のFizzBuzzメソッドは、次のようにも書けますね。このほうが、比較する回数が少なくなります。
ここまでは、ありふれたFizzBuzz問題のコード。さて、このFizzBuzz問題を一般化してみようと思います。やりたいことは、ルールをFizzBuzzメソッドの外側から与えられるようにしたいということ。 そうすれば、のような問題にも答えることができるようになります。C#のコードは以下の通り。いままではメソッドでしたが、FizzBuzzクラスとしました。AddRuleメソッドで、ルールを追加しています。 第１引数が条件のラムダ式、第２引数が出力する文字列を組み立てるラムダ式です。 第２引数は、単純な文字列でも良かったのですが、柔軟性を持たせるためにラムダ式を受け取るようにしました。Executeでは、ローカル関数を使ってみました。あまり意味ないけど...単純なバージョンと比べてかなり複雑になってしまいましたが、このFizzBuzzクラスを利用すれば、以下のようにルールを変更することができます。この記事は、Gushwell's C# Programming Pageで公開したものを加筆・修正したものです。


