<!DOCTYPE html><html><head><meta charset="utf-8" /><title>WatsonのUnity-SDKから消えたConfiguration Editorを調査し、今後の方針を考えてみる(2/2) - Qiita</title><meta content="width=device-width,initial-scale=1,shrink-to-fit=no,viewport-fit=cover" name="viewport" /><meta content="#55c500" name="theme-color" /><meta content="XWpkTG32-_C4joZoJ_UsmDUi-zaH-hcrjF6ZC_FoFbk" name="google-site-verification" /><meta content="telephone=no" name="format-detection" /><link rel="canonical" href="https://qiita.com/yamachan360/items/a36c57e99a68597b8b0d" /><link href="/manifest.json" rel="manifest" /><link href="/opensearch.xml" rel="search" title="Qiita" type="application/opensearchdescription+xml" /><link as="script" href="https://www.googletagservices.com/tag/js/gpt.js" rel="preload" /><link href="https://securepubads.g.doubleclick.net" rel="preconnect" /><script async="" src="https://www.googletagservices.com/tag/js/gpt.js"></script><meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="A/r9mw3k0m1RHJBvmzi2Aq5ld/R6s+qp4TnQijbO7k5TeHlxYSMZq+o1whWCtVYsooDQ2WTrrTeliCZrlsT15A==" /><link rel="shortcut icon" type="image/x-icon" href="https://cdn.qiita.com/assets/favicons/public/production-c620d3e403342b1022967ba5e3db1aaa.ico" /><link rel="apple-touch-icon" type="image/png" href="https://cdn.qiita.com/assets/favicons/public/apple-touch-icon-ec5ba42a24ae923f16825592efdc356f.png" /><link rel="stylesheet" media="all" href="https://cdn.qiita.com/assets/public/article-2eaa7dbedc42a8ea65c722cda46d0ebb.min.css" /><script src="https://cdn.qiita.com/assets/public/v3-article-bundle-63de2d91fef827269d3f6b958db2335b.min.js" defer="defer"></script><meta name="twitter:card" content="summary_large_image"><meta content="@Qiita" name="twitter:site" /><meta content="@yamachan360" name="twitter:creator" /><meta property="og:type" content="article"><meta property="og:title" content="WatsonのUnity-SDKから消えたConfiguration Editorを調査し、今後の方針を考えてみる(2/2) - Qiita"><meta property="og:image" content="https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0&amp;w=1200&amp;mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND1WMkYwYzI5dTQ0R3VWVzVwZEhrdFUwUkw0NEdMNDRLSjVyYUk0NEdJNDRHZlEyOXVabWxuZFhKaGRHbHZiaUJGWkdsMGIzTGpncExvcXJfbW43dmpnWmZqZ0lIa3U0cmx2b3pqZ2E3bWxybnBoNTNqZ3BMb2dJUGpnWWpqZ2FiamdiX2pnb3NvTWk4eUtRJnR4dC1jb2xvcj0lMjMzMzMmdHh0LWZvbnQ9SGlyYWdpbm8lMjBTYW5zJTIwVzYmdHh0LXNpemU9NTQmdHh0LWNsaXA9ZWxsaXBzaXMmdHh0LWFsaWduPWNlbnRlciUyQ21pZGRsZSZzPTYyNWFkZWVkOTMyM2E3ODc5ODU0OTZiM2E0ZjNiOTY5&amp;mark-align=center%2Cmiddle&amp;blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RSGxoYldGamFHRnVNell3JnR4dC1jb2xvcj0lMjMzMzMmdHh0LWZvbnQ9SGlyYWdpbm8lMjBTYW5zJTIwVzYmdHh0LXNpemU9NDUmdHh0LWFsaWduPXJpZ2h0JTJDYm90dG9tJnM9NjUzMDVjNDZhM2Q2NWU0NmM5NDhlMjA1YzcyNTJkZTU&amp;blend-align=center%2Cmiddle&amp;blend-mode=normal&amp;s=746035838515dee8ce86d555a467ca5d"><meta property="og:description" content="前回 はConfiguration Editorが何をしていたか、どうして消えたか、などを探ってまとめてみました。

今回は以下を中心に考えていきたいとおもいます。


Configuration Editorなしでの資格情報を取り扱..."><meta content="https://qiita.com/yamachan360/items/a36c57e99a68597b8b0d" property="og:url" /><meta content="Qiita" property="og:site_name" /><meta content="564524038" property="fb:admins" /><meta content="C#,Unity,SDK,Watson" name="keywords" /><script>!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window, document,'script',
'https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '668972150489891');
fbq('track', 'PageView');</script><style data-emotion-css="17jxvjw 11t2ec1 1dvr2p8 18lkoru 1g4cku8 1iupg5d ijvq0v 15cocm3 12rp90f 115f4t 1b8uj5v 79elbk 16hhh7b fcbn8c 1gj7nt 154zy0m yikrym 1jqivyb 1ode1bp le4d8r 1hbd3g7 1nzh4zz 38fzdi helsa7 8qb8m4 2imjyh he5w1s 70qvj9 3ojehk 100alwu 1dtnjt5 10ougpm 1ay9vb9 m19uds cgzq40 1wa99t2 1l3zk9f 4czcte 1yzj1fm 1uv1qiv 109dbrr 5jpx49 mnxgyc 1vlpknv fsjkhv 1b17vb0 7i7f4d"}>.css-17jxvjw{display:grid;display:-ms-grid;grid-template-columns:80px minmax(0,1fr) 300px;-ms-grid-columns:80px minmax(0,1fr) 300px;grid-template-rows:minmax(270px,auto) 1fr;-ms-grid-rows:minmax(270px,auto) 1fr;max-width:1280px;margin-right:auto;margin-left:auto;padding-top:24px;padding-right:24px;padding-left:24px;}@media (max-width:1200px){.css-17jxvjw{padding-bottom:0;padding-left:0;padding-right:0;}}@media (max-width:992px){.css-17jxvjw{grid-template-columns:80px 452px 300px;-ms-grid-columns:80px 452px 300px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}}@media (max-width:770px){.css-17jxvjw{display:block;}}@media (max-width:480px){.css-17jxvjw{padding-top:0;}}.css-11t2ec1{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;z-index:5;position:-webkit-sticky;position:sticky;top:calc(56px + 24px + 16px + 32px - 16px);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:16px;width:80px;}.css-11t2ec1:after{content:'';display:table;}.css-11t2ec1:before{content:'';display:table;}@media (max-width:770px){.css-11t2ec1{display:none;}}.css-1dvr2p8{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-18lkoru{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;background-color:#FFFFFF;}.css-1g4cku8{display:inline-block;vertical-align:middle;height:20px;width:20px;fill:#55C500;}.css-1iupg5d{color:#55C500;cursor:pointer;font-size:14px;font-weight:bold;}.css-ijvq0v{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-15cocm3{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#FFFFFF;border:2px solid #6E6F70;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:2px 0px 0px;width:40px;}.css-12rp90f{display:inline-block;vertical-align:bottom;height:17.77777777777778px;width:16px;fill:#6E6F70;}.css-115f4t{color:#6E6F70;font-size:14px;font-weight:bold;}.css-1b8uj5v{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;margin-bottom:16px;padding:0;}.css-79elbk{position:relative;}.css-16hhh7b{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;padding:0;}.css-fcbn8c{display:none;bottom:initial;left:initial;right:initial;top:initial;left:100%;top:calc(-8px - (14px * 1.8) - 16px - 4px);}.css-1gj7nt{color:rgba(0,0,0,0.6);font-size:14px;font-weight:bold;line-height:1.8;padding:8px 16px;}.css-154zy0m{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.87);cursor:pointer;font-size:16px;font-weight:normal;line-height:1.8;padding:4px 16px;}.css-154zy0m:hover{-webkit-text-decoration:none;text-decoration:none;background-color:#F2F2F2;}.css-yikrym{width:20px;}.css-1jqivyb{color:rgba(0,0,0,0.6);font-size:13px;}.css-1ode1bp{background-color:rgba(0,0,0,0.12);height:1px;width:100%;margin:8px 0;}.css-le4d8r{display:inline-block;vertical-align:middle;height:13px;width:13px;fill:rgba(0,0,0,0.6);}.css-1hbd3g7{height:250px;}.css-1nzh4zz{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:16px 32px;background-color:#FBE69E;color:rgba(0,0,0,0.87);line-height:1.5;font-weight:600;}@media (max-width:770px){.css-1nzh4zz{padding:16px;}}.css-38fzdi{color:#CA832A;margin-right:4px;}.css-helsa7{background-color:#FFFFFF;padding:32px;margin-bottom:24px;}@media (max-width:992px){.css-helsa7{margin:0 auto 40px;}}@media (max-width:480px){.css-helsa7{margin:0 0 40px;padding:32px 16px;}}.css-8qb8m4{margin-bottom:48px;}.css-2imjyh{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-he5w1s{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;width:100%;}@media (max-width:770px){.css-he5w1s{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}}.css-70qvj9{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.css-3ojehk{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;margin-right:4px;}.css-100alwu{display:inline-block;border-radius:50%;line-height:1;overflow:hidden;vertical-align:middle;}.css-1dtnjt5{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-10ougpm{color:rgba(0,0,0,0.87);font-size:14px;font-weight:600;line-height:1.8;margin-right:4px;text-wrap:break-word;word-break:break-all;}.css-1ay9vb9{margin-right:16px;}.css-m19uds{color:rgba(0,0,0,0.6);font-size:14px;line-height:1.8;}.css-cgzq40{color:rgba(0,0,0,0.87);font-size:32px;font-weight:bold;line-height:1.4;margin-top:8px;text-wrap:break-word;word-break:break-all;}.css-1wa99t2{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.6);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:8px;}.css-1l3zk9f{color:rgba(0,0,0,0.6);font-size:20px;margin-right:8px;}.css-4czcte{margin-right:4px;color:inherit;font-size:14px;line-height:1.8;}.css-4czcte:not(:last-child)::after{content:',';margin-right:4px;}.css-1yzj1fm{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:32px;}.css-1uv1qiv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-size:20px;height:32px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin-right:16px;outline:none;padding:0;width:32px;}.css-109dbrr{background-color:#F9F9F9;border-top:1px solid rgba(0,0,0,0.12);bottom:0;box-shadow:0px 1px 4px rgba(0,0,0,0.14);display:none;height:calc(env(safe-area-inset-bottom,0px) + 56px);-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding-bottom:env(safe-area-inset-bottom);position:-webkit-sticky;position:sticky;width:100%;z-index:2000;}@media (max-width:770px){.css-109dbrr{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}.css-5jpx49{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:space-evenly;-webkit-justify-content:space-evenly;-ms-flex-pack:space-evenly;justify-content:space-evenly;width:100%;}.css-mnxgyc{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1vlpknv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;margin-right:4px;background-color:#FFFFFF;}.css-fsjkhv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1b17vb0{color:#6E6F70;font-size:14px;font-weight:bold;margin-left:4px;}.css-7i7f4d{display:none;bottom:initial;left:initial;right:initial;top:initial;bottom:32px;right:0;}</style></head><body><div class="allWrapper"><div><div id="GlobalHeader-react-component-738d461a-f96c-41f9-8182-fb1d19dc1522"><div class="st-Header"><div class="st-Header_container"><div class="st-Header_start"><a href="/" class="st-Header_logo"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 426.57 130"><circle cx="167.08" cy="21.4" r="12.28"></circle><path d="M250.81 29.66h23.48v18.9h-23.48z"></path><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z"></path><circle cx="216.33" cy="21.4" r="12.28"></circle></svg></a><div class="st-Header_communitySelector" tabindex="0"><span class="fa fa-caret-down"></span></div><div class="st-Header_dropdown"><div class="st-Header_dropdownHeading">Qiita Teams that are logged in</div><div class="st-Header_dropdownItemNote">You are not logged in to any team</div><hr class="st-Header_dropdownDivider st-Header_dropdownDivider-shrink"/><a href="https://teams-center.qiita.com/find_team" class="st-Header_dropdownItem"><span class="fa fa-fw fa-sign-in st-Header_dropdownItemIcon"></span><div>Log in to Qiita Team</div></a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Community</div><a href="/organizations" class="st-Header_dropdownItem">Organization</a><a href="/official-events/open" class="st-Header_dropdownItem">Event</a><a href="/advent-calendar" class="st-Header_dropdownItem">Advent Calendar</a><a href="https://qiitadon.com/" class="st-Header_dropdownItem" target="_blank">Qiitadon (β)</a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Service</div><a href="https://jobs.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Jobs</a><a href="https://zine.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Zine</a><a href="https://blog.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Blog</a></div><form class="st-Header_search" action="/search" method="get"><span class="fa fa-search st-Header_searchIcon"></span><input type="search" class="st-Header_searchInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form><form class="st-Header_searchModal" action="/search" method="get"><input type="text" class="st-Header_searchModalInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form></div><div class="st-Header_end"><div class="st-Header_searchButton"><span class="fa fa-search"></span></div><a class="st-Header_signupButton" href="/signup?redirect_to=%2Fyamachan360%2Fitems%2Fa36c57e99a68597b8b0d">Signup</a><a class="st-Header_loginLink" href="/login?redirect_to=%2Fyamachan360%2Fitems%2Fa36c57e99a68597b8b0d">Login</a></div><div class="st-Header_overlay"></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="GlobalHeader" data-dom-id="GlobalHeader-react-component-738d461a-f96c-41f9-8182-fb1d19dc1522">{"unreadNotificationsCount":null,"realms":[{"humanName":"Qiita","isCurrentRealm":true,"isQiita":true,"isQiitaTeam":false,"loggedInUser":null,"teamId":null,"url":"https://qiita.com/"}],"teamFindUrl":"https://teams-center.qiita.com/find_team","isTeamOnlyUser":null,"currentUser":null}</script>
      
</div><div class="st-HeaderAlert st-HeaderAlert-warning"><div class="st-HeaderAlert_body"></div></div><script type="application/ld+json">{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"/","name":"Qiita"}},{"@type":"ListItem","position":2,"item":{"@id":"/tags/csharp","name":"C#"}}]}</script><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","datePublished":"2018-05-06T00:00:14.000+09:00","dateModified":"2018-05-12T12:55:42.000+09:00","headline":"WatsonのUnity-SDKから消えたConfiguration Editorを調査し、今後の方針を考えてみる(2/2)","image":"https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0\u0026w=1200\u0026mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND1WMkYwYzI5dTQ0R3VWVzVwZEhrdFUwUkw0NEdMNDRLSjVyYUk0NEdJNDRHZlEyOXVabWxuZFhKaGRHbHZiaUJGWkdsMGIzTGpncExvcXJfbW43dmpnWmZqZ0lIa3U0cmx2b3pqZ2E3bWxybnBoNTNqZ3BMb2dJUGpnWWpqZ2FiamdiX2pnb3NvTWk4eUtRJnR4dC1jb2xvcj0lMjMzMzMmdHh0LWZvbnQ9SGlyYWdpbm8lMjBTYW5zJTIwVzYmdHh0LXNpemU9NTQmdHh0LWNsaXA9ZWxsaXBzaXMmdHh0LWFsaWduPWNlbnRlciUyQ21pZGRsZSZzPTYyNWFkZWVkOTMyM2E3ODc5ODU0OTZiM2E0ZjNiOTY5\u0026mark-align=center%2Cmiddle\u0026blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RSGxoYldGamFHRnVNell3JnR4dC1jb2xvcj0lMjMzMzMmdHh0LWZvbnQ9SGlyYWdpbm8lMjBTYW5zJTIwVzYmdHh0LXNpemU9NDUmdHh0LWFsaWduPXJpZ2h0JTJDYm90dG9tJnM9NjUzMDVjNDZhM2Q2NWU0NmM5NDhlMjA1YzcyNTJkZTU\u0026blend-align=center%2Cmiddle\u0026blend-mode=normal\u0026s=746035838515dee8ce86d555a467ca5d","mainEntityOfPage":"https://qiita.com/yamachan360/items/a36c57e99a68597b8b0d","author":{"@type":"Person","address":"Tokyo, Japan","email":null,"identifier":"yamachan360","name":"yamachan360","image":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F193519%2Fprofile-images%2F1547708105?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=2755ac3d43b35c70e8ef1ac2554050b9","url":"https://qiita.com/yamachan360","description":"Web系開発者。映画,特撮,功夫,酒, ロボ,アニメ,模型,ゲーム, 懐パソ(PC6001, MSX, X68000), JavaScript/NodeJS, Unity, RPGツクール, プチコン, AWS, 開発環境なんでも好き。修行中。\r\n\r\n投稿は全て個人の見解です。\r\nPosts are my own.","memberOf":[]},"publisher":{"@type":"Organization","name":"Qiita","logo":{"@type":"ImageObject","url":"//cdn.qiita.com/assets/public/qiita-logo-c39ded593afa388e2e1ba435b110554e.png"}}}</script><style type="text/css">.wb-CampaignLink {
  background-color: #333333;
  width: 100%;
}

.wb-CampaignLink_container {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  max-width: 1100px;
  margin: 0 auto;
  font-size: 13px;
  padding: 0.8em;
}
.wb-CampaignLink_container > a {
  color: #fff;
}

.wb-CampaignLink_container > a:hover {
  text-decoration: underline;
}</style><div class="wb-CampaignLink"><div class="wb-CampaignLink_container"><a target="_blank" id="header_text_message_1" href="https://increments.connpass.com/event/211948/">Qiita創業者海野氏登壇！Qiita エンジニアフェスタ 2021 Online Meetupを9/9(木)に開催</a><a target="_blank" id="header_text_message_2" href="https://increments.connpass.com/event/211948/">詳しくはこちら</a></div><script>td.trackEvent(
  'front_events',
  {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"yamachan360","type":"items","id":"a36c57e99a68597b8b0d"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Show","data":{"message":"Qiita創業者海野氏登壇！Qiita エンジニアフェスタ 2021 Online Meetupを9/9(木)に開催","url":"https://increments.connpass.com/event/211948/","sub_message":"詳しくはこちら"}}
)</script><script>document.getElementById('header_text_message_1').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"yamachan360","type":"items","id":"a36c57e99a68597b8b0d"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":1,"pos_id":"header_text_message_1","message":"Qiita創業者海野氏登壇！Qiita エンジニアフェスタ 2021 Online Meetupを9/9(木)に開催","url":"https://increments.connpass.com/event/211948/","sub_message":"詳しくはこちら"}}
  )
})</script><script>document.getElementById('header_text_message_2').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"yamachan360","type":"items","id":"a36c57e99a68597b8b0d"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":1,"pos_id":"header_text_message_2","message":"Qiita創業者海野氏登壇！Qiita エンジニアフェスタ 2021 Online Meetupを9/9(木)に開催","url":"https://increments.connpass.com/event/211948/","sub_message":"詳しくはこちら"}}
  )
})</script></div><script type="application/json" id="js-react-on-rails-context">{"railsEnv":"production","inMailer":false,"i18nLocale":"en","i18nDefaultLocale":"en","href":"https://qiita.com/yamachan360/items/a36c57e99a68597b8b0d","location":"/yamachan360/items/a36c57e99a68597b8b0d","scheme":"https","host":"qiita.com","port":null,"pathname":"/yamachan360/items/a36c57e99a68597b8b0d","search":null,"httpAcceptLanguage":null,"actionPath":"public/items#show","settings":{"analyticsTrackingId":"UA-24675221-12","assetsMap":{},"csrfToken":"EWgiUoeS+UlnhPDOYXZ5NTg6My7ELhH+Hvj3L0G+3QZB6qa461Uyj9ytorR4+5kbNN+UA9p2VmBaSQHO4bTGrA==","locale":"en"},"currentUser":null,"isLoggedIn":false,"recaptchaSiteKey":"6LfNkiQTAAAAAM3UGnSquBy2akTITGNMO_QDxMw6","serverSide":false}</script>
<div id="PersonalArticlePage-react-component-49ab8b87-ffe8-4657-8821-6cd00b06094c"><div class="p-items_wrapper"><div class=" css-17jxvjw"><div class="css-11t2ec1"><div class="css-1dvr2p8"><button class=" css-18lkoru"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/yamachan360/items/a36c57e99a68597b8b0d/likers" class="css-1iupg5d">4</a></div><div class="css-ijvq0v"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-115f4t">5</span></div><div class="css-1b8uj5v"><span class="fa fa-twitter"></span></div><div class="css-1b8uj5v"><span class="fa fa-facebook"></span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-fcbn8c"><div class="css-1gj7nt">Improve article</div><a href="/drafts/a36c57e99a68597b8b0d/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/yamachan360/items/a36c57e99a68597b8b0d/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/yamachan360/items/a36c57e99a68597b8b0d/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/yamachan360/items/a36c57e99a68597b8b0d/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/yamachan360/items/a36c57e99a68597b8b0d.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div><div class="p-items_options"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_toc"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_main"><div class="css-1nzh4zz"><span class="fa fa-fw fa-warning css-38fzdi"></span><p>More than 3 years have passed since last update.</p></div><div class="css-helsa7"><div class="css-8qb8m4"><div class="css-2imjyh"><div class="css-he5w1s"><div class="css-70qvj9"><div class="css-3ojehk"><a href="/yamachan360"><img class="css-100alwu eyfquo10" src="https://qiita-image-store.s3.amazonaws.com/0/193519/profile-images/1547708105" width="24" height="24" loading="lazy"/></a></div><div class="css-1dtnjt5"><a href="/yamachan360" class="css-10ougpm">@<!-- -->yamachan360</a><div class="css-1ay9vb9"><span><meta content="2018-05-05T15:00:14Z"/><time dateTime="2018-05-12T03:55:42Z" class="css-m19uds">updated at 2018-05-12</time></span></div></div></div></div></div><h1 class="css-cgzq40">WatsonのUnity-SDKから消えたConfiguration Editorを調査し、今後の方針を考えてみる(2/2)</h1><div class="css-1wa99t2"><span class="fa fa-tags mr-1of2 css-1l3zk9f" aria-hidden="true"></span><a href="/tags/csharp" class="css-4czcte">C#</a><a href="/tags/unity" class="css-4czcte">Unity</a><a href="/tags/sdk" class="css-4czcte">SDK</a><a href="/tags/watson" class="css-4czcte">Watson</a></div></div><section class="it-MdContent"><div id="personal-public-article-body"><div><p><a href="https://qiita.com/yamachan360/items/402e56f70b585de5f82e" id="reference-5706d14b88ddd99c0259">前回</a> はConfiguration Editorが何をしていたか、どうして消えたか、などを探ってまとめてみました。</p>

<p>今回は以下を中心に考えていきたいとおもいます。</p>

<ul>
<li>Configuration Editorなしでの資格情報を取り扱いはどう実装したら効果的か</li>
<li>SDKの更新で動かなくなったプログラムにはどう対応したら良いか</li>
</ul>

<h1>
<span id="資格情報の扱いについて" class="fragment"></span><a href="#%E8%B3%87%E6%A0%BC%E6%83%85%E5%A0%B1%E3%81%AE%E6%89%B1%E3%81%84%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>資格情報の扱いについて</h1>

<p><a href="https://qiita.com/yamachan360/items/911204e57957bd4bbef0" id="reference-60c71737dd67e489e406">試してみる</a> や <a href="https://qiita.com/yamachan360/items/bcfa10b2d9bf62df8300" id="reference-afb268221e9aff0f4af5">続・試してみる</a> の投稿では、過去のSDKに依存したサンプルプログラムを書き直して公開しました。</p>

<p>その方法は「資格情報をサンプルプログラムにハードコードする」で、最もお手軽ではあるものの、あまり上品な方法ではありませんでした。ちゃんとしたプロジェクトでやると怒られる手法ですw</p>

<p>もう少し真っ当な方法を考えてみましょう。</p>

<h2>
<span id="インスペクターで値を管理する" class="fragment"></span><a href="#%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%9A%E3%82%AF%E3%82%BF%E3%83%BC%E3%81%A7%E5%80%A4%E3%82%92%E7%AE%A1%E7%90%86%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>インスペクターで値を管理する</h2>

<p>Unityという開発ツールにおいて、設定といえばまずインスペクターなんですよね。そこで最初に考えるのは、インスペクターに資格情報を設定するフィールドを表示してあげれば良いのでは？となります。</p>

<p>そこで調べ始めたのですが… 意外なところにこの答えはありました。灯台元暗し、Unity-SDK の Examples にあるサンプル実装 ServiceExamples です。</p>

<p><a href="https://camo.qiitausercontent.com/5af9779ca18fe664c8d52ad316afa48c93192b19/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3139333531392f65623335613166342d383935642d643635312d386162622d3633346231373663366632662e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F193519%2Feb35a1f4-895d-d651-8abb-634b176c6f2f.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=4b9d0cfe3ce9ca44dd20d70014a78c4b" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/193519/eb35a1f4-895d-d651-8abb-634b176c6f2f.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F193519%2Feb35a1f4-895d-d651-8abb-634b176c6f2f.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=bc8ad3854cff0e3d9f33409437129a9f 1x" loading="lazy"></a></p>

<p>さっそくこのシーンファイルをダブルクリックして開いてみますと、いろんなゲームオブジェクトが登録されます。その中には ExampleSpeechToText などもありますね…</p>

<p><a href="https://camo.qiitausercontent.com/2f0e4a8a0b658c737a25a5d3b14f7b9266f83117/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3139333531392f31393966653238632d653938372d373732322d636430372d6662396361656362626262372e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F193519%2F199fe28c-e987-7722-cd07-fb9caecbbbb7.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=6c5b40d6fd0105c8a94c645d418e05c0" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/193519/199fe28c-e987-7722-cd07-fb9caecbbbb7.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F193519%2F199fe28c-e987-7722-cd07-fb9caecbbbb7.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=25ec1fc8bc2c8ed09c71a5afe9606d23 1x" loading="lazy"></a></p>

<p>そしてこれを選択してインスペクターを見てみますと！</p>

<p><a href="https://camo.qiitausercontent.com/a9cfb804307abae5f383b29afe5d689c3a270ebf/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3139333531392f38343365663838612d653065302d623937372d333766652d6261313338633264303463312e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F193519%2F843ef88a-e0e0-b977-37fe-ba138c2d04c1.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=24ff8e82e919bc4d59c6c16ed61fbeaa" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/193519/843ef88a-e0e0-b977-37fe-ba138c2d04c1.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F193519%2F843ef88a-e0e0-b977-37fe-ba138c2d04c1.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=310a32260e92708b0e995ff171485b21 1x" loading="lazy"></a></p>

<p>ほら見事に資格情報の設定欄が… コード読んだり、ググったり資料探す前に、用意されたExampleコード読めよ！と。ですよね、開発者はそうあるべきでした。未熟すぎ、甘えてましたね自分。</p>

<p>さて、実際のコードの最初のほうを見てみましょう。</p>

<div class="code-frame" data-lang="cs">
<div class="code-lang"><span class="bold">ExampleSpeechToText.cs</span></div>
<div class="highlight"><pre><code><span class="k">public</span> <span class="k">class</span> <span class="nc">ExampleSpeechToText</span> <span class="p">:</span> <span class="n">MonoBehaviour</span>
<span class="p">{</span>
    <span class="err">#</span><span class="n">region</span> <span class="n">PLEASE</span> <span class="n">SET</span> <span class="n">THESE</span> <span class="n">VARIABLES</span> <span class="n">IN</span> <span class="n">THE</span> <span class="n">INSPECTOR</span>
    <span class="p">[</span><span class="n">SerializeField</span><span class="p">]</span>
    <span class="k">private</span> <span class="kt">string</span> <span class="n">_username</span><span class="p">;</span>
    <span class="p">[</span><span class="n">SerializeField</span><span class="p">]</span>
    <span class="k">private</span> <span class="kt">string</span> <span class="n">_password</span><span class="p">;</span>
    <span class="p">[</span><span class="n">SerializeField</span><span class="p">]</span>
    <span class="k">private</span> <span class="kt">string</span> <span class="n">_url</span><span class="p">;</span>
    <span class="err">#</span><span class="n">endregion</span>

    <span class="k">private</span> <span class="n">SpeechToText</span> <span class="n">_speechToText</span><span class="p">;</span>
</code></pre></div>
</div>

<p>これがインスペクターに表示されている部分ですね。private宣言ですが[SerializeField]があるので入力項目として表示されています。</p>

<p>そして _speechToText ですが Start() のなかでこの資格情報を用いて初期化されています。</p>

<div class="code-frame" data-lang="cs">
<div class="code-lang"><span class="bold">ExampleSpeechToText.cs</span></div>
<div class="highlight"><pre><code>    <span class="k">void</span> <span class="nf">Start</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">LogSystem</span><span class="p">.</span><span class="nf">InstallDefaultReactors</span><span class="p">();</span>

        <span class="c1">//  Create credential and instantiate service</span>
        <span class="n">Credentials</span> <span class="n">credentials</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Credentials</span><span class="p">(</span><span class="n">_username</span><span class="p">,</span> <span class="n">_password</span><span class="p">,</span> <span class="n">_url</span><span class="p">);</span>

        <span class="n">_speechToText</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">SpeechToText</span><span class="p">(</span><span class="n">credentials</span><span class="p">);</span>
        <span class="n">_customCorpusFilePath</span> <span class="p">=</span> <span class="n">Application</span><span class="p">.</span><span class="n">dataPath</span> <span class="p">+</span> <span class="s">"/Watson/Examples/ServiceExamples/TestData/theJabberwocky-utf8.txt"</span><span class="p">;</span>
        <span class="n">_customWordsFilePath</span> <span class="p">=</span> <span class="n">Application</span><span class="p">.</span><span class="n">dataPath</span> <span class="p">+</span> <span class="s">"/Watson/Examples/ServiceExamples/TestData/test-stt-words.json"</span><span class="p">;</span>
        <span class="n">_acousticResourceMimeType</span> <span class="p">=</span> <span class="n">Utility</span><span class="p">.</span><span class="nf">GetMimeType</span><span class="p">(</span><span class="n">Path</span><span class="p">.</span><span class="nf">GetExtension</span><span class="p">(</span><span class="n">_acousticResourceUrl</span><span class="p">));</span>
        <span class="n">_oggResourceMimeType</span> <span class="p">=</span> <span class="n">Utility</span><span class="p">.</span><span class="nf">GetMimeType</span><span class="p">(</span><span class="n">Path</span><span class="p">.</span><span class="nf">GetExtension</span><span class="p">(</span><span class="n">_oggResourceUrl</span><span class="p">));</span>

        <span class="n">_speechToText</span><span class="p">.</span><span class="n">StreamMultipart</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>

        <span class="n">Runnable</span><span class="p">.</span><span class="nf">Run</span><span class="p">(</span><span class="nf">Examples</span><span class="p">());</span>
    <span class="p">}</span>
</code></pre></div>
</div>

<p>うん、シンプルで、いかにもUnityっぽいサンプルで良いですね。SDKのExampleなのですから、開発側の推奨する使い方はコレなんだろうという安心感もあります。</p>

<h2>
<span id="インスペクターで実装してみよう" class="fragment"></span><a href="#%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%9A%E3%82%AF%E3%82%BF%E3%83%BC%E3%81%A7%E5%AE%9F%E8%A3%85%E3%81%97%E3%81%A6%E3%81%BF%E3%82%88%E3%81%86"><i class="fa fa-link"></i></a>インスペクターで実装してみよう</h2>

<p>このExampleから、必要最低限の機能を抜き出してクラスを作成してみましょう。名前はベタですが SpeechToTextCredential としました。</p>

<div class="code-frame" data-lang="cs">
<div class="code-lang"><span class="bold">SpeechToTextCredential.cs</span></div>
<div class="highlight"><pre><code><span class="k">using</span> <span class="nn">IBM.Watson.DeveloperCloud.Utilities</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UnityEngine</span><span class="p">;</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">SpeechToTextCredential</span> <span class="p">:</span> <span class="n">MonoBehaviour</span> <span class="p">{</span>
    <span class="err">#</span><span class="n">region</span> <span class="n">PLEASE</span> <span class="n">SET</span> <span class="n">THESE</span> <span class="n">VARIABLES</span> <span class="n">IN</span> <span class="n">THE</span> <span class="n">INSPECTOR</span>
    <span class="p">[</span><span class="n">SerializeField</span><span class="p">]</span>
    <span class="k">private</span> <span class="n">Credential</span> <span class="n">_credential</span><span class="p">;</span>
    <span class="p">[</span><span class="n">Serializable</span><span class="p">]</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">Credential</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="kt">string</span> <span class="n">_username</span><span class="p">;</span>
        <span class="k">public</span> <span class="kt">string</span> <span class="n">_password</span><span class="p">;</span>
        <span class="k">public</span> <span class="kt">string</span> <span class="n">_url</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="err">#</span><span class="n">endregion</span>

    <span class="k">public</span> <span class="n">Credentials</span> <span class="nf">getCredentials</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">Credentials</span><span class="p">(</span><span class="n">_credential</span><span class="p">.</span><span class="n">_username</span><span class="p">,</span> <span class="n">_credential</span><span class="p">.</span><span class="n">_password</span><span class="p">,</span> <span class="n">_credential</span><span class="p">.</span><span class="n">_url</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<p>違いですが、やはりパスワードとか丸見えなのはアレなので、クラスにまとめてみました。こうするとインスペクター上ではまとまったデータとして表示されるので分かりやすいですし、入力後は閉じて隠すこともできます。</p>

<p>unity-chan に追加した後はこんな感じ。</p>

<p><a href="https://camo.qiitausercontent.com/be1cd8ee56fbc7efa47a4944f6fbc02656acf50f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3139333531392f32383035636264642d376136372d613866612d383333622d3131376435366537336438302e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F193519%2F2805cbdd-7a67-a8fa-833b-117d56e73d80.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=7a64460ab52e261508462fedfacd047e" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/193519/2805cbdd-7a67-a8fa-833b-117d56e73d80.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F193519%2F2805cbdd-7a67-a8fa-833b-117d56e73d80.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=4dbd2ddf41ec6703327918ceb43c9460 1x" loading="lazy"></a></p>

<h2>
<span id="過去のコードとの互換性を考慮してみる" class="fragment"></span><a href="#%E9%81%8E%E5%8E%BB%E3%81%AE%E3%82%B3%E3%83%BC%E3%83%89%E3%81%A8%E3%81%AE%E4%BA%92%E6%8F%9B%E6%80%A7%E3%82%92%E8%80%83%E6%85%AE%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B"><i class="fa fa-link"></i></a>過去のコードとの互換性を考慮してみる</h2>

<p>SpeechToText では過去のコードの修正点は以下のふたつでした。</p>

<ul>
<li>資格情報の簡易ツールが無いのでコードで設定してあげないと駄目</li>
<li>処理関数の順番が変わっており、エラー時に呼ばれる OnFail 関数を追加してあげないと駄目</li>
</ul>

<h2>
<span id="古い関数の復活" class="fragment"></span><a href="#%E5%8F%A4%E3%81%84%E9%96%A2%E6%95%B0%E3%81%AE%E5%BE%A9%E6%B4%BB"><i class="fa fa-link"></i></a>古い関数の復活</h2>

<p>この二つ目の問題を先に解決してしまいましょう。C# にはこういった場合に力強い味方が居ます、それが <a href="https://docs.microsoft.com/ja-jp/dotnet/csharp/programming-guide/classes-and-structs/extension-methods" rel="nofollow noopener" target="_blank">拡張メソッド</a> で、既存のクラスを後から拡張できるという、裏技のような記述方法です。</p>

<p>既存の SpeechToText クラスを拡張するので、SpeechToTextExtender というクラスを新規作成します。コードは以下のようになります。</p>

<div class="code-frame" data-lang="cs">
<div class="code-lang"><span class="bold">SpeechToTextExtender.cs</span></div>
<div class="highlight"><pre><code><span class="k">using</span> <span class="nn">IBM.Watson.DeveloperCloud.Services.SpeechToText.v1</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">IBM.Watson.DeveloperCloud.Services.Assistant.v1</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">IBM.Watson.DeveloperCloud.Connection</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UnityEngine</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System</span><span class="p">;</span>

<span class="k">public</span> <span class="k">static</span> <span class="k">class</span> <span class="nc">SpeechToTextExtender</span> <span class="p">{</span>

    <span class="k">public</span> <span class="k">static</span> <span class="kt">bool</span> <span class="nf">Recognize</span><span class="p">(</span><span class="k">this</span> <span class="n">SpeechToText</span> <span class="n">stt</span><span class="p">,</span> <span class="n">AudioClip</span> <span class="n">clip</span><span class="p">,</span> <span class="n">Action</span><span class="p">&lt;</span><span class="n">SpeechRecognitionEvent</span><span class="p">&gt;</span> <span class="n">successCallback</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">stt</span><span class="p">.</span><span class="n">Keywords</span> <span class="p">=</span> <span class="n">stt</span><span class="p">.</span><span class="n">Keywords</span> <span class="p">==</span> <span class="k">null</span> <span class="p">?</span> <span class="k">new</span> <span class="kt">string</span><span class="p">[]</span> <span class="p">{</span> <span class="s">"ibm"</span> <span class="p">}</span> <span class="p">:</span> <span class="n">stt</span><span class="p">.</span><span class="n">Keywords</span><span class="p">;</span>
        <span class="n">stt</span><span class="p">.</span><span class="n">KeywordsThreshold</span> <span class="p">=</span> <span class="n">stt</span><span class="p">.</span><span class="n">KeywordsThreshold</span> <span class="p">==</span> <span class="k">null</span> <span class="p">?</span> <span class="m">0.1f</span> <span class="p">:</span> <span class="n">stt</span><span class="p">.</span><span class="n">KeywordsThreshold</span><span class="p">;</span>

        <span class="n">Debug</span><span class="p">.</span><span class="nf">LogWarning</span><span class="p">(</span><span class="s">"Deprecated function: SpeechToText.Recognize(successCallback, clip)"</span><span class="p">);</span>

        <span class="k">return</span> <span class="n">stt</span><span class="p">.</span><span class="nf">Recognize</span><span class="p">((</span><span class="n">r</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
            <span class="nf">successCallback</span><span class="p">(</span><span class="n">r</span><span class="p">);</span>
        <span class="p">},</span> <span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
            <span class="n">Debug</span><span class="p">.</span><span class="nf">Log</span><span class="p">(</span><span class="s">"SpeechToText.OnFail() Error received: "</span> <span class="p">+</span> <span class="n">e</span><span class="p">.</span><span class="nf">ToString</span><span class="p">());</span>
        <span class="p">},</span> <span class="n">clip</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<p>C#の拡張メソッドを初めて見た方は、なんじゃこりゃ？って感じでしょう。私もそうです。</p>

<p>このコードでやっていることは、古いサンプルで使われているRecognize関数(引数が少ないバージョン)が削除されてしまったので、あらためて追加してあげる、です。いわゆるラッパー？実際にはエンハンサー。</p>

<p>このコードを作成してプロジェクトに含めることで、元となる SpeechToText クラスに古いRecognize関数が復活します。つまり古いサンプルプログラムを書き直す必要がなくなるのです。</p>

<p>ただしあくまで古い関数ですので、実行時にはログに警告文を表示させています。今後はなるべく使わないでね、と。Javaとかでよくある警告文ですね。</p>

<p><a href="https://camo.qiitausercontent.com/aa911a0395378701368e9ccf2c75e57839f57abb/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3139333531392f30623264633531342d366663392d653236362d616461342d3964383264613432323839652e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F193519%2F0b2dc514-6fc9-e266-ada4-9d82da42289e.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=48373838133f10251ec2eb727a7ca894" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/193519/0b2dc514-6fc9-e266-ada4-9d82da42289e.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F193519%2F0b2dc514-6fc9-e266-ada4-9d82da42289e.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=f6f336229dcd1d8aca372303e5743ce0 1x" loading="lazy"></a></p>

<p>なお先頭の2行で設定している Keywords と KeywordsThreshold は、何故か設定しないとエラーになるから、です。詳しくは <a href="https://qiita.com/yamachan360/items/911204e57957bd4bbef0#%E3%81%A8%E3%81%84%E3%81%86%E3%82%8F%E3%81%91%E3%81%A7%E5%AF%BE%E5%BF%9C%E7%AD%96%E3%81%A8%E3%81%97%E3%81%A6%E3%81%AF" id="reference-60c71737dd67e489e406">以前の投稿</a> をみてください。</p>

<h2>
<span id="資格情報の読み込み" class="fragment"></span><a href="#%E8%B3%87%E6%A0%BC%E6%83%85%E5%A0%B1%E3%81%AE%E8%AA%AD%E3%81%BF%E8%BE%BC%E3%81%BF"><i class="fa fa-link"></i></a>資格情報の読み込み</h2>

<p>さて残りの資格情報の問題も拡張メソッドで対応しましょう！と考えていましたが、無理でした。拡張メソッドではコンストラクタは追加できません。</p>

<p>かといってSDKのコードを修正しちゃう度胸はないので… 結果として、古いサンプルにある以下の行は、やはり書き換えないとどうしようもありません。</p>

<div class="code-frame" data-lang="cs">
<div class="code-lang"><span class="bold">SampleSpeechToText.cs</span></div>
<div class="highlight"><pre><code><span class="k">private</span> <span class="n">SpeechToText</span> <span class="n">m_SpeechToText</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">SpeechToText</span><span class="p">();</span>
</code></pre></div>
</div>

<p>ただ変更は最小限としたいため、上記のコードはやはり以下のようにnewを外してやり…</p>

<div class="code-frame" data-lang="cs">
<div class="code-lang"><span class="bold">SampleSpeechToText.cs</span></div>
<div class="highlight"><pre><code><span class="k">private</span> <span class="n">SpeechToText</span> <span class="n">m_SpeechToText</span><span class="p">;</span>
</code></pre></div>
</div>

<p>そして Start() 関数の最初に以下の2行を追加することとします。</p>

<div class="code-frame" data-lang="cs">
<div class="code-lang"><span class="bold">SampleSpeechToText.cs</span></div>
<div class="highlight"><pre><code><span class="n">IEnumerator</span> <span class="nf">Start</span><span class="p">()</span>
<span class="p">{</span>
    <span class="kt">var</span> <span class="n">sstc</span> <span class="p">=</span> <span class="p">(</span><span class="n">SpeechToTextCredential</span><span class="p">)</span><span class="nf">FindObjectOfType</span><span class="p">(</span><span class="k">typeof</span><span class="p">(</span><span class="n">SpeechToTextCredential</span><span class="p">));</span>
    <span class="n">m_SpeechToText</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">SpeechToText</span><span class="p">(</span><span class="n">sstc</span><span class="p">.</span><span class="nf">getCredentials</span><span class="p">());</span>
</code></pre></div>
</div>

<p>古いサンプルコードをそのまま使用できないのは残念ですが、初期化はサービスごとに最初の一回だけですし、場所もだいたいわかっています。この対応で逃げたいとおもいますので、ご了承ください。</p>

<h2>
<span id="実際に古いサンプルコードを利用してみる" class="fragment"></span><a href="#%E5%AE%9F%E9%9A%9B%E3%81%AB%E5%8F%A4%E3%81%84%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB%E3%82%B3%E3%83%BC%E3%83%89%E3%82%92%E5%88%A9%E7%94%A8%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B"><i class="fa fa-link"></i></a>実際に古いサンプルコードを利用してみる</h2>

<p>さてここで <a href="https://www.ibm.com/developerworks/jp/cloud/library/unity/" rel="nofollow noopener" target="_blank">元のdW記事</a> にある最初のサンプルコードをもう一度コピペして試してみましょう。</p>

<p>予想通り最初の new のところでエラーになるので上記の資格情報の修正(ここのnewを消しStart関数の中に2行追加)を実施します。</p>

<p><a href="https://camo.qiitausercontent.com/876f24d1a596492e735cf1d0dd46720f1e0f61ae/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3139333531392f30623165313438612d366366352d363566342d623637382d3164343730623636343634622e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F193519%2F0b1e148a-6cf5-65f4-b678-1d470b66464b.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=213f33e6a406fa3d17326353ea8f8bd1" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/193519/0b1e148a-6cf5-65f4-b678-1d470b66464b.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F193519%2F0b1e148a-6cf5-65f4-b678-1d470b66464b.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=f85c9022aaa5e0b4c40f051406c37848 1x" loading="lazy"></a></p>

<p>以下の赤枠の部分が変更箇所です。</p>

<p><a href="https://camo.qiitausercontent.com/45f72444c5375a0974c4c55f45ef6f9f3e8b8f8f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3139333531392f31356135393437352d306235632d313133652d333730622d3966356339383037316238612e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F193519%2F15a59475-0b5c-113e-370b-9f5c98071b8a.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=17134058db755e0be9409c7cba78fe74" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/193519/15a59475-0b5c-113e-370b-9f5c98071b8a.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F193519%2F15a59475-0b5c-113e-370b-9f5c98071b8a.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=f17ef548dd6373f4e61df76328a52e3e 1x" loading="lazy"></a></p>

<p>これだけの修正でちゃんと動作しました！</p>

<h1>
<span id="他の2つのサービスへの対応" class="fragment"></span><a href="#%E4%BB%96%E3%81%AE2%E3%81%A4%E3%81%AE%E3%82%B5%E3%83%BC%E3%83%93%E3%82%B9%E3%81%B8%E3%81%AE%E5%AF%BE%E5%BF%9C"><i class="fa fa-link"></i></a>他の2つのサービスへの対応</h1>

<p>SpeechToText でうまくいったので、残った2つのAPIへの対応も実施します。</p>

<h2>
<span id="texttospeech-への対応" class="fragment"></span><a href="#texttospeech-%E3%81%B8%E3%81%AE%E5%AF%BE%E5%BF%9C"><i class="fa fa-link"></i></a>TextToSpeech への対応</h2>

<p>TextToSpeech用の資格情報の管理クラスを追加しましょう。SpeechToTextCredential.cs ファイルをコピーしてクラス名を変更しただけなのですが、一応コードを載せておきます。</p>

<div class="code-frame" data-lang="cs">
<div class="code-lang"><span class="bold">TextToSpeechCredential.cs</span></div>
<div class="highlight"><pre><code><span class="k">using</span> <span class="nn">IBM.Watson.DeveloperCloud.Utilities</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UnityEngine</span><span class="p">;</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">TextToSpeechCredential</span> <span class="p">:</span> <span class="n">MonoBehaviour</span> <span class="p">{</span>
    <span class="err">#</span><span class="n">region</span> <span class="n">PLEASE</span> <span class="n">SET</span> <span class="n">THESE</span> <span class="n">VARIABLES</span> <span class="n">IN</span> <span class="n">THE</span> <span class="n">INSPECTOR</span>
    <span class="p">[</span><span class="n">SerializeField</span><span class="p">]</span>
    <span class="k">private</span> <span class="n">Credential</span> <span class="n">_credential</span><span class="p">;</span>
    <span class="p">[</span><span class="n">Serializable</span><span class="p">]</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">Credential</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="kt">string</span> <span class="n">_username</span><span class="p">;</span>
        <span class="k">public</span> <span class="kt">string</span> <span class="n">_password</span><span class="p">;</span>
        <span class="k">public</span> <span class="kt">string</span> <span class="n">_url</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="err">#</span><span class="n">endregion</span>

    <span class="k">public</span> <span class="n">Credentials</span> <span class="nf">getCredentials</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">Credentials</span><span class="p">(</span><span class="n">_credential</span><span class="p">.</span><span class="n">_username</span><span class="p">,</span> <span class="n">_credential</span><span class="p">.</span><span class="n">_password</span><span class="p">,</span> <span class="n">_credential</span><span class="p">.</span><span class="n">_url</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<p>こちらも unity-chan に追加して、資格情報を入力しておきましょう。</p>

<p><a href="https://camo.qiitausercontent.com/8834626276dba795d9ed997807a945a73e8114f4/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3139333531392f63396537376566662d663865622d663865392d383330332d3934326539316337323564362e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F193519%2Fc9e77eff-f8eb-f8e9-8303-942e91c725d6.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=f864807ab3b707f766f5d3825168215c" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/193519/c9e77eff-f8eb-f8e9-8303-942e91c725d6.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F193519%2Fc9e77eff-f8eb-f8e9-8303-942e91c725d6.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=fbaecaf5411e96a7bf36b5d795c44546 1x" loading="lazy"></a></p>

<p>次は古い関数を復活させる TextToSpeechExtender.cs ですね。以下のようなコードになります。</p>

<div class="code-frame" data-lang="cs">
<div class="code-lang"><span class="bold">TextToSpeechExtender.cs</span></div>
<div class="highlight"><pre><code><span class="k">using</span> <span class="nn">IBM.Watson.DeveloperCloud.Services.TextToSpeech.v1</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UnityEngine</span><span class="p">;</span>

<span class="k">public</span> <span class="k">static</span> <span class="k">class</span> <span class="nc">TextToSpeechExtender</span> <span class="p">{</span>

    <span class="k">public</span> <span class="k">static</span> <span class="kt">bool</span> <span class="nf">ToSpeech</span><span class="p">(</span><span class="k">this</span> <span class="n">TextToSpeech</span> <span class="n">tts</span><span class="p">,</span> <span class="kt">string</span> <span class="n">text</span><span class="p">,</span> <span class="n">Action</span><span class="p">&lt;</span><span class="n">AudioClip</span><span class="p">&gt;</span> <span class="n">successCallback</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">Debug</span><span class="p">.</span><span class="nf">LogWarning</span><span class="p">(</span><span class="s">"Deprecated function: TextToSpeech.ToSpeech(text, successCallback)"</span><span class="p">);</span>

        <span class="k">return</span> <span class="n">tts</span><span class="p">.</span><span class="nf">ToSpeech</span><span class="p">((</span><span class="n">r</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
            <span class="nf">successCallback</span><span class="p">(</span><span class="n">r</span><span class="p">);</span>
        <span class="p">},</span> <span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
            <span class="n">Debug</span><span class="p">.</span><span class="nf">Log</span><span class="p">(</span><span class="s">"SpeechToText.OnFail() Error received: "</span> <span class="p">+</span> <span class="n">e</span><span class="p">.</span><span class="nf">ToString</span><span class="p">());</span>
        <span class="p">},</span> <span class="n">text</span><span class="p">);</span>
    <span class="p">}</span>

<span class="p">}</span>
</code></pre></div>
</div>

<p>さて、同様に <a href="https://www.ibm.com/developerworks/jp/cloud/library/unity/" rel="nofollow noopener" target="_blank">元のdW記事</a> にある2番目のサンプルコードをもう一度コピペして試してみましょう。</p>

<p>今回も最初の new のところでエラーになるので同様の修正(ここのnewを消しStart関数の中に2行追加)を実施します。追加する2行は以下になります。</p>

<div class="code-frame" data-lang="cs">
<div class="code-lang"><span class="bold">SampleTextToSpeech.cs</span></div>
<div class="highlight"><pre><code>    <span class="kt">var</span> <span class="n">ttsc</span> <span class="p">=</span> <span class="p">(</span><span class="n">TextToSpeechCredential</span><span class="p">)</span><span class="nf">FindObjectOfType</span><span class="p">(</span><span class="k">typeof</span><span class="p">(</span><span class="n">TextToSpeechCredential</span><span class="p">));</span>
    <span class="n">m_TextToSpeech</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">TextToSpeech</span><span class="p">(</span><span class="n">ttsc</span><span class="p">.</span><span class="nf">getCredentials</span><span class="p">());</span>
</code></pre></div>
</div>

<p>さて実行です。古い関数の警告を出しつつ、古いサンプルプログラムが問題なく動作しました。</p>

<p><a href="https://camo.qiitausercontent.com/2c51cb1c975307ae294e5c2b980a2b8c089cf73f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3139333531392f38313337376365332d326430662d333730322d633139662d3938323931376666643231322e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F193519%2F81377ce3-2d0f-3702-c19f-982917ffd212.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=998f706568c94bd5de5041e4df86de80" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/193519/81377ce3-2d0f-3702-c19f-982917ffd212.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F193519%2F81377ce3-2d0f-3702-c19f-982917ffd212.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=00c017c88cfc247690b9a7e145a3f7f0 1x" loading="lazy"></a></p>

<h2>
<span id="conversation-への対応" class="fragment"></span><a href="#conversation-%E3%81%B8%E3%81%AE%E5%AF%BE%E5%BF%9C"><i class="fa fa-link"></i></a>Conversation への対応</h2>

<p>Conversation用の資格情報の管理クラスを追加しましょう。これも SpeechToTextCredential.cs ファイルをコピーしてクラス名を変更し、更にワークスペースID用のコードを追加しました。以下にコードを載せておきます。</p>

<div class="code-frame" data-lang="cs">
<div class="code-lang"><span class="bold">ConversationCredential.cs</span></div>
<div class="highlight"><pre><code><span class="k">using</span> <span class="nn">IBM.Watson.DeveloperCloud.Utilities</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UnityEngine</span><span class="p">;</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">ConversationCredential</span> <span class="p">:</span> <span class="n">MonoBehaviour</span> <span class="p">{</span>
    <span class="err">#</span><span class="n">region</span> <span class="n">PLEASE</span> <span class="n">SET</span> <span class="n">THESE</span> <span class="n">VARIABLES</span> <span class="n">IN</span> <span class="n">THE</span> <span class="n">INSPECTOR</span>
    <span class="p">[</span><span class="n">SerializeField</span><span class="p">]</span>
    <span class="k">private</span> <span class="n">Credential</span> <span class="n">_credential</span><span class="p">;</span>
    <span class="p">[</span><span class="n">Serializable</span><span class="p">]</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">Credential</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="kt">string</span> <span class="n">_username</span><span class="p">;</span>
        <span class="k">public</span> <span class="kt">string</span> <span class="n">_password</span><span class="p">;</span>
        <span class="k">public</span> <span class="kt">string</span> <span class="n">_url</span><span class="p">;</span>
        <span class="k">public</span> <span class="kt">string</span> <span class="n">_workspace</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="err">#</span><span class="n">endregion</span>

    <span class="k">public</span> <span class="n">Credentials</span> <span class="nf">getCredentials</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">Credentials</span><span class="p">(</span><span class="n">_credential</span><span class="p">.</span><span class="n">_username</span><span class="p">,</span> <span class="n">_credential</span><span class="p">.</span><span class="n">_password</span><span class="p">,</span> <span class="n">_credential</span><span class="p">.</span><span class="n">_url</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">public</span> <span class="kt">string</span> <span class="nf">getWorkspaceID</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="n">_credential</span><span class="p">.</span><span class="n">_workspace</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<p>unity-chanに追加して必要な情報を入力しておきます。</p>

<p><a href="https://camo.qiitausercontent.com/eadf917a83f8fc8291b7db7266bc6aabe4ebb7e0/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3139333531392f39336462333966392d643639342d646461662d653766652d3861653062373166333465382e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F193519%2F93db39f9-d694-ddaf-e7fe-8ae0b71f34e8.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=c2d012b682353365c44c20d3d461d649" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/193519/93db39f9-d694-ddaf-e7fe-8ae0b71f34e8.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F193519%2F93db39f9-d694-ddaf-e7fe-8ae0b71f34e8.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=85d612e8c40dcb6b9e7318fa3b3e0ed1 1x" loading="lazy"></a></p>

<p>次は古い関数を復活させる ConversationExtender.cs ですね。さて、ここが問題です。なんか渡されるデータの形式がまったく異なっていた気がするんですよね…</p>

<p>ちょっと迷ったのですが、以前の関数が返していた MessageResponse 型への変換ロジックも実装してみました。ちょっと面倒でしたが、これなら元原稿の古いサンプルプログラムでもうまく動作します。ただし、ちょっと手抜きをしていまして、今回のお題で使用した属性(intents, intents)だけの対応になっています。</p>

<p>今回の投稿で一番長いコードですね、コレ。</p>

<div class="code-frame" data-lang="cs">
<div class="code-lang"><span class="bold">ConversationExtender.cs</span></div>
<div class="highlight"><pre><code><span class="k">using</span> <span class="nn">IBM.Watson.DeveloperCloud.Services.Conversation.v1</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UnityEngine</span><span class="p">;</span>

<span class="k">public</span> <span class="k">static</span> <span class="k">class</span> <span class="nc">ConversationExtender</span> <span class="p">{</span>

    <span class="k">public</span> <span class="k">static</span> <span class="kt">bool</span> <span class="nf">Message</span><span class="p">(</span><span class="k">this</span> <span class="n">Conversation</span> <span class="n">conv</span><span class="p">,</span> <span class="n">Action</span><span class="p">&lt;</span><span class="n">MessageResponse</span><span class="p">,</span><span class="kt">string</span><span class="p">&gt;</span> <span class="n">successCallback</span><span class="p">,</span> <span class="kt">string</span> <span class="n">m_WorkspaceID</span><span class="p">,</span> <span class="kt">string</span> <span class="n">m_Input</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">conv</span><span class="p">.</span><span class="n">VersionDate</span> <span class="p">=</span> <span class="s">"2017-05-26"</span><span class="p">;</span>

        <span class="n">Debug</span><span class="p">.</span><span class="nf">LogWarning</span><span class="p">(</span><span class="s">"Deprecated function: Conversation.Message(successCallback, m_WorkspaceID, m_Input)"</span><span class="p">);</span>

        <span class="k">return</span> <span class="n">conv</span><span class="p">.</span><span class="nf">Message</span><span class="p">((</span><span class="n">r</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">r</span> <span class="k">is</span> <span class="n">Dictionary</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">,</span> <span class="kt">object</span><span class="p">&gt;)</span>
            <span class="p">{</span>
                <span class="n">Dictionary</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">,</span> <span class="kt">object</span><span class="p">&gt;</span> <span class="n">dic</span> <span class="p">=</span> <span class="p">(</span><span class="n">Dictionary</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">,</span> <span class="kt">object</span><span class="p">&gt;)</span><span class="n">r</span><span class="p">;</span>
                <span class="n">List</span><span class="p">&lt;</span><span class="n">RuntimeIntent</span><span class="p">&gt;</span> <span class="n">ints</span> <span class="p">=</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">RuntimeIntent</span><span class="p">&gt;();</span>
                <span class="k">foreach</span> <span class="p">(</span><span class="kt">object</span> <span class="n">obj_int</span> <span class="k">in</span> <span class="p">(</span><span class="n">List</span><span class="p">&lt;</span><span class="kt">object</span><span class="p">&gt;)</span><span class="n">dic</span><span class="p">[</span><span class="s">"intents"</span><span class="p">])</span>
                <span class="p">{</span>
                    <span class="n">Dictionary</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">,</span> <span class="kt">object</span><span class="p">&gt;</span> <span class="n">dic_int</span> <span class="p">=</span> <span class="p">(</span><span class="n">Dictionary</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">,</span> <span class="kt">object</span><span class="p">&gt;)</span><span class="n">obj_int</span><span class="p">;</span>
                    <span class="n">ints</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="k">new</span> <span class="n">RuntimeIntent</span> <span class="p">{</span> <span class="n">intent</span> <span class="p">=</span> <span class="p">(</span><span class="kt">string</span><span class="p">)</span><span class="n">dic_int</span><span class="p">[</span><span class="s">"intent"</span><span class="p">],</span> <span class="n">confidence</span> <span class="p">=</span> <span class="p">(</span><span class="kt">float</span><span class="p">)(</span><span class="kt">double</span><span class="p">)</span><span class="n">dic_int</span><span class="p">[</span><span class="s">"confidence"</span><span class="p">]</span> <span class="p">});</span>
                <span class="p">}</span>
                <span class="n">Dictionary</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">,</span> <span class="kt">object</span><span class="p">&gt;</span> <span class="n">dic_out</span> <span class="p">=</span> <span class="p">(</span><span class="n">Dictionary</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">,</span> <span class="kt">object</span><span class="p">&gt;)</span><span class="n">dic</span><span class="p">[</span><span class="s">"output"</span><span class="p">];</span>
                <span class="kt">string</span> <span class="n">t</span> <span class="p">=</span> <span class="s">""</span><span class="p">;</span>
                <span class="k">foreach</span> <span class="p">(</span><span class="kt">object</span> <span class="n">obj_out</span> <span class="k">in</span> <span class="p">(</span><span class="n">List</span><span class="p">&lt;</span><span class="kt">object</span><span class="p">&gt;)</span><span class="n">dic_out</span><span class="p">[</span><span class="s">"text"</span><span class="p">])</span>
                <span class="p">{</span>
                    <span class="n">t</span> <span class="p">+=</span> <span class="n">obj_out</span><span class="p">.</span><span class="nf">ToString</span><span class="p">();</span>
                <span class="p">}</span>
                <span class="n">MessageResponse</span> <span class="n">mr</span> <span class="p">=</span> <span class="k">new</span> <span class="n">MessageResponse</span>
                <span class="p">{</span>
                    <span class="n">intents</span> <span class="p">=</span> <span class="n">ints</span><span class="p">.</span><span class="nf">ToArray</span><span class="p">(),</span>
                    <span class="n">output</span> <span class="p">=</span> <span class="k">new</span> <span class="n">OutputData</span> <span class="p">{</span> <span class="n">text</span> <span class="p">=</span> <span class="k">new</span> <span class="kt">string</span><span class="p">[]</span> <span class="p">{</span> <span class="n">t</span> <span class="p">}</span> <span class="p">}</span>
                <span class="p">};</span>
                <span class="nf">successCallback</span><span class="p">(</span><span class="n">mr</span><span class="p">,</span> <span class="s">""</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">},</span> <span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
            <span class="n">Debug</span><span class="p">.</span><span class="nf">Log</span><span class="p">(</span><span class="s">"Conversation.OnFail() Error received: "</span> <span class="p">+</span> <span class="n">e</span><span class="p">.</span><span class="nf">ToString</span><span class="p">());</span>
        <span class="p">},</span> <span class="n">m_WorkspaceID</span><span class="p">,</span> <span class="n">m_Input</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<p>あとエラー対策で VersionDate もここでセットしちゃってます。手抜きなので違う値を使用している方は気を付けてください。(インスペクター化しとくべきだったかな？)</p>

<p>さて、今回も <a href="https://www.ibm.com/developerworks/jp/cloud/library/unity/" rel="nofollow noopener" target="_blank">元のdW記事</a> にある3番目のサンプルコードをもう一度コピペして試してみましょう。</p>

<p>今回も最初の new のところでエラーになるので同様の修正(ここのnewを消しStart関数の中に2行追加)を実施します。またワークスペースIDもcredentialを参照するよう修正し、結果として追加するのは以下の3行になります。</p>

<div class="code-frame" data-lang="cs">
<div class="code-lang"><span class="bold">SampleConversation.cs</span></div>
<div class="highlight"><pre><code>    <span class="n">ConversationCredential</span> <span class="n">cc</span> <span class="p">=</span> <span class="p">(</span><span class="n">ConversationCredential</span><span class="p">)</span><span class="nf">FindObjectOfType</span><span class="p">(</span><span class="k">typeof</span><span class="p">(</span><span class="n">ConversationCredential</span><span class="p">));</span>
    <span class="n">m_WorkspaceID</span> <span class="p">=</span> <span class="n">cc</span><span class="p">.</span><span class="nf">getWorkspaceID</span><span class="p">();</span>
    <span class="n">m_Conversation</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Conversation</span><span class="p">(</span><span class="n">cc</span><span class="p">.</span><span class="nf">getCredentials</span><span class="p">());</span>
</code></pre></div>
</div>

<p>そして以下の using もお忘れなく。</p>

<div class="code-frame" data-lang="cs">
<div class="code-lang"><span class="bold">SampleConversation.cs</span></div>
<div class="highlight"><pre><code><span class="k">using</span> <span class="nn">IBM.Watson.DeveloperCloud.Utilities</span><span class="p">;</span>
</code></pre></div>
</div>

<p>また Intent というクラスは RuntimeIntent になったようなので、お勧めに従ってクラス名を変更してください。</p>

<p><a href="https://camo.qiitausercontent.com/5da13fb4c337852df9716383170eec3422d53c70/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3139333531392f34626235363834652d653264382d646230642d333536652d6533623065373833373732342e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F193519%2F4bb5684e-e2d8-db0d-356e-e3b0e7837724.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=138f4b724a3aef4ed47eb58685df4d45" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/193519/4bb5684e-e2d8-db0d-356e-e3b0e7837724.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F193519%2F4bb5684e-e2d8-db0d-356e-e3b0e7837724.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=c6dfa284b458e6ebdf6f939a31cc5283 1x" loading="lazy"></a></p>

<p>そして実行すると… やった、動作しました！</p>

<p><a href="https://camo.qiitausercontent.com/7f4429b9e0983b05b03e7d36ca0ed8c8ac1ecf06/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3139333531392f61643535333133372d326161652d303938302d316335322d6666633938376130616238662e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F193519%2Fad553137-2aae-0980-1c52-ffc987a0ab8f.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=afc704e384445bff9746f996871bb64d" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/193519/ad553137-2aae-0980-1c52-ffc987a0ab8f.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F193519%2Fad553137-2aae-0980-1c52-ffc987a0ab8f.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=be8d96703fe99745be7421126c431c86 1x" loading="lazy"></a></p>

<p>Conversation はラッパー部分のデータ型の変換で苦労しましたが、結果として他の2つのAPIと同様に初期化部分だけ、最少限の修正だけで対応できるようになり、良かったとおもいます。</p>

<h1>
<span id="というわけで" class="fragment"></span><a href="#%E3%81%A8%E3%81%84%E3%81%86%E3%82%8F%E3%81%91%E3%81%A7"><i class="fa fa-link"></i></a>というわけで</h1>

<p><a href="https://qiita.com/yamachan360/items/402e56f70b585de5f82e">前編</a> もあわせるとちょっと長くなりましたが、如何だったでしょうか。</p>

<p>基本的にはインスペクターを使った *Credential クラスを使用してもらえば、Watson API を Unity で問題なく使用いただけるとおもいます。</p>

<p>IBM の <a href="">developerWorks</a> サイトの記事 <a href="https://www.ibm.com/developerworks/jp/cloud/library/unity/" rel="nofollow noopener" target="_blank">Watson×Unity！初心者でもできる、VR 空間で Unity ちゃんとおしゃべりアプリ！</a> にあるような古いサンプルコードを最少限の修正で動かしたい場合には、ご紹介した *Extender のラッパークラス(実際には拡張メソッド用クラス)を使ってみてください。</p>

<p>これでこんかいの話題はひとだんらくしたかなぁ、と思います。</p>

<p>まあ、もう少し時間があれば確認しておきたいこととしては…</p>

<ul>
<li>元記事で4番目以降のサンプルも今回の修正で問題なく利用できるか</li>
<li>SDK のお勧めとはいえインスペクターにパスワードを平文で残すのはアレなので暗号化も検討</li>
</ul>

<p>ぐらいですかね。まあ更には、</p>

<ul>
<li>使い方は見えたので、そろそろWatsonを利用した自分のコードも書きたい</li>
</ul>

<p>ともおもっています。</p>

<p>何か面白いものができたら、もしくはネタがたまってきたら、また投稿しますね！ではでは。</p>

<h1>
<span id="2018年5月12日追記-unity-20181対応" class="fragment"></span><a href="#2018%E5%B9%B45%E6%9C%8812%E6%97%A5%E8%BF%BD%E8%A8%98-unity-20181%E5%AF%BE%E5%BF%9C"><i class="fa fa-link"></i></a>2018年5月12日追記 (Unity 2018.1対応)</h1>

<p>SampleSpeechToText.cs は Unity 2018.1.0f2 環境で実行したところエラーが発生しましたが、特に使用している様子のない12行目をコメントアウトしたら動作しました。</p>

<p><a href="https://camo.qiitausercontent.com/32efa4b2c483eb626d94f19806c08e244c40c38e/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3139333531392f66363630643137342d336237662d323039642d393333662d6261363836663266336339342e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F193519%2Ff660d174-3b7f-209d-933f-ba686f2f3c94.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=993a51b475c1755d3b29e3b8ee690078" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/193519/f660d174-3b7f-209d-933f-ba686f2f3c94.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F193519%2Ff660d174-3b7f-209d-933f-ba686f2f3c94.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=723340b113eb39f8bde6cae99bc75f4c 1x" loading="lazy"></a></p>

<p>SampleTextToSpeech.cs と SampleConversation.cs はこの記事の修正のままで、問題なく動作しました。</p>
</div></div></section><div class="css-1yzj1fm"><div class="css-1uv1qiv"><span class="fa fa-twitter"></span></div><div class="css-1uv1qiv"><span class="fa fa-facebook"></span></div></div><div class="apm-Content"><div class="apm-Content_title">Why not register and get more from Qiita?</div><ol class="apm-Content_list"><li>We will deliver articles that match you<div class="description">By following users and tags, you can catch up information on technical fields that you are interested in as a whole</div></li><li>you can read useful information later efficiently<div class="description">By &quot;stocking&quot; the articles you like, you can search right away</div></li><div><a class="apm-Content_help" href="https://help.qiita.com/ja/articles/qiita-login-user" target="_blank"><i class="fa fa-fw fa-arrow-circle-right"></i>What you can do with signing up</a></div></ol><a href="/signup?callback_action=login_or_signup&amp;redirect_to=%2Fyamachan360%2Fitems%2Fa36c57e99a68597b8b0d&amp;realm=qiita" class="apm-Content_button apm-Content_button-signup">Sign up</a><a href="/login?callback_action=login_or_signup&amp;redirect_to=%2Fyamachan360%2Fitems%2Fa36c57e99a68597b8b0d&amp;realm=qiita" class="apm-Content_button apm-Content_button-signin">Login</a></div></div><div class="css-helsa7"></div></div></div></div><div class="css-109dbrr"><div class="css-5jpx49"><div class="css-mnxgyc"><button class=" css-1vlpknv"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/yamachan360/items/a36c57e99a68597b8b0d/likers" class="css-1iupg5d">4</a></div><div class="css-fsjkhv"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-1b17vb0">5</span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-7i7f4d"><div class="css-1gj7nt">Improve article</div><a href="/drafts/a36c57e99a68597b8b0d/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/yamachan360/items/a36c57e99a68597b8b0d/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/yamachan360/items/a36c57e99a68597b8b0d/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/yamachan360/items/a36c57e99a68597b8b0d/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/yamachan360/items/a36c57e99a68597b8b0d.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="PersonalArticlePage" data-dom-id="PersonalArticlePage-react-component-49ab8b87-ffe8-4657-8821-6cd00b06094c">{"authorAnalyticsTrackingId":null,"organizationAnalyticsTrackingId":null}</script>
      
<footer id="globalFooter" class="st-Footer"><div class="st-Footer_container"><div class="st-Footer_start"><div class="st-Footer_logo"><svg viewbox="0 0 426.57 130" xmlns="http://www.w3.org/2000/svg"><circle cx="167.08" cy="21.4" r="12.28" /><path d="M250.81 29.66h23.48v18.9h-23.48z" /><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z" /><circle cx="216.33" cy="21.4" r="12.28" /></svg></div><div class="st-Footer_catchcopy">How developers code is here.</div><div class="st-Footer_socials"><a class="fa fa-twitter" href="https://twitter.com/qiita"></a><a class="fa fa-facebook-square" href="https://www.facebook.com/qiita/"></a></div></div><div class="st-Footer_end"><div class="st-Footer_qiita"><div class="st-Footer_label">Qiita</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="/about">About</a><a href="/terms">Terms</a><a href="/privacy">Privacy</a><a target="_blank" href="http://help.qiita.com/ja/articles/qiita-community-guideline">Guideline</a><a target="_blank" href="https://help.qiita.com/ja/articles/others-brand-guideline">Design Guideline</a></div><div class="st-Footer_column"><a href="/release-notes">Release</a><a href="/api/v2/docs">API</a><a href="/feedback/new">ご意見</a><a href="https://help.qiita.com">Help</a><a target="_blank" href="https://qiita.com/ads?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Advertisement</a></div></div></div><div class="st-Footer_increments"><div class="st-Footer_label">Increments</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="https://increments.co.jp/company/">About</a><a href="https://increments.co.jp/jobs/">採用情報</a><a href="https://blog.qiita.com">Blog</a></div><div class="st-Footer_column"><a href="https://teams.qiita.com/">Qiita Team</a><a href="https://jobs.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Jobs</a><a href="https://zine.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Zine</a></div></div></div></div></div><div class="st-Footer_copyright">© 2011-2021 Increments Inc.</div></footer><div id="Snackbar-react-component-324fa4a1-5bc9-4f90-ab78-8fe9235ed661"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="Snackbar" data-dom-id="Snackbar-react-component-324fa4a1-5bc9-4f90-ab78-8fe9235ed661">{}</script>
      
<div id="LoginModal-react-component-71781822-5012-4a59-b3a7-cfb9783f325b"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="LoginModal" data-dom-id="LoginModal-react-component-71781822-5012-4a59-b3a7-cfb9783f325b">{}</script>
      
<div id="StockModal-react-component-53ef17fe-3474-4478-a241-a2062fc4338c"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="StockModal" data-dom-id="StockModal-react-component-53ef17fe-3474-4478-a241-a2062fc4338c">{}</script>
      
</div><div id="dataContainer" style="display: none;" data-config="{&quot;actionPath&quot;:&quot;public/items#show&quot;,&quot;settings&quot;:{&quot;analyticsTrackingId&quot;:&quot;UA-24675221-12&quot;,&quot;assetsMap&quot;:{},&quot;csrfToken&quot;:&quot;G/V0O7kBuOJCqMHZhzMpMTE/C0lf3QfQgST8Ja332gRLd/DR1cZzJPmBk6OevskfPdqsZEGFQE7FlQrEDf3Brg==&quot;,&quot;locale&quot;:&quot;en&quot;},&quot;currentUser&quot;:null}" /></body></html><script type="application/json" data-js-react-on-rails-store="AppStoreWithReactOnRails">{"snackbar":{"type":"","body":"","isActive":false},"article":{"article":{"body":"\u003cp\u003e\u003ca href=\"https://qiita.com/yamachan360/items/402e56f70b585de5f82e\" id=\"reference-5706d14b88ddd99c0259\"\u003e前回\u003c/a\u003e はConfiguration Editorが何をしていたか、どうして消えたか、などを探ってまとめてみました。\u003c/p\u003e\n\n\u003cp\u003e今回は以下を中心に考えていきたいとおもいます。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eConfiguration Editorなしでの資格情報を取り扱いはどう実装したら効果的か\u003c/li\u003e\n\u003cli\u003eSDKの更新で動かなくなったプログラムにはどう対応したら良いか\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"資格情報の扱いについて\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%B3%87%E6%A0%BC%E6%83%85%E5%A0%B1%E3%81%AE%E6%89%B1%E3%81%84%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e資格情報の扱いについて\u003c/h1\u003e\n\n\u003cp\u003e\u003ca href=\"https://qiita.com/yamachan360/items/911204e57957bd4bbef0\" id=\"reference-60c71737dd67e489e406\"\u003e試してみる\u003c/a\u003e や \u003ca href=\"https://qiita.com/yamachan360/items/bcfa10b2d9bf62df8300\" id=\"reference-afb268221e9aff0f4af5\"\u003e続・試してみる\u003c/a\u003e の投稿では、過去のSDKに依存したサンプルプログラムを書き直して公開しました。\u003c/p\u003e\n\n\u003cp\u003eその方法は「資格情報をサンプルプログラムにハードコードする」で、最もお手軽ではあるものの、あまり上品な方法ではありませんでした。ちゃんとしたプロジェクトでやると怒られる手法ですw\u003c/p\u003e\n\n\u003cp\u003eもう少し真っ当な方法を考えてみましょう。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"インスペクターで値を管理する\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%9A%E3%82%AF%E3%82%BF%E3%83%BC%E3%81%A7%E5%80%A4%E3%82%92%E7%AE%A1%E7%90%86%E3%81%99%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eインスペクターで値を管理する\u003c/h2\u003e\n\n\u003cp\u003eUnityという開発ツールにおいて、設定といえばまずインスペクターなんですよね。そこで最初に考えるのは、インスペクターに資格情報を設定するフィールドを表示してあげれば良いのでは？となります。\u003c/p\u003e\n\n\u003cp\u003eそこで調べ始めたのですが… 意外なところにこの答えはありました。灯台元暗し、Unity-SDK の Examples にあるサンプル実装 ServiceExamples です。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/5af9779ca18fe664c8d52ad316afa48c93192b19/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3139333531392f65623335613166342d383935642d643635312d386162622d3633346231373663366632662e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F193519%2Feb35a1f4-895d-d651-8abb-634b176c6f2f.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=4b9d0cfe3ce9ca44dd20d70014a78c4b\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/193519/eb35a1f4-895d-d651-8abb-634b176c6f2f.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F193519%2Feb35a1f4-895d-d651-8abb-634b176c6f2f.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=bc8ad3854cff0e3d9f33409437129a9f 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eさっそくこのシーンファイルをダブルクリックして開いてみますと、いろんなゲームオブジェクトが登録されます。その中には ExampleSpeechToText などもありますね…\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/2f0e4a8a0b658c737a25a5d3b14f7b9266f83117/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3139333531392f31393966653238632d653938372d373732322d636430372d6662396361656362626262372e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F193519%2F199fe28c-e987-7722-cd07-fb9caecbbbb7.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=6c5b40d6fd0105c8a94c645d418e05c0\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/193519/199fe28c-e987-7722-cd07-fb9caecbbbb7.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F193519%2F199fe28c-e987-7722-cd07-fb9caecbbbb7.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=25ec1fc8bc2c8ed09c71a5afe9606d23 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eそしてこれを選択してインスペクターを見てみますと！\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/a9cfb804307abae5f383b29afe5d689c3a270ebf/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3139333531392f38343365663838612d653065302d623937372d333766652d6261313338633264303463312e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F193519%2F843ef88a-e0e0-b977-37fe-ba138c2d04c1.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=24ff8e82e919bc4d59c6c16ed61fbeaa\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/193519/843ef88a-e0e0-b977-37fe-ba138c2d04c1.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F193519%2F843ef88a-e0e0-b977-37fe-ba138c2d04c1.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=310a32260e92708b0e995ff171485b21 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eほら見事に資格情報の設定欄が… コード読んだり、ググったり資料探す前に、用意されたExampleコード読めよ！と。ですよね、開発者はそうあるべきでした。未熟すぎ、甘えてましたね自分。\u003c/p\u003e\n\n\u003cp\u003eさて、実際のコードの最初のほうを見てみましょう。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"cs\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eExampleSpeechToText.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eExampleSpeechToText\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eMonoBehaviour\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"err\"\u003e#\u003c/span\u003e\u003cspan class=\"n\"\u003eregion\u003c/span\u003e \u003cspan class=\"n\"\u003ePLEASE\u003c/span\u003e \u003cspan class=\"n\"\u003eSET\u003c/span\u003e \u003cspan class=\"n\"\u003eTHESE\u003c/span\u003e \u003cspan class=\"n\"\u003eVARIABLES\u003c/span\u003e \u003cspan class=\"n\"\u003eIN\u003c/span\u003e \u003cspan class=\"n\"\u003eTHE\u003c/span\u003e \u003cspan class=\"n\"\u003eINSPECTOR\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eSerializeField\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003e_username\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eSerializeField\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003e_password\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eSerializeField\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003e_url\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"err\"\u003e#\u003c/span\u003e\u003cspan class=\"n\"\u003eendregion\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003eSpeechToText\u003c/span\u003e \u003cspan class=\"n\"\u003e_speechToText\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003eこれがインスペクターに表示されている部分ですね。private宣言ですが[SerializeField]があるので入力項目として表示されています。\u003c/p\u003e\n\n\u003cp\u003eそして _speechToText ですが Start() のなかでこの資格情報を用いて初期化されています。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"cs\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eExampleSpeechToText.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e    \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eStart\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eLogSystem\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eInstallDefaultReactors\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n        \u003cspan class=\"c1\"\u003e//  Create credential and instantiate service\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eCredentials\u003c/span\u003e \u003cspan class=\"n\"\u003ecredentials\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eCredentials\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003e_username\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003e_password\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003e_url\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n        \u003cspan class=\"n\"\u003e_speechToText\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eSpeechToText\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ecredentials\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"n\"\u003e_customCorpusFilePath\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eApplication\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003edataPath\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"s\"\u003e\"/Watson/Examples/ServiceExamples/TestData/theJabberwocky-utf8.txt\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"n\"\u003e_customWordsFilePath\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eApplication\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003edataPath\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"s\"\u003e\"/Watson/Examples/ServiceExamples/TestData/test-stt-words.json\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"n\"\u003e_acousticResourceMimeType\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eUtility\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eGetMimeType\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ePath\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eGetExtension\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003e_acousticResourceUrl\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n        \u003cspan class=\"n\"\u003e_oggResourceMimeType\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eUtility\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eGetMimeType\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ePath\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eGetExtension\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003e_oggResourceUrl\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n\n        \u003cspan class=\"n\"\u003e_speechToText\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eStreamMultipart\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n        \u003cspan class=\"n\"\u003eRunnable\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eRun\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nf\"\u003eExamples\u003c/span\u003e\u003cspan class=\"p\"\u003e());\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003eうん、シンプルで、いかにもUnityっぽいサンプルで良いですね。SDKのExampleなのですから、開発側の推奨する使い方はコレなんだろうという安心感もあります。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"インスペクターで実装してみよう\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%9A%E3%82%AF%E3%82%BF%E3%83%BC%E3%81%A7%E5%AE%9F%E8%A3%85%E3%81%97%E3%81%A6%E3%81%BF%E3%82%88%E3%81%86\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eインスペクターで実装してみよう\u003c/h2\u003e\n\n\u003cp\u003eこのExampleから、必要最低限の機能を抜き出してクラスを作成してみましょう。名前はベタですが SpeechToTextCredential としました。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"cs\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eSpeechToTextCredential.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eIBM.Watson.DeveloperCloud.Utilities\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eUnityEngine\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eSpeechToTextCredential\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eMonoBehaviour\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"err\"\u003e#\u003c/span\u003e\u003cspan class=\"n\"\u003eregion\u003c/span\u003e \u003cspan class=\"n\"\u003ePLEASE\u003c/span\u003e \u003cspan class=\"n\"\u003eSET\u003c/span\u003e \u003cspan class=\"n\"\u003eTHESE\u003c/span\u003e \u003cspan class=\"n\"\u003eVARIABLES\u003c/span\u003e \u003cspan class=\"n\"\u003eIN\u003c/span\u003e \u003cspan class=\"n\"\u003eTHE\u003c/span\u003e \u003cspan class=\"n\"\u003eINSPECTOR\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eSerializeField\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003eCredential\u003c/span\u003e \u003cspan class=\"n\"\u003e_credential\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eSerializable\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eCredential\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003e_username\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003e_password\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003e_url\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"err\"\u003e#\u003c/span\u003e\u003cspan class=\"n\"\u003eendregion\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eCredentials\u003c/span\u003e \u003cspan class=\"nf\"\u003egetCredentials\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eCredentials\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003e_credential\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003e_username\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003e_credential\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003e_password\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003e_credential\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003e_url\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e違いですが、やはりパスワードとか丸見えなのはアレなので、クラスにまとめてみました。こうするとインスペクター上ではまとまったデータとして表示されるので分かりやすいですし、入力後は閉じて隠すこともできます。\u003c/p\u003e\n\n\u003cp\u003eunity-chan に追加した後はこんな感じ。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/be1cd8ee56fbc7efa47a4944f6fbc02656acf50f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3139333531392f32383035636264642d376136372d613866612d383333622d3131376435366537336438302e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F193519%2F2805cbdd-7a67-a8fa-833b-117d56e73d80.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=7a64460ab52e261508462fedfacd047e\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/193519/2805cbdd-7a67-a8fa-833b-117d56e73d80.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F193519%2F2805cbdd-7a67-a8fa-833b-117d56e73d80.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=4dbd2ddf41ec6703327918ceb43c9460 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"過去のコードとの互換性を考慮してみる\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E9%81%8E%E5%8E%BB%E3%81%AE%E3%82%B3%E3%83%BC%E3%83%89%E3%81%A8%E3%81%AE%E4%BA%92%E6%8F%9B%E6%80%A7%E3%82%92%E8%80%83%E6%85%AE%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e過去のコードとの互換性を考慮してみる\u003c/h2\u003e\n\n\u003cp\u003eSpeechToText では過去のコードの修正点は以下のふたつでした。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e資格情報の簡易ツールが無いのでコードで設定してあげないと駄目\u003c/li\u003e\n\u003cli\u003e処理関数の順番が変わっており、エラー時に呼ばれる OnFail 関数を追加してあげないと駄目\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"古い関数の復活\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%8F%A4%E3%81%84%E9%96%A2%E6%95%B0%E3%81%AE%E5%BE%A9%E6%B4%BB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e古い関数の復活\u003c/h2\u003e\n\n\u003cp\u003eこの二つ目の問題を先に解決してしまいましょう。C# にはこういった場合に力強い味方が居ます、それが \u003ca href=\"https://docs.microsoft.com/ja-jp/dotnet/csharp/programming-guide/classes-and-structs/extension-methods\" rel=\"nofollow noopener\" target=\"_blank\"\u003e拡張メソッド\u003c/a\u003e で、既存のクラスを後から拡張できるという、裏技のような記述方法です。\u003c/p\u003e\n\n\u003cp\u003e既存の SpeechToText クラスを拡張するので、SpeechToTextExtender というクラスを新規作成します。コードは以下のようになります。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"cs\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eSpeechToTextExtender.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eIBM.Watson.DeveloperCloud.Services.SpeechToText.v1\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eIBM.Watson.DeveloperCloud.Services.Assistant.v1\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eIBM.Watson.DeveloperCloud.Connection\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem.Collections\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem.Collections.Generic\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eUnityEngine\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003estatic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eSpeechToTextExtender\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003estatic\u003c/span\u003e \u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"nf\"\u003eRecognize\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e \u003cspan class=\"n\"\u003eSpeechToText\u003c/span\u003e \u003cspan class=\"n\"\u003estt\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eAudioClip\u003c/span\u003e \u003cspan class=\"n\"\u003eclip\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eAction\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eSpeechRecognitionEvent\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003esuccessCallback\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003estt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eKeywords\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003estt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eKeywords\u003c/span\u003e \u003cspan class=\"p\"\u003e==\u003c/span\u003e \u003cspan class=\"k\"\u003enull\u003c/span\u003e \u003cspan class=\"p\"\u003e?\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e[]\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"s\"\u003e\"ibm\"\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003estt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eKeywords\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"n\"\u003estt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eKeywordsThreshold\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003estt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eKeywordsThreshold\u003c/span\u003e \u003cspan class=\"p\"\u003e==\u003c/span\u003e \u003cspan class=\"k\"\u003enull\u003c/span\u003e \u003cspan class=\"p\"\u003e?\u003c/span\u003e \u003cspan class=\"m\"\u003e0.1f\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003estt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eKeywordsThreshold\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n        \u003cspan class=\"n\"\u003eDebug\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eLogWarning\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Deprecated function: SpeechToText.Recognize(successCallback, clip)\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003estt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eRecognize\u003c/span\u003e\u003cspan class=\"p\"\u003e((\u003c/span\u003e\u003cspan class=\"n\"\u003er\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ec\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"nf\"\u003esuccessCallback\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003er\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e},\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ee\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ec\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eDebug\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eLog\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"SpeechToText.OnFail() Error received: \"\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"n\"\u003ee\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eToString\u003c/span\u003e\u003cspan class=\"p\"\u003e());\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e},\u003c/span\u003e \u003cspan class=\"n\"\u003eclip\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003eC#の拡張メソッドを初めて見た方は、なんじゃこりゃ？って感じでしょう。私もそうです。\u003c/p\u003e\n\n\u003cp\u003eこのコードでやっていることは、古いサンプルで使われているRecognize関数(引数が少ないバージョン)が削除されてしまったので、あらためて追加してあげる、です。いわゆるラッパー？実際にはエンハンサー。\u003c/p\u003e\n\n\u003cp\u003eこのコードを作成してプロジェクトに含めることで、元となる SpeechToText クラスに古いRecognize関数が復活します。つまり古いサンプルプログラムを書き直す必要がなくなるのです。\u003c/p\u003e\n\n\u003cp\u003eただしあくまで古い関数ですので、実行時にはログに警告文を表示させています。今後はなるべく使わないでね、と。Javaとかでよくある警告文ですね。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/aa911a0395378701368e9ccf2c75e57839f57abb/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3139333531392f30623264633531342d366663392d653236362d616461342d3964383264613432323839652e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F193519%2F0b2dc514-6fc9-e266-ada4-9d82da42289e.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=48373838133f10251ec2eb727a7ca894\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/193519/0b2dc514-6fc9-e266-ada4-9d82da42289e.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F193519%2F0b2dc514-6fc9-e266-ada4-9d82da42289e.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=f6f336229dcd1d8aca372303e5743ce0 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eなお先頭の2行で設定している Keywords と KeywordsThreshold は、何故か設定しないとエラーになるから、です。詳しくは \u003ca href=\"https://qiita.com/yamachan360/items/911204e57957bd4bbef0#%E3%81%A8%E3%81%84%E3%81%86%E3%82%8F%E3%81%91%E3%81%A7%E5%AF%BE%E5%BF%9C%E7%AD%96%E3%81%A8%E3%81%97%E3%81%A6%E3%81%AF\" id=\"reference-60c71737dd67e489e406\"\u003e以前の投稿\u003c/a\u003e をみてください。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"資格情報の読み込み\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%B3%87%E6%A0%BC%E6%83%85%E5%A0%B1%E3%81%AE%E8%AA%AD%E3%81%BF%E8%BE%BC%E3%81%BF\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e資格情報の読み込み\u003c/h2\u003e\n\n\u003cp\u003eさて残りの資格情報の問題も拡張メソッドで対応しましょう！と考えていましたが、無理でした。拡張メソッドではコンストラクタは追加できません。\u003c/p\u003e\n\n\u003cp\u003eかといってSDKのコードを修正しちゃう度胸はないので… 結果として、古いサンプルにある以下の行は、やはり書き換えないとどうしようもありません。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"cs\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eSampleSpeechToText.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003eSpeechToText\u003c/span\u003e \u003cspan class=\"n\"\u003em_SpeechToText\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eSpeechToText\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003eただ変更は最小限としたいため、上記のコードはやはり以下のようにnewを外してやり…\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"cs\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eSampleSpeechToText.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003eSpeechToText\u003c/span\u003e \u003cspan class=\"n\"\u003em_SpeechToText\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003eそして Start() 関数の最初に以下の2行を追加することとします。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"cs\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eSampleSpeechToText.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"n\"\u003eIEnumerator\u003c/span\u003e \u003cspan class=\"nf\"\u003eStart\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003esstc\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eSpeechToTextCredential\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"nf\"\u003eFindObjectOfType\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003etypeof\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eSpeechToTextCredential\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n    \u003cspan class=\"n\"\u003em_SpeechToText\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eSpeechToText\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003esstc\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003egetCredentials\u003c/span\u003e\u003cspan class=\"p\"\u003e());\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e古いサンプルコードをそのまま使用できないのは残念ですが、初期化はサービスごとに最初の一回だけですし、場所もだいたいわかっています。この対応で逃げたいとおもいますので、ご了承ください。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"実際に古いサンプルコードを利用してみる\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AE%9F%E9%9A%9B%E3%81%AB%E5%8F%A4%E3%81%84%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB%E3%82%B3%E3%83%BC%E3%83%89%E3%82%92%E5%88%A9%E7%94%A8%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e実際に古いサンプルコードを利用してみる\u003c/h2\u003e\n\n\u003cp\u003eさてここで \u003ca href=\"https://www.ibm.com/developerworks/jp/cloud/library/unity/\" rel=\"nofollow noopener\" target=\"_blank\"\u003e元のdW記事\u003c/a\u003e にある最初のサンプルコードをもう一度コピペして試してみましょう。\u003c/p\u003e\n\n\u003cp\u003e予想通り最初の new のところでエラーになるので上記の資格情報の修正(ここのnewを消しStart関数の中に2行追加)を実施します。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/876f24d1a596492e735cf1d0dd46720f1e0f61ae/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3139333531392f30623165313438612d366366352d363566342d623637382d3164343730623636343634622e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F193519%2F0b1e148a-6cf5-65f4-b678-1d470b66464b.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=213f33e6a406fa3d17326353ea8f8bd1\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/193519/0b1e148a-6cf5-65f4-b678-1d470b66464b.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F193519%2F0b1e148a-6cf5-65f4-b678-1d470b66464b.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=f85c9022aaa5e0b4c40f051406c37848 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e以下の赤枠の部分が変更箇所です。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/45f72444c5375a0974c4c55f45ef6f9f3e8b8f8f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3139333531392f31356135393437352d306235632d313133652d333730622d3966356339383037316238612e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F193519%2F15a59475-0b5c-113e-370b-9f5c98071b8a.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=17134058db755e0be9409c7cba78fe74\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/193519/15a59475-0b5c-113e-370b-9f5c98071b8a.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F193519%2F15a59475-0b5c-113e-370b-9f5c98071b8a.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=f17ef548dd6373f4e61df76328a52e3e 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eこれだけの修正でちゃんと動作しました！\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"他の2つのサービスへの対応\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E4%BB%96%E3%81%AE2%E3%81%A4%E3%81%AE%E3%82%B5%E3%83%BC%E3%83%93%E3%82%B9%E3%81%B8%E3%81%AE%E5%AF%BE%E5%BF%9C\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e他の2つのサービスへの対応\u003c/h1\u003e\n\n\u003cp\u003eSpeechToText でうまくいったので、残った2つのAPIへの対応も実施します。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"texttospeech-への対応\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#texttospeech-%E3%81%B8%E3%81%AE%E5%AF%BE%E5%BF%9C\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eTextToSpeech への対応\u003c/h2\u003e\n\n\u003cp\u003eTextToSpeech用の資格情報の管理クラスを追加しましょう。SpeechToTextCredential.cs ファイルをコピーしてクラス名を変更しただけなのですが、一応コードを載せておきます。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"cs\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eTextToSpeechCredential.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eIBM.Watson.DeveloperCloud.Utilities\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eUnityEngine\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eTextToSpeechCredential\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eMonoBehaviour\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"err\"\u003e#\u003c/span\u003e\u003cspan class=\"n\"\u003eregion\u003c/span\u003e \u003cspan class=\"n\"\u003ePLEASE\u003c/span\u003e \u003cspan class=\"n\"\u003eSET\u003c/span\u003e \u003cspan class=\"n\"\u003eTHESE\u003c/span\u003e \u003cspan class=\"n\"\u003eVARIABLES\u003c/span\u003e \u003cspan class=\"n\"\u003eIN\u003c/span\u003e \u003cspan class=\"n\"\u003eTHE\u003c/span\u003e \u003cspan class=\"n\"\u003eINSPECTOR\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eSerializeField\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003eCredential\u003c/span\u003e \u003cspan class=\"n\"\u003e_credential\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eSerializable\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eCredential\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003e_username\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003e_password\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003e_url\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"err\"\u003e#\u003c/span\u003e\u003cspan class=\"n\"\u003eendregion\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eCredentials\u003c/span\u003e \u003cspan class=\"nf\"\u003egetCredentials\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eCredentials\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003e_credential\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003e_username\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003e_credential\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003e_password\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003e_credential\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003e_url\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003eこちらも unity-chan に追加して、資格情報を入力しておきましょう。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/8834626276dba795d9ed997807a945a73e8114f4/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3139333531392f63396537376566662d663865622d663865392d383330332d3934326539316337323564362e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F193519%2Fc9e77eff-f8eb-f8e9-8303-942e91c725d6.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=f864807ab3b707f766f5d3825168215c\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/193519/c9e77eff-f8eb-f8e9-8303-942e91c725d6.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F193519%2Fc9e77eff-f8eb-f8e9-8303-942e91c725d6.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=fbaecaf5411e96a7bf36b5d795c44546 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e次は古い関数を復活させる TextToSpeechExtender.cs ですね。以下のようなコードになります。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"cs\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eTextToSpeechExtender.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eIBM.Watson.DeveloperCloud.Services.TextToSpeech.v1\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eUnityEngine\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003estatic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eTextToSpeechExtender\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003estatic\u003c/span\u003e \u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"nf\"\u003eToSpeech\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e \u003cspan class=\"n\"\u003eTextToSpeech\u003c/span\u003e \u003cspan class=\"n\"\u003etts\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003etext\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eAction\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eAudioClip\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003esuccessCallback\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eDebug\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eLogWarning\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Deprecated function: TextToSpeech.ToSpeech(text, successCallback)\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003etts\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eToSpeech\u003c/span\u003e\u003cspan class=\"p\"\u003e((\u003c/span\u003e\u003cspan class=\"n\"\u003er\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ec\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"nf\"\u003esuccessCallback\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003er\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e},\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ee\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ec\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eDebug\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eLog\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"SpeechToText.OnFail() Error received: \"\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"n\"\u003ee\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eToString\u003c/span\u003e\u003cspan class=\"p\"\u003e());\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e},\u003c/span\u003e \u003cspan class=\"n\"\u003etext\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003eさて、同様に \u003ca href=\"https://www.ibm.com/developerworks/jp/cloud/library/unity/\" rel=\"nofollow noopener\" target=\"_blank\"\u003e元のdW記事\u003c/a\u003e にある2番目のサンプルコードをもう一度コピペして試してみましょう。\u003c/p\u003e\n\n\u003cp\u003e今回も最初の new のところでエラーになるので同様の修正(ここのnewを消しStart関数の中に2行追加)を実施します。追加する2行は以下になります。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"cs\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eSampleTextToSpeech.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003ettsc\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eTextToSpeechCredential\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"nf\"\u003eFindObjectOfType\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003etypeof\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eTextToSpeechCredential\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n    \u003cspan class=\"n\"\u003em_TextToSpeech\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eTextToSpeech\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ettsc\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003egetCredentials\u003c/span\u003e\u003cspan class=\"p\"\u003e());\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003eさて実行です。古い関数の警告を出しつつ、古いサンプルプログラムが問題なく動作しました。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/2c51cb1c975307ae294e5c2b980a2b8c089cf73f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3139333531392f38313337376365332d326430662d333730322d633139662d3938323931376666643231322e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F193519%2F81377ce3-2d0f-3702-c19f-982917ffd212.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=998f706568c94bd5de5041e4df86de80\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/193519/81377ce3-2d0f-3702-c19f-982917ffd212.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F193519%2F81377ce3-2d0f-3702-c19f-982917ffd212.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=00c017c88cfc247690b9a7e145a3f7f0 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"conversation-への対応\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#conversation-%E3%81%B8%E3%81%AE%E5%AF%BE%E5%BF%9C\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eConversation への対応\u003c/h2\u003e\n\n\u003cp\u003eConversation用の資格情報の管理クラスを追加しましょう。これも SpeechToTextCredential.cs ファイルをコピーしてクラス名を変更し、更にワークスペースID用のコードを追加しました。以下にコードを載せておきます。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"cs\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eConversationCredential.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eIBM.Watson.DeveloperCloud.Utilities\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eUnityEngine\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eConversationCredential\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eMonoBehaviour\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"err\"\u003e#\u003c/span\u003e\u003cspan class=\"n\"\u003eregion\u003c/span\u003e \u003cspan class=\"n\"\u003ePLEASE\u003c/span\u003e \u003cspan class=\"n\"\u003eSET\u003c/span\u003e \u003cspan class=\"n\"\u003eTHESE\u003c/span\u003e \u003cspan class=\"n\"\u003eVARIABLES\u003c/span\u003e \u003cspan class=\"n\"\u003eIN\u003c/span\u003e \u003cspan class=\"n\"\u003eTHE\u003c/span\u003e \u003cspan class=\"n\"\u003eINSPECTOR\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eSerializeField\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eprivate\u003c/span\u003e \u003cspan class=\"n\"\u003eCredential\u003c/span\u003e \u003cspan class=\"n\"\u003e_credential\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eSerializable\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eCredential\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003e_username\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003e_password\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003e_url\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003e_workspace\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"err\"\u003e#\u003c/span\u003e\u003cspan class=\"n\"\u003eendregion\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eCredentials\u003c/span\u003e \u003cspan class=\"nf\"\u003egetCredentials\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eCredentials\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003e_credential\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003e_username\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003e_credential\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003e_password\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003e_credential\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003e_url\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"nf\"\u003egetWorkspaceID\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003e_credential\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003e_workspace\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003eunity-chanに追加して必要な情報を入力しておきます。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/eadf917a83f8fc8291b7db7266bc6aabe4ebb7e0/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3139333531392f39336462333966392d643639342d646461662d653766652d3861653062373166333465382e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F193519%2F93db39f9-d694-ddaf-e7fe-8ae0b71f34e8.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=c2d012b682353365c44c20d3d461d649\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/193519/93db39f9-d694-ddaf-e7fe-8ae0b71f34e8.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F193519%2F93db39f9-d694-ddaf-e7fe-8ae0b71f34e8.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=85d612e8c40dcb6b9e7318fa3b3e0ed1 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e次は古い関数を復活させる ConversationExtender.cs ですね。さて、ここが問題です。なんか渡されるデータの形式がまったく異なっていた気がするんですよね…\u003c/p\u003e\n\n\u003cp\u003eちょっと迷ったのですが、以前の関数が返していた MessageResponse 型への変換ロジックも実装してみました。ちょっと面倒でしたが、これなら元原稿の古いサンプルプログラムでもうまく動作します。ただし、ちょっと手抜きをしていまして、今回のお題で使用した属性(intents, intents)だけの対応になっています。\u003c/p\u003e\n\n\u003cp\u003e今回の投稿で一番長いコードですね、コレ。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"cs\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eConversationExtender.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eIBM.Watson.DeveloperCloud.Services.Conversation.v1\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem.Collections.Generic\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eUnityEngine\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003estatic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eConversationExtender\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003estatic\u003c/span\u003e \u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"nf\"\u003eMessage\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e \u003cspan class=\"n\"\u003eConversation\u003c/span\u003e \u003cspan class=\"n\"\u003econv\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eAction\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eMessageResponse\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003esuccessCallback\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003em_WorkspaceID\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003em_Input\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003econv\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eVersionDate\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"2017-05-26\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n        \u003cspan class=\"n\"\u003eDebug\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eLogWarning\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Deprecated function: Conversation.Message(successCallback, m_WorkspaceID, m_Input)\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003econv\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eMessage\u003c/span\u003e\u003cspan class=\"p\"\u003e((\u003c/span\u003e\u003cspan class=\"n\"\u003er\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ec\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003er\u003c/span\u003e \u003cspan class=\"k\"\u003eis\u003c/span\u003e \u003cspan class=\"n\"\u003eDictionary\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003eobject\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;)\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"n\"\u003eDictionary\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003eobject\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003edic\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eDictionary\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003eobject\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;)\u003c/span\u003e\u003cspan class=\"n\"\u003er\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n                \u003cspan class=\"n\"\u003eList\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eRuntimeIntent\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eints\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eList\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eRuntimeIntent\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;();\u003c/span\u003e\n                \u003cspan class=\"k\"\u003eforeach\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eobject\u003c/span\u003e \u003cspan class=\"n\"\u003eobj_int\u003c/span\u003e \u003cspan class=\"k\"\u003ein\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eList\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eobject\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;)\u003c/span\u003e\u003cspan class=\"n\"\u003edic\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s\"\u003e\"intents\"\u003c/span\u003e\u003cspan class=\"p\"\u003e])\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                    \u003cspan class=\"n\"\u003eDictionary\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003eobject\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003edic_int\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eDictionary\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003eobject\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;)\u003c/span\u003e\u003cspan class=\"n\"\u003eobj_int\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n                    \u003cspan class=\"n\"\u003eints\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAdd\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eRuntimeIntent\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"n\"\u003eintent\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"n\"\u003edic_int\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s\"\u003e\"intent\"\u003c/span\u003e\u003cspan class=\"p\"\u003e],\u003c/span\u003e \u003cspan class=\"n\"\u003econfidence\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003efloat\u003c/span\u003e\u003cspan class=\"p\"\u003e)(\u003c/span\u003e\u003cspan class=\"kt\"\u003edouble\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"n\"\u003edic_int\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s\"\u003e\"confidence\"\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"p\"\u003e});\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n                \u003cspan class=\"n\"\u003eDictionary\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003eobject\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003edic_out\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eDictionary\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003eobject\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;)\u003c/span\u003e\u003cspan class=\"n\"\u003edic\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s\"\u003e\"output\"\u003c/span\u003e\u003cspan class=\"p\"\u003e];\u003c/span\u003e\n                \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003et\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n                \u003cspan class=\"k\"\u003eforeach\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eobject\u003c/span\u003e \u003cspan class=\"n\"\u003eobj_out\u003c/span\u003e \u003cspan class=\"k\"\u003ein\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eList\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eobject\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;)\u003c/span\u003e\u003cspan class=\"n\"\u003edic_out\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s\"\u003e\"text\"\u003c/span\u003e\u003cspan class=\"p\"\u003e])\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                    \u003cspan class=\"n\"\u003et\u003c/span\u003e \u003cspan class=\"p\"\u003e+=\u003c/span\u003e \u003cspan class=\"n\"\u003eobj_out\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eToString\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n                \u003cspan class=\"n\"\u003eMessageResponse\u003c/span\u003e \u003cspan class=\"n\"\u003emr\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eMessageResponse\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                    \u003cspan class=\"n\"\u003eintents\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eints\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eToArray\u003c/span\u003e\u003cspan class=\"p\"\u003e(),\u003c/span\u003e\n                    \u003cspan class=\"n\"\u003eoutput\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eOutputData\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"n\"\u003etext\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e[]\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"n\"\u003et\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e};\u003c/span\u003e\n                \u003cspan class=\"nf\"\u003esuccessCallback\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003emr\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\"\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e},\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ee\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ec\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eDebug\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eLog\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Conversation.OnFail() Error received: \"\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"n\"\u003ee\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eToString\u003c/span\u003e\u003cspan class=\"p\"\u003e());\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e},\u003c/span\u003e \u003cspan class=\"n\"\u003em_WorkspaceID\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003em_Input\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003eあとエラー対策で VersionDate もここでセットしちゃってます。手抜きなので違う値を使用している方は気を付けてください。(インスペクター化しとくべきだったかな？)\u003c/p\u003e\n\n\u003cp\u003eさて、今回も \u003ca href=\"https://www.ibm.com/developerworks/jp/cloud/library/unity/\" rel=\"nofollow noopener\" target=\"_blank\"\u003e元のdW記事\u003c/a\u003e にある3番目のサンプルコードをもう一度コピペして試してみましょう。\u003c/p\u003e\n\n\u003cp\u003e今回も最初の new のところでエラーになるので同様の修正(ここのnewを消しStart関数の中に2行追加)を実施します。またワークスペースIDもcredentialを参照するよう修正し、結果として追加するのは以下の3行になります。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"cs\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eSampleConversation.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e    \u003cspan class=\"n\"\u003eConversationCredential\u003c/span\u003e \u003cspan class=\"n\"\u003ecc\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eConversationCredential\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"nf\"\u003eFindObjectOfType\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003etypeof\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eConversationCredential\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n    \u003cspan class=\"n\"\u003em_WorkspaceID\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ecc\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003egetWorkspaceID\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n    \u003cspan class=\"n\"\u003em_Conversation\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eConversation\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ecc\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003egetCredentials\u003c/span\u003e\u003cspan class=\"p\"\u003e());\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003eそして以下の using もお忘れなく。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"cs\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eSampleConversation.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eIBM.Watson.DeveloperCloud.Utilities\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003eまた Intent というクラスは RuntimeIntent になったようなので、お勧めに従ってクラス名を変更してください。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/5da13fb4c337852df9716383170eec3422d53c70/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3139333531392f34626235363834652d653264382d646230642d333536652d6533623065373833373732342e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F193519%2F4bb5684e-e2d8-db0d-356e-e3b0e7837724.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=138f4b724a3aef4ed47eb58685df4d45\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/193519/4bb5684e-e2d8-db0d-356e-e3b0e7837724.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F193519%2F4bb5684e-e2d8-db0d-356e-e3b0e7837724.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=c6dfa284b458e6ebdf6f939a31cc5283 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eそして実行すると… やった、動作しました！\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/7f4429b9e0983b05b03e7d36ca0ed8c8ac1ecf06/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3139333531392f61643535333133372d326161652d303938302d316335322d6666633938376130616238662e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F193519%2Fad553137-2aae-0980-1c52-ffc987a0ab8f.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=afc704e384445bff9746f996871bb64d\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/193519/ad553137-2aae-0980-1c52-ffc987a0ab8f.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F193519%2Fad553137-2aae-0980-1c52-ffc987a0ab8f.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=be8d96703fe99745be7421126c431c86 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eConversation はラッパー部分のデータ型の変換で苦労しましたが、結果として他の2つのAPIと同様に初期化部分だけ、最少限の修正だけで対応できるようになり、良かったとおもいます。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"というわけで\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%A8%E3%81%84%E3%81%86%E3%82%8F%E3%81%91%E3%81%A7\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eというわけで\u003c/h1\u003e\n\n\u003cp\u003e\u003ca href=\"https://qiita.com/yamachan360/items/402e56f70b585de5f82e\"\u003e前編\u003c/a\u003e もあわせるとちょっと長くなりましたが、如何だったでしょうか。\u003c/p\u003e\n\n\u003cp\u003e基本的にはインスペクターを使った *Credential クラスを使用してもらえば、Watson API を Unity で問題なく使用いただけるとおもいます。\u003c/p\u003e\n\n\u003cp\u003eIBM の \u003ca href=\"\"\u003edeveloperWorks\u003c/a\u003e サイトの記事 \u003ca href=\"https://www.ibm.com/developerworks/jp/cloud/library/unity/\" rel=\"nofollow noopener\" target=\"_blank\"\u003eWatson×Unity！初心者でもできる、VR 空間で Unity ちゃんとおしゃべりアプリ！\u003c/a\u003e にあるような古いサンプルコードを最少限の修正で動かしたい場合には、ご紹介した *Extender のラッパークラス(実際には拡張メソッド用クラス)を使ってみてください。\u003c/p\u003e\n\n\u003cp\u003eこれでこんかいの話題はひとだんらくしたかなぁ、と思います。\u003c/p\u003e\n\n\u003cp\u003eまあ、もう少し時間があれば確認しておきたいこととしては…\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e元記事で4番目以降のサンプルも今回の修正で問題なく利用できるか\u003c/li\u003e\n\u003cli\u003eSDK のお勧めとはいえインスペクターにパスワードを平文で残すのはアレなので暗号化も検討\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eぐらいですかね。まあ更には、\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e使い方は見えたので、そろそろWatsonを利用した自分のコードも書きたい\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eともおもっています。\u003c/p\u003e\n\n\u003cp\u003e何か面白いものができたら、もしくはネタがたまってきたら、また投稿しますね！ではでは。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"2018年5月12日追記-unity-20181対応\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#2018%E5%B9%B45%E6%9C%8812%E6%97%A5%E8%BF%BD%E8%A8%98-unity-20181%E5%AF%BE%E5%BF%9C\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e2018年5月12日追記 (Unity 2018.1対応)\u003c/h1\u003e\n\n\u003cp\u003eSampleSpeechToText.cs は Unity 2018.1.0f2 環境で実行したところエラーが発生しましたが、特に使用している様子のない12行目をコメントアウトしたら動作しました。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/32efa4b2c483eb626d94f19806c08e244c40c38e/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3139333531392f66363630643137342d336237662d323039642d393333662d6261363836663266336339342e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F193519%2Ff660d174-3b7f-209d-933f-ba686f2f3c94.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=993a51b475c1755d3b29e3b8ee690078\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/193519/f660d174-3b7f-209d-933f-ba686f2f3c94.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F193519%2Ff660d174-3b7f-209d-933f-ba686f2f3c94.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=723340b113eb39f8bde6cae99bc75f4c 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eSampleTextToSpeech.cs と SampleConversation.cs はこの記事の修正のままで、問題なく動作しました。\u003c/p\u003e\n","createdAt":"2018-05-05T15:00:14Z","elapsedYearsFromLastModifiedAt":3,"encryptedId":"T1ScQYXC+OPZ+/pk3Zj6ikh8Oo47gKJ/--zJU4E0/9R4tnMLFO--fB1X2cnhlQAvuYsRrSi6Kw==","isBanned":false,"isDeprecated":true,"isDestroyableByViewer":false,"isEditRequestReadableByViewer":true,"isEditRequestSendableByViewer":true,"isLikableByViewer":true,"isLikedByViewer":false,"isPublic":true,"isSlide":false,"isStockableByViewer":true,"isStockedByViewer":false,"isSubscribableByViewer":false,"isSubscribedByViewer":false,"isUpdatableByViewer":false,"isUpdated":true,"lastModifiedAt":"2018-05-12T03:55:42Z","likesCount":4,"linkUrl":"https://qiita.com/yamachan360/items/a36c57e99a68597b8b0d","organization":null,"originalId":641692,"stockedCount":5,"title":"WatsonのUnity-SDKから消えたConfiguration Editorを調査し、今後の方針を考えてみる(2/2)","toc":"\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E8%B3%87%E6%A0%BC%E6%83%85%E5%A0%B1%E3%81%AE%E6%89%B1%E3%81%84%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6\"\u003e資格情報の扱いについて\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%9A%E3%82%AF%E3%82%BF%E3%83%BC%E3%81%A7%E5%80%A4%E3%82%92%E7%AE%A1%E7%90%86%E3%81%99%E3%82%8B\"\u003eインスペクターで値を管理する\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%9A%E3%82%AF%E3%82%BF%E3%83%BC%E3%81%A7%E5%AE%9F%E8%A3%85%E3%81%97%E3%81%A6%E3%81%BF%E3%82%88%E3%81%86\"\u003eインスペクターで実装してみよう\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E9%81%8E%E5%8E%BB%E3%81%AE%E3%82%B3%E3%83%BC%E3%83%89%E3%81%A8%E3%81%AE%E4%BA%92%E6%8F%9B%E6%80%A7%E3%82%92%E8%80%83%E6%85%AE%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B\"\u003e過去のコードとの互換性を考慮してみる\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%8F%A4%E3%81%84%E9%96%A2%E6%95%B0%E3%81%AE%E5%BE%A9%E6%B4%BB\"\u003e古い関数の復活\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E8%B3%87%E6%A0%BC%E6%83%85%E5%A0%B1%E3%81%AE%E8%AA%AD%E3%81%BF%E8%BE%BC%E3%81%BF\"\u003e資格情報の読み込み\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%AE%9F%E9%9A%9B%E3%81%AB%E5%8F%A4%E3%81%84%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB%E3%82%B3%E3%83%BC%E3%83%89%E3%82%92%E5%88%A9%E7%94%A8%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B\"\u003e実際に古いサンプルコードを利用してみる\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E4%BB%96%E3%81%AE2%E3%81%A4%E3%81%AE%E3%82%B5%E3%83%BC%E3%83%93%E3%82%B9%E3%81%B8%E3%81%AE%E5%AF%BE%E5%BF%9C\"\u003e他の2つのサービスへの対応\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#texttospeech-%E3%81%B8%E3%81%AE%E5%AF%BE%E5%BF%9C\"\u003eTextToSpeech への対応\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#conversation-%E3%81%B8%E3%81%AE%E5%AF%BE%E5%BF%9C\"\u003eConversation への対応\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%81%A8%E3%81%84%E3%81%86%E3%82%8F%E3%81%91%E3%81%A7\"\u003eというわけで\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#2018%E5%B9%B45%E6%9C%8812%E6%97%A5%E8%BF%BD%E8%A8%98-unity-20181%E5%AF%BE%E5%BF%9C\"\u003e2018年5月12日追記 (Unity 2018.1対応)\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n","totalPv":2265,"uuid":"a36c57e99a68597b8b0d","banReason":null,"adventCalendarItem":null,"author":{"encryptedId":"PFoqXgMvmt0Cf0QlqeTtY7v79wZ5--aN7uh1r/tm1mp+CM--gEZYCZajraM1h76ZivWPwA==","originalId":193519,"description":"Web系開発者。映画,特撮,功夫,酒, ロボ,アニメ,模型,ゲーム, 懐パソ(PC6001, MSX, X68000), JavaScript/NodeJS, Unity, RPGツクール, プチコン, AWS, 開発環境なんでも好き。修行中。\r\n\r\n投稿は全て個人の見解です。\r\nPosts are my own.","facebookUrl":"https://facebook.com/yamachan360","githubUrl":"https://github.com/yamachan","isBlockingViewer":false,"isFollowableByViewer":true,"isFollowedByViewer":false,"isTweetWebNotificationReceivable":true,"linkedinUrl":"https://www.linkedin.com/in/yamasita/","name":"Toshio Yamashita","profileImageUrl":"https://qiita-image-store.s3.amazonaws.com/0/193519/profile-images/1547708105","profileImageUrlW48":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F193519%2Fprofile-images%2F1547708105?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=48\u0026s=10f81e69966af393d9cb329dbc3cc87c","profileImageUrlW75":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F193519%2Fprofile-images%2F1547708105?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=2755ac3d43b35c70e8ef1ac2554050b9","urlName":"yamachan360","websiteUrl":"","twitterUrl":"https://twitter.com/yamachan360","twitterUrlName":"yamachan360","revealedOrganizations":{"edges":[]}},"tags":[{"name":"C#","urlName":"csharp"},{"name":"Unity","urlName":"unity"},{"name":"SDK","urlName":"sdk"},{"name":"Watson","urlName":"watson"}],"followingLikers":{"edges":[]},"comments":{"totalCount":0}},"comments":[],"client":null,"ads_event_emitter":null}}</script>
