もくじ
https://qiita.com/tera1707/items/4fda73d86eded283ec4fWPFで画面を作るときにコンバーターをよく使うが、都度既存のコードからコピペしていて身についた感がなかったので、テンプレートとして持っておくために下記にメモしておく。今回は、MSの公式サンプルをもとに、というコンバーターを作ってみる。クラス名はDateTimeConverterのように、〇〇Conveterというようにするのが慣例っぽい。
その名前で、IValueConverterインターフェースを実装した下記のようなクラスを作る。※個人的経験では、ほとんどの場合「プロパティ→画面表示に反映時」に変換することしかしないので、Converterメソッドだけ使ってConvertBackメソッドはほとんど使ったことがない。そういう場合は、ConvertBackの中身は下記のようにしておけばいい。一番の親(今回はWindow)のリソースとして、下記のようにして登録する。そいつのKeyを使って、変換を行いたいコントロールにバインドしたプロパティのコンバーターとして使用する。
(今回は、ConverterParameterは別に不要だが、パラメータ渡せるということを示すために渡すだけ渡す)下記のように、画面にバインドしたプロパティにそうすると、コンバータを通って、下記のように画面に表示される。
以上で、一通りコンバーターが使えるようになった。How to: Convert Bound Data
https://docs.microsoft.com/ja-jp/dotnet/desktop/wpf/data/how-to-convert-bound-data?view=netframeworkdesktop-4.8


