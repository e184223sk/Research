More than 1 year has passed since last update.PLINQについて速いと噂には聞いていたがなぜ速いのかというところに疑問を
感じ、どんな動きをしているかを簡単に共有できればなと感じてドキュメントには下記のように記載されています。データ ソースをセグメントにパーティション分割し、複数のプロセッサで個々のワーカー スレッドの各セグメントに対してクエリを並行実行します。うーん、並行実行というのはマルチスレッドのことなのかな？
マルチスレッド自体複雑だからな、、、　async/awaitとかもなんだかんだ理解まで時間かかったし、、、前置きが長くなりましたが、実際に今までForeachで処理していた部分をAsPararell().ForAll()を使用して、どのくらい変化が現れるかを実験してみました。
また、実際にプログラムを作成する上で下記記事を参考にさせていただきました、本当にありがとうございます。
(参考記事：PLINQの実行速度と高速な書き方)結果がこちらとなります。確かに早いですよね。ここからが本題でこいつがどんな感じで動いているのかを調べてみました。
端的に言うと、マルチスレッドになっているのかどうかとかその辺を見てみました（これだけ早ければマルチスレッドで動いていることはほぼ間違いないのですが・・・）結果がこちらです。見れば一目瞭然ですが、純粋なForEachの場合にはメインスレッドを使用しているのに対して、PLINQの場合にはマルチスレッドで動いており処理が完了し開放されたスレッドを再び利用するため処理の無駄を省き大幅にパフォーマンスが改善されるのですね。よかったら参考にしてみてください。


