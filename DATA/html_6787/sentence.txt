More than 3 years have passed since last update.Xamarin.Androidでアプリ開発した時、アプリ内で内部ストレージに画像保存する時についての資料があんまりなかったので、忘れないようにの備忘録です。
内部ストレージに画像保存でググると大抵Java.IOとSystem.IOあたりで詰まってしまうので、そんな方向けにも。調べ方が悪かったかもだけど
私自身まだまだ知識不足なところがあるので、細かい指摘などお待ちしております。Xamarinで作ったアプリ内で画像保存したい。でもその画像あとでギャラリーアプリとかで見たい。
しかしどうすればいいかわからない。Sysytem.IOとJava.IOとかで積んだ。そんな人向けです。今回はSDカードとかの外部ストレージではなく、内部ストレージに保存するという前提です。
なのでパーミッションWRITE_EXTERNAL_STORAGEを忘れずに。保存する際、画像の名前を決めるコードはここから引用させて頂きました。今回保存先をわかりやすいように、内部ストレージのDCIMに保存することにしました。データディレクトリじゃないのは、一応画像処理された画像の保存なのでMyPicture的な所が良かっただけです。
この画像の保存先のパスの取得に詰まりました。Android.OS.Environment.DirectoryDcimの所でMyPictureとか色々と指定ができると思います。JavaだとFileOutPutStreamなどでJava.IOとSystem.IOの変換などが出来ないとかで色々と悩まされました。
System.IO.FileStreamというのがあったなんて。。。android - How to save an image to Internal Storage and then show it on another activity? - Stack Overflow
家の前にかむ犬がいた Intentでアプリ内画像をtwitterとかに送る


