階層構造になっているGameObjectで、親のscaleを変更したときに子のサイズは変わってほしくないことがありました。
こういう場合のlocalScaleの算出方法について、検討した案を残しておきます。すぐに思い付くし、理解しやすいし、良いと思います。
…でも長いしなんだか冗長でもやもやする。
x, y, zを間違えそうでちょっと怖いのもある。
もう少しすっきり書ける方法は無いのだろうか…？Vector3にはインデクサが用意されているので、これを使ってみます。x, y, zを間違える可能性が無いのが良いですね。
割り算の記述も一箇所になってそれなりにすっきりはしましたが…以下の部分があと一歩足りないように感じてしまいます。こんなやり方で算出することも可能です。無駄に複雑になってしまいましたが、これってUnityエキスパートの方ならすぐに理解できるものなのでしょうか？絵を描いてみました。
バブルの中に入ったUnityちゃんはscale1倍。そしてバブルがx, y共にscale2倍だったとします。
（表現しやすいので2Dで考えます）親のscaleの影響を排除したいということは、「local scale = world scale」となってほしいのです。
つまり、今のlocalScaleの値がworldScaleとなるような値を、localScaleに設定できれば良いのです。しかしこれだけだと、ローカルスペースとワールドスペースの軸の向きが異なる場合に上手くいきません。
ということで、向きを合わせる必要があります。結果的に以下の手順で算出することになります。番号を画像内の数字と一致させています。これでほしい値は算出できるのですが…より理解しやすい書き方があるのにこれだけ解説が必要となる案は悪手だよね、ということで没になりました。
ベクトルや、ワールドスペースとローカルスペースについての理解を深めるためのクイズとしては機能するかもしれません。ということで、案1か2の書き方にするしか無さそうです。


