More than 1 year has passed since last update.この記事は「信州大学 kstm Advent Calendar 2019」18日の投稿です。従兄弟が高校の卒業関係でスライドにyoutubeの動画を貼りたいらしい。PC初心者の彼(windows)を覗いてみるとブラウザに変な通知を許可してる…　なにか変なサイト使ってるな…　どげんかせんといかんコンソールアプリであるyoutube-dlというものがwindows向けにある。あ勧めしたが、コンソールに不慣れな彼、黒い画面はウイルス教の信者だった。何かGUIのアプリを作ってやろう、と。
僕には実力がないので動画のキャッシュを取るだの断片の動画を繋ぐだのの技術はない。ネットワーク側の操作を要するアプリ制作未経験。
ということでyoutube-dl,コンソールアプリをGUIで操作しようと。WPFのデザインが使いやすいだろうからC#で挑戦。
System.Diagnostics.Process...コンソールアプリを操作する上で使うやつ。
youtubeAPI...「名前を付けて保存」でファイル名を指定したいので、デフォルトは動画名を取ってきたい。なのでAPIキーを取っておく。
System.Net.HttpStatusCode...URLを受け取る際、それがURLであるか判別したい。原則、正常なyoutubeURLをMP4を「名前を付けて保存」出来れば良い。それ以外の機能はやっつけである。その他機能はいろんな記事の継ぎ接ぎであり、機能はするが無駄が多くソース(特に不揃いなコメント)が汚いので、事細かに解説したいと思う。XAMLでデザインされたGUI。
- URL入力のテキストボックス
- ステータス表示用テキストボックス
- ファイル形式変換用のコンボボックス
- ダウンロードボタン
- 動画表示用のメディアエレメント
- 再生、停止ボタンpatched,patchedしてたら1ファイルになってた。API入力で動くはずダウンロード中に別の動画をダウンロードできない。
ダウンロード進行状態を確認できない。(コンソールアプリがエラーしていた場合気づけ無い)
等問題あるがMP4でのダウンロードは問題無い。
改良の余地はアリアリなので暇があれば更新(個人的にはコンソールで使うのでイラン)


