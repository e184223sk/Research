<!DOCTYPE html><html><head><meta charset="utf-8" /><title>EntityFrameworkを使ってみた。 - Qiita</title><meta content="width=device-width,initial-scale=1,shrink-to-fit=no,viewport-fit=cover" name="viewport" /><meta content="#55c500" name="theme-color" /><meta content="XWpkTG32-_C4joZoJ_UsmDUi-zaH-hcrjF6ZC_FoFbk" name="google-site-verification" /><meta content="telephone=no" name="format-detection" /><link rel="canonical" href="https://qiita.com/sorabin/items/b50f2a3d23dceeea56d7" /><link href="/manifest.json" rel="manifest" /><link href="/opensearch.xml" rel="search" title="Qiita" type="application/opensearchdescription+xml" /><link as="script" href="https://www.googletagservices.com/tag/js/gpt.js" rel="preload" /><link href="https://securepubads.g.doubleclick.net" rel="preconnect" /><script async="" src="https://www.googletagservices.com/tag/js/gpt.js"></script><meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="JNg3r6F3OlBUon6wKdWv9g4g8N59twlxFbsu4GNWl3vWb4v1EBMlBzHFAjfvxDE9C0iobseVZ6p5CyRkX7R5CQ==" /><link rel="shortcut icon" type="image/x-icon" href="https://cdn.qiita.com/assets/favicons/public/production-c620d3e403342b1022967ba5e3db1aaa.ico" /><link rel="apple-touch-icon" type="image/png" href="https://cdn.qiita.com/assets/favicons/public/apple-touch-icon-ec5ba42a24ae923f16825592efdc356f.png" /><link rel="stylesheet" media="all" href="https://cdn.qiita.com/assets/public/article-2eaa7dbedc42a8ea65c722cda46d0ebb.min.css" /><script src="https://cdn.qiita.com/assets/public/v3-article-bundle-63de2d91fef827269d3f6b958db2335b.min.js" defer="defer"></script><meta name="twitter:card" content="summary_large_image"><meta content="@Qiita" name="twitter:site" /><meta content="@sorabin_" name="twitter:creator" /><meta property="og:type" content="article"><meta property="og:title" content="EntityFrameworkを使ってみた。 - Qiita"><meta property="og:image" content="https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0&amp;w=1200&amp;mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND1SVzUwYVhSNVJuSmhiV1YzYjNKcjQ0S1M1TDJfNDRHajQ0R200NEdfNDRHZjQ0Q0MmdHh0LWNvbG9yPSUyMzMzMyZ0eHQtZm9udD1IaXJhZ2lubyUyMFNhbnMlMjBXNiZ0eHQtc2l6ZT01NCZ0eHQtY2xpcD1lbGxpcHNpcyZ0eHQtYWxpZ249Y2VudGVyJTJDbWlkZGxlJnM9ZjM3ZjVhMDg4ZjhiZjJmMWQ4NmY1ZTM3MDQ0MTEyZTY&amp;mark-align=center%2Cmiddle&amp;blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RSE52Y21GaWFXNCZ0eHQtY29sb3I9JTIzMzMzJnR4dC1mb250PUhpcmFnaW5vJTIwU2FucyUyMFc2JnR4dC1zaXplPTQ1JnR4dC1hbGlnbj1yaWdodCUyQ2JvdHRvbSZzPTlhOTY5N2ExMjAyMTY1MDQ2MGFlNDk3MzcwYTI1NWNk&amp;blend-align=center%2Cmiddle&amp;blend-mode=normal&amp;s=9fbbc4654a77dc3975a053159d0539b5"><meta property="og:description" content="

注意

今回の記事ではMigrationファイルを作成し反映する作業が多々あります。

説明は一度はしますが、反映に関するコマンドは面倒なので省略されることがあります。

そのため、まずは 次項にて 頻出コマンドを記載しておきます..."><meta content="https://qiita.com/sorabin/items/b50f2a3d23dceeea56d7" property="og:url" /><meta content="Qiita" property="og:site_name" /><meta content="564524038" property="fb:admins" /><meta content="C#,.NET,EntityFramework" name="keywords" /><script>!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window, document,'script',
'https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '668972150489891');
fbq('track', 'PageView');</script><style data-emotion-css="17jxvjw 11t2ec1 1dvr2p8 18lkoru 1g4cku8 1iupg5d ijvq0v 15cocm3 12rp90f 115f4t 1b8uj5v 79elbk 16hhh7b fcbn8c 1gj7nt 154zy0m yikrym 1jqivyb 1ode1bp le4d8r 1hbd3g7 1nzh4zz 38fzdi helsa7 8qb8m4 2imjyh he5w1s 70qvj9 3ojehk 100alwu 1dtnjt5 10ougpm 1ay9vb9 m19uds cgzq40 1wa99t2 1l3zk9f 4czcte 1yzj1fm 1uv1qiv 109dbrr 5jpx49 mnxgyc 1vlpknv fsjkhv 1b17vb0 7i7f4d"}>.css-17jxvjw{display:grid;display:-ms-grid;grid-template-columns:80px minmax(0,1fr) 300px;-ms-grid-columns:80px minmax(0,1fr) 300px;grid-template-rows:minmax(270px,auto) 1fr;-ms-grid-rows:minmax(270px,auto) 1fr;max-width:1280px;margin-right:auto;margin-left:auto;padding-top:24px;padding-right:24px;padding-left:24px;}@media (max-width:1200px){.css-17jxvjw{padding-bottom:0;padding-left:0;padding-right:0;}}@media (max-width:992px){.css-17jxvjw{grid-template-columns:80px 452px 300px;-ms-grid-columns:80px 452px 300px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}}@media (max-width:770px){.css-17jxvjw{display:block;}}@media (max-width:480px){.css-17jxvjw{padding-top:0;}}.css-11t2ec1{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;z-index:5;position:-webkit-sticky;position:sticky;top:calc(56px + 24px + 16px + 32px - 16px);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:16px;width:80px;}.css-11t2ec1:after{content:'';display:table;}.css-11t2ec1:before{content:'';display:table;}@media (max-width:770px){.css-11t2ec1{display:none;}}.css-1dvr2p8{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-18lkoru{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;background-color:#FFFFFF;}.css-1g4cku8{display:inline-block;vertical-align:middle;height:20px;width:20px;fill:#55C500;}.css-1iupg5d{color:#55C500;cursor:pointer;font-size:14px;font-weight:bold;}.css-ijvq0v{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-15cocm3{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#FFFFFF;border:2px solid #6E6F70;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:2px 0px 0px;width:40px;}.css-12rp90f{display:inline-block;vertical-align:bottom;height:17.77777777777778px;width:16px;fill:#6E6F70;}.css-115f4t{color:#6E6F70;font-size:14px;font-weight:bold;}.css-1b8uj5v{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;margin-bottom:16px;padding:0;}.css-79elbk{position:relative;}.css-16hhh7b{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;padding:0;}.css-fcbn8c{display:none;bottom:initial;left:initial;right:initial;top:initial;left:100%;top:calc(-8px - (14px * 1.8) - 16px - 4px);}.css-1gj7nt{color:rgba(0,0,0,0.6);font-size:14px;font-weight:bold;line-height:1.8;padding:8px 16px;}.css-154zy0m{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.87);cursor:pointer;font-size:16px;font-weight:normal;line-height:1.8;padding:4px 16px;}.css-154zy0m:hover{-webkit-text-decoration:none;text-decoration:none;background-color:#F2F2F2;}.css-yikrym{width:20px;}.css-1jqivyb{color:rgba(0,0,0,0.6);font-size:13px;}.css-1ode1bp{background-color:rgba(0,0,0,0.12);height:1px;width:100%;margin:8px 0;}.css-le4d8r{display:inline-block;vertical-align:middle;height:13px;width:13px;fill:rgba(0,0,0,0.6);}.css-1hbd3g7{height:250px;}.css-1nzh4zz{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:16px 32px;background-color:#FBE69E;color:rgba(0,0,0,0.87);line-height:1.5;font-weight:600;}@media (max-width:770px){.css-1nzh4zz{padding:16px;}}.css-38fzdi{color:#CA832A;margin-right:4px;}.css-helsa7{background-color:#FFFFFF;padding:32px;margin-bottom:24px;}@media (max-width:992px){.css-helsa7{margin:0 auto 40px;}}@media (max-width:480px){.css-helsa7{margin:0 0 40px;padding:32px 16px;}}.css-8qb8m4{margin-bottom:48px;}.css-2imjyh{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-he5w1s{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;width:100%;}@media (max-width:770px){.css-he5w1s{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}}.css-70qvj9{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.css-3ojehk{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;margin-right:4px;}.css-100alwu{display:inline-block;border-radius:50%;line-height:1;overflow:hidden;vertical-align:middle;}.css-1dtnjt5{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-10ougpm{color:rgba(0,0,0,0.87);font-size:14px;font-weight:600;line-height:1.8;margin-right:4px;text-wrap:break-word;word-break:break-all;}.css-1ay9vb9{margin-right:16px;}.css-m19uds{color:rgba(0,0,0,0.6);font-size:14px;line-height:1.8;}.css-cgzq40{color:rgba(0,0,0,0.87);font-size:32px;font-weight:bold;line-height:1.4;margin-top:8px;text-wrap:break-word;word-break:break-all;}.css-1wa99t2{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.6);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:8px;}.css-1l3zk9f{color:rgba(0,0,0,0.6);font-size:20px;margin-right:8px;}.css-4czcte{margin-right:4px;color:inherit;font-size:14px;line-height:1.8;}.css-4czcte:not(:last-child)::after{content:',';margin-right:4px;}.css-1yzj1fm{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:32px;}.css-1uv1qiv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-size:20px;height:32px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin-right:16px;outline:none;padding:0;width:32px;}.css-109dbrr{background-color:#F9F9F9;border-top:1px solid rgba(0,0,0,0.12);bottom:0;box-shadow:0px 1px 4px rgba(0,0,0,0.14);display:none;height:calc(env(safe-area-inset-bottom,0px) + 56px);-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding-bottom:env(safe-area-inset-bottom);position:-webkit-sticky;position:sticky;width:100%;z-index:2000;}@media (max-width:770px){.css-109dbrr{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}.css-5jpx49{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:space-evenly;-webkit-justify-content:space-evenly;-ms-flex-pack:space-evenly;justify-content:space-evenly;width:100%;}.css-mnxgyc{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1vlpknv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;margin-right:4px;background-color:#FFFFFF;}.css-fsjkhv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1b17vb0{color:#6E6F70;font-size:14px;font-weight:bold;margin-left:4px;}.css-7i7f4d{display:none;bottom:initial;left:initial;right:initial;top:initial;bottom:32px;right:0;}</style></head><body><div class="allWrapper"><div><div id="GlobalHeader-react-component-6bfd7859-e771-4ef3-b64b-ba7c3f62cca0"><div class="st-Header"><div class="st-Header_container"><div class="st-Header_start"><a href="/" class="st-Header_logo"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 426.57 130"><circle cx="167.08" cy="21.4" r="12.28"></circle><path d="M250.81 29.66h23.48v18.9h-23.48z"></path><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z"></path><circle cx="216.33" cy="21.4" r="12.28"></circle></svg></a><div class="st-Header_communitySelector" tabindex="0"><span class="fa fa-caret-down"></span></div><div class="st-Header_dropdown"><div class="st-Header_dropdownHeading">Qiita Teams that are logged in</div><div class="st-Header_dropdownItemNote">You are not logged in to any team</div><hr class="st-Header_dropdownDivider st-Header_dropdownDivider-shrink"/><a href="https://teams-center.qiita.com/find_team" class="st-Header_dropdownItem"><span class="fa fa-fw fa-sign-in st-Header_dropdownItemIcon"></span><div>Log in to Qiita Team</div></a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Community</div><a href="/organizations" class="st-Header_dropdownItem">Organization</a><a href="/official-events/open" class="st-Header_dropdownItem">Event</a><a href="/advent-calendar" class="st-Header_dropdownItem">Advent Calendar</a><a href="https://qiitadon.com/" class="st-Header_dropdownItem" target="_blank">Qiitadon (β)</a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Service</div><a href="https://jobs.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Jobs</a><a href="https://zine.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Zine</a><a href="https://blog.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Blog</a></div><form class="st-Header_search" action="/search" method="get"><span class="fa fa-search st-Header_searchIcon"></span><input type="search" class="st-Header_searchInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form><form class="st-Header_searchModal" action="/search" method="get"><input type="text" class="st-Header_searchModalInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form></div><div class="st-Header_end"><div class="st-Header_searchButton"><span class="fa fa-search"></span></div><a class="st-Header_signupButton" href="/signup?redirect_to=%2Fsorabin%2Fitems%2Fb50f2a3d23dceeea56d7">Signup</a><a class="st-Header_loginLink" href="/login?redirect_to=%2Fsorabin%2Fitems%2Fb50f2a3d23dceeea56d7">Login</a></div><div class="st-Header_overlay"></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="GlobalHeader" data-dom-id="GlobalHeader-react-component-6bfd7859-e771-4ef3-b64b-ba7c3f62cca0">{"unreadNotificationsCount":null,"realms":[{"humanName":"Qiita","isCurrentRealm":true,"isQiita":true,"isQiitaTeam":false,"loggedInUser":null,"teamId":null,"url":"https://qiita.com/"}],"teamFindUrl":"https://teams-center.qiita.com/find_team","isTeamOnlyUser":null,"currentUser":null}</script>
      
</div><div class="st-HeaderAlert st-HeaderAlert-warning"><div class="st-HeaderAlert_body"></div></div><script type="application/ld+json">{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"/","name":"Qiita"}},{"@type":"ListItem","position":2,"item":{"@id":"/tags/csharp","name":"C#"}}]}</script><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","datePublished":"2019-02-04T00:18:02.000+09:00","dateModified":"2019-02-04T00:18:02.000+09:00","headline":"EntityFrameworkを使ってみた。","image":"https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0\u0026w=1200\u0026mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND1SVzUwYVhSNVJuSmhiV1YzYjNKcjQ0S1M1TDJfNDRHajQ0R200NEdfNDRHZjQ0Q0MmdHh0LWNvbG9yPSUyMzMzMyZ0eHQtZm9udD1IaXJhZ2lubyUyMFNhbnMlMjBXNiZ0eHQtc2l6ZT01NCZ0eHQtY2xpcD1lbGxpcHNpcyZ0eHQtYWxpZ249Y2VudGVyJTJDbWlkZGxlJnM9ZjM3ZjVhMDg4ZjhiZjJmMWQ4NmY1ZTM3MDQ0MTEyZTY\u0026mark-align=center%2Cmiddle\u0026blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RSE52Y21GaWFXNCZ0eHQtY29sb3I9JTIzMzMzJnR4dC1mb250PUhpcmFnaW5vJTIwU2FucyUyMFc2JnR4dC1zaXplPTQ1JnR4dC1hbGlnbj1yaWdodCUyQ2JvdHRvbSZzPTlhOTY5N2ExMjAyMTY1MDQ2MGFlNDk3MzcwYTI1NWNk\u0026blend-align=center%2Cmiddle\u0026blend-mode=normal\u0026s=9fbbc4654a77dc3975a053159d0539b5","mainEntityOfPage":"https://qiita.com/sorabin/items/b50f2a3d23dceeea56d7","author":{"@type":"Person","address":"","email":null,"identifier":"sorabin","name":"sorabin","image":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F46074%2Fprofile-images%2F1567145271?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=83f7a459d98478722076096ecc073ffd","url":"https://qiita.com/sorabin","description":"◆仕事\r\nERP開発のSE\r\nエンジニア講師\r\n学習塾の講師\r\n\r\n◆言語\r\n.Net系\r\nLaravelなどのWeb開発まで\r\nとか。\r\n\r\n◆その他\r\n雑多なアカウントですがTwitterもこちらもフォローしてもらえると嬉しいです","memberOf":[]},"publisher":{"@type":"Organization","name":"Qiita","logo":{"@type":"ImageObject","url":"//cdn.qiita.com/assets/public/qiita-logo-c39ded593afa388e2e1ba435b110554e.png"}}}</script><style type="text/css">.wb-CampaignLink {
  background-color: #333333;
  width: 100%;
}

.wb-CampaignLink_container {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  max-width: 1100px;
  margin: 0 auto;
  font-size: 13px;
  padding: 0.8em;
}
.wb-CampaignLink_container > a {
  color: #fff;
}

.wb-CampaignLink_container > a:hover {
  text-decoration: underline;
}</style><div class="wb-CampaignLink"><div class="wb-CampaignLink_container"><a target="_blank" id="header_text_message_1" href="https://zine.qiita.com/interview/202107-hitachi/?utm_source=qiita&amp;utm_medium=header-banner">グループ会社出納業務の証票処理を70％自動化。日立のAI-OCR技術とは？</a><a target="_blank" id="header_text_message_2" href="https://zine.qiita.com/interview/202107-hitachi/?utm_source=qiita&amp;utm_medium=header-banner">詳しくはこちら</a></div><script>td.trackEvent(
  'front_events',
  {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"sorabin","type":"items","id":"b50f2a3d23dceeea56d7"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Show","data":{"message":"グループ会社出納業務の証票処理を70％自動化。日立のAI-OCR技術とは？","url":"https://zine.qiita.com/interview/202107-hitachi/?utm_source=qiita\u0026utm_medium=header-banner","sub_message":"詳しくはこちら"}}
)</script><script>document.getElementById('header_text_message_1').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"sorabin","type":"items","id":"b50f2a3d23dceeea56d7"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":1,"pos_id":"header_text_message_1","message":"グループ会社出納業務の証票処理を70％自動化。日立のAI-OCR技術とは？","url":"https://zine.qiita.com/interview/202107-hitachi/?utm_source=qiita\u0026utm_medium=header-banner","sub_message":"詳しくはこちら"}}
  )
})</script><script>document.getElementById('header_text_message_2').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"sorabin","type":"items","id":"b50f2a3d23dceeea56d7"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":1,"pos_id":"header_text_message_2","message":"グループ会社出納業務の証票処理を70％自動化。日立のAI-OCR技術とは？","url":"https://zine.qiita.com/interview/202107-hitachi/?utm_source=qiita\u0026utm_medium=header-banner","sub_message":"詳しくはこちら"}}
  )
})</script></div><script type="application/json" id="js-react-on-rails-context">{"railsEnv":"production","inMailer":false,"i18nLocale":"en","i18nDefaultLocale":"en","href":"https://qiita.com/sorabin/items/b50f2a3d23dceeea56d7","location":"/sorabin/items/b50f2a3d23dceeea56d7","scheme":"https","host":"qiita.com","port":null,"pathname":"/sorabin/items/b50f2a3d23dceeea56d7","search":null,"httpAcceptLanguage":null,"actionPath":"public/items#show","settings":{"analyticsTrackingId":"UA-24675221-12","assetsMap":{},"csrfToken":"36v4Ujk9YXmdTsqPtNXrkzcg45xseDokw1/U1qv8dDktHEQIiFl+LvgptghyxHVYMki7LNZaVP+v795Slx6aSw==","locale":"en"},"currentUser":null,"isLoggedIn":false,"recaptchaSiteKey":"6LfNkiQTAAAAAM3UGnSquBy2akTITGNMO_QDxMw6","serverSide":false}</script>
<div id="PersonalArticlePage-react-component-ffcc925c-1e1f-4851-ba5a-31074e5c40f0"><div class="p-items_wrapper"><div class=" css-17jxvjw"><div class="css-11t2ec1"><div class="css-1dvr2p8"><button class=" css-18lkoru"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/sorabin/items/b50f2a3d23dceeea56d7/likers" class="css-1iupg5d">12</a></div><div class="css-ijvq0v"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-115f4t">14</span></div><div class="css-1b8uj5v"><span class="fa fa-twitter"></span></div><div class="css-1b8uj5v"><span class="fa fa-facebook"></span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-fcbn8c"><div class="css-1gj7nt">Improve article</div><a href="/drafts/b50f2a3d23dceeea56d7/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/sorabin/items/b50f2a3d23dceeea56d7/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/sorabin/items/b50f2a3d23dceeea56d7/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/sorabin/items/b50f2a3d23dceeea56d7/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/sorabin/items/b50f2a3d23dceeea56d7.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div><div class="p-items_options"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_toc"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_main"><div class="css-1nzh4zz"><span class="fa fa-fw fa-warning css-38fzdi"></span><p>More than 1 year has passed since last update.</p></div><div class="css-helsa7"><div class="css-8qb8m4"><div class="css-2imjyh"><div class="css-he5w1s"><div class="css-70qvj9"><div class="css-3ojehk"><a href="/sorabin"><img class="css-100alwu eyfquo10" src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/46074/profile-images/1567145271" width="24" height="24" loading="lazy"/></a></div><div class="css-1dtnjt5"><a href="/sorabin" class="css-10ougpm">@<!-- -->sorabin</a><div class="css-1ay9vb9"><time dateTime="2019-02-03T15:18:02Z" class="css-m19uds">posted at 2019-02-03</time></div></div></div></div></div><h1 class="css-cgzq40">EntityFrameworkを使ってみた。</h1><div class="css-1wa99t2"><span class="fa fa-tags mr-1of2 css-1l3zk9f" aria-hidden="true"></span><a href="/tags/csharp" class="css-4czcte">C#</a><a href="/tags/.net" class="css-4czcte">.NET</a><a href="/tags/entityframework" class="css-4czcte">EntityFramework</a></div></div><section class="it-MdContent"><div id="personal-public-article-body"><div>
<h2>
<span id="注意" class="fragment"></span><a href="#%E6%B3%A8%E6%84%8F"><i class="fa fa-link"></i></a>注意</h2>

<p>今回の記事ではMigrationファイルを作成し反映する作業が多々あります。</p>

<p>説明は一度はしますが、反映に関するコマンドは<del>面倒なので</del>省略されることがあります。</p>

<p>そのため、まずは <strong>次項にて</strong> 頻出コマンドを記載しておきます。</p>

<p>また、こういったしっかりした記事は初めて書きますので、何卒ご容赦いただければと思います。</p>

<h2>
<span id="頻出コマンドpackagemanagerconsole" class="fragment"></span><a href="#%E9%A0%BB%E5%87%BA%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89packagemanagerconsole"><i class="fa fa-link"></i></a>頻出コマンド(PackageManagerConsole)</h2>

<p><code>ツール(T)</code> -&gt; <code>Nugetパッケージマネージャ(N)</code> -&gt; <code>パッケージマネージャコンソール(O)</code></p>

<p>で入力するコマンドです。</p>

<h3>
<span id="migration機能の有効化" class="fragment"></span><a href="#migration%E6%A9%9F%E8%83%BD%E3%81%AE%E6%9C%89%E5%8A%B9%E5%8C%96"><i class="fa fa-link"></i></a>Migration機能の有効化</h3>

<p>プロジェクトにてMigrationの有効化を行うコマンドです。<br>
一度有効化すれば問題ありません。</p>

<div class="code-frame" data-lang="powershell">
<div class="code-lang"><span class="bold">PackageManagerConsole</span></div>
<div class="highlight"><pre class="with-code"><code><span class="n">Enable-Migrations</span><span class="w">
</span></code></pre></div>
</div>

<p>なお、接続先変更等行った場合は再度このコマンドを叩く必要がありそうです。私の場合、有効化したあとに接続先を変更してMigrateしても変更前の接続先に反映されてしまいました。</p>

<p>再度有効化(厳密には再設定?)を行うには <code>-Force</code> オプションをつければOKです。<br>
<code>powershell:PackageManagerConsole<br>
Enable-Migrations -Force<br>
</code></p>

<h3>
<span id="migrateファイルの作成" class="fragment"></span><a href="#migrate%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AE%E4%BD%9C%E6%88%90"><i class="fa fa-link"></i></a>Migrateファイルの作成</h3>

<p>gitで <code>commit -m "コメント"</code> のあとに <code>push</code>を行うのと同様、</p>

<p>Migrateファイルに一度名前をつけて、その後反映させる必要があります。</p>

<div class="code-frame" data-lang="powershell">
<div class="code-lang"><span class="bold">PackageManagerConsole</span></div>
<div class="highlight"><pre class="with-code"><code><span class="n">Add-Migration</span><span class="w"> </span><span class="nx">MigrationName</span><span class="w">
</span></code></pre></div>
</div>

<h3>
<span id="データベースへの反映" class="fragment"></span><a href="#%E3%83%87%E3%83%BC%E3%82%BF%E3%83%99%E3%83%BC%E3%82%B9%E3%81%B8%E3%81%AE%E5%8F%8D%E6%98%A0"><i class="fa fa-link"></i></a>データベースへの反映</h3>

<p>そのままなので補足はありません。</p>

<div class="code-frame" data-lang="powershell">
<div class="code-lang"><span class="bold">PackageManagerConsole</span></div>
<div class="highlight"><pre class="with-code"><code><span class="n">Update-Database</span><span class="w">
</span></code></pre></div>
</div>

<h2>
<span id="参考サイト" class="fragment"></span><a href="#%E5%8F%82%E8%80%83%E3%82%B5%E3%82%A4%E3%83%88"><i class="fa fa-link"></i></a>参考サイト</h2>

<h3>
<span id="entityframeworkについて" class="fragment"></span><a href="#entityframework%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>EntityFrameworkについて</h3>

<p><a href="http://increment-i.hateblo.jp/archive/category/Entity%20Framework" rel="nofollow noopener" target="_blank">インクリメンタルなはいかつにっき</a> 様</p>

<p>上記リンクはEntityFrameworkのタグです。<br>
なお、本記事は上記リンクを知識定着のために書き直したものです。内容としては上記リンク先の内容と大差ありません。</p>

<h3>
<span id="列属性について" class="fragment"></span><a href="#%E5%88%97%E5%B1%9E%E6%80%A7%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>列属性について</h3>

<p><qiita-embed-ogp src="https://qiita.com/mrpero/items/607c31895d77815a77cb"></qiita-embed-ogp></p>

<h2>
<span id="開発環境" class="fragment"></span><a href="#%E9%96%8B%E7%99%BA%E7%92%B0%E5%A2%83"><i class="fa fa-link"></i></a>開発環境</h2>

<p>Visual Studio 2017 Community</p>

<h2>
<span id="entityframeworkって" class="fragment"></span><a href="#entityframework%E3%81%A3%E3%81%A6"><i class="fa fa-link"></i></a>EntityFrameworkって？</h2>

<p>ASP.netで使用できるDB関連のパッケージです。</p>

<p>LaravelやRoRでできる、<strong>スキャフォールド(Scaffold)</strong> や <strong>マイグレーション(Migration)</strong> ができます。</p>

<p><strong>コードファースト(CodeFirst)</strong> という考えのもと、モデルを先に作ってしまえば、それに基づいてテーブルを作ってくれます。</p>

<p>なお、<strong>Seeder</strong>もあります。<br>
魅力的。</p>

<h2>
<span id="参照設定" class="fragment"></span><a href="#%E5%8F%82%E7%85%A7%E8%A8%AD%E5%AE%9A"><i class="fa fa-link"></i></a>参照設定</h2>

<p>Nugetから以下のパッケージを落としておきましょう。</p>

<ol>
<li> EntityFramework</li>
<li> EntityFramework.ja</li>
</ol>

<p>後者はお好みですが、メッセージが日本語になるので。</p>

<p><code>ツール(T)</code> -&gt; <code>Nugetパッケージマネージャ(N)</code> -&gt; <code>ソリューションのNugetパッケージの管理</code></p>

<p>で上記パッケージを検索してインストールするもよし、</p>

<p><code>ツール(T)</code> -&gt; <code>Nugetパッケージマネージャ(N)</code> -&gt; <code>パッケージマネージャコンソール(O)</code></p>

<p>で以下コマンドを叩いても可。</p>

<div class="code-frame" data-lang="powershell">
<div class="code-lang"><span class="bold">PackageManagerConsole</span></div>
<div class="highlight"><pre class="with-code"><code><span class="n">Install-Package</span><span class="w"> </span><span class="nx">EntityFramework</span><span class="w">
</span><span class="n">Install-Package</span><span class="w"> </span><span class="nx">EntityFramework.ja</span><span class="w">
</span></code></pre></div>
</div>

<h2>
<span id="プロジェクトの作成" class="fragment"></span><a href="#%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E4%BD%9C%E6%88%90"><i class="fa fa-link"></i></a>プロジェクトの作成</h2>

<p>今回はC#で作ってみました。WebAPIは対応せず以下の通り設定してます。</p>

<p>ソリューション名は <strong>EntityFrameworkTest</strong> ということで略して <strong>EFTest</strong> としてます。</p>

<p>特に設定もないのでそのまま作成しましょう。</p>

<ul>
<li>新規プロジェクトの作成</li>
</ul>

<p><code>Ctrl + Shift + N</code> で「新しいプロジェクト」画面を開きます。</p>

<p>※ もちろん <code>ファイル(F)</code> -&gt; <code>新規作成(N)</code> -&gt; <code>プロジェクト(P)</code> でも可能</p>

<p>続いて、表示された画面の左のツリーから</p>

<p><code>Visual C#</code> -&gt; <code>Web</code> </p>

<p>中央のリストから</p>

<p><code>ASP.NET Webアプリケーション(.NET Framework)</code> </p>

<p>を選択してソリューションを作成。<br>
次の「 新しいASP. NET Webアプリケーション 」画面では<br>
<strong>MVC</strong> を選択。画面下部のチェックボックスはMVCだけでよいかと。</p>

<p>作成完了したら、ソリューションエクスプローラーにつらつらとファイル群。</p>

<h2>
<span id="接続設定" class="fragment"></span><a href="#%E6%8E%A5%E7%B6%9A%E8%A8%AD%E5%AE%9A"><i class="fa fa-link"></i></a>接続設定</h2>

<p>参考にさせていただいたサイト様では中盤に設定の記載がありますが、地味につまづきポイントなのではじめに記載します。</p>

<p>なお、次に紹介する接続文字列の設定をしないと、デフォルトの長ったらしい名前でDBが作られてしまうのでご注意。</p>

<div class="code-frame" data-lang="xml">
<div class="code-lang"><span class="bold">Web.config</span></div>
<div class="highlight"><pre class="with-code"><code><span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt">&lt;configuration&gt;</span>  
  <span class="c">&lt;!-- 中略 --&gt;</span>
  <span class="c">&lt;!-- ↓を追加 --&gt;</span>
  <span class="nt">&lt;connectionStrings&gt;</span>
    <span class="nt">&lt;add</span> <span class="na">name=</span><span class="s">"EFTestDbContext"</span> <span class="na">connectionString=</span><span class="s">"Data Source=(localdb)\MSSQLLocalDB;Initial Catalog=EFTestDB"</span> <span class="na">providerName=</span><span class="s">"System.Data.SqlClient"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/connectionStrings&gt;</span>
<span class="nt">&lt;/configuration&gt;</span>
</code></pre></div>
</div>

<p><code>connectionStrings</code> 要素が接続情報を管理しています。</p>

<p>今回重要視するのは<br>
<strong>connectionString</strong> 属性。この値内にある <strong>Initial Catalog</strong> で設定している「EFTestDB」がDBの名前です。</p>

<h2>
<span id="クラスについて" class="fragment"></span><a href="#%E3%82%AF%E3%83%A9%E3%82%B9%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>クラスについて</h2>

<h3>
<span id="dbcontextクラス" class="fragment"></span><a href="#dbcontext%E3%82%AF%E3%83%A9%E3%82%B9"><i class="fa fa-link"></i></a>DbContextクラス</h3>

<p>こちらは、簡単に言うとModelとDBとの間を仲介するクラスです。CRUD処理時はこのクラスを介します。</p>

<p>このクラスはEntityFrameworkに用意されており、実装していきます。</p>

<div class="code-frame" data-lang="C#">
<div class="code-lang"><span class="bold">Models/EFTestDbContext.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Linq</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Web</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">EFTest.Models</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">EFTestDbContext</span> <span class="p">:</span> <span class="n">System</span><span class="p">.</span><span class="n">Data</span><span class="p">.</span><span class="n">Entity</span><span class="p">.</span><span class="n">DbContext</span>
    <span class="p">{</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<p>このクラスの中身はModelと合わせて追加してくので、慌てない。</p>

<h2>
<span id="migratio設定" class="fragment"></span><a href="#migratio%E8%A8%AD%E5%AE%9A"><i class="fa fa-link"></i></a>Migratio設定</h2>

<p>続いてはMigrationの有効化が必要なんですね。プロジェクト単位で必要なようです。有効化はパッケージマネージャーで以下。</p>

<div class="code-frame" data-lang="powershell">
<div class="code-lang"><span class="bold">PackageManagerConsole</span></div>
<div class="highlight"><pre class="with-code"><code><span class="n">Enable-Migrations</span><span class="w">
</span></code></pre></div>
</div>

<p>少し待つと「完了しました」のメッセージ。</p>

<p>※このときのメッセージで、「コンテキストが既存のデータベースを対象にしているかをチェックしています」とあるので、DbContextクラスを作る前にやったらだめなのかな…？試してないです。</p>

<p>さて、完了後、設定ファイルが追加されるのがわかると思います。</p>

<p><strong>Migrations/Configration.cs</strong> ができてます。私はこれだけでテンションが上ってました。今後、Migrate毎に Migrationsフォルダにファイルが追加されていくので乞うご期待。</p>

<div class="code-frame" data-lang="C#">
<div class="code-lang"><span class="bold">Migrations/Configration.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">namespace</span> <span class="nn">EFTest.Migrations</span>
<span class="p">{</span>
    <span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
    <span class="k">using</span> <span class="nn">System.Data.Entity</span><span class="p">;</span>
    <span class="k">using</span> <span class="nn">System.Data.Entity.Migrations</span><span class="p">;</span>
    <span class="k">using</span> <span class="nn">System.Linq</span><span class="p">;</span>

    <span class="k">internal</span> <span class="k">sealed</span> <span class="k">class</span> <span class="nc">Configuration</span> <span class="p">:</span> <span class="n">DbMigrationsConfiguration</span><span class="p">&lt;</span><span class="n">EFTest</span><span class="p">.</span><span class="n">Models</span><span class="p">.</span><span class="n">EFTestDbContext</span><span class="p">&gt;</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="nf">Configuration</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="n">AutomaticMigrationsEnabled</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">protected</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">Seed</span><span class="p">(</span><span class="n">EFTest</span><span class="p">.</span><span class="n">Models</span><span class="p">.</span><span class="n">EFTestDbContext</span> <span class="n">context</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="c1">//  This method will be called after migrating to the latest version.</span>

            <span class="c1">//  You can use the DbSet&lt;T&gt;.AddOrUpdate() helper extension method </span>
            <span class="c1">//  to avoid creating duplicate seed data.</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

</code></pre></div>
</div>

<p>こちらがその設定ファイルです。 <code>protected override void Seed</code> の文字があります。そうです、 <strong>Seeder</strong> でございます。</p>

<p>使うときに改めて。とりあえずこれにて設定は完了。</p>

<h2>
<span id="migrate" class="fragment"></span><a href="#migrate"><i class="fa fa-link"></i></a>Migrate</h2>

<p>第一回Migrateをしてみようと思います。<br>
そのためには、モデルを作らないとですね。<br>
では参考サイトに倣って都道府県テーブルを作りましょう。</p>

<table>
<thead>
<tr>
<th style="text-align: left">Code</th>
<th style="text-align: left">Name</th>
<th style="text-align: left">Kana</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left">01</td>
<td style="text-align: left">北海道</td>
<td style="text-align: left">ホッカイドウ</td>
</tr>
<tr>
<td style="text-align: left">02</td>
<td style="text-align: left">青森県</td>
<td style="text-align: left">アオモリケン</td>
</tr>
<tr>
<td style="text-align: left">...</td>
<td style="text-align: left">...</td>
<td style="text-align: left">...</td>
</tr>
</tbody>
</table>

<p>こんなやつ。<br>
クラス名(テーブル名)は <strong>Prefectures</strong> としましょう。で、必要なフィールドをプロパティとして宣言。ここでValidationの条件等も設定できますが割愛。</p>

<div class="code-frame" data-lang="C#">
<div class="code-lang"><span class="bold">Models/Prefecture.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Linq</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Web</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">EFTest.Models</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">Prefecture</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="kt">int</span> <span class="n">Id</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>

        <span class="k">public</span> <span class="kt">string</span> <span class="n">Code</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>

        <span class="k">public</span> <span class="kt">string</span> <span class="n">Name</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>

        <span class="k">public</span> <span class="kt">string</span> <span class="n">Kana</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

</code></pre></div>
</div>

<p>IDは設定しておかないと、怒られますので追加します。ちなみに、デフォルトだとIDって名前じゃないと主キーとして認識されないようです。「この名前の列がいい！！」って言う人用に、設定もできますので後述。</p>

<p>続いて、DbContextも修正します。<br>
モデルを追加したらそのDbSetも設定して上げる必要があるんですね。</p>

<div class="code-frame" data-lang="C#">
<div class="code-lang"><span class="bold">Models/EFTestDbContext.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Linq</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Web</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Data.Entity</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">EFTest.Models</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">EFTestDbContext</span> <span class="p">:</span> <span class="n">DbContext</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="n">DbSet</span><span class="p">&lt;</span><span class="n">Prefecture</span><span class="p">&gt;</span> <span class="n">Prefecture</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

</code></pre></div>
</div>

<p>laravelなどを使ったことがある方は何となく分かるかもしれませんが、Migrateには名前を設定して上げる必要があります。</p>

<p>DbSetまで書けたら、PackageManagerConsoleで次のコマンドを叩いてMigrationに名称をつけてあげる必要があります。</p>

<div class="code-frame" data-lang="powershell">
<div class="code-lang"><span class="bold">PackageManagerConsole</span></div>
<div class="highlight"><pre class="with-code"><code><span class="n">Add-Migration</span><span class="w"> </span><span class="nx">CreatePrefecture</span><span class="w">
</span></code></pre></div>
</div>

<p>問題なければ、そのまま完了。<br>
黄色い背景文字で注意書きもありますので見ておいてくださいまし。</p>

<p>完了すると MigrationディレクトリにMigrationファイルが作成されています。</p>

<div class="code-frame" data-lang="C#">
<div class="code-lang"><span class="bold">Migrations/201902020130551_CreatePrefecture.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">namespace</span> <span class="nn">EFTest.Migrations</span>
<span class="p">{</span>
    <span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
    <span class="k">using</span> <span class="nn">System.Data.Entity.Migrations</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">partial</span> <span class="k">class</span> <span class="nc">CreatePrefecture</span> <span class="p">:</span> <span class="n">DbMigration</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">Up</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="nf">CreateTable</span><span class="p">(</span>
                <span class="s">"dbo.Prefectures"</span><span class="p">,</span>
                <span class="n">c</span> <span class="p">=&gt;</span> <span class="k">new</span>
                    <span class="p">{</span>
                        <span class="n">Id</span> <span class="p">=</span> <span class="n">c</span><span class="p">.</span><span class="nf">Int</span><span class="p">(</span><span class="n">nullable</span><span class="p">:</span> <span class="k">false</span><span class="p">,</span> <span class="n">identity</span><span class="p">:</span> <span class="k">true</span><span class="p">),</span>
                        <span class="n">Code</span> <span class="p">=</span> <span class="n">c</span><span class="p">.</span><span class="nf">String</span><span class="p">(),</span>
                        <span class="n">Name</span> <span class="p">=</span> <span class="n">c</span><span class="p">.</span><span class="nf">String</span><span class="p">(),</span>
                        <span class="n">Kana</span> <span class="p">=</span> <span class="n">c</span><span class="p">.</span><span class="nf">String</span><span class="p">(),</span>
                    <span class="p">})</span>
                <span class="p">.</span><span class="nf">PrimaryKey</span><span class="p">(</span><span class="n">t</span> <span class="p">=&gt;</span> <span class="n">t</span><span class="p">.</span><span class="n">Id</span><span class="p">);</span>

        <span class="p">}</span>

        <span class="k">public</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">Down</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="nf">DropTable</span><span class="p">(</span><span class="s">"dbo.Prefectures"</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

</code></pre></div>
</div>

<p>Migration経験者だと <strong>タイムスタンプ + Migration名称</strong> のファイル名に馴染みがあるかもしれませんね。</p>

<h2>
<span id="update-database" class="fragment"></span><a href="#update-database"><i class="fa fa-link"></i></a>Update Database</h2>

<p>Migrationファイルを作成しただけではDBに反映はされないので、PackageManagerConsoleで次のコマンドでを叩く必要があります。</p>

<div class="code-frame" data-lang="powershell">
<div class="code-lang"><span class="bold">PackageManagerConsole</span></div>
<div class="highlight"><pre class="with-code"><code><span class="n">Update-Database</span><span class="w">
</span></code></pre></div>
</div>

<p>これで、 <code>web.config</code> に記載した名称のDB及び、Migrationファイル通りのテーブルが作られます。</p>

<h2>
<span id="こらむ-migrationのロールバック" class="fragment"></span><a href="#%E3%81%93%E3%82%89%E3%82%80-migration%E3%81%AE%E3%83%AD%E3%83%BC%E3%83%AB%E3%83%90%E3%83%83%E3%82%AF"><i class="fa fa-link"></i></a>(こらむ) Migrationのロールバック</h2>

<p>Migrationがあるのであれば、間違えたときのロールバックもあるはず。あってほしいですよね。</p>

<p>無論あります。</p>

<p>まず、Migrationの状況を確認しましょう。</p>

<p><strong>Migrations</strong> ディレクトリの中にあるファイルでもMigrationの状況はわかりますが、</p>

<div class="code-frame" data-lang="powershell">
<div class="code-lang"><span class="bold">PackageManagerConsole</span></div>
<div class="highlight"><pre class="with-code"><code><span class="n">Get-Migrations</span><span class="w">
</span></code></pre></div>
</div>

<p>でも確認できます。</p>

<p>今回は一つしか作っていないので戻すも何もありませんが、戻すMigrationを決めたら以下コマンドで戻します。今回は例としてInitialというバージョンに戻すことを想定します。</p>

<div class="code-frame" data-lang="powershell">
<div class="code-lang"><span class="bold">PackageManagerConsole</span></div>
<div class="highlight"><pre class="with-code"><code><span class="n">Update-Database</span><span class="w"> </span><span class="nt">-TargetMigration</span><span class="w"> </span><span class="nx">Initial</span><span class="w">
</span></code></pre></div>
</div>

<p>以上、Migrationの反映方法から戻し方、DBの設定方法などでした。</p>

<h2>
<span id="列属性テーブル属性の変更について" class="fragment"></span><a href="#%E5%88%97%E5%B1%9E%E6%80%A7%E3%83%86%E3%83%BC%E3%83%96%E3%83%AB%E5%B1%9E%E6%80%A7%E3%81%AE%E5%A4%89%E6%9B%B4%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>列属性、テーブル属性の変更について</h2>

<p>続いては、プラスαの情報として属性についてお伝えします。<br>
アノテーションを用いることで、例えば型や長さ、NotNullなどが設定できます</p>

<h3>
<span id="属性table" class="fragment"></span><a href="#%E5%B1%9E%E6%80%A7table"><i class="fa fa-link"></i></a>属性(Table)</h3>

<p>まずはテーブルの属性変更。テーブルの属性って言っても主に変えることがありそうなのはテーブル名ですよね。</p>

<div class="code-frame" data-lang="C#">
<div class="code-lang"><span class="bold">Models/Prefecture.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">using</span> <span class="nn">System.ComponentModel.DataAnnotations.Schema</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">EFTest.Models</span>
<span class="p">{</span>
    <span class="p">[</span><span class="nf">Table</span><span class="p">(</span><span class="s">"Hoge"</span><span class="p">,</span> <span class="n">Schema</span> <span class="p">=</span> <span class="s">"fuga"</span><span class="p">)]</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">Prefecture</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="kt">int</span> <span class="n">Id</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>

        <span class="k">public</span> <span class="kt">string</span> <span class="n">Code</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>

        <span class="k">public</span> <span class="kt">string</span> <span class="n">Name</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>

        <span class="k">public</span> <span class="kt">string</span> <span class="n">Kana</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<p>こうすることで、テーブル名は <code>dbo.Prefectures</code> から  <code>fuga.Hoge</code> となります。</p>

<p>なお、Schemaは指定しない場合は変更ありません。</p>

<h3>
<span id="属性column" class="fragment"></span><a href="#%E5%B1%9E%E6%80%A7column"><i class="fa fa-link"></i></a>属性(Column)</h3>

<p><qiita-embed-ogp src="https://qiita.com/mrpero/items/607c31895d77815a77cb#displayname"></qiita-embed-ogp></p>

<p>今回はこちらをご参照ください。</p>

<p>また折を見て私もまとめます。</p>

<h2>
<span id="1--n-n--1-n--n" class="fragment"></span><a href="#1--n-n--1-n--n"><i class="fa fa-link"></i></a>1 : N, N : 1, N : N</h2>

<p>Entity Frameworkでは(でも?)ありがちな多対多は実装できます。</p>

<p>例として下図のようなものを実装します。<br>
(若干列の位置が違いますごめんなさい)</p>

<p><a href="https://camo.qiitausercontent.com/f136d81fd6aeab99aba5d5452b80f65c6cc7d839/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f34363037342f65386330376562372d306162372d376661302d326436312d3538623138383262316339302e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F46074%2Fe8c07eb7-0ab7-7fa0-2d61-58b1882b1c90.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=a8a07bf4653108fe9cd10a1cc895aa99" alt="uml.PNG" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/46074/e8c07eb7-0ab7-7fa0-2d61-58b1882b1c90.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F46074%2Fe8c07eb7-0ab7-7fa0-2d61-58b1882b1c90.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=e94364fe4d6804f1ce7be6344a957c7c 1x" loading="lazy"></a></p>

<p>モデルの実装及びControllerでの呼び出し方法については下記Githubにて公開しますのでご参照ください。<br>
<a href="https://github.com/cresta522/EntityFrameworkSample" rel="nofollow noopener" target="_blank">Github EntityFrameworkSample</a></p>

<h2>
<span id="最後に" class="fragment"></span><a href="#%E6%9C%80%E5%BE%8C%E3%81%AB"><i class="fa fa-link"></i></a>最後に</h2>

<p>Qiitaにてしっかり書くのは初めてなので皆さんが毎回どれだけ大変な思いをされているか思い知りました。。</p>

<p>今後は、もっと視点を広く持ってわかりやすい共有記事や備忘録を書きますのでよろしくお願いいたします。</p>
</div></div></section><div class="css-1yzj1fm"><div class="css-1uv1qiv"><span class="fa fa-twitter"></span></div><div class="css-1uv1qiv"><span class="fa fa-facebook"></span></div></div><div class="apm-Content"><div class="apm-Content_title">Why not register and get more from Qiita?</div><ol class="apm-Content_list"><li>We will deliver articles that match you<div class="description">By following users and tags, you can catch up information on technical fields that you are interested in as a whole</div></li><li>you can read useful information later efficiently<div class="description">By &quot;stocking&quot; the articles you like, you can search right away</div></li><div><a class="apm-Content_help" href="https://help.qiita.com/ja/articles/qiita-login-user" target="_blank"><i class="fa fa-fw fa-arrow-circle-right"></i>What you can do with signing up</a></div></ol><a href="/signup?callback_action=login_or_signup&amp;redirect_to=%2Fsorabin%2Fitems%2Fb50f2a3d23dceeea56d7&amp;realm=qiita" class="apm-Content_button apm-Content_button-signup">Sign up</a><a href="/login?callback_action=login_or_signup&amp;redirect_to=%2Fsorabin%2Fitems%2Fb50f2a3d23dceeea56d7&amp;realm=qiita" class="apm-Content_button apm-Content_button-signin">Login</a></div></div><div class="css-helsa7"></div></div></div></div><div class="css-109dbrr"><div class="css-5jpx49"><div class="css-mnxgyc"><button class=" css-1vlpknv"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/sorabin/items/b50f2a3d23dceeea56d7/likers" class="css-1iupg5d">12</a></div><div class="css-fsjkhv"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-1b17vb0">14</span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-7i7f4d"><div class="css-1gj7nt">Improve article</div><a href="/drafts/b50f2a3d23dceeea56d7/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/sorabin/items/b50f2a3d23dceeea56d7/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/sorabin/items/b50f2a3d23dceeea56d7/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/sorabin/items/b50f2a3d23dceeea56d7/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/sorabin/items/b50f2a3d23dceeea56d7.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="PersonalArticlePage" data-dom-id="PersonalArticlePage-react-component-ffcc925c-1e1f-4851-ba5a-31074e5c40f0">{"authorAnalyticsTrackingId":null,"organizationAnalyticsTrackingId":null}</script>
      
<footer id="globalFooter" class="st-Footer"><div class="st-Footer_container"><div class="st-Footer_start"><div class="st-Footer_logo"><svg viewbox="0 0 426.57 130" xmlns="http://www.w3.org/2000/svg"><circle cx="167.08" cy="21.4" r="12.28" /><path d="M250.81 29.66h23.48v18.9h-23.48z" /><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z" /><circle cx="216.33" cy="21.4" r="12.28" /></svg></div><div class="st-Footer_catchcopy">How developers code is here.</div><div class="st-Footer_socials"><a class="fa fa-twitter" href="https://twitter.com/qiita"></a><a class="fa fa-facebook-square" href="https://www.facebook.com/qiita/"></a></div></div><div class="st-Footer_end"><div class="st-Footer_qiita"><div class="st-Footer_label">Qiita</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="/about">About</a><a href="/terms">Terms</a><a href="/privacy">Privacy</a><a target="_blank" href="http://help.qiita.com/ja/articles/qiita-community-guideline">Guideline</a><a target="_blank" href="https://help.qiita.com/ja/articles/others-brand-guideline">Design Guideline</a></div><div class="st-Footer_column"><a href="/release-notes">Release</a><a href="/api/v2/docs">API</a><a href="/feedback/new">ご意見</a><a href="https://help.qiita.com">Help</a><a target="_blank" href="https://qiita.com/ads?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Advertisement</a></div></div></div><div class="st-Footer_increments"><div class="st-Footer_label">Increments</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="https://increments.co.jp/company/">About</a><a href="https://increments.co.jp/jobs/">採用情報</a><a href="https://blog.qiita.com">Blog</a></div><div class="st-Footer_column"><a href="https://teams.qiita.com/">Qiita Team</a><a href="https://jobs.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Jobs</a><a href="https://zine.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Zine</a></div></div></div></div></div><div class="st-Footer_copyright">© 2011-2021 Increments Inc.</div></footer><div id="Snackbar-react-component-a73a7baf-eaba-46ca-b6cb-c2d962bf37da"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="Snackbar" data-dom-id="Snackbar-react-component-a73a7baf-eaba-46ca-b6cb-c2d962bf37da">{}</script>
      
<div id="LoginModal-react-component-64068694-f91f-49d5-9d7e-795e007b3c14"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="LoginModal" data-dom-id="LoginModal-react-component-64068694-f91f-49d5-9d7e-795e007b3c14">{}</script>
      
<div id="StockModal-react-component-5b980c47-4de9-47f8-af20-3c62df80f125"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="StockModal" data-dom-id="StockModal-react-component-5b980c47-4de9-47f8-af20-3c62df80f125">{}</script>
      
</div><div id="dataContainer" style="display: none;" data-config="{&quot;actionPath&quot;:&quot;public/items#show&quot;,&quot;settings&quot;:{&quot;analyticsTrackingId&quot;:&quot;UA-24675221-12&quot;,&quot;assetsMap&quot;:{},&quot;csrfToken&quot;:&quot;qHq0g0YfZRU8hXkYeoRP/rK/fQfVCRwfmMn1jpbED9JazQjZ93t6QlniBZ+8ldE1t9clt28rcsT0ef8KqibhoA==&quot;,&quot;locale&quot;:&quot;en&quot;},&quot;currentUser&quot;:null}" /></body></html><script type="application/json" data-js-react-on-rails-store="AppStoreWithReactOnRails">{"snackbar":{"type":"","body":"","isActive":false},"article":{"article":{"body":"\n\u003ch2\u003e\n\u003cspan id=\"注意\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%B3%A8%E6%84%8F\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e注意\u003c/h2\u003e\n\n\u003cp\u003e今回の記事ではMigrationファイルを作成し反映する作業が多々あります。\u003c/p\u003e\n\n\u003cp\u003e説明は一度はしますが、反映に関するコマンドは\u003cdel\u003e面倒なので\u003c/del\u003e省略されることがあります。\u003c/p\u003e\n\n\u003cp\u003eそのため、まずは \u003cstrong\u003e次項にて\u003c/strong\u003e 頻出コマンドを記載しておきます。\u003c/p\u003e\n\n\u003cp\u003eまた、こういったしっかりした記事は初めて書きますので、何卒ご容赦いただければと思います。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"頻出コマンドpackagemanagerconsole\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E9%A0%BB%E5%87%BA%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89packagemanagerconsole\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e頻出コマンド(PackageManagerConsole)\u003c/h2\u003e\n\n\u003cp\u003e\u003ccode\u003eツール(T)\u003c/code\u003e -\u0026gt; \u003ccode\u003eNugetパッケージマネージャ(N)\u003c/code\u003e -\u0026gt; \u003ccode\u003eパッケージマネージャコンソール(O)\u003c/code\u003e\u003c/p\u003e\n\n\u003cp\u003eで入力するコマンドです。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"migration機能の有効化\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#migration%E6%A9%9F%E8%83%BD%E3%81%AE%E6%9C%89%E5%8A%B9%E5%8C%96\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eMigration機能の有効化\u003c/h3\u003e\n\n\u003cp\u003eプロジェクトにてMigrationの有効化を行うコマンドです。\u003cbr\u003e\n一度有効化すれば問題ありません。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"powershell\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003ePackageManagerConsole\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"n\"\u003eEnable-Migrations\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003eなお、接続先変更等行った場合は再度このコマンドを叩く必要がありそうです。私の場合、有効化したあとに接続先を変更してMigrateしても変更前の接続先に反映されてしまいました。\u003c/p\u003e\n\n\u003cp\u003e再度有効化(厳密には再設定?)を行うには \u003ccode\u003e-Force\u003c/code\u003e オプションをつければOKです。\u003cbr\u003e\n\u003ccode\u003epowershell:PackageManagerConsole\u003cbr\u003e\nEnable-Migrations -Force\u003cbr\u003e\n\u003c/code\u003e\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"migrateファイルの作成\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#migrate%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AE%E4%BD%9C%E6%88%90\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eMigrateファイルの作成\u003c/h3\u003e\n\n\u003cp\u003egitで \u003ccode\u003ecommit -m \"コメント\"\u003c/code\u003e のあとに \u003ccode\u003epush\u003c/code\u003eを行うのと同様、\u003c/p\u003e\n\n\u003cp\u003eMigrateファイルに一度名前をつけて、その後反映させる必要があります。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"powershell\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003ePackageManagerConsole\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"n\"\u003eAdd-Migration\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003eMigrationName\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"データベースへの反映\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%87%E3%83%BC%E3%82%BF%E3%83%99%E3%83%BC%E3%82%B9%E3%81%B8%E3%81%AE%E5%8F%8D%E6%98%A0\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eデータベースへの反映\u003c/h3\u003e\n\n\u003cp\u003eそのままなので補足はありません。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"powershell\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003ePackageManagerConsole\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"n\"\u003eUpdate-Database\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"参考サイト\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%8F%82%E8%80%83%E3%82%B5%E3%82%A4%E3%83%88\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e参考サイト\u003c/h2\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"entityframeworkについて\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#entityframework%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eEntityFrameworkについて\u003c/h3\u003e\n\n\u003cp\u003e\u003ca href=\"http://increment-i.hateblo.jp/archive/category/Entity%20Framework\" rel=\"nofollow noopener\" target=\"_blank\"\u003eインクリメンタルなはいかつにっき\u003c/a\u003e 様\u003c/p\u003e\n\n\u003cp\u003e上記リンクはEntityFrameworkのタグです。\u003cbr\u003e\nなお、本記事は上記リンクを知識定着のために書き直したものです。内容としては上記リンク先の内容と大差ありません。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"列属性について\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%88%97%E5%B1%9E%E6%80%A7%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e列属性について\u003c/h3\u003e\n\n\u003cp\u003e\u003cqiita-embed-ogp src=\"https://qiita.com/mrpero/items/607c31895d77815a77cb\"\u003e\u003c/qiita-embed-ogp\u003e\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"開発環境\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E9%96%8B%E7%99%BA%E7%92%B0%E5%A2%83\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e開発環境\u003c/h2\u003e\n\n\u003cp\u003eVisual Studio 2017 Community\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"entityframeworkって\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#entityframework%E3%81%A3%E3%81%A6\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eEntityFrameworkって？\u003c/h2\u003e\n\n\u003cp\u003eASP.netで使用できるDB関連のパッケージです。\u003c/p\u003e\n\n\u003cp\u003eLaravelやRoRでできる、\u003cstrong\u003eスキャフォールド(Scaffold)\u003c/strong\u003e や \u003cstrong\u003eマイグレーション(Migration)\u003c/strong\u003e ができます。\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003eコードファースト(CodeFirst)\u003c/strong\u003e という考えのもと、モデルを先に作ってしまえば、それに基づいてテーブルを作ってくれます。\u003c/p\u003e\n\n\u003cp\u003eなお、\u003cstrong\u003eSeeder\u003c/strong\u003eもあります。\u003cbr\u003e\n魅力的。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"参照設定\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%8F%82%E7%85%A7%E8%A8%AD%E5%AE%9A\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e参照設定\u003c/h2\u003e\n\n\u003cp\u003eNugetから以下のパッケージを落としておきましょう。\u003c/p\u003e\n\n\u003col\u003e\n\u003cli\u003e EntityFramework\u003c/li\u003e\n\u003cli\u003e EntityFramework.ja\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003cp\u003e後者はお好みですが、メッセージが日本語になるので。\u003c/p\u003e\n\n\u003cp\u003e\u003ccode\u003eツール(T)\u003c/code\u003e -\u0026gt; \u003ccode\u003eNugetパッケージマネージャ(N)\u003c/code\u003e -\u0026gt; \u003ccode\u003eソリューションのNugetパッケージの管理\u003c/code\u003e\u003c/p\u003e\n\n\u003cp\u003eで上記パッケージを検索してインストールするもよし、\u003c/p\u003e\n\n\u003cp\u003e\u003ccode\u003eツール(T)\u003c/code\u003e -\u0026gt; \u003ccode\u003eNugetパッケージマネージャ(N)\u003c/code\u003e -\u0026gt; \u003ccode\u003eパッケージマネージャコンソール(O)\u003c/code\u003e\u003c/p\u003e\n\n\u003cp\u003eで以下コマンドを叩いても可。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"powershell\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003ePackageManagerConsole\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"n\"\u003eInstall-Package\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003eEntityFramework\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003cspan class=\"n\"\u003eInstall-Package\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003eEntityFramework.ja\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"プロジェクトの作成\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E4%BD%9C%E6%88%90\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eプロジェクトの作成\u003c/h2\u003e\n\n\u003cp\u003e今回はC#で作ってみました。WebAPIは対応せず以下の通り設定してます。\u003c/p\u003e\n\n\u003cp\u003eソリューション名は \u003cstrong\u003eEntityFrameworkTest\u003c/strong\u003e ということで略して \u003cstrong\u003eEFTest\u003c/strong\u003e としてます。\u003c/p\u003e\n\n\u003cp\u003e特に設定もないのでそのまま作成しましょう。\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e新規プロジェクトの作成\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003e\u003ccode\u003eCtrl + Shift + N\u003c/code\u003e で「新しいプロジェクト」画面を開きます。\u003c/p\u003e\n\n\u003cp\u003e※ もちろん \u003ccode\u003eファイル(F)\u003c/code\u003e -\u0026gt; \u003ccode\u003e新規作成(N)\u003c/code\u003e -\u0026gt; \u003ccode\u003eプロジェクト(P)\u003c/code\u003e でも可能\u003c/p\u003e\n\n\u003cp\u003e続いて、表示された画面の左のツリーから\u003c/p\u003e\n\n\u003cp\u003e\u003ccode\u003eVisual C#\u003c/code\u003e -\u0026gt; \u003ccode\u003eWeb\u003c/code\u003e \u003c/p\u003e\n\n\u003cp\u003e中央のリストから\u003c/p\u003e\n\n\u003cp\u003e\u003ccode\u003eASP.NET Webアプリケーション(.NET Framework)\u003c/code\u003e \u003c/p\u003e\n\n\u003cp\u003eを選択してソリューションを作成。\u003cbr\u003e\n次の「 新しいASP. NET Webアプリケーション 」画面では\u003cbr\u003e\n\u003cstrong\u003eMVC\u003c/strong\u003e を選択。画面下部のチェックボックスはMVCだけでよいかと。\u003c/p\u003e\n\n\u003cp\u003e作成完了したら、ソリューションエクスプローラーにつらつらとファイル群。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"接続設定\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%8E%A5%E7%B6%9A%E8%A8%AD%E5%AE%9A\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e接続設定\u003c/h2\u003e\n\n\u003cp\u003e参考にさせていただいたサイト様では中盤に設定の記載がありますが、地味につまづきポイントなのではじめに記載します。\u003c/p\u003e\n\n\u003cp\u003eなお、次に紹介する接続文字列の設定をしないと、デフォルトの長ったらしい名前でDBが作られてしまうのでご注意。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"xml\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eWeb.config\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"cp\"\u003e\u0026lt;?xml version=\"1.0\" encoding=\"utf-8\"?\u0026gt;\u003c/span\u003e\n\u003cspan class=\"nt\"\u003e\u0026lt;configuration\u0026gt;\u003c/span\u003e  \n  \u003cspan class=\"c\"\u003e\u0026lt;!-- 中略 --\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"c\"\u003e\u0026lt;!-- ↓を追加 --\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"nt\"\u003e\u0026lt;connectionStrings\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;add\u003c/span\u003e \u003cspan class=\"na\"\u003ename=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"EFTestDbContext\"\u003c/span\u003e \u003cspan class=\"na\"\u003econnectionString=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Data Source=(localdb)\\MSSQLLocalDB;Initial Catalog=EFTestDB\"\u003c/span\u003e \u003cspan class=\"na\"\u003eproviderName=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"System.Data.SqlClient\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"nt\"\u003e\u0026lt;/connectionStrings\u0026gt;\u003c/span\u003e\n\u003cspan class=\"nt\"\u003e\u0026lt;/configuration\u0026gt;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e\u003ccode\u003econnectionStrings\u003c/code\u003e 要素が接続情報を管理しています。\u003c/p\u003e\n\n\u003cp\u003e今回重要視するのは\u003cbr\u003e\n\u003cstrong\u003econnectionString\u003c/strong\u003e 属性。この値内にある \u003cstrong\u003eInitial Catalog\u003c/strong\u003e で設定している「EFTestDB」がDBの名前です。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"クラスについて\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%AF%E3%83%A9%E3%82%B9%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eクラスについて\u003c/h2\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"dbcontextクラス\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#dbcontext%E3%82%AF%E3%83%A9%E3%82%B9\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eDbContextクラス\u003c/h3\u003e\n\n\u003cp\u003eこちらは、簡単に言うとModelとDBとの間を仲介するクラスです。CRUD処理時はこのクラスを介します。\u003c/p\u003e\n\n\u003cp\u003eこのクラスはEntityFrameworkに用意されており、実装していきます。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eModels/EFTestDbContext.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem.Collections.Generic\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem.Linq\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem.Web\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003enamespace\u003c/span\u003e \u003cspan class=\"nn\"\u003eEFTest.Models\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eEFTestDbContext\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eSystem\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eData\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eEntity\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eDbContext\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003eこのクラスの中身はModelと合わせて追加してくので、慌てない。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"migratio設定\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#migratio%E8%A8%AD%E5%AE%9A\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eMigratio設定\u003c/h2\u003e\n\n\u003cp\u003e続いてはMigrationの有効化が必要なんですね。プロジェクト単位で必要なようです。有効化はパッケージマネージャーで以下。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"powershell\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003ePackageManagerConsole\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"n\"\u003eEnable-Migrations\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e少し待つと「完了しました」のメッセージ。\u003c/p\u003e\n\n\u003cp\u003e※このときのメッセージで、「コンテキストが既存のデータベースを対象にしているかをチェックしています」とあるので、DbContextクラスを作る前にやったらだめなのかな…？試してないです。\u003c/p\u003e\n\n\u003cp\u003eさて、完了後、設定ファイルが追加されるのがわかると思います。\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003eMigrations/Configration.cs\u003c/strong\u003e ができてます。私はこれだけでテンションが上ってました。今後、Migrate毎に Migrationsフォルダにファイルが追加されていくので乞うご期待。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eMigrations/Configration.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003enamespace\u003c/span\u003e \u003cspan class=\"nn\"\u003eEFTest.Migrations\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem.Data.Entity\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem.Data.Entity.Migrations\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem.Linq\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003einternal\u003c/span\u003e \u003cspan class=\"k\"\u003esealed\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eConfiguration\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eDbMigrationsConfiguration\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eEFTest\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eModels\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eEFTestDbContext\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003eConfiguration\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eAutomaticMigrationsEnabled\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003efalse\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003eprotected\u003c/span\u003e \u003cspan class=\"k\"\u003eoverride\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eSeed\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eEFTest\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eModels\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eEFTestDbContext\u003c/span\u003e \u003cspan class=\"n\"\u003econtext\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"c1\"\u003e//  This method will be called after migrating to the latest version.\u003c/span\u003e\n\n            \u003cspan class=\"c1\"\u003e//  You can use the DbSet\u0026lt;T\u0026gt;.AddOrUpdate() helper extension method \u003c/span\u003e\n            \u003cspan class=\"c1\"\u003e//  to avoid creating duplicate seed data.\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003eこちらがその設定ファイルです。 \u003ccode\u003eprotected override void Seed\u003c/code\u003e の文字があります。そうです、 \u003cstrong\u003eSeeder\u003c/strong\u003e でございます。\u003c/p\u003e\n\n\u003cp\u003e使うときに改めて。とりあえずこれにて設定は完了。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"migrate\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#migrate\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eMigrate\u003c/h2\u003e\n\n\u003cp\u003e第一回Migrateをしてみようと思います。\u003cbr\u003e\nそのためには、モデルを作らないとですね。\u003cbr\u003e\nでは参考サイトに倣って都道府県テーブルを作りましょう。\u003c/p\u003e\n\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth style=\"text-align: left\"\u003eCode\u003c/th\u003e\n\u003cth style=\"text-align: left\"\u003eName\u003c/th\u003e\n\u003cth style=\"text-align: left\"\u003eKana\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd style=\"text-align: left\"\u003e01\u003c/td\u003e\n\u003ctd style=\"text-align: left\"\u003e北海道\u003c/td\u003e\n\u003ctd style=\"text-align: left\"\u003eホッカイドウ\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd style=\"text-align: left\"\u003e02\u003c/td\u003e\n\u003ctd style=\"text-align: left\"\u003e青森県\u003c/td\u003e\n\u003ctd style=\"text-align: left\"\u003eアオモリケン\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd style=\"text-align: left\"\u003e...\u003c/td\u003e\n\u003ctd style=\"text-align: left\"\u003e...\u003c/td\u003e\n\u003ctd style=\"text-align: left\"\u003e...\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\n\u003cp\u003eこんなやつ。\u003cbr\u003e\nクラス名(テーブル名)は \u003cstrong\u003ePrefectures\u003c/strong\u003e としましょう。で、必要なフィールドをプロパティとして宣言。ここでValidationの条件等も設定できますが割愛。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eModels/Prefecture.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem.Collections.Generic\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem.Linq\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem.Web\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003enamespace\u003c/span\u003e \u003cspan class=\"nn\"\u003eEFTest.Models\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003ePrefecture\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003eId\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"k\"\u003eset\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003eCode\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"k\"\u003eset\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003eName\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"k\"\u003eset\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003eKana\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"k\"\u003eset\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003eIDは設定しておかないと、怒られますので追加します。ちなみに、デフォルトだとIDって名前じゃないと主キーとして認識されないようです。「この名前の列がいい！！」って言う人用に、設定もできますので後述。\u003c/p\u003e\n\n\u003cp\u003e続いて、DbContextも修正します。\u003cbr\u003e\nモデルを追加したらそのDbSetも設定して上げる必要があるんですね。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eModels/EFTestDbContext.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem.Collections.Generic\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem.Linq\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem.Web\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem.Data.Entity\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003enamespace\u003c/span\u003e \u003cspan class=\"nn\"\u003eEFTest.Models\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eEFTestDbContext\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eDbContext\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eDbSet\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003ePrefecture\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ePrefecture\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"k\"\u003eset\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003elaravelなどを使ったことがある方は何となく分かるかもしれませんが、Migrateには名前を設定して上げる必要があります。\u003c/p\u003e\n\n\u003cp\u003eDbSetまで書けたら、PackageManagerConsoleで次のコマンドを叩いてMigrationに名称をつけてあげる必要があります。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"powershell\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003ePackageManagerConsole\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"n\"\u003eAdd-Migration\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003eCreatePrefecture\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e問題なければ、そのまま完了。\u003cbr\u003e\n黄色い背景文字で注意書きもありますので見ておいてくださいまし。\u003c/p\u003e\n\n\u003cp\u003e完了すると MigrationディレクトリにMigrationファイルが作成されています。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eMigrations/201902020130551_CreatePrefecture.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003enamespace\u003c/span\u003e \u003cspan class=\"nn\"\u003eEFTest.Migrations\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem.Data.Entity.Migrations\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003epartial\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eCreatePrefecture\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eDbMigration\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eoverride\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eUp\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"nf\"\u003eCreateTable\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n                \u003cspan class=\"s\"\u003e\"dbo.Prefectures\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                \u003cspan class=\"n\"\u003ec\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e\n                    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                        \u003cspan class=\"n\"\u003eId\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ec\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eInt\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003enullable\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"k\"\u003efalse\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eidentity\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"k\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\n                        \u003cspan class=\"n\"\u003eCode\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ec\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eString\u003c/span\u003e\u003cspan class=\"p\"\u003e(),\u003c/span\u003e\n                        \u003cspan class=\"n\"\u003eName\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ec\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eString\u003c/span\u003e\u003cspan class=\"p\"\u003e(),\u003c/span\u003e\n                        \u003cspan class=\"n\"\u003eKana\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ec\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eString\u003c/span\u003e\u003cspan class=\"p\"\u003e(),\u003c/span\u003e\n                    \u003cspan class=\"p\"\u003e})\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003ePrimaryKey\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003et\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003et\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eId\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eoverride\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eDown\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"nf\"\u003eDropTable\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"dbo.Prefectures\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003eMigration経験者だと \u003cstrong\u003eタイムスタンプ + Migration名称\u003c/strong\u003e のファイル名に馴染みがあるかもしれませんね。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"update-database\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#update-database\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eUpdate Database\u003c/h2\u003e\n\n\u003cp\u003eMigrationファイルを作成しただけではDBに反映はされないので、PackageManagerConsoleで次のコマンドでを叩く必要があります。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"powershell\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003ePackageManagerConsole\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"n\"\u003eUpdate-Database\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003eこれで、 \u003ccode\u003eweb.config\u003c/code\u003e に記載した名称のDB及び、Migrationファイル通りのテーブルが作られます。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"こらむ-migrationのロールバック\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%93%E3%82%89%E3%82%80-migration%E3%81%AE%E3%83%AD%E3%83%BC%E3%83%AB%E3%83%90%E3%83%83%E3%82%AF\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e(こらむ) Migrationのロールバック\u003c/h2\u003e\n\n\u003cp\u003eMigrationがあるのであれば、間違えたときのロールバックもあるはず。あってほしいですよね。\u003c/p\u003e\n\n\u003cp\u003e無論あります。\u003c/p\u003e\n\n\u003cp\u003eまず、Migrationの状況を確認しましょう。\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003eMigrations\u003c/strong\u003e ディレクトリの中にあるファイルでもMigrationの状況はわかりますが、\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"powershell\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003ePackageManagerConsole\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"n\"\u003eGet-Migrations\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003eでも確認できます。\u003c/p\u003e\n\n\u003cp\u003e今回は一つしか作っていないので戻すも何もありませんが、戻すMigrationを決めたら以下コマンドで戻します。今回は例としてInitialというバージョンに戻すことを想定します。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"powershell\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003ePackageManagerConsole\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"n\"\u003eUpdate-Database\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nt\"\u003e-TargetMigration\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"nx\"\u003eInitial\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e以上、Migrationの反映方法から戻し方、DBの設定方法などでした。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"列属性テーブル属性の変更について\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%88%97%E5%B1%9E%E6%80%A7%E3%83%86%E3%83%BC%E3%83%96%E3%83%AB%E5%B1%9E%E6%80%A7%E3%81%AE%E5%A4%89%E6%9B%B4%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e列属性、テーブル属性の変更について\u003c/h2\u003e\n\n\u003cp\u003e続いては、プラスαの情報として属性についてお伝えします。\u003cbr\u003e\nアノテーションを用いることで、例えば型や長さ、NotNullなどが設定できます\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"属性table\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%B1%9E%E6%80%A7table\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e属性(Table)\u003c/h3\u003e\n\n\u003cp\u003eまずはテーブルの属性変更。テーブルの属性って言っても主に変えることがありそうなのはテーブル名ですよね。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"C#\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eModels/Prefecture.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem.ComponentModel.DataAnnotations.Schema\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003enamespace\u003c/span\u003e \u003cspan class=\"nn\"\u003eEFTest.Models\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nf\"\u003eTable\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Hoge\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eSchema\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"fuga\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)]\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003ePrefecture\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003eId\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"k\"\u003eset\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003eCode\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"k\"\u003eset\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003eName\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"k\"\u003eset\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003eKana\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"k\"\u003eset\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003eこうすることで、テーブル名は \u003ccode\u003edbo.Prefectures\u003c/code\u003e から  \u003ccode\u003efuga.Hoge\u003c/code\u003e となります。\u003c/p\u003e\n\n\u003cp\u003eなお、Schemaは指定しない場合は変更ありません。\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"属性column\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%B1%9E%E6%80%A7column\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e属性(Column)\u003c/h3\u003e\n\n\u003cp\u003e\u003cqiita-embed-ogp src=\"https://qiita.com/mrpero/items/607c31895d77815a77cb#displayname\"\u003e\u003c/qiita-embed-ogp\u003e\u003c/p\u003e\n\n\u003cp\u003e今回はこちらをご参照ください。\u003c/p\u003e\n\n\u003cp\u003eまた折を見て私もまとめます。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"1--n-n--1-n--n\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#1--n-n--1-n--n\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e1 : N, N : 1, N : N\u003c/h2\u003e\n\n\u003cp\u003eEntity Frameworkでは(でも?)ありがちな多対多は実装できます。\u003c/p\u003e\n\n\u003cp\u003e例として下図のようなものを実装します。\u003cbr\u003e\n(若干列の位置が違いますごめんなさい)\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/f136d81fd6aeab99aba5d5452b80f65c6cc7d839/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f34363037342f65386330376562372d306162372d376661302d326436312d3538623138383262316339302e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F46074%2Fe8c07eb7-0ab7-7fa0-2d61-58b1882b1c90.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=a8a07bf4653108fe9cd10a1cc895aa99\" alt=\"uml.PNG\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/46074/e8c07eb7-0ab7-7fa0-2d61-58b1882b1c90.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F46074%2Fe8c07eb7-0ab7-7fa0-2d61-58b1882b1c90.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=e94364fe4d6804f1ce7be6344a957c7c 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eモデルの実装及びControllerでの呼び出し方法については下記Githubにて公開しますのでご参照ください。\u003cbr\u003e\n\u003ca href=\"https://github.com/cresta522/EntityFrameworkSample\" rel=\"nofollow noopener\" target=\"_blank\"\u003eGithub EntityFrameworkSample\u003c/a\u003e\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"最後に\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%9C%80%E5%BE%8C%E3%81%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e最後に\u003c/h2\u003e\n\n\u003cp\u003eQiitaにてしっかり書くのは初めてなので皆さんが毎回どれだけ大変な思いをされているか思い知りました。。\u003c/p\u003e\n\n\u003cp\u003e今後は、もっと視点を広く持ってわかりやすい共有記事や備忘録を書きますのでよろしくお願いいたします。\u003c/p\u003e\n","createdAt":"2019-02-03T15:18:02Z","elapsedYearsFromLastModifiedAt":2,"encryptedId":"6zc5y8ZitXnA+79qRs/J3eC6u5oGUlFq--F/aGvNPd6b9P3FHx--s2t5KWbK3Y8cxBJc5P713w==","isBanned":false,"isDeprecated":true,"isDestroyableByViewer":false,"isEditRequestReadableByViewer":true,"isEditRequestSendableByViewer":true,"isLikableByViewer":true,"isLikedByViewer":false,"isPublic":true,"isSlide":false,"isStockableByViewer":true,"isStockedByViewer":false,"isSubscribableByViewer":false,"isSubscribedByViewer":false,"isUpdatableByViewer":false,"isUpdated":false,"lastModifiedAt":"2019-02-03T15:18:02Z","likesCount":12,"linkUrl":"https://qiita.com/sorabin/items/b50f2a3d23dceeea56d7","organization":null,"originalId":780189,"stockedCount":14,"title":"EntityFrameworkを使ってみた。","toc":"\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E6%B3%A8%E6%84%8F\"\u003e注意\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E9%A0%BB%E5%87%BA%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89packagemanagerconsole\"\u003e頻出コマンド(PackageManagerConsole)\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#migration%E6%A9%9F%E8%83%BD%E3%81%AE%E6%9C%89%E5%8A%B9%E5%8C%96\"\u003eMigration機能の有効化\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#migrate%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AE%E4%BD%9C%E6%88%90\"\u003eMigrateファイルの作成\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%87%E3%83%BC%E3%82%BF%E3%83%99%E3%83%BC%E3%82%B9%E3%81%B8%E3%81%AE%E5%8F%8D%E6%98%A0\"\u003eデータベースへの反映\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%8F%82%E8%80%83%E3%82%B5%E3%82%A4%E3%83%88\"\u003e参考サイト\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#entityframework%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6\"\u003eEntityFrameworkについて\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%88%97%E5%B1%9E%E6%80%A7%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6\"\u003e列属性について\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E9%96%8B%E7%99%BA%E7%92%B0%E5%A2%83\"\u003e開発環境\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#entityframework%E3%81%A3%E3%81%A6\"\u003eEntityFrameworkって？\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%8F%82%E7%85%A7%E8%A8%AD%E5%AE%9A\"\u003e参照設定\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E4%BD%9C%E6%88%90\"\u003eプロジェクトの作成\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E6%8E%A5%E7%B6%9A%E8%A8%AD%E5%AE%9A\"\u003e接続設定\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%AF%E3%83%A9%E3%82%B9%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6\"\u003eクラスについて\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#dbcontext%E3%82%AF%E3%83%A9%E3%82%B9\"\u003eDbContextクラス\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#migratio%E8%A8%AD%E5%AE%9A\"\u003eMigratio設定\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#migrate\"\u003eMigrate\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#update-database\"\u003eUpdate Database\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%81%93%E3%82%89%E3%82%80-migration%E3%81%AE%E3%83%AD%E3%83%BC%E3%83%AB%E3%83%90%E3%83%83%E3%82%AF\"\u003e(こらむ) Migrationのロールバック\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%88%97%E5%B1%9E%E6%80%A7%E3%83%86%E3%83%BC%E3%83%96%E3%83%AB%E5%B1%9E%E6%80%A7%E3%81%AE%E5%A4%89%E6%9B%B4%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6\"\u003e列属性、テーブル属性の変更について\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%B1%9E%E6%80%A7table\"\u003e属性(Table)\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E5%B1%9E%E6%80%A7column\"\u003e属性(Column)\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#1--n-n--1-n--n\"\u003e1 : N, N : 1, N : N\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E6%9C%80%E5%BE%8C%E3%81%AB\"\u003e最後に\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n","totalPv":11898,"uuid":"b50f2a3d23dceeea56d7","banReason":null,"adventCalendarItem":null,"author":{"encryptedId":"svM05M66v67zPD/cU+Z3LZXn1tc=--POika9WL9/KDJqvi--p3KllEfA724Z83gamRlGGg==","originalId":46074,"description":"◆仕事\r\nERP開発のSE\r\nエンジニア講師\r\n学習塾の講師\r\n\r\n◆言語\r\n.Net系\r\nLaravelなどのWeb開発まで\r\nとか。\r\n\r\n◆その他\r\n雑多なアカウントですがTwitterもこちらもフォローしてもらえると嬉しいです","facebookUrl":null,"githubUrl":null,"isBlockingViewer":false,"isFollowableByViewer":true,"isFollowedByViewer":false,"isTweetWebNotificationReceivable":true,"linkedinUrl":null,"name":"","profileImageUrl":"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/46074/profile-images/1567145271","profileImageUrlW48":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F46074%2Fprofile-images%2F1567145271?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=48\u0026s=6e8da049fd96d9650551941db2578eec","profileImageUrlW75":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F46074%2Fprofile-images%2F1567145271?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=83f7a459d98478722076096ecc073ffd","urlName":"sorabin","websiteUrl":"http://cresta522.hateblo.jp/","twitterUrl":"https://twitter.com/sorabin_","twitterUrlName":"sorabin_","revealedOrganizations":{"edges":[]}},"tags":[{"name":"C#","urlName":"csharp"},{"name":".NET","urlName":".net"},{"name":"EntityFramework","urlName":"entityframework"}],"followingLikers":{"edges":[]},"comments":{"totalCount":0}},"comments":[],"client":null,"ads_event_emitter":null}}</script>
