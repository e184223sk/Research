More than 1 year has passed since last update.C#でUnitTest(MSTest)を書いていると、テスト用のデータファイルが必要な場合がある。
(画像を読み込んでなにかするとか、ヒアドキュメントで書くのは厳しいサイズのJSONがあるとか)テストケースごとに必要なファイルが異なるので、"テストクラス/テストケース"という名前のディレクトリに分けて管理することにした。
(DeploymentItemAttributeはいまいち便利さが分からない…)テストデータはVisualStudioから簡単に表示したいので、プロジェクトに登録し、ビルド時にデータファイルとして出力フォルダにコピーするよう設定した。
テストの実装側ではこうした。nameof(SomeTestClass)のところを書き換えるのがとても面倒くさい。こんなクラスを作った。この関数を呼び出すと、以下が行われる。全テストケースで、以下をコピペするだけで、対応ディレクトリを取得できるようになった。テストフレームワークがNUnitの場合は、TestMethodAttributeをTestAttributeに変えればそのまま動くはず。


