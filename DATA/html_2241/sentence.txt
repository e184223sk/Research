More than 1 year has passed since last update.同じことで躓く人がいなくなりますように書き残します。Azureサーバーへの通信は特定多数のPC、android端末からのみを許可したい設定からクライアント証明書をandroid端末にインストールし、
プログラムで参照して、リクエストヘッダに載せたかったhttp://dsas.blog.klab.org/archives/51995232.html
サイトを要約すると、設定から証明書をインストールした場合、
アプリから参照する方法がない。
アプリからインストールさせればできる。アプリから証明書をインストールさせる。
パスワードはユーザーに入力させ、証明書はファイルアプリ内のフォルダに置き、
初回パスワード入力で、証明書をインストールしたら、証明書を削除する想定。２回目以降は証明書ストアから取得するよう書きました。実際にインストールも、取り出しもできたのですが、問題がありました。証明書を端末から取り出した場合のみ、証明書についている秘密鍵がnullになってしまい、サーバーで認証が通りません。X509Certificate2.PriveteKeyは明示的に値いれようとすると、エラーになります。
Android特有の権限回りの問題なのか、ソースで解決できる問題なのかもわかってません。
Xamarin.Android触って２日目なので、実はもっと簡単だったりするかもですが、解決したら追記します。


