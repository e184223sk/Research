More than 1 year has passed since last update.C# で Amazon DynamoDB に保存されている時系列データを GSI（グローバルセカンダリインデックス）を使って範囲指定して検索する方法です。下記の構造のデータを保存できるよう、AWS Console から Id、DateAndTime をキーにした SampleTable テーブルを用意します。
次に、下記のように SaveAsync メソッドを使って 10件のデータを作成します。下記のように ScanAsync メソッドを使って全データを取得します。そうすると、下記のようにデータを取得できます。AWS Console からは下記のようにデータが保存されていることを確認できます。
事前準備の最後に、日時を範囲指定して検索できるよう、AWS Console から Date、Time をキーにした Date-Time-index インデックス（GSI）を用意します。
これで準備は完了です。下記のようにハッシュキーに 001 を指定して QueryAsync() メソッドを使ってデータを取得します。そうすると、下記のようにデータを取得できます。Id が 001 のデータのみを取得できています。下記のように GSI の名称 Date-Time-index を指定し、ハッシュキーに 2020-08-11 を指定して、レンジキーには QueryOperator.Between と 11:40:42 - 11:40:43 を指定して QueryAsync() メソッドを使ってデータを取得します。そうすると、下記のようにデータを取得できます。SampleTable テーブルのハッシュキーである Id をまたいで 11:40:42 - 11:40:43 のデータのみを取得できています。GSI を使って日時を範囲指定して検索することはできました。
ただ、コスト面の考慮や NoSQL らしい設計についてはできているかというと、、より良い方法があったら教えてください m(_ _)m


