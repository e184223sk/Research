More than 1 year has passed since last update.はじめまして。木更津高専 Advent Calendar 2019 11日目担当の、わくと です。
初めてのQiita記事です。がんばります！コーディング中・ブラウジング中に画面の右下あたりが寂しくなることはないですか？
そんなときにぴったりな、いつでも見守ってくれるデスクトップマスコットを作りました！ころねさんのデスクトップマスコット作ってみました😇#戌神ころねMMD pic.twitter.com/CFdLYOP3rSボーン・モーフなどはアニメーションなどを使わず、すべてスクリプトで動かしています。
また、ウィンドウの透過などの処理はWindowsAPIを叩いています。まず、MMDのモデルをMMD4Mecanimを使ってインポートします。この記事がわかりやすかったです。
取り込む前にreadmeをしっかり確認します。表情のスクリプトです。長いので簡略化してあります。マウスの座標を、中心が(0,0)、縦方向・横方向それぞれを-1.0～1.0の範囲になるように正規化して、そのまま目のモーフに代入しています。
実際は眉毛など他の場所も操作していますが、省略します。
このスクリプトをモデルにアタッチします。表情とほぼ一緒ですが、ボーンを動かすため回転情報を渡している点が違います。回転しすぎないようにするために三項演算子を使っているため少し複雑に見えますが、やっていることはマウスの座標に倍率をかけて代入しているだけです。個人的に考えるのが一番大変だったところです。
なでなで処理は頭の上でのマウスの移動距離を使っています。特に難しいことはしていませんが、一定時間以上マウスが動かないでいると普通の表情に戻ります。
当たり判定は下の画像のようになっています。
頑張ればがんばった分だけ可愛くなるので作っていて楽しかったです。
簡単に作れるので、自分の推しで作ってみるのはいかがでしょうか？
まだまだ、待機モーションなど付け足したい機能があるので、これからも開発を続けていこうと思います！
なにかあったらTwitterに連絡してもらえると助かります。（自分の書いたコードを公開するって結構恥ずかしいんですね…）https://qiita.com/hiroyuki_hon/items/931c79164b0ffe19517f
https://qiita.com/mkt_/items/82f4057f51b1657c971e
https://qiita.com/gatosyocora/items/7cbe14914f8e603f2eab
http://chokuto.ifdef.jp/urawaza/api/©2019 cover corp.


