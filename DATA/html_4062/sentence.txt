データ作成/更新日時などメタデータ列の値設定は共通処理にすると便利です。
Entity Framework ではどのタイミングでどのように設定すればよいでしょうか。※データベースのトリガーにしないこと、ローカルのシステム日付を使用することの是非についてはここでは触れません。方法はいくつかあります（一番きれいなのは最後の方式です）。たとえば ASP.NET Web フォームの場合、以下のハンドラで e.Values（Insert の場合）または e.NewValues（Update の場合）の各カラム要素に値を設定すると反映されます。たとえば ASP.NET Web フォームの場合、以下のハンドラでエンティティを取得してプロパティに設定することができます。e.InputParameters[0] にエンティティが格納されています。e.Entity にエンティティが格納されています。個別のデータや操作に依存した値を設定するのには向きませんが、データ作成/更新日時の設定であれば、今回ご紹介した中で最も確実で実装効率のよい方法と言えます。
ここでは DbContext（EF 4.1 ～）の SaveChanges メソッドをオーバーライドして作成日時を設定する例をご紹介します。エンティティの部分クラス定義（インターフェイス実装）を手動で行う必要がありますが、dynamic 方式よりきれいです。
エンティティを追加したときなど、部分クラス定義を忘れないように注意が必要です（そのためのユニットテストが一番下にあります）。


