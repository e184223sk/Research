More than 3 years have passed since last update.配列やリストの列挙処理において、列挙される値だけではなく、同時にインデックス/添え字を利用したいということが多々あります。いいかえれば「インデックス付きのループを回したい」というとき、C言語スタイルのforループ(for (int i = 0; i &lt; len; i++))を避けて、これを実現する方法を考えてみます(´・ω・｀)まずメソッドチェーンの一環としてwith index的なことをしたい場合、Selectのオーバライドを利用します。ではメソッドチェーンではない場合、より具体的にはforeachにおいてインデックス付きのループを回したい場合はどうすればよいでしょうか? まず思い浮かぶのは匿名型を利用する方法です。匿名型の精製コストが気になるのと、やや見た目がもっさり(?)しますが、大半のケースで問題を解決してくれそうです。C#7以降は言語機能としてタプルによる多値がサポートされているので、これを利用することもできます。C#7以降で、かつSystem.ValueTupleが導入されていることが前提にはなりますが、これが一番すっきりしていると個人的には感じます。たとえば以下のような拡張メソッドを定義しておくと、便利かもしれませんね(´・ω・｀)


