C#で文字列の数式を計算する方法を探していたんですが、
ちょっといいのがないので作りました。以下の事項に対応しています
・四則演算
・括弧
・+/- の単項演算子
・変数、関数よく見かける方法と比べて、変数や関数が使えるのが特徴です。こちらのプログラムはGitHubの方に登録しました。
https://github.com/izmktr/SimpleCalc変数や関数はCalc時にfloat f(string name, List &lt; float &gt; arg) の関数を引き渡します。
変数や関数が出てくるたびに渡した関数が呼び出されます。pi と書いた場合は変数とみなされ、pi()と書いた場合は引数0の関数とみなされます。
変数の場合は、arg=null、関数の場合はarg=List となります。Unityの座標計算に使うために作ったので、数値はすべてfloatですが、
Intなりdoubleなりに書き換えるといいと思います関数本体のソース


