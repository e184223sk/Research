More than 1 year has passed since last update.当日に慌ててアドベントカレンダー記事を書くという体たらくLeft, Top の値をバインディングしながら、ウィンドウ座標を変えたかった。
しかし、直接 Left Top に値をバインディングすると、ウィンドウ読み込み後にバインディングが切れる。XAML で簡単にバインディングできるようにしたかったので、ビヘイビアにした。
書いたコードは以下ここらへんはよくある添付プロパティと同じ。
依存関係プロパティの宣言アタッチされた時に、アタッチされたウィンドウの座標をバンディングされてる値で書き換える。
ウィンドウの右端の座標を計算する。（左側のモニターの座標がマイナス値だったりするので重要。）
ウィンドウの座標変化時のイベントを購読して以下の処理をする。  こんな感じで書くInteraction.Behaviors に登録、Left と Top の値にそれぞれバインディングする値を書いて終わり。ビヘイビア自作をすれば、バインディング値を使いながらイベント購読して値を書き換えたりできる。
Microsoft.Xaml.Behaviors はいいぞ。


