More than 1 year has passed since last update.この記事では赤い部分を作成した。これを実装する際にしたミスを含めて書きたいと思う
まずanimationを作成するには上のように
[window]→[Animation]→[Animation]を選択する
そうすると以下のようにAnimator controllerとAnimatorコンポーネントとAnimation Clipが作成されるAnimation Clipの中で設置するひし形のものをキーという。
Animation Clipを編集するが、傾きをrotateで表せばいいと思っていた。
0.10,0.20,0.30の位置にY軸にそれぞれ30,40,50で回転させたキーを置いた。実行してみるとボタンを押したときに回転するが、なぜか少ししたらプレイヤーの機体が消えてしまう。
原因を調べてみたらどうやらZ座標がマイナス方向に増えていってしまい、カメラよりも後ろにプレイヤーの機体が行ってしまっていることが分かった。
おそらく30や40に傾けた上でtranslateで移動しているのでz軸方向にも移動してしまったと思われる。gameの中でプレイヤーの機体をY軸で傾けたものをスクリーンショットで撮り、それをUnity内でSprite Editorを用いることで余計な部分から切り抜いた。
Sprite EditorのCustom Outlineで以下のように点をとって切り抜いていくこれを右に傾けた時と左に傾けた時で作成してAnimation Clipに以下のようにそれぞれ配置する。このクリップをAnimator Controllerで遷移させる。作成したクリップをAnimator Controller上にドラック&amp;ドロップする。
このとき遷移させる条件を指定しないといけないので左上のParametersから[+のマーク]→[Bool]を選択する。これでスクリプトの中でParametersのパラメータをtrue or falseにすることで遷移させることができる。Has Exit Timeのチェックを外してTransition Durationを0にする
Conditionsの+マークをおして遷移条件を作成する。後はスクリプトでタップしたらAnimationが動作するようにする例えばanim.SetBool("left_long", true)でParameter"left_long"をtrueにするので左に傾くアニメーションを流す。スクリプトの内容を説明するとInput.touchCount &gt; 0　でタッチされているかチェックする。
Touch touch = Input.GetTouch(0)は長押しなどのタッチされた時の状態を取得している。
条件の中にあるtouch.phase==TouchPhase.Beganは「タッチしたとき」、touch.phase == TouchPhase.Movedは「長押ししてるとき」、touch.phase == TouchPhase.Endedは「指を話したとき」の判定をしている。これでできたのが以下になる。これ簡単にみえるけどつまづいたところを調べたりしてかなり時間かかってしまった。これであとはボスを作るだけになった。


