<!DOCTYPE html><html><head><meta charset="utf-8" /><title>Go, C#, Java, Pythonの簡易サーバーでクラウドサービスのWebhook通知を受け取る - Qiita</title><meta content="width=device-width,initial-scale=1,shrink-to-fit=no,viewport-fit=cover" name="viewport" /><meta content="#55c500" name="theme-color" /><meta content="XWpkTG32-_C4joZoJ_UsmDUi-zaH-hcrjF6ZC_FoFbk" name="google-site-verification" /><meta content="telephone=no" name="format-detection" /><link rel="canonical" href="https://qiita.com/thrzn41/items/276aaaf5df11e351880a" /><link href="/manifest.json" rel="manifest" /><link href="/opensearch.xml" rel="search" title="Qiita" type="application/opensearchdescription+xml" /><link as="script" href="https://www.googletagservices.com/tag/js/gpt.js" rel="preload" /><link href="https://securepubads.g.doubleclick.net" rel="preconnect" /><script async="" src="https://www.googletagservices.com/tag/js/gpt.js"></script><meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="ibNvGvwyMatCZuGy5s6fS7fatpAcRohl2hgpM/VbjuGn4fDXgUXRF47AN7l3x/5Rm+dxrEHpbEHOrUhCY1HjJQ==" /><link rel="shortcut icon" type="image/x-icon" href="https://cdn.qiita.com/assets/favicons/public/production-c620d3e403342b1022967ba5e3db1aaa.ico" /><link rel="apple-touch-icon" type="image/png" href="https://cdn.qiita.com/assets/favicons/public/apple-touch-icon-ec5ba42a24ae923f16825592efdc356f.png" /><link rel="stylesheet" media="all" href="https://cdn.qiita.com/assets/public/article-2eaa7dbedc42a8ea65c722cda46d0ebb.min.css" /><script src="https://cdn.qiita.com/assets/public/v3-article-bundle-63de2d91fef827269d3f6b958db2335b.min.js" defer="defer"></script><meta name="twitter:card" content="summary_large_image"><meta content="@Qiita" name="twitter:site" /><meta content="@thrzn41" name="twitter:creator" /><meta property="og:type" content="article"><meta property="og:title" content="Go, C#, Java, Pythonの簡易サーバーでクラウドサービスのWebhook通知を受け取る - Qiita"><meta property="og:image" content="https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0&amp;w=1200&amp;mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND1SMjhzSUVNakxDQktZWFpoTENCUWVYUm9iMjdqZ2E3bnNLSG1tSlBqZ3JYamc3empnNURqZzd6amdhZmpncV9qZzZuamdxYmpnNG5qZ3JYamc3empnNVBqZ3JuamdhNVhaV0pvYjI5cjZZQ2E1NS1sNDRLUzVZLVg0NEdSNVktVzQ0S0wmdHh0LWNvbG9yPSUyMzMzMyZ0eHQtZm9udD1IaXJhZ2lubyUyMFNhbnMlMjBXNiZ0eHQtc2l6ZT01NCZ0eHQtY2xpcD1lbGxpcHNpcyZ0eHQtYWxpZ249Y2VudGVyJTJDbWlkZGxlJnM9ZTFiYTJjYWU4ZDM2YzAwNGI2Mzc0MmVmZmM1MWUwOWE&amp;mark-align=center%2Cmiddle&amp;blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RSFJvY25wdU5ERSZ0eHQtY29sb3I9JTIzMzMzJnR4dC1mb250PUhpcmFnaW5vJTIwU2FucyUyMFc2JnR4dC1zaXplPTQ1JnR4dC1hbGlnbj1yaWdodCUyQ2JvdHRvbSZzPWMxNWMxYzZhYTMwYjA3YmZkZDM1YmU5NTQ1NzExNzdh&amp;blend-align=center%2Cmiddle&amp;blend-mode=normal&amp;s=a9a27ed5c86ded4cb4c3d10f3afd25cd"><meta property="og:description" content="

1. やること

ローカル環境のWindows, Mac, Linuxなどの上で、
Go、C#、Java、Pythonのいずれかの言語で簡易サーバを作ります。
作ったローカル環境の簡易サーバで、
クラウドベースの各種チャットサービ..."><meta content="https://qiita.com/thrzn41/items/276aaaf5df11e351880a" property="og:url" /><meta content="Qiita" property="og:site_name" /><meta content="564524038" property="fb:admins" /><meta content="Java,Python,Go,C#,ngrok" name="keywords" /><script>!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window, document,'script',
'https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '668972150489891');
fbq('track', 'PageView');</script><style data-emotion-css="17jxvjw 11t2ec1 1dvr2p8 18lkoru 1g4cku8 1iupg5d ijvq0v 15cocm3 12rp90f 115f4t 1b8uj5v 79elbk 16hhh7b fcbn8c 1gj7nt 154zy0m yikrym 1jqivyb 1ode1bp le4d8r 1hbd3g7 1nzh4zz 38fzdi helsa7 8qb8m4 2imjyh he5w1s 70qvj9 3ojehk 100alwu 1dtnjt5 10ougpm 1ay9vb9 m19uds cgzq40 1wa99t2 1l3zk9f 4czcte 1yzj1fm 1uv1qiv 109dbrr 5jpx49 mnxgyc 1vlpknv fsjkhv 1b17vb0 7i7f4d"}>.css-17jxvjw{display:grid;display:-ms-grid;grid-template-columns:80px minmax(0,1fr) 300px;-ms-grid-columns:80px minmax(0,1fr) 300px;grid-template-rows:minmax(270px,auto) 1fr;-ms-grid-rows:minmax(270px,auto) 1fr;max-width:1280px;margin-right:auto;margin-left:auto;padding-top:24px;padding-right:24px;padding-left:24px;}@media (max-width:1200px){.css-17jxvjw{padding-bottom:0;padding-left:0;padding-right:0;}}@media (max-width:992px){.css-17jxvjw{grid-template-columns:80px 452px 300px;-ms-grid-columns:80px 452px 300px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}}@media (max-width:770px){.css-17jxvjw{display:block;}}@media (max-width:480px){.css-17jxvjw{padding-top:0;}}.css-11t2ec1{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;z-index:5;position:-webkit-sticky;position:sticky;top:calc(56px + 24px + 16px + 32px - 16px);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:16px;width:80px;}.css-11t2ec1:after{content:'';display:table;}.css-11t2ec1:before{content:'';display:table;}@media (max-width:770px){.css-11t2ec1{display:none;}}.css-1dvr2p8{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-18lkoru{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;background-color:#FFFFFF;}.css-1g4cku8{display:inline-block;vertical-align:middle;height:20px;width:20px;fill:#55C500;}.css-1iupg5d{color:#55C500;cursor:pointer;font-size:14px;font-weight:bold;}.css-ijvq0v{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;margin-bottom:16px;}.css-15cocm3{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#FFFFFF;border:2px solid #6E6F70;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:2px 0px 0px;width:40px;}.css-12rp90f{display:inline-block;vertical-align:bottom;height:17.77777777777778px;width:16px;fill:#6E6F70;}.css-115f4t{color:#6E6F70;font-size:14px;font-weight:bold;}.css-1b8uj5v{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;margin-bottom:16px;padding:0;}.css-79elbk{position:relative;}.css-16hhh7b{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;font-size:20px;height:32px;outline:none;width:32px;padding:0;}.css-fcbn8c{display:none;bottom:initial;left:initial;right:initial;top:initial;left:100%;top:calc(-8px - (14px * 1.8) - 16px - 4px);}.css-1gj7nt{color:rgba(0,0,0,0.6);font-size:14px;font-weight:bold;line-height:1.8;padding:8px 16px;}.css-154zy0m{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.87);cursor:pointer;font-size:16px;font-weight:normal;line-height:1.8;padding:4px 16px;}.css-154zy0m:hover{-webkit-text-decoration:none;text-decoration:none;background-color:#F2F2F2;}.css-yikrym{width:20px;}.css-1jqivyb{color:rgba(0,0,0,0.6);font-size:13px;}.css-1ode1bp{background-color:rgba(0,0,0,0.12);height:1px;width:100%;margin:8px 0;}.css-le4d8r{display:inline-block;vertical-align:middle;height:13px;width:13px;fill:rgba(0,0,0,0.6);}.css-1hbd3g7{height:250px;}.css-1nzh4zz{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:16px 32px;background-color:#FBE69E;color:rgba(0,0,0,0.87);line-height:1.5;font-weight:600;}@media (max-width:770px){.css-1nzh4zz{padding:16px;}}.css-38fzdi{color:#CA832A;margin-right:4px;}.css-helsa7{background-color:#FFFFFF;padding:32px;margin-bottom:24px;}@media (max-width:992px){.css-helsa7{margin:0 auto 40px;}}@media (max-width:480px){.css-helsa7{margin:0 0 40px;padding:32px 16px;}}.css-8qb8m4{margin-bottom:48px;}.css-2imjyh{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-he5w1s{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;width:100%;}@media (max-width:770px){.css-he5w1s{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}}.css-70qvj9{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.css-3ojehk{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;margin-right:4px;}.css-100alwu{display:inline-block;border-radius:50%;line-height:1;overflow:hidden;vertical-align:middle;}.css-1dtnjt5{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-10ougpm{color:rgba(0,0,0,0.87);font-size:14px;font-weight:600;line-height:1.8;margin-right:4px;text-wrap:break-word;word-break:break-all;}.css-1ay9vb9{margin-right:16px;}.css-m19uds{color:rgba(0,0,0,0.6);font-size:14px;line-height:1.8;}.css-cgzq40{color:rgba(0,0,0,0.87);font-size:32px;font-weight:bold;line-height:1.4;margin-top:8px;text-wrap:break-word;word-break:break-all;}.css-1wa99t2{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(0,0,0,0.6);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:8px;}.css-1l3zk9f{color:rgba(0,0,0,0.6);font-size:20px;margin-right:8px;}.css-4czcte{margin-right:4px;color:inherit;font-size:14px;line-height:1.8;}.css-4czcte:not(:last-child)::after{content:',';margin-right:4px;}.css-1yzj1fm{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:32px;}.css-1uv1qiv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:none;color:#6E6F70;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-size:20px;height:32px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin-right:16px;outline:none;padding:0;width:32px;}.css-109dbrr{background-color:#F9F9F9;border-top:1px solid rgba(0,0,0,0.12);bottom:0;box-shadow:0px 1px 4px rgba(0,0,0,0.14);display:none;height:calc(env(safe-area-inset-bottom,0px) + 56px);-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding-bottom:env(safe-area-inset-bottom);position:-webkit-sticky;position:sticky;width:100%;z-index:2000;}@media (max-width:770px){.css-109dbrr{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}.css-5jpx49{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:space-evenly;-webkit-justify-content:space-evenly;-ms-flex-pack:space-evenly;justify-content:space-evenly;width:100%;}.css-mnxgyc{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1vlpknv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:2px solid #55C500;border-radius:50%;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:40px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:0;width:40px;margin-right:4px;background-color:#FFFFFF;}.css-fsjkhv{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;}.css-1b17vb0{color:#6E6F70;font-size:14px;font-weight:bold;margin-left:4px;}.css-7i7f4d{display:none;bottom:initial;left:initial;right:initial;top:initial;bottom:32px;right:0;}</style></head><body><div class="allWrapper"><div><div id="GlobalHeader-react-component-12ebaa6b-2413-4939-acac-d3d31fc5c1e9"><div class="st-Header"><div class="st-Header_container"><div class="st-Header_start"><a href="/" class="st-Header_logo"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 426.57 130"><circle cx="167.08" cy="21.4" r="12.28"></circle><path d="M250.81 29.66h23.48v18.9h-23.48z"></path><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z"></path><circle cx="216.33" cy="21.4" r="12.28"></circle></svg></a><div class="st-Header_communitySelector" tabindex="0"><span class="fa fa-caret-down"></span></div><div class="st-Header_dropdown"><div class="st-Header_dropdownHeading">Qiita Teams that are logged in</div><div class="st-Header_dropdownItemNote">You are not logged in to any team</div><hr class="st-Header_dropdownDivider st-Header_dropdownDivider-shrink"/><a href="https://teams-center.qiita.com/find_team" class="st-Header_dropdownItem"><span class="fa fa-fw fa-sign-in st-Header_dropdownItemIcon"></span><div>Log in to Qiita Team</div></a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Community</div><a href="/organizations" class="st-Header_dropdownItem">Organization</a><a href="/official-events/open" class="st-Header_dropdownItem">Event</a><a href="/advent-calendar" class="st-Header_dropdownItem">Advent Calendar</a><a href="https://qiitadon.com/" class="st-Header_dropdownItem" target="_blank">Qiitadon (β)</a><div class="st-Header_dropdownDivider"></div><div class="st-Header_dropdownHeading">Service</div><a href="https://jobs.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Jobs</a><a href="https://zine.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Zine</a><a href="https://blog.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank">Qiita Blog</a></div><form class="st-Header_search" action="/search" method="get"><span class="fa fa-search st-Header_searchIcon"></span><input type="search" class="st-Header_searchInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form><form class="st-Header_searchModal" action="/search" method="get"><input type="text" class="st-Header_searchModalInput" autoComplete="off" placeholder="Search" value="" name="q" required=""/></form></div><div class="st-Header_end"><div class="st-Header_searchButton"><span class="fa fa-search"></span></div><a class="st-Header_signupButton" href="/signup?redirect_to=%2Fthrzn41%2Fitems%2F276aaaf5df11e351880a">Signup</a><a class="st-Header_loginLink" href="/login?redirect_to=%2Fthrzn41%2Fitems%2F276aaaf5df11e351880a">Login</a></div><div class="st-Header_overlay"></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="GlobalHeader" data-dom-id="GlobalHeader-react-component-12ebaa6b-2413-4939-acac-d3d31fc5c1e9">{"unreadNotificationsCount":null,"realms":[{"humanName":"Qiita","isCurrentRealm":true,"isQiita":true,"isQiitaTeam":false,"loggedInUser":null,"teamId":null,"url":"https://qiita.com/"}],"teamFindUrl":"https://teams-center.qiita.com/find_team","isTeamOnlyUser":null,"currentUser":null}</script>
      
</div><div class="st-HeaderAlert st-HeaderAlert-warning"><div class="st-HeaderAlert_body"></div></div><script type="application/ld+json">{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"/","name":"Qiita"}},{"@type":"ListItem","position":2,"item":{"@id":"/tags/java","name":"Java"}}]}</script><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","datePublished":"2020-02-25T13:01:41.000+09:00","dateModified":"2020-03-04T17:11:06.000+09:00","headline":"Go, C#, Java, Pythonの簡易サーバーでクラウドサービスのWebhook通知を受け取る","image":"https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-4.0.0\u0026w=1200\u0026mark64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTM4MCZ0eHQ2ND1SMjhzSUVNakxDQktZWFpoTENCUWVYUm9iMjdqZ2E3bnNLSG1tSlBqZ3JYamc3empnNURqZzd6amdhZmpncV9qZzZuamdxYmpnNG5qZ3JYamc3empnNVBqZ3JuamdhNVhaV0pvYjI5cjZZQ2E1NS1sNDRLUzVZLVg0NEdSNVktVzQ0S0wmdHh0LWNvbG9yPSUyMzMzMyZ0eHQtZm9udD1IaXJhZ2lubyUyMFNhbnMlMjBXNiZ0eHQtc2l6ZT01NCZ0eHQtY2xpcD1lbGxpcHNpcyZ0eHQtYWxpZ249Y2VudGVyJTJDbWlkZGxlJnM9ZTFiYTJjYWU4ZDM2YzAwNGI2Mzc0MmVmZmM1MWUwOWE\u0026mark-align=center%2Cmiddle\u0026blend64=aHR0cHM6Ly9xaWl0YS11c2VyLWNvbnRlbnRzLmltZ2l4Lm5ldC9-dGV4dD9peGxpYj1yYi00LjAuMCZ3PTg0MCZoPTUwMCZ0eHQ2ND1RSFJvY25wdU5ERSZ0eHQtY29sb3I9JTIzMzMzJnR4dC1mb250PUhpcmFnaW5vJTIwU2FucyUyMFc2JnR4dC1zaXplPTQ1JnR4dC1hbGlnbj1yaWdodCUyQ2JvdHRvbSZzPWMxNWMxYzZhYTMwYjA3YmZkZDM1YmU5NTQ1NzExNzdh\u0026blend-align=center%2Cmiddle\u0026blend-mode=normal\u0026s=a9a27ed5c86ded4cb4c3d10f3afd25cd","mainEntityOfPage":"https://qiita.com/thrzn41/items/276aaaf5df11e351880a","author":{"@type":"Person","address":null,"email":null,"identifier":"thrzn41","name":"thrzn41","image":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F211666%2Fprofile-images%2F1510486825?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=59cd7a97c24161369817eef5915ecc9a","url":"https://qiita.com/thrzn41","description":null,"memberOf":[]},"publisher":{"@type":"Organization","name":"Qiita","logo":{"@type":"ImageObject","url":"//cdn.qiita.com/assets/public/qiita-logo-c39ded593afa388e2e1ba435b110554e.png"}}}</script><style type="text/css">.wb-CampaignLink {
  background-color: #333333;
  width: 100%;
}

.wb-CampaignLink_container {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  max-width: 1100px;
  margin: 0 auto;
  font-size: 13px;
  padding: 0.8em;
}
.wb-CampaignLink_container > a {
  color: #fff;
}

.wb-CampaignLink_container > a:hover {
  text-decoration: underline;
}</style><div class="wb-CampaignLink"><div class="wb-CampaignLink_container"><a target="_blank" id="header_text_message_1" href="https://increments.connpass.com/event/211948/">「AirPods Pro」を抽選でプレゼント！Qiita エンジニアフェスタ 2021 Online Meetupを9/9(木)に開催</a><a target="_blank" id="header_text_message_2" href="https://increments.connpass.com/event/211948/">詳しくはこちら</a></div><script>td.trackEvent(
  'front_events',
  {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"thrzn41","type":"items","id":"276aaaf5df11e351880a"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Show","data":{"message":"「AirPods Pro」を抽選でプレゼント！Qiita エンジニアフェスタ 2021 Online Meetupを9/9(木)に開催","url":"https://increments.connpass.com/event/211948/","sub_message":"詳しくはこちら"}}
)</script><script>document.getElementById('header_text_message_1').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"thrzn41","type":"items","id":"276aaaf5df11e351880a"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":0,"pos_id":"header_text_message_1","message":"「AirPods Pro」を抽選でプレゼント！Qiita エンジニアフェスタ 2021 Online Meetupを9/9(木)に開催","url":"https://increments.connpass.com/event/211948/","sub_message":"詳しくはこちら"}}
  )
})</script><script>document.getElementById('header_text_message_2').addEventListener('click', function() {
  td.trackEvent(
    'front_events',
    {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"thrzn41","type":"items","id":"276aaaf5df11e351880a"},"user_id":null,"event_category":"Header Text Ads Banner","event_action":"Click","data":{"index":0,"pos_id":"header_text_message_2","message":"「AirPods Pro」を抽選でプレゼント！Qiita エンジニアフェスタ 2021 Online Meetupを9/9(木)に開催","url":"https://increments.connpass.com/event/211948/","sub_message":"詳しくはこちら"}}
  )
})</script></div><script type="application/json" id="js-react-on-rails-context">{"railsEnv":"production","inMailer":false,"i18nLocale":"en","i18nDefaultLocale":"en","href":"https://qiita.com/thrzn41/items/276aaaf5df11e351880a","location":"/thrzn41/items/276aaaf5df11e351880a","scheme":"https","host":"qiita.com","port":null,"pathname":"/thrzn41/items/276aaaf5df11e351880a","search":null,"httpAcceptLanguage":null,"actionPath":"public/items#show","settings":{"analyticsTrackingId":"UA-24675221-12","assetsMap":{},"csrfToken":"ZqqruZ6ruWohRyJ3kz2qYy8piEZJ2LY4UW3495yLR1xI+DR049xZ1u3h9HwCNMt5AxRPehR3UhxF2JmGCoEqmA==","locale":"en"},"currentUser":null,"isLoggedIn":false,"recaptchaSiteKey":"6LfNkiQTAAAAAM3UGnSquBy2akTITGNMO_QDxMw6","serverSide":false}</script>
<div id="PersonalArticlePage-react-component-019e288c-6f3c-4db4-90ed-f022978e61ec"><div class="p-items_wrapper"><div class=" css-17jxvjw"><div class="css-11t2ec1"><div class="css-1dvr2p8"><button class=" css-18lkoru"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/thrzn41/items/276aaaf5df11e351880a/likers" class="css-1iupg5d">1</a></div><div class="css-ijvq0v"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-115f4t">5</span></div><div class="css-1b8uj5v"><span class="fa fa-twitter"></span></div><div class="css-1b8uj5v"><span class="fa fa-facebook"></span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-fcbn8c"><div class="css-1gj7nt">Improve article</div><a href="/drafts/276aaaf5df11e351880a/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/thrzn41/items/276aaaf5df11e351880a/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/thrzn41/items/276aaaf5df11e351880a/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/thrzn41/items/276aaaf5df11e351880a/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/thrzn41/items/276aaaf5df11e351880a.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div><div class="p-items_options"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_toc"><div class="mt-2"><div class="css-1hbd3g7"></div></div></div><div class="p-items_main"><div class="css-1nzh4zz"><span class="fa fa-fw fa-warning css-38fzdi"></span><p>More than 1 year has passed since last update.</p></div><div class="css-helsa7"><div class="css-8qb8m4"><div class="css-2imjyh"><div class="css-he5w1s"><div class="css-70qvj9"><div class="css-3ojehk"><a href="/thrzn41"><img class="css-100alwu eyfquo10" src="https://qiita-image-store.s3.amazonaws.com/0/211666/profile-images/1510486825" width="24" height="24" loading="lazy"/></a></div><div class="css-1dtnjt5"><a href="/thrzn41" class="css-10ougpm">@<!-- -->thrzn41</a><div class="css-1ay9vb9"><span><meta content="2020-02-25T04:01:41Z"/><time dateTime="2020-03-04T08:11:06Z" class="css-m19uds">updated at 2020-03-04</time></span></div></div></div></div></div><h1 class="css-cgzq40">Go, C#, Java, Pythonの簡易サーバーでクラウドサービスのWebhook通知を受け取る</h1><div class="css-1wa99t2"><span class="fa fa-tags mr-1of2 css-1l3zk9f" aria-hidden="true"></span><a href="/tags/java" class="css-4czcte">Java</a><a href="/tags/python" class="css-4czcte">Python</a><a href="/tags/go" class="css-4czcte">Go</a><a href="/tags/csharp" class="css-4czcte">C#</a><a href="/tags/ngrok" class="css-4czcte">ngrok</a></div></div><section class="it-MdContent"><div id="personal-public-article-body"><div>
<h1>
<span id="1-やること" class="fragment"></span><a href="#1-%E3%82%84%E3%82%8B%E3%81%93%E3%81%A8"><i class="fa fa-link"></i></a>1. やること</h1>

<p>ローカル環境のWindows, Mac, Linuxなどの上で、<br>
Go、C#、Java、Pythonのいずれかの言語で簡易サーバを作ります。<br>
作ったローカル環境の簡易サーバで、<br>
クラウドベースの各種チャットサービスやSNSなどのリアルタイムの通知をWebhookで受けます。</p>

<h1>
<span id="2-必要なもの" class="fragment"></span><a href="#2-%E5%BF%85%E8%A6%81%E3%81%AA%E3%82%82%E3%81%AE"><i class="fa fa-link"></i></a>2. 必要なもの</h1>

<p><strong>インターネットにつながるWindows、Mac、Linuxなど</strong>が必要です。<br>
中から外に繋がればいいので、Webhook用のpublicなURL(外からアクセスできるhttpsサーバなど)は必要<strong>ありません</strong>。<br>
<strong>インターネット上のWebサイトが見れるような環境であればOKです</strong>。<br>
<code>ngrok</code>(後述)とプログラミング言語を利用するので、それらをサポートしている環境である必要はあります。</p>

<h1>
<span id="3-ngrokの準備と起動" class="fragment"></span><a href="#3-ngrok%E3%81%AE%E6%BA%96%E5%82%99%E3%81%A8%E8%B5%B7%E5%8B%95"><i class="fa fa-link"></i></a>3. ngrokの準備と起動</h1>

<p>かなり、ざっくりな説明をすると、<br>
<code>ngrok</code>は、インターネットに抜けられるローカルの環境(インターネット上のWebサイトが見れるような環境)で、<br>
public URLへのリクエストを受けられるトンネリングサービスです。<br>
TCPのトンネリングもできますが、今回はhttpのトンネリングに関してのみ触れます。<br>
あえて日本語で読むと、「エングロック」になります。</p>

<p>こちらが公式サイトです:<br>
<a href="https://ngrok.com/" class="autolink" rel="nofollow noopener" target="_blank">https://ngrok.com/</a></p>

<p>無償版、有償版があります。<br>
無償版では、1分間当たり40コネクション(40リクエストではありません)までですが、<br>
ちょっとしたテストをする分には、充分だと思います。<br>
有償版ではプランによって、できることが増えていきます。</p>

<h2>
<span id="31-ngrokのダウンロード" class="fragment"></span><a href="#31-ngrok%E3%81%AE%E3%83%80%E3%82%A6%E3%83%B3%E3%83%AD%E3%83%BC%E3%83%89"><i class="fa fa-link"></i></a>3.1. ngrokのダウンロード</h2>

<p>公式サイトの[DOWNLOAD]ページからダウンロードできます。</p>

<p><qiita-embed-ogp src="https://ngrok.com/download"></qiita-embed-ogp></p>

<p>ダウンロードしたら、適当なディレクトリに解凍しましょう。</p>

<blockquote>
<p>ngrokのアカウントを作らずに動作させた場合は、アプリ起動ごとに8時間のみ動作します。<br>
起動しなおせば、再度8時間利用できますが、無償アカウントを作っておいた方が制限も緩和されるのでよいと思います。<br>
公式サイトの[SING UP]からアカウントの作成ができます。</p>
</blockquote>

<h2>
<span id="32-ngrokのアカウントに接続する" class="fragment"></span><a href="#32-ngrok%E3%81%AE%E3%82%A2%E3%82%AB%E3%82%A6%E3%83%B3%E3%83%88%E3%81%AB%E6%8E%A5%E7%B6%9A%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>3.2. ngrokのアカウントに接続する</h2>

<p>ngrokのアカウントを作った場合は、今後、ngrokを起動する場合にアカウントと関連付くようにします。<br>
<code>&lt;YOUR_AUTH_TOKEN&gt;</code>は、SING UP後やLOGIN後に取得できます。<br>
LOGIN後のページトップに『Setup &amp; Installation』が表示されて、<br>
『(3) Connect your account』にまさに実行すべきコマンドがそのまま書かれています。</p>

<div class="code-frame" data-lang="">
<div class="code-lang"><span class="bold">Windows</span></div>
<div class="highlight"><pre class="with-code"><code>&gt; .\ngrok authtoken &lt;YOUR_AUTH_TOKEN&gt;
</code></pre></div>
</div>

<div class="code-frame" data-lang="">
<div class="code-lang"><span class="bold">Mac/Linux</span></div>
<div class="highlight"><pre class="with-code"><code>$ ./ngrok authtoken &lt;YOUR_AUTH_TOKEN&gt;
</code></pre></div>
</div>

<p>このコマンドを実行すると、各OSのユーザのホームディレクトリ配下の以下の場所に(Ver 2.xの場合)、<br>
<code>{userhome}/.ngrok2/ngrok.yml</code><br>
というファイルが出来上がって、そこに上記のアカウントのトークン情報などが保存されます。<br>
<code>ngrok.yml</code>には、その他さまざま設定を書くこともできますが、説明は省略します。<br>
<code>--config</code>オプションで、設定ファイルのパスも指定できるので、例えば、ngrokをdockerコンテナで実行する場合に、<br>
ホスト側のディレクトリに設定ファイル置いて、マウントさせて設定参照などもできます。</p>

<h2>
<span id="33-ngrokを起動する" class="fragment"></span><a href="#33-ngrok%E3%82%92%E8%B5%B7%E5%8B%95%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>3.3. ngrokを起動する</h2>

<p>Webhook用のpublicなURLは、ngrok側が準備してくれます。<br>
<strong>Webhook用にTLSを利用しない、<code>http</code>を使うのは、通常はおろかな行為</strong>なので、<code>https</code>だけ準備されるようにオプションを指定(<code>--bind-tls=true</code>)します。<br>
以下コマンドの、<code>8080</code>は、ローカル環境のサーバのポート番号です。使っていない適切なポート番号を指定します。<br>
この時点では、まだローカル側のサーバは作っていませんが、空いている適切なポートを指定しましょう。</p>

<div class="code-frame" data-lang="">
<div class="code-lang"><span class="bold">Windows</span></div>
<div class="highlight"><pre class="with-code"><code>&gt; .\ngrok http 8080 --bind-tls=true
</code></pre></div>
</div>

<div class="code-frame" data-lang="">
<div class="code-lang"><span class="bold">Mac/Linux</span></div>
<div class="highlight"><pre class="with-code"><code>$ ./ngrok http 8080 --bind-tls=true
</code></pre></div>
</div>

<p>うまく行くと、以下のような出力が得られるはずです。<br>
<code>{random-id}</code>の部分は、実行するたびに変わります(有償版では、この部分を指定することもできます)。<br>
<code>Region</code>も指定できますが、今回はデフォルトでよいと思います。</p>

<div class="code-frame" data-lang="console">
<div class="code-lang"><span class="bold">出力例</span></div>
<div class="highlight"><pre class="with-code"><code><span class="go">ngrok by @inconshreveable                                                     (Ctrl+C to quit)

Session Status                online
Account                       Your Name (Plan: Free)
Version                       2.x.yz
Region                        United States (us)
Web Interface                 http://127.0.0.1:4040
</span><span class="gp">Forwarding                    https://{random-id}.ngrok.io -&gt;</span><span class="w"> </span>http://localhost:8080
<span class="go">
Connections                   ttl     opn     rt1     rt5     p50     p90
                              0       0       0.00    0.00    0.00    0.00
</span></code></pre></div>
</div>

<h2>
<span id="34-ここまでの手順でngrokがやってくれること" class="fragment"></span><a href="#34-%E3%81%93%E3%81%93%E3%81%BE%E3%81%A7%E3%81%AE%E6%89%8B%E9%A0%86%E3%81%A7ngrok%E3%81%8C%E3%82%84%E3%81%A3%E3%81%A6%E3%81%8F%E3%82%8C%E3%82%8B%E3%81%93%E3%81%A8"><i class="fa fa-link"></i></a>3.4. ここまでの手順でngrokがやってくれること</h2>

<p><code>Forwarding  https://{random-id}.ngrok.io -&gt; http://localhost:8080</code>という出力が示すように、<br>
ngrokサービスが、publicなURLである<code>https://{random-id}.ngrok.io</code>を準備してくれています。<br>
このURLへの要求は、ローカル環境(ngrokコマンドを実行したマシン)の<code>http://localhost:8080</code>にフォワードされます。</p>

<p>つまり、ローカルマシン上では、<code>http://localhost:8080</code>(<code>http://127.0.0.1:8080</code>)へのリクエストを受けられるようにアプリを実装すればよいです。<br>
有償版ではプランによって、ローカルの<strong>https</strong>サーバ(ローカル側がTLSあり)にフォワードすることもできますが、今回は、ローカル側はTLSなしのhttpサーバとします。</p>

<p>ざっくり図解すると、今回のオプション指定では、以下のような接続になっています。<br>
矢印の方向は接続開始時の要求の方向を示しています。リクエストとレスポンスを処理するので、データのやりとりの観点では双方向です。</p>

<p><a href="https://camo.qiitausercontent.com/7fed9a9db06283a4b5baef626b004739245e2b92/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3231313636362f37313030363133352d633932612d303262362d626565312d6361633839326236313039322e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F211666%2F71006135-c92a-02b6-bee1-cac892b61092.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=74e8794526a61b1246ab9f0f500f8881" alt="Ngrok.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/211666/71006135-c92a-02b6-bee1-cac892b61092.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F211666%2F71006135-c92a-02b6-bee1-cac892b61092.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=2790c28af6ba071597ba7ee5e9e8b42d 1x" loading="lazy"></a></p>

<p>ローカルにあるngrokのアプリが、クラウドにあるngrokサービスとセキュアに常時接続しています。<br>
ngrokのpublicなURLにリクエストがあると、この常時接続を通じて、ローカル側のngrokのアプリにリクエストが通知されて、<br>
ローカル側のngrokのアプリが、ローカル側のサーバにリクエストを出します。<br>
ngrokが準備したPublicなURLがhttpsの場合は、ここのTLSのサーバ証明書はngrok側のものになります。<br>
この証明書チェーンは、<strong>標準的な環境では信頼済み</strong>のものであるので、これが非常に便利な場合もあります。</p>

<p>ngrokサービス提供元を信頼するという前提の下では、通信経路は暗号化されてTLSのレベルでデータが守られるということになると思います。</p>

<h2>
<span id="35-web-interfaceも便利" class="fragment"></span><a href="#35-web-interface%E3%82%82%E4%BE%BF%E5%88%A9"><i class="fa fa-link"></i></a>3.5. Web Interfaceも便利</h2>

<p><code>Web Interface  http://127.0.0.1:4040</code>と出力されていると思いますが、テストではこれは便利に使えます。<br>
(オプションでWeb Interfaceを無効にすることもできます。)</p>

<p><a href="http://127.0.0.1:4040" class="autolink" rel="nofollow noopener" target="_blank">http://127.0.0.1:4040</a><br>
にアクセスすることで、ngrokを経由した通信内容を閲覧したりできます。<br>
例えば、httpのリクエストとレスポンスのヘッダやBodyの中身を調べたりすることができます。</p>

<p>また、[Replay]機能が非常に便利で、ngrok経由で過去に行われたhttpなどのリクエストを、<br>
再度ローカルのサーバに<strong>好きなタイミングで</strong>送信することができます。<br>
リクエストを<strong>編集して送信する</strong>こともできます。<br>
テストでは結構便利で、Webhookの実際の通知を再度発生させることなく、以前の通知内容をちょっと変えて試すということもできます。<br>
(本格的なテストを行うときは、ngrokで本機能を使うのではなく、より高度なテストの自動化をする場合が多いと思います。)</p>

<p><a href="https://camo.qiitausercontent.com/a5a1b717ce81037c05d2db92f62191f18ba80abc/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3231313636362f39356333333236662d313530612d326336372d643933302d3335643564316134663435352e706e67" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F211666%2F95c3326f-150a-2c67-d930-35d5d1a4f455.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=106a8d3474353ec53b1ab2a8c2cbe7b7" alt="Ngrok_Web_Interface.png" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/211666/95c3326f-150a-2c67-d930-35d5d1a4f455.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F211666%2F95c3326f-150a-2c67-d930-35d5d1a4f455.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=68f1e1dfc7e1eb649ce41ac3bb5bfb51 1x" loading="lazy"></a></p>

<h2>
<span id="36-apiもあります" class="fragment"></span><a href="#36-api%E3%82%82%E3%81%82%E3%82%8A%E3%81%BE%E3%81%99"><i class="fa fa-link"></i></a>3.6. APIもあります</h2>

<p>Web Interfaceを有効にしているとAPIも使えます。</p>

<p>APIの詳細は<a href="https://ngrok.com/docs#client-api" rel="nofollow noopener" target="_blank">こちらのページ(https://ngrok.com/docs#client-api)</a>に記載されています。</p>

<p>ngrokサービスが割り当ててくれるpublicなURLは、無償版ではランダムになりますが、<br>
APIで何を割り当ててもらったかを取得することもできます。</p>

<p>Web Interfaceの<br>
<code>http://127.0.0.1:4040/api/tunnels</code>に、HTTP GETのリクエスト投げると、レスポンスで各種情報が得られます。<br>
リクエスト時には、<code>Accept</code>や<code>Content-Type</code>を、<code>application/json</code>にしておくと、JSON形式でレスポンス返ってきます。</p>

<p>例えば、以下のような感じです。<br>
<code>metrics</code>も興味深いですが、今回は中身省略して記載しています。</p>

<div class="code-frame" data-lang="json">
<div class="code-lang"><span class="bold">/api/tunnels</span></div>
<div class="highlight"><pre class="with-code"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"tunnels"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"command_line"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"uri"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/api/tunnels/command_line"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"public_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{random-id}.ngrok.io"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"proto"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"config"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"addr"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://localhost:8080"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"inspect"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"metrics"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"uri"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/api/tunnels"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
</div>

<p>今回はngrok起動コマンドで、明示的に<code>https</code>のみ指定したので、<code>"tunnels"</code>配列には、１つのオブジェクトのみ含まれます。<br>
そのオブジェクトの<code>"public_url"</code>から、ngrok側が割り当てたpublicなURLが取得できます。<br>
<code>"config"</code>オブジェクトの<code>"addr"</code>からは、フォワード先のローカル側のURLが取得できます。</p>

<p>また、先ほどWeb Interfaceで説明したリクエストやレスポンスのヘッダやBodyの中身の時系列での情報取得や、<br>
Replayを行うAPIもあります。</p>

<h1>
<span id="4-ここまででもうwebhookの通知は受けられます" class="fragment"></span><a href="#4-%E3%81%93%E3%81%93%E3%81%BE%E3%81%A7%E3%81%A7%E3%82%82%E3%81%86webhook%E3%81%AE%E9%80%9A%E7%9F%A5%E3%81%AF%E5%8F%97%E3%81%91%E3%82%89%E3%82%8C%E3%81%BE%E3%81%99"><i class="fa fa-link"></i></a>4. ここまでで、もうWebhookの通知は受けられます</h1>

<p><code>ngrokサービス</code>が準備してくれた、public URLをWebhookの通知先として、各種チャットサービスやSNSなどのAPIサービス側に登録すれば、実際に動作するはずです。<br>
この時点ではローカル側にまだサーバーがないので、正常なレスポンスを返すことができませんが、<br>
Web Interface ( <a href="http://127.0.0.1:4040" rel="nofollow noopener" target="_blank">http://127.0.0.1:4040</a> )から、Webhookで通知されたリクエストのヘッダやBodyの中身は確認できます。</p>

<p><code>Forwarding  https://{random-id}.ngrok.io -&gt; http://localhost:8080</code>のように出力されている場合は、<br>
<code>https://{random-id}.ngrok.io/webhook</code><br>
などを、Webhookの通知先のURLとして登録します。<br>
<strong>{random-id}の部分は、ngrokコマンドを実行した環境によって、また無償版では(有償版で指定していない場合も)、起動ごとに変わります。</strong><br>
後ろにくっつけたパス部分の、<code>/webhook</code>は好きなパスに指定できます。<br>
<code>/</code>とかでも良いですが、この後のコードでは、<code>https://{random-id}.ngrok.io/webhook</code>のように、パスは<code>/webhook</code>を指定したものとして記載します。</p>

<p>Webhookの通知先の登録方法は利用するクラウドサービスなどによって異なります。<br>
開発者用のサイトから登録できるものや、APIで登録する場合などあります。<br>
試してみたいサービスごとに登録方法は確認する必要があります。</p>

<p>サービスによっては、登録作業を行った瞬間に、Webhookの通知先にリクエストを出して、<br>
適切なレスポンスを返さないと、登録に失敗する仕組みのものもあります。<br>
こちらの場合でも、登録時のリクエスト内容は、上記のWeb Interfaceで確認できます。</p>

<p>また、ここで、Webブラウザなどで、同じマシンからでも、別のマシンからでも、<br>
<code>https://{random-id}.ngrok.io/webhook</code>にアクセスすると、<br>
ngrokコマンドを実行しているコンソールや、Web Interfaceにも出力があるはずです。<br>
HTTP GET以外でもいろいろ試してみたい場合は、<a href="https://www.postman.com/" rel="nofollow noopener" target="_blank">Postman</a> などを使って、とりあえず、動作を見ることはできると思います。</p>

<h1>
<span id="5-各種言語で簡易サーバを実装する" class="fragment"></span><a href="#5-%E5%90%84%E7%A8%AE%E8%A8%80%E8%AA%9E%E3%81%A7%E7%B0%A1%E6%98%93%E3%82%B5%E3%83%BC%E3%83%90%E3%82%92%E5%AE%9F%E8%A3%85%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>5. 各種言語で簡易サーバを実装する</h1>

<p>今のままでは、ngrokがローカルにフォワードする先のサーバがないので、簡易サーバを作っていきます。<br>
httpのリクエストに対して、どんなレスポンスを返すべきかは、サービスごとにことなるので、<br>
今回は、とりあえず、<code>200 OK</code>で、Bodyは以下のようなJSONを固定で返すことにします。<br>
サービスによっては、<code>204 No Content</code>で、Bodyなしで返せばよいものもあります。</p>

<p>とりあえず、レスポンスBodyに入れる内容(<strong>実際は利用するサービスによって適切なものを返す必要あり</strong>):</p>

<div class="code-frame" data-lang="json">
<div class="code-lang"><span class="bold">今回の例で固定で返すレスポンスBody</span></div>
<div class="highlight"><pre class="with-code"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"OK"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
</div>

<p>この後、例として記載する<strong>いずれかの</strong>コードを実行した上で、<code>ngrok</code>を実行して、<br>
ngrokが準備したhttpsのURLを元にしたURL(<code>https://{random-id}.ngrok.io/webhook</code>とか)を、<br>
対象のクラウドサービス側にWebhook通知先として登録すると動作します。<br>
<strong>例では、ngrokが準備したURLに、"/webhook"のパスが追加されている前提のコードになっています</strong>。<br>
例では、サービスからの通知されたリクエストのBodyを表示して、固定のレスポンスを返しているだけですが、<br>
利用するサービスに応じて、処理を少し追加すると、いろいろできると思います。</p>

<p>今回は、さくっと例を記載したいだけなので、処理に成功したかどうかのチェック等は省略しています。<br>
<strong>煩雑になりすぎないように、必要最小限に近いくらいのコードになるようにしていますが、実際のアプリでは各種チェックが必要になります。</strong></p>

<p>また、Webhookは、クラウドサービスの場合は、publicなURLで受ける場合が多いので、<br>
偽装した通知が送られるような場合も想定しておく必要があると思いますが、その辺りの対策も今回の実装例には盛り込んではいません。</p>

<p>関連してですが、(いろんな意見あると思いますが)、個人的には、偽装通知する人のヒントになるような、<br>
<code>404 Not Found</code>とか<code>405 Method Not Allowed</code>とかも返すべきでないと思っていますが、その辺も今回の実装例には盛り込んでいません。<br>
不正な通知に対しては、「<code>204 No Content</code>で成功で返す」、<br>
「レスポンス自体返さず相手はレスポンス待ち状態にする(TCPのコネクションは切断しない)」、<br>
「レスポンスは返さず、TCPのコネクションを切断する」などの対処があると思います。<br>
ただし、コネクションを切断しないパターンは、<br>
サーバ側の残りの接続数やスレッドプール数に悪影響がでやすい(リソースを枯渇させる攻撃が考えられる)ので、<br>
一般的には実装が難しいです(TCP/Socketレベルで実装考えないといけなくなると思います)。</p>

<h2>
<span id="51-goでの実装の例" class="fragment"></span><a href="#51-go%E3%81%A7%E3%81%AE%E5%AE%9F%E8%A3%85%E3%81%AE%E4%BE%8B"><i class="fa fa-link"></i></a>5.1. Goでの実装の例</h2>

<p>標準の、<code>net/http</code>パッケージを利用した例です。<br>
※ 説明用にコメントは多めに書いています。</p>

<blockquote>
<p>go1.13 + Windows 10 Pro 64bitで動作確認しています。</p>
</blockquote>

<div class="code-frame" data-lang="go">
<div class="code-lang"><span class="bold">webhook_listener.go</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"fmt"</span>
    <span class="s">"io/ioutil"</span>
    <span class="s">"net/http"</span>
<span class="p">)</span>

<span class="c">// Webhookに通知が来た時に呼ばれるハンドラ。</span>
<span class="k">func</span> <span class="n">handleWebhook</span><span class="p">(</span><span class="n">w</span> <span class="n">http</span><span class="o">.</span><span class="n">ResponseWriter</span><span class="p">,</span> <span class="n">r</span> <span class="o">*</span><span class="n">http</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span> <span class="p">{</span>

    <span class="c">// Webhook通知元の仕様にもよるが、HTTPのPOSTかGETかで通知が来る前提にして、</span>
    <span class="c">// それ以外は、"204 No Content"を返す。</span>
    <span class="k">if</span> <span class="n">r</span><span class="o">.</span><span class="n">Method</span> <span class="o">!=</span> <span class="n">http</span><span class="o">.</span><span class="n">MethodPost</span> <span class="o">&amp;&amp;</span> <span class="n">r</span><span class="o">.</span><span class="n">Method</span> <span class="o">!=</span> <span class="n">http</span><span class="o">.</span><span class="n">MethodGet</span> <span class="p">{</span>
        <span class="n">w</span><span class="o">.</span><span class="n">WriteHeader</span><span class="p">(</span><span class="n">http</span><span class="o">.</span><span class="n">StatusNoContent</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>

    <span class="c">// Bodyの内容を読み込んで表示するだけ。</span>
    <span class="n">body</span><span class="p">,</span> <span class="n">_</span> <span class="o">:=</span> <span class="n">ioutil</span><span class="o">.</span><span class="n">ReadAll</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">Body</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"ReceivedData:"</span><span class="p">,</span> <span class="kt">string</span><span class="p">(</span><span class="n">body</span><span class="p">))</span>

    <span class="c">////////////////////////////////////////////////////////////////</span>
    <span class="c">// 以下、レスポンスで何を返すべきかは通知元のサービス側の仕様にもよる。</span>

    <span class="c">// "204 No Content"を返せばいい場合は、以下にコメントアウトした1行だけでBody出力不要。</span>
    <span class="c">// w.WriteHeader(http.StatusNoContent)</span>

    <span class="c">// レスポンスヘッダで、Content-Type: application/jsonにする。</span>
    <span class="n">w</span><span class="o">.</span><span class="n">Header</span><span class="p">()</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"Content-Type"</span><span class="p">,</span> <span class="s">"application/json"</span><span class="p">)</span>

    <span class="c">// レスポンスのBodyは決め打ち。</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Fprint</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="s">"{</span><span class="se">\"</span><span class="s">status</span><span class="se">\"</span><span class="s"> : </span><span class="se">\"</span><span class="s">OK</span><span class="se">\"</span><span class="s">}"</span><span class="p">)</span>
<span class="p">}</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>

    <span class="c">// ローカルサーバの"/webhook"にリクエストが来た時に呼ばれるハンドラを登録。</span>
    <span class="n">http</span><span class="o">.</span><span class="n">HandleFunc</span><span class="p">(</span><span class="s">"/webhook"</span><span class="p">,</span> <span class="n">handleWebhook</span><span class="p">)</span>

    <span class="c">// ローカルの8080番ポート(ngrok起動時のオプションで指定した番号)で待ち受け開始。</span>
    <span class="c">// ngrokが同じローカルマシンで動いているので、"127.0.0.1"だけで待ち受ければよい。</span>
    <span class="c">// (外部の環境からリクエストを受ける必要がない)</span>
    <span class="n">http</span><span class="o">.</span><span class="n">ListenAndServe</span><span class="p">(</span><span class="s">"127.0.0.1:8080"</span><span class="p">,</span> <span class="no">nil</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
</div>

<h2>
<span id="52-cでの実装の例" class="fragment"></span><a href="#52-c%E3%81%A7%E3%81%AE%E5%AE%9F%E8%A3%85%E3%81%AE%E4%BE%8B"><i class="fa fa-link"></i></a>5.2. C#での実装の例</h2>

<p>.NET Core 2.0以降や、.NET Frameworkなどで利用できる<code>System.Net.HttpListener</code>を利用した例です。<br>
※ 説明用にコメントは多めに書いています。</p>

<blockquote>
<p>.NET Core 2.0 + Windows 10 Pro 64bitで動作確認しています。</p>
</blockquote>

<div class="code-frame" data-lang="csharp">
<div class="code-lang"><span class="bold">WebhookListener.cs</span></div>
<div class="highlight"><pre class="with-code"><code><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.IO</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Net</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Text</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Threading.Tasks</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">WebhookListener</span>
<span class="p">{</span>
    <span class="k">class</span> <span class="nc">Program</span>
    <span class="p">{</span>
        <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="c1">// System.Net.HttpListenerを利用してサーバを実装します。</span>
            <span class="k">using</span> <span class="p">(</span><span class="kt">var</span> <span class="n">listener</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">HttpListener</span><span class="p">())</span>
            <span class="p">{</span>
                <span class="c1">// ローカルの8080番ポート(ngrok起動時のオプションで指定した番号)で待ち受け開始。</span>
                <span class="c1">// ngrokが同じローカルマシンで動いているので、"127.0.0.1"だけで待ち受ければよい。</span>
                <span class="c1">// (外部の環境からリクエストを受ける必要がない)</span>
                <span class="c1">// また、"/webhook"のパスも入れておく。Prefix指定時は、"/"で終わるようにしておく必要がある。</span>
                <span class="n">listener</span><span class="p">.</span><span class="n">Prefixes</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">"http://127.0.0.1:8080/webhook/"</span><span class="p">);</span>

                <span class="c1">// HttpListenerの待ち受けを開始します。</span>
                <span class="n">listener</span><span class="p">.</span><span class="nf">Start</span><span class="p">();</span>

                <span class="c1">// スレッドプール上で待ち受けるようにする。</span>
                <span class="c1">// 今回は1スレッドだが、例えばループで64回Task作成すれば、64スレッドで待ち受けるようになる。</span>
                <span class="n">Task</span><span class="p">.</span><span class="nf">Run</span><span class="p">(</span>
                    <span class="k">async</span> <span class="p">()</span> <span class="p">=&gt;</span>
                    <span class="p">{</span>
                        <span class="c1">// HttpListenerが待ち受け中はループする。</span>
                        <span class="k">while</span><span class="p">(</span><span class="n">listener</span><span class="p">.</span><span class="n">IsListening</span><span class="p">)</span>
                        <span class="p">{</span>
                            <span class="c1">////////////////////////////////////////////////////////////////</span>
                            <span class="c1">// このサンプルの実装では、whileブロック内で例外が発生すると後続の待ち受けも中断されます。</span>
                            <span class="c1">// 実際には、適切に例外を処理する必要があります。</span>
                            <span class="c1">// どの例外をcatchすべきかは、whileブロック内での処理内容にもよります。</span>
                            <span class="c1">// catchしすぎると、意図せずループが続く場合もあるので注意が必要です。</span>
                            <span class="c1">// 基本的には、例外が発生しても待ち受けを継続したいような場合の例外は、whileブロックの中、</span>
                            <span class="c1">// 待ち受けを継続しても意味がないような例外は、whileブロックの外側で受けるように実装します。</span>

                            <span class="c1">// 先ほど登録したアドレス、ポート、パスに合致するリクエストが来ると、処理用のContextが取得できる。</span>
                            <span class="kt">var</span> <span class="n">context</span> <span class="p">=</span> <span class="k">await</span> <span class="n">listener</span><span class="p">.</span><span class="nf">GetContextAsync</span><span class="p">();</span>

                            <span class="c1">// リクエストとレスポンス処理用のインスタンス取得。</span>
                            <span class="kt">var</span> <span class="n">request</span>  <span class="p">=</span> <span class="n">context</span><span class="p">.</span><span class="n">Request</span><span class="p">;</span>
                            <span class="kt">var</span> <span class="n">response</span> <span class="p">=</span> <span class="n">context</span><span class="p">.</span><span class="n">Response</span><span class="p">;</span>

                            <span class="k">try</span>
                            <span class="p">{</span>
                                <span class="k">if</span> <span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="n">HttpMethod</span> <span class="p">!=</span> <span class="s">"POST"</span> <span class="p">&amp;&amp;</span> <span class="n">request</span><span class="p">.</span><span class="n">HttpMethod</span> <span class="p">!=</span> <span class="s">"GET"</span><span class="p">)</span>
                                <span class="p">{</span>
                                    <span class="c1">// Webhook通知元の仕様にもよるが、HTTPのPOSTかGETかで通知が来る前提にして、</span>
                                    <span class="c1">// それ以外は、"204 No Content"を返す。</span>
                                    <span class="n">response</span><span class="p">.</span><span class="n">StatusCode</span> <span class="p">=</span> <span class="m">204</span><span class="p">;</span>
                                <span class="p">}</span>
                                <span class="k">else</span>
                                <span class="p">{</span>
                                    <span class="c1">// Bodyの内容を読み込んで表示するだけ。</span>
                                    <span class="k">if</span> <span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="n">HasEntityBody</span><span class="p">)</span>
                                    <span class="p">{</span>
                                        <span class="k">using</span> <span class="p">(</span><span class="kt">var</span> <span class="n">reader</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StreamReader</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="n">InputStream</span><span class="p">,</span> <span class="n">request</span><span class="p">.</span><span class="n">ContentEncoding</span><span class="p">))</span>
                                        <span class="p">{</span>
                                            <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"RequestData: {0}"</span><span class="p">,</span> <span class="n">reader</span><span class="p">.</span><span class="nf">ReadToEnd</span><span class="p">());</span>
                                        <span class="p">}</span>
                                    <span class="p">}</span>

                                    <span class="c1">////////////////////////////////////////////////////////////////</span>
                                    <span class="c1">// 以下、レスポンスで何を返すべきかは通知元のサービス側の仕様にもよる。</span>

                                    <span class="c1">// "204 No Content"を返せばいい場合は、以下にコメントアウトした1行だけでBody出力不要。</span>
                                    <span class="c1">// response.StatusCode = 204;</span>

                                    <span class="c1">// レスポンスヘッダで、Content-Type: application/jsonにする。</span>
                                    <span class="n">response</span><span class="p">.</span><span class="n">ContentType</span> <span class="p">=</span> <span class="s">"application/json"</span><span class="p">;</span>

                                    <span class="c1">// レスポンスのBodyは決め打ちで書き込む。</span>
                                    <span class="k">using</span> <span class="p">(</span><span class="kt">var</span> <span class="n">writer</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StreamWriter</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">OutputStream</span><span class="p">))</span>
                                    <span class="p">{</span>
                                        <span class="n">writer</span><span class="p">.</span><span class="nf">Write</span><span class="p">(</span><span class="s">"{\"status\" : \"OK\"}"</span><span class="p">);</span>
                                    <span class="p">}</span>
                                <span class="p">}</span>
                            <span class="p">}</span>
                            <span class="k">finally</span>
                            <span class="p">{</span>
                                <span class="c1">// ResponseはClose()を呼ぶ必要があります。</span>
                                <span class="n">response</span><span class="p">.</span><span class="nf">Close</span><span class="p">();</span>
                            <span class="p">}</span>
                        <span class="p">}</span>
                    <span class="p">});</span>

                <span class="c1">// 何かキーを押したら終了させる。</span>
                <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"終了するには何かキーを押してください。"</span><span class="p">);</span>
                <span class="n">Console</span><span class="p">.</span><span class="nf">ReadKey</span><span class="p">(</span><span class="k">false</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

<h2>
<span id="53-javaでの実装の例" class="fragment"></span><a href="#53-java%E3%81%A7%E3%81%AE%E5%AE%9F%E8%A3%85%E3%81%AE%E4%BE%8B"><i class="fa fa-link"></i></a>5.3. Javaでの実装の例</h2>

<p>Java 1.6以降利用可能な<code>com.sun.net.httpserver.HttpServer</code>を利用した例です。<br>
パッケージは、<code>com.sun.net</code>配下になっていますが、OpenJDKでも利用できます。<br>
※ 説明用にコメントは多めに書いています。</p>

<blockquote>
<p>OpenJDK11(AdoptOpenJDK) + Windows 10 Pro 64bitで動作確認しています。</p>
</blockquote>

<div class="code-frame" data-lang="java">
<div class="code-lang"><span class="bold">WebhookListener.java</span></div>
<div class="highlight"><pre class="with-code"><code><span class="kn">package</span> <span class="nn">thrzn41.samples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.InetSocketAddress</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">com.sun.net.httpserver.HttpExchange</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.sun.net.httpserver.HttpHandler</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.sun.net.httpserver.HttpServer</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">WebhookListener</span> <span class="o">{</span>

    <span class="cm">/**
     * リクエストが来た時に処理するハンドラクラス。
     */</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">WebhookHandler</span> <span class="kd">implements</span> <span class="nc">HttpHandler</span> <span class="o">{</span>

        <span class="cm">/**
         * HttpServer.createContext()で登録したパスにHTTPリクエストがあると、このメソッドが呼ばれる。
         */</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">handle</span><span class="o">(</span><span class="nc">HttpExchange</span> <span class="n">exchange</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">IOException</span> <span class="o">{</span>

            <span class="c1">// Webhook通知元の仕様にもよるが、HTTPのPOSTかGETかで通知が来る前提にして、</span>
            <span class="c1">// それ以外は、"204 No Content"を返す。</span>
            <span class="nc">String</span> <span class="n">method</span> <span class="o">=</span> <span class="n">exchange</span><span class="o">.</span><span class="na">getRequestMethod</span><span class="o">();</span>

            <span class="k">if</span><span class="o">(</span> <span class="o">!</span><span class="n">method</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">"POST"</span><span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">method</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">"GET"</span><span class="o">)</span> <span class="o">)</span> <span class="o">{</span>
                <span class="n">exchange</span><span class="o">.</span><span class="na">sendResponseHeaders</span><span class="o">(</span><span class="mi">204</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">);</span>
                <span class="k">return</span><span class="o">;</span>
            <span class="o">}</span>

             <span class="c1">// Bodyの内容を読み込んで表示するだけ。</span>
            <span class="k">try</span><span class="o">(</span><span class="kt">var</span> <span class="n">input</span> <span class="o">=</span> <span class="n">exchange</span><span class="o">.</span><span class="na">getRequestBody</span><span class="o">())</span> <span class="o">{</span>

                <span class="c1">// 本来は、ちゃんとリクエストヘッダのエンコーディングを見た方がいいですが、</span>
                <span class="c1">// 今回は、"utf-8"である前提で変換しています。</span>
                <span class="nc">String</span> <span class="n">body</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">String</span><span class="o">(</span><span class="n">input</span><span class="o">.</span><span class="na">readAllBytes</span><span class="o">(),</span> <span class="s">"utf-8"</span><span class="o">);</span>

                <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">"RequestData: %s%n"</span><span class="o">,</span> <span class="n">body</span><span class="o">);</span>
            <span class="o">}</span>


            <span class="c1">////////////////////////////////////////////////////////////////</span>
            <span class="c1">// 以下、レスポンスで何を返すべきかは通知元のサービス側の仕様にもよる。</span>

            <span class="c1">// "204 No Content"を返せばいい場合は、以下にコメントアウトした1行だけでBody出力不要。</span>
            <span class="c1">// exchange.sendResponseHeaders(204, -1);</span>

            <span class="c1">// レスポンスのBodyは決め打ちで書き込む。</span>
            <span class="kt">var</span> <span class="n">responseBytes</span> <span class="o">=</span> <span class="s">"{\"status\" : \"OK\"}"</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="s">"utf-8"</span><span class="o">);</span>

            <span class="k">try</span><span class="o">(</span><span class="kt">var</span> <span class="n">output</span> <span class="o">=</span> <span class="n">exchange</span><span class="o">.</span><span class="na">getResponseBody</span><span class="o">())</span> <span class="o">{</span>

                <span class="c1">// レスポンスヘッダで、Content-Type: application/jsonにする。</span>
                <span class="n">exchange</span><span class="o">.</span><span class="na">getResponseHeaders</span><span class="o">().</span><span class="na">set</span><span class="o">(</span><span class="s">"Content-Type"</span><span class="o">,</span> <span class="s">"application/json"</span><span class="o">);</span>
                <span class="n">exchange</span><span class="o">.</span><span class="na">sendResponseHeaders</span><span class="o">(</span><span class="mi">200</span><span class="o">,</span> <span class="n">responseBytes</span><span class="o">.</span><span class="na">length</span><span class="o">);</span>

                <span class="n">output</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">responseBytes</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span>

    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>

        <span class="k">try</span> <span class="o">{</span>
            <span class="c1">// ローカルの8080番ポート(ngrok起動時のオプションで指定した番号)で待ち受けます。</span>
            <span class="c1">// ngrokが同じローカルマシンで動いているので、"127.0.0.1"だけで待ち受ければよい。</span>
            <span class="c1">// (外部の環境からリクエストを受ける必要がない)</span>
            <span class="kt">var</span> <span class="n">server</span> <span class="o">=</span> <span class="nc">HttpServer</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="k">new</span> <span class="nc">InetSocketAddress</span><span class="o">(</span><span class="s">"127.0.0.1"</span><span class="o">,</span> <span class="mi">8080</span><span class="o">),</span> <span class="o">-</span><span class="mi">1</span><span class="o">);</span>

            <span class="c1">// ローカルサーバの"/webhook"にリクエストが来た時に呼ばれるハンドラを登録。</span>
            <span class="n">server</span><span class="o">.</span><span class="na">createContext</span><span class="o">(</span><span class="s">"/webhook"</span><span class="o">,</span> <span class="k">new</span> <span class="nc">WebhookHandler</span><span class="o">());</span>

            <span class="c1">// 今回はデフォルトのExecutorを利用してHTTPリクエストを処理するように指定(null)。</span>
            <span class="n">server</span><span class="o">.</span><span class="na">setExecutor</span><span class="o">(</span><span class="kc">null</span><span class="o">);</span>

            <span class="c1">// HttpServerの待ち受けを開始します。</span>
            <span class="n">server</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>

            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"終了するには何かキーを押してください。"</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">in</span><span class="o">.</span><span class="na">read</span><span class="o">();</span>

            <span class="c1">// HttpServerの待ち受けを停止します。</span>
            <span class="n">server</span><span class="o">.</span><span class="na">stop</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>

        <span class="o">}</span> <span class="k">catch</span><span class="o">(</span><span class="nc">IOException</span> <span class="n">ioex</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">ioex</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>

<span class="o">}</span>
</code></pre></div>
</div>

<h2>
<span id="54-pythonでの実装の例" class="fragment"></span><a href="#54-python%E3%81%A7%E3%81%AE%E5%AE%9F%E8%A3%85%E3%81%AE%E4%BE%8B"><i class="fa fa-link"></i></a>5.4. Pythonでの実装の例</h2>

<p>標準の<code>http.server</code>モジュールを使っても実装できますが、今回は<code>flask</code>を使っちゃいます。<br>
※ 説明用にコメントは多めに書いています。</p>

<p>flask入ってなかったら、以下でインストール(<code>pip</code>使う場合の例)。</p>

<div class="code-frame" data-lang="console">
<div class="code-lang"><span class="bold">pip使ってflaskインストールする例</span></div>
<div class="highlight"><pre class="with-code"><code><span class="gp">$</span><span class="w"> </span>pip <span class="nb">install </span>flask
</code></pre></div>
</div>

<blockquote>
<p>Python 3.6 + flask 1.1 + Windows 10 Pro 64bitで動作確認しています。</p>
</blockquote>

<div class="code-frame" data-lang="python">
<div class="code-lang"><span class="bold">webhook_listener.py</span></div>
<div class="highlight"><pre class="with-code"><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">request</span>

<span class="c1"># 起動時の自分の名前からFlaskのインスタンス作成。
</span><span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="n">__name__</span><span class="p">)</span>

<span class="c1"># Webhookに通知が来た時に呼ばれるハンドラ。
# 以下の指定では、"/webhook"に対するHTTP POST, GET, PUT, DELETEリクエストの場合に呼ばれます。
# パスが違うと"404 Not Found", リストにないメソッドの場合は、"405 Method Not Allowed"が返ります。
</span><span class="o">@</span><span class="n">app</span><span class="p">.</span><span class="n">route</span><span class="p">(</span><span class="s">"/webhook"</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s">"POST"</span><span class="p">,</span> <span class="s">"GET"</span><span class="p">,</span> <span class="s">"PUT"</span><span class="p">,</span> <span class="s">"DELETE"</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">handle_webhook</span><span class="p">():</span>

    <span class="c1"># Webhook通知元の仕様にもよるが、HTTPのPOSTかGETかで通知が来る前提にして、
</span>    <span class="c1"># それ以外は、"204 No Content"を返す。
</span>    <span class="k">if</span> <span class="n">request</span><span class="p">.</span><span class="n">method</span> <span class="o">!=</span> <span class="s">'POST'</span> <span class="ow">and</span> <span class="n">request</span><span class="p">.</span><span class="n">method</span> <span class="o">!=</span> <span class="s">'GET'</span><span class="p">:</span>
        <span class="c1"># レスポンスのBodyとStatus Codeをタプルで返します(make_response()でタプル指定するのと同じ)。
</span>        <span class="k">return</span> <span class="p">(</span><span class="s">''</span><span class="p">,</span> <span class="mi">204</span><span class="p">)</span>

    <span class="c1"># Bodyの内容を読み込んで表示するだけ。
</span>    <span class="k">print</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="n">get_data</span><span class="p">(</span><span class="n">as_text</span><span class="o">=</span><span class="bp">True</span><span class="p">))</span>


    <span class="c1"># ==============================================================
</span>    <span class="c1"># 以下、レスポンスで何を返すべきかは通知元のサービス側の仕様にもよる。
</span>
    <span class="c1"># "204 No Content"を返せばいい場合は、以下にコメントアウトした1行だけでBody出力不要。
</span>    <span class="c1"># return ('', 204)
</span>
    <span class="c1"># レスポンスのBodyは決め打ち。
</span>    <span class="c1"># ディクショナリで返せば、jsonに変換(jsonify()を呼ぶのと同じ)して、Content-Typeヘッダも"application/json"にしてくれます。
</span>    <span class="c1"># より厳密には、make_response()が呼ばれて、その中でjsonify()が呼ばれて、その中で、Content-Typeが"application/json"に設定される。
</span>    <span class="k">return</span> <span class="p">{</span> <span class="s">'status'</span> <span class="p">:</span> <span class="s">'OK'</span> <span class="p">}</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>

    <span class="c1"># ローカルの8080番ポート(ngrok起動時のオプションで指定した番号)で待ち受け開始。
</span>    <span class="c1"># ngrokが同じローカルマシンで動いているので、"127.0.0.1"だけで待ち受ければよい。
</span>    <span class="c1"># (外部の環境からリクエストを受ける必要がない)
</span>    <span class="n">app</span><span class="p">.</span><span class="n">run</span><span class="p">(</span><span class="s">'127.0.0.1'</span><span class="p">,</span> <span class="mi">8080</span><span class="p">)</span>
</code></pre></div>
</div>
</div></div></section><div class="css-1yzj1fm"><div class="css-1uv1qiv"><span class="fa fa-twitter"></span></div><div class="css-1uv1qiv"><span class="fa fa-facebook"></span></div></div><div class="apm-Content"><div class="apm-Content_title">Why not register and get more from Qiita?</div><ol class="apm-Content_list"><li>We will deliver articles that match you<div class="description">By following users and tags, you can catch up information on technical fields that you are interested in as a whole</div></li><li>you can read useful information later efficiently<div class="description">By &quot;stocking&quot; the articles you like, you can search right away</div></li><div><a class="apm-Content_help" href="https://help.qiita.com/ja/articles/qiita-login-user" target="_blank"><i class="fa fa-fw fa-arrow-circle-right"></i>What you can do with signing up</a></div></ol><a href="/signup?callback_action=login_or_signup&amp;redirect_to=%2Fthrzn41%2Fitems%2F276aaaf5df11e351880a&amp;realm=qiita" class="apm-Content_button apm-Content_button-signup">Sign up</a><a href="/login?callback_action=login_or_signup&amp;redirect_to=%2Fthrzn41%2Fitems%2F276aaaf5df11e351880a&amp;realm=qiita" class="apm-Content_button apm-Content_button-signin">Login</a></div></div><div class="css-helsa7"></div></div></div></div><div class="css-109dbrr"><div class="css-5jpx49"><div class="css-mnxgyc"><button class=" css-1vlpknv"><svg size="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#55C500" class="css-1g4cku8 e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></button><a href="/thrzn41/items/276aaaf5df11e351880a/likers" class="css-1iupg5d">1</a></div><div class="css-fsjkhv"><button class=" css-15cocm3"><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" color="#6E6F70" class="css-12rp90f e11v00bf0"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg></button><span class="css-1b17vb0">5</span></div><div class="css-79elbk"><button class="css-16hhh7b"><i class="fa fa-ellipsis-h"></i></button><div class="css-7i7f4d"><div class="css-1gj7nt">Improve article</div><a href="/drafts/276aaaf5df11e351880a/edit" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-code-fork css-1jqivyb" aria-hidden="true"></i></span>Send edit request</a><div class="css-1ode1bp"></div><div class="css-1gj7nt">Article information</div><a href="/thrzn41/items/276aaaf5df11e351880a/revisions" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-history css-1jqivyb" aria-hidden="true"></i></span>Revisions</a><a href="/thrzn41/items/276aaaf5df11e351880a/patches" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-inbox css-1jqivyb" aria-hidden="true"></i></span>Edit Requests</a><a href="/thrzn41/items/276aaaf5df11e351880a/likers" class="css-154zy0m"><span class="css-yikrym"><svg size="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="rgba(0, 0, 0, 0.6)" class="css-le4d8r e31pr5q0"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>Show all likers</a><a href="/thrzn41/items/276aaaf5df11e351880a.md" class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-file-text-o css-1jqivyb" aria-hidden="true"></i></span>Show article in Markdown</a><div class="css-1ode1bp"></div><div class="css-154zy0m"><span class="css-yikrym"><i class="fa fa-flag css-1jqivyb" aria-hidden="true"></i></span>Report article</div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">Help us understand the problem. What is going on with this article?</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>It&#x27;s illegal (copyright infringement, privacy infringement, libel, etc.)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>It&#x27;s socially inappropriate (offensive to public order and morals)</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>It&#x27;s advertising</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>It&#x27;s spam</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>Other than the above, but not suitable for the Qiita community (violation of guidelines)</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="Submit"/></div></form></div></div></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="PersonalArticlePage" data-dom-id="PersonalArticlePage-react-component-019e288c-6f3c-4db4-90ed-f022978e61ec">{"authorAnalyticsTrackingId":null,"organizationAnalyticsTrackingId":null}</script>
      
<footer id="globalFooter" class="st-Footer"><div class="st-Footer_container"><div class="st-Footer_start"><div class="st-Footer_logo"><svg viewbox="0 0 426.57 130" xmlns="http://www.w3.org/2000/svg"><circle cx="167.08" cy="21.4" r="12.28" /><path d="M250.81 29.66h23.48v18.9h-23.48z" /><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z" /><circle cx="216.33" cy="21.4" r="12.28" /></svg></div><div class="st-Footer_catchcopy">How developers code is here.</div><div class="st-Footer_socials"><a class="fa fa-twitter" href="https://twitter.com/qiita"></a><a class="fa fa-facebook-square" href="https://www.facebook.com/qiita/"></a></div></div><div class="st-Footer_end"><div class="st-Footer_qiita"><div class="st-Footer_label">Qiita</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="/about">About</a><a href="/terms">Terms</a><a href="/privacy">Privacy</a><a target="_blank" href="http://help.qiita.com/ja/articles/qiita-community-guideline">Guideline</a><a target="_blank" href="https://help.qiita.com/ja/articles/others-brand-guideline">Design Guideline</a></div><div class="st-Footer_column"><a href="/release-notes">Release</a><a href="/api/v2/docs">API</a><a href="/feedback/new">ご意見</a><a href="https://help.qiita.com">Help</a><a target="_blank" href="https://qiita.com/ads?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Advertisement</a></div></div></div><div class="st-Footer_increments"><div class="st-Footer_label">Increments</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="https://increments.co.jp/company/">About</a><a href="https://increments.co.jp/jobs/">採用情報</a><a href="https://blog.qiita.com">Blog</a></div><div class="st-Footer_column"><a href="https://teams.qiita.com/">Qiita Team</a><a href="https://jobs.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Jobs</a><a href="https://zine.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Zine</a></div></div></div></div></div><div class="st-Footer_copyright">© 2011-2021 Increments Inc.</div></footer><div id="Snackbar-react-component-0707365b-4678-4861-b8f4-c194d5f82ec4"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="Snackbar" data-dom-id="Snackbar-react-component-0707365b-4678-4861-b8f4-c194d5f82ec4">{}</script>
      
<div id="LoginModal-react-component-6bcb0d85-72dd-4009-9343-cb6cc3c9aa11"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="LoginModal" data-dom-id="LoginModal-react-component-6bcb0d85-72dd-4009-9343-cb6cc3c9aa11">{}</script>
      
<div id="StockModal-react-component-3e8563be-fcc8-4b53-ad92-ec0f7dac68e3"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="StockModal" data-dom-id="StockModal-react-component-3e8563be-fcc8-4b53-ad92-ec0f7dac68e3">{}</script>
      
</div><div id="dataContainer" style="display: none;" data-config="{&quot;actionPath&quot;:&quot;public/items#show&quot;,&quot;settings&quot;:{&quot;analyticsTrackingId&quot;:&quot;UA-24675221-12&quot;,&quot;assetsMap&quot;:{},&quot;csrfToken&quot;:&quot;OZDaQe+lZwbdBJHhSGklJf+3IKBo2Hz6qZt3amuHPuwXwkWMktKHuhGiR+rZYEQ/04rnnDV3mN69LhYb/Y1TKA==&quot;,&quot;locale&quot;:&quot;en&quot;},&quot;currentUser&quot;:null}" /></body></html><script type="application/json" data-js-react-on-rails-store="AppStoreWithReactOnRails">{"snackbar":{"type":"","body":"","isActive":false},"article":{"article":{"body":"\n\u003ch1\u003e\n\u003cspan id=\"1-やること\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#1-%E3%82%84%E3%82%8B%E3%81%93%E3%81%A8\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e1. やること\u003c/h1\u003e\n\n\u003cp\u003eローカル環境のWindows, Mac, Linuxなどの上で、\u003cbr\u003e\nGo、C#、Java、Pythonのいずれかの言語で簡易サーバを作ります。\u003cbr\u003e\n作ったローカル環境の簡易サーバで、\u003cbr\u003e\nクラウドベースの各種チャットサービスやSNSなどのリアルタイムの通知をWebhookで受けます。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"2-必要なもの\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#2-%E5%BF%85%E8%A6%81%E3%81%AA%E3%82%82%E3%81%AE\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e2. 必要なもの\u003c/h1\u003e\n\n\u003cp\u003e\u003cstrong\u003eインターネットにつながるWindows、Mac、Linuxなど\u003c/strong\u003eが必要です。\u003cbr\u003e\n中から外に繋がればいいので、Webhook用のpublicなURL(外からアクセスできるhttpsサーバなど)は必要\u003cstrong\u003eありません\u003c/strong\u003e。\u003cbr\u003e\n\u003cstrong\u003eインターネット上のWebサイトが見れるような環境であればOKです\u003c/strong\u003e。\u003cbr\u003e\n\u003ccode\u003engrok\u003c/code\u003e(後述)とプログラミング言語を利用するので、それらをサポートしている環境である必要はあります。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"3-ngrokの準備と起動\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#3-ngrok%E3%81%AE%E6%BA%96%E5%82%99%E3%81%A8%E8%B5%B7%E5%8B%95\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e3. ngrokの準備と起動\u003c/h1\u003e\n\n\u003cp\u003eかなり、ざっくりな説明をすると、\u003cbr\u003e\n\u003ccode\u003engrok\u003c/code\u003eは、インターネットに抜けられるローカルの環境(インターネット上のWebサイトが見れるような環境)で、\u003cbr\u003e\npublic URLへのリクエストを受けられるトンネリングサービスです。\u003cbr\u003e\nTCPのトンネリングもできますが、今回はhttpのトンネリングに関してのみ触れます。\u003cbr\u003e\nあえて日本語で読むと、「エングロック」になります。\u003c/p\u003e\n\n\u003cp\u003eこちらが公式サイトです:\u003cbr\u003e\n\u003ca href=\"https://ngrok.com/\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://ngrok.com/\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e無償版、有償版があります。\u003cbr\u003e\n無償版では、1分間当たり40コネクション(40リクエストではありません)までですが、\u003cbr\u003e\nちょっとしたテストをする分には、充分だと思います。\u003cbr\u003e\n有償版ではプランによって、できることが増えていきます。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"31-ngrokのダウンロード\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#31-ngrok%E3%81%AE%E3%83%80%E3%82%A6%E3%83%B3%E3%83%AD%E3%83%BC%E3%83%89\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e3.1. ngrokのダウンロード\u003c/h2\u003e\n\n\u003cp\u003e公式サイトの[DOWNLOAD]ページからダウンロードできます。\u003c/p\u003e\n\n\u003cp\u003e\u003cqiita-embed-ogp src=\"https://ngrok.com/download\"\u003e\u003c/qiita-embed-ogp\u003e\u003c/p\u003e\n\n\u003cp\u003eダウンロードしたら、適当なディレクトリに解凍しましょう。\u003c/p\u003e\n\n\u003cblockquote\u003e\n\u003cp\u003engrokのアカウントを作らずに動作させた場合は、アプリ起動ごとに8時間のみ動作します。\u003cbr\u003e\n起動しなおせば、再度8時間利用できますが、無償アカウントを作っておいた方が制限も緩和されるのでよいと思います。\u003cbr\u003e\n公式サイトの[SING UP]からアカウントの作成ができます。\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"32-ngrokのアカウントに接続する\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#32-ngrok%E3%81%AE%E3%82%A2%E3%82%AB%E3%82%A6%E3%83%B3%E3%83%88%E3%81%AB%E6%8E%A5%E7%B6%9A%E3%81%99%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e3.2. ngrokのアカウントに接続する\u003c/h2\u003e\n\n\u003cp\u003engrokのアカウントを作った場合は、今後、ngrokを起動する場合にアカウントと関連付くようにします。\u003cbr\u003e\n\u003ccode\u003e\u0026lt;YOUR_AUTH_TOKEN\u0026gt;\u003c/code\u003eは、SING UP後やLOGIN後に取得できます。\u003cbr\u003e\nLOGIN後のページトップに『Setup \u0026amp; Installation』が表示されて、\u003cbr\u003e\n『(3) Connect your account』にまさに実行すべきコマンドがそのまま書かれています。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eWindows\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u0026gt; .\\ngrok authtoken \u0026lt;YOUR_AUTH_TOKEN\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eMac/Linux\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e$ ./ngrok authtoken \u0026lt;YOUR_AUTH_TOKEN\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003eこのコマンドを実行すると、各OSのユーザのホームディレクトリ配下の以下の場所に(Ver 2.xの場合)、\u003cbr\u003e\n\u003ccode\u003e{userhome}/.ngrok2/ngrok.yml\u003c/code\u003e\u003cbr\u003e\nというファイルが出来上がって、そこに上記のアカウントのトークン情報などが保存されます。\u003cbr\u003e\n\u003ccode\u003engrok.yml\u003c/code\u003eには、その他さまざま設定を書くこともできますが、説明は省略します。\u003cbr\u003e\n\u003ccode\u003e--config\u003c/code\u003eオプションで、設定ファイルのパスも指定できるので、例えば、ngrokをdockerコンテナで実行する場合に、\u003cbr\u003e\nホスト側のディレクトリに設定ファイル置いて、マウントさせて設定参照などもできます。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"33-ngrokを起動する\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#33-ngrok%E3%82%92%E8%B5%B7%E5%8B%95%E3%81%99%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e3.3. ngrokを起動する\u003c/h2\u003e\n\n\u003cp\u003eWebhook用のpublicなURLは、ngrok側が準備してくれます。\u003cbr\u003e\n\u003cstrong\u003eWebhook用にTLSを利用しない、\u003ccode\u003ehttp\u003c/code\u003eを使うのは、通常はおろかな行為\u003c/strong\u003eなので、\u003ccode\u003ehttps\u003c/code\u003eだけ準備されるようにオプションを指定(\u003ccode\u003e--bind-tls=true\u003c/code\u003e)します。\u003cbr\u003e\n以下コマンドの、\u003ccode\u003e8080\u003c/code\u003eは、ローカル環境のサーバのポート番号です。使っていない適切なポート番号を指定します。\u003cbr\u003e\nこの時点では、まだローカル側のサーバは作っていませんが、空いている適切なポートを指定しましょう。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eWindows\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u0026gt; .\\ngrok http 8080 --bind-tls=true\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eMac/Linux\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e$ ./ngrok http 8080 --bind-tls=true\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003eうまく行くと、以下のような出力が得られるはずです。\u003cbr\u003e\n\u003ccode\u003e{random-id}\u003c/code\u003eの部分は、実行するたびに変わります(有償版では、この部分を指定することもできます)。\u003cbr\u003e\n\u003ccode\u003eRegion\u003c/code\u003eも指定できますが、今回はデフォルトでよいと思います。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"console\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003e出力例\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"go\"\u003engrok by @inconshreveable                                                     (Ctrl+C to quit)\n\nSession Status                online\nAccount                       Your Name (Plan: Free)\nVersion                       2.x.yz\nRegion                        United States (us)\nWeb Interface                 http://127.0.0.1:4040\n\u003c/span\u003e\u003cspan class=\"gp\"\u003eForwarding                    https://{random-id}.ngrok.io -\u0026gt;\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003ehttp://localhost:8080\n\u003cspan class=\"go\"\u003e\nConnections                   ttl     opn     rt1     rt5     p50     p90\n                              0       0       0.00    0.00    0.00    0.00\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"34-ここまでの手順でngrokがやってくれること\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#34-%E3%81%93%E3%81%93%E3%81%BE%E3%81%A7%E3%81%AE%E6%89%8B%E9%A0%86%E3%81%A7ngrok%E3%81%8C%E3%82%84%E3%81%A3%E3%81%A6%E3%81%8F%E3%82%8C%E3%82%8B%E3%81%93%E3%81%A8\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e3.4. ここまでの手順でngrokがやってくれること\u003c/h2\u003e\n\n\u003cp\u003e\u003ccode\u003eForwarding  https://{random-id}.ngrok.io -\u0026gt; http://localhost:8080\u003c/code\u003eという出力が示すように、\u003cbr\u003e\nngrokサービスが、publicなURLである\u003ccode\u003ehttps://{random-id}.ngrok.io\u003c/code\u003eを準備してくれています。\u003cbr\u003e\nこのURLへの要求は、ローカル環境(ngrokコマンドを実行したマシン)の\u003ccode\u003ehttp://localhost:8080\u003c/code\u003eにフォワードされます。\u003c/p\u003e\n\n\u003cp\u003eつまり、ローカルマシン上では、\u003ccode\u003ehttp://localhost:8080\u003c/code\u003e(\u003ccode\u003ehttp://127.0.0.1:8080\u003c/code\u003e)へのリクエストを受けられるようにアプリを実装すればよいです。\u003cbr\u003e\n有償版ではプランによって、ローカルの\u003cstrong\u003ehttps\u003c/strong\u003eサーバ(ローカル側がTLSあり)にフォワードすることもできますが、今回は、ローカル側はTLSなしのhttpサーバとします。\u003c/p\u003e\n\n\u003cp\u003eざっくり図解すると、今回のオプション指定では、以下のような接続になっています。\u003cbr\u003e\n矢印の方向は接続開始時の要求の方向を示しています。リクエストとレスポンスを処理するので、データのやりとりの観点では双方向です。\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/7fed9a9db06283a4b5baef626b004739245e2b92/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3231313636362f37313030363133352d633932612d303262362d626565312d6361633839326236313039322e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F211666%2F71006135-c92a-02b6-bee1-cac892b61092.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=74e8794526a61b1246ab9f0f500f8881\" alt=\"Ngrok.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/211666/71006135-c92a-02b6-bee1-cac892b61092.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F211666%2F71006135-c92a-02b6-bee1-cac892b61092.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=2790c28af6ba071597ba7ee5e9e8b42d 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eローカルにあるngrokのアプリが、クラウドにあるngrokサービスとセキュアに常時接続しています。\u003cbr\u003e\nngrokのpublicなURLにリクエストがあると、この常時接続を通じて、ローカル側のngrokのアプリにリクエストが通知されて、\u003cbr\u003e\nローカル側のngrokのアプリが、ローカル側のサーバにリクエストを出します。\u003cbr\u003e\nngrokが準備したPublicなURLがhttpsの場合は、ここのTLSのサーバ証明書はngrok側のものになります。\u003cbr\u003e\nこの証明書チェーンは、\u003cstrong\u003e標準的な環境では信頼済み\u003c/strong\u003eのものであるので、これが非常に便利な場合もあります。\u003c/p\u003e\n\n\u003cp\u003engrokサービス提供元を信頼するという前提の下では、通信経路は暗号化されてTLSのレベルでデータが守られるということになると思います。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"35-web-interfaceも便利\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#35-web-interface%E3%82%82%E4%BE%BF%E5%88%A9\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e3.5. Web Interfaceも便利\u003c/h2\u003e\n\n\u003cp\u003e\u003ccode\u003eWeb Interface  http://127.0.0.1:4040\u003c/code\u003eと出力されていると思いますが、テストではこれは便利に使えます。\u003cbr\u003e\n(オプションでWeb Interfaceを無効にすることもできます。)\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"http://127.0.0.1:4040\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://127.0.0.1:4040\u003c/a\u003e\u003cbr\u003e\nにアクセスすることで、ngrokを経由した通信内容を閲覧したりできます。\u003cbr\u003e\n例えば、httpのリクエストとレスポンスのヘッダやBodyの中身を調べたりすることができます。\u003c/p\u003e\n\n\u003cp\u003eまた、[Replay]機能が非常に便利で、ngrok経由で過去に行われたhttpなどのリクエストを、\u003cbr\u003e\n再度ローカルのサーバに\u003cstrong\u003e好きなタイミングで\u003c/strong\u003e送信することができます。\u003cbr\u003e\nリクエストを\u003cstrong\u003e編集して送信する\u003c/strong\u003eこともできます。\u003cbr\u003e\nテストでは結構便利で、Webhookの実際の通知を再度発生させることなく、以前の通知内容をちょっと変えて試すということもできます。\u003cbr\u003e\n(本格的なテストを行うときは、ngrokで本機能を使うのではなく、より高度なテストの自動化をする場合が多いと思います。)\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://camo.qiitausercontent.com/a5a1b717ce81037c05d2db92f62191f18ba80abc/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3231313636362f39356333333236662d313530612d326336372d643933302d3335643564316134663435352e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F211666%2F95c3326f-150a-2c67-d930-35d5d1a4f455.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=106a8d3474353ec53b1ab2a8c2cbe7b7\" alt=\"Ngrok_Web_Interface.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/211666/95c3326f-150a-2c67-d930-35d5d1a4f455.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F211666%2F95c3326f-150a-2c67-d930-35d5d1a4f455.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=68f1e1dfc7e1eb649ce41ac3bb5bfb51 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"36-apiもあります\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#36-api%E3%82%82%E3%81%82%E3%82%8A%E3%81%BE%E3%81%99\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e3.6. APIもあります\u003c/h2\u003e\n\n\u003cp\u003eWeb Interfaceを有効にしているとAPIも使えます。\u003c/p\u003e\n\n\u003cp\u003eAPIの詳細は\u003ca href=\"https://ngrok.com/docs#client-api\" rel=\"nofollow noopener\" target=\"_blank\"\u003eこちらのページ(https://ngrok.com/docs#client-api)\u003c/a\u003eに記載されています。\u003c/p\u003e\n\n\u003cp\u003engrokサービスが割り当ててくれるpublicなURLは、無償版ではランダムになりますが、\u003cbr\u003e\nAPIで何を割り当ててもらったかを取得することもできます。\u003c/p\u003e\n\n\u003cp\u003eWeb Interfaceの\u003cbr\u003e\n\u003ccode\u003ehttp://127.0.0.1:4040/api/tunnels\u003c/code\u003eに、HTTP GETのリクエスト投げると、レスポンスで各種情報が得られます。\u003cbr\u003e\nリクエスト時には、\u003ccode\u003eAccept\u003c/code\u003eや\u003ccode\u003eContent-Type\u003c/code\u003eを、\u003ccode\u003eapplication/json\u003c/code\u003eにしておくと、JSON形式でレスポンス返ってきます。\u003c/p\u003e\n\n\u003cp\u003e例えば、以下のような感じです。\u003cbr\u003e\n\u003ccode\u003emetrics\u003c/code\u003eも興味深いですが、今回は中身省略して記載しています。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"json\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003e/api/tunnels\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"w\"\u003e\n    \u003c/span\u003e\u003cspan class=\"nl\"\u003e\"tunnels\"\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"w\"\u003e\n        \u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"w\"\u003e\n            \u003c/span\u003e\u003cspan class=\"nl\"\u003e\"name\"\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"s2\"\u003e\"command_line\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"w\"\u003e\n            \u003c/span\u003e\u003cspan class=\"nl\"\u003e\"uri\"\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"s2\"\u003e\"/api/tunnels/command_line\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"w\"\u003e\n            \u003c/span\u003e\u003cspan class=\"nl\"\u003e\"public_url\"\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"s2\"\u003e\"https://{random-id}.ngrok.io\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"w\"\u003e\n            \u003c/span\u003e\u003cspan class=\"nl\"\u003e\"proto\"\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"s2\"\u003e\"https\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"w\"\u003e\n            \u003c/span\u003e\u003cspan class=\"nl\"\u003e\"config\"\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"w\"\u003e\n                \u003c/span\u003e\u003cspan class=\"nl\"\u003e\"addr\"\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"s2\"\u003e\"http://localhost:8080\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"w\"\u003e\n                \u003c/span\u003e\u003cspan class=\"nl\"\u003e\"inspect\"\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"kc\"\u003etrue\u003c/span\u003e\u003cspan class=\"w\"\u003e\n            \u003c/span\u003e\u003cspan class=\"p\"\u003e},\u003c/span\u003e\u003cspan class=\"w\"\u003e\n            \u003c/span\u003e\u003cspan class=\"nl\"\u003e\"metrics\"\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"w\"\u003e\n            \u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"w\"\u003e\n        \u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"w\"\u003e\n    \u003c/span\u003e\u003cspan class=\"p\"\u003e],\u003c/span\u003e\u003cspan class=\"w\"\u003e\n    \u003c/span\u003e\u003cspan class=\"nl\"\u003e\"uri\"\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"s2\"\u003e\"/api/tunnels\"\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e今回はngrok起動コマンドで、明示的に\u003ccode\u003ehttps\u003c/code\u003eのみ指定したので、\u003ccode\u003e\"tunnels\"\u003c/code\u003e配列には、１つのオブジェクトのみ含まれます。\u003cbr\u003e\nそのオブジェクトの\u003ccode\u003e\"public_url\"\u003c/code\u003eから、ngrok側が割り当てたpublicなURLが取得できます。\u003cbr\u003e\n\u003ccode\u003e\"config\"\u003c/code\u003eオブジェクトの\u003ccode\u003e\"addr\"\u003c/code\u003eからは、フォワード先のローカル側のURLが取得できます。\u003c/p\u003e\n\n\u003cp\u003eまた、先ほどWeb Interfaceで説明したリクエストやレスポンスのヘッダやBodyの中身の時系列での情報取得や、\u003cbr\u003e\nReplayを行うAPIもあります。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"4-ここまででもうwebhookの通知は受けられます\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#4-%E3%81%93%E3%81%93%E3%81%BE%E3%81%A7%E3%81%A7%E3%82%82%E3%81%86webhook%E3%81%AE%E9%80%9A%E7%9F%A5%E3%81%AF%E5%8F%97%E3%81%91%E3%82%89%E3%82%8C%E3%81%BE%E3%81%99\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e4. ここまでで、もうWebhookの通知は受けられます\u003c/h1\u003e\n\n\u003cp\u003e\u003ccode\u003engrokサービス\u003c/code\u003eが準備してくれた、public URLをWebhookの通知先として、各種チャットサービスやSNSなどのAPIサービス側に登録すれば、実際に動作するはずです。\u003cbr\u003e\nこの時点ではローカル側にまだサーバーがないので、正常なレスポンスを返すことができませんが、\u003cbr\u003e\nWeb Interface ( \u003ca href=\"http://127.0.0.1:4040\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttp://127.0.0.1:4040\u003c/a\u003e )から、Webhookで通知されたリクエストのヘッダやBodyの中身は確認できます。\u003c/p\u003e\n\n\u003cp\u003e\u003ccode\u003eForwarding  https://{random-id}.ngrok.io -\u0026gt; http://localhost:8080\u003c/code\u003eのように出力されている場合は、\u003cbr\u003e\n\u003ccode\u003ehttps://{random-id}.ngrok.io/webhook\u003c/code\u003e\u003cbr\u003e\nなどを、Webhookの通知先のURLとして登録します。\u003cbr\u003e\n\u003cstrong\u003e{random-id}の部分は、ngrokコマンドを実行した環境によって、また無償版では(有償版で指定していない場合も)、起動ごとに変わります。\u003c/strong\u003e\u003cbr\u003e\n後ろにくっつけたパス部分の、\u003ccode\u003e/webhook\u003c/code\u003eは好きなパスに指定できます。\u003cbr\u003e\n\u003ccode\u003e/\u003c/code\u003eとかでも良いですが、この後のコードでは、\u003ccode\u003ehttps://{random-id}.ngrok.io/webhook\u003c/code\u003eのように、パスは\u003ccode\u003e/webhook\u003c/code\u003eを指定したものとして記載します。\u003c/p\u003e\n\n\u003cp\u003eWebhookの通知先の登録方法は利用するクラウドサービスなどによって異なります。\u003cbr\u003e\n開発者用のサイトから登録できるものや、APIで登録する場合などあります。\u003cbr\u003e\n試してみたいサービスごとに登録方法は確認する必要があります。\u003c/p\u003e\n\n\u003cp\u003eサービスによっては、登録作業を行った瞬間に、Webhookの通知先にリクエストを出して、\u003cbr\u003e\n適切なレスポンスを返さないと、登録に失敗する仕組みのものもあります。\u003cbr\u003e\nこちらの場合でも、登録時のリクエスト内容は、上記のWeb Interfaceで確認できます。\u003c/p\u003e\n\n\u003cp\u003eまた、ここで、Webブラウザなどで、同じマシンからでも、別のマシンからでも、\u003cbr\u003e\n\u003ccode\u003ehttps://{random-id}.ngrok.io/webhook\u003c/code\u003eにアクセスすると、\u003cbr\u003e\nngrokコマンドを実行しているコンソールや、Web Interfaceにも出力があるはずです。\u003cbr\u003e\nHTTP GET以外でもいろいろ試してみたい場合は、\u003ca href=\"https://www.postman.com/\" rel=\"nofollow noopener\" target=\"_blank\"\u003ePostman\u003c/a\u003e などを使って、とりあえず、動作を見ることはできると思います。\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"5-各種言語で簡易サーバを実装する\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#5-%E5%90%84%E7%A8%AE%E8%A8%80%E8%AA%9E%E3%81%A7%E7%B0%A1%E6%98%93%E3%82%B5%E3%83%BC%E3%83%90%E3%82%92%E5%AE%9F%E8%A3%85%E3%81%99%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e5. 各種言語で簡易サーバを実装する\u003c/h1\u003e\n\n\u003cp\u003e今のままでは、ngrokがローカルにフォワードする先のサーバがないので、簡易サーバを作っていきます。\u003cbr\u003e\nhttpのリクエストに対して、どんなレスポンスを返すべきかは、サービスごとにことなるので、\u003cbr\u003e\n今回は、とりあえず、\u003ccode\u003e200 OK\u003c/code\u003eで、Bodyは以下のようなJSONを固定で返すことにします。\u003cbr\u003e\nサービスによっては、\u003ccode\u003e204 No Content\u003c/code\u003eで、Bodyなしで返せばよいものもあります。\u003c/p\u003e\n\n\u003cp\u003eとりあえず、レスポンスBodyに入れる内容(\u003cstrong\u003e実際は利用するサービスによって適切なものを返す必要あり\u003c/strong\u003e):\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"json\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003e今回の例で固定で返すレスポンスBody\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"w\"\u003e\n  \u003c/span\u003e\u003cspan class=\"nl\"\u003e\"status\"\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"s2\"\u003e\"OK\"\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003eこの後、例として記載する\u003cstrong\u003eいずれかの\u003c/strong\u003eコードを実行した上で、\u003ccode\u003engrok\u003c/code\u003eを実行して、\u003cbr\u003e\nngrokが準備したhttpsのURLを元にしたURL(\u003ccode\u003ehttps://{random-id}.ngrok.io/webhook\u003c/code\u003eとか)を、\u003cbr\u003e\n対象のクラウドサービス側にWebhook通知先として登録すると動作します。\u003cbr\u003e\n\u003cstrong\u003e例では、ngrokが準備したURLに、\"/webhook\"のパスが追加されている前提のコードになっています\u003c/strong\u003e。\u003cbr\u003e\n例では、サービスからの通知されたリクエストのBodyを表示して、固定のレスポンスを返しているだけですが、\u003cbr\u003e\n利用するサービスに応じて、処理を少し追加すると、いろいろできると思います。\u003c/p\u003e\n\n\u003cp\u003e今回は、さくっと例を記載したいだけなので、処理に成功したかどうかのチェック等は省略しています。\u003cbr\u003e\n\u003cstrong\u003e煩雑になりすぎないように、必要最小限に近いくらいのコードになるようにしていますが、実際のアプリでは各種チェックが必要になります。\u003c/strong\u003e\u003c/p\u003e\n\n\u003cp\u003eまた、Webhookは、クラウドサービスの場合は、publicなURLで受ける場合が多いので、\u003cbr\u003e\n偽装した通知が送られるような場合も想定しておく必要があると思いますが、その辺りの対策も今回の実装例には盛り込んではいません。\u003c/p\u003e\n\n\u003cp\u003e関連してですが、(いろんな意見あると思いますが)、個人的には、偽装通知する人のヒントになるような、\u003cbr\u003e\n\u003ccode\u003e404 Not Found\u003c/code\u003eとか\u003ccode\u003e405 Method Not Allowed\u003c/code\u003eとかも返すべきでないと思っていますが、その辺も今回の実装例には盛り込んでいません。\u003cbr\u003e\n不正な通知に対しては、「\u003ccode\u003e204 No Content\u003c/code\u003eで成功で返す」、\u003cbr\u003e\n「レスポンス自体返さず相手はレスポンス待ち状態にする(TCPのコネクションは切断しない)」、\u003cbr\u003e\n「レスポンスは返さず、TCPのコネクションを切断する」などの対処があると思います。\u003cbr\u003e\nただし、コネクションを切断しないパターンは、\u003cbr\u003e\nサーバ側の残りの接続数やスレッドプール数に悪影響がでやすい(リソースを枯渇させる攻撃が考えられる)ので、\u003cbr\u003e\n一般的には実装が難しいです(TCP/Socketレベルで実装考えないといけなくなると思います)。\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"51-goでの実装の例\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#51-go%E3%81%A7%E3%81%AE%E5%AE%9F%E8%A3%85%E3%81%AE%E4%BE%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e5.1. Goでの実装の例\u003c/h2\u003e\n\n\u003cp\u003e標準の、\u003ccode\u003enet/http\u003c/code\u003eパッケージを利用した例です。\u003cbr\u003e\n※ 説明用にコメントは多めに書いています。\u003c/p\u003e\n\n\u003cblockquote\u003e\n\u003cp\u003ego1.13 + Windows 10 Pro 64bitで動作確認しています。\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"go\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003ewebhook_listener.go\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003epackage\u003c/span\u003e \u003cspan class=\"n\"\u003emain\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003eimport\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\n    \u003cspan class=\"s\"\u003e\"fmt\"\u003c/span\u003e\n    \u003cspan class=\"s\"\u003e\"io/ioutil\"\u003c/span\u003e\n    \u003cspan class=\"s\"\u003e\"net/http\"\u003c/span\u003e\n\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"c\"\u003e// Webhookに通知が来た時に呼ばれるハンドラ。\u003c/span\u003e\n\u003cspan class=\"k\"\u003efunc\u003c/span\u003e \u003cspan class=\"n\"\u003ehandleWebhook\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ew\u003c/span\u003e \u003cspan class=\"n\"\u003ehttp\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eResponseWriter\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003er\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"n\"\u003ehttp\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eRequest\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\n    \u003cspan class=\"c\"\u003e// Webhook通知元の仕様にもよるが、HTTPのPOSTかGETかで通知が来る前提にして、\u003c/span\u003e\n    \u003cspan class=\"c\"\u003e// それ以外は、\"204 No Content\"を返す。\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"n\"\u003er\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eMethod\u003c/span\u003e \u003cspan class=\"o\"\u003e!=\u003c/span\u003e \u003cspan class=\"n\"\u003ehttp\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eMethodPost\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e \u003cspan class=\"n\"\u003er\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eMethod\u003c/span\u003e \u003cspan class=\"o\"\u003e!=\u003c/span\u003e \u003cspan class=\"n\"\u003ehttp\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eMethodGet\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003ew\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eWriteHeader\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ehttp\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eStatusNoContent\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"c\"\u003e// Bodyの内容を読み込んで表示するだけ。\u003c/span\u003e\n    \u003cspan class=\"n\"\u003ebody\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003e_\u003c/span\u003e \u003cspan class=\"o\"\u003e:=\u003c/span\u003e \u003cspan class=\"n\"\u003eioutil\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eReadAll\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003er\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eBody\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"n\"\u003efmt\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ePrintln\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"ReceivedData:\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ebody\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n\n    \u003cspan class=\"c\"\u003e////////////////////////////////////////////////////////////////\u003c/span\u003e\n    \u003cspan class=\"c\"\u003e// 以下、レスポンスで何を返すべきかは通知元のサービス側の仕様にもよる。\u003c/span\u003e\n\n    \u003cspan class=\"c\"\u003e// \"204 No Content\"を返せばいい場合は、以下にコメントアウトした1行だけでBody出力不要。\u003c/span\u003e\n    \u003cspan class=\"c\"\u003e// w.WriteHeader(http.StatusNoContent)\u003c/span\u003e\n\n    \u003cspan class=\"c\"\u003e// レスポンスヘッダで、Content-Type: application/jsonにする。\u003c/span\u003e\n    \u003cspan class=\"n\"\u003ew\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eHeader\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eSet\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Content-Type\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\"application/json\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n    \u003cspan class=\"c\"\u003e// レスポンスのBodyは決め打ち。\u003c/span\u003e\n    \u003cspan class=\"n\"\u003efmt\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eFprint\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ew\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\"{\u003c/span\u003e\u003cspan class=\"se\"\u003e\\\"\u003c/span\u003e\u003cspan class=\"s\"\u003estatus\u003c/span\u003e\u003cspan class=\"se\"\u003e\\\"\u003c/span\u003e\u003cspan class=\"s\"\u003e : \u003c/span\u003e\u003cspan class=\"se\"\u003e\\\"\u003c/span\u003e\u003cspan class=\"s\"\u003eOK\u003c/span\u003e\u003cspan class=\"se\"\u003e\\\"\u003c/span\u003e\u003cspan class=\"s\"\u003e}\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003efunc\u003c/span\u003e \u003cspan class=\"n\"\u003emain\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\n    \u003cspan class=\"c\"\u003e// ローカルサーバの\"/webhook\"にリクエストが来た時に呼ばれるハンドラを登録。\u003c/span\u003e\n    \u003cspan class=\"n\"\u003ehttp\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eHandleFunc\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"/webhook\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ehandleWebhook\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n    \u003cspan class=\"c\"\u003e// ローカルの8080番ポート(ngrok起動時のオプションで指定した番号)で待ち受け開始。\u003c/span\u003e\n    \u003cspan class=\"c\"\u003e// ngrokが同じローカルマシンで動いているので、\"127.0.0.1\"だけで待ち受ければよい。\u003c/span\u003e\n    \u003cspan class=\"c\"\u003e// (外部の環境からリクエストを受ける必要がない)\u003c/span\u003e\n    \u003cspan class=\"n\"\u003ehttp\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eListenAndServe\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"127.0.0.1:8080\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"no\"\u003enil\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"52-cでの実装の例\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#52-c%E3%81%A7%E3%81%AE%E5%AE%9F%E8%A3%85%E3%81%AE%E4%BE%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e5.2. C#での実装の例\u003c/h2\u003e\n\n\u003cp\u003e.NET Core 2.0以降や、.NET Frameworkなどで利用できる\u003ccode\u003eSystem.Net.HttpListener\u003c/code\u003eを利用した例です。\u003cbr\u003e\n※ 説明用にコメントは多めに書いています。\u003c/p\u003e\n\n\u003cblockquote\u003e\n\u003cp\u003e.NET Core 2.0 + Windows 10 Pro 64bitで動作確認しています。\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"csharp\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eWebhookListener.cs\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem.IO\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem.Net\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem.Text\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"nn\"\u003eSystem.Threading.Tasks\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003enamespace\u003c/span\u003e \u003cspan class=\"nn\"\u003eWebhookListener\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eProgram\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003estatic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eMain\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e[]\u003c/span\u003e \u003cspan class=\"n\"\u003eargs\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"c1\"\u003e// System.Net.HttpListenerを利用してサーバを実装します。\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003elistener\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eHttpListener\u003c/span\u003e\u003cspan class=\"p\"\u003e())\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"c1\"\u003e// ローカルの8080番ポート(ngrok起動時のオプションで指定した番号)で待ち受け開始。\u003c/span\u003e\n                \u003cspan class=\"c1\"\u003e// ngrokが同じローカルマシンで動いているので、\"127.0.0.1\"だけで待ち受ければよい。\u003c/span\u003e\n                \u003cspan class=\"c1\"\u003e// (外部の環境からリクエストを受ける必要がない)\u003c/span\u003e\n                \u003cspan class=\"c1\"\u003e// また、\"/webhook\"のパスも入れておく。Prefix指定時は、\"/\"で終わるようにしておく必要がある。\u003c/span\u003e\n                \u003cspan class=\"n\"\u003elistener\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ePrefixes\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eAdd\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"http://127.0.0.1:8080/webhook/\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n                \u003cspan class=\"c1\"\u003e// HttpListenerの待ち受けを開始します。\u003c/span\u003e\n                \u003cspan class=\"n\"\u003elistener\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eStart\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n                \u003cspan class=\"c1\"\u003e// スレッドプール上で待ち受けるようにする。\u003c/span\u003e\n                \u003cspan class=\"c1\"\u003e// 今回は1スレッドだが、例えばループで64回Task作成すれば、64スレッドで待ち受けるようになる。\u003c/span\u003e\n                \u003cspan class=\"n\"\u003eTask\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eRun\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n                    \u003cspan class=\"k\"\u003easync\u003c/span\u003e \u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e\n                    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                        \u003cspan class=\"c1\"\u003e// HttpListenerが待ち受け中はループする。\u003c/span\u003e\n                        \u003cspan class=\"k\"\u003ewhile\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003elistener\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eIsListening\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n                        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                            \u003cspan class=\"c1\"\u003e////////////////////////////////////////////////////////////////\u003c/span\u003e\n                            \u003cspan class=\"c1\"\u003e// このサンプルの実装では、whileブロック内で例外が発生すると後続の待ち受けも中断されます。\u003c/span\u003e\n                            \u003cspan class=\"c1\"\u003e// 実際には、適切に例外を処理する必要があります。\u003c/span\u003e\n                            \u003cspan class=\"c1\"\u003e// どの例外をcatchすべきかは、whileブロック内での処理内容にもよります。\u003c/span\u003e\n                            \u003cspan class=\"c1\"\u003e// catchしすぎると、意図せずループが続く場合もあるので注意が必要です。\u003c/span\u003e\n                            \u003cspan class=\"c1\"\u003e// 基本的には、例外が発生しても待ち受けを継続したいような場合の例外は、whileブロックの中、\u003c/span\u003e\n                            \u003cspan class=\"c1\"\u003e// 待ち受けを継続しても意味がないような例外は、whileブロックの外側で受けるように実装します。\u003c/span\u003e\n\n                            \u003cspan class=\"c1\"\u003e// 先ほど登録したアドレス、ポート、パスに合致するリクエストが来ると、処理用のContextが取得できる。\u003c/span\u003e\n                            \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003econtext\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003eawait\u003c/span\u003e \u003cspan class=\"n\"\u003elistener\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eGetContextAsync\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n                            \u003cspan class=\"c1\"\u003e// リクエストとレスポンス処理用のインスタンス取得。\u003c/span\u003e\n                            \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003erequest\u003c/span\u003e  \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003econtext\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eRequest\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n                            \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eresponse\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003econtext\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eResponse\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n                            \u003cspan class=\"k\"\u003etry\u003c/span\u003e\n                            \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                                \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003erequest\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eHttpMethod\u003c/span\u003e \u003cspan class=\"p\"\u003e!=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"POST\"\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e \u003cspan class=\"n\"\u003erequest\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eHttpMethod\u003c/span\u003e \u003cspan class=\"p\"\u003e!=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"GET\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n                                \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                                    \u003cspan class=\"c1\"\u003e// Webhook通知元の仕様にもよるが、HTTPのPOSTかGETかで通知が来る前提にして、\u003c/span\u003e\n                                    \u003cspan class=\"c1\"\u003e// それ以外は、\"204 No Content\"を返す。\u003c/span\u003e\n                                    \u003cspan class=\"n\"\u003eresponse\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eStatusCode\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e204\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n                                \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n                                \u003cspan class=\"k\"\u003eelse\u003c/span\u003e\n                                \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                                    \u003cspan class=\"c1\"\u003e// Bodyの内容を読み込んで表示するだけ。\u003c/span\u003e\n                                    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003erequest\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eHasEntityBody\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n                                    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                                        \u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003ereader\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eStreamReader\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003erequest\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eInputStream\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003erequest\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eContentEncoding\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n                                        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                                            \u003cspan class=\"n\"\u003eConsole\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWriteLine\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"RequestData: {0}\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ereader\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eReadToEnd\u003c/span\u003e\u003cspan class=\"p\"\u003e());\u003c/span\u003e\n                                        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n                                    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n                                    \u003cspan class=\"c1\"\u003e////////////////////////////////////////////////////////////////\u003c/span\u003e\n                                    \u003cspan class=\"c1\"\u003e// 以下、レスポンスで何を返すべきかは通知元のサービス側の仕様にもよる。\u003c/span\u003e\n\n                                    \u003cspan class=\"c1\"\u003e// \"204 No Content\"を返せばいい場合は、以下にコメントアウトした1行だけでBody出力不要。\u003c/span\u003e\n                                    \u003cspan class=\"c1\"\u003e// response.StatusCode = 204;\u003c/span\u003e\n\n                                    \u003cspan class=\"c1\"\u003e// レスポンスヘッダで、Content-Type: application/jsonにする。\u003c/span\u003e\n                                    \u003cspan class=\"n\"\u003eresponse\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eContentType\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"application/json\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n                                    \u003cspan class=\"c1\"\u003e// レスポンスのBodyは決め打ちで書き込む。\u003c/span\u003e\n                                    \u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003ewriter\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eStreamWriter\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eresponse\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eOutputStream\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n                                    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                                        \u003cspan class=\"n\"\u003ewriter\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWrite\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"{\\\"status\\\" : \\\"OK\\\"}\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n                                    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n                                \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n                            \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n                            \u003cspan class=\"k\"\u003efinally\u003c/span\u003e\n                            \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                                \u003cspan class=\"c1\"\u003e// ResponseはClose()を呼ぶ必要があります。\u003c/span\u003e\n                                \u003cspan class=\"n\"\u003eresponse\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eClose\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n                            \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n                        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n                    \u003cspan class=\"p\"\u003e});\u003c/span\u003e\n\n                \u003cspan class=\"c1\"\u003e// 何かキーを押したら終了させる。\u003c/span\u003e\n                \u003cspan class=\"n\"\u003eConsole\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWriteLine\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"終了するには何かキーを押してください。\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n                \u003cspan class=\"n\"\u003eConsole\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eReadKey\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003efalse\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"53-javaでの実装の例\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#53-java%E3%81%A7%E3%81%AE%E5%AE%9F%E8%A3%85%E3%81%AE%E4%BE%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e5.3. Javaでの実装の例\u003c/h2\u003e\n\n\u003cp\u003eJava 1.6以降利用可能な\u003ccode\u003ecom.sun.net.httpserver.HttpServer\u003c/code\u003eを利用した例です。\u003cbr\u003e\nパッケージは、\u003ccode\u003ecom.sun.net\u003c/code\u003e配下になっていますが、OpenJDKでも利用できます。\u003cbr\u003e\n※ 説明用にコメントは多めに書いています。\u003c/p\u003e\n\n\u003cblockquote\u003e\n\u003cp\u003eOpenJDK11(AdoptOpenJDK) + Windows 10 Pro 64bitで動作確認しています。\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"java\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eWebhookListener.java\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"kn\"\u003epackage\u003c/span\u003e \u003cspan class=\"nn\"\u003ethrzn41.samples\u003c/span\u003e\u003cspan class=\"o\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"nn\"\u003ejava.io.IOException\u003c/span\u003e\u003cspan class=\"o\"\u003e;\u003c/span\u003e\n\u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"nn\"\u003ejava.net.InetSocketAddress\u003c/span\u003e\u003cspan class=\"o\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"nn\"\u003ecom.sun.net.httpserver.HttpExchange\u003c/span\u003e\u003cspan class=\"o\"\u003e;\u003c/span\u003e\n\u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"nn\"\u003ecom.sun.net.httpserver.HttpHandler\u003c/span\u003e\u003cspan class=\"o\"\u003e;\u003c/span\u003e\n\u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"nn\"\u003ecom.sun.net.httpserver.HttpServer\u003c/span\u003e\u003cspan class=\"o\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"kd\"\u003epublic\u003c/span\u003e \u003cspan class=\"kd\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eWebhookListener\u003c/span\u003e \u003cspan class=\"o\"\u003e{\u003c/span\u003e\n\n    \u003cspan class=\"cm\"\u003e/**\n     * リクエストが来た時に処理するハンドラクラス。\n     */\u003c/span\u003e\n    \u003cspan class=\"kd\"\u003eprivate\u003c/span\u003e \u003cspan class=\"kd\"\u003estatic\u003c/span\u003e \u003cspan class=\"kd\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eWebhookHandler\u003c/span\u003e \u003cspan class=\"kd\"\u003eimplements\u003c/span\u003e \u003cspan class=\"nc\"\u003eHttpHandler\u003c/span\u003e \u003cspan class=\"o\"\u003e{\u003c/span\u003e\n\n        \u003cspan class=\"cm\"\u003e/**\n         * HttpServer.createContext()で登録したパスにHTTPリクエストがあると、このメソッドが呼ばれる。\n         */\u003c/span\u003e\n        \u003cspan class=\"nd\"\u003e@Override\u003c/span\u003e\n        \u003cspan class=\"kd\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003ehandle\u003c/span\u003e\u003cspan class=\"o\"\u003e(\u003c/span\u003e\u003cspan class=\"nc\"\u003eHttpExchange\u003c/span\u003e \u003cspan class=\"n\"\u003eexchange\u003c/span\u003e\u003cspan class=\"o\"\u003e)\u003c/span\u003e \u003cspan class=\"kd\"\u003ethrows\u003c/span\u003e \u003cspan class=\"nc\"\u003eIOException\u003c/span\u003e \u003cspan class=\"o\"\u003e{\u003c/span\u003e\n\n            \u003cspan class=\"c1\"\u003e// Webhook通知元の仕様にもよるが、HTTPのPOSTかGETかで通知が来る前提にして、\u003c/span\u003e\n            \u003cspan class=\"c1\"\u003e// それ以外は、\"204 No Content\"を返す。\u003c/span\u003e\n            \u003cspan class=\"nc\"\u003eString\u003c/span\u003e \u003cspan class=\"n\"\u003emethod\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eexchange\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"na\"\u003egetRequestMethod\u003c/span\u003e\u003cspan class=\"o\"\u003e();\u003c/span\u003e\n\n            \u003cspan class=\"k\"\u003eif\u003c/span\u003e\u003cspan class=\"o\"\u003e(\u003c/span\u003e \u003cspan class=\"o\"\u003e!\u003c/span\u003e\u003cspan class=\"n\"\u003emethod\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"na\"\u003eequals\u003c/span\u003e\u003cspan class=\"o\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"POST\"\u003c/span\u003e\u003cspan class=\"o\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e \u003cspan class=\"o\"\u003e!\u003c/span\u003e\u003cspan class=\"n\"\u003emethod\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"na\"\u003eequals\u003c/span\u003e\u003cspan class=\"o\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"GET\"\u003c/span\u003e\u003cspan class=\"o\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"n\"\u003eexchange\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"na\"\u003esendResponseHeaders\u003c/span\u003e\u003cspan class=\"o\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e204\u003c/span\u003e\u003cspan class=\"o\"\u003e,\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"o\"\u003e);\u003c/span\u003e\n                \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e\u003cspan class=\"o\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"o\"\u003e}\u003c/span\u003e\n\n             \u003cspan class=\"c1\"\u003e// Bodyの内容を読み込んで表示するだけ。\u003c/span\u003e\n            \u003cspan class=\"k\"\u003etry\u003c/span\u003e\u003cspan class=\"o\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003einput\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eexchange\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"na\"\u003egetRequestBody\u003c/span\u003e\u003cspan class=\"o\"\u003e())\u003c/span\u003e \u003cspan class=\"o\"\u003e{\u003c/span\u003e\n\n                \u003cspan class=\"c1\"\u003e// 本来は、ちゃんとリクエストヘッダのエンコーディングを見た方がいいですが、\u003c/span\u003e\n                \u003cspan class=\"c1\"\u003e// 今回は、\"utf-8\"である前提で変換しています。\u003c/span\u003e\n                \u003cspan class=\"nc\"\u003eString\u003c/span\u003e \u003cspan class=\"n\"\u003ebody\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nc\"\u003eString\u003c/span\u003e\u003cspan class=\"o\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003einput\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"na\"\u003ereadAllBytes\u003c/span\u003e\u003cspan class=\"o\"\u003e(),\u003c/span\u003e \u003cspan class=\"s\"\u003e\"utf-8\"\u003c/span\u003e\u003cspan class=\"o\"\u003e);\u003c/span\u003e\n\n                \u003cspan class=\"nc\"\u003eSystem\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"na\"\u003eout\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"na\"\u003eprintf\u003c/span\u003e\u003cspan class=\"o\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"RequestData: %s%n\"\u003c/span\u003e\u003cspan class=\"o\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ebody\u003c/span\u003e\u003cspan class=\"o\"\u003e);\u003c/span\u003e\n            \u003cspan class=\"o\"\u003e}\u003c/span\u003e\n\n\n            \u003cspan class=\"c1\"\u003e////////////////////////////////////////////////////////////////\u003c/span\u003e\n            \u003cspan class=\"c1\"\u003e// 以下、レスポンスで何を返すべきかは通知元のサービス側の仕様にもよる。\u003c/span\u003e\n\n            \u003cspan class=\"c1\"\u003e// \"204 No Content\"を返せばいい場合は、以下にコメントアウトした1行だけでBody出力不要。\u003c/span\u003e\n            \u003cspan class=\"c1\"\u003e// exchange.sendResponseHeaders(204, -1);\u003c/span\u003e\n\n            \u003cspan class=\"c1\"\u003e// レスポンスのBodyは決め打ちで書き込む。\u003c/span\u003e\n            \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eresponseBytes\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"{\\\"status\\\" : \\\"OK\\\"}\"\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"na\"\u003egetBytes\u003c/span\u003e\u003cspan class=\"o\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"utf-8\"\u003c/span\u003e\u003cspan class=\"o\"\u003e);\u003c/span\u003e\n\n            \u003cspan class=\"k\"\u003etry\u003c/span\u003e\u003cspan class=\"o\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eoutput\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eexchange\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"na\"\u003egetResponseBody\u003c/span\u003e\u003cspan class=\"o\"\u003e())\u003c/span\u003e \u003cspan class=\"o\"\u003e{\u003c/span\u003e\n\n                \u003cspan class=\"c1\"\u003e// レスポンスヘッダで、Content-Type: application/jsonにする。\u003c/span\u003e\n                \u003cspan class=\"n\"\u003eexchange\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"na\"\u003egetResponseHeaders\u003c/span\u003e\u003cspan class=\"o\"\u003e().\u003c/span\u003e\u003cspan class=\"na\"\u003eset\u003c/span\u003e\u003cspan class=\"o\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Content-Type\"\u003c/span\u003e\u003cspan class=\"o\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\"application/json\"\u003c/span\u003e\u003cspan class=\"o\"\u003e);\u003c/span\u003e\n                \u003cspan class=\"n\"\u003eexchange\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"na\"\u003esendResponseHeaders\u003c/span\u003e\u003cspan class=\"o\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e200\u003c/span\u003e\u003cspan class=\"o\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eresponseBytes\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"na\"\u003elength\u003c/span\u003e\u003cspan class=\"o\"\u003e);\u003c/span\u003e\n\n                \u003cspan class=\"n\"\u003eoutput\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"na\"\u003ewrite\u003c/span\u003e\u003cspan class=\"o\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eresponseBytes\u003c/span\u003e\u003cspan class=\"o\"\u003e);\u003c/span\u003e\n            \u003cspan class=\"o\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"o\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"o\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"kd\"\u003epublic\u003c/span\u003e \u003cspan class=\"kd\"\u003estatic\u003c/span\u003e \u003cspan class=\"kt\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003emain\u003c/span\u003e\u003cspan class=\"o\"\u003e(\u003c/span\u003e\u003cspan class=\"nc\"\u003eString\u003c/span\u003e\u003cspan class=\"o\"\u003e[]\u003c/span\u003e \u003cspan class=\"n\"\u003eargs\u003c/span\u003e\u003cspan class=\"o\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e{\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003etry\u003c/span\u003e \u003cspan class=\"o\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"c1\"\u003e// ローカルの8080番ポート(ngrok起動時のオプションで指定した番号)で待ち受けます。\u003c/span\u003e\n            \u003cspan class=\"c1\"\u003e// ngrokが同じローカルマシンで動いているので、\"127.0.0.1\"だけで待ち受ければよい。\u003c/span\u003e\n            \u003cspan class=\"c1\"\u003e// (外部の環境からリクエストを受ける必要がない)\u003c/span\u003e\n            \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eserver\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nc\"\u003eHttpServer\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"na\"\u003ecreate\u003c/span\u003e\u003cspan class=\"o\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nc\"\u003eInetSocketAddress\u003c/span\u003e\u003cspan class=\"o\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"127.0.0.1\"\u003c/span\u003e\u003cspan class=\"o\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e8080\u003c/span\u003e\u003cspan class=\"o\"\u003e),\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"o\"\u003e);\u003c/span\u003e\n\n            \u003cspan class=\"c1\"\u003e// ローカルサーバの\"/webhook\"にリクエストが来た時に呼ばれるハンドラを登録。\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eserver\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"na\"\u003ecreateContext\u003c/span\u003e\u003cspan class=\"o\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"/webhook\"\u003c/span\u003e\u003cspan class=\"o\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nc\"\u003eWebhookHandler\u003c/span\u003e\u003cspan class=\"o\"\u003e());\u003c/span\u003e\n\n            \u003cspan class=\"c1\"\u003e// 今回はデフォルトのExecutorを利用してHTTPリクエストを処理するように指定(null)。\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eserver\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"na\"\u003esetExecutor\u003c/span\u003e\u003cspan class=\"o\"\u003e(\u003c/span\u003e\u003cspan class=\"kc\"\u003enull\u003c/span\u003e\u003cspan class=\"o\"\u003e);\u003c/span\u003e\n\n            \u003cspan class=\"c1\"\u003e// HttpServerの待ち受けを開始します。\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eserver\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"na\"\u003estart\u003c/span\u003e\u003cspan class=\"o\"\u003e();\u003c/span\u003e\n\n            \u003cspan class=\"nc\"\u003eSystem\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"na\"\u003eout\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"na\"\u003eprintln\u003c/span\u003e\u003cspan class=\"o\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"終了するには何かキーを押してください。\"\u003c/span\u003e\u003cspan class=\"o\"\u003e);\u003c/span\u003e\n            \u003cspan class=\"nc\"\u003eSystem\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"na\"\u003ein\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"na\"\u003eread\u003c/span\u003e\u003cspan class=\"o\"\u003e();\u003c/span\u003e\n\n            \u003cspan class=\"c1\"\u003e// HttpServerの待ち受けを停止します。\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eserver\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"na\"\u003estop\u003c/span\u003e\u003cspan class=\"o\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"o\"\u003e);\u003c/span\u003e\n\n        \u003cspan class=\"o\"\u003e}\u003c/span\u003e \u003cspan class=\"k\"\u003ecatch\u003c/span\u003e\u003cspan class=\"o\"\u003e(\u003c/span\u003e\u003cspan class=\"nc\"\u003eIOException\u003c/span\u003e \u003cspan class=\"n\"\u003eioex\u003c/span\u003e\u003cspan class=\"o\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eioex\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"na\"\u003eprintStackTrace\u003c/span\u003e\u003cspan class=\"o\"\u003e();\u003c/span\u003e\n        \u003cspan class=\"o\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"o\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"o\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"54-pythonでの実装の例\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#54-python%E3%81%A7%E3%81%AE%E5%AE%9F%E8%A3%85%E3%81%AE%E4%BE%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e5.4. Pythonでの実装の例\u003c/h2\u003e\n\n\u003cp\u003e標準の\u003ccode\u003ehttp.server\u003c/code\u003eモジュールを使っても実装できますが、今回は\u003ccode\u003eflask\u003c/code\u003eを使っちゃいます。\u003cbr\u003e\n※ 説明用にコメントは多めに書いています。\u003c/p\u003e\n\n\u003cp\u003eflask入ってなかったら、以下でインストール(\u003ccode\u003epip\u003c/code\u003e使う場合の例)。\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"console\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003epip使ってflaskインストールする例\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"gp\"\u003e$\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003epip \u003cspan class=\"nb\"\u003einstall \u003c/span\u003eflask\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cblockquote\u003e\n\u003cp\u003ePython 3.6 + flask 1.1 + Windows 10 Pro 64bitで動作確認しています。\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"python\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003ewebhook_listener.py\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"with-code\"\u003e\u003ccode\u003e\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"nn\"\u003eflask\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003eFlask\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003erequest\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e# 起動時の自分の名前からFlaskのインスタンス作成。\n\u003c/span\u003e\u003cspan class=\"n\"\u003eapp\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eFlask\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003e__name__\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e# Webhookに通知が来た時に呼ばれるハンドラ。\n# 以下の指定では、\"/webhook\"に対するHTTP POST, GET, PUT, DELETEリクエストの場合に呼ばれます。\n# パスが違うと\"404 Not Found\", リストにないメソッドの場合は、\"405 Method Not Allowed\"が返ります。\n\u003c/span\u003e\u003cspan class=\"o\"\u003e@\u003c/span\u003e\u003cspan class=\"n\"\u003eapp\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eroute\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"/webhook\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003emethods\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s\"\u003e\"POST\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\"GET\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\"PUT\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\"DELETE\"\u003c/span\u003e\u003cspan class=\"p\"\u003e])\u003c/span\u003e\n\u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003ehandle_webhook\u003c/span\u003e\u003cspan class=\"p\"\u003e():\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e# Webhook通知元の仕様にもよるが、HTTPのPOSTかGETかで通知が来る前提にして、\n\u003c/span\u003e    \u003cspan class=\"c1\"\u003e# それ以外は、\"204 No Content\"を返す。\n\u003c/span\u003e    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"n\"\u003erequest\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003emethod\u003c/span\u003e \u003cspan class=\"o\"\u003e!=\u003c/span\u003e \u003cspan class=\"s\"\u003e'POST'\u003c/span\u003e \u003cspan class=\"ow\"\u003eand\u003c/span\u003e \u003cspan class=\"n\"\u003erequest\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003emethod\u003c/span\u003e \u003cspan class=\"o\"\u003e!=\u003c/span\u003e \u003cspan class=\"s\"\u003e'GET'\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e# レスポンスのBodyとStatus Codeをタプルで返します(make_response()でタプル指定するのと同じ)。\n\u003c/span\u003e        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e''\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e204\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e# Bodyの内容を読み込んで表示するだけ。\n\u003c/span\u003e    \u003cspan class=\"k\"\u003eprint\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003erequest\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eget_data\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eas_text\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"bp\"\u003eTrue\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n\n\n    \u003cspan class=\"c1\"\u003e# ==============================================================\n\u003c/span\u003e    \u003cspan class=\"c1\"\u003e# 以下、レスポンスで何を返すべきかは通知元のサービス側の仕様にもよる。\n\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e# \"204 No Content\"を返せばいい場合は、以下にコメントアウトした1行だけでBody出力不要。\n\u003c/span\u003e    \u003cspan class=\"c1\"\u003e# return ('', 204)\n\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e# レスポンスのBodyは決め打ち。\n\u003c/span\u003e    \u003cspan class=\"c1\"\u003e# ディクショナリで返せば、jsonに変換(jsonify()を呼ぶのと同じ)して、Content-Typeヘッダも\"application/json\"にしてくれます。\n\u003c/span\u003e    \u003cspan class=\"c1\"\u003e# より厳密には、make_response()が呼ばれて、その中でjsonify()が呼ばれて、その中で、Content-Typeが\"application/json\"に設定される。\n\u003c/span\u003e    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"s\"\u003e'status'\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"s\"\u003e'OK'\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\n\u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"n\"\u003e__name__\u003c/span\u003e \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"s\"\u003e'__main__'\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e# ローカルの8080番ポート(ngrok起動時のオプションで指定した番号)で待ち受け開始。\n\u003c/span\u003e    \u003cspan class=\"c1\"\u003e# ngrokが同じローカルマシンで動いているので、\"127.0.0.1\"だけで待ち受ければよい。\n\u003c/span\u003e    \u003cspan class=\"c1\"\u003e# (外部の環境からリクエストを受ける必要がない)\n\u003c/span\u003e    \u003cspan class=\"n\"\u003eapp\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003erun\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e'127.0.0.1'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e8080\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n","createdAt":"2020-02-25T04:01:41Z","elapsedYearsFromLastModifiedAt":1,"encryptedId":"RJMBmF+c6cze4bDhFwU12Y1QVrGi0Nwx2A==--NeKBVvyNIhBtzWfU--ys/mXVqid1IEYMKueH/tDA==","isBanned":false,"isDeprecated":true,"isDestroyableByViewer":false,"isEditRequestReadableByViewer":true,"isEditRequestSendableByViewer":true,"isLikableByViewer":true,"isLikedByViewer":false,"isPublic":true,"isSlide":false,"isStockableByViewer":true,"isStockedByViewer":false,"isSubscribableByViewer":false,"isSubscribedByViewer":false,"isUpdatableByViewer":false,"isUpdated":true,"lastModifiedAt":"2020-03-04T08:11:06Z","likesCount":1,"linkUrl":"https://qiita.com/thrzn41/items/276aaaf5df11e351880a","organization":null,"originalId":1171589,"stockedCount":5,"title":"Go, C#, Java, Pythonの簡易サーバーでクラウドサービスのWebhook通知を受け取る","toc":"\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#1-%E3%82%84%E3%82%8B%E3%81%93%E3%81%A8\"\u003e1. やること\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#2-%E5%BF%85%E8%A6%81%E3%81%AA%E3%82%82%E3%81%AE\"\u003e2. 必要なもの\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#3-ngrok%E3%81%AE%E6%BA%96%E5%82%99%E3%81%A8%E8%B5%B7%E5%8B%95\"\u003e3. ngrokの準備と起動\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#31-ngrok%E3%81%AE%E3%83%80%E3%82%A6%E3%83%B3%E3%83%AD%E3%83%BC%E3%83%89\"\u003e3.1. ngrokのダウンロード\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#32-ngrok%E3%81%AE%E3%82%A2%E3%82%AB%E3%82%A6%E3%83%B3%E3%83%88%E3%81%AB%E6%8E%A5%E7%B6%9A%E3%81%99%E3%82%8B\"\u003e3.2. ngrokのアカウントに接続する\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#33-ngrok%E3%82%92%E8%B5%B7%E5%8B%95%E3%81%99%E3%82%8B\"\u003e3.3. ngrokを起動する\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#34-%E3%81%93%E3%81%93%E3%81%BE%E3%81%A7%E3%81%AE%E6%89%8B%E9%A0%86%E3%81%A7ngrok%E3%81%8C%E3%82%84%E3%81%A3%E3%81%A6%E3%81%8F%E3%82%8C%E3%82%8B%E3%81%93%E3%81%A8\"\u003e3.4. ここまでの手順でngrokがやってくれること\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#35-web-interface%E3%82%82%E4%BE%BF%E5%88%A9\"\u003e3.5. Web Interfaceも便利\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#36-api%E3%82%82%E3%81%82%E3%82%8A%E3%81%BE%E3%81%99\"\u003e3.6. APIもあります\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#4-%E3%81%93%E3%81%93%E3%81%BE%E3%81%A7%E3%81%A7%E3%82%82%E3%81%86webhook%E3%81%AE%E9%80%9A%E7%9F%A5%E3%81%AF%E5%8F%97%E3%81%91%E3%82%89%E3%82%8C%E3%81%BE%E3%81%99\"\u003e4. ここまでで、もうWebhookの通知は受けられます\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#5-%E5%90%84%E7%A8%AE%E8%A8%80%E8%AA%9E%E3%81%A7%E7%B0%A1%E6%98%93%E3%82%B5%E3%83%BC%E3%83%90%E3%82%92%E5%AE%9F%E8%A3%85%E3%81%99%E3%82%8B\"\u003e5. 各種言語で簡易サーバを実装する\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#51-go%E3%81%A7%E3%81%AE%E5%AE%9F%E8%A3%85%E3%81%AE%E4%BE%8B\"\u003e5.1. Goでの実装の例\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#52-c%E3%81%A7%E3%81%AE%E5%AE%9F%E8%A3%85%E3%81%AE%E4%BE%8B\"\u003e5.2. C#での実装の例\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#53-java%E3%81%A7%E3%81%AE%E5%AE%9F%E8%A3%85%E3%81%AE%E4%BE%8B\"\u003e5.3. Javaでの実装の例\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#54-python%E3%81%A7%E3%81%AE%E5%AE%9F%E8%A3%85%E3%81%AE%E4%BE%8B\"\u003e5.4. Pythonでの実装の例\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n","totalPv":2367,"uuid":"276aaaf5df11e351880a","banReason":null,"adventCalendarItem":null,"author":{"encryptedId":"dtie+2LZHfxjDVzKuSReZU+2b4Jv--aI6zHQG5O9IIsvPw--ZdG03Zm4Q1KoABWBWq//6Q==","originalId":211666,"description":"","facebookUrl":null,"githubUrl":"https://github.com/thrzn41","isBlockingViewer":false,"isFollowableByViewer":true,"isFollowedByViewer":false,"isTweetWebNotificationReceivable":true,"linkedinUrl":null,"name":"","profileImageUrl":"https://qiita-image-store.s3.amazonaws.com/0/211666/profile-images/1510486825","profileImageUrlW48":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F211666%2Fprofile-images%2F1510486825?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=48\u0026s=dfadb0170664e4a80e9c0c12c02b26e8","profileImageUrlW75":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F211666%2Fprofile-images%2F1510486825?ixlib=rb-4.0.0\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=59cd7a97c24161369817eef5915ecc9a","urlName":"thrzn41","websiteUrl":null,"twitterUrl":"https://twitter.com/thrzn41","twitterUrlName":"thrzn41","revealedOrganizations":{"edges":[]}},"tags":[{"name":"Java","urlName":"java"},{"name":"Python","urlName":"python"},{"name":"Go","urlName":"go"},{"name":"C#","urlName":"csharp"},{"name":"ngrok","urlName":"ngrok"}],"followingLikers":{"edges":[]},"comments":{"totalCount":0}},"comments":[],"client":null,"ads_event_emitter":null}}</script>
